!function(){function e(e,t,i){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var o=i.call(e,t||"default");if("object"!=typeof o)return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}System.register(["./vendor-legacy-b155b5ab.js","./index-legacy-dcdeb215.js","./LocationFieldOptions-legacy-6511bd68.js","./lodash-legacy-78c9f2a0.js","./apexcharts-legacy-d546c9db.js","./chartjs-legacy-11371d29.js","./barcode-qrcode-reader-legacy-b9a6bf31.js"],(function(t,i){"use strict";var o,n,a,s,d,r,l,c,u,g,p,h,y,f,m,b,v,_,A,w,C,T,D,I,E,S,O,V,H,P,B,N,G,W,F,L,M,k,U,x,R,j,Y,q,$,z,Q;return{setters:[e=>{o=e.d,n=e.r,a=e.cF,s=e.a,d=e.e,r=e.y,l=e.z,c=e.l,u=e.x,g=e.aJ,p=e.j,h=e.aK,y=e.f,f=e.be,m=e.aL,b=e.aM,v=e.G,_=e.D,A=e.A,w=e.d2,C=e.d1,T=e.B,D=e.m,I=e.M,E=e.F,S=e.J,O=e.L,V=e.cY,H=e.ab,P=e.bp,B=e.aN,N=e.b7,G=e.bj,W=e.V,F=e.aH,L=e.N},e=>{M=e.j,k=e.C,U=e.A,x=e.L,R=e.a,j=e.c,Y=e.t,q=e.b,$=e.k,z=e._},e=>{Q=e.g},null,null,null,null],execute:function(){var i=document.createElement("style");i.textContent=".section-header ion-label[data-v-54e3ec5a]{font-size:1rem;font-weight:600;letter-spacing:.5px;color:var(--ion-color-primary);text-transform:uppercase}ion-checkbox[data-v-54e3ec5a]{--size: 24px !important}ion-radio[data-v-54e3ec5a]{--size: 27px !important}.error[data-v-54e3ec5a]{color:red;font-weight:700;font-style:italic}\n",document.head.appendChild(i);const K="2016-04-30",J={"Adults with stage 4 conditions":{concept:"WHO STAGE IV ADULT",priority:1,conditions:{stage:e=>4===e}},"Classify as stage 4 when reason for ART is WHO STAGE 4":{concept:"WHO STAGE IV ADULT",priority:2,conditions:{reasonForArt:e=>"WHO STAGE IV ADULT"===e}},"Adults with stage 3 conditions":{concept:"WHO STAGE III ADULT",priority:3,conditions:{stage:e=>3===e}},"Adults with stage 2 conditions":{concept:"WHO STAGE II ADULT",priority:4,conditions:{stage:e=>2===e}},"Adults with stage 1 conditions":{concept:"WHO STAGE I ADULT",priority:5,conditions:{stage:e=>1===e}}},X={"Children with stage 4 conditions":{concept:"WHO STAGE IV PEDS",priority:1,conditions:{stage:e=>4===e}},"Classify as stage 4 when reason for ART is WHO STAGE 4":{concept:"WHO STAGE IV PEDS",priority:2,conditions:{reasonForArt:e=>"WHO STAGE IV PEDS"===e}},"For children with stage 3 conditions":{concept:"WHO STAGE III PEDS",priority:3,conditions:{stage:e=>3===e}},"Children with stage 2 conditions":{concept:"WHO STAGE II PEDS",priority:4,conditions:{stage:e=>2===e}},"Children with stage 1 conditions":{concept:"WHO STAGE I PEDS",priority:5,conditions:{stage:e=>1===e}}},Z={"Warn if Severe weight loss is selected when actual patient BMI is acceptable":{priority:1,actions:{alert:async e=>await M(`Patient's BMI of ${e.bmi} greater than 18.5, do you wish to proceed?`,{confirmBtnLabel:"Yes, keep severe weightloss",cancelBtnLabel:"No, cancel"})},conditions:{selectedCondition:e=>"Severe weight loss >10% and/or BMI <18.5kg/m^2, unexplained"===e,bmi:e=>e>18.5}},"Warn for contradicting stage defining conditions":{priority:1,actions:{alert:async e=>!!(await M("CONTRADICTING STAGE DEFINING CONDITIONS",{confirmBtnLabel:"Keep Asymptomatic",cancelBtnLabel:"Keep other(s)"}))},conditions:{selectedCondition:e=>"Asymptomatic HIV infection"===e}}},ee={"Enable TB staging condition if client is TB positive":{priority:1,actions:{isChecked:!0},description:{color:"danger",show:"always",info:()=>"Client registered as a TB Patient in the TB Module"},conditions:{tbPositive:e=>e,selectedCondition:e=>/\bTuberculosis \(PTB or EPTB\)|\bPulmonary tuberculosis/i.test(e)}},"Enable TB staging condition if client is EPTB positive":{priority:1,actions:{isChecked:!0},description:{color:"danger",show:"always",info:()=>"Client registered with EPTB in TB Module"},conditions:{eptbPositive:e=>e,selectedCondition:e=>/Extrapulmonary tuberculosis/i.test(e)}},"For children whose current weight percentile is less than 70":{priority:1,actions:{isChecked:!0},description:{color:"danger",show:"always",info:e=>`Child has a low weight percentile of ${e.weightPercentile}`},conditions:{selectedCondition:e=>"Severe unexplained wasting or malnutrition not responding to treatment (weight-for-height/ -age <70% or MUAC less than 11cm or oedema)"===e,weightPercentile:e=>e<70}},"Enable Moderate unexplained malnutrition for children whose weight for height is 70-79%":{priority:1,actions:{isChecked:!0},description:{color:"danger",show:"always",info:e=>`Child has weight percentile of ${e.weightPercentile}`},conditions:{selectedCondition:e=>"Moderate unexplained wasting/malnutrition not responding to treatment (weight-for-height/ -age 70-79% or muac 11-12 cm)"===e,weightPercentile:e=>e>=70&&e<=79}},"Disable moderate weight loss when Severe unexplained weight loss is chosen":{priority:2,actions:{isChecked:!1,disabled:!0},description:{color:"secondary",show:"always",info:()=>"Severe weight loss/manutrition was already selected"},conditions:{selectedCondition:e=>"Moderate unexplained wasting/malnutrition not responding to treatment (weight-for-height/ -age 70-79% or muac 11-12 cm)"===e,selectedConditions:e=>e.includes("Severe unexplained wasting or malnutrition not responding to treatment (weight-for-height/ -age <70% or MUAC less than 11cm or oedema)")}}},te={"Enable TB staging condition if client is TB positive":{priority:1,actions:{isChecked:!0},description:{color:"danger",show:"always",info:()=>"Client registered Positive in TB Module"},conditions:{tbPositive:e=>e,selectedCondition:e=>/\bTuberculosis \(PTB or EPTB\)|\bPulmonary tuberculosis/i.test(e)}},"Enable TB staging condition if client is EPTB positive":{priority:1,actions:{isChecked:!0},description:{color:"danger",show:"always",info:()=>"Client registered with EPTB in TB Module"},conditions:{eptbPositive:e=>e,selectedCondition:e=>/Extrapulmonary tuberculosis/i.test(e)}},"Adults with a BMI less than 16":{priority:1,actions:{isChecked:!0},description:{color:"danger",show:"always",info:e=>`Adult has a low BMI of ${e.bmi}`},conditions:{selectedCondition:e=>"Severe weight loss >10% and/or BMI <18.5kg/m^2, unexplained"===e,bmi:e=>e<16}},"Adults whose BMI is between 16 and 18":{priority:3,actions:{isChecked:!0},description:{color:"warning",show:"onChecked",info:e=>`BMI of ${e.bmi} is between 16 and 18`},conditions:{selectedCondition:e=>"Moderate weight loss less than or equal to 10 percent, unexplained"===e,bmi:e=>e>=16&&e<=18.5}},"Disable Moderate weight loss if severe weightloss is selected":{priority:2,actions:{isChecked:!1,disabled:!0},description:{color:"secondary",show:"always",info:()=>"Severe weight loss was already selected"},conditions:{selectedCondition:e=>"Moderate weight loss less than or equal to 10 percent, unexplained"===e,selectedConditions:e=>e.includes("Severe weight loss >10% and/or BMI <18.5kg/m^2, unexplained")}}},ie={"Children under twelve months who tested positive on Rapid test and have presumed severe HIV":{concept:"PRESUMED SEVERE HIV",priority:1,conditions:{ageInMonths:e=>e<12,selectedConditions:e=>k.getConceptsByCategory("pshd_condition").some((t=>e.includes(t.name))),testType:e=>"HIV rapid test"===e}},"Has stage 4 conditions":{concept:"WHO STAGE IV PEDS",priority:2,conditions:{stage:e=>4===e}},"Has stage 3 conditions":{concept:"WHO STAGE III PEDS",priority:3,conditions:{stage:e=>3===e}},"Children under twelve who tested positive via HIV DNA Polymerase Chain Reaction test":{concept:"HIV DNA polymerase chain reaction",priority:4,conditions:{ageInMonths:e=>e<12,testType:e=>"HIV DNA polymerase chain reaction"===e}},"Children who are less than 24 months":{concept:"HIV infected",priority:5,conditions:{ageInMonths:e=>e<24}},"Children between 24 and 56 months who have stage 2 or 1 conditions":{concept:"CD4 COUNT LESS THAN OR EQUAL TO 750",priority:6,conditions:{ageInMonths:e=>e>=24&&e<=56,cd4Date:e=>new Date(e)<=new Date(K),cd4:e=>e<=750,cd4Modifier:e=>"<"===e||"="===e,stage:e=>e<=2}},"Children with CD4 count less than 500 and have stage 1 and stage 2 conditions":{concept:"CD4 COUNT LESS THAN OR EQUAL TO 500",priority:7,conditions:{cd4:e=>e<=500,cd4Date:e=>new Date(e)<=new Date(K),cd4Modifier:e=>"<"===e||"="===e,stage:e=>e<=2}},"Children who are more than five years old and have cd4 count less than 500":{concept:"CD4 COUNT LESS THAN OR EQUAL TO 500",priority:9,conditions:{cd4Date:e=>new Date(e)<=new Date(K),age:e=>e>5,cd4:e=>e<=500,cd4Modifier:e=>"<"===e||"="===e}},"Children over date 2014-04-01 and less than Five years old":{concept:"HIV infected",priority:10,conditions:{date:e=>e>="2014-04-01",age:e=>e<=5}},"Women who are breast feeding":{concept:"BREASTFEEDING",priority:11,conditions:{gender:e=>"F"===e,breastFeeding:e=>"Yes"===e,stage:e=>e<=2}},"Women who are pregnant":{concept:"PATIENT PREGNANT",priority:12,conditions:{gender:e=>"F"===e,pregnant:e=>"Yes"===e,stage:e=>e<=2}},"Asymptomatic patient with either stage one or stage two conditions":{concept:"Asymptomatic",priority:13,conditions:{stage:e=>e<=2}}},oe={"Has stage 4 conditions":{concept:"WHO STAGE IV ADULT",priority:1,conditions:{stage:e=>4===e}},"Has HIV wasting syndrome identified in stage 3":{concept:"WHO STAGE IV ADULT",priority:2,conditions:{selectedConditions:e=>k.getConceptsByCategory("severe_hiv_wasting_syndrome").reduce(((t,i)=>e.includes(i.name)?t+1:0),0)>=2}},"Has stage 3 conditions":{concept:"WHO STAGE III ADULT",priority:3,conditions:{stage:e=>3===e}},"CD4 less than 350 for adults before 2014":{concept:"cd4 less than or equal to 350",priority:4,conditions:{cd4Date:e=>new Date(e)<=new Date(K),cd4:e=>e<=350,cd4Modifier:e=>"<"===e||"="===e}},"CD4 less than 250 for adults after 2014":{concept:"cd4 less than or equal to 250",priority:4,conditions:{cd4Date:e=>new Date(e)<=new Date(K),cd4:e=>e<=250,cd4Modifier:e=>"<"===e||"="===e}},"CD4 less than 350 for adults after 2014":{concept:"cd4 less than or equal to 350",priority:5,conditions:{cd4Date:e=>new Date(e)<=new Date(K),cd4:e=>e<=350,cd4Modifier:e=>"<"===e||"="===e}},"CD4 less than 500 for adults after 2014":{concept:"cd4 less than or equal to 500",priority:6,conditions:{cd4Date:e=>new Date(e)<=new Date(K),cd4:e=>e<=500,cd4Modifier:e=>"<"===e||"="===e}},"Women who are breast feeding":{concept:"BREASTFEEDING",priority:8,conditions:{gender:e=>"F"===e,breastFeeding:e=>"Yes"===e,stage:e=>e<=2}},"Women who are pregnant":{concept:"PATIENT PREGNANT",priority:7,conditions:{gender:e=>"F"===e,pregnant:e=>"Yes"===e,stage:e=>e<=2}},"Asymptomatic patient with either stage one or stage two conditions":{concept:"Asymptomatic",priority:9,conditions:{stage:e=>e<=2}}};class ne extends U{constructor(t,i,o){super(t,52,o),e(this,"age",void 0),e(this,"confirmatoryTest",void 0),this.age=i,this.confirmatoryTest=null}isAdult(){return this.age>=15}isPedaid(){return this.age<=14}setAge(e){this.age=e}getFacilities(e=""){return x.getFacilities({name:e})}getConfirmatoryTestType(){return this.confirmatoryTest}cd4CountIsValid(e){try{return!!e.match(/^(=|<|>)([0-9]*)$/m)}catch(t){return!1}}getAlertGuidelines(){return Z}getWhoStageGuidelines(){return this.isAdult()?J:X}getProgramEligibilityGuidelines(){return this.isAdult()?oe:ie}getRecommendedConditionGuidelines(){return this.isAdult()?te:ee}getStagingConditions(e){const t=this.getStagingCategoryByNum(e);return U.getConceptsByCategory(t)}buildWhoStageObs(e){return this.buildValueCoded("Who stage",e)}buildWhoCriteriaObs(e){return this.buildValueCoded("Who stages criteria present",e)}buildReasonForArtObs(e){return this.buildValueCoded("Reason for ART eligibility",e)}getStagingCategoryByNum(e){switch(e){case 1:return this.isAdult()?"stage_1_conditions_adults":"stage_1_conditions_pedaids";case 2:return this.isAdult()?"stage_2_conditions_adults":"stage_2_conditions_pedaids";case 3:return this.isAdult()?"stage_3_conditions_adults":"stage_3_conditions_pedaids";case 4:return this.isAdult()?"stage_4_conditions_adults":"stage_4_conditions_pedaids";default:return""}}async loadHivConfirmatoryTestType(){const e=await U.getFirstValueCoded(this.patientID,"Confirmatory hiv test type");e&&(this.confirmatoryTest=e)}}const ae={key:0,style:{"border-bottom":"dashed #ccc"},class:"ion-padding"},se={class:"error"},de={class:"error"},re={class:"accordion_group"},le={style:{"font-weight":"bold"}},ce={class:"error"},ue={class:"ion-padding",slot:"content"},ge={style:{"border-top":"dashed #ccc","border-bottom":"dashed #ccc"},class:"ion-padding"},pe={class:"ion-padding"},he={class:"error"},ye={key:0,class:"ion-padding"},fe={class:"error"},me={class:"error"},be={class:"error"},ve={class:"ion-padding",style:{"border-bottom":"dashed #ccc"}},_e={key:1,class:"ion-padding"},Ae=o({__name:"Staging",props:{hideSubmit:{type:Boolean,default:!0}},setup(e){const t=new R,i=n({}),o=new ne(t.getID(),t.getAge(),-1),M=a({stage_4_conditions:{title:"Stage 4 Conditions",options:[]},stage_3_conditions:{title:"Stage 3 Conditions",options:[]},stage_2_conditions:{title:"Stage 2 Conditions",options:[]},stage_1_conditions:{title:"Stage 1 Conditions",options:[]}}),U=n([]),x=a({cd4:"",cd4Date:"",isChildBearing:!1,reasonForArt:"",pregnant:"",breastFeeding:"",cd4Available:"",cd4Location:"",whoStage:"",staging:[],confirmatoryTest:"",selectedFacilityObj:null}),z={reasonForArt:{buildObs:()=>o.buildReasonForArtObs(x.reasonForArt),suggestAvalue:()=>({"PRESUMED SEVERE HIV":{priority:1,condition:()=>t.getAgeInMonths()<12&&"HIV rapid test"===x.confirmatoryTest&&k.getConceptsByCategory("pshd_condition").some((e=>oe().includes(e.name)))},"WHO STAGE IV PEDS":{priority:2,condition:()=>o.isPedaid()&&K(["stage_4_conditions"])},"WHO STAGE III PEDS":{priority:3,condition:()=>o.isPedaid()&&K(["stage_3_conditions"])},"HIV DNA polymerase chain reaction":{priority:4,condition:()=>t.getAgeInMonths()<12&&"HIV DNA polymerase chain reaction"===x.confirmatoryTest},"CD4 COUNT LESS THAN OR EQUAL TO 750":{priority:5,condition:()=>te(750)&&ie()&&J()&&t.ageInMonths()>=24&&t.ageInMonths()<=56},"CD4 COUNT LESS THAN OR EQUAL TO 500":{priority:6,condition:()=>o.isPedaid()&&te(500)&&ie()&&J()},"HIV infected":{priority:7,condition:()=>t.getAgeInMonths()<24||t.getAge()<=5},"WHO STAGE IV ADULT":{priority:1,condition:()=>{const e=k.getConceptsByCategory("severe_hiv_wasting_syndrome");return o.isAdult()&&(K(["stage_4_conditions"])||e.filter((e=>oe().includes(e.name))).length>=2)}},"WHO STAGE III ADULT":{priority:2,condition:()=>o.isAdult()&&K(["stage_3_conditions"])},"cd4 less than or equal to 350":{priority:3,condition:()=>o.isAdult()&&te(350)&&J()},"cd4 less than or equal to 250":{priority:4,condition:()=>o.isAdult()&&te(250)&&J()},"cd4 less than or equal to 500":{priority:4,condition:()=>o.isAdult()&&te(500)&&J()},BREASTFEEDING:{priority:5,condition:()=>o.isAdult()&&"Yes"===x.breastFeeding&&ie()},"PATIENT PREGNANT":{priority:6,condition:()=>o.isAdult()&&"Yes"===x.pregnant&&ie()},Asymptomatic:{priority:7,condition:()=>ie()}})},whoStage:{buildObs:()=>o.buildWhoStageObs(x.whoStage),suggestAvalue:()=>({"WHO STAGE IV ADULT":{priority:1,condition:()=>o.isAdult()&&K(["stage_4_conditions"])},"WHO STAGE III ADULT":{priority:2,condition:()=>o.isAdult()&&K(["stage_3_conditions"])},"WHO STAGE II ADULT":{priority:3,condition:()=>o.isAdult()&&K(["stage_2_conditions"])},"WHO STAGE I ADULT":{priority:4,condition:()=>o.isAdult()&&K(["stage_1_conditions"])},"WHO STAGE IV PEDS":{priority:1,condition:()=>o.isPedaid()&&(K(["stage_4_conditions"])||"WHO STAGE IV PEDS"===x.reasonForArt)},"WHO STAGE III PEDS":{priority:2,condition:()=>o.isPedaid()&&K(["stage_3_conditions"])},"WHO STAGE II PEDS":{priority:3,condition:()=>o.isPedaid()&&K(["stage_2_conditions"])},"WHO STAGE I PEDS":{priority:4,condition:()=>o.isPedaid()&&K(["stage_1_conditions"])}})},cd4Available:{required:()=>!0,dataHandler:e=>{"Yes"!=e&&(x.cd4="",x.cd4Date=""),i.value.cd4="",i.value.cd4Date="",i.value.cd4Location=""}},pregnant:{required:()=>x.isChildBearing,buildObs:()=>o.buildValueCoded("Is patient pregnant?",x.pregnant)},breastFeeding:{required:()=>x.isChildBearing,buildObs:()=>o.buildValueCoded("Is patient breast feeding?",x.breastFeeding)},cd4:{required:()=>"Yes"===x.cd4Available,validation:()=>{ee()?Z()>1e4&&(i.value.cd4="CD4 value cannot exceed 10,000"):i.value.cd4="Invalid cd4 count format, expected e.g. <100 or >500 or =750"},buildObs:()=>o.buildValueNumber("CD4 count",Z(),X())},cd4Date:{required:()=>"Yes"===x.cd4Available,dataHandler:e=>{e&&(x.cd4Date=L(e).format("YYYY-MM-DD"))},validation:()=>{const e=new Date(x.cd4Date);if(isNaN(e.getTime()))return void(i.value.cd4Date="Invalid CD4 date");const o=new Date(t.getBirthdate());(e>new Date||e<o)&&(i.value.cd4Date="CD4 date must not exceed today or be earlier than birthdate")},buildObs:()=>o.buildValueDate("Cd4 count datetime",x.cd4Date)},cd4Location:{required:()=>"Yes"===x.cd4Available,dataHandler:e=>x.cd4Location=e.label,searchFacilities:e=>Q(e).then((e=>U.value=e)),buildObs:()=>o.buildValueText("Cd4 count location",x.cd4Location)},staging:{validation:()=>{if(Object.keys(M).every((e=>we(e)<=0)))return void(i.value.staging="Please select one or more staging conditions");const e=["stage_4_conditions","stage_3_conditions","stage_2_conditions"].some((e=>we(e)>0));M.stage_1_conditions.options.some((e=>/asymptomatic/i.test(e.name)&&e.checked))&&e&&(i.value.staging="Asymptomatic cannot be selected with other staging conditions")},buildObs:()=>Object.keys(M).reduce(((e,t)=>(M[t].options.forEach((t=>{t.checked&&e.push(t.name)})),e)),[]).map((e=>o.buildWhoCriteriaObs(e)))}};function K(e){return e.some((e=>we(e)>0))}function J(){return new Date(x.cd4Date)<=new Date("2016-04-30")}function X(){var e,t,i;return null!==(e=null===(t=`${null!==(i=x.cd4)&&void 0!==i?i:""}`.match(/^([=><]{1})/))||void 0===t?void 0:t[0])&&void 0!==e?e:""}function Z(){var e,t;return parseInt(null!==(e=null===(t=`${x.cd4}`.match(/\d+$/))||void 0===t?void 0:t[0])&&void 0!==e?e:"0")}function ee(){return/^([=><]{1})(\d+)$/i.test(`${x.cd4}`)}function te(e){if(!ee())return!1;const t=X(),i=Z();return"="===t&&e===i||("<"===t&&i<=e||">"===t&&i>=e)}function ie(){return K(["stage_2_conditions","stage_1_conditions"])}function oe(){return Object.keys(M).reduce(((e,t)=>(M[t].options.forEach((t=>t.checked&&e.push(t.name))),e)),[])}function Ae(e){if(i.value[e]="","function"==typeof z[e].required){if(z[e].required()&&!x[e])return void(i.value[e]="This field is required")}x[e]&&"function"==typeof z[e].validation&&z[e].validation()}function we(e){return M[e].options.filter((e=>e.checked)).length}function Ce(e,t){e in z&&"function"==typeof z[e].dataHandler&&z[e].dataHandler(t),Ae(e),Object.keys(z).forEach((e=>function(e){if(z[e]&&"suggestAvalue"in z[e]){var t,i;x[e]="";const o=z[e].suggestAvalue(),n=Object.keys(o).reduce(((e,t)=>{const i=o[t];return"function"==typeof i.condition&&i.condition()?[...e,{value:t,priority:i.priority}]:e}),[]);x[e]=null!==(t=null===(i=n.sort(((e,t)=>e.priority-t.priority)))||void 0===i||null===(i=i[0])||void 0===i?void 0:i.value)&&void 0!==t?t:""}}(e)))}async function Te(){Object.keys(z).forEach((e=>Ae(e)));if(Object.keys(i.value).some((e=>`${i.value[e]}`.length>=1)))return Y("Please review form for errors");const e=await Promise.all(Object.keys(x).reduce(((e,t)=>{if(t in z&&x[t]&&"function"==typeof z[t].buildObs){const i=z[t].buildObs();return Array.isArray(i)?[...e,...i]:[...e,i]}return e}),[]));o.createEncounter().then((()=>o.saveObservationList(e).then((()=>{q("Observations saved!")})).catch((e=>{console.error(e),$("Error has occured while saving observations")})))).catch((()=>$("Unable to save data")))}return s((async()=>{await async function(){await o.loadHivConfirmatoryTestType(),x.confirmatoryTest=o.getConfirmatoryTestType(),x.isChildBearing=t.isChildBearing()}(),Object.keys(M).forEach((e=>{var t,i;const n=Number(null!==(t=null===(i=e.match(/\d+/))||void 0===i?void 0:i[0])&&void 0!==t?t:0),a=o.getStagingConditions(n);M[e].options=a.map((e=>({checked:!1,name:e.name,concept_id:e.concept_id})))}))})),(e,t)=>(d(),r(u(F),null,{default:l((()=>[c(u(g),null,{default:l((()=>t[14]||(t[14]=[p("span",{class:"section-header ion-text-left",style:{"margin-bottom":"10px"}},[p("h2",{style:{color:"gray","font-size":"20px","font-weight":"600","margin-left":"10px"}},"HIV Staging"),p("hr",{style:{"border-top":"1px dashed #0c0c0c","margin-top":"10px"}})],-1)]))),_:1,__:[14]}),c(u(h),null,{default:l((()=>[x.isChildBearing?(d(),y("div",ae,[c(u(f),null,{default:l((()=>[c(u(m),null,{default:l((()=>[c(u(b),null,{default:l((()=>[c(u(v),{color:"light"},{default:l((()=>[c(u(_),{slot:"start"},{default:l((()=>t[15]||(t[15]=[A("Pregnant?")]))),_:1,__:[15]}),c(u(w),{modelValue:x.pregnant,"onUpdate:modelValue":t[0]||(t[0]=e=>x.pregnant=e),onIonChange:t[1]||(t[1]=e=>Ce("pregnant",e.detail.value)),class:"custom-segment"},{default:l((()=>[c(u(C),{value:"Yes"},{default:l((()=>[c(u(_),null,{default:l((()=>t[16]||(t[16]=[A("Yes")]))),_:1,__:[16]})])),_:1}),c(u(C),{value:"No"},{default:l((()=>[c(u(_),null,{default:l((()=>t[17]||(t[17]=[A("No")]))),_:1,__:[17]})])),_:1})])),_:1},8,["modelValue"])])),_:1}),p("div",se,T(i.value.pregnant),1)])),_:1}),c(u(b),null,{default:l((()=>[c(u(v),{color:"light"},{default:l((()=>[c(u(_),{slot:"start"},{default:l((()=>t[18]||(t[18]=[A("Breastfeeding?")]))),_:1,__:[18]}),c(u(w),{modelValue:x.breastFeeding,"onUpdate:modelValue":t[2]||(t[2]=e=>x.breastFeeding=e),onIonChange:t[3]||(t[3]=e=>Ce("breastFeeding",e.detail.value)),class:"custom-segment"},{default:l((()=>[c(u(C),{value:"Yes"},{default:l((()=>[c(u(_),null,{default:l((()=>t[19]||(t[19]=[A("Yes")]))),_:1,__:[19]})])),_:1}),c(u(C),{value:"No"},{default:l((()=>[c(u(_),null,{default:l((()=>t[20]||(t[20]=[A("No")]))),_:1,__:[20]})])),_:1})])),_:1},8,["modelValue"])])),_:1}),p("div",de,T(i.value.breastFeeding),1)])),_:1})])),_:1})])),_:1})])):D("",!0),p("div",re,[c(u(I),{color:"light"},{default:l((()=>[(d(!0),y(E,null,S(M,((e,o)=>(d(),r(u(O),{key:o},{default:l((()=>[c(u(v),{color:"light",slot:"header"},{default:l((()=>[c(u(_),{style:{color:"grey","font-size":"17px"},class:"ion-padding"},{default:l((()=>[p("b",le,[A(T(e.title)+" ",1),c(u(V),{color:we(`${o}`)>0?"primary":void 0},{default:l((()=>[A(" Selected: "+T(we(`${o}`)),1)])),_:2},1032,["color"])]),p("p",ce,T(i.value.staging),1)])),_:2},1024)])),_:2},1024),p("div",ue,[c(u(H),null,{default:l((()=>[(d(!0),y(E,null,S(e.options,((e,i)=>(d(),r(u(v),{key:i},{default:l((()=>[c(u(P),{modelValue:e.checked,"onUpdate:modelValue":t=>e.checked=t,onIonChange:t=>Ce("staging",{stage_type:o,raw:t,option:e})},null,8,["modelValue","onUpdate:modelValue","onIonChange"]),c(u(_),{style:{margin:"13px"}},{default:l((()=>[A(T(e.name),1)])),_:2},1024),t[21]||(t[21]=p("p",null,null,-1)),e.description?(d(),r(u(B),{key:0,color:e.color},{default:l((()=>[A(T(e.text),1)])),_:2},1032,["color"])):D("",!0)])),_:2,__:[21]},1024)))),128))])),_:2},1024)])])),_:2},1024)))),128))])),_:1})]),p("div",ge,[p("div",pe,[c(u(v),{color:"light"},{default:l((()=>[c(u(_),{slot:"start"},{default:l((()=>t[22]||(t[22]=[A("Recent CD4 count results available?")]))),_:1,__:[22]}),c(u(w),{modelValue:x.cd4Available,"onUpdate:modelValue":t[4]||(t[4]=e=>x.cd4Available=e),onIonChange:t[5]||(t[5]=e=>Ce("cd4Available",e.detail.value)),class:"custom-segment"},{default:l((()=>[c(u(C),{value:"Yes"},{default:l((()=>[c(u(_),null,{default:l((()=>t[23]||(t[23]=[A("Yes")]))),_:1,__:[23]})])),_:1}),c(u(C),{value:"No"},{default:l((()=>[c(u(_),null,{default:l((()=>t[24]||(t[24]=[A("No")]))),_:1,__:[24]})])),_:1})])),_:1},8,["modelValue"])])),_:1}),p("div",he,T(i.value.cd4Available),1)]),"Yes"===x.cd4Available?(d(),y("div",ye,[c(u(f),{class:"ion-padding"},{default:l((()=>[c(u(m),null,{default:l((()=>[c(u(b),null,{default:l((()=>[c(u(_),null,{default:l((()=>t[25]||(t[25]=[A(" CD4 Count Date ")]))),_:1,__:[25]}),c(j,{place_holder:"Enter CD4 Date",onDateUpDated:t[6]||(t[6]=e=>Ce("cd4Date",`${e.value.year}-${e.value.month}-${e.value.day}`)),date_prop:""}),p("div",fe,T(i.value.cd4Date),1)])),_:1})])),_:1}),c(u(m),{style:{"margin-top":"15px"}},{default:l((()=>[c(u(b),null,{default:l((()=>[c(u(N),{modelValue:x.cd4,"onUpdate:modelValue":t[7]||(t[7]=e=>x.cd4=e),onIonInput:t[8]||(t[8]=e=>Ce("cd4",e)),placeholder:"CD4 count e.g. <100 or >500","label-placement":"stacked",label:"CD4 Count",fill:"outline"},null,8,["modelValue"]),p("div",me,T(i.value.cd4),1)])),_:1}),c(u(b),null,{default:l((()=>[c(u(G),{modelValue:x.selectedFacilityObj,"onUpdate:modelValue":[t[9]||(t[9]=e=>x.selectedFacilityObj=e),t[10]||(t[10]=e=>Ce("cd4Location",e))],multiple:!1,taggable:!1,"close-on-select":!0,openDirection:"bottom","tag-placeholder":"Find and select facility",placeholder:"Select CD4 Count location",selectLabel:"",label:"label",searchable:!0,"track-by":"label",onSearchChange:t[11]||(t[11]=e=>z.cd4Location.searchFacilities(e)),options:U.value},null,8,["modelValue","options"]),p("div",be,T(i.value.cd4Location),1)])),_:1})])),_:1})])),_:1})])):D("",!0)]),p("div",ve,[c(u(f),null,{default:l((()=>[c(u(m),null,{default:l((()=>[c(u(b),null,{default:l((()=>[c(u(N),{readonly:"",placeholder:"N/A",label:"REASON FOR ART:",modelValue:x.reasonForArt,"onUpdate:modelValue":t[12]||(t[12]=e=>x.reasonForArt=e)},null,8,["modelValue"])])),_:1}),c(u(b),null,{default:l((()=>[c(u(N),{readonly:"",placeholder:"N/A",label:"WHO STAGE:",modelValue:x.whoStage,"onUpdate:modelValue":t[13]||(t[13]=e=>x.whoStage=e)},null,8,["modelValue"])])),_:1})])),_:1})])),_:1})]),e.hideSubmit?D("",!0):(d(),y("div",_e,[c(u(W),{color:"primary",onClick:Te},{default:l((()=>t[26]||(t[26]=[A("Submit")]))),_:1,__:[26]})]))])),_:1})])),_:1}))}});t("default",z(Ae,[["__scopeId","data-v-54e3ec5a"]]))}}}))}();
