!function(){function e(e,a,t){return(a=function(e){var a=function(e,a){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var l=t.call(e,a||"default");if("object"!=typeof l)return l;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===a?String:Number)(e)}(e,"string");return"symbol"==typeof a?a:a+""}(a))in e?Object.defineProperty(e,a,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[a]=t,e}System.register(["./vendor-legacy-b155b5ab.js","./index-legacy-dcdeb215.js","./patient_type_service-legacy-4b4bea3c.js","./lodash-legacy-78c9f2a0.js","./apexcharts-legacy-d546c9db.js","./chartjs-legacy-11371d29.js","./barcode-qrcode-reader-legacy-b9a6bf31.js"],(function(a,t){"use strict";var l,r,i,o,n,d,s,u,c,p,v,f,m,b,g,x,h,y,_,w,k,N,S,C,V,I,q,P,j,R,D,A,z,T,F,G,U,L,Y,O,M,E,H,$,B,J,Q,W,K,X,Z,ee,ae;return{setters:[e=>{l=e.d,r=e.aQ,i=e.r,o=e.c,n=e.w,d=e.E,s=e.e,u=e.y,c=e.z,p=e.l,v=e.x,f=e.U,m=e.R,b=e.S,g=e.A,x=e.V,h=e.aa,y=e.j,_=e.G,w=e.b7,k=e.I,N=e.cx,S=e.f,C=e.F,V=e.J,I=e.B,q=e.m,P=e.be,j=e.aL,R=e.aM,D=e.D,A=e.bj,z=e.p,T=e.bm,F=e.b0,G=e.d1,U=e.d2,L=e.i,Y=e.bc},e=>{O=e.A,M=e.f,E=e.u,H=e.B,$=e.d,B=e.a,J=e.t,Q=e.g,W=e.R,K=e.b,X=e._,Z=e.h,ee=e.S},e=>{ae=e.P},null,null,null,null],execute:function(){var t=document.createElement("style");t.textContent='.search-loading[data-v-bc686fbd]{padding:16px;text-align:center;color:#666}.search-results[data-v-bc686fbd]{max-height:300px;overflow-y:auto;border:1px solid #e0e0e0;border-radius:8px;margin-top:8px;transition:all .3s ease}.no-results[data-v-bc686fbd]{padding:16px;text-align:center;color:#666}.no-results-content[data-v-bc686fbd]{display:flex;flex-direction:column;align-items:center;gap:8px}.pagination[data-v-bc686fbd]{display:flex;justify-content:center;align-items:center;padding:12px;border-top:1px solid #eee}.pagination-button[data-v-bc686fbd]{background:#f8f9fa;border:1px solid #ddd;border-radius:4px;padding:8px 16px;cursor:pointer;margin:0 8px}.pagination-button[data-v-bc686fbd]:disabled{opacity:.5;cursor:not-allowed}.page-info[data-v-bc686fbd]{font-size:.9rem;color:#555}.reception-form[data-v-bc686fbd]{margin-bottom:7px}.form-section[data-v-bc686fbd]{margin-bottom:20px}.form-row[data-v-bc686fbd]{display:flex;flex-wrap:wrap;margin-bottom:15px;gap:20px}.form-group[data-v-bc686fbd]{flex:1;min-width:200px}.form-group label[data-v-bc686fbd]{display:block;margin-bottom:5px;font-weight:500;color:#333}.required[data-v-bc686fbd]{color:red}ion-modal[data-v-bc686fbd]{--width: 90%;--max-width: 700px;--height: 50%;--border-radius: 4px}.modal-title[data-v-bc686fbd]{font-size:1.3rem;font-weight:500;padding-left:15px}.close-button[data-v-bc686fbd]{--color: var(--ion-color-primary)}.modal-content[data-v-bc686fbd]{padding:16px}.section-header ion-label[data-v-bc686fbd]{font-size:1rem;font-weight:600;letter-spacing:.5px;color:var(--ion-color-primary);text-transform:uppercase}.save-button[data-v-bc686fbd]{--padding-top: 16px;--padding-bottom: 16px;font-weight:500;width:20%;margin-top:100px}ion-input[data-v-bc686fbd]::part(label),ion-select[data-v-bc686fbd]::part(label){font-weight:600}.form-container[data-v-bc686fbd]{background:white;border-radius:4px;padding:2px;height:100%}.form-grid[data-v-bc686fbd]{padding:0}.form-row[data-v-bc686fbd]{margin-bottom:10px}.form-column[data-v-bc686fbd]{padding:0 5px}.input-container[data-v-bc686fbd]{margin-bottom:16px}.save-button[data-v-bc686fbd]{--border-radius: 3px;--padding-top: 12px;--padding-bottom: 12px;--background: #d4edda;margin-top:20px;margin-left:auto;font-weight:500;width:fit-content;display:block;color:#006400;height:40px}.search-section[data-v-bc686fbd]{margin-bottom:20px;transition:all .3s ease}.search-results[data-v-bc686fbd]{max-height:200px;overflow-y:auto;border:1px solid #e0e0e0;border-radius:8px;margin-top:8px;transition:all .3s ease}.no-results[data-v-bc686fbd]{display:flex;justify-content:center;align-items:center;padding:10px}.no-results-content[data-v-bc686fbd]{display:flex;align-items:center;gap:8px}.no-results p[data-v-bc686fbd]{margin:0;color:#666}.no-results ion-button[data-v-bc686fbd]{--padding-start: 0;--padding-end: 0;margin:0}.result-item[data-v-bc686fbd]{padding:12px;border-bottom:1px solid #eee;cursor:pointer;transition:background-color .2s}.result-item[data-v-bc686fbd]:hover{background-color:#f5f5f5}.result-item[data-v-bc686fbd]:last-child{border-bottom:none}.create-form-section[data-v-bc686fbd]{margin-top:20px;animation:fadeIn-bc686fbd .3s ease}@keyframes fadeIn-bc686fbd{0%{opacity:0;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}.form-row[data-v-bc686fbd]{margin-bottom:15px}ion-segment-button[data-v-bc686fbd]{--color: #495057;--color-checked: #fff;--background-checked: #d4edda;--background: #f3f0f0;--indicator-color: transparent;--border-radius: 4px;--padding-top: 6px;--padding-bottom: 8px;--padding-right: 100px;--margin-start: 10px;--margin-end: 10px;min-width:50px;font-size:.7rem;font-weight:600;margin:0 2px}.required[data-v-bc686fbd]{color:#dc3545}@media (max-width: 768px){.pagination[data-v-bc686fbd]{display:flex;justify-content:center;align-items:center;gap:16px;margin-top:16px;padding:12px}.pagination-button[data-v-bc686fbd]{background:#f8f9fa;border:1px solid #ddd;border-radius:4px;padding:8px 16px;cursor:pointer;transition:all .2s}.pagination-button[data-v-bc686fbd]:hover:not(:disabled){background:#e9ecef}.pagination-button[data-v-bc686fbd]:disabled{opacity:.5;cursor:not-allowed}.page-info[data-v-bc686fbd]{font-size:.9rem;color:#555}}.error-label[data-v-bc686fbd]{color:#b42318;text-transform:none;padding:1% 3%;margin-top:2px;display:flex;text-align:center}.reception-form[data-v-61c361f2]{margin-bottom:7px}.form-section[data-v-61c361f2]{margin-bottom:20px}.form-row[data-v-61c361f2]{display:flex;flex-wrap:wrap;margin-bottom:15px;gap:20px}.form-group[data-v-61c361f2]{flex:1;min-width:200px}.form-group label[data-v-61c361f2]{display:block;margin-bottom:5px;font-weight:500;color:#333}.required[data-v-61c361f2]{color:red}.form-control[data-v-61c361f2]{width:100%;padding:8px 12px;border:1px solid #ddd;border-radius:4px;font-size:14px}.input-group[data-v-61c361f2]{display:flex;align-items:center}.input-group .form-control[data-v-61c361f2]{border-top-right-radius:0;border-bottom-right-radius:0;flex:1}.input-group-text[data-v-61c361f2]{padding:8px 12px;background-color:#f5f5f5;border:1px solid #ddd;border-left:none;border-top-right-radius:4px;border-bottom-right-radius:4px;color:#555}.form-footer[data-v-61c361f2]{display:flex;justify-content:flex-start;margin-top:20px}ion-modal[data-v-61c361f2]{--width: 90%;--max-width: 700px;--height: 50%;--border-radius: 4px}.section-header ion-label[data-v-61c361f2]{font-size:1rem;font-weight:600;letter-spacing:.5px;color:var(--ion-color-primary);text-transform:uppercase}ion-input[data-v-61c361f2]::part(label),ion-select[data-v-61c361f2]::part(label){font-weight:600}.form-row[data-v-61c361f2]{margin-bottom:10px}.no-results p[data-v-61c361f2]{margin:0;color:#666}.no-results ion-button[data-v-61c361f2]{--padding-start: 0;--padding-end: 0;margin:0}@keyframes fadeIn-61c361f2{0%{opacity:0;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}.label-title[data-v-61c361f2]{font-weight:700;font-size:1rem;color:#555}.form-row[data-v-61c361f2]{margin-bottom:15px}.segment-group[data-v-61c361f2]{display:flex;align-items:center;background-color:#f8f9fa;padding:12px 16px;border-radius:4px;gap:15px;position:relative}.segment-group[data-v-61c361f2]:after{content:"";flex:0 0 30%;min-width:300px;visibility:hidden}.segment-label-container[data-v-61c361f2]{min-width:300px;font-weight:800;flex:0 40% 0}ion-segment-button[data-v-61c361f2]{--color: #495057;--color-checked: #fff;--background-checked: #d4edda;--background: #f3f0f0;--indicator-color: transparent;--border-radius: 4px;--padding-top: 6px;--padding-bottom: 8px;--padding-right: 100px;--margin-start: 10px;--margin-end: 10px;min-width:50px;font-size:.7rem;font-weight:600;margin:0 2px}.label-title[data-v-61c361f2]{margin:0;color:gray;font-size:17px;font-weight:600}.required[data-v-61c361f2]{color:#dc3545}@media (max-width: 576px){.segment-group[data-v-61c361f2]{flex-direction:column;align-items:flex-start;gap:8px}.custom-segment[data-v-61c361f2]{width:50%;height:20%;padding:0 4px}}.segment-group[data-v-61c361f2]{display:flex;align-items:center;width:100%}.segment-label-container[data-v-61c361f2]{width:40%;min-width:200px}.arv-input-container[data-v-61c361f2]{width:100%}.arv-input-container .input-group[data-v-61c361f2]{width:100%;height:45px}.arv-input-container .form-control[data-v-61c361f2]{height:100%;border-radius:2px 0 0 2px}.arv-input-container .input-group-text[data-v-61c361f2]{height:100%;border-radius:0 4px 4px 0;padding:0 16px}@media (max-width: 768px){.segment-group[data-v-61c361f2]{flex-direction:column;align-items:flex-start}.segment-group[data-v-61c361f2]:after{display:none}.segment-label-container[data-v-61c361f2]{width:100%;margin-bottom:8px}.arv-input-container[data-v-61c361f2]{margin-left:0;width:100%}}.error-label[data-v-61c361f2]{color:#b42318;font-size:.875rem;margin-top:4px;display:block;font-weight:300!important}.arv-input-container[data-v-61c361f2]{display:flex;align-items:center;gap:8px;width:100%}.arv-input-container .input-group-text[data-v-61c361f2]{padding:0 12px;background-color:#f5f5f5;border:1px solid #ddd;border-radius:4px;color:#555;height:45px;display:flex;align-items:center}\n',document.head.appendChild(t);class te extends O{constructor(a,t,l){super(a,51,t,l),e(this,"sitePrefix",void 0),this.sitePrefix=""}getSitePrefix(){return this.sitePrefix}createArvNumber(e){return M.postJson("/patient_identifiers/",{patient_id:this.patientID,identifier_type:4,identifier:e})}buildArvNumber(e){return`${this.sitePrefix}-ARV-${e}`}}const le={class:"form-container"},re={class:"search-section"},ie={key:0,class:"search-results"},oe={key:0,class:"search-loading"},ne={key:1},de=["onClick"],se={class:"pagination"},ue=["disabled"],ce={class:"page-info"},pe=["disabled"],ve={key:2,class:"no-results"},fe={class:"no-results-content"},me={key:0,class:"create-form-section"},be=l({__name:"ManageGuardian",props:{isOpen:{type:Boolean,required:!0}},emits:["close","whenSaved","guardianSelected"],setup(e,{emit:a}){const t=E(),{patient:l}=r(t),G=a,U=i(""),L=i([]),Y=i(!1),O=i(!1),M=i(1),X=i({firstName:"",lastName:"",phone:"",relationship:""}),Z=i([]),ee=i(null),ae=i(!1),te=i(!1),be=i(!1),ge=i(!1),xe=o((()=>Math.ceil(L.value.length/10))),he=o((()=>{const e=10*(M.value-1),a=e+10;return L.value.slice(e,a)})),ye=o((()=>""!==X.value.firstName.trim()&&""!==X.value.lastName.trim()&&X.value.relationship)),_e=()=>{Ae(),G("close")},we=()=>{clearTimeout(ke),ke=setTimeout((()=>{O.value=!1,Ne()}),300)};let ke;const Ne=async()=>{if(!U.value.trim())return L.value=[],void(M.value=1);Y.value=!0;try{const e=(await B.getJson(`people/${l.value.patientID}/relationships`)).map((e=>{var a,t,l,r;const i=(null===(a=e.relation)||void 0===a||null===(a=a.names)||void 0===a?void 0:a[0])||{};return{id:(null===(t=e.relation)||void 0===t||null===(t=t.person_id)||void 0===t?void 0:t.toString())||Date.now().toString(),firstName:i.given_name||"Unknown",lastName:i.family_name||"",phone:(null===(l=e.relation)||void 0===l||null===(l=l.person_attributes)||void 0===l||null===(l=l.find((e=>e.value)))||void 0===l?void 0:l.value)||"",relationship:(null===(r=e.type)||void 0===r?void 0:r.b_is_to_a)||"Other"}})),a=U.value.toLowerCase(),t=e.filter((e=>{const t=(e.firstName||"").toLowerCase(),l=(e.lastName||"").toLowerCase();return t.includes(a)||l.includes(a)}));if(t.length>0)L.value=t;else{const e=await B.search({given_name:U.value,family_name:U.value});L.value=e.map((e=>{var a;const t=e.person.names[0];return{id:e.person.person_id.toString(),firstName:t.given_name,lastName:t.family_name,phone:(null===(a=e.person.attributes)||void 0===a||null===(a=a.find((e=>"Cell Phone Number"===e.attribute_type)))||void 0===a?void 0:a.value)||"",relationship:""}}))}M.value=1}catch(e){console.error("Search error:",e),J("Failed to search guardians")}finally{Y.value=!1}},Se=e=>{e?(ee.value=e,X.value.relationship=e.value,ae.value=!1):(ee.value=null,X.value.relationship=""),De()},Ce=e=>{X.value.firstName=e.target.value,qe()},Ve=e=>{X.value.lastName=e.target.value,Pe()},Ie=e=>{X.value.phone=e.target.value,je()},qe=()=>{te.value=""===X.value.firstName.trim()},Pe=()=>{be.value=""===X.value.lastName.trim()},je=()=>{ge.value=""===X.value.phone.trim()},Re=async()=>{try{if(qe(),Pe(),De(),!ye.value)return void J("Please fill all required fields");const e={given_name:X.value.firstName,family_name:X.value.lastName,gender:"",birthdate:"",birthdate_estimated:!0,attributes:{cell_phone_number:X.value.phone}},a=new Q;await a.registerGuardian(e);const t=a.getPersonID();if(!t)return void J("Failed to create guardian");const r=Z.value.find((e=>e.value===X.value.relationship));r&&await W.createRelation(l.value.patientID,t,r.other.relationship_type_id);const i={id:t.toString(),firstName:X.value.firstName,lastName:X.value.lastName,phone:X.value.phone,relationship:X.value.relationship};G("whenSaved",i),_e(),K("Guardian created successfully")}catch(e){console.error("Error creating guardian:",e),J("Failed to create guardian")}},De=()=>{ae.value=!X.value.relationship},Ae=()=>{X.value={firstName:"",lastName:"",phone:"",relationship:""},ee.value=null,U.value="",L.value=[],O.value=!1,M.value=1,Y.value=!1};return(async()=>{try{const e=await W.getRelations();Z.value=e.map((e=>({label:e.b_is_to_a,value:e.b_is_to_a,other:e})))}catch(e){console.error("Failed to load relationships",e)}})(),n(O,(e=>{e?L.value=[]:U.value&&Ne()})),(a,t)=>{const l=d("ion-buttons");return s(),u(v(F),{"is-open":e.isOpen,onDidDismiss:_e},{default:c((()=>[p(v(f),null,{default:c((()=>[p(v(m),null,{default:c((()=>[p(v(b),{class:"modal-title"},{default:c((()=>t[5]||(t[5]=[g("Search/Add Guardian")]))),_:1,__:[5]}),p(l,{slot:"end"},{default:c((()=>[p(v(x),{onClick:_e,class:"close-button"},{default:c((()=>t[6]||(t[6]=[g("Close")]))),_:1,__:[6]})])),_:1})])),_:1})])),_:1}),p(v(h),{class:"ion-padding modal-content"},{default:c((()=>[y("div",le,[y("div",re,[p(v(_),{class:"search-item",lines:"full"},{default:c((()=>[p(v(w),{modelValue:U.value,"onUpdate:modelValue":t[0]||(t[0]=e=>U.value=e),placeholder:"Search guardian by name",onIonInput:we,class:"search-input"},{default:c((()=>[p(v(k),{icon:v(N),slot:"start"},null,8,["icon"])])),_:1},8,["modelValue"])])),_:1}),U.value&&!O.value?(s(),S("div",ie,[Y.value?(s(),S("div",oe," Searching... ")):L.value.length>0?(s(),S("div",ne,[(s(!0),S(C,null,V(he.value,(e=>(s(),S("div",{key:e.id,class:"result-item",onClick:a=>(e=>{G("guardianSelected",e),_e()})(e)},I(e.firstName)+" "+I(e.lastName),9,de)))),128)),y("div",se,[y("button",{onClick:t[1]||(t[1]=e=>M.value=Math.max(1,M.value-1)),disabled:1===M.value,class:"pagination-button"}," < ",8,ue),y("span",ce,"page "+I(M.value)+" of "+I(xe.value),1),y("button",{onClick:t[2]||(t[2]=e=>M.value=Math.min(xe.value,M.value+1)),disabled:M.value===xe.value,class:"pagination-button"}," > ",8,pe)])])):(s(),S("div",ve,[y("div",fe,[t[8]||(t[8]=y("p",null,"Guardian not found.",-1)),p(v(x),{fill:"clear",onClick:t[3]||(t[3]=e=>O.value=!0)},{default:c((()=>t[7]||(t[7]=[g(" Create Guardian ")]))),_:1,__:[7]})])]))])):q("",!0)]),O.value?(s(),S("div",me,[p(v(P),{class:"form-grid"},{default:c((()=>[p(v(j),{class:"form-row"},{default:c((()=>[p(v(R),{class:"form-column"},{default:c((()=>[p(H,{inputHeader:"First name*",inputValue:X.value.firstName,"onUpdate:inputValue":Ce,inputType:"text",error:te.value},null,8,["inputValue","error"]),te.value?(s(),u(v(D),{key:0,class:"error-label"},{default:c((()=>t[9]||(t[9]=[g(" First name is required ")]))),_:1,__:[9]})):q("",!0)])),_:1}),p(v(R),{class:"form-column"},{default:c((()=>[p(H,{inputHeader:"Last name*",inputValue:X.value.lastName,"onUpdate:inputValue":Ve,inputType:"text",required:!0,error:be.value},null,8,["inputValue","error"]),be.value?(s(),u(v(D),{key:0,class:"error-label"},{default:c((()=>t[10]||(t[10]=[g(" Last name is required ")]))),_:1,__:[10]})):q("",!0)])),_:1})])),_:1}),p(v(j),{class:"form-row"},{default:c((()=>[p(v(R),{class:"form-column"},{default:c((()=>[p($,{inputHeader:"Phone number",inputValue:X.value.phone,"onUpdate:inputValue":Ie,inputType:"tel",required:!0},null,8,["inputValue"])])),_:1}),p(v(R),{class:"form-column"},{default:c((()=>[p(v(D),{position:"stacked",style:{"font-weight":"500"},class:"labl-cls"},{default:c((()=>t[11]||(t[11]=[g("Relationship"),y("span",{class:"required"}," *",-1)]))),_:1,__:[11]}),p(v(A),{modelValue:ee.value,"onUpdate:modelValue":[t[4]||(t[4]=e=>ee.value=e),Se],multiple:!1,taggable:!1,"hide-selected":!0,"close-on-select":!0,openDirection:"bottom",placeholder:"Select relationship",selectLabel:"",label:"label",searchable:!0,"track-by":"value",options:Z.value,disabled:!1,class:z({"error-state":ae.value}),error:ae.value},null,8,["modelValue","options","class","error"]),ae.value?(s(),u(v(D),{key:0,class:"error-label"},{default:c((()=>t[12]||(t[12]=[g(" Relationship is required ")]))),_:1,__:[12]})):q("",!0)])),_:1})])),_:1})])),_:1})])):q("",!0),O.value?(s(),u(v(x),{key:1,expand:"block",onClick:Re,class:"save-button"},{default:c((()=>[p(v(k),{icon:v(T),slot:"start"},null,8,["icon"]),t[13]||(t[13]=g(" Save "))])),_:1,__:[13]})):q("",!0)])])),_:1})])),_:1},8,["is-open"])}}}),ge=X(be,[["__scopeId","data-v-bc686fbd"]]),xe={class:"reception-form"},he={class:"form-section"},ye={class:"form-row"},_e={class:"form-group segment-group"},we={class:"segment-label-container"},ke={class:"form-row"},Ne={class:"form-group segment-group"},Se={class:"segment-label-container"},Ce={key:0,class:"form-row"},Ve={class:"form-group segment-group"},Ie={class:"segment-label-container"},qe={key:1,class:"form-row"},Pe={class:"form-group segment-group"},je={class:"segment-label-container"},Re={class:"arv-input-container"},De={class:"input-group"},Ae=["placeholder"],ze={class:"input-group-text"},Te={class:"form-footer"};a("default",X(l({__name:"Reception",setup(e){const a=E(),{patient:t}=r(a),l=Z(),d=i(""),f=i(""),m=i(""),b=i(!1),h=i(""),_=i(!0),w=i(""),k=i(""),N=i(""),V=i(null),P=i(!1),j=i(!1),R=i(!1),A=i(!1),z=i("");n(m,(e=>{"no"===e&&(h.value="",A.value=!1)}));const T=o((()=>!_.value&&"New patient"===N.value)),F=()=>{b.value=!1,V.value||(f.value="")},O=e=>{V.value=e},H=e=>{V.value=e,f.value="yes"},$=()=>(A.value=!1,z.value="",h.value.trim()?/^\d+$/.test(h.value)?!(parseInt(h.value)<=0)||(A.value=!0,z.value="Number must be positive",!1):(A.value=!0,z.value="Only numbers are allowed",!1):(A.value=!0,z.value="ART number is required",!1));(async()=>{var e;await l.loadSitePrefix(),k.value=l.globalPropertyStore.sitePrefix||"MPC";const a=new ae(B,Q,W);await a.loadPatientType(),N.value=a.getType();const r=null===(e=t.value.identifiers)||void 0===e?void 0:e.some((e=>{var a;return 4===e.identifier_type&&""!==(null===(a=e.identifier)||void 0===a?void 0:a.trim())}));if(_.value=r,r||"New patient"!==N.value)w.value="";else{const e=await M.getNextSuggestedARVNumber();w.value=e.arv_number.replace(/^\D+|\s/g,"")}})();const B=t.value.patientID,Q=ee.getUserID()||-1,W=ee.getUserLocation(),X=new te(B,Q,W),le=async()=>{if((()=>{let e=!0;return d.value||(P.value=!0,e=!1),f.value||(j.value=!0,e=!1),m.value||(R.value=!0,e=!1),"yes"===m.value&&($()||(e=!1)),e})())try{if(!(await X.createEncounter()))return void J("Failed to create encounter");const e=[],a=await X.buildValueCoded("Patient present","yes"===d.value?"Yes":"No");e.push(a);const t=await X.buildValueCoded("Guardian present","yes"===f.value?"Yes":"No");e.push(t);if(!(await X.saveObservationList(e)))return void J("Failed to save observations");if("yes"===m.value){await X.createArvNumber(h.value)||J("Failed to save ARV number")}K("Reception data saved successfully")}catch(e){J("Failed to save reception")}else J("Please correct the form errors")};return(e,a)=>(s(),S(C,null,[a[18]||(a[18]=y("div",{class:"section-header",style:{"margin-bottom":"10px"}},[y("h2",null,"HIV Reception"),y("hr",{style:{"border-top":"1px solid #0c0c0c","margin-top":"10px"}})],-1)),y("div",xe,[y("div",he,[y("div",ye,[y("div",_e,[y("div",we,[a[5]||(a[5]=y("label",{class:"label-title"},[g("Patient present? "),y("span",{class:"required"},"*")],-1)),P.value?(s(),u(v(D),{key:0,class:"error-label"},{default:c((()=>a[4]||(a[4]=[g(" Patient present is required ")]))),_:1,__:[4]})):q("",!0)]),p(v(U),{value:d.value,onIonChange:a[0]||(a[0]=e=>{var a;void 0!==(a=e.detail.value)&&(d.value=a,P.value=!1,"no"===d.value&&"no"===f.value&&(d.value="yes"))}),class:"custom-segment"},{default:c((()=>[p(v(G),{value:"yes"},{default:c((()=>[p(v(D),null,{default:c((()=>a[6]||(a[6]=[g("Yes")]))),_:1,__:[6]})])),_:1}),p(v(G),{value:"no"},{default:c((()=>[p(v(D),null,{default:c((()=>a[7]||(a[7]=[g("No")]))),_:1,__:[7]})])),_:1})])),_:1},8,["value"])])]),y("div",ke,[y("div",Ne,[y("div",Se,[a[9]||(a[9]=y("label",{class:"label-title"},[g("Guardian present? "),y("span",{class:"required"},"*")],-1)),j.value?(s(),u(v(D),{key:0,class:"error-label"},{default:c((()=>a[8]||(a[8]=[g(" Guardian present is required ")]))),_:1,__:[8]})):q("",!0)]),p(v(U),{value:f.value,onIonChange:a[1]||(a[1]=e=>{var a;void 0!==(a=e.detail.value)&&(f.value=a,j.value=!1,"no"===d.value&&"no"===f.value&&(d.value="yes"),"yes"===f.value&&(b.value=!0))}),class:"custom-segment"},{default:c((()=>[p(v(G),{value:"yes"},{default:c((()=>[p(v(D),null,{default:c((()=>a[10]||(a[10]=[g("Yes")]))),_:1,__:[10]})])),_:1}),p(v(G),{value:"no"},{default:c((()=>[p(v(D),null,{default:c((()=>a[11]||(a[11]=[g("No")]))),_:1,__:[11]})])),_:1})])),_:1},8,["value"])])]),T.value?(s(),S("div",Ce,[y("div",Ve,[y("div",Ie,[a[13]||(a[13]=y("label",{class:"label-title"},[g("Capture ART number? "),y("span",{class:"required"},"*")],-1)),R.value?(s(),u(v(D),{key:0,class:"error-label"},{default:c((()=>a[12]||(a[12]=[g(" Capture ART number is required ")]))),_:1,__:[12]})):q("",!0)]),p(v(U),{value:m.value,onIonChange:a[2]||(a[2]=e=>{var a;void 0!==(a=e.detail.value)&&(m.value=a,R.value=!1)}),class:"custom-segment"},{default:c((()=>[p(v(G),{value:"yes"},{default:c((()=>[p(v(D),null,{default:c((()=>a[14]||(a[14]=[g("Yes")]))),_:1,__:[14]})])),_:1}),p(v(G),{value:"no"},{default:c((()=>[p(v(D),null,{default:c((()=>a[15]||(a[15]=[g("No")]))),_:1,__:[15]})])),_:1})])),_:1},8,["value"])])])):q("",!0),"yes"!==m.value||_.value?q("",!0):(s(),S("div",qe,[y("div",Pe,[y("div",je,[a[16]||(a[16]=y("label",{class:"label-title"},[g("ART Number "),y("span",{class:"required"},"*")],-1)),A.value?(s(),u(v(D),{key:0,class:"error-label"},{default:c((()=>[g(I(z.value),1)])),_:1})):q("",!0)]),y("div",Re,[y("div",De,[L(y("input",{type:"text",class:"form-control","onUpdate:modelValue":a[3]||(a[3]=e=>h.value=e),onInput:$,placeholder:w.value,required:""},null,40,Ae),[[Y,h.value]]),y("span",ze,I(k.value)+"-ARV",1)])])])])),y("div",Te,[p(v(x),{color:"primary",onClick:le},{default:c((()=>a[17]||(a[17]=[g("Save")]))),_:1,__:[17]})])]),p(ge,{isOpen:b.value,patientID:v(t).patientID,onClose:F,onGuardianSelected:O,onWhenSaved:H},null,8,["isOpen","patientID"])])],64))}}),[["__scopeId","data-v-61c361f2"]]))}}}))}();
