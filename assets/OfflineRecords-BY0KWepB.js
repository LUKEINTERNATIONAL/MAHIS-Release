import{d as w,r as s,aT as i,a as k,n as I,H as T,N as R,f as p,J as r,e as O,m as x,l,k as a,u as d,a8 as C,b4 as m,p as E,ae as M,cF as N}from"./vendor-C0WKUvJw.js";import{H as S,d as V,T as A,q as B,t as P,n as $,_ as H}from"./index-BKvyY6aR.js";import{u as J}from"./StockStore-vCPcTJ1Q.js";import{u as F}from"./StartEndDate-S7JN98rt.js";import{O as G}from"./OfflineMoreDetailsModal-Bd534xIm.js";import"./lodash-NJiRuGo9.js";import"./apexcharts-JA7_ZvNb.js";import"./SetRelationship.vue_vue_type_script_lang-yxHUsZUM.js";import"./BasicForm-BDI41Uuo.js";import"./DateInputField-CJ54p5ma.js";import"./customDatePicker.vue_vue_type_style_index_0_lang-xzxGnNQH.js";const j={key:0,class:"spinner-overlay"},q={class:"container"},z={class:"table-responsive"},L=w({__name:"OfflineRecords",setup(W){const c=s([]);s([]),s([]),s(S.sessionDate()),s(S.sessionDate()),s("all");const o=s(!1),u=s(null),b=J(),_=F(),{stock:K}=i(b),{startEndDate:Q}=i(_),g=V(),{offlineVillageStatus:U,offlineCountriesStatus:X,offlineDistrictStatus:Y,offlineTAsStatus:Z,offlineRelationshipStatus:tt,offlinePatientsStatus:at}=i(g),h={responsive:!0,select:!1,layout:{topStart:null,topEnd:"search",bottomStart:"info",bottomEnd:"paging"}},f=async()=>{o.value=!0;try{const e=await B("patientRecords");c.value=e.map(t=>["".concat(t.personInformation.given_name," ").concat(t.personInformation.family_name),t.ID,t.saveStatusPersonInformation,t.saveStatusBirthRegistration,t.saveStatusGuardianInformation,"","",'<button class="btn btn-sm btn-primary edit-btn" data-id=\''.concat(JSON.stringify(t),"'>More details</button>")]),m.use(N)}catch(e){P("An error occurred while loading data.")}finally{o.value=!1}},v=e=>{D(JSON.parse(e))},y=async e=>{console.log("Deleting item with id: ".concat(e))},D=async e=>{await $(G,{class:"fullScreenModal"},!0,{clientData:e})==="dismiss"&&await f()};return k(async()=>{await f(),I(()=>{const e=u.value.dt;e.columns.adjust().draw(),e.on("click",".edit-btn",t=>{const n=t.target.getAttribute("data-id");v(n)}),e.on("click",".delete-btn",t=>{const n=t.target.getAttribute("data-id");y(n)})})}),(e,t)=>{const n=T("ion-spinner");return p(),R(d(M),{class:E({loading:o.value})},{default:r(()=>[o.value?(p(),O("div",j,[l(n,{name:"bubbles"}),t[0]||(t[0]=a("div",{class:"loading-text"},"Please wait...",-1))])):x("",!0),l(A),l(d(C),null,{default:r(()=>[a("div",q,[t[2]||(t[2]=a("h4",{style:{width:"100%","text-align":"center","font-weight":"700"}},"Offline Records Status",-1)),a("div",z,[l(d(m),{ref_key:"dataTable",ref:u,options:h,data:c.value,class:"display nowrap",width:"100%"},{default:r(()=>t[1]||(t[1]=[a("thead",null,[a("tr",null,[a("th",null,"Full Name"),a("th",null,"ID"),a("th",null,"Personal Info Status"),a("th",null,"Birth Registration Status"),a("th",null,"Guardian Info Status"),a("th",null,"Vitals Status"),a("th",null,"Vaccine Admin Status"),a("th",null,"Action")])],-1)])),_:1,__:[1]},8,["data"])])])]),_:1})]),_:1},8,["class"])}}}),pt=H(L,[["__scopeId","data-v-25b4a8c6"]]);export{pt as default};
