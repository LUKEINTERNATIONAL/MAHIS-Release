var pe=Object.defineProperty;var he=(e,h,l)=>h in e?pe(e,h,{enumerable:!0,configurable:!0,writable:!0,value:l}):e[h]=l;var R=(e,h,l)=>he(e,typeof h!="symbol"?h+"":h,l);import{d as fe,r as ie,w as oe,c_ as se,a as ye,y as L,f as T,u as s,ag as me,z as a,l as r,e as F,m as x,k as f,bq as Y,ac as W,ab as D,G as B,D as _,A as y,dn as q,dp as E,B as b,M as Ae,L as re,J as _e,db as be,an as Ce,F as ae,ay as Ie,aa as Te,ar as $,av as Se,ad as De,O as G}from"./vendor-DowD5zKn.js";import{A as j}from"./app_encounter_service-DUFQOcer.js";import{ad as de,Z as M,L as ve,P as we,t as Ee,k as Oe,m as Ve,_ as He}from"./index-Cu2JEMub.js";import{_ as Ne}from"./DatePicker.vue_vue_type_script_setup_true_lang-B8H-baea.js";import{g as Be}from"./LocationFieldOptions-vBiJgJhC.js";import"./lodash-Dt8AsbQm.js";const v="2016-04-30",Ge={"Adults with stage 4 conditions":{concept:"WHO STAGE IV ADULT",priority:1,conditions:{stage:e=>e===4}},"Classify as stage 4 when reason for ART is WHO STAGE 4":{concept:"WHO STAGE IV ADULT",priority:2,conditions:{reasonForArt:e=>e==="WHO STAGE IV ADULT"}},"Adults with stage 3 conditions":{concept:"WHO STAGE III ADULT",priority:3,conditions:{stage:e=>e===3}},"Adults with stage 2 conditions":{concept:"WHO STAGE II ADULT",priority:4,conditions:{stage:e=>e===2}},"Adults with stage 1 conditions":{concept:"WHO STAGE I ADULT",priority:5,conditions:{stage:e=>e===1}}},Pe={"Children with stage 4 conditions":{concept:"WHO STAGE IV PEDS",priority:1,conditions:{stage:e=>e===4}},"Classify as stage 4 when reason for ART is WHO STAGE 4":{concept:"WHO STAGE IV PEDS",priority:2,conditions:{reasonForArt:e=>e==="WHO STAGE IV PEDS"}},"For children with stage 3 conditions":{concept:"WHO STAGE III PEDS",priority:3,conditions:{stage:e=>e===3}},"Children with stage 2 conditions":{concept:"WHO STAGE II PEDS",priority:4,conditions:{stage:e=>e===2}},"Children with stage 1 conditions":{concept:"WHO STAGE I PEDS",priority:5,conditions:{stage:e=>e===1}}},Le={"Warn if Severe weight loss is selected when actual patient BMI is acceptable":{priority:1,actions:{alert:async e=>await de("Patient's BMI of ".concat(e.bmi," greater than 18.5, do you wish to proceed?"),{confirmBtnLabel:"Yes, keep severe weightloss",cancelBtnLabel:"No, cancel"})},conditions:{selectedCondition(e){return e==="Severe weight loss >10% and/or BMI <18.5kg/m^2, unexplained"},bmi:e=>e>18.5}},"Warn for contradicting stage defining conditions":{priority:1,actions:{alert:async e=>!!await de("CONTRADICTING STAGE DEFINING CONDITIONS",{confirmBtnLabel:"Keep Asymptomatic",cancelBtnLabel:"Keep other(s)"})},conditions:{selectedCondition(e){return e==="Asymptomatic HIV infection"}}}},Fe={"Enable TB staging condition if client is TB positive":{priority:1,actions:{isChecked:!0},description:{color:"danger",show:"always",info:()=>"Client registered as a TB Patient in the TB Module"},conditions:{tbPositive:e=>e,selectedCondition:e=>/\bTuberculosis \(PTB or EPTB\)|\bPulmonary tuberculosis/i.test(e)}},"Enable TB staging condition if client is EPTB positive":{priority:1,actions:{isChecked:!0},description:{color:"danger",show:"always",info:()=>"Client registered with EPTB in TB Module"},conditions:{eptbPositive:e=>e,selectedCondition:e=>/Extrapulmonary tuberculosis/i.test(e)}},"For children whose current weight percentile is less than 70":{priority:1,actions:{isChecked:!0},description:{color:"danger",show:"always",info:e=>"Child has a low weight percentile of ".concat(e.weightPercentile)},conditions:{selectedCondition(e){return e==="Severe unexplained wasting or malnutrition not responding to treatment (weight-for-height/ -age <70% or MUAC less than 11cm or oedema)"},weightPercentile(e){return e<70}}},"Enable Moderate unexplained malnutrition for children whose weight for height is 70-79%":{priority:1,actions:{isChecked:!0},description:{color:"danger",show:"always",info:e=>"Child has weight percentile of ".concat(e.weightPercentile)},conditions:{selectedCondition(e){return e==="Moderate unexplained wasting/malnutrition not responding to treatment (weight-for-height/ -age 70-79% or muac 11-12 cm)"},weightPercentile(e){return e>=70&&e<=79}}},"Disable moderate weight loss when Severe unexplained weight loss is chosen":{priority:2,actions:{isChecked:!1,disabled:!0},description:{color:"secondary",show:"always",info:()=>"Severe weight loss/manutrition was already selected"},conditions:{selectedCondition(e){return e==="Moderate unexplained wasting/malnutrition not responding to treatment (weight-for-height/ -age 70-79% or muac 11-12 cm)"},selectedConditions(e){return e.includes("Severe unexplained wasting or malnutrition not responding to treatment (weight-for-height/ -age <70% or MUAC less than 11cm or oedema)")}}}},We={"Enable TB staging condition if client is TB positive":{priority:1,actions:{isChecked:!0},description:{color:"danger",show:"always",info:()=>"Client registered Positive in TB Module"},conditions:{tbPositive:e=>e,selectedCondition:e=>/\bTuberculosis \(PTB or EPTB\)|\bPulmonary tuberculosis/i.test(e)}},"Enable TB staging condition if client is EPTB positive":{priority:1,actions:{isChecked:!0},description:{color:"danger",show:"always",info:()=>"Client registered with EPTB in TB Module"},conditions:{eptbPositive:e=>e,selectedCondition:e=>/Extrapulmonary tuberculosis/i.test(e)}},"Adults with a BMI less than 16":{priority:1,actions:{isChecked:!0},description:{color:"danger",show:"always",info:e=>"Adult has a low BMI of ".concat(e.bmi)},conditions:{selectedCondition(e){return e==="Severe weight loss >10% and/or BMI <18.5kg/m^2, unexplained"},bmi:e=>e<16}},"Adults whose BMI is between 16 and 18":{priority:3,actions:{isChecked:!0},description:{color:"warning",show:"onChecked",info:e=>"BMI of ".concat(e.bmi," is between 16 and 18")},conditions:{selectedCondition:e=>e==="Moderate weight loss less than or equal to 10 percent, unexplained",bmi:e=>e>=16&&e<=18.5}},"Disable Moderate weight loss if severe weightloss is selected":{priority:2,actions:{isChecked:!1,disabled:!0},description:{color:"secondary",show:"always",info:()=>"Severe weight loss was already selected"},conditions:{selectedCondition(e){return e==="Moderate weight loss less than or equal to 10 percent, unexplained"},selectedConditions(e){return e.includes("Severe weight loss >10% and/or BMI <18.5kg/m^2, unexplained")}}}},Me={"Children under twelve months who tested positive on Rapid test and have presumed severe HIV":{concept:"PRESUMED SEVERE HIV",priority:1,conditions:{ageInMonths(e){return e<12},selectedConditions:e=>M.getConceptsByCategory("pshd_condition").some(h=>e.includes(h.name)),testType(e){return e==="HIV rapid test"}}},"Has stage 4 conditions":{concept:"WHO STAGE IV PEDS",priority:2,conditions:{stage:e=>e===4}},"Has stage 3 conditions":{concept:"WHO STAGE III PEDS",priority:3,conditions:{stage:e=>e===3}},"Children under twelve who tested positive via HIV DNA Polymerase Chain Reaction test":{concept:"HIV DNA polymerase chain reaction",priority:4,conditions:{ageInMonths:e=>e<12,testType:e=>e==="HIV DNA polymerase chain reaction"}},"Children who are less than 24 months":{concept:"HIV infected",priority:5,conditions:{ageInMonths:e=>e<24}},"Children between 24 and 56 months who have stage 2 or 1 conditions":{concept:"CD4 COUNT LESS THAN OR EQUAL TO 750",priority:6,conditions:{ageInMonths(e){return e>=24&&e<=56},cd4Date:e=>new Date(e)<=new Date(v),cd4(e){return e<=750},cd4Modifier(e){return e==="<"||e==="="},stage(e){return e<=2}}},"Children with CD4 count less than 500 and have stage 1 and stage 2 conditions":{concept:"CD4 COUNT LESS THAN OR EQUAL TO 500",priority:7,conditions:{cd4(e){return e<=500},cd4Date:e=>new Date(e)<=new Date(v),cd4Modifier(e){return e==="<"||e==="="},stage(e){return e<=2}}},"Children who are more than five years old and have cd4 count less than 500":{concept:"CD4 COUNT LESS THAN OR EQUAL TO 500",priority:9,conditions:{cd4Date:e=>new Date(e)<=new Date(v),age(e){return e>5},cd4(e){return e<=500},cd4Modifier(e){return e==="<"||e==="="}}},"Children over date 2014-04-01 and less than Five years old":{concept:"HIV infected",priority:10,conditions:{date(e){return e>="2014-04-01"},age(e){return e<=5}}},"Women who are breast feeding":{concept:"BREASTFEEDING",priority:11,conditions:{gender(e){return e==="F"},breastFeeding(e){return e==="Yes"},stage:e=>e<=2}},"Women who are pregnant":{concept:"PATIENT PREGNANT",priority:12,conditions:{gender(e){return e==="F"},pregnant(e){return e==="Yes"},stage(e){return e<=2}}},"Asymptomatic patient with either stage one or stage two conditions":{concept:"Asymptomatic",priority:13,conditions:{stage:e=>e<=2}}},Ue={"Has stage 4 conditions":{concept:"WHO STAGE IV ADULT",priority:1,conditions:{stage:e=>e===4}},"Has HIV wasting syndrome identified in stage 3":{concept:"WHO STAGE IV ADULT",priority:2,conditions:{selectedConditions:e=>M.getConceptsByCategory("severe_hiv_wasting_syndrome").reduce((g,c)=>e.includes(c.name)?g+1:0,0)>=2}},"Has stage 3 conditions":{concept:"WHO STAGE III ADULT",priority:3,conditions:{stage:e=>e===3}},"CD4 less than 350 for adults before 2014":{concept:"cd4 less than or equal to 350",priority:4,conditions:{cd4Date:e=>new Date(e)<=new Date(v),cd4(e){return e<=350},cd4Modifier(e){return e==="<"||e==="="}}},"CD4 less than 250 for adults after 2014":{concept:"cd4 less than or equal to 250",priority:4,conditions:{cd4Date:e=>new Date(e)<=new Date(v),cd4(e){return e<=250},cd4Modifier(e){return e==="<"||e==="="}}},"CD4 less than 350 for adults after 2014":{concept:"cd4 less than or equal to 350",priority:5,conditions:{cd4Date:e=>new Date(e)<=new Date(v),cd4(e){return e<=350},cd4Modifier(e){return e==="<"||e==="="}}},"CD4 less than 500 for adults after 2014":{concept:"cd4 less than or equal to 500",priority:6,conditions:{cd4Date:e=>new Date(e)<=new Date(v),cd4(e){return e<=500},cd4Modifier(e){return e==="<"||e==="="}}},"Women who are breast feeding":{concept:"BREASTFEEDING",priority:8,conditions:{gender(e){return e==="F"},breastFeeding(e){return e==="Yes"},stage:e=>e<=2}},"Women who are pregnant":{concept:"PATIENT PREGNANT",priority:7,conditions:{gender(e){return e==="F"},pregnant(e){return e==="Yes"},stage(e){return e<=2}}},"Asymptomatic patient with either stage one or stage two conditions":{concept:"Asymptomatic",priority:9,conditions:{stage:e=>e<=2}}};class Q extends j{constructor(l,g,c){super(l,52,c);R(this,"age");R(this,"confirmatoryTest");this.age=g,this.confirmatoryTest=null}isAdult(){return this.age>=15}isPedaid(){return this.age<=14}setAge(l){this.age=l}getFacilities(l=""){return ve.getFacilities({name:l})}getConfirmatoryTestType(){return this.confirmatoryTest}cd4CountIsValid(l){try{return!!l.match(/^(=|<|>)([0-9]*)$/m)}catch(g){return!1}}getAlertGuidelines(){return Le}getWhoStageGuidelines(){return this.isAdult()?Ge:Pe}getProgramEligibilityGuidelines(){return this.isAdult()?Ue:Me}getRecommendedConditionGuidelines(){return this.isAdult()?We:Fe}getStagingConditions(l){const g=this.getStagingCategoryByNum(l);return j.getConceptsByCategory(g)}buildWhoStageObs(l){return this.buildValueCoded("Who stage",l)}buildWhoCriteriaObs(l){return this.buildValueCoded("Who stages criteria present",l)}buildReasonForArtObs(l){return this.buildValueCoded("Reason for ART eligibility",l)}getStagingCategoryByNum(l){switch(l){case 1:return this.isAdult()?"stage_1_conditions_adults":"stage_1_conditions_pedaids";case 2:return this.isAdult()?"stage_2_conditions_adults":"stage_2_conditions_pedaids";case 3:return this.isAdult()?"stage_3_conditions_adults":"stage_3_conditions_pedaids";case 4:return this.isAdult()?"stage_4_conditions_adults":"stage_4_conditions_pedaids";default:return""}}async loadHivConfirmatoryTestType(){const l=await j.getFirstValueCoded(this.patientID,"Confirmatory hiv test type");l&&(this.confirmatoryTest=l)}}const ke={key:0,style:{"border-bottom":"dashed #ccc"},class:"ion-padding"},Re={class:"error"},xe={class:"error"},Ye={class:"accordion_group"},qe={style:{"font-weight":"bold"}},$e={class:"error"},je={class:"ion-padding",slot:"content"},Qe={style:{"border-top":"dashed #ccc","border-bottom":"dashed #ccc"},class:"ion-padding"},ze={class:"ion-padding"},Ke={class:"error"},Je={key:0,class:"ion-padding"},Ze={class:"error"},Xe={class:"error"},et={class:"error"},tt={class:"ion-padding",style:{"border-bottom":"dashed #ccc"}},nt=fe({__name:"Staging",props:{hideSubmit:{type:Boolean,default:!1},date:{default:Q.getSessionDate()}},setup(e,{expose:h}){const l=e,g=new we,c=ie({}),d=new Q(g.getID(),g.getAge(),-1);oe(()=>l.date,n=>{var u;const t=(u=n==null?void 0:n.standardDate)!=null?u:Q.getSessionDate(),i=G(t).diff(g.getBirthdate(),"years");d.setAge(i),d.setDate(t)},{deep:!0,immediate:!0});const C=se({stage_4_conditions:{title:"Stage 4 Conditions",options:[]},stage_3_conditions:{title:"Stage 3 Conditions",options:[]},stage_2_conditions:{title:"Stage 2 Conditions",options:[]},stage_1_conditions:{title:"Stage 1 Conditions",options:[]}}),z=ie([]),o=se({cd4:"",cd4Date:"",isChildBearing:!1,reasonForArt:"",pregnant:"",breastFeeding:"",cd4Available:"",cd4Location:"",whoStage:"",staging:[],confirmatoryTest:"",selectedFacilityObj:null}),p={reasonForArt:{buildObs:()=>d.buildReasonForArtObs(o.reasonForArt),suggestAvalue:()=>({"PRESUMED SEVERE HIV":{priority:1,condition:()=>g.getAgeInMonths()<12&&o.confirmatoryTest==="HIV rapid test"&&M.getConceptsByCategory("pshd_condition").some(n=>Z().includes(n.name))},"WHO STAGE IV PEDS":{priority:2,condition:()=>d.isPedaid()&&m(["stage_4_conditions"])},"WHO STAGE III PEDS":{priority:3,condition:()=>d.isPedaid()&&m(["stage_3_conditions"])},"HIV DNA polymerase chain reaction":{priority:4,condition:()=>g.getAgeInMonths()<12&&o.confirmatoryTest==="HIV DNA polymerase chain reaction"},"CD4 COUNT LESS THAN OR EQUAL TO 750":{priority:5,condition:()=>V(750)&&H()&&O()&&g.ageInMonths()>=24&&g.ageInMonths()<=56},"CD4 COUNT LESS THAN OR EQUAL TO 500":{priority:6,condition:()=>d.isPedaid()&&V(500)&&H()&&O()},"HIV infected":{priority:7,condition:()=>g.getAgeInMonths()<24||g.getAge()<=5},"WHO STAGE IV ADULT":{priority:1,condition:()=>{const n=M.getConceptsByCategory("severe_hiv_wasting_syndrome");return d.isAdult()&&(m(["stage_4_conditions"])||n.filter(t=>Z().includes(t.name)).length>=2)}},"WHO STAGE III ADULT":{priority:2,condition:()=>d.isAdult()&&m(["stage_3_conditions"])},"cd4 less than or equal to 350":{priority:3,condition:()=>d.isAdult()&&V(350)&&O()},"cd4 less than or equal to 250":{priority:4,condition:()=>d.isAdult()&&V(250)&&O()},"cd4 less than or equal to 500":{priority:4,condition:()=>d.isAdult()&&V(500)&&O()},BREASTFEEDING:{priority:5,condition:()=>d.isAdult()&&o.breastFeeding==="Yes"&&H()},"PATIENT PREGNANT":{priority:6,condition:()=>d.isAdult()&&o.pregnant==="Yes"&&H()},Asymptomatic:{priority:7,condition:()=>H()}})},whoStage:{buildObs:()=>d.buildWhoStageObs(o.whoStage),suggestAvalue:()=>({"WHO STAGE IV ADULT":{priority:1,condition:()=>d.isAdult()&&m(["stage_4_conditions"])},"WHO STAGE III ADULT":{priority:2,condition:()=>d.isAdult()&&m(["stage_3_conditions"])},"WHO STAGE II ADULT":{priority:3,condition:()=>d.isAdult()&&m(["stage_2_conditions"])},"WHO STAGE I ADULT":{priority:4,condition:()=>d.isAdult()&&m(["stage_1_conditions"])},"WHO STAGE IV PEDS":{priority:1,condition:()=>d.isPedaid()&&(m(["stage_4_conditions"])||o.reasonForArt==="WHO STAGE IV PEDS")},"WHO STAGE III PEDS":{priority:2,condition:()=>d.isPedaid()&&m(["stage_3_conditions"])},"WHO STAGE II PEDS":{priority:3,condition:()=>d.isPedaid()&&m(["stage_2_conditions"])},"WHO STAGE I PEDS":{priority:4,condition:()=>d.isPedaid()&&m(["stage_1_conditions"])}})},cd4Available:{required:()=>!0,dataHandler:n=>{n!="Yes"&&(o.cd4="",o.cd4Date=""),c.value.cd4="",c.value.cd4Date="",c.value.cd4Location=""}},pregnant:{required:()=>o.isChildBearing,buildObs:()=>d.buildValueCoded("Is patient pregnant?",o.pregnant)},breastFeeding:{required:()=>o.isChildBearing,buildObs:()=>d.buildValueCoded("Is patient breast feeding?",o.breastFeeding)},cd4:{required:()=>o.cd4Available==="Yes",validation:()=>{if(!J()){c.value.cd4="Invalid cd4 count format, expected e.g. <100 or >500 or =750";return}U()>1e4&&(c.value.cd4="CD4 value cannot exceed 10,000")},buildObs:()=>d.buildValueNumber("CD4 count",U(),K())},cd4Date:{required:()=>o.cd4Available==="Yes",dataHandler:n=>{n&&(o.cd4Date=G(n).format("YYYY-MM-DD"))},validation:()=>{if(isNaN(new Date(o.cd4Date).getTime())){c.value.cd4Date="Invalid CD4 date";return}const n=G(o.cd4Date);if(n.isAfter(G(d.getDate()))){c.value.cd4Date="Cd4 result date can't be greater than ".concat(d.getDate());return}n.isBefore(G(g.getBirthdate()))&&(c.value.cd4Date="CD4 date must not be earlier than birthdate")},buildObs:()=>d.buildValueDate("Cd4 count datetime",o.cd4Date)},cd4Location:{required:()=>o.cd4Available==="Yes",dataHandler:n=>o.cd4Location=n.label,searchFacilities:n=>Be(n).then(t=>z.value=t),buildObs:()=>d.buildValueText("Cd4 count location",o.cd4Location)},staging:{validation:()=>{if(Object.keys(C).every(u=>N(u)<=0)){c.value.staging="Please select one or more staging conditions";return}const t=["stage_4_conditions","stage_3_conditions","stage_2_conditions"].some(u=>N(u)>0);C.stage_1_conditions.options.some(u=>/asymptomatic/i.test(u.name)&&u.checked)&&t&&(c.value.staging="Asymptomatic cannot be selected with other staging conditions")},buildObs:()=>Object.keys(C).reduce((t,i)=>(C[i].options.forEach(u=>{u.checked&&t.push(u.name)}),t),[]).map(t=>d.buildWhoCriteriaObs(t))}};function le(){Object.keys(o).forEach(n=>{typeof o[n]=="boolean"?o[n]=!1:Array.isArray(o[n])?o[n]=[]:o[n]=""}),Object.keys(c.value).forEach(n=>c.value[n]=""),te()}function m(n){return n.some(t=>N(t)>0)}function O(){return new Date(o.cd4Date)<=new Date("2016-04-30")}function K(){var n,t,i;return(i=(t="".concat((n=o.cd4)!=null?n:"").match(/^([=><]{1})/))==null?void 0:t[0])!=null?i:""}function U(){var n,t;return parseInt((t=(n="".concat(o.cd4).match(/\d+$/))==null?void 0:n[0])!=null?t:"0")}function J(){return/^([=><]{1})(\d+)$/i.test("".concat(o.cd4))}function V(n){if(!J())return!1;const t=K(),i=U();return t==="="&&n===i||t==="<"&&i<=n||t===">"&&i>=n}function H(){return m(["stage_2_conditions","stage_1_conditions"])}function Z(){return Object.keys(C).reduce((n,t)=>(C[t].options.forEach(i=>i.checked&&n.push(i.name)),n),[])}function X(n){if(c.value[n]="",typeof p[n].required=="function"&&p[n].required()&&!o[n]){c.value[n]="This field is required";return}o[n]&&typeof p[n].validation=="function"&&p[n].validation()}function ce(n){var t,i,u;if(p[n]&&"suggestAvalue"in p[n]){o[n]="";const A=p[n].suggestAvalue(),w=Object.keys(A).reduce((I,P)=>{const k=A[P];return typeof k.condition=="function"&&k.condition()?[...I,{value:P,priority:k.priority}]:I},[]);o[n]=(u=(i=(t=w.sort((I,P)=>I.priority-P.priority))==null?void 0:t[0])==null?void 0:i.value)!=null?u:""}}function ee(){return Object.keys(o).reduce((n,t)=>{if(t in p&&o[t]&&typeof p[t].buildObs=="function"){const i=p[t].buildObs();return Array.isArray(i)?[...n,...i]:[...n,i]}return n},[])}function N(n){return C[n].options.filter(t=>t.checked).length}async function ue(){await d.loadHivConfirmatoryTestType(),o.confirmatoryTest=d.getConfirmatoryTestType(),o.isChildBearing=g.isChildBearing()}function S(n,t){n in p&&typeof p[n].dataHandler=="function"&&p[n].dataHandler(t),X(n),Object.keys(p).forEach(i=>ce(i))}function te(){Object.keys(C).forEach(n=>{var u,A;const t=Number((A=(u=n.match(/\d+/))==null?void 0:u[0])!=null?A:0),i=d.getStagingConditions(t);C[n].options=i.map(w=>({checked:!1,name:w.name,concept_id:w.concept_id}))})}function ne(){return Object.keys(p).forEach(n=>X(n)),Object.keys(c.value).every(n=>"".concat(c.value[n]).length<=0)}async function ge(){if(console.log("Submitting staging"),!ne())return Ee("Please review form for errors"),!1;try{const n=await Promise.all(ee());return await d.createEncounter(),await d.saveObservationList(n),Oe("Staging Observations saved!"),!0}catch(n){return console.error(n),Ve("Error has occured while saving observations"),!1}}return oe(()=>l.date,n=>{d.setDate(n),g.date=n,le()}),ye(async()=>{await ue(),te()}),h({validateStagingForm:ne,buildPayload:ee,onSubmit:ge}),(n,t)=>(T(),L(s(me),null,{default:a(()=>[r(s(De),null,{default:a(()=>[o.isChildBearing?(T(),F("div",ke,[r(s(Y),null,{default:a(()=>[r(s(W),null,{default:a(()=>[r(s(D),null,{default:a(()=>[r(s(B),{color:"light"},{default:a(()=>[r(s(_),{slot:"start"},{default:a(()=>t[14]||(t[14]=[y("Pregnant?")])),_:1,__:[14]}),r(s(q),{modelValue:o.pregnant,"onUpdate:modelValue":t[0]||(t[0]=i=>o.pregnant=i),onIonChange:t[1]||(t[1]=i=>S("pregnant",i.detail.value)),class:"custom-segment"},{default:a(()=>[r(s(E),{value:"Yes"},{default:a(()=>[r(s(_),null,{default:a(()=>t[15]||(t[15]=[y("Yes")])),_:1,__:[15]})]),_:1}),r(s(E),{value:"No"},{default:a(()=>[r(s(_),null,{default:a(()=>t[16]||(t[16]=[y("No")])),_:1,__:[16]})]),_:1})]),_:1},8,["modelValue"])]),_:1}),f("div",Re,b(c.value.pregnant),1)]),_:1}),r(s(D),null,{default:a(()=>[r(s(B),{color:"light"},{default:a(()=>[r(s(_),{slot:"start"},{default:a(()=>t[17]||(t[17]=[y("Breastfeeding?")])),_:1,__:[17]}),r(s(q),{modelValue:o.breastFeeding,"onUpdate:modelValue":t[2]||(t[2]=i=>o.breastFeeding=i),onIonChange:t[3]||(t[3]=i=>S("breastFeeding",i.detail.value)),class:"custom-segment"},{default:a(()=>[r(s(E),{value:"Yes"},{default:a(()=>[r(s(_),null,{default:a(()=>t[18]||(t[18]=[y("Yes")])),_:1,__:[18]})]),_:1}),r(s(E),{value:"No"},{default:a(()=>[r(s(_),null,{default:a(()=>t[19]||(t[19]=[y("No")])),_:1,__:[19]})]),_:1})]),_:1},8,["modelValue"])]),_:1}),f("div",xe,b(c.value.breastFeeding),1)]),_:1})]),_:1})]),_:1})])):x("",!0),f("div",Ye,[r(s(Ae),{color:"light"},{default:a(()=>[(T(!0),F(ae,null,re(C,(i,u)=>(T(),L(s(_e),{key:u},{default:a(()=>[r(s(B),{color:"light",slot:"header"},{default:a(()=>[r(s(_),{style:{color:"grey","font-size":"17px"},class:"ion-padding"},{default:a(()=>[f("b",qe,[y(b(i.title)+" ",1),r(s(be),{color:N("".concat(u))>0?"primary":void 0},{default:a(()=>[y(" Selected: "+b(N("".concat(u))),1)]),_:2},1032,["color"])]),f("p",$e,b(c.value.staging),1)]),_:2},1024)]),_:2},1024),f("div",je,[r(s(Ce),null,{default:a(()=>[(T(!0),F(ae,null,re(i.options,(A,w)=>(T(),L(s(B),{key:w},{default:a(()=>[r(s(Ie),{modelValue:A.checked,"onUpdate:modelValue":I=>A.checked=I,onIonChange:I=>S("staging",{stage_type:u,raw:I,option:A})},null,8,["modelValue","onUpdate:modelValue","onIonChange"]),r(s(_),{style:{margin:"13px"}},{default:a(()=>[y(b(A.name),1)]),_:2},1024),t[20]||(t[20]=f("p",null,null,-1)),A.description?(T(),L(s(Te),{key:0,color:A.color},{default:a(()=>[y(b(A.text),1)]),_:2},1032,["color"])):x("",!0)]),_:2,__:[20]},1024))),128))]),_:2},1024)])]),_:2},1024))),128))]),_:1})]),f("div",Qe,[f("div",ze,[r(s(B),{color:"light"},{default:a(()=>[r(s(_),{slot:"start"},{default:a(()=>t[21]||(t[21]=[y("Recent CD4 count results available?")])),_:1,__:[21]}),r(s(q),{modelValue:o.cd4Available,"onUpdate:modelValue":t[4]||(t[4]=i=>o.cd4Available=i),onIonChange:t[5]||(t[5]=i=>S("cd4Available",i.detail.value)),class:"custom-segment"},{default:a(()=>[r(s(E),{value:"Yes"},{default:a(()=>[r(s(_),null,{default:a(()=>t[22]||(t[22]=[y("Yes")])),_:1,__:[22]})]),_:1}),r(s(E),{value:"No"},{default:a(()=>[r(s(_),null,{default:a(()=>t[23]||(t[23]=[y("No")])),_:1,__:[23]})]),_:1})]),_:1},8,["modelValue"])]),_:1}),f("div",Ke,b(c.value.cd4Available),1)]),o.cd4Available==="Yes"?(T(),F("div",Je,[r(s(Y),{class:"ion-padding"},{default:a(()=>[r(s(W),null,{default:a(()=>[r(s(D),null,{default:a(()=>[r(s(_),null,{default:a(()=>t[24]||(t[24]=[y(" CD4 Count Date ")])),_:1,__:[24]}),r(Ne,{place_holder:"Enter CD4 Date",onDateUpDated:t[6]||(t[6]=i=>S("cd4Date","".concat(i.value.year,"-").concat(i.value.month,"-").concat(i.value.day))),date_prop:""}),f("div",Ze,b(c.value.cd4Date),1)]),_:1})]),_:1}),r(s(W),{style:{"margin-top":"15px"}},{default:a(()=>[r(s(D),null,{default:a(()=>[r(s($),{modelValue:o.cd4,"onUpdate:modelValue":t[7]||(t[7]=i=>o.cd4=i),onIonInput:t[8]||(t[8]=i=>S("cd4",i)),placeholder:"CD4 count e.g. <100 or >500","label-placement":"stacked",label:"CD4 Count",fill:"outline"},null,8,["modelValue"]),f("div",Xe,b(c.value.cd4),1)]),_:1}),r(s(D),null,{default:a(()=>[r(s(Se),{modelValue:o.selectedFacilityObj,"onUpdate:modelValue":[t[9]||(t[9]=i=>o.selectedFacilityObj=i),t[10]||(t[10]=i=>S("cd4Location",i))],multiple:!1,taggable:!1,"close-on-select":!0,openDirection:"bottom","tag-placeholder":"Find and select facility",placeholder:"Select CD4 Count location",selectLabel:"",label:"label",searchable:!0,"track-by":"label",onSearchChange:t[11]||(t[11]=i=>p.cd4Location.searchFacilities(i)),options:z.value},null,8,["modelValue","options"]),f("div",et,b(c.value.cd4Location),1)]),_:1})]),_:1})]),_:1})])):x("",!0)]),f("div",tt,[r(s(Y),null,{default:a(()=>[r(s(W),null,{default:a(()=>[r(s(D),null,{default:a(()=>[r(s($),{readonly:"",placeholder:"N/A",label:"REASON FOR ART:",modelValue:o.reasonForArt,"onUpdate:modelValue":t[12]||(t[12]=i=>o.reasonForArt=i)},null,8,["modelValue"])]),_:1}),r(s(D),null,{default:a(()=>[r(s($),{readonly:"",placeholder:"N/A",label:"WHO STAGE:",modelValue:o.whoStage,"onUpdate:modelValue":t[13]||(t[13]=i=>o.whoStage=i)},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})])]),_:1})]),_:1}))}}),ct=He(nt,[["__scopeId","data-v-b7e7d5d8"]]);export{ct as default};
