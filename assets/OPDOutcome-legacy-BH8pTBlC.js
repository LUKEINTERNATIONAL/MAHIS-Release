System.register(["./vendor-legacy-DISdEYhC.js","./index-legacy-vgqvgUBZ.js","./lodash-legacy-pOOc9Efu.js","./patient_complaints_service-legacy-DImz7AXr.js","./DashBox-legacy-DkV7-Vly.js","./useExposeFromStandardForm-legacy-NQjNdhhL.js","./BasicForm-legacy-1DRaregG.js","./formatServerData-legacy-C7uhp4xF.js","./NextAppointment-legacy-MuNgG2mV.js","./drug_prescription_service-legacy-B4faSyJd.js","./Outcome-legacy-arVlILKb.js"],function(e,a){"use strict";var t,n,o,l,i,s,r,d,c,u,p,v,m,f,g,h,y,b,_,x,w,k,D,C,I,S,E,O,P,A,N,V,H,M,T,B,F,L,z,R,U,q,j,$,Y,G,W,X,Q,K,J,Z,ee,ae,te,ne,oe,le,ie,se,re,de,ce,ue,pe,ve,me,fe,ge,he,ye,be,_e,xe,we,ke,De,Ce,Ie,Se,Ee,Oe,Pe,Ae,Ne,Ve,He,Me,Te,Be,Fe,Le,ze,Re,Ue,qe,je,$e,Ye,Ge,We,Xe,Qe,Ke,Je,Ze,ea,aa,ta,na,oa,la,ia,sa,ra,da,ca,ua,pa,va,ma,fa,ga,ha,ya,ba,_a,xa,wa,ka,Da,Ca;return{setters:[e=>{t=e.d,n=e.ah,o=e.G,l=e.E,i=e.ai,s=e.aj,r=e.$,d=e.I,c=e.a4,u=e.bf,p=e.aU,v=e.H,m=e.e,f=e.f,g=e.k,h=e.l,y=e.aV,b=e.r,_=e.c,x=e.a,w=e.m,k=e.O,D=e.J,C=e.u,I=e.Q,S=e.F,E=e.at,O=e.em,P=e.en,A=e.eo,N=e.ay,V=e.aE,H=e.w,M=e.av,T=e.bS,B=e.P,F=e.aM,L=e.K,z=e.p,R=e.bF,U=e.L,q=e.ep,j=e.eq,$=e.bk,Y=e.er,G=e.es,W=e.c$,X=e.et,Q=e.eu,K=e.ev,J=e.d4,Z=e.bR,ee=e.ax,ae=e.bZ,te=e.X,ne=e.al,oe=e.ak,le=e.N,ie=e.bt,se=e.a5,re=e.R,de=e.bl,ce=e.b2,ue=e.bn,pe=e.a3,ve=e.bX,me=e.bI,fe=e.a6,ge=e.c3,he=e.bs,ye=e.ew,be=e.dX},e=>{_e=e.be,xe=e.H,we=e.ag,ke=e.bg,De=e.bf,Ce=e.b2,Ie=e.u,Se=e._,Ee=e.i,Oe=e.aA,Pe=e.aB,Ae=e.M,Ne=e.Q,Ve=e.S,He=e.aV,Me=e.t,Te=e.K,Be=e.aP,Fe=e.aQ,Le=e.bO,ze=e.bP,Re=e.bF,Ue=e.b9,qe=e.bb,je=e.bQ,$e=e.aS,Ye=e.P,Ge=e.aW,We=e.b0,Xe=e.v,Qe=e.aI,Ke=e.o,Je=e.bo,Ze=e.N,ea=e.B,aa=e.aw,ta=e.ao,na=e.as,oa=e.aK,la=e.ar},e=>{ia=e.l},e=>{sa=e.P},e=>{ra=e.D},e=>{da=e.u},e=>{ca=e.B},e=>{ua=e.f,pa=e.c,va=e.a},e=>{ma=e.A,fa=e.P,ga=e.D,ha=e.b},e=>{ya=e.D,ba=e.b},e=>{_a=e._,xa=e.D,wa=e.A,ka=e.R,Da=e.a,Ca=e.b}],execute:function(){var a=document.createElement("style");a.textContent=".bmi_blood[data-v-30434e22]{font-size:14px;font-weight:500;border:1px solid #ddeedd;border-radius:4px;padding:4px;min-width:190px}.graphBtn[data-v-30434e22]{font-size:14px;font-weight:500;border:1px solid #ddeedd;border-radius:4px;padding:4px;min-width:90px}._active[data-v-30434e22]{background-color:#ded;color:#006401;padding:5px;border-radius:4px}.iconBg[data-v-30434e22]{background:#ded;padding:2px;border-radius:5px}.vitals_title[data-v-0f7271d6]{border-bottom:1px solid #b3b3b3;margin-bottom:50px}.input-with-icon[data-v-0f7271d6]{position:relative}.input-icon[data-v-0f7271d6]{position:absolute;left:10px;top:50%;transform:translateY(-50%);color:gray}ion-col[data-v-0f7271d6]{padding-bottom:15px}h5[data-v-0f7271d6]{margin-top:0;text-overflow:ellipsis;white-space:nowrap;overflow:hidden}.previousView[data-v-0f7271d6]{margin-top:70px;margin-bottom:20px}.allergies-container[data-v-1302dd03]{padding:1rem;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,sans-serif}.section-title[data-v-1302dd03]{display:flex;align-items:center;font-size:18px;font-weight:700;color:#1f2937;letter-spacing:-.01em;margin-bottom:16px}.alert-icon[data-v-1302dd03]{font-size:24px;color:#dc2626;margin-right:8px}.no-allergies[data-v-1302dd03]{display:flex;flex-direction:column;align-items:center;justify-content:center;text-align:center;background:#f8f9fa;border-radius:12px;border:2px dashed #e0e0e0}.no-allergies-icon[data-v-1302dd03]{font-size:3rem;color:#10dc60}.no-allergies p[data-v-1302dd03]{margin:0;color:#666;font-size:1rem}.date-groups[data-v-1302dd03]{display:flex;flex-direction:column;gap:.7rem}.date-group[data-v-1302dd03]{background:#fff;border-radius:12px;box-shadow:0 2px 8px rgba(0,0,0,.08);overflow:hidden;border:1px solid #e0e0e0}.date-header[data-v-1302dd03]{display:flex;align-items:center;justify-content:space-between;padding:1rem 1.25rem;background:linear-gradient(135deg,#f8f9fa,#e9ecef);border-bottom:1px solid #e0e0e0;cursor:pointer;transition:all .2s ease;user-select:none}.date-header[data-v-1302dd03]:hover{background:linear-gradient(135deg,#e9ecef,#dee2e6)}.date-header.expanded[data-v-1302dd03]{background:linear-gradient(135deg,#298627,#17711f);color:#fff}.date-header.expanded .date-icon[data-v-1302dd03],.date-header.expanded .expand-icon[data-v-1302dd03]{color:#fff}.date-info[data-v-1302dd03]{display:flex;align-items:center;gap:.75rem}.date-icon[data-v-1302dd03]{font-size:1.25rem;color:#3880ff}.date-text[data-v-1302dd03]{font-weight:600;font-size:1rem}.allergy-count[data-v-1302dd03]{font-size:.85rem;opacity:.8;font-weight:400}.expand-icon[data-v-1302dd03]{font-size:1.25rem;color:#666;transition:transform .2s ease}.expand-icon.rotated[data-v-1302dd03]{transform:rotate(180deg)}.allergies-grid[data-v-1302dd03]{display:grid;grid-template-columns:repeat(auto-fill,minmax(300px,1fr));gap:1rem;padding:1.25rem;max-height:1000px;overflow:hidden;transition:all .3s ease}.allergies-grid.collapsed[data-v-1302dd03]{max-height:0;padding:0 1.25rem}.allergy-card[data-v-1302dd03]{background:#fafafa;border-radius:8px;padding:1.25rem;border-left:4px solid transparent;transition:all .2s ease;border:1px solid #f0f0f0}.allergy-card[data-v-1302dd03]:hover{transform:translateY(-1px);box-shadow:0 4px 12px rgba(0,0,0,.1);background:#fff}.allergy-card.danger[data-v-1302dd03]{border-left-color:#f04141}.allergy-card.warning[data-v-1302dd03]{border-left-color:#ffc409}.allergy-card.info[data-v-1302dd03]{border-left-color:#45ff38}.card-header[data-v-1302dd03]{display:flex;align-items:center;gap:.75rem;margin-bottom:1rem}.allergy-icon[data-v-1302dd03]{font-size:1.5rem;color:inherit}.danger .allergy-icon[data-v-1302dd03]{color:#f04141}.warning .allergy-icon[data-v-1302dd03]{color:#ffc409}.info .allergy-icon[data-v-1302dd03]{color:#3880ff}.allergy-type[data-v-1302dd03]{font-weight:600;font-size:.9rem;color:#666;text-transform:uppercase;letter-spacing:.5px}.card-content[data-v-1302dd03]{display:flex;flex-direction:column;gap:1rem}.allergy-value[data-v-1302dd03]{font-size:1.1rem;font-weight:500;color:#1a1a1a;line-height:1.4}.drug-name[data-v-1302dd03]{font-weight:600;color:#d63031;background:rgba(214,48,49,.1);padding:.5rem .75rem;border-radius:8px;border-left:3px solid #d63031}.metadata[data-v-1302dd03]{display:flex;flex-direction:column;gap:.5rem}.provider[data-v-1302dd03],.encounter[data-v-1302dd03]{display:flex;align-items:center;gap:.5rem;font-size:.85rem;color:#666}.meta-icon[data-v-1302dd03]{font-size:1rem;color:#999}@media(max-width:768px){.allergies-grid[data-v-1302dd03]{grid-template-columns:1fr}.allergies-container[data-v-1302dd03]{padding:.75rem}.date-header[data-v-1302dd03]{padding:.875rem 1rem}.date-info[data-v-1302dd03]{gap:.5rem}.date-text[data-v-1302dd03]{font-size:.9rem}.allergy-count[data-v-1302dd03]{font-size:.8rem}}@keyframes expandIn-1302dd03{0%{opacity:0;transform:translateY(-10px)}to{opacity:1;transform:translateY(0)}}.allergies-grid:not(.collapsed) .allergy-card[data-v-1302dd03]{animation:expandIn-1302dd03 .2s ease forwards}.visit-container[data-v-795e1865]{background:#fff;border-radius:16px;box-shadow:0 4px 12px rgba(0,0,0,.05);padding:24px;margin:16px;font-family:Segoe UI,Roboto,Helvetica Neue,sans-serif}.visit-header[data-v-795e1865]{display:flex;justify-content:space-between;align-items:center;margin-bottom:24px;padding-bottom:16px;border-bottom:1px solid #f0f0f0}.visit-header h5[data-v-795e1865]{margin:0;font-size:1.25rem;font-weight:600;color:#2d3748}.visit-sections[data-v-795e1865]{display:flex;flex-direction:column;gap:20px}.visit-section[data-v-795e1865]{background:#f8fafc;border-radius:12px;padding:16px;transition:all .2s ease}.visit-section[data-v-795e1865]:hover{box-shadow:0 2px 8px rgba(0,0,0,.08);transform:translateY(-2px)}.section-header[data-v-795e1865]{display:flex;align-items:center;gap:12px;margin-bottom:16px}.section-header h3[data-v-795e1865]{margin:0;font-size:1.1rem;font-weight:500;color:#2d3748}.section-icon[data-v-795e1865]{color:#4299e1;font-size:1.4rem}.section-content[data-v-795e1865]{display:flex;flex-direction:column;gap:12px}.info-item[data-v-795e1865]{display:flex;gap:8px}.info-label[data-v-795e1865]{font-weight:500;color:#4a5568;min-width:120px}.info-value[data-v-795e1865]{color:#2d3748}.highlight[data-v-795e1865]{font-weight:600;color:#3182ce}.tags-container[data-v-795e1865]{display:flex;flex-wrap:wrap;gap:8px}.complaint-tag[data-v-795e1865],.medical-tag[data-v-795e1865],.allergy-tag[data-v-795e1865]{padding:6px 12px;border-radius:20px;font-size:.85rem;font-weight:500}.complaint-tag[data-v-795e1865]{background:#ebf8ff;color:#3182ce}.medical-tag[data-v-795e1865]{background:#f0fff4;color:#38a169}.allergy-tag[data-v-795e1865]{background:#fff5f5;color:#e53e3e}.complaints-container[data-v-795e1865]{display:flex;flex-direction:column;gap:12px}.complaint-item[data-v-795e1865]{display:flex;justify-content:space-between;margin-right:70%;align-items:center;padding:8px 12px;background:#f8fafc;border-radius:8px;gap:10px}.complaint-name[data-v-795e1865]{font-weight:500;color:#2d3748;white-space:nowrap}.complaint-duration[data-v-795e1865]{color:#718096;font-size:.9em;white-space:nowrap}.exam-section[data-v-795e1865]{display:flex;flex-direction:column;gap:16px}.exam-category[data-v-795e1865]{background:#fff;border-radius:8px;padding:12px;box-shadow:0 1px 3px rgba(0,0,0,.05)}.exam-category-header[data-v-795e1865]{display:flex;align-items:center;gap:8px;margin-bottom:8px}.exam-category-header h4[data-v-795e1865]{margin:0;font-size:.95rem;font-weight:500;color:#4a5568}.exam-category-header ion-icon[data-v-795e1865]{color:#718096;font-size:1.1rem}.exam-items[data-v-795e1865]{display:flex;flex-wrap:wrap;gap:8px}.exam-item[data-v-795e1865]{background:#f7fafc;padding:6px 10px;border-radius:6px;font-size:.85rem;color:#4a5568}.exam-item.normal[data-v-795e1865]{background:#e6ffed;color:#38a169}@media(max-width:768px){.visit-container[data-v-795e1865]{padding:16px;margin:8px}.visit-header[data-v-795e1865]{flex-direction:column;align-items:flex-start;gap:8px}.tags-container[data-v-795e1865],.complaints-container[data-v-795e1865]{gap:6px}.complaint-tag[data-v-795e1865],.medical-tag[data-v-795e1865],.allergy-tag[data-v-795e1865]{padding:4px 10px;font-size:.8rem}}.modal_wrapper[data-v-49fdce72]{display:flex;flex-direction:column;width:100%;max-width:1200px;margin:0 auto}@media(max-width:768px){.modal_wrapper[data-v-49fdce72]{max-width:100%}}@media(max-width:480px){.modal_wrapper[data-v-49fdce72]{flex-direction:column}}.container[data-v-0d34c6dd]{display:flex;flex-direction:column;align-items:center}.section[data-v-0d34c6dd]{width:100%;max-width:1300px;margin-bottom:20px}ion-card[data-v-0d34c6dd]{box-shadow:none;background-color:inherit;width:100%;color:#000}.navigation-buttons[data-v-0d34c6dd]{display:flex;justify-content:space-between;width:100%;max-width:500px}@media(max-width:1500px){.container[data-v-0d34c6dd]{padding:10px}}.sub_item_header[data-v-0d34c6dd]{font-weight:700;font-size:14px}._card[data-v-597092a6]{border-radius:5px;background-color:#fff;box-shadow:rgba(0,0,0,.2) 0 3px 1px -2px,rgba(0,0,0,.14) 0 2px 2px,rgba(0,0,0,.12) 0 1px 5px;margin-bottom:10px}ion-item[data-v-597092a6]::part(native){border:none}.previousView[data-v-597092a6]{margin-top:10px}.previousLabel[data-v-597092a6]{font-weight:700;font-size:1rem}.nav-buttons[data-v-597092a6]{display:flex;justify-content:flex-start;gap:10px;margin-top:10px}ion-accordion[data-v-597092a6]::part(header){padding:8px}.ion-padding[data-v-597092a6]{padding-top:0}.bmi_blood[data-v-88580898]{font-size:14px;font-weight:500;border:1px solid #ddeedd;border-radius:4px;padding:4px;min-width:190px}.graphBtn[data-v-88580898]{font-size:14px;font-weight:500;border:1px solid #ddeedd;border-radius:4px;padding:4px;min-width:90px}._active[data-v-88580898]{background-color:#ded;color:#006401;padding:5px;border-radius:4px}.iconBg[data-v-88580898]{background:#ded;padding:2px;border-radius:5px}#container[data-v-a440f286]{text-align:center;position:absolute;left:0;right:0;top:50%;transform:translateY(-50%)}#container strong[data-v-a440f286]{font-size:20px;line-height:26px}#container p[data-v-a440f286]{font-size:16px;line-height:22px;color:#8c8c8c;margin:0}#container a[data-v-a440f286]{text-decoration:none}.action_buttons[data-v-a440f286]{color:var(--ion-color-primary);display:flex;align-items:center;float:right;max-width:70px}.modify_buttons[data-v-a440f286]{padding-left:20px}.item_no_border[data-v-a440f286]{--border-color: transparent}.search_result[data-v-a440f286]{padding:10px}.previousView[data-v-a440f286]{margin-top:70px;margin-bottom:20px}#container[data-v-928c62f1]{text-align:center;position:absolute;left:0;right:0;top:50%;transform:translateY(-50%)}#container strong[data-v-928c62f1]{font-size:20px;line-height:26px}#container p[data-v-928c62f1]{font-size:16px;line-height:22px;color:#8c8c8c;margin:0}#container a[data-v-928c62f1]{text-decoration:none}ion-item.medicalAl[data-v-928c62f1]{--background: #fff;--border-radius: 5px}ion-button.medicalAlBtn[data-v-928c62f1]{--background: #fecdca;--color: #b42318;text-transform:none}.error-label[data-v-928c62f1]{background:#fecdca;color:#b42318;text-transform:none;padding:2%;border-radius:10px;margin-top:7px;display:flex;text-align:center}ion-button.addMedicalTpBtn[data-v-928c62f1]{--background: #ddeedd;--color: #006401;text-transform:none;font-weight:600;font-size:16px}ion-button.medicalAlAddBtn[data-v-928c62f1]{font-size:large}ion-icon.icon-al[data-v-928c62f1]{font-size:x-large;margin-bottom:-5px}.item-al[data-v-928c62f1]{cursor:pointer;padding:5px;background-color:#ebebeb;margin-top:8px}.item-al[data-v-928c62f1]:hover{background-color:rgba(85,81,81,.282);padding:5px;border-radius:3px}ion-popover.popover-al[data-v-928c62f1]{--background: #fff}ion-content.content-al[data-v-928c62f1]{--background: #fff}ion-list.list-al[data-v-928c62f1]{--background: #fff;-ion-item-background:#fff}.checkLbltp[data-v-928c62f1]{border-bottom:2px dotted var(--ion-color-medium);--inner-border-width: 0}.tpStndCls[data-v-928c62f1]{font-size:16px;font-weight:600;line-height:24px}.action_buttons[data-v-928c62f1]{color:var(--ion-color-primary);display:flex;align-items:center;float:right}.action_buttons[data-v-928c62f1]:hover{cursor:pointer}.spcls[data-v-928c62f1]{display:flex;align-items:center}.previousView[data-v-928c62f1]{width:100%;border-radius:10px;margin-top:10px}.previousLabel[data-v-928c62f1]{font-weight:600;color:#000}.previousLabelDate[data-v-928c62f1]{font-weight:600;color:#000;margin:2%}.previousSecDrgs[data-v-928c62f1]{margin:2%}.notes_p[data-v-928c62f1]{margin:4%}.qaws[data-v-928c62f1]{margin-top:-27px}.allergies-section[data-v-928c62f1]{background:#fff;border-radius:8px;box-shadow:0 2px 4px rgba(0,0,0,.05);margin-bottom:10px}.section-title[data-v-928c62f1]{display:flex;align-items:center;font-size:18px;font-weight:700;color:#1f2937;letter-spacing:-.01em;margin-bottom:16px}.allergies-container[data-v-928c62f1]{min-height:48px}.allergies-grid[data-v-928c62f1]{display:flex;flex-wrap:wrap;gap:8px}.allergy-chip[data-v-928c62f1]{--background: #fee2e2;--color: #dc2626;font-size:14px;font-weight:500}.allergy-chip ion-icon[data-v-928c62f1]{color:#dc2626}.no-allergies[data-v-928c62f1]{display:flex;align-items:center;justify-content:center;height:48px;background:#f9fafb;border-radius:6px;font-size:15px;font-weight:500;color:#9c8011}.medication-section[data-v-928c62f1]{background:#fff;border-radius:8px;padding:16px;margin:16px 0;box-shadow:0 1px 3px rgba(0,0,0,.1)}.section-header[data-v-928c62f1]{margin-bottom:16px;--background: transparent}.section-icon[data-v-928c62f1]{font-size:22px;margin-right:10px;color:var(--ion-color-primary)}.medication-content[data-v-928c62f1]{padding:0 16px}.add-medication-form[data-v-928c62f1]{background:#f9fafb;border-radius:8px;padding:20px;margin-top:16px}.form-group[data-v-928c62f1]{margin-bottom:16px}.form-row[data-v-928c62f1]{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:16px;margin-bottom:16px}.input-label[data-v-928c62f1]{display:block;font-size:16px;font-weight:600;color:#374151;margin-bottom:10px}.error-message[data-v-928c62f1]{color:#dc2626;font-size:15px;font-weight:600;margin-top:4px}.action-buttons[data-v-928c62f1]{display:flex;gap:8px;justify-content:flex-end;margin-top:16px}.save-button[data-v-928c62f1]{--background: var(--ion-color-primary);--color: #ffffff;font-size:16px;font-weight:600}.cancel-button[data-v-928c62f1]{--background: #e5e7eb;--color: #374151;font-size:16px;font-weight:600}.add-new-button[data-v-928c62f1]{width:100%;margin-top:16px;--background: var(--ion-color-primary-tint);--color: var(--ion-color-primary);font-size:16px;font-weight:600}.notes-section[data-v-928c62f1]{background:#fff;border-radius:8px;padding:16px;margin:16px 0;box-shadow:0 1px 3px rgba(0,0,0,.1)}.notes-content[data-v-928c62f1]{padding:0 16px}.intervention-component[data-v-928c62f1],.notes-input-container[data-v-928c62f1]{margin-bottom:16px}.notes-input-item[data-v-928c62f1]{--background: #f9fafb;--border-radius: 8px;--padding-start: 12px;--padding-end: 12px;min-height:120px}.edit-icon[data-v-928c62f1]{color:var(--ion-color-medium);font-size:20px;margin-right:8px}.notes-textarea[data-v-928c62f1]{--padding-top: 12px;--padding-bottom: 12px;--placeholder-color: #9ca3af;--placeholder-opacity: 1;font-size:16px;font-weight:600;line-height:1.6}.previous-notes[data-v-928c62f1]{background:#fff;border-radius:8px;overflow:hidden}.previous-notes-header[data-v-928c62f1]{--background: #f9fafb;font-weight:600}.notes-timeline[data-v-928c62f1]{padding:8px 0}.note-entry[data-v-928c62f1]{padding:12px 16px;border-bottom:1px solid #e5e7eb}.note-entry[data-v-928c62f1]:last-child{border-bottom:none}.note-date[data-v-928c62f1]{font-size:14px;font-weight:600;color:#374151;margin-bottom:8px}.note-content[data-v-928c62f1]{font-size:16px;font-weight:600;line-height:1.6;color:#4b5563;white-space:pre-wrap}.show-more-header[data-v-928c62f1]{--background: transparent;font-size:16px;font-weight:600}[data-v-928c62f1] ion-accordion{margin:0}[data-v-928c62f1] ion-accordion-group{background:#fff}[data-v-928c62f1] ion-accordion.accordion-expanding,[data-v-928c62f1] ion-accordion.accordion-expanded{--background: #ffffff}[data-v-928c62f1]{transition:font-size .2s ease,font-weight .2s ease}[data-v-928c62f1] .multiselect__option{font-size:16px!important;font-weight:600!important;color:#000}.initTxt[data-v-0aad2f08]{text-align:center}.item-al[data-v-0aad2f08]{cursor:pointer;padding:5px;background-color:#ebebeb;margin-top:8px}.item-al[data-v-0aad2f08]:hover{background-color:rgba(85,81,81,.282);padding:5px;border-radius:3px}ion-popover.popover-al[data-v-0aad2f08]{--background: #fff}ion-list.list-al[data-v-0aad2f08]{--background: #fff;-ion-item-background:#fff}.saveContainer[data-v-0aad2f08]{display:flex;align-items:flex-end}.action_buttons[data-v-0aad2f08]{margin-top:5px}.error-label[data-v-0aad2f08]{background:#fecdca;color:#b42318;text-transform:none;padding:6%;border-radius:10px;margin-top:7px;display:flex;text-align:center}.spc_btwn[data-v-0aad2f08]{margin-top:2%}.ion-lblCls[data-v-0aad2f08]{font-weight:700}.initTxt[data-v-fc637de7]{text-align:center}.spc_btwn[data-v-fc637de7]{margin-top:2%}.item-al[data-v-fc637de7]{cursor:pointer;padding:5px;background-color:#ebebeb;margin-top:8px}.item-al[data-v-fc637de7]:hover{background-color:rgba(85,81,81,.282);padding:5px;border-radius:3px}ion-popover.popover-al[data-v-fc637de7]{--background: #fff}ion-list.list-al[data-v-fc637de7]{--background: #fff;-ion-item-background:#fff}.saveContainer[data-v-fc637de7]{display:flex;align-items:flex-end}.action_buttons[data-v-fc637de7]{margin-top:5px}.error-label[data-v-fc637de7]{background:#fecdca;color:#b42318;text-transform:none;padding:6%;border-radius:10px;margin-top:7px;display:flex;text-align:center}\n/*$vite$:1*/",document.head.appendChild(a);const Ia=t({name:"Menu",components:{IonContent:c,IonHeader:d,IonItem:r,IonList:s,IonMenu:i,IonTitle:l,IonToolbar:o,List:_e},computed:{...n(Ie,["patient"]),...n(Ce,["presentingComplaints"])},data:()=>({valueNumericArray:[],obsDatetime:[],graphIcon:De(["#006401"]),listIcon:ke(["#636363"]),displayGraph:!0,orders:[],height:[],BMI:[],iconBg:{},activeWeight:[],activeHeight:[],activeBMI:[],list:[],series:[{name:"",data:[]}]}),setup:()=>({checkmark:p,pulseOutline:u}),watch:{$router:{async handler(){await this.updateList()},immediate:!0,deep:!0},patient:{async handler(){await this.updateList()},deep:!0}},async mounted(){await this.updateList()},methods:{async updateList(){const e=await we.getAll(this.patient.patientID,"Presenting complaint"),a=ia.isEmpty(e)?[]:Promise.all(e.map(async e=>e.value_coded?{name:await we.getConceptName(e.value_coded),obs_date:e.obs_datetime,duration:e.children[0].value_text}:[]));this.setListData(await a)},setListData(e){this.list=[],this.list.push({actionBtn:!1,class:"col_background",header:!0,minHeight:"--min-height: 20px;",containSize:4,display:["Date","Presenting Complains","Duration"]}),e.forEach(e=>{this.list.push({actionBtn:!1,minHeight:"--min-height:20px;",class:"col_background",containSize:4,display:[xe.toStandardHisFormat(e.obs_date),e.name,e.duration]})})}}}),Sa={class:"modal_wrapper"},Ea=Se(Ia,[["render",function(e,a,t,n,o,l){const i=v("list");return f(),m("div",Sa,[g("div",null,[h(i,{listData:e.list},null,8,["listData"])])])}],["__scopeId","data-v-30434e22"]]),Oa={key:0},Pa={style:{"align-content":"center"}},Aa={class:"ion-padding",slot:"content"},Na=e("P",Se(t({__name:"PresentingComplaints",setup(e,{expose:a}){const t=Ce(),{presentingComplaints:n}=y(t),o=b(Ee),l=b(!0),i=b(!1),s=b(!0),d=b(!1),c=b([]),u=b([]),p=b(),E=_(()=>[{componentType:"multiSelectInputField",header:"Presenting Complaints",name:"PresentingComplaints",trackBy:"concept_id",icon:Ee.search,hideSelected:!0,validation:e=>A(null==e?void 0:e.name,c.value)?"Presenting complaint already added":Oe.required(e),options:u.value,grid:{s:"6"}},{componentType:"inputField",header:"Duration",name:"duration",icon:Ee.time,validation:e=>Oe.isNotEmptyandNumber(e),grid:{s:"6"},unitOptions:[{label:"Hours",value:"Hours"},{label:"Days",value:"Days"},{label:"Weeks",value:"Weeks"},{label:"Months",value:"Months"},{label:"Years",value:"Years"}],unitValidation:e=>e&&""!==e?null:"Please select a unit."},{componentType:"inputField",header:"Specify the presenting complaint(s)",name:"Other (specify)",icon:Ee.editPen,validation:e=>A(e,c.value)?"Presenting complaint already added":Oe.required(e),condition:e=>{var a;return"Other"===(null==e||null===(a=e.PresentingComplaints)||void 0===a?void 0:a.name)}},{componentType:"Alert",condition:e=>{var a;return!(null==Oe.required(null==e||null===(a=e.PresentingComplaints)||void 0===a?void 0:a.name))},backgroundColor:"lightyellow",textColor:"black",value:"Please search thoroughly for the complaint. If it is not listed, search and select the 'Other' option to specify the complaint.",name:"noMatchAlert"}]),{formRef:O}=da(),P=e=>{var a;const t=e.duration+" "+e.duration_unit,n=e.PresentingComplaints,o="Other"===n.name?e["Other (specify)"]:n.name;c.value.push({actionBtn:!0,btn:["delete"],name:o,concept_id:n.concept_id,duration:n.duration,durationUnits:n.duration_unit,display:[o,t],data:[{concept_id:8578,value_coded:n.concept_id,obs_datetime:Ve.getSessionDate(),child:[{concept_id:n.concept_id,value_text:t,obs_datetime:Ve.getSessionDate()}]}]}),null===(a=O.value)||void 0===a||a.resetForm(),d.value=!0},A=(e,a)=>a.some(a=>a.name===e),N=e=>{c.value=c.value.filter(a=>a.display[0]!==e.name)};return x(async()=>{await(async()=>{u.value=await sa.getComplaintsList("Presenting complaint"),Ne(n.value,"PresentingComplaints","multiSelectData",u.value)})()}),a({onSubmit:async()=>{const e=await we.getObsByEncounterIdAndDate(He.PRESENTING_COMPLAINTS),a=c.value.flatMap(e=>e.data);if(a.length<=0&&e.length<=0)return Me("Presenting complaints is required");a.length<=0||(await we.addObsToEncounterPatient(a,He.PRESENTING_COMPLAINTS),Te("Presenting complaints saved successful"),c.value=[])}}),(e,a)=>{const t=v("ion-row"),n=v("ion-label"),u=v("ion-accordion"),y=v("ion-accordion-group");return f(),m(S,null,[h(ra,{status:l.value,content:"No presenting complaints added"},null,8,["status"]),d.value?(f(),m("span",Oa,[h(_e,{listData:c.value,"onClicked:delete":N},null,8,["listData"])])):w("",!0),i.value?(f(),k(t,{key:1},{default:D(()=>[h(Pe,{formData:E.value,ref_key:"formRef",ref:O},null,8,["formData"]),g("div",Pa,[h(Ae,{fill:"clear",icon:o.value.plus,iconSlot:"icon-only","onClicked:btn":a[0]||(a[0]=e=>(async()=>{var e,a;const t=null===(e=O.value)||void 0===e?void 0:e.getFormValues();null==(null===(a=O.value)||void 0===a?void 0:a.validateForm())&&(P(t),i.value=!1,s.value=!0)})()),name:"Save"},null,8,["icon"])])]),_:1})):w("",!0),s.value?(f(),k(t,{key:2,style:{"margin-top":"10px"}},{default:D(()=>[h(Ae,{fill:"clear",icon:o.value.plus,iconSlot:"icon-only","onClicked:btn":a[1]||(a[1]=e=>(l.value=!1,s.value=!1,void(i.value=!0))),name:"Add new presenting complaints"},null,8,["icon"])]),_:1})):w("",!0),h(t,null,{default:D(()=>[h(y,{ref_key:"accordionGroup",ref:p,class:"previousView"},{default:D(()=>[h(u,{value:"first","toggle-icon-slot":"start",style:{"border-radius":"10px","background-color":"#fff"}},{default:D(()=>[h(C(r),{slot:"header",color:"light"},{default:D(()=>[h(n,{class:"previousLabel"},{default:D(()=>[...a[2]||(a[2]=[I("Previous presenting complaints",-1)])]),_:1})]),_:1}),g("div",Aa,[h(Ea)])]),_:1})]),_:1},512)]),_:1})],64)}}}),[["__scopeId","data-v-0f7271d6"]])),Va=_(()=>[{componentType:"radioButtonField",header:"Eye opening response",name:"Eye opening response",obsValueType:"value_coded",type:"inline",options:[{label:"Spontaneously",value:"Spontaneously"},{label:"To speech",value:"To speech"},{label:"To pain",value:"To pain"},{label:"No response",value:"No response"}]},{componentType:"Dashes"},{componentType:"radioButtonField",header:"Best verbal response",name:"Best verbal response",obsValueType:"value_coded",type:"inline",options:[{label:"Oriented to time, place and person",value:"Oriented to time, place and person"},{label:"Confused",value:"Confused"},{label:"Inappropriate words",value:"Inappropriate words"},{label:"Incomprehensible sounds",value:"Incomprehensible sounds"},{label:"No response",value:"No response"}]},{componentType:"Dashes"},{componentType:"radioButtonField",header:"Best motor response",name:"Best motor response",obsValueType:"value_coded",type:"inline",options:[{label:"Obeys commands",value:"Obeys commands"},{label:"Moves to localised pain",value:"Moves to localised pain"},{label:"Flexion withdrawal from pain",value:"Flexion withdrawal from pain"},{label:"Abnormal flexion (decorticate)",value:"Abnormal flexion (decorticate)"},{label:"Abnormal extension (decerebrate)",value:"Abnormal extension (decerebrate)"},{label:"No response",value:"No response"}]}]),Ha=_(()=>[{componentType:"radioButtonField",header:"Eye opening response",name:"Eye opening response",obsValueType:"value_coded",type:"inline",options:[{label:"Directed eye movements",value:"Directed eye movements"},{label:"Not directed",value:"Not directed"}]},{componentType:"Dashes"},{componentType:"radioButtonField",header:"Best verbal response",name:"Best verbal response",obsValueType:"value_coded",type:"inline",options:[{label:"Appropriate cry",value:"Appropriate cry"},{label:"Inappropriate cry or moan",value:"Inappropriate cry or moan"},{label:"No cry",value:"No cry"}]},{componentType:"Dashes"},{componentType:"radioButtonField",header:"Best motor response",name:"Best motor response",obsValueType:"value_coded",type:"inline",options:[{label:"Localizes pain",value:"Localizes pain"},{label:"Withdraws from pain",value:"Withdraws from pain"},{label:"Non specific or no response",value:"Non specific or no response"}]}]),Ma={Spontaneously:4,"To speech":3,"To pain":2,"No response":1},Ta={"Oriented to time, place and person":5,Confused:4,"Inappropriate words":3,"Incomprehensible sounds":2,"No response":1},Ba={"Obeys commands":6,"Moves to localised pain":5,"Flexion withdrawal from pain":4,"Abnormal flexion (decorticate)":3,"Abnormal extension (decerebrate)":2,"No response":1},Fa={"Not directed":0,"Directed eye movements":1},La={"Non specific or no response":0,"Withdraws from pain":1,"Localizes pain":2},za={"No cry":0,"Inappropriate cry or moan":1,"Appropriate cry":2},Ra={class:"allergies-container"},Ua={key:0,class:"no-allergies"},qa={key:1,class:"date-groups"},ja=["onClick"],$a={class:"date-info"},Ya={class:"date-text"},Ga={class:"allergy-count"},Wa={class:"card-header"},Xa={class:"allergy-type"},Qa={class:"card-content"},Ka=Se(t({__name:"AllergiesListing",setup(e){const a=Ie(),{patient:t}=y(a),n=b({}),o={antiviral:/abacavir|lamivudine|lopinavir|ritonavir|zidovudine|efavirenz|tenofovir/i,antibiotic:/penicillin|amoxicillin|cephalexin|azithromycin|ciprofloxacin|doxycycline/i,analgesic:/aspirin|ibuprofen|acetaminophen|morphine|codeine|tramadol/i,cardiac:/metoprolol|lisinopril|amlodipine|atorvastatin|warfarin/i,activated:/activated\s+charcoal/i},l={985:{name:"Other",icon:E,severity:"danger"},7759:{name:"Location/Environmental",icon:V,severity:"info"},7579:{name:"Medical Condition",icon:N,severity:"warning"},drug:{name:"Drug Allergy",icon:E,severity:"danger"},food:{name:"Food Allergy",icon:A,severity:"danger"},environmental:{name:"Environmental",icon:P,severity:"warning"},contact:{name:"Contact Allergy",icon:O,severity:"warning"},unknown:{name:"Drug Allergy",icon:E,severity:"danger"}},i=_(()=>{var e;return(null===(e=t.value)||void 0===e||null===(e=e.allergies)||void 0===e||null===(e=e.saved)||void 0===e?void 0:e.length)>0}),s=_(()=>i.value?t.value.allergies.saved.map(e=>{var a;const t=(null===(a=e.concept_id)||void 0===a?void 0:a.toString())||"unknown";console.log("###########: ",e);const n=l[t]||l.unknown;let i="Unknown",s=null;return e.value_text&&"Unknown"!==e.value_text&&""!==e.value_text?(i=e.value_text,"985###"===t&&(s=(e=>{const a=e.toLowerCase();return o.antiviral.test(a)?{type:"Antiviral Medication",icon:"shield-outline"}:o.antibiotic.test(a)?{type:"Antibiotic",icon:"bandage-outline"}:o.analgesic.test(a)?{type:"Pain Medication",icon:"fitness-outline"}:o.cardiac.test(a)?{type:"Cardiac Medication",icon:"heart-outline"}:o.activated.test(a)?{type:"Detoxification Agent",icon:"flask-outline"}:{type:"Medication",icon:"medical-outline"}})(e.value_text))):e.concept_name&&(i=e.concept_name),{...s?{...n,name:s.type,icon:s.icon}:n,displayValue:i,conceptId:e.concept_id,date:e.obs_datetime||e.encounter_datetime,providerId:e.provider_id,locationId:e.location_id,encounterId:e.encounter_id,isDrug:"985"===t,raw:e}}):[]),r=_(()=>{const e={};s.value.forEach(a=>{const t=a.date?d(a.date):"Unknown Date";e[t]||(e[t]=[]),e[t].push(a)});const a={};return Object.keys(e).sort((e,a)=>"Unknown Date"===e?1:"Unknown Date"===a?-1:new Date(a).getTime()-new Date(e).getTime()).forEach(t=>{a[t]=e[t]}),a}),d=e=>{if(!e)return"Unknown Date";try{return new Date(e).toISOString().split("T")[0]}catch(a){return"Unknown Date"}},c=e=>{if("Unknown Date"===e)return"Unknown Date";try{const a=new Date(e),t=xe.sessionDate(),n=new Date(t),o=new Date(n);o.setDate(o.getDate()-1);const l=a.toDateString(),i=n.toDateString(),s=o.toDateString();return l===i?"Today":l===s?"Yesterday":a.toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})}catch(a){return e}};return H(()=>r.value,e=>{const a=Object.keys(e);a.length>0&&(n.value[a[0]]=!0)},{immediate:!0}),H(()=>{var e;return null===(e=t.value)||void 0===e?void 0:e.allergies},e=>{console.log("Allergies updated:",e)},{deep:!0}),x(()=>{var e;console.log("Allergies component mounted",null===(e=t.value)||void 0===e?void 0:e.allergies)}),(e,a)=>{const t=v("ion-icon"),o=v("ion-label");return f(),m("div",Ra,[h(o,{class:"section-title"},{default:D(()=>[h(t,{icon:C(M),class:"alert-icon"},null,8,["icon"]),h(o,null,{default:D(()=>[...a[0]||(a[0]=[I("Allergies (Medication, Healthcare items, Environment and Food)",-1)])]),_:1})]),_:1}),i.value?(f(),m("div",qa,[(f(!0),m(S,null,B(r.value,(e,a)=>(f(),m("div",{key:a,class:"date-group"},[g("div",{class:z(["date-header",{expanded:n.value[a]}]),onClick:e=>(e=>{n.value[e]=!n.value[e]})(a)},[g("div",$a,[h(t,{icon:C(F),class:"date-icon"},null,8,["icon"]),g("span",Ya,L(c(a)),1),g("span",Ga,"("+L(e.length)+" "+L(1===e.length?"allergy":"allergies")+")",1)]),h(t,{icon:C(R),class:z(["expand-icon",{rotated:n.value[a]}])},null,8,["icon","class"])],10,ja),g("div",{class:z(["allergies-grid",{collapsed:!n.value[a]}])},[(f(!0),m(S,null,B(e,(e,a)=>(f(),m("div",{key:a,class:z(["allergy-card",e.severity])},[g("div",Wa,[h(t,{icon:e.icon,class:"allergy-icon"},null,8,["icon"]),g("span",Xa,L(e.name),1)]),g("div",Qa,[g("div",{class:z(["allergy-value",{"drug-name":e.isDrug}])},L(e.displayValue),3)])],2))),128))],2)]))),128))])):(f(),m("div",Ua,[h(t,{icon:C(T),class:"no-allergies-icon"},null,8,["icon"]),a[1]||(a[1]=g("p",null,"No known allergies",-1))]))])}}}),[["__scopeId","data-v-1302dd03"]]),Ja=t({name:"VisitHistory",components:{AllergiesListing:Ka,IonIcon:U},setup(){const e=Fe();return{selectedAllergiesList2:_(()=>e.selectedMedicalAllergiesList),alertCircleOutline:M,documentTextOutline:ae,femaleOutline:ee,medicalOutline:E,warningOutline:Z,bodyOutline:q,eyeOutline:J,nutritionOutline:K,fitnessOutline:G,pulseOutline:u,earOutline:Q,happyOutline:X,manOutline:W,moveOutline:Y,addOutline:$,scanOutline:j}},data:()=>({presentingComplaintsWithDuration:[],pastMedicalHistory:[],levelOfConsciousness:{eyeResponse:null,verbalResponse:null,motorResponse:null},pregnancy:{patientPregnant:null,breastFeeding:null},physicalExamCategories:{Eyes:{icon:J,abnormalities:[],normal:!1},Mouth:{icon:K,abnormalities:[],normal:!1},Ears:{icon:Q,abnormalities:[],normal:!1},Face:{icon:X,abnormalities:[],normal:!1},Neck:{icon:W,abnormalities:[],normal:!1},Chest:{icon:G,abnormalities:[],normal:!1},"Chest Movement":{icon:Y,abnormalities:[],normal:!1},"Heart Sounds":{icon:u,abnormalities:[],normal:!1},"Breath Sounds":{icon:$,abnormalities:[],normal:!1},"Added Breath Sounds":{icon:$,abnormalities:[],normal:!1},"Abdominal Inspection":{icon:j,abnormalities:[],normal:!1},"Genital Examination":{icon:q,abnormalities:[],normal:!1}}}),computed:{...n(Ie,["patient"]),hasLevelOfConsciousness(){return this.levelOfConsciousness.eyeResponse||this.levelOfConsciousness.verbalResponse||this.levelOfConsciousness.motorResponse},hasPresentingComplaints(){var e;return(null===(e=this.presentingComplaintsWithDuration)||void 0===e?void 0:e.length)>0},hasPregnancyData(){return this.pregnancy.patientPregnant||this.pregnancy.breastFeeding},hasPastMedicalHistory(){var e;return(null===(e=this.uniquePastMedicalHistory)||void 0===e?void 0:e.length)>0},hasAllergies(){var e;return(null===(e=this.selectedAllergiesList2)||void 0===e||null===(e=e.filter(e=>e.selected))||void 0===e?void 0:e.length)>0},hasPhysicalExam(){return Object.values(this.physicalExamCategories).some(e=>e.abnormalities.length>0||e.normal)},uniquePastMedicalHistory(){return[...new Set(this.pastMedicalHistory)]},uniquePresentingComplaints(){return[...new Set(this.presentingComplaintsWithDuration.map(e=>e.name))]},isMinor(){var e;return xe.getAgeInYears(null===(e=this.patient)||void 0===e||null===(e=e.personInformation)||void 0===e?void 0:e.birthdate)<18},gcsScore(){var e,a,t;if(!this.hasLevelOfConsciousness)return null;const n=this.levelOfConsciousness.eyeResponse,o=this.levelOfConsciousness.motorResponse,l=this.levelOfConsciousness.verbalResponse,i=n&&null!==(e=(this.isMinor?Fa:Ma)[n])&&void 0!==e?e:0,s=o&&null!==(a=(this.isMinor?La:Ba)[o])&&void 0!==a?a:0,r=l&&null!==(t=(this.isMinor?za:Ta)[l])&&void 0!==t?t:0;return`(M ${s} V ${r} E ${i}) ${i+s+r}/${this.isMinor?5:15}`}},methods:{async updateData(){var e;null!==(e=this.patient)&&void 0!==e&&e.patientID&&(await this.loadPresentingComplaints(),await this.loadPastMedicalHistory(),await this.loadLevelOfConsciousness(),await this.loadPregnancyStatus(),await this.loadPhysicalExam())},async loadPresentingComplaints(){try{const e=await we.getObsByEncounterIdAndDate(He.PRESENTING_COMPLAINTS);this.presentingComplaintsWithDuration=[];const a=e.filter(e=>"Presenting complaint"===e.concept_name);for(const t of a){const a=e.find(e=>e.concept_id===t.value_coded&&"Presenting complaint"!==e.concept_name),n=await Be.getConceptName(t.value_coded);this.presentingComplaintsWithDuration.push({name:n,duration:(null==a?void 0:a.value_text)||"Duration not specified"})}}catch(e){console.error("Error loading presenting complaints:",e)}},async loadPastMedicalHistory(){try{const e=(await we.getObsByEncounterIdAndDate(He.PAST_MEDICAL_HISTORY)).filter(e=>"Chronic disease"===e.concept_name);this.pastMedicalHistory=await Promise.all(e.map(async e=>await Be.getConceptName(e.value_coded)))}catch(e){console.error("Error loading past medical history:",e)}},async loadLevelOfConsciousness(){try{const e=await we.getObsByEncounterIdAndDate(He.ASSESSMENT);if(e&&Array.isArray(e)){const a=e.find(e=>"Eye opening response"===e.concept_name);this.levelOfConsciousness.eyeResponse=null!=a&&a.value_coded?await Be.getConceptName(a.value_coded):null;const t=e.find(e=>"Best verbal response"===e.concept_name);this.levelOfConsciousness.verbalResponse=null!=t&&t.value_coded?await Be.getConceptName(t.value_coded):null;const n=e.find(e=>"Best motor response"===e.concept_name);this.levelOfConsciousness.motorResponse=null!=n&&n.value_coded?await Be.getConceptName(n.value_coded):null}}catch(e){console.error("Error loading level of consciousness:",e)}},async loadPregnancyStatus(){try{const e=await we.getObsByEncounterIdAndDate(He.PREGNANCY_STATUS);if(e&&Array.isArray(e)){const a=e.find(e=>"Patient pregnant"===e.concept_name);this.pregnancy.patientPregnant=null!=a&&a.value_coded?await Be.getConceptName(a.value_coded):null;const t=e.find(e=>"Is patient breast feeding?"===e.concept_name);this.pregnancy.breastFeeding=null!=t&&t.value_coded?await Be.getConceptName(t.value_coded):null}}catch(e){console.error("Error loading pregnancy status:",e)}},async loadPhysicalExam(){try{const e=await we.getObsByEncounterIdAndDate(He.PHYSICAL_EXAMINATION);Object.values(this.physicalExamCategories).forEach(e=>{e.abnormalities=[],e.normal=!1});for(const a of e)if(a.concept_id){if(1065===a.value_coded)switch(a.concept_id){case 10837:this.physicalExamCategories.Eyes.normal=!0;break;case 10842:this.physicalExamCategories.Mouth.normal=!0;break;case 11028:this.physicalExamCategories.Ears.normal=!0;break;case 10854:this.physicalExamCategories.Face.normal=!0;break;case 10858:this.physicalExamCategories.Neck.normal=!0;break;case 10894:this.physicalExamCategories.Chest.normal=!0;break;case 10903:this.physicalExamCategories["Heart Sounds"].normal=!0;break;case 10909:this.physicalExamCategories["Breath Sounds"].normal=!0;break;case 10919:case 10928:case 10939:this.physicalExamCategories["Abdominal Inspection"].normal=!0;break;case 10803:case 10946:this.physicalExamCategories["Genital Examination"].normal=!0}if(a.value_coded){const e=await Be.getConceptName(a.value_coded);switch(a.concept_id){case 10838:this.physicalExamCategories.Eyes.abnormalities.push(e);break;case 10843:this.physicalExamCategories.Mouth.abnormalities.push(e);break;case 10852:this.physicalExamCategories.Ears.abnormalities.push(e);break;case 10855:this.physicalExamCategories.Face.abnormalities.push(e);break;case 10859:this.physicalExamCategories.Neck.abnormalities.push(e);break;case 10897:this.physicalExamCategories.Chest.abnormalities.push(e);break;case 10904:this.physicalExamCategories["Heart Sounds"].abnormalities.push(e);break;case 10910:this.physicalExamCategories["Breath Sounds"].abnormalities.push(e);break;case 10920:case 10929:case 10939:this.physicalExamCategories["Abdominal Inspection"].abnormalities.push(e);break;case 10797:case 10804:case 10947:this.physicalExamCategories["Genital Examination"].abnormalities.push(e)}}}}catch(e){console.error("Error loading physical exam:",e)}}},watch:{patient:{async handler(){await this.updateData()},deep:!0}},async mounted(){await this.updateData()}}),Za={class:"visit-container"},et={class:"visit-sections"},at={key:0,class:"visit-section"},tt={class:"section-header"},nt={class:"section-content"},ot={key:0,class:"info-item"},lt={class:"info-value"},it={key:1,class:"info-item"},st={class:"info-value"},rt={key:2,class:"info-item"},dt={class:"info-value"},ct={key:3,class:"info-item"},ut={class:"info-value highlight"},pt={key:1,class:"visit-section"},vt={class:"section-header"},mt={class:"complaints-container"},ft={class:"complaint-name"},gt={class:"complaint-duration"},ht={key:2,class:"visit-section"},yt={class:"section-header"},bt={class:"section-content"},_t={key:0,class:"info-item"},xt={class:"info-value highlight"},wt={key:1,class:"info-item"},kt={class:"info-value highlight"},Dt={key:3,class:"visit-section"},Ct={class:"section-header"},It={class:"tags-container"},St={class:"allergies-section"},Et={class:"allergies-container"},Ot={key:4,class:"visit-section"},Pt={class:"section-header"},At={class:"exam-section"},Nt={key:0,class:"exam-category"},Vt={class:"exam-category-header"},Ht={class:"exam-items"},Mt={key:1,class:"exam-item normal"},Tt=Se(Ja,[["render",function(e,a,t,n,o,l){const i=v("ion-icon"),s=v("AllergiesListing");return f(),m("div",Za,[a[11]||(a[11]=g("div",{class:"visit-header"},[g("h5",null,"Patient's Clinical Assessment Summary")],-1)),g("div",et,[e.hasLevelOfConsciousness?(f(),m("div",at,[g("div",tt,[h(i,{icon:e.alertCircleOutline,class:"section-icon"},null,8,["icon"]),a[0]||(a[0]=g("h3",null,"Level of Consciousness",-1))]),g("div",nt,[e.levelOfConsciousness.eyeResponse?(f(),m("div",ot,[a[1]||(a[1]=g("span",{class:"info-label"},"Eye Response:",-1)),g("span",lt,L(e.levelOfConsciousness.eyeResponse),1)])):w("",!0),e.levelOfConsciousness.verbalResponse?(f(),m("div",it,[a[2]||(a[2]=g("span",{class:"info-label"},"Verbal Response:",-1)),g("span",st,L(e.levelOfConsciousness.verbalResponse),1)])):w("",!0),e.levelOfConsciousness.motorResponse?(f(),m("div",rt,[a[3]||(a[3]=g("span",{class:"info-label"},"Motor Response:",-1)),g("span",dt,L(e.levelOfConsciousness.motorResponse),1)])):w("",!0),e.gcsScore?(f(),m("div",ct,[a[4]||(a[4]=g("span",{class:"info-label"},"Score:",-1)),g("span",ut,L(e.gcsScore),1)])):w("",!0)])])):w("",!0),e.hasPresentingComplaints?(f(),m("div",pt,[g("div",vt,[h(i,{icon:e.documentTextOutline,class:"section-icon"},null,8,["icon"]),a[5]||(a[5]=g("h3",null,"Presenting Complaints",-1))]),g("div",mt,[(f(!0),m(S,null,B(e.presentingComplaintsWithDuration,(e,a)=>(f(),m("div",{class:"complaint-item",key:a},[g("div",ft,L(e.name),1),g("div",gt,L(e.duration),1)]))),128))])])):w("",!0),e.hasPregnancyData?(f(),m("div",ht,[g("div",yt,[h(i,{icon:e.femaleOutline,class:"section-icon"},null,8,["icon"]),a[6]||(a[6]=g("h3",null,"Pregnancy Status",-1))]),g("div",bt,[e.pregnancy.patientPregnant?(f(),m("div",_t,[a[7]||(a[7]=g("span",{class:"info-label"},"Pregnant:",-1)),g("span",xt,L(e.pregnancy.patientPregnant),1)])):w("",!0),e.pregnancy.breastFeeding?(f(),m("div",wt,[a[8]||(a[8]=g("span",{class:"info-label"},"Breastfeeding:",-1)),g("span",kt,L(e.pregnancy.breastFeeding),1)])):w("",!0)])])):w("",!0),e.hasPastMedicalHistory?(f(),m("div",Dt,[g("div",Ct,[h(i,{icon:e.medicalOutline,class:"section-icon"},null,8,["icon"]),a[9]||(a[9]=g("h3",null,"Medical History",-1))]),g("div",It,[(f(!0),m(S,null,B(e.uniquePastMedicalHistory,(e,a)=>(f(),m("div",{class:"medical-tag",key:a},L(e),1))),128))])])):w("",!0),g("div",St,[g("div",Et,[h(s)])]),e.hasPhysicalExam?(f(),m("div",Ot,[g("div",Pt,[h(i,{icon:e.bodyOutline,class:"section-icon"},null,8,["icon"]),a[10]||(a[10]=g("h3",null,"Physical Examination",-1))]),g("div",At,[(f(!0),m(S,null,B(e.physicalExamCategories,(e,a)=>(f(),m(S,{key:a},[e.abnormalities.length>0||e.normal?(f(),m("div",Nt,[g("div",Vt,[h(i,{icon:e.icon},null,8,["icon"]),g("h4",null,L(a),1)]),g("div",Ht,[e.abnormalities.length>0?(f(!0),m(S,{key:0},B(e.abnormalities,(e,a)=>(f(),m("div",{class:"exam-item abnormal",key:a},L(e),1))),128)):e.normal?(f(),m("div",Mt," Normal examination ")):w("",!0)])])):w("",!0)],64))),128))])])):w("",!0)])])}],["__scopeId","data-v-795e1865"]]),Bt={class:"modal_wrapper"},Ft=e("d",t({__name:"LevelOfConsciousness",setup(e,{expose:a}){var t;const n=Ie(),{patient:o}=y(n),l=b(xe.getAgeInYears(null==o||null===(t=o.value)||void 0===t||null===(t=t.personInformation)||void 0===t?void 0:t.birthdate)),i=b(null),s=_(()=>{var e,a,t,n;const o=(null===(e=i.value)||void 0===e?void 0:e.getFormValues())||{},s=o["Eye opening response"]||"",r=o["Best motor response"]||"",d=o["Best verbal response"]||"",c=l.value<18,u=null!==(a=(c?Fa:Ma)[s])&&void 0!==a?a:0,p=null!==(t=(c?La:Ba)[r])&&void 0!==t?t:0,v=null!==(n=(c?za:Ta)[d])&&void 0!==n?n:0;return`(M ${p} V ${v} E ${u}) ${u+p+v}/${c?5:15}`});return a({onSubmit:async()=>{var e;if(!i.value)return void console.error("Form reference is not available");const a=(null===(e=i.value)||void 0===e?void 0:e.getFormValues())||{};a["Eye opening response"]||a["Best motor response"]||a["Best verbal response"]?(await we.buildAddObsToEncounterPatient(a,He.ASSESSMENT),i.value.resetForm(),Te("Level of Consciousness saved successfully")):Me(" No level of consciousness data to save ")}}),(e,a)=>(f(),m("div",Bt,[l.value<18?(f(),k(Pe,{key:0,formData:C(Ha),ref_key:"formRef",ref:i},null,8,["formData"])):(f(),k(Pe,{key:1,formData:C(Va),ref_key:"formRef",ref:i},null,8,["formData"])),g("h5",null,L(s.value),1)]))}})),Lt={class:"modal_wrapper"},zt=e("_",t({__name:"PregnancyBreastfeeding",setup(e,{expose:a}){const t=Le(),{pregnancy:n}=y(t),o=()=>{};return a({onSubmit:async()=>{const e=await ua(n.value);e.length>0?(await we.addObsToEncounterPatient(e,He.PREGNANCY_STATUS),Te("Pregnancy status saved successfully")):Me("No pregnancy status data to save ")}}),(e,a)=>(f(),m("div",Lt,[h(ca,{contentData:C(n),"onUpdate:inputValue":o},null,8,["contentData"])]))}})),Rt={class:"modal_wrapper"},Ut={class:"uniform_columns"},qt=Se(t({__name:"PastMedicalHistory",setup(e,{expose:a}){const t=ze(),{pastMedicalHistory:n}=y(t),o=b([]);x(()=>{o.value=t.getInitial(),l()}),H(n,()=>{l()},{deep:!0});const l=()=>{var e;const a=["TB","Chronic Obstructive Pulmonary Disease (COPD)","Asthma","Epilepsy","Previous stroke","Peptic Ulcer Disease (PUD)","Mental disorder","Bleeding disorders","Hypertension","HIV Positive","Diabetes Mellitus"];null!==(e=Re(n.value,"None"))&&void 0!==e&&e.checked?a.forEach(e=>{Ue(n.value,"TB treatment","displayNone",!0),Ne(n.value,"TB drugs","displayNone",!0),Ne(n.value,"TB drug start date","displayNone",!0),Ue(n.value,"Hypertension medication","displayNone",!0),Ne(n.value,"Current hypertension treatment regimen","displayNone",!0),Ue(n.value,"HIV status","displayNone",!0),Ne(n.value,"ARV start date","displayNone",!0),Ue(n.value,"Diabetes","displayNone",!0),Ue(n.value,"Controlled by","displayNone",!0),qe(n.value,e,"checked",!1),qe(n.value,e,"disabled",!0)}):a.forEach(e=>{qe(n.value,e,"disabled",!1)})},i=e=>{Ne(n.value,"TB drugs","popOverData",{filterData:!0,data:[{name:"Auramine 'O' (C.I. 41000) 50g"},{name:"Bedaquilline 100mg"},{name:"Clofazimine 100mg"},{name:"Clofazimine 50mg"},{name:"Cycloserine 125mg"},{name:"Cycloserine 250mg"},{name:"Delamanid 50mg"},{name:"Ethambutol 100mg"},{name:"Ethambutol 400mg"},{name:"Ethionamide 250mg"},{name:"Isoniazid 100mg "},{name:"Isoniazid 300mg"},{name:"Isoniazid / Rifapentine 300mg / 300mg"},{name:"Levofloxacin 100mg"},{name:"Levofloxacin 250mg"},{name:"Linezolid 600mg"},{name:"Moxifloxacin 400mg"},{name:"Pyrazinamide 400mg"},{name:"Rifabutin 150mg Capsules"},{name:"Rifampicin 150mg/isoniazid 75mg"},{name:"Rifampicin 75mg+INH 50mg dispersible"},{name:"Rifampicin 75mg+INH 50mg+Pyrazinamide 150mg dispersible"},{name:"Rifampicin150mg/Isoniazid75mg/Pyrazinamide 400mg/Ethambutol"}]}),Ne(n.value,"Current hypertension treatment regimen","popOverData",{filterData:!0,data:[{name:"Captopril 12.5mg"},{name:"Aspirin 75mg"},{name:"Hydrochlorothiazide 25mg"},{name:"Enalapril Meleate 5mg"},{name:"Enalapril Maleate 10mg"}]})};return a({onSubmit:async()=>{const e=await(async()=>[...await pa(n.value),...await ua(n.value),...await va(n.value)])();0!==e.length?(await we.addObsToEncounterPatient(e,He.PAST_MEDICAL_HISTORY),Te("Past medical history saved successful")):Me("No past medical history data to save")}}),(e,a)=>(f(),m("div",Rt,[g("div",Ut,[h(ca,{contentData:C(n),initialData:o.value,"onUpdate:inputValue":i,"onUpdate:selected":i},null,8,["contentData","initialData"])])]))}}),[["__scopeId","data-v-49fdce72"]]),jt={class:"container"},$t=e("c",Se(t({__name:"PhysicalExamination",setup(e,{expose:a}){const t=je(),n=Ie(),{physicalExam:o}=y(t),{patient:l}=y(n),i=b([]);x(()=>{i.value=t.getInitial(),s(),r()}),H(o,()=>{s(),r()},{deep:!0});const s=()=>{"No"==$e(o.value,"Physical examination")?Ue(o.value,"Reason why physical examination not done","displayNone",!1):(Ue(o.value,"Reason why physical examination not done","displayNone",!0),Ue(o.value,"Reason why physical examination not done","selectedValue",""))},r=()=>{var e;const a=null===(e=l.value)||void 0===e||null===(e=e.personInformation)||void 0===e?void 0:e.gender;"M"==a&&(qe(o.value,"Vulva examination","disabled",!0),qe(o.value,"Visible bleeding","disabled",!0)),"F"==a&&(qe(o.value,"Urethral meatus abnormal","disabled",!0),qe(o.value,"Scrotal swelling","disabled",!0),qe(o.value,"Tastes swelling","disabled",!0))};return a({onSubmit:async()=>{const e=await(async()=>[...await pa(o.value),...await ua(o.value),...await va(o.value)])();console.log("Selected physical data is",e),0!==e.length?(await we.addObsToEncounterPatient(e,He.PHYSICAL_EXAMINATION),console.log(we.getObsByEncounterIdAndDate(He.PHYSICAL_EXAMINATION)),Te("Physical examination saved successful")):Me("No physical examination data to save")}}),(e,a)=>{const t=v("ion-card-content"),n=v("ion-card");return f(),m("div",jt,[h(n,{class:"section"},{default:D(()=>[h(t,null,{default:D(()=>[h(ca,{contentData:C(o),initialData:i.value},null,8,["contentData","initialData"])]),_:1})]),_:1})])}}}),[["__scopeId","data-v-0d34c6dd"]])),Yt={key:0},Gt={class:"ion-padding",slot:"content"},Wt={class:"nav-buttons"},Xt={class:"ion-padding",slot:"content"},Qt={class:"nav-buttons"},Kt={class:"ion-padding",slot:"content"},Jt={class:"nav-buttons"},Zt={class:"ion-padding",slot:"content"},en={class:"nav-buttons"},an={class:"ion-padding",slot:"content"},tn={class:"nav-buttons"},nn={class:"ion-padding",slot:"content"},on={class:"nav-buttons"};e("C",Se(t({__name:"ClinicalAssessment",setup(e,{expose:a}){const t=b("loc"),n=b(0),o=b(!1),l=b(!1),i=new Ye,s=Ie(),d=()=>{n.value++},c=b(null),u=b(null),p=b(null),y=b(null),E=b(null),O=b(null),P=[{id:"loc",label:"Level of consciousness",show:!0},{id:"pc",label:"Presenting complaints",show:!0},{id:"pbs",label:"Pregnancy and breastfeeding status",show:()=>i.isChildBearing()},{id:"pmh",label:"Past medical history",show:!0},{id:"al",label:"Allergies",show:!0},{id:"pe",label:"Physical examination",show:!0}];async function A(){const e=Ve.getSessionDate(),a=[He.ASSESSMENT,He.PRESENTING_COMPLAINTS,He.PAST_MEDICAL_HISTORY,He.PHYSICAL_EXAMINATION,He.PREGNANCY_STATUS];let t=!1;for(const o of a)try{const a=await we.getObsByEncounterIdAndDate(o);if(a&&a.some(a=>!!a.obs_datetime&&xe.toStandardHisFormat(a.obs_datetime)===xe.toStandardHisFormat(e))){t=!0;break}}catch(n){console.error(`Error checking observations for encounter type ${o}:`,n)}o.value=t}x(A),H(()=>s.patient,A);const N=_(()=>o.value),V=_(()=>P.filter(e=>"function"==typeof e.show?e.show():e.show)),M=e=>{const a=P.find(a=>a.id===e);return!!a&&("function"==typeof a.show?a.show():a.show)},T=e=>V.value.findIndex(a=>a.id===e),B=e=>{const a=T(e);a>0&&(t.value=V.value[a-1].id)},F=e=>{const a=T(e)+1;a<V.value.length?t.value=V.value[a].id:(t.value="",d())};return a({onSubmit:async()=>{const e=[{ref:c,name:"PresentingComplaints"},{ref:u,name:"LevelOfConsciousness"},{ref:p,name:"PastMedicalHistory"},{ref:E,name:"PregnancyBreastfeeding"},{ref:O,name:"PhysicalExamination"}];for(const t of e)if(t.ref.value&&"function"==typeof t.ref.value.onSubmit)try{await t.ref.value.onSubmit()}catch(a){console.error(`Error calling ${t.name} onSubmit:`,a)}else console.log(`${t.name} component ref not available or no onSubmit method`)}}),(e,a)=>{const o=v("ion-toggle");return f(),m(S,null,[N.value?(f(),m("div",Yt,[h(C(r),{lines:"none"},{default:D(()=>[h(C(te),null,{default:D(()=>[...a[14]||(a[14]=[I("Switch between Capture Mode and Summary Mode",-1)])]),_:1}),h(o,{checked:l.value,onIonChange:a[0]||(a[0]=e=>l.value=e.detail.checked),slot:"end"},null,8,["checked"])]),_:1}),l.value?w("",!0):(f(),k(Tt,{key:n.value}))])):w("",!0),!N.value||l.value?(f(),k(C(se),{key:1,style:{width:"100%"}},{default:D(()=>[h(C(ne),{value:t.value,"onUpdate:value":a[13]||(a[13]=e=>t.value=e),ref:"accordionGroup",class:"previousView"},{default:D(()=>[M("loc")?(f(),k(C(oe),{key:0,value:"loc",class:"_card"},{default:D(()=>[h(C(r),{slot:"header",color:"light"},{default:D(()=>[h(C(te),{class:"previousLabel"},{default:D(()=>[...a[15]||(a[15]=[I("Level of consciousness",-1)])]),_:1})]),_:1}),g("div",Gt,[h(Ft,{"is-active":"loc"===t.value,ref_key:"levelOfConsciousnessFormRef",ref:u,onDataSaved:d},null,8,["is-active"]),g("div",Wt,[T("loc")>0?(f(),k(C(le),{key:0,fill:"outline",onClick:a[1]||(a[1]=ie(e=>B("loc"),["stop"]))},{default:D(()=>[...a[16]||(a[16]=[I(" Back ",-1)])]),_:1})):w("",!0),h(C(le),{fill:"outline",onClick:a[2]||(a[2]=ie(e=>F("loc"),["stop"]))},{default:D(()=>[I(L(T("loc")<V.value.length-1?"Next":"Finish"),1)]),_:1})])])]),_:1})):w("",!0),M("pc")?(f(),k(C(oe),{key:1,value:"pc",class:"_card"},{default:D(()=>[h(C(r),{slot:"header",color:"light"},{default:D(()=>[h(C(te),{class:"previousLabel"},{default:D(()=>[...a[17]||(a[17]=[I("Presenting complaints",-1)])]),_:1})]),_:1}),g("div",Xt,[h(Na,{"is-active":"pc"===t.value,onDataSaved:d,ref_key:"presentingComplaintsFormRef",ref:c},null,8,["is-active"]),g("div",Qt,[T("pc")>0?(f(),k(C(le),{key:0,fill:"outline",onClick:a[3]||(a[3]=ie(e=>B("pc"),["stop"]))},{default:D(()=>[...a[18]||(a[18]=[I(" Back ",-1)])]),_:1})):w("",!0),h(C(le),{fill:"outline",onClick:a[4]||(a[4]=ie(e=>F("pc"),["stop"]))},{default:D(()=>[I(L(T("pc")<V.value.length-1?"Next":"Finish"),1)]),_:1})])])]),_:1})):w("",!0),M("pbs")?(f(),k(C(oe),{key:2,value:"pbs",class:"_card"},{default:D(()=>[h(C(r),{slot:"header",color:"light"},{default:D(()=>[h(C(te),{class:"previousLabel"},{default:D(()=>[...a[19]||(a[19]=[I("Pregnancy and breastfeeding status",-1)])]),_:1})]),_:1}),g("div",Kt,[h(zt,{"is-active":"pbs"===t.value,ref_key:"pregnancyBreastfeedingFormRef",ref:E,onDataSaved:d},null,8,["is-active"]),g("div",Jt,[T("pbs")>0?(f(),k(C(le),{key:0,fill:"outline",onClick:a[5]||(a[5]=ie(e=>B("pbs"),["stop"]))},{default:D(()=>[...a[20]||(a[20]=[I(" Back ",-1)])]),_:1})):w("",!0),h(C(le),{fill:"outline",onClick:a[6]||(a[6]=ie(e=>F("pbs"),["stop"]))},{default:D(()=>[I(L(T("pbs")<V.value.length-1?"Next":"Finish"),1)]),_:1})])])]),_:1})):w("",!0),M("pmh")?(f(),k(C(oe),{key:3,value:"pmh",class:"_card"},{default:D(()=>[h(C(r),{slot:"header",color:"light"},{default:D(()=>[h(C(te),{class:"previousLabel"},{default:D(()=>[...a[21]||(a[21]=[I("Past medical history",-1)])]),_:1})]),_:1}),g("div",Zt,[h(qt,{"is-active":"pmh"===t.value,ref_key:"pastMedicalHistoryFormRef",ref:p,onDataSaved:d},null,8,["is-active"]),g("div",en,[T("pmh")>0?(f(),k(C(le),{key:0,fill:"outline",onClick:a[7]||(a[7]=ie(e=>B("pmh"),["stop"]))},{default:D(()=>[...a[22]||(a[22]=[I(" Back ",-1)])]),_:1})):w("",!0),h(C(le),{fill:"outline",onClick:a[8]||(a[8]=ie(e=>F("pmh"),["stop"]))},{default:D(()=>[I(L(T("pmh")<V.value.length-1?"Next":"Finish"),1)]),_:1})])])]),_:1})):w("",!0),M("al")?(f(),k(C(oe),{key:4,value:"al",class:"_card"},{default:D(()=>[h(C(r),{slot:"header",color:"light"},{default:D(()=>[h(C(te),{class:"previousLabel"},{default:D(()=>[...a[23]||(a[23]=[I("Allergies",-1)])]),_:1})]),_:1}),g("div",an,[h(ma,{"is-active":"al"===t.value,ref_key:"allergiesFormRef",ref:y,onDataSaved:d},null,8,["is-active"]),g("div",tn,[T("al")>0?(f(),k(C(le),{key:0,fill:"outline",onClick:a[9]||(a[9]=ie(e=>B("al"),["stop"]))},{default:D(()=>[...a[24]||(a[24]=[I(" Back ",-1)])]),_:1})):w("",!0),h(C(le),{fill:"outline",onClick:a[10]||(a[10]=ie(e=>F("al"),["stop"]))},{default:D(()=>[I(L(T("al")<V.value.length-1?"Next":"Finish"),1)]),_:1})])])]),_:1})):w("",!0),M("pe")?(f(),k(C(oe),{key:5,value:"pe",class:"_card"},{default:D(()=>[h(C(r),{slot:"header",color:"light"},{default:D(()=>[h(C(te),{class:"previousLabel"},{default:D(()=>[...a[25]||(a[25]=[I("Physical examination",-1)])]),_:1})]),_:1}),g("div",nn,[h($t,{"is-active":"pe"===t.value,ref_key:"physicalExaminationFormRef",ref:O,onDataSaved:d},null,8,["is-active"]),g("div",on,[T("pe")>0?(f(),k(C(le),{key:0,fill:"outline",onClick:a[11]||(a[11]=ie(e=>B("pe"),["stop"]))},{default:D(()=>[...a[26]||(a[26]=[I(" Back ",-1)])]),_:1})):w("",!0),h(C(le),{fill:"outline",onClick:a[12]||(a[12]=ie(e=>F("pe"),["stop"]))},{default:D(()=>[I(L(T("pe")<V.value.length-1?"Next":"Finish"),1)]),_:1})])])]),_:1})):w("",!0)]),_:1},8,["value"])]),_:1})):w("",!0)],64)}}}),[["__scopeId","data-v-597092a6"]]));class ln extends Ge{constructor(e,a){super(e,8,a)}static async getDiagnosis(e="",a=1,t=10){const n=await Be.getConceptID("Qech outpatient diagnosis list");return Ge.getJson("diagnosis",{id:n,name:e,page:a,page_size:t})}}e("e",ln);const sn=t({name:"Menu",components:{IonContent:c,IonHeader:d,IonItem:r,IonList:s,IonMenu:i,IonTitle:l,IonToolbar:o,List:_e},computed:{...n(Ie,["patient"])},data:()=>({valueNumericArray:[],obsDatetime:[],graphIcon:De(["#006401"]),listIcon:ke(["#636363"]),displayGraph:!0,orders:[],height:[],BMI:[],iconBg:{},activeWeight:[],activeHeight:[],activeBMI:[],list:[],series:[{name:"",data:[]}]}),setup:()=>({checkmark:p,pulseOutline:u}),async mounted(){const e=[...await we.getAll(this.patient.patientID,"Primary diagnosis")||[],...await we.getAll(this.patient.patientID,"Secondary diagnosis")||[],...await we.getAll(this.patient.patientID,"Attempted/ Differential diagnosis")||[]],a=ia.isEmpty(e)?[]:Promise.all(e.map(async e=>({name:await we.getConceptName(e.value_coded),obs_date:e.obs_datetime})));this.setListData(await a)},methods:{dismiss(){re.dismiss()},handleIcon(){},setActivClass(e){this.activeHeight="",this.activeBMI="",this.activeWeight="","height"==e?this.activeHeight="_active":"weight"==e?this.activeWeight="_active":"BMI"==e&&(this.activeBMI="_active")},setListData(e){this.list=[],this.list.push({actionBtn:!1,class:"col_background",header:!0,minHeight:"--min-height: 25px;",display:["Date","Diagnosis","Notes"]}),e.forEach(e=>{this.list.push({actionBtn:!1,minHeight:"--min-height: 25px;",class:"col_background",display:[xe.toStandardHisFormat(e.obs_date),e.name,""]})})}}}),rn={class:"modal_wrapper"},dn=Se(sn,[["render",function(e,a,t,n,o,l){const i=v("list");return f(),m("div",rn,[g("div",null,[h(i,{listData:e.list},null,8,["listData"])])])}],["__scopeId","data-v-88580898"]]),cn={class:"custom_card",style:{padding:"10px"}},un={key:0},pn={key:0,style:{color:"red","margin-top":"10px",background:"lightgoldenrodyellow"}},vn={class:"ion-padding",slot:"content"},mn=(e("O",Se(t({__name:"OPDDiagnosis",setup(e,{expose:a}){const t=Ee,n=b(!0),o=b(!1),l=b(!0),i=b(!1),s=b(!0),d=b(""),c=b(""),u=b([]),p=b([]),y=b(),E=b(null);We();const O=_(()=>p.value.some(e=>6542===e.data.concept_id));H(p,()=>{T()},{deep:!0});const P=_(()=>[{name:"primaryDiagnosis",header:"Primary Diagnosis",componentType:"multiSelectInputField",options:u.value,icon:t.search,onSearchChange:V,validation:Oe.required},{componentType:"checkboxField",label:"Secondary Diagnosis",type:"single",grid:{s:"6"},name:"secondaryDiagnosisCheckbox"},{componentType:"checkboxField",label:"Differential Diagnosis",type:"single",grid:{s:"6"},name:"differentialDiagnosisCheckbox"},{componentType:"Dashes"},{name:"secondaryDiagnosis",header:"Secondary Diagnosis",componentType:"multiSelectInputField",isMultiple:!0,options:u.value,icon:t.search,condition:e=>null==e?void 0:e.secondaryDiagnosisCheckbox,onSearchChange:V,validation:(e,a)=>A(a,"secondaryDiagnosis")},{name:"differentialDiagnosis",header:"Differential Diagnosis",componentType:"multiSelectInputField",options:u.value,icon:t.search,isMultiple:!0,condition:e=>null==e?void 0:e.differentialDiagnosisCheckbox,onSearchChange:V,validation:(e,a)=>A(a,"differentialDiagnosis")}]),A=(e,a)=>{var t,n,o;if(!e)return null;const l=null===(t=e.primaryDiagnosis)||void 0===t?void 0:t.name,i=(null===(n=e.secondaryDiagnosis)||void 0===n?void 0:n.map(e=>e.name))||[],s=(null===(o=e.differentialDiagnosis)||void 0===o?void 0:o.map(e=>e.name))||[];if("secondaryDiagnosis"===a&&i.includes(l))return`${l} is already the primary diagnosis`;if("differentialDiagnosis"===a&&s.includes(l))return`${l} is already the primary diagnosis`;const r=i.find(e=>s.includes(e));return r?`${r} cannot be both secondary and differential`:null},N=()=>{var e;const a=[],t=p.value.map(e=>e.name),n=(null===(e=E.value)||void 0===e?void 0:e.getFormValues())||{},o=n.primaryDiagnosis||[],l=n.secondaryDiagnosis||[],i=n.differentialDiagnosis||[];if(o.name&&!t.includes(o.name)){if(p.value.some(e=>6542===e.data.concept_id))return Xe("Only one primary diagnosis is allowed"),!1;a.push({actionBtn:!0,btn:["delete"],name:o.name,id:o.concept_id,display:[o.name,"Primary diagnosis"],data:{concept_id:6542,value_coded:o.concept_id,obs_datetime:Ve.getSessionDate()}})}return l&&l.forEach(e=>{t.includes(e.name)||a.push({actionBtn:!0,btn:["delete"],name:e.name,id:e.concept_id,display:[e.name,"Secondary diagnosis"],data:{concept_id:6543,value_coded:e.concept_id,obs_datetime:Ve.getSessionDate()}})}),i&&i.forEach(e=>{t.includes(e.name)||a.push({actionBtn:!0,btn:["delete"],name:e.name,id:e.concept_id,display:[e.name,"Differential diagnosis"],data:{concept_id:10201,value_coded:e.concept_id,obs_datetime:Ve.getSessionDate()}})}),a.length>0&&(p.value=[...p.value,...a]),!0},V=async e=>{const a=e.trim().toLowerCase()||"";return u.value=await ln.getDiagnosis(a,1,15),u.value},M=e=>{const a=p.value,t=e.name,n=a.filter(e=>e.display[0]!==t);p.value=n},T=()=>{p.value.length>0?(i.value=!0,n.value=!1):o.value||(n.value=!0),s.value=!O.value};return x(async()=>{T(),await V("")}),a({onSubmit:async()=>{if(p.value.length<=0)return void Me("Diagnosis not saved");const e=p.value.flatMap(e=>e.data);if(e.length<=0)return Me("Diagnosis not saved");const a=await we.addObsToEncounter(e,He.DIAGNOSIS);await we.mergeObsToPatient(a),Te("Diagnosis saved successful"),p.value=[]}}),(e,a)=>{const u=v("ion-row"),b=v("ion-label"),_=v("ion-accordion"),x=v("ion-accordion-group");return f(),m(S,null,[g("div",cn,[h(ra,{status:n.value,content:"No Diagnosis added"},null,8,["status"]),i.value?(f(),m("span",un,[h(_e,{listData:p.value,"onClicked:delete":M},null,8,["listData"]),O.value?(f(),m("div",pn," In order to update the diagnosis list, please remove/delete the primary diagnosis only and then re-add or change it along with the secondary and differential diagnoses. ")):w("",!0)])):w("",!0),o.value?(f(),k(u,{key:1},{default:D(()=>{var e;return[g("div",null,[h(Pe,{formData:P.value,ref_key:"formRef",ref:E},null,8,["formData"])]),g("div",null,[h(Ae,{fill:"clear",icon:C(t).plus,iconSlot:"icon-only","onClicked:btn":a[0]||(a[0]=e=>(async()=>{var e;null==(null===(e=E.value)||void 0===e?void 0:e.validateForm())&&(N(),o.value=!1,i.value=!0,s.value=!0,l.value=!1)})()),name:"Save",disabled:null===(e=E.value)||void 0===e?void 0:e.validateForm(),class:"ion-margin-top"},null,8,["icon","disabled"])])]}),_:1})):w("",!0),s.value?(f(),k(u,{key:2,style:{"margin-top":"10px"}},{default:D(()=>[h(Ae,{fill:"clear",icon:C(t).plus,iconSlot:"icon-only","onClicked:btn":a[1]||(a[1]=e=>(c.value="",d.value="",n.value=!1,s.value=!1,void(o.value=!0))),name:"Add new Diagnosis"},null,8,["icon"])]),_:1})):w("",!0)]),h(u,null,{default:D(()=>[h(x,{ref_key:"accordionGroup",ref:y,class:"previousView"},{default:D(()=>[h(_,{value:"first","toggle-icon-slot":"start",class:"custom_card"},{default:D(()=>[h(C(r),{slot:"header",color:"light"},{default:D(()=>[h(b,{class:"previousLabel"},{default:D(()=>[...a[2]||(a[2]=[I("Previous Diagnosis",-1)])]),_:1})]),_:1}),g("div",vn,[h(dn)])]),_:1})]),_:1},512)]),_:1})],64)}}}),[["__scopeId","data-v-a440f286"]])),{class:"allergies-section"}),fn={class:"allergies-container"},gn={class:"medication-section"},hn={class:"medication-content"},yn={key:0,class:"add-medication-form"},bn={class:"form-group"},_n={class:"option-label"},xn={key:0,class:"error-message"},wn={class:"form-row"},kn={class:"form-group"},Dn={key:0,class:"error-message"},Cn={class:"form-group"},In={key:0,class:"error-message"},Sn={class:"form-group"},En={key:0,class:"error-message"},On={class:"action-buttons"},Pn={class:"notes-section"},An={class:"notes-content"},Nn={class:"notes-input-container"},Vn={class:"ion-padding",slot:"content"},Hn={class:"notes-timeline"},Mn={class:"note-date"},Tn={class:"note-content"},Bn={class:"ion-padding",slot:"content"},Fn={class:"note-date"},Ln={class:"note-content"},zn=t({watch:{},name:"xxxComponent"}),Rn=t({...zn,setup(e){const a=Ee,t=ya,n=b(!1),o=b(!1),l=b(!0),i=b(0),d=b(""),c=b(!1),u=b(),p=b(!1),v=b(""),y=b(""),O=b(""),P=b(""),A=b(""),N=b(""),V=Qe(),M=Fe(),T=_(()=>M.selectedMedicalAllergiesList),F=_(()=>V.selectedMedicalDrugsList),z=_(()=>V.partialOPDdrugList),R=_(()=>V.nonPharmalogicalTherapyAndOtherNotes),q=["first","second","third"],j=b(),Y=b(),G=b(),W=b(!1),X=b(!1),Q=b("Show more notes"),K=b(),J=b(),Z=b(),ee=_(()=>V.editingDrugItem),ae=b("Select a route"),le=b(!1),ie=b("Select frequency"),se=b(!1),re=b("Select drug"),fe=b(!1),ge=b(),he=b(),ye=b(),be=b([]),_e=b([{concept_id:11797,name:"Buccal",concept_name_id:null,id:1769},{concept_id:11794,name:"Intradermal",concept_name_id:null,id:6284},{concept_id:11795,name:"Intramuscular (IM)",concept_name_id:null,id:6285},{concept_id:11799,name:"Intraosseous",concept_name_id:null,id:6286},{concept_id:11793,name:"Intravenous (IV)",concept_name_id:null,id:6295},{concept_id:3327,name:"Oral",concept_name_id:null,id:8686},{concept_id:11800,name:"Other method of prescription",concept_name_id:null,id:8920},{concept_id:11792,name:"Rectally",concept_name_id:null,id:10785},{concept_id:11798,name:"Subcutaneous",concept_name_id:null,id:12342},{concept_id:11796,name:"Sublingual",concept_name_id:null,id:12344},{concept_id:11792,name:"Rectally",concept_name_id:null,id:14078},{concept_id:11793,name:"Intravenous (IV)",concept_name_id:null,id:14079},{concept_id:11794,name:"Intradermal",concept_name_id:null,id:14080},{concept_id:11795,name:"Intramuscular (IM)",concept_name_id:null,id:14081},{concept_id:11796,name:"Sublingual",concept_name_id:null,id:14082},{concept_id:11797,name:"Buccal",concept_name_id:null,id:14083},{concept_id:11798,name:"Subcutaneous",concept_name_id:null,id:14084},{concept_id:11799,name:"Intraosseous",concept_name_id:null,id:14085},{concept_id:11800,name:"Other method of prescription",concept_name_id:null,id:14086}]),xe=_(()=>be.value.length?be.value:_e.value);async function we(){return await ba()}function ke(){l.value=!l.value,n.value=!0,c.value=!1,p.value=!1}async function De(){return He(O.value)?p.value=!1:(u.value="please enter a number",p.value=!0),p.value}async function Ce(){const e=await De(),a=1==ia.isEmpty(he.value)?(se.value=!0,!1):0==ia.isEmpty(he.value)?(se.value=!1,!0):void 0,t=1==ia.isEmpty(ye.value)?(fe.value=!0,!1):0==ia.isEmpty(ye.value)?(fe.value=!1,!0):void 0,n=1==ia.isEmpty(ge.value)?(le.value=!0,!1):0==ia.isEmpty(ge.value)?(le.value=!1,!0):void 0;return!e&&1==a&&1==t&&1==n}async function Ie(){try{const e=()=>null!=Z.value.dose_strength&&Z.value.dose_strength?Math.trunc(Z.value.dose_strength):1;if(null!==ee.value){if(!(await Ce()))return void Me("Please enter correct data values",4e3);const a=Te(Ve.getSessionDate(),parseInt(O.value));let t=!1;1==Se(Z.value)&&(t=!0);const n={drugName:v.value,dose:e(),frequency:he.value.label,frequency_code:he.value.code,duration:O.value,prescription:a,drug_id:N.value,units:A.value,route_concept_id:ge.value.concept_id,route_name:ge.value.name,highlightbackground:t},o=Qe();console.log(o.setSelectedMedicalDrugsList([n])),o.editingDrugItem=null,l.value=!0}else{if(!(await Ce()))return void Me("Please enter correct data values",4e3);n.value=!1,o.value=!0,l.value=!0;const a=Te(Ve.getSessionDate(),parseInt(O.value));let t=!1;1==Se(Z.value)&&(t=!0);const i={drugName:v.value,dose:e(),frequency:he.value.label,frequency_code:he.value.code,duration:O.value,prescription:a,drug_id:N.value,units:A.value,route_concept_id:ge.value.concept_id,route_name:ge.value.name,highlightbackground:t};Qe().setSelectedMedicalDrugsList([i])}N.value="",v.value="",y.value="",he.value=null,O.value="",P.value="",i.value++,ye.value=null,ge.value=null}catch(e){console.error("Error saving data:",e)}}function Se(e){const a=[];return T.value.forEach(e=>{e.selected&&a.push(e.concept_id)}),1==function(e,a){try{return e.some(e=>a.includes(e.concept_id))}catch(t){return!1}}([e],a)&&(Me("Client is allergic to the selected medication",4e6),!0)}function Oe(e){const a=F.value[e],t=Qe();t.removeDrugById(a.drug_id),t.editingDrugItem=a,N.value="",v.value="",y.value="",he.value=null,O.value="",P.value="",ye.value=null,ge.value=null,N.value=a.drug_id,v.value=a.drugName,y.value=a.dose,he.value={label:a.frequency,code:a.frequency_code},O.value=a.duration,P.value=a.prescription;const n=z.value.find(e=>e.name===a.drugName);n&&(ye.value=n),ge.value={concept_id:a.route_concept_id,name:a.route_name},l.value=!1,i.value++}function Pe(e){F.value.splice(e,1),i.value++,Me("you have removed a drug from list",6e3)}function Ne(e){!function(e){Qe().setNonPharmalogicalTherapyAndOtherNotes(e)}(e.target.value)}function He(e){return/^[0-9]+$/.test(e)}function Te(e,a){const t=new Date(e);return t.setDate(t.getDate()+a),`${t.getFullYear()}-${String(t.getMonth()+1).padStart(2,"0")}-${String(t.getDate()).padStart(2,"0")}`}function Be(e){q.filter(a=>a!==e.detail.value);const a=e.detail.value;void 0!==a?"third"==a&&(Q.value="Show less notes",X.value=!W.value):(Q.value="Show more notes",X.value=!W.value)}function Le(e){"Enter"!==e.key&&"ArrowDown"!==e.key||(e.preventDefault(),Ie())}x(async()=>{const e=new fa,{previousDrugPrescriptions:a,previousClinicalNotes:t,previousDrugAllergies:n}=await e.getPatientEncounters();j.value=a,Y.value=Object.entries(t)[0];const[,...o]=Object.entries(t);G.value=o,K.value=Object.entries(n)[0];const[,...l]=Object.entries(n);J.value=l,await async function(e=5,a=1e3){let t=0;for(;t<e&&(be.value=await we(),!(be.value.length>0));)t++,await new Promise(e=>setTimeout(e,a));0===be.value.length&&console.warn("Failed to fetch route list after maximum retries.")}()}),H(()=>y.value,async e=>{!async function(){He(y.value)?c.value=!1:(d.value="please enter a number",c.value=!0),c.value}()}),H(()=>O.value,async e=>{De()});const ze=_(()=>[{showAddItemButton:!0,addItemButton:!0,name:null!==ee.value?"Update":"ADD",fn:Ie},{showAddItemButton:!0,addItemButton:!0,name:"CANCEL",fn:Re}]),Re=async()=>{Ke(Je,{class:"otherVitalsModal"},!0,{message:"Are you sure you want to cancle?"},{cancel:e=>{},confirm:async e=>{1==e.detail&&function(){if(null!==ee.value){N.value="",v.value="",y.value="",he.value=null,O.value="",P.value="",ye.value=null,ge.value=null;const e=Qe();e.setSelectedMedicalDrugsList([ee.value]),e.editingDrugItem=null}l.value=!0,i.value++}()}})};return(e,n)=>(f(),k(C(s),null,{default:D(()=>[g("div",mn,[g("div",fn,[h(Ka)])]),g("div",gn,[h(C(r),{lines:"none",class:"section-header"},{default:D(()=>[h(C(U),{icon:C(E),class:"section-icon"},null,8,["icon"]),h(C(te),{class:"section-title",style:{"margin-top":"12px"}},{default:D(()=>[...n[9]||(n[9]=[I("Medication",-1)])]),_:1})]),_:1}),g("div",hn,[(f(),k(ga,{_selectedMedicalDrugsList:F.value,onEditItem:Oe,onRemoveItem:Pe,key:i.value,class:"medication-list"},null,8,["_selectedMedicalDrugsList"])),l.value?w("",!0):(f(),m("div",yn,[g("div",bn,[n[10]||(n[10]=g("label",{class:"input-label"},"Medication",-1)),h(C(de),{modelValue:ye.value,"onUpdate:modelValue":[n[0]||(n[0]=e=>ye.value=e),n[1]||(n[1]=e=>{var a;(a=e)&&(v.value=a.name,N.value=a.drug_id,A.value=a.units,Z.value=a,Se(a))})],options:z.value,searchable:!0,"close-on-select":!0,"show-labels":!1,placeholder:"Select medication",label:"name","track-by":"drug_id",onSearchChange:n[2]||(n[2]=e=>async function(e){const a=e,t=await Ze.getOfflineOPDDrugs({name:a,page:1,page_size:10});t.map(e=>({label:e.name,value:e.name,other:e})),V.setPartialOPDdrugList(t)}(e))},{option:D(e=>[g("div",_n,L(e.option.name),1)]),_:1},8,["modelValue","options"]),fe.value?(f(),m("div",xn,L(re.value),1)):w("",!0)]),g("div",wn,[g("div",kn,[n[11]||(n[11]=g("label",{class:"input-label"},"Route",-1)),h(C(de),{modelValue:ge.value,"onUpdate:modelValue":[n[3]||(n[3]=e=>ge.value=e),n[4]||(n[4]=e=>{return a=e,void(ge.value=a);var a})],options:xe.value,searchable:!0,"close-on-select":!0,"show-labels":!1,placeholder:"Select route",label:"name","track-by":"concept_id",disabled:!1},null,8,["modelValue","options"]),le.value?(f(),m("div",Dn,L(ae.value),1)):w("",!0)]),g("div",Cn,[n[12]||(n[12]=g("label",{class:"input-label"},"Frequency",-1)),h(C(de),{modelValue:he.value,"onUpdate:modelValue":[n[5]||(n[5]=e=>he.value=e),n[6]||(n[6]=e=>{return a=e,void(he.value=a);var a})],options:C(t),searchable:!0,"close-on-select":!0,"show-labels":!1,placeholder:"Select frequency",label:"label","track-by":"code"},null,8,["modelValue","options"]),se.value?(f(),m("div",In,L(ie.value),1)):w("",!0)]),g("div",Sn,[n[13]||(n[13]=g("label",{class:"input-label"},"Duration (days)",-1)),h(C(ce),{modelValue:O.value,"onUpdate:modelValue":n[7]||(n[7]=e=>O.value=e),type:"number",inputmode:"numeric",pattern:"[0-9]*",fill:"outline",placeholder:"Enter duration",onKeydown:Le},null,8,["modelValue"]),p.value?(f(),m("div",En,L(u.value),1)):w("",!0)])]),g("div",On,[ze.value[0].addItemButton?(f(),k(Ae,{key:0,name:ze.value[0].name,icon:C(ue),"onClicked:btn":ze.value[0].fn,class:"save-button"},null,8,["name","icon","onClicked:btn"])):w("",!0),ze.value[1].addItemButton?(f(),k(Ae,{key:1,name:ze.value[1].name,icon:C(pe),"onClicked:btn":ze.value[1].fn,class:"cancel-button"},null,8,["name","icon","onClicked:btn"])):w("",!0)])])),l.value?(f(),k(Ae,{key:1,name:"Add new medication",icon:C($),fontWeight:"600","onClicked:btn":ke,class:"add-new-button"},null,8,["icon"])):w("",!0)])]),g("div",Pn,[h(C(r),{lines:"none",class:"section-header"},{default:D(()=>[h(C(U),{icon:C(ve),class:"section-icon"},null,8,["icon"]),h(C(te),{class:"section-title"},{default:D(()=>[...n[14]||(n[14]=[I("Non-pharmacological therapy and other notes",-1)])]),_:1})]),_:1}),g("div",An,[h(ha,{class:"intervention-component"}),g("div",Nn,[h(C(r),{class:"notes-input-item"},{default:D(()=>[h(C(U),{slot:"start",icon:C(a).editPen,class:"edit-icon","aria-hidden":"true"},null,8,["icon"]),h(C(me),{modelValue:R.value,"onUpdate:modelValue":n[8]||(n[8]=e=>R.value=e),onIonInput:Ne,placeholder:"Enter notes here...","auto-grow":!0,class:"notes-textarea",fill:"outline",style:{"--padding-start":"16px"}},null,8,["modelValue"])]),_:1})]),h(C(ne),{ref:"accordionGroup",class:"previous-notes"},{default:D(()=>[h(C(oe),{value:"fourth","toggle-icon-slot":"start"},{default:D(()=>[h(C(r),{slot:"header",color:"light",class:"previous-notes-header"},{default:D(()=>[h(C(te),null,{default:D(()=>[...n[15]||(n[15]=[I("Previous visit notes",-1)])]),_:1})]),_:1}),g("div",Vn,[g("div",Hn,[1===e.index?(f(!0),m(S,{key:0},B(Y.value,(e,a)=>(f(),m("div",{key:a,class:"note-entry"},[(f(!0),m(S,null,B(e,(e,a)=>(f(),m("div",{key:a},[g("div",Mn,L(e.date),1),g("div",Tn,L(e.notes),1)]))),128))]))),128)):w("",!0),h(C(ne),{onIonChange:Be},{default:D(()=>[h(C(oe),{value:"third","toggle-icon-slot":"start"},{default:D(()=>[h(C(r),{slot:"header",color:"light",class:"show-more-header"},{default:D(()=>[h(C(te),{color:"primary"},{default:D(()=>[I(L(Q.value),1)]),_:1})]),_:1}),g("div",Bn,[(f(!0),m(S,null,B(G.value,(e,a)=>{return f(),m("div",{key:a,class:"note-entry"},[(f(!0),m(S,null,B((t=e,t[1]),(e,a)=>(f(),m("div",{key:a},[g("div",Fn,L(e.date),1),g("div",Ln,L(e.notes),1)]))),128))]);var t}),128))])]),_:1})]),_:1})])])]),_:1})]),_:1},512)])])]),_:1}))}}),Un=(e("a",Se(Rn,[["__scopeId","data-v-928c62f1"]])),t({name:"xxxComponent"})),qn=t({...Un,emits:["dataSaved"],setup(e,{emit:a}){const t=b(),n=b("gurdian phone number");b(!0),b(!0);const o=b(!0),l=b(),i=b();x(async()=>{!function(){const e=(new Ye).isChildBearing;1==e&&(d[0].disable_checkbox.value=!1),0==e&&(d[0].disable_checkbox.value=!0)}()});const s=[{placeHolder:{default:"Enter time of death if known"},property_name:"timeOfDeath",dataHandler:function(e){s[0].dataValue.value=e},dataValue:b(),show_error:b(!1),error_message:"Time required",type:"time",skip_validation:!1},{placeHolder:{default:"Enter time arrived"},property_name:"timeArrived",dataHandler:function(e){s[1].dataValue.value=e},dataValue:b(),show_error:b(!1),error_message:"Time required",type:"time",skip_validation:!1},{placeHolder:{default:"Enter time confirming death"},property_name:"timeOfDeathConfirmation",dataHandler:function(e){s[2].dataValue.value=e},dataValue:b(),show_error:b(!1),error_message:"Time required",skip_validation:!1}],r=[{placeHolder:{default:"Enter date of death"},property_name:"dateOfDeath",dataHandler:function(e){const a={day:e.value.day,month:e.value.month,year:e.value.year,formattedDate:e.value.formattedDate};r[0].dataValue.value=a},dataValue:b(),show_error:b(!1),error_message:"Date required",type:"date",skip_validation:!1},{placeHolder:{default:"Enter date arrived"},property_name:"dateArrived",dataHandler:function(e){const a={day:e.value.day,month:e.value.month,year:e.value.year,formattedDate:e.value.formattedDate};r[1].dataValue.value=a,console.log(r[2].dataValue.value)},dataValue:b(),show_error:b(!1),error_message:"Date required",type:"date",skip_validation:!1},{placeHolder:{default:"Enter date confirming death"},property_name:"dateOfDeathConfirmation",dataHandler:function(e){const a={day:e.value.day,month:e.value.month,year:e.value.year,formattedDate:e.value.formattedDate};r[2].dataValue.value=a,console.log(r[2].dataValue.value)},dataValue:b(),show_error:b(!1),error_message:"Date required",type:"date",skip_validation:!1}],d=[{lblTxt:"Was the individual pregnant at the time of death?",value:b(!1),disable_checkbox:b(!0)}],c=[{placeHolder:"Enter place of death",property_name:"placeOfDeath",dataHandler:function(e){const a=e.target.value;c[0].dataValue.value=a},dataValue:b(),show_error:b(!1),error_message:"Input required, Only letters allowed",type:"text",skip_validation:!1},{placeHolder:"Enter name of guardian",property_name:"nameOfGuardian",dataHandler:function(e){const a=e.target.value;c[1].dataValue.value=a},dataValue:b(),show_error:b(!1),error_message:"Input required, Only letters allowed",type:"text",skip_validation:!1},{placeHolder:"Enter name of person confirming death",property_name:"nameOfPersonConfirmindDeath",dataHandler:function(e){const a=e.target.value;c[2].dataValue.value=a},dataValue:b(),show_error:b(!1),error_message:"Input required, Only letters allowed",type:"text",skip_validation:!1},{placeHolder:"Enter position of the person confirming death",property_name:"positionOfthePersonConfirmingDeath",dataHandler:function(e){const a=e.target.value;c[3].dataValue.value=a},dataValue:b(),show_error:b(!1),error_message:"Input required, Only letters allowed",type:"text",skip_validation:!1},{placeHolder:"Enter medical council registration number of the person confirming death",property_name:"medicalConcilRegistrationNumberOfThePersonConfirmingDeath",dataHandler:function(e){const a=e.target.value;c[4].dataValue.value=a},dataValue:b(),show_error:b(!1),error_message:"Input required, Only letters and numbers are allowed",type:"alphanumeric",skip_validation:!1},{placeHolder:"Other (specify)",property_name:"otherNotes",dataHandler:function(e){const a=e.target.value;c[5].dataValue.value=a},dataValue:b(),show_error:b(!1),error_message:"Input required, Only letters allowed",dissabled:o.value,type:"text",skip_validation:!0}],u=[{showAddItemButton:!0,addItemButton:!0,name:"save",btnFill:"clear",fn:function(){ta(c),ta(r),ta(s),function(){const e=p.value.filter(e=>e.selected);if(0==e.length)_[0].show_error.value=!0;else if(_[0].show_error.value=!1,"Accident"==e[0].name){const e=y.value.filter(e=>e.selected);_[1].show_error.value=0==e.length}}();const e=ia.merge(na(c),na(r),na(s),N(_[0]),N(_[1]));console.log(e)}},{showAddItemButton:!0,addItemButton:!0,name:"cancel",btnFill:"clear",fn:function(){!function(e={dataSaved:!0}){O("dataSaved",e)}()}}],p=b([{id:1,name:"Natural",selected:!1},{id:2,name:"Accident",selected:!1},{id:3,name:"Homicide",selected:!1},{id:4,name:"Suicide",selected:!1},{id:5,name:"Pending investigation",selected:!1},{id:6,name:"Could not be determined",selected:!1},{id:7,name:"Other - specify",selected:!1}]),y=b([{id:1,name:"Motor vehicle (passenger)",selected:!1},{id:2,name:"Motor vehicle (pedestrian)",selected:!1},{id:3,name:"Drowning",selected:!1},{id:4,name:"Other - specify",selected:!1}]),_=[{multi_Selection:!1,manner_of_death_Selection_value:b(),show_list_label:!0,unqueId:"qwerty",name_of_list:"Manner of death ",property_name:"mannerOfDeath",placeHolder:"Choose one",items:p.value,listUpdatedFN:P,listFilteredFN:()=>{},use_internal_filter:!0,disabled:b(!1),show_error:b(!1),error_message:"selection required"},{multi_Selection:!1,show_list_label:!0,unqueId:"qwerty1hjkn",name_of_list:"How did it occur?",property_name:"howDiditOccur",placeHolder:"Choose one",items:y.value,listUpdatedFN:A,listFilteredFN:()=>{},use_internal_filter:!0,disabled:b(!0),show_error:b(!1),error_message:"selection required"}],O=a;function P(e){p.value.forEach(e=>e.selected=!1);const a=p.value.find(a=>a.id==e.id);_[1].disabled.value="Accident"!=e.name,a.selected=!0}function A(e){console.log("listUpdated",e),y.value.forEach(e=>e.selected=!1),y.value.find(a=>a.id==e.id).selected=!0}function N(e){const a=[];let t={};return e.items.forEach(t=>{1==t.selected&&a.push({property_name:e.property_name,name:t.name})}),a.length>0?(t[a[0].property_name]=a[0].name,t):t}return(e,a)=>{const b=v("ion-label");return f(),m(S,null,[h(C(se),{class:"checkbox_content md"},{default:D(()=>[h(C(fe),null,{default:D(()=>[h(ea,{placeholder:c[0].placeHolder,icon:C(V),inputValue:c[0].dataValue.value,"onUpdate:inputValue":c[0].dataHandler},null,8,["placeholder","icon","inputValue","onUpdate:inputValue"]),g("div",null,[c[0].show_error.value?(f(),k(b,{key:0,class:"error-label"},{default:D(()=>[I(L(c[0].error_message),1)]),_:1})):w("",!0)])]),_:1}),h(C(fe),null,{default:D(()=>[h(aa,{place_holder:r[0].placeHolder,onDateUpDated:r[0].dataHandler,date_prop:""},null,8,["place_holder","onDateUpDated"]),g("div",null,[r[0].show_error.value?(f(),k(b,{key:0,class:"error-label"},{default:D(()=>[I(L(r[0].error_message),1)]),_:1})):w("",!0)])]),_:1})]),_:1}),h(C(se),null,{default:D(()=>[h(C(fe),null,{default:D(()=>[h(_a,{place_holder:s[0].placeHolder,onTimeUpDated:s[0].dataHandler,time_prop:""},null,8,["place_holder","onTimeUpDated"]),g("div",null,[s[0].show_error.value?(f(),k(b,{key:0,class:"error-label"},{default:D(()=>[I(L(s[0].error_message),1)]),_:1})):w("",!0)])]),_:1}),h(C(fe))]),_:1}),h(C(se),{class:"checkbox_content md"},{default:D(()=>[h(C(fe),null,{default:D(()=>[h(ea,{placeholder:c[1].placeHolder,icon:C(ge),inputValue:c[1].dataValue.value,"onUpdate:inputValue":c[1].dataHandler},null,8,["placeholder","icon","inputValue","onUpdate:inputValue"]),g("div",null,[c[1].show_error.value?(f(),k(b,{key:0,class:"error-label"},{default:D(()=>[I(L(c[1].error_message),1)]),_:1})):w("",!0)])]),_:1}),h(C(fe),null,{default:D(()=>[h(C(he),{value:d[0].value,alignment:"start",class:"ion-lblCls",disabled:d[0].disable_checkbox.value},{default:D(()=>[I(L(d[0].lblTxt),1)]),_:1},8,["value","disabled"])]),_:1})]),_:1}),h(C(se),null,{default:D(()=>[h(C(fe),null,{default:D(()=>[h(ea,{placeholder:n.value,icon:C(ye),inputValue:t.value},null,8,["placeholder","icon","inputValue"])]),_:1}),h(C(fe))]),_:1}),h(C(se),null,{default:D(()=>[h(C(fe),null,{default:D(()=>[h(aa,{place_holder:r[1].placeHolder,onDateUpDated:r[1].dataHandler,date_prop:""},null,8,["place_holder","onDateUpDated"]),g("div",null,[r[1].show_error.value?(f(),k(b,{key:0,class:"error-label"},{default:D(()=>[I(L(r[1].error_message),1)]),_:1})):w("",!0)])]),_:1}),h(C(fe),null,{default:D(()=>[h(_a,{place_holder:s[1].placeHolder,onTimeUpDated:s[1].dataHandler,time_prop:""},null,8,["place_holder","onTimeUpDated"]),g("div",null,[s[1].show_error.value?(f(),k(b,{key:0,class:"error-label"},{default:D(()=>[I(L(s[1].error_message),1)]),_:1})):w("",!0)])]),_:1})]),_:1}),h(C(se),null,{default:D(()=>[h(C(fe),null,{default:D(()=>[h(C(de),{modelValue:l.value,"onUpdate:modelValue":[a[0]||(a[0]=e=>l.value=e),a[1]||(a[1]=e=>P(e))],multiple:!1,taggable:!1,"hide-selected":!0,"close-on-select":!0,openDirection:"bottom","tag-placeholder":"Manner of death",placeholder:"Manner of death",selectLabel:"",label:"name",searchable:!0,"track-by":"id",options:p.value},null,8,["modelValue","options"]),g("div",null,[_[0].show_error.value?(f(),k(b,{key:0,class:"error-label"},{default:D(()=>[I(L(_[0].error_message),1)]),_:1})):w("",!0)])]),_:1}),h(C(fe),null,{default:D(()=>[h(C(de),{modelValue:i.value,"onUpdate:modelValue":[a[2]||(a[2]=e=>i.value=e),a[3]||(a[3]=e=>A(e))],multiple:!1,taggable:!1,"hide-selected":!0,"close-on-select":!0,openDirection:"bottom","tag-placeholder":"How did it occur?",placeholder:"How did it occur?",selectLabel:"",label:"name",disabled:_[1].disabled.value,searchable:!0,"track-by":"id",options:y.value},null,8,["modelValue","disabled","options"]),g("div",null,[_[1].show_error.value?(f(),k(b,{key:0,class:"error-label"},{default:D(()=>[I(L(_[1].error_message),1)]),_:1})):w("",!0)])]),_:1})]),_:1}),h(C(se),null,{default:D(()=>[h(C(fe),null,{default:D(()=>[h(ea,{placeholder:c[5].placeHolder,icon:C(be),inputValue:c[5].dataValue.value,disabled:o.value,"onUpdate:inputValue":c[5].dataHandler},null,8,["placeholder","icon","inputValue","disabled","onUpdate:inputValue"]),g("div",null,[c[5].show_error.value?(f(),k(b,{key:0,class:"error-label"},{default:D(()=>[I(L(c[5].error_message),1)]),_:1})):w("",!0)])]),_:1})]),_:1}),h(C(se),null,{default:D(()=>[h(C(fe),null,{default:D(()=>[h(_a,{place_holder:s[2].placeHolder,onTimeUpDated:s[2].dataHandler,time_prop:""},null,8,["place_holder","onTimeUpDated"]),g("div",null,[s[2].show_error.value?(f(),k(b,{key:0,class:"error-label"},{default:D(()=>[I(L(s[2].error_message),1)]),_:1})):w("",!0)])]),_:1}),h(C(fe),null,{default:D(()=>[h(ea,{placeholder:c[2].placeHolder,icon:C(ge),inputValue:c[2].dataValue.value,"onUpdate:inputValue":c[2].dataHandler},null,8,["placeholder","icon","inputValue","onUpdate:inputValue"]),g("div",null,[c[2].show_error.value?(f(),k(b,{key:0,class:"error-label"},{default:D(()=>[I(L(c[2].error_message),1)]),_:1})):w("",!0)])]),_:1})]),_:1}),h(C(se),null,{default:D(()=>[h(C(fe),null,{default:D(()=>[h(ea,{placeholder:c[3].placeHolder,icon:C(E),inputValue:c[3].dataValue.value,"onUpdate:inputValue":c[3].dataHandler},null,8,["placeholder","icon","inputValue","onUpdate:inputValue"]),g("div",null,[c[3].show_error.value?(f(),k(b,{key:0,class:"error-label"},{default:D(()=>[I(L(c[3].error_message),1)]),_:1})):w("",!0)])]),_:1}),h(C(fe),null,{default:D(()=>[h(ea,{placeholder:c[4].placeHolder,icon:C(be),inputValue:c[4].dataValue.value,"onUpdate:inputValue":c[4].dataHandler},null,8,["placeholder","icon","inputValue","onUpdate:inputValue"]),g("div",null,[c[4].show_error.value?(f(),k(b,{key:0,class:"error-label"},{default:D(()=>[I(L(c[4].error_message),1)]),_:1})):w("",!0)])]),_:1})]),_:1}),(f(),k(C(se),{key:0,class:"spc_btwn"},{default:D(()=>[u[0].addItemButton?(f(),k(Ae,{key:0,name:u[0].name,fill:u[0].btnFill,icon:C(ue),"onClicked:btn":u[0].fn},null,8,["name","fill","icon","onClicked:btn"])):w("",!0),u[1].addItemButton?(f(),k(Ae,{key:1,name:u[1].name,fill:u[1].btnFill,icon:C(pe),"onClicked:btn":u[1].fn},null,8,["name","fill","icon","onClicked:btn"])):w("",!0)]),_:1}))],64)}}}),jn=Se(qn,[["__scopeId","data-v-0aad2f08"]]),$n={class:"dash_box"},Yn={key:1},Gn=t({name:"xxxComponent"}),Wn=t({...Gn,setup(e){const a=b("No outcome created yet"),t=b(!1),n=b("please select a type"),o=b(!0),l=b(""),i=b(!0),r=b(!1),d=oa(),c=_(()=>d.outcomes),u=b(!1),p=b(!1),y=b(!1),S=b(!1),E=b(!1),O=b(!1),P=b([{name:"Admitted for short stay",selected:!1},{name:"Referred out",selected:!1},{name:"Discharged Home",selected:!1},{name:"Send to Another Clinic",selected:!1}]),A=[{multi_Selection:!1,show_list_label:!0,unqueId:"qwerty2",name_of_list:"Add new outcome",placeHolder:"Choose one",items:P.value,listUpdatedFN:function(e){P.value=e,P.value.forEach(e=>{1==e.selected&&(l.value=e.name)})},listFilteredFN:()=>{},use_internal_filter:!0,disabled:b(!1)}];function N(){c.value.length>0?i.value=!1:0==c.value.length&&0==r.value&&(i.value=!0)}function V(e){c.value.splice(e,1)}x(async()=>{N()}),H(()=>l.value,async e=>{1==u.value?u.value=!1:async function(){const e=l.value;console.log(e),l.value=e;const a=l.value;a==P.value[0].name?y.value=!0:y.value=!1,a==P.value[1].name?(S.value=!0,console.log("show_discharged_options is set to true")):S.value=!1,a==P.value[2].name?(E.value=!0,console.log("show_discharged_options is set to true")):E.value=!1,a==P.value[3].name?O.value=!0:O.value=!1}()}),H(()=>c.value.length,async e=>{N()});const M=e=>{};function T(){p.value=!1,y.value=!1,S.value=!1,E.value=!1,P.value.forEach(e=>{e.selected=!1}),l.value=""}return(e,l)=>{const r=v("ion-row");return f(),k(C(s),null,{default:D(()=>[h(r,null,{default:D(()=>[h(C(fe),null,{default:D(()=>[(f(),k(xa,{key:0,"onUpdate:removeItem":V,"onUpdate:editItem":M,displayData:c.value},null,8,["displayData"]))]),_:1})]),_:1}),i.value?(f(),k(r,{key:0},{default:D(()=>[g("span",$n,L(a.value),1)]),_:1})):w("",!0),o.value?(f(),m("div",Yn,[h(r,null,{default:D(()=>[h(C(fe),null,{default:D(()=>[h(la,{multiSelection:A[0].multi_Selection,show_label:A[0].show_list_label,uniqueId:A[0].unqueId,name_of_list:A[0].name_of_list,choose_place_holder:A[0].placeHolder,"items_-list":A[0].items,use_internal_filter:A[0].use_internal_filter,disabled:A[0].disabled.value,onItemListUpDated:A[0].listUpdatedFN,onItemListFiltered:A[0].listFilteredFN},null,8,["multiSelection","show_label","uniqueId","name_of_list","choose_place_holder","items_-list","use_internal_filter","disabled","onItemListUpDated","onItemListFiltered"]),g("div",null,[t.value?(f(),k(C(te),{key:0,class:"error-label"},{default:D(()=>[I(L(n.value),1)]),_:1})):w("",!0)])]),_:1})]),_:1})])):w("",!0),y.value?(f(),k(wa,{key:2,onDataSaved:T,selected_ward_prop:"",admitted_other_props:""})):w("",!0),S.value?(f(),k(ka,{key:3,onDataSaved:T,selected_referral_data:"",selected_other_referral_data:""})):w("",!0),E.value?(f(),k(Da,{key:4,onDataSaved:T,selected_discharged_prop:"",selected_discharged_data:""})):w("",!0),p.value?(f(),k(jn,{key:5,onDataSaved:T})):w("",!0),O.value?(f(),k(Ca,{key:6,onDataSaved:T})):w("",!0)]),_:1})}}});e("b",Se(Wn,[["__scopeId","data-v-fc637de7"]]))}}});
