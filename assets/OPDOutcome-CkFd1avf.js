import{d as X,af as Le,G as ft,E as gt,ag as _t,ab as Ve,a1 as J,I as ht,a8 as yt,$ as Be,a0 as bt,H as j,e as y,f as i,k as a,l as n,aT as Se,r as s,c as q,a as be,m as w,O as F,J as m,u,Q as V,F as Z,w as re,ar as Dt,P as ue,K as M,p as Oe,L as Te,e6 as at,e7 as st,b5 as Fe,e8 as ot,e9 as it,cW as lt,ea as rt,eb as ct,ec as ut,c$ as dt,bM as vn,ap as wt,at as fn,bU as gn,aZ as ie,ai as je,ah as fe,N as se,bp as oe,a9 as _n,R as hn,bg as Ye,a2 as yn,bi as bn,a7 as Dn,bS as wn,bE as Cn,aa as mt}from"./vendor-Bg3Z5m3L.js";import{ba as He,H as Ie,af as z,bc as Ct,bb as St,aY as It,u as ke,_ as ce,k as xe,aw as $e,ax as Re,M as Ce,N as we,S as ye,aP as K,t as le,K as Ne,aJ as me,aK as kt,bB as Sn,bC as In,b0 as kn,b6 as _e,b1 as he,bD as Pn,aM as En,P as xn,aQ as pt,aW as Nn,s as An,aE as Ee,aF as On,aq as $n}from"./index-P90mZVYG.js";import{l as ge}from"./lodash-NJiRuGo9.js";import{P as Mn}from"./patient_complaints_service-CGnThxU7.js";import{D as Pt}from"./DashBox-DiR_r9jg.js";import{u as Tn}from"./useExposeFromStandardForm-CFzqnA5S.js";import{B as Ke}from"./BasicForm-Dm2VOtXv.js";import{f as Qe,c as Et,a as xt}from"./formatServerData-B-rgJNX3.js";import{A as Fn,P as Ln,D as Bn,m as Rn}from"./NextAppointment-DUCFv4Ac.js";import{D as Vn,b as Hn}from"./drug_prescription_service-CMtfwg4Y.js";import{D as vt}from"./drug_service-Dm2yxGih.js";import{D as Un,A as Gn,R as Wn,a as qn}from"./Outcome-KNOFVcRJ.js";const zn=X({name:"Menu",components:{IonContent:yt,IonHeader:ht,IonItem:J,IonList:Ve,IonMenu:_t,IonTitle:gt,IonToolbar:ft,List:He},computed:{...Le(ke,["patient"]),...Le(It,["presentingComplaints"])},data(){return{valueNumericArray:[],obsDatetime:[],graphIcon:St(["#006401"]),listIcon:Ct(["#636363"]),displayGraph:!0,orders:[],height:[],BMI:[],iconBg:{},activeWeight:[],activeHeight:[],activeBMI:[],list:[],series:[{name:"",data:[]}]}},setup(){return{checkmark:bt,pulseOutline:Be}},watch:{$router:{async handler(){await this.updateList()},immediate:!0,deep:!0},patient:{async handler(){await this.updateList()},deep:!0}},async mounted(){await this.updateList()},methods:{async updateList(){const t=await z.getAll(this.patient.patientID,"Presenting complaint"),o=ge.isEmpty(t)?[]:Promise.all(t.map(async r=>r.value_coded?{name:await z.getConceptName(r.value_coded),obs_date:r.obs_datetime,duration:r.children[0].value_text}:[]));this.setListData(await o)},setListData(t){this.list=[],this.list.push({actionBtn:!1,class:"col_background",header:!0,minHeight:"--min-height: 20px;",containSize:4,display:["Date","Presenting Complains","Duration"]}),t.forEach(o=>{this.list.push({actionBtn:!1,minHeight:"--min-height:20px;",class:"col_background",containSize:4,display:[Ie.toStandardHisFormat(o.obs_date),o.name,o.duration]})})}}}),Yn={class:"modal_wrapper"};function jn(t,o,r,c,f,d){const _=j("list");return i(),y("div",Yn,[a("div",null,[n(_,{listData:t.list},null,8,["listData"])])])}const Kn=ce(zn,[["render",jn],["__scopeId","data-v-30434e22"]]),Qn={key:0},Jn={style:{"align-content":"center"}},Xn={class:"ion-padding",slot:"content"},Zn=X({__name:"PresentingComplaints",setup(t,{expose:o}){const r=It(),{presentingComplaints:c}=Se(r),f=s(xe),d=s(!0),_=s(!1),B=s(!0),P=s(!1),C=s([]),N=s([]),I=s(),U=q(()=>[{componentType:"multiSelectInputField",header:"Presenting Complaints",name:"PresentingComplaints",trackBy:"concept_id",icon:xe.search,hideSelected:!0,validation:b=>A(b==null?void 0:b.name,C.value)?"Presenting complaint already added":$e.required(b),options:N.value,grid:{s:"6"}},{componentType:"inputField",header:"Duration",name:"duration",icon:xe.time,validation:b=>$e.isNotEmptyandNumber(b),grid:{s:"6"},unitOptions:[{label:"Hours",value:"Hours"},{label:"Days",value:"Days"},{label:"Weeks",value:"Weeks"},{label:"Months",value:"Months"},{label:"Years",value:"Years"}],unitValidation:b=>!b||b===""?"Please select a unit.":null},{componentType:"inputField",header:"Specify the presenting complaint(s)",name:"Other (specify)",icon:xe.editPen,validation:b=>A(b,C.value)?"Presenting complaint already added":$e.required(b),condition:b=>{var E;return((E=b==null?void 0:b.PresentingComplaints)==null?void 0:E.name)==="Other"}},{componentType:"Alert",condition:b=>{var E;return $e.required((E=b==null?void 0:b.PresentingComplaints)==null?void 0:E.name)!=null},backgroundColor:"lightyellow",textColor:"black",value:"Please search thoroughly for the complaint. If it is not listed, search and select the 'Other' option to specify the complaint.",name:"noMatchAlert"}]),{formRef:l}=Tn(),h=async()=>{N.value=await Mn.getComplaintsList("Presenting complaint"),we(c.value,"PresentingComplaints","multiSelectData",N.value)},k=()=>{d.value=!1,B.value=!1,_.value=!0},S=async()=>{var R,p;const b=(R=l.value)==null?void 0:R.getFormValues();((p=l.value)==null?void 0:p.validateForm())==null&&($(b),_.value=!1,B.value=!0)},$=b=>{var e;const E=b.duration+" "+b.duration_unit,R=b.PresentingComplaints,p=R.name==="Other"?b["Other (specify)"]:R.name;C.value.push({actionBtn:!0,btn:["delete"],name:p,concept_id:R.concept_id,duration:R.duration,durationUnits:R.duration_unit,display:[p,E],data:[{concept_id:8578,value_coded:R.concept_id,obs_datetime:ye.getSessionDate(),child:[{concept_id:R.concept_id,value_text:E,obs_datetime:ye.getSessionDate()}]}]}),(e=l.value)==null||e.resetForm(),P.value=!0},A=(b,E)=>E.some(R=>R.name===b),L=b=>{C.value=C.value.filter(E=>E.display[0]!==b.name)},T=async()=>{const b=await z.getObsByEncounterIdAndDate(K.PRESENTING_COMPLAINTS),E=C.value.flatMap(R=>R.data);if(E.length<=0&&b.length<=0)return le("Presenting complaints is required");E.length<=0||(await z.addObsToEncounterPatient(E,K.PRESENTING_COMPLAINTS),Ne("Presenting complaints saved successful"),C.value=[])};return be(async()=>{await h()}),o({onSubmit:T}),(b,E)=>{const R=j("ion-row"),p=j("ion-label"),e=j("ion-accordion"),x=j("ion-accordion-group");return i(),y(Z,null,[n(Pt,{status:d.value,content:"No presenting complaints added"},null,8,["status"]),P.value?(i(),y("span",Qn,[n(He,{listData:C.value,"onClicked:delete":L},null,8,["listData"])])):w("",!0),_.value?(i(),F(R,{key:1},{default:m(()=>[n(Re,{formData:U.value,ref_key:"formRef",ref:l},null,8,["formData"]),a("div",Jn,[n(Ce,{fill:"clear",icon:f.value.plus,iconSlot:"icon-only","onClicked:btn":E[0]||(E[0]=O=>S()),name:"Save"},null,8,["icon"])])]),_:1})):w("",!0),B.value?(i(),F(R,{key:2,style:{"margin-top":"10px"}},{default:m(()=>[n(Ce,{fill:"clear",icon:f.value.plus,iconSlot:"icon-only","onClicked:btn":E[1]||(E[1]=O=>k()),name:"Add new presenting complaints"},null,8,["icon"])]),_:1})):w("",!0),n(R,null,{default:m(()=>[n(x,{ref_key:"accordionGroup",ref:I,class:"previousView"},{default:m(()=>[n(e,{value:"first","toggle-icon-slot":"start",style:{"border-radius":"10px","background-color":"#fff"}},{default:m(()=>[n(u(J),{slot:"header",color:"light"},{default:m(()=>[n(p,{class:"previousLabel"},{default:m(()=>[...E[2]||(E[2]=[V("Previous presenting complaints",-1)])]),_:1})]),_:1}),a("div",Xn,[n(Kn)])]),_:1})]),_:1},512)]),_:1})],64)}}}),ea=ce(Zn,[["__scopeId","data-v-a95bcc0f"]]),ta=q(()=>[{componentType:"radioButtonField",header:"Eye opening response",name:"Eye opening response",obsValueType:"value_coded",type:"inline",options:[{label:"Spontaneously",value:"Spontaneously"},{label:"To speech",value:"To speech"},{label:"To pain",value:"To pain"},{label:"No response",value:"No response"}]},{componentType:"Dashes"},{componentType:"radioButtonField",header:"Best verbal response",name:"Best verbal response",obsValueType:"value_coded",type:"inline",options:[{label:"Oriented to time, place and person",value:"Oriented to time, place and person"},{label:"Confused",value:"Confused"},{label:"Inappropriate words",value:"Inappropriate words"},{label:"Incomprehensible sounds",value:"Incomprehensible sounds"},{label:"No response",value:"No response"}]},{componentType:"Dashes"},{componentType:"radioButtonField",header:"Best motor response",name:"Best motor response",obsValueType:"value_coded",type:"inline",options:[{label:"Obeys commands",value:"Obeys commands"},{label:"Moves to localised pain",value:"Moves to localised pain"},{label:"Flexion withdrawal from pain",value:"Flexion withdrawal from pain"},{label:"Abnormal flexion (decorticate)",value:"Abnormal flexion (decorticate)"},{label:"Abnormal extension (decerebrate)",value:"Abnormal extension (decerebrate)"},{label:"No response",value:"No response"}]}]),na=q(()=>[{componentType:"radioButtonField",header:"Eye opening response",name:"Eye opening response",obsValueType:"value_coded",type:"inline",options:[{label:"Directed eye movements",value:"Directed eye movements"},{label:"Not directed",value:"Not directed"}]},{componentType:"Dashes"},{componentType:"radioButtonField",header:"Best verbal response",name:"Best verbal response",obsValueType:"value_coded",type:"inline",options:[{label:"Appropriate cry",value:"Appropriate cry"},{label:"Inappropriate cry or moan",value:"Inappropriate cry or moan"},{label:"No cry",value:"No cry"}]},{componentType:"Dashes"},{componentType:"radioButtonField",header:"Best motor response",name:"Best motor response",obsValueType:"value_coded",type:"inline",options:[{label:"Localizes pain",value:"Localizes pain"},{label:"Withdraws from pain",value:"Withdraws from pain"},{label:"Non specific or no response",value:"Non specific or no response"}]}]),Nt={Spontaneously:4,"To speech":3,"To pain":2,"No response":1},At={"Oriented to time, place and person":5,Confused:4,"Inappropriate words":3,"Incomprehensible sounds":2,"No response":1},Ot={"Obeys commands":6,"Moves to localised pain":5,"Flexion withdrawal from pain":4,"Abnormal flexion (decorticate)":3,"Abnormal extension (decerebrate)":2,"No response":1},$t={"Not directed":0,"Directed eye movements":1},Mt={"Non specific or no response":0,"Withdraws from pain":1,"Localizes pain":2},Tt={"No cry":0,"Inappropriate cry or moan":1,"Appropriate cry":2},aa={class:"allergies-container"},sa={key:0,class:"no-allergies"},oa={key:1,class:"date-groups"},ia=["onClick"],la={class:"date-info"},ra={class:"date-text"},ca={class:"allergy-count"},ua={class:"card-header"},da={class:"allergy-type"},ma={class:"card-content"},pa=X({__name:"AllergiesListing",setup(t){const o=ke(),{patient:r}=Se(o),c=s({}),f={antiviral:/abacavir|lamivudine|lopinavir|ritonavir|zidovudine|efavirenz|tenofovir/i,antibiotic:/penicillin|amoxicillin|cephalexin|azithromycin|ciprofloxacin|doxycycline/i,analgesic:/aspirin|ibuprofen|acetaminophen|morphine|codeine|tramadol/i,cardiac:/metoprolol|lisinopril|amlodipine|atorvastatin|warfarin/i,activated:/activated\s+charcoal/i},d={985:{name:"Drug Allergy",icon:"medical-outline",severity:"danger"},7759:{name:"Location/Environmental",icon:"location-outline",severity:"info"},7579:{name:"Medical Condition",icon:"heart-outline",severity:"warning"},drug:{name:"Drug Allergy",icon:"medical-outline",severity:"danger"},food:{name:"Food Allergy",icon:"restaurant-outline",severity:"danger"},environmental:{name:"Environmental",icon:"leaf-outline",severity:"warning"},contact:{name:"Contact Allergy",icon:"hand-left-outline",severity:"warning"},unknown:{name:"Unknown Allergy",icon:"help-circle-outline",severity:"info"}},_=l=>{const h=l.toLowerCase();return f.antiviral.test(h)?{type:"Antiviral Medication",icon:"shield-outline"}:f.antibiotic.test(h)?{type:"Antibiotic",icon:"bandage-outline"}:f.analgesic.test(h)?{type:"Pain Medication",icon:"fitness-outline"}:f.cardiac.test(h)?{type:"Cardiac Medication",icon:"heart-outline"}:f.activated.test(h)?{type:"Detoxification Agent",icon:"flask-outline"}:{type:"Medication",icon:"medical-outline"}},B=q(()=>{var l,h,k;return((k=(h=(l=r.value)==null?void 0:l.allergies)==null?void 0:h.saved)==null?void 0:k.length)>0}),P=q(()=>B.value?r.value.allergies.saved.map(l=>{var L;const h=((L=l.concept_id)==null?void 0:L.toString())||"unknown",k=d[h]||d.unknown;let S="Unknown",$=null;return l.value_text&&l.value_text!=="Unknown"&&l.value_text!==""?(S=l.value_text,h==="985"&&($=_(l.value_text))):l.concept_name&&(S=l.concept_name),{...$?{...k,name:$.type,icon:$.icon}:k,displayValue:S,conceptId:l.concept_id,date:l.obs_datetime||l.encounter_datetime,providerId:l.provider_id,locationId:l.location_id,encounterId:l.encounter_id,isDrug:h==="985",raw:l}}):[]),C=q(()=>{const l={};P.value.forEach(S=>{const $=S.date?I(S.date):"Unknown Date";l[$]||(l[$]=[]),l[$].push(S)});const h={};return Object.keys(l).sort((S,$)=>S==="Unknown Date"?1:$==="Unknown Date"?-1:new Date($).getTime()-new Date(S).getTime()).forEach(S=>{h[S]=l[S]}),h}),N=l=>{c.value[l]=!c.value[l]},I=l=>{if(!l)return"Unknown Date";try{return new Date(l).toISOString().split("T")[0]}catch(h){return"Unknown Date"}},U=l=>{if(l==="Unknown Date")return"Unknown Date";try{const h=new Date(l),k=Ie.sessionDate(),S=new Date(k),$=new Date(S);$.setDate($.getDate()-1);const A=h.toDateString(),L=S.toDateString(),T=$.toDateString();return A===L?"Today":A===T?"Yesterday":h.toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})}catch(h){return l}};return re(()=>C.value,l=>{const h=Object.keys(l);h.length>0&&(c.value[h[0]]=!0)},{immediate:!0}),re(()=>{var l;return(l=r.value)==null?void 0:l.allergies},l=>{console.log("Allergies updated:",l)},{deep:!0}),be(()=>{var l;console.log("Allergies component mounted",(l=r.value)==null?void 0:l.allergies)}),(l,h)=>{const k=j("ion-icon"),S=j("ion-label");return i(),y("div",aa,[n(S,{class:"section-title"},{default:m(()=>[n(k,{icon:u(Dt),class:"alert-icon"},null,8,["icon"]),n(S,null,{default:m(()=>[...h[0]||(h[0]=[V("Allergies (Medication, Healthcare items, Environment and Food)",-1)])]),_:1})]),_:1}),B.value?(i(),y("div",oa,[(i(!0),y(Z,null,ue(C.value,($,A)=>(i(),y("div",{key:A,class:"date-group"},[a("div",{class:Oe(["date-header",{expanded:c.value[A]}]),onClick:L=>N(A)},[a("div",la,[n(k,{name:"calendar-outline",class:"date-icon"}),a("span",ra,M(U(A)),1),a("span",ca,"("+M($.length)+" "+M($.length===1?"allergy":"allergies")+")",1)]),n(k,{name:"chevron-down-outline",class:Oe(["expand-icon",{rotated:c.value[A]}])},null,8,["class"])],10,ia),a("div",{class:Oe(["allergies-grid",{collapsed:!c.value[A]}])},[(i(!0),y(Z,null,ue($,(L,T)=>(i(),y("div",{key:T,class:Oe(["allergy-card",L.severity])},[a("div",ua,[n(k,{name:L.icon,class:"allergy-icon"},null,8,["name"]),a("span",da,M(L.name),1)]),a("div",ma,[a("div",{class:Oe(["allergy-value",{"drug-name":L.isDrug}])},M(L.displayValue),3)])],2))),128))],2)]))),128))])):(i(),y("div",sa,[n(k,{name:"checkmark-circle-outline",class:"no-allergies-icon"}),h[1]||(h[1]=a("p",null,"No known allergies",-1))]))])}}}),Ft=ce(pa,[["__scopeId","data-v-a62faff9"]]),va=X({name:"VisitHistory",components:{AllergiesListing:Ft,IonIcon:Te},setup(){const t=kt();return{selectedAllergiesList2:q(()=>t.selectedMedicalAllergiesList),alertCircleOutline:Dt,documentTextOutline:gn,femaleOutline:fn,medicalOutline:wt,warningOutline:vn,bodyOutline:at,eyeOutline:dt,nutritionOutline:ut,fitnessOutline:it,pulseOutline:Be,earOutline:ct,happyOutline:rt,manOutline:lt,moveOutline:ot,addOutline:Fe,scanOutline:st}},data(){return{presentingComplaintsWithDuration:[],pastMedicalHistory:[],levelOfConsciousness:{eyeResponse:null,verbalResponse:null,motorResponse:null},pregnancy:{patientPregnant:null,breastFeeding:null},physicalExamCategories:{Eyes:{icon:dt,abnormalities:[],normal:!1},Mouth:{icon:ut,abnormalities:[],normal:!1},Ears:{icon:ct,abnormalities:[],normal:!1},Face:{icon:rt,abnormalities:[],normal:!1},Neck:{icon:lt,abnormalities:[],normal:!1},Chest:{icon:it,abnormalities:[],normal:!1},"Chest Movement":{icon:ot,abnormalities:[],normal:!1},"Heart Sounds":{icon:Be,abnormalities:[],normal:!1},"Breath Sounds":{icon:Fe,abnormalities:[],normal:!1},"Added Breath Sounds":{icon:Fe,abnormalities:[],normal:!1},"Abdominal Inspection":{icon:st,abnormalities:[],normal:!1},"Genital Examination":{icon:at,abnormalities:[],normal:!1}}}},computed:{...Le(ke,["patient"]),hasLevelOfConsciousness(){return this.levelOfConsciousness.eyeResponse||this.levelOfConsciousness.verbalResponse||this.levelOfConsciousness.motorResponse},hasPresentingComplaints(){var t;return((t=this.presentingComplaintsWithDuration)==null?void 0:t.length)>0},hasPregnancyData(){return this.pregnancy.patientPregnant||this.pregnancy.breastFeeding},hasPastMedicalHistory(){var t;return((t=this.uniquePastMedicalHistory)==null?void 0:t.length)>0},hasAllergies(){var t,o;return((o=(t=this.selectedAllergiesList2)==null?void 0:t.filter(r=>r.selected))==null?void 0:o.length)>0},hasPhysicalExam(){return Object.values(this.physicalExamCategories).some(t=>t.abnormalities.length>0||t.normal)},uniquePastMedicalHistory(){return[...new Set(this.pastMedicalHistory)]},uniquePresentingComplaints(){return[...new Set(this.presentingComplaintsWithDuration.map(t=>t.name))]},isMinor(){var t,o;return Ie.getAgeInYears((o=(t=this.patient)==null?void 0:t.personInformation)==null?void 0:o.birthdate)<18},gcsScore(){var B,P,C;if(!this.hasLevelOfConsciousness)return null;const t=this.levelOfConsciousness.eyeResponse,o=this.levelOfConsciousness.motorResponse,r=this.levelOfConsciousness.verbalResponse,c=t&&(B=(this.isMinor?$t:Nt)[t])!=null?B:0,f=o&&(P=(this.isMinor?Mt:Ot)[o])!=null?P:0,d=r&&(C=(this.isMinor?Tt:At)[r])!=null?C:0,_=c+f+d;return"(M ".concat(f," V ").concat(d," E ").concat(c,") ").concat(_,"/").concat(this.isMinor?5:15)}},methods:{async updateData(){var t;(t=this.patient)!=null&&t.patientID&&(await this.loadPresentingComplaints(),await this.loadPastMedicalHistory(),await this.loadLevelOfConsciousness(),await this.loadPregnancyStatus(),await this.loadPhysicalExam())},async loadPresentingComplaints(){try{const t=await z.getObsByEncounterIdAndDate(K.PRESENTING_COMPLAINTS);this.presentingComplaintsWithDuration=[];const o=t.filter(r=>r.concept_name==="Presenting complaint");for(const r of o){const c=t.find(d=>d.concept_id===r.value_coded&&d.concept_name!=="Presenting complaint"),f=await me.getConceptName(r.value_coded);this.presentingComplaintsWithDuration.push({name:f,duration:(c==null?void 0:c.value_text)||"Duration not specified"})}}catch(t){console.error("Error loading presenting complaints:",t)}},async loadPastMedicalHistory(){try{const o=(await z.getObsByEncounterIdAndDate(K.PAST_MEDICAL_HISTORY)).filter(r=>r.concept_name==="Chronic disease");this.pastMedicalHistory=await Promise.all(o.map(async r=>await me.getConceptName(r.value_coded)))}catch(t){console.error("Error loading past medical history:",t)}},async loadLevelOfConsciousness(){try{const t=await z.getObsByEncounterIdAndDate(K.ASSESSMENT);if(t&&Array.isArray(t)){const o=t.find(f=>f.concept_name==="Eye opening response");this.levelOfConsciousness.eyeResponse=o!=null&&o.value_coded?await me.getConceptName(o.value_coded):null;const r=t.find(f=>f.concept_name==="Best verbal response");this.levelOfConsciousness.verbalResponse=r!=null&&r.value_coded?await me.getConceptName(r.value_coded):null;const c=t.find(f=>f.concept_name==="Best motor response");this.levelOfConsciousness.motorResponse=c!=null&&c.value_coded?await me.getConceptName(c.value_coded):null}}catch(t){console.error("Error loading level of consciousness:",t)}},async loadPregnancyStatus(){try{const t=await z.getObsByEncounterIdAndDate(K.PREGNANCY_STATUS);if(t&&Array.isArray(t)){const o=t.find(c=>c.concept_name==="Patient pregnant");this.pregnancy.patientPregnant=o!=null&&o.value_coded?await me.getConceptName(o.value_coded):null;const r=t.find(c=>c.concept_name==="Is patient breast feeding?");this.pregnancy.breastFeeding=r!=null&&r.value_coded?await me.getConceptName(r.value_coded):null}}catch(t){console.error("Error loading pregnancy status:",t)}},async loadPhysicalExam(){var t,o,r;try{const c=await z.getObsByEncounterIdAndDate(K.PHYSICAL_EXAMINATION);Object.values(this.physicalExamCategories).forEach(f=>{f.abnormalities=[],f.normal=!1});for(const f of c){const d=f.concept_name||((r=(o=(t=f.concept)==null?void 0:t.concept_names)==null?void 0:o.find(_=>_.concept_name_type==="FULLY_SPECIFIED"))==null?void 0:r.name);if(d){if(d.includes("normal")||d.includes("Normal")){f.value_coded===1065&&(d.includes("Eyes normal")?this.physicalExamCategories.Eyes.normal=!0:d.includes("Mouth normal")?this.physicalExamCategories.Mouth.normal=!0:d.includes("Ears normal")?this.physicalExamCategories.Ears.normal=!0:d.includes("Face normal")?this.physicalExamCategories.Face.normal=!0:d.includes("Neck normal")?this.physicalExamCategories.Neck.normal=!0:d.includes("Chest inspection normal")?this.physicalExamCategories.Chest.normal=!0:d.includes("Heart sounds normal")?this.physicalExamCategories["Heart Sounds"].normal=!0:d.includes("Breath sounds normal")?this.physicalExamCategories["Breath Sounds"].normal=!0:d.includes("Abdominal inspection normal")?this.physicalExamCategories["Abdominal Inspection"].normal=!0:d.includes("Genital examination normal")&&(this.physicalExamCategories["Genital Examination"].normal=!0));continue}if(f.value_coded){const _=await me.getConceptName(f.value_coded);d.includes("Abnormality for mouth")?this.physicalExamCategories.Mouth.abnormalities.push(_):d.includes("Abnormality for ears")?this.physicalExamCategories.Ears.abnormalities.push(_):d.includes("Abnormality for face")?this.physicalExamCategories.Face.abnormalities.push(_):d.includes("Breath sounds abnormality")?this.physicalExamCategories["Breath Sounds"].abnormalities.push(_):d.includes("Abnormalities when added")?this.physicalExamCategories["Added Breath Sounds"].abnormalities.push(_):d.includes("Chest movements")?this.physicalExamCategories["Chest Movement"].abnormalities.push(_):d.includes("Genital examination abnormality")?this.physicalExamCategories["Genital Examination"].abnormalities.push(_):d.includes("Vulva inspection abnormalities")&&this.physicalExamCategories["Genital Examination"].abnormalities.push(_)}}}}catch(c){console.error("Error loading physical exam:",c)}}},watch:{patient:{async handler(){await this.updateData()},deep:!0}},async mounted(){await this.updateData()}}),fa={class:"visit-container"},ga={class:"visit-sections"},_a={key:0,class:"visit-section"},ha={class:"section-header"},ya={class:"section-content"},ba={key:0,class:"info-item"},Da={class:"info-value"},wa={key:1,class:"info-item"},Ca={class:"info-value"},Sa={key:2,class:"info-item"},Ia={class:"info-value"},ka={key:3,class:"info-item"},Pa={class:"info-value highlight"},Ea={key:1,class:"visit-section"},xa={class:"section-header"},Na={class:"complaints-container"},Aa={class:"complaint-name"},Oa={class:"complaint-duration"},$a={key:2,class:"visit-section"},Ma={class:"section-header"},Ta={class:"section-content"},Fa={key:0,class:"info-item"},La={class:"info-value highlight"},Ba={key:1,class:"info-item"},Ra={class:"info-value highlight"},Va={key:3,class:"visit-section"},Ha={class:"section-header"},Ua={class:"tags-container"},Ga={class:"allergies-section"},Wa={class:"allergies-container"},qa={key:4,class:"visit-section"},za={class:"section-header"},Ya={class:"exam-section"},ja={key:0,class:"exam-category"},Ka={class:"exam-category-header"},Qa={class:"exam-items"},Ja={key:1,class:"exam-item normal"};function Xa(t,o,r,c,f,d){const _=j("ion-icon"),B=j("AllergiesListing");return i(),y("div",fa,[o[11]||(o[11]=a("div",{class:"visit-header"},[a("h5",null,"Patient's Clinical Assessment Summary")],-1)),a("div",ga,[t.hasLevelOfConsciousness?(i(),y("div",_a,[a("div",ha,[n(_,{icon:t.alertCircleOutline,class:"section-icon"},null,8,["icon"]),o[0]||(o[0]=a("h3",null,"Level of Consciousness",-1))]),a("div",ya,[t.levelOfConsciousness.eyeResponse?(i(),y("div",ba,[o[1]||(o[1]=a("span",{class:"info-label"},"Eye Response:",-1)),a("span",Da,M(t.levelOfConsciousness.eyeResponse),1)])):w("",!0),t.levelOfConsciousness.verbalResponse?(i(),y("div",wa,[o[2]||(o[2]=a("span",{class:"info-label"},"Verbal Response:",-1)),a("span",Ca,M(t.levelOfConsciousness.verbalResponse),1)])):w("",!0),t.levelOfConsciousness.motorResponse?(i(),y("div",Sa,[o[3]||(o[3]=a("span",{class:"info-label"},"Motor Response:",-1)),a("span",Ia,M(t.levelOfConsciousness.motorResponse),1)])):w("",!0),t.gcsScore?(i(),y("div",ka,[o[4]||(o[4]=a("span",{class:"info-label"},"Score:",-1)),a("span",Pa,M(t.gcsScore),1)])):w("",!0)])])):w("",!0),t.hasPresentingComplaints?(i(),y("div",Ea,[a("div",xa,[n(_,{icon:t.documentTextOutline,class:"section-icon"},null,8,["icon"]),o[5]||(o[5]=a("h3",null,"Presenting Complaints",-1))]),a("div",Na,[(i(!0),y(Z,null,ue(t.presentingComplaintsWithDuration,(P,C)=>(i(),y("div",{class:"complaint-item",key:C},[a("div",Aa,M(P.name),1),a("div",Oa,M(P.duration),1)]))),128))])])):w("",!0),t.hasPregnancyData?(i(),y("div",$a,[a("div",Ma,[n(_,{icon:t.femaleOutline,class:"section-icon"},null,8,["icon"]),o[6]||(o[6]=a("h3",null,"Pregnancy Status",-1))]),a("div",Ta,[t.pregnancy.patientPregnant?(i(),y("div",Fa,[o[7]||(o[7]=a("span",{class:"info-label"},"Pregnant:",-1)),a("span",La,M(t.pregnancy.patientPregnant),1)])):w("",!0),t.pregnancy.breastFeeding?(i(),y("div",Ba,[o[8]||(o[8]=a("span",{class:"info-label"},"Breastfeeding:",-1)),a("span",Ra,M(t.pregnancy.breastFeeding),1)])):w("",!0)])])):w("",!0),t.hasPastMedicalHistory?(i(),y("div",Va,[a("div",Ha,[n(_,{icon:t.medicalOutline,class:"section-icon"},null,8,["icon"]),o[9]||(o[9]=a("h3",null,"Medical History",-1))]),a("div",Ua,[(i(!0),y(Z,null,ue(t.uniquePastMedicalHistory,(P,C)=>(i(),y("div",{class:"medical-tag",key:C},M(P),1))),128))])])):w("",!0),a("div",Ga,[a("div",Wa,[n(B)])]),t.hasPhysicalExam?(i(),y("div",qa,[a("div",za,[n(_,{icon:t.bodyOutline,class:"section-icon"},null,8,["icon"]),o[10]||(o[10]=a("h3",null,"Physical Examination",-1))]),a("div",Ya,[(i(!0),y(Z,null,ue(t.physicalExamCategories,(P,C)=>(i(),y(Z,{key:C},[P.abnormalities.length>0||P.normal?(i(),y("div",ja,[a("div",Ka,[n(_,{icon:P.icon},null,8,["icon"]),a("h4",null,M(C),1)]),a("div",Qa,[P.abnormalities.length>0?(i(!0),y(Z,{key:0},ue(P.abnormalities,(N,I)=>(i(),y("div",{class:"exam-item",key:I},M(N),1))),128)):(i(),y("div",Ja," Normal examination "))])])):w("",!0)],64))),128))])])):w("",!0)])])}const Za=ce(va,[["render",Xa],["__scopeId","data-v-b2ab1221"]]),es={class:"modal_wrapper"},ts=X({__name:"LevelOfConsciousness",setup(t,{expose:o}){var P,C;const r=ke(),{patient:c}=Se(r),f=s(Ie.getAgeInYears((C=(P=c==null?void 0:c.value)==null?void 0:P.personInformation)==null?void 0:C.birthdate)),d=s(null),_=q(()=>{var L,T,b,E;const N=((L=d.value)==null?void 0:L.getFormValues())||{},I=N["Eye opening response"]||"",U=N["Best motor response"]||"",l=N["Best verbal response"]||"",h=f.value<18,k=(T=(h?$t:Nt)[I])!=null?T:0,S=(b=(h?Mt:Ot)[U])!=null?b:0,$=(E=(h?Tt:At)[l])!=null?E:0,A=k+S+$;return"(M ".concat(S," V ").concat($," E ").concat(k,") ").concat(A,"/").concat(h?5:15)});return o({onSubmit:async()=>{var I;if(!d.value){console.error("Form reference is not available");return}const N=((I=d.value)==null?void 0:I.getFormValues())||{};N["Eye opening response"]||N["Best motor response"]||N["Best verbal response"]?(await z.buildAddObsToEncounterPatient(N,K.ASSESSMENT),d.value.resetForm(),Ne("Level of Consciousness saved successfully")):le(" No level of consciousness data to save ")}}),(N,I)=>(i(),y("div",es,[f.value<18?(i(),F(Re,{key:0,formData:u(na),ref_key:"formRef",ref:d},null,8,["formData"])):(i(),F(Re,{key:1,formData:u(ta),ref_key:"formRef",ref:d},null,8,["formData"])),a("h5",null,M(_.value),1)]))}}),ns={class:"modal_wrapper"},as=X({__name:"PregnancyBreastfeeding",setup(t,{expose:o}){const r=Sn(),{pregnancy:c}=Se(r),f=()=>{};return o({onSubmit:async()=>{const _=await Qe(c.value);_.length>0?(await z.addObsToEncounterPatient(_,K.PREGNANCY_STATUS),Ne("Pregnancy status saved successfully")):le("No pregnancy status data to save ")}}),(_,B)=>(i(),y("div",ns,[n(Ke,{contentData:u(c),"onUpdate:inputValue":f},null,8,["contentData"])]))}}),ss={class:"modal_wrapper"},os={class:"uniform_columns"},is=X({__name:"PastMedicalHistory",setup(t,{expose:o}){const r=In(),{pastMedicalHistory:c}=Se(r),f=s([]);be(()=>{f.value=r.getInitial(),d()}),re(c,()=>{d()},{deep:!0});const d=()=>{var N;const C=["TB","Chronic Obstructive Pulmonary Disease (COPD)","Asthma","Epilepsy","Previous stroke","Peptic Ulcer Disease (PUD)","Mental disorder","Bleeding disorders","Hypertension","HIV Positive","Diabetes Mellitus"];(N=kn(c.value,"None"))!=null&&N.checked?C.forEach(I=>{_e(c.value,"TB treatment","displayNone",!0),we(c.value,"TB drugs","displayNone",!0),we(c.value,"TB drug start date","displayNone",!0),_e(c.value,"Hypertension medication","displayNone",!0),we(c.value,"Current hypertension treatment regimen","displayNone",!0),_e(c.value,"HIV status","displayNone",!0),we(c.value,"ARV start date","displayNone",!0),_e(c.value,"Diabetes","displayNone",!0),_e(c.value,"Controlled by","displayNone",!0),he(c.value,I,"checked",!1),he(c.value,I,"disabled",!0)}):C.forEach(I=>{he(c.value,I,"disabled",!1)})},_=C=>{we(c.value,"TB drugs","popOverData",{filterData:!0,data:[{name:"Auramine 'O' (C.I. 41000) 50g"},{name:"Bedaquilline 100mg"},{name:"Clofazimine 100mg"},{name:"Clofazimine 50mg"},{name:"Cycloserine 125mg"},{name:"Cycloserine 250mg"},{name:"Delamanid 50mg"},{name:"Ethambutol 100mg"},{name:"Ethambutol 400mg"},{name:"Ethionamide 250mg"},{name:"Isoniazid 100mg "},{name:"Isoniazid 300mg"},{name:"Isoniazid / Rifapentine 300mg / 300mg"},{name:"Levofloxacin 100mg"},{name:"Levofloxacin 250mg"},{name:"Linezolid 600mg"},{name:"Moxifloxacin 400mg"},{name:"Pyrazinamide 400mg"},{name:"Rifabutin 150mg Capsules"},{name:"Rifampicin 150mg/isoniazid 75mg"},{name:"Rifampicin 75mg+INH 50mg dispersible"},{name:"Rifampicin 75mg+INH 50mg+Pyrazinamide 150mg dispersible"},{name:"Rifampicin150mg/Isoniazid75mg/Pyrazinamide 400mg/Ethambutol"}]}),we(c.value,"Current hypertension treatment regimen","popOverData",{filterData:!0,data:[{name:"Captopril 12.5mg"},{name:"Aspirin 75mg"},{name:"Hydrochlorothiazide 25mg"},{name:"Enalapril Meleate 5mg"},{name:"Enalapril Maleate 10mg"}]})},B=async()=>[...await Et(c.value),...await Qe(c.value),...await xt(c.value)];return o({onSubmit:async()=>{const C=await B();if(C.length===0){le("No past medical history data to save");return}await z.addObsToEncounterPatient(C,K.PAST_MEDICAL_HISTORY),Ne("Past medical history saved successful")}}),(C,N)=>(i(),y("div",ss,[a("div",os,[n(Ke,{contentData:u(c),initialData:f.value,"onUpdate:inputValue":_,"onUpdate:selected":_},null,8,["contentData","initialData"])])]))}}),ls=ce(is,[["__scopeId","data-v-49fdce72"]]),rs={class:"container"},cs=X({__name:"PhysicalExamination",setup(t,{expose:o}){const r=Pn(),c=ke(),{physicalExam:f}=Se(r),{patient:d}=Se(c),_=s([]);be(()=>{_.value=r.getInitial(),B(),P()}),re(f,()=>{B(),P()},{deep:!0});const B=()=>{En(f.value,"Physical examination")=="No"?_e(f.value,"Reason why physical examination not done","displayNone",!1):(_e(f.value,"Reason why physical examination not done","displayNone",!0),_e(f.value,"Reason why physical examination not done","selectedValue",""))},P=()=>{var U,l;const I=(l=(U=d.value)==null?void 0:U.personInformation)==null?void 0:l.gender;I=="M"&&(he(f.value,"Vulva examination","disabled",!0),he(f.value,"Visible bleeding","disabled",!0)),I=="F"&&(he(f.value,"Urethral meatus abnormal","disabled",!0),he(f.value,"Scrotal swelling","disabled",!0),he(f.value,"Tastes swelling","disabled",!0))},C=async()=>[...await Et(f.value),...await Qe(f.value),...await xt(f.value)];return o({onSubmit:async()=>{const I=await C();if(I.length===0){le("No physical examination data to save");return}await z.addObsToEncounterPatient(I,K.PHYSICAL_EXAMINATION),Ne("Physical examination saved successful")}}),(I,U)=>{const l=j("ion-card-content"),h=j("ion-card");return i(),y("div",rs,[n(h,{class:"section"},{default:m(()=>[n(l,null,{default:m(()=>[n(Ke,{contentData:u(f),initialData:_.value},null,8,["contentData","initialData"])]),_:1})]),_:1})])}}}),us=ce(cs,[["__scopeId","data-v-96d0ce9f"]]),ds={key:0},ms={class:"ion-padding",slot:"content"},ps={class:"nav-buttons"},vs={class:"ion-padding",slot:"content"},fs={class:"nav-buttons"},gs={class:"ion-padding",slot:"content"},_s={class:"nav-buttons"},hs={class:"ion-padding",slot:"content"},ys={class:"nav-buttons"},bs={class:"ion-padding",slot:"content"},Ds={class:"nav-buttons"},ws={class:"ion-padding",slot:"content"},Cs={class:"nav-buttons"},Ss=X({__name:"ClinicalAssessment",setup(t,{expose:o}){const r=s("loc"),c=s(0),f=s(!1),d=s(!1),_=new xn,B=ke(),P=()=>{c.value++},C=s(null),N=s(null),I=s(null),U=s(null),l=s(null),h=s(null),k=[{id:"loc",label:"Level of consciousness",show:!0},{id:"pc",label:"Presenting complaints",show:!0},{id:"pbs",label:"Pregnancy and breastfeeding status",show:()=>_.isChildBearing()},{id:"pmh",label:"Past medical history",show:!0},{id:"al",label:"Allergies",show:!0},{id:"pe",label:"Physical examination",show:!0}];async function S(){const p=ye.getSessionDate(),e=[K.ASSESSMENT,K.PRESENTING_COMPLAINTS,K.PAST_MEDICAL_HISTORY,K.PHYSICAL_EXAMINATION,K.PREGNANCY_STATUS];let x=!1;for(const O of e)try{const Q=await z.getObsByEncounterIdAndDate(O);if(Q&&Q.some(ee=>ee.obs_datetime?Ie.toStandardHisFormat(ee.obs_datetime)===Ie.toStandardHisFormat(p):!1)){x=!0;break}}catch(Q){console.error("Error checking observations for encounter type ".concat(O,":"),Q)}f.value=x}be(S),re(()=>B.patient,S);const $=q(()=>f.value),A=q(()=>k.filter(p=>typeof p.show=="function"?p.show():p.show)),L=p=>{const e=k.find(x=>x.id===p);return e?typeof e.show=="function"?e.show():e.show:!1},T=p=>A.value.findIndex(e=>e.id===p),b=p=>{const e=T(p);e>0&&(r.value=A.value[e-1].id)},E=p=>{const x=T(p)+1;x<A.value.length?r.value=A.value[x].id:(r.value="",P())};return o({onSubmit:async()=>{const p=[{ref:C,name:"PresentingComplaints"},{ref:N,name:"LevelOfConsciousness"},{ref:I,name:"PastMedicalHistory"},{ref:l,name:"PregnancyBreastfeeding"},{ref:h,name:"PhysicalExamination"}];for(const e of p)if(e.ref.value&&typeof e.ref.value.onSubmit=="function")try{await e.ref.value.onSubmit()}catch(x){console.error("Error calling ".concat(e.name," onSubmit:"),x)}else console.log("".concat(e.name," component ref not available or no onSubmit method"))}}),(p,e)=>{const x=j("ion-toggle");return i(),y(Z,null,[$.value?(i(),y("div",ds,[n(u(J),{lines:"none"},{default:m(()=>[n(u(ie),null,{default:m(()=>[...e[14]||(e[14]=[V("Switch between Capture Mode and Summary Mode",-1)])]),_:1}),n(x,{checked:d.value,onIonChange:e[0]||(e[0]=O=>d.value=O.detail.checked),slot:"end"},null,8,["checked"])]),_:1}),d.value?w("",!0):(i(),F(Za,{key:c.value}))])):w("",!0),!$.value||d.value?(i(),F(u(_n),{key:1,style:{width:"100%"}},{default:m(()=>[n(u(je),{value:r.value,"onUpdate:value":e[13]||(e[13]=O=>r.value=O),ref:"accordionGroup",class:"previousView"},{default:m(()=>[L("loc")?(i(),F(u(fe),{key:0,value:"loc",class:"_card"},{default:m(()=>[n(u(J),{slot:"header",color:"light"},{default:m(()=>[n(u(ie),{class:"previousLabel"},{default:m(()=>[...e[15]||(e[15]=[V("Level of consciousness",-1)])]),_:1})]),_:1}),a("div",ms,[n(ts,{"is-active":r.value==="loc",ref_key:"levelOfConsciousnessFormRef",ref:N,onDataSaved:P},null,8,["is-active"]),a("div",ps,[T("loc")>0?(i(),F(u(se),{key:0,fill:"outline",onClick:e[1]||(e[1]=oe(O=>b("loc"),["stop"]))},{default:m(()=>[...e[16]||(e[16]=[V(" Back ",-1)])]),_:1})):w("",!0),n(u(se),{fill:"outline",onClick:e[2]||(e[2]=oe(O=>E("loc"),["stop"]))},{default:m(()=>[V(M(T("loc")<A.value.length-1?"Next":"Finish"),1)]),_:1})])])]),_:1})):w("",!0),L("pc")?(i(),F(u(fe),{key:1,value:"pc",class:"_card"},{default:m(()=>[n(u(J),{slot:"header",color:"light"},{default:m(()=>[n(u(ie),{class:"previousLabel"},{default:m(()=>[...e[17]||(e[17]=[V("Presenting complaints",-1)])]),_:1})]),_:1}),a("div",vs,[n(ea,{"is-active":r.value==="pc",onDataSaved:P,ref_key:"presentingComplaintsFormRef",ref:C},null,8,["is-active"]),a("div",fs,[T("pc")>0?(i(),F(u(se),{key:0,fill:"outline",onClick:e[3]||(e[3]=oe(O=>b("pc"),["stop"]))},{default:m(()=>[...e[18]||(e[18]=[V(" Back ",-1)])]),_:1})):w("",!0),n(u(se),{fill:"outline",onClick:e[4]||(e[4]=oe(O=>E("pc"),["stop"]))},{default:m(()=>[V(M(T("pc")<A.value.length-1?"Next":"Finish"),1)]),_:1})])])]),_:1})):w("",!0),L("pbs")?(i(),F(u(fe),{key:2,value:"pbs",class:"_card"},{default:m(()=>[n(u(J),{slot:"header",color:"light"},{default:m(()=>[n(u(ie),{class:"previousLabel"},{default:m(()=>[...e[19]||(e[19]=[V("Pregnancy and breastfeeding status",-1)])]),_:1})]),_:1}),a("div",gs,[n(as,{"is-active":r.value==="pbs",ref_key:"pregnancyBreastfeedingFormRef",ref:l,onDataSaved:P},null,8,["is-active"]),a("div",_s,[T("pbs")>0?(i(),F(u(se),{key:0,fill:"outline",onClick:e[5]||(e[5]=oe(O=>b("pbs"),["stop"]))},{default:m(()=>[...e[20]||(e[20]=[V(" Back ",-1)])]),_:1})):w("",!0),n(u(se),{fill:"outline",onClick:e[6]||(e[6]=oe(O=>E("pbs"),["stop"]))},{default:m(()=>[V(M(T("pbs")<A.value.length-1?"Next":"Finish"),1)]),_:1})])])]),_:1})):w("",!0),L("pmh")?(i(),F(u(fe),{key:3,value:"pmh",class:"_card"},{default:m(()=>[n(u(J),{slot:"header",color:"light"},{default:m(()=>[n(u(ie),{class:"previousLabel"},{default:m(()=>[...e[21]||(e[21]=[V("Past medical history",-1)])]),_:1})]),_:1}),a("div",hs,[n(ls,{"is-active":r.value==="pmh",ref_key:"pastMedicalHistoryFormRef",ref:I,onDataSaved:P},null,8,["is-active"]),a("div",ys,[T("pmh")>0?(i(),F(u(se),{key:0,fill:"outline",onClick:e[7]||(e[7]=oe(O=>b("pmh"),["stop"]))},{default:m(()=>[...e[22]||(e[22]=[V(" Back ",-1)])]),_:1})):w("",!0),n(u(se),{fill:"outline",onClick:e[8]||(e[8]=oe(O=>E("pmh"),["stop"]))},{default:m(()=>[V(M(T("pmh")<A.value.length-1?"Next":"Finish"),1)]),_:1})])])]),_:1})):w("",!0),L("al")?(i(),F(u(fe),{key:4,value:"al",class:"_card"},{default:m(()=>[n(u(J),{slot:"header",color:"light"},{default:m(()=>[n(u(ie),{class:"previousLabel"},{default:m(()=>[...e[23]||(e[23]=[V("Allergies",-1)])]),_:1})]),_:1}),a("div",bs,[n(Fn,{"is-active":r.value==="al",ref_key:"allergiesFormRef",ref:U,onDataSaved:P},null,8,["is-active"]),a("div",Ds,[T("al")>0?(i(),F(u(se),{key:0,fill:"outline",onClick:e[9]||(e[9]=oe(O=>b("al"),["stop"]))},{default:m(()=>[...e[24]||(e[24]=[V(" Back ",-1)])]),_:1})):w("",!0),n(u(se),{fill:"outline",onClick:e[10]||(e[10]=oe(O=>E("al"),["stop"]))},{default:m(()=>[V(M(T("al")<A.value.length-1?"Next":"Finish"),1)]),_:1})])])]),_:1})):w("",!0),L("pe")?(i(),F(u(fe),{key:5,value:"pe",class:"_card"},{default:m(()=>[n(u(J),{slot:"header",color:"light"},{default:m(()=>[n(u(ie),{class:"previousLabel"},{default:m(()=>[...e[25]||(e[25]=[V("Physical examination",-1)])]),_:1})]),_:1}),a("div",ws,[n(us,{"is-active":r.value==="pe",ref_key:"physicalExaminationFormRef",ref:h,onDataSaved:P},null,8,["is-active"]),a("div",Cs,[T("pe")>0?(i(),F(u(se),{key:0,fill:"outline",onClick:e[11]||(e[11]=oe(O=>b("pe"),["stop"]))},{default:m(()=>[...e[26]||(e[26]=[V(" Back ",-1)])]),_:1})):w("",!0),n(u(se),{fill:"outline",onClick:e[12]||(e[12]=oe(O=>E("pe"),["stop"]))},{default:m(()=>[V(M(T("pe")<A.value.length-1?"Next":"Finish"),1)]),_:1})])])]),_:1})):w("",!0)]),_:1},8,["value"])]),_:1})):w("",!0)],64)}}}),ko=ce(Ss,[["__scopeId","data-v-597092a6"]]);class Is extends pt{constructor(o,r){super(o,8,r)}static async getDiagnosis(o="",r=1,c=10){const f=await me.getConceptID("Qech outpatient diagnosis list");return pt.getJson("diagnosis",{id:f,name:o,page:r,page_size:c})}}const ks=X({name:"Menu",components:{IonContent:yt,IonHeader:ht,IonItem:J,IonList:Ve,IonMenu:_t,IonTitle:gt,IonToolbar:ft,List:He},computed:{...Le(ke,["patient"])},data(){return{valueNumericArray:[],obsDatetime:[],graphIcon:St(["#006401"]),listIcon:Ct(["#636363"]),displayGraph:!0,orders:[],height:[],BMI:[],iconBg:{},activeWeight:[],activeHeight:[],activeBMI:[],list:[],series:[{name:"",data:[]}]}},setup(){return{checkmark:bt,pulseOutline:Be}},async mounted(){const t=await z.getAll(this.patient.patientID,"Primary diagnosis"),o=await z.getAll(this.patient.patientID,"Secondary diagnosis"),r=await z.getAll(this.patient.patientID,"Attempted/ Differential diagnosis"),c=[...t||[],...o||[],...r||[]],f=ge.isEmpty(c)?[]:Promise.all(c.map(async d=>({name:await z.getConceptName(d.value_coded),obs_date:d.obs_datetime})));this.setListData(await f)},methods:{dismiss(){hn.dismiss()},handleIcon(){},setActivClass(t){this.activeHeight="",this.activeBMI="",this.activeWeight="",t=="height"?this.activeHeight="_active":t=="weight"?this.activeWeight="_active":t=="BMI"&&(this.activeBMI="_active")},setListData(t){this.list=[],this.list.push({actionBtn:!1,class:"col_background",header:!0,minHeight:"--min-height: 25px;",display:["Date","Diagnosis","Notes"]}),t.forEach(o=>{this.list.push({actionBtn:!1,minHeight:"--min-height: 25px;",class:"col_background",display:[Ie.toStandardHisFormat(o.obs_date),o.name,""]})})}}}),Ps={class:"modal_wrapper"};function Es(t,o,r,c,f,d){const _=j("list");return i(),y("div",Ps,[a("div",null,[n(_,{listData:t.list},null,8,["listData"])])])}const xs=ce(ks,[["render",Es],["__scopeId","data-v-88580898"]]),Ns={class:"custom_card",style:{padding:"10px"}},As={key:0},Os={key:0,style:{color:"red","margin-top":"10px",background:"lightgoldenrodyellow"}},$s={class:"ion-padding",slot:"content"},Ms=X({__name:"OPDDiagnosis",setup(t,{expose:o}){const r=xe,c=s(!0),f=s(!1),d=s(!0),_=s(!1),B=s(!0),P=s(""),C=s(""),N=s([]),I=s([]),U=s(),l=s(null);Nn();const h=q(()=>I.value.some(p=>p.data.concept_id===6542));re(I,()=>{E()},{deep:!0});const k=q(()=>[{name:"primaryDiagnosis",header:"Primary Diagnosis",componentType:"multiSelectInputField",options:N.value,icon:r.search,onSearchChange:T,validation:$e.required},{componentType:"checkboxField",label:"Secondary Diagnosis",type:"single",grid:{s:"6"},name:"secondaryDiagnosisCheckbox"},{componentType:"checkboxField",label:"Differential Diagnosis",type:"single",grid:{s:"6"},name:"differentialDiagnosisCheckbox"},{componentType:"Dashes"},{name:"secondaryDiagnosis",header:"Secondary Diagnosis",componentType:"multiSelectInputField",isMultiple:!0,options:N.value,icon:r.search,condition:p=>p==null?void 0:p.secondaryDiagnosisCheckbox,onSearchChange:T,validation:(p,e)=>S(e,"secondaryDiagnosis")},{name:"differentialDiagnosis",header:"Differential Diagnosis",componentType:"multiSelectInputField",options:N.value,icon:r.search,isMultiple:!0,condition:p=>p==null?void 0:p.differentialDiagnosisCheckbox,onSearchChange:T,validation:(p,e)=>S(e,"differentialDiagnosis")}]),S=(p,e)=>{var ae,W,De;if(!p)return null;const x=(ae=p.primaryDiagnosis)==null?void 0:ae.name,O=((W=p.secondaryDiagnosis)==null?void 0:W.map(de=>de.name))||[],Q=((De=p.differentialDiagnosis)==null?void 0:De.map(de=>de.name))||[];if(e==="secondaryDiagnosis"&&O.includes(x)||e==="differentialDiagnosis"&&Q.includes(x))return"".concat(x," is already the primary diagnosis");const ee=O.find(de=>Q.includes(de));return ee?"".concat(ee," cannot be both secondary and differential"):null},$=()=>{C.value="",P.value="",c.value=!1,B.value=!1,f.value=!0},A=async()=>{var p;((p=l.value)==null?void 0:p.validateForm())==null&&(L(),f.value=!1,_.value=!0,B.value=!0,d.value=!1)},L=()=>{var ae;const p=[],e=I.value.map(W=>W.name),x=((ae=l.value)==null?void 0:ae.getFormValues())||{},O=x.primaryDiagnosis||[],Q=x.secondaryDiagnosis||[],ee=x.differentialDiagnosis||[];if(O.name&&!e.includes(O.name))if(!I.value.some(De=>De.data.concept_id===6542))p.push({actionBtn:!0,btn:["delete"],name:O.name,id:O.concept_id,display:[O.name,"Primary diagnosis"],data:{concept_id:6542,value_coded:O.concept_id,obs_datetime:ye.getSessionDate()}});else return An("Only one primary diagnosis is allowed"),!1;return Q&&Q.forEach(W=>{e.includes(W.name)||p.push({actionBtn:!0,btn:["delete"],name:W.name,id:W.concept_id,display:[W.name,"Secondary diagnosis"],data:{concept_id:6543,value_coded:W.concept_id,obs_datetime:ye.getSessionDate()}})}),ee&&ee.forEach(W=>{e.includes(W.name)||p.push({actionBtn:!0,btn:["delete"],name:W.name,id:W.concept_id,display:[W.name,"Differential diagnosis"],data:{concept_id:10201,value_coded:W.concept_id,obs_datetime:ye.getSessionDate()}})}),p.length>0&&(I.value=[...I.value,...p]),!0},T=async p=>{const e=p.trim().toLowerCase()||"";return N.value=await Is.getDiagnosis(e,1,15),N.value},b=p=>{const e=I.value,x=p.name,O=e.filter(Q=>Q.display[0]!==x);I.value=O},E=()=>{I.value.length>0?(_.value=!0,c.value=!1):f.value||(c.value=!0),B.value=!h.value},R=async()=>{if(I.value.length<=0){le("Diagnosis not saved");return}const p=I.value.flatMap(x=>x.data);if(p.length<=0)return le("Diagnosis not saved");const e=await z.addObsToEncounter(p,K.DIAGNOSIS);await z.mergeObsToPatient(e),Ne("Diagnosis saved successful"),I.value=[]};return be(async()=>{E(),await T("")}),o({onSubmit:R}),(p,e)=>{const x=j("ion-row"),O=j("ion-label"),Q=j("ion-accordion"),ee=j("ion-accordion-group");return i(),y(Z,null,[a("div",Ns,[n(Pt,{status:c.value,content:"No Diagnosis added"},null,8,["status"]),_.value?(i(),y("span",As,[n(He,{listData:I.value,"onClicked:delete":b},null,8,["listData"]),h.value?(i(),y("div",Os," In order to update the diagnosis list, please remove/delete the primary diagnosis only and then re-add or change it along with the secondary and differential diagnoses. ")):w("",!0)])):w("",!0),f.value?(i(),F(x,{key:1},{default:m(()=>{var ae;return[a("div",null,[n(Re,{formData:k.value,ref_key:"formRef",ref:l},null,8,["formData"])]),a("div",null,[n(Ce,{fill:"clear",icon:u(r).plus,iconSlot:"icon-only","onClicked:btn":e[0]||(e[0]=W=>A()),name:"Save",disabled:(ae=l.value)==null?void 0:ae.validateForm(),class:"ion-margin-top"},null,8,["icon","disabled"])])]}),_:1})):w("",!0),B.value?(i(),F(x,{key:2,style:{"margin-top":"10px"}},{default:m(()=>[n(Ce,{fill:"clear",icon:u(r).plus,iconSlot:"icon-only","onClicked:btn":e[1]||(e[1]=ae=>$()),name:"Add new Diagnosis"},null,8,["icon"])]),_:1})):w("",!0)]),n(x,null,{default:m(()=>[n(ee,{ref_key:"accordionGroup",ref:U,class:"previousView"},{default:m(()=>[n(Q,{value:"first","toggle-icon-slot":"start",class:"custom_card"},{default:m(()=>[n(u(J),{slot:"header",color:"light"},{default:m(()=>[n(O,{class:"previousLabel"},{default:m(()=>[...e[2]||(e[2]=[V("Previous Diagnosis",-1)])]),_:1})]),_:1}),a("div",$s,[n(xs)])]),_:1})]),_:1},512)]),_:1})],64)}}}),Po=ce(Ms,[["__scopeId","data-v-a440f286"]]),Ts={class:"allergies-section"},Fs={class:"allergies-container"},Ls={class:"medication-section"},Bs={class:"medication-content"},Rs={key:0,class:"add-medication-form"},Vs={class:"form-group"},Hs={class:"option-label"},Us={key:0,class:"error-message"},Gs={class:"form-row"},Ws={class:"form-group"},qs={key:0,class:"error-message"},zs={class:"form-group"},Ys={key:0,class:"error-message"},js={class:"form-group"},Ks={key:0,class:"error-message"},Qs={class:"action-buttons"},Js={class:"notes-section"},Xs={class:"notes-content"},Zs={class:"notes-input-container"},eo={class:"ion-padding",slot:"content"},to={class:"notes-timeline"},no={class:"note-date"},ao={class:"note-content"},so={class:"ion-padding",slot:"content"},oo={class:"note-date"},io={class:"note-content"},lo=X({watch:{},name:"xxxComponent"}),ro=X({...lo,setup(t){const o=xe,r=Vn,c=s(!1),f=s(!1),d=s(!0),_=s(0),B=s(""),P=s(!1),C=s(""),N=s(!1),I=s(),U=s(!1),l=s(""),h=s(""),k=s(""),S=s(""),$=s(""),A=s("");s(!1);const L="Add new medication",T="clear";s("Show more medications");const b=Ee(),E=kt(),R=q(()=>E.selectedMedicalAllergiesList),p=q(()=>b.selectedMedicalDrugsList),e=q(()=>b.partialOPDdrugList),x=q(()=>b.nonPharmalogicalTherapyAndOtherNotes),O=["first","second","third"],Q=s(),ee=s(),ae=s(),W=s(!1),De=s(!1);s(!1);const de=s("Show more notes");s("Show more allergies");const Lt=s(),Bt=s(),Pe=s(),Me=q(()=>b.editingDrugItem),Rt=s("Select a route"),Ue=s(!1),Vt=s("Select frequency"),Ge=s(!1),Ht=s("Select drug"),We=s(!1),te=s(),ne=s(),pe=s(),Ae=s([]),Ut=s([{concept_id:11797,name:"Buccal",concept_name_id:null,id:1769},{concept_id:11794,name:"Intradermal",concept_name_id:null,id:6284},{concept_id:11795,name:"Intramuscular (IM)",concept_name_id:null,id:6285},{concept_id:11799,name:"Intraosseous",concept_name_id:null,id:6286},{concept_id:11793,name:"Intravenous (IV)",concept_name_id:null,id:6295},{concept_id:3327,name:"Oral",concept_name_id:null,id:8686},{concept_id:11800,name:"Other method of prescription",concept_name_id:null,id:8920},{concept_id:11792,name:"Rectally",concept_name_id:null,id:10785},{concept_id:11798,name:"Subcutaneous",concept_name_id:null,id:12342},{concept_id:11796,name:"Sublingual",concept_name_id:null,id:12344},{concept_id:11792,name:"Rectally",concept_name_id:null,id:14078},{concept_id:11793,name:"Intravenous (IV)",concept_name_id:null,id:14079},{concept_id:11794,name:"Intradermal",concept_name_id:null,id:14080},{concept_id:11795,name:"Intramuscular (IM)",concept_name_id:null,id:14081},{concept_id:11796,name:"Sublingual",concept_name_id:null,id:14082},{concept_id:11797,name:"Buccal",concept_name_id:null,id:14083},{concept_id:11798,name:"Subcutaneous",concept_name_id:null,id:14084},{concept_id:11799,name:"Intraosseous",concept_name_id:null,id:14085},{concept_id:11800,name:"Other method of prescription",concept_name_id:null,id:14086}]),Gt=q(()=>Ae.value.length?Ae.value:Ut.value);function Wt(g){te.value=g}async function qt(){return await Hn()}async function zt(g=5,v=1e3){let D=0;for(;D<g&&(Ae.value=await qt(),!(Ae.value.length>0));)D++,await new Promise(G=>setTimeout(G,v));Ae.value.length===0&&console.warn("Failed to fetch route list after maximum retries.")}be(async()=>{const g=new Ln,{previousDrugPrescriptions:v,previousClinicalNotes:D,previousDrugAllergies:G}=await g.getPatientEncounters();Q.value=v,ee.value=Object.entries(D)[0];const[,...H]=Object.entries(D);ae.value=H,Lt.value=Object.entries(G)[0];const[,...Y]=Object.entries(G);Bt.value=Y,await zt()}),re(()=>l.value,async g=>{Je()}),re(()=>h.value,async g=>{Jt()}),re(()=>k.value,async g=>{Xe()});function Yt(){if(ge.isEmpty(te.value)==!0)return Ue.value=!0,!1;if(ge.isEmpty(te.value)==!1)return Ue.value=!1,!0}function jt(){if(ge.isEmpty(ne.value)==!0)return Ge.value=!0,!1;if(ge.isEmpty(ne.value)==!1)return Ge.value=!1,!0}function Kt(){if(ge.isEmpty(pe.value)==!0)return We.value=!0,!1;if(ge.isEmpty(pe.value)==!1)return We.value=!1,!0}function Qt(){d.value=!d.value,c.value=!0,N.value=!1,U.value=!1}async function Je(){const g=await tn();return console.log({drugNameExists:g}),g?P.value=!1:(B.value="please select a valid drug name",P.value=!0),P.value}async function Jt(){return tt(h.value)?N.value=!1:(C.value="please enter a number",N.value=!0),N.value}async function Xe(){return tt(k.value)?U.value=!1:(I.value="please enter a number",U.value=!0),U.value}async function Ze(){const g=await Je(),v=await Xe(),D=jt(),G=Kt(),H=Yt();return!g&&!v&&D==!0&&G==!0&&H==!0}function Xt(g){ne.value=g}async function et(){const g=()=>Pe.value.dose_strength!=null&&Pe.value.dose_strength?Math.trunc(Pe.value.dose_strength):1;if(Me.value!==null){if(!await Ze()){le("Please enter correct data values",4e3);return}const D=ye.getSessionDate(),G=nt(D,parseInt(k.value));let H=!1;qe(Pe.value)==!0&&(H=!0);const Y={drugName:l.value,dose:g(),frequency:ne.value.label,frequency_code:ne.value.code,duration:k.value,prescription:G,drug_id:A.value,units:$.value,route_concept_id:te.value.concept_id,route_name:te.value.name,highlightbackground:H},ze=Ee();console.log(ze.setSelectedMedicalDrugsList([Y])),ze.editingDrugItem=null,d.value=!0}else{if(!await Ze()){le("Please enter correct data values",4e3);return}un();const D=ye.getSessionDate(),G=nt(D,parseInt(k.value));let H=!1;qe(Pe.value)==!0&&(H=!0);const Y={drugName:l.value,dose:g(),frequency:ne.value.label,frequency_code:ne.value.code,duration:k.value,prescription:G,drug_id:A.value,units:$.value,route_concept_id:te.value.concept_id,route_name:te.value.name,highlightbackground:H};Ee().setSelectedMedicalDrugsList([Y])}A.value="",l.value="",h.value="",ne.value=null,k.value="",S.value="",_.value++,pe.value=null,te.value=null}async function Zt(g){const v=g,H=await vt.getOfflineOPDDrugs({name:v,page:1,page_size:10});H.map(Y=>({label:Y.name,value:Y.name,other:Y})),b.setPartialOPDdrugList(H)}async function en(g){let v;g.target===void 0?v=g:v=g.target.value;const H=await vt.getOPDDrugs({name:encodeURIComponent(v),page:1,page_size:10});return H.map(Y=>({label:Y.name,value:Y.name,other:Y})),H}function qe(g){const v=[];return R.value.forEach(G=>{G.selected&&v.push(G.concept_id)}),nn([g],v)==!0?(le("Client is allergic to the selected medication",4e6),!0):!1}async function tn(){return(await en(l.value)).length>0?l.value.length!=0:!1}function nn(g,v){try{return g.some(D=>v.includes(D.concept_id))}catch(D){return!1}}function an(g){g&&(l.value=g.name,A.value=g.drug_id,$.value=g.units,Pe.value=g,qe(g))}function sn(g){const v=p.value[g],D=Ee();D.removeDrugById(v.drug_id),D.editingDrugItem=v,A.value="",l.value="",h.value="",ne.value=null,k.value="",S.value="",pe.value=null,te.value=null,A.value=v.drug_id,l.value=v.drugName,h.value=v.dose,ne.value={label:v.frequency,code:v.frequency_code},k.value=v.duration,S.value=v.prescription;const G=e.value.find(H=>H.name===v.drugName);G&&(pe.value=G),te.value={concept_id:v.route_concept_id,name:v.route_name},d.value=!1,_.value++}function on(){if(Me.value!==null){A.value="",l.value="",h.value="",ne.value=null,k.value="",S.value="",pe.value=null,te.value=null;const g=Ee();g.setSelectedMedicalDrugsList([Me.value]),g.editingDrugItem=null}d.value=!0,_.value++}function ln(g){p.value.splice(g,1),_.value++,le("you have removed a drug from list",6e3)}function rn(g){let v=g.target.value;cn(v)}function cn(g){Ee().setNonPharmalogicalTherapyAndOtherNotes(g)}function tt(g){return/^[0-9]+$/.test(g)}function nt(g,v){const D=new Date(g);D.setDate(D.getDate()+v);const G=D.getFullYear(),H=String(D.getMonth()+1).padStart(2,"0"),Y=String(D.getDate()).padStart(2,"0");return"".concat(G,"-").concat(H,"-").concat(Y)}function un(){c.value=!1,f.value=!0,d.value=!0}function dn(g){O.filter(D=>D!==g.detail.value);const v=g.detail.value;v!==void 0?v=="third"&&(de.value="Show less notes",De.value=!W.value):(de.value="Show more notes",De.value=!W.value)}function mn(g){return g[1]}function pn(g){(g.key==="Enter"||g.key==="ArrowDown")&&(g.preventDefault(),et())}const ve=q(()=>[{showAddItemButton:!0,addItemButton:!0,name:Me.value!==null?"Update":"ADD",btnFill:"clear",fn:et},{showAddItemButton:!0,addItemButton:!0,name:"CANCEL",btnFill:"clear",fn:on}]);return(g,v)=>(i(),F(u(Ve),null,{default:m(()=>[a("div",Ts,[a("div",Fs,[n(Ft)])]),a("div",Ls,[n(u(J),{lines:"none",class:"section-header"},{default:m(()=>[n(u(Te),{icon:u(wt),class:"section-icon"},null,8,["icon"]),n(u(ie),{class:"section-title",style:{"margin-top":"12px"}},{default:m(()=>[...v[9]||(v[9]=[V("Medication",-1)])]),_:1})]),_:1}),a("div",Bs,[(i(),F(Bn,{_selectedMedicalDrugsList:p.value,onEditItem:sn,onRemoveItem:ln,key:_.value,class:"medication-list"},null,8,["_selectedMedicalDrugsList"])),d.value?w("",!0):(i(),y("div",Rs,[a("div",Vs,[v[10]||(v[10]=a("label",{class:"input-label"},"Medication",-1)),n(u(Ye),{modelValue:pe.value,"onUpdate:modelValue":[v[0]||(v[0]=D=>pe.value=D),v[1]||(v[1]=D=>an(D))],options:e.value,searchable:!0,"close-on-select":!0,"show-labels":!1,placeholder:"Select medication",label:"name","track-by":"drug_id",onSearchChange:v[2]||(v[2]=D=>Zt(D))},{option:m(D=>[a("div",Hs,M(D.option.name),1)]),_:1},8,["modelValue","options"]),We.value?(i(),y("div",Us,M(Ht.value),1)):w("",!0)]),a("div",Gs,[a("div",Ws,[v[11]||(v[11]=a("label",{class:"input-label"},"Route",-1)),n(u(Ye),{modelValue:te.value,"onUpdate:modelValue":[v[3]||(v[3]=D=>te.value=D),v[4]||(v[4]=D=>Wt(D))],options:Gt.value,searchable:!0,"close-on-select":!0,"show-labels":!1,placeholder:"Select route",label:"name","track-by":"concept_id"},null,8,["modelValue","options"]),Ue.value?(i(),y("div",qs,M(Rt.value),1)):w("",!0)]),a("div",zs,[v[12]||(v[12]=a("label",{class:"input-label"},"Frequency",-1)),n(u(Ye),{modelValue:ne.value,"onUpdate:modelValue":[v[5]||(v[5]=D=>ne.value=D),v[6]||(v[6]=D=>Xt(D))],options:u(r),searchable:!0,"close-on-select":!0,"show-labels":!1,placeholder:"Select frequency",label:"label","track-by":"code"},null,8,["modelValue","options"]),Ge.value?(i(),y("div",Ys,M(Vt.value),1)):w("",!0)]),a("div",js,[v[13]||(v[13]=a("label",{class:"input-label"},"Duration (days)",-1)),n(u(yn),{modelValue:k.value,"onUpdate:modelValue":v[7]||(v[7]=D=>k.value=D),type:"number",inputmode:"numeric",pattern:"[0-9]*",fill:"outline",placeholder:"Enter duration",onKeydown:pn},null,8,["modelValue"]),U.value?(i(),y("div",Ks,M(I.value),1)):w("",!0)])]),a("div",Qs,[ve.value[0].addItemButton?(i(),F(Ce,{key:0,name:ve.value[0].name,fill:ve.value[0].btnFill,icon:u(bn),"onClicked:btn":ve.value[0].fn,class:"save-button"},null,8,["name","fill","icon","onClicked:btn"])):w("",!0),ve.value[1].addItemButton?(i(),F(Ce,{key:1,name:ve.value[1].name,fill:ve.value[1].btnFill,icon:u(Dn),"onClicked:btn":ve.value[1].fn,class:"cancel-button"},null,8,["name","fill","icon","onClicked:btn"])):w("",!0)])])),d.value?(i(),F(Ce,{key:1,name:L,fill:T,icon:u(Fe),"onClicked:btn":Qt,class:"add-new-button"},null,8,["icon"])):w("",!0)])]),a("div",Js,[n(u(J),{lines:"none",class:"section-header"},{default:m(()=>[n(u(Te),{icon:u(wn),class:"section-icon"},null,8,["icon"]),n(u(ie),{class:"section-title"},{default:m(()=>[...v[14]||(v[14]=[V("Non-pharmacological therapy and other notes",-1)])]),_:1})]),_:1}),a("div",Xs,[n(Rn,{class:"intervention-component"}),a("div",Zs,[n(u(J),{class:"notes-input-item"},{default:m(()=>[n(u(Te),{slot:"start",icon:u(o).editPen,class:"edit-icon","aria-hidden":"true"},null,8,["icon"]),n(u(Cn),{modelValue:x.value,"onUpdate:modelValue":v[8]||(v[8]=D=>x.value=D),onIonInput:rn,placeholder:"Enter notes here...","auto-grow":!0,class:"notes-textarea",fill:"outline",style:{"--padding-start":"16px"}},null,8,["modelValue"])]),_:1})]),n(u(je),{ref:"accordionGroup",class:"previous-notes"},{default:m(()=>[n(u(fe),{value:"fourth","toggle-icon-slot":"start"},{default:m(()=>[n(u(J),{slot:"header",color:"light",class:"previous-notes-header"},{default:m(()=>[n(u(ie),null,{default:m(()=>[...v[15]||(v[15]=[V("Previous visit notes",-1)])]),_:1})]),_:1}),a("div",eo,[a("div",to,[g.index===1?(i(!0),y(Z,{key:0},ue(ee.value,(D,G)=>(i(),y("div",{key:G,class:"note-entry"},[(i(!0),y(Z,null,ue(D,(H,Y)=>(i(),y("div",{key:Y},[a("div",no,M(H.date),1),a("div",ao,M(H.notes),1)]))),128))]))),128)):w("",!0),n(u(je),{onIonChange:dn},{default:m(()=>[n(u(fe),{value:"third","toggle-icon-slot":"start"},{default:m(()=>[n(u(J),{slot:"header",color:"light",class:"show-more-header"},{default:m(()=>[n(u(ie),{color:"primary"},{default:m(()=>[V(M(de.value),1)]),_:1})]),_:1}),a("div",so,[(i(!0),y(Z,null,ue(ae.value,(D,G)=>(i(),y("div",{key:G,class:"note-entry"},[(i(!0),y(Z,null,ue(mn(D),(H,Y)=>(i(),y("div",{key:Y},[a("div",oo,M(H.date),1),a("div",io,M(H.notes),1)]))),128))]))),128))])]),_:1})]),_:1})])])]),_:1})]),_:1},512)])])]),_:1}))}}),Eo=ce(ro,[["__scopeId","data-v-334d9f69"]]),co={class:"dash_box"},uo={key:1},mo=X({name:"xxxComponent"}),po=X({...mo,setup(t){const o=s("No outcome created yet"),r=s(!1),c=s("please select a type");s("Add new outcome"),s(!0);const f=s(!0),d=s(""),_=s(!0),B=s(!1),P=On(),C=q(()=>P.outcomes),N=s(!1),I=s(!1),U=s(!1),l=s(!1),h=s(!1);s(null),s(null);const k=s([{name:"Admitted for short stay",selected:!1},{name:"Referred out",selected:!1},{name:"Discharged Home",selected:!1}]),S=[{multi_Selection:!1,show_list_label:!0,unqueId:"qwerty2",name_of_list:"Add new outcome",placeHolder:"Choose one",items:k.value,listUpdatedFN:$,listFilteredFN:()=>{},use_internal_filter:!0,disabled:s(!1)}];function $(p){k.value=p,k.value.forEach(e=>{e.selected==!0&&(d.value=e.name)})}be(async()=>{L()}),re(()=>d.value,async p=>{N.value==!0?N.value=!1:E()}),re(()=>C.value.length,async p=>{L()});function A(){k.value.forEach(p=>{p.selected=!1}),d.value=""}function L(){C.value.length>0?_.value=!1:C.value.length==0&&B.value==!1&&(_.value=!0)}function T(p){C.value.splice(p,1)}const b=p=>{};async function E(p=!0){const e=d.value;console.log(e),d.value=e;const x=d.value;x==k.value[0].name?U.value=!0:U.value=!1,x==k.value[1].name?(l.value=!0,console.log("show_discharged_options is set to true")):l.value=!1,x==k.value[2].name?(h.value=!0,console.log("show_discharged_options is set to true")):h.value=!1}function R(){I.value=!1,U.value=!1,l.value=!1,h.value=!1,A()}return(p,e)=>{const x=j("ion-row");return i(),F(u(Ve),null,{default:m(()=>[n(x,null,{default:m(()=>[n(u(mt),null,{default:m(()=>[(i(),F(Un,{key:0,"onUpdate:removeItem":T,"onUpdate:editItem":b,displayData:C.value},null,8,["displayData"]))]),_:1})]),_:1}),_.value?(i(),F(x,{key:0},{default:m(()=>[a("span",co,M(o.value),1)]),_:1})):w("",!0),f.value?(i(),y("div",uo,[n(x,null,{default:m(()=>[n(u(mt),null,{default:m(()=>[n($n,{multiSelection:S[0].multi_Selection,show_label:S[0].show_list_label,uniqueId:S[0].unqueId,name_of_list:S[0].name_of_list,choose_place_holder:S[0].placeHolder,"items_-list":S[0].items,use_internal_filter:S[0].use_internal_filter,disabled:S[0].disabled.value,onItemListUpDated:S[0].listUpdatedFN,onItemListFiltered:S[0].listFilteredFN},null,8,["multiSelection","show_label","uniqueId","name_of_list","choose_place_holder","items_-list","use_internal_filter","disabled","onItemListUpDated","onItemListFiltered"]),a("div",null,[r.value?(i(),F(u(ie),{key:0,class:"error-label"},{default:m(()=>[V(M(c.value),1)]),_:1})):w("",!0)])]),_:1})]),_:1})])):w("",!0),U.value?(i(),F(Gn,{key:2,onDataSaved:R,selected_ward_prop:"",admitted_other_props:""})):w("",!0),l.value?(i(),F(Wn,{key:3,onDataSaved:R,selected_referral_data:"",selected_other_referral_data:""})):w("",!0),h.value?(i(),F(qn,{key:4,onDataSaved:R,selected_discharged_prop:"",selected_discharged_data:""})):w("",!0)]),_:1})}}}),xo=ce(po,[["__scopeId","data-v-b6576c18"]]);export{ko as C,Po as O,Is as P,as as _,Eo as a,xo as b,ea as c,us as d,ts as e};
