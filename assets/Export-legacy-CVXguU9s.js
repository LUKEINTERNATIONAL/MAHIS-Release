System.register(["./vendor-legacy-DISdEYhC.js","./lodash-legacy-pOOc9Efu.js","./index-legacy-BvQ8VDcO.js"],function(e,t){"use strict";var o,r,l,a,i,n,c,s,p,u,f,E,v;return{setters:[e=>{o=e.r,r=e.e6,l=e.w,a=e.ch,i=e.ci,n=e.e7,c=e.e8,s=e.e9,p=e.ea},e=>{u=e.l},e=>{f=e.t,E=e.v,v=e.K}],execute:function(){e({a:function(e,o,r="document",l=!1,n={}){o=g(o);const c=new a({...n}),s=c.splitTextToSize(r,180),p=s.length<=1?20:10*s.length;c.text(s,14,10);const u={startY:p,head:[e[e.length-1]],body:o};l&&(u.tableWidth="wrap",u.horizontalPageBreak=!0,u.horizontalPageBreakRepeat=0),i(c,u);const{activePlatformProfile:f}=m(),v=`${r}.pdf`;f.value.fileExport===t.WEB?c.save(v):f.value.fileExport===t.FILE_SYSTEM?S(v,c.output(),"blob"):E("Platform not supported")},e:S,t:function(e,o,r="document"){o=g(o);const l=e.concat(o).reduce((e,t)=>e+t.map(e=>`"${e}"`).join(",")+"\n",""),{activePlatformProfile:a}=m(),i=`${r}.csv`;if(a.value.fileExport===t.WEB){const e=new Blob([l],{type:"text/csv;charset=utf-8;"}),t=document.createElement("a");t.setAttribute("id","csv"),t.href=window.URL.createObjectURL(e),t.setAttribute("download",`${r}.csv`),document.body.appendChild(t),t.click(),t.remove()}else a.value.fileExport===t.FILE_SYSTEM?S(i,l,"text"):f("Platform not supported")},u:m});var t=e("F",(e=>(e.WEB="WEB",e.FILE_SYSTEM="FILE_SYSTEM",e))(t||{}));const d={Desktop:{profileName:"Desktop",fileExport:"WEB",scanner:"BARCODE_SCANNER",printer:"WEB",keyboard:"NATIVE_AND_HIS_KEYBOARD"},Mobile:{profileName:"Mobile",fileExport:"FILE_SYSTEM",scanner:"CAMERA_SCANNER",printer:"BLUETOOTH",keyboard:"HIS_KEYBOARD_ONLY"}};function m(){const e=o(d.Desktop),t=o({}),a=localStorage.getItem("active_profile"),i=localStorage.getItem("platformProfiles");return t.value="string"==typeof i?JSON.parse(i):d,"string"==typeof a&&`${a}`.match(/\{.*\}/)?e.value=JSON.parse(a):u.isEmpty(t.value)||(r("mobile")&&"Mobile"in t.value?e.value=t.value.Mobile:r("desktop")&&"Desktop"in t.value&&(e.value=t.value.Desktop)),l(()=>e.value,e=>{localStorage.setItem("active_profile",JSON.stringify(e))}),{activePlatformProfile:e,platformProfiles:t}}function S(e,t,o){let r=null;const l=`MaHIS/${e.replaceAll("/","_")}`;v(`Exporting file to "Documents/${l}"...`),r="blob"===o?n({path:l,blob:t,directory:c.Documents,recursive:!0}):s.writeFile({path:l,data:t,directory:c.Documents,encoding:p.UTF8,recursive:!0}),null!=r&&r.then(()=>v(`File exported to "Documents/${l}"!`,3e3)).catch(e=>E(e))}function g(e){return e.map(e=>e.map(e=>"string"==typeof e?e.replace(/&lt;/g,"<"):e))}}}});
