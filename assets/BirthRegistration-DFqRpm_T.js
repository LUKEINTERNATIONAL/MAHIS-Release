import{d as p,al as s,U as f,T as g,am as V,an as H,G as _,S as y,ao as I,O as q,E as D,y as b,f as L,bg as z,D as X,M as Z,J as K,ae as Q,bI as x,af as tt,ad as at,ag as it,W as et,au as nt,bj as rt,dw as ot,cj as st,dx as lt,ai as dt,ck as ut}from"./vendor-IHO26Iap.js";import{D as F}from"./OutcomeModal-C61jkum-.js";import{aB as k,S as B,H as w,x as a,E as R,g as c,ah as h,aX as E,y as r,aa as Y,u as v,_ as S,A as T,L as M,b as A,aY as ct,w as ht,z as mt,T as pt,ao as P,d as ft,R as gt,V as _t,a7 as yt,i as It}from"./index-tZ4yxjbt.js";import{B as C,u as G}from"./ncd_appointment_service-DrlkoOb0.js";import{_ as Dt}from"./SetRelationship.vue_vue_type_script_lang-BsNMolpK.js";import{R as bt}from"./relationship_service-TXfGnFFn.js";import{a as W,A as J}from"./AddVillage-C-8jFmCt.js";import{D as Lt}from"./DemographicBar-Bpb9JxcY.js";import{a as O,c as U,S as vt}from"./SaveProgressModal-BToQQMkm.js";import{S as St}from"./Stepper-EH2rhE2j.js";import{D as Ct}from"./diagnosis-B9bUmGc6.js";import{F as Nt,S as wt}from"./NCDNumber-zjLeiClE.js";const Mt=p({name:"Menu",components:{IonContent:I,IonHeader:y,IonItem:_,IonList:H,IonMenu:V,IonTitle:g,IonToolbar:f,BasicCard:C},data(){return{cardData:{},inputField:"",setName:"",initialPersonalData:[],selectedCountry:[]}},watch:{personInformation:{handler(){this.buildCards()},deep:!0},patient:{handler(){this.setData()},deep:!0}},props:{editable:{default:!1}},computed:{...s(h,["personInformation"]),...s(h,["guardianInformation"]),...s(v,["patient"]),nationalID(){return r(this.personInformation,"nationalID","value")},firstname(){return r(this.personInformation,"firstname","value")},estimation(){return r(this.personInformation,"estimation","value")},lastname(){return r(this.personInformation,"lastname","value")},middleName(){return r(this.personInformation,"middleName","value")},gender(){return Y(this.personInformation,"gender")},birthdate(){return w.toStandardHisFormat(r(this.personInformation,"birthdate","value"))},birthdateEstimated(){return"false"},phoneNumber(){return r(this.personInformation,"phoneNumber","value")}},async mounted(){this.buildCards(),this.setData()},methods:{setData(){var t,i;this.editable&&(a(this.personInformation,"firstname","value",(i=(t=this.patient)==null?void 0:t.personInformation)==null?void 0:i.given_name),a(this.personInformation,"middleName","value",this.patient.personInformation.middle_name),a(this.personInformation,"lastname","value",this.patient.personInformation.family_name),a(this.personInformation,"birthdate","value",this.patient.personInformation.birthdate),E(this.personInformation,"gender","selectedValue",this.patient.personInformation.gender),a(this.personInformation,"phoneNumber","value",this.getUnFormatedPhonenumber()),a(this.personInformation,"unformatedPhoneNumber","value",this.getUnFormatedPhonenumber()))},getPhoneNumber(){try{let t=this.patient.personInformation.cell_phone_number;if(t)return t.value.includes("+")?this.selectedCountry.dialCode?t.value.split(this.selectedCountry.dialCode)[1]:t.value.split("265")[1]:t.value.startsWith("08")||t.value.startsWith("09")?t.value.substring(1):t.value}catch(t){console.error(t)}},getUnFormatedPhonenumber(){try{let t=this.patient.personInformation.cell_phone_number;return console.log("attribute: ",t),t}catch(t){}},buildCards(){const t=h();this.cardData={mainTitle:"Demographics",cards:[{cardTitle:"Personal information",content:this.personInformation,initialData:t.getInitialPersonalInformation()}]}},openModal(){c(F)},validationRules(t){return R(this.personInformation,t.name,this[t.name])},async handleInputData(t){var i,e,n,o;if(((i=t==null?void 0:t.col)==null?void 0:i.name)=="Estimate Age"&&((e=t==null?void 0:t.col)!=null&&e.checked))a(this.personInformation,"birthdate","displayNone",!0);else if(((n=t==null?void 0:t.col)==null?void 0:n.name)=="Estimate Age"&&!((o=t==null?void 0:t.col)!=null&&o.checked))a(this.personInformation,"birthdate","displayNone",!1),a(this.personInformation,"estimation","displayNone",!0);else if(t.name=="phoneNumber"){const d="+".concat(this.selectedCountry.dialCode).concat(t.value),l=await k.validateMobilePhone(d,this.selectedCountry);return a(this.personInformation,"phoneNumber","alertsErrorMassage",""),l.includes("+")?a(this.personInformation,"phoneNumber","value",d):a(this.personInformation,"phoneNumber","alertsErrorMassage",l),!0}this.validationRules(t),this.calculateDoB(t),this.setGuardingInfo(t)},async handleCountryChange(t){this.selectedCountry=t.event,this.personInformation[8].data.rowData[0].colData[0].alertsErrorMassage=""},setGuardingFormRules(t){t<14?(a(this.guardianInformation,"guardianFirstname","inputHeader","First name *"),a(this.guardianInformation,"guardianLastname","inputHeader","Last name *"),a(this.guardianInformation,"guardianFirstname","validationFunctionName","isName"),a(this.guardianInformation,"guardianLastname","validationFunctionName","isName"),a(this.guardianInformation,"relationship","inputHeader","Relationship to patient *"),a(this.guardianInformation,"relationship","validationFunctionName","isNameWithSlush")):(a(this.guardianInformation,"guardianFirstname","inputHeader","First name"),a(this.guardianInformation,"guardianLastname","inputHeader","Last name"),a(this.guardianInformation,"guardianFirstname","validationFunctionName","isNameEmpty"),a(this.guardianInformation,"guardianLastname","validationFunctionName","isNameEmpty"),a(this.guardianInformation,"relationship","inputHeader","Relationship to patient"),a(this.guardianInformation,"relationship","validationFunctionName",""),a(this.guardianInformation,"relationship","alertsErrorMassage",""))},setGuardingInfo(t){const i=e=>a(this.guardianInformation,"guardianNationalID","displayNone",e);(t.name=="birthdate"||t.inputHeader=="Estimated age")&&(w.getAgeInYears(this.birthdate)<14?i(!1):i(!0),this.setGuardingFormRules(w.getAgeInYears(this.birthdate)),t.name=="birthdate"&&(a(this.personInformation,"estimation","value",w.getAgeInYears(t.value)),this.validationRules({name:"estimation"})))},calculateDoB(t){var i,e,n;if((t==null?void 0:t.name)=="estimation"){this.validateDuration();const o=((e=(i=t==null?void 0:t.unitsData)==null?void 0:i.value)==null?void 0:e.name)||((n=t==null?void 0:t.unitsData)==null?void 0:n.value),d=t==null?void 0:t.value,l=o==="Years"&&d<0;let u=q(B.getSessionDate());if(l)try{u=u.add(Math.abs(d),"years")}catch($){return console.error("Error adding years:",$),null}else switch(o){case"Days":u=u.subtract(d,"days");break;case"Months":u=u.subtract(d,"months");break;case"Years":u=u.subtract(d,"years");break;default:return null}const N=w.toStandardHisDisplayFormat(u.format("YYYY-MM-DD"));return a(this.personInformation,"birthdate","value",N),N}else return null},validateDuration(){return this.personInformation[7].data.rowData[0].colData[0].alertsErrorMassage=!1,this.personInformation[7].data.rowData[0].colData[0].alertsErrorMassage="",this.personInformation[7].data.rowData[0].colData[0].value<0?(this.personInformation[7].data.rowData[0].colData[0].alertsErrorMassage=!0,this.personInformation[7].data.rowData[0].colData[0].alertsErrorMassage="Estimated age is less than 0",!1):this.personInformation[7].data.rowData[0].colData[0].value>110?(this.personInformation[7].data.rowData[0].colData[0].alertsErrorMassage=!0,this.personInformation[7].data.rowData[0].colData[0].alertsErrorMassage="Estimated age is more than 110",!1):this.personInformation[7].data.rowData[0].colData[0].unitsData.value?k.isNumber(this.personInformation[7].data.rowData[0].colData[0].value)==null&&this.personInformation[7].data.rowData[0].colData[0].value!=""?!0:(this.personInformation[7].data.rowData[0].colData[0].alertsErrorMassage=!0,this.personInformation[7].data.rowData[0].colData[0].alertsErrorMassage=" Value must be a number",!1):(this.personInformation[7].data.rowData[0].colData[0].alertsErrorMassage=!0,this.personInformation[7].data.rowData[0].colData[0].alertsErrorMassage="Estimation Units Required",!1)}}});function Rt(t,i,e,n,o,d){const l=D("basic-card");return L(),b(l,{content:t.cardData,editable:t.editable,"onUpdate:selected":t.handleInputData,"onUpdate:inputValue":t.handleInputData,onCountryChanged:t.handleCountryChange},null,8,["content","editable","onUpdate:selected","onUpdate:inputValue","onCountryChanged"])}const Qt=S(Mt,[["render",Rt],["__scopeId","data-v-e9af8ecb"]]),Vt=p({name:"Menu",mixins:[Dt],components:{IonContent:I,IonHeader:y,IonItem:_,IonList:H,IonMenu:V,IonTitle:g,IonToolbar:f,BasicCard:C},watch:{guardianInformation:{handler(){this.buildCards()},deep:!0},relationships:{async handler(){},deep:!0},personInformation:{async handler(){await this.setRelationShip()},deep:!0},patient:{handler(){this.setData()},deep:!0}},data(){return{cardData:{},inputField:"",setName:"",selectedCountry:[]}},computed:{...s(h,["guardianInformation","personInformation"]),...s(v,["patient"]),gender(){return Y(this.personInformation,"gender")},guardianFirstname(){return r(this.guardianInformation,"guardianFirstname","value")},guardianLastname(){return r(this.guardianInformation,"guardianLastname","value")},guardianMiddleName(){return r(this.guardianInformation,"guardianMiddleName","value")},guardianPhoneNumber(){return r(this.guardianInformation,"guardianPhoneNumber","value")},relationship(){return r(this.guardianInformation,"relationship","value")}},props:{editable:{default:!1}},async mounted(){await this.setRelationShip(),this.buildCards(),this.setData()},methods:{async setData(){var t,i,e,n,o,d,l,u,N,$;if(B.getProgramID()==33?a(this.guardianInformation,"relationship","inputHeader","Relationship to client *"):a(this.guardianInformation,"relationship","inputHeader","Relationship to patient *"),this.editable){const m=await bt.getRelationships(this.patient.patientID);a(this.guardianInformation,"guardianNationalID","value",this.setAttribute("Regiment ID",(t=m[0])==null?void 0:t.relation)),a(this.guardianInformation,"guardianFirstname","value",(e=(i=m[0])==null?void 0:i.relation.names[0])==null?void 0:e.given_name),a(this.guardianInformation,"guardianLastname","value",(o=(n=m[0])==null?void 0:n.relation.names[0])==null?void 0:o.family_name),a(this.guardianInformation,"guardianMiddleName","value",(l=(d=m[0])==null?void 0:d.relation.names[0])==null?void 0:l.middle_name),a(this.guardianInformation,"guardianPhoneNumber","value",await this.setAttribute("Cell Phone Number",(u=m[0])==null?void 0:u.relation)),a(this.guardianInformation,"relationship","value",{id:(N=m[0])==null?void 0:N.type.relationship_type_id,name:($=m[0])==null?void 0:$.type.b_is_to_a}),await this.setRelationShip()}},async updateGuardianPhone(){},async setAttribute(t,i){if(!i||Object.keys(i).length===0)return;let e=i.person_attributes.find(n=>n.type.name==t);if(e!=null){let n=e.value;return n&&await this.getPhoneNumber(e.value)}},async getPhoneNumber(t){if(t)return t.includes("+")?this.selectedCountry.dialCode?t.split(this.selectedCountry.dialCode)[1]:t.split("265")[1]:t.startsWith("08")||t.startsWith("09")?t.substring(1):t},async setRelationShip(){this.gender?(await this.getRelationships(),a(this.guardianInformation,"relationship","displayNone",!1),a(this.guardianInformation,"relationship","multiSelectData",this.relationships)):a(this.guardianInformation,"relationship","displayNone",!0)},buildCards(){this.cardData={mainTitle:"Demographics",cards:[{cardTitle:"Guardian information",content:this.guardianInformation}]}},openModal(){c(F)},buildGuardianInformation(){this.guardianInformation[0].selectedData={given_name:this.guardianFirstname,middle_name:this.guardianMiddleName,family_name:this.guardianLastname,gender:"",birthdate:"",birthdate_estimated:"false",home_region:"",home_district:"",home_traditional_authority:"",home_village:"",current_region:"",current_district:"",current_traditional_authority:"",current_village:"",landmark:"",cell_phone_number:this.guardianPhoneNumber,national_id:r(this.guardianInformation,"guardianNationalID","value")}},validationRules(t){return R(this.guardianInformation,t.name,this[t.name])},async handleInputData(t){if(t.name=="guardianPhoneNumber"){const i="+".concat(this.selectedCountry.dialCode).concat(t.value),e=await k.validateMobilePhone(i,this.selectedCountry);return this.guardianInformation[4].data.rowData[0].colData[0].alertsErrorMassage=null,e.includes("+")?a(this.guardianInformation,"guardianPhoneNumber","value",i):this.guardianInformation[4].data.rowData[0].colData[0].alertsErrorMassage=e,!0}this.buildGuardianInformation()},async handleCountryChange(t){this.selectedCountry=t.event,this.guardianInformation[4].data.rowData[0].colData[0].alertsErrorMassage=""}}});function Ht(t,i,e,n,o,d){const l=D("basic-card");return L(),b(l,{content:t.cardData,editable:t.editable,"onUpdate:selected":t.handleInputData,"onUpdate:inputValue":t.handleInputData,onCountryChanged:t.handleCountryChange},null,8,["content","editable","onUpdate:selected","onUpdate:inputValue","onCountryChanged"])}const xt=S(Vt,[["render",Ht],["__scopeId","data-v-90a41f74"]]),j=p({data:()=>({districtList:[],countriesList:[],locations:[]}),async mounted(){await this.getLocationData()},computed:{...s(A,["apiStatus"])},methods:{async getLocationData(){var t,i;if(this.districtList=await T("districts"),this.countriesList=await T("countries"),this.apiStatus&&this.districtList.length!=((t=A().offlineDistrictStatus)==null?void 0:t.total))for(let e of[1,2,3]){const n=await M.getDistricts(e);this.districtList.push(...n)}this.apiStatus&&this.countriesList.length!=((i=A().offlineCountriesStatus)==null?void 0:i.total)&&(this.countriesList=await M.getDistricts(4))},async getVillages(t){const i=await T("villages",{whereClause:{traditional_authority_id:t}});if(i.length>0)return i;if(this.apiStatus)return await M.getVillages(t)},async getTAs(t){const i=await T("TAs",{whereClause:{district_id:t}});if(i.length>0)return i;if(this.apiStatus)return await M.getTraditionalAuthorities(t)},getDistricts(t){return this.districtList.filter(i=>i.region_id===t)},getCountries(t){return this.countriesList.filter(i=>i.region_id===t)}}}),$t=p({mixins:[j],name:"Menu",components:{IonContent:I,IonHeader:y,IonItem:_,IonList:H,IonMenu:V,IonTitle:g,IonToolbar:f,BasicCard:C},data(){return{cardData:{},inputField:"",setName:"",locationData:[],districtList:[]}},computed:{...s(v,["patient"]),...s(h,["homeLocation","currentLocation"]),home_district(){var t;return(t=r(this.homeLocation,"home_district","value"))==null?void 0:t.name},home_traditional_authority(){var t;return(t=r(this.homeLocation,"home_traditional_authority","value"))==null?void 0:t.name},home_village(){var t;return(t=r(this.homeLocation,"home_village","value"))==null?void 0:t.name}},watch:{homeLocation:{handler(){this.buildCards()},deep:!0},districtList:{handler(){a(this.homeLocation,"home_district","multiSelectData",this.districtList)},deep:!0}},props:{editable:{default:!1}},async mounted(){this.buildCards(),this.setData()},methods:{setData(){var t,i,e;this.editable&&(a(this.homeLocation,"home_district","value",{name:(t=this.patient.personInformation)==null?void 0:t.home_district,concept_id:""}),a(this.homeLocation,"home_traditional_authority","value",{name:(i=this.patient.personInformation)==null?void 0:i.home_traditional_authority,concept_id:""}),a(this.homeLocation,"home_traditional_authority","displayNone",!1),a(this.homeLocation,"home_village","value",{name:(e=this.patient.personInformation)==null?void 0:e.home_village,concept_id:""}),a(this.homeLocation,"home_village","displayNone",!1))},setSameAsCurrent(){var t;if((t=ct(this.homeLocation,"Same as current"))!=null&&t.checked){const i=r(this.currentLocation,"current_district","value"),e=r(this.currentLocation,"current_traditional_authority","value"),n=r(this.currentLocation,"current_village","value");a(this.homeLocation,"home_district","value",i),a(this.homeLocation,"home_traditional_authority","value",e),a(this.homeLocation,"home_village","value",n),a(this.homeLocation,"home_traditional_authority","displayNone",!1),a(this.homeLocation,"home_village","displayNone",!1)}else a(this.homeLocation,"home_district","value",""),a(this.homeLocation,"home_traditional_authority","value",""),a(this.homeLocation,"home_village","value",""),a(this.homeLocation,"home_traditional_authority","displayNone",!0),a(this.homeLocation,"home_village","displayNone",!0)},async buildCards(){this.cardData={mainTitle:"Demographics",cards:[{cardTitle:"Home Location",content:this.homeLocation}]}},openModal(){c(F)},handleBtns(t){t=="TA"&&c(W,{class:"otherVitalsModal"}),t=="Village"&&c(J,{class:"otherVitalsModal"})},async validations(t,i){return i.every(e=>R(t,e,this[e]))},async handleInputData(t){var e,n,o;((e=t==null?void 0:t.col)==null?void 0:e.name)=="Same as current"&&this.setSameAsCurrent(),localStorage.setItem("activeLocation","home");const i=["home_district","home_traditional_authority","home_village"];await this.validations(this.homeLocation,i),t.name=="home_district"&&(a(this.homeLocation,"home_traditional_authority","displayNone",!0),a(this.homeLocation,"home_traditional_authority","value",""),a(this.homeLocation,"home_village","displayNone",!0),a(this.homeLocation,"home_village","value",""),(n=t==null?void 0:t.value)!=null&&n.district_id&&this.setTA(t.value)),t.name=="home_traditional_authority"&&(a(this.homeLocation,"home_village","displayNone",!0),a(this.homeLocation,"home_village","value",""),(o=t==null?void 0:t.value)!=null&&o.traditional_authority_id&&this.setVillage(t.value))},async setTA(t){const i=await this.getTAs(t.district_id);a(this.homeLocation,"home_traditional_authority","multiSelectData",i),a(this.homeLocation,"home_traditional_authority","displayNone",!1)},async setVillage(t){const i=await this.getVillages(t.traditional_authority_id)||await M.getVillages(t.traditional_authority_id);a(this.homeLocation,"home_village","multiSelectData",i),a(this.homeLocation,"home_village","displayNone",!1)}}});function Tt(t,i,e,n,o,d){const l=D("basic-card");return L(),b(l,{content:t.cardData,editable:t.editable,"onUpdate:selected":t.handleInputData,"onUpdate:inputValue":t.handleInputData,"onClicked:button":t.handleBtns},null,8,["content","editable","onUpdate:selected","onUpdate:inputValue","onClicked:button"])}const ta=S($t,[["render",Tt],["__scopeId","data-v-71017ef3"]]),Et=p({name:"Menu",mixins:[j],components:{IonContent:I,IonHeader:y,IonItem:_,IonList:H,IonMenu:V,IonTitle:g,IonToolbar:f,BasicCard:C},data(){return{cardData:{},inputField:"",setName:"",locationData:[]}},computed:{...s(h,["homeLocation"]),...s(h,["currentLocation"]),...s(v,["patient"]),current_district(){var t;return(t=r(this.currentLocation,"current_district","value"))==null?void 0:t.name},current_traditional_authority(){var t;return(t=r(this.currentLocation,"current_traditional_authority","value"))==null?void 0:t.name},current_village(){var t;return(t=r(this.currentLocation,"current_village","value"))==null?void 0:t.name},"Other (specify)"(){return r(this.currentLocation,"Other (specify)","value")}},watch:{currentLocation:{handler(){this.buildCards()},deep:!0},districtList:{handler(){this.districtList.length>0&&a(this.currentLocation,"current_district","multiSelectData",this.districtList)},deep:!0}},props:{editable:{default:!1}},async mounted(){this.buildCards(),this.setData(),this.validaterowData({})},methods:{setData(){this.editable&&(a(this.currentLocation,"current_district","value",{name:this.patient.personInformation.current_district,traditional_authority_id:""}),a(this.currentLocation,"current_traditional_authority","value",{name:this.patient.personInformation.current_traditional_authority,village_id:""}),a(this.currentLocation,"current_traditional_authority","displayNone",!1),a(this.currentLocation,"current_village","value",{name:this.patient.personInformation.current_village,district_id:""}),a(this.currentLocation,"current_village","displayNone",!1),a(this.currentLocation,"closestLandmark","value",{id:"",name:this.patient.personInformation.landmark}))},async buildCards(){this.cardData={mainTitle:"Demographics",cards:[{cardTitle:"Current Location",content:this.currentLocation}]}},openModal(){c(F)},handleBtns(t){t=="TA"&&c(W,{class:"otherVitalsModal"}),t=="Village"&&c(J,{class:"otherVitalsModal"})},async validations(t,i){return i.every(e=>R(t,e,this[e]))},validationRules(t){return R(this.currentLocation,t.name,this[t.name])},validaterowData(t){this.validationRules(t)},async handleInputData(t){var e,n;localStorage.setItem("activeLocation","current");const i=["current_district","current_traditional_authority","current_village","Other (specify)"];if(await this.validations(this.currentLocation,i),t.name=="current_district"&&(a(this.currentLocation,"current_traditional_authority","displayNone",!0),a(this.currentLocation,"current_traditional_authority","value",""),a(this.currentLocation,"current_village","displayNone",!0),a(this.currentLocation,"current_village","value",""),(e=t==null?void 0:t.value)!=null&&e.district_id&&this.setTA(t.value)),t.name=="current_traditional_authority"&&(a(this.currentLocation,"current_village","displayNone",!0),a(this.currentLocation,"current_village","value",""),(n=t==null?void 0:t.value)!=null&&n.traditional_authority_id&&this.setVillage(t.value)),t.name=="closestLandmark"){const o=r(this.currentLocation,"closestLandmark","value");(o==null?void 0:o.name)==="Other"?a(this.currentLocation,"Other (specify)","displayNone",!1):(a(this.currentLocation,"Other (specify)","displayNone",!0),a(this.currentLocation,"Other (specify)","value",""))}this.validaterowData(t)},async setTA(t){const i=await this.getTAs(t.district_id);return i.length>0?(a(this.currentLocation,"current_traditional_authority","multiSelectData",i),a(this.currentLocation,"current_traditional_authority","displayNone",!1),!0):!1},async setVillage(t){const i=await this.getVillages(t.traditional_authority_id);return i.length>0?(a(this.currentLocation,"current_village","multiSelectData",i),a(this.currentLocation,"current_village","displayNone",!1),!0):!1}}});function Ft(t,i,e,n,o,d){const l=D("basic-card");return L(),b(l,{content:t.cardData,editable:t.editable,"onUpdate:selected":t.handleInputData,"onUpdate:inputValue":t.handleInputData,"onClicked:button":t.handleBtns},null,8,["content","editable","onUpdate:selected","onUpdate:inputValue","onClicked:button"])}const aa=S(Et,[["render",Ft],["__scopeId","data-v-c8549609"]]),At=p({name:"Menu",components:{IonContent:I,IonHeader:y,IonItem:_,IonList:H,IonMenu:V,IonTitle:g,IonToolbar:f,BasicCard:C},data(){return{cardData:{},inputField:"",setName:"",religionsList:[{id:1,name:"Christianity"},{id:2,name:"Islam"},{id:3,name:"Judaism"},{id:4,name:"Hinduism"},{id:5,name:"Buddhism"},{id:6,name:"Sikhism"},{id:7,name:"Jainism"},{id:8,name:"Bahá'í Faith"},{id:9,name:"Zoroastrianism"},{id:10,name:"Confucianism"},{id:11,name:"Taoism"},{id:12,name:"Shinto"},{id:13,name:"Baha'i Faith"},{id:14,name:"Juche"},{id:15,name:"Rastafari"}]}},watch:{socialHistory:{handler(){this.buildCards()},deep:!0}},computed:{...s(h,["socialHistory"]),...s(v,["patient"])},props:{editable:{default:!1}},async mounted(){this.updateRegistrationStores(),this.buildCards(),this.setData()},methods:{setData(){this.editable&&(a(this.socialHistory,"religion","value",{id:"",name:this.patient.personInformation.education_level}),E(this.socialHistory,"occupation","selectedValue",this.patient.personInformation.occupation),E(this.socialHistory,"maritalStatus","selectedValue",this.patient.personInformation.marital_status),E(this.socialHistory,"highestLevelOfEducation","selectedValue",this.patient.personInformation.education_level))},buildCards(){this.cardData={mainTitle:"Demographics",cards:[{cardTitle:"Social History",content:this.socialHistory}]}},updateRegistrationStores(){h().setSocialHistory(this.socialHistory)},async handleInputData(t){this.handleReligion(t.name)},handleReligion(t){t=="religion"&&a(this.socialHistory,t,"multiSelectData",this.religionsList)}}});function Pt(t,i,e,n,o,d){const l=D("basic-card");return L(),b(l,{content:t.cardData,editable:t.editable,"onUpdate:selected":t.handleInputData,"onUpdate:inputValue":t.handleInputData},null,8,["content","editable","onUpdate:selected","onUpdate:inputValue"])}const ia=S(At,[["render",Pt],["__scopeId","data-v-2bea4306"]]),Ut=p({name:"BirthRegistration",components:{IonContent:I,IonHeader:y,IonMenuButton:rt,IonPage:nt,IonTitle:g,IonToolbar:f,Toolbar:pt,ToolbarSearch:mt,DemographicBar:Lt,IonButton:et,IonCard:it,IonCardContent:at,IonCardHeader:tt,IonCardSubtitle:x,IonCardTitle:Q,IonAccordion:K,IonAccordionGroup:Z,IonItem:_,IonLabel:X,IonModal:z,Stepper:St,SubstanceDiagnosis:wt,FamilyHistoryNCDNumber:Nt,DynamicButton:ht,BasicCard:C},data(){return{iconsContent:It,demographic:!0,currentStep:"",scanner:!1,steps:"",isOpen:!1,iconListStatus:"active_icon",iconGridStatus:"inactive_icon",cardData:{}}},computed:{...s(v,["patient"]),...s(yt,["vitals"]),...s(_t,["investigations"]),...s(gt,["diagnosis"]),...s(G,["enrollmentDisplayType"]),...s(ft,["NCDNumber","enrollmentDiagnosis","substance","patientHistoryHIV","patientHistory"]),...s(P,["birthRegistration"])},watch:{birthRegistration:{handler(){this.buildCards()},deep:!0}},props:{editable:{default:!1}},async mounted(){this.setDisplayType(this.enrollmentDisplayType),this.updateEnrollmentStores(),this.buildCards()},setup(){return{chevronBackOutline:ut,checkmark:dt,arrowForwardCircle:lt,grid:st,list:ot}},methods:{handleBtns(){console.log("lll")},setCurrentStep(t){this.currentStep=t},nextStep(){const t=this.steps.indexOf(this.currentStep);t<this.steps.length-1&&(this.currentStep=this.steps[t+1])},previousStep(){const t=this.steps.indexOf(this.currentStep);t>0&&(this.currentStep=this.steps[t-1])},async saveData(){await this.saveNcdNumber()},async saveNcdNumber(){this.$router.push("patientProfile")},openModal(){c(vt)},nav(t){this.$router.push(t)},setDisplayType(t){t=="grid"?this.currentStep="Enrollment":(this.currentStep="Substance & Diagnosis",this.steps=["Substance & Diagnosis","Patient History","Family History and NCDNumber"]),G().setEnrollmentDisplayType(t),this.setIconClass()},setIconClass(){this.iconListStatus="inactive_icon",this.iconGridStatus="inactive_icon",this.enrollmentDisplayType=="list"?this.iconListStatus="active_icon":this.enrollmentDisplayType=="grid"&&(this.iconGridStatus="active_icon")},async buildEnrollmentData(){return[...await O(this.patientHistoryHIV),...await O(this.substance),...await U(this.enrollmentDiagnosis),...await U(this.patientHistory),...await U(this.patientHistoryHIV)]},async saveEnrollment(){const t=await this.buildEnrollmentData();if(console.log("🚀 ~ saveEnrollment ~ data:",t),t.length>0){const i=B.getUserID();new Ct().onSubmit(this.patient.patientID,i,t)}},buildCards(){const t=P();this.cardData={cards:[{cardTitle:"Birth Registration",content:this.birthRegistration,initialData:t.getInitialBirthRegistration()}]}},updateEnrollmentStores(){P().setBirthRegistration(this.birthRegistration)},async handleInputData(t){t.inputHeader=="How many doses of Tdv did the mother receive?*"&&(t.value?t.value.name=="Unknown"?a(this.birthRegistration,"Protected at birth","value",{concept_id:1067,name:"Don't know"}):t.value.name=="0-2 doses, less than two weeks before delivery"?a(this.birthRegistration,"Protected at birth","value",{concept_id:1066,name:"No"}):t.value.name=="2-5 doses more than two weeks of delivery"&&a(this.birthRegistration,"Protected at birth","value",{concept_id:1065,name:"Yes"}):a(this.birthRegistration,"Protected at birth","value",""))}}});function kt(t,i,e,n,o,d){const l=D("basic-card");return L(),b(l,{content:t.cardData,editable:t.editable,"onUpdate:selected":t.handleInputData,"onUpdate:inputValue":t.handleInputData,"onClicked:button":t.handleBtns},null,8,["content","editable","onUpdate:selected","onUpdate:inputValue","onClicked:button"])}const ea=S(Ut,[["render",kt],["__scopeId","data-v-b30abc8f"]]);export{ea as B,aa as C,xt as G,ta as H,Qt as P,ia as S,j as _};
