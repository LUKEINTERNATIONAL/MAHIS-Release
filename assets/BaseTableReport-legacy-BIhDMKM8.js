System.register(["./index-legacy-DZtKs_Rb.js","./ReportMixin.vue_vue_type_script_lang-legacy-9LM8ZQ8T.js","./Export-legacy-DoJSSIFp.js","./vendor-legacy-uKl4jZmB.js"],function(e,t){"use strict";var o,a,s,r,i,n,l,c,u,d,p,h,m,g,f,P,y,w,F,b,_,v,C,D,R,I,S,k,x,V,L,B,O,T,$,A,E,U,H,N;return{setters:[e=>{o=e.S,a=e.H,s=e.bH,r=e.bG,i=e.bI,n=e.n,l=e.bD,c=e._},e=>{u=e.R,d=e.H,p=e.a,h=e.b},e=>{m=e.t,g=e.a},e=>{f=e.d,P=e.dt,y=e.e9,w=e.ai,F=e.aj,b=e.D,_=e.bz,v=e.V,C=e.U,D=e.ah,R=e.an,I=e.S,S=e.ck,k=e.E,x=e.e,V=e.f,L=e.i,B=e.y,O=e.m,T=e.v,$=e.l,A=e.z,E=e.A,U=e.B,H=e.k,N=e.F}],execute:function(){var t=document.createElement("style");t.textContent=".report-content[data-v-83fac94b]{margin:auto;width:99.9%;height:99%;overflow:auto}.header-text-list[data-v-83fac94b]{list-style:none}\n/*$vite$:1*/",document.head.appendChild(t);const j=f({components:{HisStandardForm:p,IonHeader:I,ReportTable:d,HisFooter:r,IonPage:R,IonContent:D,IonToolbar:C,Pagination:s,ReportFilter:u,IonFooter:v,IonChip:_,IonLabel:b,IonCol:F,IonRow:w,IonThumbnail:y,IonImg:P},props:{title:{type:String,required:!0},customFilter:{type:Function},period:{type:String,default:""},encryptPDF:{type:Boolean,default:!1},config:{type:Object},fields:{type:Array,default:()=>[]},columns:{type:Array,required:!0},rows:{type:Array,required:!0},paginated:{type:Boolean,default:!1},customBtns:{type:Array,default:()=>[]},canExportPDf:{type:Boolean,default:!0},canExportCsv:{type:Boolean,default:!0},onReportConfiguration:{type:Function,required:!1},rowParser:{type:Function},showFilters:{type:Boolean,default:!1},showVLFilter:{type:Boolean,default:!1},rowsPerPage:{type:Number},asyncRows:{type:Function},footerColor:{type:String,default:"dark"},customFileName:{type:String,default:""},canExport:{type:Boolean,default:!0},showReportStamp:{type:Boolean,default:!0},customInfo:{type:Object},reportPrefix:{type:String,default:""}},data:()=>({formData:{},computeFormData:{},btns:[],isLoadingData:!1,showForm:!1,logo:"@/public/assets/images/login-logos/Malawi-Coat_of_arms_of_arms.png",isTableLoading:!1,searchFilter:"",itemsPerPage:50,itemsVLtype:"",currentPage:0,tableRows:[],totalPages:0,activeColumns:[],activeRows:[],date:a.toStandardHisDisplayFormat(o.getSessionDate()),apiVersion:o.getApiVersion(),coreVersion:o.getCoreVersion(),siteUUID:o.getSiteUUID(),tableCssTheme:"opd-report-theme"}),methods:{getFileName(){var e,t;return`${null!==(e=this.reportPrefix)&&void 0!==e?e:""} ${o.getLocationName()} ${l(this.title).replace(this.reportPrefix,"")} ${null!==(t=this.period)&&void 0!==t?t:this.date}`},pdfEncryptionData(){const e=o.getUserName();return{encryption:{userPassword:e,ownerPassword:e,userPermissions:["print"]}}},async onFinish(e,t){this.formData=e,this.computeFormData=t,this.showForm=!1,await this.presentLoading();try{this.onReportConfiguration&&await this.onReportConfiguration(this.formData,this.computeFormData),S.dismiss()}catch(o){console.error(o),n(`${o}`),S.dismiss()}},async reloadReport(){await this.onFinish(this.formData,this.computeFormData)},async presentLoading(){const e=await S.create({message:"Please wait...",backdropDismiss:!1});await e.present()}},created(){this.showForm=!!this.fields.length,this.btns=this.customBtns,this.btns.push({name:"CSV",size:"large",slot:"start",color:"primary",visible:this.canExportCsv,onClick:async()=>{const{columns:e,rows:t}=h(this.columns,this.rows,"csvMode");m(e,[...t,[`Date Created: ${this.date}`],[`Period: ${this.period}`],[`MaHIS Version: ${this.coreVersion}`],[`API Version: ${this.apiVersion}`],[`Site UUID: ${this.siteUUID}`]],this.getFileName())}},{name:"PDF",size:"large",slot:"start",color:"primary",visible:this.canExportPDf,onClick:async()=>{let e="pdfMode";this.encryptPDF&&(e="Secure PDF"===await i("Security warning","PDF may contain private data that will require a password to unlock","To access private data choose Secure PDF over Regular PDF",[{name:"Secure PDF",slot:"start",color:"success"},{name:"Regular PDF",slot:"start",color:"success"}],"his-danger-color")?"pdfMode":"ignorePDFColumnexport");const{columns:t,rows:o}=h(this.activeColumns,this.activeRows,e);g(t,o,this.getFileName(),!1,this.encryptPDF&&"ignorePDFColumnexport"!=e?this.pdfEncryptionData():{})}},{name:"Back",size:"large",slot:"end",color:"primary",visible:!0,onClick:()=>this.showForm=!0},{name:"Refresh",size:"large",slot:"end",color:"warning",visible:!0,onClick:()=>this.reloadReport()},{name:"Finish",size:"large",slot:"end",color:"success",visible:!0,onClick:()=>this.$router.push({path:"/"})})}}),z={class:"report-content"};e("R",c(j,[["render",function(e,t,o,a,s,r){const i=k("his-standard-form"),n=k("ion-img"),l=k("ion-thumbnail"),c=k("ion-col"),u=k("pan"),d=k("ion-row"),p=k("report-filter"),h=k("ion-toolbar"),m=k("ion-header"),g=k("report-table"),f=k("ion-content"),P=k("pagination"),y=k("ion-chip"),w=k("ion-footer"),F=k("his-footer"),b=k("ion-page");return V(),x(N,null,[L($(i,{onOnFinish:e.onFinish,skipSummary:!0,fields:e.fields},null,8,["onOnFinish","fields"]),[[T,e.showForm]]),e.showForm?O("",!0):(V(),B(b,{key:0},{default:A(()=>[$(m,null,{default:A(()=>[$(h,null,{default:A(()=>[$(d,null,{default:A(()=>[$(c,null,{default:A(()=>[$(l,{slot:"start"},{default:A(()=>[$(n,{src:e.logo},null,8,["src"]),t[9]||(t[9]=E(" dpbnbnbnbn ",-1))]),_:1,__:[9]})]),_:1}),$(c,null,{default:A(()=>[$(d,{style:{width:"200%"}},{default:A(()=>[$(c,null,{default:A(()=>[E(" Title: "+U(e.title),1)]),_:1}),$(c,null,{default:A(()=>[E(" Period: "+U(e.period),1)]),_:1}),$(c,null,{default:A(()=>[e.customInfo?(V(),B(u,{key:0},{default:A(()=>[E(U(e.customInfo.label)+": "+U(e.customInfo.value),1)]),_:1})):O("",!0)]),_:1})]),_:1})]),_:1}),$(c,null,{default:A(()=>[$(p,{slot:"end",showPerPageFilter:e.showFilters||e.paginated,disableSearchFilter:e.isTableLoading,disablePerPageFilter:e.isTableLoading,totalRowCount:e.tableRows.length,customFilter:e.customFilter,onOnItemsPerPage:t[0]||(t[0]=t=>e.itemsPerPage=t),onOnItemsVLtype:t[1]||(t[1]=t=>e.itemsVLtype=t),onOnSearchFilter:t[2]||(t[2]=t=>e.searchFilter=t)},null,8,["showPerPageFilter","disableSearchFilter","disablePerPageFilter","totalRowCount","customFilter"])]),_:1})]),_:1})]),_:1})]),_:1}),$(f,null,{default:A(()=>[H("div",z,[$(g,{rows:e.rows,paginated:e.paginated,asyncRows:e.asyncRows,rowParser:e.rowParser,config:{...e.config,tableCssTheme:e.tableCssTheme},columns:e.columns,showFilters:e.showFilters,newPage:e.currentPage,searchFilter:e.searchFilter,rowsPerPage:e.itemsPerPage,onOnIsLoading:t[3]||(t[3]=t=>e.isTableLoading=t),onOnTableRows:t[4]||(t[4]=t=>e.tableRows=t),onOnPagination:t[5]||(t[5]=t=>e.totalPages=t.length),onOnActiveColumns:t[6]||(t[6]=t=>e.activeColumns=t),onOnActiveRows:t[7]||(t[7]=t=>e.activeRows=t)},null,8,["rows","paginated","asyncRows","rowParser","config","columns","showFilters","newPage","searchFilter","rowsPerPage"])])]),_:1}),$(w,null,{default:A(()=>[!e.searchFilter&&e.paginated||!e.searchFilter&&e.totalPages>0&&e.paginated?(V(),B(h,{key:0},{default:A(()=>[$(P,{onClickPrevious:()=>{},onClickNext:()=>{},page:1,disableNext:!1,disablePrevious:!1,perPage:e.itemsPerPage,maxVisibleButtons:10,totalPages:e.totalPages,onOnChangePage:t[8]||(t[8]=t=>e.currentPage=t)},null,8,["perPage","totalPages"])]),_:1})):O("",!0),e.showReportStamp?(V(),B(h,{key:1},{default:A(()=>[$(y,{color:"primary"},{default:A(()=>[t[10]||(t[10]=E("Date Created: ",-1)),H("b",null,U(e.date),1)]),_:1,__:[10]}),$(y,{color:"primary"},{default:A(()=>[t[11]||(t[11]=E("MaHIS Version: ",-1)),H("b",null,U(e.coreVersion),1)]),_:1,__:[11]}),$(y,{color:"primary"},{default:A(()=>[t[12]||(t[12]=E("API Version: ",-1)),H("b",null,U(e.apiVersion),1)]),_:1,__:[12]})]),_:1})):O("",!0)]),_:1}),$(F,{color:e.footerColor,btns:e.btns},null,8,["color","btns"])]),_:1}))],64)}],["__scopeId","data-v-83fac94b"]]))}}});
