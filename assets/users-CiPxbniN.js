import{d as G,L as qe,a1 as Fa,bL as Aa,M as Be,_ as h,a2 as Ea,ad as $a,aL as Da,aM as Ha,cb as Na,aN as Ta,aO as Ma,a9 as w,a8 as L,bi as Oa,aa as je,a7 as Se,r as o,bq as Ra,a as Ue,w as fe,c as Ge,bW as za,dA as qa,b$ as We,H as V,e as j,f,l as a,J as t,O as S,k as n,K as P,F as Z,P as Ie,Q as g,u as s,aw as Ba,m as R,aB as ja,bh as ce,dC as He,bf as Ga,I as Wa,G as Ne,E as we,c1 as Ke,aX as Te,N as Me,a6 as Ka,bj as Ja,R as Qa,bg as Xa,b7 as Ya,bC as Za}from"./vendor-CwfdTqwT.js";import{am as Je,U as re,_ as ee,a0 as et,a7 as at,an as Ve,L as ne,B as Y,ao as tt,ap as lt,aq as Oe,a1 as st,ar as Re,as as ze,s as ot,at as nt,K as rt,T as it,r as ut}from"./index-BWB3-Bpq.js";import{B as dt}from"./bottomNavBar--OrpgEgL.js";import{l as pe}from"./lodash-NJiRuGo9.js";import{N as ct}from"./NavigationMenu-x_UHmVnP.js";import{E as pt}from"./EIRreportsStore-BPeEJhe1.js";import"./apexcharts-DLFGMM_U.js";const ft=G({name:"UserCardList",components:{IonContent:Se,IonPage:je,IonGrid:Oa,IonRow:L,IonCol:w,IonCard:Ma,IonCardHeader:Ta,IonCardSubtitle:Na,IonCardTitle:Ha,IonCardContent:Da,IonList:$a,IonItem:Ea,IonLabel:h,bottomNavBar:dt,IonFooter:Be,IonSpinner:Aa,IonText:Fa,IonIcon:qe,editUserModal:Je},props:{users:{type:Array,required:!0},filterValue:{type:String,required:!0},search:{type:String,required:!0}},setup(u,{emit:p}){const k=o(!1),C=Ra({page:1,itemsPerPage:10}),$=o(!0),F=o(""),d=o(""),_=o([]),y=o(0);Ue(()=>{I()}),fe(()=>u.search,(i,m)=>{i!==m&&(C.page=1,I())}),fe(()=>u.filterValue,()=>{});const I=async()=>{try{$.value=!0,F.value="";const i=await re.getAllUsers(C.page,C.itemsPerPage,u.search);y.value=i.count||0,_.value=i.results.map(m=>({userId:m.user_id,username:m.username,roles:T(m.roles),programs:q(m.programs),gender:m.person.gender,status:m.deactivated_on,firstName:ae(m.person.names),lastName:W(m.person.names)}))}catch(i){F.value="Failed to fetch users. Please try again later.",console.error("Error fetching users:",i),_.value=[],y.value=0}finally{$.value=!1}},H=({page:i,itemsPerPage:m})=>{C.page=i,C.itemsPerPage=m,I()},U=Ge(()=>{if(!u.filterValue)return _.value;const i=u.filterValue.toLowerCase();return _.value.filter(m=>m.username.toLowerCase().includes(i)||m.firstName.toLowerCase().includes(i)||m.lastName.toLowerCase().includes(i)||m.userId.toLowerCase().includes(i)||m.roles.some(K=>K.toLowerCase().includes(i))||m.programs.some(K=>K.toLowerCase().includes(i)))}),c=i=>{k.value=!0,d.value=i},N=()=>{k.value=!1,p("reload",k.value),I()},x=()=>{k.value=!1},T=i=>!i||!Array.isArray(i)?[]:i.map(m=>m.role||""),ae=i=>!i||!Array.isArray(i)||i.length===0?"":i[i.length-1].given_name||"",W=i=>!i||!Array.isArray(i)||i.length===0?"":i[i.length-1].family_name||"",q=i=>!i||!Array.isArray(i)?[]:i.map(m=>m.name||"");return{filteredUsers:U,pagination:C,handlePaginationUpdate:H,isLoading:$,error:F,personCircleOutline:We,createOutline:qa,appsOutline:za,openUserProfile:c,user_id:d,isPopooverOpen:k,modalClosed:N,softModalClosed:x,_items_:_,totalCount:y}}}),_t={class:"container"},mt={class:"user-lbl"},vt={class:"user-lbl"},gt={class:"user-lbl"},ht={class:"user-lbl"};function yt(u,p,k,C,$,F){const d=V("ion-text"),_=V("ion-col"),y=V("ion-row"),I=V("ion-spinner"),H=V("ion-icon"),U=V("ion-card-subtitle"),c=V("ion-card-title"),N=V("ion-card-header"),x=V("ion-label"),T=V("ion-item"),ae=V("ion-list"),W=V("ion-card-content"),q=V("ion-card"),i=V("ion-grid"),m=V("editUserModal"),K=V("bottomNavBar"),te=V("ion-footer");return f(),j("div",_t,[a(i,{class:"dynamic-grid"},{default:t(()=>[u.error?(f(),S(y,{key:0},{default:t(()=>[a(_,{size:"12",class:"ion-text-center"},{default:t(()=>[a(d,{color:"danger"},{default:t(()=>[n("p",null,P(u.error),1)]),_:1})]),_:1})]),_:1})):u.isLoading?(f(),S(y,{key:1},{default:t(()=>[a(_,{size:"12",class:"ion-text-center"},{default:t(()=>[a(I,{name:"circular"}),p[0]||(p[0]=n("p",null,"Loading users...",-1))]),_:1})]),_:1})):u._items_.length===0?(f(),S(y,{key:2},{default:t(()=>[a(_,{size:"12",class:"ion-text-center"},{default:t(()=>[...p[1]||(p[1]=[n("p",null,"No users found.",-1)])]),_:1})]),_:1})):(f(),S(y,{key:3,class:"user-cards-row"},{default:t(()=>[(f(!0),j(Z,null,Ie(u._items_,z=>(f(),S(_,{"size-xs":"12","size-sm":"6","size-md":"4","size-lg":"3",key:z.userId},{default:t(()=>[a(q,{class:"user-card"},{default:t(()=>[a(N,null,{default:t(()=>[a(U,null,{default:t(()=>[a(H,{icon:u.personCircleOutline,size:"small",style:{"margin-bottom":"-3px"}},null,8,["icon"]),g(" "+P(z.roles.join(", ")),1)]),_:2},1024),a(c,null,{default:t(()=>[g(P(z.firstName)+" "+P(z.lastName)+" ",1),a(H,{onClick:le=>u.openUserProfile(z.userId),icon:u.createOutline,class:"edit-icon"},null,8,["onClick","icon"])]),_:2},1024)]),_:2},1024),a(W,null,{default:t(()=>[a(ae,null,{default:t(()=>[a(T,null,{default:t(()=>[a(x,null,{default:t(()=>[p[2]||(p[2]=n("h3",null,"User ID",-1)),n("p",mt,P(z.userId),1)]),_:2},1024)]),_:2},1024),a(T,null,{default:t(()=>[a(x,null,{default:t(()=>[p[3]||(p[3]=n("h3",null,"Username",-1)),n("p",vt,P(z.username),1)]),_:2},1024)]),_:2},1024),a(T,null,{default:t(()=>[a(x,null,{default:t(()=>[p[4]||(p[4]=n("h3",null,"Gender",-1)),n("p",gt,P(z.gender),1)]),_:2},1024)]),_:2},1024),a(T,null,{default:t(()=>[a(x,null,{default:t(()=>[n("h3",null,[a(H,{icon:u.appsOutline,size:"small",style:{"margin-bottom":"-3px"}},null,8,["icon"]),p[5]||(p[5]=g(" Programs ",-1))]),n("p",ht,P(z.programs.join(", ")),1)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1}))]),_:1}),a(m,{is_open:u.isPopooverOpen,user_id:u.user_id,onClosePopoover:u.softModalClosed,onSave:u.modalClosed},null,8,["is_open","user_id","onClosePopoover","onSave"]),a(te,{class:"sticky-footer"},{default:t(()=>[a(y,null,{default:t(()=>[a(_,null,{default:t(()=>[a(K,{totalItems:u.totalCount,currentPage:u.pagination.page,itemsPerPage:u.pagination.itemsPerPage,"onUpdate:pagination":u.handlePaginationUpdate},null,8,["totalItems","currentPage","itemsPerPage","onUpdate:pagination"])]),_:1})]),_:1})]),_:1})])}const bt=ee(ft,[["render",yt],["__scopeId","data-v-cf97a1fe"]]),wt=G({watch:{},name:"xxxComponent"}),Vt=G({...wt,props:{action:{}},emits:["saveEvent"],setup(u,{emit:p}){const k=o(),C=o(),$=o(),F=o(),d=o([]),_=o([]),y=[],I=[],H=[],U=[],c=[],N=["Password must be at least 8 characters long and include at least one uppercase letter, one number, and one special character (@#$%^&+=*!-), without spaces","Password does not match"],x=o(),T=o([]),ae=o("Select location"),W=o(!1),q=o(!1),i=o("Select village(s)"),m=o(!1),K=o("Select district(s)"),te=o(!1),z=o("Select TA(s)"),le=o([]),xe=o([]),se=o([]),ie=o([]),_e=o(),Pe=o(),me=o(),ue=o(!0),de=o(!0),ve=et(),Ce=Ge(()=>ve.facilityLocation),ge=o(!0),Qe=u;Ue(async()=>{await ua(),await da(),xe.value=await Ua(),le.value=await xa(),le.value.length>0&&await ta()}),fe(()=>Qe.action,async l=>{await ra()}),fe(()=>ue.value,async l=>{ue.value==!1&&B(d.value)});async function Xe(l){const r={cell_phone_number:Re(b).phone_number,gender:ze(O[0].dataValue.value)};return await new nt(r).update(l)}function Le(l){const e=T.value.find(A=>A.code===l.code),r=e?le.value.filter(A=>A.name===e.district):[];me.value=r,x.value=l}function Ye(l){H.length=0,l.forEach(e=>{H.push(e.village_id)})}function Ze(l){U.length=0,l.forEach(e=>{U.push(e.traditional_authority_id)}),l.forEach(e=>{Ca(e.district_id)})}function ea(l){c.length=0;const e=[];xe.value.forEach(r=>{l.name.toLowerCase()===r.name.toLowerCase()&&e.push(r)}),e.forEach(r=>{c.push(r.district_id)}),e.forEach(r=>{De(r.district_id)}),aa(l)}async function aa(l){T.value=[];try{const e=await ne.getDistrictFacilities(l.name.toLowerCase());T.value.push(...e.facilities)}catch(e){console.error("Error fetching facilities for district ".concat(l.name,":"),e)}x.value=null}async function ta(){try{T.value.push(Ce.value),Le(Ce.value)}catch(l){console.error(l)}}async function la(){try{const l=await re.getCurrentUser();if(l){const e=l.roles.map(r=>r.role);ve.setUserRoles(e),ke("Superuser,Superuser,")==!0&&(ge.value=!1),ke("Superuser,Superuser,")==!1&&(d.value=sa(d.value))}}catch(l){}}function ke(l){return ve.getUserRoles().some(r=>r.toLowerCase()===l.toLowerCase())}function sa(l){const e=l.findIndex(r=>typeof r.name=="string"&&r.name.toLowerCase()==="Superuser,Superuser,".toLowerCase());return e!==-1&&l.splice(e,1),l}async function oa(l){l.is_valid==!1&&(M[0].show_error.value=!0,F.value=l.phone,M[0].dataValue.value=l.phone,M[0].is_phone_valid.value=!1),l.is_valid==!0&&(M[0].show_error.value=!1,F.value=l.phone,M[0].dataValue.value=l.phone,M[0].is_phone_valid.value=!0)}async function na(l){pe.isEmpty(l)==!0,pe.isEmpty(l)==!1}async function ra(){const l=Ae(),e=Ee(),r=Ve(b),A=$e(),J=he(),X=ca(),E=fa(),ye=_a(),Q=pa(),La=ma();if(r==!0&&J==!0&&A==!0&&l==!0&&e==!0&&X==!0&&E==!0&&ye==!0&&Q==!0&&La==!0){const be=Re(b),ka={family_name:be.last_name,given_name:be.firstname,username:be.username,must_append_roles:!1,password:D[0].dataValue.value,programs:I,villages:H,roles:y,gender:ze(O[0].dataValue.value),location_id:x.value.code,phone:M[0].dataValue.value};try{const{user:oe}=await re.createUser(ka);oe&&(await Xe(oe.person.person_id),Fe(oe.user_id))}catch(oe){Fe(""),ot(oe,2e3)}}}const ia=p;function Fe(l){ia("saveEvent",l)}async function ua(){d.value=await re.getAllRoles();const l=[];d.value.forEach(e=>{l.push({name:e.role,other:e})}),d.value=l,await la()}function Ae(){const l=[];if(y.length=0,d.value.forEach(e=>{e.selected==!0&&l.push(e)}),l.forEach(e=>{y.push(e.other.role)}),y.length>0)return v[0].show_error.value=!1,!0;if(y.length==0)return v[0].show_error.value=!0,!1}function Ee(){const l=[];if(I.length=0,_.value.forEach(e=>{e.selected==!0&&l.push(e)}),l.forEach(e=>{I.push(e.other.program_id)}),I.length>0)return v[1].show_error.value=!1,!0;if(I.length==0)return v[1].show_error.value=!0,!1}async function da(){_.value=await at.getAllPrograms();const l=[];_.value.forEach(e=>{l.push({name:e.name,other:e,selected:!1})}),_.value=l}function $e(){let l=!1;return O[0].dataValue.value==null&&(O[0].show_error.value=!0),O[0].dataValue.value!=null&&(O[0].show_error.value=!1,l=!0),l}function ca(){if(pe.isEmpty(x.value)==!0)return W.value=!0,!1;if(pe.isEmpty(x.value)==!1)return W.value=!1,!0}function pa(){if(B(d.value)==!1)return!0;if(B(d.value)==!0){if(H.length==0)return q.value=!0,!1;if(H.length>0)return q.value=!1,!0}}function fa(){if(B(d.value)==!1)return!0;if(B(d.value)==!0){if(c.length==0)return m.value=!0,!1;if(c.length>0)return m.value=!1,!0}}function _a(){if(B(d.value)==!1)return!0;if(B(d.value)==!0){if(U.length==0)return te.value=!0,!1;if(U.length>0)return te.value=!1,!0}}function he(){const[l,e]=D.map(E=>E.dataValue.value),r=N[0],A=N[1];return D.forEach(E=>{E.error_message=r,E.show_error.value=!1}),D.map((E,ye)=>{const Q=!E.dataValue.value;return E.show_error.value=Q,Q}).some(E=>E)||D.map((E,ye)=>{const Q=st(E.dataValue.value);return E.show_error.value=!Q,Q}).some(E=>!E)?!1:l!==e?(D.forEach(E=>{E.error_message=A,E.show_error.value=!0}),!1):!0}const b=[{placeHolder:"username",property_name:"username",dataHandler:ba,dataValue:o(),show_error:o(!1),error_message:"Input required, Only letters allowed"},{placeHolder:"firstname",property_name:"firstname",dataHandler:wa,dataValue:o(),show_error:o(!1),type:"text",error_message:"Input required, Only letters allowed"},{placeHolder:"last name",property_name:"last_name",dataHandler:Va,dataValue:o(),type:"text",show_error:o(!1),error_message:"Input required, Only letters allowed"}];function ma(){if(M[0].is_phone_valid.value==!1)return M[0].show_error.value=!0,!1;if(M[0].is_phone_valid.value==!0)return M[0].show_error.value=!1,!0}const M=[{placeHolder:"phone number",property_name:"phone_number",dataValue:o(),show_error:o(!1),error_message:"Input required, input is invalid",is_phone_valid:o(!1)}],D=[{placeHolder:"new password",dataHandler:Ia,dataValue:o(),show_error:o(!1),error_message:N[0]},{placeHolder:"repeat password",dataHandler:Sa,dataValue:o(),show_error:o(!1),error_message:N[0]}],v=[{multi_Selection:!0,show_list_label:!0,unqueId:"qwerty_8_3698",name_of_list:"Roles",placeHolder:"Search for a field",items:[],listUpdatedFN:va,listFilteredFN:()=>{},searchTextFN:()=>{},use_internal_filter:!0,show_error:o(!1),error_message:"please select a Role",disabled:o(!1)},{multi_Selection:!0,show_list_label:!0,unqueId:"qwerty_8_562",name_of_list:"Programs",placeHolder:"Search for programs",items:[],listUpdatedFN:ga,listFilteredFN:()=>{},searchTextFN:()=>{},use_internal_filter:!0,show_error:o(!1),error_message:"please select a Program",disabled:o(!1)}];function va(l){d.value=l,B(d.value),Ae()}function B(l){const e=["HSA","Health Surveillance"];q.value=!1;let r=!1;return l.forEach(A=>{(A==null?void 0:A.selected)==!0&&e.includes(A==null?void 0:A.name)&&(de.value=!1,r=!0)}),r==!1&&(q.value=!1,de.value=!0),r}function ga(l){_.value=l,_.value.forEach(e=>{e.selected==!0}),Ee()}const O=[{labels:["Male","Female"],selectedOption:o(null),dataHandler:ha,dataValue:o(),show_error:o(!1),error_message:"Please make a selection"}];function ha(l){try{O[0].dataValue.value=l.label}catch(e){O[0].dataValue.value=void 0}$e()}async function ya(l){try{if(l.length>0){const e=await re.doesUsernameExist(l);e.exists==!0?(b[0].show_error.value=!0,b[0].error_message="Username already exists"):e.exists==!1&&(b[0].show_error.value=!1,b[0].error_message="Input required, Only letters allowed")}}catch(e){console.error(e)}}async function ba(l){const e=l.target.value;b[0].dataValue.value=e,await ya(e)}function wa(l){const e=l.target.value;b[1].dataValue.value=e,Ve([b[1]])}function Va(l){const e=l.target.value;b[2].dataValue.value=e,Ve([b[2]])}function Ia(l){const e=l.target.value;D[0].dataValue.value=e,he()}function Sa(l){const e=l.target.value;D[1].dataValue.value=e,he()}async function Ua(){const l=[];for(let e of[1,2,3]){const r=await ne.getDistricts(e);l.push(...r)}return l.forEach(e=>{c.push(e.district_id)}),l.forEach(e=>{De(e.district_id)}),l}async function xa(){return(await ne.getFacilityDistricts()).districts}async function De(l,e){ie.value=[];var r=await ne.getTraditionalAuthorities(l,"");const A=r.map((J,X)=>({...J,assigned_id:X}));ie.value=ie.value.concat(A)}async function Pa(l,e){se.value=[];var r=await ne.getVillages(l,"");const A=r.map((J,X)=>({...J,assigned_id:X}));se.value=se.value.concat(A),se.value.length>0&&(ue.value=!1)}function Ca(l){ue.value=!0,_e.value=[],Pa(l)}return(l,e)=>(f(),j(Z,null,[a(s(L),null,{default:t(()=>[a(s(w),{size:"12","size-md":"6"},{default:t(()=>[a(s(L),null,{default:t(()=>[a(s(w),null,{default:t(()=>[a(s(h),{style:{margin:"10px","margin-left":"0px","margin-top":"0px","margin-bottom":"10px",color:"grey"}},{default:t(()=>[...e[12]||(e[12]=[g("First name",-1),n("span",{style:{color:"#b42318"}},"*",-1)])]),_:1}),a(Y,{placeholder:b[1].placeHolder,icon:s(Ba),inputValue:C.value,"onUpdate:inputValue":b[1].dataHandler},null,8,["placeholder","icon","inputValue","onUpdate:inputValue"]),n("div",null,[b[1].show_error.value?(f(),S(s(h),{key:0,class:"error-label"},{default:t(()=>[g(P(b[1].error_message),1)]),_:1})):R("",!0)])]),_:1})]),_:1}),a(s(L),null,{default:t(()=>[a(s(w),null,{default:t(()=>[a(s(h),{style:{margin:"10px","margin-left":"0px","margin-top":"0px","margin-bottom":"10px",color:"grey"}},{default:t(()=>[...e[13]||(e[13]=[g("Last name",-1),n("span",{style:{color:"#b42318"}},"*",-1)])]),_:1}),a(Y,{placeholder:b[2].placeHolder,icon:s(ja),inputValue:$.value,"onUpdate:inputValue":b[2].dataHandler},null,8,["placeholder","icon","inputValue","onUpdate:inputValue"]),n("div",null,[b[2].show_error.value?(f(),S(s(h),{key:0,class:"error-label"},{default:t(()=>[g(P(b[2].error_message),1)]),_:1})):R("",!0)])]),_:1})]),_:1}),a(s(L),null,{default:t(()=>[a(s(w),null,{default:t(()=>[a(s(h),{style:{margin:"10px","margin-left":"0px","margin-top":"0px","margin-bottom":"10px",color:"grey"}},{default:t(()=>[...e[14]||(e[14]=[g("Username",-1),n("span",{style:{color:"#b42318"}},"*",-1)])]),_:1}),a(Y,{placeholder:b[0].placeHolder,icon:s(We),inputValue:k.value,"onUpdate:inputValue":b[0].dataHandler},null,8,["placeholder","icon","inputValue","onUpdate:inputValue"]),n("div",null,[b[0].show_error.value?(f(),S(s(h),{key:0,class:"error-label"},{default:t(()=>[g(P(b[0].error_message),1)]),_:1})):R("",!0)])]),_:1})]),_:1}),a(s(L),null,{default:t(()=>[a(s(w),null,{default:t(()=>[a(s(h),{style:{margin:"10px","margin-left":"0px","margin-top":"0px","margin-bottom":"10px",color:"grey"}},{default:t(()=>[...e[15]||(e[15]=[g("Gender",-1),n("span",{style:{color:"#b42318"}},"*",-1)])]),_:1}),a(tt,{labels:O[0].labels,"selected-opt":O[0].selectedOption.value,onSelectionEvent:O[0].dataHandler},null,8,["labels","selected-opt","onSelectionEvent"]),n("div",null,[O[0].show_error.value?(f(),S(s(h),{key:0,class:"error-label"},{default:t(()=>[g(P(O[0].error_message),1)]),_:1})):R("",!0)])]),_:1})]),_:1}),a(s(L),null,{default:t(()=>[a(s(w),null,{default:t(()=>[a(lt,{onValidateInput:oa}),n("div",null,[M[0].show_error.value?(f(),S(s(h),{key:0,class:"error-label"},{default:t(()=>[g(P(M[0].error_message),1)]),_:1})):R("",!0)])]),_:1})]),_:1})]),_:1}),a(s(w),{size:"12","size-md":"6"},{default:t(()=>[a(s(L),null,{default:t(()=>[(f(),S(s(w),{key:0},{default:t(()=>[a(s(h),{style:{margin:"10px","margin-left":"0px","margin-top":"0px","margin-bottom":"10px",color:"grey"}},{default:t(()=>[...e[16]||(e[16]=[g("District(s)",-1),n("span",{style:{color:"#b42318"}},"*",-1)])]),_:1}),a(s(ce),{modelValue:me.value,"onUpdate:modelValue":[e[0]||(e[0]=r=>me.value=r),e[1]||(e[1]=r=>ea(r))],multiple:!1,taggable:!1,"hide-selected":!0,"close-on-select":!0,openDirection:"bottom","tag-placeholder":"Find and select District(s)",placeholder:"Find and select District(s)",selectLabel:"",label:"name",searchable:!0,onSearchChange:e[2]||(e[2]=()=>{}),"track-by":"name",options:le.value,disabled:ge.value},null,8,["modelValue","options","disabled"]),n("div",null,[m.value?(f(),S(s(h),{key:0,class:"error-label"},{default:t(()=>[g(P(K.value),1)]),_:1})):R("",!0)])]),_:1}))]),_:1}),a(s(L),null,{default:t(()=>[a(s(w),null,{default:t(()=>[a(s(h),{style:{margin:"10px","margin-left":"0px","margin-top":"0px","margin-bottom":"10px",color:"grey"}},{default:t(()=>[...e[17]||(e[17]=[g("Facility name",-1),n("span",{style:{color:"#b42318"}},"*",-1)])]),_:1}),a(s(ce),{modelValue:x.value,"onUpdate:modelValue":[e[3]||(e[3]=r=>x.value=r),e[4]||(e[4]=r=>Le(r))],multiple:!1,taggable:!1,"hide-selected":!0,"close-on-select":!0,openDirection:"bottom","tag-placeholder":"Find and select facility name",placeholder:"Find and select facility name",selectLabel:"",label:"name",searchable:!0,disabled:ge.value,onSearchChange:e[5]||(e[5]=r=>na(r)),"track-by":"code",options:T.value},null,8,["modelValue","disabled","options"]),n("div",null,[W.value?(f(),S(s(h),{key:0,class:"error-label"},{default:t(()=>[g(P(ae.value),1)]),_:1})):R("",!0)])]),_:1})]),_:1}),a(s(L),null,{default:t(()=>[a(s(w),null,{default:t(()=>[a(s(h),{style:{margin:"10px","margin-left":"0px","margin-top":"0px","margin-bottom":"10px",color:"grey"}},{default:t(()=>[...e[18]||(e[18]=[g("TA(s)",-1),n("span",{style:{color:"#b42318"}},"*",-1)])]),_:1}),a(s(ce),{modelValue:Pe.value,"onUpdate:modelValue":[e[6]||(e[6]=r=>Pe.value=r),e[7]||(e[7]=r=>Ze(r))],multiple:!0,taggable:!1,"hide-selected":!0,"close-on-select":!0,openDirection:"bottom","tag-placeholder":"Find and select Traditional Authority (TA)",placeholder:"Find and select Traditional Authority (TA)",selectLabel:"",label:"name",searchable:!0,onSearchChange:e[8]||(e[8]=()=>{}),"track-by":"assigned_id",options:ie.value,disabled:de.value},null,8,["modelValue","options","disabled"]),n("div",null,[te.value?(f(),S(s(h),{key:0,class:"error-label"},{default:t(()=>[g(P(z.value),1)]),_:1})):R("",!0)])]),_:1})]),_:1}),a(s(L),null,{default:t(()=>[a(s(w),null,{default:t(()=>[a(s(h),{style:{margin:"10px","margin-left":"0px","margin-top":"0px","margin-bottom":"10px",color:"grey"}},{default:t(()=>[...e[19]||(e[19]=[g("Village(s)",-1),n("span",{style:{color:"#b42318"}},"*",-1)])]),_:1}),a(s(ce),{modelValue:_e.value,"onUpdate:modelValue":[e[9]||(e[9]=r=>_e.value=r),e[10]||(e[10]=r=>Ye(r))],multiple:!0,taggable:!1,"hide-selected":!0,"close-on-select":!0,openDirection:"bottom","tag-placeholder":"Find and select village(s)",placeholder:"Find and select village(s)",selectLabel:"",label:"name",searchable:!0,onSearchChange:e[11]||(e[11]=()=>{}),"track-by":"assigned_id",options:se.value,disabled:de.value},null,8,["modelValue","options","disabled"]),n("div",null,[q.value?(f(),S(s(h),{key:0,class:"error-label"},{default:t(()=>[g(P(i.value),1)]),_:1})):R("",!0)])]),_:1})]),_:1})]),_:1})]),_:1}),a(s(L),null,{default:t(()=>[a(s(w),{size:"12","size-md":"6"},{default:t(()=>[a(s(L),null,{default:t(()=>[a(s(w),null,{default:t(()=>[a(s(w),null,{default:t(()=>[a(s(h),{style:{margin:"10px","margin-left":"0px","margin-top":"0px",color:"grey"}},{default:t(()=>[...e[20]||(e[20]=[g("Role(s)",-1),n("span",{style:{color:"#b42318"}},"*",-1)])]),_:1}),a(Oe,{multiSelection:v[0].multi_Selection,show_label:v[0].show_list_label,uniqueId:v[0].unqueId,name_of_list:v[0].name_of_list,choose_place_holder:v[0].placeHolder,"items_-list":d.value,use_internal_filter:v[0].use_internal_filter,disabled:v[0].disabled.value,onItemListUpDated:v[0].listUpdatedFN,onItemListFiltered:v[0].listFilteredFN,onItemSearchText:v[0].searchTextFN},null,8,["multiSelection","show_label","uniqueId","name_of_list","choose_place_holder","items_-list","use_internal_filter","disabled","onItemListUpDated","onItemListFiltered","onItemSearchText"]),n("div",null,[v[0].show_error.value?(f(),S(s(h),{key:0,class:"error-label",style:{"margin-top":"-10px"}},{default:t(()=>[g(P(v[0].error_message),1)]),_:1})):R("",!0)])]),_:1})]),_:1})]),_:1}),a(s(L),null,{default:t(()=>[a(s(w),null,{default:t(()=>[a(s(h),{style:{margin:"10px","margin-left":"0px","margin-top":"0px",color:"grey"}},{default:t(()=>[...e[21]||(e[21]=[g("Program(s)",-1),n("span",{style:{color:"#b42318"}},"*",-1)])]),_:1}),a(Oe,{multiSelection:v[1].multi_Selection,show_label:v[1].show_list_label,uniqueId:v[1].unqueId,name_of_list:v[1].name_of_list,choose_place_holder:v[1].placeHolder,"items_-list":_.value,use_internal_filter:v[1].use_internal_filter,disabled:v[1].disabled.value,onItemListUpDated:v[1].listUpdatedFN,onItemListFiltered:v[1].listFilteredFN,onItemSearchText:v[1].searchTextFN},null,8,["multiSelection","show_label","uniqueId","name_of_list","choose_place_holder","items_-list","use_internal_filter","disabled","onItemListUpDated","onItemListFiltered","onItemSearchText"]),n("div",null,[v[1].show_error.value?(f(),S(s(h),{key:0,class:"error-label"},{default:t(()=>[g(P(v[1].error_message),1)]),_:1})):R("",!0)])]),_:1}),a(s(w))]),_:1}),a(s(L),null,{default:t(()=>[a(s(w),null,{default:t(()=>[a(s(h),{style:{margin:"10px","margin-left":"0px","margin-top":"0px","margin-bottom":"10px",color:"grey"}},{default:t(()=>[...e[22]||(e[22]=[g("Password",-1),n("span",{style:{color:"#b42318"}},"*",-1)])]),_:1}),a(Y,{placeholder:D[0].placeHolder,icon:s(He),inputValue:D[0].dataValue.value,"onUpdate:inputValue":D[0].dataHandler},null,8,["placeholder","icon","inputValue","onUpdate:inputValue"]),n("div",null,[D[0].show_error.value?(f(),S(s(h),{key:0,class:"error-label"},{default:t(()=>[g(P(D[0].error_message),1)]),_:1})):R("",!0)])]),_:1})]),_:1}),a(s(L),null,{default:t(()=>[a(s(w),null,{default:t(()=>[a(s(h),{style:{margin:"10px","margin-left":"0px","margin-top":"0px","margin-bottom":"10px",color:"grey"}},{default:t(()=>[...e[23]||(e[23]=[g("Repeat password",-1),n("span",{style:{color:"#b42318"}},"*",-1)])]),_:1}),a(Y,{placeholder:D[1].placeHolder,icon:s(He),inputValue:D[1].dataValue.value,"onUpdate:inputValue":D[1].dataHandler},null,8,["placeholder","icon","inputValue","onUpdate:inputValue"]),n("div",null,[D[1].show_error.value?(f(),S(s(h),{key:0,class:"error-label"},{default:t(()=>[g(P(D[1].error_message),1)]),_:1})):R("",!0)])]),_:1})]),_:1})]),_:1}),a(s(w),{size:"12","size-md":"6"})]),_:1})],64))}}),It=ee(Vt,[["__scopeId","data-v-731a8d5a"]]),St={style:{display:"flex","align-items":"center"}},Ut={style:{"font-weight":"400","font-size":"19px"}},xt={style:{display:"flex","align-items":"center"}},Pt={class:""},Ct={class:"center text_12"},Lt={style:{"font-weight":"400","font-size":"20px"}},kt={style:{display:"flex","align-items":"center"}},Ft=G({watch:{},name:"xxxComponent"}),At=G({...Ft,props:{is_open:{},user_id:{}},emits:["closePopoover","updated","reload"],setup(u,{emit:p}){const k=o(""),C=o(!1),$=o(),F=p;function d(){k.value=H(100,3)}function _(){Qa.dismiss()}function y(){F("reload","")}function I(U){$.value=U,U&&rt("User created successfully with id: "+$),F("updated",U),_()}function H(U,c){const N=x=>{const T=x==="number"?48:x==="uppercase"?65:97;return String.fromCharCode(Math.floor(Math.random()*(x==="number"?10:26))+T)};return Array.from({length:U},()=>Array.from({length:c},()=>N(["number","uppercase","lowercase"][Math.floor(Math.random()*3)])).join(""))}return(U,c)=>{const N=V("ion-icon"),x=V("ion-row");return f(),j(Z,null,[a(s(Ga),{"is-open":U.is_open,"show-backdrop":!0,onDidDismiss:c[1]||(c[1]=T=>U.$emit("closePopoover",!1)),"keyboard-close":!1},{default:t(()=>[a(s(Wa),null,{default:t(()=>[a(s(Ne),null,{default:t(()=>[a(s(we),null,{default:t(()=>[n("div",St,[a(N,{icon:s(Ke),class:"sub-menu-icon"},null,8,["icon"]),c[3]||(c[3]=n("b",{style:{"margin-left":"6px"}},"Add User",-1))])]),_:1}),a(s(Te),{slot:"end"},{default:t(()=>[a(s(we),null,{default:t(()=>[a(s(Me),{onClick:c[0]||(c[0]=T=>U.$emit("closePopoover",!1)),fill:"solid"},{default:t(()=>[n("span",Ut,[n("div",xt,[a(N,{icon:s(Ka),slot:"start",class:"sub-menu-icon"},null,8,["icon"]),c[4]||(c[4]=n("span",{style:{"margin-left":"6px"}},"Close",-1))])])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),a(s(Se),{class:"ion-padding"},{default:t(()=>[n("div",Pt,[n("div",Ct,[a(x,null,{default:t(()=>[a(s(w),null,{default:t(()=>[a(It,{user_id:$.value,action:k.value,onSaveEvent:I},null,8,["user_id","action"])]),_:1})]),_:1})])])]),_:1}),a(s(Be),{translucent:!0},{default:t(()=>[a(s(Ne),null,{default:t(()=>[a(s(Te),{slot:"end"},{default:t(()=>[a(s(we),null,{default:t(()=>[a(s(Me),{onClick:d,fill:"solid",color:"success"},{default:t(()=>[n("span",Lt,[n("div",kt,[a(N,{icon:s(Ja),slot:"start",class:"sub-menu-icon"},null,8,["icon"]),c[5]||(c[5]=n("span",{style:{"margin-left":"6px"}},"Save",-1))])])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["is-open"]),a(Je,{is_open:C.value,user_id:$.value,onClosePopoover:c[2]||(c[2]=T=>C.value=!1),onUpdated:y},null,8,["is_open","user_id"])],64)}}}),Et=ee(At,[["__scopeId","data-v-79045015"]]),$t=G({__name:"usersTemplate",props:{items:{},search_fields:{}},emits:["reload","closeModal"],setup(u,{emit:p}){const k=o(""),C=o(!1),$=o(""),F={name:"add user",show:!0,fn:_,icon:Ke,show_icon:!0},d=[{placeHolder:"Search for username",dataHandler:y,dataValue:o(),show_error:o(!1),error_message:"Please provide a reason"}];function _(){C.value=!0,$.value=""}function y(c){k.value=c.target.value}function I(c){U("reload",c)}function H(c){U("closeModal",c)}const U=p;return(c,N)=>(f(),j(Z,null,[a(s(L),{class:"search-container"},{default:t(()=>[a(s(L),{class:"search-row"},{default:t(()=>[a(s(w),{class:"input-col"},{default:t(()=>[a(Y,{placeholder:d[0].placeHolder,icon:s(Xa),inputValue:d[0].dataValue.value,"onUpdate:inputValue":d[0].dataHandler,minHeight:50,"-inner-action-btn-propeties":F,"onUpdate:InnerActionBtnPropetiesAction":F.fn},null,8,["placeholder","icon","inputValue","onUpdate:inputValue","onUpdate:InnerActionBtnPropetiesAction"])]),_:1})]),_:1})]),_:1}),a(s(L),null,{default:t(()=>[a(s(w),{size:"12"},{default:t(()=>[a(bt,{users:c.items,filterValue:k.value,onReload:H,search:k.value},null,8,["users","filterValue","search"])]),_:1})]),_:1}),a(Et,{is_open:C.value,user_id:$.value,onClosePopoover:N[0]||(N[0]=x=>C.value=!1),onUpdated:I},null,8,["is_open","user_id"])],64))}}),Dt=ee($t,[["__scopeId","data-v-06560bf6"]]),Ht=G({name:"TableSkeletonLoader"}),Nt={class:"skeleton-wrapper"},Tt={class:"cards-grid"},Mt={class:"card-content"};function Ot(u,p,k,C,$,F){return f(),j("div",Nt,[p[2]||(p[2]=Ya('<div class="search-bar" data-v-d6f00683><div class="search-container" data-v-d6f00683><div class="search-label skeleton-text" data-v-d6f00683></div><div class="search-chip" data-v-d6f00683></div><div class="add-button" data-v-d6f00683></div></div></div>',1)),n("div",Tt,[(f(),j(Z,null,Ie(6,d=>n("div",{key:"card-".concat(d),class:"skeleton-card"},[p[1]||(p[1]=n("div",{class:"card-header"},[n("div",{class:"role-text small-skeleton"}),n("div",{class:"name-text large-skeleton"})],-1)),n("div",Mt,[(f(),j(Z,null,Ie(4,_=>n("div",{class:"info-row",key:"field-".concat(_)},[...p[0]||(p[0]=[n("div",{class:"label-skeleton"},null,-1),n("div",{class:"value-skeleton"},null,-1)])])),64))])])),64))])])}const Rt=ee(Ht,[["render",Ot],["__scopeId","data-v-d6f00683"]]),zt=G({name:"Users",components:{IonContent:Se,IonPage:je,IonRow:L,IonCol:w,IonIcon:qe,Toolbar:it,usersTemplate:Dt,NavigationMenu:ct,TableSkeletonLoader:Rt},setup(){const u=o(!1),p=o(!0),k=o([{value:"username",name:"username",selected:!0}]),C=o(""),$=o([]);Ue(async()=>{y(),await F()});async function F(){p.value=!1}function d(I){I==!1&&setTimeout(()=>{F()},500)}function _(I){ut.push(I)}function y(){pt().setNavigationPayload("Manage Users",!0,!1,"/","home","")}return{isPopooverOpen:u,user_id:C,_items_:$,search_fields_:k,nav:_,chevronBackOutline:Za,initNavData:y,getUsers:F,isLoading:p,closeModal:d}},watch:{$route:{async handler(u){u.name=="users"&&this.initNavData(),await this.getUsers()},deep:!0}}});function qt(u,p,k,C,$,F){const d=V("NavigationMenu"),_=V("TableSkeletonLoader"),y=V("usersTemplate"),I=V("ion-content"),H=V("ion-page");return f(),S(H,null,{default:t(()=>[a(d),a(I,{fullscreen:!0},{default:t(()=>[u.isLoading?(f(),S(_,{key:0})):(f(),S(y,{key:1,items:u._items_,search_fields:u.search_fields_,onReload:u.getUsers,onCloseModal:u.closeModal},null,8,["items","search_fields","onReload","onCloseModal"]))]),_:1})]),_:1})}const Xt=ee(zt,[["render",qt],["__scopeId","data-v-15fbe288"]]);export{Xt as default};
