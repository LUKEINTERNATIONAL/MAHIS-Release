System.register(["./vendor-legacy-qLaA4lfC.js","./index-legacy-Bh_KV0Am.js","./lodash-legacy-pOOc9Efu.js","./patient_type_service-legacy-F0JgV1Px.js","./SelectFacility-legacy-Dbv9Uepw.js","./BasicRadioSelect-legacy-B6DIQpnb.js","./app_encounter_service-legacy-DK_afvJ-.js"],function(e,t){"use strict";var a,l,n,i,p,r,s,u,y,c,d,o,v,T,_,f,g,m,F,h,P,w,b,j,x;return{setters:[e=>{a=e.d,l=e.r,n=e.cX,i=e.a,p=e.y,r=e.f,s=e.z,u=e.l,y=e.u,c=e.aZ,d=e.bh,o=e.m,v=e.aa,T=e.ab,_=e.k,f=e.A,g=e.b0},e=>{m=e.P,F=e.t,h=e.j,P=e._},e=>{w=e.l},e=>{b=e.P},e=>{j=e.S},e=>{x=e.B},null],execute:function(){var t=document.createElement("style");t.textContent="ion-note[data-v-98d98bfd]{font-weight:700;color:red;font-style:italic;padding:10px}\n/*$vite$:1*/",document.head.appendChild(t),e("default",P(a({__name:"ARTPatientType",setup(e,{expose:t}){const a=l(!1),P=l([]);l([]);const S=new m,q=new b(S.getID(),-1),A=l({}),I=n({patientType:null,prevType:null,transerFacility:null});function V(){return A.value={},I.patientType||(A.value.patientType="Patient type is required",F("Patient type is required")),/new patient/i.test(I.patientType)||I.patientType===I.prevType||I.transerFacility||(A.value.transerFacility="Facility is required",F("Facility is required")),w.isEmpty(A.value)}return i(()=>{a.value=!0,P.value=b.getPatientTypes(),q.loadPatientType().then(()=>{const e=q.getType();e&&!/n\/a/i.test(e)&&(I.prevType=q.getType(),I.patientType=q.getType())}).finally(()=>{a.value=!1})}),t({validateAll:V,onSubmit:async function(e=null){var t;if(I.patientType===I.prevType)return!0;if(!V())return!1;const a=new b(null!=e?e:S.getID(),-1);a.setPatientType(I.patientType),a.setLocationName((null===(t=I.transerFacility)||void 0===t?void 0:t.name)||"");try{return await a.save()?(h("Patient type saved successfully"),!0):(F("Failed to save patient type"),!1)}catch(l){return F(`Failed to save patient type: ${l}`),!1}}}),(e,t)=>(r(),p(y(g),null,{default:s(()=>[u(y(c),null,{default:s(()=>[u(y(d),null,{default:s(()=>[u(y(v),null,{default:s(()=>[u(y(T),null,{default:s(()=>[u(x,{required:"",label:"Patient Type",modelValue:I.patientType,"onUpdate:modelValue":t[0]||(t[0]=e=>I.patientType=e),options:P.value},null,8,["modelValue","options"])]),_:1})]),_:1}),I.prevType===I.patientType||/new patient/i.test(I.patientType)?o("",!0):(r(),p(y(v),{key:0},{default:s(()=>[u(y(T),null,{default:s(()=>[t[2]||(t[2]=_("h2",{style:{"font-weight":"bold",margin:"12px"}},[f("Facility "),_("span",{style:{color:"red"}},"*")],-1)),u(j,{show_error:!1,selected_district_ids:[],selected_location:null,onFacilitySelected:t[1]||(t[1]=e=>{I.transerFacility=e.selected_location})})]),_:1,__:[2]})]),_:1}))]),_:1})]),_:1})]),_:1}))}}),[["__scopeId","data-v-98d98bfd"]]))}}});
