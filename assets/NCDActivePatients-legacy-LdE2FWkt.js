System.register(["./vendor-legacy-qLaA4lfC.js","./NavigationMenu-legacy-BEh9l4W4.js","./EIRreportsStore-legacy-BdL_d_iB.js","./index-legacy-Bh_KV0Am.js","./bottomNavBar-legacy-Cg0Ee4HL.js","./lodash-legacy-pOOc9Efu.js"],function(e,t){"use strict";var a,n,i,l,o,s,r,d,c,u,f,p,g,m,v,b,h,x,y,_,w,P,k,C,I,D,O,z,A,N,E,S,V,H,U,j,B,F,L,T,$,M,R,J,W,Y,q,G,K,Q,X,Z,ee,te,ae,ne,ie,le;return{setters:[e=>{a=e.d,n=e.I,i=e.W,l=e.ab,o=e.aa,s=e.bh,r=e.aZ,d=e.a_,c=e.a$,u=e.b0,f=e.U,p=e.T,g=e.af,m=e.S,v=e.a9,b=e.cl,h=e.cT,x=e.cU,y=e.cV,_=e.aE,w=e.aS,P=e.cW,k=e.c5,C=e.aK,I=e.aJ,D=e.E,O=e.e,z=e.f,A=e.k,N=e.l,E=e.z,S=e.F,V=e.L,H=e.A,U=e.B,j=e.m,B=e.$,F=e.y,L=e.p,T=e.bQ,$=e.b2,M=e.r,R=e.cX,J=e.a,W=e.w,Y=e.i,q=e.u,G=e.c6,K=e.v,Q=e.V},e=>{X=e.N},e=>{Z=e.E},e=>{ee=e.P,te=e.u,ae=e._,ne=e.I,ie=e.B},e=>{le=e.b},null],execute:function(){var t=document.createElement("style");t.textContent="ion-card[data-v-843fbd69]{height:fit-content;transition:height .3s ease;position:relative;border-radius:12px}ion-col[data-v-843fbd69]{display:flex}ion-card[data-v-843fbd69]{width:100%}.absolute[data-v-843fbd69]{position:absolute;top:.5rem;right:.5rem}.font-semibold[data-v-843fbd69]{font-size:15px;font-weight:600}.hover\\:bg-indigo-100[data-v-843fbd69]:hover{background-color:rgba(199,210,254,.5)}.shadow-md[data-v-843fbd69]{box-shadow:0 4px 6px -1px rgba(0,0,0,.1),0 2px 4px -1px rgba(0,0,0,.06)}.shadow-lg[data-v-843fbd69]{box-shadow:0 10px 15px -3px rgba(0,0,0,.1),0 4px 6px -2px rgba(0,0,0,.05)}.shadow-inner[data-v-843fbd69]{box-shadow:inset 0 2px 4px rgba(0,0,0,.05)}.transition-shadow[data-v-843fbd69]{transition:box-shadow .3s ease}.transition-colors[data-v-843fbd69]{transition:background-color .2s ease}.card-content[data-v-843fbd69]{transition:max-height .3s ease;overflow:hidden}ion-row>div[data-v-843fbd69]{display:flex;align-items:stretch}.loader-container[data-v-0093b847]{display:flex;align-items:center;justify-content:center}.fullscreen[data-v-0093b847]{position:fixed;top:0;left:0;width:100%;height:100%;background-color:rgba(255,255,255,.8);z-index:9999}.inline[data-v-0093b847]{padding:1rem;width:100%;height:100px;margin:1rem 0}.loader-content[data-v-0093b847]{display:flex;flex-direction:column;align-items:center;gap:1rem}.spinner[data-v-0093b847]{position:relative;width:50px;height:50px}.spinner-ring[data-v-0093b847]{position:absolute;width:100%;height:100%;border:4px solid transparent;border-top-color:#3880ff;border-radius:50%;animation:spin-0093b847 1s linear infinite}.spinner-core[data-v-0093b847]{position:absolute;top:50%;left:50%;width:30%;height:30%;background-color:#3880ff;border-radius:50%;transform:translate(-50%,-50%);animation:pulse-0093b847 1.5s ease-in-out infinite}.loader-message[data-v-0093b847]{font-size:14px;color:#333;font-weight:600}@keyframes spin-0093b847{0%{transform:rotate(0)}to{transform:rotate(360deg)}}@keyframes pulse-0093b847{0%,to{opacity:.5;transform:translate(-50%,-50%) scale(.8)}50%{opacity:1;transform:translate(-50%,-50%) scale(1)}}.search-container[data-v-938afe99]{position:sticky;top:0;z-index:1000}.container[data-v-938afe99]{display:flex;flex-direction:column;height:100%}.scrollable-content[data-v-938afe99]{flex:1;overflow-y:auto}\n/*$vite$:1*/",document.head.appendChild(t);const oe=a({name:"ClientDetailsCard",components:{IonContent:v,IonHeader:m,IonPage:g,IonTitle:p,IonToolbar:f,IonCard:u,IonCardHeader:c,IonCardTitle:d,IonCardContent:r,IonGrid:s,IonRow:o,IonCol:l,IonButton:i,IonIcon:n},props:{clients:{type:Array,required:!0}},setup:()=>({personOutline:I,locationOutline:C,informationCircleOutline:k,documentTextOutline:P,calendarOutline:w,heartOutline:_,briefcaseOutline:y,schoolOutline:x,ribbonOutline:h,openOutline:b}),methods:{calculateAge(e){const t=new Date,a=new Date(e);let n=t.getFullYear()-a.getFullYear();const i=t.getMonth()-a.getMonth();return(i<0||0===i&&t.getDate()<a.getDate())&&n--,n},formatDate:e=>new Date(e).toLocaleDateString(),findPersonAttribute(e,t){const a=e.person.person_attributes.find(e=>e.type.name===t);return a?a.value:"N/A"},toggleDetails(e){e.showDetails=!e.showDetails},async openClientProfile(e){e.forEach(async e=>{if(3==e.type.patient_identifier_type_id){const t=await ee.findByNpid(e.identifier);te().setPatientRecord(t[0]),this.redirectUser()}})},redirectUser(){const e=JSON.parse(localStorage.getItem("userRoles")),t=e||[];t.some(e=>t.some(e=>"Pharmacist"===e.role))?this.$router.push("NCDDispensations"):this.$router.push("patientProfile")}},mounted(){this.clients.forEach(e=>{e.showDetails=!1})},emits:["view-profile"]}),se={class:"flex items-center mb-3"},re={class:"flex flex-col"},de={class:"font-semibold text-gray-800"},ce={class:"flex items-center mb-3"},ue={class:"flex flex-col"},fe={class:"font-semibold text-gray-800"},pe={class:"mt-4"},ge={class:"flex items-center mb-3 p-2 hover:bg-indigo-100 rounded transition-colors duration-200"},me={class:"flex flex-col"},ve={class:"font-semibold text-gray-800"},be={class:"flex items-center mb-3 p-2 hover:bg-indigo-100 rounded transition-colors duration-200"},he={class:"flex flex-col"},xe={class:"font-semibold text-gray-800"},ye={class:"flex items-center mb-3 p-2 hover:bg-indigo-100 rounded transition-colors duration-200"},_e={class:"flex flex-col"},we={class:"font-semibold text-gray-800"},Pe={class:"flex items-center mb-3 p-2 hover:bg-indigo-100 rounded transition-colors duration-200"},ke={class:"flex flex-col"},Ce={class:"font-semibold text-gray-800"},Ie={class:"flex items-center mb-3 p-2 hover:bg-indigo-100 rounded transition-colors duration-200"},De={class:"flex flex-col"},Oe={class:"font-semibold text-gray-800"},ze=ae(oe,[["render",function(e,t,a,n,i,l){const o=D("ion-button"),s=D("ion-card-title"),r=D("ion-col"),d=D("ion-icon"),c=D("ion-row"),u=D("ion-card-header"),f=D("ion-grid"),p=D("ion-card-content"),g=D("ion-card");return z(),O("div",null,[A("div",null,[N(c,null,{default:E(()=>[(z(!0),O(S,null,V(e.clients,a=>(z(),O("div",{key:a.patient_id,style:{width:"380px",margin:"10px"}},[N(g,{class:"shadow-md hover:shadow-lg transition-shadow",style:{width:"100%"}},{default:E(()=>[N(u,{class:"relative"},{default:E(()=>[N(c,null,{default:E(()=>[N(r,{class:"ion-text-left"},{default:E(()=>[N(s,{class:"text-indigo-800"},{default:E(()=>[N(o,{fill:"clear",style:{"font-size":"1.4rem","margin-left":"-30px"},onClick:t=>e.openClientProfile(a.patient_identifiers)},{default:E(()=>[H(U(a.person.names[0].given_name)+" "+U(a.person.names[0].family_name),1)]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024),N(r,null,{default:E(()=>[N(o,{fill:"clear",class:"absolute top-0 right-0 z-10 text-indigo-600",onClick:t=>e.openClientProfile(a.patient_identifiers),style:{"font-size":"1.4rem"}},{default:E(()=>[N(d,{icon:e.openOutline,style:{"font-size":"2rem"}},null,8,["icon"])]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1024),N(p,{class:"card-content"},{default:E(()=>{var n,i;return[A("div",se,[N(d,{icon:e.personOutline,class:"mr-2 flex-shrink-0 text-indigo-600"},null,8,["icon"]),A("div",re,[A("span",de,U(a.person.gender)+" | "+U(e.calculateAge(a.person.birthdate))+" years",1)])]),A("div",ce,[N(d,{icon:e.locationOutline,class:"mr-2 flex-shrink-0 text-indigo-600"},null,8,["icon"]),A("div",ue,[A("span",fe,U(null===(n=a.person.addresses[0])||void 0===n?void 0:n.city_village)+", "+U(null===(i=a.person.addresses[0])||void 0===i?void 0:i.state_province),1)])]),A("div",pe,[N(o,{onClick:t=>e.toggleDetails(a),fill:"outline",size:"small",class:"border-indigo-600 text-indigo-600 hover:bg-indigo-50"},{default:E(()=>[N(d,{icon:e.informationCircleOutline,class:"mr-2"},null,8,["icon"]),H(" "+U(a.showDetails?"Hide Details":"Show More Details"),1)]),_:2},1032,["onClick"]),a.showDetails?(z(),O("div",{key:0,class:"mt-4 bg-indigo-50 p-4 rounded-lg border border-indigo-100 shadow-inner",style:B({maxHeight:a.showDetails?"1000px":"0"})},[t[0]||(t[0]=A("h3",{class:"text-lg font-semibold mb-3 flex items-center text-indigo-800 border-b border-indigo-200 pb-2"}," Personal Information ",-1)),N(f,null,{default:E(()=>[N(c,null,{default:E(()=>[N(r,{size:"auto"},{default:E(()=>[A("div",ge,[N(d,{icon:e.calendarOutline,class:"mr-2 flex-shrink-0 text-indigo-600"},null,8,["icon"]),A("div",me,[A("span",ve,U(e.formatDate(a.person.birthdate)),1)])])]),_:2},1024),N(r,{size:"auto"},{default:E(()=>[A("div",be,[N(d,{icon:e.heartOutline,class:"mr-2 flex-shrink-0 text-indigo-600"},null,8,["icon"]),A("div",he,[A("span",xe,U(e.findPersonAttribute(a,"Civil Status")),1)])])]),_:2},1024),N(r,{size:"auto"},{default:E(()=>[A("div",ye,[N(d,{icon:e.briefcaseOutline,class:"mr-2 flex-shrink-0 text-indigo-600"},null,8,["icon"]),A("div",_e,[A("span",we,U(e.findPersonAttribute(a,"Occupation")),1)])])]),_:2},1024),N(r,{size:"auto"},{default:E(()=>[A("div",Pe,[N(d,{icon:e.schoolOutline,class:"mr-2 flex-shrink-0 text-indigo-600"},null,8,["icon"]),A("div",ke,[A("span",Ce,U(e.findPersonAttribute(a,"EDUCATION LEVEL")),1)])])]),_:2},1024),N(r,{size:"12","size-md":"6"},{default:E(()=>[A("div",Ie,[N(d,{icon:e.ribbonOutline,class:"mr-2 flex-shrink-0 text-indigo-600"},null,8,["icon"]),A("div",De,[A("span",Oe,U(e.findPersonAttribute(a,"Religion")),1)])])]),_:2},1024)]),_:2},1024)]),_:2},1024),t[1]||(t[1]=A("h3",{class:"text-lg font-semibold mt-3 mb-2"},"Identifiers",-1)),N(f,null,{default:E(()=>[N(c,null,{default:E(()=>[(z(!0),O(S,null,V(a.patient_identifiers,e=>(z(),F(r,{key:e.uuid,size:"auto"},{default:E(()=>[A("p",null,[A("strong",null,U(e.type.name)+":",1),H(" "+U(e.identifier),1)])]),_:2},1024))),128))]),_:2},1024)]),_:2},1024)],4)):j("",!0)])]}),_:2},1024)]),_:2},1024)]))),128))]),_:1})])])}],["__scopeId","data-v-843fbd69"]]),Ae={class:"loader-content"},Ne={key:0,class:"loader-message"},Ee=a({name:"ModernLoader"}),Se=a({...Ee,props:{message:{type:String,default:"Loading..."},fullscreen:{type:Boolean,default:!1}},setup:e=>(t,a)=>(z(),O("div",{class:L(["loader-container",{fullscreen:e.fullscreen,inline:!e.fullscreen}])},[A("div",Ae,[a[0]||(a[0]=A("div",{class:"spinner"},[A("div",{class:"spinner-ring"}),A("div",{class:"spinner-core"})],-1)),e.message?(z(),O("div",Ne,U(e.message),1)):j("",!0)])],2))}),Ve=ae(Se,[["__scopeId","data-v-0093b847"]]),He={class:"container"},Ue={key:1,class:"scrollable-content"},je=a({name:"xxxComponent"}),Be=a({...je,setup(e){const t=T(),a=ne(),{userFacilityName:n,user_ID:i}=$(a),s=M(""),r=M(0),d=M([]),c=M(""),u=M(""),f=M(""),p=R({page:1,itemsPerPage:10}),m=M(!1),b=M(!0),h=({page:e,itemsPerPage:t})=>{p.page=e,p.itemsPerPage=t,x()},x=async(e=!0)=>{e&&(m.value=!0);try{const e=await ee.getNCDActivePatientsFfromMongo(p.page,p.itemsPerPage,c.value,u.value,f.value);r.value=e.count,d.value=e.results}catch(t){}finally{e&&(m.value=!1,b.value=!1)}},y=[{placeHolder:"Search for client",dataHandler:async function(e){try{s.value=e.target.value,c.value="",u.value="",f.value="",s.value.length>0?(function(e){y[0].dataValue.value=e;const t=e.split(" ");c.value=t[0],u.value=t.length>=2?t[1]:"",f.value=t.length>=3?t[2]:""}(s.value),p.page=1,await x()):await x(!1)}catch(t){await x(!1)}},dataValue:M(),show_error:M(!1),error_message:"Please provide a reason"}],_=()=>{Z().setNavigationPayload(`NCD Active Patients (${n.value})`,!0,!1,"/","home",""),x()};return J(async()=>{_()}),W(()=>t.name,e=>{"NCDActivePatients"===e&&_()},{immediate:!0}),(e,t)=>(z(),F(q(g),null,{default:E(()=>[N(X),b.value?(z(),F(Ve,{key:0,fullscreen:!0,message:"Loading patient data..."})):j("",!0),Y(N(q(v),null,{default:E(()=>[A("div",He,[N(q(o),{class:"search-container"},{default:E(()=>[N(q(o),{class:"search-row"},{default:E(()=>[N(q(l),{class:"input-col"},{default:E(()=>[N(ie,{placeholder:y[0].placeHolder,icon:q(G),inputValue:y[0].dataValue.value,"onUpdate:inputValue":y[0].dataHandler,minHeight:50,"-inner-action-btn-propeties":"","onUpdate:InnerActionBtnPropetiesAction":e=>""},null,8,["placeholder","icon","inputValue","onUpdate:inputValue"])]),_:1})]),_:1})]),_:1}),m.value&&!b.value?(z(),F(Ve,{key:0,message:"Fetching patients..."})):j("",!0),m.value?j("",!0):Y((z(),O("div",Ue,[!m.value||d.value.length>0?(z(),F(q(o),{key:0},{default:E(()=>[N(ze,{clients:d.value},null,8,["clients"])]),_:1})):j("",!0)],512)),[[K,!b.value]])])]),_:1},512),[[K,!b.value]]),Y(N(q(Q),{class:"sticky-footer"},{default:E(()=>[N(q(o),null,{default:E(()=>[N(q(l),{size:"12",style:{"max-width":"100%"}},{default:E(()=>[N(le,{totalItems:r.value,currentPage:p.page,itemsPerPage:p.itemsPerPage,"onUpdate:pagination":h},null,8,["totalItems","currentPage","itemsPerPage"])]),_:1})]),_:1})]),_:1},512),[[K,!b.value]])]),_:1}))}});e("default",ae(Be,[["__scopeId","data-v-938afe99"]]))}}});
