System.register(["./vendor-legacy-CCRc-I5f.js","./OutcomeModal-legacy-Bnn7PGnU.js","./index-legacy-CPVrS3n3.js","./ncd_appointment_service-legacy-CnlIaYas.js","./SetRelationship.vue_vue_type_script_lang-legacy-CH6X6QRg.js","./relationship_service-legacy-Cd9hikrK.js","./AddVillage-legacy-itJWv02N.js","./DemographicBar-legacy-m2WPe4Y-.js","./SaveProgressModal-legacy-D1E-5iB6.js","./Stepper-legacy-pyUjhakX.js","./diagnosis-legacy-BWcPr0Bf.js","./NCDNumber-legacy-BDunHvr6.js"],function(t,a){"use strict";var e,i,n,o,r,s,l,d,u,c,h,m,p,g,v,f,b,y,I,_,D,L,w,C,N,x,S,M,T,H,R,E,V,F,k,U,B,P,A,j,G,O,z,Y,$,W,J,q,X,Z,K,Q,tt,at,et,it,nt,ot,rt,st,lt,dt,ut,ct,ht,mt,pt,gt,vt,ft;return{setters:[t=>{e=t.d,i=t.al,n=t.U,o=t.T,r=t.am,s=t.an,l=t.G,d=t.S,u=t.ao,c=t.O,h=t.E,m=t.y,p=t.f,g=t.bg,v=t.D,f=t.M,b=t.J,y=t.ae,I=t.bI,_=t.af,D=t.ad,L=t.ag,w=t.W,C=t.au,N=t.bj,x=t.dw,S=t.cj,M=t.dx,T=t.ai,H=t.ck},t=>{R=t.D},t=>{E=t.aB,V=t.S,F=t.H,k=t.x,U=t.E,B=t.g,P=t.ah,A=t.aX,j=t.y,G=t.aa,O=t.u,z=t._,Y=t.A,$=t.L,W=t.b,J=t.aY,q=t.w,X=t.z,Z=t.T,K=t.ao,Q=t.d,tt=t.R,at=t.V,et=t.a7,it=t.i},t=>{nt=t.B,ot=t.u},t=>{rt=t._},t=>{st=t.R},t=>{lt=t.a,dt=t.A},t=>{ut=t.D},t=>{ct=t.a,ht=t.c,mt=t.S},t=>{pt=t.S},t=>{gt=t.D},t=>{vt=t.F,ft=t.S}],execute:function(){var a=document.createElement("style");a.textContent=".demographics_title[data-v-e9af8ecb]{font-weight:700;font-size:24px}.gender[data-v-e9af8ecb]{display:flex;justify-content:space-between;max-width:170px;padding-top:10px}.gender_title[data-v-e9af8ecb]{margin-top:30px}.demographics_title[data-v-90a41f74]{font-weight:700;font-size:24px}.gender[data-v-90a41f74]{display:flex;justify-content:space-between;max-width:170px;padding-top:10px}.gender_title[data-v-90a41f74]{margin-top:30px}.demographics_title[data-v-71017ef3]{font-weight:700;font-size:24px}.gender[data-v-71017ef3]{display:flex;justify-content:space-between;max-width:170px;padding-top:10px}.gender_title[data-v-71017ef3]{margin-top:30px}.demographics_title[data-v-c8549609]{font-weight:700;font-size:24px}.gender[data-v-c8549609]{display:flex;justify-content:space-between;max-width:170px;padding-top:10px}.gender_title[data-v-c8549609]{margin-top:30px}.demographics_title[data-v-2bea4306]{font-weight:700;font-size:24px}.gender[data-v-2bea4306]{display:flex;justify-content:space-between;max-width:170px;padding-top:10px}.gender_title[data-v-2bea4306]{margin-top:30px}ion-footer[data-v-b30abc8f]{border-top:1px solid #e6e6e6;display:block;position:relative;-ms-flex-order:1;order:1;width:100%;background:rgba(244,244,244,.957)}.breadcrumbs[data-v-b30abc8f]{font-weight:400;font-size:14px;cursor:pointer}ion-toolbar[data-v-b30abc8f]{--opacity: .5;--background: var(--ion-background-color, #fff)}.header[data-v-b30abc8f]{color:#000;display:flex;justify-content:space-between;padding:10px 20px}.footer[data-v-b30abc8f]{color:#000;display:flex;justify-content:space-between;padding:5px 0}.footer2[data-v-b30abc8f]{color:#000;display:flex;justify-content:right;padding:5px 0;margin-right:40px}ion-breadcrumb ion-icon[data-v-b30abc8f]{margin-inline:30px}.breadcrumb-active[data-v-b30abc8f]{color:var(--color)}.active[data-v-b30abc8f]{color:#00190e;display:flex;height:40px;padding:0 16px;align-items:center;gap:8px}.active .breadcrumb-text[data-v-b30abc8f]{border-bottom:1px solid #00190e}ion-footer[data-v-b30abc8f]{border-top:1px solid #e6e6e6}.icon_div[data-v-b30abc8f]{display:flex;justify-content:space-between;width:70px;position:absolute;right:70px;top:20px}.active_icon[data-v-b30abc8f]{font-size:25px;background-color:#ded;color:#6fbd70;border-radius:5px}.inactive_icon[data-v-b30abc8f]{font-size:25px;color:#ccc}.container[data-v-b30abc8f]{position:relative}.title[data-v-b30abc8f]{text-align:center;margin-bottom:10px}.demographics_title[data-v-b30abc8f]{font-weight:700;font-size:24px;padding-top:20px}.demographics[data-v-b30abc8f]{display:flex;width:unset;justify-content:center}\n/*$vite$:1*/",document.head.appendChild(a);const bt=e({name:"Menu",components:{IonContent:u,IonHeader:d,IonItem:l,IonList:s,IonMenu:r,IonTitle:o,IonToolbar:n,BasicCard:nt},data:()=>({cardData:{},inputField:"",setName:"",initialPersonalData:[],selectedCountry:[]}),watch:{personInformation:{handler(){this.buildCards()},deep:!0},patient:{handler(){this.setData()},deep:!0}},props:{editable:{default:!1}},computed:{...i(P,["personInformation"]),...i(P,["guardianInformation"]),...i(O,["patient"]),nationalID(){return j(this.personInformation,"nationalID","value")},firstname(){return j(this.personInformation,"firstname","value")},estimation(){return j(this.personInformation,"estimation","value")},lastname(){return j(this.personInformation,"lastname","value")},middleName(){return j(this.personInformation,"middleName","value")},gender(){return G(this.personInformation,"gender")},birthdate(){return F.toStandardHisFormat(j(this.personInformation,"birthdate","value"))},birthdateEstimated:()=>"false",phoneNumber(){return j(this.personInformation,"phoneNumber","value")}},async mounted(){this.buildCards(),this.setData()},methods:{setData(){var t;this.editable&&(k(this.personInformation,"firstname","value",null===(t=this.patient)||void 0===t||null===(t=t.personInformation)||void 0===t?void 0:t.given_name),k(this.personInformation,"middleName","value",this.patient.personInformation.middle_name),k(this.personInformation,"lastname","value",this.patient.personInformation.family_name),k(this.personInformation,"birthdate","value",this.patient.personInformation.birthdate),A(this.personInformation,"gender","selectedValue",this.patient.personInformation.gender),k(this.personInformation,"phoneNumber","value",this.getUnFormatedPhonenumber()),k(this.personInformation,"unformatedPhoneNumber","value",this.getUnFormatedPhonenumber()))},getPhoneNumber(){try{let t=this.patient.personInformation.cell_phone_number;if(t)return t.value.includes("+")?this.selectedCountry.dialCode?t.value.split(this.selectedCountry.dialCode)[1]:t.value.split("265")[1]:t.value.startsWith("08")||t.value.startsWith("09")?t.value.substring(1):t.value}catch(t){console.error(t)}},getUnFormatedPhonenumber(){try{let t=this.patient.personInformation.cell_phone_number;return console.log("attribute: ",t),t}catch(t){}},buildCards(){const t=P();this.cardData={mainTitle:"Demographics",cards:[{cardTitle:"Personal information",content:this.personInformation,initialData:t.getInitialPersonalInformation()}]}},openModal(){B(R)},validationRules(t){return U(this.personInformation,t.name,this[t.name])},async handleInputData(t){var a,e,i,n;if("Estimate Age"==(null==t||null===(a=t.col)||void 0===a?void 0:a.name)&&null!=t&&null!==(e=t.col)&&void 0!==e&&e.checked)k(this.personInformation,"birthdate","displayNone",!0);else if("Estimate Age"!=(null==t||null===(i=t.col)||void 0===i?void 0:i.name)||null!=t&&null!==(n=t.col)&&void 0!==n&&n.checked){if("phoneNumber"==t.name){const a=`+${this.selectedCountry.dialCode}${t.value}`,e=await E.validateMobilePhone(a,this.selectedCountry);return k(this.personInformation,"phoneNumber","alertsErrorMassage",""),e.includes("+")?k(this.personInformation,"phoneNumber","value",a):k(this.personInformation,"phoneNumber","alertsErrorMassage",e),!0}}else k(this.personInformation,"birthdate","displayNone",!1),k(this.personInformation,"estimation","displayNone",!0);this.validationRules(t),this.calculateDoB(t),this.setGuardingInfo(t)},async handleCountryChange(t){this.selectedCountry=t.event,this.personInformation[8].data.rowData[0].colData[0].alertsErrorMassage=""},setGuardingFormRules(t){t<14?(k(this.guardianInformation,"guardianFirstname","inputHeader","First name *"),k(this.guardianInformation,"guardianLastname","inputHeader","Last name *"),k(this.guardianInformation,"guardianFirstname","validationFunctionName","isName"),k(this.guardianInformation,"guardianLastname","validationFunctionName","isName"),k(this.guardianInformation,"relationship","inputHeader","Relationship to patient *"),k(this.guardianInformation,"relationship","validationFunctionName","isNameWithSlush")):(k(this.guardianInformation,"guardianFirstname","inputHeader","First name"),k(this.guardianInformation,"guardianLastname","inputHeader","Last name"),k(this.guardianInformation,"guardianFirstname","validationFunctionName","isNameEmpty"),k(this.guardianInformation,"guardianLastname","validationFunctionName","isNameEmpty"),k(this.guardianInformation,"relationship","inputHeader","Relationship to patient"),k(this.guardianInformation,"relationship","validationFunctionName",""),k(this.guardianInformation,"relationship","alertsErrorMassage",""))},setGuardingInfo(t){const a=t=>k(this.guardianInformation,"guardianNationalID","displayNone",t);"birthdate"!=t.name&&"Estimated age"!=t.inputHeader||(F.getAgeInYears(this.birthdate)<14?a(!1):a(!0),this.setGuardingFormRules(F.getAgeInYears(this.birthdate)),"birthdate"==t.name&&(k(this.personInformation,"estimation","value",F.getAgeInYears(t.value)),this.validationRules({name:"estimation"})))},calculateDoB(t){if("estimation"==(null==t?void 0:t.name)){var a,e;this.validateDuration();const n=(null==t||null===(a=t.unitsData)||void 0===a||null===(a=a.value)||void 0===a?void 0:a.name)||(null==t||null===(e=t.unitsData)||void 0===e?void 0:e.value),o=null==t?void 0:t.value,r="Years"===n&&o<0;let s=c(V.getSessionDate());if(r)try{s=s.add(Math.abs(o),"years")}catch(i){return console.error("Error adding years:",i),null}else switch(n){case"Days":s=s.subtract(o,"days");break;case"Months":s=s.subtract(o,"months");break;case"Years":s=s.subtract(o,"years");break;default:return null}const l=F.toStandardHisDisplayFormat(s.format("YYYY-MM-DD"));return k(this.personInformation,"birthdate","value",l),l}return null},validateDuration(){return this.personInformation[7].data.rowData[0].colData[0].alertsErrorMassage=!1,this.personInformation[7].data.rowData[0].colData[0].alertsErrorMassage="",this.personInformation[7].data.rowData[0].colData[0].value<0?(this.personInformation[7].data.rowData[0].colData[0].alertsErrorMassage=!0,this.personInformation[7].data.rowData[0].colData[0].alertsErrorMassage="Estimated age is less than 0",!1):this.personInformation[7].data.rowData[0].colData[0].value>110?(this.personInformation[7].data.rowData[0].colData[0].alertsErrorMassage=!0,this.personInformation[7].data.rowData[0].colData[0].alertsErrorMassage="Estimated age is more than 110",!1):this.personInformation[7].data.rowData[0].colData[0].unitsData.value?null==E.isNumber(this.personInformation[7].data.rowData[0].colData[0].value)&&""!=this.personInformation[7].data.rowData[0].colData[0].value||(this.personInformation[7].data.rowData[0].colData[0].alertsErrorMassage=!0,this.personInformation[7].data.rowData[0].colData[0].alertsErrorMassage=" Value must be a number",!1):(this.personInformation[7].data.rowData[0].colData[0].alertsErrorMassage=!0,this.personInformation[7].data.rowData[0].colData[0].alertsErrorMassage="Estimation Units Required",!1)}}});t("P",z(bt,[["render",function(t,a,e,i,n,o){const r=h("basic-card");return p(),m(r,{content:t.cardData,editable:t.editable,"onUpdate:selected":t.handleInputData,"onUpdate:inputValue":t.handleInputData,onCountryChanged:t.handleCountryChange},null,8,["content","editable","onUpdate:selected","onUpdate:inputValue","onCountryChanged"])}],["__scopeId","data-v-e9af8ecb"]]));const yt=e({name:"Menu",mixins:[rt],components:{IonContent:u,IonHeader:d,IonItem:l,IonList:s,IonMenu:r,IonTitle:o,IonToolbar:n,BasicCard:nt},watch:{guardianInformation:{handler(){this.buildCards()},deep:!0},relationships:{async handler(){},deep:!0},personInformation:{async handler(){await this.setRelationShip()},deep:!0},patient:{handler(){this.setData()},deep:!0}},data:()=>({cardData:{},inputField:"",setName:"",selectedCountry:[]}),computed:{...i(P,["guardianInformation","personInformation"]),...i(O,["patient"]),gender(){return G(this.personInformation,"gender")},guardianFirstname(){return j(this.guardianInformation,"guardianFirstname","value")},guardianLastname(){return j(this.guardianInformation,"guardianLastname","value")},guardianMiddleName(){return j(this.guardianInformation,"guardianMiddleName","value")},guardianPhoneNumber(){return j(this.guardianInformation,"guardianPhoneNumber","value")},relationship(){return j(this.guardianInformation,"relationship","value")}},props:{editable:{default:!1}},async mounted(){await this.setRelationShip(),this.buildCards(),this.setData()},methods:{async setData(){if(33==V.getProgramID()?k(this.guardianInformation,"relationship","inputHeader","Relationship to client *"):k(this.guardianInformation,"relationship","inputHeader","Relationship to patient *"),this.editable){var t,a,e,i,n,o,r;const s=await st.getRelationships(this.patient.patientID);k(this.guardianInformation,"guardianNationalID","value",this.setAttribute("Regiment ID",null===(t=s[0])||void 0===t?void 0:t.relation)),k(this.guardianInformation,"guardianFirstname","value",null===(a=s[0])||void 0===a||null===(a=a.relation.names[0])||void 0===a?void 0:a.given_name),k(this.guardianInformation,"guardianLastname","value",null===(e=s[0])||void 0===e||null===(e=e.relation.names[0])||void 0===e?void 0:e.family_name),k(this.guardianInformation,"guardianMiddleName","value",null===(i=s[0])||void 0===i||null===(i=i.relation.names[0])||void 0===i?void 0:i.middle_name),k(this.guardianInformation,"guardianPhoneNumber","value",await this.setAttribute("Cell Phone Number",null===(n=s[0])||void 0===n?void 0:n.relation)),k(this.guardianInformation,"relationship","value",{id:null===(o=s[0])||void 0===o?void 0:o.type.relationship_type_id,name:null===(r=s[0])||void 0===r?void 0:r.type.b_is_to_a}),await this.setRelationShip()}},async updateGuardianPhone(){},async setAttribute(t,a){if(!a||0===Object.keys(a).length)return;let e=a.person_attributes.find(a=>a.type.name==t);if(null!=e){let t=e.value;return t?await this.getPhoneNumber(e.value):t}},async getPhoneNumber(t){if(t)return t.includes("+")?this.selectedCountry.dialCode?t.split(this.selectedCountry.dialCode)[1]:t.split("265")[1]:t.startsWith("08")||t.startsWith("09")?t.substring(1):t},async setRelationShip(){this.gender?(await this.getRelationships(),k(this.guardianInformation,"relationship","displayNone",!1),k(this.guardianInformation,"relationship","multiSelectData",this.relationships)):k(this.guardianInformation,"relationship","displayNone",!0)},buildCards(){this.cardData={mainTitle:"Demographics",cards:[{cardTitle:"Guardian information",content:this.guardianInformation}]}},openModal(){B(R)},buildGuardianInformation(){this.guardianInformation[0].selectedData={given_name:this.guardianFirstname,middle_name:this.guardianMiddleName,family_name:this.guardianLastname,gender:"",birthdate:"",birthdate_estimated:"false",home_region:"",home_district:"",home_traditional_authority:"",home_village:"",current_region:"",current_district:"",current_traditional_authority:"",current_village:"",landmark:"",cell_phone_number:this.guardianPhoneNumber,national_id:j(this.guardianInformation,"guardianNationalID","value")}},validationRules(t){return U(this.guardianInformation,t.name,this[t.name])},async handleInputData(t){if("guardianPhoneNumber"==t.name){const a=`+${this.selectedCountry.dialCode}${t.value}`,e=await E.validateMobilePhone(a,this.selectedCountry);return this.guardianInformation[4].data.rowData[0].colData[0].alertsErrorMassage=null,e.includes("+")?k(this.guardianInformation,"guardianPhoneNumber","value",a):this.guardianInformation[4].data.rowData[0].colData[0].alertsErrorMassage=e,!0}this.buildGuardianInformation()},async handleCountryChange(t){this.selectedCountry=t.event,this.guardianInformation[4].data.rowData[0].colData[0].alertsErrorMassage=""}}});t("G",z(yt,[["render",function(t,a,e,i,n,o){const r=h("basic-card");return p(),m(r,{content:t.cardData,editable:t.editable,"onUpdate:selected":t.handleInputData,"onUpdate:inputValue":t.handleInputData,onCountryChanged:t.handleCountryChange},null,8,["content","editable","onUpdate:selected","onUpdate:inputValue","onCountryChanged"])}],["__scopeId","data-v-90a41f74"]]));const It=t("_",e({data:()=>({districtList:[],countriesList:[],locations:[]}),async mounted(){await this.getLocationData()},computed:{...i(W,["apiStatus"])},methods:{async getLocationData(){var t,a;if(this.districtList=await Y("districts"),this.countriesList=await Y("countries"),this.apiStatus&&this.districtList.length!=(null===(t=W().offlineDistrictStatus)||void 0===t?void 0:t.total))for(let e of[1,2,3]){const t=await $.getDistricts(e);this.districtList.push(...t)}this.apiStatus&&this.countriesList.length!=(null===(a=W().offlineCountriesStatus)||void 0===a?void 0:a.total)&&(this.countriesList=await $.getDistricts(4))},async getVillages(t){const a=await Y("villages",{whereClause:{traditional_authority_id:t}});return a.length>0?a:this.apiStatus?await $.getVillages(t):void 0},async getTAs(t){const a=await Y("TAs",{whereClause:{district_id:t}});return a.length>0?a:this.apiStatus?await $.getTraditionalAuthorities(t):void 0},getDistricts(t){return this.districtList.filter(a=>a.region_id===t)},getCountries(t){return this.countriesList.filter(a=>a.region_id===t)}}})),_t=e({mixins:[It],name:"Menu",components:{IonContent:u,IonHeader:d,IonItem:l,IonList:s,IonMenu:r,IonTitle:o,IonToolbar:n,BasicCard:nt},data:()=>({cardData:{},inputField:"",setName:"",locationData:[],districtList:[]}),computed:{...i(O,["patient"]),...i(P,["homeLocation","currentLocation"]),home_district(){var t;return null===(t=j(this.homeLocation,"home_district","value"))||void 0===t?void 0:t.name},home_traditional_authority(){var t;return null===(t=j(this.homeLocation,"home_traditional_authority","value"))||void 0===t?void 0:t.name},home_village(){var t;return null===(t=j(this.homeLocation,"home_village","value"))||void 0===t?void 0:t.name}},watch:{homeLocation:{handler(){this.buildCards()},deep:!0},districtList:{handler(){k(this.homeLocation,"home_district","multiSelectData",this.districtList)},deep:!0}},props:{editable:{default:!1}},async mounted(){this.buildCards(),this.setData()},methods:{setData(){var t,a,e;this.editable&&(k(this.homeLocation,"home_district","value",{name:null===(t=this.patient.personInformation)||void 0===t?void 0:t.home_district,concept_id:""}),k(this.homeLocation,"home_traditional_authority","value",{name:null===(a=this.patient.personInformation)||void 0===a?void 0:a.home_traditional_authority,concept_id:""}),k(this.homeLocation,"home_traditional_authority","displayNone",!1),k(this.homeLocation,"home_village","value",{name:null===(e=this.patient.personInformation)||void 0===e?void 0:e.home_village,concept_id:""}),k(this.homeLocation,"home_village","displayNone",!1))},setSameAsCurrent(){var t;if(null!==(t=J(this.homeLocation,"Same as current"))&&void 0!==t&&t.checked){const t=j(this.currentLocation,"current_district","value"),a=j(this.currentLocation,"current_traditional_authority","value"),e=j(this.currentLocation,"current_village","value");k(this.homeLocation,"home_district","value",t),k(this.homeLocation,"home_traditional_authority","value",a),k(this.homeLocation,"home_village","value",e),k(this.homeLocation,"home_traditional_authority","displayNone",!1),k(this.homeLocation,"home_village","displayNone",!1)}else k(this.homeLocation,"home_district","value",""),k(this.homeLocation,"home_traditional_authority","value",""),k(this.homeLocation,"home_village","value",""),k(this.homeLocation,"home_traditional_authority","displayNone",!0),k(this.homeLocation,"home_village","displayNone",!0)},async buildCards(){this.cardData={mainTitle:"Demographics",cards:[{cardTitle:"Home Location",content:this.homeLocation}]}},openModal(){B(R)},handleBtns(t){"TA"==t&&B(lt,{class:"otherVitalsModal"}),"Village"==t&&B(dt,{class:"otherVitalsModal"})},async validations(t,a){return a.every(a=>U(t,a,this[a]))},async handleInputData(t){var a,e,i;"Same as current"==(null==t||null===(a=t.col)||void 0===a?void 0:a.name)&&this.setSameAsCurrent(),localStorage.setItem("activeLocation","home"),await this.validations(this.homeLocation,["home_district","home_traditional_authority","home_village"]),"home_district"==t.name&&(k(this.homeLocation,"home_traditional_authority","displayNone",!0),k(this.homeLocation,"home_traditional_authority","value",""),k(this.homeLocation,"home_village","displayNone",!0),k(this.homeLocation,"home_village","value",""),null!=t&&null!==(e=t.value)&&void 0!==e&&e.district_id&&this.setTA(t.value)),"home_traditional_authority"==t.name&&(k(this.homeLocation,"home_village","displayNone",!0),k(this.homeLocation,"home_village","value",""),null!=t&&null!==(i=t.value)&&void 0!==i&&i.traditional_authority_id&&this.setVillage(t.value))},async setTA(t){const a=await this.getTAs(t.district_id);k(this.homeLocation,"home_traditional_authority","multiSelectData",a),k(this.homeLocation,"home_traditional_authority","displayNone",!1)},async setVillage(t){const a=await this.getVillages(t.traditional_authority_id)||await $.getVillages(t.traditional_authority_id);k(this.homeLocation,"home_village","multiSelectData",a),k(this.homeLocation,"home_village","displayNone",!1)}}});t("H",z(_t,[["render",function(t,a,e,i,n,o){const r=h("basic-card");return p(),m(r,{content:t.cardData,editable:t.editable,"onUpdate:selected":t.handleInputData,"onUpdate:inputValue":t.handleInputData,"onClicked:button":t.handleBtns},null,8,["content","editable","onUpdate:selected","onUpdate:inputValue","onClicked:button"])}],["__scopeId","data-v-71017ef3"]]));const Dt=e({name:"Menu",mixins:[It],components:{IonContent:u,IonHeader:d,IonItem:l,IonList:s,IonMenu:r,IonTitle:o,IonToolbar:n,BasicCard:nt},data:()=>({cardData:{},inputField:"",setName:"",locationData:[]}),computed:{...i(P,["homeLocation"]),...i(P,["currentLocation"]),...i(O,["patient"]),current_district(){var t;return null===(t=j(this.currentLocation,"current_district","value"))||void 0===t?void 0:t.name},current_traditional_authority(){var t;return null===(t=j(this.currentLocation,"current_traditional_authority","value"))||void 0===t?void 0:t.name},current_village(){var t;return null===(t=j(this.currentLocation,"current_village","value"))||void 0===t?void 0:t.name},"Other (specify)"(){return j(this.currentLocation,"Other (specify)","value")}},watch:{currentLocation:{handler(){this.buildCards()},deep:!0},districtList:{handler(){this.districtList.length>0&&k(this.currentLocation,"current_district","multiSelectData",this.districtList)},deep:!0}},props:{editable:{default:!1}},async mounted(){this.buildCards(),this.setData(),this.validaterowData({})},methods:{setData(){this.editable&&(k(this.currentLocation,"current_district","value",{name:this.patient.personInformation.current_district,traditional_authority_id:""}),k(this.currentLocation,"current_traditional_authority","value",{name:this.patient.personInformation.current_traditional_authority,village_id:""}),k(this.currentLocation,"current_traditional_authority","displayNone",!1),k(this.currentLocation,"current_village","value",{name:this.patient.personInformation.current_village,district_id:""}),k(this.currentLocation,"current_village","displayNone",!1),k(this.currentLocation,"closestLandmark","value",{id:"",name:this.patient.personInformation.landmark}))},async buildCards(){this.cardData={mainTitle:"Demographics",cards:[{cardTitle:"Current Location",content:this.currentLocation}]}},openModal(){B(R)},handleBtns(t){"TA"==t&&B(lt,{class:"otherVitalsModal"}),"Village"==t&&B(dt,{class:"otherVitalsModal"})},async validations(t,a){return a.every(a=>U(t,a,this[a]))},validationRules(t){return U(this.currentLocation,t.name,this[t.name])},validaterowData(t){this.validationRules(t)},async handleInputData(t){var a,e;if(localStorage.setItem("activeLocation","current"),await this.validations(this.currentLocation,["current_district","current_traditional_authority","current_village","Other (specify)"]),"current_district"==t.name&&(k(this.currentLocation,"current_traditional_authority","displayNone",!0),k(this.currentLocation,"current_traditional_authority","value",""),k(this.currentLocation,"current_village","displayNone",!0),k(this.currentLocation,"current_village","value",""),null!=t&&null!==(a=t.value)&&void 0!==a&&a.district_id&&this.setTA(t.value)),"current_traditional_authority"==t.name&&(k(this.currentLocation,"current_village","displayNone",!0),k(this.currentLocation,"current_village","value",""),null!=t&&null!==(e=t.value)&&void 0!==e&&e.traditional_authority_id&&this.setVillage(t.value)),"closestLandmark"==t.name){const t=j(this.currentLocation,"closestLandmark","value");"Other"===(null==t?void 0:t.name)?k(this.currentLocation,"Other (specify)","displayNone",!1):(k(this.currentLocation,"Other (specify)","displayNone",!0),k(this.currentLocation,"Other (specify)","value",""))}this.validaterowData(t)},async setTA(t){const a=await this.getTAs(t.district_id);return a.length>0&&(k(this.currentLocation,"current_traditional_authority","multiSelectData",a),k(this.currentLocation,"current_traditional_authority","displayNone",!1),!0)},async setVillage(t){const a=await this.getVillages(t.traditional_authority_id);return a.length>0&&(k(this.currentLocation,"current_village","multiSelectData",a),k(this.currentLocation,"current_village","displayNone",!1),!0)}}});t("C",z(Dt,[["render",function(t,a,e,i,n,o){const r=h("basic-card");return p(),m(r,{content:t.cardData,editable:t.editable,"onUpdate:selected":t.handleInputData,"onUpdate:inputValue":t.handleInputData,"onClicked:button":t.handleBtns},null,8,["content","editable","onUpdate:selected","onUpdate:inputValue","onClicked:button"])}],["__scopeId","data-v-c8549609"]]));const Lt=e({name:"Menu",components:{IonContent:u,IonHeader:d,IonItem:l,IonList:s,IonMenu:r,IonTitle:o,IonToolbar:n,BasicCard:nt},data:()=>({cardData:{},inputField:"",setName:"",religionsList:[{id:1,name:"Christianity"},{id:2,name:"Islam"},{id:3,name:"Judaism"},{id:4,name:"Hinduism"},{id:5,name:"Buddhism"},{id:6,name:"Sikhism"},{id:7,name:"Jainism"},{id:8,name:"Bahá'í Faith"},{id:9,name:"Zoroastrianism"},{id:10,name:"Confucianism"},{id:11,name:"Taoism"},{id:12,name:"Shinto"},{id:13,name:"Baha'i Faith"},{id:14,name:"Juche"},{id:15,name:"Rastafari"}]}),watch:{socialHistory:{handler(){this.buildCards()},deep:!0}},computed:{...i(P,["socialHistory"]),...i(O,["patient"])},props:{editable:{default:!1}},async mounted(){this.updateRegistrationStores(),this.buildCards(),this.setData()},methods:{setData(){this.editable&&(k(this.socialHistory,"religion","value",{id:"",name:this.patient.personInformation.education_level}),A(this.socialHistory,"occupation","selectedValue",this.patient.personInformation.occupation),A(this.socialHistory,"maritalStatus","selectedValue",this.patient.personInformation.marital_status),A(this.socialHistory,"highestLevelOfEducation","selectedValue",this.patient.personInformation.education_level))},buildCards(){this.cardData={mainTitle:"Demographics",cards:[{cardTitle:"Social History",content:this.socialHistory}]}},updateRegistrationStores(){P().setSocialHistory(this.socialHistory)},async handleInputData(t){this.handleReligion(t.name)},handleReligion(t){"religion"==t&&k(this.socialHistory,t,"multiSelectData",this.religionsList)}}});t("S",z(Lt,[["render",function(t,a,e,i,n,o){const r=h("basic-card");return p(),m(r,{content:t.cardData,editable:t.editable,"onUpdate:selected":t.handleInputData,"onUpdate:inputValue":t.handleInputData},null,8,["content","editable","onUpdate:selected","onUpdate:inputValue"])}],["__scopeId","data-v-2bea4306"]]));const wt=e({name:"BirthRegistration",components:{IonContent:u,IonHeader:d,IonMenuButton:N,IonPage:C,IonTitle:o,IonToolbar:n,Toolbar:Z,ToolbarSearch:X,DemographicBar:ut,IonButton:w,IonCard:L,IonCardContent:D,IonCardHeader:_,IonCardSubtitle:I,IonCardTitle:y,IonAccordion:b,IonAccordionGroup:f,IonItem:l,IonLabel:v,IonModal:g,Stepper:pt,SubstanceDiagnosis:ft,FamilyHistoryNCDNumber:vt,DynamicButton:q,BasicCard:nt},data:()=>({iconsContent:it,demographic:!0,currentStep:"",scanner:!1,steps:"",isOpen:!1,iconListStatus:"active_icon",iconGridStatus:"inactive_icon",cardData:{}}),computed:{...i(O,["patient"]),...i(et,["vitals"]),...i(at,["investigations"]),...i(tt,["diagnosis"]),...i(ot,["enrollmentDisplayType"]),...i(Q,["NCDNumber","enrollmentDiagnosis","substance","patientHistoryHIV","patientHistory"]),...i(K,["birthRegistration"])},watch:{birthRegistration:{handler(){this.buildCards()},deep:!0}},props:{editable:{default:!1}},async mounted(){this.setDisplayType(this.enrollmentDisplayType),this.updateEnrollmentStores(),this.buildCards()},setup:()=>({chevronBackOutline:H,checkmark:T,arrowForwardCircle:M,grid:S,list:x}),methods:{handleBtns(){console.log("lll")},setCurrentStep(t){this.currentStep=t},nextStep(){const t=this.steps.indexOf(this.currentStep);t<this.steps.length-1&&(this.currentStep=this.steps[t+1])},previousStep(){const t=this.steps.indexOf(this.currentStep);t>0&&(this.currentStep=this.steps[t-1])},async saveData(){await this.saveNcdNumber()},async saveNcdNumber(){this.$router.push("patientProfile")},openModal(){B(mt)},nav(t){this.$router.push(t)},setDisplayType(t){"grid"==t?this.currentStep="Enrollment":(this.currentStep="Substance & Diagnosis",this.steps=["Substance & Diagnosis","Patient History","Family History and NCDNumber"]),ot().setEnrollmentDisplayType(t),this.setIconClass()},setIconClass(){this.iconListStatus="inactive_icon",this.iconGridStatus="inactive_icon","list"==this.enrollmentDisplayType?this.iconListStatus="active_icon":"grid"==this.enrollmentDisplayType&&(this.iconGridStatus="active_icon")},async buildEnrollmentData(){return[...await ct(this.patientHistoryHIV),...await ct(this.substance),...await ht(this.enrollmentDiagnosis),...await ht(this.patientHistory),...await ht(this.patientHistoryHIV)]},async saveEnrollment(){const t=await this.buildEnrollmentData();if(console.log("🚀 ~ saveEnrollment ~ data:",t),t.length>0){const a=V.getUserID();(new gt).onSubmit(this.patient.patientID,a,t)}},buildCards(){const t=K();this.cardData={cards:[{cardTitle:"Birth Registration",content:this.birthRegistration,initialData:t.getInitialBirthRegistration()}]}},updateEnrollmentStores(){K().setBirthRegistration(this.birthRegistration)},async handleInputData(t){"How many doses of Tdv did the mother receive?*"==t.inputHeader&&(t.value?"Unknown"==t.value.name?k(this.birthRegistration,"Protected at birth","value",{concept_id:1067,name:"Don't know"}):"0-2 doses, less than two weeks before delivery"==t.value.name?k(this.birthRegistration,"Protected at birth","value",{concept_id:1066,name:"No"}):"2-5 doses more than two weeks of delivery"==t.value.name&&k(this.birthRegistration,"Protected at birth","value",{concept_id:1065,name:"Yes"}):k(this.birthRegistration,"Protected at birth","value",""))}}});t("B",z(wt,[["render",function(t,a,e,i,n,o){const r=h("basic-card");return p(),m(r,{content:t.cardData,editable:t.editable,"onUpdate:selected":t.handleInputData,"onUpdate:inputValue":t.handleInputData,"onClicked:button":t.handleBtns},null,8,["content","editable","onUpdate:selected","onUpdate:inputValue","onClicked:button"])}],["__scopeId","data-v-b30abc8f"]]))}}});
