import{J as x,p as G,ae as Y,S as E,t as U,af as $,ag as z,_ as O,q as e,v as y,g as j}from"./index-BUOqMZYn.js";import{d as v,r as P,c as f,a as V,y as h,f as _,z as c,l as o,u as a,S as W,T as J,A as I,B as T,I as D,aB as K,X as k,ao as X,e as R,F as w,L as B,ac as Z,ab as N,ay as q,D as Q,V as ee,W as ne,au as ae,w as S,E as F,bl as se,k as A,ak as oe,cy as te,cx as b,cj as re}from"./vendor-IHO26Iap.js";import{m as M}from"./Arrays-CfBll-2n.js";const ie=[{id:"hiv clinic registration",name:"Hiv clinic registration",workflowID:"HIV first visits",icon:"registration.png"},{id:"hiv reception",name:"HIV reception",workflowID:"HIV reception visits",icon:"reception.png"},{id:"vitals",name:"Vitals",workflowID:"Vitals",icon:"vitals.png",taskCompletionChecklist:["Weight"]},{id:"hiv staging",name:"HIV staging",workflowID:"HIV staging visits",icon:"hiv-staging.png"},{id:"hiv clinic consultation",name:"HIV clinic consultation",workflowID:"HIV clinic consultations",taskCompletionChecklist:["Medication orders"],icon:"consultation.png"},{id:"art adherence",name:"ART adherence",workflowID:"ART adherence",icon:"adherence.png"},{id:"treatment",name:"Treatment",workflowID:"Prescriptions",icon:"prescription.png"},{id:"fast track assesment",name:"Fast Track assesment",icon:"fast-track.png"},{id:"dispensing",name:"Drug Dispensations",encounterTypeName:"DISPENSING",workflowID:"Drug Dispensations",icon:"dispensing.png"},{id:"appointment",name:"Manage Appointments",encounterTypeName:"APPOINTMENT",workflowID:"Manage Appointments",icon:"appointment.png"},{id:"patient type",name:"Patient Type",encounterTypeName:"Registration",icon:"patient-type.png"},{id:"bp_management",name:"bp_management",icon:"dispensing.png",encounterTypeName:"Hypertension management",availableOnActivitySelection:!1},{id:"bp_alert",name:"bp_alert",icon:"dispensing.png",availableOnActivitySelection:!1}],ce=["onClick"],le={key:1,class:"no-data-container"},_e=v({__name:"ActivitySelectionModal",setup(d){const l=x(),i=P("activities"),n=P([]),p=f(()=>n.value.filter(r=>r.isChecked));async function u(r){switch(r.toLowerCase()){case"ncd program":n.value=M(z),i.value="NCD_activities";break;case"opd program":n.value=M($),i.value="OPD_activities";break;case"hiv program":n.value=M(ie,"name","workflowID"),i.value="activities";break;default:n.value=[];break}}async function s(){const r=await E.getJson("user_properties",{user_id:l.getUserId(),property:i.value});r&&(n.value=n.value.map(t=>(r.property_value.search(t.value)>=0&&(t.isChecked=!0),t)))}async function m(){var r;try{return await E.postJson("user_properties",{property:i.value,property_value:p.value.map(t=>t.value).join(",")}),k.dismiss(p.value)}catch(t){console.error(t),U((r=t.message)!=null?r:"Failed to save selected activities")}}return V(()=>{var r,t;console.log("USER ID",l.getUserId()),console.log("USER PROGRAM",(r=G().activeProgram)==null?void 0:r.name),u((t=G().activeProgram)==null?void 0:t.name),s()}),(r,t)=>(_(),h(a(ae),null,{default:c(()=>[o(a(W),{style:{display:"flex","justify-content":"space-between"},color:"success"},{default:c(()=>[o(a(J),{class:"modalTitle"},{default:c(()=>[I("Select Program Activites (selected: "+T(p.value.length)+")",1)]),_:1}),o(a(D),{onClick:a(k).dismiss,style:{"padding-top":"10px","padding-right":"10px"},icon:a(K)},null,8,["onClick","icon"])]),_:1}),o(a(X),{fullscreen:!0},{default:c(()=>[n.value.length?(_(),h(Y,{key:0,items:n.value,numberOfColumns:2},{default:c(({entries:L})=>[(_(!0),R(w,null,B(L,(g,H)=>(_(),R("div",{class:"his-card clickable",key:H,onClick:C=>g.isChecked=!g.isChecked},[o(a(Z),null,{default:c(()=>[o(a(N),{size:"1"},{default:c(()=>[o(a(q),{modelValue:g.isChecked,"onUpdate:modelValue":C=>g.isChecked=C,onClick:C=>g.isChecked=!g.isChecked},null,8,["modelValue","onUpdate:modelValue","onClick"])]),_:2},1024),o(a(N),{class:"ion-text-center his-md-text"},{default:c(()=>[I(T(g.label),1)]),_:2},1024)]),_:2},1024)],8,ce))),128))]),_:1},8,["items"])):(_(),R("div",le,[o(a(Q),null,{default:c(()=>t[0]||(t[0]=[I("No activities available for this program")])),_:1,__:[0]})]))]),_:1}),o(a(ee),{class:"ion-padding"},{default:c(()=>[o(a(ne),{onClick:m},{default:c(()=>t[1]||(t[1]=[I(" Save ")])),_:1,__:[1]})]),_:1})]),_:1}))}}),pe=O(_e,[["__scopeId","data-v-a3e18228"]]),ue={class:"search-wrapper"},de={__name:"SearchField",props:{modelValue:String,placeholder:String},emits:["update:modelValue"],setup(d,{emit:l}){const i=s=>{u.value=s.target.value},n=d,p=l,u=P(n.modelValue||"");return S(u,s=>{p("update:modelValue",s)}),S(()=>n.modelValue,s=>{u.value=s}),(s,m)=>{const r=F("ion-icon"),t=F("ion-input");return _(),R("div",ue,[o(r,{icon:a(se),class:"search-icon","aria-hidden":"true"},null,8,["icon"]),o(t,{value:u.value,onIonInput:i,class:"search-input",type:"text",placeholder:d.placeholder},null,8,["value","placeholder"])])}}},Re=O(de,[["__scopeId","data-v-b69152ed"]]),me={class:"program-buttons-grid"},ge=["onClick"],Ae=["src"],Ie={class:"program-name"},Pe=v({__name:"ProgramGrid",props:{programs:{},onSelect:{type:Function}},setup(d){return(l,i)=>(_(),R("div",me,[(_(!0),R(w,null,B(l.programs,(n,p)=>(_(),R("div",{key:p,class:"program-tile",onClick:()=>l.onSelect(n)},[A("div",{class:"program-icon-container",style:oe({backgroundColor:n.color})},[A("img",{src:n.icon,alt:"",class:"program-icon"},null,8,Ae)],4),A("div",Ie,T(n.name.replace(/program/i,"").trim()),1)],8,ge))),128))]))}}),Oe=O(Pe,[["__scopeId","data-v-d36db6ec"]]),ve={[e.HIV_PROGRAM]:"/assets/icon/program_icons/ribbon.png",[e.TB_PROGRAM]:"/assets/icon/program_icons/tb.png",[e.EARLY_INFANT_DIAGNOSIS_PROGRAM]:"/assets/icon/program_icons/baby-0203_alt.png",[e.MDR_TB_PROGRAM]:"/assets/icon/program_icons/tb.png",[e.KAPOSIS_SARCOMA_PROGRAM]:"/assets/icon/program_icons/lymph-nodes.png",[e.CHRONIC_CARE_PROGRAM]:"/assets/icon/program_icons/intensive-care_unit.png",[e.MATERNITY_PROGRAM]:"/assets/icon/program_icons/pregnant.png",[e.ANC_PROGRAM]:"/assets/icon/program_icons/ancv.png",[e.DIABETES_PROGRAM]:"/assets/icon/program_icons/diabetes.png",[e.OPD_PROGRAM]:"/assets/icon/program_icons/outpatient.png",[e.IPD_PROGRAM]:"/assets/icon/program_icons/observation.png",[e.UNDER_5_PROGRAM]:"/assets/icon/program_icons/boy-0105y.png",[e.CIVIL_REGISTRATION_PROGRAM]:"/assets/icon/program_icons/register-book.png",[e.HTC_PROGRAM]:"/assets/icon/program_icons/blood-pressure.png",[e.ANC_CONNECT_PROGRAM]:"/assets/icon/program_icons/ancv.png",[e.HYPERTENSION_PROGRAM]:"/assets/icon/program_icons/blood-pressure.png",[e.IPT_PROGRAM]:"/assets/icon/program_icons/observation.png",[e.LABORATORY_PROGRAM]:"/assets/icon/program_icons/biochemistry-laboratory.png",[e.CXCA_PROGRAM]:"/assets/icon/program_icons/cervical-cancer.png",[e.RADIOLOGY_PROGRAM]:"/assets/icon/program_icons/radiology.png",[e.PATIENT_REGISTRATION_PROGRAM]:"/assets/icon/program_icons/human-resoruce.png",[e.AETC_PROGRAM]:"/assets/icon/program_icons/accident-and_emergency.png",[e.SPINE_PROGRAM]:"/assets/icon/program_icons/intensive-care_unit.png",[e.NCD_PROGRAM]:"/assets/icon/program_icons/autoimmune-disease.png",[e.IMMUNIZATION_PROGRAM]:"/assets/icon/program_icons/syringe-vaccine.png",[e.LABOUR_AND_DELIVERY_PROGRAM]:"/assets/icon/program_icons/fetus.png"},Ce=d=>{switch(d){case e.HIV_PROGRAM:return"#F4A6A6";case e.TB_PROGRAM:return"#E6B89C";case e.EARLY_INFANT_DIAGNOSIS_PROGRAM:return"#FFF2A6";case e.MDR_TB_PROGRAM:return"#D2A679";case e.KAPOSIS_SARCOMA_PROGRAM:return"#D8B4E2";case e.CHRONIC_CARE_PROGRAM:return"#C7EFCF";case e.MATERNITY_PROGRAM:return"#FFCCE5";case e.ANC_PROGRAM:return"#FFD6DD";case e.DIABETES_PROGRAM:return"#D6F5D6";case e.OPD_PROGRAM:return"#B3E5FC";case e.IPD_PROGRAM:return"#FFF9C4";case e.UNDER_5_PROGRAM:return"#FFB3B3";case e.CIVIL_REGISTRATION_PROGRAM:return"#E0E0E0";case e.HTC_PROGRAM:return"#B2DFDB";case e.ANC_CONNECT_PROGRAM:return"#FFD6DD";case e.HYPERTENSION_PROGRAM:return"#B2DFDB";case e.IPT_PROGRAM:return"#FFF9C4";case e.LABORATORY_PROGRAM:return"#E6B89C";case e.CXCA_PROGRAM:return"#FFF2A6";case e.RADIOLOGY_PROGRAM:return"#CCCCCC";case e.PATIENT_REGISTRATION_PROGRAM:return"#FFF9C4";case e.AETC_PROGRAM:return"#FFB199";case e.SPINE_PROGRAM:return"#C7EFCF";case e.NCD_PROGRAM:return"#D6F5D6";case e.IMMUNIZATION_PROGRAM:return"#FFF2A6";case e.LABOUR_AND_DELIVERY_PROGRAM:return"#E6D6F3";default:return"#F5F5DC"}},Me=[e.VHW_PROGRAM,e.TRIAGE_PROGRAM,e.VMMC_PROGRAM,e.PNC_PROGRAM,e.KAPOSIS_SARCOMA_PROGRAM,e.CIVIL_REGISTRATION_PROGRAM,e.DIABETES_PROGRAM,e.LABOUR_AND_DELIVERY_PROGRAM],Ge={id:"container"},fe={class:"centered-content"},he=v({__name:"ModulePicker",setup(d){const l=G(),i=P(""),n=f(()=>l.authorizedPrograms.filter(s=>!Me.includes(s.program_id)).map(s=>({...s,icon:ve[s.program_id]||null,color:Ce(s.program_id)}))),p=f(()=>n.value.filter(s=>s.name.toLowerCase().includes(i.value.toLowerCase())));function u(s){l.setActiveProgram(s),y.hide()}return V(()=>{n.value.length===1&&u(n.value[0])}),(s,m)=>(_(),R("div",Ge,[m[1]||(m[1]=A("h1",null,[A("strong",null,"Services")],-1)),A("div",fe,[o(Re,{modelValue:i.value,"onUpdate:modelValue":m[0]||(m[0]=r=>i.value=r),placeholder:"Search..."},null,8,["modelValue"]),o(Oe,{programs:p.value,onSelect:u},null,8,["programs"])])]))}}),Te=O(he,[["__scopeId","data-v-fecb6da6"]]),Ne=v({__name:"ActionButtons",setup(d){function l(){return j(pe,{class:"activity-modal"})}async function i(){return y.show(Te,{},"module-picker-modal")}return(n,p)=>(_(),h(a(te),{slot:"fixed",horizontal:"end",vertical:"bottom",class:"ion-margin-bottom",edge:""},{default:c(()=>[o(a(b),{onClick:l},{default:c(()=>[o(a(D),{src:"/public/svg/exam_multiple_choice.svg"})]),_:1}),o(a(b),{color:"primary",class:"ion-margin-vertical"},{default:c(()=>[o(a(D),{icon:a(re),onClick:i},null,8,["icon"])]),_:1})]),_:1}))}});export{Te as M,Ne as _};
