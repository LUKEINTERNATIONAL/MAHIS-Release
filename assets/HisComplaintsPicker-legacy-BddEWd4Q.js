System.register(["./vendor-legacy-Ctgr3eFr.js","./SelectMixin-legacy-DmzRj4PT.js","./patient_complaints_service-legacy-0_J60tmD.js","./lodash-legacy-pOOc9Efu.js","./KbHandler-legacy-tmeC75bp.js","./index-legacy-B9Y-YiiW.js","./BaseTextInput-legacy-DlwnMwrV.js","./Export-legacy-gl2_JJEM.js","./apexcharts-legacy-H4TBYBBa.js","./ReportMixin.vue_vue_type_script_lang-legacy-DWM7I5lz.js","./FieldMixin.vue_vue_type_script_lang-legacy-CVuoIaWz.js"],function(t,e){"use strict";var i,s,a,l,o,n,c,h,r,d,u,p,m,g,y,C,f,k,v,b,L,_,x;return{setters:[t=>{i=t.d,s=t.bs,a=t.a1,l=t.bp,o=t.H,n=t.e,c=t.f,h=t.l,r=t.J,d=t.F,u=t.P,p=t.Q,m=t.K,g=t.O,y=t.m,C=t.i,f=t.v,k=t.k},t=>{v=t.default},t=>{b=t.P},t=>{L=t.l},t=>{_=t.H},t=>{x=t._},null,null,null,null,null],execute:function(){var e=document.createElement("style");e.textContent="ion-col[data-v-7b352988]{padding:0;margin:0;border-right:1px solid lightgray}\n/*$vite$:1*/",document.head.appendChild(e);const w=i({components:{IonCheckbox:l,IonText:a,IonChip:s,HisKeyboard:_},name:"HisComplaintsPicker",mixins:[v],data:()=>({complaintsList:{},ActiveCategory:"",allComplainList:{},displayComplainList:{},groupNames:[],showKeyboard:!1,groupData:[]}),methods:{async init(){this.$emit("onFieldActivated",this);const t=await b.getComplaintsList("Presenting complaint group");this.listData=this.mapListToOptions(t),this.groupData=t,this.groupNames=this.listData;for(const e in this.listData){const t=this.listData[e].label,i=await b.getComplaintsList(t);this.allComplainList[t]=this.mapListToOptions(i,t)}this.$emit("onValue",this.getChecked(this.complaintsList))},async onselect(t,e){this.$nextTick(async()=>{const i={...t};if(i.isChecked=e.target.checked,this.onValue&&i.isChecked&&!(await this.onValue(i)))return e.target.checked=!1;this.onValueUpdate&&(this.complaintsList=await this.onValueUpdate({...this.complaintsList},i)),this.$emit("onValue",this.getChecked(this.complaintsList))})},async onKBValue(t){if(""!=t){for(const t in this.groupNames)this.groupNames[t].other.display=!1;for(const e in this.listData){let i="";const s=this.listData[e].label,a=[],l=this.allComplainList[s];for(const e in l)l[e].label.toLowerCase().match(t.toLowerCase())&&s?(l[e].other.display=!0,a.push(l[e]),i=s,this.ActiveCategory=s):(l[e].other.display=!1,a.push(l[e]));if(""!=i)for(const t in this.groupNames)this.groupNames[t].label==s&&(this.groupNames[t].other.display=!0);this.allComplainList[s]=a}this.complaintsList[this.ActiveCategory]=this.allComplainList[this.ActiveCategory]}else{for(const t in this.listData){const e=this.listData[t].label,i=[],s=this.allComplainList[e];for(const t in s)s[t].other.display=!0,i.push(s[t]);this.allComplainList[e]=i}this.groupNames=this.mapListToOptions(this.groupData),console.log(this.groupNames),this.ActiveCategory=""}},keyboardStatus(){this.showKeyboard=!this.showKeyboard},async getSpecificComplaints(t){t in this.complaintsList||(this.complaintsList[t]=this.allComplainList[t]),this.ActiveCategory=t},mapListToOptions(t,e=""){if(L.isEmpty(t))return[];const i={display:!0};return t.map(t=>{const s={label:t.name,value:t.name,isChecked:!1,other:{...t,...i}};return e&&(s.other.parent=e),s})},uncheck(t){this.complaintsList[t.other.parent].forEach(e=>{e.label===t.label&&(e.isChecked=!1)})},getChecked(t){const e=[];for(const i in t)e.push(...t[i].filter(t=>t.isChecked));return e}},computed:{checkedItems(){return this.getChecked(this.complaintsList)},activeCategoryItems(){return this.complaintsList[this.ActiveCategory]}},watch:{clear(){for(const t in this.complaintsList)this.complaintsList[t]=this.complaintsList[t].map(t=>(t.isChecked=!1,t))}},mounted(){this.init()},activated(){this.init()}}),V={style:{}};t("default",x(w,[["render",function(t,e,i,s,a,l){const v=o("his-text-input"),b=o("ion-text"),L=o("ion-label"),_=o("ion-chip"),x=o("ion-col"),w=o("ion-row"),K=o("ion-item"),j=o("ion-list"),D=o("ion-checkbox"),I=o("his-keyboard"),A=o("ion-grid"),N=o("view-port");return c(),n("div",null,[h(N,{showFull:!t.showKeyboard,style:{padding:"0",height:"82vh"}},{default:r(()=>[h(v,{value:t.selected,placeholder:"Search",onOnValue:t.onKBValue,onClick:t.keyboardStatus},null,8,["value","onOnValue","onClick"]),h(A,null,{default:r(()=>[h(w,null,{default:r(()=>[h(x,{size:"12"},{default:r(()=>[(c(!0),n(d,null,u(t.checkedItems,(e,i)=>(c(),n("span",{key:i},[h(_,{color:"danger",onClick:i=>t.uncheck(e)},{default:r(()=>[h(L,null,{default:r(()=>[h(b,{class:"his-md-text"},{default:r(()=>[p(m(e.label),1)]),_:2},1024)]),_:2},1024)]),_:2},1032,["onClick"])]))),128))]),_:1})]),_:1}),h(w,null,{default:r(()=>[h(x,{size:"4"},{default:r(()=>[h(j,{style:{overflowY:"auto",height:"80vh",margin:0}},{default:r(()=>[(c(!0),n(d,null,u(t.groupNames,(e,i)=>C((c(),g(K,{key:i,onClick:i=>t.getSpecificComplaints(e.value),detail:!0,color:t.ActiveCategory===e.label?"light":""},{default:r(()=>[h(L,null,{default:r(()=>[h(b,{class:"his-md-text"},{default:r(()=>[p(m(e.label),1)]),_:2},1024)]),_:2},1024)]),_:2},1032,["onClick","color"])),[[f,e.other.display]])),128))]),_:1})]),_:1}),t.ActiveCategory?(c(),g(x,{key:0,style:{overflowY:"auto",height:"75vh"}},{default:r(()=>[k("div",V,[h(j,{class:"view-port-content"},{default:r(()=>[(c(!0),n(d,null,u(t.activeCategoryItems,(e,i)=>C((c(),g(K,{key:i,color:e.isChecked?"light":""},{default:r(()=>[h(L,null,{default:r(()=>[h(b,{class:"his-md-text"},{default:r(()=>[p(m(e.label),1)]),_:2},1024)]),_:2},1024),h(D,{slot:"end",modelValue:e.isChecked,"onUpdate:modelValue":t=>e.isChecked=t,onIonChange:i=>t.onselect(e,i),disabled:null==e?void 0:e.disabled},null,8,["modelValue","onUpdate:modelValue","onIonChange","disabled"])]),_:2},1032,["color"])),[[f,e.other.display]])),128))]),_:1})])]),_:1})):y("",!0),t.showKeyboard?(c(),g(I,{key:1,kbConfig:t.keyboard,onKeyPress:t.keypress},null,8,["kbConfig","onKeyPress"])):y("",!0)]),_:1})]),_:1})]),_:1},8,["showFull"])])}],["__scopeId","data-v-7b352988"]]))}}});
