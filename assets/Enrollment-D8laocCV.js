import{d as S,ar as l,bO as V,U as H,T as g,as as B,ac as w,G as T,S as I,a9 as N,E as i,y as d,f as a,bd as ot,D as st,M as rt,J as lt,aZ as ct,bH as dt,a_ as pt,aY as mt,a$ as ut,W as yt,af as ht,bf as ft,dy as Dt,cj as Ct,dz as _t,a2 as bt,ck as St,z as u,l as n,e as _,m as C,k as h,p as k}from"./vendor-BsZAuWFl.js";import{aA as b,ab as Ht,w as Z,d as c,f as v,i as P,_ as $,D as gt,y as Tt,T as It,a0 as Nt,x as vt,t as U,ak as Pt,G as $t,P as kt,ay as Vt,S as q,aB as K,n as Bt,R as wt,V as Mt,a7 as Et,u as Ft,b as zt}from"./index-xeAXLgY8.js";import{D as Rt}from"./DemographicBar-DVv8HdEW.js";import{S as Gt}from"./SaveProgressModal-D-8bCncB.js";import{S as At}from"./Stepper-DI6F2bdS.js";import{F as Lt,S as Ot,P as Ut}from"./NCDNumber-DLQEl-bX.js";import{D as M}from"./OutcomeModal-DmIH7yFL.js";import{B as E}from"./BasicForm-DBDalToe.js";import{B as F,u as Q}from"./ncd_appointment_service-D_IKHuz8.js";import{S as Wt}from"./RiskAssessment-G8E_GYzC.js";import{c as A,a as W}from"./formatServerData-DusL9nJa.js";import{I as Jt}from"./identifier_service-aEhhreo1.js";import"./lodash-Dt8AsbQm.js";import"./app_encounter_service-CmxD9NQd.js";import"./Outcome-czlbS6tJ.js";import"./SvgDynamicColor-DNXYNyix.js";import"./group_validation-ChiuLlhr.js";import"./drug_prescription_service-Q4NUQMWM.js";import"./drug_service-C4z_XnhF.js";import"./appointment_service-DLf6ASe2.js";import"./clinicalDaysStore-B_OSZL_p.js";import"./DateInputField-BPOYyjad.js";import"./SelectFacility-BNO4OXTB.js";import"./previousVitals-B-4hpqJp.js";import"./apexcharts-WsYLmum8.js";import"./patient_complaints_service-DMyyo6lV.js";import"./patient_lab_service-Bs8EDuFh.js";import"./UpcomingFeature-RflQTwea.js";import"./FeatusModal-Bl_l9Tw4.js";import"./vitals_service-BmAhXDdZ.js";import"./OutcomeModal.vue_vue_type_style_index_0_scoped_ffb9b64e_lang-DJTYMFDJ.js";const jt=S({name:"Menu",components:{IonContent:N,IonHeader:I,IonItem:T,IonList:w,IonMenu:B,IonTitle:g,IonToolbar:H,IonCheckbox:V,BasicForm:E,BasicCard:F},data(){return{iconsContent:P,test:"",cardData:{}}},computed:{...l(c,["patientHistoryHIV"])},watch:{patientHistoryHIV:{handler(){this.controllFields(),this.buildCards()},deep:!0}},mounted(){this.updateEnrollmentStores(),this.buildCards()},methods:{buildCards(){const t=c();this.cardData={mainTitle:"Enrollment",cards:[{cardTitle:"HIV history  ",content:this.patientHistoryHIV,initialData:t.getInitialPatientHistoryHIV()}]}},openModal(){v(M)},updateEnrollmentStores(){c().setPatientHistoryHIV(this.patientHistoryHIV)},controllFields(){Ht(this.patientHistoryHIV,"HIV")=="R"?Z(this.patientHistoryHIV,"ART_start_date","displayNone",!1):Z(this.patientHistoryHIV,"ART_start_date","displayNone",!0)},async handleInputData(t){console.log(t.al),t.al&&(t.value.detail.checked?b(this.patientHistoryHIV,t.al.name,"displayNone",!1):b(this.patientHistoryHIV,t.al.name,"displayNone",!0))}}});function Yt(t,e,r,o,p,m){const s=i("basic-card");return a(),d(s,{content:t.cardData,"onUpdate:inputValue":t.handleInputData},null,8,["content","onUpdate:inputValue"])}const Zt=$(jt,[["render",Yt],["__scopeId","data-v-965a0906"]]),qt=S({name:"Menu",components:{IonContent:N,IonHeader:I,IonItem:T,IonList:w,IonMenu:B,IonTitle:g,IonToolbar:H,IonCheckbox:V,BasicForm:E,BasicCard:F},data(){return{iconsContent:P,test:"",cardData:{}}},computed:{...l(c,["familyHistory"])},watch:{familyHistory:{handler(){this.buildCards()},deep:!0}},async mounted(){this.buildCards()},methods:{buildCards(){this.cardData={mainTitle:"Enrollment",cards:[{cardTitle:"Family history",content:this.familyHistory}]}},openModal(){v(M)},updateEnrollmentStores(){c().setFamilyHistory(this.familyHistory)},testF(t){console.log(t)}}});function Kt(t,e,r,o,p,m){const s=i("basic-card");return a(),d(s,{content:t.cardData},null,8,["content"])}const Qt=$(qt,[["render",Kt],["__scopeId","data-v-4c6d7db7"]]),Xt=S({name:"Menu",components:{IonContent:N,IonHeader:I,IonItem:T,IonList:w,IonMenu:B,IonTitle:g,IonToolbar:H,IonCheckbox:V,BasicForm:E,BasicCard:F},data(){return{iconsContent:P,test:"",cardData:{}}},computed:{...l(c,["traditionalMedicine"])},watch:{traditionalMedicine:{handler(){this.buildCards()},deep:!0}},mounted(){this.updateEnrollmentStores(),this.buildCards()},methods:{buildCards(){const t=c();this.cardData={mainTitle:"Enrollment",cards:[{cardTitle:"Traditional Medicine",content:this.traditionalMedicine,initialData:t.getInitialTraditionalMedicine()}]}},openModal(){v(M)},updateEnrollmentStores(){c().setTraditionalMedicine(this.traditionalMedicine)},async handleInputData(t){console.log(t.al),t.al&&(t.value.detail.checked?b(this.traditionalMedicine,t.al.name,"displayNone",!1):b(this.traditionalMedicine,t.al.name,"displayNone",!0))}}});function xt(t,e,r,o,p,m){const s=i("basic-card");return a(),d(s,{content:t.cardData,"onUpdate:inputValue":t.handleInputData},null,8,["content","onUpdate:inputValue"])}const te=$(Xt,[["render",xt],["__scopeId","data-v-efb5c045"]]),ee=S({name:"Menu",components:{IonContent:N,IonHeader:I,IonItem:T,IonList:w,IonMenu:B,IonTitle:g,IonToolbar:H,IonCheckbox:V,BasicForm:E,BasicCard:F},data(){return{iconsContent:P,test:"",cardData:{}}},computed:{...l(c,["patientTB"])},watch:{patientTB:{handler(){this.buildCards()},deep:!0}},mounted(){this.updateEnrollmentStores(),this.buildCards()},methods:{buildCards(){const t=c();this.cardData={mainTitle:"Enrollment",cards:[{cardTitle:"TB History",content:this.patientTB,initialData:t.getInitialPatientTB()}]}},openModal(){v(M)},updateEnrollmentStores(){c().setPatientTB(this.patientTB)},async handleInputData(t){console.log(t.al),t.al&&(t.value.detail.checked?b(this.patientTB,t.al.name,"displayNone",!1):b(this.patientTB,t.al.name,"displayNone",!0))}}});function ne(t,e,r,o,p,m){const s=i("basic-card");return a(),d(s,{content:t.cardData,"onUpdate:inputValue":t.handleInputData},null,8,["content","onUpdate:inputValue"])}const ie=$(ee,[["render",ne],["__scopeId","data-v-b58010a4"]]),ae=S({name:"Menu",components:{IonContent:N,IonHeader:I,IonItem:T,IonList:w,IonMenu:B,IonTitle:g,IonToolbar:H,IonCheckbox:V,BasicForm:E,BasicCard:F},data(){return{iconsContent:P,test:"",cardData:{}}},computed:{...l(c,["patientType"])},watch:{patientType:{handler(){this.buildCards()},deep:!0}},async mounted(){this.buildCards()},methods:{buildCards(){this.cardData={mainTitle:"Enrollment",cards:[{cardTitle:"",content:this.patientType}]}},openModal(){v(M)},testF(t){console.log(t)}}});function oe(t,e,r,o,p,m){const s=i("basic-card");return a(),d(s,{content:t.cardData},null,8,["content"])}const se=$(ae,[["render",oe],["__scopeId","data-v-b8beb3da"]]),re=S({name:"Home",components:{IonContent:N,IonHeader:I,IonMenuButton:ft,IonPage:ht,IonTitle:g,IonToolbar:H,Toolbar:It,ToolbarSearch:Tt,DemographicBar:Rt,IonButton:yt,IonCard:ut,IonCardContent:mt,IonCardHeader:pt,IonCardSubtitle:dt,IonCardTitle:ct,IonAccordion:lt,IonAccordionGroup:rt,IonItem:T,IonLabel:st,IonModal:ot,Stepper:At,PatientHistory:Ut,PatientHistoryHIV:Zt,EnrollmentDiagnosis:Ot,Substance:Wt,NCDNumber:Lt,FamilyHistory:Qt,PatientHistoryTraditionalMedicine:te,PatientHistoryTB:ie,PatientType:se,DynamicButton:gt},data(){return{iconsContent:P,demographic:!0,currentStep:"NCD Number, Patient Type & Family History",scanner:!1,steps:"",isOpen:!1,iconListStatus:"active_icon",iconGridStatus:"inactive_icon"}},watch:{$route:{async handler(){await K()},deep:!0}},computed:{...l(zt,["apiStatus"]),...l(Ft,["patient"]),...l(Et,["vitals"]),...l(Mt,["investigations"]),...l(wt,["diagnosis"]),...l(Q,["enrollmentDisplayType"]),...l(Bt,["NCDActivities"]),...l(c,["NCDNumber","enrollmentDiagnosis","substance","patientHistoryHIV","patientHistory","patientType","familyHistory","traditionalMedicine","patientTB"])},async mounted(){this.setDisplayType(this.enrollmentDisplayType),await K()},setup(){return{chevronBackOutline:St,checkmark:bt,arrowForwardCircle:_t,grid:Ct,list:Dt}},methods:{setCurrentStep(t){this.currentStep=t},nextStep(){const t=this.steps.indexOf(this.currentStep);t<this.steps.length-1&&(this.currentStep=this.steps[t+1])},previousStep(){const t=this.steps.indexOf(this.currentStep);t>0&&(this.currentStep=this.steps[t-1])},async saveData(){await this.saveNcdNumber()},async saveNcdNumber(){const t=JSON.parse(localStorage.getItem("userRoles")),e=t||[],r=vt(this.NCDNumber,"NCDNumber","value");if(this.apiStatus){if(!r){U("NCD number is blank",5e3);return}if(r&&Pt.isNumber(r)==null){const o=localStorage.getItem("locationID"),m=await $t.get("site_prefix_".concat(o))+"-NCD-"+r;if(await Jt.ncdNumberExists(m))U("NCD number already exists",5e3);else{const f=new kt;this.patient.NcdID=m,f.createNcdNumber(m),await this.saveEnrollment(),await Vt();let y="";e.some(z=>z.role==="General Registration Clerk"||e.some(R=>R.role==="Vitals Clerk"||e.some(G=>G.role==="Registration Clerk")))&&q.getProgramID()==32||this.NCDActivities.length==0?y="home":y="consultationPlan",this.$router.push(y)}}else U("Invalid NCD number",5e3)}else{this.patient.NcdID="-",await this.saveEnrollment();let o="";e.some(p=>p.role==="General Registration Clerk"||e.some(m=>m.role==="Vitals Clerk"||e.some(s=>s.role==="Registration Clerk")))&&q.getProgramID()==32||this.NCDActivities.length==0?o="home":o="consultationPlan",this.$router.push(o)}},openModal(){v(Gt)},nav(t){this.$router.push(t)},setDisplayType(t){t=="grid"?this.currentStep="Enrollment":(this.currentStep="NCD Number, Patient Type & Family History",this.steps=["NCD Number, Patient Type & Family History","Patient History","HIV & TB History & Diagnosis"]),Q().setEnrollmentDisplayType(t),this.setIconClass()},setIconClass(){this.iconListStatus="inactive_icon",this.iconGridStatus="inactive_icon",this.enrollmentDisplayType=="list"?this.iconListStatus="active_icon":this.enrollmentDisplayType=="grid"&&(this.iconGridStatus="active_icon")},async saveEnrollment(){var r,o,p;const t=JSON.parse(JSON.stringify(this.patient));(p=(o=(r=t.diagnosis)!=null?r:t.diagnosis={}).unsaved)!=null||(o.unsaved=[]);const e=await A(this.enrollmentDiagnosis);t.diagnosis.unsaved.push(...e),t.NCDEnrollment={unsaved:{familyMedicalHistory:await W(this.familyHistory),patientRegistration:await W(this.patientType),complications:await A(this.patientHistory),hivStatusAtEnrollment:await W(this.patientHistoryHIV),tbReception:await A(this.patientTB),medicalHistory:await A(this.traditionalMedicine)},saved:[{}]},await Nt(t)}}}),le={class:"container"},ce={class:"icon_div"},de={key:0},pe={key:1},me={key:0},ue={key:1},ye={style:{display:"flex","justify-content":"center"}},he={key:2},fe={key:0,class:"footer2"},De={class:"footer position_content"};function Ce(t,e,r,o,p,m){const s=i("Toolbar"),f=i("DynamicButton"),y=i("ion-icon"),z=i("NCDNumber"),R=i("PatientType"),G=i("FamilyHistory"),L=i("ion-col"),J=i("PatientHistory"),X=i("PatientHistoryTraditionalMedicine"),j=i("PatientHistoryHIV"),x=i("PatientHistoryTB"),Y=i("EnrollmentDiagnosis"),tt=i("ion-row"),et=i("ion-content"),O=i("ion-breadcrumb"),nt=i("ion-breadcrumbs"),it=i("ion-footer"),at=i("ion-page");return a(),d(at,null,{default:u(()=>[n(s),n(et,null,{default:u(()=>[h("div",le,[h("div",{style:{display:"flex","align-items":"center"},onClick:e[0]||(e[0]=D=>t.nav("patientProfile"))},[n(f,{fill:"clear",name:"Back to profile",iconSlot:"start",icon:t.iconsContent.arrowLeft},null,8,["icon"])]),e[9]||(e[9]=h("div",{class:"title"},[h("div",{class:"demographics_title"},"Enrollment")],-1)),h("div",ce,[n(y,{class:k(t.iconListStatus),icon:t.list,onClick:e[1]||(e[1]=D=>t.setDisplayType("list"))},null,8,["class","icon"]),n(y,{class:k(t.iconGridStatus),style:{"font-size":"21px","margin-top":"1.5px"},icon:t.grid,onClick:e[2]||(e[2]=D=>t.setDisplayType("grid"))},null,8,["class","icon"])])]),t.enrollmentDisplayType=="grid"?(a(),_("div",de,[t.enrollmentDisplayType=="grid"?(a(),d(tt,{key:0,class:"card_row"},{default:u(()=>[n(L,{"size-sm":"12","size-md":"12","size-lg":"6","size-xl":"4"},{default:u(()=>[n(z),n(R),n(G)]),_:1}),n(L,{"size-sm":"12","size-md":"12","size-lg":"6","size-xl":"4"},{default:u(()=>[n(J),n(X)]),_:1}),n(L,{"size-sm":"12","size-md":"12","size-lg":"6","size-xl":"4"},{default:u(()=>[n(j),n(x),n(Y)]),_:1})]),_:1})):C("",!0)])):C("",!0),t.enrollmentDisplayType=="list"?(a(),_("div",pe,[t.currentStep=="NCD Number, Patient Type & Family History"?(a(),_("div",me,[n(z),n(R),n(G)])):C("",!0),t.currentStep=="Patient History"?(a(),_("div",ue,[h("div",ye,[n(J)])])):C("",!0),t.currentStep=="HIV & TB History & Diagnosis"?(a(),_("div",he,[n(j),n(Y)])):C("",!0)])):C("",!0)]),_:1}),t.enrollmentDisplayType=="grid"?(a(),_("div",fe,[n(f,{name:"Save",iconSlot:"end",icon:t.iconsContent.saveWhite,onClick:e[3]||(e[3]=D=>t.saveData())},null,8,["icon"])])):C("",!0),t.enrollmentDisplayType=="list"?(a(),d(it,{key:1},{default:u(()=>[h("div",De,[t.currentStep=="NCD Number, Patient Type & Family History"?(a(),d(f,{key:0,name:"Cancel",color:"danger",onClick:e[4]||(e[4]=D=>t.nav("/patientProfile"))})):(a(),d(f,{key:1,name:"Previous",icon:t.iconsContent.arrowLeftWhite,color:"medium",onClick:t.previousStep},null,8,["icon","onClick"])),n(nt,{class:"breadcrumbs displayNoneMobile"},{default:u(()=>[n(O,{onClick:e[5]||(e[5]=D=>t.setCurrentStep("NCD Number, Patient Type & Family History")),class:k({active:t.currentStep==="NCD Number, Patient Type & Family History"})},{default:u(()=>[e[10]||(e[10]=h("span",{class:"breadcrumb-text"},"NCD Number, Patient Type & Family History",-1)),n(y,{slot:"separator",size:"large",icon:t.iconsContent.arrowRight},null,8,["icon"])]),_:1,__:[10]},8,["class"]),n(O,{onClick:e[6]||(e[6]=D=>t.setCurrentStep("Patient History")),class:k({active:t.currentStep==="Patient History"})},{default:u(()=>[e[11]||(e[11]=h("span",{class:"breadcrumb-text"},"Patient History",-1)),n(y,{slot:"separator",size:"large",icon:t.iconsContent.arrowRight},null,8,["icon"])]),_:1,__:[11]},8,["class"]),n(O,{onClick:e[7]||(e[7]=D=>t.setCurrentStep("HIV & TB History & Diagnosis")),class:k({active:t.currentStep==="HIV & TB History & Diagnosis"})},{default:u(()=>[e[12]||(e[12]=h("span",{class:"breadcrumb-text"},"HIV & TB History & Diagnosis",-1)),n(y,{slot:"separator",size:"large",icon:t.iconsContent.arrowRight},null,8,["icon"])]),_:1,__:[12]},8,["class"])]),_:1}),t.currentStep=="HIV & TB History & Diagnosis"?(a(),d(f,{key:2,name:"Save",iconSlot:"end",icon:t.iconsContent.saveWhite,onClick:e[8]||(e[8]=D=>t.saveData())},null,8,["icon"])):(a(),d(f,{key:3,name:"Next",iconSlot:"end",icon:t.iconsContent.arrowRightWhite,onClick:t.nextStep},null,8,["icon","onClick"]))])]),_:1})):C("",!0)]),_:1})}const Ke=$(re,[["render",Ce],["__scopeId","data-v-c5d06ee8"]]);export{Ke as default};
