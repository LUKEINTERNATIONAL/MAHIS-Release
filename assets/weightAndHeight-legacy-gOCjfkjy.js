System.register(["./vendor-legacy-phTeNEOA.js","./index-legacy-41CLX9DW.js","./lodash-legacy-C-x9g9Na.js","./BasicForm-legacy-DDqkmuHZ.js","./customDatePicker-legacy-DCExsfae.js","./VitalsMixin.vue_vue_type_script_lang-legacy-D8yVSZJF.js","./formatServerData-legacy-DrpzsaNI.js","./vaccines_service-legacy-CPGusTe9.js","./barcode-qrcode-reader-legacy-Bv1zJ0Fk.js","./stock_service-legacy-JFselPQk.js"],(function(t,e){"use strict";var a,i,n,o,s,l,d,r,c,u,p,h,m,v,g,f,b,x,y,w,_,D,C,k,I,T,B,V,S,H,N,P,O,z,M,j,A,W,R,F,E,L,U,$,q,G,Y,J,K,Q,X,Z,tt,et,at,it,nt,ot,st,lt,dt,rt,ct,ut,pt,ht,mt,vt,gt,ft,bt,xt,yt,wt,_t,Dt,Ct,kt,It,Tt,Bt,Vt,St;return{setters:[t=>{a=t.D,i=t.d,n=t.ab,o=t.b0,s=t.G,l=t.E,d=t.ac,r=t.ad,c=t.a2,u=t.I,p=t.a7,h=t.R,m=t.ag,v=t.bd,g=t.aR,f=t.H,b=t.e,x=t.m,y=t.f,w=t.k,_=t.O,D=t.Q,C=t.K,k=t.l,I=t.J,T=t.a,B=t.r,V=t.u,S=t._,H=t.b8,N=t.N,P=t.F,O=t.eX,z=t.a3,M=t.a4,j=t.P,A=t.i,W=t.v,R=t.a8,F=t.a9,E=t.bg,L=t.af,U=t.ae,$=t.aN,q=t.ck,G=t.aO,Y=t.aM,J=t.aP,K=t.aa,Q=t.cb,X=t.M,Z=t.L,tt=t.b7,et=t.a6},t=>{at=t.k,it=t.i,nt=t.B,ot=t.aK,st=t.M,lt=t.u,dt=t.H,rt=t._,ct=t.j,ut=t.t,pt=t.$,ht=t.S,mt=t.l,vt=t.G,gt=t.n,ft=t.bf,bt=t.K,xt=t.bx,yt=t.cb},t=>{wt=t.l},t=>{_t=t.B},t=>{Dt=t.c},t=>{Ct=t._},t=>{kt=t.a},t=>{It=t.i,Tt=t.s,Bt=t.j},t=>{Vt=t.I},t=>{St=t.S}],execute:function(){var e=document.createElement("style");e.textContent=".vitals_title[data-v-d7374316]{margin-bottom:50px}.input-with-icon[data-v-d7374316]{position:relative}.input-icon[data-v-d7374316]{position:absolute;left:10px;top:50%;transform:translateY(-50%);color:gray}ion-col[data-v-d7374316]{padding-bottom:15px}h5[data-v-d7374316]{margin-top:0;text-overflow:ellipsis;white-space:nowrap;overflow:hidden}.OtherVitalsTitle[data-v-d7374316]{font-style:normal;font-weight:600;font-size:20px;color:#00190e}.OtherVitalsHeading[data-v-d7374316]{display:flex;justify-content:space-between;margin:20px;line-height:60px;flex-direction:column}.vitalsContent[data-v-d7374316]{height:500px}.saveBtn[data-v-d7374316]{display:flex;justify-content:space-between;margin:20px;width:330px;align-items:center}.btnContent[data-v-d7374316]{display:flex;justify-content:center;line-height:60px}.modal_wrapper[data-v-d7374316]{padding:0 10px;background:#fff}.TodaysDate[data-v-d7374316]{display:flex;align-items:center}.TodaysDate span[data-v-d7374316]{margin-left:5px}.scanner__container .content[data-v-e0d52d85]{min-height:inherit!important;background:#a9a9a9!important}.overlay[data-v-e0d52d85]{position:relative}.focus-frame[data-v-e0d52d85]{position:absolute;top:50%;left:50%;width:60%;height:60%;box-sizing:border-box;transform:translate(-50%,-50%);pointer-events:none;z-index:2}.dark-overlay[data-v-e0d52d85]{position:absolute;background:rgba(0,0,0,.5);pointer-events:none;z-index:1}.dark-overlay.top[data-v-e0d52d85]{top:0;left:0;right:0;height:20%}.dark-overlay.bottom[data-v-e0d52d85]{bottom:0;left:0;right:0;height:20%}.dark-overlay.left[data-v-e0d52d85]{top:20%;bottom:20%;left:0;width:20%}.dark-overlay.right[data-v-e0d52d85]{top:20%;bottom:20%;right:0;width:20%}.my-custom-alert[data-v-cf655518]{--background: #ffffff;--color: #cf4a4a !important}[data-v-cf655518] .alert-button-group{padding:8px}[data-v-cf655518] .alert-danger-button{background-color:#cf4a4a!important;color:var(--ion-color-light)!important}.alert-message-red[data-v-cf655518]{color:#cf4a4a!important}.shadowless-card[data-v-039b66ba]{box-shadow:none;border:none;background:none}.vitals_title[data-v-58aa351e]{margin-bottom:50px}.input-with-icon[data-v-58aa351e]{position:relative}.input-icon[data-v-58aa351e]{position:absolute;left:10px;top:50%;transform:translateY(-50%);color:gray}ion-col[data-v-58aa351e]{padding-bottom:15px}h5[data-v-58aa351e]{margin-top:0;text-overflow:ellipsis;white-space:nowrap;overflow:hidden}.OtherVitalsTitle[data-v-58aa351e]{font-style:normal;font-weight:600;font-size:20px;color:#00190e}.OtherVitalsHeading[data-v-58aa351e]{display:flex;justify-content:space-between;margin:20px;line-height:60px}.vitalsContent[data-v-58aa351e]{height:500px}.saveBtn[data-v-58aa351e]{display:flex;justify-content:space-between;margin:20px;align-items:center}.btnContent[data-v-58aa351e]{justify-content:center;line-height:60px}.advac[data-v-58aa351e]{font-style:normal;font-weight:600;font-size:20px;color:#00190e}.lbl-ct[data-v-58aa351e]{white-space:nowrap;color:#08475e;font-size:14px}.om[data-v-58aa351e]{font-size:10;font-weight:600px}.lbl-tl[data-v-58aa351e]{min-width:20px;color:#b3b3b3!important;white-space:nowrap}.error-label[data-v-58aa351e]{background:#fecdca;color:#b42318;text-transform:none;padding:6%;border-radius:10px;margin-top:7px;display:flex;text-align:center}.modal_wrapper[data-v-58aa351e]{background:inherit}.client_admi[data-v-58aa351e]{display:flex;flex-direction:row;align-items:flex-start;padding:10px 10px 0;gap:5px;width:363px;height:28px;flex:none;order:2;align-self:stretch;flex-grow:0}.client_admi_sub[data-v-58aa351e]{font-weight:400;font-size:15px;color:#636363}.client_admin_sub_x[data-v-58aa351e]{font-weight:500;font-size:16px;color:#454545}.saveBtn[data-v-ea212a62]{display:flex;justify-content:space-between;margin:20px;align-items:center}ion-row.centered-content[data-v-ea212a62]{display:flex;justify-content:center;align-items:center}.text-container[data-v-ea212a62]{text-align:center;padding:20px;border-radius:10px}.text-container div[data-v-ea212a62]{margin-bottom:10px;font-family:Arial,sans-serif;color:#333}.text-container div[data-v-ea212a62]:last-child{margin-bottom:0}.administerVac .button-content[data-v-245b1fb0]{display:flex;flex-direction:column;text-align:center;width:100%;gap:15px}.demographics[data-v-245b1fb0]{box-sizing:border-box;width:95vw;height:92px;left:calc(50% - 203px);margin-top:10px;background:#fff;border:1px solid #d9d9d9;border-radius:7px}.demographicsFirstRow[data-v-245b1fb0]{display:flex;flex-direction:row;align-items:center;padding:10px 5px;gap:15px;height:24px;justify-content:space-between}.name[data-v-245b1fb0]{height:24px;font-style:normal;font-weight:700;font-size:20px;line-height:24px;color:#00190e;flex:none;order:0;flex-grow:0}.demographicsText[data-v-245b1fb0]{font-style:normal;font-weight:400;font-size:14px;line-height:5px;color:#636363;flex:none;order:0;flex-grow:0}.demographicsOtherRow[data-v-245b1fb0]{display:flex;flex-direction:row;align-items:center;padding:1px 5px;gap:10px;height:18px;left:calc(50% - 95px);top:calc(50% - 467px)}.smallFont[data-v-245b1fb0]{font-size:14px}.mediumFontColor[data-v-245b1fb0]{color:#00190e}.weightHeightGraphBtns[data-v-245b1fb0]{display:flex;justify-content:space-between;margin-top:8px}.btnText[data-v-245b1fb0]{font-style:normal;font-weight:500;font-size:14px}.btnTextWeight[data-v-245b1fb0]{color:#000;--border-width: 1px;margin-right:15px}.dot[data-v-245b1fb0]{font-size:25px}.initialsBox[data-v-245b1fb0]{width:80px;height:80px;left:31px;top:122px;background:#5983ba;border-radius:10px;align-items:center;display:flex}.initialsText[data-v-245b1fb0]{width:100%;font-style:normal;font-weight:800;font-size:40px;display:flex;align-items:center;text-align:center;justify-content:center;align-content:center;color:#fff}.outcomeStatus[data-v-245b1fb0]{padding:2px 7px;width:50px;height:18px;background:#ded;border-radius:22px;font-style:normal;font-weight:700;font-size:14px;align-items:center;text-align:center}.graphSection[data-v-245b1fb0]{box-sizing:border-box;background:#f7f7f7;border:1px solid #d9d9d9;border-radius:3px;margin-top:7px}.graphBtn[data-v-245b1fb0]{display:flex;justify-content:center}.dueAlert[data-v-245b1fb0]{display:flex;justify-content:space-between;border:solid 1px #ccc;border-style:dashed;margin-top:10px;padding:5px}.dueAlertText[data-v-245b1fb0]{font-style:normal;font-weight:500;font-size:14px;color:#b42318;padding:10px}.vaccinesTitle[data-v-245b1fb0]{display:flex;justify-content:space-around;padding:15px}.vaccinesTitleText[data-v-245b1fb0]{font-style:normal;font-weight:600;font-size:17px;color:#00190e}.vaccinesTitleDate[data-v-245b1fb0]{font-style:normal;font-weight:400;font-size:14px;color:#636363}.milestone[data-v-245b1fb0]{display:flex;justify-content:space-between;padding-left:15px;padding-right:15px}.arrowBtns[data-v-245b1fb0]{position:absolute;top:30px}.vaccinesList[data-v-245b1fb0]{margin-top:8px}.seeFullList[data-v-245b1fb0]{font-style:normal;font-weight:500;font-size:14px;line-height:24px;display:flex;align-items:center;text-align:center;color:#316cba;float:right}.warningText[data-v-245b1fb0]{display:flex;flex-direction:row;justify-content:center;align-items:center;padding:6px;gap:1px;background:#fedf89;border-radius:4px;font-size:13px;margin-right:10px;color:#636363}.successText[data-v-245b1fb0]{display:flex;flex-direction:row;justify-content:center;align-items:center;padding:6px;gap:1px;background:#ded;border-radius:4px;font-size:13px;color:#636363}.centerBtns[data-v-245b1fb0]{display:flex;justify-content:center;margin-bottom:10px}.otherVaccine[data-v-245b1fb0]{padding:10px;margin-bottom:10px}.dotsWizard[data-v-245b1fb0]{display:flex;justify-content:space-between;width:150px;margin:0 auto;align-items:center}.dotBig[data-v-245b1fb0]{font-size:.7rem!important}.dotStatus[data-v-245b1fb0]{font-size:.4rem!important}.lastVaccineTitle[data-v-245b1fb0]{display:flex;justify-content:space-between}.lastVaccine[data-v-245b1fb0]{padding-left:20px;padding-right:20px;padding-top:10px}.lastVaccineText[data-v-245b1fb0]{font-style:normal;font-weight:600;font-size:18px;line-height:150%;color:#00190e}.lastVaccineList[data-v-245b1fb0]{display:flex;justify-content:space-between;width:210px;margin-bottom:20px}.lastVaccineDate[data-v-245b1fb0]{display:flex;justify-content:space-between;width:210px;margin-bottom:10px;align-items:center}.administerVac[data-v-245b1fb0]{height:78px;min-width:160px;max-width:100%;width:auto;margin:7px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.vitals_title[data-v-59edb4e4]{border-bottom:1px solid #b3b3b3;margin-bottom:50px}.input-with-icon[data-v-59edb4e4]{position:relative}.input-icon[data-v-59edb4e4]{position:absolute;left:10px;top:50%;transform:translateY(-50%);color:gray}ion-col[data-v-59edb4e4]{padding-bottom:15px}h5[data-v-59edb4e4]{margin-top:0;text-overflow:ellipsis;white-space:nowrap;overflow:hidden}.OtherVitalsTitle[data-v-59edb4e4]{font-style:normal;font-weight:600;font-size:20px;color:rgba(31,34,33,.83)!important}.OtherVitalsHeading[data-v-59edb4e4]{display:flex;justify-content:space-between;margin:20px;border-bottom:1px solid #ccc;line-height:60px}.mod-ls[data-v-59edb4e4]{border-bottom:1px solid #ccc;line-height:60px}.saveBtn[data-v-59edb4e4]{display:flex;justify-content:space-between;margin:20px;width:330px;align-items:center}.btnContent[data-v-59edb4e4]{display:flex;justify-content:center;border-top:1px solid #ccc;line-height:60px}.dotStatus[data-v-59edb4e4]{font-size:.5rem!important}ion-button.medicalAlBtn[data-v-59edb4e4]{--background: #fecdca;--color: #b42318;text-transform:none;font-size:large}ion-button.medicalAlBtn-2[data-v-59edb4e4]{--background: #DDEEDD;--color: #016302;text-transform:none;font-size:large}.otherVitalsModal[data-v-59edb4e4]{--height: 530px}.lbl-tl[data-v-7b242731]{min-width:20px;color:#b3b3b3!important;white-space:nowrap}.lbl-ct[data-v-7b242731]{white-space:nowrap;color:#08475e}.pim-cls-1[data-v-7b242731]{--background: #ffff}ion-footer[data-v-7b242731]{--ion-toolbar-background: #fff}.dashed-hr[data-v-7b242731]{border:none;border-top:2px dashed #b3b3b3;margin:20px 0}.modal_wrapper[data-v-7b242731]{padding:0 10px;background:#fff}.OtherVitalsTitle[data-v-7b242731]{font-style:normal;font-weight:600;font-size:16px;color:#00190e}.OtherVitalsHeading[data-v-7b242731]{display:flex;justify-content:space-between;margin:10px;line-height:40px;flex-direction:column}.vitalsContent[data-v-7b242731]{height:500px;margin:10px}.saveBtn[data-v-7b242731]{display:flex;justify-content:space-between;margin:20px;width:330px;align-items:center}.btnContent[data-v-7b242731]{display:flex;justify-content:center;line-height:60px}.TodaysDate[data-v-7b242731]{display:flex;align-items:center}.TodaysDate span[data-v-7b242731]{margin-left:5px}\n/*$vite$:1*/",document.head.appendChild(e);const Ht=[{data:{rowData:[{colData:[{inputHeader:"Systolic Pressure",unit:"mmHg",icon:at.systolicPressure,value:"",name:"Systolic",required:!0,eventType:"input",disabled:!1,valueType:"number",validationFunctionName:"vitalsSystolic"},{inputHeader:"Diastolic pressure",unit:"mmHg",icon:at.diastolicPressure,value:"",name:"Diastolic",required:!0,eventType:"input",disabled:!1,valueType:"number",validationFunctionName:"vitalsDiastolic"}]}]},alerts:[{backgroundColor:"",status:"",icon:"",textColor:"",value:"",name:"bp",index:""}],previousView:{name:"vitals"}},{data:{rowData:[{colData:[{inputHeader:"Temperature",unit:"C",icon:at.temprature,value:"",name:"Temperature",eventType:"input",validationFunctionName:"vitalsTemperature",valueType:"number"},{inputHeader:"Pulse rate",unit:"BMP",icon:at.pulse,value:"",name:"Pulse",eventType:"input",validationFunctionName:"vitalsPulseRate",valueType:"number"}]}]},alerts:[{backgroundColor:"",status:"",icon:"",textColor:"",value:"",name:"temp",index:""},{backgroundColor:"",status:"",icon:"",textColor:"",value:"",name:"pulse",index:""}]},{data:{rowData:[{colData:[{inputHeader:"Respiratory rate",unit:"BMP",icon:at.respiratory,value:"",name:"Respiratory rate",eventType:"input",validationFunctionName:"vitalsRespiratoryRate",valueType:"number"},{inputHeader:"Oxygen saturation",unit:"%",icon:at.oxgenStaturation,value:"",name:"SAO2",eventType:"input",validationFunctionName:"vitalsOxygenSaturation",valueType:"number"}]}]},alerts:[{backgroundColor:"",status:"",icon:"",textColor:"",value:"",name:"respiratory",index:""},{backgroundColor:"",status:"",icon:"",textColor:"",value:"",name:"oxygen",index:""}]}],Nt=a("immunizationVitalsStore",{state:()=>({vitals:[...Ht]}),actions:{setVitals(t){this.vitals=t},getInitialVitals:()=>[...wt.cloneDeep(Ht)]},persist:!0}),Pt=i({mixins:[Ct],components:{IonContent:p,IonHeader:u,IonItem:c,IonList:r,IonMenu:d,IonTitle:l,IonToolbar:s,IonInput:o,BasicInputField:nt,BasicForm:_t,PreviousVitals:it,customDatePicker:Dt},data:()=>({iconsContent:at,vValidations:"",hasValidationErrors:[],vitalsInstance:{},validationStatus:{heightWeight:!1,bloodPressure:!1,pulseRate:!1},showPD:!1,todays_date:dt.sessionDate(),formOpen:!0}),computed:{...n(lt,["patient"]),...n(Nt,["vitals"])},async serverPrefetch(){this.updateVitalsStores()},async mounted(){this.cleanVitalForm(),this.vitalsData=this.vitals,await this.setTodayVitals(),await this.validateRowData()},watch:{vitals:{handler(){this.vitalsData=this.vitals},deep:!0},$route:{handler(){this.cleanVitalForm(),this.vitalsData=this.vitals}}},setup:()=>({checkmark:g,pulseOutline:v}),methods:{cleanVitalForm(){const t=Nt();t.setVitals(t.getInitialVitals())},navigationMenu(t){m.close(),this.$router.push(t)},updateVitalsStores(){Nt().setVitals(this.vitals)},async validateRowData(){const t=st(this.vitals,"Height (cm)","value"),e=st(this.vitals,"Weight","value"),a=st(this.vitals,"Systolic","value"),i=st(this.vitals,"Diastolic","value"),n=st(this.vitals,"Temperature","value"),o=st(this.vitals,"Pulse","value"),s=st(this.vitals,"Respiratory rate","value"),l=st(this.vitals,"SAO2","value");await this.setBMI(t,e),await this.updateBP(a,i);const d=this.getPulseRateStatus(o);await this.updateRate("pulse",o," BMP",d,4);const r=this.getTemperatureStatus(n);this.updateRate("temp",n,"Â°C",r,4);const c=this.getRespiratoryRateStatus(s);this.updateRate("respiratory",s,"BMP",c,6);const u=this.getOxygenSaturationStatus(l);this.updateRate("oxygen",l,"%",u,6)},showCPD(){this.showPD=!0},closeForm(){this.formOpen=!1},async saveVitals(){h.dismiss();const t=await kt(this.vitals);if(t.length>0){var e;let a=null===(e=this.patient)||void 0===e?void 0:e.vitals;a.unsaved=[...a.unsaved,...t],await ot(this.patient)}}}}),Ot={key:0,class:"modal_wrapper"},zt={class:"OtherVitalsHeading"},Mt={class:"TodaysDate"},jt={class:""},At={class:"btnContent"},Wt={class:"saveBtn"};t("O",rt(Pt,[["render",function(t,e,a,i,n,o){const s=f("basic-form"),l=f("customDatePicker"),d=f("ion-icon"),r=f("ion-button");return t.formOpen?(y(),b("div",Ot,[w("div",zt,[e[3]||(e[3]=w("div",{class:"OtherVitalsTitle"},"OTHER VITALS",-1)),w("div",Mt,[e[1]||(e[1]=D("Todays Date: ")),e[2]||(e[2]=w("span",null,null,-1)),D(" "+C(t.todays_date),1)])]),w("div",jt,[k(s,{contentData:t.vitals,"onUpdate:inputValue":e[0]||(e[0]=e=>t.validateRowData())},null,8,["contentData"])]),t.showPD?(y(),_(l,{key:0})):x("",!0),w("div",At,[w("div",Wt,[w("div",null,[k(r,{class:"btnText",fill:"solid",onClick:t.saveVitals},{default:I((()=>[e[4]||(e[4]=D(" Done today ")),k(d,{slot:"end",size:"small",icon:t.iconsContent.calenderwithPlus},null,8,["icon"])])),_:1,__:[4]},8,["onClick"])]),e[6]||(e[6]=w("div",null,null,-1)),w("div",null,[k(r,{class:"btnText",fill:"solid",onClick:t.showCPD},{default:I((()=>[e[5]||(e[5]=D(" Done earlier ")),k(d,{slot:"end",size:"small",icon:t.iconsContent.calenderWithPenEdit},null,8,["icon"])])),_:1,__:[5]},8,["onClick"])])])])])):x("",!0)}],["__scopeId","data-v-d7374316"]]));const Rt={class:"flex flex-col items-center justify-center mt-6"},Ft={class:"phone mt-6"},Et={class:"content"},Lt={class:"overlay"},Ut={style:{"margin-top":"20px"}},$t=t("Q",rt(i({__name:"QRCodeReader",emits:["scanresult"],setup(t,{emit:e}){T((async()=>{var t;null===(t=s.value)||void 0===t||t.onCanPlay()}));const a=B(void 0),i=B(!1);function n(t){a.value=t,null!=a.value&&(ct().setTempScannedBatchNumber(a.value),function(t){d("scanresult",t),l()}(a.value))}function o(t){i.value=t}const s=B(null);function l(){h.dismiss()}const d=e;return(t,e)=>(y(),b(P,null,[w("div",Rt,[w("div",Ft,[k(V(S),null,{default:I((()=>[D(C(a.value),1)])),_:1}),w("div",Et,[w("div",Lt,[k(V(Vt),{ref_key:"refCamera",ref:s,capture:"shoot","show-on-stream":"",onOnloading:o,onResult:n},null,512),e[0]||(e[0]=H('<div class="focus-frame" data-v-e0d52d85></div><div class="dark-overlay top" data-v-e0d52d85></div><div class="dark-overlay bottom" data-v-e0d52d85></div><div class="dark-overlay left" data-v-e0d52d85></div><div class="dark-overlay right" data-v-e0d52d85></div>',5))])])])]),w("div",Ut,[k(V(N),{onClick:l,id:"cbtn",class:"btnText cbtn",fill:"solid",style:{width:"99%"}},{default:I((()=>e[1]||(e[1]=[D(" Cancel ")]))),_:1,__:[1]})])],64))}}),[["__scopeId","data-v-e0d52d85"]])),qt=i({name:"MyComponent",components:{IonAlert:O},data:()=>({isOpen:!1,alertButtons:[{text:"Close",role:"cancel",cssClass:"alert-danger-button"}],messageContent:"No available batches/lot numbers"}),methods:{setOpen(t){this.isOpen=t},handleDismiss(){this.setOpen(!1),this.$emit("alertClosed"),this.dismiss()},dismiss(){h.dismiss()}},mounted(){this.setOpen(!0)}}),Gt=t("a",rt(qt,[["render",function(t,e,a,i,n,o){const s=f("ion-alert");return y(),_(s,{"is-open":t.isOpen,header:"Please update stock","sub-header":"",message:t.messageContent,buttons:t.alertButtons,"css-class":"my-custom-alert",onDidDismiss:t.handleDismiss},null,8,["is-open","message","buttons","onDidDismiss"])}],["__scopeId","data-v-cf655518"]])),Yt=i({components:{IonRadioGroup:M,IonRadio:z,IonItem:c,IonList:r},props:{action:{type:Function,required:!0},retro:{type:Boolean,required:!0}},async mounted(){this.loadCurrentSelectedDrug()},watch:{retro:{handler(){this.checkToShow()},deep:!0}},data:()=>({lotNumbers:[],selectedOption:{}}),methods:{compareWith:(t,e)=>t.id===e.id,handleChange(t){this.selectedOption=t.detail.value},checkIfSelected(){return!!wt.has(this.selectedOption,"lotNumber")||1==this.checkDrugNameInt()||(ut("Select a batch number!"),!1)},performAction(){1==this.checkIfSelected()&&this.$emit("actionTriggered",this.selectedOption)},async loadCurrentSelectedDrug(){try{const t=ct().getCurrentSelectedDrug();await this.formBatchList(t.drug.drug_id)}catch(t){}},async formBatchList(t){try{const t=ct().getLotNumberData();0==t.length&&this.$emit("emptyList",""),t.forEach((t=>{const e={id:t.id,lotNumber:t.batch_number};this.lotNumbers.push(e)})),this.checkToShow()}catch(e){}},addUnkownLotNumberOption(){const t=ct().getCurrentSelectedDrug();this.lotNumbers.push({id:t.drug.drug_id,lotNumber:"Unknown"})},checkToShow(){1==this.$props.retro&&this.addUnkownLotNumberOption(),this.checkDrugNameInt()},checkDrugNameInt(){const t=ct().getCurrentSelectedDrug();return 1==It(t.drug)&&(this.lotNumbers=[],this.lotNumbers.push({id:t.drug.drug_id,lotNumber:"Unknown"}),!0)}}}),Jt=t("l",rt(Yt,[["render",function(t,e,a,i,n,o){const s=f("ion-radio"),l=f("ion-item"),d=f("ion-radio-group"),r=f("ion-list"),c=f("ion-card"),u=f("ion-row");return y(),_(u,null,{default:I((()=>[k(c,{class:"shadowless-card",style:{width:"100%",padding:"0"}},{default:I((()=>[k(r,null,{default:I((()=>[k(d,{compareWith:t.compareWith,onIonChange:e[0]||(e[0]=e=>t.handleChange(e)),value:"start"},{default:I((()=>[(y(!0),b(P,null,j(t.lotNumbers,(t=>(y(),_(l,{key:t.id},{default:I((()=>[k(s,{value:t},{default:I((()=>[D(C(t.lotNumber),1)])),_:2},1032,["value"])])),_:2},1024)))),128))])),_:1},8,["compareWith"])])),_:1})])),_:1})])),_:1})}],["__scopeId","data-v-039b66ba"]])),Kt=i({components:{IonContent:p,IonHeader:u,IonItem:c,IonList:r,IonMenu:d,IonTitle:l,IonToolbar:s,IonInput:o,BasicInputField:nt,PreviousVitals:it,customDatePicker:Dt,lotNumberList:Jt,alert:Gt},data:()=>({iconsContent:at,showPD:!1,showDateBtns:!0,vaccineDate:"",batchNumber:"",drugName:"",currentDrug:"",is_batch_number_valid:!1,batch_number_error_message:"Enter a valid batch number",full_name:"",sessionDate:dt.toStandardHisDisplayFormat(ht.getSessionDate()),InnerActionBtnPropeties:{name:"Scan",show:!0,fn:()=>{mt($t,{class:"otherVitalsModal qr_code_modal"},!1)},icon:"",show_icon:!1},selected_date_:"",is_a_vaccine:!0}),computed:{...n(ct,["tempScannedBatchNumber"]),...n(lt,["patient"])},setup(){const t=B(null);return{childComponentRef:t,triggerChildAction:()=>{t.value&&t.value.performAction()}}},async mounted(){this.loadCurrentSelectedDrug(),this.displayUserNames();const t=ct();this.showPD=t.isVaccinePassed(),this.showDateBtns=!this.showPD},props:{customSchedule:{type:[],default:[]}},watch:{batchNumber:{handler(){this.validateBatchNumber()},deep:!0},tempScannedBatchNumber:{handler(){null!=this.tempScannedBatchNumber&&(this.batchNumber=this.tempScannedBatchNumber.text,this.validateBatchNumber())}}},methods:{loadCurrentSelectedDrug(){const t=ct();this.currentDrug=t.getCurrentSelectedDrug(),this.drugName=this.currentDrug.drug.drug_name,this.batchNumber=this.currentDrug.drug.vaccine_batch_number?this.currentDrug.drug.vaccine_batch_number:"",1==It(this.currentDrug.drug)&&(this.is_a_vaccine=!1,this.batchNumber="unknown")},showCPD(){this.showPD=!0,this.showDateBtns=!1},dismiss(){h.dismiss()},updateDate(t){this.vaccineDate=dt.toStandardHisFormat(t)},saveBatchWithTodayDate(){let t=ht.getSessionDate();this.saveDta(t)},saveBatch(){let t;t=1==wt.isEmpty(this.vaccineDate)?ht.getSessionDate():this.vaccineDate,this.saveDta(t)},updateBatchNumber(t){var e;const a=t.target.value;this.batchNumber=a||(null===(e=this.tempScannedBatchNumber)||void 0===e?void 0:e.text)||""},async ActionTriggered(t){const e={batch_number:t.lotNumber,date_administered:this.selected_date_,drug_id:this.currentDrug.drug.drug_id,drug_:this.currentDrug},a=ct();a.setAdministeredVaccine(e),await Tt(this.patient),a.setTempScannedBatchNumber(null),this.dismiss()},saveDta(t){this.selected_date_=t,this.triggerChildAction()},isAlphaNumeric:t=>/^[a-zA-Z0-9!@#$%^&*()_+\-=[\]{};':"\\|,.<>/?]+$/.test(t),validateBatchNumber(){1==this.isAlphaNumeric(this.batchNumber)&&(this.is_batch_number_valid=!1),0==this.isAlphaNumeric(this.batchNumber)&&(this.is_batch_number_valid=!0)},updateBatchNumberByPassValue(t){this.batchNumber=t},displayUserNames(){const t=pt().getUser(),e=t.person.names[0].given_name,a=t.person.names[0].family_name;this.full_name=e+" "+a},childAction(){},ShowAlert(){}}}),Qt={class:"modal_wrapper"},Xt={class:"lbl-ct"},Zt={class:"client_admi"},te={class:"client_admin_sub_x"},ee={class:"btnContent"},ae={key:0,class:"saveBtn"},ie={key:1,class:"saveBtn"},ne=t("b",rt(Kt,[["render",function(t,e,a,i,n,o){const s=f("ion-col"),l=f("ion-label"),d=f("ion-row"),r=f("lotNumberList"),c=f("customDatePicker"),u=f("ion-icon"),p=f("ion-button");return y(),b("div",Qt,[k(d,{style:{"margin-top":"10px"}},{default:I((()=>[k(s,{style:{"margin-left":"-3px"}},{default:I((()=>e[0]||(e[0]=[w("div",{class:"om"},"Administer Vaccine",-1)]))),_:1,__:[0]}),k(s,{size:"6",style:{"text-align":"right"}},{default:I((()=>[k(l,{class:"lbl-tl",style:{"font-size":"13"}},{default:I((()=>[e[1]||(e[1]=D(" Todays Date: ")),w("span",Xt,C(t.sessionDate),1)])),_:1,__:[1]})])),_:1})])),_:1}),k(d,null,{default:I((()=>[k(l,{style:{"font-weight":"600px","font-size":"20px",margin:"10px","margin-left":"0px"}},{default:I((()=>[D(C(t.drugName),1)])),_:1})])),_:1}),A(k(d,null,{default:I((()=>[k(l,{style:{margin:"10px","margin-left":"0px","margin-top":"0px",color:"grey"}},{default:I((()=>e[2]||(e[2]=[D("Select Batch number"),w("span",{style:{color:"#b42318"}},"*",-1)]))),_:1,__:[2]})])),_:1},512),[[W,t.is_a_vaccine]]),A(w("div",null,[k(r,{action:t.childAction,retro:t.showPD,ref:"childComponentRef",onActionTriggered:t.ActionTriggered,onEmptyList:t.ShowAlert},null,8,["action","retro","onActionTriggered","onEmptyList"])],512),[[W,t.is_a_vaccine]]),w("div",Zt,[e[3]||(e[3]=w("span",{class:"client_admi_sub"},"Vaccination done by: ",-1)),w("span",te,C(t.full_name),1)]),t.showPD?(y(),_(c,{key:0,onDateChange:t.updateDate},null,8,["onDateChange"])):x("",!0),w("div",ee,[t.showDateBtns?(y(),b("div",ae,[w("div",null,[k(p,{onClick:t.saveBatchWithTodayDate,class:"btnText",fill:"solid"},{default:I((()=>[e[4]||(e[4]=D(" Done today ")),k(u,{slot:"end",size:"small",icon:t.iconsContent.calenderwithPlus},null,8,["icon"])])),_:1,__:[4]},8,["onClick"])]),e[6]||(e[6]=w("div",{style:{"margin-bottom":"20px"}},null,-1)),w("div",null,[k(p,{class:"btnText",fill:"solid",onClick:t.showCPD},{default:I((()=>[e[5]||(e[5]=D(" Done earlier ")),k(u,{slot:"end",size:"small",icon:t.iconsContent.calenderWithPenEdit},null,8,["icon"])])),_:1,__:[5]},8,["onClick"])])])):x("",!0),t.showDateBtns?x("",!0):(y(),b("div",ie,[k(d,{"justify-content-between":""},{default:I((()=>[k(s,{size:"auto"},{default:I((()=>[k(p,{onClick:t.dismiss,id:"cbtn",class:"btnText cbtn",fill:"solid",style:{width:"130px"}},{default:I((()=>e[7]||(e[7]=[D(" Cancel ")]))),_:1,__:[7]},8,["onClick"])])),_:1}),k(s,{size:"auto",class:"ion-text-end",style:{"margin-left":"auto"}},{default:I((()=>[k(p,{onClick:t.saveBatch,class:"btnText",fill:"solid",style:{width:"130px"}},{default:I((()=>e[8]||(e[8]=[D(" Save ")]))),_:1,__:[8]},8,["onClick"])])),_:1})])),_:1})]))])])}],["__scopeId","data-v-58aa351e"]])),oe=i({components:{IonRow:R,IonItem:c,IonList:r,IonRadio:z,IonRadioGroup:M},data:()=>({reasons:[{id:1,name:"Mistake/ Wrong Entry",type:"Mistake/ Wrong Entry"},{id:2,name:"Duplicate",type:"Duplicate"},{id:3,name:"System Error",type:"System Error"}],selectedOption:{}}),computed:{...n(lt,["patient"])},async mounted(){},props:{},methods:{compareWith:(t,e)=>t.id===e.id,handleChange(t){this.selectedOption=t.detail.value},dismiss(){try{h.dismiss()}catch(t){}},checkIfSelected(){return 1==wt.has(this.selectedOption,"name")||(ut("Select a reason!"),!1)},async voidVaccine1(){if(1==this.checkIfSelected())try{const t=ct(),e=t.getVaccineToBeVoided();await Bt(this.patient,e,this.selectedOption.name),vt("Vaccine was successfully voided!"),t.setVaccineReload(!t.getVaccineReload()),h.dismiss({voided:!0})}catch(t){}}}}),se={class:"saveBtn"},le=rt(oe,[["render",function(t,e,a,i,n,o){const s=f("ion-row"),l=f("ion-radio"),d=f("ion-item"),r=f("ion-radio-group"),c=f("ion-list"),u=f("ion-button"),p=f("ion-col");return y(),b(P,null,[k(s,{class:"centered-content"},{default:I((()=>e[1]||(e[1]=[w("div",{class:"text-container"},[w("div",null,"Do you want to void this vaccine?"),w("div",null,"Please specify reason for voiding this administered vaccine?")],-1)]))),_:1,__:[1]}),k(s,null,{default:I((()=>[k(c,{style:{width:"100%"}},{default:I((()=>[k(r,{compareWith:t.compareWith,onIonChange:e[0]||(e[0]=e=>t.handleChange(e)),value:"start"},{default:I((()=>[(y(!0),b(P,null,j(t.reasons,(t=>(y(),_(d,null,{default:I((()=>[k(l,{value:t},{default:I((()=>[D(C(t.name),1)])),_:2},1032,["value"])])),_:2},1024)))),256))])),_:1},8,["compareWith"])])),_:1})])),_:1}),w("div",se,[k(s,{class:"ion-justify-content-between"},{default:I((()=>[k(p,{size:"auto"},{default:I((()=>[k(u,{onClick:t.dismiss,id:"cbtn",class:"btnText cbtn",fill:"solid",style:{width:"130px"}},{default:I((()=>e[2]||(e[2]=[D(" Cancel ")]))),_:1,__:[2]},8,["onClick"])])),_:1}),k(p,{size:"auto"},{default:I((()=>[k(u,{onClick:t.voidVaccine1,class:"btnText",fill:"solid",style:{width:"130px"}},{default:I((()=>e[3]||(e[3]=[D(" Void ")]))),_:1,__:[3]},8,["onClick"])])),_:1})])),_:1})])],64)}],["__scopeId","data-v-ea212a62"]]),de=i({name:"Home",components:{IonContent:p,IonHeader:u,IonMenuButton:Q,IonPage:K,IonTitle:l,IonToolbar:s,IonButton:N,IonCard:J,IonCardContent:Y,IonCardHeader:G,IonCardSubtitle:q,IonCardTitle:$,IonAccordion:U,IonAccordionGroup:L,IonItem:c,IonLabel:S,IonModal:E,IonCol:F,IonRow:R,alert:Gt},data:()=>({iconsContent:at,fowardData:{}}),computed:{},created(){},mounted(){},props:{vaccines:{type:{},default:{}},milestone_status:{type:String,default:0}},watch:{},setup(){let t=!1;return{isModalOpening:t,cleanupModal:()=>{t=!1;const e=document.querySelector(".pr_o");e&&e.remove()}}},methods:{covertToDate:t=>dt.toStandardHisDisplayFormat(t),getColorForVaccine(t){return"administered"==t.status?"success":"administered"!=t.status?"upcoming"==this.milestone_status?"medium":"current"==this.milestone_status?"success":"danger":void 0},getInjectSignForVaccine(t){return"administered"==t.status?this.iconsContent.greenInjection:"administered"!=t.status?"upcoming"==this.milestone_status?"":this.iconsContent.fadedGreenIjection:void 0},getCheckBoxForVaccine(t){return"administered"==t.status?this.iconsContent.improvedGreenTick:"administered"!=t.status?"upcoming"==this.milestone_status?"":this.iconsContent.whiteCheckbox:void 0},async openAdministerVaccineModal(t){const e=document.querySelector(".pr_o");if(this.isModalOpening||e)console.log("Modal already open or opening, current state:",{isModalOpening:this.isModalOpening,modalExists:!!e});else try{this.isModalOpening=!0;const e=ct();e.setCurrentSelectedDrug(t),new St;const a=await gt("stock",{selector:{drug_id:t.drug_id}});e.setLotNumberData(a),this.checkIfAdminstredAndAskToVoid()||(0===a.length?It(t)?mt(ne,{class:"otherVitalsModal pr_o"}):mt(Gt,{class:"otherVitalsModal pr_o"}):mt(ne,{class:"otherVitalsModal pr_o"}))}catch(a){throw console.error("Error opening modal:",a),a}finally{this.isModalOpening=!1,console.log("Modal open process completed")}},disableVaccine:t=>(null==t.status||"administered"!=t.status)&&(null!=t.can_administer&&0==t.can_administer||(null==t.can_administer||1!=t.can_administer)&&void 0),checkVaccineName:t=>t.replace(/Pentavalent/g,"Penta"),checkIfAdminstredAndAskToVoid(){const t=ct(),e=t.getCurrentSelectedDrug();return"administered"==e.drug.status&&(t.setVaccineToBeVoided(e),mt(le,{class:"otherVitalsModal"},!1),!0)}}}),re={class:"vaccinesList"},ce={class:"button-content"},ue={style:{"margin-top":"20px"}},pe=t("c",rt(de,[["render",function(t,e,a,i,n,o){const s=f("ion-icon"),l=f("ion-button"),d=f("ion-col"),r=f("ion-row");return y(),b("div",re,[k(r,null,{default:I((()=>[k(d,null,{default:I((()=>[(y(!0),b(P,null,j(t.vaccines,(e=>(y(),_(l,{disabled:t.disableVaccine(e),class:"administerVac",key:e,onClick:a=>t.openAdministerVaccineModal(e),fill:"solid",color:t.getColorForVaccine(e),style:{background:"#ddeedd","border-radius":"8px",color:"#636363"}},{default:I((()=>[k(s,{slot:"start",icon:t.getInjectSignForVaccine(e)},null,8,["icon"]),w("div",ce,[w("div",ue,C(t.checkVaccineName(e.drug_name)),1),w("div",null,C(t.covertToDate(e.date_administered)),1)]),k(s,{slot:"end",icon:t.getCheckBoxForVaccine(e)},null,8,["icon"])])),_:2},1032,["disabled","onClick","color"])))),128))])),_:1})])),_:1})])}],["__scopeId","data-v-245b1fb0"]])),he=(t("_",i({name:"Home",components:{IonIcon:Z,IonButton:N,customVaccine:pe,IonHeader:u,IonTitle:l,IonFooter:X,IonCol:F,IonRow:R,IonContent:p},data:()=>({iconsContent:at,vaccineHistory:[]}),setup:()=>({closeCircleOutline:et,checkmarkOutline:tt}),computed:{...n(ct,["vaccineReload","vaccineSchedule"])},methods:{vaccinesGivenCount(t){const e=[];return t.antigens.forEach((t=>{"administered"==t.status&&e.push(t)})),e.length},dismiss(){h.dismiss()}}})),i({name:"Home",components:{IonContent:p,IonHeader:u,IonPage:K,IonTitle:l,IonToolbar:s,BasicForm:_t,customDatePicker:Dt},data:()=>({popoverOpen:!1,iconContent:at,event:null,BMI:"",showPD:!1,vitals_date:dt.toStandardHisFormat(dt.sessionDate()),formOpen:!0,checkUnderSixWeeks:!1,showDateBtns:!0}),computed:{...n(lt,["patient"]),...n(yt,["vitalsWeightHeight"])},watch:{patient:{async handler(){this.checkAge()}}},mounted(){this.checkAge()},setup(){},methods:{checkAge(){var t,e;wt.isEmpty(null===(t=this.patient)||void 0===t||null===(t=t.personInformation)||void 0===t?void 0:t.birthdate)||(this.checkUnderSixWeeks=dt.dateDiffInDays(dt.sessionDate(),null===(e=this.patient)||void 0===e||null===(e=e.personInformation)||void 0===e?void 0:e.birthdate)<42,this.controlHeight())},nav(t){this.$router.push(t)},formatBirthdate(){var t;return dt.getBirthdateAge(null===(t=this.patient)||void 0===t||null===(t=t.personInformation)||void 0===t?void 0:t.birthdate)},controlHeight(){this.checkUnderSixWeeks?(bt(this.vitalsWeightHeight,"Height (cm)","inputHeader","Height"),bt(this.vitalsWeightHeight,"Height (cm)","inputDisplayNone",!0)):bt(this.vitalsWeightHeight,"Height (cm)","inputDisplayNone",!1)},async validaterowData(t){const e=ht.getUserID(),a=new xt(this.patient.patientID,e),i=st(this.vitalsWeightHeight,"weight","value"),n=st(this.vitalsWeightHeight,"Height (cm)","value"),o=a.validator({inputHeader:"Height*",value:n}),s=a.validator({inputHeader:"Weight*",value:i});bt(this.vitalsWeightHeight,"Height (cm)","alertsErrorMassage",o&&n?o.flat(1/0)[0]:""),bt(this.vitalsWeightHeight,"weight","alertsErrorMassage",s&&i?s.flat(1/0)[0]:""),this.setBMI(i,n)},async saveVitals(){const t=ht.getUserID(),e=new xt(this.patient.patientID,t),a=st(this.vitalsWeightHeight,"weight","value"),i=st(this.vitalsWeightHeight,"Height (cm)","value");let n=null;this.checkUnderSixWeeks||(n=e.validator({inputHeader:"Height*",value:i}));const o=e.validator({inputHeader:"Weight*",value:a}),s=await kt(this.vitalsWeightHeight);if(s.length>0&&null==o&&null==n){const t=JSON.parse(JSON.stringify(this.patient));let e=null==t?void 0:t.vitals;e.unsaved=[...e.unsaved,...s],await ot(t),vt("Vitals saved successful"),this.cleanInputFields()}else ut("Please complete the form")},cleanInputFields(){bt(this.vitalsWeightHeight,"weight","value",""),bt(this.vitalsWeightHeight,"Height (cm)","value",""),this.dismiss()},dismiss(){h.dismiss()},async setBMI(t,e){var a,i,n,o;null!==(a=this.patient)&&void 0!==a&&null!==(a=a.personInformation)&&void 0!==a&&a.gender&&null!==(i=this.patient)&&void 0!==i&&null!==(i=i.personInformation)&&void 0!==i&&i.birthdate&&(this.BMI=await ft.getBMI(parseInt(t),parseInt(e),null===(n=this.patient)||void 0===n||null===(n=n.personInformation)||void 0===n?void 0:n.gender,dt.calculateAge(null===(o=this.patient)||void 0===o||null===(o=o.personInformation)||void 0===o?void 0:o.birthdate,dt.sessionDate()))),this.updateBMI()},async updateBMI(){var t,e,a,i,n,o;const s=null!==(t=null===(e=this.BMI)||void 0===e?void 0:e.color)&&void 0!==t?t:[],l=this.vitalsWeightHeight[0].alerts[0];l.icon=ft.iconBMI(s),l.backgroundColor=s[0],l.textColor=s[1],l.index="BMI "+(null!==(a=null===(i=this.BMI)||void 0===i?void 0:i.index)&&void 0!==a?a:""),l.value=null!==(n=null===(o=this.BMI)||void 0===o?void 0:o.result)&&void 0!==n?n:""},showCPD(){this.showPD=!0,this.showDateBtns=!1},updateDate(t){this.vitals_date=dt.toStandardHisFormat(t)}}})),me={key:0,class:"pim-cls-1 modal_wrapper"},ve={class:"center text_12"},ge={class:"btnContent"},fe={key:0,class:"saveBtn"},be={key:1,class:"saveBtn"};t("w",rt(he,[["render",function(t,e,a,i,n,o){const s=f("BasicForm"),l=f("ion-row"),d=f("customDatePicker"),r=f("ion-icon"),c=f("ion-button"),u=f("ion-col");return t.formOpen?(y(),b("div",me,[e[7]||(e[7]=w("div",{class:"OtherVitalsHeading"},[w("div",{class:"OtherVitalsTitle"},"Add Weight/Height")],-1)),w("div",null,[w("div",ve,[k(l,null,{default:I((()=>[k(s,{contentData:t.vitalsWeightHeight,"onUpdate:inputValue":e[0]||(e[0]=e=>t.validaterowData(e))},null,8,["contentData"])])),_:1})])]),t.showPD?(y(),_(d,{key:0,onDateChange:t.updateDate},null,8,["onDateChange"])):x("",!0),w("div",ge,[t.showDateBtns?(y(),b("div",fe,[w("div",null,[k(c,{class:"btnText",fill:"solid",onClick:e[1]||(e[1]=e=>t.saveVitals())},{default:I((()=>[e[3]||(e[3]=D(" Done today ")),k(r,{slot:"end",size:"small",icon:t.iconContent.calenderwithPlus},null,8,["icon"])])),_:1,__:[3]})]),w("div",null,[k(c,{class:"btnText",fill:"solid",onClick:t.showCPD},{default:I((()=>[e[4]||(e[4]=D(" Done earlier ")),k(r,{slot:"end",size:"small",icon:t.iconContent.calenderWithPenEdit},null,8,["icon"])])),_:1,__:[4]},8,["onClick"])])])):x("",!0),t.showDateBtns?x("",!0):(y(),b("div",be,[k(l,null,{default:I((()=>[k(u,null,{default:I((()=>[k(c,{onClick:t.dismiss,id:"cbtn",class:"btnText cbtn",fill:"solid",style:{width:"130px"}},{default:I((()=>e[5]||(e[5]=[D(" Cancel ")]))),_:1,__:[5]},8,["onClick"])])),_:1}),k(u,null,{default:I((()=>[k(c,{onClick:e[2]||(e[2]=e=>t.saveVitals()),class:"btnText",fill:"solid",style:{width:"130px"}},{default:I((()=>e[6]||(e[6]=[D(" save ")]))),_:1,__:[6]})])),_:1})])),_:1})]))])])):x("",!0)}],["__scopeId","data-v-7b242731"]]))}}}));
