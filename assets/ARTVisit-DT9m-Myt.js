const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./EmergencyRefill-DcwQrc2W.js","./vendor-8nEYVyB7.js","./lodash-Dt8AsbQm.js","./vendor-b1OZIu0u.css","./DatePicker.vue_vue_type_script_setup_true_lang-JV1QTjNS.js","./index-7qwbP5UI.js","./index-BlwtrDet.css","./app_encounter_service-DR5HCXoD.js","./adherence_service-BhLxqSYZ.js","./LocationFieldOptions-BcusVCbH.js","./EmergencyRefill-v5tyLdov.css","./ARTPatientType-DyRIEWIV.js","./ARTPatientType.vue_vue_type_script_setup_true_lang-Cq02bVGH.js","./patient_type_service-C4tT8azK.js","./FilingNumberManagement-B1u7hl9s.js","./FilingNumberManagement-UU0AGTHA.css","./ArtClinicRegistration-D5FqYNIc.js","./vitals_service-DlbLtzzc.js","./vitals_service-DSRLpBbj.css","./Staging-DC-MWYAE.js","./Staging-CSZ92-p3.css","./patient_registration_service-DqW5iI0B.js","./ArtClinicRegistration-CEJmmsCu.css","./Reception-24NIPT7S.js","./relations_service-CLEMAHmR.js","./identifier_service-D8Uch9dX.js","./Reception-BcLv0bOt.css","./Vitals-D1MSry-R.js","./previousVitals-BuJOkgeo.js","./apexcharts-BZW0LBrS.js","./SvgDynamicColor-BtXmdsK-.js","./SvgDynamicColor-B6V07T2v.css","./previousVitals-BGyZoFyl.css","./encounter_type-lroHHjb_.js","./group_validation-DJ5Q4Z77.js","./VitalsStore-B2mcqbfC.js","./formatServerData-DY5RXAMO.js","./Vitals-y0V02drw.css","./Consultation-C5JHDXq9.js","./lab_order-BHL-aLET.js","./chartjs-DNC2RoMH.js","./consultation_service-BAp-3uJm.js","./Consultation-BXgq3kNd.css","./ARTAdherence-HBlTT0BL.js","./ARTAdherence-B8uvff9k.css","./Prescription-tF6GBWcy.js","./Arrays-CfBll-2n.js","./Prescription-Dw5DWvIp.css","./ArtDispensation-l-0CuuPZ.js","./ArtDispensation--hbKxJXu.css","./ARTAppointment-36XkdV11.js","./appointment_service-BsxWXTYR.js","./clinicalDaysStore-Bupvnt8F.js","./ARTAppointment-BIwX_dyU.css"])))=>i.map(i=>d[i]);
import{d as $,ae as U,r as p,a as Y,y as d,f as i,z as r,l as a,u as n,ez as j,k as v,ab as q,ad as G,e as y,ac as J,F as K,L as Q,G as X,I as _,eA as Z,eB as ee,ev as ne,B as R,cj as oe,V as S,U as F,W as E,A as P,dS as te,co as ae,aQ as le,aN as re,ed as ie,cq as se,dr as ue,eC as ce,m as pe,eD as de,b8 as me,bR as u,a6 as c}from"./vendor-8nEYVyB7.js";import{P as L,T as _e,S as ve,m as ge,X as fe,_ as be}from"./index-7qwbP5UI.js";import{W as ye}from"./workflow_service-Dn4JB8gn.js";import"./lodash-Dt8AsbQm.js";const Ie={key:1,style:{"margin-top":"10%"},class:"ion-padding ion-text-center"},De={class:"ion-page",id:"main"},Te={key:0,class:"placeholder-content"},ke={style:{margin:"0px auto"},class:"ion-text-center"},Ee={key:1},Pe={key:2,class:"ion-padding ion-text-center",style:{"margin-top":"15%"}},we=$({__name:"ARTVisit",setup(xe){const w=[{label:"Emergency Refill",enableForDebugging:!1,component:u(()=>c(()=>import("./EmergencyRefill-DcwQrc2W.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10]),import.meta.url))},{encounterTypeID:5,userProp:"patient type",label:"Patient Type",enableForDebugging:!1,component:u(()=>c(()=>import("./ARTPatientType-DyRIEWIV.js"),__vite__mapDeps([11,12,1,2,3,5,6,13,7]),import.meta.url))},{label:"Filing Number Management",enableForDebugging:!1,component:u(()=>c(()=>import("./FilingNumberManagement-B1u7hl9s.js"),__vite__mapDeps([14,1,2,3,5,6,15]),import.meta.url))},{encounterTypeID:9,userProp:"HIV first visits",enableForDebugging:!1,label:"HIV Clinic Registration",component:u(()=>c(()=>import("./ArtClinicRegistration-D5FqYNIc.js"),__vite__mapDeps([16,7,5,1,2,3,6,9,4,17,18,19,20,21,22]),import.meta.url))},{encounterTypeID:51,userProp:"HIV reception visits",label:"Reception",enableForDebugging:!1,component:u(()=>c(()=>import("./Reception-24NIPT7S.js"),__vite__mapDeps([23,1,2,3,5,6,7,24,21,25,26]),import.meta.url))},{encounterTypeID:6,otherWorkflowNames:["htn_vitals"],userProp:"vitals",label:"Vitals",enableForDebugging:!1,component:u(()=>c(()=>import("./Vitals-D1MSry-R.js"),__vite__mapDeps([27,1,2,3,5,6,28,29,30,31,32,33,7,34,35,36,37]),import.meta.url))},{encounterTypeID:52,userProp:"HIV staging visits",label:"Staging",enableForDebugging:!1,component:u(()=>c(()=>import("./Staging-DC-MWYAE.js"),__vite__mapDeps([19,1,2,3,7,5,6,4,9,20]),import.meta.url))},{encounterTypeID:53,userProp:"HIV clinic consultations",label:"Consultation",enableForDebugging:!1,component:u(()=>c(()=>import("./Consultation-C5JHDXq9.js"),__vite__mapDeps([38,1,2,3,5,6,39,7,40,41,4,42]),import.meta.url))},{encounterTypeID:68,userProp:"ART adherence",label:"ART Adherence",enableForDebugging:!1,component:u(()=>c(()=>import("./ARTAdherence-HBlTT0BL.js"),__vite__mapDeps([43,1,2,3,5,6,8,7,44]),import.meta.url))},{encounterTypeID:25,userProp:"Prescriptions",label:"Prescription",enableForDebugging:!1,component:u(()=>c(()=>import("./Prescription-tF6GBWcy.js"),__vite__mapDeps([45,1,2,3,5,6,41,7,46,13,47]),import.meta.url))},{encounterTypeID:54,userProp:"Drug Dispensations",label:"Dispense drugs",enableForDebugging:!1,component:u(()=>c(()=>import("./ArtDispensation-l-0CuuPZ.js"),__vite__mapDeps([48,1,2,3,7,5,6,49]),import.meta.url))},{encounterTypeID:7,userProp:"Manage Appointments",label:"Appointment",enableForDebugging:!1,component:u(()=>c(()=>import("./ARTAppointment-36XkdV11.js"),__vite__mapDeps([50,5,1,2,3,6,51,7,52,53]),import.meta.url))}],x=new L,A=U(),m=p(-1),I=p(null),l=p([]),V=p([]),g=p(!1),k=p(-1),D=p(""),f=p(""),h=p("");function O(o){var e;return V.value.includes((e=o==null?void 0:o.encounterTypeID)!=null?e:0)}function T(o){var e;return o.enableForDebugging?!0:o?!g.value&&k.value===(o==null?void 0:o.encounterTypeID)||((e=o==null?void 0:o.otherWorkflowNames)!=null?e:[]).includes(D.value):!1}function N(){if(l.value.length===0||m.value===l.value.length-1)return!1;const o=l.value[m.value];return o&&T(o)}async function W(){const o=await fe.getEncounters(x.getID(),{date:L.getSessionDate()});V.value=o.map(e=>e.encounter_type)}async function C(){var o;h.value="",g.value=!0,f.value="",D.value="";try{const e=await ye.nextTask(x.getID());if(!e){f.value="No workflows found. You may exit this page or refresh",g.value=!1,m.value=-1;return}D.value=e.name,k.value=(o=e==null?void 0:e.encounter_type_id)!=null?o:-1;const s=l.value.findIndex(t=>{var b;return(t==null?void 0:t.encounterTypeID)===k.value||((b=t.otherWorkflowNames)!=null?b:[]).includes(D.value)});if(s!==-1){h.value=e.description;const t=[...l.value.slice(s),...l.value.slice(0,s)];l.value=t,m.value=0}else f.value="Error loading workflow task",m.value=s}catch(e){f.value="An error has occured while loading next task: "+e,console.error(e)}finally{await W(),g.value=!1}}async function B(){const o=await ve.getJson("user_properties",{property:"activities"});try{if(!o.property_value){l.value=w;return}const e=o.property_value.split(",").map(s=>s.toLowerCase());l.value=w.filter(s=>{var t;return s.enableForDebugging||e.includes((t=s.userProp)==null?void 0:t.toLowerCase())})}catch(e){ge("Unable to load activities"),console.error(e)}}function z(){return I.value&&typeof I.value.onSubmit=="function"?I.value.onSubmit():Promise.resolve(!0)}function H(){z().then(o=>o&&C())}function M(o){if(o<0||o>=l.value.length)return;const e=l.value[o];e&&T(e)&&(m.value=o)}return Y(()=>B().then(C)),(o,e)=>(i(),d(n(me),null,{default:r(()=>[a(_e),a(n(j),{style:{"margin-top":"70px"},when:"xs",contentId:"main"},{default:r(()=>{var s;return[a(n(q),{contentId:"main"},{default:r(()=>[a(n(G),null,{default:r(()=>[l.value.length>0?(i(),d(n(J),{key:0},{default:r(()=>[(i(!0),y(K,null,Q(l.value,(t,b)=>(i(),d(n(X),{onClick:Ae=>M(b),lines:"none",key:b,disabled:!T(t),button:""},{default:r(()=>[O(t)?(i(),d(n(_),{key:0,icon:n(Z),style:{padding:"10px",color:"green"},slot:"start"},null,8,["icon"])):T(t)?(i(),d(n(_),{key:2,icon:n(ne),style:{padding:"10px",color:"green"},slot:"start"},null,8,["icon"])):(i(),d(n(_),{key:1,icon:n(ee),style:{padding:"10px"},slot:"start"},null,8,["icon"])),v("b",null,R(t.label),1)]),_:2},1032,["onClick","disabled"]))),128))]),_:1})):(i(),y("div",Ie,[a(n(_),{style:{"font-size":"2rem"},icon:n(oe)},null,8,["icon"]),e[2]||(e[2]=v("h4",null,"You are not assigned to any activities",-1))]))]),_:1}),a(n(S),null,{default:r(()=>[a(n(F),{color:"light"},{default:r(()=>[a(n(E),{onClick:e[0]||(e[0]=t=>n(A).back())},{default:r(()=>[a(n(_),{icon:n(te),slot:"start"},null,8,["icon"]),e[3]||(e[3]=P(" Back to dashboard "))]),_:1,__:[3]})]),_:1})]),_:1})]),_:1}),v("div",De,[g.value?(i(),y("div",Te,[v("div",ke,[a(n(ae),{name:"bubbles"}),e[4]||(e[4]=v("p",null,[v("h1",null,"Please wait...")],-1))])])):(s=l.value[m.value])!=null&&s.component?(i(),y("div",Ee,[a(n(le),null,{default:r(()=>[a(n(re),null,{default:r(()=>{var t;return[(i(),d(ie,null,[(i(),d(se((t=l.value[m.value])==null?void 0:t.component),{ref_key:"formRef",ref:I},null,512))],1024))]}),_:1})]),_:1})])):(i(),y("div",Pe,[a(n(_),{style:{color:"green","font-size":"80px"},icon:n(ue)},null,8,["icon"]),v("h2",null,R(f.value),1),a(n(E),{size:"large",fill:"clear",onClick:e[1]||(e[1]=t=>n(A).back())},{default:r(()=>[a(n(_),{slot:"start",icon:n(ce)},null,8,["icon"]),e[5]||(e[5]=P(" Exit page "))]),_:1,__:[5]})])),a(n(S),null,{default:r(()=>[a(n(F),{color:"light"},{default:r(()=>[N()?(i(),d(n(E),{key:0,onClick:H,color:"primary",style:{padding:"4px"},slot:"end"},{default:r(()=>[e[6]||(e[6]=P(" Save and continue ")),a(n(_),{style:{padding:"4px"},icon:n(de),slot:"end"},null,8,["icon"])]),_:1,__:[6]})):pe("",!0)]),_:1})]),_:1})])]}),_:1})]),_:1}))}}),Se=be(we,[["__scopeId","data-v-cc7124d0"]]);export{Se as default};
