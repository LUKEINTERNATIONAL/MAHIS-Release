System.register(["./vendor-legacy-PwJwfeg2.js","./index-legacy-CAqY44sk.js","./patient_type_service-legacy-Blmk_EwO.js"],(function(e,t){"use strict";var a,l,n,i,p,r,s,y,o,c,u,d,v,T,g,f,m,h,F,b,_,P,w,x,V,k,L,j;return{setters:[e=>{a=e.d,l=e.r,n=e.cY,i=e.a,p=e.y,r=e.f,s=e.z,y=e.l,o=e.u,c=e.aN,u=e.k,d=e.e,v=e.m,T=e.A,g=e.aE,f=e.F,m=e.L,h=e.G,F=e.aF,b=e.D,_=e.B,P=e.bm,w=e.aQ},e=>{x=e.P,V=e.L,k=e.t,L=e.k},e=>{j=e.P}],execute:function(){const t={key:0,class:"ion-padding"};e("_",a({__name:"ARTPatientType",setup(e,{expose:a}){const D=l(!1),S=l([]),q=l([]),A=new x,E=new j(A.getID(),-1),N=n({patientType:null,prevType:null,transerFacility:null});async function U(e=""){try{const t=await V.getFacilities({name:e});q.value=t}catch(t){console.error("Error fetching facilities:",t)}}return i((()=>{D.value=!0,S.value=j.getPatientTypes(),E.loadPatientType().then((()=>{const e=E.getType();e&&!/n\/a/i.test(e)&&(N.prevType=E.getType(),N.patientType=E.getType())})).finally((()=>{D.value=!1}))})),a({onSubmit:async function(){var e;if(N.patientType===N.prevType)return!0;if(!N.patientType)return k("Patient type is required"),!1;if(!/new patient/i.test(N.patientType)&&N.patientType!==N.prevType&&!N.transerFacility)return k("Facility is required"),!1;E.setPatientType(N.patientType),E.setLocationName((null===(e=N.transerFacility)||void 0===e?void 0:e.name)||"");try{return await E.save()?(L("Patient type saved successfully"),!0):(k("Failed to save patient type"),!1)}catch(t){return k(`Failed to save patient type: ${t}`),!1}}}),(e,a)=>(r(),p(o(w),{style:{height:"65vh"}},{default:s((()=>[y(o(c),null,{default:s((()=>[u("div",null,[a[2]||(a[2]=u("h2",{style:{"font-weight":"bold",margin:"12px"}},[T("Patient Type "),u("span",{style:{color:"red"}},"*")],-1)),y(o(g),{modelValue:N.patientType,"onUpdate:modelValue":a[0]||(a[0]=e=>N.patientType=e)},{default:s((()=>[(r(!0),d(f,null,m(S.value,((e,t)=>(r(),p(o(h),{key:t},{default:s((()=>[y(o(F),{slot:"start",value:e.value},null,8,["value"]),y(o(b),{style:{margin:"10px"}},{default:s((()=>[T(_(e.label),1)])),_:2},1024)])),_:2},1024)))),128))])),_:1},8,["modelValue"])]),N.prevType===N.patientType||/new patient/i.test(N.patientType)?v("",!0):(r(),d("div",t,[a[3]||(a[3]=u("h2",{style:{"font-weight":"bold",margin:"12px"}},[T("Facility "),u("span",{style:{color:"red"}},"*")],-1)),y(o(P),{modelValue:N.transerFacility,"onUpdate:modelValue":a[1]||(a[1]=e=>N.transerFacility=e),multiple:!1,taggable:!1,"hide-selected":!0,"close-on-select":!0,openDirection:"bottom",onSearchChange:U,"tag-placeholder":"Find and select facility",placeholder:"Find and select facility",selectLabel:"",label:"name",searchable:!0,"track-by":"code",options:q.value},null,8,["modelValue","options"])]))])),_:1})])),_:1}))}}))}}}));
