System.register(["./vendor-legacy-Wi_IxLMJ.js","./index-legacy-CS5uupAJ.js","./bottomNavBar-legacy-BBo2ODwD.js","./lodash-legacy-pOOc9Efu.js","./NavigationMenu-legacy-BxRDPfBt.js","./EIRreportsStore-legacy-CqynBiEB.js","./apexcharts-legacy-DO-k4d5O.js"],function(e,a){"use strict";var l,t,n,r,o,s,i,d,u,c,p,f,m,v,_,g,h,b,y,x,w,k,V,I,C,U,P,S,L,F,H,E,z,N,A,T,q,D,M,O,j,R,$,B,G,K,Q,J,Z,W,X,Y,ee,ae,le,te,ne,re,oe,se,ie,de,ue,ce,pe,fe,me,ve,_e,ge,he,be,ye,xe,we,ke,Ve,Ie,Ce;return{setters:[e=>{l=e.d,t=e.L,n=e.aN,r=e.bK,o=e.M,s=e.aZ,i=e.a1,d=e.ab,u=e.aO,c=e.aP,p=e.cb,f=e.aQ,m=e.aR,v=e.aa,_=e.a9,g=e.bh,h=e.ae,b=e.a8,y=e.r,x=e.bq,w=e.a,k=e.w,V=e.c,I=e.bV,C=e.dD,U=e.b_,P=e.H,S=e.e,L=e.f,F=e.l,H=e.J,E=e.O,z=e.k,N=e.K,A=e.F,T=e.P,q=e.Q,D=e.u,M=e.az,O=e.m,j=e.aE,R=e.bg,$=e.dF,B=e.be,G=e.I,K=e.G,Q=e.E,J=e.c0,Z=e.a_,W=e.N,X=e.a7,Y=e.bi,ee=e.R,ae=e.bf,le=e.b8,te=e.bC},e=>{ne=e.am,re=e.U,oe=e._,se=e.a0,ie=e.ae,de=e.an,ue=e.L,ce=e.B,pe=e.ao,fe=e.ap,me=e.aq,ve=e.a1,_e=e.ar,ge=e.as,he=e.s,be=e.at,ye=e.K,xe=e.T,we=e.r},e=>{ke=e.b},e=>{Ve=e.l},e=>{Ie=e.N},e=>{Ce=e.E},null],execute:function(){var a=document.createElement("style");a.textContent=".container[data-v-cf97a1fe]{display:flex;flex-direction:column;height:86vh}.dynamic-grid[data-v-cf97a1fe]{flex:1;overflow-y:auto;padding:8px}@media (max-width: 576px){.dynamic-grid[data-v-cf97a1fe]{padding:12px}}.user-cards-row[data-v-cf97a1fe]{display:flex;flex-wrap:wrap;gap:16px;justify-content:center;align-items:flex-start;max-width:100%;margin:0 auto}.user-cards-row ion-col[data-v-cf97a1fe]{display:flex;justify-content:center}.user-card[data-v-cf97a1fe]{width:100%;height:100%;margin:0;max-width:350px}.user-lbl[data-v-cf97a1fe]{font-size:16px;font-weight:500}ion-card-content[data-v-cf97a1fe]{padding:0 10px 10px}ion-card-title[data-v-cf97a1fe],ion-card-subtitle[data-v-cf97a1fe],ion-label h3[data-v-cf97a1fe],ion-label p[data-v-cf97a1fe]{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.edit-icon[data-v-cf97a1fe]{float:right;color:#057f32;font-size:32px;cursor:pointer;transition:color .2s ease}.edit-icon[data-v-cf97a1fe]:hover{color:#02c148;font-size:35px}.sticky-footer[data-v-cf97a1fe]{position:sticky;bottom:0;background:transparent;box-shadow:0 -2px 5px rgba(0,0,0,0);z-index:10}.ion-text-center[data-v-cf97a1fe]{margin:20px 0}.ion-text-center ion-spinner[data-v-cf97a1fe]{margin-bottom:10px}.user-cards-row[data-v-cf97a1fe]{transition:opacity .2s ease}.user-cards-row.loading[data-v-cf97a1fe]{opacity:.7}.error-label[data-v-731a8d5a]{background:#fecdca;color:#b42318;text-transform:none;padding:3%;border-radius:10px;margin-top:7px;display:flex;text-align:center}ion-footer[data-v-79045015]{--ion-toolbar-background: #f4f4f4f4}ion-modal[data-v-79045015]{--width: 90%;--height: 94%;--border-radius: 12px;--box-shadow: 0 28px 48px rgba(0, 0, 0, .4);--backdrop-opacity: var(--ion-backdrop-opacity, .32);--box-shadow: 0 10px 15px -3px rgb(0 0 0 / .1), 0 4px 6px -4px rgb(0 0 0 / .1)}.search-container[data-v-06560bf6]{display:flex;justify-content:center;align-items:center;width:100%;padding:16px}.search-row[data-v-06560bf6]{display:flex;justify-content:space-between;align-items:center;width:100%;max-width:800px}.input-col[data-v-06560bf6]{flex:1}.button-col[data-v-06560bf6]{flex:0 0 auto}.btn-cls-2[data-v-06560bf6]{font-size:14px;font-weight:500;width:fit-content}@media (max-width: 576px){.search-row[data-v-06560bf6]{flex-direction:column;gap:8px}.input-col[data-v-06560bf6],.button-col[data-v-06560bf6]{width:100%;margin-right:0}.btn-cls-2[data-v-06560bf6]{width:100%}}.skeleton-wrapper[data-v-d6f00683]{padding:1rem;width:100%}.search-bar[data-v-d6f00683]{margin-bottom:2rem;padding:.5rem}.search-container[data-v-d6f00683]{display:flex;align-items:center;gap:1rem}.search-label[data-v-d6f00683]{width:80px;height:20px}.search-chip[data-v-d6f00683]{width:120px;height:32px;background:linear-gradient(90deg,#e0e0e0 25%,#f0f0f0,#e0e0e0 75%);border-radius:16px;animation:shimmer-d6f00683 1.5s infinite}.add-button[data-v-d6f00683]{width:100px;height:36px;background:linear-gradient(90deg,#e0e0e0 25%,#f0f0f0,#e0e0e0 75%);border-radius:4px;margin-left:auto;animation:shimmer-d6f00683 1.5s infinite}.cards-grid[data-v-d6f00683]{display:grid;grid-template-columns:repeat(auto-fill,minmax(300px,1fr));gap:1rem}.skeleton-card[data-v-d6f00683]{background:#fff;border-radius:8px;padding:1rem;box-shadow:0 2px 4px rgba(0,0,0,.05);border:1px solid #eee}.card-header[data-v-d6f00683]{margin-bottom:1rem}.small-skeleton[data-v-d6f00683]{height:14px;width:140px;background:linear-gradient(90deg,#f0f0f0 25%,#e0e0e0,#f0f0f0 75%);background-size:200% 100%;animation:shimmer-d6f00683 1.5s infinite;border-radius:4px;margin-bottom:.5rem}.large-skeleton[data-v-d6f00683]{height:20px;width:180px;background:linear-gradient(90deg,#f0f0f0 25%,#e0e0e0,#f0f0f0 75%);background-size:200% 100%;animation:shimmer-d6f00683 1.5s infinite;border-radius:4px}.card-content[data-v-d6f00683]{display:flex;flex-direction:column;gap:1rem}.info-row[data-v-d6f00683]{display:flex;justify-content:space-between;align-items:center}.label-skeleton[data-v-d6f00683]{height:16px;width:80px;background:linear-gradient(90deg,#f0f0f0 25%,#e0e0e0,#f0f0f0 75%);background-size:200% 100%;animation:shimmer-d6f00683 1.5s infinite;border-radius:4px}.value-skeleton[data-v-d6f00683]{height:16px;width:120px;background:linear-gradient(90deg,#f0f0f0 25%,#e0e0e0,#f0f0f0 75%);background-size:200% 100%;animation:shimmer-d6f00683 1.5s infinite;border-radius:4px}@keyframes shimmer-d6f00683{0%{background-position:200% 0}to{background-position:-200% 0}}@media (max-width: 768px){.cards-grid[data-v-d6f00683]{grid-template-columns:1fr}}.back_profile[data-v-15fbe288]{display:flex;justify-content:space-between;width:140px;align-items:center;font-weight:400;font-size:14px;cursor:pointer;margin:1%}.text-container[data-v-15fbe288]{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.content-container[data-v-15fbe288]{overflow:auto}.hide-overflow[data-v-15fbe288]{overflow:hidden}\n/*$vite$:1*/",document.head.appendChild(a);const Ue=l({name:"UserCardList",components:{IonContent:b,IonPage:h,IonGrid:g,IonRow:_,IonCol:v,IonCard:m,IonCardHeader:f,IonCardSubtitle:p,IonCardTitle:c,IonCardContent:u,IonList:d,IonItem:i,IonLabel:s,bottomNavBar:ke,IonFooter:o,IonSpinner:r,IonText:n,IonIcon:t,editUserModal:ne},props:{users:{type:Array,required:!0},filterValue:{type:String,required:!0},search:{type:String,required:!0}},setup(e,{emit:a}){const l=y(!1),t=x({page:1,itemsPerPage:10}),n=y(!0),r=y(""),o=y(""),s=y([]),i=y(0);w(()=>{d()}),k(()=>e.search,(e,a)=>{e!==a&&(t.page=1,d())}),k(()=>e.filterValue,()=>{});const d=async()=>{try{n.value=!0,r.value="";const a=await re.getAllUsers(t.page,t.itemsPerPage,e.search);i.value=a.count||0,s.value=a.results.map(e=>({userId:e.user_id,username:e.username,roles:c(e.roles),programs:m(e.programs),gender:e.person.gender,status:e.deactivated_on,firstName:p(e.person.names),lastName:f(e.person.names)}))}catch(a){r.value="Failed to fetch users. Please try again later.",console.error("Error fetching users:",a),s.value=[],i.value=0}finally{n.value=!1}},u=V(()=>{if(!e.filterValue)return s.value;const a=e.filterValue.toLowerCase();return s.value.filter(e=>e.username.toLowerCase().includes(a)||e.firstName.toLowerCase().includes(a)||e.lastName.toLowerCase().includes(a)||e.userId.toLowerCase().includes(a)||e.roles.some(e=>e.toLowerCase().includes(a))||e.programs.some(e=>e.toLowerCase().includes(a)))}),c=e=>e&&Array.isArray(e)?e.map(e=>e.role||""):[],p=e=>e&&Array.isArray(e)&&0!==e.length&&e[e.length-1].given_name||"",f=e=>e&&Array.isArray(e)&&0!==e.length&&e[e.length-1].family_name||"",m=e=>e&&Array.isArray(e)?e.map(e=>e.name||""):[];return{filteredUsers:u,pagination:t,handlePaginationUpdate:({page:e,itemsPerPage:a})=>{t.page=e,t.itemsPerPage=a,d()},isLoading:n,error:r,personCircleOutline:U,createOutline:C,appsOutline:I,openUserProfile:e=>{l.value=!0,o.value=e},user_id:o,isPopooverOpen:l,modalClosed:()=>{l.value=!1,a("reload",l.value),d()},softModalClosed:()=>{l.value=!1},_items_:s,totalCount:i}}}),Pe={class:"container"},Se={class:"user-lbl"},Le={class:"user-lbl"},Fe={class:"user-lbl"},He={class:"user-lbl"},Ee=oe(Ue,[["render",function(e,a,l,t,n,r){const o=P("ion-text"),s=P("ion-col"),i=P("ion-row"),d=P("ion-spinner"),u=P("ion-icon"),c=P("ion-card-subtitle"),p=P("ion-card-title"),f=P("ion-card-header"),m=P("ion-label"),v=P("ion-item"),_=P("ion-list"),g=P("ion-card-content"),h=P("ion-card"),b=P("ion-grid"),y=P("editUserModal"),x=P("bottomNavBar"),w=P("ion-footer");return L(),S("div",Pe,[F(b,{class:"dynamic-grid"},{default:H(()=>[e.error?(L(),E(i,{key:0},{default:H(()=>[F(s,{size:"12",class:"ion-text-center"},{default:H(()=>[F(o,{color:"danger"},{default:H(()=>[z("p",null,N(e.error),1)]),_:1})]),_:1})]),_:1})):e.isLoading?(L(),E(i,{key:1},{default:H(()=>[F(s,{size:"12",class:"ion-text-center"},{default:H(()=>[F(d,{name:"circular"}),a[0]||(a[0]=z("p",null,"Loading users...",-1))]),_:1})]),_:1})):0===e._items_.length?(L(),E(i,{key:2},{default:H(()=>[F(s,{size:"12",class:"ion-text-center"},{default:H(()=>[...a[1]||(a[1]=[z("p",null,"No users found.",-1)])]),_:1})]),_:1})):(L(),E(i,{key:3,class:"user-cards-row"},{default:H(()=>[(L(!0),S(A,null,T(e._items_,l=>(L(),E(s,{"size-xs":"12","size-sm":"6","size-md":"4","size-lg":"3",key:l.userId},{default:H(()=>[F(h,{class:"user-card"},{default:H(()=>[F(f,null,{default:H(()=>[F(c,null,{default:H(()=>[F(u,{icon:e.personCircleOutline,size:"small",style:{"margin-bottom":"-3px"}},null,8,["icon"]),q(" "+N(l.roles.join(", ")),1)]),_:2},1024),F(p,null,{default:H(()=>[q(N(l.firstName)+" "+N(l.lastName)+" ",1),F(u,{onClick:a=>e.openUserProfile(l.userId),icon:e.createOutline,class:"edit-icon"},null,8,["onClick","icon"])]),_:2},1024)]),_:2},1024),F(g,null,{default:H(()=>[F(_,null,{default:H(()=>[F(v,null,{default:H(()=>[F(m,null,{default:H(()=>[a[2]||(a[2]=z("h3",null,"User ID",-1)),z("p",Se,N(l.userId),1)]),_:2},1024)]),_:2},1024),F(v,null,{default:H(()=>[F(m,null,{default:H(()=>[a[3]||(a[3]=z("h3",null,"Username",-1)),z("p",Le,N(l.username),1)]),_:2},1024)]),_:2},1024),F(v,null,{default:H(()=>[F(m,null,{default:H(()=>[a[4]||(a[4]=z("h3",null,"Gender",-1)),z("p",Fe,N(l.gender),1)]),_:2},1024)]),_:2},1024),F(v,null,{default:H(()=>[F(m,null,{default:H(()=>[z("h3",null,[F(u,{icon:e.appsOutline,size:"small",style:{"margin-bottom":"-3px"}},null,8,["icon"]),a[5]||(a[5]=q(" Programs ",-1))]),z("p",He,N(l.programs.join(", ")),1)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1}))]),_:1}),F(y,{is_open:e.isPopooverOpen,user_id:e.user_id,onClosePopoover:e.softModalClosed,onSave:e.modalClosed},null,8,["is_open","user_id","onClosePopoover","onSave"]),F(w,{class:"sticky-footer"},{default:H(()=>[F(i,null,{default:H(()=>[F(s,null,{default:H(()=>[F(x,{totalItems:e.totalCount,currentPage:e.pagination.page,itemsPerPage:e.pagination.itemsPerPage,"onUpdate:pagination":e.handlePaginationUpdate},null,8,["totalItems","currentPage","itemsPerPage","onUpdate:pagination"])]),_:1})]),_:1})]),_:1})])}],["__scopeId","data-v-cf97a1fe"]]),ze=l({watch:{},name:"xxxComponent"}),Ne=l({...ze,props:{action:{}},emits:["saveEvent"],setup(e,{emit:a}){const l=y(),t=y(),n=y(),r=y(),o=y([]),i=y([]),d=[],u=[],c=[],p=[],f=[],m=["Password must be at least 8 characters long and include at least one uppercase letter, one number, and one special character (@#$%^&+=*!-), without spaces","Password does not match"],g=y(),h=y([]),b=y("Select location"),x=y(!1),I=y(!1),C=y("Select village(s)"),P=y(!1),T=y("Select district(s)"),B=y(!1),G=y("Select TA(s)"),K=y([]),Q=y([]),J=y([]),Z=y([]),W=y(),X=y(),Y=y(),ee=y(!0),ae=y(!0),le=se(),te=V(()=>le.facilityLocation),ne=y(!0),oe=e;function ye(e){const a=h.value.find(a=>a.code===e.code),l=a?K.value.filter(e=>e.name===a.district):[];Y.value=l,g.value=e}function xe(e){p.length=0,e.forEach(e=>{p.push(e.traditional_authority_id)}),e.forEach(e=>{var a;a=e.district_id,ee.value=!0,W.value=[],async function(e){J.value=[];var a=await ue.getVillages(e,"");const l=a.map((e,a)=>({...e,assigned_id:a}));J.value=J.value.concat(l),J.value.length>0&&(ee.value=!1)}(a)})}function we(e){f.length=0;const a=[];Q.value.forEach(l=>{e.name.toLowerCase()===l.name.toLowerCase()&&a.push(l)}),a.forEach(e=>{f.push(e.district_id)}),a.forEach(e=>{qe(e.district_id)}),async function(e){h.value=[];try{const a=await ue.getDistrictFacilities(e.name.toLowerCase());h.value.push(...a.facilities)}catch(a){console.error(`Error fetching facilities for district ${e.name}:`,a)}g.value=null}(e)}function ke(e){return le.getUserRoles().some(a=>a.toLowerCase()===e.toLowerCase())}async function Ie(e){0==e.is_valid&&(Ee[0].show_error.value=!0,r.value=e.phone,Ee[0].dataValue.value=e.phone,Ee[0].is_phone_valid.value=!1),1==e.is_valid&&(Ee[0].show_error.value=!1,r.value=e.phone,Ee[0].dataValue.value=e.phone,Ee[0].is_phone_valid.value=!0)}w(async()=>{await async function(){o.value=await re.getAllRoles();const e=[];o.value.forEach(a=>{e.push({name:a.role,other:a})}),o.value=e,await async function(){try{const e=await re.getCurrentUser();if(e){const a=e.roles.map(e=>e.role);le.setUserRoles(a),1==ke("Superuser,Superuser,")&&(ne.value=!1),0==ke("Superuser,Superuser,")&&(o.value=function(e){const a=e.findIndex(e=>"string"==typeof e.name&&e.name.toLowerCase()==="Superuser,Superuser,".toLowerCase());return-1!==a&&e.splice(a,1),e}(o.value))}}catch(e){}}()}(),await async function(){i.value=await ie.getAllPrograms();const e=[];i.value.forEach(a=>{e.push({name:a.name,other:a,selected:!1})}),i.value=e}(),Q.value=await async function(){const e=[];for(let a of[1,2,3]){const l=await ue.getDistricts(a);e.push(...l)}return e.forEach(e=>{f.push(e.district_id)}),e.forEach(e=>{qe(e.district_id)}),e}(),K.value=await async function(){return(await ue.getFacilityDistricts()).districts}(),K.value.length>0&&await async function(){try{h.value.push(te.value),ye(te.value)}catch(e){console.error(e)}}()}),k(()=>oe.action,async e=>{await async function(){const e=Pe(),a=Se(),l=de(He),t=Le(),n=Fe(),r=1==Ve.isEmpty(g.value)?(x.value=!0,!1):0==Ve.isEmpty(g.value)?(x.value=!1,!0):void 0,s=function(){if(0==Ae(o.value))return!0;if(1==Ae(o.value)){if(0==f.length)return P.value=!0,!1;if(f.length>0)return P.value=!1,!0}}(),i=function(){if(0==Ae(o.value))return!0;if(1==Ae(o.value)){if(0==p.length)return B.value=!0,!1;if(p.length>0)return B.value=!1,!0}}(),m=function(){if(0==Ae(o.value))return!0;if(1==Ae(o.value)){if(0==c.length)return I.value=!0,!1;if(c.length>0)return I.value=!1,!0}}(),v=0==Ee[0].is_phone_valid.value?(Ee[0].show_error.value=!0,!1):1==Ee[0].is_phone_valid.value?(Ee[0].show_error.value=!1,!0):void 0;if(1==l&&1==n&&1==t&&1==e&&1==a&&1==r&&1==s&&1==i&&1==m&&1==v){const e=_e(He),a={family_name:e.last_name,given_name:e.firstname,username:e.username,must_append_roles:!1,password:ze[0].dataValue.value,programs:u,villages:c,roles:d,gender:ge(Te[0].dataValue.value),location_id:g.value.code,phone:Ee[0].dataValue.value};try{const{user:e}=await re.createUser(a);e&&(await async function(e){const a=_e(He),l={cell_phone_number:a.phone_number,gender:ge(Te[0].dataValue.value)},t=new be(l);return await t.update(e)}(e.person.person_id),Ue(e.user_id))}catch(_){Ue(""),he(_,2e3)}}}()}),k(()=>ee.value,async e=>{0==ee.value&&Ae(o.value)});const Ce=a;function Ue(e){Ce("saveEvent",e)}function Pe(){const e=[];return d.length=0,o.value.forEach(a=>{1==a.selected&&e.push(a)}),e.forEach(e=>{d.push(e.other.role)}),d.length>0?(Ne[0].show_error.value=!1,!0):0==d.length?(Ne[0].show_error.value=!0,!1):void 0}function Se(){const e=[];return u.length=0,i.value.forEach(a=>{1==a.selected&&e.push(a)}),e.forEach(e=>{u.push(e.other.program_id)}),u.length>0?(Ne[1].show_error.value=!1,!0):0==u.length?(Ne[1].show_error.value=!0,!1):void 0}function Le(){let e=!1;return null==Te[0].dataValue.value&&(Te[0].show_error.value=!0),null!=Te[0].dataValue.value&&(Te[0].show_error.value=!1,e=!0),e}function Fe(){const[e,a]=ze.map(e=>e.dataValue.value),l=m[0],t=m[1];return ze.forEach(e=>{e.error_message=l,e.show_error.value=!1}),!ze.map((e,a)=>{const l=!e.dataValue.value;return e.show_error.value=l,l}).some(e=>e)&&!(ze.map((e,a)=>{const l=ve(e.dataValue.value);return e.show_error.value=!l,l}).some(e=>!e)||e!==a&&(ze.forEach(e=>{e.error_message=t,e.show_error.value=!0}),1))}const He=[{placeHolder:"username",property_name:"username",dataHandler:async function(e){const a=e.target.value;He[0].dataValue.value=a,await async function(e){try{if(e.length>0){const a=await re.doesUsernameExist(e);1==a.exists?(He[0].show_error.value=!0,He[0].error_message="Username already exists"):0==a.exists&&(He[0].show_error.value=!1,He[0].error_message="Input required, Only letters allowed")}}catch(a){console.error(a)}}(a)},dataValue:y(),show_error:y(!1),error_message:"Input required, Only letters allowed"},{placeHolder:"firstname",property_name:"firstname",dataHandler:function(e){const a=e.target.value;He[1].dataValue.value=a,de([He[1]])},dataValue:y(),show_error:y(!1),type:"text",error_message:"Input required, Only letters allowed"},{placeHolder:"last name",property_name:"last_name",dataHandler:function(e){const a=e.target.value;He[2].dataValue.value=a,de([He[2]])},dataValue:y(),type:"text",show_error:y(!1),error_message:"Input required, Only letters allowed"}],Ee=[{placeHolder:"phone number",property_name:"phone_number",dataValue:y(),show_error:y(!1),error_message:"Input required, input is invalid",is_phone_valid:y(!1)}],ze=[{placeHolder:"new password",dataHandler:function(e){const a=e.target.value;ze[0].dataValue.value=a,Fe()},dataValue:y(),show_error:y(!1),error_message:m[0]},{placeHolder:"repeat password",dataHandler:function(e){const a=e.target.value;ze[1].dataValue.value=a,Fe()},dataValue:y(),show_error:y(!1),error_message:m[0]}],Ne=[{multi_Selection:!0,show_list_label:!0,unqueId:"qwerty_8_3698",name_of_list:"Roles",placeHolder:"Search for a field",items:[],listUpdatedFN:function(e){o.value=e,Ae(o.value),Pe()},listFilteredFN:()=>{},searchTextFN:()=>{},use_internal_filter:!0,show_error:y(!1),error_message:"please select a Role",disabled:y(!1)},{multi_Selection:!0,show_list_label:!0,unqueId:"qwerty_8_562",name_of_list:"Programs",placeHolder:"Search for programs",items:[],listUpdatedFN:function(e){i.value=e,i.value.forEach(e=>{e.selected}),Se()},listFilteredFN:()=>{},searchTextFN:()=>{},use_internal_filter:!0,show_error:y(!1),error_message:"please select a Program",disabled:y(!1)}];function Ae(e){const a=["HSA","Health Surveillance"];I.value=!1;let l=!1;return e.forEach(e=>{1==(null==e?void 0:e.selected)&&a.includes(null==e?void 0:e.name)&&(ae.value=!1,l=!0)}),0==l&&(I.value=!1,ae.value=!0),l}const Te=[{labels:["Male","Female"],selectedOption:y(null),dataHandler:function(e){try{Te[0].dataValue.value=e.label}catch(a){Te[0].dataValue.value=void 0}Le()},dataValue:y(),show_error:y(!1),error_message:"Please make a selection"}];async function qe(e,a){Z.value=[];const l=(await ue.getTraditionalAuthorities(e,"")).map((e,a)=>({...e,assigned_id:a}));Z.value=Z.value.concat(l)}return(e,a)=>(L(),S(A,null,[F(D(_),null,{default:H(()=>[F(D(v),{size:"12","size-md":"6"},{default:H(()=>[F(D(_),null,{default:H(()=>[F(D(v),null,{default:H(()=>[F(D(s),{style:{margin:"10px","margin-left":"0px","margin-top":"0px","margin-bottom":"10px",color:"grey"}},{default:H(()=>[...a[12]||(a[12]=[q("First name",-1),z("span",{style:{color:"#b42318"}},"*",-1)])]),_:1}),F(ce,{placeholder:He[1].placeHolder,icon:D(M),inputValue:t.value,"onUpdate:inputValue":He[1].dataHandler},null,8,["placeholder","icon","inputValue","onUpdate:inputValue"]),z("div",null,[He[1].show_error.value?(L(),E(D(s),{key:0,class:"error-label"},{default:H(()=>[q(N(He[1].error_message),1)]),_:1})):O("",!0)])]),_:1})]),_:1}),F(D(_),null,{default:H(()=>[F(D(v),null,{default:H(()=>[F(D(s),{style:{margin:"10px","margin-left":"0px","margin-top":"0px","margin-bottom":"10px",color:"grey"}},{default:H(()=>[...a[13]||(a[13]=[q("Last name",-1),z("span",{style:{color:"#b42318"}},"*",-1)])]),_:1}),F(ce,{placeholder:He[2].placeHolder,icon:D(j),inputValue:n.value,"onUpdate:inputValue":He[2].dataHandler},null,8,["placeholder","icon","inputValue","onUpdate:inputValue"]),z("div",null,[He[2].show_error.value?(L(),E(D(s),{key:0,class:"error-label"},{default:H(()=>[q(N(He[2].error_message),1)]),_:1})):O("",!0)])]),_:1})]),_:1}),F(D(_),null,{default:H(()=>[F(D(v),null,{default:H(()=>[F(D(s),{style:{margin:"10px","margin-left":"0px","margin-top":"0px","margin-bottom":"10px",color:"grey"}},{default:H(()=>[...a[14]||(a[14]=[q("Username",-1),z("span",{style:{color:"#b42318"}},"*",-1)])]),_:1}),F(ce,{placeholder:He[0].placeHolder,icon:D(U),inputValue:l.value,"onUpdate:inputValue":He[0].dataHandler},null,8,["placeholder","icon","inputValue","onUpdate:inputValue"]),z("div",null,[He[0].show_error.value?(L(),E(D(s),{key:0,class:"error-label"},{default:H(()=>[q(N(He[0].error_message),1)]),_:1})):O("",!0)])]),_:1})]),_:1}),F(D(_),null,{default:H(()=>[F(D(v),null,{default:H(()=>[F(D(s),{style:{margin:"10px","margin-left":"0px","margin-top":"0px","margin-bottom":"10px",color:"grey"}},{default:H(()=>[...a[15]||(a[15]=[q("Gender",-1),z("span",{style:{color:"#b42318"}},"*",-1)])]),_:1}),F(pe,{labels:Te[0].labels,"selected-opt":Te[0].selectedOption.value,onSelectionEvent:Te[0].dataHandler},null,8,["labels","selected-opt","onSelectionEvent"]),z("div",null,[Te[0].show_error.value?(L(),E(D(s),{key:0,class:"error-label"},{default:H(()=>[q(N(Te[0].error_message),1)]),_:1})):O("",!0)])]),_:1})]),_:1}),F(D(_),null,{default:H(()=>[F(D(v),null,{default:H(()=>[F(fe,{onValidateInput:Ie}),z("div",null,[Ee[0].show_error.value?(L(),E(D(s),{key:0,class:"error-label"},{default:H(()=>[q(N(Ee[0].error_message),1)]),_:1})):O("",!0)])]),_:1})]),_:1})]),_:1}),F(D(v),{size:"12","size-md":"6"},{default:H(()=>[F(D(_),null,{default:H(()=>[(L(),E(D(v),{key:0},{default:H(()=>[F(D(s),{style:{margin:"10px","margin-left":"0px","margin-top":"0px","margin-bottom":"10px",color:"grey"}},{default:H(()=>[...a[16]||(a[16]=[q("District(s)",-1),z("span",{style:{color:"#b42318"}},"*",-1)])]),_:1}),F(D(R),{modelValue:Y.value,"onUpdate:modelValue":[a[0]||(a[0]=e=>Y.value=e),a[1]||(a[1]=e=>we(e))],multiple:!1,taggable:!1,"hide-selected":!0,"close-on-select":!0,openDirection:"bottom","tag-placeholder":"Find and select District(s)",placeholder:"Find and select District(s)",selectLabel:"",label:"name",searchable:!0,onSearchChange:a[2]||(a[2]=()=>{}),"track-by":"name",options:K.value,disabled:ne.value},null,8,["modelValue","options","disabled"]),z("div",null,[P.value?(L(),E(D(s),{key:0,class:"error-label"},{default:H(()=>[q(N(T.value),1)]),_:1})):O("",!0)])]),_:1}))]),_:1}),F(D(_),null,{default:H(()=>[F(D(v),null,{default:H(()=>[F(D(s),{style:{margin:"10px","margin-left":"0px","margin-top":"0px","margin-bottom":"10px",color:"grey"}},{default:H(()=>[...a[17]||(a[17]=[q("Facility name",-1),z("span",{style:{color:"#b42318"}},"*",-1)])]),_:1}),F(D(R),{modelValue:g.value,"onUpdate:modelValue":[a[3]||(a[3]=e=>g.value=e),a[4]||(a[4]=e=>ye(e))],multiple:!1,taggable:!1,"hide-selected":!0,"close-on-select":!0,openDirection:"bottom","tag-placeholder":"Find and select facility name",placeholder:"Find and select facility name",selectLabel:"",label:"name",searchable:!0,disabled:ne.value,onSearchChange:a[5]||(a[5]=e=>async function(e){Ve.isEmpty(e),Ve.isEmpty(e)}(e)),"track-by":"code",options:h.value},null,8,["modelValue","disabled","options"]),z("div",null,[x.value?(L(),E(D(s),{key:0,class:"error-label"},{default:H(()=>[q(N(b.value),1)]),_:1})):O("",!0)])]),_:1})]),_:1}),F(D(_),null,{default:H(()=>[F(D(v),null,{default:H(()=>[F(D(s),{style:{margin:"10px","margin-left":"0px","margin-top":"0px","margin-bottom":"10px",color:"grey"}},{default:H(()=>[...a[18]||(a[18]=[q("TA(s)",-1),z("span",{style:{color:"#b42318"}},"*",-1)])]),_:1}),F(D(R),{modelValue:X.value,"onUpdate:modelValue":[a[6]||(a[6]=e=>X.value=e),a[7]||(a[7]=e=>xe(e))],multiple:!0,taggable:!1,"hide-selected":!0,"close-on-select":!0,openDirection:"bottom","tag-placeholder":"Find and select Traditional Authority (TA)",placeholder:"Find and select Traditional Authority (TA)",selectLabel:"",label:"name",searchable:!0,onSearchChange:a[8]||(a[8]=()=>{}),"track-by":"assigned_id",options:Z.value,disabled:ae.value},null,8,["modelValue","options","disabled"]),z("div",null,[B.value?(L(),E(D(s),{key:0,class:"error-label"},{default:H(()=>[q(N(G.value),1)]),_:1})):O("",!0)])]),_:1})]),_:1}),F(D(_),null,{default:H(()=>[F(D(v),null,{default:H(()=>[F(D(s),{style:{margin:"10px","margin-left":"0px","margin-top":"0px","margin-bottom":"10px",color:"grey"}},{default:H(()=>[...a[19]||(a[19]=[q("Village(s)",-1),z("span",{style:{color:"#b42318"}},"*",-1)])]),_:1}),F(D(R),{modelValue:W.value,"onUpdate:modelValue":[a[9]||(a[9]=e=>W.value=e),a[10]||(a[10]=e=>{return a=e,c.length=0,void a.forEach(e=>{c.push(e.village_id)});var a})],multiple:!0,taggable:!1,"hide-selected":!0,"close-on-select":!0,openDirection:"bottom","tag-placeholder":"Find and select village(s)",placeholder:"Find and select village(s)",selectLabel:"",label:"name",searchable:!0,onSearchChange:a[11]||(a[11]=()=>{}),"track-by":"assigned_id",options:J.value,disabled:ae.value},null,8,["modelValue","options","disabled"]),z("div",null,[I.value?(L(),E(D(s),{key:0,class:"error-label"},{default:H(()=>[q(N(C.value),1)]),_:1})):O("",!0)])]),_:1})]),_:1})]),_:1})]),_:1}),F(D(_),null,{default:H(()=>[F(D(v),{size:"12","size-md":"6"},{default:H(()=>[F(D(_),null,{default:H(()=>[F(D(v),null,{default:H(()=>[F(D(v),null,{default:H(()=>[F(D(s),{style:{margin:"10px","margin-left":"0px","margin-top":"0px",color:"grey"}},{default:H(()=>[...a[20]||(a[20]=[q("Role(s)",-1),z("span",{style:{color:"#b42318"}},"*",-1)])]),_:1}),F(me,{multiSelection:Ne[0].multi_Selection,show_label:Ne[0].show_list_label,uniqueId:Ne[0].unqueId,name_of_list:Ne[0].name_of_list,choose_place_holder:Ne[0].placeHolder,"items_-list":o.value,use_internal_filter:Ne[0].use_internal_filter,disabled:Ne[0].disabled.value,onItemListUpDated:Ne[0].listUpdatedFN,onItemListFiltered:Ne[0].listFilteredFN,onItemSearchText:Ne[0].searchTextFN},null,8,["multiSelection","show_label","uniqueId","name_of_list","choose_place_holder","items_-list","use_internal_filter","disabled","onItemListUpDated","onItemListFiltered","onItemSearchText"]),z("div",null,[Ne[0].show_error.value?(L(),E(D(s),{key:0,class:"error-label",style:{"margin-top":"-10px"}},{default:H(()=>[q(N(Ne[0].error_message),1)]),_:1})):O("",!0)])]),_:1})]),_:1})]),_:1}),F(D(_),null,{default:H(()=>[F(D(v),null,{default:H(()=>[F(D(s),{style:{margin:"10px","margin-left":"0px","margin-top":"0px",color:"grey"}},{default:H(()=>[...a[21]||(a[21]=[q("Program(s)",-1),z("span",{style:{color:"#b42318"}},"*",-1)])]),_:1}),F(me,{multiSelection:Ne[1].multi_Selection,show_label:Ne[1].show_list_label,uniqueId:Ne[1].unqueId,name_of_list:Ne[1].name_of_list,choose_place_holder:Ne[1].placeHolder,"items_-list":i.value,use_internal_filter:Ne[1].use_internal_filter,disabled:Ne[1].disabled.value,onItemListUpDated:Ne[1].listUpdatedFN,onItemListFiltered:Ne[1].listFilteredFN,onItemSearchText:Ne[1].searchTextFN},null,8,["multiSelection","show_label","uniqueId","name_of_list","choose_place_holder","items_-list","use_internal_filter","disabled","onItemListUpDated","onItemListFiltered","onItemSearchText"]),z("div",null,[Ne[1].show_error.value?(L(),E(D(s),{key:0,class:"error-label"},{default:H(()=>[q(N(Ne[1].error_message),1)]),_:1})):O("",!0)])]),_:1}),F(D(v))]),_:1}),F(D(_),null,{default:H(()=>[F(D(v),null,{default:H(()=>[F(D(s),{style:{margin:"10px","margin-left":"0px","margin-top":"0px","margin-bottom":"10px",color:"grey"}},{default:H(()=>[...a[22]||(a[22]=[q("Password",-1),z("span",{style:{color:"#b42318"}},"*",-1)])]),_:1}),F(ce,{placeholder:ze[0].placeHolder,icon:D($),inputValue:ze[0].dataValue.value,"onUpdate:inputValue":ze[0].dataHandler},null,8,["placeholder","icon","inputValue","onUpdate:inputValue"]),z("div",null,[ze[0].show_error.value?(L(),E(D(s),{key:0,class:"error-label"},{default:H(()=>[q(N(ze[0].error_message),1)]),_:1})):O("",!0)])]),_:1})]),_:1}),F(D(_),null,{default:H(()=>[F(D(v),null,{default:H(()=>[F(D(s),{style:{margin:"10px","margin-left":"0px","margin-top":"0px","margin-bottom":"10px",color:"grey"}},{default:H(()=>[...a[23]||(a[23]=[q("Repeat password",-1),z("span",{style:{color:"#b42318"}},"*",-1)])]),_:1}),F(ce,{placeholder:ze[1].placeHolder,icon:D($),inputValue:ze[1].dataValue.value,"onUpdate:inputValue":ze[1].dataHandler},null,8,["placeholder","icon","inputValue","onUpdate:inputValue"]),z("div",null,[ze[1].show_error.value?(L(),E(D(s),{key:0,class:"error-label"},{default:H(()=>[q(N(ze[1].error_message),1)]),_:1})):O("",!0)])]),_:1})]),_:1})]),_:1}),F(D(v),{size:"12","size-md":"6"})]),_:1})],64))}}),Ae=oe(Ne,[["__scopeId","data-v-731a8d5a"]]),Te={style:{display:"flex","align-items":"center"}},qe={style:{"font-weight":"400","font-size":"19px"}},De={style:{display:"flex","align-items":"center"}},Me={class:""},Oe={class:"center text_12"},je={style:{"font-weight":"400","font-size":"20px"}},Re={style:{display:"flex","align-items":"center"}},$e=l({watch:{},name:"xxxComponent"}),Be=l({...$e,props:{is_open:{},user_id:{}},emits:["closePopoover","updated","reload"],setup(e,{emit:a}){const l=y(""),t=y(!1),n=y(),r=a;function s(){l.value=function(e,a){const l=e=>{const a="number"===e?48:"uppercase"===e?65:97;return String.fromCharCode(Math.floor(Math.random()*("number"===e?10:26))+a)};return Array.from({length:e},()=>Array.from({length:a},()=>l(["number","uppercase","lowercase"][Math.floor(3*Math.random())])).join(""))}(100,3)}function i(){r("reload","")}function d(e){n.value=e,e&&ye("User created successfully with id: "+n),r("updated",e),ee.dismiss()}return(e,a)=>{const r=P("ion-icon"),u=P("ion-row");return L(),S(A,null,[F(D(B),{"is-open":e.is_open,"show-backdrop":!0,onDidDismiss:a[1]||(a[1]=a=>e.$emit("closePopoover",!1)),"keyboard-close":!1},{default:H(()=>[F(D(G),null,{default:H(()=>[F(D(K),null,{default:H(()=>[F(D(Q),null,{default:H(()=>[z("div",Te,[F(r,{icon:D(J),class:"sub-menu-icon"},null,8,["icon"]),a[3]||(a[3]=z("b",{style:{"margin-left":"6px"}},"Add User",-1))])]),_:1}),F(D(Z),{slot:"end"},{default:H(()=>[F(D(Q),null,{default:H(()=>[F(D(W),{onClick:a[0]||(a[0]=a=>e.$emit("closePopoover",!1)),fill:"solid"},{default:H(()=>[z("span",qe,[z("div",De,[F(r,{icon:D(X),slot:"start",class:"sub-menu-icon"},null,8,["icon"]),a[4]||(a[4]=z("span",{style:{"margin-left":"6px"}},"Close",-1))])])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),F(D(b),{class:"ion-padding"},{default:H(()=>[z("div",Me,[z("div",Oe,[F(u,null,{default:H(()=>[F(D(v),null,{default:H(()=>[F(Ae,{user_id:n.value,action:l.value,onSaveEvent:d},null,8,["user_id","action"])]),_:1})]),_:1})])])]),_:1}),F(D(o),{translucent:!0},{default:H(()=>[F(D(K),null,{default:H(()=>[F(D(Z),{slot:"end"},{default:H(()=>[F(D(Q),null,{default:H(()=>[F(D(W),{onClick:s,fill:"solid",color:"success"},{default:H(()=>[z("span",je,[z("div",Re,[F(r,{icon:D(Y),slot:"start",class:"sub-menu-icon"},null,8,["icon"]),a[5]||(a[5]=z("span",{style:{"margin-left":"6px"}},"Save",-1))])])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["is-open"]),F(ne,{is_open:t.value,user_id:n.value,onClosePopoover:a[2]||(a[2]=e=>t.value=!1),onUpdated:i},null,8,["is_open","user_id"])],64)}}}),Ge=oe(Be,[["__scopeId","data-v-79045015"]]),Ke=oe(l({__name:"usersTemplate",props:{items:{},search_fields:{}},emits:["reload","closeModal"],setup(e,{emit:a}){const l=y(""),t=y(!1),n=y(""),r={name:"add user",show:!0,fn:function(){t.value=!0,n.value=""},icon:J,show_icon:!0},o=[{placeHolder:"Search for username",dataHandler:function(e){l.value=e.target.value},dataValue:y(),show_error:y(!1),error_message:"Please provide a reason"}];function s(e){d("reload",e)}function i(e){d("closeModal",e)}const d=a;return(e,a)=>(L(),S(A,null,[F(D(_),{class:"search-container"},{default:H(()=>[F(D(_),{class:"search-row"},{default:H(()=>[F(D(v),{class:"input-col"},{default:H(()=>[F(ce,{placeholder:o[0].placeHolder,icon:D(ae),inputValue:o[0].dataValue.value,"onUpdate:inputValue":o[0].dataHandler,minHeight:50,"-inner-action-btn-propeties":r,"onUpdate:InnerActionBtnPropetiesAction":r.fn},null,8,["placeholder","icon","inputValue","onUpdate:inputValue","onUpdate:InnerActionBtnPropetiesAction"])]),_:1})]),_:1})]),_:1}),F(D(_),null,{default:H(()=>[F(D(v),{size:"12"},{default:H(()=>[F(Ee,{users:e.items,filterValue:l.value,onReload:i,search:l.value},null,8,["users","filterValue","search"])]),_:1})]),_:1}),F(Ge,{is_open:t.value,user_id:n.value,onClosePopoover:a[0]||(a[0]=e=>t.value=!1),onUpdated:s},null,8,["is_open","user_id"])],64))}}),[["__scopeId","data-v-06560bf6"]]),Qe=l({name:"TableSkeletonLoader"}),Je={class:"skeleton-wrapper"},Ze={class:"cards-grid"},We={class:"card-content"},Xe=l({name:"Users",components:{IonContent:b,IonPage:h,IonRow:_,IonCol:v,IonIcon:t,Toolbar:xe,usersTemplate:Ke,NavigationMenu:Ie,TableSkeletonLoader:oe(Qe,[["render",function(e,a,l,t,n,r){return L(),S("div",Je,[a[2]||(a[2]=le('<div class="search-bar" data-v-d6f00683><div class="search-container" data-v-d6f00683><div class="search-label skeleton-text" data-v-d6f00683></div><div class="search-chip" data-v-d6f00683></div><div class="add-button" data-v-d6f00683></div></div></div>',1)),z("div",Ze,[(L(),S(A,null,T(6,e=>z("div",{key:`card-${e}`,class:"skeleton-card"},[a[1]||(a[1]=z("div",{class:"card-header"},[z("div",{class:"role-text small-skeleton"}),z("div",{class:"name-text large-skeleton"})],-1)),z("div",We,[(L(),S(A,null,T(4,e=>z("div",{class:"info-row",key:`field-${e}`},[...a[0]||(a[0]=[z("div",{class:"label-skeleton"},null,-1),z("div",{class:"value-skeleton"},null,-1)])])),64))])])),64))])])}],["__scopeId","data-v-d6f00683"]])},setup(){const e=y(!1),a=y(!0),l=y([{value:"username",name:"username",selected:!0}]),t=y(""),n=y([]);async function r(){a.value=!1}function o(){Ce().setNavigationPayload("Manage Users",!0,!1,"/","home","")}return w(async()=>{o(),await r()}),{isPopooverOpen:e,user_id:t,_items_:n,search_fields_:l,nav:function(e){we.push(e)},chevronBackOutline:te,initNavData:o,getUsers:r,isLoading:a,closeModal:function(e){0==e&&setTimeout(()=>{r()},500)}}},watch:{$route:{async handler(e){"users"==e.name&&this.initNavData(),await this.getUsers()},deep:!0}}});e("default",oe(Xe,[["render",function(e,a,l,t,n,r){const o=P("NavigationMenu"),s=P("TableSkeletonLoader"),i=P("usersTemplate"),d=P("ion-content"),u=P("ion-page");return L(),E(u,null,{default:H(()=>[F(o),F(d,{fullscreen:!0},{default:H(()=>[e.isLoading?(L(),E(s,{key:0})):(L(),E(i,{key:1,items:e._items_,search_fields:e.search_fields_,onReload:e.getUsers,onCloseModal:e.closeModal},null,8,["items","search_fields","onReload","onCloseModal"]))]),_:1})]),_:1})}],["__scopeId","data-v-15fbe288"]]))}}});
