System.register(["./vendor-legacy-BLolD6eo.js","./index-legacy-DI8RVBFL.js","./DemographicBar-legacy-BRysnxiH.js","./SaveProgressModal-legacy-B4uANT-d.js","./Stepper-legacy-DxNwcbh-.js","./NextAppointment-legacy-vL5n16cX.js","./lodash-legacy-pOOc9Efu.js","./drug_prescription_service-legacy-BNg8S-7Z.js","./WeightHeightChart-legacy-h3U5kgw9.js","./weightAndHeight-legacy-CRRBzHif.js","./SetRelationship.vue_vue_type_script_lang-legacy-Cte6FXvx.js","./BasicForm-legacy-z1vE7y22.js","./customDatePicker.vue_vue_type_style_index_0_lang-legacy-CR1cpHmW.js","./group_validation-legacy-EbPWQ4_m.js","./relationship_service-legacy-C9AenbGn.js","./AdministerOtherVaccinesStore-legacy-QhR4Mel7.js","./vaccines_service-legacy-BRvAwAS0.js","./stock_service-legacy-Bt1slPmy.js","./usePatientProfile-legacy-BUytSySb.js","./Outcome-legacy-DQo-xIYH.js","./apexcharts-legacy-DEEepmtK.js","./OPDOutcome-legacy-CzpkMCF4.js","./patient_complaints_service-legacy-Dn4JiEk5.js","./DashBox-legacy-B2Lvih0j.js","./useExposeFromStandardForm-legacy-DnMRGOKY.js","./formatServerData-legacy-B5qb25I7.js","./drug_service-legacy-CfF2nnw8.js","./VitalsMixin.vue_vue_type_script_lang-legacy-DVwl044s.js","./TreatmentPlan-legacy-Ma-r1GgT.js","./previousDiagnosis-legacy-C3WRcERu.js","./FeatusModal-legacy-CAIeY_Jb.js","./BasicCard-legacy-EZfyJfdX.js","./PastObstreticHistoryStore-legacy-BkUCsdY8.js","./lab_order-legacy-DPQ8256s.js","./UpcomingFeature-legacy-DTLWYUun.js","./ncd_appointment_service-legacy-CBkHTuyr.js","./DateInputField-legacy-Cbp-p8u-.js","./chartjs-legacy--_LVnhvM.js","./barcode-qrcode-reader-legacy-CWR13unL.js","./sms_service-legacy-BlF-Xpev.js","./EIRreportsStore-legacy-xhhCoIEk.js","./Export-legacy-C0gBE-5U.js","./Registration-legacy-6Qy6Vl6o.js","./useLocation-legacy-DG2OvOCi.js"],function(e,t){"use strict";var a,n,i,o,s,l,c,r,d,u,p,h,g,m,f,v,_,b,x,y,w,D,I,S,V,C,k,A,M,B,T,j,N,P,O,F,G,z,E,L,U,R,H,W,$,q,K,Y,Q,J,Z,X,ee,te,ae,ne,ie,oe,se,le,ce,re,de,ue,pe,he,ge,me,fe,ve,_e,be,xe,ye,we,De,Ie,Se,Ve,Ce,ke,Ae,Me,Be,Te,je,Ne,Pe,Oe,Fe,Ge,ze,Ee,Le,Ue,Re,He,We,$e,qe,Ke,Ye,Qe,Je,Ze,Xe,et,tt,at,nt;return{setters:[e=>{a=e.H,n=e.e,i=e.f,o=e.l,s=e.J,l=e.P,c=e.F,r=e.O,d=e.k,u=e.K,p=e.d,h=e.af,g=e.L,m=e.a2,f=e.G,v=e.E,_=e.ag,b=e.ab,x=e.a1,y=e.I,w=e.a8,D=e.Q,I=e._,S=e.$,V=e.N,C=e.m,k=e.b1,A=e.bg,M=e.a9,B=e.aa,T=e.r,j=e.i,N=e.v,P=e.M,O=e.d1,F=e.d2,G=e.d3,z=e.d4,E=e.be,L=e.ai,U=e.ah,R=e.aP,H=e.cb,W=e.aQ,$=e.aO,q=e.aR,K=e.ae,Y=e.c1,Q=e.cL,J=e.dA,Z=e.bC,X=e.p},e=>{ee=e._,te=e.aH,ae=e.G,ne=e.i,ie=e.B,oe=e.K,se=e.H,le=e.S,ce=e.t,re=e.cb,de=e.b5,ue=e.M,pe=e.J,he=e.u,ge=e.k,me=e.s,fe=e.j,ve=e.n,_e=e.cc,be=e.P,xe=e.N,ye=e.T,we=e.bA,De=e.aQ,Ie=e.a5,Se=e.aD,Ve=e.aC,Ce=e.aM},e=>{ke=e.D},e=>{Ae=e.S},e=>{Me=e.S},e=>{Be=e.T},e=>{Te=e.l},e=>{je=e.a,Ne=e.D},e=>{Pe=e.default},e=>{Oe=e._,Fe=e.l,Ge=e.a,ze=e.b,Ee=e.c,Le=e.d,Ue=e.w,Re=e.O},e=>{He=e._,We=e.u},e=>{$e=e.B},e=>{qe=e._},e=>{Ke=e.v},e=>{Ye=e.R},e=>{Qe=e.u},e=>{Je=e.s,Ze=e.i,Xe=e.A,et=e.n},e=>{tt=e.S},e=>{at=e._},e=>{nt=e.O},null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],execute:function(){var t=document.createElement("style");t.textContent=".vitals_title[data-v-4497bb3f]{margin-bottom:50px}.input-with-icon[data-v-4497bb3f]{position:relative}.input-icon[data-v-4497bb3f]{position:absolute;left:10px;top:50%;transform:translateY(-50%);color:gray}ion-col[data-v-4497bb3f]{padding-bottom:15px}h5[data-v-4497bb3f]{margin-top:0;text-overflow:ellipsis;white-space:nowrap;overflow:hidden}.OtherVitalsTitle[data-v-4497bb3f]{font-style:normal;font-weight:600;font-size:20px;color:#00190e}.OtherVitalsHeading[data-v-4497bb3f]{display:flex;justify-content:space-between;margin:10px}.vitalsContent[data-v-4497bb3f]{height:500px}.saveBtn[data-v-4497bb3f]{display:flex;justify-content:space-between;margin:20px;width:330px;align-items:center}.btnContent[data-v-4497bb3f]{display:flex;justify-content:center;line-height:60px}.custom_card[data-v-4497bb3f]{margin-bottom:20px}.vitals_title[data-v-eb04f444]{margin-bottom:50px}.input-with-icon[data-v-eb04f444]{position:relative}.input-icon[data-v-eb04f444]{position:absolute;left:10px;top:50%;transform:translateY(-50%);color:gray}ion-col[data-v-eb04f444]{padding-bottom:15px}h5[data-v-eb04f444]{margin-top:0;text-overflow:ellipsis;white-space:nowrap;overflow:hidden}.OtherVitalsTitle[data-v-eb04f444]{font-style:normal;font-weight:600;font-size:20px;color:#00190e}.OtherVitalsHeading[data-v-eb04f444]{display:flex;justify-content:space-between;margin:20px;line-height:60px}.vitalsContent[data-v-eb04f444]{height:500px}.saveBtn[data-v-eb04f444]{display:flex;justify-content:space-between;margin:20px;align-items:center}.btnContent[data-v-eb04f444]{justify-content:center;line-height:60px}.om[data-v-eb04f444]{font-size:10;font-weight:600px}.lbl-tl[data-v-eb04f444]{min-width:20px;color:#b3b3b3!important;white-space:nowrap}.lbl-ct[data-v-eb04f444]{white-space:nowrap;color:#08475e;font-size:14px}.error-label[data-v-eb04f444]{background:#fecdca;color:#b42318;text-transform:none;padding:6%;border-radius:10px;margin-top:7px;display:flex;text-align:center}.btnText[data-v-eb04f444]{font-style:normal;font-weight:500;font-size:14px}.carousel__icon{width:var(--vc-icn-width);height:var(--vc-icn-width);fill:currentColor;background:none;color:#016302}.carousel__pagination-button--active{background-color:#016302}.carousel__pagination-button:after .carousel__pagination-button--active{background-color:#ff69b4}.otherVaccine{padding:10px;margin-bottom:10px}.centerBtns{display:flex;justify-content:center;margin-bottom:10px}.btnText{font-style:normal;font-weight:500;font-size:14px}.container{display:flex;flex-direction:column}.btnTextWeight{color:#000;--border-width: 1px;margin-right:0}ion-row{width:100%}.bottom-row{margin-top:20px;justify-content:center;align-items:center}.center-content{display:flex;justify-content:center;align-items:center;width:100%}.alert_banner{display:flex;flex-direction:row;justify-content:center;align-items:center;padding:0 30px;gap:9px;height:33px;background:#ded;flex:none;order:1;align-self:stretch;flex-grow:0}.swipe_msg{display:flex;flex-direction:row;justify-content:center;align-items:center;padding:0;gap:10px;flex:none;order:3;flex-grow:0}.vaccinesTitleDate{font-style:normal;font-weight:400;font-size:14px;color:#636363}.btnText[data-v-3ba5e9df]{font-style:normal;font-weight:500;font-size:14px}.btnTextWeight[data-v-3ba5e9df]{color:#000;--border-width: 1px;margin-right:15px}.dueAlert[data-v-3ba5e9df]{justify-content:space-between;margin-top:10px;padding:5px}.dueAlertText[data-v-3ba5e9df]{font-style:normal;font-weight:500;font-size:14px;color:#b42318;padding:10px}.mod-ls[data-v-3ba5e9df]{border-bottom:1px solid #ccc;line-height:60px}ion-accordion[data-v-029f1008]{background:#fff}ion-list[data-v-029f1008]{--ion-background-color: #fff}.demographics[data-v-029f1008]{box-sizing:border-box;width:98vw;left:calc(50% - 203px);margin-top:10px;background:#fff;border:1px solid #d9d9d9;border-radius:7px;display:flex;justify-content:space-between;margin-left:1vw}.demographicsFirstRow[data-v-029f1008]{display:flex;flex-direction:row;align-items:center;padding:10px 5px;gap:15px;height:24px;justify-content:space-between}.name[data-v-029f1008]{height:24px;font-style:normal;font-weight:700;font-size:20px;line-height:24px;color:#00190e;flex:none;order:0;flex-grow:0}.demographicsText[data-v-029f1008]{font-style:normal;font-weight:400;font-size:14px;line-height:5px;color:#636363;flex:none;order:0;flex-grow:0}.demographicsOtherRow[data-v-029f1008]{display:flex;gap:10px;margin-top:20px;margin-left:5px}.smallFont[data-v-029f1008]{font-size:14px}.mediumFontColor[data-v-029f1008]{color:#00190e}.weightHeightGraphBtns[data-v-029f1008]{display:flex;justify-content:space-around;margin-top:8px;width:100%;max-width:500px}.btnText[data-v-029f1008]{font-style:normal;font-weight:500;font-size:14px}.btnTextWeight[data-v-029f1008]{color:#000;--border-width: 1px;margin-right:15px}.dot[data-v-029f1008]{font-size:25px}.initialsBox[data-v-029f1008]{width:95px;height:115px;left:31px;top:122px;border-radius:10px;align-items:center;display:flex;justify-content:center}.maleColor[data-v-029f1008]{background:#5983ba}.femaleColor[data-v-029f1008]{background:#876d9b}.initialsText[data-v-029f1008]{width:100%;font-style:normal;font-weight:800;font-size:40px;display:flex;align-items:center;text-align:center;justify-content:center;align-content:center;color:#fff}.outcomeStatus[data-v-029f1008]{padding:2px 7px;width:50px;height:18px;background:#ded;border-radius:22px;font-style:normal;font-weight:700;font-size:14px;align-items:center;text-align:center}.protectedStatus[data-v-029f1008]{padding:2px 7px;width:50px;height:18px;border-radius:22px;font-style:normal;font-weight:400;font-size:14px;align-items:center;color:#006401;text-align:center}.graphSection[data-v-029f1008]{box-sizing:border-box;background:#f7f7f7;border:1px solid #d9d9d9;border-radius:3px;margin-top:7px}.graphBtn[data-v-029f1008]{display:flex;justify-content:center}.dueAlert[data-v-029f1008]{justify-content:space-between;border:solid 1px #ccc;border-style:dashed;border-left:none;border-right:none;margin-top:10px;padding:5px;width:100%}.dueAlertText[data-v-029f1008]{font-style:normal;font-weight:500;font-size:14px;color:#b42318;padding:10px}.vaccinesTitle[data-v-029f1008]{display:flex;justify-content:space-around;padding:15px}.vaccinesTitleText[data-v-029f1008]{font-style:normal;margin-top:-7px;font-weight:600;font-size:18px;color:#00190e}.vaccinesTitleDate[data-v-029f1008]{font-style:normal;font-weight:400;font-size:14px;color:#636363}.milestone[data-v-029f1008]{display:flex;justify-content:space-between;padding-left:15px;padding-right:15px}.arrowBtns[data-v-029f1008]{position:absolute;top:30px}.vaccinesList[data-v-029f1008]{margin-top:8px}.seeFullList[data-v-029f1008]{font-style:normal;font-weight:500;font-size:14px;line-height:24px;display:flex;align-items:center;text-align:center;color:#316cba;float:right}.warningText[data-v-029f1008]{display:flex;flex-direction:row;justify-content:center;align-items:center;padding:6px;gap:1px;background:#fedf89;border-radius:4px;font-size:13px;margin-right:10px;color:#636363}.successText[data-v-029f1008]{display:flex;flex-direction:row;justify-content:center;align-items:center;padding:6px;gap:1px;background:#ded;border-radius:4px;font-size:13px;color:#636363}.centerBtns[data-v-029f1008]{display:flex;justify-content:center;margin-bottom:10px}.otherVaccine[data-v-029f1008]{padding:10px;margin-bottom:10px}.dotsWizard[data-v-029f1008]{display:flex;justify-content:space-between;width:150px;margin:0 auto;align-items:center}.dotBig[data-v-029f1008]{font-size:.7rem!important}.dotStatus[data-v-029f1008]{font-size:.4rem!important}.lastVaccineTitle[data-v-029f1008]{display:flex;justify-content:space-between}.lastVaccine[data-v-029f1008]{padding-left:20px;padding-right:20px;padding-top:10px}.lastVaccineText[data-v-029f1008]{font-style:normal;font-weight:600;font-size:18px;line-height:150%;color:#00190e}.lastVaccineList[data-v-029f1008]{display:flex;justify-content:space-between;width:210px;margin-bottom:20px}.lastVaccineDate[data-v-029f1008]{display:flex;justify-content:space-between;width:210px;margin-bottom:10px;align-items:center}.administerVac[data-v-029f1008]{height:58px;width:150px}.dashed-hr[data-v-029f1008]{border:none;border-top:1px dashed #b3b3b3;margin:20px 0}.missed_vaccine_alert[data-v-029f1008]{display:flex;flex-direction:row;align-items:center;padding-top:12px;padding-bottom:12px;color:#b42318;width:content;height:25px;background:#fecdca;border:1px solid #fda19b;box-shadow:0 4px 5px rgba(189,13,0,.1);border-radius:8px;flex:none;order:0;flex-grow:0}.missed_vaccine_alert_txt[data-v-029f1008]{height:17px;font-weight:500;font-size:14px;line-height:17px;color:#b42318;flex:none;order:1;flex-grow:0}.box-line[data-v-029f1008]{width:100%;height:0px;border:1px dashed #b3b3b3;flex:none;order:0;flex-grow:0}\n/*$vite$:1*/",document.head.appendChild(t);const it={style:{color:"#016302"}},ot={style:{color:"#316CBA","margin-left":"10%"}},st=ee(Oe,[["render",function(e,t,p,h,g,m){const f=a("ion-title"),v=a("ion-header"),_=a("ion-icon"),b=a("row"),x=a("customVaccine"),y=a("ion-content"),w=a("ion-button"),D=a("ion-col"),I=a("ion-row"),S=a("ion-footer");return i(),n(c,null,[o(v,null,{default:s(()=>[o(f,{style:{"margin-bottom":"20px"},class:"modalTitle OtherVitalsTitle"},{default:s(()=>t[1]||(t[1]=[l("Vaccination History",-1)])),_:1,__:[1]})]),_:1}),o(y,{fullscreen:!0,class:"ion-padding"},{default:s(()=>[(i(!0),n(c,null,r(e.vaccineSchedule.vaccine_schedule,(a,c)=>(i(),n("div",{class:"mod-ls",key:c},[o(b,null,{default:s(()=>[o(_,{size:"medium",style:{"margin-bottom":"-6px"},icon:e.iconsContent.calendar},null,8,["icon"]),d("span",null,[t[2]||(t[2]=l(" at ",-1)),d("span",it,u(a.age),1)]),d("span",ot,u(e.vaccinesGivenCount(a))+"/"+u(a.antigens.length)+" vaccine(s) given",1)]),_:2},1024),o(b,null,{default:s(()=>[o(x,{vaccines:a.antigens,milestone_status:a.milestone_status},null,8,["vaccines","milestone_status"])]),_:2},1024)]))),128))]),_:1}),o(S,{collapse:"fade",class:"ion-no-border"},{default:s(()=>[o(I,null,{default:s(()=>[o(D,null,{default:s(()=>[o(w,{id:"cbtn",class:"btnText cbtn",fill:"solid",style:{width:"130px"},onClick:t[0]||(t[0]=t=>e.dismiss())},{default:s(()=>t[3]||(t[3]=[l(" Cancel ",-1)])),_:1,__:[3]})]),_:1})]),_:1})]),_:1})],64)}],["__scopeId","data-v-59edb4e4"]]),lt=p({mixins:[He],components:{IonContent:w,IonHeader:y,IonItem:x,IonList:b,IonMenu:_,IonTitle:v,IonToolbar:f,IonInput:m,BasicInputField:ie,BasicForm:$e,PreviousVitals:ne,customDatePicker:qe,DynamicButton:ae,IonFooter:g},data:()=>({iconsContent:ge,BMI:{},BPStatus:{},vValidations:"",hasValidationErrors:[],vitalsInstance:{},validationStatus:{heightWeight:!1,bloodPressure:!1},showPD:!1,initialSeriousData:[],initialFirstDecisionData:[],initialOutcomeData:[]}),props:{protectedStatus:String,lastVaccinesGiven:Array},watch:{personInformation:{async handler(){await this.setRelationShip()},deep:!0}},computed:{...h(he,["patient"]),...h(We,["changeGuardianInfo","vaccineAdverseEffects","protectedAtBirth","serious","outcome","firstDecision"]),guardianFirstname(){return oe(this.changeGuardianInfo,"guardianFirstname","value")},guardianLastname(){return oe(this.changeGuardianInfo,"guardianLastname","value")},guardianMiddleName(){return oe(this.changeGuardianInfo,"guardianMiddleName","value")},guardianPhoneNumber(){return oe(this.changeGuardianInfo,"guardianPhoneNumber","value")},relationship(){return oe(this.changeGuardianInfo,"relationship","value")}},async mounted(){await this.setupData()},setup:()=>({checkmark:S,pulseOutline:I}),methods:{async setupData(){const e=We();this.initialSeriousData=e.getInitialSerious(),this.initialFirstDecisionData=e.getInitialFirstDecision(),this.initialOutcomeData=e.getInitialOutcome();const t=await Ye.getRelationships(this.patient.patientID);var a,n,i,o,s,l,c;(null==t?void 0:t.length)>0&&(pe(this.changeGuardianInfo,"guardianNationalID","value",this.setAttribute("Regiment ID",null===(a=t[0])||void 0===a?void 0:a.relation)),pe(this.changeGuardianInfo,"guardianFirstname","value",null===(n=t[0])||void 0===n||null===(n=n.relation.names[0])||void 0===n?void 0:n.given_name),pe(this.changeGuardianInfo,"guardianLastname","value",null===(i=t[0])||void 0===i||null===(i=i.relation.names[0])||void 0===i?void 0:i.family_name),pe(this.changeGuardianInfo,"guardianMiddleName","value",null===(o=t[0])||void 0===o||null===(o=o.relation.names[0])||void 0===o?void 0:o.middle_name),pe(this.changeGuardianInfo,"guardianPhoneNumber","value",this.setAttribute("Cell Phone Number",null===(s=t[0])||void 0===s?void 0:s.relation)),pe(this.changeGuardianInfo,"relationship","value",{id:null===(l=t[0])||void 0===l?void 0:l.type.relationship_type_id,name:null===(c=t[0])||void 0===c?void 0:c.type.b_is_to_a}),await this.setRelationShip()),this.resetData()},async setRelationShip(){this.gender?(await this.getRelationships(),pe(this.changeGuardianInfo,"relationship","displayNone",!1),pe(this.changeGuardianInfo,"relationship","multiSelectData",this.relationships)):pe(this.changeGuardianInfo,"relationship","displayNone",!0)},setAttribute(e,t){if(!t||0===Object.keys(t).length)return;let a=t.person_attributes.find(t=>t.type.name==e);return null==a?void 0:a.value},resetData(){const e=We();e.setProtectedAtBirth(e.getInitialProtectedAtBirth()),e.setVaccineAdverseEffects(e.getInitialVaccineAdverseEffects())},async createGuardian(){const e=await this.guardianData();if(Ke(this.changeGuardianInfo)){const t=new re;await t.registerGuardian(e);const a=t.getPersonID(),n=oe(this.changeGuardianInfo,"relationship","value").id;return n&&await de.createRelation(this.patient.patientID,a,n),ue("Guarding information save successfully",3e3),!0}return ce("Guarding Information not save",3e3),!1},async saveData(){const e=await this.createGuardian(),t=await this.saveVaccineAdverseEffects();e&&t&&D.dismiss()},async saveVaccineAdverseEffects(){if(this.patient.patientID){const e=oe(this.outcome,"Date of death","value")||se.sessionDate(),t=await this.formatCheckBoxData(this.serious,se.sessionDate(),this.lastVaccinesGiven),a=await this.formatRadioButtonData(this.outcome,e,this.lastVaccinesGiven),n=await this.formatCheckBoxData(this.vaccineAdverseEffects,se.sessionDate(),this.lastVaccinesGiven),i=oe(this.firstDecision,"Investigation needed","value");let o=[];return i&&(o=[{concept_id:11887,value_text:i,obs_datetime:se.sessionDate()}]),[...t,...a,...n,...o].filter(e=>void 0!==e),le.getUserID(),n.length>0||(ce("Vaccine adverse effects not saved",1500),!1)}},formatCheckBoxData:async(e,t=te.getSessionDate(),a)=>Array.isArray(e)?(await Promise.all(e.map(async n=>{var i;if(null==n||null===(i=n.checkboxBtnContent)||void 0===i||null===(i=i.data)||void 0===i||!i.length)return[];const o=n.checkboxBtnContent.data.map(async i=>{if(null==i||!i.checked||null!=i&&i.buildConceptIgnore)return null;try{const o=await te.getConceptID(i.value,!0),s=await te.getConceptID(n.checkboxBtnContent.header.name,!0),l=oe(e,i.name+" date","value");if(t=l||t,!o||!s)return null;const c={concept_id:s,value_coded:o,obs_datetime:t};if(a.length>0){const e=a.map(e=>({concept_id:o,value_coded:e.drug_id,obs_datetime:t}));return{...c,child:e}}return c}catch(o){return console.error("Error processing checkbox data:",o),null}});return(await Promise.all(o)).filter(Boolean)}))).flat().filter(Boolean):[],async formatRadioButtonData(e,t=te.getSessionDate(),a){const n=e.map(async e=>{if(e&&e.radioBtnContent&&e.radioBtnContent.header&&e.radioBtnContent.header.selectedValue){const n=await te.getConceptID(e.radioBtnContent.header.selectedValue,!0),i=await te.getConceptID(e.radioBtnContent.header.name,!0),o=t||te.getSessionDate(),s=a.map(e=>({concept_id:n,value_coded:e.drug_id,obs_datetime:o}));return a?{concept_id:i,value_coded:n,obs_datetime:o,child:s}:{concept_id:i,value_coded:n,obs_datetime:o}}return null});return(await Promise.all(n)).filter(e=>null!==e)},async guardianData(){return{person_id:this.patient.patientID,given_name:this.guardianFirstname,family_name:this.guardianLastname,middle_name:this.guardianMiddleName,gender:"",birthdate:"",cell_phone_number:this.guardianPhoneNumber,birthdate_estimated:!1,home_district:"",home_traditional_authority:"",home_village:"",current_district:"",current_traditional_authority:"",current_village:"",landmark:"",occupation:"",facility_name:"",patient_type:"",national_id:oe(this.changeGuardianInfo,"guardianNationalID","value")}},async handleInputData(e){},dismiss(){D.dismiss()}}}),ct={class:""},rt={class:"ion-padding",slot:"content",style:{"padding-bottom":"200px"}},dt={class:""},ut={class:"ion-padding",slot:"content"},pt={slot:"content"},ht={slot:"content"},gt={slot:"content"},mt={slot:"content"},ft={class:"ion-padding",slot:"content",style:{"padding-bottom":"120px"}},vt=ee(lt,[["render",function(e,t,r,u,p,h){const g=a("ion-title"),m=a("ion-icon"),f=a("ion-header"),v=a("ion-label"),_=a("ion-item"),b=a("basic-form"),x=a("ion-accordion"),y=a("ion-accordion-group"),w=a("ion-content"),D=a("DynamicButton"),I=a("ion-col"),S=a("ion-row"),k=a("ion-footer");return i(),n(c,null,[o(f,{style:{display:"flex","justify-content":"space-between"}},{default:s(()=>[o(g,{class:"modalTitle"},{default:s(()=>t[2]||(t[2]=[l("Follow up visits",-1)])),_:1,__:[2]}),o(m,{onClick:t[0]||(t[0]=t=>e.dismiss()),style:{"padding-top":"10px","padding-right":"10px"},icon:e.iconsContent.cancel},null,8,["icon"])]),_:1}),o(w,{fullscreen:!0,class:"ion-padding",style:{"--background":"#fff"}},{default:s(()=>[d("div",ct,[o(y,{ref:"accordionGroup",class:""},{default:s(()=>[o(x,{value:"first","toggle-icon-slot":"start",class:"custom_card"},{default:s(()=>[o(_,{slot:"header",color:"light"},{default:s(()=>[o(v,{class:"previousLabel"},{default:s(()=>t[3]||(t[3]=[l("Change Guardian",-1)])),_:1,__:[3]})]),_:1}),d("div",rt,[d("div",dt,[o(b,{contentData:e.changeGuardianInfo,"onUpdate:inputValue":e.handleInputData},null,8,["contentData","onUpdate:inputValue"])])])]),_:1}),o(x,{value:"second","toggle-icon-slot":"start",class:"custom_card"},{default:s(()=>[o(_,{slot:"header",color:"light"},{default:s(()=>[o(v,{class:"previousLabel"},{default:s(()=>t[4]||(t[4]=[l("Vaccine adverse effects",-1)])),_:1,__:[4]})]),_:1}),d("div",ut,[d("div",null,[d("div",pt,[o(b,{contentData:e.vaccineAdverseEffects,"onUpdate:inputValue":e.handleInputData},null,8,["contentData","onUpdate:inputValue"])])]),d("div",null,[d("div",ht,[o(b,{contentData:e.serious,initialData:e.initialSeriousData,"onUpdate:inputValue":e.handleInputData},null,8,["contentData","initialData","onUpdate:inputValue"])])]),d("div",null,[d("div",gt,[o(b,{contentData:e.outcome,initialData:e.initialOutcomeData,"onUpdate:inputValue":e.handleInputData},null,8,["contentData","initialData","onUpdate:inputValue"])])]),d("div",null,[d("div",mt,[o(b,{contentData:e.firstDecision,initialData:e.initialFirstDecisionData,"onUpdate:inputValue":e.handleInputData},null,8,["contentData","initialData","onUpdate:inputValue"])])])])]),_:1}),"Yes"!=e.protectedStatus?(i(),V(x,{key:0,value:"third","toggle-icon-slot":"start",class:"custom_card"},{default:s(()=>[o(_,{slot:"header",color:"light"},{default:s(()=>[o(v,{class:"previousLabel"},{default:s(()=>t[5]||(t[5]=[l("Child protected at birth",-1)])),_:1,__:[5]})]),_:1}),d("div",ft,[o(b,{contentData:e.protectedAtBirth,"onUpdate:inputValue":e.handleInputData},null,8,["contentData","onUpdate:inputValue"])])]),_:1})):C("",!0)]),_:1},512)])]),_:1}),o(k,{collapse:"fade",class:"ion-no-border"},{default:s(()=>[o(S,null,{default:s(()=>[o(I,null,{default:s(()=>[o(D,{onClick:t[1]||(t[1]=t=>e.saveData()),name:"Save",fill:"solid",style:{float:"right",margin:"2%",width:"130px"}})]),_:1})]),_:1})]),_:1})],64)}],["__scopeId","data-v-4497bb3f"]]),_t=p({components:{IonContent:w,IonHeader:y,IonItem:x,IonList:b,IonMenu:_,IonTitle:v,IonToolbar:f,IonInput:m,BasicInputField:ie,BasicForm:$e,PreviousVitals:ne,customDatePicker:qe,IonCol:B,IonRow:M,VueMultiselect:A,IonLabel:k,lotNumberList:Fe},data(){const e=T(0),t=T([]);return{iconsContent:ge,showPD:!1,batchNumber:"",vaccineName:"",currentDrugOb:{},comp_key:e,otherVaccinesList:t,is_batch_number_valid:!1,vaccineDate:"",is_vaccine_name_valid:!1,drugErrMsg:"",batch_number_error_message:"Enter a valid batch number",vaccine_name_error_message:"Enter a valid valid vaccine name",sessionDate:se.toStandardHisDisplayFormat(le.getSessionDate()),InnerActionBtnPropeties:{name:"Scan",show:!0,fn:()=>{ve(ze,{class:"otherVitalsModal qr_code_modal"},!1)},icon:"",show_icon:!1},showDateBtns:!0,selected_date_:"",show_select_batch:!1,skip_validation:!1,antigens:t}},computed:{...h(Qe,["administerOtherVaccine"]),...h(fe,["tempScannedBatchNumber","vaccineSchedule"]),...h(he,["patient"])},async mounted(){this.vaccineSchedule.vaccine_schedule.forEach(e=>{this.antigens.push(...e.antigens)})},watch:{batchNumber:{handler(){this.validateBatchNumber()},deep:!0},tempScannedBatchNumber:{handler(){null!=this.tempScannedBatchNumber&&(this.batchNumber=this.tempScannedBatchNumber.text,this.validateBatchNumber())}},vaccineName:{handler(){this.validateVaccineName()}}},setup(){const e=T(null);return{childComponentRef:e,triggerChildAction:()=>{e.value&&e.value.performAction()}}},methods:{showCPD(){this.showPD=!0,this.showDateBtns=!1},updateBatchNumber(e){var t;const a=e.target.value;this.batchNumber=a||(null===(t=this.tempScannedBatchNumber)||void 0===t?void 0:t.text)||""},saveBatchWithTodayDate(){let e=le.getSessionDate();this.saveDta(e)},dismiss(){D.dismiss()},saveBatch(){let e;e=1==Te.isEmpty(this.vaccineDate)?le.getSessionDate():this.vaccineDate,this.saveDta(e)},validateVaccineName(){return 1==Te.isEmpty(this.vaccineName)?(this.is_vaccine_name_valid=!0,!1):0==Te.isEmpty(this.vaccineName)?(this.is_vaccine_name_valid=!1,!0):void 0},updateVaccineName(e){this.currentDrugOb=e,console.log(this.currentDrugOb),fe().setCurrentSelectedDrug(e),this.pullLotNumbersForVaccine(this.currentDrugOb)},async pullLotNumbersForVaccine(e){this.show_select_batch=!1;const t=fe(),a=new tt,n=await a.getDrugBatches(e.drug_id);t.setLotNumberData(n),0==n.length&&(0==Ze(e)&&ve(Ge,{class:"otherVitalsModal"}),1==Ze(e)&&(this.show_select_batch=!1,this.skip_validation=!0)),n.length>0&&(this.comp_key=this.comp_key+1,this.show_select_batch=!0)},isAlphaNumeric:e=>/^[a-zA-Z0-9!@#$%^&*()_+\-=[\]{};':"\\|,.<>/?]+$/.test(e),validateBatchNumber(){1==this.isAlphaNumeric(this.batchNumber)&&(this.is_batch_number_valid=!1),0==this.isAlphaNumeric(this.batchNumber)&&(this.is_batch_number_valid=!0)},updateBatchNumberByPassValue(e){this.batchNumber=e},ActionTriggered(e){const t={batch_number:e.lotNumber,date_administered:this.selected_date_,drug_id:this.currentDrugOb.drug_id,drug_:this.currentDrugOb},a=fe();a.setAdministeredVaccine(t),Je(this.patient),a.setTempScannedBatchNumber(null),this.dismiss()},saveDta(e){1==this.validateVaccineName()&&(this.selected_date_=e,this.triggerChildAction(),0==this.show_select_batch&&0==this.skip_validation&&me("Please Update Stock for Selected Vaccine"))},childAction(){}}}),bt={class:"modal_wrapper"},xt={class:"lbl-ct"},yt={style:{"margin-top":"30px"}},wt={class:"btnContent"},Dt={key:0,class:"saveBtn"},It={key:1,class:"saveBtn"},St=ee(_t,[["render",function(e,t,c,r,p,h){const g=a("ion-col"),m=a("ion-label"),f=a("ion-row"),v=a("VueMultiselect"),_=a("lotNumberList"),b=a("customDatePicker"),x=a("ion-icon"),y=a("ion-button");return i(),n("div",bt,[o(f,{style:{"margin-top":"10px"}},{default:s(()=>[o(g,{style:{"margin-left":"-3px"}},{default:s(()=>t[3]||(t[3]=[d("div",{class:"om"},"Add Other Vaccine",-1)])),_:1,__:[3]}),o(g,{size:"6",style:{"text-align":"right"}},{default:s(()=>[o(m,{class:"lbl-tl",style:{"font-size":"13"}},{default:s(()=>[t[4]||(t[4]=l(" Todays Date: ",-1)),d("span",xt,u(e.sessionDate),1)]),_:1,__:[4]})]),_:1})]),_:1}),d("div",yt,[o(f,null,{default:s(()=>[o(m,{style:{margin:"10px","margin-left":"0px","margin-top":"0px",color:"grey"}},{default:s(()=>t[5]||(t[5]=[l("Vaccine name",-1),d("span",{style:{color:"#b42318"}},"*",-1)])),_:1,__:[5]})]),_:1}),o(v,{modelValue:e.vaccineName,"onUpdate:modelValue":[t[0]||(t[0]=t=>e.vaccineName=t),t[1]||(t[1]=t=>e.updateVaccineName(t))],multiple:!1,taggable:!1,"hide-selected":!1,"close-on-select":!0,openDirection:"bottom","tag-placeholder":"select vaccine",placeholder:"select vaccine",selectLabel:"",label:"drug_name",searchable:!0,onSearchChange:t[2]||(t[2]=t=>e.$emit("search-change",t)),"track-by":"drug_id",options:e.otherVaccinesList},null,8,["modelValue","options"]),d("div",null,[e.is_vaccine_name_valid?(i(),V(m,{key:0,style:{padding:"3%"},class:"error-label"},{default:s(()=>[l(u(e.vaccine_name_error_message),1)]),_:1})):C("",!0)])]),j(o(f,null,{default:s(()=>[o(m,{style:{margin:"10px","margin-left":"0px","margin-top":"0px",color:"grey"}},{default:s(()=>t[6]||(t[6]=[l("Batch numbers",-1),d("span",{style:{color:"#b42318"}},"*",-1)])),_:1,__:[6]})]),_:1},512),[[N,e.show_select_batch]]),j(d("div",null,[(i(),V(_,{action:e.childAction,retro:e.showPD,ref:"childComponentRef",onActionTriggered:e.ActionTriggered,key:e.comp_key},null,8,["action","retro","onActionTriggered"]))],512),[[N,e.show_select_batch]]),e.showPD?(i(),V(b,{key:0})):C("",!0),d("div",wt,[e.showDateBtns?(i(),n("div",Dt,[d("div",null,[o(y,{onClick:e.saveBatchWithTodayDate,class:"btnText",fill:"solid"},{default:s(()=>[t[7]||(t[7]=l(" Done today ",-1)),o(x,{slot:"end",size:"small",icon:e.iconsContent.calenderwithPlus},null,8,["icon"])]),_:1,__:[7]},8,["onClick"])]),t[9]||(t[9]=d("div",{style:{"margin-bottom":"20px"}},null,-1)),d("div",null,[o(y,{class:"btnText",fill:"solid",onClick:e.showCPD},{default:s(()=>[t[8]||(t[8]=l(" Done earlier ",-1)),o(x,{slot:"end",size:"small",icon:e.iconsContent.calenderWithPenEdit},null,8,["icon"])]),_:1,__:[8]},8,["onClick"])])])):C("",!0),e.showDateBtns?C("",!0):(i(),n("div",It,[o(f,{class:"ion-justify-content-between"},{default:s(()=>[o(g,{size:"auto"},{default:s(()=>[o(y,{onClick:e.dismiss,id:"cbtn",class:"btnText cbtn",fill:"solid",style:{width:"130px"}},{default:s(()=>t[10]||(t[10]=[l(" Cancel ",-1)])),_:1,__:[10]},8,["onClick"])]),_:1}),o(g,{size:"auto"},{default:s(()=>[o(y,{onClick:e.saveBatch,class:"btnText",fill:"solid",style:{width:"130px"}},{default:s(()=>t[11]||(t[11]=[l(" Save ",-1)])),_:1,__:[11]},8,["onClick"])]),_:1})]),_:1})]))])])}],["__scopeId","data-v-eb04f444"]]),Vt=p({name:"xxxComponent",components:{Carousel:z,Slide:G,Pagination:F,Navigation:O,customVaccine:Ee,IonButton:P,IonCol:B,IonRow:M,IonLabel:k},data:()=>({vaccine_schArray:[],vaccineSchudulesCount:0,milestones:[],iconsContent:ge,showCurrentMilestoneAlert:!1,landingSlide:0,msg:"Upcoming Vaccines",current_milestone:"",componentKey:0}),computed:{...h(fe,["vaccineReload"]),...h(he,["patient"])},async mounted(){await this.loadVaccineSchedule()},watch:{vaccineReload:{async handler(){await this.loadVaccineSchedule()},deep:!0},patient:{async handler(){await this.loadVaccineSchedule()},deep:!0},vaccine_schArray:{handler(){this.reloadVaccines()}}},methods:{openAdministerOtherVaccineModal(){ve(St,{class:"otherVitalsModal"})},async loadVaccineSchedule(){var e,t,a,n,i;await this.setAppointmentDate();const o=this.patient.vaccineSchedule,s=fe();s.setVaccineSchedule(o),s.setLastVaccinesGiven([]),this.vaccineSchudulesCount=null===(e=s.getVaccineSchedule())||void 0===e||null===(e=e.vaccine_schedule)||void 0===e?void 0:e.length,s.resetMissedVaccineSchedules(),this.vaccine_schArray=[],this.vaccine_schArray.push(null===(t=s.getVaccineSchedule())||void 0===t?void 0:t.vaccine_schedule),null===(a=s.getVaccineSchedule())||void 0===a||null===(a=a.vaccine_schedule)||void 0===a||a.forEach(e=>{this.findMissingVaccines(e),this.findPreviouslyAdministeredVaccineSchedule(e),this.handleSchedule(e);const t={visit:e.visit,age:e.age};this.milestones=this.appendUniqueObject(this.milestones,t)});let l=!1;null===(n=s.getVaccineSchedule())||void 0===n||null===(n=n.vaccine_schedule)||void 0===n||n.forEach(e=>{l||1!=this.findSingleUpcomingMilestone(e)||(l=!0)}),null===(i=s.getVaccineSchedule())||void 0===i||null===(i=i.vaccine_schedule)||void 0===i||i.forEach(e=>{this.findCurrentMilestone(e)})},setSB(e){const t=fe();t.setCurrentMilestoneToAdminister({currentMilestone:e.age}),this.landingSlide=e.visit-1,this.current_milestone=e.age,t.setCurrentMilestone(e.age)},handleSchedule(e){"upcoming"==e.milestone_status?(fe().setCurrentSchedFound(!1),this.msg="Upcoming Vaccines",this.showCurrentMilestoneAlert=!0,this.setSB(e)):(this.setSB(e),fe().setCurrentSchedFound(!1))},findSingleUpcomingMilestone(e){return"upcoming"==e.milestone_status&&(this.setSB(e),!0)},findCurrentMilestone(e){"current"==e.milestone_status&&(this.msg="Vaccines due today",fe().setCurrentSchedFound(!0),this.showCurrentMilestoneAlert=!0,this.setSB(e))},slideEvent(e){const t=fe(),a=t.getCurrentMilestoneToAdminister();this.milestones.forEach(a=>{a.visit-1==e.currentSlideIndex&&(t.setCurrentMilestone(a.age),this.current_milestone=a.age)});const n=t.getCurrentMilestone();if(n==a.currentMilestone)return 0==t.getCurrentSchedFound()&&(this.msg="Upcoming Vaccines"),1==t.getCurrentSchedFound()&&(this.msg="Vaccines due today"),void(this.showCurrentMilestoneAlert=!0);n.age!=a.currentMilestone&&(this.showCurrentMilestoneAlert=!1)},appendUniqueObject:(e,t)=>(e.some(e=>e.visit===t.visit&&e.age===t.age)||e.push(t),e),isListEmpty:e=>e.length>0||0!=e.length&&void 0,findMissingVaccines(e){const t={age:e.age,antigens:[]};"passed"==e.milestone_status&&e.antigens.forEach(e=>{"pending"==e.status&&t.antigens.push(e)});const a=fe();t.antigens.length>0&&a.setMissedVaccineSchedules(t)},findPreviouslyAdministeredVaccineSchedule(e){const t=[];e.antigens.forEach(e=>{"administered"==e.status&&t.push(e)}),t.length>0&&fe().setLastVaccinesGiven(t)},reloadVaccines(){this.componentKey+=1},openNextVaccineAppoinment(){ve(et,{class:"otherVitalsModal"},!1)},async setAppointmentDate(){const e=fe(),t=new Xe,a=await t.getNextAppointment();null!=a&&a.next_appointment_date&&e.setNextAppointMentDate(a.next_appointment_date)}}}),Ct={key:0,class:"alert_banner"},kt={key:1,class:"alert_banner",style:{background:"inherit"}},At={class:"container"},Mt={class:"center-content"},Bt={class:"centerBtns"},Tt={class:"otherVaccine center-content"},jt={class:"centerBtns"},Nt=ee(Vt,[["render",function(e,t,p,h,g,m){const f=a("apan"),v=a("customVaccine"),_=a("ion-button"),b=a("ion-row"),x=a("slide"),y=a("navigation"),w=a("pagination"),D=a("carousel");return i(),n(c,null,[e.showCurrentMilestoneAlert?(i(),n("div",Ct,[o(f,null,{default:s(()=>[l(u(e.msg),1)]),_:1})])):C("",!0),e.showCurrentMilestoneAlert?C("",!0):(i(),n("div",kt)),e.vaccineSchudulesCount>0?(i(),V(D,{key:2,"items-to-show":1,modelValue:e.landingSlide,onSlideEnd:e.slideEvent},{addons:s(()=>[o(y),o(w)]),default:s(()=>[(i(!0),n(c,null,r(e.vaccineSchudulesCount,(a,n)=>(i(),V(x,{key:a},{default:s(()=>[o(b,{class:""},{default:s(()=>[d("div",At,[(i(),V(v,{vaccines:e.vaccine_schArray[0][n].antigens,milestone_status:e.vaccine_schArray[0][n].milestone_status,key:e.componentKey},null,8,["vaccines","milestone_status"]))]),o(b,{class:"bottom-row"},{default:s(()=>[d("div",Mt,[d("div",Bt,[o(_,{onClick:t[0]||(t[0]=t=>e.openNextVaccineAppoinment()),class:"btnText",fill:"solid"},{default:s(()=>t[1]||(t[1]=[l("Set Next Appointment Date",-1)])),_:1,__:[1]})])])]),_:1})]),_:2},1024)]),_:2},1024))),128))]),_:1},8,["modelValue","onSlideEnd"])):C("",!0),o(b,{class:"bottom-row"},{default:s(()=>[d("div",Tt,[d("div",jt,[o(_,{onClick:e.openAdministerOtherVaccineModal,class:"btnText",fill:"solid"},{default:s(()=>t[2]||(t[2]=[l(" Add Other Vaccines ",-1)])),_:1,__:[2]},8,["onClick"])])])]),_:1})],64)}]]),Pt=p({name:"Home",components:{IonHeader:y,IonMenuButton:Y,IonPage:K,IonTitle:v,IonToolbar:f,IonButton:P,IonCard:q,IonCardContent:$,IonCardHeader:W,IonCardSubtitle:H,IonCardTitle:R,IonAccordion:U,IonAccordionGroup:L,IonItem:x,IonLabel:k,IonModal:E,IonRow:M,customVaccine:Ee,IonCol:B,IonFooter:g,IonContent:w},data:()=>({iconsContent:ge}),computed:{...h(fe,["currentMilestone","missedVaccineSchedules"])},methods:{vaccinesGivenCount(e){const t=[];return e.antigens.forEach(e=>{"administered"==e.status&&t.push(e)}),t.length},dismiss(){D.dismiss()}}}),Ot={style:{color:"#016302"}},Ft={style:{color:"#316CBA","margin-left":"10%"}},Gt=ee(Pt,[["render",function(e,t,p,h,g,m){const f=a("ion-title"),v=a("ion-header"),_=a("ion-icon"),b=a("row"),x=a("customVaccine"),y=a("ion-content"),w=a("ion-button"),D=a("ion-col"),I=a("ion-row"),S=a("ion-footer");return i(),n(c,null,[o(v,null,{default:s(()=>[o(f,{style:{"margin-bottom":"20px"},class:"modalTitle"},{default:s(()=>t[1]||(t[1]=[l("Missed Vaccines",-1)])),_:1,__:[1]})]),_:1}),o(y,{fullscreen:!0,class:"ion-padding"},{default:s(()=>[(i(!0),n(c,null,r(e.missedVaccineSchedules,(a,c)=>(i(),n("div",{key:c},[o(b,{style:{width:"90%"}},{default:s(()=>[o(_,{size:"medium",style:{"margin-bottom":"-6px"},icon:e.iconsContent.calendar},null,8,["icon"]),d("span",null,[t[2]||(t[2]=l(" at ",-1)),d("span",Ot,u(a.age),1)]),d("span",Ft,u(e.vaccinesGivenCount(a))+"/"+u(a.antigens.length)+" vaccine(s) given",1)]),_:2},1024),o(b,{style:{"text-align":"center"},class:"mod-ls"},{default:s(()=>[o(x,{vaccines:a.antigens,milestone_status:a.milestone_status},null,8,["vaccines","milestone_status"])]),_:2},1024)]))),128))]),_:1}),o(S,{collapse:"fade",class:"ion-no-border"},{default:s(()=>[o(I,null,{default:s(()=>[o(D,null,{default:s(()=>[o(w,{id:"cbtn",class:"btnText cbtn",fill:"solid",style:{width:"130px"},onClick:t[0]||(t[0]=t=>e.dismiss())},{default:s(()=>t[3]||(t[3]=[l(" Cancel ",-1)])),_:1,__:[3]})]),_:1})]),_:1})]),_:1})],64)}],["__scopeId","data-v-3ba5e9df"]]),zt=p({name:"Menu",data:()=>({isMobile:!1,visits:[],event:null,popoverOpen:!1,program:null}),mounted(){},computed:{...h(he,["patient"])},methods:{openPopover(e){this.event=e,this.popoverOpen=!0},openPIM(){ve(at,{class:"otherVitalsModal largeModal"})},openOutCome(){ve(nt,{class:"otherVitalsModal largeModal"})},async printVisitSummary(){if(this.visits=await be.getPatientVisits(this.patient.patientID,!1),this.visits.length)return new _e(this.patient.patientID).printVisitSummaryLbl(this.visits[0]);ce("No visits available")},printID(){new _e(this.patient.patientID).printNidLbl()},formatCurrentAddress(e){var t,a,n;return[null==e||null===(t=e.personInformation)||void 0===t?void 0:t.current_district,null==e||null===(a=e.personInformation)||void 0===a?void 0:a.current_traditional_authority,null==e||null===(n=e.personInformation)||void 0===n?void 0:n.current_village].filter(Boolean).join(",")}}}),Et=p({mixins:[zt],name:"Home",components:{IonContent:w,IonHeader:y,IonMenuButton:Y,IonPage:K,IonTitle:v,IonToolbar:f,Toolbar:ye,ToolbarSearch:xe,DemographicBar:ke,IonButton:P,IonCard:q,IonCardContent:$,IonCardHeader:W,IonCardSubtitle:H,IonCardTitle:R,IonAccordion:U,IonAccordionGroup:L,IonItem:x,IonLabel:k,IonModal:E,Stepper:Me,DynamicButton:ae,WeightHeightChart:Pe,PreviousVitals:ne,customSlider:Nt,IonRow:M,customVaccine:Ee},data:()=>({wizardData:[],StepperData:[],isOpen:!1,iconsContent:ge,current_milestone:"",checkUnderSixWeeks:!1,unprotected_at_birth:"",protectedStatus:"",todays_date:se.toStandardHisDisplayFormat(le.getSessionDate()),lastVaccine:[],visits:[],selectedStatus:7}),computed:{...h(Ce,["vitals"]),...h(Ve,["selectedMedicalDrugsList","nonPharmalogicalTherapyAndOtherNotes","selectedMedicalAllergiesList"]),...h(Se,["outcomes"]),...h(fe,["currentMilestone","missedVaccineSchedules","overDueVaccinesCount","lastVaccinesGiven","lastVaccineGievenDate","nextAppointMentDate"])},async mounted(){this.loadCurrentMilestone(),this.checkAge(),await this.checkProtectedStatus(),await this.openFollowModal(),await this.programEnrollment()},watch:{currentMilestone:{handler(){this.loadCurrentMilestone()}},$route:{async handler(e){"patientProfile"==e.name&&this.patient.patientID&&(await this.checkProtectedStatus(),await this.programEnrollment())}},patient:{async handler(){this.patient&&(await this.checkProtectedStatus(),await this.programEnrollment(),this.checkAge(),this.setMilestoneReload())}}},setup:()=>({chevronBackOutline:Z,checkmark:S,ellipsisVerticalSharp:J,person:Q}),methods:{handleChange(e){this.selectedStatus=e},async programEnrollment(){if(this.patient.patientID){this.program=new Ie(this.patient.patientID);const t=await this.program.getProgramCurrentStates();if(t)this.selectedStatus=t.state;else{try{await this.program.enrollProgram(),await this.program.setStateId(7)}catch(e){await this.program.setStateId(7)}await this.program.updateState(),this.selectedStatus=7}}},async updateState(e){this.selectedStatus=e,await this.program.setStateId(e),await this.program.updateState()},getAge:e=>se.calculateDisplayAge(se.toStandardHisFormat(e)),async checkProtectedStatus(){this.protectedStatus=this.getData(this.patient.birthRegistration,11759)[0]},getData:(e,t)=>e?e.filter(e=>e.concept_id==t).map(e=>e.value_text):"",checkAge(){var e,t;Te.isEmpty(null===(e=this.patient)||void 0===e||null===(e=e.personInformation)||void 0===e?void 0:e.birthdate)||(this.checkUnderSixWeeks=se.dateDiffInDays(se.sessionDate(),null===(t=this.patient)||void 0===t||null===(t=t.personInformation)||void 0===t?void 0:t.birthdate)<42)},openVitalsModal(){ve(Re,{class:"otherVitalsModal"})},openWH(){ve(Ue,{class:"otherVitalsModal"})},openVH(){ve(st,{class:"otherVitalsModal vaccineHistoryModal"})},async openFollowModal(){var e;if(null!==(e=this.patient)&&void 0!==e&&e.patientID){this.lastVaccine=await De.getLastDrugsReceived(this.patient.patientID);const e={protectedStatus:this.protectedStatus,lastVaccinesGiven:this.lastVaccinesGiven};this.lastVaccinesGiven.length>0&&ve(vt,{class:"fullScreenModal"},!0,e)}},openAdministerVaccineModal(){ve(Le,{class:"otherVitalsModal"})},openAdministerOtherVaccineModal(){ve(St,{class:"otherVitalsModal"})},isChild:()=>!!(new be).isUnderFive(),getFormatedData:e=>e.map(e=>null==e?void 0:e.data),async saveVitals(){if(this.vitals.validationStatus){const e=le.getUserID();new we(this.patient.patientID,e).onFinish(this.vitals)}},async saveTreatmentPlan(){const e=le.getUserID(),t=this.patient.patientID,a=new Be;if(!Te.isEmpty(this.selectedMedicalAllergiesList)){const n=this.mapToAllergies();a.onSubmitAllergies(t,e,n)}if(!Te.isEmpty(this.nonPharmalogicalTherapyAndOtherNotes)){const n=[{concept_id:2688,obs_datetime:le.getSessionDate(),value_text:this.nonPharmalogicalTherapyAndOtherNotes}];a.onSubmitNotes(t,e,n)}if(!Te.isEmpty(this.selectedMedicalDrugsList)){const a=this.mapToOrders(),n=new je(t,e);if(!(await n.createEncounter()))return ce("Unable to create treatment encounter");if(!(await n.createDrugOrder(a)))return ce("Unable to create drug orders!");ue("Drug order has been created")}},openModal(){ve(Ae)},mapToOrders(){return this.selectedMedicalDrugsList.map(e=>{const t=je.getSessionDate(),a=Ne.find(t=>t.label===e.frequency)||{};return{drug_inventory_id:e.drug_id,equivalent_daily_dose:"Unknown"==e.dose?0:e.dose*(null==a?void 0:a.value)||0,start_date:t,auto_expire_date:this.calculateExpireDate(t,e.duration),units:e.units,instructions:`${e.drugName}: ${e.dose} ${e.units} ${(null==a?void 0:a.code)||""} for ${e.duration} days`,dose:e.dose,frequency:(null==a?void 0:a.code)||""}})},formatBirthdate(){var e;return se.toStandardHisDisplayFormat(null===(e=this.patient)||void 0===e||null===(e=e.personInformation)||void 0===e?void 0:e.birthdate)},calculateExpireDate(e,t){const a=new Date(e);return a.setDate(a.getDate()+parseInt(t)),se.toStandardHisFormat(a)},mapToAllergies(){return this.selectedMedicalAllergiesList.map(e=>({concept_id:985,obs_datetime:le.getSessionDate(),value_coded:e.concept_id}))},loadCurrentMilestone(){const e=fe();this.current_milestone=e.getCurrentMilestone()},showMissedVaccines(){this.missedVaccineSchedules.length>0&&ve(Gt,{class:"otherVitalsModal vaccineHistoryModal"})},setMilestoneReload(){const e=fe();e.setVaccineReload(!e.getVaccineReload())},getLastVaccinesGivenDisplayDate(){return se.toStandardHisDisplayFormat(this.lastVaccineGievenDate)}}}),Lt={fullscreen:!0,style:{"--background":"#fff"}},Ut={class:"demographics"},Rt={style:{overflow:"hidden","text-overflow":"ellipsis","white-space":"nowrap"}},Ht={style:{display:"flex","justify-content":"space-between","align-content":"center","padding-bottom":"5px","padding-top":"5px","padding-left":"5px"}},Wt={style:{"margin-right":"5px"}},$t={class:"demographicsFirstRow"},qt={class:"name"},Kt={class:"demographicsOtherRow",style:{"margin-top":"10px"}},Yt={class:"demographicsText"},Qt={key:0,class:"demographicsOtherRow"},Jt={class:"demographicsText mediumFontColor"},Zt={key:1,class:"demographicsOtherRow"},Xt={class:"demographicsText mediumFontColor"},ea={class:"demographicsOtherRow"},ta={class:"demographicsText smallFont"},aa={class:"mediumFontColor"},na={class:"demographicsOtherRow"},ia={key:0,class:"demographicsText smallFont"},oa={key:1,class:"demographicsText smallFont"},sa={key:2,class:"demographicsText smallFont"},la={class:"demographicsOtherRow",style:{"margin-bottom":"10px"}},ca={class:"demographicsText smallFont"},ra={key:0,style:{background:"#fedf89",color:"#b54708"},class:"protectedStatus"},da={key:1,style:{background:"#ddeedd"},class:"protectedStatus"},ua={key:2,class:"protectedStatus",style:{background:"#fecdca",color:"#b42318"}},pa={class:"graphSection"},ha={class:"graphBtn",style:{"margin-bottom":"5px"}},ga={class:"weightHeightGraphBtns"},ma={key:0},fa={key:1},va={key:0,class:"graphBtn"},_a={class:"dueAlert"},ba={class:"missed_vaccine_alert"},xa={style:{"margin-right":"5px"}},ya={class:"vaccinesTitle"},wa={style:{width:"100%",display:"flex","justify-content":"space-between","align-content":"center"}},Da={class:"vaccinesTitleDate"},Ia={class:"milestone"},Sa={style:{display:"flex","justify-content":"space-between","align-content":"center"}},Va={style:{color:"#636363","margin-left":"5px","margin-top":"-4px"}},Ca={style:{color:"#636363","font-weight":"bold","font-size":"14px"}},ka={class:"lastVaccine"},Aa={class:"lastVaccineTitle"},Ma={key:0,class:"lastVaccineText"},Ba={class:"seeFullList"},Ta={style:{color:"#316cba","margin-left":"1%"}},ja={class:"ion-padding",slot:"content"};e("default",ee(Et,[["render",function(e,t,r,p,h,g){var m,f,v,_,b,x,y,w,D;const I=a("ion-icon"),S=a("WeightHeightChart"),k=a("PreviousVitals"),A=a("ion-button"),M=a("ion-col"),B=a("ion-row"),T=a("customSlider"),j=a("row"),N=a("customVaccine"),P=a("ion-label"),O=a("ion-item"),F=a("ion-accordion"),G=a("ion-toggle"),z=a("ion-list"),E=a("ion-accordion-group"),L=a("ion-popover");return i(),n(c,null,[d("div",Lt,[d("div",Ut,[d("div",Rt,[d("div",Ht,[d("div",Wt,[d("div",{class:X("M"==(null===(m=e.patient)||void 0===m||null===(m=m.personInformation)||void 0===m?void 0:m.gender)?"initialsBox maleColor":"initialsBox femaleColor")},[o(I,{style:{color:"#fff","font-size":"100px"},icon:e.person},null,8,["icon"])],2)]),d("div",null,[d("div",$t,[d("div",qt,u(null===(f=e.patient)||void 0===f||null===(f=f.personInformation)||void 0===f?void 0:f.given_name)+" "+u(null===(v=e.patient)||void 0===v||null===(v=v.personInformation)||void 0===v?void 0:v.middle_name)+" "+u(null===(_=e.patient)||void 0===_||null===(_=_.personInformation)||void 0===_?void 0:_.family_name),1)]),d("div",Kt,[d("div",Yt,[l(u("M"==(null===(b=e.patient)||void 0===b||null===(b=b.personInformation)||void 0===b?void 0:b.gender)?"Male":"Female")+" ",1),t[12]||(t[12]=d("span",{class:"dot"},".",-1)),l(" "+u(e.getAge(null===(x=e.patient)||void 0===x||null===(x=x.personInformation)||void 0===x?void 0:x.birthdate))+" ("+u(e.formatBirthdate())+") ",1)])]),null!==(y=e.patient)&&void 0!==y&&null!==(y=y.personInformation)&&void 0!==y&&y.current_district?(i(),n("div",Qt,[t[13]||(t[13]=d("div",{class:"demographicsText"},"Current Address:",-1)),d("div",Jt,u(e.formatCurrentAddress(e.patient)),1)])):C("",!0),null!==(w=e.patient)&&void 0!==w&&null!==(w=w.personInformation)&&void 0!==w&&w.country?(i(),n("div",Zt,[t[14]||(t[14]=d("div",{class:"demographicsText"},"Country:",-1)),d("div",Xt,u(null===(D=e.patient)||void 0===D||null===(D=D.personInformation)||void 0===D?void 0:D.country),1)])):C("",!0),d("div",ea,[d("div",ta,[t[15]||(t[15]=l(" MRN: ",-1)),d("span",aa,u(e.patient.ID),1)])]),d("div",na,[7==e.selectedStatus?(i(),n("div",ia,t[16]||(t[16]=[l(" Outcome: ",-1),d("span",{class:"outcomeStatus"}," Active",-1)]))):C("",!0),6==e.selectedStatus?(i(),n("div",oa,t[17]||(t[17]=[l(" Outcome: ",-1),d("span",{class:"outcomeStatus",style:{background:"#fecdca",color:"#b42318"}}," Inactive",-1)]))):C("",!0),3==e.selectedStatus?(i(),n("div",sa,t[18]||(t[18]=[l(" Outcome: ",-1),d("span",{class:"outcomeStatus",style:{background:"#fecdca",color:"#b42318"}}," Died",-1)]))):C("",!0)]),d("div",la,[d("div",ca,[t[19]||(t[19]=l(" Status: ",-1)),"No"==e.protectedStatus?(i(),n("span",ra,"Unprotected at birth")):"Yes"==e.protectedStatus?(i(),n("span",da,"Protected at birth")):(i(),n("span",ua,"Unknown protection at birth"))])])])])]),d("div",{class:"name",style:{color:"var(--ion-color-primary)","margin-top":"10px"},onClick:t[0]||(t[0]=t=>e.openPopover(t))},[o(I,{icon:e.ellipsisVerticalSharp},null,8,["icon"])])]),d("div",pa,[d("div",null,[e.isChild()?(i(),V(S,{key:0,checkUnderSixWeeks:e.checkUnderSixWeeks,showHeightWeight:!0},null,8,["checkUnderSixWeeks"])):C("",!0),e.isChild()?C("",!0):(i(),V(k,{key:1}))]),d("div",ha,[d("div",ga,[d("div",null,[o(A,{class:"btnText",fill:"solid",onClick:t[1]||(t[1]=t=>e.openWH())},{default:s(()=>[e.checkUnderSixWeeks?(i(),n("span",fa," Enter Weight")):(i(),n("span",ma," Enter Weight/Height")),o(I,{slot:"end",size:"small",icon:e.iconsContent.whiteHeightWeight},null,8,["icon"])]),_:1})]),d("div",null,[o(A,{class:"btnText",fill:"solid",onClick:t[2]||(t[2]=t=>e.openVitalsModal())},{default:s(()=>[t[20]||(t[20]=l(" Enter Other Vitals ",-1)),o(I,{slot:"end",size:"small",icon:e.iconsContent.whiteVitals},null,8,["icon"])]),_:1,__:[20]})])])])]),d("div",null,[e.overDueVaccinesCount>0?(i(),n("div",va,[d("div",_a,[o(B,null,{default:s(()=>[e.overDueVaccinesCount>0?(i(),V(M,{key:0,style:{display:"flex","justify-content":"center",cursor:"pointer"},onClick:e.showMissedVaccines},{default:s(()=>[d("div",ba,[o(I,{slot:"start",icon:e.iconsContent.alertDangerRed},null,8,["icon"]),d("span",xa,u(e.overDueVaccinesCount)+" vaccine(s) overdue",1)])]),_:1},8,["onClick"])):C("",!0)]),_:1})])])):C("",!0),d("div",ya,[d("div",wa,[t[22]||(t[22]=d("div",{class:"vaccinesTitleText"},"Administer Vaccines",-1)),d("div",Da,[t[21]||(t[21]=d("span",{style:{"font-size":"13px"}},"Next Appt. Date: ",-1)),d("b",null,u(e.nextAppointMentDate),1)])])]),d("div",Ia,[d("div",Sa,[o(I,{size:"small",icon:e.iconsContent.greenCalender},null,8,["icon"]),d("div",Va,[t[23]||(t[23]=l(" at ",-1)),d("span",Ca,u(e.current_milestone),1)])]),t[24]||(t[24]=d("div",{class:"vaccinesTitleDate"},"(Swipe left or right for other milestones)",-1))]),o(T),d("div",ka,[d("div",Aa,[e.lastVaccinesGiven.length>0?(i(),n("div",Ma,"Last vaccines given")):C("",!0),d("div",Ba,[o(A,{onClick:t[3]||(t[3]=t=>e.openVH()),style:{color:"#016302"},class:"btnText btnTextWeight",size:"small",fill:"clear"},{default:s(()=>t[25]||(t[25]=[d("span",null,"See full History",-1)])),_:1,__:[25]})])]),e.lastVaccinesGiven.length>0?(i(),V(j,{key:0},{default:s(()=>[o(I,{size:"medium",style:{"margin-bottom":"-6px"},icon:e.iconsContent.calendar},null,8,["icon"]),d("span",Ta,u(e.getLastVaccinesGivenDisplayDate()),1)]),_:1})):C("",!0),e.lastVaccinesGiven.length>0?(i(),V(j,{key:1},{default:s(()=>[o(N,{vaccines:e.lastVaccinesGiven,milestone_status:""},null,8,["vaccines"])]),_:1})):C("",!0)])])]),o(L,{style:{"--offset-x":"-10px"},"is-open":e.popoverOpen,"show-backdrop":!1,event:e.event,onDidDismiss:t[11]||(t[11]=t=>e.popoverOpen=!1)},{default:s(()=>[d("div",null,[o(E,{multiple:!0},{default:s(()=>[o(F,{value:"first","toggle-icon":"",onClick:t[4]||(t[4]=t=>e.openPIM())},{default:s(()=>[o(O,{slot:"header",color:"light"},{default:s(()=>[o(P,null,{default:s(()=>t[26]||(t[26]=[l("Update demographics",-1)])),_:1,__:[26]})]),_:1})]),_:1}),o(F,{value:"first","toggle-icon":"",onClick:t[5]||(t[5]=t=>e.openFollowModal())},{default:s(()=>[o(O,{slot:"header",color:"light"},{default:s(()=>[o(P,null,{default:s(()=>t[27]||(t[27]=[l("Follow up visits",-1)])),_:1,__:[27]})]),_:1})]),_:1}),o(F,{value:"second","toggle-icon":"",onClick:t[6]||(t[6]=t=>e.printVisitSummary())},{default:s(()=>[o(O,{slot:"header",color:"light"},{default:s(()=>[o(P,null,{default:s(()=>t[28]||(t[28]=[l("Print visit summary",-1)])),_:1,__:[28]})]),_:1})]),_:1}),o(F,{value:"third","toggle-icon":"",onClick:t[7]||(t[7]=t=>e.printID())},{default:s(()=>[o(O,{slot:"header",color:"light"},{default:s(()=>[o(P,null,{default:s(()=>t[29]||(t[29]=[l("Print client identifier",-1)])),_:1,__:[29]})]),_:1})]),_:1}),o(F,{value:"fourth"},{default:s(()=>[o(O,{slot:"header",color:"light"},{default:s(()=>[o(P,null,{default:s(()=>t[30]||(t[30]=[l("Update outcome",-1)])),_:1,__:[30]})]),_:1}),d("div",ja,[o(z,null,{default:s(()=>[o(O,null,{default:s(()=>[o(G,{checked:7==e.selectedStatus,value:"active",onIonChange:t[8]||(t[8]=t=>e.updateState(7))},{default:s(()=>t[31]||(t[31]=[l(" Active ",-1)])),_:1,__:[31]},8,["checked"])]),_:1}),o(O,null,{default:s(()=>[o(G,{checked:6==e.selectedStatus,value:"inactive",onIonChange:t[9]||(t[9]=t=>e.updateState(6))},{default:s(()=>t[32]||(t[32]=[l(" Inactive ",-1)])),_:1,__:[32]},8,["checked"])]),_:1}),o(O,null,{default:s(()=>[o(G,{checked:3==e.selectedStatus,value:"died",onIonChange:t[10]||(t[10]=t=>e.updateState(3))},{default:s(()=>t[33]||(t[33]=[l(" Died ",-1)])),_:1,__:[33]},8,["checked"])]),_:1})]),_:1})])]),_:1})]),_:1})])]),_:1},8,["is-open","event"])],64)}],["__scopeId","data-v-029f1008"]]))}}});
