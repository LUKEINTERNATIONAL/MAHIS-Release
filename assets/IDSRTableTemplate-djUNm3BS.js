import{H as h,t as s,I as i}from"./ReportMixin.vue_vue_type_script_lang-Clad0iO4.js";import{S as o,_ as m}from"./index-CbQ91zky.js";import{d as p,O as c,E as u,e as b,f,l as w}from"./vendor-CIsx_7JK.js";const g=p({components:{ReportTable:h},data:function(){return{conditions:[],lessThanFiveYears:" < 5 yrs ",greaterAndEqualFiveYears:" >= 5 yrs ",total:" Total ",tableCssTheme:"opd-report-theme",rows:[],columns:[[s.thTxt("",{colspan:2,sortable:!1,exportable:!1}),s.thTxt("Out-patient Cases",{colspan:3,sortable:!1,exportable:!1})],[s.thTxt(""),s.thTxt("Diseases/Events/Conditions"),s.thTxt("< 5 yrs"),s.thTxt(">= 5 yrs"),s.thTxt("Total")]]}},props:["params","periodDates","quarter","onDrillDown"],methods:{renderResults(){const t=new i().renderResults(this.params);t.length&&(this.conditions=t,this.rows=this.buildRows(t))},onDownload(a=""){const t=new i;let{CSVString:e}=t.getCSVString(this.conditions);e+="\n          Date Created: ".concat(c().format("DD/MMM/YYYY HH:MM:ss"),"\n          MaHIS Version: ").concat(o.getCoreVersion(),"\n          API Version: ").concat(o.getApiVersion(),"\n          Report Period: ").concat(this.periodDates,"\n          Site: ").concat(o.getLocationName(),"\n          Site UUID: ").concat(o.getSiteUUID());const n=new Blob([e],{type:"text/csv;charset=utf-8;"}),l=navigator;if(l.msSaveBlob)l.msSaveBlob(n,"exportFilename");else{const r=document.createElement("a");r.href=window.URL.createObjectURL(n),r.setAttribute("download","".concat(a,".csv")),document.body.appendChild(r),r.click(),document.body.removeChild(r)}},buildRows(a){const t=[];return a.forEach(e=>{t.push([s.td(e.id,{style:{textAlign:"left"}}),s.td(e.name,{style:{textAlign:"left"}}),this.buildRow(this.lessThanFiveYears+"("+e.name+")",e.lessThanFiveYears,e.lessThanFiveYearsPatientIds),this.buildRow(this.greaterAndEqualFiveYears+"("+e.name+")",e.greaterThanEqualFiveYears,e.greaterThanEqualFiveYearsPatientIds),this.buildRow(this.total+"("+e.name+")",e.total,e.totalPatientIds)])}),t},buildRow(a,t,e){return typeof t=="string"?s.td(""):t>0?s.tdLink(t,async()=>this.onDrillDown(a,e)):s.td(0)}},watch:{params:{immediate:!0,handler(){this.renderResults()}}}}),v={class:"my-table",style:{margin:"auto",width:"95%","margin-top":"3%","margin-bottom":"3%"}};function T(a,t,e,n,l,r){const d=u("report-table");return f(),b("div",v,[w(d,{columns:a.columns,rows:a.rows,config:{tableCssTheme:a.tableCssTheme}},null,8,["columns","rows","config"])])}const C=m(g,[["render",T]]);export{C as M};
