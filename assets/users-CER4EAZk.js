import{d as j,L as qe,aN as Fa,bK as Ea,M as Be,aZ as g,a1 as Da,ab as Ha,aO as Na,aP as Ta,cb as Aa,aQ as $a,aR as Oa,aa as w,a9 as L,bh as Ma,ae as Ge,a8 as Se,r as o,bq as Ra,a as Ue,w as Ve,c as je,bV as za,dD as qa,b_ as Ke,H as y,e as G,f as p,l as a,J as t,O as I,k as n,K as P,F as X,P as Ie,Q as v,u as s,az as Ba,m as R,aE as Ga,bg as de,dF as Te,be as ja,I as Ka,G as Ae,E as be,c0 as Qe,a_ as $e,N as Oe,a7 as Qa,bi as Wa,R as Ja,bf as Za,b8 as Xa,bC as Ya}from"./vendor-Bg3Z5m3L.js";import{am as We,U as ne,_ as Y,a0 as et,ae as at,an as we,L as oe,B as Z,ao as tt,ap as lt,aq as Me,a1 as st,ar as Re,as as ze,s as ot,at as nt,K as rt,T as it,r as ut}from"./index-CuK-0HSm.js";import{b as dt}from"./bottomNavBar-CkYRD8Ke.js";import{l as ce}from"./lodash-NJiRuGo9.js";import{N as ct}from"./NavigationMenu-t7QgnYim.js";import{E as pt}from"./EIRreportsStore-DmGBZ2nu.js";import"./apexcharts-DLKd1xD8.js";const ft=j({name:"UserCardList",components:{IonContent:Se,IonPage:Ge,IonGrid:Ma,IonRow:L,IonCol:w,IonCard:Oa,IonCardHeader:$a,IonCardSubtitle:Aa,IonCardTitle:Ta,IonCardContent:Na,IonList:Ha,IonItem:Da,IonLabel:g,bottomNavBar:dt,IonFooter:Be,IonSpinner:Ea,IonText:Fa,IonIcon:qe,editUserModal:We},props:{users:{type:Array,required:!0},filterValue:{type:String,required:!0},search:{type:String,required:!0}},setup(i,{emit:c}){const k=o(!1),C=Ra({page:1,itemsPerPage:10}),D=o(!0),H=o(""),u=o(""),_=o([]),b=o(0);Ue(()=>{V()}),Ve(()=>i.search,(f,x)=>{C.page=1,V()});const V=async()=>{try{D.value=!0;const f=await ne.getAllUsers(C.page,C.itemsPerPage,i.search);b.value=f.count,_.value=f.results.map(x=>({userId:x.user_id,username:x.username,roles:$(x.roles),programs:q(x.programs),gender:x.person.gender,status:x.deactivated_on,firstName:ee(x.person.names),lastName:K(x.person.names)}))}catch(f){H.value="Failed to fetch users. Please try again later.",console.error("Error fetching users:",f)}finally{D.value=!1}},T=je(()=>i.filterValue?_.value.filter(f=>f.username.toLowerCase().includes(i.filterValue.toLowerCase())||f.firstName.toLowerCase().includes(i.filterValue.toLowerCase())||f.lastName.toLowerCase().includes(i.filterValue.toLowerCase())):_.value),S=({page:f,itemsPerPage:x})=>{C.page=f,C.itemsPerPage=x,V()},d=f=>{k.value=!0,u.value=f},A=()=>{k.value=!1,c("reload",k.value)},U=()=>{k.value=!1},$=f=>f.map(x=>x.role),ee=f=>f.length>0?f[f.length-1].given_name:"",K=f=>f.length>0?f[f.length-1].family_name:"",q=f=>f.map(x=>x.name);return{filteredUsers:T,pagination:C,handlePaginationUpdate:S,isLoading:D,error:H,personCircleOutline:Ke,createOutline:qa,appsOutline:za,openUserProfile:d,user_id:u,isPopooverOpen:k,modalClosed:A,softModalClosed:U,_items_:_,totalCount:b}}}),_t={class:"container"};function mt(i,c,k,C,D,H){const u=y("ion-text"),_=y("ion-col"),b=y("ion-row"),V=y("ion-spinner"),T=y("ion-icon"),S=y("ion-card-subtitle"),d=y("ion-card-title"),A=y("ion-card-header"),U=y("ion-label"),$=y("ion-item"),ee=y("ion-list"),K=y("ion-card-content"),q=y("ion-card"),f=y("ion-grid"),x=y("editUserModal"),pe=y("bottomNavBar"),ae=y("ion-footer");return p(),G("div",_t,[a(f,{class:"dynamic-grid"},{default:t(()=>[i.error?(p(),I(b,{key:0},{default:t(()=>[a(_,{size:"12",class:"ion-text-center"},{default:t(()=>[a(u,{color:"danger"},{default:t(()=>[n("p",null,P(i.error),1)]),_:1})]),_:1})]),_:1})):i.isLoading?(p(),I(b,{key:1},{default:t(()=>[a(_,{size:"12",class:"ion-text-center"},{default:t(()=>[a(V,{name:"circular"}),c[0]||(c[0]=n("p",null,"Loading users...",-1))]),_:1})]),_:1})):i._items_.length===0?(p(),I(b,{key:2},{default:t(()=>[a(_,{size:"12",class:"ion-text-center"},{default:t(()=>[...c[1]||(c[1]=[n("p",null,"No users found.",-1)])]),_:1})]),_:1})):(p(),I(b,{key:3,class:"user-cards-row"},{default:t(()=>[(p(!0),G(X,null,Ie(i._items_,z=>(p(),I(_,{"size-xs":"12","size-sm":"6","size-md":"4","size-lg":"3",key:z.userId},{default:t(()=>[a(q,{class:"user-card"},{default:t(()=>[a(A,null,{default:t(()=>[a(S,null,{default:t(()=>[a(T,{icon:i.personCircleOutline,size:"small",style:{"margin-bottom":"-3px"}},null,8,["icon"]),v(" "+P(z.roles.join(", ")),1)]),_:2},1024),a(d,null,{default:t(()=>[v(P(z.firstName)+" "+P(z.lastName)+" ",1),a(T,{onClick:te=>i.openUserProfile(z.userId),icon:i.createOutline,size:"small",class:"edit-icon"},null,8,["onClick","icon"])]),_:2},1024)]),_:2},1024),a(K,null,{default:t(()=>[a(ee,null,{default:t(()=>[a($,null,{default:t(()=>[a(U,null,{default:t(()=>[c[2]||(c[2]=n("h3",null,"User ID",-1)),n("p",null,P(z.userId),1)]),_:2},1024)]),_:2},1024),a($,null,{default:t(()=>[a(U,null,{default:t(()=>[c[3]||(c[3]=n("h3",null,"Username",-1)),n("p",null,P(z.username),1)]),_:2},1024)]),_:2},1024),a($,null,{default:t(()=>[a(U,null,{default:t(()=>[c[4]||(c[4]=n("h3",null,"Gender",-1)),n("p",null,P(z.gender),1)]),_:2},1024)]),_:2},1024),a($,null,{default:t(()=>[a(U,null,{default:t(()=>[n("h3",null,[a(T,{icon:i.appsOutline,size:"small",style:{"margin-bottom":"-3px"}},null,8,["icon"]),c[5]||(c[5]=v(" Programs ",-1))]),n("p",null,P(z.programs.join(", ")),1)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1}))]),_:1}),a(x,{is_open:i.isPopooverOpen,user_id:i.user_id,onClosePopoover:i.softModalClosed,onSave:i.modalClosed},null,8,["is_open","user_id","onClosePopoover","onSave"]),a(ae,{class:"sticky-footer"},{default:t(()=>[a(b,null,{default:t(()=>[a(_,{size:"12",style:{"max-width":"100%"}},{default:t(()=>[a(pe,{totalItems:i.totalCount,currentPage:i.pagination.page,itemsPerPage:i.pagination.itemsPerPage,"onUpdate:pagination":i.handlePaginationUpdate},null,8,["totalItems","currentPage","itemsPerPage","onUpdate:pagination"])]),_:1})]),_:1})]),_:1})])}const vt=Y(ft,[["render",mt],["__scopeId","data-v-c3b99129"]]),gt=j({watch:{},name:"xxxComponent"}),ht=j({...gt,props:{action:{}},emits:["saveEvent"],setup(i,{emit:c}){const k=o(),C=o(),D=o(),H=o(),u=o([]),_=o([]),b=[],V=[],T=[],S=[],d=[],A=["Password must be at least 8 characters long and include at least one uppercase letter, one number, and one special character (@#$%^&+=*!-), without spaces","Password does not match"],U=o(),$=o([]),ee=o("Select location"),K=o(!1),q=o(!1),f=o("Select village(s)"),x=o(!1),pe=o("Select district(s)"),ae=o(!1),z=o("Select TA(s)"),te=o([]),xe=o([]),le=o([]),re=o([]),fe=o(),Pe=o(),_e=o(),ie=o(!0),ue=o(!0),me=et(),Ce=je(()=>me.facilityLocation),ve=o(!0),Je=i;Ue(async()=>{await ua(),await da(),xe.value=await Ua(),te.value=await xa(),te.value.length>0&&await ta()}),Ve(()=>Je.action,async l=>{await ra()}),Ve(()=>ie.value,async l=>{ie.value==!1&&B(u.value)});async function Ze(l){const r={cell_phone_number:Re(h).phone_number,gender:ze(M[0].dataValue.value)};return await new nt(r).update(l)}function Le(l){const e=$.value.find(F=>F.code===l.code),r=e?te.value.filter(F=>F.name===e.district):[];_e.value=r,U.value=l}function Xe(l){T.length=0,l.forEach(e=>{T.push(e.village_id)})}function Ye(l){S.length=0,l.forEach(e=>{S.push(e.traditional_authority_id)}),l.forEach(e=>{Ca(e.district_id)})}function ea(l){d.length=0;const e=[];xe.value.forEach(r=>{l.name.toLowerCase()===r.name.toLowerCase()&&e.push(r)}),e.forEach(r=>{d.push(r.district_id)}),e.forEach(r=>{Ne(r.district_id)}),aa(l)}async function aa(l){$.value=[];try{const e=await oe.getDistrictFacilities(l.name.toLowerCase());$.value.push(...e.facilities)}catch(e){console.error("Error fetching facilities for district ".concat(l.name,":"),e)}U.value=null}async function ta(){try{$.value.push(Ce.value),Le(Ce.value)}catch(l){console.error(l)}}async function la(){try{const l=await ne.getCurrentUser();if(l){const e=l.roles.map(r=>r.role);me.setUserRoles(e),ke("Superuser,Superuser,")==!0&&(ve.value=!1),ke("Superuser,Superuser,")==!1&&(u.value=sa(u.value))}}catch(l){}}function ke(l){return me.getUserRoles().some(r=>r.toLowerCase()===l.toLowerCase())}function sa(l){const e=l.findIndex(r=>typeof r.name=="string"&&r.name.toLowerCase()==="Superuser,Superuser,".toLowerCase());return e!==-1&&l.splice(e,1),l}async function oa(l){l.is_valid==!1&&(O[0].show_error.value=!0,H.value=l.phone,O[0].dataValue.value=l.phone,O[0].is_phone_valid.value=!1),l.is_valid==!0&&(O[0].show_error.value=!1,H.value=l.phone,O[0].dataValue.value=l.phone,O[0].is_phone_valid.value=!0)}async function na(l){ce.isEmpty(l)==!0,ce.isEmpty(l)==!1}async function ra(){const l=Ee(),e=De(),r=we(h),F=He(),Q=ge(),J=ca(),E=fa(),he=_a(),W=pa(),La=ma();if(r==!0&&Q==!0&&F==!0&&l==!0&&e==!0&&J==!0&&E==!0&&he==!0&&W==!0&&La==!0){const ye=Re(h),ka={family_name:ye.last_name,given_name:ye.firstname,username:ye.username,must_append_roles:!1,password:N[0].dataValue.value,programs:V,villages:T,roles:b,gender:ze(M[0].dataValue.value),location_id:U.value.code,phone:O[0].dataValue.value};try{const{user:se}=await ne.createUser(ka);se&&(await Ze(se.person.person_id),Fe(se.user_id))}catch(se){Fe(""),ot(se,2e3)}}}const ia=c;function Fe(l){ia("saveEvent",l)}async function ua(){u.value=await ne.getAllRoles();const l=[];u.value.forEach(e=>{l.push({name:e.role,other:e})}),u.value=l,await la()}function Ee(){const l=[];if(b.length=0,u.value.forEach(e=>{e.selected==!0&&l.push(e)}),l.forEach(e=>{b.push(e.other.role)}),b.length>0)return m[0].show_error.value=!1,!0;if(b.length==0)return m[0].show_error.value=!0,!1}function De(){const l=[];if(V.length=0,_.value.forEach(e=>{e.selected==!0&&l.push(e)}),l.forEach(e=>{V.push(e.other.program_id)}),V.length>0)return m[1].show_error.value=!1,!0;if(V.length==0)return m[1].show_error.value=!0,!1}async function da(){_.value=await at.getAllPrograms();const l=[];_.value.forEach(e=>{l.push({name:e.name,other:e,selected:!1})}),_.value=l}function He(){let l=!1;return M[0].dataValue.value==null&&(M[0].show_error.value=!0),M[0].dataValue.value!=null&&(M[0].show_error.value=!1,l=!0),l}function ca(){if(ce.isEmpty(U.value)==!0)return K.value=!0,!1;if(ce.isEmpty(U.value)==!1)return K.value=!1,!0}function pa(){if(B(u.value)==!1)return!0;if(B(u.value)==!0){if(T.length==0)return q.value=!0,!1;if(T.length>0)return q.value=!1,!0}}function fa(){if(B(u.value)==!1)return!0;if(B(u.value)==!0){if(d.length==0)return x.value=!0,!1;if(d.length>0)return x.value=!1,!0}}function _a(){if(B(u.value)==!1)return!0;if(B(u.value)==!0){if(S.length==0)return ae.value=!0,!1;if(S.length>0)return ae.value=!1,!0}}function ge(){const[l,e]=N.map(E=>E.dataValue.value),r=A[0],F=A[1];return N.forEach(E=>{E.error_message=r,E.show_error.value=!1}),N.map((E,he)=>{const W=!E.dataValue.value;return E.show_error.value=W,W}).some(E=>E)||N.map((E,he)=>{const W=st(E.dataValue.value);return E.show_error.value=!W,W}).some(E=>!E)?!1:l!==e?(N.forEach(E=>{E.error_message=F,E.show_error.value=!0}),!1):!0}const h=[{placeHolder:"username",property_name:"username",dataHandler:ba,dataValue:o(),show_error:o(!1),error_message:"Input required, Only letters allowed"},{placeHolder:"firstname",property_name:"firstname",dataHandler:wa,dataValue:o(),show_error:o(!1),type:"text",error_message:"Input required, Only letters allowed"},{placeHolder:"last name",property_name:"last_name",dataHandler:Va,dataValue:o(),type:"text",show_error:o(!1),error_message:"Input required, Only letters allowed"}];function ma(){if(O[0].is_phone_valid.value==!1)return O[0].show_error.value=!0,!1;if(O[0].is_phone_valid.value==!0)return O[0].show_error.value=!1,!0}const O=[{placeHolder:"phone number",property_name:"phone_number",dataValue:o(),show_error:o(!1),error_message:"Input required, input is invalid",is_phone_valid:o(!1)}],N=[{placeHolder:"new password",dataHandler:Ia,dataValue:o(),show_error:o(!1),error_message:A[0]},{placeHolder:"repeat password",dataHandler:Sa,dataValue:o(),show_error:o(!1),error_message:A[0]}],m=[{multi_Selection:!0,show_list_label:!0,unqueId:"qwerty_8_3698",name_of_list:"Roles",placeHolder:"Search for a field",items:[],listUpdatedFN:va,listFilteredFN:()=>{},searchTextFN:()=>{},use_internal_filter:!0,show_error:o(!1),error_message:"please select a Role",disabled:o(!1)},{multi_Selection:!0,show_list_label:!0,unqueId:"qwerty_8_562",name_of_list:"Programs",placeHolder:"Search for programs",items:[],listUpdatedFN:ga,listFilteredFN:()=>{},searchTextFN:()=>{},use_internal_filter:!0,show_error:o(!1),error_message:"please select a Program",disabled:o(!1)}];function va(l){u.value=l,B(u.value),Ee()}function B(l){const e=["HSA","Health Surveillance"];q.value=!1;let r=!1;return l.forEach(F=>{(F==null?void 0:F.selected)==!0&&e.includes(F==null?void 0:F.name)&&(ue.value=!1,r=!0)}),r==!1&&(q.value=!1,ue.value=!0),r}function ga(l){_.value=l,_.value.forEach(e=>{e.selected==!0}),De()}const M=[{labels:["Male","Female"],selectedOption:o(null),dataHandler:ha,dataValue:o(),show_error:o(!1),error_message:"Please make a selection"}];function ha(l){try{M[0].dataValue.value=l.label}catch(e){M[0].dataValue.value=void 0}He()}async function ya(l){try{if(l.length>0){const e=await ne.doesUsernameExist(l);e.exists==!0?(h[0].show_error.value=!0,h[0].error_message="Username already exists"):e.exists==!1&&(h[0].show_error.value=!1,h[0].error_message="Input required, Only letters allowed")}}catch(e){console.error(e)}}async function ba(l){const e=l.target.value;h[0].dataValue.value=e,await ya(e)}function wa(l){const e=l.target.value;h[1].dataValue.value=e,we([h[1]])}function Va(l){const e=l.target.value;h[2].dataValue.value=e,we([h[2]])}function Ia(l){const e=l.target.value;N[0].dataValue.value=e,ge()}function Sa(l){const e=l.target.value;N[1].dataValue.value=e,ge()}async function Ua(){const l=[];for(let e of[1,2,3]){const r=await oe.getDistricts(e);l.push(...r)}return l.forEach(e=>{d.push(e.district_id)}),l.forEach(e=>{Ne(e.district_id)}),l}async function xa(){return(await oe.getFacilityDistricts()).districts}async function Ne(l,e){re.value=[];var r=await oe.getTraditionalAuthorities(l,"");const F=r.map((Q,J)=>({...Q,assigned_id:J}));re.value=re.value.concat(F)}async function Pa(l,e){le.value=[];var r=await oe.getVillages(l,"");const F=r.map((Q,J)=>({...Q,assigned_id:J}));le.value=le.value.concat(F),le.value.length>0&&(ie.value=!1)}function Ca(l){ie.value=!0,fe.value=[],Pa(l)}return(l,e)=>(p(),G(X,null,[a(s(L),null,{default:t(()=>[a(s(w),{size:"12","size-md":"6"},{default:t(()=>[a(s(L),null,{default:t(()=>[a(s(w),null,{default:t(()=>[a(s(g),{style:{margin:"10px","margin-left":"0px","margin-top":"0px","margin-bottom":"10px",color:"grey"}},{default:t(()=>[...e[12]||(e[12]=[v("First name",-1),n("span",{style:{color:"#b42318"}},"*",-1)])]),_:1}),a(Z,{placeholder:h[1].placeHolder,icon:s(Ba),inputValue:C.value,"onUpdate:inputValue":h[1].dataHandler},null,8,["placeholder","icon","inputValue","onUpdate:inputValue"]),n("div",null,[h[1].show_error.value?(p(),I(s(g),{key:0,class:"error-label"},{default:t(()=>[v(P(h[1].error_message),1)]),_:1})):R("",!0)])]),_:1})]),_:1}),a(s(L),null,{default:t(()=>[a(s(w),null,{default:t(()=>[a(s(g),{style:{margin:"10px","margin-left":"0px","margin-top":"0px","margin-bottom":"10px",color:"grey"}},{default:t(()=>[...e[13]||(e[13]=[v("Last name",-1),n("span",{style:{color:"#b42318"}},"*",-1)])]),_:1}),a(Z,{placeholder:h[2].placeHolder,icon:s(Ga),inputValue:D.value,"onUpdate:inputValue":h[2].dataHandler},null,8,["placeholder","icon","inputValue","onUpdate:inputValue"]),n("div",null,[h[2].show_error.value?(p(),I(s(g),{key:0,class:"error-label"},{default:t(()=>[v(P(h[2].error_message),1)]),_:1})):R("",!0)])]),_:1})]),_:1}),a(s(L),null,{default:t(()=>[a(s(w),null,{default:t(()=>[a(s(g),{style:{margin:"10px","margin-left":"0px","margin-top":"0px","margin-bottom":"10px",color:"grey"}},{default:t(()=>[...e[14]||(e[14]=[v("Username",-1),n("span",{style:{color:"#b42318"}},"*",-1)])]),_:1}),a(Z,{placeholder:h[0].placeHolder,icon:s(Ke),inputValue:k.value,"onUpdate:inputValue":h[0].dataHandler},null,8,["placeholder","icon","inputValue","onUpdate:inputValue"]),n("div",null,[h[0].show_error.value?(p(),I(s(g),{key:0,class:"error-label"},{default:t(()=>[v(P(h[0].error_message),1)]),_:1})):R("",!0)])]),_:1})]),_:1}),a(s(L),null,{default:t(()=>[a(s(w),null,{default:t(()=>[a(s(g),{style:{margin:"10px","margin-left":"0px","margin-top":"0px","margin-bottom":"10px",color:"grey"}},{default:t(()=>[...e[15]||(e[15]=[v("Gender",-1),n("span",{style:{color:"#b42318"}},"*",-1)])]),_:1}),a(tt,{labels:M[0].labels,"selected-opt":M[0].selectedOption.value,onSelectionEvent:M[0].dataHandler},null,8,["labels","selected-opt","onSelectionEvent"]),n("div",null,[M[0].show_error.value?(p(),I(s(g),{key:0,class:"error-label"},{default:t(()=>[v(P(M[0].error_message),1)]),_:1})):R("",!0)])]),_:1})]),_:1}),a(s(L),null,{default:t(()=>[a(s(w),null,{default:t(()=>[a(lt,{onValidateInput:oa}),n("div",null,[O[0].show_error.value?(p(),I(s(g),{key:0,class:"error-label"},{default:t(()=>[v(P(O[0].error_message),1)]),_:1})):R("",!0)])]),_:1})]),_:1})]),_:1}),a(s(w),{size:"12","size-md":"6"},{default:t(()=>[a(s(L),null,{default:t(()=>[(p(),I(s(w),{key:0},{default:t(()=>[a(s(g),{style:{margin:"10px","margin-left":"0px","margin-top":"0px","margin-bottom":"10px",color:"grey"}},{default:t(()=>[...e[16]||(e[16]=[v("District(s)",-1),n("span",{style:{color:"#b42318"}},"*",-1)])]),_:1}),a(s(de),{modelValue:_e.value,"onUpdate:modelValue":[e[0]||(e[0]=r=>_e.value=r),e[1]||(e[1]=r=>ea(r))],multiple:!1,taggable:!1,"hide-selected":!0,"close-on-select":!0,openDirection:"bottom","tag-placeholder":"Find and select District(s)",placeholder:"Find and select District(s)",selectLabel:"",label:"name",searchable:!0,onSearchChange:e[2]||(e[2]=()=>{}),"track-by":"name",options:te.value,disabled:ve.value},null,8,["modelValue","options","disabled"]),n("div",null,[x.value?(p(),I(s(g),{key:0,class:"error-label"},{default:t(()=>[v(P(pe.value),1)]),_:1})):R("",!0)])]),_:1}))]),_:1}),a(s(L),null,{default:t(()=>[a(s(w),null,{default:t(()=>[a(s(g),{style:{margin:"10px","margin-left":"0px","margin-top":"0px","margin-bottom":"10px",color:"grey"}},{default:t(()=>[...e[17]||(e[17]=[v("Facility name",-1),n("span",{style:{color:"#b42318"}},"*",-1)])]),_:1}),a(s(de),{modelValue:U.value,"onUpdate:modelValue":[e[3]||(e[3]=r=>U.value=r),e[4]||(e[4]=r=>Le(r))],multiple:!1,taggable:!1,"hide-selected":!0,"close-on-select":!0,openDirection:"bottom","tag-placeholder":"Find and select facility name",placeholder:"Find and select facility name",selectLabel:"",label:"name",searchable:!0,disabled:ve.value,onSearchChange:e[5]||(e[5]=r=>na(r)),"track-by":"code",options:$.value},null,8,["modelValue","disabled","options"]),n("div",null,[K.value?(p(),I(s(g),{key:0,class:"error-label"},{default:t(()=>[v(P(ee.value),1)]),_:1})):R("",!0)])]),_:1})]),_:1}),a(s(L),null,{default:t(()=>[a(s(w),null,{default:t(()=>[a(s(g),{style:{margin:"10px","margin-left":"0px","margin-top":"0px","margin-bottom":"10px",color:"grey"}},{default:t(()=>[...e[18]||(e[18]=[v("TA(s)",-1),n("span",{style:{color:"#b42318"}},"*",-1)])]),_:1}),a(s(de),{modelValue:Pe.value,"onUpdate:modelValue":[e[6]||(e[6]=r=>Pe.value=r),e[7]||(e[7]=r=>Ye(r))],multiple:!0,taggable:!1,"hide-selected":!0,"close-on-select":!0,openDirection:"bottom","tag-placeholder":"Find and select Traditional Authority (TA)",placeholder:"Find and select Traditional Authority (TA)",selectLabel:"",label:"name",searchable:!0,onSearchChange:e[8]||(e[8]=()=>{}),"track-by":"assigned_id",options:re.value,disabled:ue.value},null,8,["modelValue","options","disabled"]),n("div",null,[ae.value?(p(),I(s(g),{key:0,class:"error-label"},{default:t(()=>[v(P(z.value),1)]),_:1})):R("",!0)])]),_:1})]),_:1}),a(s(L),null,{default:t(()=>[a(s(w),null,{default:t(()=>[a(s(g),{style:{margin:"10px","margin-left":"0px","margin-top":"0px","margin-bottom":"10px",color:"grey"}},{default:t(()=>[...e[19]||(e[19]=[v("Village(s)",-1),n("span",{style:{color:"#b42318"}},"*",-1)])]),_:1}),a(s(de),{modelValue:fe.value,"onUpdate:modelValue":[e[9]||(e[9]=r=>fe.value=r),e[10]||(e[10]=r=>Xe(r))],multiple:!0,taggable:!1,"hide-selected":!0,"close-on-select":!0,openDirection:"bottom","tag-placeholder":"Find and select village(s)",placeholder:"Find and select village(s)",selectLabel:"",label:"name",searchable:!0,onSearchChange:e[11]||(e[11]=()=>{}),"track-by":"assigned_id",options:le.value,disabled:ue.value},null,8,["modelValue","options","disabled"]),n("div",null,[q.value?(p(),I(s(g),{key:0,class:"error-label"},{default:t(()=>[v(P(f.value),1)]),_:1})):R("",!0)])]),_:1})]),_:1})]),_:1})]),_:1}),a(s(L),null,{default:t(()=>[a(s(w),{size:"12","size-md":"6"},{default:t(()=>[a(s(L),null,{default:t(()=>[a(s(w),null,{default:t(()=>[a(s(w),null,{default:t(()=>[a(s(g),{style:{margin:"10px","margin-left":"0px","margin-top":"0px",color:"grey"}},{default:t(()=>[...e[20]||(e[20]=[v("Role(s)",-1),n("span",{style:{color:"#b42318"}},"*",-1)])]),_:1}),a(Me,{multiSelection:m[0].multi_Selection,show_label:m[0].show_list_label,uniqueId:m[0].unqueId,name_of_list:m[0].name_of_list,choose_place_holder:m[0].placeHolder,"items_-list":u.value,use_internal_filter:m[0].use_internal_filter,disabled:m[0].disabled.value,onItemListUpDated:m[0].listUpdatedFN,onItemListFiltered:m[0].listFilteredFN,onItemSearchText:m[0].searchTextFN},null,8,["multiSelection","show_label","uniqueId","name_of_list","choose_place_holder","items_-list","use_internal_filter","disabled","onItemListUpDated","onItemListFiltered","onItemSearchText"]),n("div",null,[m[0].show_error.value?(p(),I(s(g),{key:0,class:"error-label",style:{"margin-top":"-10px"}},{default:t(()=>[v(P(m[0].error_message),1)]),_:1})):R("",!0)])]),_:1})]),_:1})]),_:1}),a(s(L),null,{default:t(()=>[a(s(w),null,{default:t(()=>[a(s(g),{style:{margin:"10px","margin-left":"0px","margin-top":"0px",color:"grey"}},{default:t(()=>[...e[21]||(e[21]=[v("Program(s)",-1),n("span",{style:{color:"#b42318"}},"*",-1)])]),_:1}),a(Me,{multiSelection:m[1].multi_Selection,show_label:m[1].show_list_label,uniqueId:m[1].unqueId,name_of_list:m[1].name_of_list,choose_place_holder:m[1].placeHolder,"items_-list":_.value,use_internal_filter:m[1].use_internal_filter,disabled:m[1].disabled.value,onItemListUpDated:m[1].listUpdatedFN,onItemListFiltered:m[1].listFilteredFN,onItemSearchText:m[1].searchTextFN},null,8,["multiSelection","show_label","uniqueId","name_of_list","choose_place_holder","items_-list","use_internal_filter","disabled","onItemListUpDated","onItemListFiltered","onItemSearchText"]),n("div",null,[m[1].show_error.value?(p(),I(s(g),{key:0,class:"error-label"},{default:t(()=>[v(P(m[1].error_message),1)]),_:1})):R("",!0)])]),_:1}),a(s(w))]),_:1}),a(s(L),null,{default:t(()=>[a(s(w),null,{default:t(()=>[a(s(g),{style:{margin:"10px","margin-left":"0px","margin-top":"0px","margin-bottom":"10px",color:"grey"}},{default:t(()=>[...e[22]||(e[22]=[v("Password",-1),n("span",{style:{color:"#b42318"}},"*",-1)])]),_:1}),a(Z,{placeholder:N[0].placeHolder,icon:s(Te),inputValue:N[0].dataValue.value,"onUpdate:inputValue":N[0].dataHandler},null,8,["placeholder","icon","inputValue","onUpdate:inputValue"]),n("div",null,[N[0].show_error.value?(p(),I(s(g),{key:0,class:"error-label"},{default:t(()=>[v(P(N[0].error_message),1)]),_:1})):R("",!0)])]),_:1})]),_:1}),a(s(L),null,{default:t(()=>[a(s(w),null,{default:t(()=>[a(s(g),{style:{margin:"10px","margin-left":"0px","margin-top":"0px","margin-bottom":"10px",color:"grey"}},{default:t(()=>[...e[23]||(e[23]=[v("Repeat password",-1),n("span",{style:{color:"#b42318"}},"*",-1)])]),_:1}),a(Z,{placeholder:N[1].placeHolder,icon:s(Te),inputValue:N[1].dataValue.value,"onUpdate:inputValue":N[1].dataHandler},null,8,["placeholder","icon","inputValue","onUpdate:inputValue"]),n("div",null,[N[1].show_error.value?(p(),I(s(g),{key:0,class:"error-label"},{default:t(()=>[v(P(N[1].error_message),1)]),_:1})):R("",!0)])]),_:1})]),_:1})]),_:1}),a(s(w),{size:"12","size-md":"6"})]),_:1})],64))}}),yt=Y(ht,[["__scopeId","data-v-731a8d5a"]]),bt={style:{display:"flex","align-items":"center"}},wt={style:{"font-weight":"400","font-size":"19px"}},Vt={style:{display:"flex","align-items":"center"}},It={class:""},St={class:"center text_12"},Ut={style:{"font-weight":"400","font-size":"20px"}},xt={style:{display:"flex","align-items":"center"}},Pt=j({watch:{},name:"xxxComponent"}),Ct=j({...Pt,props:{is_open:{},user_id:{}},emits:["closePopoover","updated","reload"],setup(i,{emit:c}){const k=o(""),C=o(!1),D=o(),H=c;function u(){k.value=T(100,3)}function _(){Ja.dismiss()}function b(){H("reload","")}function V(S){D.value=S,S&&rt("User created successfully with id: "+D),H("updated",S),_()}function T(S,d){const A=U=>{const $=U==="number"?48:U==="uppercase"?65:97;return String.fromCharCode(Math.floor(Math.random()*(U==="number"?10:26))+$)};return Array.from({length:S},()=>Array.from({length:d},()=>A(["number","uppercase","lowercase"][Math.floor(Math.random()*3)])).join(""))}return(S,d)=>{const A=y("ion-icon"),U=y("ion-row");return p(),G(X,null,[a(s(ja),{"is-open":S.is_open,"show-backdrop":!0,onDidDismiss:d[1]||(d[1]=$=>S.$emit("closePopoover",!1)),"keyboard-close":!1},{default:t(()=>[a(s(Ka),null,{default:t(()=>[a(s(Ae),null,{default:t(()=>[a(s(be),null,{default:t(()=>[n("div",bt,[a(A,{icon:s(Qe),class:"sub-menu-icon"},null,8,["icon"]),d[3]||(d[3]=n("b",{style:{"margin-left":"6px"}},"Add User",-1))])]),_:1}),a(s($e),{slot:"end"},{default:t(()=>[a(s(be),null,{default:t(()=>[a(s(Oe),{onClick:d[0]||(d[0]=$=>S.$emit("closePopoover",!1)),fill:"solid"},{default:t(()=>[n("span",wt,[n("div",Vt,[a(A,{icon:s(Qa),slot:"start",class:"sub-menu-icon"},null,8,["icon"]),d[4]||(d[4]=n("span",{style:{"margin-left":"6px"}},"Close",-1))])])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),a(s(Se),{class:"ion-padding"},{default:t(()=>[n("div",It,[n("div",St,[a(U,null,{default:t(()=>[a(s(w),null,{default:t(()=>[a(yt,{user_id:D.value,action:k.value,onSaveEvent:V},null,8,["user_id","action"])]),_:1})]),_:1})])])]),_:1}),a(s(Be),{translucent:!0},{default:t(()=>[a(s(Ae),null,{default:t(()=>[a(s($e),{slot:"end"},{default:t(()=>[a(s(be),null,{default:t(()=>[a(s(Oe),{onClick:u,fill:"solid",color:"success"},{default:t(()=>[n("span",Ut,[n("div",xt,[a(A,{icon:s(Wa),slot:"start",class:"sub-menu-icon"},null,8,["icon"]),d[5]||(d[5]=n("span",{style:{"margin-left":"6px"}},"Save",-1))])])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["is-open"]),a(We,{is_open:C.value,user_id:D.value,onClosePopoover:d[2]||(d[2]=$=>C.value=!1),onUpdated:b},null,8,["is_open","user_id"])],64)}}}),Lt=Y(Ct,[["__scopeId","data-v-79045015"]]),kt=j({__name:"usersTemplate",props:{items:{},search_fields:{}},emits:["reload","closeModal"],setup(i,{emit:c}){const k=o(""),C=o(!1),D=o(""),H={name:"add user",show:!0,fn:_,icon:Qe,show_icon:!0},u=[{placeHolder:"Search for username",dataHandler:b,dataValue:o(),show_error:o(!1),error_message:"Please provide a reason"}];function _(){C.value=!0,D.value=""}function b(d){k.value=d.target.value}function V(d){S("reload",d)}function T(d){S("closeModal",d)}const S=c;return(d,A)=>(p(),G(X,null,[a(s(L),{class:"search-container"},{default:t(()=>[a(s(L),{class:"search-row"},{default:t(()=>[a(s(w),{class:"input-col"},{default:t(()=>[a(Z,{placeholder:u[0].placeHolder,icon:s(Za),inputValue:u[0].dataValue.value,"onUpdate:inputValue":u[0].dataHandler,minHeight:50,"-inner-action-btn-propeties":H,"onUpdate:InnerActionBtnPropetiesAction":H.fn},null,8,["placeholder","icon","inputValue","onUpdate:inputValue","onUpdate:InnerActionBtnPropetiesAction"])]),_:1})]),_:1})]),_:1}),a(s(L),null,{default:t(()=>[a(vt,{users:d.items,filterValue:k.value,onReload:T,search:k.value},null,8,["users","filterValue","search"])]),_:1}),a(Lt,{is_open:C.value,user_id:D.value,onClosePopoover:A[0]||(A[0]=U=>C.value=!1),onUpdated:V},null,8,["is_open","user_id"])],64))}}),Ft=Y(kt,[["__scopeId","data-v-91ec2592"]]),Et=j({name:"TableSkeletonLoader"}),Dt={class:"skeleton-wrapper"},Ht={class:"cards-grid"},Nt={class:"card-content"};function Tt(i,c,k,C,D,H){return p(),G("div",Dt,[c[2]||(c[2]=Xa('<div class="search-bar" data-v-d6f00683><div class="search-container" data-v-d6f00683><div class="search-label skeleton-text" data-v-d6f00683></div><div class="search-chip" data-v-d6f00683></div><div class="add-button" data-v-d6f00683></div></div></div>',1)),n("div",Ht,[(p(),G(X,null,Ie(6,u=>n("div",{key:"card-".concat(u),class:"skeleton-card"},[c[1]||(c[1]=n("div",{class:"card-header"},[n("div",{class:"role-text small-skeleton"}),n("div",{class:"name-text large-skeleton"})],-1)),n("div",Nt,[(p(),G(X,null,Ie(4,_=>n("div",{class:"info-row",key:"field-".concat(_)},[...c[0]||(c[0]=[n("div",{class:"label-skeleton"},null,-1),n("div",{class:"value-skeleton"},null,-1)])])),64))])])),64))])])}const At=Y(Et,[["render",Tt],["__scopeId","data-v-d6f00683"]]),$t=j({name:"Users",components:{IonContent:Se,IonPage:Ge,IonRow:L,IonCol:w,IonIcon:qe,Toolbar:it,usersTemplate:Ft,NavigationMenu:ct,TableSkeletonLoader:At},setup(){const i=o(!1),c=o(!0),k=o([{value:"username",name:"username",selected:!0}]),C=o(""),D=o([]);Ue(async()=>{b(),await H()});async function H(){c.value=!1}function u(V){V==!1&&setTimeout(()=>{H()},500)}function _(V){ut.push(V)}function b(){pt().setNavigationPayload("Manage Users",!0,!1,"/","home","")}return{isPopooverOpen:i,user_id:C,_items_:D,search_fields_:k,nav:_,chevronBackOutline:Ya,initNavData:b,getUsers:H,isLoading:c,closeModal:u}},watch:{$route:{async handler(i){i.name=="users"&&this.initNavData(),await this.getUsers()},deep:!0}}});function Ot(i,c,k,C,D,H){const u=y("NavigationMenu"),_=y("TableSkeletonLoader"),b=y("usersTemplate"),V=y("ion-content"),T=y("ion-page");return p(),I(T,null,{default:t(()=>[a(u),a(V,{fullscreen:!0},{default:t(()=>[i.isLoading?(p(),I(_,{key:0})):(p(),I(b,{key:1,items:i._items_,search_fields:i.search_fields_,onReload:i.getUsers,onCloseModal:i.closeModal},null,8,["items","search_fields","onReload","onCloseModal"]))]),_:1})]),_:1})}const Kt=Y($t,[["render",Ot],["__scopeId","data-v-15fbe288"]]);export{Kt as default};
