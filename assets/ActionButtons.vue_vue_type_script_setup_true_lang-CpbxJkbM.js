import{I as B,o as f,ag as Y,S as D,t as $,ah as H,ai as z,aj as j,_ as v,p as e,s as V,U as K,f as W}from"./index-kdr2EpoV.js";import{d as C,r as P,c as h,a as F,y as I,f as R,z as l,l as t,u as o,S as X,T as J,A as O,B as E,I as T,dn as Z,X as N,a9 as Q,e as A,F as w,L,aa as q,ab as b,bO as ee,D as se,V as ae,W as oe,af as re,w as S,E as k,bh as ne,k as g,$ as te,b1 as ce,cC as ie,m as le,cB as y,co as _e}from"./vendor-CKGLxZg5.js";import{m as G}from"./Arrays-CfBll-2n.js";const ue=["onClick"],Re={key:1,class:"no-data-container"},pe=C({__name:"ActivitySelectionModal",setup(d){const _=B(),c=P("ART_activities"),s=P([]),u=h(()=>s.value.filter(r=>r.isChecked));async function p(r){switch(r.toLowerCase()){case"ncd program":s.value=G(j),c.value="NCD_activities";break;case"opd program":s.value=G(z),c.value="OPD_activities";break;case"hiv program":s.value=G(H,"name","workflowID"),c.value="ART_activities";break;default:s.value=[];break}}async function a(){const r=await D.getJson("user_properties",{user_id:_.getUserId(),property:c.value});r&&(s.value=s.value.map(n=>(r.property_value.search(n.value)>=0&&(n.isChecked=!0),n)))}async function i(){var r;try{return await D.postJson("user_properties",{property:c.value,property_value:u.value.map(n=>n.value).join(",")}),N.dismiss(u.value)}catch(n){console.error(n),$((r=n.message)!=null?r:"Failed to save selected activities")}}return F(()=>{var r,n;console.log("USER ID",_.getUserId()),console.log("USER PROGRAM",(r=f().activeProgram)==null?void 0:r.name),p((n=f().activeProgram)==null?void 0:n.name),a()}),(r,n)=>(R(),I(o(re),null,{default:l(()=>[t(o(X),{style:{display:"flex","justify-content":"space-between"},color:"success"},{default:l(()=>[t(o(J),{class:"modalTitle"},{default:l(()=>[O("Select Program Activites (selected: "+E(u.value.length)+")",1)]),_:1}),t(o(T),{onClick:o(N).dismiss,style:{"padding-top":"10px","padding-right":"10px"},icon:o(Z)},null,8,["onClick","icon"])]),_:1}),t(o(Q),{fullscreen:!0},{default:l(()=>[s.value.length?(R(),I(Y,{key:0,items:s.value,numberOfColumns:2},{default:l(({entries:U})=>[(R(!0),A(w,null,L(U,(m,x)=>(R(),A("div",{class:"his-card clickable",key:x,onClick:M=>m.isChecked=!m.isChecked},[t(o(q),null,{default:l(()=>[t(o(b),{size:"1"},{default:l(()=>[t(o(ee),{modelValue:m.isChecked,"onUpdate:modelValue":M=>m.isChecked=M,onClick:M=>m.isChecked=!m.isChecked},null,8,["modelValue","onUpdate:modelValue","onClick"])]),_:2},1024),t(o(b),{class:"ion-text-center his-md-text"},{default:l(()=>[O(E(m.label),1)]),_:2},1024)]),_:2},1024)],8,ue))),128))]),_:1},8,["items"])):(R(),A("div",Re,[t(o(se),null,{default:l(()=>n[0]||(n[0]=[O("No activities available for this program")])),_:1,__:[0]})]))]),_:1}),t(o(ae),{class:"ion-padding ion-text-end"},{default:l(()=>[t(o(oe),{onClick:i},{default:l(()=>n[1]||(n[1]=[O("Save")])),_:1,__:[1]})]),_:1})]),_:1}))}}),de=v(pe,[["__scopeId","data-v-9da1f8f3"]]),Ae={class:"search-wrapper"},me={__name:"SearchField",props:{modelValue:String,placeholder:String},emits:["update:modelValue"],setup(d,{emit:_}){const c=a=>{p.value=a.target.value},s=d,u=_,p=P(s.modelValue||"");return S(p,a=>{u("update:modelValue",a)}),S(()=>s.modelValue,a=>{p.value=a}),(a,i)=>{const r=k("ion-icon"),n=k("ion-input");return R(),A("div",Ae,[t(r,{icon:o(ne),class:"search-icon","aria-hidden":"true"},null,8,["icon"]),t(n,{value:p.value,onIonInput:c,class:"search-input",type:"text",placeholder:d.placeholder},null,8,["value","placeholder"])])}}},ge=v(me,[["__scopeId","data-v-b69152ed"]]),Pe={class:"program-buttons-grid"},Oe=["onClick"],Ie=["src"],ve={class:"program-name"},Ce=C({__name:"ProgramGrid",props:{programs:{},onSelect:{type:Function}},setup(d){return(_,c)=>(R(),A("div",Pe,[(R(!0),A(w,null,L(_.programs,(s,u)=>(R(),A("div",{key:u,class:"program-tile",onClick:()=>_.onSelect(s)},[g("div",{class:"program-icon-container",style:te({backgroundColor:s.color})},[g("img",{src:s.icon,alt:"",class:"program-icon"},null,8,Ie)],4),g("div",ve,E(s.name.replace(/program/i,"").trim()),1)],8,Oe))),128))]))}}),Me=v(Ce,[["__scopeId","data-v-d36db6ec"]]),Ge={[e.HIV_PROGRAM]:"/assets/icon/program_icons/ribbon.png",[e.TB_PROGRAM]:"/assets/icon/program_icons/tb.png",[e.EARLY_INFANT_DIAGNOSIS_PROGRAM]:"/assets/icon/program_icons/baby-0203_alt.png",[e.MDR_TB_PROGRAM]:"/assets/icon/program_icons/tb.png",[e.KAPOSIS_SARCOMA_PROGRAM]:"/assets/icon/program_icons/lymph-nodes.png",[e.CHRONIC_CARE_PROGRAM]:"/assets/icon/program_icons/intensive-care_unit.png",[e.MATERNITY_PROGRAM]:"/assets/icon/program_icons/pregnant.png",[e.ANC_PROGRAM]:"/assets/icon/program_icons/ancv.png",[e.DIABETES_PROGRAM]:"/assets/icon/program_icons/diabetes.png",[e.OPD_PROGRAM]:"/assets/icon/program_icons/outpatient.png",[e.IPD_PROGRAM]:"/assets/icon/program_icons/observation.png",[e.UNDER_5_PROGRAM]:"/assets/icon/program_icons/boy-0105y.png",[e.CIVIL_REGISTRATION_PROGRAM]:"/assets/icon/program_icons/register-book.png",[e.HTC_PROGRAM]:"/assets/icon/program_icons/blood-pressure.png",[e.ANC_CONNECT_PROGRAM]:"/assets/icon/program_icons/ancv.png",[e.HYPERTENSION_PROGRAM]:"/assets/icon/program_icons/blood-pressure.png",[e.IPT_PROGRAM]:"/assets/icon/program_icons/observation.png",[e.LABORATORY_PROGRAM]:"/assets/icon/program_icons/biochemistry-laboratory.png",[e.CXCA_PROGRAM]:"/assets/icon/program_icons/cervical-cancer.png",[e.RADIOLOGY_PROGRAM]:"/assets/icon/program_icons/radiology.png",[e.PATIENT_REGISTRATION_PROGRAM]:"/assets/icon/program_icons/human-resoruce.png",[e.AETC_PROGRAM]:"/assets/icon/program_icons/accident-and_emergency.png",[e.SPINE_PROGRAM]:"/assets/icon/program_icons/intensive-care_unit.png",[e.NCD_PROGRAM]:"/assets/icon/program_icons/autoimmune-disease.png",[e.IMMUNIZATION_PROGRAM]:"/assets/icon/program_icons/syringe-vaccine.png",[e.LABOUR_AND_DELIVERY_PROGRAM]:"/assets/icon/program_icons/fetus.png"},fe=d=>{switch(d){case e.HIV_PROGRAM:return"#F4A6A6";case e.TB_PROGRAM:return"#E6B89C";case e.EARLY_INFANT_DIAGNOSIS_PROGRAM:return"#FFF2A6";case e.MDR_TB_PROGRAM:return"#D2A679";case e.KAPOSIS_SARCOMA_PROGRAM:return"#D8B4E2";case e.CHRONIC_CARE_PROGRAM:return"#C7EFCF";case e.MATERNITY_PROGRAM:return"#FFCCE5";case e.ANC_PROGRAM:return"#FFD6DD";case e.DIABETES_PROGRAM:return"#D6F5D6";case e.OPD_PROGRAM:return"#B3E5FC";case e.IPD_PROGRAM:return"#FFF9C4";case e.UNDER_5_PROGRAM:return"#FFB3B3";case e.CIVIL_REGISTRATION_PROGRAM:return"#E0E0E0";case e.HTC_PROGRAM:return"#B2DFDB";case e.ANC_CONNECT_PROGRAM:return"#FFD6DD";case e.HYPERTENSION_PROGRAM:return"#B2DFDB";case e.IPT_PROGRAM:return"#FFF9C4";case e.LABORATORY_PROGRAM:return"#E6B89C";case e.CXCA_PROGRAM:return"#FFF2A6";case e.RADIOLOGY_PROGRAM:return"#CCCCCC";case e.PATIENT_REGISTRATION_PROGRAM:return"#FFF9C4";case e.AETC_PROGRAM:return"#FFB199";case e.SPINE_PROGRAM:return"#C7EFCF";case e.NCD_PROGRAM:return"#D6F5D6";case e.IMMUNIZATION_PROGRAM:return"#FFF2A6";case e.LABOUR_AND_DELIVERY_PROGRAM:return"#E6D6F3";default:return"#F5F5DC"}},he=[e.VHW_PROGRAM,e.TRIAGE_PROGRAM,e.VMMC_PROGRAM,e.PNC_PROGRAM,e.KAPOSIS_SARCOMA_PROGRAM,e.CIVIL_REGISTRATION_PROGRAM,e.DIABETES_PROGRAM,e.LABOUR_AND_DELIVERY_PROGRAM],Ee={id:"container"},Te={class:"centered-content"},Se=C({__name:"ModulePicker",setup(d){const _=f(),c=P(""),s=h(()=>_.authorizedPrograms.filter(a=>!he.includes(a.program_id)).map(a=>({...a,icon:Ge[a.program_id]||null,color:fe(a.program_id)}))),u=h(()=>s.value.filter(a=>a.name.toLowerCase().includes(c.value.toLowerCase())));function p(a){_.setActiveProgram(a),V.hide()}return F(()=>{s.value.length===1&&p(s.value[0])}),(a,i)=>(R(),A("div",Ee,[i[1]||(i[1]=g("h1",null,[g("strong",null,"Services")],-1)),g("div",Te,[t(ge,{modelValue:c.value,"onUpdate:modelValue":i[0]||(i[0]=r=>c.value=r),placeholder:"Search..."},null,8,["modelValue"]),t(Me,{programs:u.value,onSelect:p},null,8,["programs"])])]))}}),Fe=v(Se,[["__scopeId","data-v-fecb6da6"]]),ke=C({__name:"ActionButtons",setup(d){const _=B(),{user_ID:c}=ce(_),s=P(!1);F(async()=>{try{await u()}catch(i){}}),S(()=>c.value,async()=>{await u()},{deep:!0});const u=async()=>{try{const i=await K.getUserAssignAndUnassignProgramActivities(c.value);s.value=i!==null?i:!1}catch(i){console.error("Error fetching assign and unassign program activities:",i)}};function p(){return W(de,{class:"activity-modal"})}async function a(){return V.show(Fe,{},"module-picker-modal")}return(i,r)=>(R(),I(o(ie),{slot:"fixed",horizontal:"end",vertical:"bottom",class:"ion-margin-bottom",edge:""},{default:l(()=>[s.value?(R(),I(o(y),{key:0,onClick:p},{default:l(()=>[t(o(T),{src:"/public/svg/exam_multiple_choice.svg"})]),_:1})):le("",!0),t(o(y),{color:"primary",class:"ion-margin-vertical"},{default:l(()=>[t(o(T),{icon:o(_e),onClick:a},null,8,["icon"])]),_:1})]),_:1}))}});export{Fe as M,ke as _};
