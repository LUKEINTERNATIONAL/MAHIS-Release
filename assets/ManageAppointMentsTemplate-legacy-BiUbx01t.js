System.register(["./vendor-legacy-voCnX2G0.js","./index-legacy-B1JvDVWf.js","./BasicForm-legacy-Dq24x1W4.js","./vaccines_service-legacy-CS3_HhE7.js","./StartEndDate-legacy-VArzWRcF.js","./nextApptInf-legacy-C1-9p6yp.js","./NavigationMenu-legacy-pAimNHF-.js","./lodash-legacy-pOOc9Efu.js","./apexcharts-legacy-mr8KuM_k.js","./DateInputField-legacy-DEVT_DJv.js","./sms_service-legacy-ADuB-5Rk.js","./EIRreportsStore-legacy-CHkDMkwz.js","./Export-legacy-DY3Sdh5G.js","./voidReason-legacy-OchgyM1b.js"],function(e,t){"use strict";var a,n,o,i,l,r,s,d,c,p,g,u,h,m,v,f,b,x,_,P,y,I,w,k,C,j,A,F,S,V,B,E,M,T,D,O,U,H,N,R,z,L,$,G,Q,q,J,K,W,X,Y,Z,ee,te,ae,ne,oe,ie,le,re,se,de,ce,pe;return{setters:[e=>{a=e.d,n=e.af,o=e.bl,i=e.b2,l=e.br,r=e.bq,s=e.a0,d=e.M,c=e.aS,p=e.aT,g=e.aU,u=e.aV,h=e.aa,m=e.a9,v=e.G,f=e.E,b=e.ae,x=e.b5,_=e.I,P=e.a8,y=e.r,I=e.c,w=e.a,k=e.cr,C=e.bj,j=e.dt,A=e.du,F=e.dv,S=e.cP,V=e.b9,B=e.cQ,E=e.cR,M=e.cS,T=e.cT,D=e.cU,O=e.cV,U=e.cW,H=e.cX,N=e.$,R=e.bF,z=e.H,L=e.N,$=e.f,G=e.J,Q=e.l,q=e.k,J=e.e,K=e.m,W=e.P,X=e.K,Y=e.Y,Z=e.F,ee=e.O},e=>{te=e.B,ae=e.Q,ne=e.T,oe=e.A,ie=e.H,le=e._},e=>{re=e.B},e=>{se=e.u},e=>{de=e.u},e=>{ce=e.n},e=>{pe=e.N},null,null,null,null,null,null,null],execute:function(){var t=M.createElement("style");t.textContent=".cardTitle[data-v-8db740e3]{border-bottom:.01px solid #ccc;padding-bottom:10px;font-size:.9em;font-weight:560;color:#5d5d5d}.appointments[data-v-8db740e3]{transition:background-color .6s,color .6s,transform .2s;user-select:none;padding:10px}.appointments[data-v-8db740e3]:hover{background-color:#f0f0f0;cursor:pointer}.appointments[data-v-8db740e3]:active{background-color:#ccc;color:#fff;transform:scale(.98)}.appointments.active[data-v-8db740e3]{background-color:rgba(140,140,140,.55);color:#fff}.appointment-list[data-v-8db740e3]{overflow-y:auto}.pagination-controls[data-v-8db740e3]{margin-top:0;display:flex;justify-content:space-between;align-items:center;flex-wrap:wrap}.pagination-info[data-v-8db740e3]{display:flex;align-items:center;gap:20px;flex-grow:1;justify-content:center}.items-per-page[data-v-8db740e3]{display:flex;align-items:center;gap:10px;white-space:nowrap}.items-per-page ion-select[data-v-8db740e3]{width:70px}.page-counter[data-v-8db740e3]{white-space:nowrap}.nav-button[data-v-8db740e3]{--padding-start: 8px;--padding-end: 8px}@media (max-width: 768px){.pagination-controls[data-v-8db740e3]{flex-direction:column;gap:80px}.pagination-info[data-v-8db740e3]{flex-direction:column;width:100%}.nav-button[data-v-8db740e3]{width:100%}}.spinner-overlay[data-v-8db740e3]{position:fixed;top:0;left:0;right:0;bottom:0;display:flex;flex-direction:column;justify-content:center;align-items:center;background-color:rgba(255,255,255,.8);z-index:9999}.loading-text[data-v-8db740e3]{margin-top:10px}.error-label[data-v-8db740e3]{color:#b42318;text-transform:none;float:right}\n/*$vite$:1*/",M.head.appendChild(t);const ge=a({name:"ManageAppointMentsTemplate",components:{IonContent:P,IonHeader:_,IonMenuButton:x,IonPage:b,IonTitle:f,IonToolbar:v,Toolbar:ne,ToolbarSearch:ae,IonRow:m,IonCol:h,IonCard:u,IonCardHeader:g,IonCardTitle:p,IonCardContent:c,IonButton:d,nextApptInf:ce,BasicForm:re,IonIcon:s,IonSelect:r,IonSelectOption:l,IonLabel:i,BasicInputField:te,IonGrid:o,NavigationMenu:pe},data:()=>({search_text:"",search_txt_error:!1}),setup(){const e=y([]),t=y([]),a=y(1),n=y(10),o=y(0),i=I(()=>Math.ceil(e.value.length/n.value)),l=I(()=>{const t=(a.value-1)*n.value,o=t+n.value;return e.value.slice(t,o)}),r=()=>{const e=window.innerHeight;o.value=e-180};return w(()=>{r(),window.addEventListener("resize",r)}),k(()=>{window.removeEventListener("resize",r)}),{people:e,people_cpy:t,currentPage:a,totalPages:i,paginatedPeople:l,listHeight:o,chevronBackOutline:R,checkmark:N,grid:H,chevronDownCircle:U,chevronForwardCircle:O,chevronUpCircle:D,colorPalette:T,document:M,globe:E,medkit:B,itemsPerPage:n,add:V,person:S,refreshOutline:F,chevronForwardOutline:A,bookOutline:j,searchOutline:C}},computed:{...n(se,["selectedAppointmentMentForAppointmentsPage","AppointmentsReload"]),...n(de,["startEndDate"]),startIndex(){return(this.currentPage-1)*this.itemsPerPage+1},endIndex(){return Math.min(this.startIndex+this.itemsPerPage-1,this.people.length)}},watch:{selectedAppointmentMentForAppointmentsPage:{handler(){},deep:!0},AppointmentsReload:{handler(){this.loadPageInf()},deep:!0},$route:{async handler(e){"ManageAppointMentsTemplate"==e.name&&this.loadPageInf()},deep:!0}},async mounted(){this.loadPageInf()},methods:{formatBirthdate:e=>ie.getBirthdateAge(e),async getAppointments(){this.people.length=0,this.currentPage=1,this.itemsPerPage=10;try{const e=se();(await oe.getDailyAppointments(e.getStartEndDate().startDate,e.getStartEndDate().endDate,"")).forEach(e=>{const t={person_id:e.person_id,npid:e.npid,appointment_id:103,encounter_id:e.encounter_id,name:e.given_name.concat(" ",e.family_name),gender:e.gender,ageDob:this.formatBirthdate(e.birthdate),village:e.city_village,appointmentDate:ie.toStandardHisDisplayFormat(e.appointment_date)};this.people.push(t)}),this.people_cpy=this.people}catch(e){}},async loadPageInf(){await this.getAppointments()},prevPage(){this.currentPage>1&&this.currentPage--},nextPage(){this.currentPage<this.totalPages&&this.currentPage++},changePage(e){this.currentPage=e.detail.value},changeItemsPerPage(e){this.itemsPerPage=e.detail.value,this.currentPage=1},searchTextUpdated(e){const t=e.target.value;this.search_text=t,1==this.isValidString(this.search_text)?(this.search_txt_error=!1,this.searchFirstLastName(this.search_text)):this.search_txt_error=!0},isValidString:e=>/^[a-zA-Z\s]*$/.test(e),searchFirstLastName(e){const t=[],a=new RegExp(e,"i");this.people_cpy.forEach(e=>{1==a.test(e.name)&&t.push(e)}),this.people=t}}}),ue={class:"container"},he={key:0,class:"pagination-controls"},me={class:"pagination-info"},ve={class:"items-per-page"},fe={class:"page-counter"};e("default",le(ge,[["render",function(e,t,a,n,o,i){const l=z("NavigationMenu"),r=z("BasicInputField"),s=z("ion-label"),d=z("ion-col"),c=z("ion-row"),p=z("nextApptInf"),g=z("ion-icon"),u=z("ion-button"),h=z("ion-select-option"),m=z("ion-select"),v=z("ion-content"),f=z("ion-page");return $(),L(f,null,{default:G(()=>[Q(l),Q(v,null,{default:G(()=>[q("div",ue,[Q(c,null,{default:G(()=>[Q(d,{size:"12"},{default:G(()=>[Q(r,{placeholder:"",icon:e.searchOutline,inputValue:e.search_text,"onUpdate:inputValue":e.searchTextUpdated},null,8,["icon","inputValue","onUpdate:inputValue"]),q("div",null,[e.search_txt_error?($(),L(s,{key:0,class:"error-label"},{default:G(()=>t[2]||(t[2]=[W(X("only letters allowed"),-1)])),_:1,__:[2]})):K("",!0)])]),_:1})]),_:1}),q("div",{class:"appointment-list",style:Y({height:e.listHeight+"px"})},[($(!0),J(Z,null,ee(e.paginatedPeople,e=>($(),L(p,{key:e.person_id,person:e},null,8,["person"]))),128))],4),e.people.length>0?($(),J("div",he,[Q(u,{class:"nav-button",onClick:e.prevPage,disabled:1===e.currentPage},{default:G(()=>[Q(g,{icon:e.chevronBackOutline,slot:"icon-only"},null,8,["icon"])]),_:1},8,["onClick","disabled"]),q("div",me,[q("div",ve,[Q(s,{style:{"margin-left":"20px"}},{default:G(()=>t[3]||(t[3]=[W("Items per page:",-1)])),_:1,__:[3]}),Q(m,{modelValue:e.itemsPerPage,"onUpdate:modelValue":t[0]||(t[0]=t=>e.itemsPerPage=t),onIonChange:e.changeItemsPerPage,interface:"popover"},{default:G(()=>[Q(h,{value:10},{default:G(()=>t[4]||(t[4]=[W("10",-1)])),_:1,__:[4]}),Q(h,{value:20},{default:G(()=>t[5]||(t[5]=[W("20",-1)])),_:1,__:[5]}),Q(h,{value:50},{default:G(()=>t[6]||(t[6]=[W("50",-1)])),_:1,__:[6]})]),_:1},8,["modelValue","onIonChange"])]),q("div",fe,"Showing "+X(e.startIndex)+" - "+X(e.endIndex)+" of "+X(e.people.length),1),Q(m,{modelValue:e.currentPage,"onUpdate:modelValue":t[1]||(t[1]=t=>e.currentPage=t),onIonChange:e.changePage,interface:"popover"},{default:G(()=>[($(!0),J(Z,null,ee(e.totalPages,e=>($(),L(h,{key:e,value:e},{default:G(()=>[W(" Page "+X(e),1)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue","onIonChange"])]),Q(u,{class:"nav-button",onClick:e.nextPage,disabled:e.currentPage===e.totalPages},{default:G(()=>[Q(g,{icon:e.chevronForwardOutline,slot:"icon-only"},null,8,["icon"])]),_:1},8,["onClick","disabled"])])):K("",!0)])]),_:1})]),_:1})}],["__scopeId","data-v-8db740e3"]]))}}});
