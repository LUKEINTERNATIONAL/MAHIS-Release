import{A as e}from"./app_encounter_service-DUFQOcer.js";import{J as a,Q as s,a5 as n}from"./index-Cu2JEMub.js";import{O as r}from"./vendor-DowD5zKn.js";import{l as i}from"./lodash-Dt8AsbQm.js";class o extends e{constructor(t,N,O=(T=>(T=a().getfacilityLocation())==null?void 0:T.code)()){super(t,53,N,O)}getFamilyPlanningMethods(){return["ORAL CONTRACEPTIVE PILLS","DEPO-PROVERA","INTRAUTERINE CONTRACEPTION","CONTRACEPTIVE IMPLANT","MALE CONDOMS","FEMALE CONDOMS","TUBAL LIGATION","NONE"]}async getTptTreatmentStatus(){return e.getJson("/patients/".concat(this.patientID,"/tpt_status"),{date:this.date})}async patientHitMenopause(){const t=await s.getFirstObs(this.patientID,"Why does the woman not use birth control");return t&&typeof(t==null?void 0:t.value_text)=="string"?!!t.value_text.match(/menopause/i)&&e.obsInValidPeriod(t):!1}async hasTreatmentHistoryObs(){const t=await s.getFirstObs(this.patientID,"Previous TB treatment history");return t&&e.obsInValidPeriod(t)}getDrugSideEffects(){return e.getJson("programs/".concat(e.getProgramID(),"/patients/").concat(this.patientID,"/medication_side_effects"),{date:this.date})}getClient(){return e.getFirstValueCoded(this.patientID,"Patient present")}async clientLastScreened(){const t=await e.getJson("last_cxca_screening_details",{id:this.patientID,date:this.date});return!i.isEmpty(t)}async clientDueForCxCa(){const t=await e.getJson("last_cxca_screening_details",{id:this.patientID,date:this.date});if(!i.isEmpty(t)){const N=t.date_screened;return r(this.date).diff(N,"years")>=1}return!0}async clientHasHadAHysterectomy(){return await e.getFirstValueCoded(this.patientID,"Reason for NOT offering CxCa")==="Hysterectomy"||await e.getFirstValueText(this.patientID,"Treatment")==="Hysterectomy"}async getTLObs(){const t=O=>O&&O.value_coded==="Tubal ligation"&&e.obsInValidPeriod(O),N=await e.getFirstObs(this.patientID,"Family planning");if(t(N))return t(N);{const O=await e.getFirstObs(this.patientID,"Method of family planning");return t(O)}}async getPreviousDrugs(){const t=await e.getJson("patients/".concat(this.patientID,"/drugs_received"));if(!t)return;const N={};return t.forEach(O=>{N[O.drug_inventory_id]=O}),N}async getCurrentMedications(){try{return await n.getLastDrugsReceived(this.patientID)||[]}catch(t){return console.error("Error fetching current medications:",t),[]}}familyPlanningMethods(t,N){const T={"ORAL CONTRACEPTIVE PILLS":{"DEPO-PROVERA":"N","INTRAUTERINE CONTRACEPTION":"N","CONTRACEPTIVE IMPLANT":"N","MALE CONDOMS":"Y","FEMALE CONDOMS":"Y","RYTHM METHOD":"N","TUBAL LIGATION":"N",VASECTOMY:"N"},"DEPO-PROVERA":{"ORAL CONTRACEPTIVE PILLS":"N","INTRAUTERINE CONTRACEPTION":"N","CONTRACEPTIVE IMPLANT":"N","MALE CONDOMS":"Y","FEMALE CONDOMS":"Y","RYTHM METHOD":"N","TUBAL LIGATION":"N",VASECTOMY:"N"},"INTRAUTERINE CONTRACEPTION":{"ORAL CONTRACEPTIVE PILLS":"N","DEPO-PROVERA":"N","CONTRACEPTIVE IMPLANT":"N","MALE CONDOMS":"Y","FEMALE CONDOMS":"Y","RYTHM METHOD":"N","TUBAL LIGATION":"N",VASECTOMY:"N"},"CONTRACEPTIVE IMPLANT":{"ORAL CONTRACEPTIVE PILLS":"N","DEPO-PROVERA":"N","INTRAUTERINE CONTRACEPTION":"N","MALE CONDOMS":"Y","FEMALE CONDOMS":"Y","RYTHM METHOD":"N","TUBAL LIGATION":"N",VASECTOMY:"N"},"MALE CONDOMS":{"ORAL CONTRACEPTIVE PILLS":"Y","DEPO-PROVERA":"Y","INTRAUTERINE CONTRACEPTION":"Y","CONTRACEPTIVE IMPLANT":"Y","FEMALE CONDOMS":"Y","RYTHM METHOD":"Y","TUBAL LIGATION":"N",VASECTOMY:"Y"},"FEMALE CONDOMS":{"ORAL CONTRACEPTIVE PILLS":"Y","DEPO-PROVERA":"Y","INTRAUTERINE CONTRACEPTION":"Y","CONTRACEPTIVE IMPLANT":"Y","MALE CONDOMS":"Y","RYTHM METHOD":"Y","TUBAL LIGATION":"N",VASECTOMY:"Y"},"RYTHM METHOD":{"ORAL CONTRACEPTIVE PILLS":"N","DEPO-PROVERA":"N","INTRAUTERINE CONTRACEPTION":"N","MALE CONDOMS":"Y","FEMALE CONDOMS":"Y","CONTRACEPTIVE IMPLANT":"N","TUBAL LIGATION":"N",VASECTOMY:"N"},"TUBAL LIGATION":{"ORAL CONTRACEPTIVE PILLS":"N","DEPO-PROVERA":"N","INTRAUTERINE CONTRACEPTION":"N","MALE CONDOMS":"N","FEMALE CONDOMS":"N","CONTRACEPTIVE IMPLANT":"N","RYTHM METHOD":"N",VASECTOMY:"N"},VASECTOMY:{"ORAL CONTRACEPTIVE PILLS":"N","DEPO-PROVERA":"Y","INTRAUTERINE CONTRACEPTION":"N","MALE CONDOMS":"Y","FEMALE CONDOMS":"N","CONTRACEPTIVE IMPLANT":"Y","RYTHM METHOD":"N","TUBAL LIGATION":"N"},NONE:{"ORAL CONTRACEPTIVE PILLS":"N","DEPO-PROVERA":"N","INTRAUTERINE CONTRACEPTION":"N","MALE CONDOMS":"N","FEMALE CONDOMS":"N","CONTRACEPTIVE IMPLANT":"N","RYTHM METHOD":"N","TUBAL LIGATION":"N"}}[t];return N.map(E=>T[E.label]==="N"?{label:E.label,value:E.value,isChecked:!1,disabled:!0}:{label:E.label,value:E.value,isChecked:E.isChecked,disabled:!1})}}export{o as C};
