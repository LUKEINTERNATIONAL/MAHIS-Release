import{R as Fe,d as E,ao as J,cF as ue,a8 as Ae,ab as te,U as ne,T as me,ap as Ve,ak as G,G as R,S as oe,ah as Y,X as Ee,a9 as We,aa as xe,E as i,e as g,f as c,l as e,z as o,A as k,k as s,F as A,b2 as pe,r as $,cp as Be,w as Ie,a as se,n as He,L as x,B as V,u as r,cI as Ye,ar as qe,I as U,D as O,bz as Ke,aj as ae,ai as q,an as fe,ba as Qe,aF as Xe,m as H,y as j,p as W,b0 as K,bn as Ze,bw as Re,aZ as Se,a_ as je,W as Ce,a$ as $e,c as X,aN as et,ag as tt,ay as nt,cX as ot,d_ as st,d$ as at,e0 as it,cP as we,bo as lt,V as rt,M as Z,J as ee,bY as dt,bL as ct,d0 as ve,c$ as ut}from"./vendor-DL4WTsfb.js";import{j as Q,F as pt,bb as _t,B as ze,bj as gt,G as re,aI as Je,K as mt,S as he,p as ft,u as ie,_ as B,aE as vt,m as Ge,N as ht,ag as bt,H as de,aJ as yt,q as Dt,a8 as _e,b as St,T as Ct}from"./index-DjbhwxKm.js";import{D as $t}from"./DashBox-ClFuiTxM.js";import{B as ce}from"./BasicForm-CMlpXm6J.js";import{p as wt}from"./previousDiagnosis-BCJdQ0mw.js";import{a as Mt}from"./formatServerData-D-3s9rQK.js";import{v as It}from"./group_validation-rEWcpaVk.js";import{l as be}from"./lodash-Dt8AsbQm.js";import{d as kt,e as Nt,g as Pt,f as ke,h as Ne,i as ye,u as ge,j as De,k as Ot,l as Tt,D as Lt,P as Me,m as Ft,A as At}from"./NextAppointment-Cu9a5-Kn.js";import{D as Vt}from"./drug_service-DZlHL1vm.js";const Pe=Fe("NCDDiagnosisStore",{state:()=>({diagnosis:[{selectedData:[],isFinishBtn:!1,data:{rowData:[{colData:[{inputHeader:"Diagnosis",icon:Q.search,value:"",name:"diagnosis",eventType:"input",required:!0,alertsErrorMassage:"",isSingleSelect:!0,trackBy:"concept_id",valueType:"coded",multiSelectData:[],id:"",validationFunctionName:"required"}]}]}}]}),actions:{setDiagnosis(t){this.diagnosis=t}}}),Et=E({name:"Menu",components:{IonContent:Y,IonHeader:oe,IonItem:R,IonList:G,IonMenu:Ve,IonTitle:me,IonToolbar:ne,IonInput:te,IonPopover:Ae,DashBox:$t,SelectionPopover:gt,BasicInputField:ze,List:_t,BasicForm:ce,DynamicButton:pt,previousDiagnosis:wt,DataTable:ue},data(){return{iconsContent:Q,no_item:!1,search_item:!1,display_item:!1,addItemButton:!0,selectedText:"",conditionStatus:"",data:[],diagnosisData:[],popoverOpen:!1,event:"",selectedCondition:""}},setup(){return{checkmark:xe,pulseOutline:We}},computed:{...J(Pe,["diagnosis"]),...J(ie,["patient"])},async mounted(){await this.getDiagnosis("")},methods:{async getDiagnosis(t){let n;he.getModsStatus()||he.getUseIndexDBStatus()?n=await ft("diagnosis",{likeClause:t?{name:"%".concat(t,"%")}:"",currentPage:1,itemsPerPage:20}).then(_=>_.records):n=await he.getJson("diagnosis",{id:7409,page_size:10}),re(this.diagnosis,"diagnosis","multiSelectData",n)},dismiss(){Ee.dismiss()},async addNewRow(){var t,n,_;if(await It(this.diagnosis)){re(this.diagnosis,"diagnosis","alertsErrorMassage","");const b=await Mt(this.diagnosis),m=JSON.parse(JSON.stringify(this.patient));(_=(n=(t=m.diagnosis)!=null?t:m.diagnosis={}).unsaved)!=null||(n.unsaved=[]),m.diagnosis.unsaved.push(...b),await Je(m),mt("Diagnosis successfully saved"),this.dismiss()}else re(this.diagnosis,"diagnosis","alertsErrorMassage","Please select diagnosis from the list")},updateDiagnosisStores(){Pe().setDiagnosis(this.diagnosis)},async handleInputData(t){re(this.diagnosis,"diagnosis","alertsErrorMassage","")}}}),xt={class:"modal_wrapper"},Bt={class:""};function Ht(t,n,_,b,m,a){const l=i("ion-title"),d=i("ion-icon"),u=i("ion-header"),h=i("basic-form"),p=i("ion-content"),S=i("DynamicButton"),w=i("ion-col"),C=i("ion-row"),y=i("ion-footer");return c(),g(A,null,[e(u,{style:{display:"flex","justify-content":"space-between"}},{default:o(()=>[e(l,{class:"modalTitle"},{default:o(()=>n[2]||(n[2]=[k("Add Diagnosis",-1)])),_:1,__:[2]}),e(d,{onClick:n[0]||(n[0]=D=>t.dismiss()),style:{"padding-top":"10px","padding-right":"10px"},icon:t.iconsContent.cancel},null,8,["icon"])]),_:1}),e(p,{fullscreen:!0,style:{"--background":"#fff"}},{default:o(()=>[s("div",xt,[s("div",Bt,[e(h,{contentData:t.diagnosis,onSearchChange:t.getDiagnosis,"onUpdate:inputValue":t.handleInputData},null,8,["contentData","onSearchChange","onUpdate:inputValue"])])])]),_:1}),e(y,{collapse:"fade",class:"ion-no-border"},{default:o(()=>[e(C,null,{default:o(()=>[e(w,null,{default:o(()=>[e(S,{onClick:n[1]||(n[1]=D=>t.addNewRow()),name:"Save",fill:"solid",style:{float:"right",margin:"2%",width:"130px"}})]),_:1})]),_:1})]),_:1})],64)}const Rt=B(Et,[["render",Ht],["__scopeId","data-v-b6148238"]]),jt={class:"table-responsive"},zt=E({__name:"Diagnosis",setup(t){const n=vt(),_=ie(),{diagnosis:b}=pe(n),{patient:m}=pe(_),a=$(null),l=$([]),d=$(Q),u=["Diagnosis","Date","Action"],h={responsive:!0,select:!1,layout:{topStart:"buttons",topEnd:"search",bottomStart:"info",bottomEnd:"paging"},ordering:!1,buttons:[{text:" <b>+ Add diagnosis </b>",className:"add-test text-white",action:async()=>{await p()}}]},p=async()=>{await Ge(Rt,{class:"lab-results-modal"},!0),await C()},S=async D=>D.length>0?await Promise.all(D.map(async M=>{const P=await bt.getConceptName(M.value_coded),N=M.obs_datetime;return[P,de.toStandardHisFormat(N),'<button class="btn btn-outline-danger btn-sm delete-btn" data-id=\''.concat(JSON.stringify({id:M.obs_id,value_coded:M.value_coded,name:P,obs_date:N}),"'>").concat(d.value.delete2,"</button>")]})):[],w=async(D,M)=>{var N;if(await ht("Do you want to delete ".concat(D.name," ?"),M)){const f=JSON.parse(JSON.stringify(m.value)),v=f.diagnosis;D!=null&&D.id?(v.saved=v.saved.filter(I=>!(I.value_coded===D.value_coded&&I.obs_datetime===D.obs_date)),(N=v.voided)!=null||(v.voided=[]),v.voided.push(D)):v.unsaved=v.unsaved.filter(I=>!(I.value_coded===D.value_coded&&I.obs_datetime===D.obs_date)),await Je(f)}},C=async()=>{var P,N;const D=JSON.parse(JSON.stringify(m.value)),M=[...((P=D==null?void 0:D.diagnosis)==null?void 0:P.unsaved)||[],...((N=D==null?void 0:D.diagnosis)==null?void 0:N.saved)||[]];l.value=await S(M),ue.use(Ye)},y=Be();return Ie(()=>y,async()=>{await C()},{deep:!0}),Ie(()=>m,async()=>{await C()},{deep:!0}),se(async()=>{await C(),He(()=>{const D=a.value.dt;D.columns.adjust().draw(),D.on("click",".delete-btn",M=>{const P=M.target.getAttribute("data-id");w(JSON.parse(P),M)})})}),(D,M)=>(c(),g("div",jt,[e(r(ue),{ref_key:"dataTableRef",ref:a,options:h,data:l.value,class:"display nowrap modern-table",width:"100%"},{default:o(()=>[s("thead",null,[s("tr",null,[(c(),g(A,null,x(u,P=>s("th",{key:P},V(P),1)),64))])])]),_:1},8,["data"])]))}}),So=B(zt,[["__scopeId","data-v-a6ad5349"]]),Oe=[{isFinishBtn:!1,validationStatus:"",sectionHeader:"Visual acuity test",data:{rowData:[{colData:[{inputHeader:"Left Eye",value:"",name:"Left eye visual acuity",required:!0,eventType:"input",alertsErrorMassage:"",disabled:!1,validationFunctionName:"",valueType:"text"},{inputHeader:"Right Eye",value:"",name:"Right eye visual acuity",required:!0,eventType:"input",alertsErrorMassage:"",disabled:!1,validationFunctionName:"",valueType:"text"}]}]}}],Te=[{selectedData:[],classDash:"dashed_bottom_border",groupedRadioBtnContent:{groupedData:[{header:{selectedValue:"",name:"Peripheral neuropathy"},data:[{name:"Neuropathy/PVO",labelPlacement:"start",colSize:"3",justify:"space-between",header:!0,headClassName:"bold"},{name:"Yes",value:"Yes",checked:!1,colSize:"3",justify:"end"},{name:"No",value:"No",checked:!1,colSize:"3",justify:"end"}]}]}},{selectedData:[],classDash:"dashed_bottom_border",groupedRadioBtnContent:{groupedData:[{header:{selectedValue:"",name:"Deformity"},data:[{name:"Deformities",labelPlacement:"start",colSize:"3",justify:"space-between",header:!0,headClassName:"bold"},{name:"Yes",value:"Yes",checked:!1,colSize:"3",justify:"end"},{name:"No",value:"No",checked:!1,colSize:"3",justify:"end"}]}]}},{selectedData:[],classDash:"dashed_bottom_border",groupedRadioBtnContent:{groupedData:[{header:{selectedValue:"",name:"Ulcers"},data:[{name:"Ulcers",labelPlacement:"start",colSize:"3",justify:"space-between",header:!0,headClassName:"bold"},{name:"Yes",value:"Yes",checked:!1,colSize:"3",justify:"end"},{name:"No",value:"No",checked:!1,colSize:"3",justify:"end"}]}]}}],Le=[{isFinishBtn:!1,validationStatus:"",sectionHeader:"CV Risk %",data:{rowData:[{colData:[{inputHeader:"",value:"",name:"CVD",required:!0,eventType:"input",alertsErrorMassage:"",disabled:!1,valueType:"text",validationFunctionName:"isNumber"}]}]}}],Jt=Fe("complicationsStore",{state:()=>({visualScreening:[...Oe],FootScreening:[...Te],cvScreening:[...Le]}),actions:{setCvScreening(t){this.cvScreening=t},setVisualScreening(t){this.visualScreening=t},setFootScreening(t){this.FootScreening=t},getInitialCvScreening(){return[...be.cloneDeep(Le)]},getInitialVisualScreening(){return[...be.cloneDeep(Oe)]},getInitialFootScreening(){return[...be.cloneDeep(Te)]},resetScreening(){this.setCvScreening(this.getInitialCvScreening()),this.setFootScreening(this.getInitialFootScreening()),this.setVisualScreening(this.getInitialVisualScreening())}},persist:!0}),Gt={class:"sub_item_body"},Ut={class:"ion-padding",slot:"content"},Wt={class:"table-responsive"},Yt=E({__name:"ComplicationsScreening",setup(t){qe();const n=Jt(),{FootScreening:_,visualScreening:b,cvScreening:m}=pe(n),a=ie(),{patient:l}=pe(a);Be();const d=$(null),u=$([]);$(!1),$(!1),$("");const h=$("");$({btnColor:"secondary",btnName:"No risk"});const p=$(Q),S=["Condition","Result","Date","Action"],w={responsive:!0,select:!1,layout:{topEnd:"search",bottomStart:"info",bottomEnd:"paging"},ordering:!1},C=async()=>{var N,f;const M=JSON.parse(JSON.stringify(l.value)),P=[...((N=M==null?void 0:M.screening)==null?void 0:N.unsaved)||[],...((f=M==null?void 0:M.screening)==null?void 0:f.saved)||[]];u.value=await y(P)},y=async M=>M.length===0?[]:(await Promise.all(M.map(async N=>N.concept_name==="Visual acuity"?N.children.map(f=>[f.concept_name,f.value_text,de.toStandardHisFormat(f.obs_datetime),'<button class="btn btn-outline-danger btn-sm delete-btn" data-id=\''.concat(JSON.stringify(f),"'>\n                        ").concat(p.value.delete2,"</button>")]):N.concept_name==="Foot check"?Promise.all(N.children.map(async f=>[f.concept_name,await yt.getConceptName(f.value_coded),de.toStandardHisFormat(f.obs_datetime),'<button class="btn btn-outline-danger btn-sm delete-btn" data-id=\''.concat(JSON.stringify(f),"'>\n                            ").concat(p.value.delete2,"</button>")])):N.concept_name==="Cardiovascular disease"?[["CVD %",N.value_text,de.toStandardHisFormat(N.obs_datetime),'<button class="btn btn-outline-danger btn-sm delete-btn" data-id=\''.concat(JSON.stringify(N),"'>\n                            ").concat(p.value.delete2,"</button>")]]:[]))).flat(),D=M=>{console.log("🚀 ~ voidScreening ~ data:",M)};return se(async()=>{await C(),He(()=>{const M=d.value.dt;M.columns.adjust().draw(),M.on("click",".delete-btn",P=>{const N=P.target.getAttribute("data-id");D(JSON.parse(N))})})}),(M,P)=>{const N=i("ion-label"),f=i("ion-accordion"),v=i("ion-accordion-group"),I=i("ion-row");return c(),g(A,null,[e(ce,{contentData:r(b)},null,8,["contentData"]),e(r(G),null,{default:o(()=>[e(r(R),{lines:h.value,class:"dashed_bottom_border textSectionFormat"},{default:o(()=>P[0]||(P[0]=[s("span",{style:{display:"flex","align-items":"center",gap:"10px"}}," Foot screening ",-1)])),_:1,__:[0]},8,["lines"]),s("div",Gt,[e(ce,{contentData:r(_)},null,8,["contentData"])])]),_:1}),e(ce,{contentData:r(m)},null,8,["contentData"]),e(I,null,{default:o(()=>[e(v,{ref:"accordionGroup",class:"previousView"},{default:o(()=>[e(f,{value:"first","toggle-icon-slot":"start",style:{"border-radius":"10px","background-color":"#fff"}},{default:o(()=>[e(r(R),{slot:"header",color:"light"},{default:o(()=>[e(N,{class:"previousLabel"},{default:o(()=>P[1]||(P[1]=[k("Previous Visits",-1)])),_:1,__:[1]})]),_:1}),s("div",Ut,[s("div",Wt,[e(r(ue),{ref_key:"dataTableRef",ref:d,options:w,data:u.value,class:"display nowrap",width:"100%"},{default:o(()=>[s("thead",null,[s("tr",null,[(c(),g(A,null,x(S,L=>s("th",{key:L},V(L),1)),64))])])]),_:1},8,["data"])])])]),_:1})]),_:1},512)]),_:1})],64)}}}),Co=B(Yt,[["__scopeId","data-v-127f623c"]]),qt=E({name:"Home",components:{IonContent:Y,IonHeader:oe,IonMenuButton:Qe,IonPage:fe,IonTitle:me,IonToolbar:ne,IonRow:q,IonCol:ae,IonChip:Ke,IonLabel:O,IonIcon:U},computed:{...J(ie,["patient"])},data(){const t=$([]),n=$([]),_=async()=>{try{const a=this.patient;Nt(a.ID);const l=$(!1),d=p=>{l.value=p};t.value=await Pt();const u=t.value.some(p=>p.toLowerCase().includes("hypertension")),h=t.value.some(p=>p.toLowerCase().includes("diabetes"));u&&(d(!0),ke()),h&&(d(!0),Ne()),l.value==!1}catch(a){}},b=async()=>{const a=n.value.some(d=>d.toLowerCase().includes("hypertension")),l=n.value.some(d=>d.toLowerCase().includes("diabetes"));a&&await ke(),l&&await Ne()};return{diagnoses:t,selectedDiagnoses:n,medkitOutline:Xe,initC:_,toggleDiagnosisSelection:a=>{const l=n.value.indexOf(a);l===-1?(n.value.push(a),ye(),b()):(n.value.splice(l,1),ye(),b()),n.value.length===0&&(ye(),_())}}},async mounted(){this.initC()},watch:{patient:{handler(){kt(this.patient.ID),this.initC()},deep:!0}}}),Kt={key:0,class:"diagnosis-container"},Qt={class:"heading"},Xt={class:"diagnosis-list"};function Zt(t,n,_,b,m,a){const l=i("ion-icon"),d=i("ion-label"),u=i("ion-chip"),h=i("ion-col"),p=i("ion-row");return t.diagnoses.length>0?(c(),g("div",Kt,[s("div",Qt,[e(l,{icon:t.medkitOutline,class:"diagnosis-icon"},null,8,["icon"]),n[0]||(n[0]=s("h2",null,"Diagnosis",-1))]),e(p,null,{default:o(()=>[e(h,null,{default:o(()=>[s("div",Xt,[(c(!0),g(A,null,x(t.diagnoses,(S,w)=>(c(),j(u,{key:w,class:W({"diagnosis-chip-selected":t.selectedDiagnoses.includes(S)}),onClick:C=>t.toggleDiagnosisSelection(S)},{default:o(()=>[e(d,null,{default:o(()=>[k(V(S),1)]),_:2},1024)]),_:2},1032,["class","onClick"]))),128))])]),_:1})]),_:1})])):H("",!0)}const en=B(qt,[["render",Zt],["__scopeId","data-v-2bd0f8ca"]]),tn=E({name:"MedicationSearch",components:{IonContent:Y,IonPage:fe,IonItem:R,IonLabel:O,IonInput:te,IonIcon:U,BasicInputField:ze,IonCard:K},setup(){const t=$(""),n=ge();return{searchText:t,searchTextUpdated:b=>{const m=b.target;t.value=m.value;const a=n.medications.filter(l=>l.name.toLowerCase().includes(t.value.toLowerCase()));n.setFilteredMedications(a)},searchOutline:Ze}}});function nn(t,n,_,b,m,a){const l=i("BasicInputField"),d=i("ion-card");return c(),g("div",null,[s("div",null,[e(d,null,{default:o(()=>[e(l,{placeholder:"Filter medication list by name",icon:t.searchOutline,inputValue:t.searchText,"onUpdate:inputValue":t.searchTextUpdated,minHeight:50},null,8,["icon","inputValue","onUpdate:inputValue"])]),_:1})])])}const on=B(tn,[["render",nn]]),sn=E({name:"medication",components:{IonCard:K,IonCardHeader:$e,IonButton:Ce,IonCardTitle:je,IonCardContent:Se,IonInput:te,IonIcon:U,IonCol:ae,IonRow:q,IonCheckbox:Re,PreviousNCDDiagnosis:en,MedicationSearchInput:on},computed:{...J(ge,["medications","filteredMedications"]),...J(De,["otherNCDMedications"]),activeMedications(){return this.useDefaultStores?this.filteredMedications:this.otherNCDMedications}},props:{useDefaultStores:{type:Boolean,default:!0}},setup(t){const n=ge();n.initMedications();const _=X(()=>n.selectedNCDMedicationList),b=De(),m=X(()=>b.selectedOtherNCDMedicationList),a=X(()=>t.useDefaultStores?_.value:m.value),l=$(!1),d=$({});let u=null;const h=()=>{l.value=!1,u&&(clearTimeout(u),u=null)},p=f=>{d.value={...d.value,[f]:!0},l.value=!0,u&&clearTimeout(u),u=window.setTimeout(()=>{l.value=!1,u=null},3e3),window.setTimeout(()=>{const v={...d.value};delete v[f],d.value=v},3e3)},S=f=>/^\d*$/.test(f),w=(f,v,I)=>{let L=I.target.value;const z="".concat(f,"-").concat(v);if(L!==""&&!S(L)){p(z);const T=a.value.find(le=>le.drug_id===f);L=(T==null?void 0:T.dosage[v])||"",setTimeout(()=>{const le=I.target;le&&(le.value=L)},0);return}if(L!==""){const T=parseInt(L);isNaN(T)||T<0?L="0":L=Math.floor(T).toString()}const F=a.value.findIndex(T=>T.drug_id===f);if(F>-1){const T={...a.value[F]};T.dosage={...T.dosage,[v]:L},a.value[F]=T}},C=(f,v)=>{let I=v.target.value;const L="".concat(f,"-duration");if(I!==""&&!S(I)){p(L);const F=a.value.find(T=>T.drug_id===f);I=(F==null?void 0:F.duration)||"",setTimeout(()=>{const T=v.target;T&&(T.value=I)},0);return}if(I!==""){const F=parseInt(I);isNaN(F)||F<1?I="1":I=Math.floor(F).toString()}const z=a.value.findIndex(F=>F.drug_id===f);if(z>-1){const F={...a.value[z]};F.duration=I,a.value[z]=F}},y=f=>a.value.some(v=>v.drug_id===f);return{medkit:we,sunny:it,partlySunny:at,moon:st,timeOutline:ot,alertCircleOutline:nt,closeCircleOutline:tt,updateDosage:w,updateDuration:C,getDosage:(f,v)=>{const I=a.value.find(L=>L.drug_id===f);return(I==null?void 0:I.dosage[v])||""},getDuration:f=>{const v=a.value.find(I=>I.drug_id===f);return(v==null?void 0:v.duration)||""},calculateQuantity:f=>{const v=a.value.find(z=>z.drug_id===f);if(!v||!v.dosage||!v.duration)return"";const I=["morning","afternoon","evening"].reduce((z,F)=>{const T=parseInt(v.dosage[F])||0;return z+T},0),L=parseInt(v.duration)||0;return(I*L).toString()},isActive:y,toggleMedication:async f=>{try{if(y(f)){const v=a.value.findIndex(I=>I.drug_id===f);v>-1&&a.value.splice(v,1)}else{const v=await Ot(f);t.useDefaultStores==!1?b.setSelectedNCDMedicationList(v):n.setSelectedNCDMedicationList(v)}}catch(v){Dt("Error toggling medication: "+v)}},cubeOutline:et,showErrorMessage:l,errorFields:d,hideErrorMessage:h}}}),an={key:0},ln={key:0,class:"error-message"},rn={class:"table-container"},dn={class:"prescription-table"},cn={class:"checkbox-col"},un={style:{cursor:"pointer"}},pn=["onClick"];function _n(t,n,_,b,m,a){const l=i("PreviousNCDDiagnosis"),d=i("ion-col"),u=i("MedicationSearchInput"),h=i("ion-row"),p=i("ion-icon"),S=i("ion-button"),w=i("ion-checkbox"),C=i("ion-input");return c(),g(A,null,[e(h,null,{default:o(()=>[e(d,{size:"5"},{default:o(()=>[t.useDefaultStores?(c(),j(l,{key:0})):H("",!0)]),_:1}),e(d,null,{default:o(()=>[t.useDefaultStores&&t.medications.length>0?(c(),j(u,{key:0,style:{"margin-top":"0px","font-weight":"600","font-size":"16px"}})):H("",!0)]),_:1})]),_:1}),t.activeMedications.length>0?(c(),g("div",an,[t.showErrorMessage?(c(),g("div",ln,[e(p,{icon:t.alertCircleOutline,color:"danger"},null,8,["icon"]),n[0]||(n[0]=s("span",{style:{"font-size":"16px","font-weight":"600px",color:"red"}},"Only numbers are allowed",-1)),e(S,{fill:"clear",size:"small",onClick:t.hideErrorMessage},{default:o(()=>[e(p,{icon:t.closeCircleOutline},null,8,["icon"])]),_:1},8,["onClick"])])):H("",!0),s("div",rn,[s("table",dn,[s("thead",null,[s("tr",null,[n[6]||(n[6]=s("th",{class:"checkbox-col"},"Select",-1)),n[7]||(n[7]=s("th",null,"Medication",-1)),s("th",null,[e(p,{icon:t.partlySunny},null,8,["icon"]),n[1]||(n[1]=k(" Morning",-1))]),s("th",null,[e(p,{icon:t.sunny},null,8,["icon"]),n[2]||(n[2]=k(" Noon",-1))]),s("th",null,[e(p,{icon:t.moon},null,8,["icon"]),n[3]||(n[3]=k(" Night",-1))]),s("th",null,[e(p,{icon:t.timeOutline},null,8,["icon"]),n[4]||(n[4]=k(" Duration",-1))]),s("th",null,[e(p,{icon:t.cubeOutline},null,8,["icon"]),n[5]||(n[5]=k(" Quantity",-1))])])]),s("tbody",null,[(c(!0),g(A,null,x(t.activeMedications,y=>(c(),g("tr",{key:y.id,class:W({"active-row":t.isActive(y.drug_id)})},[s("td",cn,[e(w,{checked:t.isActive(y.drug_id),onIonChange:D=>t.toggleMedication(y.drug_id)},null,8,["checked","onIonChange"])]),s("td",un,[s("span",{class:"med-kit-font",onClick:D=>t.toggleMedication(y.drug_id)},V(y.name),9,pn)]),s("td",null,[e(C,{type:"text",class:W(["dose-input bordered-input med-kit-font",{"error-input":t.errorFields["".concat(y.drug_id,"-morning")]}]),disabled:!t.isActive(y.drug_id),value:t.getDosage(y.drug_id,"morning"),onIonInput:D=>t.updateDosage(y.drug_id,"morning",D),placeholder:"0",inputmode:"numeric"},null,8,["class","disabled","value","onIonInput"])]),s("td",null,[e(C,{type:"text",class:W(["dose-input bordered-input med-kit-font",{"error-input":t.errorFields["".concat(y.drug_id,"-afternoon")]}]),disabled:!t.isActive(y.drug_id),value:t.getDosage(y.drug_id,"afternoon"),onIonInput:D=>t.updateDosage(y.drug_id,"afternoon",D),placeholder:"0",inputmode:"numeric"},null,8,["class","disabled","value","onIonInput"])]),s("td",null,[e(C,{type:"text",class:W(["dose-input bordered-input med-kit-font",{"error-input":t.errorFields["".concat(y.drug_id,"-evening")]}]),disabled:!t.isActive(y.drug_id),value:t.getDosage(y.drug_id,"evening"),onIonInput:D=>t.updateDosage(y.drug_id,"evening",D),placeholder:"0",inputmode:"numeric"},null,8,["class","disabled","value","onIonInput"])]),s("td",null,[e(C,{type:"text",class:W(["dose-input bordered-input med-kit-font",{"error-input":t.errorFields["".concat(y.drug_id,"-duration")]}]),disabled:!t.isActive(y.drug_id),value:t.getDuration(y.drug_id),onIonInput:D=>t.updateDuration(y.drug_id,D),placeholder:"0",inputmode:"numeric"},null,8,["class","disabled","value","onIonInput"])]),s("td",null,[e(C,{type:"text",class:"dose-input bordered-input med-kit-font",readonly:"",value:t.calculateQuantity(y.drug_id),placeholder:"0"},null,8,["value"])])],2))),128))])])])])):H("",!0)],64)}const Ue=B(sn,[["render",_n],["__scopeId","data-v-601894a0"]]),gn=E({name:"DrugSelector",components:{IonContent:Y,IonHeader:oe,IonItem:R,IonList:G,IonMenu:Ve,IonTitle:me,IonToolbar:ne,IonInput:te,IonPopover:Ae,VueMultiselect:lt,IonLabel:O,IonCol:ae,IonRow:q},emits:["drug-selected"],data(){const t=m=>{this.$emit("drug-selected",m)},n=async m=>{const a=_e(),l=m,p=(await Vt.getOfflineOPDDrugs({name:l,page:1,page_size:20})).map(S=>({label:S.name,value:S.name,other:S,...S}));a.setPartialOPDdrugList(p)},_=X(()=>this.partialOPDdrugList);return{selected_drug:$(null),selectedDrugName:t,FindDrugName:n,OPDDrugList:_}},computed:{...J(_e,["partialOPDdrugList"])}});function mn(t,n,_,b,m,a){const l=i("VueMultiselect"),d=i("ion-col"),u=i("ion-row");return c(),g("div",null,[e(u,null,{default:o(()=>[e(d,null,{default:o(()=>[e(l,{modelValue:t.selected_drug,"onUpdate:modelValue":[n[0]||(n[0]=h=>t.selected_drug=h),t.selectedDrugName],multiple:!1,taggable:!1,"hide-selected":!1,"close-on-select":!0,openDirection:"bottom","tag-placeholder":"Select medication",placeholder:"Select medication",selectLabel:"",label:"name",searchable:!0,onSearchChange:t.FindDrugName,"track-by":"uuid",options:t.OPDDrugList},null,8,["modelValue","onUpdate:modelValue","onSearchChange","options"])]),_:1})]),_:1})])}const fn=B(gn,[["render",mn],["__scopeId","data-v-e33f5b73"]]),vn=E({name:"Home",mixins:[St],components:{IonContent:Y,IonHeader:oe,IonPage:fe,IonToolbar:ne,IonRow:q,IonTitle:me,IonIcon:U,IonFooter:rt,OPDMedications:fn,Medication:Ue,IonCol:ae,IonButton:Ce},data(){const t=De(),n=()=>{Ee.dismiss()};return{iconsContent:Q,dismiss:n,addSearchedDrug:m=>{t.addSearchedDrug(m)},medkit:we,checkmark:xe,onAdd:()=>{Tt(),t.clearOtherNCDMedications(),n()}}},computed:{},$route:{async handler(){},deep:!0},watch:{},async mounted(){},methods:{}}),hn={class:"medication-list"},bn={class:"modal_wrapper"},yn={class:""};function Dn(t,n,_,b,m,a){const l=i("ion-icon"),d=i("ion-title"),u=i("ion-header"),h=i("OPDMedications"),p=i("Medication"),S=i("ion-content"),w=i("ion-button"),C=i("ion-col"),y=i("ion-row"),D=i("ion-footer");return c(),g(A,null,[e(u,{style:{display:"flex","justify-content":"space-between"}},{default:o(()=>[e(d,{class:"modalTitle"},{default:o(()=>[s("div",hn,[e(l,{icon:t.medkit,class:"ion-margin-end"},null,8,["icon"]),n[1]||(n[1]=s("span",null,"Add Other Medication",-1))])]),_:1}),e(l,{onClick:n[0]||(n[0]=M=>t.dismiss()),style:{"padding-top":"10px","padding-right":"10px"},icon:t.iconsContent.cancel},null,8,["icon"])]),_:1}),e(S,{fullscreen:!0,class:"ion-padding",style:{"--background":"#fff"}},{default:o(()=>[s("div",bn,[s("div",yn,[e(h,{onDrugSelected:t.addSearchedDrug},null,8,["onDrugSelected"]),e(p,{"use-default-stores":!1})])])]),_:1}),e(D,{collapse:"fade",class:"ion-no-border"},{default:o(()=>[e(y,null,{default:o(()=>[e(C,null,{default:o(()=>[e(w,{onClick:t.onAdd,color:"primary",style:{float:"right","margin-bottom":"20px","margin-right":"20px"}},{default:o(()=>[e(l,{icon:t.checkmark,slot:"start"},null,8,["icon"]),n[2]||(n[2]=k(" Add ",-1))]),_:1,__:[2]},8,["onClick"])]),_:1})]),_:1})]),_:1})],64)}const Sn=B(vn,[["render",Dn],["__scopeId","data-v-dee50533"]]),Cn=E({name:"Home",components:{IonContent:Y,IonHeader:oe,IonPage:fe,IonToolbar:ne,Toolbar:Ct,IonRow:q,IonAccordion:ee,IonAccordionGroup:Z,IonItem:R,IonLabel:O,DynamicList:Lt,IonCard:K},data(){const t=$(0),n=$("Show more medications"),_=$(!1),b=$();return{componentKey:t,accordionGroupChange:d=>{const u=d.detail.value;u!==void 0?u=="second"&&(n.value="Show less medications",_.value=!_.value):(n.value="Show more medications",_.value=!_.value)},showMoreMedicationsMsg:n,itemWasExpanded:_,accordionGroupChangeFn1:d=>{},PreviuosSelectedMedicalDrugsList:b,loadPreviousMedications:async()=>{const d=new Me,{previousDrugPrescriptions:u}=await d.getPatientEncounters();b.value=u}}},computed:{...J(ie,["patient"]),...J(ge,["selectedNCDMedicationList"])},$route:{async handler(){},deep:!0},watch:{patient:{handler(){this.loadPreviousMedications()},deep:!0},selectedNCDMedicationList:{handler(){this.loadPreviousMedications()},deep:!0}},async mounted(){this.loadPreviousMedications()}}),$n={style:{}},wn={class:"ion-padding",slot:"content"},Mn={key:0},In={class:"previousSecDrgs"},kn={class:"ion-padding",slot:"content"},Nn={key:0},Pn={class:"previousSecDrgs"};function On(t,n,_,b,m,a){const l=i("ion-label"),d=i("ion-item"),u=i("dynamic-list"),h=i("ion-accordion"),p=i("ion-accordion-group"),S=i("ion-card");return c(),j(S,null,{default:o(()=>[s("div",$n,[e(p,{ref:"accordionGroup",class:"previousView",onIonChange:t.accordionGroupChangeFn1},{default:o(()=>[e(h,{value:"first","toggle-icon-slot":"start",style:{"border-radius":"10px","background-color":"#fff"}},{default:o(()=>[e(d,{slot:"header",color:"light"},{default:o(()=>[e(l,{class:"previousLabel"},{default:o(()=>n[0]||(n[0]=[k("Documented medications timeline",-1)])),_:1,__:[0]})]),_:1}),s("div",wn,[(c(!0),g(A,null,x(t.PreviuosSelectedMedicalDrugsList,(w,C)=>(c(),g("div",{class:"ionLbltp",key:C},[C==0?(c(),g("div",Mn,[s("div",null,[e(l,{class:"previousLabelDate"},{default:o(()=>[k(V(w.prescriptionDate),1)]),_:2},1024)]),s("div",In,[(c(),j(u,{_selectedMedicalDrugsList:w.previousPrescriptions,show_actions_buttons:!1,key:t.componentKey},null,8,["_selectedMedicalDrugsList"]))])])):H("",!0)]))),128)),e(p,{onIonChange:t.accordionGroupChange},{default:o(()=>[e(h,{value:"second","toggle-icon-slot":"start",style:{"border-radius":"10px","background-color":"#fff"}},{default:o(()=>[e(d,{slot:"header",color:"light"},{default:o(()=>[e(l,{class:"",color:"primary"},{default:o(()=>[k(V(t.showMoreMedicationsMsg),1)]),_:1})]),_:1}),s("div",kn,[(c(!0),g(A,null,x(t.PreviuosSelectedMedicalDrugsList,(w,C)=>(c(),g("div",{class:"ionLbltp",key:C},[t.itemWasExpanded&&C>0?(c(),g("div",Nn,[s("div",null,[e(l,{class:"previousLabelDate"},{default:o(()=>[k(V(w.prescriptionDate),1)]),_:2},1024)]),s("div",Pn,[(c(),j(u,{_selectedMedicalDrugsList:w.previousPrescriptions,show_actions_buttons:!1,key:t.componentKey},null,8,["_selectedMedicalDrugsList"]))])])):H("",!0)]))),128))])]),_:1})]),_:1},8,["onIonChange"])])]),_:1})]),_:1},8,["onIonChange"])])]),_:1})}const Tn=B(Cn,[["render",On],["__scopeId","data-v-1db96250"]]),Ln=E({name:"PrescriptionTable",components:{IonCard:K,IonCardHeader:$e,IonButton:Ce,IonCardTitle:je,IonCardContent:Se,IonInput:te,IonIcon:U,IonCol:ae,IonRow:q,IonCheckbox:Re,Medication:Ue,MedicationHistory:Tn},setup(){return{openAddOtherOPDMedicationModal:async()=>{await Ge(Sn,{class:"large-modal"},!0,{})},medkit:we}}});function Fn(t,n,_,b,m,a){const l=i("Medication"),d=i("ion-icon"),u=i("ion-button"),h=i("ion-col"),p=i("ion-row"),S=i("MedicationHistory"),w=i("IonCol"),C=i("ion-card-content"),y=i("ion-card");return c(),j(y,null,{default:o(()=>[e(C,null,{default:o(()=>[e(l),e(p,null,{default:o(()=>[e(h,null,{default:o(()=>[e(u,{onClick:t.openAddOtherOPDMedicationModal,color:"primary",style:{float:"right"}},{default:o(()=>[e(d,{icon:t.medkit,slot:"start"},null,8,["icon"]),n[0]||(n[0]=s("span",{style:{"margin-left":"10px","font-size":"16px","font-weight":"600"}}," ADD Other Medication",-1))]),_:1,__:[0]},8,["onClick"])]),_:1})]),_:1}),e(p,null,{default:o(()=>[e(w,null,{default:o(()=>[e(S)]),_:1})]),_:1})]),_:1})]),_:1})}const An=B(Ln,[["render",Fn],["__scopeId","data-v-a4ad7088"]]),Vn={style:{"margin-top":"14px","margin-left":"10px"}},En={class:"ion-padding",slot:"content"},xn={key:0},Bn={class:"previousSecDrgs"},Hn={class:"ion-padding",slot:"content"},Rn={class:"previousSecDrgs"},jn=E({watch:{},name:"xxxComponent"}),zn=E({...jn,setup(t){const n=$(),_=$(),b=$(!1),m=$(!1),a=$("Show more notes");se(async()=>{const u=new Me,{previousClinicalNotes:h}=await u.getPatientEncounters();n.value=Object.entries(h)[0];const[,...p]=Object.entries(h);_.value=p});function l(u){const h=u.detail.value;h!==void 0?h=="third"&&(a.value="Show less notes",m.value=!b.value):(a.value="Show more notes",m.value=!b.value)}function d(u){return u[1]}return(u,h)=>(c(),j(r(K),null,{default:o(()=>[s("div",Vn,[e(r(Z),{ref:"accordionGroup",class:"previousView"},{default:o(()=>[e(r(ee),{value:"fourth","toggle-icon-slot":"start",style:{"border-radius":"10px","background-color":"#fff"}},{default:o(()=>[e(r(R),{slot:"header",color:"light"},{default:o(()=>[e(r(O),{class:"previousLabel"},{default:o(()=>h[0]||(h[0]=[k("Previous visits notes",-1)])),_:1,__:[0]})]),_:1}),s("div",En,[(c(!0),g(A,null,x(n.value,(p,S)=>(c(),g("div",{class:"ionLbltp",key:S},[S==1?(c(),g("div",xn,[(c(!0),g(A,null,x(p,(w,C)=>(c(),g("div",{key:C},[s("div",null,[e(r(O),{class:"previousLabelDate"},{default:o(()=>[k(V(w.date),1)]),_:2},1024)]),s("div",Bn,[e(r(G),null,{default:o(()=>[e(r(O),{class:"notes_p"},{default:o(()=>[k(V(w.notes),1)]),_:2},1024)]),_:2},1024)])]))),128))])):H("",!0)]))),128)),e(r(Z),{onIonChange:l},{default:o(()=>[e(r(ee),{value:"third","toggle-icon-slot":"start",style:{"border-radius":"10px","background-color":"#fff"}},{default:o(()=>[e(r(R),{slot:"header",color:"light"},{default:o(()=>[e(r(O),{class:"",color:"primary"},{default:o(()=>[k(V(a.value),1)]),_:1})]),_:1}),s("div",Hn,[(c(!0),g(A,null,x(_.value,(p,S)=>(c(),g("div",{class:"ionLbltp",key:S},[(c(!0),g(A,null,x(d(p),(w,C)=>(c(),g("div",{key:C},[s("div",null,[e(r(O),{class:"previousLabelDate"},{default:o(()=>[k(V(w.date),1)]),_:2},1024)]),s("div",Rn,[e(r(G),null,{default:o(()=>[e(r(O),{class:"notes_p"},{default:o(()=>[k(V(w.notes),1)]),_:2},1024)]),_:2},1024)])]))),128))]))),128))])]),_:1})]),_:1})])]),_:1})]),_:1},512)])]),_:1}))}}),Jn=B(zn,[["__scopeId","data-v-994df42d"]]),Gn={style:{"margin-top":"14px","margin-left":"10px"}},Un=E({watch:{},name:"xxxComponent"}),Wn=E({...Un,setup(t){const n=_e(),_=Q,b=X(()=>n.nonPharmalogicalTherapyAndOtherNotes);function m(l){let d=l.target.value;a(d)}function a(l){_e().setNonPharmalogicalTherapyAndOtherNotes(l)}return(l,d)=>(c(),j(r(K),null,{default:o(()=>[e(r($e),null,{default:o(()=>[e(r(O),{class:"tpStndCls"},{default:o(()=>[e(r(U),{icon:r(dt),class:"header-icon","aria-hidden":"true"},null,8,["icon"]),d[1]||(d[1]=k(" Non-pharmalogical therapy and other notes ",-1))]),_:1,__:[1]})]),_:1}),e(r(Se),null,{default:o(()=>[s("div",null,[e(Ft),e(r(R),{class:"input_item",style:{"min-height":"120px","margin-top":"14px"}},{default:o(()=>[e(r(O),null,{default:o(()=>[e(r(U),{slot:"start",icon:r(_).editPen,"aria-hidden":"true"},null,8,["icon"])]),_:1}),e(r(ct),{onIonInput:m,modelValue:b.value,"onUpdate:modelValue":d[0]||(d[0]=u=>b.value=u),style:{"min-height":"120px"},class:"inputTpln","auto-grow":!0,fill:"outline"},null,8,["modelValue"])]),_:1})]),s("div",Gn,[e(Jn)])]),_:1})]),_:1}))}}),Yn=B(Wn,[["__scopeId","data-v-fd19ec21"]]),qn={class:"ion-padding",slot:"content"},Kn={key:0},Qn={class:"previousSecDrgs"},Xn={class:"ion-padding",slot:"content"},Zn={class:"previousSecDrgs"},eo=E({watch:{},name:"xxxComponent"}),to=E({...eo,setup(t){const n=$(!1),_=$(!1),b=$("Show more allergies"),m=$(),a=$();se(async()=>{const u=new Me,{previousDrugAllergies:h}=await u.getPatientEncounters();m.value=Object.entries(h)[0];const[,...p]=Object.entries(h);a.value=p});function l(u){const h=u.detail.value;h!==void 0?h=="fith"&&(b.value="Show less allegies",_.value=!n.value):(b.value="Show more allegies",_.value=!n.value)}function d(u){return u[1]}return(u,h)=>{const p=i("ion-card");return c(),j(p,null,{default:o(()=>[e(r(Z),{ref:"accordionGroup",class:"previousView"},{default:o(()=>[e(r(ee),{value:"fourth","toggle-icon-slot":"start",style:{"border-radius":"10px","background-color":"#fff"}},{default:o(()=>[e(r(R),{slot:"header",color:"light"},{default:o(()=>[e(r(O),{class:"previousLabel"},{default:o(()=>h[0]||(h[0]=[k("Documented allergies timeline",-1)])),_:1,__:[0]})]),_:1}),s("div",qn,[(c(!0),g(A,null,x(m.value,(S,w)=>(c(),g("div",{class:"ionLbltp",key:w},[w==1?(c(),g("div",Kn,[s("div",null,[e(r(O),{class:"previousLabelDate"},{default:o(()=>[k(V(S[0].date),1)]),_:2},1024)]),(c(!0),g(A,null,x(S,(C,y)=>(c(),g("div",{key:y},[s("div",Qn,[e(r(G),null,{default:o(()=>[e(r(O),{class:"notes_p"},{default:o(()=>[k(V(C.value),1)]),_:2},1024)]),_:2},1024)])]))),128))])):H("",!0)]))),128)),e(r(Z),{onIonChange:l},{default:o(()=>[e(r(ee),{value:"fith","toggle-icon-slot":"start",style:{"border-radius":"10px","background-color":"#fff"}},{default:o(()=>[e(r(R),{slot:"header",color:"light"},{default:o(()=>[e(r(O),{class:"",color:"primary"},{default:o(()=>[k(V(b.value),1)]),_:1})]),_:1}),s("div",Xn,[(c(!0),g(A,null,x(a.value,(S,w)=>(c(),g("div",{class:"ionLbltp",key:w},[s("div",null,[e(r(O),{class:"previousLabelDate"},{default:o(()=>[k(V(S[0]),1)]),_:2},1024)]),(c(!0),g(A,null,x(d(S),(C,y)=>(c(),g("div",{key:y},[s("div",Zn,[e(r(G),null,{default:o(()=>[e(r(O),{class:"notes_p"},{default:o(()=>[k(V(C.value),1)]),_:2},1024)]),_:2},1024)])]))),128))]))),128))])]),_:1})]),_:1})])]),_:1})]),_:1},512)]),_:1})}}}),no=B(to,[["__scopeId","data-v-358c5959"]]),oo={class:"background"},so={key:0},ao={style:{margin:"10px"}},io={key:1},lo={style:{margin:"10px"}},ro={key:2},co={style:{margin:"10px"}},uo=E({__name:"TreatmentPlan",setup(t){const n=$(["medications","allergies","other_notes"]),_=$(n.value[0]);se(()=>{b(n.value[0])});function b(m){_.value=m}return(m,a)=>(c(),g("div",oo,[e(r(ut),{value:_.value,style:{"margin-top":"5px"}},{default:o(()=>[e(r(ve),{value:"medications",onClick:a[0]||(a[0]=l=>b(n.value[0]))},{default:o(()=>[e(r(O),null,{default:o(()=>a[3]||(a[3]=[k("Medications",-1)])),_:1,__:[3]})]),_:1}),e(r(ve),{value:"allergies",onClick:a[1]||(a[1]=l=>b(n.value[1]))},{default:o(()=>[e(r(O),null,{default:o(()=>a[4]||(a[4]=[k("Allergies",-1)])),_:1,__:[4]})]),_:1}),e(r(ve),{value:"other_notes",onClick:a[2]||(a[2]=l=>b(n.value[2]))},{default:o(()=>[e(r(O),null,{default:o(()=>a[5]||(a[5]=[k("Non-pharmalogical therapy and other notes",-1)])),_:1,__:[5]})]),_:1})]),_:1},8,["value"]),_.value===n.value[0]?(c(),g("div",so,[s("div",ao,[e(An)])])):H("",!0),_.value===n.value[1]?(c(),g("div",io,[s("div",lo,[e(At),e(no,{style:{"margin-top":"10px"}})])])):H("",!0),_.value===n.value[2]?(c(),g("div",ro,[s("div",co,[e(Yn)])])):H("",!0)]))}}),$o=B(uo,[["__scopeId","data-v-d844be41"]]);export{Co as C,So as D,$o as T,Jt as u};
