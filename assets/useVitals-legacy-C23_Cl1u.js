System.register(["./SvgDynamicColor-legacy-C92HKfAB.js","./index-legacy-DhOsa4Y5.js","./vendor-legacy-CFX0KWSj.js","./lodash-legacy-pOOc9Efu.js"],function(e,t){"use strict";var a,i,n,l,o,r,s,u,d,c,v,p,m,y,D,g;return{setters:[e=>{a=e.c},e=>{i=e.i,n=e.u,l=e.Q,o=e.P,r=e.Z,s=e.aj,u=e.X,d=e.H,c=e.aN,v=e.w},e=>{p=e.R,m=e.r,y=e.c,D=e.O},e=>{g=e.l}],execute:function(){e("u",function(){const e=m({}),t=m({});let i=m({});const p=n(),g=y(()=>p.patient),B=h();i=y(()=>B.vitals);const b=async()=>{var t,a,n,l,o,r;if(!i.value[0])return;const s=null!==(t=null===(a=e.value)||void 0===a?void 0:a.color)&&void 0!==t?t:[];return S("bmi","BMI "+(null!==(n=null===(l=e.value)||void 0===l?void 0:l.index)&&void 0!==n?n:""),"",{colors:s,value:null!==(o=null===(r=e.value)||void 0===r?void 0:r.result)&&void 0!==o?o:""},u.iconBMI(s))},S=async(e,t,a,i,n="")=>{var l,o;if(!t)return;const r=t+" "+a,s=null!==(l=null==i?void 0:i.colors)&&void 0!==l?l:[];return{icon:n||"",textColor:s[1],index:r,backgroundColor:s[0],value:null!==(o=null==i?void 0:i.value)&&void 0!==o?o:""}},N=(e,t)=>{if(e&&t){let a,i,n,l;const r=(new o).getAge();return r<1?(a=75,i=100,n=50,l=70):r>=1&&r<6?(a=80,i=110,n=50,l=80):r>=6&&r<13?(a=85,i=120,n=55,l=80):r>=13&&r<18?(a=95,i=140,n=60,l=90):(a=100,i=130,n=60,l=90),e<a&&t<n?{colors:["#B9E6FE","#026AA2","#9ADBFE"],value:"Low BP "}:e>=a&&e<=i&&t>=n&&t<=l?{colors:["#DDEEDD","#016302","#BBDDBC"],value:"Normal BP "}:e>140&&t>90?{colors:["#FECDCA","#B42318","#FDA19B"],value:"High BP"}:e<a?{colors:["#B9E6FE","#026AA2","#9ADBFE"],value:"Low BP (Using Systolic Only)"}:e>=a&&e<=i?{colors:["#DDEEDD","#016302","#BBDDBC"],value:"Normal BP (Using Systolic Only)"}:{colors:["#FECDCA","#B42318","#FDA19B"],value:"High BP (Using Systolic Only)"}}return{}};return{BMI:e,BPStatus:t,vitalsData:i,patient:g,setTodayVitals:async()=>{var e;const t=d.getAgeInYears(null===(e=g.value)||void 0===e||null===(e=e.personInformation)||void 0===e?void 0:e.birthdate),a=["Height (cm)","Weight","Systolic","Diastolic","Temperature","Pulse","SAO2","Respiratory rate"].map(async e=>{const a=await l.getFirstObsDatetime(g.value.patientID,e);a&&d.toStandardHisFormat(a)==d.sessionDate()?("Weight"==e&&c(i.value,"Height And Weight Not Done","displayNone",!0),"Systolic"==e&&c(i.value,"Blood Pressure Not Done","displayNone",!0),"Pulse"==e&&c(i.value,"Pulse Rate Not Done","displayNone",!0),"Respiratory rate"==e&&c(i.value,"Respiratory rate Not Done","displayNone",!0),v(i.value,e,"value",await l.getFirstValueNumber(g.value.patientID,e,d.sessionDate())),v(i.value,e,"disabled",!0)):v(i.value,e,"value",""),"Respiratory rate"===e&&t<=5&&(v(i.value,e,"required",!0),v(i.value,e,"inputHeader","Respiratory rate*"))});await Promise.all(a)},setBMI:async(t,a)=>{var i,n,l,o;return null!==(i=g.value)&&void 0!==i&&null!==(i=i.personInformation)&&void 0!==i&&i.gender&&null!==(n=g.value)&&void 0!==n&&null!==(n=n.personInformation)&&void 0!==n&&n.birthdate&&null==s.vitalsHeight(t)&&null==s.vitalsWeight(a)?e.value=await u.getBMI(parseInt(a),parseInt(t),null===(l=g.value)||void 0===l||null===(l=l.personInformation)||void 0===l?void 0:l.gender,d.calculateAge(null===(o=g.value)||void 0===o||null===(o=o.personInformation)||void 0===o?void 0:o.birthdate,d.sessionDate())):e.value={},await b()},updateBMI:b,updateBP:async(e,i)=>{var n,l,o,r;t.value=N(e,i),null==s.vitalsSystolic(e)&&null==s.vitalsDiastolic(i)||(t.value={});const u=null!==(n=null===(l=t.value)||void 0===l?void 0:l.colors)&&void 0!==n?n:[];return S("bp",e+"/"+i,"mmHg",{colors:u,value:null!==(o=null===(r=t.value)||void 0===r?void 0:r.value)&&void 0!==o?o:""},a(u))},updateRate:S,getBloodPressureStatus:N,getTemperatureStatus:e=>{if(e&&null==s.vitalsTemperature(e)){let t,a;const i=(new o).getAge();if(i<=1)t=35.5,a=37.4;else if(i>=1&&i<=18)t=35.5,a=37.4;else if(i>=19&&i<=64)t=35.5,a=37.4;else{if(!(i>=65))return{};t=35.5,a=37.4}if(e<t)return{colors:["#B9E6FE","#026AA2","#9ADBFE"],value:"Low Temperature "};if(e>=t&&e<=a)return{colors:["#DDEEDD","#016302","#BBDDBC"],value:"Normal Temperature "};if(e>a)return{colors:["#FECDCA","#B42318","#FDA19B"],value:"High Temperature "}}return{}},getPulseRateStatus:e=>{if(null==s.vitalsPulseRate(e)){let t,a;const i=(new o).getAge();if(i<=.25)t=100,a=160;else if(i>=.25&&i<=1)t=80,a=120;else if(i>=1&&i<=2)t=80,a=120;else if(i>=6&&i<=12)t=70,a=100;else if(i>=13&&i<=18)t=55,a=90;else{if(!(i>=18))return{};t=60,a=100}if(e<t)return{colors:["#B9E6FE","#026AA2","#9ADBFE"],value:"Low Pulse Rate "};if(e>=t&&e<=a)return{colors:["#DDEEDD","#016302","#BBDDBC"],value:"Normal Pulse Rate "};if(e>a)return{colors:["#FECDCA","#B42318","#FDA19B"],value:"High Pulse Rate "}}return{}},getOxygenSaturationStatus:e=>{if(e&&null==s.vitalsOxygenSaturation(e)){const t=95;if(e<t)return{colors:["#B9E6FE","#026AA2","#9ADBFE"],value:"Low oxygen saturation"};if(e>=t&&e<=100)return{colors:["#DDEEDD","#016302","#BBDDBC"],value:"Normal oxygen saturation"}}return{}},getRespiratoryRateStatus:e=>{if(null==s.vitalsRespiratoryRate(e)){let t,a;const i=(new o).getAge();if(i<=1)t=30,a=60;else if(i>=1&&i<3)t=24,a=40;else if(i>=3&&i<=6)t=22,a=34;else if(i>=6&&i<=12)t=18,a=30;else if(i>=12&&i<=18)t=12,a=16;else{if(!(i>=19))return{};t=12,a=20}if(e<t)return{colors:["#B9E6FE","#026AA2","#9ADBFE"],value:"Low respiratory rate"};if(e>=t&&e<=a)return{colors:["#DDEEDD","#016302","#BBDDBC"],value:"Normal respiratory rate"};if(e>a)return{colors:["#FECDCA","#B42318","#FDA19B"],value:"High respiratory rate"}}return{}},checkHeight:async()=>{var e,t;const a=[...(null===(e=g.value)||void 0===e||null===(e=e.vitals)||void 0===e?void 0:e.saved)||[],...(null===(t=g.value)||void 0===t||null===(t=t.vitals)||void 0===t?void 0:t.unsaved)||[]],i=await r(a,"value_numeric",5090),n=await r(a,"obs_datetime",5090),l=new o;if(i&&!(D(n).diff(l.getBirthdate(),"year")<18||l.getAge()<18))return i},checkHeightServer:async()=>{const e=await l.getFirstValueNumber(g.value.patientID,"Height (cm)"),t=await l.getFirstObsDatetime(g.value.patientID,"Height (cm)"),a=new o;if(e&&!(D(t).diff(a.getBirthdate(),"year")<18||a.getAge()<18))return e}}});const t=[{isFinishBtn:!1,validationStatus:"",sectionHeader:"Height and weight",actionBtn:"Finish and Save",data:{rowData:[{colData:[{inputHeader:"Height*",unit:"cm",icon:i.height,value:"",name:"Height (cm)",required:!0,eventType:"input",alertsErrorMassage:"",disabled:!1,valueType:"number",inputType:"number",validationFunctionName:"vitalsHeight"},{inputHeader:"Weight*",unit:"kg",icon:i.weight,value:"",name:"Weight",required:!0,eventType:"input",alertsErrorMassage:"",disabled:!1,valueType:"number",inputType:"number",validationFunctionName:"vitalsWeight"}]}]},alerts:[{backgroundColor:"",status:"",icon:"",textColor:"",value:"",name:"bmi",index:""}],previousView:{name:"vitals"}},{classDash:"",selectedData:[],sideColSize:3.8,checkboxBtnContent:{header:{title:"",selectedValue:" ",displayNone:!1,name:"Height Not Done"},data:[{colSize:"5.8",name:"Height Not Done",value:"Height Not Done",checked:!1,displayNone:!1}],inputFields:[{inputHeader:"Specify Reason",icon:i.search,isMultiSelect:!0,isCheckboxInputField:!0,popOver:!0,value:"",name:"Height (cm)",valueType:"text",multiSelectData:[{id:1,name:"Patient uncooperative"},{id:2,name:"Machine not working"},{id:3,name:"Machine not available"}],eventType:"input",required:!0,id:"",idName:"district_id",displayNone:!0}]}},{classDash:"dashed_bottom_border",selectedData:[],sideColSize:3.8,checkboxBtnContent:{header:{title:"",selectedValue:" "},data:[{colSize:"5.8",name:"Weight Not Done",value:"Weight Not Done",checked:!1,displayNone:!1}],inputFields:[{inputHeader:"Specify Reason",icon:i.search,isMultiSelect:!0,isCheckboxInputField:!0,popOver:!0,value:"",name:"Weight",valueType:"text",multiSelectData:[{id:1,name:"Patient uncooperative"},{id:2,name:"Machine not working"},{id:3,name:"Machine not available"}],eventType:"input",required:!0,id:"",idName:"district_id",displayNone:!0}]}},{sectionHeader:"Blood pressure",data:{rowData:[{colData:[{inputHeader:"Systolic Pressure*",unit:"mmHg",icon:i.systolicPressure,value:"",name:"Systolic",required:!0,eventType:"input",disabled:!1,valueType:"number",inputType:"number",validationFunctionName:"vitalsSystolic"},{inputHeader:"Diastolic pressure*",unit:"mmHg",icon:i.diastolicPressure,value:"",name:"Diastolic",required:!0,eventType:"input",disabled:!1,valueType:"number",inputType:"number",validationFunctionName:"vitalsDiastolic"}]}]},alerts:[{backgroundColor:"",status:"",icon:"",textColor:"",value:"",name:"bp",index:""}],previousView:{name:"vitals"}},{classDash:"dashed_bottom_border",selectedData:[],sideColSize:3.8,checkboxBtnContent:{header:{title:"",selectedValue:" ",name:"Primary diagnosis"},data:[{colSize:"5.8",name:"Blood Pressure Not Done",value:"Blood Pressure Not Done",checked:!1,displayNone:!1}],inputFields:[{inputHeader:"Specify Reason",icon:i.search,isMultiSelect:!0,isCheckboxInputField:!0,popOver:!0,value:"",name:"Blood Pressure",valueType:"text",multiSelectData:[{id:1,name:"Patient uncooperative"},{id:2,name:"Machine not working"},{id:3,name:"Machine not available"}],eventType:"input",required:!0,alertsErrorMassage:"",id:"",idName:"district_id",displayNone:!0}]}},{sectionHeader:"Temperature and rates",data:{rowData:[{colData:[{inputHeader:"Temperature*",unit:"C",icon:i.temprature,value:"",name:"Temperature",eventType:"input",valueType:"number",inputType:"number",validationFunctionName:"vitalsTemperature"},{inputHeader:"Pulse rate*",unit:"BMP",icon:i.pulse,value:"",name:"Pulse",eventType:"input",valueType:"number",inputType:"number",validationFunctionName:"vitalsPulseRate"}]}]},alerts:[{backgroundColor:"",status:"",icon:"",textColor:"",value:"",name:"temp",index:""},{backgroundColor:"",status:"",icon:"",textColor:"",value:"",name:"pulse",index:""}]},{selectedData:[],sideColSize:3.8,checkboxBtnContent:{header:{title:"",selectedValue:" ",name:"Primary diagnosis"},data:[{colSize:"5.8",name:"Pulse Rate Not Done",value:"Pulse Rate Not Done",checked:!1,displayNone:!1}],inputFields:[{inputHeader:"Specify Reason",icon:i.search,isMultiSelect:!0,isCheckboxInputField:!0,popOver:!0,value:"",name:"Pulse",valueType:"text",multiSelectData:[{id:1,name:"Patient uncooperative"},{id:2,name:"Machine not working"},{id:3,name:"Machine not available"}],eventType:"input",required:!0,alertsErrorMassage:"",id:"",idName:"district_id",displayNone:!0}]}},{classDash:"dashed_bottom_border",selectedData:[],sideColSize:3.8,checkboxBtnContent:{header:{title:"",selectedValue:" ",name:"Primary diagnosis"},data:[{colSize:"5.8",name:"Temperature Not Done",value:"Temperature Not Done",checked:!1,displayNone:!1}],inputFields:[{inputHeader:"Specify Reason",icon:i.search,isMultiSelect:!0,isCheckboxInputField:!0,popOver:!0,value:"",name:"Temperature",valueType:"text",multiSelectData:[{id:1,name:"Patient uncooperative"},{id:2,name:"Machine not working"},{id:3,name:"Machine not available"}],eventType:"input",required:!0,alertsErrorMassage:"",id:"",idName:"district_id",displayNone:!0}]}},{sectionHeader:"null",data:{rowData:[{colData:[{inputHeader:"Respiratory rate*",unit:"BMP",icon:i.respiratory,value:"",name:"Respiratory rate",eventType:"input",valueType:"number",inputType:"number",validationFunctionName:"vitalsRespiratoryRate"},{inputHeader:"Oxygen saturation*",unit:"%",icon:i.oxgenStaturation,value:"",name:"SAO2",eventType:"input",valueType:"number",inputType:"number",validationFunctionName:"vitalsOxygenSaturation"}]}]},alerts:[{backgroundColor:"",status:"",icon:"",textColor:"",value:"",name:"respiratory",index:""},{backgroundColor:"",status:"",icon:"",textColor:"",value:"",name:"oxygen",index:""}]},{selectedData:[],sideColSize:3.8,checkboxBtnContent:{header:{title:"",selectedValue:" ",name:"Primary diagnosis"},data:[{colSize:"5.8",name:"Respiratory rate Not Done",value:"Respiratory rate Not Done",checked:!1,displayNone:!1}],inputFields:[{inputHeader:"Specify Reason",icon:i.search,isMultiSelect:!0,isCheckboxInputField:!0,popOver:!0,value:"",name:"Respiratory rate",valueType:"text",multiSelectData:[{id:1,name:"Patient uncooperative"},{id:2,name:"Machine not working"},{id:3,name:"Machine not available"}],eventType:"input",required:!0,alertsErrorMassage:"",id:"",idName:"district_id",displayNone:!0}]}},{classDash:"dashed_bottom_border",selectedData:[],sideColSize:3.8,checkboxBtnContent:{header:{title:"",selectedValue:" ",name:"Primary diagnosis"},data:[{colSize:"5.8",name:"Oxygen saturation Not Done",value:"Oxygen saturation Not Done",checked:!1,displayNone:!1}],inputFields:[{inputHeader:"Specify Reason",icon:i.search,isMultiSelect:!0,isCheckboxInputField:!0,popOver:!0,value:"",name:"SAO2",valueType:"text",multiSelectData:[{id:1,name:"Patient uncooperative"},{id:2,name:"Machine not working"},{id:3,name:"Machine not available"}],eventType:"input",required:!0,alertsErrorMassage:"",id:"",idName:"district_id",displayNone:!0}]}}],h=e("a",p("NCDVitalsStore",{state:()=>({vitals:[...t],current_patient:{}}),actions:{setVitals(e){this.vitals=e},getInitialVitals(e){var a;return null!==(a=this.current_patient)&&void 0!==a&&a.ID&&this.current_patient.ID,g.cloneDeep(t)},setCurrentPatient(e){this.current_patient=e}},persist:!0}))}}});
