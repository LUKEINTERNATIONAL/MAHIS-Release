System.register(["./vendor-legacy-COMGl7lq.js","./index-legacy-CxlM2t-h.js","./lab_order-legacy-DMkehRlE.js","./chartjs-legacy-DLK-WOUN.js","./app_encounter_service-legacy-CswLfZSU.js","./consultation_service-legacy-DThiTZ3t.js","./DatePicker.vue_vue_type_script_setup_true_lang-legacy-B3XcQ0Sj.js","./lodash-legacy-C-x9g9Na.js"],(function(e,a){"use strict";var t,l,n,o,i,d,s,r,c,u,v,p,m,f,g,h,b,_,y,x,w,C,k,S,V,D,N,M,E,T,I,P,O,z,B,L,F,A,R,H,U,j,q,W,Y,$,G,X,Z,J,K,Q,ee,ae,te,le,ne,oe,ie,de,se,re,ce,ue,ve,pe,me,fe,ge,he,be,_e,ye,xe,we,Ce,ke,Se,Ve,De,Ne,Me,Ee,Te,Ie,Pe,Oe,ze;return{setters:[e=>{t=e.r,l=e.O,n=e.c,o=e.a,i=e.d,d=e.y,s=e.f,r=e.u,c=e.bg,u=e.z,v=e.l,p=e.S,m=e.U,f=e.k,g=e.T,h=e.A,b=e.B,_=e.bf,y=e.W,x=e.I,w=e.ah,C=e.ad,k=e.an,S=e.e,V=e.m,D=e.G,N=e.D,M=e.aw,E=e.ax,T=e.F,I=e.bP,P=e.L,O=e.ay,z=e.V,B=e.du,L=e.w,F=e.c_,A=e.aj,R=e.p,H=e.aA,U=e.az,j=e.aa,q=e.cv,W=e.cu,Y=e.ab,$=e.ac,G=e.aK,X=e.E,Z=e.bZ,J=e.n,K=e.M,Q=e.J,ee=e.e1,ae=e.bq,te=e.e2,le=e.av,ne=e.e3,oe=e.ar,ie=e.e4,de=e.bn,se=e.c$,re=e.dn,ce=e.dp,ue=e.e5,ve=e.a$,pe=e.ag},e=>{me=e.P,fe=e.t,ge=e.m,he=e.az,be=e.k,_e=e.A,ye=e.J,xe=e.u,we=e.Z,Ce=e._,ke=e.H,Se=e.S,Ve=e.ad,De=e.a3,Ne=e.cn,Me=e.co,Ee=e.e},e=>{Te=e.a},e=>{Ie=e.C},e=>{Pe=e.A},e=>{Oe=e.C},e=>{ze=e._},null],execute:function(){var a=document.createElement("style");a.textContent='.side-effects-grid[data-v-9c8f6d00]{display:flex;flex-direction:column;gap:15px;margin-top:10px}.side-effect-item[data-v-9c8f6d00]{display:flex;flex-direction:column;border:1px dotted #eae9e9;border-radius:5px;padding:12px}.checkbox-container[data-v-9c8f6d00]{display:flex;align-items:center;gap:8px}.checkbox-label[data-v-9c8f6d00]{font-size:14px}.reason-summary[data-v-9c8f6d00]{display:flex;justify-content:space-between;align-items:center;margin-left:30px;margin-top:12px;padding-top:12px;border-top:1px dashed #eee}.reason-label[data-v-9c8f6d00]{font-weight:500;font-size:14px;display:flex;align-items:center}.drug-induced[data-v-9c8f6d00]{color:var(--ion-color-primary);background-color:rgba(0,100,2,.035);padding:4px 8px;border-radius:4px}.not-drug-induced[data-v-9c8f6d00]{padding:4px 8px;border-radius:4px}.edit-button[data-v-9c8f6d00]{font-size:12px;--padding-start: 8px;--padding-end: 8px}[data-v-9c8f6d00] ion-checkbox{--size: 20px;--checkbox-background-checked: var(--ion-color-primary);--border-radius: 2px;margin:0}.tb-symptoms-grid[data-v-d67e9ce3]{display:grid;grid-template-columns:1fr 1fr;gap:15px;margin-top:10px}.checkbox-option[data-v-d67e9ce3]{display:flex;align-items:center;gap:8px}.checkbox-label[data-v-d67e9ce3]{font-size:14px}[data-v-d67e9ce3] ion-checkbox{--size: 20px;--checkbox-background-checked: var(--ion-color-primary);--border-radius: 2px;margin:0}.contraceptives-section[data-v-9a45c4b4]{padding:16px}.section-header h3[data-v-9a45c4b4]{margin:0 0 16px;font-size:18px;font-weight:600;color:var(--ion-color-dark)}.selected-methods[data-v-9a45c4b4]{display:flex;flex-wrap:wrap;gap:8px;margin-bottom:16px}.method-tag[data-v-9a45c4b4]{display:flex;align-items:center;gap:8px;padding:8px 12px;background-color:var(--ion-color-primary);color:#fff;border-radius:20px;font-size:14px;font-weight:500}.method-tag.none-tag[data-v-9a45c4b4]{background-color:var(--ion-color-primary)}.remove-icon[data-v-9a45c4b4]{cursor:pointer;font-size:16px}.methods-list[data-v-9a45c4b4]{display:flex;flex-direction:column;gap:12px;margin-bottom:16px}.method-item[data-v-9a45c4b4]{padding:12px;border:1px solid var(--ion-color-light);border-radius:8px;transition:all .2s ease}.method-item[data-v-9a45c4b4]:not(.disabled):hover{background-color:var(--ion-color-light)}.method-item.disabled[data-v-9a45c4b4]{opacity:.5;background-color:var(--ion-color-light-shade)}.validation-errors[data-v-9a45c4b4]{margin-bottom:16px}.error-message[data-v-9a45c4b4]{color:var(--ion-color-danger);font-size:14px;margin-bottom:4px}.action-buttons[data-v-9a45c4b4]{display:flex;gap:12px;justify-content:flex-end}.action-buttons ion-button[data-v-9a45c4b4]{min-width:100px}.info-container[data-v-0b657069]{margin:0 auto}.info-card[data-v-0b657069]{background:#fafafa;border:1px solid #ececec;border-radius:5px;padding:20px;margin-bottom:16px;position:relative}.close-button[data-v-0b657069]{position:absolute;top:16px;right:16px;background:none;border:none;cursor:pointer;padding:4px;border-radius:4px;transition:color .2s ease}.close-icon[data-v-0b657069]{width:20px;height:20px}.main-message[data-v-0b657069]{display:flex;align-items:flex-start;margin-bottom:16px;padding-right:40px}.info-icon[data-v-0b657069]{width:40px;height:40px;margin-right:16px;margin-top:4px;flex-shrink:0}.message-content h2[data-v-0b657069]{color:#374151;font-size:1.3rem;font-weight:600;margin:0 0 12px}.info-list[data-v-0b657069]{list-style:none;padding:0;margin:0}.info-list li[data-v-0b657069]{color:#6b7280;font-size:.95rem;margin-bottom:8px;display:flex;align-items:center}.info-list li[data-v-0b657069]:before{content:"âˆ’";color:#ececec;font-weight:700;margin-right:8px;font-size:1.2rem}.data-rows[data-v-0b657069]{margin-top:0}.data-row[data-v-0b657069]{display:flex;justify-content:space-between;align-items:center;padding:8px 0;border-bottom:1px solid #ececec}.data-row[data-v-0b657069]:last-child{border-bottom:none}.data-label[data-v-0b657069]{color:#374151;font-weight:500;display:flex;align-items:center}.data-icon[data-v-0b657069]{width:16px;height:16px;margin-right:8px}.data-value[data-v-0b657069]{color:#111827;font-weight:600}.months-value[data-v-0b657069]{color:#ef4444;font-size:1.2rem;font-weight:700}.na-value[data-v-0b657069]{color:#6b7280;font-style:italic}.learn-more-section[data-v-0b657069]{margin-top:16px}.cervical-cancer-container[data-v-bee1d69f]{padding:10px}.loading-container[data-v-bee1d69f]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:20px}.reminder-banner[data-v-bee1d69f]{background-color:rgba(255,206,86,.2);border-left:4px solid #ffce56;padding:10px;margin-bottom:15px;border-radius:4px}.save-button-container[data-v-bee1d69f]{display:flex;gap:12px;justify-content:flex-end}.radio-group[data-v-bee1d69f]{display:flex;align-items:center}ion-card[data-v-0691f3a9]{--background: white;box-shadow:0 2px 8px rgba(0,0,0,.1)}ion-item[data-v-0691f3a9]{--background: white}ion-accordion[data-v-0691f3a9]{--background: white}ion-accordion-group[data-v-0691f3a9]{--background: white}ion-card-content[data-v-0691f3a9]{--background: white;background-color:#fff}ion-card-title[data-v-0691f3a9]{font-size:1.5rem;font-weight:700;margin-bottom:4px}ion-row[data-v-0691f3a9]{display:flex;flex-wrap:nowrap;gap:1rem;align-items:center;width:100%}ion-col[data-v-0691f3a9]{margin-bottom:1rem;display:flex;flex-direction:column}ion-card-header[data-v-0691f3a9]{border-bottom:1px dotted #969696;margin-bottom:10px}.ion-accordion[data-v-0691f3a9]{overflow:visible!important}.ion-accordion-content[data-v-0691f3a9]{overflow:visible!important;z-index:1000}.ion-card[data-v-0691f3a9],.single-row-grid[data-v-0691f3a9]{overflow:visible!important}ion-accordion[slot=content][data-v-0691f3a9]{overflow:visible!important}.bold[data-v-0691f3a9]{font-style:normal;font-weight:600;font-size:16px;color:#00190e}.single-row-grid[data-v-0691f3a9]{width:100%;position:relative}.single-row-grid ion-row[data-v-0691f3a9]{flex-wrap:nowrap!important}.single-row-grid ion-col[size=auto][data-v-0691f3a9]{flex:0 0 auto;width:auto}.align-items-center[data-v-0691f3a9]{align-items:center!important}.labl-cls[data-v-0691f3a9]{margin:0 10px 10px 0;color:gray;font-size:17px;font-weight:600}.select-container[data-v-0691f3a9]{position:relative;border-radius:4px;overflow:visible;display:flex;align-items:center;padding:0;height:48px;z-index:1}ion-col[data-v-0691f3a9],ion-row[data-v-0691f3a9],.multiselect[data-v-0691f3a9]{overflow:visible!important;position:relative}.form-actions[data-v-0691f3a9]{display:flex;align-items:center;margin-top:24px}.chart-container[data-v-0691f3a9]{min-height:400px;width:100%;position:relative;display:flex;flex-direction:column}.chart-header[data-v-0691f3a9]{display:flex;justify-content:space-between;align-items:center;margin-bottom:1rem}.chart-container ion-label[data-v-0691f3a9]{font-size:17px;margin-top:0;margin-bottom:0;font-weight:500}.loading-container[data-v-0691f3a9]{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);display:flex;flex-direction:column;align-items:center;justify-content:center}.loading-spinner[data-v-0691f3a9]{width:40px;height:40px;border:4px solid rgba(0,0,0,.1);border-radius:50%;border-top:4px solid #3498db;animation:spin-0691f3a9 1s linear infinite;margin-bottom:10px}@keyframes spin-0691f3a9{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.chart-canvas-container[data-v-0691f3a9]{height:300px;width:100%;margin-bottom:20px}.chart-canvas-container canvas[data-v-0691f3a9]{width:100%!important;height:100%!important}.hidden[data-v-0691f3a9]{display:none}.empty-data-container[data-v-0691f3a9]{position:relative;margin:40px auto;text-align:center;color:#666;font-size:16px;background-color:#fff;padding:20px;border-radius:8px;box-shadow:0 2px 4px rgba(0,0,0,.1);width:80%;max-width:400px}.error-container[data-v-0691f3a9],.validation-error[data-v-0691f3a9]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:20px;background-color:rgba(255,0,0,.05);border-radius:8px;margin-bottom:20px}.error-container ion-icon[data-v-0691f3a9],.validation-error ion-icon[data-v-0691f3a9]{font-size:24px;margin-bottom:10px}.error-container p[data-v-0691f3a9],.validation-error p[data-v-0691f3a9]{color:var(--ion-color-danger);font-weight:500;text-align:center;margin:0}.save-button-container[data-v-0691f3a9]{margin-top:20px;display:flex;justify-content:flex-end;position:relative;z-index:10}.completed-badge[data-v-0691f3a9]{display:inline-flex;background-color:var(--ion-color-primary);color:#fff;font-size:12px;padding:2px 8px;border-radius:12px;margin-left:10px;font-weight:500;justify-content:space-around;align-content:center;align-items:center}.side-effects-row[data-v-0691f3a9]{justify-content:space-between;margin-bottom:1.5rem}.radio-group[data-v-0691f3a9]{display:flex;gap:1rem}.horizontal-radio-group[data-v-0691f3a9]{display:flex;flex-direction:row;gap:2rem;margin-top:.5rem}.radio-option[data-v-0691f3a9]{display:flex;align-items:center;gap:.5rem;margin-bottom:10px}.tb-treatment-section[data-v-0691f3a9]{margin-bottom:1.5rem}.radio-item[data-v-0691f3a9]{--min-height: 35px;--padding-start: 0;--inner-padding-end: 0;--background: transparent;--border-color: transparent;--inner-border-width: 0}.side-effects-options[data-v-0691f3a9]{margin-top:1rem}.category-tabs[data-v-0691f3a9]{margin-bottom:1.5rem}.side-effects-section[data-v-0691f3a9]{margin-top:2rem}.side-effects-section h4[data-v-0691f3a9]{margin-top:0;margin-bottom:1rem;font-weight:500;font-size:1.1rem}.medication-options[data-v-0691f3a9]{display:flex;flex-direction:column;gap:1.5rem}.medication-option[data-v-0691f3a9]{background-color:rgba(0,100,2,.035);border-radius:8px;padding:12px}ion-segment[data-v-0691f3a9]{--background: rgba(0, 100, 2, .034)}.medication-option h5[data-v-0691f3a9]{margin-top:0;margin-bottom:.5rem;font-weight:500;font-size:1rem;color:var(--ion-color-primary)}.tb-treatment-row[data-v-0691f3a9]{justify-content:space-between;margin-bottom:1.5rem}.tb-symptoms-section[data-v-0691f3a9]{margin-bottom:2rem}.tb-symptoms-section h4[data-v-0691f3a9]{margin-top:0;margin-bottom:1rem;font-weight:500;font-size:1.1rem}.screening-section[data-v-0691f3a9]{margin-bottom:2rem}.screening-section .form-row[data-v-0691f3a9]{margin-bottom:1.5rem}.tb-status-section[data-v-0691f3a9],.tb-history-section[data-v-0691f3a9]{margin-bottom:1.5rem;position:relative}.form-label[data-v-0691f3a9]{font-weight:500;margin-right:1rem;min-width:150px}.form-label.required[data-v-0691f3a9]:after{content:" *";color:#d32f2f}.accordion-title-container[data-v-0691f3a9]{display:flex;align-items:center;width:100%}.section-icon[data-v-0691f3a9]{display:flex;align-items:center;justify-content:center;margin-right:16px;margin-bottom:5px;font-size:20px;color:var(--ion-color-primary);background-color:rgba(0,100,2,.145);border-radius:5px;padding:10px;width:45px;height:45px}.section-icon ion-icon[data-v-0691f3a9]{font-size:25px;color:var(--ion-color-primary)}.section-icon svg[data-v-0691f3a9]{color:var(--ion-color-primary)}[data-v-0691f3a9] .multiselect__input,[data-v-0691f3a9] .multiselect__placeholder,[data-v-0691f3a9] .multiselect__single,[data-v-0691f3a9] .multiselect__option{font-size:16px!important;font-weight:600!important}[data-v-0691f3a9] .multiselect__content,[data-v-0691f3a9] .multiselect__element{display:block!important}ion-item[slot=header][data-v-0691f3a9]{font-size:20px;padding-top:25px;font-weight:600;--inner-padding-end: 0;--background: white;background-color:#fff}ion-accordion[disabled] ion-item[slot=header][data-v-0691f3a9]{opacity:.7}ion-accordion[disabled] .section-icon[data-v-0691f3a9]{background-color:rgba(0,100,2,.05)}.lab-investigations-list[data-v-0691f3a9]{margin-top:20px;border-top:1px solid #eee;padding-top:15px}.section-title[data-v-0691f3a9]{font-size:18px;font-weight:600;margin-bottom:15px;color:#333}.header-row[data-v-0691f3a9]{font-weight:600;border-bottom:1px solid #eee;padding-bottom:8px;margin-bottom:8px}.investigation-row[data-v-0691f3a9]{border-bottom:1px solid #f5f5f5;padding:10px 0;align-items:center}.investigation-row[data-v-0691f3a9]:hover{background-color:rgba(0,0,0,.02)}.action-buttons[data-v-0691f3a9]{display:flex;justify-content:flex-start;gap:5px}.table-responsive[data-v-0691f3a9]{width:100%;overflow-x:auto;margin-bottom:15px}.lab-table[data-v-0691f3a9]{width:100%;border-collapse:collapse;margin-bottom:0}.lab-table thead th[data-v-0691f3a9]{font-weight:600;padding:10px;border-bottom:1px solid #dee2e6;text-align:left}.lab-table tbody td[data-v-0691f3a9]{padding:10px;vertical-align:middle;border-bottom:1px solid #f5f5f5}.lab-table tbody tr[data-v-0691f3a9]:hover{background-color:rgba(0,0,0,.02)}\n/*$vite$:1*/',document.head.appendChild(a);const Be=[{category:"contraindication",concept_id:821,name:"Peripheral neuropathy"},{category:"contraindication",concept_id:215,name:"Jaundice"},{category:"contraindication",concept_id:2148,name:"Lipodystrophy"},{category:"contraindication",concept_id:9242,name:"Kidney Failure"},{category:"contraindication",concept_id:219,name:"Psychosis"},{category:"contraindication",concept_id:9440,name:"Gynaecomastia"},{category:"contraindication",concept_id:3,name:"Anemia"},{category:"contraindication",concept_id:512,name:"Skin rash"},{category:"contraindication",concept_id:867,name:"Insomnia"},{category:"side_effect",concept_id:6029,name:"Night sweats"},{category:"side_effect",concept_id:5945,name:"Fever"},{category:"side_effect",concept_id:5980,name:"Vomiting"},{category:"side_effect",concept_id:877,name:"Dizziness"},{category:"side_effect",concept_id:620,name:"Headache"},{category:"side_effect",concept_id:5978,name:"Nausea"},{category:"side_effect",concept_id:1458,name:"Lactic acidosis"},{category:"side_effect",concept_id:107,name:"Cough"},{category:"side_effect",concept_id:1773,name:"Heavy alcohol use"},{category:"side_effect",concept_id:8260,name:"Weight loss / Failure to thrive / malnutrition"}],Le=i({__name:"SideEffectModal",props:{isOpen:{type:Boolean},sideEffect:{},currentReason:{}},emits:["update","close"],setup(e,{emit:a}){const l=e,i=a,{medications:B,isLoading:L}=(()=>{const e=t([]),a=t(!1),l=t(null),n=async()=>{a.value=!0,l.value=null;try{var t,n;const a=ye(),l=null===(t=xe().patient)||void 0===t?void 0:t.patient_id,o=parseInt(a.getUserId()||"-1"),i=(null===(n=a.getfacilityLocation())||void 0===n?void 0:n.code)||"";if(!i)throw new Error("Location ID not found");const d=new Oe(l,o,i),s=await d.getCurrentMedications();if(s&&"object"==typeof s){const a=Object.values(s).map((e=>{const a=e;return{drug_id:a.drug_inventory_id,drug_name:a.dosage_struct.drug_name,dose:a.dose.source,units:a.units,frequency:a.frequency,start_date:a.order.start_date,end_date:a.order.auto_expire_date,quantity:a.quantity}}));e.value=a}else e.value=[]}catch(o){console.error("Error loading current medications:",o),l.value=o instanceof Error?o.message:"Failed to load medications",ge("Failed to load current medications")}finally{a.value=!1}};return o((()=>{n(),0===e.value.length&&(e.value=[{drug_id:1,drug_name:"Tenofovir 300mg",dose:"1 tablet",units:"tablet",frequency:"Once daily",start_date:"2023-01-01"},{drug_id:2,drug_name:"Lamivudine 150mg",dose:"1 tablet",units:"tablet",frequency:"Twice daily",start_date:"2023-01-01"},{drug_id:3,drug_name:"Efavirenz 600mg",dose:"1 tablet",units:"tablet",frequency:"Once daily",start_date:"2023-01-01"}])})),{medications:e,isLoading:a,error:l,loadCurrentMedications:n}})(),F=t("no"),A=t([]),R=t(void 0);o((()=>{H()}));const H=()=>{A.value=[],R.value=void 0,l.currentReason?"number"==typeof l.currentReason||"drug_side_effect"===l.currentReason||Array.isArray(l.currentReason)?(F.value="yes",Array.isArray(l.currentReason)&&l.currentReason.length>0?A.value=[...l.currentReason]:"drug_side_effect"!==l.currentReason&&(A.value=[l.currentReason])):(F.value="no",R.value=l.currentReason):(F.value="no",R.value="other_not_drug_related")},U=e=>{F.value=e.detail.value,"yes"===F.value?(A.value=[],R.value=void 0):(A.value=[],R.value="other_not_drug_related")},j=(e,a)=>{const t=a.detail.checked;t&&!A.value.includes(e)?A.value.push(e):t||(A.value=A.value.filter((a=>a!==e)))},q=n((()=>{let e=[];return A.value.length>0&&A.value.map((a=>{l.sideEffect&&e.push((async(e,a)=>({concept_id:we.getCachedConceptID("Drug induced",!0),value_coded:e.concept_id,value_text:"no"==F.value?"Past medication history":null,value_drug:"yes"==F.value?a:null}))(l.sideEffect,Number(a)))})),e})),W=()=>{F.value="no",A.value=[],R.value="other_not_drug_related",i("close")},Y=()=>{l.sideEffect&&(i("update",{id:l.sideEffect.id,reason:q.value}),W())};return(e,a)=>(s(),d(r(c),{"is-open":e.isOpen,onDidDismiss:W},{default:u((()=>[v(r(p),null,{default:u((()=>[v(r(m),null,{default:u((()=>[a[4]||(a[4]=f("div",{slot:"start",class:"ion-padding"},[f("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},[f("g",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"1.5"},[f("path",{d:"M6.01 16.607a3.495 3.495 0 1 0 0-6.99a3.495 3.495 0 0 0 0 6.99m5.242 6.616a5.243 5.243 0 0 0-10.485 0m20.968-7.821V3.751a2.996 2.996 0 1 0-5.991 0v11.651a4.493 4.493 0 1 0 5.991 0M18.74 5.249v11.983"}),f("path",{d:"M18.74 20.227a1.498 1.498 0 1 0 0-2.995a1.498 1.498 0 0 0 0 2.995M2.014 7.745a2.47 2.47 0 0 1 0-3.495a2.47 2.47 0 0 0 0-3.495m3.721 6.99a2.47 2.47 0 0 1 0-3.495a2.47 2.47 0 0 0 0-3.495m3.995 6.99a2.47 2.47 0 0 1 0-3.495a2.473 2.473 0 0 0 0-3.495"})])])],-1)),v(r(g),null,{default:u((()=>{var a;return[h(b((null===(a=e.sideEffect)||void 0===a?void 0:a.label)||"Side Effect Details"),1)]})),_:1}),v(r(_),{slot:"end"},{default:u((()=>[v(r(y),{onClick:a[0]||(a[0]=e=>i("close"))},{default:u((()=>[v(r(x),{icon:r(w)},null,8,["icon"])])),_:1})])),_:1})])),_:1,__:[4]})])),_:1}),v(r(C),{class:"ion-padding"},{default:u((()=>[v(r(k),null,{default:u((()=>[v(r(D),null,{default:u((()=>[v(r(N),null,{default:u((()=>a[5]||(a[5]=[h("Is this drug-induced?")]))),_:1,__:[5]})])),_:1}),v(r(M),{modelValue:F.value,"onUpdate:modelValue":a[1]||(a[1]=e=>F.value=e),onIonChange:U},{default:u((()=>[v(r(D),null,{default:u((()=>[v(r(E),{value:"yes"},{default:u((()=>a[6]||(a[6]=[h("Yes")]))),_:1,__:[6]})])),_:1}),v(r(D),null,{default:u((()=>[v(r(E),{value:"no"},{default:u((()=>a[7]||(a[7]=[h("No")]))),_:1,__:[7]})])),_:1})])),_:1},8,["modelValue"]),"yes"===F.value?(s(),S(T,{key:0},[v(r(D),null,{default:u((()=>[v(r(N),null,{default:u((()=>a[8]||(a[8]=[h("Select medications:")]))),_:1,__:[8]})])),_:1}),r(L)?(s(),d(r(I),{key:0,name:"crescent"})):0===r(B).length?(s(),d(r(D),{key:1},{default:u((()=>[v(r(N),null,{default:u((()=>a[9]||(a[9]=[h("No medications found")]))),_:1,__:[9]})])),_:1})):(s(!0),S(T,{key:2},P(r(B),(e=>(s(),d(r(D),{key:e.drug_id},{default:u((()=>[v(r(O),{value:e.drug_id,checked:A.value.includes(e.drug_id),onIonChange:a=>j(e.drug_id,a)},null,8,["value","checked","onIonChange"]),v(r(N),{class:"ion-padding-start"},{default:u((()=>[h(b(e.drug_name),1)])),_:2},1024)])),_:2},1024)))),128)),v(r(D),null,{default:u((()=>[v(r(O),{value:"drug_side_effect",checked:A.value.includes("drug_side_effect"),onIonChange:a[2]||(a[2]=e=>j("drug_side_effect",e))},null,8,["checked"]),v(r(N),{class:"ion-padding-start"},{default:u((()=>a[10]||(a[10]=[h("Drug side effect (unspecified)")]))),_:1,__:[10]})])),_:1})],64)):V("",!0),"no"===F.value?(s(),S(T,{key:1},[v(r(D),null,{default:u((()=>[v(r(N),null,{default:u((()=>a[11]||(a[11]=[h("Reason:")]))),_:1,__:[11]})])),_:1}),v(r(D),null,{default:u((()=>[v(r(E),{value:"other_not_drug_related",checked:"other_not_drug_related"===R.value,onIonChange:a[3]||(a[3]=e=>{return a="other_not_drug_related",void(R.value=a);var a})},null,8,["checked"]),v(r(N),{class:"ion-padding-start"},{default:u((()=>a[12]||(a[12]=[h("Other not drug related")]))),_:1,__:[12]})])),_:1})],64)):V("",!0)])),_:1})])),_:1}),v(r(z),null,{default:u((()=>[v(r(m),{color:"light"},{default:u((()=>[v(r(_),{slot:"end"},{default:u((()=>[v(r(y),{onClick:Y,color:"primary"},{default:u((()=>a[13]||(a[13]=[h("Save")]))),_:1,__:[13]})])),_:1})])),_:1})])),_:1})])),_:1},8,["is-open"]))}}),Fe={class:"side-effects-grid"},Ae={class:"checkbox-container"},Re={class:"checkbox-label"},He={key:0,class:"reason-summary"},Ue={class:"reason-label"},je={key:0,class:"drug-induced"},qe={key:1,class:"not-drug-induced"},We=Ce(i({__name:"SideEffectsCheckboxes",props:{modelValue:{},sideEffectOptions:{}},emits:["update:modelValue"],setup(e,{emit:a}){const l=e,n=a,o=t(!1),i=t(null),d=t(void 0),c=e=>{var a;const t=null===(a=l.modelValue[e])||void 0===a?void 0:a.reason;return"number"==typeof t||"drug_side_effect"===t||Array.isArray(t)&&t.length>0?"yes":"no"},p=e=>{var a;i.value=e,d.value=null===(a=l.modelValue[e.id])||void 0===a?void 0:a.reason,o.value=!0},m=()=>{o.value=!1,i.value=null},g=e=>{const a={...l.modelValue};a[e.id]&&(a[e.id]={...a[e.id],reason:e.reason},n("update:modelValue",a))};return(e,a)=>(s(),S(T,null,[f("div",Fe,[(s(!0),S(T,null,P(e.sideEffectOptions,(t=>{var o,i;return s(),S("div",{key:t.id,class:"side-effect-item"},[f("div",Ae,[v(r(O),{value:t.id,checked:null===(o=e.modelValue[t.id])||void 0===o?void 0:o.selected,onIonChange:e=>((e,a)=>{const t=a.detail.checked,o={...l.modelValue};var i;t?(o[e.id]={selected:!0,reason:"other_not_drug_related"},n("update:modelValue",o),p(e)):(o[e.id]={selected:!1,reason:null===(i=o[e.id])||void 0===i?void 0:i.reason},n("update:modelValue",o))})(t,e)},null,8,["value","checked","onIonChange"]),f("span",Re,b(t.label),1)]),null!==(i=e.modelValue[t.id])&&void 0!==i&&i.selected?(s(),S("div",He,[f("div",Ue,["yes"===c(t.id)?(s(),S("span",je,"Drug-induced")):(s(),S("span",qe,"Not drug-induced"))]),v(r(y),{fill:"clear",size:"small",class:"edit-button",onClick:e=>p(t)},{default:u((()=>[a[0]||(a[0]=h(" Edit ")),v(r(x),{slot:"end",icon:r(B)},null,8,["icon"])])),_:2,__:[0]},1032,["onClick"])])):V("",!0)])})),128))]),v(Le,{"is-open":o.value,"side-effect":i.value,"current-reason":d.value,onUpdate:g,onClose:m},null,8,["is-open","side-effect","current-reason"])],64))}}),[["__scopeId","data-v-9c8f6d00"]]),Ye={class:"tb-symptoms-grid"},$e={class:"checkbox-label"},Ge=Ce(i({__name:"TBSymptomsCheckboxes",props:{modelValue:{},tbSymptomOptions:{}},emits:["update:modelValue"],setup(e,{emit:a}){const t=e,l=a,n=()=>{l("update:modelValue",t.modelValue)};return(e,a)=>(s(),S("div",Ye,[(s(!0),S(T,null,P(e.tbSymptomOptions,(a=>(s(),S("div",{key:a.id,class:"checkbox-option"},[v(r(O),{modelValue:e.modelValue[a.id],"onUpdate:modelValue":[t=>e.modelValue[a.id]=t,n],value:a.label},null,8,["modelValue","onUpdate:modelValue","value"]),f("span",$e,b(a.label),1)])))),128))]))}}),[["__scopeId","data-v-d67e9ce3"]]),Xe=(e,a)=>{const t=new Date;return{Months:()=>t.setMonth(t.getMonth()-e),Weeks:()=>t.setDate(t.getDate()-7*e),Days:()=>t.setDate(t.getDate()-e)}[a](),{day:t.getDate().toString().padStart(2,"0"),month:(t.getMonth()+1).toString().padStart(2,"0"),year:t.getFullYear().toString()}},Ze=()=>{const e=t("Unknown"),a=t(),l=t("3"),o=t(!1),i=t(!1),d=t(["Months","Weeks","Days"]),s=t("0"),r=t({name:"Months"}),c=t([{label:"Yes",value:"Yes"},{label:"No",value:"No"},{label:"Unknown",value:"Unknown"}]),u=t(["TB NOT suspected","TB Suspected","Confirmed TB Not on treatment"]),v=n((()=>{let a=[];return/no/i.test(e.value.toLowerCase())&&(a=["Currently on IPT","Currently on 3HP (RFP + INH)","Currently on INH 300 / RFP 300 (3HP)"]),a=a.concat(["Complete course of 3HP in the past (3 months RFP+INH)","Complete course of IPT in the past (min. 6 months of INH)","Aborted course of 3HP (RFP + INH) in the past","Aborted course of INH 300 / RFP 300 (3HP) in the past","Aborted course of IPT in the past","Never taken IPT or 3HP"]),a}));L([s,r],(([e,t])=>{if(e||t){const t=Xe(Number(e),r.value.name);a.value=t}}));const p=e=>{const a="Molecular WHO Recommended Rapid Diagnostic Test";return"normal"!==e[a].toLowerCase()&&("abnormal"===e["Chest X-ray"].toLowerCase()||"positive"===e[a].toLowerCase())},m=e=>Object.values(e).some((e=>e));return{tbTherapyStatus:e,tbTreatmentStartDate:a,tbTreatmentPeriod:l,onTBTreatmentOptions:c,tbStatusOptions:u,tbEstimatePeriods:d,selectedEstimatePeriod:r,showEstimator:i,tbStartEstimate:s,startDateEstimator:Xe,showTBStatus:(e,a)=>Object.values(e).every((e=>"unknown"===e.toLowerCase()))?m(a):p(e),tptHistoryOptions:v,buildTBTreatmentPayload:async(t,n=53,o,d,s)=>{const r=new Pe(t,n,o,d),c=await r.buildValueCoded("TB treatment",e.value);let u=null;s.history&&"string"==typeof s.history&&""!==s.history.trim()&&(u=await((e,a)=>a.buildValueText("TB Treatment History",e))(s.history,r));const v=await(async(a,t,l,n)=>{let o="TB NOT suspected";return"Yes"===e.value?o="Confirmed TB on treatment":a&&""!==a.trim()?o=a:t&&Object.keys(t).length>0?p(t)&&(o="TB Suspected"):l&&Object.keys(l).length>0&&m(l)&&(o="TB Suspected"),n.buildValueCoded("TB Status",o)})(s.status,s.methods,s.symptoms,r),f=[c,v];if(u&&f.push(u),"Yes"===e.value){const e=await(async e=>{var t,n,o;const d=`${null===(t=a.value)||void 0===t?void 0:t.year}-${null===(n=a.value)||void 0===n?void 0:n.month}-${null===(o=a.value)||void 0===o?void 0:o.day}`;return[i.value?await e.buildValueDateEstimated("TB treatment start date",ke.toStandardHisFormat(d)):await e.buildValueDate("TB treatment start date",ke.toStandardHisFormat(d)),await e.buildValueNumber("TB treatment period",Number(l.value))]})(r);f.push(...e)}else{const e=await Promise.all(await(async(e,a)=>{const t=Object.entries(e).map((async([e,t])=>({...await a.buildValueCoded("TB screening method used",e),child:[await a.buildValueCoded(e,t)]})));return Promise.all(t)})(s.methods,r)),a=await Promise.all(await(async(e,a)=>{const t=Object.entries(e).map((async([e,t])=>({...await a.buildValueCoded("Routine TB Screening",e),child:[await a.buildValueCoded(e,t?"Yes":"No")]})));return Promise.all(t)})(s.symptoms,r));f.push(...e,...a)}return f.filter((e=>e&&Object.keys(e).length>0))},submitTBTherapy:o}},Je=()=>{const e=F({selectedMethods:[],availableMethods:[]}),a=t(!1),l=t(!1),o=t([]),i=()=>{const a=new Oe(0,0).getFamilyPlanningMethods();e.availableMethods=a.map((e=>({label:e,value:e,isChecked:!1,disabled:!1})))},d=()=>(o.value=[],0===e.selectedMethods.length&&o.value.push("At least one contraceptive method must be selected."),0===o.value.length),s=async(a,t,l)=>{const n=new Pe(a,53,t,l),o=[];for(const i of e.selectedMethods){const e=await n.buildValueCoded("Method of family planning",i);o.push(e)}return o},r=n((()=>e.selectedMethods.length>0)),c=n((()=>0===e.selectedMethods.length?"None selected":e.selectedMethods.includes("NONE")?"None":e.selectedMethods.join(", ")));return i(),{contraceptiveData:e,isContraceptivesLoading:a,isContraceptivesSaved:l,validationErrors:o,hasSelectedMethods:r,selectedMethodsText:c,validateContraceptives:d,toggleMethod:a=>{const t=new Oe(0,0);if("NONE"===a)e.selectedMethods=["NONE"],e.availableMethods=e.availableMethods.map((e=>({...e,isChecked:"NONE"===e.value,disabled:!1})));else{e.selectedMethods.includes("NONE")&&(e.selectedMethods=[]);const l=e.selectedMethods.indexOf(a);if(l>-1?e.selectedMethods.splice(l,1):e.selectedMethods.push(a),e.selectedMethods.length>0){const a=e.selectedMethods[0],l=t.familyPlanningMethods(a,e.availableMethods);e.availableMethods=l}else e.availableMethods=e.availableMethods.map((e=>({...e,disabled:!1})));e.availableMethods=e.availableMethods.map((a=>({...a,isChecked:e.selectedMethods.includes(a.value)})))}},saveContraceptives:async(e,t,n)=>{if(!d())return console.error("Validation failed:",o.value),ge("Please select at least one contraceptive method"),!1;a.value=!0;try{const a=await s(e,t,n);if(a.length>0){const o=new Pe(e,53,t,n);return await o.saveObservationList(a),console.info("Contraceptive methods saved:",a),l.value=!0,!0}return console.warn("No contraceptive observations to save"),ge("No contraceptive methods to save"),!1}catch(i){return console.error("Error saving contraceptive data:",i),ge("Failed to save contraceptive methods"),!1}finally{a.value=!1}},initializeContraceptiveMethods:i,buildContraceptiveObs:s}},Ke={class:"contraceptives-section"},Qe={key:0,class:"selected-methods"},ea={key:1,class:"selected-methods"},aa={class:"method-tag none-tag"},ta={class:"methods-list"},la={key:2,class:"validation-errors"},na={class:"action-buttons"},oa=Ce(i({__name:"ContraceptivesSection",props:{patientID:{default:0},providerID:{default:-1},locationID:{default:""}},emits:["onSuccess"],setup(e,{expose:a,emit:t}){const l=e,o=t,i=ye(),d=xe(),{patient:c}=A(d),p=n((()=>{var e;return l.patientID||(null===(e=c.value)||void 0===e?void 0:e.patientID)||0})),m=n((()=>{var e;return-1!==l.providerID?l.providerID:null!==(e=Se.getUserID())&&void 0!==e?e:-1})),g=n((()=>{var e;return l.locationID||(null===(e=i.getfacilityLocation())||void 0===e?void 0:e.code)||""})),{contraceptiveData:_,isContraceptivesLoading:C,isContraceptivesSaved:k,validationErrors:D,hasSelectedMethods:N,validateContraceptives:M,toggleMethod:E,saveContraceptives:I}=Je(),z=()=>{_.selectedMethods=[],_.availableMethods=_.availableMethods.map((e=>({...e,isChecked:!1,disabled:!1})))},B=async()=>{await I(p.value,m.value,g.value)&&o("onSuccess",!0)};return a({saveContraceptives:B,validateContraceptives:M,isContraceptivesSaved:k}),(e,a)=>(s(),S("div",Ke,[r(N)&&!r(_).selectedMethods.includes("NONE")?(s(),S("div",Qe,[(s(!0),S(T,null,P(r(_).selectedMethods,(e=>(s(),S("div",{class:"method-tag",key:e},[h(b(e)+" ",1),v(r(x),{icon:r(w),onClick:a=>r(E)(e),class:"remove-icon"},null,8,["icon","onClick"])])))),128))])):V("",!0),r(_).selectedMethods.includes("NONE")?(s(),S("div",ea,[f("div",aa,[a[1]||(a[1]=h(" NONE ")),v(r(x),{icon:r(w),onClick:a[0]||(a[0]=e=>r(E)("NONE")),class:"remove-icon"},null,8,["icon"])])])):V("",!0),f("div",ta,[(s(!0),S(T,null,P(r(_).availableMethods,(e=>(s(),S("div",{key:e.value,class:R(["method-item",{disabled:e.disabled}])},[v(r(O),{checked:e.isChecked,disabled:e.disabled,onIonChange:a=>r(E)(e.value),labelPlacement:"end"},{default:u((()=>[h(b(e.label),1)])),_:2},1032,["checked","disabled","onIonChange"])],2)))),128))]),r(D).length>0?(s(),S("div",la,[(s(!0),S(T,null,P(r(D),(e=>(s(),S("div",{key:e,class:"error-message"},b(e),1)))),128))])):V("",!0),f("div",na,[v(r(y),{color:"medium",fill:"outline",onClick:z,disabled:0==r(_).selectedMethods.length},{default:u((()=>a[2]||(a[2]=[h(" Clear ")]))),_:1,__:[2]},8,["disabled"]),v(r(y),{color:"primary",onClick:B,disabled:r(C)||!r(N),loading:!0},{default:u((()=>a[3]||(a[3]=[h(" Save ")]))),_:1,__:[3]},8,["disabled"])])]))}}),[["__scopeId","data-v-9a45c4b4"]]),ia={key:0,class:"info-container"},da={class:"info-card"},sa={class:"main-message"},ra={class:"message-content"},ca={class:"info-list"},ua=Ce(i({__name:"vl-info-alert",props:{patientID:{}},setup(e){const a=e,l=t(!0),n=t(null),i=async()=>{await Ve("Are you sure you want to close this milestone notification?")&&(l.value=!1)},d=e=>{const a=new Date(e);return isNaN(a.getTime())?"N/A":a.toLocaleDateString()};return o((()=>{(async()=>{try{const e=await De.getPatientVLInfo(a.patientID);n.value=e}catch(e){console.error("Error fetching VL data:",e)}})()})),(e,a)=>{var t;return l.value&&null!==(t=n.value)&&void 0!==t&&t.milestone?(s(),S("div",ia,[f("div",da,[f("button",{class:"close-button",onClick:i,"aria-label":"Close notification"},a[0]||(a[0]=[f("svg",{class:"close-icon",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[f("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),f("line",{x1:"6",y1:"6",x2:"18",y2:"18"})],-1)])),f("div",sa,[a[2]||(a[2]=f("svg",{class:"info-icon",xmlns:"http://www.w3.org/2000/svg",width:"32",height:"32",viewBox:"0 0 32 32"},[f("path",{fill:"currentColor",d:"M24.586 6.586A2 2 0 0 0 23.17 6H16V2h-2v4H6a2.003 2.003 0 0 0-2 2v6a2.003 2.003 0 0 0 2 2h8v14h2V16h7.171a2 2 0 0 0 1.415-.586L29 11ZM23.17 14H6V8h17.172l3 3Z"})],-1)),f("div",ra,[a[1]||(a[1]=f("h2",null,"VL milestone has been reached",-1)),f("ul",ca,[f("li",null,"Patient has been on ART for "+b(n.value.period_on_art)+" months",1),f("li",null,"Treatment started on "+b(d(n.value.earliest_start_date)),1),f("li",null,"Current regimen: "+b(n.value.current_regimen.code)+" since "+b(d(n.value.current_regimen.start_date)),1),f("li",null,"Last VL order date: "+b(d(n.value.last_order_date)),1)])])])])])):V("",!0)}}}),[["__scopeId","data-v-0b657069"]]),va=i({name:"CervicalCancerSection",components:{IonRow:$,IonCol:Y,IonLabel:N,IonRadioGroup:M,IonRadio:E,IonButton:y,IonSpinner:I,IonSelect:W,IonSelectOption:q,IonText:j,IonDatetimeButton:U,IonDatetime:H,IonModal:c,IonCheckbox:O,DatePicker:ze,BasicInputChangeUnits:Ne},props:{providerID:{type:Number,required:!0},locationID:{type:String,required:!0}},setup(e,{emit:a}){const i=t(!0),d=t(!1),s=t(""),r=t(""),c=t(""),u=t(!1),v=t(!0),p=t(!1),m=t(0),f=t(0),g=t(!1),h=t(!1),b=t(""),_=t(""),y=t(!1),x=new me,w=new Oe(x.patient.patient_id,e.providerID,e.locationID),C=t({name:"Months"}),k=t(["Months","Weeks","Days"]),S=t(""),V=n((()=>l().format("YYYY-MM-DD"))),D=n((()=>"1900-01-01")),N=t([{label:"Not due for screening",value:"Not due for screening"},{label:"Hysterectomy",value:"Hysterectomy"},{label:"Patient refused",value:"Patient refused"},{label:"Other",value:"Other"}]),M=n((()=>!(""===s.value||"No"===s.value&&""===r.value||"Not due for screening"===r.value&&""===c.value)));return o((()=>{(async()=>{try{if(i.value=!0,"F"===x.patient.gender&&(p.value=await Me.cervicalCancerScreeningEnabled(),p.value)){const{start:e,end:a}=await Me.cervicalCancerScreeningAgeBounds();m.value=a,f.value=e,g.value=await w.clientDueForCxCa(),h.value=await w.clientHasHadAHysterectomy(),b.value=await x.patient.nextAppointment(24);const t=30;y.value=t>ke.dateDiffInDays(b.value,w.date)}}catch(e){console.error("Error initializing cervical cancer data:",e)}finally{i.value=!1}})()})),L([_,C],(([e,a])=>{if(e||a){const a=Xe(Number(e),C.value.name);S.value=a,c.value=(t=Number(a.day),l=Number(a.month),n=Number(a.year),new Date(n,l-1,t).toLocaleDateString("en-US",{weekday:"long",month:"short",day:"numeric",year:"numeric"})),u.value=!0}var t,l,n})),{loading:i,isCxCaSaved:d,offerCxca:s,reasonForNoCxca:r,previousCxcaTestDate:c,isEstimated:u,showEstimateFields:v,reasonsForNoCxcaOptions:N,isFormValid:M,cxcaAppointDate:b,showReminder:y,maxDate:V,minDate:D,alertCircleOutline:G,selectedEstimatePeriod:C,estimatePeriods:k,estimatedValue:_,dateProp:S,formatDate:e=>ke.toStandardHisDisplayFormat(e),saveCxcaData:async()=>{try{if(!M.value)return;const e=[];e.push(w.buildValueCoded("Offer CxCa",s.value)),"No"===s.value&&(e.push(w.buildValueCoded("Reason for NOT offering CxCa",r.value)),"Not due for screening"===r.value&&c.value&&(u.value?e.push(w.buildValueDateEstimated("CxCa test date",c.value)):e.push(w.buildValueDate("CxCa test date",c.value)))),d.value=!0,a("onSuccess",{obs:e,isCxCaSaved:d.value})}catch(e){console.error("Error saving cervical cancer data:",e)}}}}}),pa={class:"cervical-cancer-container"},ma={key:0,class:"loading-container"},fa={key:1},ga={key:0,class:"reminder-banner"},ha={class:"radio-group"},ba={key:1},_a={key:0},ya={class:"save-button-container"},xa=Ce(va,[["render",function(e,a,t,l,n,o){const i=X("ion-spinner"),r=X("ion-icon"),c=X("ion-text"),p=X("ion-label"),m=X("ion-col"),g=X("ion-radio"),_=X("ion-radio-group"),y=X("ion-row"),x=X("ion-select-option"),w=X("ion-select"),C=X("DatePicker"),k=X("BasicInputChangeUnits"),D=X("ion-button");return s(),S("div",pa,[e.loading?(s(),S("div",ma,[v(i,{name:"bubbles"}),a[6]||(a[6]=f("p",null,"Loading cervical cancer screening data...",-1))])):(s(),S("div",fa,[e.showReminder?(s(),S("div",ga,[v(c,{color:"warning"},{default:u((()=>[f("p",null,[v(r,{icon:e.alertCircleOutline},null,8,["icon"]),h(" Patient is due for Cervical Cancer Screening on "+b(e.formatDate(e.cxcaAppointDate)),1)])])),_:1})])):V("",!0),v(y,null,{default:u((()=>[v(m,null,{default:u((()=>[v(p,null,{default:u((()=>a[7]||(a[7]=[h("Offer Cervical Cancer Screening")]))),_:1,__:[7]})])),_:1}),v(m,null,{default:u((()=>[f("div",ha,[v(_,{modelValue:e.offerCxca,"onUpdate:modelValue":a[0]||(a[0]=a=>e.offerCxca=a)},{default:u((()=>[v(g,{slot:"end",value:"Yes"},{default:u((()=>a[8]||(a[8]=[h("Yes")]))),_:1,__:[8]}),v(g,{slot:"end",style:{"margin-left":"20px"},value:"No"},{default:u((()=>a[9]||(a[9]=[h("No")]))),_:1,__:[9]})])),_:1},8,["modelValue"])])])),_:1})])),_:1}),"No"===e.offerCxca?(s(),S("div",ba,[v(y,null,{default:u((()=>[v(m,null,{default:u((()=>[v(p,null,{default:u((()=>a[10]||(a[10]=[h("Reason for NOT offering CxCa")]))),_:1,__:[10]})])),_:1}),v(m,null,{default:u((()=>[v(w,{modelValue:e.reasonForNoCxca,"onUpdate:modelValue":a[1]||(a[1]=a=>e.reasonForNoCxca=a),interface:"popover",placeholder:"Select reason"},{default:u((()=>[(s(!0),S(T,null,P(e.reasonsForNoCxcaOptions,(e=>(s(),d(x,{key:e.value,value:e.value},{default:u((()=>[h(b(e.label),1)])),_:2},1032,["value"])))),128))])),_:1},8,["modelValue"])])),_:1})])),_:1}),"Not due for screening"===e.reasonForNoCxca?(s(),S("div",_a,[v(y,null,{default:u((()=>[v(m,null,{default:u((()=>[v(p,null,{default:u((()=>a[11]||(a[11]=[h("Previous CxCa test date")]))),_:1,__:[11]})])),_:1}),v(m,null,{default:u((()=>[v(C,{place_holder:"enter data",onDateUpDated:[()=>{},a[2]||(a[2]=a=>{e.previousCxcaTestDate=a.formattedDate})],date_prop:e.dateProp},null,8,["date_prop"])])),_:1})])),_:1}),e.showEstimateFields?(s(),d(y,{key:0},{default:u((()=>[v(m,null,{default:u((()=>[v(p,null,{default:u((()=>a[12]||(a[12]=[h("Estimated?")]))),_:1,__:[12]})])),_:1}),v(m,null,{default:u((()=>[v(k,{bold:"bold","input-header":`Estimate number of ${e.selectedEstimatePeriod.name}`,"input-value":e.estimatedValue,"onUpdate:inputValue":[a[3]||(a[3]=a=>e.estimatedValue=a),a[4]||(a[4]=a=>e.estimatedValue=a.target.value)],showAsterisk:"",placeholder:"",unitsData:{isSingleSelect:!0,multiSelectData:e.estimatePeriods.map((e=>({name:e}))),value:e.selectedEstimatePeriod,trackBy:"name"},"onUpdate:units":a[5]||(a[5]=a=>e.selectedEstimatePeriod=a)},null,8,["input-header","input-value","unitsData"])])),_:1})])),_:1})):V("",!0)])):V("",!0)])):V("",!0),f("div",ya,[v(D,{onClick:e.saveCxcaData,disabled:!e.isFormValid},{default:u((()=>a[13]||(a[13]=[h(" Save and Continue ")]))),_:1,__:[13]},8,["onClick","disabled"])])]))])}],["__scopeId","data-v-bee1d69f"]]),wa={class:"accordion-title-container"},Ca={key:0,class:"completed-badge"},ka={class:"ion-padding",slot:"content",style:{overflow:"visible !important"}},Sa={key:0,class:"lab-investigations-list"},Va={class:"table-responsive"},Da={class:"lab-table"},Na={class:"action-buttons"},Ma={class:"save-button-container"},Ea={class:"accordion-title-container"},Ta={key:0,class:"completed-badge"},Ia={slot:"content",class:"ion-padding"},Pa={class:"chart-container"},Oa={class:"chart-header"},za={key:0,class:"loading-container"},Ba={key:1,class:"empty-data-container"},La={key:2,class:"save-button-container"},Fa={class:"accordion-title-container"},Aa={key:0,class:"completed-badge"},Ra={slot:"content",class:"ion-padding"},Ha={class:"radio-group"},Ua={class:"radio-group"},ja={key:0,class:"save-button-container"},qa={class:"accordion-title-container"},Wa={key:0,class:"completed-badge"},Ya={slot:"content",class:"ion-padding"},$a={class:"accordion-title-container"},Ga={key:0,class:"completed-badge"},Xa={slot:"content",class:"ion-padding"},Za={class:"accordion-title-container"},Ja={key:0,class:"completed-badge"},Ka={class:"ion-padding",slot:"content"},Qa={class:"side-effects-container"},et={class:"radio-group"},at={key:0,class:"side-effects-options"},tt={key:0,class:"loading-container"},lt={class:"category-tabs"},nt={class:"save-button-container"},ot={class:"accordion-title-container"},it={key:0,class:"completed-badge"},dt={class:"ion-padding",slot:"content"},st={key:0,class:"loading-container"},rt={class:"tb-therapy-container"},ct={class:"tb-treatment-section"},ut={class:"radio-group horizontal-radio-group"},vt={class:"radio-option"},pt={class:"radio-option"},mt={key:0,class:"tb-treatment-section"},ft={key:0,class:"estimator-container"},gt={style:{"margin-top":"10px"}},ht={key:1,class:"tb-treatment-section"},bt={class:"tb-symptoms-section"},_t={class:"screening-section"},yt={class:"radio-group horizontal-radio-group"},xt={class:"radio-option"},wt={class:"radio-option"},Ct={class:"radio-option"},kt={class:"radio-group horizontal-radio-group"},St={class:"radio-option"},Vt={class:"radio-option"},Dt={class:"radio-option"},Nt={key:0,class:"tb-status-section"},Mt={style:{"z-index":"99999"}},Et={key:2,class:"tb-history-section"},Tt={class:"save-button-container"};e("default",Ce(i({__name:"Consultation",setup(e,{expose:a}){var i,c;const p=ye(),m=xe(),{patient:g}=A(m),_=t(null),w=t(["lab-investigation"]),k=t(null),O=t(!1),z=t([]),L=t([]),H=t(""),U=t("contraindication"),j=t(!1),q=t(!1),W=t(!1),G=t(!1),X=n((()=>{var e;return null===(e=g.value)||void 0===e?void 0:e.patientID})),we=null!==(i=Se.getUserID())&&void 0!==i?i:-1,Ce=(null===(c=p.getfacilityLocation())||void 0===c?void 0:c.code)||"",ke=t(!1),Ve=new me,{sideEffectOptions:De,sideEffects:Oe,isLoading:Le,filterByCategory:Fe,hasSelectedSideEffects:Ae,buildSideEffectsPayload:Re,encounterId:He}=((e="all")=>{const a=t([]),l=t({}),i=t(!1),d=t(null),s=t(null),r=n((()=>"all"===e?Be:Be.filter((a=>a.category===e)))),c=()=>{const e=r.value.map((e=>({id:`${e.concept_id}`,label:e.name,value:!1,concept_id:e.concept_id})));a.value=e,e.forEach((e=>{l.value[e.id]={selected:e.value}}))},u=e=>e.map((e=>({label:e.label,value:e.id,isChecked:e.value})));o((()=>{c()}));const v=async(e,a,t)=>{i.value=!0,s.value=null;try{const n=new Pe(e,53,a,t),o=await n.createEncounter();if(!o)throw new Error("Failed to create encounter");d.value=o.encounter_id;const i={side_effect:"Malawi ART side effects",contraindication:"Other side effect",all:"Malawi ART Side Effects"},s=Be.filter((e=>"side_effect"===e.category)).map((e=>({id:`${e.concept_id}`,label:e.name,value:!1,concept_id:e.concept_id}))),r=Be.filter((e=>"contraindication"===e.category)).map((e=>({id:`${e.concept_id}`,label:e.name,value:!1,concept_id:e.concept_id})));s.forEach((e=>{l.value[e.id]&&(e.value=l.value[e.id].selected)})),r.forEach((e=>{l.value[e.id]&&(e.value=l.value[e.id].selected)}));const c=await n.buildOptionsGroupObs(i.side_effect,u(s)),v=await n.buildOptionsGroupObs(i.contraindication,u(r)),p=s.filter((e=>e.value&&e.reason)).flatMap((e=>e.reason||[])),m=r.filter((e=>e.value&&e.reason)).flatMap((e=>e.reason||[]));return{encounter_id:o.encounter_id,observations:[...c,...v,...p,...m]}}catch(n){return console.error("Error building side effects payload:",n),s.value="Failed to build side effects payload",null}finally{i.value=!1}};return{sideEffectOptions:a,sideEffects:l,resetSideEffects:()=>{a.value.forEach((e=>{l.value[e.id]={selected:!1}}))},hasSelectedSideEffects:()=>Object.values(l.value).some((e=>!0===e.selected)),getSelectedSideEffects:()=>a.value.filter((e=>{var a;return null===(a=l.value[e.id])||void 0===a?void 0:a.selected})).map((e=>e.label)),filterByCategory:t=>{const n={...l.value};e=t,c(),a.value.forEach((e=>{void 0!==n[e.id]&&(l.value[e.id]=n[e.id])}))},isLoading:i,error:s,buildSideEffectsPayload:v,saveSideEffectsData:async(e,a,t)=>{i.value=!0,s.value=null;try{const l=await v(e,a,t);if(d.value=Number(null==l?void 0:l.encounter_id),!l)throw new Error("Failed to build payload");return await Pe.saveObsArray(l.encounter_id,l.observations),be("Side effects saved successfully"),!0}catch(l){return console.error("Error saving side effects:",l),s.value="Failed to save side effects",ge("Failed to save side effects"),!1}finally{i.value=!1}},encounterId:d}})("side_effect"),{tbTherapyStatus:Ue,tbTreatmentPeriod:je,tbTreatmentStartDate:qe,tbEstimatePeriods:Ye,selectedEstimatePeriod:$e,showEstimator:Xe,tbStartEstimate:Ke,tbStatusOptions:Qe,showTBStatus:ea,tptHistoryOptions:aa,buildTBTreatmentPayload:ta,submitTBTherapy:la}=Ze(),{tbSymptomOptions:na,tbSymptoms:ia}=(()=>{const e=t([{id:"Weight loss / Failure to thrive / malnutrition",label:"Weight loss / failure to thrive / malnutrition",value:!1},{id:"Fever",label:"Fever",value:!1},{id:"Night sweats",label:"Night sweats",value:!1},{id:"Cough",label:"Cough",value:!1}]),a=t({});return e.value.forEach((e=>{a.value[e.id]=e.value})),{tbSymptomOptions:e,tbSymptoms:a,resetTBSymptoms:()=>{e.value.forEach((e=>{a.value[e.id]=!1}))},hasSelectedTBSymptoms:()=>Object.values(a.value).some((e=>!0===e)),getSelectedTBSymptoms:()=>e.value.filter((e=>a.value[e.id])).map((e=>e.label))}})(),da=t(""),sa=t(""),ra=t(""),ca=t(""),va=t(!1),{pregnancyBreastFeedingData:pa,isPregnancyBreastfeedingLoading:ma,validatePregnancyBreastFeeding:fa,buildPregnancyBreastFeedingObs:ga}=(()=>{const e=F({isPregnant:null,isBreastFeeding:null}),a=t(!1),l=t(!1),n=t([]),o=()=>(n.value=[],null===e.isPregnant&&n.value.push("Pregnancy status is required."),null===e.isBreastFeeding&&n.value.push("Breastfeeding status is required."),0===n.value.length),i=async(a,t,l)=>{const n=new Pe(a,53,t,l),o=[];if(null!==e.isPregnant){const a=await n.buildValueCoded("Is patient pregnant?","yes"===e.isPregnant?"Yes":"No");o.push(a)}if(null!==e.isBreastFeeding){const a=await n.buildValueCoded("Is patient breast feeding?","yes"===e.isBreastFeeding?"Yes":"No");o.push(a)}return o};return{pregnancyBreastFeedingData:e,isPregnancyBreastfeedingLoading:a,validationErrors:n,isPregnancyBreastfeedingSaved:l,validatePregnancyBreastFeeding:o,savePregnancyBreastFeeding:async(e,t,d)=>{if(!o())return console.error("Validation failed:",n.value),!1;a.value=!0;try{const a=await i(e,t,d);if(a.length>0){const n=new Pe(e,53,t,d);return await n.saveObservationList(a),l.value=!0,be("Pregnancy or Breast Feeding data saved successfully"),!0}return console.warn("No observations to save"),!1}catch(s){return console.error("Error saving data:",s),!1}},buildPregnancyBreastFeedingObs:i}})(),{buildContraceptiveObs:ha}=Je(),ba=e=>{const a=e.detail.value;U.value=a,Fe(a)},_a=async()=>{"yes"!==H.value||Ae()?(j.value=!0,_.value&&(w.value=[],w.value.push("tb-therapy"))):ge("Please select at least one side effect or contraindication")},ya=async()=>{if(0!==Wt.value.length)try{var e;if(!X.value)return void ge("Patient ID not found");const a=new Te,t=null===(e=p.getfacilityLocation())||void 0===e?void 0:e.code;if(!t)return void ge("Location ID not found");const l={location_id:t,orders:Wt.value.map((e=>({concept_id:e.test.id,name:e.test.name,specimen:e.specimen.name,reason:e.reason||"Routine",specimenConcept:e.specimen.id,accessionNumber:e.accessionNumber||null})))};await a.postActivities(X.value,l),W.value=!0,_.value&&(w.value=[],w.value.push("weight-chart")),be("Lab investigations saved successfully")}catch(a){console.error("Error saving lab investigations:",a),ge("Failed to save lab investigations")}else ge("Please add at least one lab investigation")},It=()=>{G.value=!0,_.value&&(w.value=[],w.value.push(Ve.isFemale()?"pregnancy-breastfeeding":"contraindications"))},Pt=()=>{_.value&&(w.value=[],w.value.push("cxca"))},Ot=e=>{O.value=e.isCxCaSaved,z.value=e.obs,_.value&&(w.value=[],w.value.push("contraindications"))},zt=n((()=>({"Chest X-ray":da.value,"Molecular WHO Recommended Rapid Diagnostic Test":sa.value}))),Bt=async()=>{fa()?(L.value=await ga(X.value,we,Ce),_.value&&(w.value=[],w.value.push("contraceptives"),va.value=!0)):ge("Please fill in all required pregnancy/breastfeeding fields")},Lt=async()=>{"Unknown"!==Ue.value?(q.value=!0,_.value&&(w.value=[])):fe("Please select a TB Therapy Status")},{testOptions:Ft,specimenOptions:At,testReasons:Rt,selectedTest:Ht,selectedSpecimen:Ut,selectedReason:jt,selectedAccessionNumber:qt,labInvestigations:Wt,editingInvestigationId:Yt,loadTestTypes:$t,handleTestChange:Gt,refreshTestTypes:Xt,saveLabInvestigation:Zt,editLabInvestigation:Jt,cancelLabInvestigation:Kt}=(()=>{const e=t([]),a=t([]),l=t(["Routine","Targeted","Confirmatory","Stat","Repeat / Missing","Follow up after Low Level Viremia","Follow up after High Viral Load"]),n=t(null),o=t(null),i=t(null),d=t(""),s=t([]),r=t(null),c=async e=>{if(e)try{const t=await he.getSpecimens(e);t&&t.length>0?(a.value=t.map((e=>({id:e.concept_id.toString(),name:e.name,assigned_id:e.concept_id.toString()}))),1===t.length&&(o.value=a.value[0])):(a.value=[],fe("No specimens found for the selected test"))}catch(t){console.error("Error loading specimens:",t),ge("Failed to load specimens")}else a.value=[]};return{testOptions:e,specimenOptions:a,testReasons:l,selectedTest:n,selectedSpecimen:o,selectedReason:i,selectedAccessionNumber:d,labInvestigations:s,editingInvestigationId:r,loadTestTypes:async()=>{try{const a=await _e("testTypes");if(Array.isArray(a)&&a.length>0)e.value=a.map((e=>({id:e.concept_id.toString(),name:e.name,assigned_id:e.concept_id.toString()})));else if(a&&"records"in a&&a.records.length>0)e.value=a.records.map((e=>({id:e.concept_id.toString(),name:e.name,assigned_id:e.concept_id.toString()})));else{const a=await he.getTestTypes();a&&a.length>0&&(e.value=a.map((e=>({id:e.concept_id.toString(),name:e.name,assigned_id:e.concept_id.toString()}))))}}catch(a){console.error("Error loading test types:",a),ge("Failed to load test types")}},loadSpecimens:c,handleTestChange:e=>{e&&e.name?c(e.name):(a.value=[],o.value=null)},handleBarcodeScanned:async e=>{if(!e||0===e.trim().length)return fe("Barcode is required"),!1;try{return await he.accessionNumExists(e)?(fe(`Barcode ${e} was already used`),!1):(d.value=e,!0)}catch(a){return console.error("Error checking barcode:",a),ge(`Failed to confirm barcode ${e}, Please try again later`),!1}},refreshTestTypes:async()=>{try{const a=await he.getTestTypesViaDirectAPICall();a&&a.length>0?(e.value=a.map((e=>({id:e.concept_id.toString(),name:e.name,assigned_id:e.concept_id.toString()}))),be("Test types refreshed successfully")):fe("No test types found")}catch(a){console.error("Error refreshing test types:",a),ge("Failed to refresh test types")}},saveLabInvestigation:async()=>{if(n.value&&o.value&&i.value){if(s.value.some((e=>{var a,t;return e.test.id===(null===(a=n.value)||void 0===a?void 0:a.id)&&e.specimen.id===(null===(t=o.value)||void 0===t?void 0:t.id)&&e.id!==r.value})))return void fe("This test and specimen combination has already been added");if(r.value){const e=s.value.findIndex((e=>e.id===r.value));-1!==e&&(s.value[e]={...s.value[e],test:n.value,specimen:o.value,reason:i.value,accessionNumber:d.value,isEditing:!1},r.value=null)}else{const e={id:Date.now().toString(36)+Math.random().toString(36).substring(2),test:n.value,specimen:o.value,reason:i.value,accessionNumber:d.value,dateAdded:(new Date).toISOString(),isEditing:!1};s.value.push(e)}n.value=null,o.value=null,i.value=null,d.value=""}else fe("Please select test, specimen, and reason for testing")},editLabInvestigation:e=>{const a=s.value.find((a=>a.id===e));a&&(n.value=a.test,o.value=a.specimen,i.value=a.reason,d.value=String(a.accessionNumber),r.value=a.id)},cancelLabInvestigation:e=>{const a=s.value.findIndex((a=>a.id===e));-1!==a&&s.value.splice(a,1),r.value===e&&(n.value=null,o.value=null,r.value=null)}}})(),{chartPeriod:Qt,weightChartCanvas:el,isLoadingWeightData:al,weightData:tl,loadWeightHistory:ll,initializeWeightChart:nl,cleanupChart:ol}=(()=>{const e=t(2),a=t(null);let n=null;const o=t(!1),i=t([]);return window.addEventListener("resize",(()=>{n&&a.value&&n.resize()})),{chartPeriod:e,weightChartCanvas:a,isLoadingWeightData:o,weightData:i,loadWeightHistory:async()=>{o.value=!0;try{const e=new me,a=await e.getWeightHistory();a&&a.length>0?(i.value=a.map((e=>({date:l(e.date).format("MM-DD"),weight:parseFloat(e.weight)}))),i.value.sort(((e,a)=>l(e.date,"MM-DD").valueOf()-l(a.date,"MM-DD").valueOf()))):(fe("No weight history found for this patient"),i.value=[],n&&(n.destroy(),n=null))}catch(e){console.error("Error loading weight history:",e),ge("Failed to load weight history"),i.value=[],n&&(n.destroy(),n=null)}finally{o.value=!1}},initializeWeightChart:()=>{var e;if(!a.value||0===i.value.length)return;n&&(n.destroy(),n=null);const t=(null===(e=a.value.parentElement)||void 0===e?void 0:e.clientWidth)||800;a.value.width=t,a.value.height=300;const l=a.value.getContext("2d");if(!l)return;const o=i.value.map((e=>e.date)),d=i.value.map((e=>e.weight)),s=i.value.findIndex((e=>void 0!==e.height)),r=l.createLinearGradient(0,0,0,400);r.addColorStop(0,"rgba(75, 192, 75, 0.6)"),r.addColorStop(1,"rgba(75, 192, 75, 0.1)"),n=new Ie(l,{type:"line",data:{labels:o,datasets:[{label:"Weight",data:d,borderColor:"rgb(75, 192, 75)",backgroundColor:r,tension:.3,fill:!0,pointBackgroundColor:"rgb(75, 192, 75)",pointRadius:5}]},options:{responsive:!0,maintainAspectRatio:!1,layout:{padding:{top:10,right:10,bottom:10,left:10}},scales:{y:{min:30,max:220,ticks:{stepSize:10},grid:{color:"rgba(200, 200, 200, 0.3)"}},x:{grid:{color:"rgba(200, 200, 200, 0.3)"}}},plugins:{tooltip:{callbacks:{afterLabel:e=>{if(e.dataIndex===s&&i.value[s].height)return`Height: ${i.value[s].height}cm`}}}}}})},cleanupChart:()=>{n&&(n.destroy(),n=null)}}})(),{validate:il}=((e,a,t)=>{const l=n((()=>({"weight-chart":e.value,"side-effects":a.value,"tb-therapy":t.value})));return{validate:async()=>{for(const e in l.value){const a=e;if(!l.value[a])return fe(`Please fill out ${e.replaceAll("-"," ")} section`),!1}return!0},stepsMap:l}})(G,j,q);return o((async()=>{await $t(),await ll(),setTimeout((()=>{tl.value.length>0&&nl()}),500)})),Z((()=>{ol()})),a({onSubmit:async function(){try{if(!(await il()))return!1;const a=[];if(Ae()&&He.value){const e=await Re(X.value,we,Ce);null!=e&&e.observations&&a.push(...e.observations)}if(Ue.value){const e=new Pe(X.value,53,we,Ce),t={history:ca.value,status:ra.value,methods:zt.value,symptoms:ia.value,encounterService:e},l=await ta(X.value,53,we,Ce,t);l&&l.length>0&&a.push(...l)}if(tl.value&&tl.value.length>0){const e=new Pe(X.value,53,we,Ce),t=tl.value[tl.value.length-1];if(null!=t&&t.weight){const l=await e.buildValueNumber("Weight",t.weight);a.push(l)}}null===pa.isPregnant&&null===pa.isBreastFeeding||L.value&&L.value.length>0&&a.push(...L.value);try{const e=await ha(X.value,we,Ce);e&&e.length>0&&a.push(...e)}catch(e){console.error("No contraceptives selected or error building contraceptives payload:",e)}z.value&&z.value.length>0&&a.push(...z.value);const t=a.filter((e=>e&&Object.keys(e).length>0));if(t.length>0){let e=He.value;if(!e){const a=new Pe(X.value,53,we,Ce),t=await a.createEncounter();if(!t)return ge("Failed to create encounter"),!1;e=t.encounter_id}await Pe.saveObsArray(Number(e),t),be("Consultation data saved successfully")}return!0}catch(e){return console.error("Error submitting consultation data:",e),ge("Failed to save consultation data"),!1}}}),o((()=>{J((()=>{setTimeout((()=>{document.querySelectorAll(".multiselect").forEach((e=>{const a=e.querySelector(".multiselect__content-wrapper");if(a){const t=e.clientWidth||"320";a.style.width=t+"px"}}))}),1e3)}))})),o((async()=>{ke.value=await Me.cervicalCancerScreeningEnabled()})),(e,a)=>(s(),d(r(pe),null,{default:u((()=>[v(r(C),null,{default:u((()=>[v(ua,{patientID:Number(X.value)},null,8,["patientID"]),v(r(K),{ref_key:"accordionGroup",ref:_,value:w.value,multiple:!0},{default:u((()=>[v(r(Q),{style:{position:"relative !important",overflow:"visible !important"},value:"lab-investigation"},{default:u((()=>[v(r(D),{slot:"header"},{default:u((()=>[f("div",wa,[a[22]||(a[22]=f("div",{class:"section-icon"},[f("svg",{xmlns:"http://www.w3.org/2000/svg",width:"25",height:"25",viewBox:"0 0 48 48"},[f("g",{fill:"none",stroke:"currentColor","stroke-width":"4"},[f("path",{"stroke-linecap":"round",d:"m29.003 18.373l1.105-1.105l.53-.53a5.5 5.5 0 0 0 0-7.778v0a5.5 5.5 0 0 0-7.778 0L9.172 22.648a.143.143 0 0 0 0 .202l6.97 6.97a1 1 0 0 0 1.414 0l3.713-3.713l1.105-1.105"}),f("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m28.163 6.485l1.768-1.767a3.5 3.5 0 0 1 4.95 4.95l-1.768 1.767zM10.485 24.163l-4.242 4.243l4.95 4.95l4.242-4.243z"}),f("circle",{cx:"26.041",cy:"22.042",r:"4.5",transform:"rotate(45 26.041 22.042)"}),f("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m6 20l12.728 12.728M10 44h32M31 22c4 0 8 4 8 10c0 6.4-5.167 9.833-8 12"})])])],-1)),v(r(N),null,{default:u((()=>[a[21]||(a[21]=h(" Lab investigation ")),W.value?(s(),S("span",Ca,[v(r(x),{size:"small",icon:r(ee),style:{"margin-right":"3px"}},null,8,["icon"]),a[20]||(a[20]=h(" Completed "))])):V("",!0)])),_:1,__:[21]})])])),_:1}),f("div",ka,[v(r(ae),{class:"single-row-grid",style:{overflow:"visible !important"}},{default:u((()=>[v(r($),{class:"align-items-center"},{default:u((()=>[v(r(Y),{size:"auto"},{default:u((()=>[v(r(y),{fill:"clear",shape:"round",size:"small",onClick:r(Xt)},{default:u((()=>[v(r(x),{icon:r(te),slot:"icon-only"},null,8,["icon"])])),_:1},8,["onClick"])])),_:1}),v(r(Y),{size:"3"},{default:u((()=>[v(r(N),{class:"labl-cls"},{default:u((()=>a[23]||(a[23]=[h(" Test ")]))),_:1,__:[23]}),v(r(le),{modelValue:r(Ht),"onUpdate:modelValue":[a[0]||(a[0]=e=>ne(Ht)?Ht.value=e:null),r(Gt)],teleport:"",multiple:!1,taggable:!1,"hide-selected":!0,"close-on-select":!0,openDirection:"auto","tag-placeholder":"",placeholder:"Select test",selectLabel:"",label:"name",searchable:!0,"track-by":"assigned_id",options:r(Ft),disabled:!1},null,8,["modelValue","onUpdate:modelValue","options"])])),_:1}),v(r(Y),{size:"3"},{default:u((()=>[v(r(N),{class:"labl-cls"},{default:u((()=>a[24]||(a[24]=[h(" Specimen ")]))),_:1,__:[24]}),v(r(le),{modelValue:r(Ut),"onUpdate:modelValue":a[1]||(a[1]=e=>ne(Ut)?Ut.value=e:null),multiple:!1,taggable:!1,"hide-selected":!0,"close-on-select":!0,openDirection:"auto","tag-placeholder":"",placeholder:"Select specimen",selectLabel:"",label:"name",searchable:!0,"track-by":"assigned_id",options:r(At),disabled:!1,appendToBody:!0},null,8,["modelValue","options"])])),_:1}),v(r(Y),{size:"3"},{default:u((()=>[v(r(N),{class:"labl-cls"},{default:u((()=>a[25]||(a[25]=[h(" Reason ")]))),_:1,__:[25]}),v(r(le),{modelValue:r(jt),"onUpdate:modelValue":a[2]||(a[2]=e=>ne(jt)?jt.value=e:null),multiple:!1,taggable:!1,"hide-selected":!0,"close-on-select":!0,openDirection:"auto","tag-placeholder":"",placeholder:"Select reason",selectLabel:"",searchable:!0,options:r(Rt),disabled:!1,appendToBody:!0},null,8,["modelValue","options"])])),_:1}),r(Ht)&&r(Ht).name&&r(Ht).name.match(/HIV viral load/i)&&r(Ut)&&r(Ut).name&&r(Ut).name.match(/dbs|plasma/i)?(s(),d(r(Y),{key:0,size:"auto"},{default:u((()=>[v(r(N),{class:"labl-cls"},{default:u((()=>a[26]||(a[26]=[h(" Barcode ID ")]))),_:1,__:[26]}),v(r(oe),{placeholder:"Scan barcode",modelValue:r(qt),"onUpdate:modelValue":a[3]||(a[3]=e=>ne(qt)?qt.value=e:null),class:"barcode-input"},{default:u((()=>[v(r(x),{slot:"start",icon:r(ie),"aria-hidden":"true"},null,8,["icon"])])),_:1},8,["modelValue"])])),_:1})):V("",!0)])),_:1}),v(r(Y),{size:"auto"},{default:u((()=>[v(r(y),{fill:"clear",class:"ion-margin-top",onClick:r(Zt)},{default:u((()=>[v(r(x),{icon:r(de),slot:"start"},null,8,["icon"]),h(" "+b(r(Yt)?"UPDATE ORDERS":"ADD TO ORDERS"),1)])),_:1},8,["onClick"])])),_:1})])),_:1}),r(Wt).length>0?(s(),S("div",Sa,[f("div",Va,[f("table",Da,[a[27]||(a[27]=f("thead",null,[f("tr",null,[f("th",null,"TEST"),f("th",null,"SPECIMEN"),f("th",null,"REASON"),f("th",null,"BARCODE"),f("th",null,"ACTIONS")])],-1)),f("tbody",null,[(s(!0),S(T,null,P(r(Wt),(e=>(s(),S("tr",{key:e.id},[f("td",null,b(e.test.name),1),f("td",null,b(e.specimen.name),1),f("td",null,b(e.reason),1),f("td",null,b(e.accessionNumber||"N/A"),1),f("td",Na,[v(r(y),{fill:"clear",size:"small",color:"nuetral",onClick:a=>r(Jt)(e.id)},{default:u((()=>[v(r(x),{icon:r(B),slot:"icon-only"},null,8,["icon"])])),_:2},1032,["onClick"]),v(r(y),{fill:"clear",size:"small",color:"danger",onClick:a=>r(Kt)(e.id)},{default:u((()=>[v(r(x),{icon:r(se),slot:"icon-only"},null,8,["icon"])])),_:2},1032,["onClick"])])])))),128))])])])])):V("",!0),f("div",Ma,[v(r(y),{expand:"block",onClick:ya},{default:u((()=>a[28]||(a[28]=[h(" Save and Continue ")]))),_:1,__:[28]})])])])),_:1}),v(r(Q),{value:"weight-chart"},{default:u((()=>[v(r(D),{slot:"header"},{default:u((()=>[f("div",Ea,[a[31]||(a[31]=f("div",{class:"section-icon"},[f("svg",{xmlns:"http://www.w3.org/2000/svg",width:"30",height:"30",viewBox:"0 0 24 24"},[f("g",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"1.5",color:"currentColor"},[f("path",{d:"M19 15v3.889C19 21.114 18.264 22 15.889 22H8.11C5.886 22 5 21.264 5 18.889V15a7 7 0 1 1 14 0"}),f("path",{d:"M16 15a4 4 0 0 0-8 0m4 2l1-2m3.312-10H7.688c-.884 0-1.326 0-1.715-.152a2 2 0 0 1-.368-.187c-.35-.22-.595-.568-1.085-1.263c-.382-.541-.573-.812-.507-1.033a.5.5 0 0 1 .107-.19C4.28 2 4.624 2 5.313 2h13.376c.689 0 1.033 0 1.192.175q.075.084.107.19c.066.221-.125.492-.507 1.033c-.49.695-.735 1.042-1.085 1.263a2 2 0 0 1-.368.187C17.637 5 17.196 5 16.312 5M14 8V5m-4 3V5"})])])],-1)),v(r(N),null,{default:u((()=>[a[30]||(a[30]=h(" Patient weight chart ")),G.value?(s(),S("span",Ta,[v(r(x),{size:"small",icon:r(ee),style:{"margin-right":"3px"}},null,8,["icon"]),a[29]||(a[29]=h(" Completed "))])):V("",!0)])),_:1,__:[30]})])])),_:1}),f("div",Ia,[f("div",Pa,[f("div",Oa,[v(r(N),null,{default:u((()=>[h("Weight trail ("+b(r(Qt))+" year period)",1)])),_:1}),v(r(y),{fill:"clear",size:"small",onClick:r(ll),disabled:r(al)},{default:u((()=>[v(r(x),{icon:r(te),slot:"icon-only"},null,8,["icon"])])),_:1},8,["onClick","disabled"])]),r(al)?(s(),S("div",za,[v(r(I),{name:"bubbles"}),a[32]||(a[32]=f("p",null,"Loading weight data...",-1))])):V("",!0),r(al)||0!==r(tl).length?V("",!0):(s(),S("div",Ba,a[33]||(a[33]=[f("p",null,"No weight data available for this patient",-1)]))),f("div",{class:R(["chart-canvas-container",{hidden:r(al)||0===r(tl).length}])},[f("canvas",{ref_key:"weightChartCanvas",ref:el,id:"weight-chart-canvas"},null,512)],2),r(al)?V("",!0):(s(),S("div",La,[v(r(y),{expand:"block",onClick:It},{default:u((()=>a[34]||(a[34]=[h(" Continue ")]))),_:1,__:[34]})]))])])])),_:1}),r(Ve).isFemale()?(s(),d(r(Q),{key:0,value:"pregnancy-breastfeeding"},{default:u((()=>[v(r(D),{slot:"header"},{default:u((()=>[f("div",Fa,[a[37]||(a[37]=f("div",{class:"section-icon"},[f("svg",{xmlns:"http://www.w3.org/2000/svg",width:"32",height:"32",viewBox:"0 0 32 32"},[f("g",{fill:"currentColor"},[f("path",{d:"M15.751 8.26c.2 0 .386.056.553.148c.398.14.706.485.797.913c.02.12-.08.23-.2.23h-.416h.346a.75.75 0 0 0-.05-.546a.78.78 0 0 0-.7-.434a.77.77 0 0 0-.74.98h.356h-.736c-.15 0-.27-.14-.22-.29q.013-.053.03-.103l-.03-.027a.368.368 0 0 1 .02-.57c.28-.19.64-.3.99-.3"}),f("path",{d:"m15.697 9.55l.004.01h.78l.004-.01a.444.444 0 0 0-.394-.64a.4.4 0 0 0-.168.035a.14.14 0 1 1-.21.184a.43.43 0 0 0-.062.222a.5.5 0 0 0 .046.2m4.594-1.301c.35 0 .71.11.99.3c.19.13.2.41.03.56l-.035.033q.021.057.035.117c.04.15-.08.29-.23.29h-.726l-.004.01h-.78l-.005-.01h-.415c-.12 0-.22-.11-.2-.23c.081-.412.369-.75.75-.898c.176-.106.375-.172.59-.172m.064 1.3h.346q.03-.105.03-.21a.77.77 0 0 0-.77-.77c-.43 0-.78.35-.78.77c0 .08.01.14.03.21h.355a.4.4 0 0 1-.045-.2c0-.083.024-.162.066-.229a.14.14 0 0 0 .254-.08a.14.14 0 0 0-.04-.1a.4.4 0 0 1 .16-.03a.444.444 0 0 1 .395.64m-2.345 2.409c-.45 0-.87-.11-1.23-.3c-.12-.06-.25.08-.18.2c.3.46.82.77 1.41.77s1.11-.3 1.41-.77c.07-.12-.05-.25-.18-.19c-.36.18-.78.29-1.23.29m-.76-1.39l.44-1.42c.1-.31.54-.31.63 0l.44 1.42c.09.29-.12.59-.43.59h-.65c-.3 0-.52-.3-.43-.59m-2.31-2.76a.22.22 0 0 1-.2-.12c-.07-.1-.03-.25.08-.31c.03-.02.78-.44 1.65-.28c.13.02.21.14.19.27c-.02.12-.15.21-.27.18c-.7-.13-1.33.23-1.33.23c-.04.03-.08.03-.12.03m6.02-.03q.06.03.12.03c.08 0 .16-.04.21-.12a.24.24 0 0 0-.112-.33c-.135-.068-.83-.416-1.628-.27a.23.23 0 0 0-.19.27c.02.13.15.21.27.19c.626-.117 1.203.168 1.312.222z"}),f("path",{d:"M24.251 10.63a2.86 2.86 0 0 0-.2-2.82c-.3-.46-.46-.99-.46-1.54v-.01a2.86 2.86 0 0 0-2.86-2.86c-.16 0-.3-.07-.39-.2c-.52-.73-1.37-1.2-2.33-1.2s-1.81.47-2.33 1.2c-.09.12-.24.2-.39.2a2.86 2.86 0 0 0-2.86 2.86v.01c0 .55-.16 1.08-.46 1.54a2.86 2.86 0 0 0-.2 2.82c.06.13.06.27 0 .4a2.79 2.79 0 0 0 2.437 4.01l-1.557 1.67c-.33.35-.53.82-.53 1.34c0 .5.19.96.49 1.3c.09.1.03.27-.1.29a6.385 6.385 0 0 0-5.308 6.168a1.66 1.66 0 0 0-1.198 1.444l-.001.014v.013c-.023.373.077.73.271 1.025a1.66 1.66 0 0 0 .423 1.337q.008.046.019.094l.002.01c.192.793.919 1.255 1.632 1.255h1.042c.036 0 .678.002 1.013-.054a13 13 0 0 0 .88-.162a19 19 0 0 0 2.68-.784h6.405c.96 0 1.74-.78 1.74-1.74V16.05c0-.36-.072-.702-.203-1.016a2.79 2.79 0 0 0 2.333-4.004a.5.5 0 0 1 .01-.4m-1.91-3.116a2 2 0 0 1 .04.386l-.005.125a1.4 1.4 0 0 1 1.133 1.373a1.4 1.4 0 0 1-1.257 1.392c-.227 2.284-2.049 3.79-4.24 3.79c-2.122 0-3.897-1.42-4.215-3.575q-.015-.107-.026-.216a1.399 1.399 0 0 1-.119-2.764l-.01-.265c.007-.635.3-.96.78-1.28c.267-.178.526-.364.73-.6l.005-.005q.11-.127.197-.277l.006-.01q.045-.081.081-.168l.07-.15c.07-.17.3-.2.4-.05a3.2 3.2 0 0 0 .465.545l.006.005c.605.565 1.414.89 2.26.89h2.76c.14 0 .77.061.938.854M8.93 26.74l-.3-.3a.66.66 0 0 1 0-.92c.25-.25.67-.25.92 0l.54.54c.2.2.49.28.77.21c1.24-.31 3.31-.99 4.91-2.38a7 7 0 0 0 1.154-1.275a8 8 0 0 0 .658-1.106c.25-.503.442-1.007.588-1.48v-.009h3.6q-.107.477-.266 1a13 13 0 0 1-.655 1.718a12 12 0 0 1-1.019 1.782a10.7 10.7 0 0 1-1.78 1.99c-3.166 2.74-7.354 3.38-7.78 3.445l-.03.005l-.036.005C9.95 30 9.44 30 9.391 30h-1.04c-.31 0-.59-.2-.66-.49a.67.67 0 0 1 .02-.37l-.057-.021a.645.645 0 0 1-.393-.6c0-.2.09-.38.23-.5a.64.64 0 0 1-.49-.68a.67.67 0 0 1 .67-.6z"})])])],-1)),v(r(N),null,{default:u((()=>[a[36]||(a[36]=h(" Pregnancy or Breast Feeding ")),va.value?(s(),S("span",Aa,[v(r(x),{size:"small",icon:r(ee),style:{"margin-right":"3px"}},null,8,["icon"]),a[35]||(a[35]=h(" Completed "))])):V("",!0)])),_:1,__:[36]})])])),_:1}),f("div",Ra,[f("div",null,[v(r($),null,{default:u((()=>[v(r(Y),null,{default:u((()=>[v(r(N),null,{default:u((()=>a[38]||(a[38]=[h("Pregnant")]))),_:1,__:[38]})])),_:1}),v(r(Y),null,{default:u((()=>[f("div",Ha,[v(r(M),{modelValue:r(pa).isPregnant,"onUpdate:modelValue":a[4]||(a[4]=e=>r(pa).isPregnant=e)},{default:u((()=>[v(r(E),{slot:"end",value:"yes"},{default:u((()=>a[39]||(a[39]=[h("Yes")]))),_:1,__:[39]}),v(r(E),{slot:"end",style:{"margin-left":"20px"},value:"no"},{default:u((()=>a[40]||(a[40]=[h("No")]))),_:1,__:[40]})])),_:1},8,["modelValue"])])])),_:1})])),_:1}),v(r($),null,{default:u((()=>[v(r(Y),null,{default:u((()=>[v(r(N),null,{default:u((()=>a[41]||(a[41]=[h("Breastfeeding")]))),_:1,__:[41]})])),_:1}),v(r(Y),null,{default:u((()=>[f("div",Ua,[v(r(M),{modelValue:r(pa).isBreastFeeding,"onUpdate:modelValue":a[5]||(a[5]=e=>r(pa).isBreastFeeding=e)},{default:u((()=>[v(r(E),{slot:"end",value:"yes"},{default:u((()=>a[42]||(a[42]=[h("Yes")]))),_:1,__:[42]}),v(r(E),{slot:"end",style:{"margin-left":"20px"},value:"no"},{default:u((()=>a[43]||(a[43]=[h("No")]))),_:1,__:[43]})])),_:1},8,["modelValue"])])])),_:1})])),_:1}),r(ma)?V("",!0):(s(),S("div",ja,[v(r(y),{expand:"block",onClick:Bt},{default:u((()=>a[44]||(a[44]=[h(" Continue ")]))),_:1,__:[44]})]))])])])),_:1})):V("",!0),r(Ve).isFemale()?(s(),d(r(Q),{key:1,value:"contraceptives"},{default:u((()=>[v(r(D),{slot:"header"},{default:u((()=>[f("div",qa,[a[47]||(a[47]=f("div",{class:"section-icon"},[f("svg",{xmlns:"http://www.w3.org/2000/svg",width:"48",height:"48",viewBox:"0 0 48 48"},[f("path",{fill:"currentColor","fill-rule":"evenodd",d:"M16 7.152a2 2 0 0 1 1.347-1.89l3.018-1.043A4 4 0 0 1 21.671 4h4.658a4 4 0 0 1 1.306.22l3.018 1.042A2 2 0 0 1 32 7.152V11h-1.09a1 1 0 0 1-.206.607l-1.51 1.978l5.362 1.756A5 5 0 0 1 38 20.092V39a5 5 0 0 1-5 5H15a5 5 0 0 1-5-5V20.092a5 5 0 0 1 3.444-4.751l5.362-1.756l-1.51-1.978a1 1 0 0 1-.205-.607H16zM19.349 11h9.302l-1.046 1.371a2 2 0 0 0 .967 3.114l5.362 1.756A3 3 0 0 1 36 20.092V39a3 3 0 0 1-3 3H15a3 3 0 0 1-3-3V20.092a3 3 0 0 1 2.066-2.85l5.362-1.757a2 2 0 0 0 .967-3.114zm10.97 21.906A8 8 0 0 0 19.095 21.68l4.113 4.112l-1.414 1.414l-4.113-4.113A8 8 0 0 0 28.906 34.32l-3.113-3.112l1.414-1.414zM24 38c5.523 0 10-4.477 10-10s-4.477-10-10-10s-10 4.477-10 10s4.477 10 10 10m.567-11.99c-.27-.783-.01-1.843.737-2.687c.991-1.122 2.465-1.44 3.292-.71s.694 2.233-.298 3.355c-.648.735-1.504 1.124-2.25 1.101l-.002.005c-.207.347-.302.762-.384 1.176l-.01.045c-.074.38-.18.884-.672 1.394c-.504.523-1.431.707-2.398.872c-.641.11-.973.213-1.135.281c-.133.056-.263.351-.442.756c-.292.662-.713 1.617-1.49 2.302c-.11-.993.203-2.722.38-3.655a1.7 1.7 0 0 1 .606-.753c.473-.338 1.175-.532 2.08-.686c.835-.142 1.06-.321 1.115-.378c.047-.05.086-.11.174-.553l.01-.047c.08-.406.198-1.005.586-1.656a4 4 0 0 1 .1-.161","clip-rule":"evenodd"})])],-1)),v(r(N),null,{default:u((()=>{var e;return[a[46]||(a[46]=h(" Contraceptives ")),null!==(e=k.value)&&void 0!==e&&e.isContraceptivesSaved?(s(),S("span",Wa,[v(r(x),{size:"small",icon:r(ee),style:{"margin-right":"3px"}},null,8,["icon"]),a[45]||(a[45]=h(" Completed "))])):V("",!0)]})),_:1,__:[46]})])])),_:1}),f("div",Ya,[v(oa,{"patient-i-d":Number(X.value),"provider-i-d":r(we),"location-i-d":r(Ce),ref_key:"contraceptivesRef",ref:k,onOnSuccess:Pt},null,8,["patient-i-d","provider-i-d","location-i-d"])])])),_:1})):V("",!0),r(Ve).isFemale()&&ke.value?(s(),d(r(Q),{key:2,value:"cxca"},{default:u((()=>[v(r(D),{slot:"header"},{default:u((()=>[f("div",$a,[a[50]||(a[50]=f("div",{class:"section-icon"},[f("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},[f("g",{fill:"currentColor"},[f("path",{d:"M7.773 2.384L5.727 8.268a14.09 14.09 0 0 0 1.137 11.728l.504.864l-1.728 1.008l-.504-.864A16.09 16.09 0 0 1 3.838 7.61l2.046-5.884zm8.454 0l2.047 5.884a14.09 14.09 0 0 1-1.138 11.728l-.504.864l1.728 1.008l.504-.864A16.09 16.09 0 0 0 20.163 7.61l-2.047-5.884zM13 21v-5.086l3.207-3.207l-1.414-1.414L12 14.086l-2.793-2.793l-1.414 1.414L11 15.914V21z"}),f("path",{"fill-rule":"evenodd",d:"M11.633 3c-1.65 0-2.496 1.978-1.355 3.171l.684.715l-2.004 2.096l1.084 1.037L12 7.97l1.958 2.047l1.084-1.036l-2.004-2.096l.684-.715c1.14-1.193.296-3.17-1.355-3.17zm1.005 2.134L12 5.801l-.638-.667a.375.375 0 0 1 .27-.634h.735c.33 0 .5.396.271.634","clip-rule":"evenodd"})])])],-1)),v(r(N),null,{default:u((()=>[a[49]||(a[49]=h(" Cervical Cancer ")),O.value?(s(),S("span",Ga,[v(r(x),{size:"small",icon:r(ee),style:{"margin-right":"3px"}},null,8,["icon"]),a[48]||(a[48]=h(" Completed "))])):V("",!0)])),_:1,__:[49]})])])),_:1}),f("div",Xa,[v(xa,{"patient-i-d":Number(X.value),"provider-i-d":r(we),"location-i-d":r(Ce),ref:"cxcaRef",onOnSuccess:Ot},null,8,["patient-i-d","provider-i-d","location-i-d"])])])),_:1})):V("",!0),v(r(Q),{value:"contraindications"},{default:u((()=>[v(r(D),{slot:"header"},{default:u((()=>[f("div",Za,[a[53]||(a[53]=f("div",{class:"section-icon"},[f("svg",{xmlns:"http://www.w3.org/2000/svg",width:"30",height:"30",viewBox:"0 0 16 16"},[f("path",{fill:"currentColor",d:"M3.001 3.999a1.001 1.001 0 0 1 1.836-.555a.5.5 0 1 0 .832-.555A2 2 0 0 0 2 3.999A2 2 0 0 0 4.078 6h3.259a5.5 5.5 0 0 1 3.151-1h-6.41l-.038.001L4.003 5A1 1 0 0 1 3 3.999m.495 3.003h2.76a5.5 5.5 0 0 0-.657 1H3.496a.5.5 0 1 1 0-1M2.501 9h2.706a5.5 5.5 0 0 0-.185 1h-2.52a.5.5 0 0 1 0-1m.995 2h1.526q.048.516.185 1H3.496a.5.5 0 0 1 0-1M7.5 3a.5.5 0 0 0 0 1h6a.5.5 0 1 0 0-1zm7.5 7.5a4.5 4.5 0 1 1-9 0a4.5 4.5 0 0 1 9 0m-4-2a.5.5 0 1 0-1 0V10H8.5a.5.5 0 0 0 0 1H10v1.5a.5.5 0 0 0 1 0V11h1.5a.5.5 0 1 0 0-1H11z"})])],-1)),v(r(N),null,{default:u((()=>[a[52]||(a[52]=h(" Contraindications/side effects ")),j.value?(s(),S("span",Ja,[v(r(x),{size:"small",icon:r(ee),style:{"margin-right":"3px"}},null,8,["icon"]),a[51]||(a[51]=h(" Completed "))])):V("",!0)])),_:1,__:[52]})])])),_:1}),f("div",Ka,[f("div",Qa,[v(r($),null,{default:u((()=>[v(r(Y),null,{default:u((()=>[v(r(N),null,{default:u((()=>a[54]||(a[54]=[h("Has side effects / contraindications")]))),_:1,__:[54]})])),_:1}),v(r(Y),null,{default:u((()=>[f("div",et,[v(r(M),{modelValue:H.value,"onUpdate:modelValue":a[6]||(a[6]=e=>H.value=e)},{default:u((()=>[v(r(E),{slot:"end",value:"yes"},{default:u((()=>a[55]||(a[55]=[h("Yes")]))),_:1,__:[55]}),v(r(E),{slot:"end",style:{"margin-left":"20px"},value:"no"},{default:u((()=>a[56]||(a[56]=[h("No")]))),_:1,__:[56]})])),_:1},8,["modelValue"])])])),_:1})])),_:1}),"yes"===H.value?(s(),S("div",at,[r(Le)?(s(),S("div",tt,[v(r(I),{name:"bubbles"}),a[57]||(a[57]=f("p",null,"Loading side effects data...",-1))])):V("",!0),f("div",lt,[v(r(re),{modelValue:U.value,"onUpdate:modelValue":a[7]||(a[7]=e=>U.value=e),onIonChange:ba},{default:u((()=>[v(r(ce),{value:"contraindication"},{default:u((()=>[v(r(N),null,{default:u((()=>a[58]||(a[58]=[h("Side Effects/Contraindications")]))),_:1,__:[58]})])),_:1}),v(r(ce),{value:"side_effect"},{default:u((()=>[v(r(N),null,{default:u((()=>a[59]||(a[59]=[h("Others")]))),_:1,__:[59]})])),_:1})])),_:1},8,["modelValue"])]),v(We,{modelValue:r(Oe),"onUpdate:modelValue":a[8]||(a[8]=e=>ne(Oe)?Oe.value=e:null),"side-effect-options":r(De)},null,8,["modelValue","side-effect-options"])])):V("",!0),f("div",nt,[v(r(y),{expand:"block",onClick:_a},{default:u((()=>a[60]||(a[60]=[h(" Save and Continue ")]))),_:1,__:[60]})])])])])),_:1}),v(r(Q),{value:"tb-therapy"},{default:u((()=>[v(r(D),{slot:"header"},{default:u((()=>[f("div",ot,[a[63]||(a[63]=f("div",{class:"section-icon"},[f("svg",{xmlns:"http://www.w3.org/2000/svg",width:"25",height:"25",viewBox:"0 0 48 48"},[f("g",{fill:"currentColor","fill-rule":"evenodd","clip-rule":"evenodd"},[f("path",{d:"M35 30.5a2.5 2.5 0 1 1-5 0a2.5 2.5 0 0 1 5 0m-2 0a.5.5 0 1 1-1 0a.5.5 0 0 1 1 0"}),f("path",{d:"M23 20.5V6h2v14.5c0 1.398.564 1.942 1.004 2.199q.073.042.148.078l-.004-.377c-.038-3.528-.112-10.4 5.327-10.4c4.126 0 7.599 7.974 9.335 15.542c.11.263.175.55.188.849c1.232 5.783 1.415 11.14.057 12.27c-3.193 2.653-9.58 1.06-12.773-2.124c-2.578-2.57-2.355-8.578-2.195-12.891v-.002q.016-.393.028-.767a4.3 4.3 0 0 1-1.119-.45a3.8 3.8 0 0 1-.996-.835c-.297.352-.64.626-.996.834c-.4.234-.794.37-1.12.451l.029.769c.16 4.313.383 10.32-2.195 12.891c-3.193 3.185-9.58 4.777-12.773 2.123S9.075 12 16.525 12c5.439 0 5.365 6.872 5.327 10.4v.002l-.004.375q.075-.036.148-.078c.44-.257 1.004-.801 1.004-2.199m15.327 5.36l.038.144a2.5 2.5 0 1 0 1.065 4.817c.27 1.566.449 3.05.526 4.36c.079 1.332.049 2.413-.068 3.188a3.7 3.7 0 0 1-.206.828c-.96.73-2.598 1.022-4.633.628c-2.058-.4-4.076-1.43-5.355-2.704c-.443-.442-.84-1.172-1.137-2.261c-.293-1.076-.45-2.361-.517-3.761c-.066-1.393-.04-2.833.004-4.208l.04-1.126v-.003q.019-.472.034-.927A3.001 3.001 0 0 0 34 24a3 3 0 0 0-5.847-.95q0-.344-.005-.719c-.015-1.648-.034-3.691.411-5.466c.254-1.014.616-1.732 1.05-2.178c.375-.386.912-.687 1.866-.687c.319 0 .777.134 1.395.654c.412.346.846.824 1.289 1.434A2.503 2.503 0 0 0 31 18.5a2.5 2.5 0 0 0 4.917.642c.927 1.962 1.748 4.292 2.41 6.719m.666 2.723l-.08-.366a.5.5 0 1 0 .08.366M16.525 14c.954 0 1.49.3 1.866.687c.434.446.796 1.164 1.05 2.178c.445 1.775.426 3.817.41 5.465l-.004.816c0 .76.033 1.67.069 2.616l.04 1.129c.044 1.375.07 2.815.004 4.208c-.067 1.4-.224 2.685-.517 3.76c-.297 1.09-.694 1.82-1.137 2.262c-1.279 1.275-3.297 2.304-5.355 2.704c-2.035.394-3.673.102-4.633-.628l-.016-.04a3.7 3.7 0 0 1-.19-.788c-.117-.775-.147-1.856-.068-3.188c.157-2.65.727-6.012 1.63-9.32c.905-3.321 2.109-6.46 3.474-8.722c.683-1.133 1.357-1.96 1.982-2.485c.618-.52 1.076-.654 1.395-.654M33.5 19a.5.5 0 1 0 0-1a.5.5 0 0 0 0 1M32 24a1 1 0 1 1-2 0a1 1 0 0 1 2 0"})])])],-1)),v(r(N),null,{default:u((()=>[a[62]||(a[62]=h(" TB Preventive Therapy ")),q.value?(s(),S("span",it,[v(r(x),{size:"small",icon:r(ee),style:{"margin-right":"3px"}},null,8,["icon"]),a[61]||(a[61]=h(" Completed "))])):V("",!0)])),_:1,__:[62]})])])),_:1}),f("div",dt,[r(la)?(s(),S("div",st,[v(r(I),{name:"bubbles"}),a[64]||(a[64]=f("p",null,"Loading side effects data...",-1))])):V("",!0),f("div",rt,[f("div",ct,[a[67]||(a[67]=f("label",{class:"form-label required"},"On TB treatment?",-1)),f("div",ut,[v(r(M),{modelValue:r(Ue),"onUpdate:modelValue":a[9]||(a[9]=e=>ne(Ue)?Ue.value=e:null)},{default:u((()=>[f("div",vt,[v(r(E),{value:"Yes"}),v(r(N),null,{default:u((()=>a[65]||(a[65]=[h("Yes")]))),_:1,__:[65]})]),f("div",pt,[v(r(E),{value:"No"}),v(r(N),null,{default:u((()=>a[66]||(a[66]=[h("No")]))),_:1,__:[66]})])])),_:1},8,["modelValue"])])]),"yes"===r(Ue).toLowerCase()&&"unknown"!==r(Ue).toLowerCase()?(s(),S("div",mt,[a[70]||(a[70]=f("label",{class:"form-label required"},"TB Treatment Start Date",-1)),v(r($),null,{default:u((()=>[v(r(Y),{size:"10"},{default:u((()=>[v(ze,{place_holder:"enter data",onDateUpDated:[()=>{},a[10]||(a[10]=e=>{qe.value={day:e.value.day,month:e.value.month,year:e.value.year}})],date_prop:""})])),_:1}),v(r(Y),{size:"2"},{default:u((()=>[v(r(y),{fill:"clear","start-icon":r(ue),onClick:a[11]||(a[11]=e=>Xe.value=!0)},{default:u((()=>a[68]||(a[68]=[h("Estimate")]))),_:1,__:[68]},8,["start-icon"])])),_:1})])),_:1}),r(Xe)?(s(),S("div",ft,[v(Ne,{bold:"bold","input-header":`Estimate number of ${r($e).name}`,"input-value":r(Ke),"onUpdate:inputValue":[a[12]||(a[12]=e=>ne(Ke)?Ke.value=e:null),a[13]||(a[13]=e=>Ke.value=e.target.value)],showAsterisk:"",placeholder:"",unitsData:{isSingleSelect:!0,multiSelectData:r(Ye).map((e=>({name:e}))),value:r($e),trackBy:"name"},"onUpdate:units":a[14]||(a[14]=e=>$e.value=e)},null,8,["input-header","input-value","unitsData"])])):V("",!0),f("div",gt,[a[69]||(a[69]=f("label",{position:"stacked",class:"form-label required"},"Treatment Period",-1)),v(Ee,{placeholder:"",inputValue:r(je),unit:"Months",icon:r(ve),type:"number"},null,8,["inputValue","icon"])])])):"no"===r(Ue).toLowerCase()&&"unknown"!==r(Ue).toLowerCase()?(s(),S("div",ht,[f("div",bt,[a[71]||(a[71]=f("h4",null,"TB Associated Symptoms",-1)),v(Ge,{modelValue:r(ia),"onUpdate:modelValue":a[15]||(a[15]=e=>ne(ia)?ia.value=e:null),"tb-symptom-options":r(na)},null,8,["modelValue","tb-symptom-options"])]),f("div",_t,[v(r($),null,{default:u((()=>[v(r(Y),null,{default:u((()=>a[72]||(a[72]=[f("label",{class:"form-label required"},"CXR (Chest X-ray) Screening Method Result",-1)]))),_:1,__:[72]}),v(r(Y),null,{default:u((()=>[f("div",yt,[v(r(M),{modelValue:da.value,"onUpdate:modelValue":a[16]||(a[16]=e=>da.value=e)},{default:u((()=>[f("div",xt,[v(r(E),{value:"normal"}),v(r(N),null,{default:u((()=>a[73]||(a[73]=[h("Normal")]))),_:1,__:[73]})]),f("div",wt,[v(r(E),{value:"abnormal"}),v(r(N),null,{default:u((()=>a[74]||(a[74]=[h("Abnormal")]))),_:1,__:[74]})]),f("div",Ct,[v(r(E),{value:"unknown"}),v(r(N),null,{default:u((()=>a[75]||(a[75]=[h("Unknown/Not Done")]))),_:1,__:[75]})])])),_:1},8,["modelValue"])])])),_:1})])),_:1}),v(r($),null,{default:u((()=>[v(r(Y),null,{default:u((()=>a[76]||(a[76]=[f("label",{class:"form-label required"},"mWRD (Molecular WHO Recommended Rapid Diagnostic Test) Screening Method Result",-1)]))),_:1,__:[76]}),v(r(Y),null,{default:u((()=>[f("div",kt,[v(r(M),{modelValue:sa.value,"onUpdate:modelValue":a[17]||(a[17]=e=>sa.value=e)},{default:u((()=>[f("div",St,[v(r(E),{value:"negative"}),v(r(N),null,{default:u((()=>a[77]||(a[77]=[h("Negative")]))),_:1,__:[77]})]),f("div",Vt,[v(r(E),{value:"positive"}),v(r(N),null,{default:u((()=>a[78]||(a[78]=[h("Positive")]))),_:1,__:[78]})]),f("div",Dt,[v(r(E),{value:"unknown"}),v(r(N),null,{default:u((()=>a[79]||(a[79]=[h("Unknown/Not Done")]))),_:1,__:[79]})])])),_:1},8,["modelValue"])])])),_:1})])),_:1})]),r(ea)(zt.value,r(ia))?(s(),S("div",Nt,[f("div",null,[a[80]||(a[80]=f("label",{class:"form-label"},"TB Status",-1)),f("div",Mt,[v(r(le),{modelValue:ra.value,"onUpdate:modelValue":a[18]||(a[18]=e=>ra.value=e),multiple:!1,taggable:!1,"hide-selected":!1,"close-on-select":!0,openDirection:"bottom","tag-placeholder":"",placeholder:"Select TB status",selectLabel:"",label:"name",searchable:!0,"track-by":"assigned_id",options:r(Qe).map((e=>({name:e,assigned_id:e}))),disabled:!1},null,8,["modelValue","options"])])])])):V("",!0)])):V("",!0),"unknown"!==r(Ue).toLowerCase()?(s(),S("div",Et,[a[81]||(a[81]=f("label",{class:"form-label required"},"TB preventive therapy (TPT) history",-1)),f("div",null,[v(r(le),{modelValue:ca.value,"onUpdate:modelValue":a[19]||(a[19]=e=>ca.value=e),multiple:!1,taggable:!1,"hide-selected":!0,"close-on-select":!0,openDirection:"bottom","tag-placeholder":"",placeholder:"Select option",selectLabel:"",label:"name",searchable:!0,"track-by":"assigned_id",options:r(aa).map((e=>({name:e,assigned_id:e}))),disabled:!1},null,8,["modelValue","options"])])])):V("",!0),f("div",Tt,[v(r(y),{expand:"block",onClick:Lt},{default:u((()=>a[82]||(a[82]=[h(" Save and Continue ")]))),_:1,__:[82]})])])])])),_:1})])),_:1},8,["value"])])),_:1})])),_:1}))}}),[["__scopeId","data-v-0691f3a9"]]))}}}));
