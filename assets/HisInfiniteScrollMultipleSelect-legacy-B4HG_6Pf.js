System.register(["./ReportMixin.vue_vue_type_script_lang-legacy-DjL_DEpo.js","./KbHandler-legacy-DuBzOoqa.js","./BaseTextInput-legacy-CcfRZqPN.js","./FieldMixin.vue_vue_type_script_lang-legacy-DgFGCd-Q.js","./vendor-legacy-DaJmchH4.js","./index-legacy-p3MrzFbr.js","./lodash-legacy-pOOc9Efu.js","./Export-legacy-C35hmCHB.js","./apexcharts-legacy-B2sGTLMm.js"],function(e,t){"use strict";var i,l,s,n,a,o,d,c,h,r,u,f,k,p,y,b,g,m,v,I,C,x,_,w,D,S,K,V,j,L,F;return{setters:[e=>{i=e.Q,l=e.V},e=>{s=e.H,n=e.k},e=>{a=e.default},e=>{o=e._},e=>{d=e.d,c=e.eM,h=e.eN,r=e.D,u=e.G,f=e.ak,k=e.ah,p=e.bz,y=e.aY,b=e.bw,g=e.E,m=e.e,v=e.f,I=e.l,C=e.y,x=e.m,_=e.z,w=e.F,D=e.L,S=e.A,K=e.B,V=e.k,j=e.p},e=>{L=e.cd,F=e._},null,null,null],execute:function(){const t=d({name:"HisInfiniteScrollMultipleSelect",mixins:[o],components:{IonCheckbox:b,IonText:y,IonChip:p,ViewPort:l,HisTextInput:a,IonContent:k,IonList:f,IonItem:u,IonLabel:r,HisKeyboard:s,IonInfiniteScroll:h,IonInfiniteScrollContent:c},data:()=>({showKeyboard:!1,keyboard:i,listData:[],checkedItems:[],disableScroll:!1,filter:"",selected:"",page:1,limit:10}),watch:{clear(){this.checkedItems=[],this.filter="",this.selected=""},checkedItems:{handler(e){this.listData.forEach(t=>{e.find(e=>e.value===t.value)?t.isChecked=!0:t.isChecked=!1}),this.$emit("onValue",e)},deep:!0,immediate:!0},filter:{async handler(){this.page=1,this.disableScroll=!1;const e=await this.getListData();[...this.checkedItems].forEach(t=>{const i=e.findIndex(e=>e.value===t.value);-1===i?e.push(t):e[i].isChecked=!0}),this.listData=e}}},mounted(){this.init()},activated(){this.init()},methods:{async init(){this.$emit("onFieldActivated",this),this.listData=await this.getListData()},async getListData(){return await this.options(this.fdata,this.filter,this.page,this.limit)},async keypress(e){this.filter||(this.selected=""),this.filter=n(e,this.selected),this.selected=this.filter},async onKBValue(e){this.listData&&this.selected!==e&&(this.filter=e,this.selected=this.filter)},async pushData(e){this.page++;const t=await this.getListData();t.length>0?this.listData=L([...this.listData,...t.filter(e=>!this.listData.find(t=>t.value===e.value))],"label"):this.disableScroll=!0,e.target.complete()},onSelect(e){this.$nextTick(async()=>{e.isChecked?-1===this.checkedItems.findIndex(t=>t.value===e.value)&&this.checkedItems.push(e):this.unCheck(e)})},unCheck(e){this.checkedItems=this.checkedItems.filter(t=>t.value!==e.value)}},created(){var e,t,l,s,n,a,o,d;this.showKeyboard=null!==(e=null===(t=this.config)||void 0===t?void 0:t.showKeyboard)&&void 0!==e&&e,this.keyboard=null!==(l=null===(s=this.config)||void 0===s?void 0:s.keyboard)&&void 0!==l?l:i,this.page=null!==(n=null===(a=this.config)||void 0===a?void 0:a.page)&&void 0!==n?n:1,this.limit=null!==(o=null===(d=this.config)||void 0===d?void 0:d.limit)&&void 0!==o?o:10}});e("default",F(t,[["render",function(e,t,i,l,s,n){const a=g("his-text-input"),o=g("ion-chip"),d=g("ion-text"),c=g("ion-label"),h=g("ion-checkbox"),r=g("ion-item"),u=g("ion-list"),f=g("ion-infinite-scroll-content"),k=g("ion-infinite-scroll"),p=g("ion-content"),y=g("view-port"),b=g("his-keyboard");return v(),m(w,null,[I(y,{showFull:!e.showKeyboard},{default:_(()=>[e.showKeyboard?(v(),C(a,{key:0,value:e.selected,onOnValue:e.onKBValue},null,8,["value","onOnValue"])):x("",!0),(v(!0),m(w,null,D(e.checkedItems,(t,i)=>(v(),C(o,{color:"danger",key:i,onClick:i=>e.unCheck(t)},{default:_(()=>[S(K(t.label),1)]),_:2},1032,["onClick"]))),128)),I(p,{style:{width:"100%"},class:"ion-padding-bottom"},{default:_(()=>[V("div",{class:j(["ion-content-scroll-host",{"ion-margin-bottom ion-padding-bottom":e.disableScroll}])},[I(u,{class:j(["view-port-content",{"ion-margin-bottom":e.disableScroll}])},{default:_(()=>[(v(!0),m(w,null,D(e.listData,(t,i)=>(v(),C(r,{key:i,color:t.isChecked?"lightblue":"",lines:t.isChecked?"none":""},{default:_(()=>[I(c,null,{default:_(()=>{var e;return[I(d,{class:"his-md-text"},{default:_(()=>[S(K(t.label),1)]),_:2},1024),t.description&&t.isChecked?(v(),C(d,{key:0,color:null===(e=t.description)||void 0===e?void 0:e.color},{default:_(()=>[V("p",null,[V("i",null,K(t.description.text),1)])]),_:2},1032,["color"])):x("",!0)]}),_:2},1024),I(h,{slot:"start",modelValue:t.isChecked,"onUpdate:modelValue":e=>t.isChecked=e,onIonChange:i=>e.onSelect(t),disabled:t.disabled},null,8,["modelValue","onUpdate:modelValue","onIonChange","disabled"])]),_:2},1032,["color","lines"]))),128))]),_:1},8,["class"]),I(k,{onIonInfinite:t[0]||(t[0]=t=>e.pushData(t)),threshold:"100px",disabled:e.disableScroll},{default:_(()=>[I(f,{"loading-spinner":"crescent","loading-text":"Loading more data..."})]),_:1},8,["disabled"])],2)]),_:1})]),_:1},8,["showFull"]),e.showKeyboard?(v(),C(b,{key:0,kbConfig:e.keyboard,onKeyPress:e.keypress},null,8,["kbConfig","onKeyPress"])):x("",!0)],64)}]]))}}});
