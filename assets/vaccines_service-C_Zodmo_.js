var Ln=Object.defineProperty;var Bn=(e,n,t)=>n in e?Ln(e,n,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[n]=t;var Z=(e,n,t)=>Bn(e,typeof n!="symbol"?n+"":n,t);import{H as y,aT as T,u as un,S as p,aK as E,G as sn,_ as on,P as Zn,t as U,l as _n,j as $,A as Un,$ as Yn,d as jn}from"./index-Dxep0tg5.js";import{l as Gn}from"./lodash-Dt8AsbQm.js";import{D as qn,d as q,a9 as f,N as Y,ad as Wn,a2 as Kn,a8 as z,R as j,H as k,e as G,f as N,l as c,k as w,J as _,Q as A,F as cn,r as V,a as Qn,O as ln,m as an,u as g,_ as dn,K as x,bl as Xn}from"./vendor-CwRShy1a.js";import{S as ne}from"./sms_service-2nY7J6R1.js";import{E as ee}from"./EIRreportsStore-DBHm-0sE.js";import{u as te,F as rn,e as le}from"./Export-CfpNFDac.js";const P=qn("immunizationAppointMentStore",{state:()=>({selectedAppointmentMent:[],selectedAppointmentMentForAppointmentsPage:"",AppointmentsReload:!1,startDate:y.sessionDate(),endDate:y.sessionDate()}),actions:{getAppointmentMents(){return this.selectedAppointmentMent},setAppointmentMent(e){this.selectedAppointmentMent.length=0,this.selectedAppointmentMent.push(e)},clearAppointmentMent(){this.selectedAppointmentMent.length=0},getSelectedAppointmentMentForAppointmentsPage(){return this.selectedAppointmentMentForAppointmentsPage},setSelectedAppointmentMentForAppointmentsPage(e){this.selectedAppointmentMentForAppointmentsPage=e},setAppointmentsReload(e){this.AppointmentsReload=e},getAppointmentsReload(){return this.AppointmentsReload},setStartEndDate(e,n){this.startDate=e,this.endDate=n},getStartEndDate(){return{startDate:this.startDate,endDate:this.endDate}}}});class F extends T{constructor(t){const l=t!==void 0?t:F.getPatientID(),r=F.getProviderID();super(l,7,r);Z(this,"patientID");Z(this,"providerID");this.patientID=l,this.providerID=r}static getPatientID(){return un().patient.patientID}static getProviderID(){return p.getUserID()}async setPatientID(t){this.patientID=t}async createAppointment(t){var m;let l=JSON.parse(JSON.stringify(t));const r=[];P().selectedAppointmentMent.forEach(v=>{const M=y.toStandardHisFormat(v.date);r.push(M)});const s=await this.buildValueDate("Appointment date",r[0]);return(m=l==null?void 0:l.appointments.unsaved)==null||m.push(s),await E(l),sn("next Appointment Set Successfully"),r[0]}async getNextAppointment(){if(this.programID&&this.patientID)return T.getJson("/programs/".concat(this.programID,"/patients/").concat(this.patientID,"/next_appointment_date"),{date:this.date})}async getDailyAppointments(t){const l=T.getProgramID();return T.getJson("/programs/".concat(l,"/booked_appointments"),{date:t,paginate:!1})}}const ie=q({components:{IonRow:z,IonItem:Kn,IonList:Wn,IonButton:Y,IonCol:f},props:{date:{type:String,required:!0},patient:{type:Number,required:!0},modalaction:{type:String,required:!0}},data(){return{formattedDate:y.toStandardHisFormat(this.date)}},methods:{async dismissModal(){await j.dismiss()},async sendSMS(){await j.dismiss("send-SMS")}}}),ae={class:"saveBtn"};function de(e,n,t,l,r,u){const s=k("ion-row"),m=k("ion-button"),v=k("ion-col");return N(),G(cn,null,[c(s,{class:"centered-content"},{default:_(()=>n[0]||(n[0]=[w("div",{class:"text-container"},[w("div",null,"Do you want to send SMS reminder?")],-1)])),_:1,__:[0]}),w("div",ae,[c(s,null,{default:_(()=>[c(v,null,{default:_(()=>[c(m,{onClick:e.dismissModal,id:"cbtn",class:"btnText cbtn",fill:"solid",style:{width:"130px"}},{default:_(()=>n[1]||(n[1]=[A(" No ")])),_:1,__:[1]},8,["onClick"])]),_:1}),c(v,null,{default:_(()=>[c(m,{onClick:e.sendSMS,class:"btnText",fill:"solid",style:{width:"130px","text-align":"right"}},{default:_(()=>n[2]||(n[2]=[A(" Yes ")])),_:1,__:[2]},8,["onClick"])]),_:1})]),_:1})])],64)}const re=on(ie,[["render",de],["__scopeId","data-v-2bafd924"]]),ue={class:"lbl-ct"},se={class:"lbl-ct"},oe={style:{"margin-right":"20px",color:"black"}},_e={key:0},ce={style:{color:"#999"}},me={style:{"font-size":"16px",color:"#666","margin-top":"5px"}},ge=q({watch:{},name:"xxxComponent"}),be=q({...ge,props:{patient_Id:{},encounter_Id:{}},setup(e){const n=un(),t=V(),l=V(),r=V(!1),u=V(!1),s=y.toStandardHisDisplayFormat(p.getSessionDate()),m=V(!1),v=V(),M=V(0),J=V([]),C=[];function gn(a){const i=new Date(p.getSessionDate());return i.setHours(0,0,0,0),a<i}const W=e;async function bn(){if(P().selectedAppointmentMent.length>0)try{await Mn();const d=await new F().createAppointment(n.patient);await hn(),await wn(),await Q(),pn(d)}catch(i){}else U("please select next appointment date on the calendar")}async function pn(a){if(J.value.length==0){U("No phone numbers available for sms reminder!");return}if(a&&await _n(re,{class:"nationalIDModal"})=="send-SMS"){const d=JSON.parse(JSON.stringify(n.patient));d.sms={appointment_date:a},await E(d)}}async function hn(){const a=$();a.setVaccineReload(!a.getVaccineReload())}async function wn(){const a=P();a.setAppointmentsReload(!a.getAppointmentsReload())}Qn(async()=>{P().clearAppointmentMent(),await Vn(),await yn()});async function yn(){try{const a=new Zn,i=W.patient_Id!==void 0?W.patient_Id:a.getID(),d=await Dn(i);if(C.length>0){const o=C[C.length-1];await vn(o,i)==!1&&(t.value=tn(o.vaccine.date_administered,en(d.age)),l.value=y.toStandardHisDisplayFormat(t.value),X(t.value),nn(t.value),r.value=!0)}}catch(a){}}async function vn(a,i){try{const d=new Date(n.patient.personInformation.birthdate),o=tn(d,en(a.age)),h=fn(a.vaccine.date_administered),b=new Date(o);return console.log(K(h,b)),K(h,b)}catch(d){}}function fn(a){const i={Jan:"01",Feb:"02",Mar:"03",Apr:"04",May:"05",Jun:"06",Jul:"07",Aug:"08",Sep:"09",Oct:"10",Nov:"11",Dec:"12"},d=a.split(/[:/ ]/),o="".concat(d[2],"-").concat(i[d[1]],"-").concat(d[0],"T").concat(d[3],":").concat(d[4],":").concat(d[5]);return new Date(o)}function K(a,i){const d=a.getFullYear(),o=a.getMonth(),h=a.getDate(),b=i.getFullYear(),D=i.getMonth(),I=i.getDate();return d!==b?d>b:o!==D?o>D:h>I}function An(a){return a.forEach(i=>{i.antigens.forEach(d=>{d.status=="administered"&&C.push({age:i.age,vaccine:d})})}),C}async function Dn(a){try{const i=n.patient.vaccineSchedule;An(i.vaccine_schedule);for(const d of i.vaccine_schedule)if(d.milestone_status==="current"||d.milestone_status==="upcoming")return d;return null}catch(i){return null}}async function Sn(a){try{const i=await Un.getDailyAppointments(y.toStandardHisFormat(a),y.toStandardHisFormat(a));M.value=i.length}catch(i){}}async function Q(){try{await j.dismiss()}catch(a){console.error("Modal dismissal error:",a)}}async function Vn(){try{let a=await ne.getConfigurations();u.value=a.show_sms_popup}catch(a){}}async function Mn(){var d,o;const a=JSON.parse(JSON.stringify(n.patient.guardianInformation)),i=[...a==null?void 0:a.unsaved,...a==null?void 0:a.saved];i.length>0&&((d=i[0])!=null&&d.cell_phone_number)&&J.value.push((o=i[0])==null?void 0:o.cell_phone_number),n.patient.personInformation.cell_phone_number&&J.value.push(n.patient.personInformation.cell_phone_number)}async function X(a){const i=P(),d={counter:1,date:a};i.setAppointmentMent(d),m.value=!1,await Sn(a),m.value=!0,v.value=y.toStandardHisDisplayFormat(a)}function nn(a){const d=P().getAppointmentMents(),o=D=>{const I=new Date(D);return I.setHours(0,0,0,0),I.getTime()},h=o(new Date(a)),b=d.find(D=>o(new Date(D.date))===h);return b?b.counter:null}function en(a){const i=/(\d+)\s*(week|month|year)s?/i,d=a.match(i);if(!d)return"Invalid input format";const o=parseInt(d[1]);switch(d[2].toLowerCase()){case"week":return o*7;case"month":return o*30;case"year":return o*365;default:return"Invalid time unit"}}function tn(a,i){if(i=="Invalid input format")return"";let d;if(a instanceof Date)d=new Date(a);else{const[S,B]=a.split(" "),[kn,On,Fn]=S.split("/"),[En,Jn,Rn]=B.split(":"),Hn={Jan:0,Feb:1,Mar:2,Apr:3,May:4,Jun:5,Jul:6,Aug:7,Sep:8,Oct:9,Nov:10,Dec:11};d=new Date(Number(Fn),Hn[On],Number(kn),Number(En),Number(Jn),Number(Rn))}d.setDate(d.getDate()+i);const o=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],h=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],b=S=>String(S).padStart(2,"0"),D=o[d.getDay()],I=h[d.getMonth()],In=b(d.getDate()),xn=d.getFullYear(),zn=b(d.getHours()),Pn=b(d.getMinutes()),Cn=b(d.getSeconds()),R=-d.getTimezoneOffset(),Nn=Math.floor(Math.abs(R)/60),$n=Math.abs(R)%60,Tn="GMT".concat(R>=0?"+":"-").concat(b(Nn)).concat(b($n)),H=Intl.DateTimeFormat().resolvedOptions().timeZone;let L;try{const S=new Intl.DateTimeFormat("en",{timeZone:H,timeZoneName:"long"}).formatToParts(d).find(B=>B.type==="timeZoneName");L=S?S.value:H}catch(S){console.error("Error getting localized time zone name:",S),L=H}return"Date ".concat(D," ").concat(I," ").concat(In," ").concat(xn," ").concat(zn,":").concat(Pn,":").concat(Cn," ").concat(Tn," (").concat(L,")")}return(a,i)=>{const d=k("VueDatePicker");return N(),G(cn,null,[c(g(z),{style:{"margin-top":"10px"}},{default:_(()=>[c(g(f),{style:{"margin-left":"-3px"}},{default:_(()=>i[1]||(i[1]=[w("div",{class:"om",style:{"font-weight":"600",color:"#8d8686"}},"Set Next Appointment Date",-1)])),_:1,__:[1]}),c(g(f),{size:"6",style:{"text-align":"right"}},{default:_(()=>[c(g(dn),{class:"lbl-tl",style:{"font-size":"13"}},{default:_(()=>[i[2]||(i[2]=A(" Todays Date: ")),w("span",ue,x(g(s)),1)]),_:1,__:[2]})]),_:1})]),_:1}),c(g(z),{style:{"margin-top":"10px"}},{default:_(()=>[c(g(f),{style:{"margin-left":"-3px"}},{default:_(()=>i[3]||(i[3]=[w("div",{class:"om"},null,-1)])),_:1,__:[3]}),m.value?(N(),ln(g(f),{key:0,size:"10",style:{"text-align":"right"}},{default:_(()=>[c(g(dn),{class:"lbl-tl",style:{"font-size":"16","font-weight":"500"}},{default:_(()=>[i[4]||(i[4]=A(" Total Appointments ")),w("span",se,"("+x(v.value)+")",1),i[5]||(i[5]=A(": ")),w("span",oe,[c(g(Xn),{color:"primary",style:{"margin-bottom":"-5px","font-size":"15px"}},{default:_(()=>[A(x(M.value),1)]),_:1})])]),_:1,__:[4,5]})]),_:1})):an("",!0)]),_:1}),c(g(z),{style:{"margin-top":"20px"}},{default:_(()=>[c(g(f),null,{default:_(()=>[c(d,{modelValue:t.value,"onUpdate:modelValue":i[0]||(i[0]=o=>t.value=o),onDateUpdate:X,"enable-time-picker":!1,inline:"","auto-apply":"","disabled-dates":gn},{day:_(({day:o,date:h})=>[(N(),G("p",_e,[A(x(o),1),w("sup",ce,x(nn(h)),1)]))]),_:1},8,["modelValue"])]),_:1})]),_:1}),r.value?(N(),ln(g(z),{key:0,style:{"margin-top":"0px","margin-bottom":"0px"}},{default:_(()=>[c(g(f),{style:{"background-color":"#f0f0f0",padding:"15px","border-radius":"8px","box-shadow":"0 2px 4px rgba(0, 0, 0, 0.1)"}},{default:_(()=>[i[6]||(i[6]=w("div",{style:{"font-size":"17px",color:"#333","font-weight":"bold"}},"Suggested Date:",-1)),w("div",me,x(l.value),1)]),_:1,__:[6]})]),_:1})):an("",!0),c(g(z),{style:{"margin-top":"10px","margin-bottom":"10px"}},{default:_(()=>[c(g(f),null,{default:_(()=>[c(g(Y),{onClick:Q,id:"cbtn",class:"btnText cbtn",fill:"solid",style:{width:"130px"}},{default:_(()=>i[7]||(i[7]=[A(" Cancel ")])),_:1,__:[7]})]),_:1}),c(g(f),{style:{"text-align":"right"}},{default:_(()=>[c(g(Y),{onClick:bn,class:"btnText",fill:"solid",style:{width:"130px"}},{default:_(()=>i[8]||(i[8]=[A(" save ")])),_:1,__:[8]})]),_:1})]),_:1})],64)}}}),pe=on(be,[["__scopeId","data-v-9f50d274"]]),he={female_schedule:[{visit:1,milestone_status:null,age:"At birth",antigens:[{drug_id:1283,drug_name:"BCG",window_period:"24 months",can_administer:null,status:null,date_administered:null,administered_by:null,location_administered:null,vaccine_batch_number:null,encounter_id:null,order_id:null},{drug_id:1284,drug_name:"OPV 0",window_period:"14 weeks",can_administer:null,status:null,date_administered:null,administered_by:null,location_administered:null,vaccine_batch_number:null,encounter_id:null,order_id:null}]},{visit:2,milestone_status:null,age:"6 weeks",antigens:[{drug_id:1284,drug_name:"OPV 1",window_period:"24 months",can_administer:null,status:null,date_administered:null,administered_by:null,location_administered:null,vaccine_batch_number:null,encounter_id:null,order_id:null},{drug_id:1288,drug_name:"Penta 1",window_period:"24 months",can_administer:null,status:null,date_administered:null,administered_by:null,location_administered:null,vaccine_batch_number:null,encounter_id:null,order_id:null},{drug_id:1520,drug_name:"Rota 1",window_period:"24 months",can_administer:null,status:null,date_administered:null,administered_by:null,location_administered:null,vaccine_batch_number:null,encounter_id:null,order_id:null},{drug_id:1291,drug_name:"PCV 1",window_period:"24 months",can_administer:null,status:null,date_administered:null,administered_by:null,location_administered:null,vaccine_batch_number:null,encounter_id:null,order_id:null}]},{visit:3,milestone_status:null,age:"10 weeks ",antigens:[{drug_id:1284,drug_name:"OPV 2",window_period:"24 months",can_administer:null,status:null,date_administered:null,administered_by:null,location_administered:null,vaccine_batch_number:null,encounter_id:null,order_id:null},{drug_id:1288,drug_name:"Penta 2",window_period:"24 months",can_administer:null,status:null,date_administered:null,administered_by:null,location_administered:null,vaccine_batch_number:null,encounter_id:null,order_id:null},{drug_id:1520,drug_name:"Rota 2",window_period:"24 months",can_administer:null,status:null,date_administered:null,administered_by:null,location_administered:null,vaccine_batch_number:null,encounter_id:null,order_id:null},{drug_id:1291,drug_name:"PCV 2",window_period:"24 months",can_administer:null,status:null,date_administered:null,administered_by:null,location_administered:null,vaccine_batch_number:null,encounter_id:null,order_id:null}]},{visit:4,milestone_status:null,age:"14 weeks",antigens:[{drug_id:1284,drug_name:"OPV 3",window_period:"24 months",can_administer:null,status:null,date_administered:null,administered_by:null,location_administered:null,vaccine_batch_number:null,encounter_id:null,order_id:null},{drug_id:1288,drug_name:"Penta 3",window_period:"24 months",can_administer:null,status:null,date_administered:null,administered_by:null,location_administered:null,vaccine_batch_number:null,encounter_id:null,order_id:null},{drug_id:1291,drug_name:"PCV 3",window_period:"24 months",can_administer:null,status:null,date_administered:null,administered_by:null,location_administered:null,vaccine_batch_number:null,encounter_id:null,order_id:null},{drug_id:1301,drug_name:"IPV",window_period:"24 months",can_administer:null,status:null,date_administered:null,administered_by:null,location_administered:null,vaccine_batch_number:null,encounter_id:null,order_id:null}]},{visit:5,milestone_status:null,age:"5 months",antigens:[{drug_id:1296,drug_name:"MV 1",window_period:"36 Month",can_administer:null,status:null,date_administered:null,administered_by:null,location_administered:null,vaccine_batch_number:null,encounter_id:null,order_id:null}]},{visit:6,milestone_status:null,age:"6 months",antigens:[{drug_id:1296,drug_name:"MV 2",window_period:"36 Month",can_administer:null,status:null,date_administered:null,administered_by:null,location_administered:null,vaccine_batch_number:null,encounter_id:null,order_id:null},{drug_id:1300,drug_name:"Vit A 1",window_period:"24 months",can_administer:null,status:null,date_administered:null,administered_by:null,location_administered:null,vaccine_batch_number:null,encounter_id:null,order_id:null}]},{visit:7,milestone_status:null,age:"7 months",antigens:[{drug_id:1296,drug_name:"MV 3",window_period:"36 Month",can_administer:null,status:null,date_administered:null,administered_by:null,location_administered:null,vaccine_batch_number:null,encounter_id:null,order_id:null}]},{visit:8,milestone_status:null,age:"9 months",antigens:[{drug_id:1302,drug_name:"MR 1",window_period:"24 months",can_administer:null,status:null,date_administered:null,administered_by:null,location_administered:null,vaccine_batch_number:null,encounter_id:null,order_id:null},{drug_id:1304,drug_name:"TCV",window_period:"24 months",can_administer:null,status:null,date_administered:null,administered_by:null,location_administered:null,vaccine_batch_number:null,encounter_id:null,order_id:null}]},{visit:9,milestone_status:null,age:"1 year",antigens:[{drug_id:1300,drug_name:"Vit A 2",window_period:"24 months",can_administer:null,status:null,date_administered:null,administered_by:null,location_administered:null,vaccine_batch_number:null,encounter_id:null,order_id:null},{drug_id:106,drug_name:"Albendazole (200mg tablet) 1",window_period:"5 years",can_administer:null,status:null,date_administered:null,administered_by:null,location_administered:null,vaccine_batch_number:null,encounter_id:null,order_id:null},{drug_id:107,drug_name:"Albendazole (400mg tablet) 1",window_period:"5 years",can_administer:null,status:null,date_administered:null,administered_by:null,location_administered:null,vaccine_batch_number:null,encounter_id:null,order_id:null}]},{visit:10,milestone_status:null,age:"15 months",antigens:[{drug_id:1302,drug_name:"MR 2",window_period:"24 months",can_administer:null,status:null,date_administered:null,administered_by:null,location_administered:null,vaccine_batch_number:null,encounter_id:null,order_id:null}]},{visit:11,milestone_status:null,age:"18 months",antigens:[{drug_id:1300,drug_name:"Vit A 3",window_period:"24 months",can_administer:null,status:null,date_administered:null,administered_by:null,location_administered:null,vaccine_batch_number:null,encounter_id:null,order_id:null},{drug_id:106,drug_name:"Albendazole (200mg tablet) 2",window_period:"5 years",can_administer:null,status:null,date_administered:null,administered_by:null,location_administered:null,vaccine_batch_number:null,encounter_id:null,order_id:null},{drug_id:107,drug_name:"Albendazole (400mg tablet) 2",window_period:"5 years",can_administer:null,status:null,date_administered:null,administered_by:null,location_administered:null,vaccine_batch_number:null,encounter_id:null,order_id:null}]},{visit:12,milestone_status:null,age:"22 months",antigens:[{drug_id:1296,drug_name:"MV 4",window_period:"36 Month",can_administer:null,status:null,date_administered:null,administered_by:null,location_administered:null,vaccine_batch_number:null,encounter_id:null,order_id:null}]},{visit:13,milestone_status:null,age:"2 years",antigens:[{drug_id:1300,drug_name:"Vit A 4",window_period:"24 months",can_administer:null,status:null,date_administered:null,administered_by:null,location_administered:null,vaccine_batch_number:null,encounter_id:null,order_id:null},{drug_id:106,drug_name:"Albendazole (200mg tablet) 3",window_period:"5 years",can_administer:null,status:null,date_administered:null,administered_by:null,location_administered:null,vaccine_batch_number:null,encounter_id:null,order_id:null},{drug_id:107,drug_name:"Albendazole (400mg tablet) 3",window_period:"5 years",can_administer:null,status:null,date_administered:null,administered_by:null,location_administered:null,vaccine_batch_number:null,encounter_id:null,order_id:null}]},{visit:14,milestone_status:null,age:"30 months",antigens:[{drug_id:1300,drug_name:"Vit A 5",window_period:"24 months",can_administer:null,status:null,date_administered:null,administered_by:null,location_administered:null,vaccine_batch_number:null,encounter_id:null,order_id:null},{drug_id:106,drug_name:"Albendazole (200mg tablet) 4",window_period:"5 years",can_administer:null,status:null,date_administered:null,administered_by:null,location_administered:null,vaccine_batch_number:null,encounter_id:null,order_id:null},{drug_id:107,drug_name:"Albendazole (400mg tablet) 4",window_period:"5 years",can_administer:null,status:null,date_administered:null,administered_by:null,location_administered:null,vaccine_batch_number:null,encounter_id:null,order_id:null}]},{visit:15,milestone_status:null,age:"3 years",antigens:[{drug_id:1300,drug_name:"Vit A 6",window_period:"24 months",can_administer:null,status:null,date_administered:null,administered_by:null,location_administered:null,vaccine_batch_number:null,encounter_id:null,order_id:null},{drug_id:106,drug_name:"Albendazole (200mg tablet) 5",window_period:"5 years",can_administer:null,status:null,date_administered:null,administered_by:null,location_administered:null,vaccine_batch_number:null,encounter_id:null,order_id:null},{drug_id:107,drug_name:"Albendazole (400mg tablet) 5",window_period:"5 years",can_administer:null,status:null,date_administered:null,administered_by:null,location_administered:null,vaccine_batch_number:null,encounter_id:null,order_id:null}]},{visit:16,milestone_status:null,age:"42 months",antigens:[{drug_id:1300,drug_name:"Vit A 7",window_period:"24 months",can_administer:null,status:null,date_administered:null,administered_by:null,location_administered:null,vaccine_batch_number:null,encounter_id:null,order_id:null},{drug_id:106,drug_name:"Albendazole (200mg tablet) 6",window_period:"5 years",can_administer:null,status:null,date_administered:null,administered_by:null,location_administered:null,vaccine_batch_number:null,encounter_id:null,order_id:null},{drug_id:107,drug_name:"Albendazole (400mg tablet) 6",window_period:"5 years",can_administer:null,status:null,date_administered:null,administered_by:null,location_administered:null,vaccine_batch_number:null,encounter_id:null,order_id:null}]},{visit:17,milestone_status:null,age:"4 years",antigens:[{drug_id:1300,drug_name:"Vit A 8",window_period:"24 months",can_administer:null,status:null,date_administered:null,administered_by:null,location_administered:null,vaccine_batch_number:null,encounter_id:null,order_id:null},{drug_id:106,drug_name:"Albendazole (200mg tablet) 7",window_period:"5 years",can_administer:null,status:null,date_administered:null,administered_by:null,location_administered:null,vaccine_batch_number:null,encounter_id:null,order_id:null},{drug_id:107,drug_name:"Albendazole (400mg tablet) 7",window_period:"5 years",can_administer:null,status:null,date_administered:null,administered_by:null,location_administered:null,vaccine_batch_number:null,encounter_id:null,order_id:null}]},{visit:18,milestone_status:null,age:"54 months",antigens:[{drug_id:1300,drug_name:"Vit A 9",window_period:"24 months",can_administer:null,status:null,date_administered:null,administered_by:null,location_administered:null,vaccine_batch_number:null,encounter_id:null,order_id:null},{drug_id:106,drug_name:"Albendazole (200mg tablet) 8",window_period:"5 years",can_administer:null,status:null,date_administered:null,administered_by:null,location_administered:null,vaccine_batch_number:null,encounter_id:null,order_id:null},{drug_id:107,drug_name:"Albendazole (400mg tablet) 8",window_period:"5 years",can_administer:null,status:null,date_administered:null,administered_by:null,location_administered:null,vaccine_batch_number:null,encounter_id:null,order_id:null}]},{visit:19,milestone_status:null,age:"5 years",antigens:[{drug_id:1300,drug_name:"Vit A 10",window_period:"24 months",can_administer:null,status:null,date_administered:null,administered_by:null,location_administered:null,vaccine_batch_number:null,encounter_id:null,order_id:null},{drug_id:106,drug_name:"Albendazole (200mg tablet) 9",window_period:"5 years",can_administer:null,status:null,date_administered:null,administered_by:null,location_administered:null,vaccine_batch_number:null,encounter_id:null,order_id:null},{drug_id:107,drug_name:"Albendazole (400mg tablet) 9",window_period:"5 years",can_administer:null,status:null,date_administered:null,administered_by:null,location_administered:null,vaccine_batch_number:null,encounter_id:null,order_id:null}]},{visit:20,milestone_status:null,age:"9 years",antigens:[{drug_id:1305,drug_name:"HPV 1",window_period:"14 Years",can_administer:null,status:null,date_administered:null,administered_by:null,location_administered:null,vaccine_batch_number:null,encounter_id:null,order_id:null}]},{visit:21,milestone_status:null,age:"12 years above",antigens:[{drug_id:1307,drug_name:"Pfizer COVID-19",window_period:null,can_administer:null,status:null,date_administered:null,administered_by:null,location_administered:null,vaccine_batch_number:null,encounter_id:null,order_id:null}]},{visit:22,milestone_status:null,age:"114 months",antigens:[{drug_id:1305,drug_name:"HPV 2",window_period:"14 Years",can_administer:null,status:null,date_administered:null,administered_by:null,location_administered:null,vaccine_batch_number:null,encounter_id:null,order_id:null}]},{visit:23,milestone_status:null,age:"15 years",antigens:[{drug_id:609,drug_name:"TD (0.5ml) 1",window_period:null,can_administer:null,status:null,date_administered:null,administered_by:null,location_administered:null,vaccine_batch_number:null,encounter_id:null,order_id:null},{drug_id:1310,drug_name:"TD 1",window_period:null,can_administer:null,status:null,date_administered:null,administered_by:null,location_administered:null,vaccine_batch_number:null,encounter_id:null,order_id:null}]},{visit:24,milestone_status:null,age:"180.9 months",antigens:[{drug_id:609,drug_name:"TD (0.5ml) 2",window_period:null,can_administer:null,status:null,date_administered:null,administered_by:null,location_administered:null,vaccine_batch_number:null,encounter_id:null,order_id:null},{drug_id:1310,drug_name:"TD 2",window_period:null,can_administer:null,status:null,date_administered:null,administered_by:null,location_administered:null,vaccine_batch_number:null,encounter_id:null,order_id:null}]},{visit:25,milestone_status:null,age:"186 months",antigens:[{drug_id:609,drug_name:"TD (0.5ml) 3",window_period:null,can_administer:null,status:null,date_administered:null,administered_by:null,location_administered:null,vaccine_batch_number:null,encounter_id:null,order_id:null},{drug_id:1310,drug_name:"TD 3",window_period:null,can_administer:null,status:null,date_administered:null,administered_by:null,location_administered:null,vaccine_batch_number:null,encounter_id:null,order_id:null}]},{visit:26,milestone_status:null,age:"18 years above",antigens:[{drug_id:1308,drug_name:"AstraZeneca Covid 19",window_period:null,can_administer:null,status:null,date_administered:null,administered_by:null,location_administered:null,vaccine_batch_number:null,encounter_id:null,order_id:null},{drug_id:1309,drug_name:"Johnson & Johnson Covid 19",window_period:null,can_administer:null,status:null,date_administered:null,administered_by:null,location_administered:null,vaccine_batch_number:null,encounter_id:null,order_id:null}]},{visit:27,milestone_status:null,age:"20 years",antigens:[{drug_id:609,drug_name:"TD (0.5ml) 4",window_period:null,can_administer:null,status:null,date_administered:null,administered_by:null,location_administered:null,vaccine_batch_number:null,encounter_id:null,order_id:null},{drug_id:1310,drug_name:"TD 4",window_period:null,can_administer:null,status:null,date_administered:null,administered_by:null,location_administered:null,vaccine_batch_number:null,encounter_id:null,order_id:null}]}],male_schedule:[{visit:1,milestone_status:null,age:"At birth",antigens:[{drug_id:1283,drug_name:"BCG",window_period:"24 months",can_administer:null,status:null,date_administered:null,administered_by:null,location_administered:null,vaccine_batch_number:null,encounter_id:null,order_id:null},{drug_id:1284,drug_name:"OPV 0",window_period:"14 weeks",can_administer:null,status:null,date_administered:null,administered_by:null,location_administered:null,vaccine_batch_number:null,encounter_id:null,order_id:null}]},{visit:2,milestone_status:null,age:"6 weeks",antigens:[{drug_id:1284,drug_name:"OPV 1",window_period:"24 months",can_administer:null,status:null,date_administered:null,administered_by:null,location_administered:null,vaccine_batch_number:null,encounter_id:null,order_id:null},{drug_id:1288,drug_name:"Penta 1",window_period:"24 months",can_administer:null,status:null,date_administered:null,administered_by:null,location_administered:null,vaccine_batch_number:null,encounter_id:null,order_id:null},{drug_id:1520,drug_name:"Rota 1",window_period:"24 months",can_administer:null,status:null,date_administered:null,administered_by:null,location_administered:null,vaccine_batch_number:null,encounter_id:null,order_id:null},{drug_id:1291,drug_name:"PCV 1",window_period:"24 months",can_administer:null,status:null,date_administered:null,administered_by:null,location_administered:null,vaccine_batch_number:null,encounter_id:null,order_id:null}]},{visit:3,milestone_status:null,age:"10 weeks ",antigens:[{drug_id:1284,drug_name:"OPV 2",window_period:"24 months",can_administer:null,status:null,date_administered:null,administered_by:null,location_administered:null,vaccine_batch_number:null,encounter_id:null,order_id:null},{drug_id:1288,drug_name:"Penta 2",window_period:"24 months",can_administer:null,status:null,date_administered:null,administered_by:null,location_administered:null,vaccine_batch_number:null,encounter_id:null,order_id:null},{drug_id:1520,drug_name:"Rota 2",window_period:"24 months",can_administer:null,status:null,date_administered:null,administered_by:null,location_administered:null,vaccine_batch_number:null,encounter_id:null,order_id:null},{drug_id:1291,drug_name:"PCV 2",window_period:"24 months",can_administer:null,status:null,date_administered:null,administered_by:null,location_administered:null,vaccine_batch_number:null,encounter_id:null,order_id:null}]},{visit:4,milestone_status:null,age:"14 weeks",antigens:[{drug_id:1284,drug_name:"OPV 3",window_period:"24 months",can_administer:null,status:null,date_administered:null,administered_by:null,location_administered:null,vaccine_batch_number:null,encounter_id:null,order_id:null},{drug_id:1288,drug_name:"Penta 3",window_period:"24 months",can_administer:null,status:null,date_administered:null,administered_by:null,location_administered:null,vaccine_batch_number:null,encounter_id:null,order_id:null},{drug_id:1291,drug_name:"PCV 3",window_period:"24 months",can_administer:null,status:null,date_administered:null,administered_by:null,location_administered:null,vaccine_batch_number:null,encounter_id:null,order_id:null},{drug_id:1301,drug_name:"IPV",window_period:"24 months",can_administer:null,status:null,date_administered:null,administered_by:null,location_administered:null,vaccine_batch_number:null,encounter_id:null,order_id:null}]},{visit:5,milestone_status:null,age:"5 months",antigens:[{drug_id:1296,drug_name:"MV 1",window_period:"36 Month",can_administer:null,status:null,date_administered:null,administered_by:null,location_administered:null,vaccine_batch_number:null,encounter_id:null,order_id:null}]},{visit:6,milestone_status:null,age:"6 months",antigens:[{drug_id:1296,drug_name:"MV 2",window_period:"36 Month",can_administer:null,status:null,date_administered:null,administered_by:null,location_administered:null,vaccine_batch_number:null,encounter_id:null,order_id:null},{drug_id:1300,drug_name:"Vit A 1",window_period:"24 months",can_administer:null,status:null,date_administered:null,administered_by:null,location_administered:null,vaccine_batch_number:null,encounter_id:null,order_id:null}]},{visit:7,milestone_status:null,age:"7 months",antigens:[{drug_id:1296,drug_name:"MV 3",window_period:"36 Month",can_administer:null,status:null,date_administered:null,administered_by:null,location_administered:null,vaccine_batch_number:null,encounter_id:null,order_id:null}]},{visit:8,milestone_status:null,age:"9 months",antigens:[{drug_id:1302,drug_name:"MR 1",window_period:"24 months",can_administer:null,status:null,date_administered:null,administered_by:null,location_administered:null,vaccine_batch_number:null,encounter_id:null,order_id:null},{drug_id:1304,drug_name:"TCV",window_period:"24 months",can_administer:null,status:null,date_administered:null,administered_by:null,location_administered:null,vaccine_batch_number:null,encounter_id:null,order_id:null}]},{visit:9,milestone_status:null,age:"1 year",antigens:[{drug_id:1300,drug_name:"Vit A 2",window_period:"24 months",can_administer:null,status:null,date_administered:null,administered_by:null,location_administered:null,vaccine_batch_number:null,encounter_id:null,order_id:null},{drug_id:106,drug_name:"Albendazole (200mg tablet) 1",window_period:"5 years",can_administer:null,status:null,date_administered:null,administered_by:null,location_administered:null,vaccine_batch_number:null,encounter_id:null,order_id:null},{drug_id:107,drug_name:"Albendazole (400mg tablet) 1",window_period:"5 years",can_administer:null,status:null,date_administered:null,administered_by:null,location_administered:null,vaccine_batch_number:null,encounter_id:null,order_id:null}]},{visit:10,milestone_status:null,age:"15 months",antigens:[{drug_id:1302,drug_name:"MR 2",window_period:"24 months",can_administer:null,status:null,date_administered:null,administered_by:null,location_administered:null,vaccine_batch_number:null,encounter_id:null,order_id:null}]},{visit:11,milestone_status:null,age:"18 months",antigens:[{drug_id:1300,drug_name:"Vit A 3",window_period:"24 months",can_administer:null,status:null,date_administered:null,administered_by:null,location_administered:null,vaccine_batch_number:null,encounter_id:null,order_id:null},{drug_id:106,drug_name:"Albendazole (200mg tablet) 2",window_period:"5 years",can_administer:null,status:null,date_administered:null,administered_by:null,location_administered:null,vaccine_batch_number:null,encounter_id:null,order_id:null},{drug_id:107,drug_name:"Albendazole (400mg tablet) 2",window_period:"5 years",can_administer:null,status:null,date_administered:null,administered_by:null,location_administered:null,vaccine_batch_number:null,encounter_id:null,order_id:null}]},{visit:12,milestone_status:null,age:"22 months",antigens:[{drug_id:1296,drug_name:"MV 4",window_period:"36 Month",can_administer:null,status:null,date_administered:null,administered_by:null,location_administered:null,vaccine_batch_number:null,encounter_id:null,order_id:null}]},{visit:13,milestone_status:null,age:"2 years",antigens:[{drug_id:1300,drug_name:"Vit A 4",window_period:"24 months",can_administer:null,status:null,date_administered:null,administered_by:null,location_administered:null,vaccine_batch_number:null,encounter_id:null,order_id:null},{drug_id:106,drug_name:"Albendazole (200mg tablet) 3",window_period:"5 years",can_administer:null,status:null,date_administered:null,administered_by:null,location_administered:null,vaccine_batch_number:null,encounter_id:null,order_id:null},{drug_id:107,drug_name:"Albendazole (400mg tablet) 3",window_period:"5 years",can_administer:null,status:null,date_administered:null,administered_by:null,location_administered:null,vaccine_batch_number:null,encounter_id:null,order_id:null}]},{visit:14,milestone_status:null,age:"30 months",antigens:[{drug_id:1300,drug_name:"Vit A 5",window_period:"24 months",can_administer:null,status:null,date_administered:null,administered_by:null,location_administered:null,vaccine_batch_number:null,encounter_id:null,order_id:null},{drug_id:106,drug_name:"Albendazole (200mg tablet) 4",window_period:"5 years",can_administer:null,status:null,date_administered:null,administered_by:null,location_administered:null,vaccine_batch_number:null,encounter_id:null,order_id:null},{drug_id:107,drug_name:"Albendazole (400mg tablet) 4",window_period:"5 years",can_administer:null,status:null,date_administered:null,administered_by:null,location_administered:null,vaccine_batch_number:null,encounter_id:null,order_id:null}]},{visit:15,milestone_status:null,age:"3 years",antigens:[{drug_id:1300,drug_name:"Vit A 6",window_period:"24 months",can_administer:null,status:null,date_administered:null,administered_by:null,location_administered:null,vaccine_batch_number:null,encounter_id:null,order_id:null},{drug_id:106,drug_name:"Albendazole (200mg tablet) 5",window_period:"5 years",can_administer:null,status:null,date_administered:null,administered_by:null,location_administered:null,vaccine_batch_number:null,encounter_id:null,order_id:null},{drug_id:107,drug_name:"Albendazole (400mg tablet) 5",window_period:"5 years",can_administer:null,status:null,date_administered:null,administered_by:null,location_administered:null,vaccine_batch_number:null,encounter_id:null,order_id:null}]},{visit:16,milestone_status:null,age:"42 months",antigens:[{drug_id:1300,drug_name:"Vit A 7",window_period:"24 months",can_administer:null,status:null,date_administered:null,administered_by:null,location_administered:null,vaccine_batch_number:null,encounter_id:null,order_id:null},{drug_id:106,drug_name:"Albendazole (200mg tablet) 6",window_period:"5 years",can_administer:null,status:null,date_administered:null,administered_by:null,location_administered:null,vaccine_batch_number:null,encounter_id:null,order_id:null},{drug_id:107,drug_name:"Albendazole (400mg tablet) 6",window_period:"5 years",can_administer:null,status:null,date_administered:null,administered_by:null,location_administered:null,vaccine_batch_number:null,encounter_id:null,order_id:null}]},{visit:17,milestone_status:null,age:"4 years",antigens:[{drug_id:1300,drug_name:"Vit A 8",window_period:"24 months",can_administer:null,status:null,date_administered:null,administered_by:null,location_administered:null,vaccine_batch_number:null,encounter_id:null,order_id:null},{drug_id:106,drug_name:"Albendazole (200mg tablet) 7",window_period:"5 years",can_administer:null,status:null,date_administered:null,administered_by:null,location_administered:null,vaccine_batch_number:null,encounter_id:null,order_id:null},{drug_id:107,drug_name:"Albendazole (400mg tablet) 7",window_period:"5 years",can_administer:null,status:null,date_administered:null,administered_by:null,location_administered:null,vaccine_batch_number:null,encounter_id:null,order_id:null}]},{visit:18,milestone_status:null,age:"54 months",antigens:[{drug_id:1300,drug_name:"Vit A 9",window_period:"24 months",can_administer:null,status:null,date_administered:null,administered_by:null,location_administered:null,vaccine_batch_number:null,encounter_id:null,order_id:null},{drug_id:106,drug_name:"Albendazole (200mg tablet) 8",window_period:"5 years",can_administer:null,status:null,date_administered:null,administered_by:null,location_administered:null,vaccine_batch_number:null,encounter_id:null,order_id:null},{drug_id:107,drug_name:"Albendazole (400mg tablet) 8",window_period:"5 years",can_administer:null,status:null,date_administered:null,administered_by:null,location_administered:null,vaccine_batch_number:null,encounter_id:null,order_id:null}]},{visit:19,milestone_status:null,age:"5 years",antigens:[{drug_id:1300,drug_name:"Vit A 10",window_period:"24 months",can_administer:null,status:null,date_administered:null,administered_by:null,location_administered:null,vaccine_batch_number:null,encounter_id:null,order_id:null},{drug_id:106,drug_name:"Albendazole (200mg tablet) 9",window_period:"5 years",can_administer:null,status:null,date_administered:null,administered_by:null,location_administered:null,vaccine_batch_number:null,encounter_id:null,order_id:null},{drug_id:107,drug_name:"Albendazole (400mg tablet) 9",window_period:"5 years",can_administer:null,status:null,date_administered:null,administered_by:null,location_administered:null,vaccine_batch_number:null,encounter_id:null,order_id:null}]},{visit:20,milestone_status:null,age:"12 years above",antigens:[{drug_id:1307,drug_name:"Pfizer COVID-19",window_period:null,can_administer:null,status:null,date_administered:null,administered_by:null,location_administered:null,vaccine_batch_number:null,encounter_id:null,order_id:null}]},{visit:21,milestone_status:null,age:"18 years above",antigens:[{drug_id:1308,drug_name:"AstraZeneca Covid 19",window_period:null,can_administer:null,status:null,date_administered:null,administered_by:null,location_administered:null,vaccine_batch_number:null,encounter_id:null,order_id:null},{drug_id:1309,drug_name:"Johnson & Johnson Covid 19",window_period:null,can_administer:null,status:null,date_administered:null,administered_by:null,location_administered:null,vaccine_batch_number:null,encounter_id:null,order_id:null}]}]};async function Oe(e){var l,r;const n=JSON.parse(JSON.stringify(e)),t=$();if(!Gn.isEmpty(t.getAdministeredVaccines())){const u=ve(),s=await fe();let m=n==null?void 0:n.vaccineAdministration;m.orders=[...m==null?void 0:m.orders,...u],m.voided=m.voided.filter(v=>{var M;return v.drug_name!==((M=u[0])==null?void 0:M.drug_name)}),m.obs=[...m==null?void 0:m.obs,...s],t.setVaccineReload(!t.getVaccineReload()),m.orders.length>0&&t.setLastVaccineAdminstredOnschedule(m.orders),mn(n,(l=u[0])==null?void 0:l.drug_name,"administered",(r=s[0])==null?void 0:r.obs_datetime),await E(n),sn("Saved successful"),await Se(n)}}function mn(e,n,t,l){e.vaccineSchedule.vaccine_schedule.forEach(r=>{r.antigens.forEach(u=>{u.drug_name===n&&(u.status=t,u.date_administered=l)})})}async function Fe(e,n){const t=await we(e);return await ye(new Date(n),t)}async function we(e){try{let n;if(p.getPouchDbStatus()&&p.getLanConnectionStatus()?n=he||[]:n=await p.getJson("eir/schedule/generic",{paginate:!1}),n.length>0){if(e=="M")return n[0].genericVaccineSchedule.male_schedule;if(e=="F")return n[0].genericVaccineSchedule.female_schedule}else if(jn().apiStatus){if(n=await p.getJson("eir/schedule/generic",{paginate:!1}),e=="M")return n.male_schedule;if(e=="F")return n.female_schedule}}catch(n){return console.error("Error getting offline generic vaccine schedule",n),[]}}async function ye(e,n){const t=new Date;return n==null||n.forEach(l=>{const r=l.age.toLowerCase();let u=null;if(r==="at birth")u=new Date(e);else if(r.includes("weeks")){const s=parseInt(r.split(" ")[0],10);u=new Date(e),u.setDate(e.getDate()+s*7)}else if(r.includes("months")){const s=parseInt(r.split(" ")[0],10);u=new Date(e),u.setMonth(e.getMonth()+s)}else if(r.includes("years")){const s=parseInt(r.split(" ")[0],10);u=new Date(e),u.setFullYear(e.getFullYear()+s)}u?u>t?l.milestone_status="upcoming":u.toDateString()===t.toDateString()?l.milestone_status="current":l.milestone_status="passed":l.milestone_status="unknown"}),{vaccine_schedule:n}}function ve(){return $().getAdministeredVaccines().map(n=>{var t,l,r;return{drug_name:((l=(t=n==null?void 0:n.drug_)==null?void 0:t.drug)==null?void 0:l.drug_name)||((r=n==null?void 0:n.drug_)==null?void 0:r.drug_name),drug_inventory_id:n.drug_id,equivalent_daily_dose:1,start_date:n.date_administered,auto_expire_date:Ae(n.date_administered,1),units:"ml",instructions:"",dose:1,frequency:"Unknown",batch_number:n.batch_number||"Unknown",prn:0}})}async function fe(){const n=$().getAdministeredVaccines();return await Promise.all(n.map(async l=>{var r,u,s;return{concept_id:2876,value_text:((u=(r=l==null?void 0:l.drug_)==null?void 0:r.drug)==null?void 0:u.drug_name)||((s=l==null?void 0:l.drug_)==null?void 0:s.drug_name),obs_datetime:l.date_administered}}))}function Ae(e,n){const t=new Date(e);return t.setDate(t.getDate()+parseInt(n)),y.toStandardHisFormat(t)}function De(){_n(pe,{class:"otherVitalsModal"},!1)}async function Se(e){var l,r;const n=$(),t=n.getLastVaccineAdminstredOnschedule();t.length>0&&((r=(l=e==null?void 0:e.vaccineSchedule)==null?void 0:l.vaccine_schedule)==null||r.forEach(u=>{Ve(u.antigens)==!0&&u.antigens.forEach(s=>{s.drug_id==t[0].drug_inventory_id&&De()})})),n.setLastVaccineAdminstredOnschedule([])}function Ve(e){return e.every(n=>n.status==="administered")}async function Ee(e,n,t){const l=JSON.parse(JSON.stringify(e));let r=l==null?void 0:l.vaccineAdministration;r.orders.some(s=>s.drug_name===n.drug.drug_name)?(r.orders=r.orders.filter(s=>s.drug_name!==n.drug.drug_name),r.obs=r.obs.filter(s=>s.value_text!==n.drug.drug_name)):r.voided=[...r==null?void 0:r.voided,{reason:t,order_id:n.drug.order_id,drug_name:n.drug.drug_name}],mn(l,n.drug.drug_name,"pending",""),await E(l)}async function Je(e,n){return p.void("/encounters/".concat(e),{reason:n})}function Re(e){return Me(e.drug_name)==!0}function Me(e){const n=["Vit","Albendazole"],t=e.toLowerCase().split(/[\s,()]+/);return n.some(l=>l.toLowerCase().split(/[\s,()]+/).some(u=>t.some(s=>s.includes(u)||u.includes(s))))}async function He(){return await p.getJson("immunization/months_picker")}async function Le(e,n){return await p.getJson("immunization/vaccines_administered",{start_date:e,end_date:n})}async function Be(e,n){return await p.getJson("immunization/aefi_report",{start_date:e,end_date:n})}async function Ze(){return await p.getJson("immunization/under_five_immunizations_drugs")}async function Ue(){return await p.getJson("/immunization/vaccine_names")}function O(e){return/[,"\n]/.test(e)?'"'.concat(e.replace(/"/g,'""'),'"'):e}function Ye(){try{const e=ee(),n=Yn(),{activePlatformProfile:t}=te();let l=Ie(e.$state.immunizationMonthlyRepoartData);l+="\n",l+=xe(e.$state.AEFIReportData),l+="\n",l+="\n        Date Created: ".concat(new Date().toISOString().split("T")[0],"\n        Report Period: ").concat(e.$state.navigationPayload.subTxt,"\n        Site: ").concat(n.$state.userFacilityName);const r=new Blob([l],{type:"text/csv;charset=utf-8;"}),u="".concat(n.$state.userFacilityName,"_").concat(e.$state.navigationPayload.subTxt,"_").concat(e.$state.navigationPayload.title);if(t.value.fileExport===rn.WEB){const s=document.createElement("a");s.href=window.URL.createObjectURL(r),s.setAttribute("download","".concat(u,".csv")),s.style.display="none",document.body.appendChild(s),s.click(),document.body.removeChild(s)}else t.value.fileExport===rn.FILE_SYSTEM?le("".concat(u,".csv"),r,"blob"):U("Platform not supported")}catch(e){console.error("Error exporting CSV:",e)}}function Ie(e){let n="Category,Static <1y,Static >1y,Outreach <1y,Outreach >1y\n";for(const t of e){const l=[O(t.label),t.fixed.lessThan1y,t.fixed.moreThan1y,t.outreach.lessThan1y,t.outreach.moreThan1y].join(",");n+=l+"\n"}return n}function xe(e){let n="Cases,"+e.vaccines.map(t=>O(t.name)).join(",")+"\n";for(const t of e.categories){n+=O(t.name)+"\n";for(const l of t.cases){const r=[O(l.name),...l.data.map(u=>u.count)];n+=r.join(",")+"\n"}}return n}export{F as A,re as a,He as b,Ue as c,Le as d,Ye as e,Ze as f,Fe as g,Be as h,Re as i,Ee as j,pe as n,Oe as s,P as u,Je as v};
