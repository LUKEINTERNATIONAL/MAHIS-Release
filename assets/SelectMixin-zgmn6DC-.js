import{H as d,k as p}from"./KbHandler-DufReX1K.js";import m from"./BaseTextInput-CtJS5O8S.js";import{Q as u,V as S,_ as b}from"./index-D2xzBexL.js";import{_ as g}from"./FieldMixin.vue_vue_type_script_lang-CQVEjKty.js";import{d as I,ad as y,eH as _,eI as w,aL as x,aM as C,bh as D,D as V,G as k,ac as E}from"./vendor-oGGsG_Nv.js";import{l as c}from"./lodash-Dt8AsbQm.js";import"./apexcharts-3SqrJuZO.js";import"./chartjs-B3AtUmwg.js";import"./barcode-qrcode-reader-DzPdwpFO.js";const H=I({components:{IonList:E,IonItem:k,IonLabel:V,HisTextInput:m,HisKeyboard:d,ViewPort:S,IonGrid:D,IonRow:C,IonCol:x,IonInfiniteScroll:w,IonInfiniteScrollContent:_,IonContent:y},mixins:[g],data:()=>({showKeyboard:!1,selected:"",filter:"",filtered:[],keyboard:u,listData:[],infiniteScroll:{enabled:!1,page:1,limit:10,threshold:"100px",handler:void 0}}),created(){var i,t,e,s,l,n,o,r,a,f,h;this.showKeyboard=((i=this.config)==null?void 0:i.showKeyboard)===!0,this.infiniteScroll.enabled=((e=(t=this.config)==null?void 0:t.infiniteScroll)==null?void 0:e.enabled)===!0,this.infiniteScroll.page=((l=(s=this.config)==null?void 0:s.infiniteScroll)==null?void 0:l.page)||1,this.infiniteScroll.limit=((o=(n=this.config)==null?void 0:n.infiniteScroll)==null?void 0:o.limit)||10,this.infiniteScroll.threshold=((a=(r=this.config)==null?void 0:r.infiniteScroll)==null?void 0:a.threshold)||"100px",this.infiniteScroll.handler=(h=(f=this.config)==null?void 0:f.infiniteScroll)==null?void 0:h.handler},watch:{footerButtonEvent:{handler(i){if(c.isPlainObject(i.onClickComponentEvents)){const t=(i==null?void 0:i.onClickComponentEvents)||{};if(t&&typeof t.setValue=="function"){const e=t.setValue(i);typeof e=="string"&&(this.filter=e,this.selected=e)}}},deep:!0},listData:{handler(i){i&&(this.filtered=i)},deep:!0,immediate:!0},filter:{async handler(i){var t;if(!i){this.filtered=this.listData;return}if((t=this.config)!=null&&t.isFilterDataViaApi){if(this.filtered=await this.options(this.fdata,i),this.selected===this.filter){const e=c.find(this.filtered,{label:this.filter});e&&this.$emit("onValue",e)}return}this.infiniteScroll.enabled&&(this.infiniteScroll.page=1),this.filtered=this.listData.filter(e=>this.isMatch(e.label,this.filter))},immediate:!0}},methods:{isMatch(i,t){return i.match(new RegExp(t,"i"))},clearSelection(){this.filter="",this.selected=""},onKbValue(i,t=!0){!t||this.selected===i||(this.filter=i,this.selected=this.filter)},keypress(i){this.filter||(this.selected=""),this.filter=p(i,this.selected),this.selected=this.filter},async pushData(i){if(this.infiniteScroll.enabled&&typeof this.infiniteScroll.handler=="function"){this.infiniteScroll.page++;const t=await this.infiniteScroll.handler(this.filter,this.infiniteScroll.page,this.infiniteScroll.limit);this.listData.push(...t)}i.target.complete()}}}),T=b(H,[["__scopeId","data-v-15cec2ec"]]);export{T as default};
