import{d as Q,ab as Be,G as pt,E as mt,ac as vt,ad as Ve,a2 as X,I as ft,a7 as _t,bd as Fe,aR as gt,H as j,e as _,f as o,k as a,l as n,aS as Ce,r as l,c as z,a as ye,m as C,O as L,J as u,u as c,Q as V,F as Z,an as $e,ej as ln,ek as rn,el as cn,as as un,ay as dn,w as de,ap as ht,bP as pn,P as ue,aG as mn,K as $,p as Ne,bC as vn,L as Te,em as nt,en as at,b5 as Le,eo as st,ep as ot,cZ as it,eq as lt,er as rt,es as ct,d2 as ut,bO as fn,ar as _n,bW as gn,_ as le,af as je,ae as ve,N as oe,bq as ie,a8 as hn,R as yn,bi as Ye,b0 as bn,bk as Dn,a6 as Cn,bU as wn,bF as Sn,a9 as dt}from"./vendor-CwRShy1a.js";import{b9 as He,H as we,ae as q,bb as yt,ba as bt,aZ as Dt,u as Se,_ as ce,k as Ee,az as Ae,ay as In,aA as Re,J as De,K as be,S as he,aS as Y,t as re,G as xe,aM as me,aN as Ct,by as kn,bz as Pn,bp as En,b4 as _e,b6 as ge,bA as xn,aP as On,P as Nn,aX as An,s as $n,aH as Pe,l as Mn,bl as Tn,aI as Ln,ap as Bn}from"./index-DOaVu21k.js";import{l as fe}from"./lodash-Dt8AsbQm.js";import{P as Fn}from"./patient_complaints_service-BfimLwXe.js";import{D as wt}from"./DashBox-CnjbFVKZ.js";import{B as Ke}from"./BasicForm-PN6ZnWL3.js";import{f as Xe,c as St,a as It}from"./formatServerData-B_w30pjI.js";import{A as Rn,P as Vn,m as Hn,D as Un,n as qn}from"./NextAppointment-BAoyNMm_.js";import{D as Wn,b as Gn}from"./drug_prescription_service-DevJslwF.js";import{D as zn}from"./drug_service-CHo6iofw.js";import{D as Yn,A as jn,R as Kn,a as Xn}from"./Outcome-3FuyWvV0.js";const Jn=Q({name:"Menu",components:{IonContent:_t,IonHeader:ft,IonItem:X,IonList:Ve,IonMenu:vt,IonTitle:mt,IonToolbar:pt,List:He},computed:{...Be(Se,["patient"]),...Be(Dt,["presentingComplaints"])},data(){return{valueNumericArray:[],obsDatetime:[],graphIcon:bt(["#006401"]),listIcon:yt(["#636363"]),displayGraph:!0,orders:[],height:[],BMI:[],iconBg:{},activeWeight:[],activeHeight:[],activeBMI:[],list:[],series:[{name:"",data:[]}]}},setup(){return{checkmark:gt,pulseOutline:Fe}},watch:{$router:{async handler(){await this.updateList()},immediate:!0,deep:!0},patient:{async handler(){await this.updateList()},deep:!0}},async mounted(){await this.updateList()},methods:{async updateList(){const t=await q.getAll(this.patient.patientID,"Presenting complaint"),s=fe.isEmpty(t)?[]:Promise.all(t.map(async r=>r.value_coded?{name:await q.getConceptName(r.value_coded),obs_date:r.obs_datetime,duration:r.children[0].value_text}:[]));this.setListData(await s)},setListData(t){this.list=[],this.list.push({actionBtn:!1,class:"col_background",header:!0,minHeight:"--min-height: 20px;",containSize:4,display:["Date","Presenting Complains","Duration"]}),t.forEach(s=>{this.list.push({actionBtn:!1,minHeight:"--min-height:20px;",class:"col_background",containSize:4,display:[we.toStandardHisFormat(s.obs_date),s.name,s.duration]})})}}}),Qn={class:"modal_wrapper"};function Zn(t,s,r,d,v,h){const I=j("list");return o(),_("div",Qn,[a("div",null,[n(I,{listData:t.list},null,8,["listData"])])])}const ea=ce(Jn,[["render",Zn],["__scopeId","data-v-30434e22"]]),ta={key:0},na={style:{"align-content":"center"}},aa={class:"ion-padding",slot:"content"},sa=Q({__name:"PresentingComplaints",setup(t,{expose:s}){const r=Dt(),{presentingComplaints:d}=Ce(r),v=l(Ee),h=l(!0),I=l(!1),F=l(!0),k=l(!1),S=l([]),x=l([]),D=l(),U=z(()=>[{componentType:"multiSelectInputField",header:"Presenting Complaints",name:"PresentingComplaints",trackBy:"concept_id",icon:Ee.search,hideSelected:!0,validation:y=>A(y==null?void 0:y.name,S.value)?"Presenting complaint already added":Ae.required(y),options:x.value,grid:{s:"6"}},{componentType:"inputField",header:"Duration",name:"duration",icon:Ee.time,validation:y=>Ae.isNotEmptyandNumber(y),grid:{s:"6"},unitOptions:[{label:"Hours",value:"Hours"},{label:"Days",value:"Days"},{label:"Weeks",value:"Weeks"},{label:"Months",value:"Months"},{label:"Years",value:"Years"}],unitValidation:y=>!y||y===""?"Please select a unit.":null},{componentType:"inputField",header:"Specify the presenting complaint(s)",name:"Other (specify)",icon:Ee.editPen,validation:y=>A(y,S.value)?"Presenting complaint already added":Ae.required(y),condition:y=>{var P;return((P=y==null?void 0:y.PresentingComplaints)==null?void 0:P.name)==="Other"}},{componentType:"Alert",condition:y=>{var P;return Ae.required((P=y==null?void 0:y.PresentingComplaints)==null?void 0:P.name)!=null},backgroundColor:"lightyellow",textColor:"black",value:"Please search thoroughly for the complaint. If it is not listed, search and select the 'Other' option to specify the complaint.",name:"noMatchAlert"}]),{formRef:i}=In(),g=async()=>{x.value=await Fn.getComplaintsList("Presenting complaint"),be(d.value,"PresentingComplaints","multiSelectData",x.value)},N=()=>{h.value=!1,F.value=!1,I.value=!0},w=async()=>{var R,p;const y=(R=i.value)==null?void 0:R.getFormValues();((p=i.value)==null?void 0:p.validateForm())==null&&(M(y),I.value=!1,F.value=!0)},M=y=>{var e;const P=y.duration+" "+y.duration_unit,R=y.PresentingComplaints,p=R.name==="Other"?y["Other (specify)"]:R.name;S.value.push({actionBtn:!0,btn:["delete"],name:p,concept_id:R.concept_id,duration:R.duration,durationUnits:R.duration_unit,display:[p,P],data:[{concept_id:8578,value_coded:R.concept_id,obs_datetime:he.getSessionDate(),child:[{concept_id:R.concept_id,value_text:P,obs_datetime:he.getSessionDate()}]}]}),(e=i.value)==null||e.resetForm(),k.value=!0},A=(y,P)=>P.some(R=>R.name===y),B=y=>{S.value=S.value.filter(P=>P.display[0]!==y.name)},T=async()=>{const y=await q.getObsByEncounterIdAndDate(Y.PRESENTING_COMPLAINTS),P=S.value.flatMap(R=>R.data);if(P.length<=0&&y.length<=0)return re("Presenting complaints is required");P.length<=0||(await q.addObsToEncounterPatient(P,Y.PRESENTING_COMPLAINTS),xe("Presenting complaints saved successful"),S.value=[])};return ye(async()=>{await g()}),s({onSubmit:T}),(y,P)=>{const R=j("ion-row"),p=j("ion-label"),e=j("ion-accordion"),E=j("ion-accordion-group");return o(),_(Z,null,[n(wt,{status:h.value,content:"No presenting complaints added"},null,8,["status"]),k.value?(o(),_("span",ta,[n(He,{listData:S.value,"onClicked:delete":B},null,8,["listData"])])):C("",!0),I.value?(o(),L(R,{key:1},{default:u(()=>[n(Re,{formData:U.value,ref_key:"formRef",ref:i},null,8,["formData"]),a("div",na,[n(De,{fill:"clear",icon:v.value.plus,iconSlot:"icon-only","onClicked:btn":P[0]||(P[0]=O=>w()),name:"Save"},null,8,["icon"])])]),_:1})):C("",!0),F.value?(o(),L(R,{key:2,style:{"margin-top":"10px"}},{default:u(()=>[n(De,{fill:"clear",icon:v.value.plus,iconSlot:"icon-only","onClicked:btn":P[1]||(P[1]=O=>N()),name:"Add new presenting complaints"},null,8,["icon"])]),_:1})):C("",!0),n(R,null,{default:u(()=>[n(E,{ref_key:"accordionGroup",ref:D,class:"previousView"},{default:u(()=>[n(e,{value:"first","toggle-icon-slot":"start",style:{"border-radius":"10px","background-color":"#fff"}},{default:u(()=>[n(c(X),{slot:"header",color:"light"},{default:u(()=>[n(p,{class:"previousLabel"},{default:u(()=>P[2]||(P[2]=[V("Previous presenting complaints")])),_:1,__:[2]})]),_:1}),a("div",aa,[n(ea)])]),_:1})]),_:1},512)]),_:1})],64)}}}),oa=ce(sa,[["__scopeId","data-v-0f7271d6"]]),ia=z(()=>[{componentType:"radioButtonField",header:"Eye opening response",name:"Eye opening response",obsValueType:"value_coded",type:"inline",options:[{label:"Spontaneously",value:"Spontaneously"},{label:"To speech",value:"To speech"},{label:"To pain",value:"To pain"},{label:"No response",value:"No response"}]},{componentType:"Dashes"},{componentType:"radioButtonField",header:"Best verbal response",name:"Best verbal response",obsValueType:"value_coded",type:"inline",options:[{label:"Oriented to time, place and person",value:"Oriented to time, place and person"},{label:"Confused",value:"Confused"},{label:"Inappropriate words",value:"Inappropriate words"},{label:"Incomprehensible sounds",value:"Incomprehensible sounds"},{label:"No response",value:"No response"}]},{componentType:"Dashes"},{componentType:"radioButtonField",header:"Best motor response",name:"Best motor response",obsValueType:"value_coded",type:"inline",options:[{label:"Obeys commands",value:"Obeys commands"},{label:"Moves to localised pain",value:"Moves to localised pain"},{label:"Flexion withdrawal from pain",value:"Flexion withdrawal from pain"},{label:"Abnormal flexion (decorticate)",value:"Abnormal flexion (decorticate)"},{label:"Abnormal extension (decerebrate)",value:"Abnormal extension (decerebrate)"},{label:"No response",value:"No response"}]}]),la=z(()=>[{componentType:"radioButtonField",header:"Eye opening response",name:"Eye opening response",obsValueType:"value_coded",type:"inline",options:[{label:"Directed eye movements",value:"Directed eye movements"},{label:"Not directed",value:"Not directed"}]},{componentType:"Dashes"},{componentType:"radioButtonField",header:"Best verbal response",name:"Best verbal response",obsValueType:"value_coded",type:"inline",options:[{label:"Appropriate cry",value:"Appropriate cry"},{label:"Inappropriate cry or moan",value:"Inappropriate cry or moan"},{label:"No cry",value:"No cry"}]},{componentType:"Dashes"},{componentType:"radioButtonField",header:"Best motor response",name:"Best motor response",obsValueType:"value_coded",type:"inline",options:[{label:"Localizes pain",value:"Localizes pain"},{label:"Withdraws from pain",value:"Withdraws from pain"},{label:"Non specific or no response",value:"Non specific or no response"}]}]),kt={Spontaneously:4,"To speech":3,"To pain":2,"No response":1},Pt={"Oriented to time, place and person":5,Confused:4,"Inappropriate words":3,"Incomprehensible sounds":2,"No response":1},Et={"Obeys commands":6,"Moves to localised pain":5,"Flexion withdrawal from pain":4,"Abnormal flexion (decorticate)":3,"Abnormal extension (decerebrate)":2,"No response":1},xt={"Not directed":0,"Directed eye movements":1},Ot={"Non specific or no response":0,"Withdraws from pain":1,"Localizes pain":2},Nt={"No cry":0,"Inappropriate cry or moan":1,"Appropriate cry":2},ra={class:"allergies-container"},ca={key:0,class:"no-allergies"},ua={key:1,class:"date-groups"},da=["onClick"],pa={class:"date-info"},ma={class:"date-text"},va={class:"allergy-count"},fa={class:"card-header"},_a={class:"allergy-type"},ga={class:"card-content"},ha=Q({__name:"AllergiesListing",setup(t){const s=Se(),{patient:r}=Ce(s),d=l({}),v={antiviral:/abacavir|lamivudine|lopinavir|ritonavir|zidovudine|efavirenz|tenofovir/i,antibiotic:/penicillin|amoxicillin|cephalexin|azithromycin|ciprofloxacin|doxycycline/i,analgesic:/aspirin|ibuprofen|acetaminophen|morphine|codeine|tramadol/i,cardiac:/metoprolol|lisinopril|amlodipine|atorvastatin|warfarin/i,activated:/activated\s+charcoal/i},h={985:{name:"Other",icon:$e,severity:"danger"},7759:{name:"Location/Environmental",icon:dn,severity:"info"},7579:{name:"Medical Condition",icon:un,severity:"warning"},drug:{name:"Drug Allergy",icon:$e,severity:"danger"},food:{name:"Food Allergy",icon:cn,severity:"danger"},environmental:{name:"Environmental",icon:rn,severity:"warning"},contact:{name:"Contact Allergy",icon:ln,severity:"warning"},unknown:{name:"Drug Allergy",icon:$e,severity:"danger"}},I=i=>{const g=i.toLowerCase();return v.antiviral.test(g)?{type:"Antiviral Medication",icon:"shield-outline"}:v.antibiotic.test(g)?{type:"Antibiotic",icon:"bandage-outline"}:v.analgesic.test(g)?{type:"Pain Medication",icon:"fitness-outline"}:v.cardiac.test(g)?{type:"Cardiac Medication",icon:"heart-outline"}:v.activated.test(g)?{type:"Detoxification Agent",icon:"flask-outline"}:{type:"Medication",icon:"medical-outline"}},F=z(()=>{var i,g,N;return((N=(g=(i=r.value)==null?void 0:i.allergies)==null?void 0:g.saved)==null?void 0:N.length)>0}),k=z(()=>F.value?r.value.allergies.saved.map(i=>{var B;const g=((B=i.concept_id)==null?void 0:B.toString())||"unknown";console.log("###########: ",i);const N=h[g]||h.unknown;let w="Unknown",M=null;return i.value_text&&i.value_text!=="Unknown"&&i.value_text!==""?(w=i.value_text,g==="985###"&&(M=I(i.value_text))):i.concept_name&&(w=i.concept_name),{...M?{...N,name:M.type,icon:M.icon}:N,displayValue:w,conceptId:i.concept_id,date:i.obs_datetime||i.encounter_datetime,providerId:i.provider_id,locationId:i.location_id,encounterId:i.encounter_id,isDrug:g==="985",raw:i}}):[]),S=z(()=>{const i={};k.value.forEach(w=>{const M=w.date?D(w.date):"Unknown Date";i[M]||(i[M]=[]),i[M].push(w)});const g={};return Object.keys(i).sort((w,M)=>w==="Unknown Date"?1:M==="Unknown Date"?-1:new Date(M).getTime()-new Date(w).getTime()).forEach(w=>{g[w]=i[w]}),g}),x=i=>{d.value[i]=!d.value[i]},D=i=>{if(!i)return"Unknown Date";try{return new Date(i).toISOString().split("T")[0]}catch(g){return"Unknown Date"}},U=i=>{if(i==="Unknown Date")return"Unknown Date";try{const g=new Date(i),N=we.sessionDate(),w=new Date(N),M=new Date(w);M.setDate(M.getDate()-1);const A=g.toDateString(),B=w.toDateString(),T=M.toDateString();return A===B?"Today":A===T?"Yesterday":g.toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})}catch(g){return i}};return de(()=>S.value,i=>{const g=Object.keys(i);g.length>0&&(d.value[g[0]]=!0)},{immediate:!0}),de(()=>{var i;return(i=r.value)==null?void 0:i.allergies},i=>{console.log("Allergies updated:",i)},{deep:!0}),ye(()=>{var i;console.log("Allergies component mounted",(i=r.value)==null?void 0:i.allergies)}),(i,g)=>{const N=j("ion-icon"),w=j("ion-label");return o(),_("div",ra,[n(w,{class:"section-title"},{default:u(()=>[n(N,{icon:c(ht),class:"alert-icon"},null,8,["icon"]),n(w,null,{default:u(()=>g[0]||(g[0]=[V("Allergies (Medication, Healthcare items, Environment and Food)")])),_:1,__:[0]})]),_:1}),F.value?(o(),_("div",ua,[(o(!0),_(Z,null,ue(S.value,(M,A)=>(o(),_("div",{key:A,class:"date-group"},[a("div",{class:Ne(["date-header",{expanded:d.value[A]}]),onClick:B=>x(A)},[a("div",pa,[n(N,{icon:c(mn),class:"date-icon"},null,8,["icon"]),a("span",ma,$(U(A)),1),a("span",va,"("+$(M.length)+" "+$(M.length===1?"allergy":"allergies")+")",1)]),n(N,{icon:c(vn),class:Ne(["expand-icon",{rotated:d.value[A]}])},null,8,["icon","class"])],10,da),a("div",{class:Ne(["allergies-grid",{collapsed:!d.value[A]}])},[(o(!0),_(Z,null,ue(M,(B,T)=>(o(),_("div",{key:T,class:Ne(["allergy-card",B.severity])},[a("div",fa,[n(N,{icon:B.icon,class:"allergy-icon"},null,8,["icon"]),a("span",_a,$(B.name),1)]),a("div",ga,[a("div",{class:Ne(["allergy-value",{"drug-name":B.isDrug}])},$(B.displayValue),3)])],2))),128))],2)]))),128))])):(o(),_("div",ca,[n(N,{icon:c(pn),class:"no-allergies-icon"},null,8,["icon"]),g[1]||(g[1]=a("p",null,"No known allergies",-1))]))])}}}),At=ce(ha,[["__scopeId","data-v-1302dd03"]]),ya=Q({name:"VisitHistory",components:{AllergiesListing:At,IonIcon:Te},setup(){const t=Ct();return{selectedAllergiesList2:z(()=>t.selectedMedicalAllergiesList),alertCircleOutline:ht,documentTextOutline:gn,femaleOutline:_n,medicalOutline:$e,warningOutline:fn,bodyOutline:nt,eyeOutline:ut,nutritionOutline:ct,fitnessOutline:ot,pulseOutline:Fe,earOutline:rt,happyOutline:lt,manOutline:it,moveOutline:st,addOutline:Le,scanOutline:at}},data(){return{presentingComplaintsWithDuration:[],pastMedicalHistory:[],levelOfConsciousness:{eyeResponse:null,verbalResponse:null,motorResponse:null},pregnancy:{patientPregnant:null,breastFeeding:null},physicalExamCategories:{Eyes:{icon:ut,abnormalities:[],normal:!1},Mouth:{icon:ct,abnormalities:[],normal:!1},Ears:{icon:rt,abnormalities:[],normal:!1},Face:{icon:lt,abnormalities:[],normal:!1},Neck:{icon:it,abnormalities:[],normal:!1},Chest:{icon:ot,abnormalities:[],normal:!1},"Chest Movement":{icon:st,abnormalities:[],normal:!1},"Heart Sounds":{icon:Fe,abnormalities:[],normal:!1},"Breath Sounds":{icon:Le,abnormalities:[],normal:!1},"Added Breath Sounds":{icon:Le,abnormalities:[],normal:!1},"Abdominal Inspection":{icon:at,abnormalities:[],normal:!1},"Genital Examination":{icon:nt,abnormalities:[],normal:!1}}}},computed:{...Be(Se,["patient"]),hasLevelOfConsciousness(){return this.levelOfConsciousness.eyeResponse||this.levelOfConsciousness.verbalResponse||this.levelOfConsciousness.motorResponse},hasPresentingComplaints(){var t;return((t=this.presentingComplaintsWithDuration)==null?void 0:t.length)>0},hasPregnancyData(){return this.pregnancy.patientPregnant||this.pregnancy.breastFeeding},hasPastMedicalHistory(){var t;return((t=this.uniquePastMedicalHistory)==null?void 0:t.length)>0},hasAllergies(){var t,s;return((s=(t=this.selectedAllergiesList2)==null?void 0:t.filter(r=>r.selected))==null?void 0:s.length)>0},hasPhysicalExam(){return Object.values(this.physicalExamCategories).some(t=>t.abnormalities.length>0||t.normal)},uniquePastMedicalHistory(){return[...new Set(this.pastMedicalHistory)]},uniquePresentingComplaints(){return[...new Set(this.presentingComplaintsWithDuration.map(t=>t.name))]},isMinor(){var t,s;return we.getAgeInYears((s=(t=this.patient)==null?void 0:t.personInformation)==null?void 0:s.birthdate)<18},gcsScore(){var F,k,S;if(!this.hasLevelOfConsciousness)return null;const t=this.levelOfConsciousness.eyeResponse,s=this.levelOfConsciousness.motorResponse,r=this.levelOfConsciousness.verbalResponse,d=t&&(F=(this.isMinor?xt:kt)[t])!=null?F:0,v=s&&(k=(this.isMinor?Ot:Et)[s])!=null?k:0,h=r&&(S=(this.isMinor?Nt:Pt)[r])!=null?S:0,I=d+v+h;return"(M ".concat(v," V ").concat(h," E ").concat(d,") ").concat(I,"/").concat(this.isMinor?5:15)}},methods:{async updateData(){var t;(t=this.patient)!=null&&t.patientID&&(await this.loadPresentingComplaints(),await this.loadPastMedicalHistory(),await this.loadLevelOfConsciousness(),await this.loadPregnancyStatus(),await this.loadPhysicalExam())},async loadPresentingComplaints(){try{const t=await q.getObsByEncounterIdAndDate(Y.PRESENTING_COMPLAINTS);this.presentingComplaintsWithDuration=[];const s=t.filter(r=>r.concept_name==="Presenting complaint");for(const r of s){const d=t.find(h=>h.concept_id===r.value_coded&&h.concept_name!=="Presenting complaint"),v=await me.getConceptName(r.value_coded);this.presentingComplaintsWithDuration.push({name:v,duration:(d==null?void 0:d.value_text)||"Duration not specified"})}}catch(t){console.error("Error loading presenting complaints:",t)}},async loadPastMedicalHistory(){try{const s=(await q.getObsByEncounterIdAndDate(Y.PAST_MEDICAL_HISTORY)).filter(r=>r.concept_name==="Chronic disease");this.pastMedicalHistory=await Promise.all(s.map(async r=>await me.getConceptName(r.value_coded)))}catch(t){console.error("Error loading past medical history:",t)}},async loadLevelOfConsciousness(){try{const t=await q.getObsByEncounterIdAndDate(Y.ASSESSMENT);if(t&&Array.isArray(t)){const s=t.find(v=>v.concept_name==="Eye opening response");this.levelOfConsciousness.eyeResponse=s!=null&&s.value_coded?await me.getConceptName(s.value_coded):null;const r=t.find(v=>v.concept_name==="Best verbal response");this.levelOfConsciousness.verbalResponse=r!=null&&r.value_coded?await me.getConceptName(r.value_coded):null;const d=t.find(v=>v.concept_name==="Best motor response");this.levelOfConsciousness.motorResponse=d!=null&&d.value_coded?await me.getConceptName(d.value_coded):null}}catch(t){console.error("Error loading level of consciousness:",t)}},async loadPregnancyStatus(){try{const t=await q.getObsByEncounterIdAndDate(Y.PREGNANCY_STATUS);if(t&&Array.isArray(t)){const s=t.find(d=>d.concept_name==="Patient pregnant");this.pregnancy.patientPregnant=s!=null&&s.value_coded?await me.getConceptName(s.value_coded):null;const r=t.find(d=>d.concept_name==="Is patient breast feeding?");this.pregnancy.breastFeeding=r!=null&&r.value_coded?await me.getConceptName(r.value_coded):null}}catch(t){console.error("Error loading pregnancy status:",t)}},async loadPhysicalExam(){try{const t=await q.getObsByEncounterIdAndDate(Y.PHYSICAL_EXAMINATION);Object.values(this.physicalExamCategories).forEach(s=>{s.abnormalities=[],s.normal=!1});for(const s of t)if(s.concept_id){if(s.value_coded===1065)switch(s.concept_id){case 10837:this.physicalExamCategories.Eyes.normal=!0;break;case 10842:this.physicalExamCategories.Mouth.normal=!0;break;case 11028:this.physicalExamCategories.Ears.normal=!0;break;case 10854:this.physicalExamCategories.Face.normal=!0;break;case 10858:this.physicalExamCategories.Neck.normal=!0;break;case 10894:this.physicalExamCategories.Chest.normal=!0;break;case 10903:this.physicalExamCategories["Heart Sounds"].normal=!0;break;case 10909:this.physicalExamCategories["Breath Sounds"].normal=!0;break;case 10919:case 10928:case 10939:this.physicalExamCategories["Abdominal Inspection"].normal=!0;break;case 10803:case 10946:this.physicalExamCategories["Genital Examination"].normal=!0;break}if(s.value_coded){const r=await me.getConceptName(s.value_coded);switch(s.concept_id){case 10838:this.physicalExamCategories.Eyes.abnormalities.push(r);break;case 10843:this.physicalExamCategories.Mouth.abnormalities.push(r);break;case 10852:this.physicalExamCategories.Ears.abnormalities.push(r);break;case 10855:this.physicalExamCategories.Face.abnormalities.push(r);break;case 10859:this.physicalExamCategories.Neck.abnormalities.push(r);break;case 10897:this.physicalExamCategories.Chest.abnormalities.push(r);break;case 10904:this.physicalExamCategories["Heart Sounds"].abnormalities.push(r);break;case 10910:this.physicalExamCategories["Breath Sounds"].abnormalities.push(r);break;case 10920:case 10929:case 10939:this.physicalExamCategories["Abdominal Inspection"].abnormalities.push(r);break;case 10797:case 10804:case 10947:this.physicalExamCategories["Genital Examination"].abnormalities.push(r);break}}}}catch(t){console.error("Error loading physical exam:",t)}}},watch:{patient:{async handler(){await this.updateData()},deep:!0}},async mounted(){await this.updateData()}}),ba={class:"visit-container"},Da={class:"visit-sections"},Ca={key:0,class:"visit-section"},wa={class:"section-header"},Sa={class:"section-content"},Ia={key:0,class:"info-item"},ka={class:"info-value"},Pa={key:1,class:"info-item"},Ea={class:"info-value"},xa={key:2,class:"info-item"},Oa={class:"info-value"},Na={key:3,class:"info-item"},Aa={class:"info-value highlight"},$a={key:1,class:"visit-section"},Ma={class:"section-header"},Ta={class:"complaints-container"},La={class:"complaint-name"},Ba={class:"complaint-duration"},Fa={key:2,class:"visit-section"},Ra={class:"section-header"},Va={class:"section-content"},Ha={key:0,class:"info-item"},Ua={class:"info-value highlight"},qa={key:1,class:"info-item"},Wa={class:"info-value highlight"},Ga={key:3,class:"visit-section"},za={class:"section-header"},Ya={class:"tags-container"},ja={class:"allergies-section"},Ka={class:"allergies-container"},Xa={key:4,class:"visit-section"},Ja={class:"section-header"},Qa={class:"exam-section"},Za={key:0,class:"exam-category"},es={class:"exam-category-header"},ts={class:"exam-items"},ns={key:1,class:"exam-item normal"};function as(t,s,r,d,v,h){const I=j("ion-icon"),F=j("AllergiesListing");return o(),_("div",ba,[s[11]||(s[11]=a("div",{class:"visit-header"},[a("h5",null,"Patient's Clinical Assessment Summary")],-1)),a("div",Da,[t.hasLevelOfConsciousness?(o(),_("div",Ca,[a("div",wa,[n(I,{icon:t.alertCircleOutline,class:"section-icon"},null,8,["icon"]),s[0]||(s[0]=a("h3",null,"Level of Consciousness",-1))]),a("div",Sa,[t.levelOfConsciousness.eyeResponse?(o(),_("div",Ia,[s[1]||(s[1]=a("span",{class:"info-label"},"Eye Response:",-1)),a("span",ka,$(t.levelOfConsciousness.eyeResponse),1)])):C("",!0),t.levelOfConsciousness.verbalResponse?(o(),_("div",Pa,[s[2]||(s[2]=a("span",{class:"info-label"},"Verbal Response:",-1)),a("span",Ea,$(t.levelOfConsciousness.verbalResponse),1)])):C("",!0),t.levelOfConsciousness.motorResponse?(o(),_("div",xa,[s[3]||(s[3]=a("span",{class:"info-label"},"Motor Response:",-1)),a("span",Oa,$(t.levelOfConsciousness.motorResponse),1)])):C("",!0),t.gcsScore?(o(),_("div",Na,[s[4]||(s[4]=a("span",{class:"info-label"},"Score:",-1)),a("span",Aa,$(t.gcsScore),1)])):C("",!0)])])):C("",!0),t.hasPresentingComplaints?(o(),_("div",$a,[a("div",Ma,[n(I,{icon:t.documentTextOutline,class:"section-icon"},null,8,["icon"]),s[5]||(s[5]=a("h3",null,"Presenting Complaints",-1))]),a("div",Ta,[(o(!0),_(Z,null,ue(t.presentingComplaintsWithDuration,(k,S)=>(o(),_("div",{class:"complaint-item",key:S},[a("div",La,$(k.name),1),a("div",Ba,$(k.duration),1)]))),128))])])):C("",!0),t.hasPregnancyData?(o(),_("div",Fa,[a("div",Ra,[n(I,{icon:t.femaleOutline,class:"section-icon"},null,8,["icon"]),s[6]||(s[6]=a("h3",null,"Pregnancy Status",-1))]),a("div",Va,[t.pregnancy.patientPregnant?(o(),_("div",Ha,[s[7]||(s[7]=a("span",{class:"info-label"},"Pregnant:",-1)),a("span",Ua,$(t.pregnancy.patientPregnant),1)])):C("",!0),t.pregnancy.breastFeeding?(o(),_("div",qa,[s[8]||(s[8]=a("span",{class:"info-label"},"Breastfeeding:",-1)),a("span",Wa,$(t.pregnancy.breastFeeding),1)])):C("",!0)])])):C("",!0),t.hasPastMedicalHistory?(o(),_("div",Ga,[a("div",za,[n(I,{icon:t.medicalOutline,class:"section-icon"},null,8,["icon"]),s[9]||(s[9]=a("h3",null,"Medical History",-1))]),a("div",Ya,[(o(!0),_(Z,null,ue(t.uniquePastMedicalHistory,(k,S)=>(o(),_("div",{class:"medical-tag",key:S},$(k),1))),128))])])):C("",!0),a("div",ja,[a("div",Ka,[n(F)])]),t.hasPhysicalExam?(o(),_("div",Xa,[a("div",Ja,[n(I,{icon:t.bodyOutline,class:"section-icon"},null,8,["icon"]),s[10]||(s[10]=a("h3",null,"Physical Examination",-1))]),a("div",Qa,[(o(!0),_(Z,null,ue(t.physicalExamCategories,(k,S)=>(o(),_(Z,{key:S},[k.abnormalities.length>0||k.normal?(o(),_("div",Za,[a("div",es,[n(I,{icon:k.icon},null,8,["icon"]),a("h4",null,$(S),1)]),a("div",ts,[k.abnormalities.length>0?(o(!0),_(Z,{key:0},ue(k.abnormalities,(x,D)=>(o(),_("div",{class:"exam-item abnormal",key:D},$(x),1))),128)):k.normal?(o(),_("div",ns," Normal examination ")):C("",!0)])])):C("",!0)],64))),128))])])):C("",!0)])])}const ss=ce(ya,[["render",as],["__scopeId","data-v-795e1865"]]),os={class:"modal_wrapper"},is=Q({__name:"LevelOfConsciousness",setup(t,{expose:s}){var k,S;const r=Se(),{patient:d}=Ce(r),v=l(we.getAgeInYears((S=(k=d==null?void 0:d.value)==null?void 0:k.personInformation)==null?void 0:S.birthdate)),h=l(null),I=z(()=>{var B,T,y,P;const x=((B=h.value)==null?void 0:B.getFormValues())||{},D=x["Eye opening response"]||"",U=x["Best motor response"]||"",i=x["Best verbal response"]||"",g=v.value<18,N=(T=(g?xt:kt)[D])!=null?T:0,w=(y=(g?Ot:Et)[U])!=null?y:0,M=(P=(g?Nt:Pt)[i])!=null?P:0,A=N+w+M;return"(M ".concat(w," V ").concat(M," E ").concat(N,") ").concat(A,"/").concat(g?5:15)});return s({onSubmit:async()=>{var D;if(!h.value){console.error("Form reference is not available");return}const x=((D=h.value)==null?void 0:D.getFormValues())||{};x["Eye opening response"]||x["Best motor response"]||x["Best verbal response"]?(await q.buildAddObsToEncounterPatient(x,Y.ASSESSMENT),h.value.resetForm(),xe("Level of Consciousness saved successfully")):re(" No level of consciousness data to save ")}}),(x,D)=>(o(),_("div",os,[v.value<18?(o(),L(Re,{key:0,formData:c(la),ref_key:"formRef",ref:h},null,8,["formData"])):(o(),L(Re,{key:1,formData:c(ia),ref_key:"formRef",ref:h},null,8,["formData"])),a("h5",null,$(I.value),1)]))}}),ls={class:"modal_wrapper"},rs=Q({__name:"PregnancyBreastfeeding",setup(t,{expose:s}){const r=kn(),{pregnancy:d}=Ce(r),v=()=>{};return s({onSubmit:async()=>{const I=await Xe(d.value);I.length>0?(await q.addObsToEncounterPatient(I,Y.PREGNANCY_STATUS),xe("Pregnancy status saved successfully")):re("No pregnancy status data to save ")}}),(I,F)=>(o(),_("div",ls,[n(Ke,{contentData:c(d),"onUpdate:inputValue":v},null,8,["contentData"])]))}}),cs={class:"modal_wrapper"},us={class:"uniform_columns"},ds=Q({__name:"PastMedicalHistory",setup(t,{expose:s}){const r=Pn(),{pastMedicalHistory:d}=Ce(r),v=l([]);ye(()=>{v.value=r.getInitial(),h()}),de(d,()=>{h()},{deep:!0});const h=()=>{var x;const S=["TB","Chronic Obstructive Pulmonary Disease (COPD)","Asthma","Epilepsy","Previous stroke","Peptic Ulcer Disease (PUD)","Mental disorder","Bleeding disorders","Hypertension","HIV Positive","Diabetes Mellitus"];(x=En(d.value,"None"))!=null&&x.checked?S.forEach(D=>{_e(d.value,"TB treatment","displayNone",!0),be(d.value,"TB drugs","displayNone",!0),be(d.value,"TB drug start date","displayNone",!0),_e(d.value,"Hypertension medication","displayNone",!0),be(d.value,"Current hypertension treatment regimen","displayNone",!0),_e(d.value,"HIV status","displayNone",!0),be(d.value,"ARV start date","displayNone",!0),_e(d.value,"Diabetes","displayNone",!0),_e(d.value,"Controlled by","displayNone",!0),ge(d.value,D,"checked",!1),ge(d.value,D,"disabled",!0)}):S.forEach(D=>{ge(d.value,D,"disabled",!1)})},I=S=>{be(d.value,"TB drugs","popOverData",{filterData:!0,data:[{name:"Auramine 'O' (C.I. 41000) 50g"},{name:"Bedaquilline 100mg"},{name:"Clofazimine 100mg"},{name:"Clofazimine 50mg"},{name:"Cycloserine 125mg"},{name:"Cycloserine 250mg"},{name:"Delamanid 50mg"},{name:"Ethambutol 100mg"},{name:"Ethambutol 400mg"},{name:"Ethionamide 250mg"},{name:"Isoniazid 100mg "},{name:"Isoniazid 300mg"},{name:"Isoniazid / Rifapentine 300mg / 300mg"},{name:"Levofloxacin 100mg"},{name:"Levofloxacin 250mg"},{name:"Linezolid 600mg"},{name:"Moxifloxacin 400mg"},{name:"Pyrazinamide 400mg"},{name:"Rifabutin 150mg Capsules"},{name:"Rifampicin 150mg/isoniazid 75mg"},{name:"Rifampicin 75mg+INH 50mg dispersible"},{name:"Rifampicin 75mg+INH 50mg+Pyrazinamide 150mg dispersible"},{name:"Rifampicin150mg/Isoniazid75mg/Pyrazinamide 400mg/Ethambutol"}]}),be(d.value,"Current hypertension treatment regimen","popOverData",{filterData:!0,data:[{name:"Captopril 12.5mg"},{name:"Aspirin 75mg"},{name:"Hydrochlorothiazide 25mg"},{name:"Enalapril Meleate 5mg"},{name:"Enalapril Maleate 10mg"}]})},F=async()=>[...await St(d.value),...await Xe(d.value),...await It(d.value)];return s({onSubmit:async()=>{const S=await F();if(S.length===0){re("No past medical history data to save");return}await q.addObsToEncounterPatient(S,Y.PAST_MEDICAL_HISTORY),xe("Past medical history saved successful")}}),(S,x)=>(o(),_("div",cs,[a("div",us,[n(Ke,{contentData:c(d),initialData:v.value,"onUpdate:inputValue":I,"onUpdate:selected":I},null,8,["contentData","initialData"])])]))}}),ps=ce(ds,[["__scopeId","data-v-49fdce72"]]),ms={class:"container"},vs=Q({__name:"PhysicalExamination",setup(t,{expose:s}){const r=xn(),d=Se(),{physicalExam:v}=Ce(r),{patient:h}=Ce(d),I=l([]);ye(()=>{I.value=r.getInitial(),F(),k()}),de(v,()=>{F(),k()},{deep:!0});const F=()=>{On(v.value,"Physical examination")=="No"?_e(v.value,"Reason why physical examination not done","displayNone",!1):(_e(v.value,"Reason why physical examination not done","displayNone",!0),_e(v.value,"Reason why physical examination not done","selectedValue",""))},k=()=>{var U,i;const D=(i=(U=h.value)==null?void 0:U.personInformation)==null?void 0:i.gender;D=="M"&&(ge(v.value,"Vulva examination","disabled",!0),ge(v.value,"Visible bleeding","disabled",!0)),D=="F"&&(ge(v.value,"Urethral meatus abnormal","disabled",!0),ge(v.value,"Scrotal swelling","disabled",!0),ge(v.value,"Tastes swelling","disabled",!0))},S=async()=>[...await St(v.value),...await Xe(v.value),...await It(v.value)];return s({onSubmit:async()=>{const D=await S();if(console.log("Selected physical data is",D),D.length===0){re("No physical examination data to save");return}await q.addObsToEncounterPatient(D,Y.PHYSICAL_EXAMINATION),console.log(q.getObsByEncounterIdAndDate(Y.PHYSICAL_EXAMINATION)),xe("Physical examination saved successful")}}),(D,U)=>{const i=j("ion-card-content"),g=j("ion-card");return o(),_("div",ms,[n(g,{class:"section"},{default:u(()=>[n(i,null,{default:u(()=>[n(Ke,{contentData:c(v),initialData:I.value},null,8,["contentData","initialData"])]),_:1})]),_:1})])}}}),fs=ce(vs,[["__scopeId","data-v-0d34c6dd"]]),_s={key:0},gs={class:"ion-padding",slot:"content"},hs={class:"nav-buttons"},ys={class:"ion-padding",slot:"content"},bs={class:"nav-buttons"},Ds={class:"ion-padding",slot:"content"},Cs={class:"nav-buttons"},ws={class:"ion-padding",slot:"content"},Ss={class:"nav-buttons"},Is={class:"ion-padding",slot:"content"},ks={class:"nav-buttons"},Ps={class:"ion-padding",slot:"content"},Es={class:"nav-buttons"},xs=Q({__name:"ClinicalAssessment",setup(t,{expose:s}){const r=l("loc"),d=l(0),v=l(!1),h=l(!1),I=new Nn,F=Se(),k=()=>{d.value++},S=l(null),x=l(null),D=l(null),U=l(null),i=l(null),g=l(null),N=[{id:"loc",label:"Level of consciousness",show:!0},{id:"pc",label:"Presenting complaints",show:!0},{id:"pbs",label:"Pregnancy and breastfeeding status",show:()=>I.isChildBearing()},{id:"pmh",label:"Past medical history",show:!0},{id:"al",label:"Allergies",show:!0},{id:"pe",label:"Physical examination",show:!0}];async function w(){const p=he.getSessionDate(),e=[Y.ASSESSMENT,Y.PRESENTING_COMPLAINTS,Y.PAST_MEDICAL_HISTORY,Y.PHYSICAL_EXAMINATION,Y.PREGNANCY_STATUS];let E=!1;for(const O of e)try{const K=await q.getObsByEncounterIdAndDate(O);if(K&&K.some(ee=>ee.obs_datetime?we.toStandardHisFormat(ee.obs_datetime)===we.toStandardHisFormat(p):!1)){E=!0;break}}catch(K){console.error("Error checking observations for encounter type ".concat(O,":"),K)}v.value=E}ye(w),de(()=>F.patient,w);const M=z(()=>v.value),A=z(()=>N.filter(p=>typeof p.show=="function"?p.show():p.show)),B=p=>{const e=N.find(E=>E.id===p);return e?typeof e.show=="function"?e.show():e.show:!1},T=p=>A.value.findIndex(e=>e.id===p),y=p=>{const e=T(p);e>0&&(r.value=A.value[e-1].id)},P=p=>{const E=T(p)+1;E<A.value.length?r.value=A.value[E].id:(r.value="",k())};return s({onSubmit:async()=>{const p=[{ref:S,name:"PresentingComplaints"},{ref:x,name:"LevelOfConsciousness"},{ref:D,name:"PastMedicalHistory"},{ref:i,name:"PregnancyBreastfeeding"},{ref:g,name:"PhysicalExamination"}];for(const e of p)if(e.ref.value&&typeof e.ref.value.onSubmit=="function")try{await e.ref.value.onSubmit()}catch(E){console.error("Error calling ".concat(e.name," onSubmit:"),E)}else console.log("".concat(e.name," component ref not available or no onSubmit method"))}}),(p,e)=>{const E=j("ion-toggle");return o(),_(Z,null,[M.value?(o(),_("div",_s,[n(c(X),{lines:"none"},{default:u(()=>[n(c(le),null,{default:u(()=>e[14]||(e[14]=[V("Switch between Capture Mode and Summary Mode")])),_:1,__:[14]}),n(E,{checked:h.value,onIonChange:e[0]||(e[0]=O=>h.value=O.detail.checked),slot:"end"},null,8,["checked"])]),_:1}),h.value?C("",!0):(o(),L(ss,{key:d.value}))])):C("",!0),!M.value||h.value?(o(),L(c(hn),{key:1,style:{width:"100%"}},{default:u(()=>[n(c(je),{value:r.value,"onUpdate:value":e[13]||(e[13]=O=>r.value=O),ref:"accordionGroup",class:"previousView"},{default:u(()=>[B("loc")?(o(),L(c(ve),{key:0,value:"loc",class:"_card"},{default:u(()=>[n(c(X),{slot:"header",color:"light"},{default:u(()=>[n(c(le),{class:"previousLabel"},{default:u(()=>e[15]||(e[15]=[V("Level of consciousness")])),_:1,__:[15]})]),_:1}),a("div",gs,[n(is,{"is-active":r.value==="loc",ref_key:"levelOfConsciousnessFormRef",ref:x,onDataSaved:k},null,8,["is-active"]),a("div",hs,[T("loc")>0?(o(),L(c(oe),{key:0,fill:"outline",onClick:e[1]||(e[1]=ie(O=>y("loc"),["stop"]))},{default:u(()=>e[16]||(e[16]=[V(" Back ")])),_:1,__:[16]})):C("",!0),n(c(oe),{fill:"outline",onClick:e[2]||(e[2]=ie(O=>P("loc"),["stop"]))},{default:u(()=>[V($(T("loc")<A.value.length-1?"Next":"Finish"),1)]),_:1})])])]),_:1})):C("",!0),B("pc")?(o(),L(c(ve),{key:1,value:"pc",class:"_card"},{default:u(()=>[n(c(X),{slot:"header",color:"light"},{default:u(()=>[n(c(le),{class:"previousLabel"},{default:u(()=>e[17]||(e[17]=[V("Presenting complaints")])),_:1,__:[17]})]),_:1}),a("div",ys,[n(oa,{"is-active":r.value==="pc",onDataSaved:k,ref_key:"presentingComplaintsFormRef",ref:S},null,8,["is-active"]),a("div",bs,[T("pc")>0?(o(),L(c(oe),{key:0,fill:"outline",onClick:e[3]||(e[3]=ie(O=>y("pc"),["stop"]))},{default:u(()=>e[18]||(e[18]=[V(" Back ")])),_:1,__:[18]})):C("",!0),n(c(oe),{fill:"outline",onClick:e[4]||(e[4]=ie(O=>P("pc"),["stop"]))},{default:u(()=>[V($(T("pc")<A.value.length-1?"Next":"Finish"),1)]),_:1})])])]),_:1})):C("",!0),B("pbs")?(o(),L(c(ve),{key:2,value:"pbs",class:"_card"},{default:u(()=>[n(c(X),{slot:"header",color:"light"},{default:u(()=>[n(c(le),{class:"previousLabel"},{default:u(()=>e[19]||(e[19]=[V("Pregnancy and breastfeeding status")])),_:1,__:[19]})]),_:1}),a("div",Ds,[n(rs,{"is-active":r.value==="pbs",ref_key:"pregnancyBreastfeedingFormRef",ref:i,onDataSaved:k},null,8,["is-active"]),a("div",Cs,[T("pbs")>0?(o(),L(c(oe),{key:0,fill:"outline",onClick:e[5]||(e[5]=ie(O=>y("pbs"),["stop"]))},{default:u(()=>e[20]||(e[20]=[V(" Back ")])),_:1,__:[20]})):C("",!0),n(c(oe),{fill:"outline",onClick:e[6]||(e[6]=ie(O=>P("pbs"),["stop"]))},{default:u(()=>[V($(T("pbs")<A.value.length-1?"Next":"Finish"),1)]),_:1})])])]),_:1})):C("",!0),B("pmh")?(o(),L(c(ve),{key:3,value:"pmh",class:"_card"},{default:u(()=>[n(c(X),{slot:"header",color:"light"},{default:u(()=>[n(c(le),{class:"previousLabel"},{default:u(()=>e[21]||(e[21]=[V("Past medical history")])),_:1,__:[21]})]),_:1}),a("div",ws,[n(ps,{"is-active":r.value==="pmh",ref_key:"pastMedicalHistoryFormRef",ref:D,onDataSaved:k},null,8,["is-active"]),a("div",Ss,[T("pmh")>0?(o(),L(c(oe),{key:0,fill:"outline",onClick:e[7]||(e[7]=ie(O=>y("pmh"),["stop"]))},{default:u(()=>e[22]||(e[22]=[V(" Back ")])),_:1,__:[22]})):C("",!0),n(c(oe),{fill:"outline",onClick:e[8]||(e[8]=ie(O=>P("pmh"),["stop"]))},{default:u(()=>[V($(T("pmh")<A.value.length-1?"Next":"Finish"),1)]),_:1})])])]),_:1})):C("",!0),B("al")?(o(),L(c(ve),{key:4,value:"al",class:"_card"},{default:u(()=>[n(c(X),{slot:"header",color:"light"},{default:u(()=>[n(c(le),{class:"previousLabel"},{default:u(()=>e[23]||(e[23]=[V("Allergies")])),_:1,__:[23]})]),_:1}),a("div",Is,[n(Rn,{"is-active":r.value==="al",ref_key:"allergiesFormRef",ref:U,onDataSaved:k},null,8,["is-active"]),a("div",ks,[T("al")>0?(o(),L(c(oe),{key:0,fill:"outline",onClick:e[9]||(e[9]=ie(O=>y("al"),["stop"]))},{default:u(()=>e[24]||(e[24]=[V(" Back ")])),_:1,__:[24]})):C("",!0),n(c(oe),{fill:"outline",onClick:e[10]||(e[10]=ie(O=>P("al"),["stop"]))},{default:u(()=>[V($(T("al")<A.value.length-1?"Next":"Finish"),1)]),_:1})])])]),_:1})):C("",!0),B("pe")?(o(),L(c(ve),{key:5,value:"pe",class:"_card"},{default:u(()=>[n(c(X),{slot:"header",color:"light"},{default:u(()=>[n(c(le),{class:"previousLabel"},{default:u(()=>e[25]||(e[25]=[V("Physical examination")])),_:1,__:[25]})]),_:1}),a("div",Ps,[n(fs,{"is-active":r.value==="pe",ref_key:"physicalExaminationFormRef",ref:g,onDataSaved:k},null,8,["is-active"]),a("div",Es,[T("pe")>0?(o(),L(c(oe),{key:0,fill:"outline",onClick:e[11]||(e[11]=ie(O=>y("pe"),["stop"]))},{default:u(()=>e[26]||(e[26]=[V(" Back ")])),_:1,__:[26]})):C("",!0),n(c(oe),{fill:"outline",onClick:e[12]||(e[12]=ie(O=>P("pe"),["stop"]))},{default:u(()=>[V($(T("pe")<A.value.length-1?"Next":"Finish"),1)]),_:1})])])]),_:1})):C("",!0)]),_:1},8,["value"])]),_:1})):C("",!0)],64)}}}),xo=ce(xs,[["__scopeId","data-v-597092a6"]]),Os=Q({name:"Menu",components:{IonContent:_t,IonHeader:ft,IonItem:X,IonList:Ve,IonMenu:vt,IonTitle:mt,IonToolbar:pt,List:He},computed:{...Be(Se,["patient"])},data(){return{valueNumericArray:[],obsDatetime:[],graphIcon:bt(["#006401"]),listIcon:yt(["#636363"]),displayGraph:!0,orders:[],height:[],BMI:[],iconBg:{},activeWeight:[],activeHeight:[],activeBMI:[],list:[],series:[{name:"",data:[]}]}},setup(){return{checkmark:gt,pulseOutline:Fe}},async mounted(){const t=await q.getAll(this.patient.patientID,"Primary diagnosis"),s=await q.getAll(this.patient.patientID,"Secondary diagnosis"),r=await q.getAll(this.patient.patientID,"Attempted/ Differential diagnosis"),d=[...t||[],...s||[],...r||[]],v=fe.isEmpty(d)?[]:Promise.all(d.map(async h=>({name:await q.getConceptName(h.value_coded),obs_date:h.obs_datetime})));this.setListData(await v)},methods:{dismiss(){yn.dismiss()},handleIcon(){},setActivClass(t){this.activeHeight="",this.activeBMI="",this.activeWeight="",t=="height"?this.activeHeight="_active":t=="weight"?this.activeWeight="_active":t=="BMI"&&(this.activeBMI="_active")},setListData(t){this.list=[],this.list.push({actionBtn:!1,class:"col_background",header:!0,minHeight:"--min-height: 25px;",display:["Date","Diagnosis","Notes"]}),t.forEach(s=>{this.list.push({actionBtn:!1,minHeight:"--min-height: 25px;",class:"col_background",display:[we.toStandardHisFormat(s.obs_date),s.name,""]})})}}}),Ns={class:"modal_wrapper"};function As(t,s,r,d,v,h){const I=j("list");return o(),_("div",Ns,[a("div",null,[n(I,{listData:t.list},null,8,["listData"])])])}const $s=ce(Os,[["render",As],["__scopeId","data-v-88580898"]]),Ms={class:"custom_card",style:{padding:"10px"}},Ts={key:0},Ls={key:0,style:{color:"red","margin-top":"10px",background:"lightgoldenrodyellow"}},Bs={class:"ion-padding",slot:"content"},Fs=Q({__name:"OPDDiagnosis",setup(t,{expose:s}){const r=Ee,d=l(!0),v=l(!1),h=l(!0),I=l(!1),F=l(!0),k=l(""),S=l(""),x=l([]),D=l([]),U=l(),i=l(null);An();const g=z(()=>D.value.some(p=>p.data.concept_id===6542));de(D,()=>{P()},{deep:!0});const N=z(()=>[{name:"primaryDiagnosis",header:"Primary Diagnosis",componentType:"multiSelectInputField",options:x.value,icon:r.search,onSearchChange:T,validation:Ae.required},{componentType:"checkboxField",label:"Secondary Diagnosis",type:"single",grid:{s:"6"},name:"secondaryDiagnosisCheckbox"},{componentType:"checkboxField",label:"Differential Diagnosis",type:"single",grid:{s:"6"},name:"differentialDiagnosisCheckbox"},{componentType:"Dashes"},{name:"secondaryDiagnosis",header:"Secondary Diagnosis",componentType:"multiSelectInputField",isMultiple:!0,options:x.value,icon:r.search,condition:p=>p==null?void 0:p.secondaryDiagnosisCheckbox,onSearchChange:T,validation:(p,e)=>w(e,"secondaryDiagnosis")},{name:"differentialDiagnosis",header:"Differential Diagnosis",componentType:"multiSelectInputField",options:x.value,icon:r.search,isMultiple:!0,condition:p=>p==null?void 0:p.differentialDiagnosisCheckbox,onSearchChange:T,validation:(p,e)=>w(e,"differentialDiagnosis")}]),w=(p,e)=>{var te,W,Ie;if(!p)return null;const E=(te=p.primaryDiagnosis)==null?void 0:te.name,O=((W=p.secondaryDiagnosis)==null?void 0:W.map(se=>se.name))||[],K=((Ie=p.differentialDiagnosis)==null?void 0:Ie.map(se=>se.name))||[];if(e==="secondaryDiagnosis"&&O.includes(E)||e==="differentialDiagnosis"&&K.includes(E))return"".concat(E," is already the primary diagnosis");const ee=O.find(se=>K.includes(se));return ee?"".concat(ee," cannot be both secondary and differential"):null},M=()=>{S.value="",k.value="",d.value=!1,F.value=!1,v.value=!0},A=async()=>{var p;((p=i.value)==null?void 0:p.validateForm())==null&&(B(),v.value=!1,I.value=!0,F.value=!0,h.value=!1)},B=()=>{var te;const p=[],e=D.value.map(W=>W.name),E=((te=i.value)==null?void 0:te.getFormValues())||{},O=E.primaryDiagnosis||[],K=E.secondaryDiagnosis||[],ee=E.differentialDiagnosis||[];if(O.name&&!e.includes(O.name))if(!D.value.some(Ie=>Ie.data.concept_id===6542))p.push({actionBtn:!0,btn:["delete"],name:O.name,id:O.concept_id,display:[O.name,"Primary diagnosis"],data:{concept_id:6542,value_coded:O.concept_id,obs_datetime:he.getSessionDate()}});else return $n("Only one primary diagnosis is allowed"),!1;return K&&K.forEach(W=>{e.includes(W.name)||p.push({actionBtn:!0,btn:["delete"],name:W.name,id:W.concept_id,display:[W.name,"Secondary diagnosis"],data:{concept_id:6543,value_coded:W.concept_id,obs_datetime:he.getSessionDate()}})}),ee&&ee.forEach(W=>{e.includes(W.name)||p.push({actionBtn:!0,btn:["delete"],name:W.name,id:W.concept_id,display:[W.name,"Differential diagnosis"],data:{concept_id:10201,value_coded:W.concept_id,obs_datetime:he.getSessionDate()}})}),p.length>0&&(D.value=[...D.value,...p]),!0},T=async p=>{const e=p.trim().toLowerCase()||"";return x.value=await Vn.getDiagnosis(e,1,15),x.value},y=p=>{const e=D.value,E=p.name,O=e.filter(K=>K.display[0]!==E);D.value=O},P=()=>{D.value.length>0?(I.value=!0,d.value=!1):v.value||(d.value=!0),F.value=!g.value},R=async()=>{if(D.value.length<=0){re("Diagnosis not saved");return}const p=D.value.flatMap(E=>E.data);if(p.length<=0)return re("Diagnosis not saved");const e=await q.addObsToEncounter(p,Y.DIAGNOSIS);await q.mergeObsToPatient(e),xe("Diagnosis saved successful"),D.value=[]};return ye(async()=>{P(),await T("")}),s({onSubmit:R}),(p,e)=>{const E=j("ion-row"),O=j("ion-label"),K=j("ion-accordion"),ee=j("ion-accordion-group");return o(),_(Z,null,[a("div",Ms,[n(wt,{status:d.value,content:"No Diagnosis added"},null,8,["status"]),I.value?(o(),_("span",Ts,[n(He,{listData:D.value,"onClicked:delete":y},null,8,["listData"]),g.value?(o(),_("div",Ls," In order to update the diagnosis list, please remove/delete the primary diagnosis only and then re-add or change it along with the secondary and differential diagnoses. ")):C("",!0)])):C("",!0),v.value?(o(),L(E,{key:1},{default:u(()=>{var te;return[a("div",null,[n(Re,{formData:N.value,ref_key:"formRef",ref:i},null,8,["formData"])]),a("div",null,[n(De,{fill:"clear",icon:c(r).plus,iconSlot:"icon-only","onClicked:btn":e[0]||(e[0]=W=>A()),name:"Save",disabled:(te=i.value)==null?void 0:te.validateForm(),class:"ion-margin-top"},null,8,["icon","disabled"])])]}),_:1})):C("",!0),F.value?(o(),L(E,{key:2,style:{"margin-top":"10px"}},{default:u(()=>[n(De,{fill:"clear",icon:c(r).plus,iconSlot:"icon-only","onClicked:btn":e[1]||(e[1]=te=>M()),name:"Add new Diagnosis"},null,8,["icon"])]),_:1})):C("",!0)]),n(E,null,{default:u(()=>[n(ee,{ref_key:"accordionGroup",ref:U,class:"previousView"},{default:u(()=>[n(K,{value:"first","toggle-icon-slot":"start",class:"custom_card"},{default:u(()=>[n(c(X),{slot:"header",color:"light"},{default:u(()=>[n(O,{class:"previousLabel"},{default:u(()=>e[2]||(e[2]=[V("Previous Diagnosis")])),_:1,__:[2]})]),_:1}),a("div",Bs,[n($s)])]),_:1})]),_:1},512)]),_:1})],64)}}}),Oo=ce(Fs,[["__scopeId","data-v-a440f286"]]),Rs={class:"allergies-section"},Vs={class:"allergies-container"},Hs={class:"medication-section"},Us={class:"medication-content"},qs={key:0,class:"add-medication-form"},Ws={class:"form-group"},Gs={class:"option-label"},zs={key:0,class:"error-message"},Ys={class:"form-row"},js={class:"form-group"},Ks={key:0,class:"error-message"},Xs={class:"form-group"},Js={key:0,class:"error-message"},Qs={class:"form-group"},Zs={key:0,class:"error-message"},eo={class:"action-buttons"},to={class:"notes-section"},no={class:"notes-content"},ao={class:"notes-input-container"},so={class:"ion-padding",slot:"content"},oo={class:"notes-timeline"},io={class:"note-date"},lo={class:"note-content"},ro={class:"ion-padding",slot:"content"},co={class:"note-date"},uo={class:"note-content"},po=Q({watch:{},name:"xxxComponent"}),mo=Q({...po,setup(t){const s=Ee,r=Wn,d=l(!1),v=l(!1),h=l(!0),I=l(0),F=l(""),k=l(!1),S=l(),x=l(!1),D=l(""),U=l(""),i=l(""),g=l(""),N=l(""),w=l(""),M="Add new medication",A=Pe(),B=Ct(),T=z(()=>B.selectedMedicalAllergiesList),y=z(()=>A.selectedMedicalDrugsList),P=z(()=>A.partialOPDdrugList),R=z(()=>A.nonPharmalogicalTherapyAndOtherNotes),p=["first","second","third"],e=l(),E=l(),O=l(),K=l(!1),ee=l(!1),te=l("Show more notes"),W=l(),Ie=l(),se=l(),Me=z(()=>A.editingDrugItem),$t=l("Select a route"),Ue=l(!1),Mt=l("Select frequency"),qe=l(!1),Tt=l("Select drug"),We=l(!1),ne=l(),ae=l(),pe=l(),Oe=l([]),Lt=l([{concept_id:11797,name:"Buccal",concept_name_id:null,id:1769},{concept_id:11794,name:"Intradermal",concept_name_id:null,id:6284},{concept_id:11795,name:"Intramuscular (IM)",concept_name_id:null,id:6285},{concept_id:11799,name:"Intraosseous",concept_name_id:null,id:6286},{concept_id:11793,name:"Intravenous (IV)",concept_name_id:null,id:6295},{concept_id:3327,name:"Oral",concept_name_id:null,id:8686},{concept_id:11800,name:"Other method of prescription",concept_name_id:null,id:8920},{concept_id:11792,name:"Rectally",concept_name_id:null,id:10785},{concept_id:11798,name:"Subcutaneous",concept_name_id:null,id:12342},{concept_id:11796,name:"Sublingual",concept_name_id:null,id:12344},{concept_id:11792,name:"Rectally",concept_name_id:null,id:14078},{concept_id:11793,name:"Intravenous (IV)",concept_name_id:null,id:14079},{concept_id:11794,name:"Intradermal",concept_name_id:null,id:14080},{concept_id:11795,name:"Intramuscular (IM)",concept_name_id:null,id:14081},{concept_id:11796,name:"Sublingual",concept_name_id:null,id:14082},{concept_id:11797,name:"Buccal",concept_name_id:null,id:14083},{concept_id:11798,name:"Subcutaneous",concept_name_id:null,id:14084},{concept_id:11799,name:"Intraosseous",concept_name_id:null,id:14085},{concept_id:11800,name:"Other method of prescription",concept_name_id:null,id:14086}]),Bt=z(()=>Oe.value.length?Oe.value:Lt.value);function Ft(f){ne.value=f}async function Rt(){return await Gn()}async function Vt(f=5,m=1e3){let b=0;for(;b<f&&(Oe.value=await Rt(),!(Oe.value.length>0));)b++,await new Promise(H=>setTimeout(H,m));Oe.value.length===0&&console.warn("Failed to fetch route list after maximum retries.")}ye(async()=>{const f=new Hn,{previousDrugPrescriptions:m,previousClinicalNotes:b,previousDrugAllergies:H}=await f.getPatientEncounters();e.value=m,E.value=Object.entries(b)[0];const[,...G]=Object.entries(b);O.value=G,W.value=Object.entries(H)[0];const[,...J]=Object.entries(H);Ie.value=J,await Vt()}),de(()=>U.value,async f=>{Gt()}),de(()=>i.value,async f=>{Je()});function Ht(){if(fe.isEmpty(ne.value)==!0)return Ue.value=!0,!1;if(fe.isEmpty(ne.value)==!1)return Ue.value=!1,!0}function Ut(){if(fe.isEmpty(ae.value)==!0)return qe.value=!0,!1;if(fe.isEmpty(ae.value)==!1)return qe.value=!1,!0}function qt(){if(fe.isEmpty(pe.value)==!0)return We.value=!0,!1;if(fe.isEmpty(pe.value)==!1)return We.value=!1,!0}function Wt(){h.value=!h.value,d.value=!0,k.value=!1,x.value=!1}async function Gt(){return et(U.value)?k.value=!1:(F.value="please enter a number",k.value=!0),k.value}async function Je(){return et(i.value)?x.value=!1:(S.value="please enter a number",x.value=!0),x.value}async function Qe(){const f=await Je(),m=Ut(),b=qt(),H=Ht();return!f&&m==!0&&b==!0&&H==!0}function zt(f){ae.value=f}async function Ze(){try{const f=()=>se.value.dose_strength!=null&&se.value.dose_strength?Math.trunc(se.value.dose_strength):1;if(Me.value!==null){if(!await Qe()){re("Please enter correct data values",4e3);return}const b=he.getSessionDate(),H=tt(b,parseInt(i.value));let G=!1;Ge(se.value)==!0&&(G=!0);const J={drugName:D.value,dose:f(),frequency:ae.value.label,frequency_code:ae.value.code,duration:i.value,prescription:H,drug_id:w.value,units:N.value,route_concept_id:ne.value.concept_id,route_name:ne.value.name,highlightbackground:G},ze=Pe();console.log(ze.setSelectedMedicalDrugsList([J])),ze.editingDrugItem=null,h.value=!0}else{if(!await Qe()){re("Please enter correct data values",4e3);return}tn();const b=he.getSessionDate(),H=tt(b,parseInt(i.value));let G=!1;Ge(se.value)==!0&&(G=!0);const J={drugName:D.value,dose:f(),frequency:ae.value.label,frequency_code:ae.value.code,duration:i.value,prescription:H,drug_id:w.value,units:N.value,route_concept_id:ne.value.concept_id,route_name:ne.value.name,highlightbackground:G};Pe().setSelectedMedicalDrugsList([J])}w.value="",D.value="",U.value="",ae.value=null,i.value="",g.value="",I.value++,pe.value=null,ne.value=null}catch(f){console.error("Error saving data:",f)}}async function Yt(f){const m=f,G=await zn.getOfflineOPDDrugs({name:m,page:1,page_size:10});G.map(J=>({label:J.name,value:J.name,other:J})),A.setPartialOPDdrugList(G)}function Ge(f){const m=[];return T.value.forEach(H=>{H.selected&&m.push(H.concept_id)}),jt([f],m)==!0?(re("Client is allergic to the selected medication",4e6),!0):!1}function jt(f,m){try{return f.some(b=>m.includes(b.concept_id))}catch(b){return!1}}function Kt(f){f&&(D.value=f.name,w.value=f.drug_id,N.value=f.units,se.value=f,Ge(f))}function Xt(f){const m=y.value[f],b=Pe();b.removeDrugById(m.drug_id),b.editingDrugItem=m,w.value="",D.value="",U.value="",ae.value=null,i.value="",g.value="",pe.value=null,ne.value=null,w.value=m.drug_id,D.value=m.drugName,U.value=m.dose,ae.value={label:m.frequency,code:m.frequency_code},i.value=m.duration,g.value=m.prescription;const H=P.value.find(G=>G.name===m.drugName);H&&(pe.value=H),ne.value={concept_id:m.route_concept_id,name:m.route_name},h.value=!1,I.value++}function Jt(){if(Me.value!==null){w.value="",D.value="",U.value="",ae.value=null,i.value="",g.value="",pe.value=null,ne.value=null;const f=Pe();f.setSelectedMedicalDrugsList([Me.value]),f.editingDrugItem=null}h.value=!0,I.value++}function Qt(f){y.value.splice(f,1),I.value++,re("you have removed a drug from list",6e3)}function Zt(f){let m=f.target.value;en(m)}function en(f){Pe().setNonPharmalogicalTherapyAndOtherNotes(f)}function et(f){return/^[0-9]+$/.test(f)}function tt(f,m){const b=new Date(f);b.setDate(b.getDate()+m);const H=b.getFullYear(),G=String(b.getMonth()+1).padStart(2,"0"),J=String(b.getDate()).padStart(2,"0");return"".concat(H,"-").concat(G,"-").concat(J)}function tn(){d.value=!1,v.value=!0,h.value=!0}function nn(f){p.filter(b=>b!==f.detail.value);const m=f.detail.value;m!==void 0?m=="third"&&(te.value="Show less notes",ee.value=!K.value):(te.value="Show more notes",ee.value=!K.value)}function an(f){return f[1]}function sn(f){(f.key==="Enter"||f.key==="ArrowDown")&&(f.preventDefault(),Ze())}const ke=z(()=>[{showAddItemButton:!0,addItemButton:!0,name:Me.value!==null?"Update":"ADD",fn:Ze},{showAddItemButton:!0,addItemButton:!0,name:"CANCEL",fn:on}]),on=async()=>{Mn(Tn,{class:"otherVitalsModal"},!0,{message:"Are you sure you want to cancle?"},{cancel:H=>{},confirm:async H=>{H.detail==!0&&Jt()}})};return(f,m)=>(o(),L(c(Ve),null,{default:u(()=>[a("div",Rs,[a("div",Vs,[n(At)])]),a("div",Hs,[n(c(X),{lines:"none",class:"section-header"},{default:u(()=>[n(c(Te),{icon:c($e),class:"section-icon"},null,8,["icon"]),n(c(le),{class:"section-title",style:{"margin-top":"12px"}},{default:u(()=>m[9]||(m[9]=[V("Medication")])),_:1,__:[9]})]),_:1}),a("div",Us,[(o(),L(Un,{_selectedMedicalDrugsList:y.value,onEditItem:Xt,onRemoveItem:Qt,key:I.value,class:"medication-list"},null,8,["_selectedMedicalDrugsList"])),h.value?C("",!0):(o(),_("div",qs,[a("div",Ws,[m[10]||(m[10]=a("label",{class:"input-label"},"Medication",-1)),n(c(Ye),{modelValue:pe.value,"onUpdate:modelValue":[m[0]||(m[0]=b=>pe.value=b),m[1]||(m[1]=b=>Kt(b))],options:P.value,searchable:!0,"close-on-select":!0,"show-labels":!1,placeholder:"Select medication",label:"name","track-by":"drug_id",onSearchChange:m[2]||(m[2]=b=>Yt(b))},{option:u(b=>[a("div",Gs,$(b.option.name),1)]),_:1},8,["modelValue","options"]),We.value?(o(),_("div",zs,$(Tt.value),1)):C("",!0)]),a("div",Ys,[a("div",js,[m[11]||(m[11]=a("label",{class:"input-label"},"Route",-1)),n(c(Ye),{modelValue:ne.value,"onUpdate:modelValue":[m[3]||(m[3]=b=>ne.value=b),m[4]||(m[4]=b=>Ft(b))],options:Bt.value,searchable:!0,"close-on-select":!0,"show-labels":!1,placeholder:"Select route",label:"name","track-by":"concept_id",disabled:!1},null,8,["modelValue","options"]),Ue.value?(o(),_("div",Ks,$($t.value),1)):C("",!0)]),a("div",Xs,[m[12]||(m[12]=a("label",{class:"input-label"},"Frequency",-1)),n(c(Ye),{modelValue:ae.value,"onUpdate:modelValue":[m[5]||(m[5]=b=>ae.value=b),m[6]||(m[6]=b=>zt(b))],options:c(r),searchable:!0,"close-on-select":!0,"show-labels":!1,placeholder:"Select frequency",label:"label","track-by":"code"},null,8,["modelValue","options"]),qe.value?(o(),_("div",Js,$(Mt.value),1)):C("",!0)]),a("div",Qs,[m[13]||(m[13]=a("label",{class:"input-label"},"Duration (days)",-1)),n(c(bn),{modelValue:i.value,"onUpdate:modelValue":m[7]||(m[7]=b=>i.value=b),type:"number",inputmode:"numeric",pattern:"[0-9]*",fill:"outline",placeholder:"Enter duration",onKeydown:sn},null,8,["modelValue"]),x.value?(o(),_("div",Zs,$(S.value),1)):C("",!0)])]),a("div",eo,[ke.value[0].addItemButton?(o(),L(De,{key:0,name:ke.value[0].name,icon:c(Dn),"onClicked:btn":ke.value[0].fn,class:"save-button"},null,8,["name","icon","onClicked:btn"])):C("",!0),ke.value[1].addItemButton?(o(),L(De,{key:1,name:ke.value[1].name,icon:c(Cn),"onClicked:btn":ke.value[1].fn,class:"cancel-button"},null,8,["name","icon","onClicked:btn"])):C("",!0)])])),h.value?(o(),L(De,{key:1,name:M,icon:c(Le),fontWeight:"600","onClicked:btn":Wt,class:"add-new-button"},null,8,["icon"])):C("",!0)])]),a("div",to,[n(c(X),{lines:"none",class:"section-header"},{default:u(()=>[n(c(Te),{icon:c(wn),class:"section-icon"},null,8,["icon"]),n(c(le),{class:"section-title"},{default:u(()=>m[14]||(m[14]=[V("Non-pharmacological therapy and other notes")])),_:1,__:[14]})]),_:1}),a("div",no,[n(qn,{class:"intervention-component"}),a("div",ao,[n(c(X),{class:"notes-input-item"},{default:u(()=>[n(c(Te),{slot:"start",icon:c(s).editPen,class:"edit-icon","aria-hidden":"true"},null,8,["icon"]),n(c(Sn),{modelValue:R.value,"onUpdate:modelValue":m[8]||(m[8]=b=>R.value=b),onIonInput:Zt,placeholder:"Enter notes here...","auto-grow":!0,class:"notes-textarea",fill:"outline",style:{"--padding-start":"16px"}},null,8,["modelValue"])]),_:1})]),n(c(je),{ref:"accordionGroup",class:"previous-notes"},{default:u(()=>[n(c(ve),{value:"fourth","toggle-icon-slot":"start"},{default:u(()=>[n(c(X),{slot:"header",color:"light",class:"previous-notes-header"},{default:u(()=>[n(c(le),null,{default:u(()=>m[15]||(m[15]=[V("Previous visit notes")])),_:1,__:[15]})]),_:1}),a("div",so,[a("div",oo,[f.index===1?(o(!0),_(Z,{key:0},ue(E.value,(b,H)=>(o(),_("div",{key:H,class:"note-entry"},[(o(!0),_(Z,null,ue(b,(G,J)=>(o(),_("div",{key:J},[a("div",io,$(G.date),1),a("div",lo,$(G.notes),1)]))),128))]))),128)):C("",!0),n(c(je),{onIonChange:nn},{default:u(()=>[n(c(ve),{value:"third","toggle-icon-slot":"start"},{default:u(()=>[n(c(X),{slot:"header",color:"light",class:"show-more-header"},{default:u(()=>[n(c(le),{color:"primary"},{default:u(()=>[V($(te.value),1)]),_:1})]),_:1}),a("div",ro,[(o(!0),_(Z,null,ue(O.value,(b,H)=>(o(),_("div",{key:H,class:"note-entry"},[(o(!0),_(Z,null,ue(an(b),(G,J)=>(o(),_("div",{key:J},[a("div",co,$(G.date),1),a("div",uo,$(G.notes),1)]))),128))]))),128))])]),_:1})]),_:1})])])]),_:1})]),_:1},512)])])]),_:1}))}}),No=ce(mo,[["__scopeId","data-v-928c62f1"]]),vo={class:"dash_box"},fo={key:1},_o=Q({name:"xxxComponent"}),go=Q({..._o,setup(t){const s=l("No outcome created yet"),r=l(!1),d=l("please select a type");l("Add new outcome"),l(!0);const v=l(!0),h=l(""),I=l(!0),F=l(!1),k=Ln(),S=z(()=>k.outcomes),x=l(!1),D=l(!1),U=l(!1),i=l(!1),g=l(!1);l(null),l(null);const N=l([{name:"Admitted for short stay",selected:!1},{name:"Referred out",selected:!1},{name:"Discharged Home",selected:!1}]),w=[{multi_Selection:!1,show_list_label:!0,unqueId:"qwerty2",name_of_list:"Add new outcome",placeHolder:"Choose one",items:N.value,listUpdatedFN:M,listFilteredFN:()=>{},use_internal_filter:!0,disabled:l(!1)}];function M(p){N.value=p,N.value.forEach(e=>{e.selected==!0&&(h.value=e.name)})}ye(async()=>{B()}),de(()=>h.value,async p=>{x.value==!0?x.value=!1:P()}),de(()=>S.value.length,async p=>{B()});function A(){N.value.forEach(p=>{p.selected=!1}),h.value=""}function B(){S.value.length>0?I.value=!1:S.value.length==0&&F.value==!1&&(I.value=!0)}function T(p){S.value.splice(p,1)}const y=p=>{};async function P(p=!0){const e=h.value;console.log(e),h.value=e;const E=h.value;E==N.value[0].name?U.value=!0:U.value=!1,E==N.value[1].name?(i.value=!0,console.log("show_discharged_options is set to true")):i.value=!1,E==N.value[2].name?(g.value=!0,console.log("show_discharged_options is set to true")):g.value=!1}function R(){D.value=!1,U.value=!1,i.value=!1,g.value=!1,A()}return(p,e)=>{const E=j("ion-row");return o(),L(c(Ve),null,{default:u(()=>[n(E,null,{default:u(()=>[n(c(dt),null,{default:u(()=>[(o(),L(Yn,{key:0,"onUpdate:removeItem":T,"onUpdate:editItem":y,displayData:S.value},null,8,["displayData"]))]),_:1})]),_:1}),I.value?(o(),L(E,{key:0},{default:u(()=>[a("span",vo,$(s.value),1)]),_:1})):C("",!0),v.value?(o(),_("div",fo,[n(E,null,{default:u(()=>[n(c(dt),null,{default:u(()=>[n(Bn,{multiSelection:w[0].multi_Selection,show_label:w[0].show_list_label,uniqueId:w[0].unqueId,name_of_list:w[0].name_of_list,choose_place_holder:w[0].placeHolder,"items_-list":w[0].items,use_internal_filter:w[0].use_internal_filter,disabled:w[0].disabled.value,onItemListUpDated:w[0].listUpdatedFN,onItemListFiltered:w[0].listFilteredFN},null,8,["multiSelection","show_label","uniqueId","name_of_list","choose_place_holder","items_-list","use_internal_filter","disabled","onItemListUpDated","onItemListFiltered"]),a("div",null,[r.value?(o(),L(c(le),{key:0,class:"error-label"},{default:u(()=>[V($(d.value),1)]),_:1})):C("",!0)])]),_:1})]),_:1})])):C("",!0),U.value?(o(),L(jn,{key:2,onDataSaved:R,selected_ward_prop:"",admitted_other_props:""})):C("",!0),i.value?(o(),L(Kn,{key:3,onDataSaved:R,selected_referral_data:"",selected_other_referral_data:""})):C("",!0),g.value?(o(),L(Xn,{key:4,onDataSaved:R,selected_discharged_prop:"",selected_discharged_data:""})):C("",!0)]),_:1})}}}),Ao=ce(go,[["__scopeId","data-v-b6576c18"]]);export{xo as C,Oo as O,oa as P,rs as _,No as a,Ao as b,fs as c,is as d};
