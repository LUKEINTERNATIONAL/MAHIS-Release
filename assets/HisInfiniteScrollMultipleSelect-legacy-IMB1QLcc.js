System.register(["./KbHandler-legacy-Dr3eJzKE.js","./index-legacy-BHoGaC5H.js","./BaseTextInput-legacy-Y82OL6tp.js","./FieldMixin.vue_vue_type_script_lang-legacy-96oG0THX.js","./vendor-legacy-BWO4724z.js","./lodash-legacy-C-x9g9Na.js","./apexcharts-legacy-VocNjCI3.js","./chartjs-legacy-C3KPpOPx.js","./barcode-qrcode-reader-legacy-gW3E-u2V.js"],(function(e,t){"use strict";var i,l,s,a,n,o,d,c,h,r,u,f,g,k,y,b,m,p,v,I,C,x,w,_,D,S,K,j,V,L,F;return{setters:[e=>{i=e._,l=e.k},e=>{s=e.Q,a=e.y,n=e.C,o=e._},e=>{d=e.default},e=>{c=e._},e=>{h=e.d,r=e.eE,u=e.eF,f=e.K,g=e.L,k=e.ah,y=e.ai,b=e.d1,m=e.aS,p=e.bs,v=e.y,I=e.e,C=e.f,x=e.l,w=e.E,_=e.m,D=e.z,S=e.F,K=e.P,j=e.A,V=e.J,L=e.k,F=e.p},null,null,null,null],execute:function(){const t=h({name:"HisInfiniteScrollMultipleSelect",mixins:[c],components:{IonCheckbox:p,IonText:m,IonChip:b,ViewPort:a,HisTextInput:d,IonContent:y,IonList:k,IonItem:g,IonLabel:f,HisKeyboard:i,IonInfiniteScroll:u,IonInfiniteScrollContent:r},data:()=>({showKeyboard:!1,keyboard:s,listData:[],checkedItems:[],disableScroll:!1,filter:"",selected:"",page:1,limit:10}),watch:{clear(){this.checkedItems=[],this.filter="",this.selected=""},checkedItems:{handler(e){this.listData.forEach((t=>{e.find((e=>e.value===t.value))?t.isChecked=!0:t.isChecked=!1})),this.$emit("onValue",e)},deep:!0,immediate:!0},filter:{async handler(){this.page=1,this.disableScroll=!1;const e=await this.getListData();[...this.checkedItems].forEach((t=>{const i=e.findIndex((e=>e.value===t.value));-1===i?e.push(t):e[i].isChecked=!0})),this.listData=e}}},mounted(){this.init()},activated(){this.init()},methods:{async init(){this.$emit("onFieldActivated",this),this.listData=await this.getListData()},async getListData(){return await this.options(this.fdata,this.filter,this.page,this.limit)},async keypress(e){this.filter||(this.selected=""),this.filter=l(e,this.selected),this.selected=this.filter},async onKBValue(e){this.listData&&this.selected!==e&&(this.filter=e,this.selected=this.filter)},async pushData(e){this.page++;const t=await this.getListData();t.length>0?this.listData=n([...this.listData,...t.filter((e=>!this.listData.find((t=>t.value===e.value))))],"label"):this.disableScroll=!0,e.target.complete()},onSelect(e){this.$nextTick((async()=>{e.isChecked?-1===this.checkedItems.findIndex((t=>t.value===e.value))&&this.checkedItems.push(e):this.unCheck(e)}))},unCheck(e){this.checkedItems=this.checkedItems.filter((t=>t.value!==e.value))}},created(){var e,t,i,l,a,n,o,d;this.showKeyboard=null!==(e=null===(t=this.config)||void 0===t?void 0:t.showKeyboard)&&void 0!==e&&e,this.keyboard=null!==(i=null===(l=this.config)||void 0===l?void 0:l.keyboard)&&void 0!==i?i:s,this.page=null!==(a=null===(n=this.config)||void 0===n?void 0:n.page)&&void 0!==a?a:1,this.limit=null!==(o=null===(d=this.config)||void 0===d?void 0:d.limit)&&void 0!==o?o:10}});e("default",o(t,[["render",function(e,t,l,s,n,o){const d=v("his-text-input"),c=v("ion-chip"),h=v("ion-text"),r=v("ion-label"),u=v("ion-checkbox"),f=v("ion-item"),g=v("ion-list"),k=v("ion-infinite-scroll-content"),y=v("ion-infinite-scroll"),b=v("ion-content"),m=a,p=i;return C(),I(S,null,[x(m,{showFull:!e.showKeyboard},{default:D((()=>[e.showKeyboard?(C(),w(d,{key:0,value:e.selected,onOnValue:e.onKBValue},null,8,["value","onOnValue"])):_("",!0),(C(!0),I(S,null,K(e.checkedItems,((t,i)=>(C(),w(c,{color:"danger",key:i,onClick:i=>e.unCheck(t)},{default:D((()=>[j(V(t.label),1)])),_:2},1032,["onClick"])))),128)),x(b,{style:{width:"100%"},class:"ion-padding-bottom"},{default:D((()=>[L("div",{class:F(["ion-content-scroll-host",{"ion-margin-bottom ion-padding-bottom":e.disableScroll}])},[x(g,{class:F(["view-port-content",{"ion-margin-bottom":e.disableScroll}])},{default:D((()=>[(C(!0),I(S,null,K(e.listData,((t,i)=>(C(),w(f,{key:i,color:t.isChecked?"lightblue":"",lines:t.isChecked?"none":""},{default:D((()=>[x(r,null,{default:D((()=>{var e;return[x(h,{class:"his-md-text"},{default:D((()=>[j(V(t.label),1)])),_:2},1024),t.description&&t.isChecked?(C(),w(h,{key:0,color:null===(e=t.description)||void 0===e?void 0:e.color},{default:D((()=>[L("p",null,[L("i",null,V(t.description.text),1)])])),_:2},1032,["color"])):_("",!0)]})),_:2},1024),x(u,{slot:"start",modelValue:t.isChecked,"onUpdate:modelValue":e=>t.isChecked=e,onIonChange:i=>e.onSelect(t),disabled:t.disabled},null,8,["modelValue","onUpdate:modelValue","onIonChange","disabled"])])),_:2},1032,["color","lines"])))),128))])),_:1},8,["class"]),x(y,{onIonInfinite:t[0]||(t[0]=t=>e.pushData(t)),threshold:"100px",disabled:e.disableScroll},{default:D((()=>[x(k,{"loading-spinner":"crescent","loading-text":"Loading more data..."})])),_:1},8,["disabled"])],2)])),_:1})])),_:1},8,["showFull"]),e.showKeyboard?(C(),w(p,{key:0,kbConfig:e.keyboard,onKeyPress:e.keypress},null,8,["kbConfig","onKeyPress"])):_("",!0)],64)}]]))}}}));
