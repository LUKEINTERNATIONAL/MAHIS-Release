import{d as Y,ar as te,U as _e,T as ye,as as be,ac as ie,G as J,S as De,a9 as ke,a1 as Ae,a2 as Ve,E as S,e as o,f as s,k as n,l as a,b2 as Ut,r as d,c as ce,a as Xe,m as b,y as M,z as i,u as h,A as N,F as T,W as _t,I as He,e1 as Ia,be as qt,e2 as Oa,cQ as Ea,e3 as La,e4 as Pa,e5 as Ma,e6 as Aa,c$ as xa,e7 as Ba,e8 as $a,az as yt,aD as Ha,bU as Na,aB as Wt,aS as Ra,B as I,L as q,w as Me,ad as Va,ae as Fa,a3 as nt,bv as Ta,bu as Ua,d3 as qa,J as Ye,M as Ke,D as ee,aa as pe,bN as Wa,bx as Pt,X as bt,a0 as Gt,V as Ga,af as za,dr as Ya,dy as Ka,b8 as ja,aU as Ja,R as Xa,i as Qa,e9 as Za,v as en,bo as je,bq as zt,a8 as Yt,bS as tn,bI as an,ab as K,aK as nn,bX as Mt,bw as sn,ea as on,dB as At}from"./vendor-CDoWWVkO.js";import{aE as Fe,H as ue,a8 as Ne,aB as Dt,aC as kt,aV as Kt,u as Ee,_ as Z,i as he,ar as tt,as as ln,D as fe,x as R,S as me,t as Re,z as st,ay as j,aK as Ge,bc as ze,bv as rn,aM as jt,aY as dn,a3 as at,bw as ct,bx as cn,by as un,bz as mn,bA as pn,bB as hn,bC as fn,aW as vn,b0 as gn,ba as Ie,b1 as Oe,aX as xt,B as ve,aZ as Bt,P as Jt,aP as $t,aF as Xt,F as _n,aT as ut,n as Je,y as mt,aw as yn,az as Se,k as bn,l as pt,ao as Dn,aA as kn,aD as gt,p as Sn,m as wn,a1 as $e,bf as Ht,ah as ht,al as ft,aJ as Cn,ak as In}from"./index-D8BILC_J.js";import{B as se}from"./BasicForm-BwZe-qhy.js";import{l as ge}from"./lodash-Dt8AsbQm.js";import{P as Nt}from"./patient_complaints_service-C5VsU55A.js";import{D as it}from"./DashBox-D4xS99SV.js";import{u as On}from"./useExposeFromStandardForm-FW92qusl.js";import{A as En,P as Ln,D as Pn,n as Mn}from"./NextAppointment-Bz9jFB_l.js";import{B as An}from"./BasicCard-yAOF1PS1.js";import{S as xn,a as Bn,P as $n,u as Rt,_ as Hn,b as Nn}from"./lab_order-BG234pDW.js";import Rn from"./LabTestsHistory-CPlA9ZpY.js";import{v as Vt}from"./group_validation-BEARX5Rz.js";import{D as Vn,b as Fn}from"./drug_prescription_service-DhHl6X0m.js";import{D as Ft}from"./drug_service-D3yUaCyg.js";import{_ as vt,D as Tn,A as Un,R as qn,a as Wn}from"./Outcome-Cjl0vzeK.js";const Gn=Y({name:"Menu",components:{IonContent:ke,IonHeader:De,IonItem:J,IonList:ie,IonMenu:be,IonTitle:ye,IonToolbar:_e,List:Fe},computed:{...te(Ee,["patient"]),...te(Kt,["presentingComplaints"])},data(){return{valueNumericArray:[],obsDatetime:[],graphIcon:kt(["#006401"]),listIcon:Dt(["#636363"]),displayGraph:!0,orders:[],height:[],BMI:[],iconBg:{},activeWeight:[],activeHeight:[],activeBMI:[],list:[],series:[{name:"",data:[]}]}},setup(){return{checkmark:Ve,pulseOutline:Ae}},watch:{$router:{async handler(){await this.updateList()},immediate:!0,deep:!0},patient:{async handler(){await this.updateList()},deep:!0}},async mounted(){await this.updateList()},methods:{async updateList(){const e=await Ne.getAll(this.patient.patientID,"Presenting complaint"),t=ge.isEmpty(e)?[]:Promise.all(e.map(async m=>m.value_coded?{name:await Ne.getConceptName(m.value_coded),obs_date:m.obs_datetime,duration:m.children[0].value_text}:[]));this.setListData(await t)},setListData(e){this.list=[],this.list.push({actionBtn:!1,class:"col_background",header:!0,minHeight:"--min-height: 20px;",containSize:4,display:["Date","Presenting Complains","Duration"]}),e.forEach(t=>{this.list.push({actionBtn:!1,minHeight:"--min-height:20px;",class:"col_background",containSize:4,display:[ue.toStandardHisFormat(t.obs_date),t.name,t.duration]})})}}}),zn={class:"modal_wrapper"};function Yn(e,t,m,y,c,_){const l=S("list");return s(),o("div",zn,[n("div",null,[a(l,{listData:e.list},null,8,["listData"])])])}const Kn=Z(Gn,[["render",Yn],["__scopeId","data-v-30434e22"]]),jn={key:0},Jn={style:{"align-content":"center"}},Xn={class:"ion-padding",slot:"content"},Qn=Y({__name:"PresentingComplaints",setup(e,{expose:t}){const m=Kt(),{presentingComplaints:y}=Ut(m),c=d(he),_=d(!1),l=d(!1),f=d(!1),v=d([]),p=d([]),r=d(),u=ce(()=>[{componentType:"multiSelectInputField",header:"Presenting Complaints",name:"PresentingComplaints",trackBy:"concept_id",icon:he.search,hideSelected:!0,validation:P=>x(P==null?void 0:P.name,v.value)?"Presenting complaint already added":tt.required(P),options:p.value,grid:{s:"6"}},{componentType:"inputField",header:"Duration",name:"duration",icon:he.time,validation:P=>tt.isNotEmptyandNumber(P),grid:{s:"6"},unitOptions:[{label:"Hours",value:"Hours"},{label:"Days",value:"Days"},{label:"Months",value:"Months"},{label:"Years",value:"Years"}],unitValidation:P=>!P||P===""?"Please select a unit.":null},{componentType:"inputField",header:"Specify the presenting complaint(s)",name:"Other (specify)",icon:he.editPen,validation:P=>x(P,v.value)?"Presenting complaint already added":tt.required(P),condition:P=>{var A;return((A=P==null?void 0:P.PresentingComplaints)==null?void 0:A.name)==="Other"}},{componentType:"Alert",condition:P=>{var A;return tt.required((A=P==null?void 0:P.PresentingComplaints)==null?void 0:A.name)!=null},backgroundColor:"lightyellow",textColor:"black",value:"Please search thoroughly for the complaint. If it is not listed, search and select the 'Other' option to specify the complaint.",name:"noMatchAlert"}]),{formRef:w}=On(),C=()=>{!l.value&&!f.value&&(_.value=!0)},E=async()=>{p.value=await Nt.getComplaintsList("Presenting complaint"),R(y.value,"PresentingComplaints","multiSelectData",p.value)},k=()=>{_.value=!1,l.value=!0},H=async()=>{var $,z;const P=($=w.value)==null?void 0:$.getFormValues();((z=w.value)==null?void 0:z.validateForm())==null&&W(P)},W=P=>{var X;const A=P.duration+" "+P.duration_unit,$=P.PresentingComplaints,z=$.name==="Other"?P["Other (specify)"]:$.name;v.value.push({actionBtn:!0,btn:["delete"],name:z,concept_id:$.concept_id,duration:$.duration,durationUnits:$.duration_unit,display:[z,A],data:[{concept_id:8578,value_coded:$.concept_id,obs_datetime:me.getSessionDate(),child:[{concept_id:$.concept_id,value_text:A,obs_datetime:me.getSessionDate()}]}]}),(X=w.value)==null||X.resetForm(),f.value=!0},x=(P,A)=>A.some($=>$.name===P),ae=P=>{v.value=v.value.filter(A=>A.display[0]!==P.name)},de=P=>P.map(A=>(A==null?void 0:A.data[0])||(A==null?void 0:A.data)),Q=async()=>{if(v.value.length>0){const P=me.getUserID(),A=new Nt(me.getPatientID(),P);return await A.createEncounter()?await A.saveObservationList(de(v.value))?(st("Patient complaints has been created"),!0):Re("Unable to create patient complaints  !"):Re("Unable to create patient complaints encounter")}return!1};return Xe(async()=>{C(),await E()}),t({onSubmit:Q}),(P,A)=>{const $=S("ion-row"),z=S("ion-label"),X=S("ion-accordion"),xe=S("ion-accordion-group");return s(),o(T,null,[a(it,{status:_.value,content:"No presenting complaints added"},null,8,["status"]),f.value?(s(),o("span",jn,[a(Fe,{listData:v.value,"onClicked:delete":ae},null,8,["listData"])])):b("",!0),l.value?(s(),M($,{key:1},{default:i(()=>[a(ln,{formData:u.value,ref_key:"formRef",ref:w},null,8,["formData"]),n("div",Jn,[a(fe,{fill:"clear",icon:c.value.plus,iconSlot:"icon-only","onClicked:btn":A[0]||(A[0]=Te=>H()),name:"Save"},null,8,["icon"])])]),_:1})):b("",!0),_.value?(s(),M($,{key:2,style:{"margin-top":"10px"}},{default:i(()=>[a(fe,{fill:"clear",icon:c.value.plus,iconSlot:"icon-only","onClicked:btn":A[1]||(A[1]=Te=>k()),name:"Add new presenting complaints"},null,8,["icon"])]),_:1})):b("",!0),a($,null,{default:i(()=>[a(xe,{ref_key:"accordionGroup",ref:r,class:"previousView"},{default:i(()=>[a(X,{value:"first","toggle-icon-slot":"start",style:{"border-radius":"10px","background-color":"#fff"}},{default:i(()=>[a(h(J),{slot:"header",color:"light"},{default:i(()=>[a(z,{class:"previousLabel"},{default:i(()=>A[2]||(A[2]=[N("Previous presenting complaints")])),_:1,__:[2]})]),_:1}),n("div",Xn,[a(Kn)])]),_:1})]),_:1},512)]),_:1})],64)}}}),Zn=Z(Qn,[["__scopeId","data-v-117956bd"]]),es=Y({name:"VisitHistory",components:{IonIcon:He,IonButton:_t},setup(){const e=jt();return{selectedAllergiesList2:ce(()=>e.selectedMedicalAllergiesList),calendarOutline:Ra,alertCircleOutline:Wt,documentTextOutline:Na,femaleOutline:Ha,medicalOutline:yt,warningOutline:$a,bodyOutline:Ba,eyeOutline:xa,nutritionOutline:Aa,fitnessOutline:Ma,pulseOutline:Ae,earOutline:Pa,happyOutline:La,manOutline:Ea,moveOutline:Oa,addOutline:qt,scanOutline:Ia}},data(){return{visits:[],visitDate:null,presentingComplaint:[],pastMedicalHistory:[],levelOfConsciousness:{eyeResponse:null,verbalResponse:null,motorResponse:null},pregnancy:{patientPregnant:null,breastFeeding:null},eyesAbnormal:[],mouthAbnormal:[],earsAbnormal:[],faceAbnormal:[],neckAbnormal:[],chestAbnormal:[],chestMovementAbnormal:[],heartSoundsAbnormal:[],breathSoundsAbnormal:[],addedBreathSoundsAbnormal:[],abdominalInspectionAbnormal:[],eyesExamined:!1,mouthExamined:!1,earsExamined:!1,faceExamined:!1,neckExamined:!1,chestExamined:!1,chestMovementExamined:!1,heartSoundsExamined:!1,breathSoundsExamined:!1,addedBreathSoundsExamined:!1,abdominalInspectionExamined:!1}},computed:{...te(Ee,["patient"]),hasLevelOfConsciousness(){return this.levelOfConsciousness.eyeResponse||this.levelOfConsciousness.verbalResponse||this.levelOfConsciousness.motorResponse},hasPresentingComplaints(){var e;return((e=this.uniquePresentingComplaints)==null?void 0:e.length)>0},hasPregnancyData(){return this.pregnancy.patientPregnant||this.pregnancy.breastFeeding},hasPastMedicalHistory(){var e;return((e=this.uniquePastMedicalHistory)==null?void 0:e.length)>0},hasAllergies(){var e,t;return((t=(e=this.selectedAllergiesList2)==null?void 0:e.filter(m=>m.selected))==null?void 0:t.length)>0},hasPhysicalExam(){var e,t,m,y,c,_,l,f,v,p,r;return((e=this.eyesAbnormal)==null?void 0:e.length)>0||this.eyesExamined||((t=this.mouthAbnormal)==null?void 0:t.length)>0||this.mouthExamined||((m=this.earsAbnormal)==null?void 0:m.length)>0||this.earsExamined||((y=this.faceAbnormal)==null?void 0:y.length)>0||this.faceExamined||((c=this.neckAbnormal)==null?void 0:c.length)>0||this.neckExamined||((_=this.chestAbnormal)==null?void 0:_.length)>0||this.chestExamined||((l=this.chestMovementAbnormal)==null?void 0:l.length)>0||this.chestMovementExamined||((f=this.heartSoundsAbnormal)==null?void 0:f.length)>0||this.heartSoundsExamined||((v=this.breathSoundsAbnormal)==null?void 0:v.length)>0||this.breathSoundsExamined||((p=this.addedBreathSoundsAbnormal)==null?void 0:p.length)>0||this.addedBreathSoundsExamined||((r=this.abdominalInspectionAbnormal)==null?void 0:r.length)>0||this.abdominalInspectionExamined},uniquePastMedicalHistory(){return[...new Map(this.pastMedicalHistory.map(e=>[e,e])).values()]},uniquePresentingComplaints(){return[...new Map(this.presentingComplaint.map(e=>[e,e])).values()]}},methods:{formatVisitDate(e){return e?ue.toStandardHisDisplayFormat(e):"No visit date"},async updateData(){var t,m;if(!((t=this.patient)!=null&&t.patientID))return;const e=await rn(this.patient.patientID);e&&(this.visits=((m=e.visits)==null?void 0:m.visitsDates)||[],this.visits.length>0&&await this.loadSavedEncounters(this.visits[0]))},async loadSavedEncounters(e){this.visitDate=e;const t=Ge("presentingComplaints"),m=Ge("pastMedicalHistory"),y=Ge("levelOfConsciousness"),c=Ge("pregnancy"),_=Ge("physicalExam"),l=ze(t),f=ze(m),v=ze(y),p=ze(c),r=ze(_);await this.setPresentingComplainsEncounters(l),await this.setPastMedicalHistoryEncounters(f),await this.setLevelOfConsciousnessEncounters(v),await this.setPregnancyStatusEncounters(p),await this.setPhysicalExamEncounters(r)},filterObs(e,t){return e?e.filter(m=>{var y,c;return((c=(y=m.concept)==null?void 0:y.concept_names)==null?void 0:c.some(_=>_.name===t))||m.concept_name===t}):[]},async getConceptValues(e,t){return e?await Promise.all(e.map(async m=>m.value_coded?await j.getConceptName(m.value_coded):m.concept_name||m.name)):[]},async setPresentingComplainsEncounters(e){this.presentingComplaint=await this.getConceptValues(this.filterObs(e,"Presenting complaint"),"coded")},async setLevelOfConsciousnessEncounters(e){if(e&&Array.isArray(e)){const t=this.filterObs(e,"Eye opening response");this.levelOfConsciousness.eyeResponse=t.length>0?await j.getConceptName(t[0].value_coded):null;const m=this.filterObs(e,"Best verbal response");this.levelOfConsciousness.verbalResponse=m.length>0?await j.getConceptName(m[0].value_coded):null;const y=this.filterObs(e,"Best motor response");this.levelOfConsciousness.motorResponse=y.length>0?await j.getConceptName(y[0].value_coded):null}},async setPregnancyStatusEncounters(e){if(e&&Array.isArray(e)){const t=this.filterObs(e,"Patient pregnant");this.pregnancy.patientPregnant=t.length>0?await j.getConceptName(t[0].value_coded):null;const m=this.filterObs(e,"Is patient breast feeding?");this.pregnancy.breastFeeding=m.length>0?await j.getConceptName(m[0].value_coded):null}},async setPhysicalExamEncounters(e){var t,m,y,c,_,l,f,v;if(!(!e||!Array.isArray(e))){this.eyesAbnormal=[],this.mouthAbnormal=[],this.earsAbnormal=[],this.faceAbnormal=[],this.neckAbnormal=[],this.chestAbnormal=[],this.chestMovementAbnormal=[],this.heartSoundsAbnormal=[],this.breathSoundsAbnormal=[],this.addedBreathSoundsAbnormal=[],this.abdominalInspectionAbnormal=[],this.eyesExamined=!1,this.mouthExamined=!1,this.earsExamined=!1,this.faceExamined=!1,this.neckExamined=!1,this.chestExamined=!1,this.chestMovementExamined=!1,this.heartSoundsExamined=!1,this.breathSoundsExamined=!1,this.addedBreathSoundsExamined=!1,this.abdominalInspectionExamined=!1;for(const p of e){if(!p.concept_name&&!((t=p.concept)!=null&&t.concept_names))continue;const r=p.concept_name||((c=(y=(m=p.concept)==null?void 0:m.concept_names)==null?void 0:y.find(u=>u.concept_name_type==="FULLY_SPECIFIED"))==null?void 0:c.name);r&&(r.includes("normal")||r.includes("Normal"))&&p.value_coded===1065&&(r.includes("Eyes normal")?this.eyesExamined=!0:r.includes("Mouth normal")?this.mouthExamined=!0:r.includes("Ears normal")?this.earsExamined=!0:r.includes("Face normal")?this.faceExamined=!0:r.includes("Neck normal")?this.neckExamined=!0:r.includes("Chest inspection normal")?this.chestExamined=!0:r.includes("Heart sounds normal")?this.heartSoundsExamined=!0:r.includes("Breath sounds normal")?this.breathSoundsExamined=!0:r.includes("Abdominal inspection normal")&&(this.abdominalInspectionExamined=!0))}for(const p of e){if(!p.concept_name&&!((_=p.concept)!=null&&_.concept_names))continue;const r=p.concept_name||((v=(f=(l=p.concept)==null?void 0:l.concept_names)==null?void 0:f.find(u=>u.concept_name_type==="FULLY_SPECIFIED"))==null?void 0:v.name);if(r&&!(r.includes("normal")||r.includes("Normal"))){if(r.includes("Abnormality for eyes"))if(this.eyesExamined=!0,p.value_coded){const u=await j.getConceptName(p.value_coded);u&&u.toLowerCase()!=="no"&&u.toLowerCase()!=="normal"&&this.eyesAbnormal.push(u)}else p.value_text&&this.eyesAbnormal.push(p.value_text);else if(r.includes("Abnormality for mouth"))if(this.mouthExamined=!0,p.value_coded){const u=await j.getConceptName(p.value_coded);u&&u.toLowerCase()!=="no"&&u.toLowerCase()!=="normal"&&this.mouthAbnormal.push(u)}else p.value_text&&this.mouthAbnormal.push(p.value_text);else if(r.includes("Abnormality for ears"))if(this.earsExamined=!0,p.value_coded){const u=await j.getConceptName(p.value_coded);u&&u.toLowerCase()!=="no"&&u.toLowerCase()!=="normal"&&this.earsAbnormal.push(u)}else p.value_text&&this.earsAbnormal.push(p.value_text);else if(r.includes("Abnormality for face"))if(this.faceExamined=!0,p.value_coded){const u=await j.getConceptName(p.value_coded);u&&u.toLowerCase()!=="no"&&u.toLowerCase()!=="normal"&&this.faceAbnormal.push(u)}else p.value_text&&this.faceAbnormal.push(p.value_text);else if(r.includes("Abnormality for neck"))if(this.neckExamined=!0,p.value_coded){const u=await j.getConceptName(p.value_coded);u&&u.toLowerCase()!=="no"&&u.toLowerCase()!=="normal"&&this.neckAbnormal.push(u)}else p.value_text&&this.neckAbnormal.push(p.value_text);else if(r.includes("Abnormality for chest inspection"))if(this.chestExamined=!0,p.value_coded){const u=await j.getConceptName(p.value_coded);u&&u.toLowerCase()!=="no"&&u.toLowerCase()!=="normal"&&this.chestAbnormal.push(u)}else p.value_text&&this.chestAbnormal.push(p.value_text);else if(r.includes("Chest movements"))if(this.chestMovementExamined=!0,p.value_coded){const u=await j.getConceptName(p.value_coded);u&&u.toLowerCase()!=="no"&&u.toLowerCase()!=="normal"&&this.chestMovementAbnormal.push(u)}else p.value_text&&this.chestMovementAbnormal.push(p.value_text);else if(r.includes("Heart sounds abnormality"))if(this.heartSoundsExamined=!0,p.value_coded){const u=await j.getConceptName(p.value_coded);u&&u.toLowerCase()!=="no"&&u.toLowerCase()!=="normal"&&this.heartSoundsAbnormal.push(u)}else p.value_text&&this.heartSoundsAbnormal.push(p.value_text);else if(r.includes("Breath sounds abnormality"))if(this.breathSoundsExamined=!0,p.value_coded){const u=await j.getConceptName(p.value_coded);u&&u.toLowerCase()!=="no"&&u.toLowerCase()!=="normal"&&this.breathSoundsAbnormal.push(u)}else p.value_text&&this.breathSoundsAbnormal.push(p.value_text);else if(r.includes("Abnormalities when added"))if(this.addedBreathSoundsExamined=!0,p.value_coded){const u=await j.getConceptName(p.value_coded);u&&u.toLowerCase()!=="no"&&u.toLowerCase()!=="normal"&&this.addedBreathSoundsAbnormal.push(u)}else p.value_text&&this.addedBreathSoundsAbnormal.push(p.value_text);else if(r.includes("Abdominal inspection abnormality"))if(this.abdominalInspectionExamined=!0,p.value_coded){const u=await j.getConceptName(p.value_coded);u&&u.toLowerCase()!=="no"&&u.toLowerCase()!=="normal"&&this.abdominalInspectionAbnormal.push(u)}else p.value_text&&this.abdominalInspectionAbnormal.push(p.value_text)}}}},async setPastMedicalHistoryEncounters(e){this.pastMedicalHistory=await this.getConceptValues(this.filterObs(e,"Chronic disease"),"coded")}},watch:{patient:{async handler(){await this.updateData()},deep:!0}},async mounted(){await this.updateData()}}),ts={class:"visit-container"},as={class:"visit-header"},ns={class:"visit-date"},ss={class:"visit-sections"},is={key:0,class:"visit-section"},os={class:"section-header"},ls={class:"section-content"},rs={key:0,class:"info-item"},ds={class:"info-value"},cs={key:1,class:"info-item"},us={class:"info-value"},ms={key:2,class:"info-item"},ps={class:"info-value"},hs={key:1,class:"empty-section"},fs={key:2,class:"visit-section"},vs={class:"section-header"},gs={class:"tags-container"},_s={key:3,class:"empty-section"},ys={key:4,class:"visit-section"},bs={class:"section-header"},Ds={class:"section-content"},ks={key:0,class:"info-item"},Ss={class:"info-value highlight"},ws={key:1,class:"info-item"},Cs={class:"info-value highlight"},Is={key:5,class:"empty-section"},Os={key:6,class:"visit-section"},Es={class:"section-header"},Ls={class:"tags-container"},Ps={key:7,class:"empty-section"},Ms={key:8,class:"visit-section"},As={class:"section-header"},xs={class:"tags-container"},Bs={key:9,class:"empty-section"},$s={key:10,class:"visit-section"},Hs={class:"section-header"},Ns={class:"exam-section"},Rs={key:0,class:"exam-category"},Vs={class:"exam-category-header"},Fs={class:"exam-items"},Ts={key:1,class:"exam-category normal"},Us={class:"exam-category-header"},qs={key:2,class:"exam-category"},Ws={class:"exam-category-header"},Gs={class:"exam-items"},zs={key:3,class:"exam-category normal"},Ys={class:"exam-category-header"},Ks={key:4,class:"exam-category"},js={class:"exam-category-header"},Js={class:"exam-items"},Xs={key:5,class:"exam-category normal"},Qs={class:"exam-category-header"},Zs={key:6,class:"exam-category"},ei={class:"exam-category-header"},ti={class:"exam-items"},ai={key:7,class:"exam-category normal"},ni={class:"exam-category-header"},si={key:8,class:"exam-category"},ii={class:"exam-category-header"},oi={class:"exam-items"},li={key:9,class:"exam-category normal"},ri={class:"exam-category-header"},di={key:10,class:"exam-category"},ci={class:"exam-category-header"},ui={class:"exam-items"},mi={key:11,class:"exam-category normal"},pi={class:"exam-category-header"},hi={key:12,class:"exam-category"},fi={class:"exam-category-header"},vi={class:"exam-items"},gi={key:13,class:"exam-category normal"},_i={class:"exam-category-header"},yi={key:14,class:"exam-category"},bi={class:"exam-category-header"},Di={class:"exam-items"},ki={key:15,class:"exam-category normal"},Si={class:"exam-category-header"},wi={key:16,class:"exam-category"},Ci={class:"exam-items"},Ii={key:17,class:"exam-category normal"},Oi={key:18,class:"exam-category"},Ei={class:"exam-category-header"},Li={class:"exam-items"},Pi={key:19,class:"exam-category normal"},Mi={class:"exam-category-header"},Ai={key:20,class:"exam-category"},xi={class:"exam-category-header"},Bi={class:"exam-items"},$i={key:21,class:"exam-category normal"},Hi={class:"exam-category-header"},Ni={key:11,class:"empty-section"};function Ri(e,t,m,y,c,_){const l=S("ion-icon");return s(),o("div",ts,[n("div",as,[t[0]||(t[0]=n("h5",null,"Patient's Clinical Assessment Summary",-1)),n("div",ns,[a(l,{icon:e.calendarOutline},null,8,["icon"]),n("span",null,I(e.formatVisitDate(e.visitDate)),1)])]),n("div",ss,[e.hasLevelOfConsciousness?(s(),o("div",is,[n("div",os,[a(l,{icon:e.alertCircleOutline,class:"section-icon"},null,8,["icon"]),t[1]||(t[1]=n("h3",null,"Level of Consciousness",-1))]),n("div",ls,[e.levelOfConsciousness.eyeResponse?(s(),o("div",rs,[t[2]||(t[2]=n("span",{class:"info-label"},"Eye Response:",-1)),n("span",ds,I(e.levelOfConsciousness.eyeResponse),1)])):b("",!0),e.levelOfConsciousness.verbalResponse?(s(),o("div",cs,[t[3]||(t[3]=n("span",{class:"info-label"},"Verbal Response:",-1)),n("span",us,I(e.levelOfConsciousness.verbalResponse),1)])):b("",!0),e.levelOfConsciousness.motorResponse?(s(),o("div",ms,[t[4]||(t[4]=n("span",{class:"info-label"},"Motor Response:",-1)),n("span",ps,I(e.levelOfConsciousness.motorResponse),1)])):b("",!0)])])):(s(),o("div",hs,[a(l,{icon:e.alertCircleOutline},null,8,["icon"]),t[5]||(t[5]=n("p",null,"No level of consciousness recorded",-1))])),e.hasPresentingComplaints?(s(),o("div",fs,[n("div",vs,[a(l,{icon:e.documentTextOutline,class:"section-icon"},null,8,["icon"]),t[6]||(t[6]=n("h3",null,"Presenting Complaints",-1))]),n("div",gs,[(s(!0),o(T,null,q(e.uniquePresentingComplaints,(f,v)=>(s(),o("div",{class:"complaint-tag",key:v},I(f),1))),128))])])):(s(),o("div",_s,[a(l,{icon:e.documentTextOutline},null,8,["icon"]),t[7]||(t[7]=n("p",null,"No presenting complaints recorded",-1))])),e.hasPregnancyData?(s(),o("div",ys,[n("div",bs,[a(l,{icon:e.femaleOutline,class:"section-icon"},null,8,["icon"]),t[8]||(t[8]=n("h3",null,"Pregnancy Status",-1))]),n("div",Ds,[e.pregnancy.patientPregnant?(s(),o("div",ks,[t[9]||(t[9]=n("span",{class:"info-label"},"Pregnant:",-1)),n("span",Ss,I(e.pregnancy.patientPregnant),1)])):b("",!0),e.pregnancy.breastFeeding?(s(),o("div",ws,[t[10]||(t[10]=n("span",{class:"info-label"},"Breastfeeding:",-1)),n("span",Cs,I(e.pregnancy.breastFeeding),1)])):b("",!0)])])):(s(),o("div",Is,[a(l,{icon:e.femaleOutline},null,8,["icon"]),t[11]||(t[11]=n("p",null,"No pregnancy status recorded",-1))])),e.hasPastMedicalHistory?(s(),o("div",Os,[n("div",Es,[a(l,{icon:e.medicalOutline,class:"section-icon"},null,8,["icon"]),t[12]||(t[12]=n("h3",null,"Medical History",-1))]),n("div",Ls,[(s(!0),o(T,null,q(e.uniquePastMedicalHistory,(f,v)=>(s(),o("div",{class:"medical-tag",key:v},I(f),1))),128))])])):(s(),o("div",Ps,[a(l,{icon:e.medicalOutline},null,8,["icon"]),t[13]||(t[13]=n("p",null,"No medical history recorded",-1))])),e.hasAllergies?(s(),o("div",Ms,[n("div",As,[a(l,{icon:e.warningOutline,class:"section-icon"},null,8,["icon"]),t[14]||(t[14]=n("h3",null,"Allergies",-1))]),n("div",xs,[e.item.selected?(s(!0),o(T,{key:0},q(e.selectedAllergiesList2,(f,v)=>(s(),o("div",{class:"allergy-tag",key:v},I(f.name),1))),128)):b("",!0)])])):(s(),o("div",Bs,[a(l,{icon:e.warningOutline},null,8,["icon"]),t[15]||(t[15]=n("p",null,"No allergies recorded",-1))])),e.hasPhysicalExam?(s(),o("div",$s,[n("div",Hs,[a(l,{icon:e.bodyOutline,class:"section-icon"},null,8,["icon"]),t[16]||(t[16]=n("h3",null,"Physical Examination",-1))]),n("div",Ns,[e.eyesAbnormal.length?(s(),o("div",Rs,[n("div",Vs,[a(l,{icon:e.eyeOutline},null,8,["icon"]),t[17]||(t[17]=n("h4",null,"Eyes",-1))]),n("div",Fs,[(s(!0),o(T,null,q(e.eyesAbnormal,(f,v)=>(s(),o("div",{class:"exam-item",key:"eyes-"+v},I(f),1))),128))])])):e.eyesExamined?(s(),o("div",Ts,[n("div",Us,[a(l,{icon:e.eyeOutline},null,8,["icon"]),t[18]||(t[18]=n("h4",null,"Eyes",-1))]),t[19]||(t[19]=n("div",{class:"exam-items"},[n("div",{class:"exam-item normal"}," Normal examination ")],-1))])):b("",!0),e.mouthAbnormal.length?(s(),o("div",qs,[n("div",Ws,[a(l,{icon:e.nutritionOutline},null,8,["icon"]),t[20]||(t[20]=n("h4",null,"Mouth",-1))]),n("div",Gs,[(s(!0),o(T,null,q(e.mouthAbnormal,(f,v)=>(s(),o("div",{class:"exam-item",key:"mouth-"+v},I(f),1))),128))])])):e.mouthExamined?(s(),o("div",zs,[n("div",Ys,[a(l,{icon:e.nutritionOutline},null,8,["icon"]),t[21]||(t[21]=n("h4",null,"Mouth",-1))]),t[22]||(t[22]=n("div",{class:"exam-items"},[n("div",{class:"exam-item normal"}," Normal examination ")],-1))])):b("",!0),e.earsAbnormal.length?(s(),o("div",Ks,[n("div",js,[a(l,{icon:e.earOutline},null,8,["icon"]),t[23]||(t[23]=n("h4",null,"Ears",-1))]),n("div",Js,[(s(!0),o(T,null,q(e.earsAbnormal,(f,v)=>(s(),o("div",{class:"exam-item",key:"ears-"+v},I(f),1))),128))])])):e.earsExamined?(s(),o("div",Xs,[n("div",Qs,[a(l,{icon:e.earOutline},null,8,["icon"]),t[24]||(t[24]=n("h4",null,"Ears",-1))]),t[25]||(t[25]=n("div",{class:"exam-items"},[n("div",{class:"exam-item normal"}," Normal examination ")],-1))])):b("",!0),e.faceAbnormal.length?(s(),o("div",Zs,[n("div",ei,[a(l,{icon:e.happyOutline},null,8,["icon"]),t[26]||(t[26]=n("h4",null,"Face",-1))]),n("div",ti,[(s(!0),o(T,null,q(e.faceAbnormal,(f,v)=>(s(),o("div",{class:"exam-item",key:"face-"+v},I(f),1))),128))])])):e.faceExamined?(s(),o("div",ai,[n("div",ni,[a(l,{icon:e.happyOutline},null,8,["icon"]),t[27]||(t[27]=n("h4",null,"Face",-1))]),t[28]||(t[28]=n("div",{class:"exam-items"},[n("div",{class:"exam-item normal"}," Normal examination ")],-1))])):b("",!0),e.neckAbnormal.length?(s(),o("div",si,[n("div",ii,[a(l,{icon:e.manOutline},null,8,["icon"]),t[29]||(t[29]=n("h4",null,"Neck",-1))]),n("div",oi,[(s(!0),o(T,null,q(e.neckAbnormal,(f,v)=>(s(),o("div",{class:"exam-item",key:"neck-"+v},I(f),1))),128))])])):e.neckExamined?(s(),o("div",li,[n("div",ri,[a(l,{icon:e.manOutline},null,8,["icon"]),t[30]||(t[30]=n("h4",null,"Neck",-1))]),t[31]||(t[31]=n("div",{class:"exam-items"},[n("div",{class:"exam-item normal"}," Normal examination ")],-1))])):b("",!0),e.chestAbnormal.length?(s(),o("div",di,[n("div",ci,[a(l,{icon:e.fitnessOutline},null,8,["icon"]),t[32]||(t[32]=n("h4",null,"Chest",-1))]),n("div",ui,[(s(!0),o(T,null,q(e.chestAbnormal,(f,v)=>(s(),o("div",{class:"exam-item",key:"chest-"+v},I(f),1))),128))])])):e.chestExamined?(s(),o("div",mi,[n("div",pi,[a(l,{icon:e.fitnessOutline},null,8,["icon"]),t[33]||(t[33]=n("h4",null,"Chest",-1))]),t[34]||(t[34]=n("div",{class:"exam-items"},[n("div",{class:"exam-item normal"}," Normal examination ")],-1))])):b("",!0),e.chestMovementAbnormal.length?(s(),o("div",hi,[n("div",fi,[a(l,{icon:e.moveOutline},null,8,["icon"]),t[35]||(t[35]=n("h4",null,"Chest Movement",-1))]),n("div",vi,[(s(!0),o(T,null,q(e.chestMovementAbnormal,(f,v)=>(s(),o("div",{class:"exam-item",key:"chest-move-"+v},I(f),1))),128))])])):e.chestMovementExamined?(s(),o("div",gi,[n("div",_i,[a(l,{icon:e.moveOutline},null,8,["icon"]),t[36]||(t[36]=n("h4",null,"Chest Movement",-1))]),t[37]||(t[37]=n("div",{class:"exam-items"},[n("div",{class:"exam-item normal"}," Normal movement ")],-1))])):b("",!0),e.heartSoundsAbnormal.length?(s(),o("div",yi,[n("div",bi,[a(l,{icon:e.pulseOutline},null,8,["icon"]),t[38]||(t[38]=n("h4",null,"Heart Sounds",-1))]),n("div",Di,[(s(!0),o(T,null,q(e.heartSoundsAbnormal,(f,v)=>(s(),o("div",{class:"exam-item",key:"heart-"+v},I(f),1))),128))])])):e.heartSoundsExamined?(s(),o("div",ki,[n("div",Si,[a(l,{icon:e.pulseOutline},null,8,["icon"]),t[39]||(t[39]=n("h4",null,"Heart Sounds",-1))]),t[40]||(t[40]=n("div",{class:"exam-items"},[n("div",{class:"exam-item normal"}," Normal heart sounds ")],-1))])):b("",!0),e.breathSoundsAbnormal.length?(s(),o("div",wi,[t[41]||(t[41]=n("div",{class:"exam-category-header"},[n("h4",null,"Breath Sounds")],-1)),n("div",Ci,[(s(!0),o(T,null,q(e.breathSoundsAbnormal,(f,v)=>(s(),o("div",{class:"exam-item",key:"breath-"+v},I(f),1))),128))])])):e.breathSoundsExamined?(s(),o("div",Ii,t[42]||(t[42]=[n("div",{class:"exam-category-header"},[n("h4",null,"Breath Sounds")],-1),n("div",{class:"exam-items"},[n("div",{class:"exam-item normal"}," Normal breath sounds ")],-1)]))):b("",!0),e.addedBreathSoundsAbnormal.length?(s(),o("div",Oi,[n("div",Ei,[a(l,{icon:e.addOutline},null,8,["icon"]),t[43]||(t[43]=n("h4",null,"Added Breath Sounds",-1))]),n("div",Li,[(s(!0),o(T,null,q(e.addedBreathSoundsAbnormal,(f,v)=>(s(),o("div",{class:"exam-item",key:"added-breath-"+v},I(f),1))),128))])])):e.addedBreathSoundsExamined?(s(),o("div",Pi,[n("div",Mi,[a(l,{icon:e.addOutline},null,8,["icon"]),t[44]||(t[44]=n("h4",null,"Added Breath Sounds",-1))]),t[45]||(t[45]=n("div",{class:"exam-items"},[n("div",{class:"exam-item normal"}," No abnormal added sounds ")],-1))])):b("",!0),e.abdominalInspectionAbnormal.length?(s(),o("div",Ai,[n("div",xi,[a(l,{icon:e.scanOutline},null,8,["icon"]),t[46]||(t[46]=n("h4",null,"Abdominal Inspection",-1))]),n("div",Bi,[(s(!0),o(T,null,q(e.abdominalInspectionAbnormal,(f,v)=>(s(),o("div",{class:"exam-item",key:"abdomen-"+v},I(f),1))),128))])])):e.abdominalInspectionExamined?(s(),o("div",$i,[n("div",Hi,[a(l,{icon:e.scanOutline},null,8,["icon"]),t[47]||(t[47]=n("h4",null,"Abdominal Inspection",-1))]),t[48]||(t[48]=n("div",{class:"exam-items"},[n("div",{class:"exam-item normal"}," Normal abdominal inspection ")],-1))])):b("",!0)])])):(s(),o("div",Ni,[a(l,{icon:e.bodyOutline},null,8,["icon"]),t[49]||(t[49]=n("p",null,"No physical exam recorded",-1))]))])])}const Vi=Z(es,[["render",Ri],["__scopeId","data-v-8f0a8a33"]]),Fi=Y({name:"LevelOfConsciousness",components:{IonContent:ke,IonHeader:De,IonItem:J,IonList:ie,IonMenu:be,IonTitle:ye,IonToolbar:_e,BasicForm:se},props:{isActive:Boolean},emits:["closeAccordion"],setup(e,{emit:t}){var u;const{adult:m,minor:y}=dn(),{patient:c}=Ee(),_=d(""),l=d(ue.getAgeInYears((u=c==null?void 0:c.personInformation)==null?void 0:u.birthdate)),f=d(!1),v=(w,C)=>{var P,A,$;const E=at(w,ct.EYE_OPENING_RESPONSE),k=at(w,ct.BEST_MOTOR_RESPONSE),H=at(w,ct.BEST_VERBAL_RESPONSE),W=(P=(C?hn:fn)[E])!=null?P:0,x=(A=(C?cn:un)[k])!=null?A:0,ae=($=(C?mn:pn)[H])!=null?$:0,de=W+x+ae;_.value="(M ".concat(x," V ").concat(ae," E ").concat(W,") ").concat(de,"/").concat(C?5:15);const Q=E&&k&&H;Q&&!f.value?(f.value=!0,e.isActive&&setTimeout(()=>t("closeAccordion"),1e3)):Q||(f.value=!1)},p=w=>v(w,!1),r=w=>v(w,!0);return Me(m,w=>v(w,!1),{deep:!0}),Me(y,w=>v(w,!0),{deep:!0}),{gcs:_,patientAge:l,adult:m,minor:y,handleAdultUpdate:p,handleMinorUpdate:r}}}),Ti={class:"modal_wrapper"};function Ui(e,t,m,y,c,_){const l=S("basic-form");return s(),o("div",Ti,[e.patientAge<18?(s(),M(l,{key:0,contentData:e.minor,"onUpdate:modelValue":e.handleMinorUpdate},null,8,["contentData","onUpdate:modelValue"])):(s(),M(l,{key:1,contentData:e.adult,"onUpdate:modelValue":e.handleAdultUpdate},null,8,["contentData","onUpdate:modelValue"])),n("h5",null,I(e.gcs),1)])}const qi=Z(Fi,[["render",Ui],["__scopeId","data-v-7182bbbd"]]),Wi=Y({name:"Menu",components:{IonContent:ke,IonHeader:De,IonItem:J,IonList:ie,IonMenu:be,IonTitle:ye,IonToolbar:_e,BasicForm:se},data(){return{}},computed:{...te(vn,["pregnancy"])},methods:{handleInputData(){}}}),Gi={class:"modal_wrapper"};function zi(e,t,m,y,c,_){const l=S("basic-form");return s(),o("div",Gi,[a(l,{contentData:e.pregnancy,"onUpdate:inputValue":e.handleInputData},null,8,["contentData","onUpdate:inputValue"])])}const Yi=Z(Wi,[["render",zi]]),Ki=Y({name:"Menu",components:{IonContent:ke,IonHeader:De,IonItem:J,IonList:ie,IonMenu:be,IonTitle:ye,IonToolbar:_e,BasicForm:se},data(){return{initialData:[]}},computed:{...te(xt,["pastMedicalHistory"])},mounted(){const e=xt();this.initialData=e.getInitial(),this.handleChronicConditions()},watch:{pastMedicalHistory:{handler(){this.handleChronicConditions()},deep:!0}},methods:{handleChronicConditions(){var t;const e=["TB","Chronic Obstructive Pulmonary Disease (COPD)","Asthma","Epilepsy","Previous stroke","Peptic Ulcer Disease (PUD)","Mental disorder","Bleeding disorders","Hypertension","HIV Positive","Diabetes Mellitus"];(t=gn(this.pastMedicalHistory,"None"))!=null&&t.checked?e.forEach(m=>{Ie(this.pastMedicalHistory,"TB treatment","displayNone",!0),R(this.pastMedicalHistory,"TB drugs","displayNone",!0),R(this.pastMedicalHistory,"TB drug start date","displayNone",!0),Ie(this.pastMedicalHistory,"Hypertension medication","displayNone",!0),R(this.pastMedicalHistory,"Current hypertension treatment regimen","displayNone",!0),Ie(this.pastMedicalHistory,"HIV status","displayNone",!0),R(this.pastMedicalHistory,"ARV start date","displayNone",!0),Ie(this.pastMedicalHistory,"Diabetes","displayNone",!0),Ie(this.pastMedicalHistory,"Controlled by","displayNone",!0),Oe(this.pastMedicalHistory,m,"checked",!1),Oe(this.pastMedicalHistory,m,"disabled",!0)}):e.forEach(m=>{Oe(this.pastMedicalHistory,m,"disabled",!1)})},handleInputData(e){R(this.pastMedicalHistory,"TB drugs","popOverData",{filterData:!0,data:[{name:"Auramine ‘O’ (C.I. 41000) 50g"},{name:"Bedaquilline 100mg"},{name:"Clofazimine 100mg"},{name:"Clofazimine 50mg"},{name:"Cycloserine 125mg"},{name:"Cycloserine 250mg"},{name:"Delamanid 50mg"},{name:"Ethambutol 100mg"},{name:"Ethambutol 400mg"},{name:"Ethionamide 250mg"},{name:"Isoniazid 100mg "},{name:"Isoniazid 300mg"},{name:"Isoniazid / Rifapentine 300mg / 300mg"},{name:"Levofloxacin 100mg"},{name:"Levofloxacin 250mg"},{name:"Linezolid 600mg"},{name:"Moxifloxacin 400mg"},{name:"Pyrazinamide 400mg"},{name:"Rifabutin 150mg Capsules"},{name:"Rifampicin 150mg/isoniazid 75mg"},{name:"Rifampicin 75mg+INH 50mg dispersible"},{name:"Rifampicin 75mg+INH 50mg+Pyrazinamide 150mg dispersible"},{name:"Rifampicin150mg/Isoniazid75mg/Pyrazinamide 400mg/Ethambutol"}]}),R(this.pastMedicalHistory,"Current hypertension treatment regimen","popOverData",{filterData:!0,data:[{name:"Captopril 12.5mg"},{name:"Aspirin 75mg"},{name:"Hydrochlorothiazide 25mg"},{name:"Enalapril Meleate 5mg"},{name:"Enalapril Maleate 10mg"}]})}}}),ji={class:"modal_wrapper"},Ji={class:"uniform_columns"};function Xi(e,t,m,y,c,_){const l=S("basic-form");return s(),o("div",ji,[n("div",Ji,[a(l,{contentData:e.pastMedicalHistory,initialData:e.initialData,"onUpdate:inputValue":e.handleInputData,"onUpdate:selected":e.handleInputData},null,8,["contentData","initialData","onUpdate:inputValue","onUpdate:selected"])])])}const Qi=Z(Ki,[["render",Xi],["__scopeId","data-v-2b756eeb"]]),Zi=Y({name:"immidiatePostnatalChecksForChild",components:{BasicCard:An,IonContent:ke,IonHeader:De,IonItem:J,IonList:ie,IonMenu:be,IonTitle:ye,IonToolbar:_e,IonToggle:qa,IonSelect:Ua,IonSelectOption:Ta,IonInput:nt,BasicInputField:ve,BasicForm:se,IonRadio:Fa,IonRadioGroup:Va},data(){return{initialData:[],iconsContent:he,vValidations:"",hasValidationErrors:[],inputField:""}},computed:{...te(Bt,["physicalExam"]),...te(Ee,["patient"])},mounted(){const e=Bt();this.initialData=e.getInitial(),this.handlePhysicalExam(),this.handleGenitalExam()},watch:{physicalExam:{handler(){this.handlePhysicalExam(),this.handleGenitalExam()},deep:!0}},setup(){return{checkmark:Ve,pulseOutline:Ae}},methods:{handlePhysicalExam(){at(this.physicalExam,"Physical examination")=="No"?Ie(this.physicalExam,"Reason why physical examination not done","displayNone",!1):(Ie(this.physicalExam,"Reason why physical examination not done","displayNone",!0),Ie(this.physicalExam,"Reason why physical examination not done","selectedValue",""))},handleGenitalExam(){var t,m;const e=(m=(t=this.patient)==null?void 0:t.personInformation)==null?void 0:m.gender;e=="M"&&(Oe(this.physicalExam,"Vulva examination","disabled",!0),Oe(this.physicalExam,"Visible bleeding","disabled",!0)),e=="F"&&(Oe(this.physicalExam,"Urethral meatus abnormal","disabled",!0),Oe(this.physicalExam,"Scrotal swelling","disabled",!0),Oe(this.physicalExam,"Tastes swelling","disabled",!0))}}}),eo={class:"container"};function to(e,t,m,y,c,_){const l=S("basic-form"),f=S("ion-card-content"),v=S("ion-card");return s(),o("div",eo,[a(v,{class:"section"},{default:i(()=>[a(f,null,{default:i(()=>[a(l,{contentData:e.physicalExam,initialData:e.initialData},null,8,["contentData","initialData"])]),_:1})]),_:1})])}const ao=Z(Zi,[["render",to],["__scopeId","data-v-c1d7fdd5"]]),no=Y({name:"Menu",components:{IonRow:pe,IonItem:J,IonLabel:ee,IonAccordionGroup:Ke,IonAccordion:Ye,IonButton:_t,VisitHistory:Vi},setup(){const e=d("loc"),t=new Jt,m=Ee(),y=d(0),c=()=>{y.value++},_=[{id:"loc",label:"Level of consciousness",component:qi},{id:"pc",label:"Presenting complaints",component:Zn},{id:"pbs",label:"Pregnancy and breastfeeding status",component:Yi,condition:()=>t.isChildBearing()},{id:"pmh",label:"Past medical history",component:Qi},{id:"al",label:"Allergies",component:En},{id:"pe",label:"Physical examination",component:ao}],l=ce(()=>{const r=m.patient;if(!r)return!1;const w=new Date().toISOString().split("T")[0];return["levelOfConsciousness","presentingComplaints","pastMedicalHistory","physicalExam","allergies","pregnancy"].some(E=>{var H,W;return[...((H=r[E])==null?void 0:H.saved)||[],...((W=r[E])==null?void 0:W.unsaved)||[]].some(x=>x.obs_datetime?new Date(x.obs_datetime).toISOString().split("T")[0]===w:!1)})}),f=ce(()=>_.filter(r=>r.condition?r.condition():!0)),v=r=>{r>=0&&r<f.value.length&&(e.value=f.value[r].id)};return{activeAccordion:e,visibleSections:f,hasClinicalDataToday:l,refreshKey:y,openAccordion:v,handleNext:r=>{const u=r+1;u<f.value.length?v(u):(e.value="",c())},refreshComponent:c}}}),so={key:0},io={class:"ion-padding",slot:"content"},oo={class:"nav-buttons"};function lo(e,t,m,y,c,_){const l=S("VisitHistory"),f=S("ion-label"),v=S("ion-item"),p=S("ion-button"),r=S("ion-accordion"),u=S("ion-accordion-group"),w=S("ion-row");return e.hasClinicalDataToday?(s(),o("div",so,[(s(),M(l,{key:e.refreshKey}))])):(s(),M(w,{key:1,style:{width:"100%"}},{default:i(()=>[a(u,{value:e.activeAccordion,"onUpdate:value":t[0]||(t[0]=C=>e.activeAccordion=C),multiple:!1,ref:"accordionGroup",class:"previousView"},{default:i(()=>[(s(!0),o(T,null,q(e.visibleSections,(C,E)=>(s(),M(r,{key:C.id,value:C.id,class:"custom_card"},{default:i(()=>[a(v,{slot:"header",color:"light"},{default:i(()=>[a(f,{class:"previousLabel"},{default:i(()=>[N(I(C.label),1)]),_:2},1024)]),_:2},1024),n("div",io,[(s(),M(Wa(C.component),{"is-active":e.activeAccordion===C.id,onDataSaved:e.refreshComponent},null,40,["is-active","onDataSaved"])),n("div",oo,[E>0?(s(),M(p,{key:0,fill:"outline",size:"small",onClick:Pt(k=>e.openAccordion(E-1),["stop"])},{default:i(()=>t[1]||(t[1]=[N(" Back ")])),_:2,__:[1]},1032,["onClick"])):b("",!0),a(p,{fill:"outline",size:"small",onClick:Pt(k=>e.handleNext(E),["stop"])},{default:i(()=>[N(I(E<e.visibleSections.length-1?"Next":"Finish"),1)]),_:2},1032,["onClick"])])])]),_:2},1032,["value"]))),128))]),_:1},8,["value"])]),_:1}))}const pr=Z(no,[["render",lo],["__scopeId","data-v-0d783404"]]);class ro extends $t{constructor(t,m){super(t,8,m)}static async getDiagnosis(t="",m=1,y=10){const c=await j.getConceptID("Qech outpatient diagnosis list");return $t.getJson("diagnosis",{id:c,name:t,page:m,page_size:y})}}const co=Y({name:"Menu",components:{IonContent:ke,IonHeader:De,IonItem:J,IonList:ie,IonMenu:be,IonTitle:ye,IonToolbar:_e,List:Fe},computed:{...te(Ee,["patient"])},data(){return{valueNumericArray:[],obsDatetime:[],graphIcon:kt(["#006401"]),listIcon:Dt(["#636363"]),displayGraph:!0,orders:[],height:[],BMI:[],iconBg:{},activeWeight:[],activeHeight:[],activeBMI:[],list:[],series:[{name:"",data:[]}]}},setup(){return{checkmark:Ve,pulseOutline:Ae}},async mounted(){const e=await Ne.getAll(this.patient.patientID,"Primary diagnosis"),t=await Ne.getAll(this.patient.patientID,"Secondary diagnosis"),m=await Ne.getAll(this.patient.patientID,"Attempted/ Differential diagnosis"),y=[...e||[],...t||[],...m||[]],c=ge.isEmpty(y)?[]:Promise.all(y.map(async _=>({name:await Ne.getConceptName(_.value_coded),obs_date:_.obs_datetime})));this.setListData(await c)},methods:{dismiss(){bt.dismiss()},handleIcon(){},setActivClass(e){this.activeHeight="",this.activeBMI="",this.activeWeight="",e=="height"?this.activeHeight="_active":e=="weight"?this.activeWeight="_active":e=="BMI"&&(this.activeBMI="_active")},setListData(e){this.list=[],this.list.push({actionBtn:!1,class:"col_background",header:!0,minHeight:"--min-height: 25px;",display:["Date","Diagnosis","Notes"]}),e.forEach(t=>{this.list.push({actionBtn:!1,minHeight:"--min-height: 25px;",class:"col_background",display:[ue.toStandardHisFormat(t.obs_date),t.name,""]})})}}}),uo={class:"modal_wrapper"};function mo(e,t,m,y,c,_){const l=S("list");return s(),o("div",uo,[n("div",null,[a(l,{listData:e.list},null,8,["listData"])])])}const po=Z(co,[["render",mo],["__scopeId","data-v-88580898"]]),ho=Y({name:"Menu",components:{IonContent:ke,IonHeader:De,IonItem:J,IonList:ie,IonMenu:be,IonTitle:ye,IonToolbar:_e,IonInput:nt,IonPopover:Gt,DashBox:it,SelectionPopover:Xt,BasicInputField:ve,List:Fe,BasicForm:se,DynamicButton:fe,previousDiagnosis:po},data(){return{iconsContent:he,no_item:!1,search_item:!1,display_primary:!0,display_item:!1,addItemButton:!0,selectedText:"",conditionStatus:"",data:[],diagnosisData:[],popoverOpen:!1,event:"",selectedCondition:"",selected:null,diagnoses:[],initialData:[]}},setup(){return{checkmark:Ve,pulseOutline:Ae}},computed:{...te(ut,["OPDdiagnosis"]),primaryDiagnosisExists(){return this.OPDdiagnosis[0].selectedData.some(e=>e.data.concept_id===6542)},primaryInputField(){return this.OPDdiagnosis[0].data.rowData[0].colData},secondaryInputField(){return this.OPDdiagnosis[2].data.rowData[0].colData},differentialInputField(){return this.OPDdiagnosis[3].data.rowData[0].colData}},watch:{OPDdiagnosis:{handler(){this.setDashedBox()},deep:!0},patient:{handler(e){e&&this.resetDiagnosisList()},immediate:!0,deep:!0}},async mounted(){this.updateDiagnosisStores();const e=ut();this.initialData=e.getInitial(),this.setDashedBox(),await this.getDiagnosis("")},methods:{resetDiagnosisList(){this.OPDdiagnosis[0].selectedData=[],this.updateDiagnosisStores()},displayInputFields(){this.conditionStatus="",this.selectedText="",this.no_item=!1,this.addItemButton=!1,this.search_item=!0},async validaterowData(e={name:"secondaryDiagnosis"}){R(this.OPDdiagnosis,"secondaryDiagnosis","alertsErrorMassage",""),R(this.OPDdiagnosis,"primaryDiagnosis","alertsErrorMassage",""),R(this.OPDdiagnosis,"differentialDiagnosis","alertsErrorMassage","");const t=mt(this.OPDdiagnosis,"primaryDiagnosis","value"),m=mt(this.OPDdiagnosis,"secondaryDiagnosis","value"),y=mt(this.OPDdiagnosis,"differentialDiagnosis","value");if(t.name&&this.OPDdiagnosis[0].selectedData.some(f=>f.data.concept_id===6542))return R(this.OPDdiagnosis,"primaryDiagnosis","alertsErrorMassage","Only one primary diagnosis can be added. Delete the existing one to change."),Je("Only one primary diagnosis is allowed. Delete one added if you want to change"),!1;const c=m&&m.length>0,_=y&&y.length>0;return c&&m.some(l=>l.name===t.name)?(R(this.OPDdiagnosis,"secondaryDiagnosis","alertsErrorMassage","".concat(t.name," is already selected as primary diagnosis.")),!1):_&&y.some(l=>l.name===t.name)?(R(this.OPDdiagnosis,"differentialDiagnosis","alertsErrorMassage","".concat(t.name," is already selected as primary diagnosis.")),!1):c&&_&&m.some(f=>y.some(v=>v.name===f.name))?(R(this.OPDdiagnosis,"secondaryDiagnosis","alertsErrorMassage","Secondary and differential diagnoses cannot overlap."),!1):t!=null&&t.name?!0:(R(this.OPDdiagnosis,"primaryDiagnosis","alertsErrorMassage","Primary diagnosis is required."),!1)},async addNewRow(){await this.validaterowData()&&(this.buildDiagnosis(),this.search_item=!1,this.display_item=!0,this.addItemButton=!0,this.display_primary=!1,this.OPDdiagnosis[0].data.rowData[0].colData[0].value="",this.OPDdiagnosis[2].data.rowData[0].colData[0].value="",this.OPDdiagnosis[3].data.rowData[0].colData[0].value="",R(this.OPDdiagnosis,"primaryDiagnosis","inputFieldDisplayNone",!1),R(this.OPDdiagnosis,"primaryDiagnosis","colSize",""))},buildDiagnosis(){var m,y;const e=[],t=this.OPDdiagnosis[0].selectedData.map(c=>c.name);if((y=(m=this.primaryInputField[0])==null?void 0:m.value)!=null&&y.name&&!t.includes(this.primaryInputField[0].value.name))if(!this.OPDdiagnosis[0].selectedData.some(_=>_.data.concept_id===6542))e.push({actionBtn:!0,btn:["delete"],name:this.primaryInputField[0].value.name,id:this.primaryInputField[0].value.concept_id,display:[this.primaryInputField[0].value.name,"Primary diagnosis"],data:{concept_id:6542,value_coded:this.primaryInputField[0].value.concept_id,obs_datetime:me.getSessionDate()}});else return Je("Only one primary diagnosis is allowed"),!1;return this.secondaryInputField[0].value&&this.secondaryInputField[0].value.forEach(c=>{t.includes(c.name)||e.push({actionBtn:!0,btn:["delete"],name:c.name,id:c.concept_id,display:[c.name,"Secondary diagnosis"],data:{concept_id:6543,value_coded:c.concept_id,obs_datetime:me.getSessionDate()}})}),this.differentialInputField[0].value&&this.differentialInputField[0].value.forEach(c=>{t.includes(c.name)||e.push({actionBtn:!0,btn:["delete"],name:c.name,id:c.concept_id,display:[c.name,"Differential diagnosis"],data:{concept_id:10201,value_coded:c.concept_id,obs_datetime:me.getSessionDate()}})}),e.length>0&&(this.OPDdiagnosis[0].selectedData=[...this.OPDdiagnosis[0].selectedData,...e]),!0},compareArrays(e,t){return e.reduce((m,y)=>{const c=t.find(_=>_.name===y.name);return c&&m.push(c.display[1]),m},[])},updateDiagnosisStores(){ut().setOPDDiagnosis(this.OPDdiagnosis)},openPopover(e){this.event=e,this.popoverOpen=!0},async handleInputData(e){R(this.OPDdiagnosis,"secondaryDiagnosis","alertsErrorMassage",""),R(this.OPDdiagnosis,"primaryDiagnosis","alertsErrorMassage",""),R(this.OPDdiagnosis,"differentialDiagnosis","alertsErrorMassage",""),await this.getDiagnosis(e.value),this.validaterowData(e)},async getDiagnosis(e){return this.diagnoses=await ro.getDiagnosis(e,1,5),R(this.OPDdiagnosis,"primaryDiagnosis","multiSelectData",this.diagnoses),R(this.OPDdiagnosis,"secondaryDiagnosis","multiSelectData",this.diagnoses),R(this.OPDdiagnosis,"differentialDiagnosis","multiSelectData",this.diagnoses),this.diagnoses},async onRefresh(e){(await this.getDiagnosis(e)).length>0&&st("Diagnoses selection list has been updated")},editDiagnosis(e){this.deleteDiagnosis(e),this.selectedText=e.name,this.OPDdiagnosis[0].data.rowData[0].colData[0].value=e.name,this.addItemButton=!1,this.search_item=!0,this.updateDiagnosisStores()},async openDeletePopover(e){await _n("Do you want to delete ".concat(e.name," ?"),e.event)&&this.deleteDiagnosis(e.name)},deleteDiagnosis(e){const t=this.OPDdiagnosis[0].selectedData,m=e.name,y=t.filter(_=>_.display[0]!==m),c=t.filter(_=>_.display[0]===m);this.OPDdiagnosis[0].selectedData=y,c[0].data.concept_id==6542&&(R(this.OPDdiagnosis,"primaryDiagnosis","inputFieldDisplayNone",!1),R(this.OPDdiagnosis,"primaryDiagnosis","colSize",""))},setDashedBox(){var e,t,m,y;((t=(e=this.primaryInputField[0])==null?void 0:e.value)!=null&&t.name||(y=(m=this.primaryInputField[1])==null?void 0:m.value)!=null&&y.name)&&(this.addItemButton=!1,this.search_item=!0,this.no_item=!1),this.OPDdiagnosis[0].selectedData.length>0?(this.display_item=!0,this.no_item=!1):this.search_item||(this.no_item=!0),this.addItemButton=!this.primaryDiagnosisExists}}}),fo={class:"custom_card",style:{padding:"10px"}},vo={key:0},go={key:0,style:{color:"red","margin-top":"10px",background:"lightgoldenrodyellow"}},_o={class:"ion-padding",slot:"content"};function yo(e,t,m,y,c,_){const l=S("DashBox"),f=S("list"),v=S("basic-form"),p=S("ion-row"),r=S("DynamicButton"),u=S("ion-label"),w=S("ion-item"),C=S("previousDiagnosis"),E=S("ion-accordion"),k=S("ion-accordion-group");return s(),o(T,null,[n("div",fo,[a(l,{status:e.no_item,content:"No Diagnosis added"},null,8,["status"]),e.display_item?(s(),o("span",vo,[a(f,{listData:e.OPDdiagnosis[0].selectedData,"onClicked:edit":t[0]||(t[0]=H=>e.editDiagnosis(H)),"onClicked:delete":e.deleteDiagnosis},null,8,["listData","onClicked:delete"]),e.primaryDiagnosisExists?(s(),o("div",go," In order to update the diagnosis list, please remove/delete the primary diagnosis only and then re-add or change it along with the secondary and differential diagnoses. ")):b("",!0)])):b("",!0),e.search_item?(s(),M(p,{key:1},{default:i(()=>[a(v,{initialData:e.initialData,contentData:e.OPDdiagnosis,"onUpdate:selected":e.handleInputData,"onUpdate:inputValue":e.handleInputData,disabled:e.primaryDiagnosisExists,"onClicked:button":e.addNewRow,onSearchChange:e.getDiagnosis,onRefresh:t[1]||(t[1]=H=>e.onRefresh("a"))},null,8,["initialData","contentData","onUpdate:selected","onUpdate:inputValue","disabled","onClicked:button","onSearchChange"])]),_:1})):b("",!0),e.addItemButton?(s(),M(p,{key:2,style:{"margin-top":"10px"}},{default:i(()=>[a(r,{fill:"clear",icon:e.iconsContent.plus,iconSlot:"icon-only","onClicked:btn":t[2]||(t[2]=H=>e.displayInputFields()),name:"Add new Diagnosis"},null,8,["icon"])]),_:1})):b("",!0)]),a(p,null,{default:i(()=>[a(k,{ref:"accordionGroup",class:"previousView"},{default:i(()=>[a(E,{value:"first","toggle-icon-slot":"start",class:"custom_card"},{default:i(()=>[a(w,{slot:"header",color:"light"},{default:i(()=>[a(u,{class:"previousLabel"},{default:i(()=>t[3]||(t[3]=[N("Previous Diagnosis")])),_:1,__:[3]})]),_:1}),n("div",_o,[a(C)])]),_:1})]),_:1},512)]),_:1})],64)}const hr=Z(ho,[["render",yo],["__scopeId","data-v-e7cfdc2c"]]),bo=Y({components:{IonButtons:Ja,IonButton:_t,IonModal:ja,IonHeader:De,IonContent:ke,IonToolbar:_e,IonTitle:ye,IonItem:J,IonList:ie,IonAvatar:Ka,IonImg:Ya,IonLabel:ee,IonPage:za,IonMenu:be,BasicForm:se,IonFooter:Ga,DynamicButton:fe},data(){return{popoverStatus:null}},props:{keyboardClose:{type:Boolean,default:!1},keepContentsMounted:{type:Boolean,default:!1},content:{default:[]},popoverOpen:{type:Boolean,default:!1},event:{type:Event,default:""},title:{type:String,default:""}},methods:{dismiss(){bt.dismiss()},nav(e,t){this.dismiss(),this.$router.push(e)}}}),Do={class:"modal_wrapper"},ko={class:"center text_12"};function So(e,t,m,y,c,_){const l=S("ion-title"),f=S("ion-button"),v=S("ion-buttons"),p=S("ion-toolbar"),r=S("ion-header"),u=S("ion-col"),w=S("ion-row"),C=S("ion-content"),E=S("ion-modal");return s(),M(E,{"is-open":e.popoverOpen,"show-backdrop":!0,onDidDismiss:t[1]||(t[1]=k=>e.$emit("closePopoover",!1)),"keyboard-close":e.keyboardClose},{default:i(()=>[a(r,null,{default:i(()=>[a(p,null,{default:i(()=>[a(l,null,{default:i(()=>[n("b",null,"Lab results for ("+I(e.content.item.name)+") test",1)]),_:1}),a(v,{slot:"end"},{default:i(()=>[a(f,{onClick:t[0]||(t[0]=k=>e.$emit("closeModal"))},{default:i(()=>t[2]||(t[2]=[N("Close")])),_:1,__:[2]})]),_:1})]),_:1})]),_:1}),a(C,{class:"ion-padding"},{default:i(()=>[n("div",Do,[n("div",ko,[a(w,null,{default:i(()=>[(s(!0),o(T,null,q(e.content.item.item.result,(k,H)=>(s(),M(u,{size:"4",key:H},{default:i(()=>[a(w,null,{default:i(()=>[a(u,{size:"8"},{default:i(()=>[N(I(k.indicator.name),1)]),_:2},1024),a(u,{class:"bold",size:"0.5"},{default:i(()=>t[3]||(t[3]=[N(":")])),_:1,__:[3]}),a(u,{class:"bold",size:"2"},{default:i(()=>[N(I(k.value),1)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1})])])]),_:1})]),_:1},8,["is-open","keyboard-close"])}const wo=Z(bo,[["render",So],["__scopeId","data-v-c2390e89"]]),Co=Y({name:"Menu",components:{LabTestsHistory:Rn,CheckInConfirmationModal:yn,IonContent:ke,IonHeader:De,IonItem:J,IonList:ie,IonMenu:be,IonTitle:ye,IonToolbar:_e,List:Fe,DynamicButton:fe,DashBox:it,LabModal:Bn,LabViewResultsModal:wo,SendToLabConfirmationModal:xn},computed:{...te(Ee,["patient"]),...te(Rt,["labResults"]),...te(Sn,["activeProgram"]),...te(gt,["investigations"]),...te(pt,["patientsWaitingForVitals","patientsWaitingForConsultation","patientsWaitingForLab","patientsWaitingForDispensation"]),hasEnterResults(){return this.listOrders.some(e=>e.btn&&e.btn.includes("enter_results"))},hasPatientsWaitingForLab(){return Array.isArray(this.patientsWaitingForLab)&&this.patientsWaitingForLab.length>0}},props:{propOrders:{default:[]}},data(){return{iconsContent:he,valueNumericArray:[],obsDatetime:[],graphIcon:kt(["#006401"]),listIcon:Dt(["#636363"]),displayGraph:!0,sendToLabModalOpen:!1,orders:[],userRoles:[],height:[],BMI:[],iconBg:{},activeWeight:[],activeHeight:[],activeBMI:[],listOrders:[],listResults:[],hasPatientsWaitingForLab:!1,listSeeMoreOrders:[],listSeeLessOrders:[],listSeeMoreResults:[],listSeeLessResults:[],listHeaderResults:"",labResultsContent:"",listHeaderOrders:"",service:"",openModal:!1,openResultsModal:!1,series:[{name:"",data:[]}]}},setup(){return{checkmark:Ve,pulseOutline:Ae}},async mounted(){this.orders=this.propOrders,this.setListData(this.orders),this.service=new kn(this.patient.patientID),this.userRoles=await me.getUserRoles()},watch:{patientsWaitingForLab(e){this.hasPatientsWaitingForLab=e.some(t=>t.patient_id===this.patient.patientID)},propOrders:{handler(){this.orders=this.propOrders,this.setListData(this.orders)},deep:!0},$route:{immediate:!0,handler(){this.updateLabList(),this.fetchPatientLabStageData()}}},methods:{toggleSendToLabModal(){this.sendToLabModalOpen=!this.sendToLabModalOpen},async fetchPatientLabStageData(){var m;const e=localStorage.getItem("locationID");if(!e){Je("Location ID could not be found. Please check your settings.");return}const t=pt();t.patientsWaitingForLab.length>=0&&await t.refresh(e),(m=this.patient)!=null&&m.patientID&&(this.hasPatientsWaitingForLab=t.patientsWaitingForLab.some(y=>y.patient_id===this.patient.patientID))},async handleSendToLabYes(){const e=localStorage.getItem("locationID");if(!e){Je("Location ID could not be found. Please check your settings.");return}await bn.movePatientToNextStage(this.patient.patientID,"CONSULTATION","LAB",e,this.patient.visitID||this.patient.visit_id),await pt().refresh(e),this.closeSendToLabModal(),await Dn.push("home"),st("Lab orders submitted successfully. You may now attend to other patients.")},async handleSendToLabNo(){this.toggleSendToLabModal()},closeSendToLabModal(){this.sendToLabModalOpen=!1},async updateLabList(){this.openModal=!1,this.orders=await Se.getOrders(this.patient.patientID),this.setListData(this.orders),this.updateInvestigationWizard()},async updateInvestigationWizard(){this.orders=await Se.getOrders(this.patient.patientID);const e=await this.orders.filter(t=>ue.toStandardHisFormat(ue.sessionDate())===ue.toStandardHisFormat(t.order_date));e.length>0?this.investigations[0].selectedData=e:this.investigations[0].selectedData=""},dismiss(){bt.dismiss()},async voidLabOrder(e){await this.service.voidOrder(e.id,"Mistake entry"),this.updateLabList()},handleIcon(){},async openResultsForm(e){console.log(e.item.concept_id);const t=await $n.getTestIndicatorsWithID(e.item.concept_id);console.log({testIndicators:t});const m=[e.item,{validationStatus:"",data:{rowData:[{colData:[]}]}}];t.forEach(c=>{let _={inputHeader:c.name,value:"",colSize:3,id:c.concept_id,name:c.name,required:!0,eventType:"input",alertsErrorMassage:""};if(c.name=="RBS"&&(_={inputHeader:c.name,value:"",colSize:3,id:c.concept_id,name:c.name,required:!0,eventType:"input",alertsErrorMassage:"",validationFunctionName:"validateRBS",unit:"mg/dL"}),c.name=="FBS"&&(_={inputHeader:c.name,value:"",colSize:3,id:c.concept_id,name:c.name,required:!0,eventType:"input",alertsErrorMassage:"",validationFunctionName:"validateFBS",unit:"mg/dL"}),c.name=="MRDT"||c.name=="Tuberculosis program"||c.name=="Vdrl"||c.name=="Hepatitis B"||c.name=="Lam"||c.name=="CrAg"||c.name=="CD4 count"||c.name=="Leukocytes"||c.name=="Protein"||c.name=="Nitrite"||c.name=="Urine Ketones"||c.name=="HIV test"){let l=[];(c.name=="MRDT"||c.name=="Vdrl"||c.name=="Hepatitis B"||c.name=="CrAg"||c.name=="Lam")&&(l=[{id:"1",name:"Positive"},{id:"2",name:"Negative"},{id:"3",name:"Invalid"}]),c.name=="Tuberculosis program"&&(l=[{id:"1",name:"Scanty"},{id:"2",name:"Negative"},{id:"3",name:"1+"},{id:"4",name:"2+"},{id:"5",name:"3+"}]),c.name=="CD4 count"&&(l=[{id:"1",name:"below reference line"},{id:"2",name:"above reference line"}]),(c.name=="Leukocytes"||c.name=="Protein"||c.name=="Nitrite"||c.name=="Ketones"||c.name=="Urine Ketones")&&(l=[{id:"2",name:"Negative"},{id:"1",name:"Trace"},{id:"3",name:"1+"},{id:"4",name:"2+"},{id:"5",name:"3+"},{id:"6",name:"4+"}]),c.name=="HIV test"&&(l=[{id:"2",name:"Positive"},{id:"1",name:"Negative"},{id:"3",name:"Invalid"}]),_={inputHeader:c.name,icon:he.search,value:"",name:"units",eventType:"input",alertsErrorMassage:"",isSingleSelect:!0,trackBy:"id",multiSelectData:l,id:c.concept_id,idName:"district_id"}}m[1].data.rowData[0].colData.push(_)}),Rt().setLabResults(m),this.openModal=!0,this.orders=await Se.getOrders(this.patient.patientID)},async viewLabOrder(e){console.log("🚀 ~ openResultsForm ~ labResults:",e),this.labResultsContent=e,this.openResultsModal=!0},setActivClass(e){this.activeHeight="",this.activeBMI="",this.activeWeight="",e=="height"?this.activeHeight="_active":e=="weight"?this.activeWeight="_active":e=="BMI"&&(this.activeBMI="_active")},setListData(e){const t={containSize:2.1,btnSize:1};this.listHeaderResults=this.generateListHeader(["Date","Accession Number","Lab Test","Specimen","Result"],t),this.listHeaderOrders=this.generateListHeader(["Date","Accession Number","Lab Test","Specimen"]),this.listSeeMoreResults=this.generateListItems(e,"result",!0,t),this.listSeeLessResults=this.generateListItems(e,"result",!1,t),this.listSeeMoreOrders=this.generateListItems(e,"order",!0),this.listSeeLessOrders=this.generateListItems(e,"order",!1),this.listResults=[this.listHeaderResults,...this.listSeeLessResults],this.listOrders=[this.listHeaderOrders,...this.listSeeLessOrders]},generateListHeader(e,t={}){return{containSize:t==null?void 0:t.containSize,btnSize:t==null?void 0:t.btnSize,class:"",header:!0,minHeight:"--min-height: 25px;",display:e}},generateListItems(e,t,m,y={}){let c=0;return e.length>0?e.flatMap(_=>_.tests.flatMap(l=>{var v,p,r,u;let f=null;if(((v=l==null?void 0:l.result)==null?void 0:v.length)==1?f=(l==null?void 0:l.result)!=null?((p=l==null?void 0:l.result[0])==null?void 0:p.value_modifier)+((r=l==null?void 0:l.result[0])==null?void 0:r.value):null:((u=l==null?void 0:l.result)==null?void 0:u.length)>1&&(f=l==null?void 0:l.result),f==""&&console.log("🚀 ~ returnitem.tests.flatMap ~ result:",l),t==="result"&&f!==null||t==="order"&&f===null){const w={containSize:y==null?void 0:y.containSize,btnSize:y==null?void 0:y.btnSize,btn:t==="order"?["enter_results","attach","print","delete"]:["print","delete"],minHeight:"--min-height: 25px;",class:"",id:_.order_id,name:l.name,item:l,display:t=="order"?[ue.toStandardHisFormat(_.order_date),_.accession_number,l.name,_.specimen.name]:[ue.toStandardHisFormat(_.order_date),_.accession_number,l.name,_.specimen.name,f]};if(m||c<2)return c++,[w]}return[]})):[]},seeOrderStatus(e){e=="more"?this.listResults=[this.listHeaderResults,...this.listSeeMoreResults]:e=="less"&&(this.listResults=[this.listHeaderResults,...this.listSeeLessResults])},seeResultsStatus(e){e=="more"?this.listOrders=[this.listHeaderOrders,...this.listSeeMoreOrders]:e=="less"&&(this.listOrders=[this.listHeaderOrders,...this.listSeeLessOrders])}}}),Io={key:1,class:"modal_wrapper"},Oo={style:{"--background":"#fff"}},Eo={key:0,style:{"margin-top":"5px"}},Lo={key:1,style:{"margin-top":"5px"}},Po={key:2,class:"modal_wrapper"},Mo={class:"scrollable-container"},Ao={key:0,style:{"margin-top":"5px"}},xo={key:1,style:{"margin-top":"5px"}},Bo={key:3},$o={key:0},Ho={key:1};function No(e,t,m,y,c,_){const l=S("SendToLabConfirmationModal"),f=S("DashBox"),v=S("LabTestsHistory"),p=S("DynamicButton"),r=S("list"),u=S("LabModal"),w=S("LabViewResultsModal");return s(),o(T,null,[a(l,{closeModalFunc:e.closeSendToLabModal,onYes:e.handleSendToLabYes,onNo:e.handleSendToLabNo,isOpen:e.sendToLabModalOpen,title:"Confirm sending patient to lab"},null,8,["closeModalFunc","onYes","onNo","isOpen"]),e.listResults.length<1&&e.listOrders.length<1?(s(),M(f,{key:0,content:"No Investigations added "})):b("",!0),e.listResults.length>1?(s(),o("div",Io,[t[7]||(t[7]=n("div",{style:{"font-weight":"1000"}},"Lab investigations history",-1)),n("div",Oo,[a(v)]),e.listResults.length<=4&&e.listSeeMoreResults.length>=4?(s(),o("div",Eo,[a(p,{onClick:t[0]||(t[0]=C=>e.seeOrderStatus("more")),name:"Show More Lab Results",fill:"clear",iconSlot:"icon-only"})])):e.listResults.length>=5?(s(),o("div",Lo,[a(p,{onClick:t[1]||(t[1]=C=>e.seeOrderStatus("less")),name:"Show Less Lab Results",fill:"clear",iconSlot:"icon-only"})])):b("",!0)])):b("",!0),e.listOrders.length>1?(s(),o("div",Po,[t[8]||(t[8]=n("div",{style:{"font-weight":"700"}},"Lab Orders",-1)),n("div",Mo,[a(r,{listData:e.listOrders.map(C=>({...C,disabledEnterResults:e.hasPatientsWaitingForLab&&e.activeProgram.program_id===14&&(e.userRoles==="Clinician"||e.userRoles==="Superuser")})),"onClicked:delete":e.voidLabOrder,"onClicked:results":e.openResultsForm},null,8,["listData","onClicked:delete","onClicked:results"])]),e.listOrders.length<=4&&e.listSeeMoreOrders.length>=4?(s(),o("div",Ao,[a(p,{onClick:t[2]||(t[2]=C=>e.seeResultsStatus("more")),name:"Show More Lab Orders",fill:"clear",iconSlot:"icon-only"})])):b("",!0),e.listOrders.length>=5?(s(),o("div",xo,[a(p,{onClick:t[3]||(t[3]=C=>e.seeResultsStatus("less")),name:"Show Less Lab Orders",fill:"clear",iconSlot:"icon-only"})])):b("",!0)])):b("",!0),e.activeProgram.program_id==14&&e.hasEnterResults?(s(),o("div",Bo,[e.hasPatientsWaitingForLab?(s(),o("div",$o,[a(p,{class:"no-margin-left",fill:"solid",color:"danger",icon:"notification_icon",iconSlot:"icon-only",name:"Please enter the results once done, then send the patient back to consultation by clicking Finish button below."})])):(s(),o("div",Ho,[a(p,{fill:"solid",color:"success",icon:e.iconsContent.plus,iconSlot:"icon-only",onClick:t[4]||(t[4]=C=>e.toggleSendToLabModal()),name:"Send to Lab"},null,8,["icon"])]))])):b("",!0),a(u,{popoverOpen:e.openModal,onSaved:e.updateLabList,onCloseModal:t[5]||(t[5]=C=>e.openModal=!1)},null,8,["popoverOpen","onSaved"]),a(w,{popoverOpen:e.openResultsModal,content:e.labResultsContent,onCloseModal:t[6]||(t[6]=C=>e.openResultsModal=!1)},null,8,["popoverOpen","content"])],64)}const Ro=Z(Co,[["render",No],["__scopeId","data-v-cd58a077"]]),Tt=[{checkboxBtnContent:{header:{name:"Medical history"},data:[{name:"Skull",value:"Skull",checked:!1}]}},{checkboxBtnContent:{header:{name:"Medical history"},data:[{name:"Mastoid",value:"Mastoid",checked:!1}]}},{checkboxBtnContent:{header:{name:"Medical history"},data:[{name:"ParaSinuses",value:"ParaSinuses",checked:!1}]}},{checkboxBtnContent:{header:{name:"Medical history"},data:[{name:"Optic Foramen",value:"PVD",checked:!1}]}},{checkboxBtnContent:{header:{name:"Medical history"},data:[{name:"Orbits",value:"Orbits",checked:!1}]}},{checkboxBtnContent:{header:{name:"Medical history"},data:[{name:"Nasal Bone",value:"Nasal Bone",checked:!1}]}},{checkboxBtnContent:{header:{name:"Medical history"},data:[{name:"Mandible",value:"Mandible",checked:!1}]}},{checkboxBtnContent:{header:{name:"Medical history"},data:[{name:"TMJs",value:"TMJs",checked:!1}]}},{checkboxBtnContent:{header:{name:"Medical history"},data:[{name:"Zygomatic",value:"Zygomatic",checked:!1}]}}],Vo=[{checkboxBtnContent:{header:{name:"Medical history"},data:[{name:"Neck",value:"Neck",checked:!1}]}}],Fo=[{checkboxBtnContent:{header:{name:"Medical history"},data:[{name:"Chest",value:"Chest",checked:!1}]}},{checkboxBtnContent:{header:{name:"Medical history"},data:[{name:"Heart",value:"Heart",checked:!1}]}},{checkboxBtnContent:{header:{name:"Medical history"},data:[{name:"Sternum",value:"Sternum",checked:!1}]}},{checkboxBtnContent:{header:{name:"Medical history"},data:[{name:"Ribs",value:"Ribs",checked:!1}]}},{checkboxBtnContent:{header:{name:"Medical history"},data:[{name:"SCJ",value:"SCJ",checked:!1}]}}],To=[{checkboxBtnContent:{header:{name:"Medical history"},data:[{name:"Abdomen",value:"Abdomen",checked:!1}]}},{checkboxBtnContent:{header:{name:"Medical history"},data:[{name:"IVP",value:"IVP",checked:!1}]}}],Uo=[{checkboxBtnContent:{header:{name:"Medical history"},data:[{name:"Clavicle",value:"Clavicle",checked:!1}]}},{checkboxBtnContent:{header:{name:"Medical history"},data:[{name:"Shoulder",value:"Shoulder",checked:!1}]}},{checkboxBtnContent:{header:{name:"Medical history"},data:[{name:"Scapula",value:"Scapula",checked:!1}]}},{checkboxBtnContent:{header:{name:"Medical history"},data:[{name:"Humerus",value:"Humerus",checked:!1}]}},{checkboxBtnContent:{header:{name:"Medical history"},data:[{name:"Elbow",value:"Elbow",checked:!1}]}},{checkboxBtnContent:{header:{name:"Medical history"},data:[{name:"Forearm",value:"Forearm",checked:!1}]}},{checkboxBtnContent:{header:{name:"Medical history"},data:[{name:"Wrist",value:"Wrist",checked:!1}]}},{checkboxBtnContent:{header:{name:"Medical history"},data:[{name:"Hand",value:"Hand",checked:!1}]}},{checkboxBtnContent:{header:{name:"Medical history"},data:[{name:"Phalanges",value:"Phalanges",checked:!1}]}}],qo=[{checkboxBtnContent:{header:{name:"Medical history"},data:[{name:"CSpine",value:"CSpine",checked:!1}]}},{checkboxBtnContent:{header:{name:"Medical history"},data:[{name:"TSpine",value:"TSpine",checked:!1}]}},{checkboxBtnContent:{header:{name:"Medical history"},data:[{name:"LSpine",value:"LSpine",checked:!1}]}},{checkboxBtnContent:{header:{name:"Medical history"},data:[{name:"SSpine",value:"SSpine",checked:!1}]}},{checkboxBtnContent:{header:{name:"Medical history"},data:[{name:"Coccyx",value:"Coccyx",checked:!1}]}}],Wo=[{checkboxBtnContent:{header:{name:"Medical history"},data:[{name:"Pelvis",value:"Pelvis",checked:!1}]}},{checkboxBtnContent:{header:{name:"Medical history"},data:[{name:"Sacroillac Joints",value:"Sacroillac Joints",checked:!1}]}},{checkboxBtnContent:{header:{name:"Medical history"},data:[{name:"Hip",value:"Hip",checked:!1}]}}],Go=[{checkboxBtnContent:{header:{name:"Medical history"},data:[{name:"Femur",value:"Femur",checked:!1}]}},{checkboxBtnContent:{header:{name:"Medical history"},data:[{name:"Knee",value:"Knee",checked:!1}]}},{checkboxBtnContent:{header:{name:"Medical history"},data:[{name:"Patella",value:"Patella",checked:!1}]}},{checkboxBtnContent:{header:{name:"Medical history"},data:[{name:"Leg",value:"Leg",checked:!1}]}},{checkboxBtnContent:{header:{name:"Medical history"},data:[{name:"Ankle",value:"Ankle",checked:!1}]}},{checkboxBtnContent:{header:{name:"Medical history"},data:[{name:"Calcaneus",value:"Calcaneus",checked:!1}]}},{checkboxBtnContent:{header:{name:"Medical history"},data:[{name:"Foot",value:"Foot",checked:!1}]}},{checkboxBtnContent:{header:{name:"Medical history"},data:[{name:"Toe",value:"Toe",checked:!1}]}}],zo=Xa("RadiologyStore",{state:()=>({head:[...Tt],neck:[...Vo],chest:[...Fo],abdomen:[...To],upper_extremity:[...Uo],spine:[...qo],pelvis:[...Wo],lower_extremity:[...Go]}),actions:{setOPDDiagnosis(e){this.head=e},getInitial(){return[...ge.cloneDeep(Tt)]}}}),Yo=["innerHTML"],Ko={class:"scrollable-container"},jo={key:0,class:"form-section"},Jo={key:1,class:"form-section"},Xo={key:2,class:"form-section"},Qo={key:3,class:"form-section"},Zo={key:4,class:"form-section"},el={key:5,class:"form-section"},tl={key:6,class:"form-section"},al={key:7,class:"form-section"},nl=Y({__name:"RadiologyInvestigation",setup(e){const t=zo(),{head:m,neck:y,chest:c,abdomen:_,upper_extremity:l,spine:f,pelvis:v,lower_extremity:p}=Ut(t),r=d(he),u=d([]),w=(E,k,H)=>{document.querySelectorAll("#".concat(E," path")).forEach(x=>{x.classList.toggle("white-fill")}),document.querySelectorAll("#".concat(k," line")).forEach(x=>{x.classList.toggle("dark-green-stroke")}),document.querySelectorAll("#".concat(k," rect")).forEach(x=>{x.classList.toggle("bright-green-fill"),x.classList.toggle("dark-green-stroke")}),document.querySelectorAll("#".concat(k," path")).forEach(x=>{x.classList.toggle("dark-green-fill")}),document.querySelectorAll("#".concat(k," circle")).forEach(x=>{x.classList.toggle("bright-green-fill")});const W=u.value.findIndex(x=>x.id===H);W>=0?u.value.splice(W,1):u.value.unshift({id:H,active:!0})},C=()=>{const E=document.getElementById("SPINE");E.style.display==="none"||E.style.display==""?E.style.display="block":E.style.display="none",w("SPINE","SPINE_LABEL-2","spine")};return Xe(()=>{const E=document.getElementById("HEAD");E&&E.addEventListener("click",()=>{w("HEAD","LABEL-6","head")});const k=document.getElementById("NECK");k&&k.addEventListener("click",()=>{w("NECK","LABEL-5","neck")});const H=document.getElementById("CHEST");H&&H.addEventListener("click",()=>{w("CHEST","LABEL-4","chest")});const W=document.getElementById("ABDOMEN_LABEL");W&&W.addEventListener("click",()=>{const $=document.getElementById("ABDOMEN-2");$.style.display==="none"||$.style.display==""?$.style.display="block":$.style.display="none",w("ABDOMEN","ABDOMEN_LABEL-2","abdomen")});const x=document.getElementById("UPPER_EXTRMITY");x&&x.addEventListener("click",()=>{w("UPPER_EXTRMITY","LABEL-3","upper_extremity")});const ae=document.getElementById("SPINE"),de=document.getElementById("SPINE_LABEL"),Q=document.getElementById("LOWER_SPINE_INACTIVE");ae&&ae.addEventListener("click",()=>{C()}),de&&de.addEventListener("click",()=>{C()}),Q&&Q.addEventListener("click",()=>{C()});const P=document.getElementById("PELVIS");P&&P.addEventListener("click",()=>{w("PELVIS","LABEL-2","pelvis")});const A=document.getElementById("LOWER_EXTREMITY");A&&A.addEventListener("click",()=>{w("LOWER_EXTREMITY","LABEL","lower_extremity")})}),(E,k)=>{const H=S("ion-col"),W=S("ion-row");return s(),M(W,null,{default:i(()=>[a(H,{size:"7"},{default:i(()=>[n("div",{innerHTML:r.value.full_body_sk},null,8,Yo)]),_:1}),a(H,{size:"5",class:"form-column"},{default:i(()=>[n("div",Ko,[(s(!0),o(T,null,q(u.value,x=>(s(),o(T,null,[x.id==="head"?(s(),o("div",jo,[k[0]||(k[0]=n("h6",null,"Body Part: Head",-1)),a(se,{contentData:h(m)},null,8,["contentData"])])):x.id==="neck"?(s(),o("div",Jo,[k[1]||(k[1]=n("h6",null,"Body Part: Neck",-1)),a(se,{contentData:h(y)},null,8,["contentData"])])):x.id==="chest"?(s(),o("div",Xo,[k[2]||(k[2]=n("h6",null,"Body Part: Chest",-1)),a(se,{contentData:h(c)},null,8,["contentData"])])):x.id==="abdomen"?(s(),o("div",Qo,[k[3]||(k[3]=n("h6",null,"Body Part: Abdomen",-1)),a(se,{contentData:h(_)},null,8,["contentData"])])):x.id==="upper_extremity"?(s(),o("div",Zo,[k[4]||(k[4]=n("h6",null,"Body Part: Upper Extremity",-1)),a(se,{contentData:h(l)},null,8,["contentData"])])):x.id==="spine"?(s(),o("div",el,[k[5]||(k[5]=n("h6",null,"Body Part: Spine",-1)),a(se,{contentData:h(f)},null,8,["contentData"])])):x.id==="pelvis"?(s(),o("div",tl,[k[6]||(k[6]=n("h6",null,"Body Part: Pelvis",-1)),a(se,{contentData:h(v)},null,8,["contentData"])])):x.id==="lower_extremity"?(s(),o("div",al,[k[7]||(k[7]=n("h6",null,"Body Part: Lower Extremity",-1)),a(se,{contentData:h(p)},null,8,["contentData"])])):b("",!0)],64))),256))])]),_:1})]),_:1})}}}),sl=Z(nl,[["__scopeId","data-v-4e8419f9"]]),il=Y({name:"Menu",mixins:[Hn],components:{IonContent:ke,IonHeader:De,IonItem:J,IonList:ie,IonMenu:be,IonTitle:ye,IonToolbar:_e,IonInput:nt,IonPopover:Gt,DashBox:it,SelectionPopover:Xt,BasicInputField:ve,BasicForm:se,List:Fe,DynamicButton:fe,labOrderResults:Ro,RadiologyInvestigation:sl},data(){return{iconsContent:he,no_item:!1,search_item:!1,display_item:!1,addItemButton:!0,selectedText:"",testResult:"",test:"",labOrders:"",filteredSpecimen:"",testData:[],popoverOpen:!1,labOrderStatus:!1,event:"",specimen:"",radiologyOrdersStatus:!1,otherOrdersStatus:!1}},setup(){return{checkmark:Ve,pulseOutline:Ae}},computed:{...te(gt,["investigations"]),...te(Ee,["patient"]),inputFields(){return this.investigations[0].data.rowData[0].colData}},watch:{investigations:{handler(){this.setDashedBox()},deep:!0},patient:{async handler(){this.labOrders=await Se.getOrders(this.patient.patientID)},deep:!0},$route:{async handler(){await this.getTests()},deep:!0}},async mounted(){await this.getTests(),this.updateInvestigationsStores(),this.setDashedBox(),this.updateInvestigationWizard()},methods:{async getTests(){let e;me.getUseIndexDBStatus()&&me.getModsStatus()?e=await wn("testTypes"):e=await Se.getTestTypes(),R(this.investigations,"test","multiSelectData",e)},async onRefresh(){try{const e=await Se.getTestTypesViaDirectAPICall();R(this.investigations,"test","multiSelectData",e),st("Test Types Selection list has been updated")}catch(e){Je("Could not fetch test types")}},toggleLabOrderStatus(){this.labOrderStatus=!this.labOrderStatus},async updateInvestigationWizard(){this.labOrders=await Se.getOrders(this.patient.patientID);const e=await this.labOrders.filter(t=>ue.toStandardHisFormat(ue.sessionDate())===ue.toStandardHisFormat(t.order_date));e.length>0?this.investigations[0].selectedData=e:this.investigations[0].selectedData=""},async updateInvestigationsStores(){await this.updateInvestigationWizard(),gt().setInvestigations(this.investigations)},displayInputFields(e=!0){this.testResult="",this.selectedText="",this.no_item=!1,this.addItemButton=!e,this.search_item=e},async validateRowData(){return Vt(this.investigations)},async checkTest(){return await this.isNameInData(this.inputFields[0].value.name,await this.investigations[0].selectedData)?(R(this.investigations,"test","alertsErrorMassage","Lab order already selected"),!1):(R(this.investigations,"test","alertsErrorMassage",""),!0)},async addNewRow(){Vt(this.investigations)&&await this.checkTest()&&(await this.saveTest(),this.investigations[0].data.rowData[0].colData[0].value="",this.investigations[0].data.rowData[0].colData[1].value="",this.search_item=!1,this.display_item=!0,this.addItemButton=!0),this.updateInvestigationWizard()},isNameInData(e,t){for(let m of t)for(let y of m.tests)if(y.name===e)return!0;return!1},async saveTest(){await new Nn().postActivities(this.patient.patientID,[{concept_id:this.inputFields[0].value.concept_id,name:this.inputFields[0].value.name,specimen:this.inputFields[1].value.name,reason:"Routine",specimenConcept:await j.getConceptID(this.inputFields[1].value.name,!0)}]),R(this.investigations,"specimen","disabled",!0),this.labOrders=await Se.getOrders(this.patient.patientID)},async handleInputData(e){e.inputHeader=="Test"&&this.checkTest(),R(this.investigations,"specimen","alertsErrorMassage",""),e.inputHeader=="Test"&&e.value&&(this.specimen=await Se.getSpecimens(e.value.name),this.specimen.length==1?(R(this.investigations,"specimen","value",this.specimen[0]),R(this.investigations,"specimen","disabled",!0)):(R(this.investigations,"specimen","value",""),R(this.investigations,"specimen","disabled",!1)),R(this.investigations,"specimen","multiSelectData",this.specimen))},async filterTest(e){return await this.labOrders.filter(t=>t.name.toLowerCase().includes(e.toLowerCase()))},async filterSpecimen(e){var t;return(t=this.specimen[0])!=null&&t.name&&e?await this.specimen.filter(m=>m==null?void 0:m.name.toLowerCase().includes(e.toLowerCase())):[]},setTest(e){this.selectedText=e.name,this.inputFields[1].inputHeader=="Test"?this.investigations[0].data.rowData[0].colData[0].value=e.name:this.investigations[0].data.rowData[0].colData[1].value=e.name,this.updateInvestigationsStores()},setDashedBox(){(this.inputFields[1].value||this.inputFields[0].value)&&(this.addItemButton=!1,this.search_item=!0,this.no_item=!1),this.investigations[0].selectedData.length>0?(this.display_item=!0,this.no_item=!1):this.search_item||(this.no_item=!0)}}}),ol={class:"ion-padding",slot:"content",style:{"margin-bottom":"125px"}},ll={key:0},rl={class:"ion-padding",slot:"content"};function dl(e,t,m,y,c,_){const l=S("ion-label"),f=S("ion-item"),v=S("labOrderResults"),p=S("basic-form"),r=S("DynamicButton"),u=S("ion-row"),w=S("ion-accordion"),C=S("ion-accordion-group"),E=S("RadiologyInvestigation");return s(),o(T,null,[a(C,{ref:"accordionGroup",class:"previousView",value:"first"},{default:i(()=>[a(w,{value:"first","toggle-icon-slot":"start",class:"custom_card"},{default:i(()=>[a(f,{slot:"header",color:"light"},{default:i(()=>[a(l,{class:"previousLabel"},{default:i(()=>t[2]||(t[2]=[N("Lab Investigations")])),_:1,__:[2]})]),_:1}),n("div",ol,[n("span",null,[a(v,{propOrders:e.labOrders},null,8,["propOrders"])]),e.search_item?(s(),o("span",ll,[a(p,{contentData:e.investigations,"onUpdate:selected":e.handleInputData,"onUpdate:inputValue":e.handleInputData,"onClicked:button":e.addNewRow,onRefresh:e.onRefresh},null,8,["contentData","onUpdate:selected","onUpdate:inputValue","onClicked:button","onRefresh"])])):b("",!0),e.addItemButton&&e.userRole!="Lab"?(s(),M(u,{key:1,style:{"margin-top":"10px"}},{default:i(()=>[a(r,{fill:"clear",icon:e.iconsContent.plus,iconSlot:"icon-only","onClicked:btn":t[0]||(t[0]=k=>e.displayInputFields()),name:"Add new test"},null,8,["icon"])]),_:1})):b("",!0),e.search_item?(s(),M(u,{key:2},{default:i(()=>[a(r,{fill:"clear",icon:e.iconsContent.redXclose,iconSlot:"icon-only","onClicked:btn":t[1]||(t[1]=k=>e.displayInputFields(!1)),name:"cancel"},null,8,["icon"])]),_:1})):b("",!0)])]),_:1})]),_:1},512),e.userRole!="Lab"?(s(),M(C,{key:0,ref:"accordionGroup",class:"previousView"},{default:i(()=>[a(w,{value:"first","toggle-icon-slot":"start",class:"custom_card"},{default:i(()=>[a(f,{slot:"header",color:"light"},{default:i(()=>[a(l,{class:"previousLabel"},{default:i(()=>t[3]||(t[3]=[N("Radiology Investigation")])),_:1,__:[3]})]),_:1}),n("div",rl,[a(E)])]),_:1})]),_:1},512)):b("",!0),e.userRole!="Lab"?(s(),M(C,{key:1,ref:"accordionGroup",class:"previousView"},{default:i(()=>[a(w,{value:"first","toggle-icon-slot":"start",class:"custom_card"},{default:i(()=>[a(f,{slot:"header",color:"light"},{default:i(()=>[a(l,{class:"previousLabel"},{default:i(()=>t[4]||(t[4]=[N("Other Investigation")])),_:1,__:[4]})]),_:1}),t[5]||(t[5]=n("div",{class:"ion-padding",slot:"content"},null,-1))]),_:1,__:[5]})]),_:1},512)):b("",!0)],64)}const fr=Z(il,[["render",dl],["__scopeId","data-v-1ea6464c"]]),cl={class:"allergies-section"},ul={class:"allergies-container"},ml={key:0,class:"allergies-grid"},pl={key:1,class:"no-allergies"},hl={class:"ion-padding",slot:"content"},fl={key:0},vl={class:"previousSecDrgs"},gl={class:"ion-padding",slot:"content"},_l={class:"previousSecDrgs"},yl={class:"medication-section"},bl={class:"medication-content"},Dl={key:0,class:"add-medication-form"},kl={class:"form-group"},Sl={class:"option-label"},wl={key:0,class:"error-message"},Cl={class:"form-row"},Il={class:"form-group"},Ol={key:0,class:"error-message"},El={class:"form-group"},Ll={key:0,class:"error-message"},Pl={class:"form-group"},Ml={key:0,class:"error-message"},Al={class:"action-buttons"},xl={class:"notes-section"},Bl={class:"notes-content"},$l={class:"notes-input-container"},Hl={class:"ion-padding",slot:"content"},Nl={class:"notes-timeline"},Rl={class:"note-date"},Vl={class:"note-content"},Fl={class:"ion-padding",slot:"content"},Tl={class:"note-date"},Ul={class:"note-content"},ql=Y({watch:{},name:"xxxComponent"}),Wl=Y({...ql,setup(e){const t=he,m=Vn,y=d(!1),c=d(!1),_=d(!0),l=d(0),f=d(""),v=d(!1),p=d(""),r=d(!1),u=d(),w=d(!1),C=d(""),E=d(""),k=d(""),H=d(""),W=d(""),x=d("");d(!1);const ae="Add new medication",de="clear";d("Show more medications");const Q=$e(),P=jt(),A=ce(()=>P.selectedMedicalAllergiesList),$=ce(()=>Q.selectedMedicalDrugsList),z=ce(()=>Q.partialOPDdrugList),X=ce(()=>Q.nonPharmalogicalTherapyAndOtherNotes),xe=["first","second","third"],Te=d(),Qe=d(),Ue=d(),Le=d(!1),Ze=d(!1),et=d(!1),qe=d("Show more notes"),Be=d("Show more allergies"),L=d(),B=d(),V=d(),ne=ce(()=>Q.editingDrugItem),Qt=d("Select a route"),ot=d(!1),Zt=d("Select frequency"),lt=d(!1),ea=d("Select drug"),rt=d(!1),oe=d(),le=d(),we=d(),We=d([]),ta=d([{concept_id:11797,name:"Buccal",concept_name_id:null,id:1769},{concept_id:11794,name:"Intradermal",concept_name_id:null,id:6284},{concept_id:11795,name:"Intramuscular (IM)",concept_name_id:null,id:6285},{concept_id:11799,name:"Intraosseous",concept_name_id:null,id:6286},{concept_id:11793,name:"Intravenous (IV)",concept_name_id:null,id:6295},{concept_id:3327,name:"Oral",concept_name_id:null,id:8686},{concept_id:11800,name:"Other method of prescription",concept_name_id:null,id:8920},{concept_id:11792,name:"Rectally",concept_name_id:null,id:10785},{concept_id:11798,name:"Subcutaneous",concept_name_id:null,id:12342},{concept_id:11796,name:"Sublingual",concept_name_id:null,id:12344},{concept_id:11792,name:"Rectally",concept_name_id:null,id:14078},{concept_id:11793,name:"Intravenous (IV)",concept_name_id:null,id:14079},{concept_id:11794,name:"Intradermal",concept_name_id:null,id:14080},{concept_id:11795,name:"Intramuscular (IM)",concept_name_id:null,id:14081},{concept_id:11796,name:"Sublingual",concept_name_id:null,id:14082},{concept_id:11797,name:"Buccal",concept_name_id:null,id:14083},{concept_id:11798,name:"Subcutaneous",concept_name_id:null,id:14084},{concept_id:11799,name:"Intraosseous",concept_name_id:null,id:14085},{concept_id:11800,name:"Other method of prescription",concept_name_id:null,id:14086}]),aa=ce(()=>We.value.length?We.value:ta.value);function na(D){oe.value=D}async function sa(){return await Fn()}async function ia(D=5,g=1e3){let F=0;for(;F<D&&(We.value=await sa(),!(We.value.length>0));)F++,await new Promise(G=>setTimeout(G,g));We.value.length===0&&console.warn("Failed to fetch route list after maximum retries.")}Xe(async()=>{const D=new Ln,{previousDrugPrescriptions:g,previousClinicalNotes:F,previousDrugAllergies:G}=await D.getPatientEncounters();Te.value=g,Qe.value=Object.entries(F)[0];const[,...O]=Object.entries(F);Ue.value=O,L.value=Object.entries(G)[0];const[,...U]=Object.entries(G);B.value=U,await ia()}),Me(()=>C.value,async D=>{St()}),Me(()=>E.value,async D=>{ca()}),Me(()=>k.value,async D=>{wt()});function oa(){if(ge.isEmpty(oe.value)==!0)return ot.value=!0,!1;if(ge.isEmpty(oe.value)==!1)return ot.value=!1,!0}function la(){if(ge.isEmpty(le.value)==!0)return lt.value=!0,!1;if(ge.isEmpty(le.value)==!1)return lt.value=!1,!0}function ra(){if(ge.isEmpty(we.value)==!0)return rt.value=!0,!1;if(ge.isEmpty(we.value)==!1)return rt.value=!1,!0}function da(){_.value=!_.value,y.value=!0,r.value=!1,w.value=!1}async function St(){const D=await ha();return console.log({drugNameExists:D}),D?v.value=!1:(f.value="please select a valid drug name",v.value=!0),v.value}async function ca(){return Ot(E.value)?r.value=!1:(p.value="please enter a number",r.value=!0),r.value}async function wt(){return Ot(k.value)?w.value=!1:(u.value="please enter a number",w.value=!0),w.value}async function Ct(){const D=await St(),g=await wt(),F=la(),G=ra(),O=oa();return!D&&!g&&F==!0&&G==!0&&O==!0}function ua(D){le.value=D}async function It(){const D=()=>V.value.dose_strength!=null&&V.value.dose_strength?Math.trunc(V.value.dose_strength):1;if(ne.value!==null){if(!await Ct()){Re("Please enter correct data values",4e3);return}const F=me.getSessionDate(),G=Et(F,parseInt(k.value));let O=!1;dt(V.value)==!0&&(O=!0);const U={drugName:C.value,dose:D(),frequency:le.value.label,frequency_code:le.value.code,duration:k.value,prescription:G,drug_id:x.value,units:W.value,route_concept_id:oe.value.concept_id,route_name:oe.value.name,highlightbackground:O},re=$e();console.log(re.setSelectedMedicalDrugsList([U])),re.editingDrugItem=null,_.value=!0}else{if(!await Ct()){Re("Please enter correct data values",4e3);return}ka();const F=me.getSessionDate(),G=Et(F,parseInt(k.value));let O=!1;dt(V.value)==!0&&(O=!0);const U={drugName:C.value,dose:D(),frequency:le.value.label,frequency_code:le.value.code,duration:k.value,prescription:G,drug_id:x.value,units:W.value,route_concept_id:oe.value.concept_id,route_name:oe.value.name,highlightbackground:O};$e().setSelectedMedicalDrugsList([U])}x.value="",C.value="",E.value="",le.value=null,k.value="",H.value="",l.value++,we.value=null,oe.value=null}async function ma(D){const g=D,O=await Ft.getOfflineOPDDrugs({name:g,page:1,page_size:10});O.map(U=>({label:U.name,value:U.name,other:U})),Q.setPartialOPDdrugList(O)}async function pa(D){let g;D.target===void 0?g=D:g=D.target.value;const O=await Ft.getOPDDrugs({name:encodeURIComponent(g),page:1,page_size:10});return O.map(U=>({label:U.name,value:U.name,other:U})),O}function dt(D){const g=[];return A.value.forEach(G=>{G.selected&&g.push(G.concept_id)}),fa([D],g)==!0?(Re("Client is allergic to the selected medication",4e3),!0):!1}async function ha(){return(await pa(C.value)).length>0?C.value.length!=0:!1}function fa(D,g){try{return D.some(F=>g.includes(F.concept_id))}catch(F){return!1}}function va(D){D&&(C.value=D.name,x.value=D.drug_id,W.value=D.units,V.value=D,dt(D))}function ga(D){const g=$.value[D],F=$e();F.removeDrugById(g.drug_id),F.editingDrugItem=g,x.value="",C.value="",E.value="",le.value=null,k.value="",H.value="",we.value=null,oe.value=null,x.value=g.drug_id,C.value=g.drugName,E.value=g.dose,le.value={label:g.frequency,code:g.frequency_code},k.value=g.duration,H.value=g.prescription;const G=z.value.find(O=>O.name===g.drugName);G&&(we.value=G),oe.value={concept_id:g.route_concept_id,name:g.route_name},_.value=!1,l.value++}function _a(){if(ne.value!==null){x.value="",C.value="",E.value="",le.value=null,k.value="",H.value="",we.value=null,oe.value=null;const D=$e();D.setSelectedMedicalDrugsList([ne.value]),D.editingDrugItem=null}_.value=!0,l.value++}function ya(D){$.value.splice(D,1),l.value++,Re("you have removed a drug from list",6e3)}function ba(D){let g=D.target.value;Da(g)}function Da(D){$e().setNonPharmalogicalTherapyAndOtherNotes(D)}function Ot(D){return/^[0-9]+$/.test(D)}function Et(D,g){const F=new Date(D);F.setDate(F.getDate()+g);const G=F.getFullYear(),O=String(F.getMonth()+1).padStart(2,"0"),U=String(F.getDate()).padStart(2,"0");return"".concat(G,"-").concat(O,"-").concat(U)}function ka(){y.value=!1,c.value=!0,_.value=!0}function Sa(D){xe.filter(F=>F!==D.detail.value);const g=D.detail.value;g!==void 0?g=="third"&&(qe.value="Show less notes",Ze.value=!Le.value):(qe.value="Show more notes",Ze.value=!Le.value)}function wa(D){xe.filter(F=>F!==D.detail.value);const g=D.detail.value;g!==void 0?g=="fith"&&(Be.value="Show less allegies",et.value=!Le.value):(Be.value="Show more allegies",et.value=!Le.value)}function Lt(D){return D[1]}function Ca(D){(D.key==="Enter"||D.key==="ArrowDown")&&(D.preventDefault(),It())}const Ce=ce(()=>[{showAddItemButton:!0,addItemButton:!0,name:ne.value!==null?"Update":"ADD",btnFill:"clear",fn:It},{showAddItemButton:!0,addItemButton:!0,name:"CANCEL",btnFill:"clear",fn:_a}]);return(D,g)=>{const F=S("ion-chip"),G=S("ion-text");return s(),M(h(ie),null,{default:i(()=>[n("div",cl,[a(h(ee),{class:"section-title"},{default:i(()=>[a(h(He),{icon:h(Wt),class:"alert-icon"},null,8,["icon"]),a(h(ee),null,{default:i(()=>g[9]||(g[9]=[N("Allergies (Medication, Healthcare items, Environment and Food)")])),_:1,__:[9]})]),_:1}),n("div",ul,[A.value.some(O=>O.selected)?(s(),o("div",ml,[(s(!0),o(T,null,q(A.value,(O,U)=>Qa((s(),o("div",{key:U,class:"allergy-item"},[a(F,{class:"allergy-chip",color:"danger"},{default:i(()=>[a(h(ee),null,{default:i(()=>[N(I(O.name),1)]),_:2},1024),a(h(He),{icon:h(Za)},null,8,["icon"])]),_:2},1024)])),[[en,O.selected]])),128))])):(s(),o("div",pl,[a(G,{style:{"font-size":"16px","font-weight":"600",color:"#9c8011"}},{default:i(()=>g[10]||(g[10]=[N("No allergies recorded")])),_:1,__:[10]})])),a(h(Ke),{ref:"accordionGroup",class:"previousView"},{default:i(()=>[a(h(Ye),{value:"fourth","toggle-icon-slot":"start",style:{"border-radius":"10px","background-color":"#fff"}},{default:i(()=>[a(h(J),{slot:"header",color:"light"},{default:i(()=>[a(h(ee),{class:"previousLabel"},{default:i(()=>g[11]||(g[11]=[N("Documented allergies timeline")])),_:1,__:[11]})]),_:1}),n("div",hl,[(s(!0),o(T,null,q(L.value,(O,U)=>(s(),o("div",{class:"ionLbltp",key:U},[U==1?(s(),o("div",fl,[n("div",null,[a(h(ee),{class:"previousLabelDate"},{default:i(()=>[N(I(O[0].date),1)]),_:2},1024)]),(s(!0),o(T,null,q(O,(re,Pe)=>(s(),o("div",{key:Pe},[n("div",vl,[a(h(ie),null,{default:i(()=>[a(h(ee),{class:"notes_p"},{default:i(()=>[N(I(re.value),1)]),_:2},1024)]),_:2},1024)])]))),128))])):b("",!0)]))),128)),a(h(Ke),{onIonChange:wa},{default:i(()=>[a(h(Ye),{value:"fith","toggle-icon-slot":"start",style:{"border-radius":"10px","background-color":"#fff"}},{default:i(()=>[a(h(J),{slot:"header",color:"light"},{default:i(()=>[a(h(ee),{class:"",color:"primary"},{default:i(()=>[N(I(Be.value),1)]),_:1})]),_:1}),n("div",gl,[(s(!0),o(T,null,q(B.value,(O,U)=>(s(),o("div",{class:"ionLbltp",key:U},[n("div",null,[a(h(ee),{class:"previousLabelDate"},{default:i(()=>[N(I(O[0]),1)]),_:2},1024)]),(s(!0),o(T,null,q(Lt(O),(re,Pe)=>(s(),o("div",{key:Pe},[n("div",_l,[a(h(ie),null,{default:i(()=>[a(h(ee),{class:"notes_p"},{default:i(()=>[N(I(re.value),1)]),_:2},1024)]),_:2},1024)])]))),128))]))),128))])]),_:1})]),_:1})])]),_:1})]),_:1},512)])]),n("div",yl,[a(h(J),{lines:"none",class:"section-header"},{default:i(()=>[a(h(He),{icon:h(yt),class:"section-icon"},null,8,["icon"]),a(h(ee),{class:"section-title",style:{"margin-top":"12px"}},{default:i(()=>g[12]||(g[12]=[N("Medication")])),_:1,__:[12]})]),_:1}),n("div",bl,[(s(),M(Pn,{_selectedMedicalDrugsList:$.value,onEditItem:ga,onRemoveItem:ya,key:l.value,class:"medication-list"},null,8,["_selectedMedicalDrugsList"])),_.value?b("",!0):(s(),o("div",Dl,[n("div",kl,[g[13]||(g[13]=n("label",{class:"input-label"},"Medication",-1)),a(h(je),{modelValue:we.value,"onUpdate:modelValue":[g[0]||(g[0]=O=>we.value=O),g[1]||(g[1]=O=>va(O))],options:z.value,searchable:!0,"close-on-select":!0,"show-labels":!1,placeholder:"Select medication",label:"name","track-by":"drug_id",onSearchChange:g[2]||(g[2]=O=>ma(O))},{option:i(O=>[n("div",Sl,I(O.option.name),1)]),_:1},8,["modelValue","options"]),rt.value?(s(),o("div",wl,I(ea.value),1)):b("",!0)]),n("div",Cl,[n("div",Il,[g[14]||(g[14]=n("label",{class:"input-label"},"Route",-1)),a(h(je),{modelValue:oe.value,"onUpdate:modelValue":[g[3]||(g[3]=O=>oe.value=O),g[4]||(g[4]=O=>na(O))],options:aa.value,searchable:!0,"close-on-select":!0,"show-labels":!1,placeholder:"Select route",label:"name","track-by":"concept_id"},null,8,["modelValue","options"]),ot.value?(s(),o("div",Ol,I(Qt.value),1)):b("",!0)]),n("div",El,[g[15]||(g[15]=n("label",{class:"input-label"},"Frequency",-1)),a(h(je),{modelValue:le.value,"onUpdate:modelValue":[g[5]||(g[5]=O=>le.value=O),g[6]||(g[6]=O=>ua(O))],options:h(m),searchable:!0,"close-on-select":!0,"show-labels":!1,placeholder:"Select frequency",label:"label","track-by":"code"},null,8,["modelValue","options"]),lt.value?(s(),o("div",Ll,I(Zt.value),1)):b("",!0)]),n("div",Pl,[g[16]||(g[16]=n("label",{class:"input-label"},"Duration (days)",-1)),a(h(nt),{modelValue:k.value,"onUpdate:modelValue":g[7]||(g[7]=O=>k.value=O),type:"number",inputmode:"numeric",pattern:"[0-9]*",fill:"outline",placeholder:"Enter duration",onKeydown:Ca},null,8,["modelValue"]),w.value?(s(),o("div",Ml,I(u.value),1)):b("",!0)])]),n("div",Al,[Ce.value[0].addItemButton?(s(),M(fe,{key:0,name:Ce.value[0].name,fill:Ce.value[0].btnFill,icon:h(zt),"onClicked:btn":Ce.value[0].fn,class:"save-button"},null,8,["name","fill","icon","onClicked:btn"])):b("",!0),Ce.value[1].addItemButton?(s(),M(fe,{key:1,name:Ce.value[1].name,fill:Ce.value[1].btnFill,icon:h(Yt),"onClicked:btn":Ce.value[1].fn,class:"cancel-button"},null,8,["name","fill","icon","onClicked:btn"])):b("",!0)])])),_.value?(s(),M(fe,{key:1,name:ae,fill:de,icon:h(qt),"onClicked:btn":da,class:"add-new-button"},null,8,["icon"])):b("",!0)])]),n("div",xl,[a(h(J),{lines:"none",class:"section-header"},{default:i(()=>[a(h(He),{icon:h(tn),class:"section-icon"},null,8,["icon"]),a(h(ee),{class:"section-title"},{default:i(()=>g[17]||(g[17]=[N("Non-pharmacological therapy and other notes")])),_:1,__:[17]})]),_:1}),n("div",Bl,[a(Mn,{class:"intervention-component"}),n("div",$l,[a(h(J),{class:"notes-input-item"},{default:i(()=>[a(h(He),{slot:"start",icon:h(t).editPen,class:"edit-icon","aria-hidden":"true"},null,8,["icon"]),a(h(an),{modelValue:X.value,"onUpdate:modelValue":g[8]||(g[8]=O=>X.value=O),onIonInput:ba,placeholder:"Enter notes here...","auto-grow":!0,class:"notes-textarea",fill:"outline",style:{"--padding-start":"16px"}},null,8,["modelValue"])]),_:1})]),a(h(Ke),{ref:"accordionGroup",class:"previous-notes"},{default:i(()=>[a(h(Ye),{value:"fourth","toggle-icon-slot":"start"},{default:i(()=>[a(h(J),{slot:"header",color:"light",class:"previous-notes-header"},{default:i(()=>[a(h(ee),null,{default:i(()=>g[18]||(g[18]=[N("Previous visit notes")])),_:1,__:[18]})]),_:1}),n("div",Hl,[n("div",Nl,[D.index===1?(s(!0),o(T,{key:0},q(Qe.value,(O,U)=>(s(),o("div",{key:U,class:"note-entry"},[(s(!0),o(T,null,q(O,(re,Pe)=>(s(),o("div",{key:Pe},[n("div",Rl,I(re.date),1),n("div",Vl,I(re.notes),1)]))),128))]))),128)):b("",!0),a(h(Ke),{onIonChange:Sa},{default:i(()=>[a(h(Ye),{value:"third","toggle-icon-slot":"start"},{default:i(()=>[a(h(J),{slot:"header",color:"light",class:"show-more-header"},{default:i(()=>[a(h(ee),{color:"primary"},{default:i(()=>[N(I(qe.value),1)]),_:1})]),_:1}),n("div",Fl,[(s(!0),o(T,null,q(Ue.value,(O,U)=>(s(),o("div",{key:U,class:"note-entry"},[(s(!0),o(T,null,q(Lt(O),(re,Pe)=>(s(),o("div",{key:Pe},[n("div",Tl,I(re.date),1),n("div",Ul,I(re.notes),1)]))),128))]))),128))])]),_:1})]),_:1})])])]),_:1})]),_:1},512)])])]),_:1})}}}),vr=Z(Wl,[["__scopeId","data-v-4ccce574"]]),Gl=Y({name:"xxxComponent"}),zl=Y({...Gl,emits:["dataSaved"],setup(e,{emit:t}){const m=d(),y=d("gurdian phone number");d(!0),d(!0);const c=d(!0),_=d(),l=d();Xe(async()=>{Ze()});const f=[{placeHolder:{default:"Enter time of death if known"},property_name:"timeOfDeath",dataHandler:x,dataValue:d(),show_error:d(!1),error_message:"Time required",type:"time",skip_validation:!1},{placeHolder:{default:"Enter time arrived"},property_name:"timeArrived",dataHandler:ae,dataValue:d(),show_error:d(!1),error_message:"Time required",type:"time",skip_validation:!1},{placeHolder:{default:"Enter time confirming death"},property_name:"timeOfDeathConfirmation",dataHandler:de,dataValue:d(),show_error:d(!1),error_message:"Time required",skip_validation:!1}],v=[{placeHolder:{default:"Enter date of death"},property_name:"dateOfDeath",dataHandler:Q,dataValue:d(),show_error:d(!1),error_message:"Date required",type:"date",skip_validation:!1},{placeHolder:{default:"Enter date arrived"},property_name:"dateArrived",dataHandler:P,dataValue:d(),show_error:d(!1),error_message:"Date required",type:"date",skip_validation:!1},{placeHolder:{default:"Enter date confirming death"},property_name:"dateOfDeathConfirmation",dataHandler:A,dataValue:d(),show_error:d(!1),error_message:"Date required",type:"date",skip_validation:!1}],p=[{lblTxt:"Was the individual pregnant at the time of death?",value:d(!1),disable_checkbox:d(!0)}],r=[{placeHolder:"Enter place of death",property_name:"placeOfDeath",dataHandler:$,dataValue:d(),show_error:d(!1),error_message:"Input required, Only letters allowed",type:"text",skip_validation:!1},{placeHolder:"Enter name of guardian",property_name:"nameOfGuardian",dataHandler:z,dataValue:d(),show_error:d(!1),error_message:"Input required, Only letters allowed",type:"text",skip_validation:!1},{placeHolder:"Enter name of person confirming death",property_name:"nameOfPersonConfirmindDeath",dataHandler:X,dataValue:d(),show_error:d(!1),error_message:"Input required, Only letters allowed",type:"text",skip_validation:!1},{placeHolder:"Enter position of the person confirming death",property_name:"positionOfthePersonConfirmingDeath",dataHandler:xe,dataValue:d(),show_error:d(!1),error_message:"Input required, Only letters allowed",type:"text",skip_validation:!1},{placeHolder:"Enter medical council registration number of the person confirming death",property_name:"medicalConcilRegistrationNumberOfThePersonConfirmingDeath",dataHandler:Te,dataValue:d(),show_error:d(!1),error_message:"Input required, Only letters and numbers are allowed",type:"alphanumeric",skip_validation:!1},{placeHolder:"Other (specify)",property_name:"otherNotes",dataHandler:Qe,dataValue:d(),show_error:d(!1),error_message:"Input required, Only letters allowed",dissabled:c.value,type:"text",skip_validation:!0}],u=[{showAddItemButton:!0,addItemButton:!0,name:"save",btnFill:"clear",fn:et},{showAddItemButton:!0,addItemButton:!0,name:"cancel",btnFill:"clear",fn:k}],w=d([{id:1,name:"Natural",selected:!1},{id:2,name:"Accident",selected:!1},{id:3,name:"Homicide",selected:!1},{id:4,name:"Suicide",selected:!1},{id:5,name:"Pending investigation",selected:!1},{id:6,name:"Could not be determined",selected:!1},{id:7,name:"Other - specify",selected:!1}]),C=d([{id:1,name:"Motor vehicle (passenger)",selected:!1},{id:2,name:"Motor vehicle (pedestrian)",selected:!1},{id:3,name:"Drowning",selected:!1},{id:4,name:"Other - specify",selected:!1}]),E=[{multi_Selection:!1,manner_of_death_Selection_value:d(),show_list_label:!0,unqueId:"qwerty",name_of_list:"Manner of death ",property_name:"mannerOfDeath",placeHolder:"Choose one",items:w.value,listUpdatedFN:Ue,listFilteredFN:()=>{},use_internal_filter:!0,disabled:d(!1),show_error:d(!1),error_message:"selection required"},{multi_Selection:!1,show_list_label:!0,unqueId:"qwerty1hjkn",name_of_list:"How did it occur?",property_name:"howDiditOccur",placeHolder:"Choose one",items:C.value,listUpdatedFN:Le,listFilteredFN:()=>{},use_internal_filter:!0,disabled:d(!0),show_error:d(!1),error_message:"selection required"}];function k(){W()}const H=t;function W(L={dataSaved:!0}){H("dataSaved",L)}function x(L){f[0].dataValue.value=L}function ae(L){f[1].dataValue.value=L}function de(L){f[2].dataValue.value=L}function Q(L){const B={day:L.value.day,month:L.value.month,year:L.value.year,formattedDate:L.value.formattedDate};v[0].dataValue.value=B}function P(L){const B={day:L.value.day,month:L.value.month,year:L.value.year,formattedDate:L.value.formattedDate};v[1].dataValue.value=B,console.log(v[2].dataValue.value)}function A(L){const B={day:L.value.day,month:L.value.month,year:L.value.year,formattedDate:L.value.formattedDate};v[2].dataValue.value=B,console.log(v[2].dataValue.value)}function $(L){const B=L.target.value;r[0].dataValue.value=B}function z(L){const B=L.target.value;r[1].dataValue.value=B}function X(L){const B=L.target.value;r[2].dataValue.value=B}function xe(L){const B=L.target.value;r[3].dataValue.value=B}function Te(L){const B=L.target.value;r[4].dataValue.value=B}function Qe(L){const B=L.target.value;r[5].dataValue.value=B}function Ue(L){w.value.forEach(V=>V.selected=!1);const B=w.value.find(V=>V.id==L.id);E[1].disabled.value=L.name!="Accident",B.selected=!0}function Le(L){console.log("listUpdated",L),C.value.forEach(V=>V.selected=!1);const B=C.value.find(V=>V.id==L.id);B.selected=!0}function Ze(){const B=new Jt().isChildBearing;B==!0&&(p[0].disable_checkbox.value=!1),B==!1&&(p[0].disable_checkbox.value=!0)}function et(){ht(r),ht(v),ht(f),qe();const L=ge.merge(ft(r),ft(v),ft(f),Be(E[0]),Be(E[1]));console.log(L)}function qe(){const L=w.value.filter(B=>B.selected);if(L.length==0)E[0].show_error.value=!0;else if(E[0].show_error.value=!1,L[0].name=="Accident"){const B=C.value.filter(V=>V.selected);E[1].show_error.value=B.length==0}}function Be(L){const B=[];let V={};return L.items.forEach(ne=>{ne.selected==!0&&B.push({property_name:L.property_name,name:ne.name})}),B.length>0&&(V[B[0].property_name]=B[0].name),V}return(L,B)=>{const V=S("ion-label");return s(),o(T,null,[a(h(pe),{class:"checkbox_content md"},{default:i(()=>[a(h(K),null,{default:i(()=>[a(ve,{placeholder:r[0].placeHolder,icon:h(nn),inputValue:r[0].dataValue.value,"onUpdate:inputValue":r[0].dataHandler},null,8,["placeholder","icon","inputValue","onUpdate:inputValue"]),n("div",null,[r[0].show_error.value?(s(),M(V,{key:0,class:"error-label"},{default:i(()=>[N(I(r[0].error_message),1)]),_:1})):b("",!0)])]),_:1}),a(h(K),null,{default:i(()=>[a(Ht,{place_holder:v[0].placeHolder,onDateUpDated:v[0].dataHandler,date_prop:""},null,8,["place_holder","onDateUpDated"]),n("div",null,[v[0].show_error.value?(s(),M(V,{key:0,class:"error-label"},{default:i(()=>[N(I(v[0].error_message),1)]),_:1})):b("",!0)])]),_:1})]),_:1}),a(h(pe),null,{default:i(()=>[a(h(K),null,{default:i(()=>[a(vt,{place_holder:f[0].placeHolder,onTimeUpDated:f[0].dataHandler,time_prop:""},null,8,["place_holder","onTimeUpDated"]),n("div",null,[f[0].show_error.value?(s(),M(V,{key:0,class:"error-label"},{default:i(()=>[N(I(f[0].error_message),1)]),_:1})):b("",!0)])]),_:1}),a(h(K))]),_:1}),a(h(pe),{class:"checkbox_content md"},{default:i(()=>[a(h(K),null,{default:i(()=>[a(ve,{placeholder:r[1].placeHolder,icon:h(Mt),inputValue:r[1].dataValue.value,"onUpdate:inputValue":r[1].dataHandler},null,8,["placeholder","icon","inputValue","onUpdate:inputValue"]),n("div",null,[r[1].show_error.value?(s(),M(V,{key:0,class:"error-label"},{default:i(()=>[N(I(r[1].error_message),1)]),_:1})):b("",!0)])]),_:1}),a(h(K),null,{default:i(()=>[a(h(sn),{value:p[0].value,alignment:"start",class:"ion-lblCls",disabled:p[0].disable_checkbox.value},{default:i(()=>[N(I(p[0].lblTxt),1)]),_:1},8,["value","disabled"])]),_:1})]),_:1}),a(h(pe),null,{default:i(()=>[a(h(K),null,{default:i(()=>[a(ve,{placeholder:y.value,icon:h(on),inputValue:m.value},null,8,["placeholder","icon","inputValue"])]),_:1}),a(h(K))]),_:1}),a(h(pe),null,{default:i(()=>[a(h(K),null,{default:i(()=>[a(Ht,{place_holder:v[1].placeHolder,onDateUpDated:v[1].dataHandler,date_prop:""},null,8,["place_holder","onDateUpDated"]),n("div",null,[v[1].show_error.value?(s(),M(V,{key:0,class:"error-label"},{default:i(()=>[N(I(v[1].error_message),1)]),_:1})):b("",!0)])]),_:1}),a(h(K),null,{default:i(()=>[a(vt,{place_holder:f[1].placeHolder,onTimeUpDated:f[1].dataHandler,time_prop:""},null,8,["place_holder","onTimeUpDated"]),n("div",null,[f[1].show_error.value?(s(),M(V,{key:0,class:"error-label"},{default:i(()=>[N(I(f[1].error_message),1)]),_:1})):b("",!0)])]),_:1})]),_:1}),a(h(pe),null,{default:i(()=>[a(h(K),null,{default:i(()=>[a(h(je),{modelValue:_.value,"onUpdate:modelValue":[B[0]||(B[0]=ne=>_.value=ne),B[1]||(B[1]=ne=>Ue(ne))],multiple:!1,taggable:!1,"hide-selected":!0,"close-on-select":!0,openDirection:"bottom","tag-placeholder":"Manner of death",placeholder:"Manner of death",selectLabel:"",label:"name",searchable:!0,"track-by":"id",options:w.value},null,8,["modelValue","options"]),n("div",null,[E[0].show_error.value?(s(),M(V,{key:0,class:"error-label"},{default:i(()=>[N(I(E[0].error_message),1)]),_:1})):b("",!0)])]),_:1}),a(h(K),null,{default:i(()=>[a(h(je),{modelValue:l.value,"onUpdate:modelValue":[B[2]||(B[2]=ne=>l.value=ne),B[3]||(B[3]=ne=>Le(ne))],multiple:!1,taggable:!1,"hide-selected":!0,"close-on-select":!0,openDirection:"bottom","tag-placeholder":"How did it occur?",placeholder:"How did it occur?",selectLabel:"",label:"name",disabled:E[1].disabled.value,searchable:!0,"track-by":"id",options:C.value},null,8,["modelValue","disabled","options"]),n("div",null,[E[1].show_error.value?(s(),M(V,{key:0,class:"error-label"},{default:i(()=>[N(I(E[1].error_message),1)]),_:1})):b("",!0)])]),_:1})]),_:1}),a(h(pe),null,{default:i(()=>[a(h(K),null,{default:i(()=>[a(ve,{placeholder:r[5].placeHolder,icon:h(At),inputValue:r[5].dataValue.value,disabled:c.value,"onUpdate:inputValue":r[5].dataHandler},null,8,["placeholder","icon","inputValue","disabled","onUpdate:inputValue"]),n("div",null,[r[5].show_error.value?(s(),M(V,{key:0,class:"error-label"},{default:i(()=>[N(I(r[5].error_message),1)]),_:1})):b("",!0)])]),_:1})]),_:1}),a(h(pe),null,{default:i(()=>[a(h(K),null,{default:i(()=>[a(vt,{place_holder:f[2].placeHolder,onTimeUpDated:f[2].dataHandler,time_prop:""},null,8,["place_holder","onTimeUpDated"]),n("div",null,[f[2].show_error.value?(s(),M(V,{key:0,class:"error-label"},{default:i(()=>[N(I(f[2].error_message),1)]),_:1})):b("",!0)])]),_:1}),a(h(K),null,{default:i(()=>[a(ve,{placeholder:r[2].placeHolder,icon:h(Mt),inputValue:r[2].dataValue.value,"onUpdate:inputValue":r[2].dataHandler},null,8,["placeholder","icon","inputValue","onUpdate:inputValue"]),n("div",null,[r[2].show_error.value?(s(),M(V,{key:0,class:"error-label"},{default:i(()=>[N(I(r[2].error_message),1)]),_:1})):b("",!0)])]),_:1})]),_:1}),a(h(pe),null,{default:i(()=>[a(h(K),null,{default:i(()=>[a(ve,{placeholder:r[3].placeHolder,icon:h(yt),inputValue:r[3].dataValue.value,"onUpdate:inputValue":r[3].dataHandler},null,8,["placeholder","icon","inputValue","onUpdate:inputValue"]),n("div",null,[r[3].show_error.value?(s(),M(V,{key:0,class:"error-label"},{default:i(()=>[N(I(r[3].error_message),1)]),_:1})):b("",!0)])]),_:1}),a(h(K),null,{default:i(()=>[a(ve,{placeholder:r[4].placeHolder,icon:h(At),inputValue:r[4].dataValue.value,"onUpdate:inputValue":r[4].dataHandler},null,8,["placeholder","icon","inputValue","onUpdate:inputValue"]),n("div",null,[r[4].show_error.value?(s(),M(V,{key:0,class:"error-label"},{default:i(()=>[N(I(r[4].error_message),1)]),_:1})):b("",!0)])]),_:1})]),_:1}),(s(),M(h(pe),{key:0,class:"spc_btwn"},{default:i(()=>[u[0].addItemButton?(s(),M(fe,{key:0,name:u[0].name,fill:u[0].btnFill,icon:h(zt),"onClicked:btn":u[0].fn},null,8,["name","fill","icon","onClicked:btn"])):b("",!0),u[1].addItemButton?(s(),M(fe,{key:1,name:u[1].name,fill:u[1].btnFill,icon:h(Yt),"onClicked:btn":u[1].fn},null,8,["name","fill","icon","onClicked:btn"])):b("",!0)]),_:1}))],64)}}}),Yl=Z(zl,[["__scopeId","data-v-0aad2f08"]]),Kl={class:"dash_box"},jl={key:1},Jl=Y({name:"xxxComponent"}),Xl=Y({...Jl,setup(e){const t=d("No outcome created yet"),m=d(!1),y=d("please select a type");d("Add new outcome"),d(!0);const c=d(!0),_=d(""),l=d(!0),f=d(!1),v=Cn(),p=ce(()=>v.outcomes),r=d(!1),u=d(!1),w=d(!1),C=d(!1),E=d(!1);d(null),d(null);const k=d([{name:"Admitted for short stay",selected:!1},{name:"Referred out",selected:!1},{name:"Discharged Home",selected:!1},{name:"Death",selected:!1}]),H=[{multi_Selection:!1,show_list_label:!0,unqueId:"qwerty2",name_of_list:"Add new outcome",placeHolder:"Choose one",items:k.value,listUpdatedFN:W,listFilteredFN:()=>{},use_internal_filter:!0,disabled:d(!1)}];function W($){k.value=$,k.value.forEach(z=>{z.selected==!0&&(_.value=z.name)})}Xe(async()=>{ae()}),Me(()=>_.value,async $=>{r.value==!0?r.value=!1:P()}),Me(()=>p.value.length,async $=>{ae()});function x(){k.value.forEach($=>{$.selected=!1}),_.value=""}function ae(){p.value.length>0?l.value=!1:p.value.length==0&&f.value==!1&&(l.value=!0)}function de($){p.value.splice($,1)}const Q=$=>{};async function P($=!0){const z=_.value;console.log(z),_.value=z;const X=_.value;X==k.value[0].name?w.value=!0:w.value=!1,X==k.value[1].name?(C.value=!0,console.log("show_discharged_options is set to true")):C.value=!1,X==k.value[2].name?(E.value=!0,console.log("show_discharged_options is set to true")):E.value=!1,X==k.value[3].name?u.value=!0:u.value=!1}function A(){u.value=!1,w.value=!1,C.value=!1,E.value=!1,x()}return($,z)=>{const X=S("ion-row");return s(),M(h(ie),null,{default:i(()=>[a(X,null,{default:i(()=>[a(h(K),null,{default:i(()=>[(s(),M(Tn,{key:0,"onUpdate:removeItem":de,"onUpdate:editItem":Q,displayData:p.value},null,8,["displayData"]))]),_:1})]),_:1}),l.value?(s(),M(X,{key:0},{default:i(()=>[n("span",Kl,I(t.value),1)]),_:1})):b("",!0),c.value?(s(),o("div",jl,[a(X,null,{default:i(()=>[a(h(K),null,{default:i(()=>[a(In,{multiSelection:H[0].multi_Selection,show_label:H[0].show_list_label,uniqueId:H[0].unqueId,name_of_list:H[0].name_of_list,choose_place_holder:H[0].placeHolder,"items_-list":H[0].items,use_internal_filter:H[0].use_internal_filter,disabled:H[0].disabled.value,onItemListUpDated:H[0].listUpdatedFN,onItemListFiltered:H[0].listFilteredFN},null,8,["multiSelection","show_label","uniqueId","name_of_list","choose_place_holder","items_-list","use_internal_filter","disabled","onItemListUpDated","onItemListFiltered"]),n("div",null,[m.value?(s(),M(h(ee),{key:0,class:"error-label"},{default:i(()=>[N(I(y.value),1)]),_:1})):b("",!0)])]),_:1})]),_:1})])):b("",!0),w.value?(s(),M(Un,{key:2,onDataSaved:A,selected_ward_prop:"",admitted_other_props:""})):b("",!0),C.value?(s(),M(qn,{key:3,onDataSaved:A,selected_referral_data:"",selected_other_referral_data:""})):b("",!0),E.value?(s(),M(Wn,{key:4,onDataSaved:A,selected_discharged_prop:"",selected_discharged_data:""})):b("",!0),u.value?(s(),M(Yl,{key:5,onDataSaved:A})):b("",!0)]),_:1})}}}),gr=Z(Xl,[["__scopeId","data-v-80c43a7c"]]);export{pr as C,fr as I,qi as L,hr as O,ro as P,vr as a,gr as b,Zn as c,Yi as d,ao as e,Ro as l};
