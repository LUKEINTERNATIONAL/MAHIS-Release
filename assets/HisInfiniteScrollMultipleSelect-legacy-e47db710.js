System.register(["./index-legacy-e5c0f927.js","./KbHandler-legacy-e04fc4ad.js","./BaseTextInput-legacy-4f0344cb.js","./FieldMixin.vue_vue_type_script_lang-legacy-b193aee1.js"],(function(e,t){"use strict";var i,l,s,a,n,o,d,c,h,r,u,f,m,k,b,p,v,y,g,I,C,w,x,D,_,S,K,V,L,j;return{setters:[e=>{i=e.d,l=e.a9,s=e.aa,a=e.ab,n=e.$,o=e.m,d=e.am,c=e.an,h=e.ao,r=e.ap,u=e.aq,f=e.ar,m=e.b,k=e.c,b=e.o,p=e.a0,v=e.q,y=e.f,g=e.e,I=e.af,C=e.a1,w=e.a2,x=e.s,D=e.a3,_=e.t,S=e.a4},e=>{K=e.H,V=e.k},e=>{L=e.default},e=>{j=e._}],execute:function(){const t=i({name:"HisInfiniteScrollMultipleSelect",mixins:[j],components:{IonCheckbox:l,IonText:s,IonChip:a,ViewPort:n,HisTextInput:L,IonContent:o,IonList:d,IonItem:c,IonLabel:h,HisKeyboard:K,IonInfiniteScroll:r,IonInfiniteScrollContent:u},data:()=>({showKeyboard:!1,keyboard:f,listData:[],checkedItems:[],disableScroll:!1,filter:"",selected:"",page:1,limit:10}),watch:{clear(){this.checkedItems=[],this.filter="",this.selected=""},checkedItems:{handler(e){this.listData.forEach((t=>{e.find((e=>e.value===t.value))?t.isChecked=!0:t.isChecked=!1})),this.$emit("onValue",e)},deep:!0,immediate:!0},filter:{async handler(){this.page=1,this.disableScroll=!1;const e=await this.getListData();[...this.checkedItems].forEach((t=>{const i=e.findIndex((e=>e.value===t.value));-1===i?e.push(t):e[i].isChecked=!0})),this.listData=e}}},mounted(){this.init()},activated(){this.init()},methods:{async init(){this.$emit("onFieldActivated",this),this.listData=await this.getListData()},async getListData(){return await this.options(this.fdata,this.filter,this.page,this.limit)},async keypress(e){this.filter||(this.selected=""),this.filter=V(e,this.selected),this.selected=this.filter},async onKBValue(e){this.listData&&this.selected!==e&&(this.filter=e,this.selected=this.filter)},async pushData(e){this.page++;const t=await this.getListData();var i,l;t.length>0?this.listData=(i=[...this.listData,...t.filter((e=>!this.listData.find((t=>t.value===e.value))))],l="label",[...new Map(i.filter(Boolean).map((e=>[Array.isArray(l)?l.map((t=>e[t])).join("_"):e[l],e]))).values()]):this.disableScroll=!0,e.target.complete()},onSelect(e){this.$nextTick((async()=>{e.isChecked?-1===this.checkedItems.findIndex((t=>t.value===e.value))&&this.checkedItems.push(e):this.unCheck(e)}))},unCheck(e){this.checkedItems=this.checkedItems.filter((t=>t.value!==e.value))}},created(){var e,t,i,l,s,a,n,o;this.showKeyboard=null!==(e=null===(t=this.config)||void 0===t?void 0:t.showKeyboard)&&void 0!==e&&e,this.keyboard=null!==(i=null===(l=this.config)||void 0===l?void 0:l.keyboard)&&void 0!==i?i:f,this.page=null!==(s=null===(a=this.config)||void 0===a?void 0:a.page)&&void 0!==s?s:1,this.limit=null!==(n=null===(o=this.config)||void 0===o?void 0:o.limit)&&void 0!==n?n:10}});e("default",m(t,[["render",function(e,t,i,l,s,a){const n=k("his-text-input"),o=k("ion-chip"),d=k("ion-text"),c=k("ion-label"),h=k("ion-checkbox"),r=k("ion-item"),u=k("ion-list"),f=k("ion-infinite-scroll-content"),m=k("ion-infinite-scroll"),K=k("ion-content"),V=k("view-port"),L=k("his-keyboard");return b(),p(C,null,[v(V,{showFull:!e.showKeyboard},{default:y((()=>[e.showKeyboard?(b(),g(n,{key:0,value:e.selected,onOnValue:e.onKBValue},null,8,["value","onOnValue"])):I("",!0),(b(!0),p(C,null,w(e.checkedItems,((t,i)=>(b(),g(o,{color:"danger",key:i,onClick:i=>e.unCheck(t)},{default:y((()=>[x(D(t.label),1)])),_:2},1032,["onClick"])))),128)),v(K,{style:{width:"100%"},class:"ion-padding-bottom"},{default:y((()=>[_("div",{class:S(["ion-content-scroll-host",{"ion-margin-bottom ion-padding-bottom":e.disableScroll}])},[v(u,{class:S(["view-port-content",{"ion-margin-bottom":e.disableScroll}])},{default:y((()=>[(b(!0),p(C,null,w(e.listData,((t,i)=>(b(),g(r,{key:i,color:t.isChecked?"lightblue":"",lines:t.isChecked?"none":""},{default:y((()=>[v(c,null,{default:y((()=>{var e;return[v(d,{class:"his-md-text"},{default:y((()=>[x(D(t.label),1)])),_:2},1024),t.description&&t.isChecked?(b(),g(d,{key:0,color:null===(e=t.description)||void 0===e?void 0:e.color},{default:y((()=>[_("p",null,[_("i",null,D(t.description.text),1)])])),_:2},1032,["color"])):I("",!0)]})),_:2},1024),v(h,{slot:"start",modelValue:t.isChecked,"onUpdate:modelValue":e=>t.isChecked=e,onIonChange:i=>e.onSelect(t),disabled:t.disabled},null,8,["modelValue","onUpdate:modelValue","onIonChange","disabled"])])),_:2},1032,["color","lines"])))),128))])),_:1},8,["class"]),v(m,{onIonInfinite:t[0]||(t[0]=t=>e.pushData(t)),threshold:"100px",disabled:e.disableScroll},{default:y((()=>[v(f,{"loading-spinner":"crescent","loading-text":"Loading more data..."})])),_:1},8,["disabled"])],2)])),_:1})])),_:1},8,["showFull"]),e.showKeyboard?(b(),g(L,{key:0,kbConfig:e.keyboard,onKeyPress:e.keypress},null,8,["kbConfig","onKeyPress"])):I("",!0)],64)}]]))}}}));
