import{d as I,S as e,L as r,s as o}from"./index-P4Jf1B8-.js";import{r as a,c as p,w}from"./vendor-Bn90Jqlj.js";function P(){const l=a([]),c=a([]),n=a([]),u=a([]),g=a(null),f=a([]),D=a([]),d=a(null),v=a(null),i=a(!1),h=I(),A=p(()=>h.apiStatus);w(d,async t=>{if(t)try{c.value=await S(t)}catch(s){c.value=[]}else c.value=[]}),w(v,async t=>{if(t)try{n.value=await y(t)}catch(s){n.value=[]}else n.value=[]});const y=async t=>{try{return e.getAPIStatus()&&!e.getModsStatus()&&!e.getUseIndexDBStatus()?await r.getVillages(t):await o("villages",{whereClause:{traditional_authority_id:t}})}catch(s){return console.error("Error getting villages:",s),[]}},S=async t=>{try{return e.getAPIStatus()&&!e.getModsStatus()&&!e.getUseIndexDBStatus()?await r.getTraditionalAuthorities(t):await o("TAs",{whereClause:{district_id:t}})}catch(s){return console.error("Error getting TAs:",s),[]}};return{districtList:l,countriesList:u,locations:D,isLoading:i,selectedDistrictId:d,TAs:c,villages:n,selectedTraditionalAuthorityId:v,facilityList:f,countryID:g,apiStatus:A,getVillages:y,getTAs:S,getDistricts:async()=>{i.value=!0;try{if(e.getAPIStatus()&&!e.getModsStatus()&&!e.getUseIndexDBStatus())for(let t of[1,2,3]){const s=await r.getDistricts(t);l.value.push(...s)}else l.value=await o("districts");return l.value}catch(t){console.error("Error loading location data:",t)}finally{i.value=!1}},getCountries:async()=>{i.value=!0;try{return e.getAPIStatus()&&!e.getModsStatus()&&!e.getUseIndexDBStatus()?u.value=await r.getDistricts(4):u.value=await o("countries"),u.value}catch(t){console.error("Error loading location data:",t)}finally{i.value=!1}},getFacilities:async()=>{f.value=await r.getAllFacilities()},getCountryID:async t=>{let s;e.getAPIStatus()&&!e.getModsStatus()&&!e.getUseIndexDBStatus()?s=await r.getDistricts(4,t):s=await o("countries",{whereClause:{name:t}}),g.value=s[0].district_id}}}export{P as u};
