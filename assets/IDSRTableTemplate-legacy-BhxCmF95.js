System.register(["./ReportMixin.vue_vue_type_script_lang-legacy-CbaZDJpv.js","./index-legacy-C36ToXGF.js","./vendor-legacy-DCadV7Tl.js"],function(e,t){"use strict";var s,n,o,r,a,i,l,d,c,h,u;return{setters:[e=>{s=e.H,n=e.t,o=e.I},e=>{r=e.S,a=e._},e=>{i=e.d,l=e.z,d=e.H,c=e.e,h=e.f,u=e.l}],execute:function(){const t=i({components:{ReportTable:s},data:function(){return{conditions:[],lessThanFiveYears:" < 5 yrs ",greaterAndEqualFiveYears:" >= 5 yrs ",total:" Total ",tableCssTheme:"opd-report-theme",rows:[],columns:[[n.thTxt("",{colspan:2,sortable:!1,exportable:!1}),n.thTxt("Out-patient Cases",{colspan:3,sortable:!1,exportable:!1})],[n.thTxt(""),n.thTxt("Diseases/Events/Conditions"),n.thTxt("< 5 yrs"),n.thTxt(">= 5 yrs"),n.thTxt("Total")]]}},props:["params","periodDates","quarter","onDrillDown"],methods:{renderResults(){const e=(new o).renderResults(this.params);e.length&&(this.conditions=e,this.rows=this.buildRows(e))},onDownload(e=""){const t=new o;let{CSVString:s}=t.getCSVString(this.conditions);s+=`\n          Date Created: ${l().format("DD/MMM/YYYY HH:MM:ss")}\n          MaHIS Version: ${r.getCoreVersion()}\n          API Version: ${r.getApiVersion()}\n          Report Period: ${this.periodDates}\n          Site: ${r.getLocationName()}\n          Site UUID: ${r.getSiteUUID()}`;const n=new Blob([s],{type:"text/csv;charset=utf-8;"}),a=navigator;if(a.msSaveBlob)a.msSaveBlob(n,"exportFilename");else{const t=document.createElement("a");t.href=window.URL.createObjectURL(n),t.setAttribute("download",`${e}.csv`),document.body.appendChild(t),t.click(),document.body.removeChild(t)}},buildRows(e){const t=[];return e.forEach(e=>{t.push([n.td(e.id,{style:{textAlign:"left"}}),n.td(e.name,{style:{textAlign:"left"}}),this.buildRow(this.lessThanFiveYears+"("+e.name+")",e.lessThanFiveYears,e.lessThanFiveYearsPatientIds),this.buildRow(this.greaterAndEqualFiveYears+"("+e.name+")",e.greaterThanEqualFiveYears,e.greaterThanEqualFiveYearsPatientIds),this.buildRow(this.total+"("+e.name+")",e.total,e.totalPatientIds)])}),t},buildRow(e,t,s){return"string"==typeof t?n.td(""):t>0?n.tdLink(t,async()=>this.onDrillDown(e,s)):n.td(0)}},watch:{params:{immediate:!0,handler(){this.renderResults()}}}}),m={class:"my-table",style:{margin:"auto",width:"95%","margin-top":"3%","margin-bottom":"3%"}};e("M",a(t,[["render",function(e,t,s,n,o,r){const a=d("report-table");return h(),c("div",m,[u(a,{columns:e.columns,rows:e.rows,config:{tableCssTheme:e.tableCssTheme}},null,8,["columns","rows","config"])])}]]))}}});
