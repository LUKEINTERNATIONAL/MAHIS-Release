const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./LabOrdersList-s1IhDS17.js","./vendor-BTebhqHt.js","./lodash-NJiRuGo9.js","../vendor.Dm4sm59p.css","../index-DBQF-8Xn.js","./apexcharts-no8IW45T.js","../index.C-kI_7Qq.css","./EnterLabResultsModal-DctlDkms.js","../EnterLabResultsModal.CFABaZbT.css","./BasicForm-7DaBPuA7.js","./DateInputField-0lrp9UXU.js","../DateInputField.YUpPNB6n.css","../BasicForm.CS8soES6.css","./useUserActivities-60ApcIW0.js","../LabOrdersList.TfoJFXpV.css","./DiagnosesHistory-C6gkc7KD.js","../DiagnosesHistory.BEA7zPYa.css","./AllergiesHistory-DbNqct_r.js","../AllergiesHistory.BdLtFHIK.css","./MedicationsHistory-C9UY7swr.js","../MedicationsHistory.DAk17UPz.css","./VisitsHistory-DIpUTIgO.js","../VisitsHistory.Dg4yoNiI.css","./VitalsMeasurementsSummary-C8hZ3met.js","../VitalsMeasurementsSummary.Bb3yaWqr.css","./PatientProfile-B2a9QlgO.js","./DemographicBar-CPy0fs0J.js","../DemographicBar.DtnnoAYr.css","./SaveProgressModal-D_8NFGJ1.js","../SaveProgressModal.DLXC0SP6.css","./Stepper-CP6P6OpM.js","./NextAppointment-Dgqwcs2A.js","./group_validation-CSCiKRrx.js","./RadiologyStore-DsLwnxwp.js","./formatServerData-DRULdCzT.js","./DashBox-DKevRKsj.js","./previousComplaints-Q0LZx8D5.js","../previousComplaints.Clw4EhHt.css","./patient_complaints_service-DHyU6P9S.js","./useFormWizard-Ccxlnnh2.js","./user_role_management-CBMMR3Y4.js","./nonPharmaTherapyStore-Di9r8tlh.js","./drug_prescription_service-nTQSIINm.js","./patient_diagnosis_service-BkQO5DWD.js","./ncd_appointment_service-vM1q5oeR.js","../NextAppointment.DrwdY6dI.css","./OPDOutcome-BINCMVfO.js","./LevelOfConsciousness.vue_vue_type_script_setup_true_lang-ecrTZXZY.js","./Outcome-Byh15Hmo.js","./wardsStore-DgQn54tV.js","../Outcome.DJopL97u.css","../OPDOutcome.BXaO1Wk3.css","./VitalsMixin.vue_vue_type_script_lang-LGh5KEX9.js","./TreatmentPlan-DBzn7ibr.js","./ComplicationsStore-r8tmvgC8.js","../TreatmentPlan.5e113TPs.css","./OPDDiagnosis-CmLKPeKH.js","../OPDDiagnosis.BeRzIzxW.css","./MedicalHistory-CRN8sZu6.js","../MedicalHistory.CU6JrgGK.css","./ReasonForVisit.vue_vue_type_script_setup_true_lang-D5DQ0qnb.js","./UpcomingFeature-DcBNwjzT.js","../UpcomingFeature.D0KC7Oer.css","./AbdominalExamination.vue_vue_type_script_setup_true_lang-BhS7x3SV.js","../AbdominalExamination.Cqsrucwx.css","./TB-BKXKO6NF.js","../TB.Bv5HcoNy.css","./ClinicalCounselling-CFZPgie3.js","../ClinicalCounselling.NmmjYQ7h.css","./useLocation-DWKEe-Fi.js","./BasicCard-Cdy7zntW.js","../BasicCard.CLPwwedX.css","./PastObstreticHistoryStore-CCzv5qbk.js","../Stepper.HblxYXg1.css","./WeightHeightChart-Cek0m5Ym.js","./chartjs-D1ac9KRx.js","../WeightHeightChart.C9ItLuK7.css","./weightAndHeight-C8s565Dn.js","./customDatePicker-7aA8wHN0.js","../customDatePicker.twJBaIU5.css","../weightAndHeight.CJuqOhq_.css","./vaccines_service-CPD8V9uh.js","./sms_service-BnFxTj4j.js","./EIRreportsStore-xF8KfXWW.js","./Export-JdaAXeIZ.js","../vaccines_service.DKZw05E0.css","./barcode-qrcode-reader-sDHsmeo-.js","./stock_service-DX-ur70j.js","./Registration-Bw_Ielpx.js","./useSetRegistrationValues-D_O_P88p.js","../useSetRegistrationValues.DXv8qQH4.css","./useNeonatalEnrollmentStore-CfCsBxiA.js","./enrollment-DU-PLRUa.js","../Registration.BCZDNUjQ.css","./AdministerOtherVaccinesStore-CMEV2ux8.js","./usePatientProfile-AYXZSB7D.js","../usePatientProfile.BRwk2gaY.css","../PatientProfile.xh9sFISw.css","./HTSPatientProfile-CKjy8pcC.js","../HTSPatientProfile.D35WQABU.css","./NeonatalPatientProfile-CS2-QuLq.js","./neonatal_service-Cya1LD0G.js","./admissionWorkflow-C1e4oic-.js","../NeonatalPatientProfile.DYI6NX7_.css","./AETCPatientProfile-DQyEbAZm.js","./CPR-C-FhmY9Y.js","./useRespiratoryRateOxygenForm-Vg4vC32L.js","../CPR.C4Sa7ms4.css","./tasks-DNOOb7fS.js","../AETCPatientProfile.CVAhPfon.css","./BloodPressure-CdOfEAfw.js","../BloodPressure.B79nW_rj.css","./AncEnrollmentModal-m6f-5b2t.js","../AncEnrollmentModal.BvDZuNSS.css","./LabourEnrollmentModal-DN9GxjCY.js","../LabourEnrollmentModal.DgSOWoB_.css","./PNCEnrollmentModal-661Sn4_h.js","../PNCEnrollmentModal.BDNYT6XY.css"])))=>i.map(i=>d[i]);
import{d as Lt,r as v,w as Mt,O as D,f as r,u as t,bw as Ct,J as n,l as a,aR as na,e as A,dX as gt,Q as d,L as k,at as sa,F as X,aS as oa,ah as ia,P as It,a6 as M,a2 as N,aM as la,k as i,K as C,cG as fe,c4 as ra,c1 as ve,aV as St,z as ua,D as da,a as _e,I as ca,G as ma,dY as pa,E as fa,N as va,aa as ge,ab as xt,bs as _a,ac as L,ad as p,p as ye,dZ as se,m as _,c6 as ga,ae as be,R as ya,am as ba,cr as Ca,b2 as ht,c as at,H as oe,cN as E,d_ as Ia,d1 as Aa,aj as Pa,ai as Da,a1 as ie,df as ka,dg as q,aD as Ea,c8 as Oa,aF as le,d2 as wa,cF as O}from"./vendor-BTebhqHt.js";import{ah as At,_ as Ht,P as Vt,ai as Ra,a9 as Na,o as Bt,aj as ha,ak as Ta,u as Ma,a as Sa,h as xa,H as G,T as Va,L as R,S as yt,D as nt,al as Tt,k as re,am as La,s as ue,F as bt,q as Ha,t as st,an as de,ao as J,J as U,ap as ce,b as F}from"../index-DBQF-8Xn.js";import{l as Ba}from"./lodash-NJiRuGo9.js";import{u as $a}from"./useUserActivities-60ApcIW0.js";import{u as Ga}from"./usePatientProfile-AYXZSB7D.js";import{D as Ua}from"./DemographicBar-CPy0fs0J.js";import{i as za}from"./tasks-DNOOb7fS.js";const Fa=Lt({__name:"ARTCard",props:{patient:{default:{}}},setup(H){const T=H,S=v(!1),w=v({artStartDate:"",arvNumber:"",fileNumber:"",currentOutcome:""}),x=async g=>{S.value=!0;try{const l=await At.getProgramInformation(g);w.value={artStartDate:(()=>{const[c,B,Y]=l.art_start_date.split("/"),K=l.art_start_date.match(/n\/a/i)?"":"(".concat(ua(At.getSessionDate()).diff("".concat(Y,"-").concat(B,"-").concat(c),"months")," Month(s))");return"".concat(l.art_start_date," ").concat(K)})(),arvNumber:"".concat(l.arv_number," | Regimen: ").concat(l.current_regimen),fileNumber:l.filing_number.number,currentOutcome:l.current_outcome}}catch(l){console.error("Error fetching ART information:",l)}finally{S.value=!1}};return Mt(()=>T.patient,g=>{g&&g.patientID?x(g.patientID):w.value={artStartDate:"--",arvNumber:"--",fileNumber:"--",currentOutcome:"--"}},{immediate:!0,deep:!0}),(g,l)=>(r(),D(t(Ct),null,{default:n(()=>[a(t(oa),null,{default:n(()=>[a(t(na),null,{default:n(()=>[S.value?(r(),D(t(gt),{key:0,animated:"",style:{width:"200px",height:"24px"}})):(r(),A(X,{key:1},[a(t(k),{icon:t(sa)},null,8,["icon"]),l[0]||(l[0]=d(" ART Information ",-1))],64))]),_:1})]),_:1}),a(t(St),null,{default:n(()=>[a(t(ia),null,{default:n(()=>[S.value?(r(),A(X,{key:0},It(4,c=>a(t(M),{key:c},{default:n(()=>[a(t(gt),{slot:"start",animated:"",style:{width:"24px",height:"24px","border-radius":"50%"}}),a(t(N),null,{default:n(()=>[a(t(gt),{animated:"",style:{width:"120px",height:"16px","margin-bottom":"8px"}}),a(t(gt),{animated:"",style:{width:"180px",height:"20px"}})]),_:1})]),_:1})),64)):(r(),A(X,{key:1},[a(t(M),null,{default:n(()=>[a(t(k),{icon:t(la),slot:"start"},null,8,["icon"]),a(t(N),null,{default:n(()=>[l[1]||(l[1]=i("h3",null,"ART Start Date",-1)),i("p",null,C(w.value.artStartDate),1)]),_:1})]),_:1}),a(t(M),null,{default:n(()=>[a(t(k),{icon:t(fe),slot:"start"},null,8,["icon"]),a(t(N),null,{default:n(()=>[l[2]||(l[2]=i("h3",null,"ARV Number",-1)),i("p",null,C(w.value.arvNumber),1)]),_:1})]),_:1}),a(t(M),null,{default:n(()=>[a(t(k),{icon:t(ra),slot:"start"},null,8,["icon"]),a(t(N),null,{default:n(()=>[l[3]||(l[3]=i("h3",null,"File Number",-1)),i("p",null,C(w.value.fileNumber),1)]),_:1})]),_:1}),a(t(M),null,{default:n(()=>[a(t(k),{icon:t(ve),slot:"start"},null,8,["icon"]),a(t(N),null,{default:n(()=>[l[4]||(l[4]=i("h3",null,"Current Outcome",-1)),i("p",null,C(w.value.currentOutcome),1)]),_:1})]),_:1})],64))]),_:1})]),_:1})]),_:1}))}}),Ya=Ht(Fa,[["__scopeId","data-v-7ec7b45c"]]),me=[{classDash:"dashed_bottom_border",radioBtnContent:{header:{title:"Is the pregnancy confirmed?*",class:"bold",selectedValue:"",name:"Pregnancy confirmed"},data:[{value:"Yes",name:"Yes",colSize:"2"},{value:"No",name:"No",colSize:"2"}]}},{classDash:"dashed_bottom_border",radioBtnContent:{header:{title:"Was the pregnancy planned?*",selectedValue:"",class:"bold",name:"Pregnancy planned"},data:[{value:"Yes",name:"Yes",colSize:"2"},{value:"No",name:"No",colSize:"2"}]}}],Wa=da("ANCEnrollmentStore",{state:()=>({ConfirmPregnancy:[...me]}),actions:{setConfirmPregnancy(H){this.ConfirmPregnancy=H},getInitial(){return[...Ba.cloneDeep(me)]}}}),ja={class:"header-content"},qa={class:"title-section"},Ka={class:"tasks-container"},Qa=["onClick"],Za={class:"task-icon-container"},Ja={class:"task-content"},Xa={key:0,class:"task-status"},tn={key:1,class:"empty-state"},en={class:"empty-icon"},an=Lt({__name:"TaskView",props:{tasks:{type:Object,required:!0}},setup(H){const T=v([]),S=H;_e(async()=>{const g=new Vt;T.value=[];const l=await new Ra(g.getID()).getProgram();S.tasks.forEach(async c=>{var Y,K,ot,it;const B={orderNumber:(Y=c.sortOrder)!=null?Y:9999,label:(K=c.displayName)!=null?K:c.name,icon:c.icon,disabled:!1,taskCompleted:!1,task:c};if(!(typeof c.workflowID=="string"&&!await za(c.workflowID))&&!(typeof c.condition=="function"&&!await c.condition(S.tasks))&&!(typeof c.globalProperty=="string"&&!await Na.isProp("".concat(c.globalProperty,"=true"))))return typeof c.allowTaskAfterDeath=="boolean"&&c.allowTaskAfterDeath===!1&&/died/i.test("".concat((ot=l==null?void 0:l.program)==null?void 0:ot.outcome))&&new Date(Vt.getSessionDate())>=new Date((it=l==null?void 0:l.program)==null?void 0:it.startDate)&&(B.disabled=!0),typeof c.disabled=="function"&&(B.disabled=await c.disabled(S.tasks)),T.value.push(B),T.value.sort((lt,Pt)=>{var rt,ut;return((rt=lt.orderNumber)!=null?rt:9999)-((ut=Pt.orderNumber)!=null?ut:9999)}),c})});const w=g=>{if(!g.disabled){if(g.task.action)x(),g.task.action();else if(g.task.component&&g.task.isFormComponent){Bt(ha,{},!1,{title:g.task.name,useComponent:g.task.component,onClose:x});return}}};function x(){ya.dismiss()}return(g,l)=>(r(),D(t(be),null,{default:n(()=>[a(t(ca),{class:"ion-no-border"},{default:n(()=>[a(t(ma),{class:"custom-header"},{default:n(()=>[i("div",ja,[i("div",qa,[a(t(k),{icon:t(pa),class:"header-icon"},null,8,["icon"]),a(t(fa),{class:"custom-title"},{default:n(()=>[...l[0]||(l[0]=[d("Program Activities",-1)])]),_:1})]),a(t(va),{onClick:x,fill:"clear",shape:"round"},{default:n(()=>[a(t(k),{icon:t(ge)},null,8,["icon"])]),_:1})])]),_:1})]),_:1}),a(t(xt),{class:"custom-content"},{default:n(()=>[i("div",Ka,[T.value&&T.value.length>0?(r(),D(t(_a),{key:0,class:"tasks-grid"},{default:n(()=>[a(t(L),{class:"ion-justify-content-center"},{default:n(()=>[(r(!0),A(X,null,It(T.value,(c,B)=>(r(),D(t(p),{size:"12","size-sm":"6","size-md":"4","size-lg":"3",key:B,class:"task-col"},{default:n(()=>[i("div",{class:ye(["task-card",{"task-completed":c.taskCompleted,"task-disabled":c.disabled}]),onClick:Y=>!c.disabled&&w(c)},[i("div",Za,[a(t(k),{color:c.taskCompleted?"success":"primary",icon:c.taskCompleted?t(se):c.icon,class:"task-icon"},null,8,["color","icon"])]),i("div",Ja,[a(t(N),{class:"task-label"},{default:n(()=>[d(C(c.label),1)]),_:2},1024),c.taskCompleted?(r(),A("div",Xa,[a(t(k),{icon:t(se),color:"success"},null,8,["icon"]),l[1]||(l[1]=i("span",null,"Completed",-1))])):_("",!0)])],10,Qa)]),_:2},1024))),128))]),_:1})]),_:1})):(r(),A("div",tn,[i("div",en,[a(t(k),{icon:t(ga)},null,8,["icon"])]),l[2]||(l[2]=i("h3",null,"No Activities Yet",-1)),l[3]||(l[3]=i("p",null,"Your program activities will appear here once they're available.",-1))]))])]),_:1})]),_:1}))}}),nn=Ht(an,[["__scopeId","data-v-244ec438"]]);async function sn(H,T="tasks"){var x,g;const w=(x={1:Ta}[H])!=null?x:{};Bt(nn,{},!0,{tasks:(g=w==null?void 0:w[T])!=null?g:[]})}const on={key:5,class:"content_manager"},ln={style:{display:"flex","justify-content":"space-between"}},rn={class:"p_name_image"},un={style:{width:"100%"}},dn={class:"p_name"},cn={style:{display:"flex","justify-content":"space-between"}},mn={class:"start-visit"},pn={class:"button-group"},fn={key:0,class:"send-button-container action-buttons"},vn={class:"send-button-container"},_n={class:"send-button-container"},gn={class:"send-button-container"},yn={style:{"padding-left":"10px","padding-right":"10px","margin-top":"5px"}},bn={class:"vitalsUnits"},Cn={style:{width:"100%",overflow:"scroll",height:"64px"}},In={key:0,style:{"margin-top":"1px"}},An={key:0,class:"patient-chart"},Pn={class:"patient-chart"},Dn={key:1,class:"patient-chart"},kn={key:1},En={key:2},On={key:3},wn={key:4},Rn={key:5},Nn={key:6},hn={class:"rght-drpm"},Tn="NEONATAL PROGRAM",pe=10,Mn=Lt({__name:"PatientProfile",setup(H,{expose:T}){var ee,ae;const S=E(()=>O(()=>import("./LabOrdersList-s1IhDS17.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14]),import.meta.url)),w=E(()=>O(()=>import("./DiagnosesHistory-C6gkc7KD.js"),__vite__mapDeps([15,1,2,3,4,5,6,16]),import.meta.url)),x=E(()=>O(()=>import("./AllergiesHistory-DbNqct_r.js"),__vite__mapDeps([17,1,2,3,4,5,6,18]),import.meta.url)),g=E(()=>O(()=>import("./MedicationsHistory-C9UY7swr.js"),__vite__mapDeps([19,1,2,3,4,5,6,20]),import.meta.url)),l=E(()=>O(()=>import("./VisitsHistory-DIpUTIgO.js"),__vite__mapDeps([21,1,2,3,4,5,6,22]),import.meta.url)),c=E(()=>O(()=>import("./VitalsMeasurementsSummary-C8hZ3met.js"),__vite__mapDeps([23,1,2,3,4,5,6,24]),import.meta.url)),B=E(()=>O(()=>import("./PatientProfile-B2a9QlgO.js"),__vite__mapDeps([25,1,2,3,4,5,6,26,27,28,29,30,31,0,7,8,9,10,11,12,13,14,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97]),import.meta.url)),Y=E(()=>O(()=>import("./HTSPatientProfile-CKjy8pcC.js"),__vite__mapDeps([98,1,2,3,4,5,6,81,82,83,84,85,95,88,89,69,90,40,91,92,93,48,49,50,96,74,75,76,77,9,10,11,12,78,79,52,34,80,99]),import.meta.url)),K=E(()=>O(()=>import("./NeonatalPatientProfile-CS2-QuLq.js"),__vite__mapDeps([100,1,2,3,95,4,5,6,88,89,69,81,82,83,84,85,90,40,91,92,93,48,49,50,96,74,75,76,101,102,103]),import.meta.url)),ot=E(()=>O(()=>import("./AETCPatientProfile-DQyEbAZm.js"),__vite__mapDeps([104,1,2,3,4,5,6,95,88,89,69,81,82,83,84,85,90,40,91,92,93,48,49,50,96,34,26,27,105,106,107,13,108,109]),import.meta.url)),it=E(()=>O(()=>import("./WeightHeightChart-Cek0m5Ym.js"),__vite__mapDeps([74,4,1,2,3,5,6,75,76]),import.meta.url)),lt=E(()=>O(()=>import("../index-DBQF-8Xn.js").then(s=>s.cN),__vite__mapDeps([4,1,2,3,5,6]),import.meta.url)),Pt=E(()=>O(()=>import("./BloodPressure-CdOfEAfw.js"),__vite__mapDeps([110,1,2,3,5,4,6,111]),import.meta.url)),rt=E(()=>O(()=>import("./AncEnrollmentModal-m6f-5b2t.js"),__vite__mapDeps([112,1,2,3,4,5,6,113]),import.meta.url)),ut=E(()=>O(()=>import("./LabourEnrollmentModal-DN9GxjCY.js"),__vite__mapDeps([114,1,2,3,4,5,6,89,69,81,82,83,84,85,90,88,40,91,92,93,9,10,11,12,13,95,48,49,50,96,26,27,108,115]),import.meta.url)),Ce=E(()=>O(()=>import("./PNCEnrollmentModal-661Sn4_h.js"),__vite__mapDeps([116,1,2,3,4,5,6,89,69,81,82,83,84,85,90,88,40,91,92,93,9,10,11,12,13,95,48,49,50,96,26,27,108,117]),import.meta.url)),W=ba(),Ie=Ca(),dt=Ma(),Ae=Sa(),Pe=Wa(),{hasWaitingList:$t}=$a(),{event:De,popoverOpen:Gt,openPopover:Ut,openPIM:zt,openOutCome:ke,openUpdateNCDNUmbers:Ee,printVisitSummary:Oe,printID:we,formatCurrentAddress:Re}=Ga(),{screenWidth:Dt}=xa(),{patient:u}=ht(dt),{activeProgram:P,authorizedPrograms:Ft}=ht(Ae),{ConfirmPregnancy:xn}=ht(Pe),ct=v(!1),Ne=v(!0),he=v(!1),kt=v(!1),Te=v(!1),$=v("Patient Charts"),Yt=v(null),h=v({}),Q=v(!1),Et=v(!1),Wt=v(!1),jt=v(!1),V=v([]),tt=v(0),mt=v(),pt=v(""),qt=v(!1),Kt=v(G.getAgeInYears((ae=(ee=u.value)==null?void 0:ee.personInformation)==null?void 0:ae.birthdate)),Me=at(()=>{var e,f;const s=(f=(e=u.value)==null?void 0:e.personInformation)==null?void 0:f.gender;return s==="Female"||s==="F"}),Se=s=>s==null?void 0:s.trim().toUpperCase(),xe=s=>s===R.NEONATAL_PROGRAM||s===R.HTC_PROGRAM,Ve=s=>Se(s)===Tn,Le=s=>{var f;if(!s)return!1;const e=(f=s.id)!=null?f:s.program_id;return xe(e)||Ve(s.name)},He=at(()=>{var e,f;const s=(f=(e=u.value)==null?void 0:e.personInformation)==null?void 0:f.gender;return s==="Male"||s==="M"?Ft.value.filter(m=>m.name!=="ANC PROGRAM"&&m.name!=="LABOUR AND DELIVERY PROGRAM"&&m.name!=="PNC PROGRAM"):Ft.value.map(m=>{if(m.name==="ANC PROGRAM"||m.name==="LABOUR AND DELIVERY PROGRAM"||m.name==="PNC PROGRAM"){if(!(V!=null&&V.value))return;const o=V==null?void 0:V.value.some(y=>y.id===m.program_id);return{...m,actionName:o?"Start ".concat(m.name):"Enroll in ".concat(m.name)}}return m})}),Be=at(()=>!Q.value&&P.value.program_id==14),$e=at(()=>Q.value&&P.value.program_id==14),Qt=at(()=>Le(P.value)),Ge=()=>{var s,e;if((e=(s=u.value)==null?void 0:s.personInformation)!=null&&e.birthdate){const f=G.getAgeInYears(u.value.personInformation.birthdate);qt.value=f<9}},Ue=()=>{var s,e,f,m;Kt.value=G.getAgeInYears((e=(s=u.value)==null?void 0:s.personInformation)==null?void 0:e.birthdate),(m=(f=u.value)==null?void 0:f.personInformation)!=null&&m.birthdate&&(Ne.value=G.getAgeInYears(u.value.personInformation.birthdate)>=14,he.value=G.ageInMonths(u.value.personInformation.birthdate)<9,kt.value=G.getAgeInYears(u.value.personInformation.birthdate)<5,Te.value=G.dateDiffInDays(G.sessionDate(),u.value.personInformation.birthdate)<42)},j=s=>{$.value=s},ze=()=>[{backgroundColor:"#B9E6FE",status:"",icon:Tt(["#B9E6FE","#026AA2","#9ADBFE"]),textColor:"#026AA2",value:"No further action is required.",name:"",index:"Blood sugar is normal"},{backgroundColor:"#FEDF89",status:"",icon:Tt(["#FEDF89","#B54708","#FED667"]),textColor:"#B54708",value:"Please call or follow up!",name:"",index:"Patient Defaulted"},{backgroundColor:"#FECDCA",status:"",icon:Tt(["#FECDCA","#B42318","#FDA19B"]),textColor:"#B42318",value:"Administer medications!",name:"",index:"Patient is hypertensive"}],Fe=async()=>{if(P.value.program_id==14)try{const s=await ce(dt.patient.ID);if(!s)return;Q.value=!!s.length}catch(s){console.error(s)}},Ot=v(!1),Ye=async()=>{try{await re("Are you sure you want to create the visit?")&&(Ot.value=!0,await La(dt.patient)&&(Q.value=!0,await ue().refresh(yt.getUserLocationId()),bt("The patient visit is now active. Patient is on the waiting list for vitals")))}catch(s){console.error("error activating visit: ",s)}finally{Ot.value=!1}},wt=v(!1),We=async()=>{try{await re("Are you sure you want to close the visit?")&&(wt.value=!0,await Ha(u.value)&&(Q.value=!1,await ue().refresh(yt.getUserLocationId()),bt("The patient visit is now closed")))}catch(s){console.error("error: ",s)}finally{wt.value=!1}},je=async()=>{if(P.value.program_id==14)try{const s=await ce(dt.patient.ID);Q.value=s.length>0}catch(s){console.error(s)}},qe=s=>{Yt.value=s,ct.value=!ct.value},Zt=(s="tasks")=>sn(P.value.program_id,s),Rt=v(!1),Ke=async()=>{const s=await U.getObsByEncounterId(F.ANC_ENROLLMENT),e=await U.getObsByEncounterIdAndDate(F.QUICK_CHECK),f=await U.getObsByEncounterId(F.OBSTETRIC_HISTORY),m=await U.getObsByEncounterId(F.MEDICAL_HISTORY),o=await U.getObsByEncounterId(F.CURRENT_PREGNANCY),y=await U.getObsByEncounterId(F.Obstetrics_and_Gynecology),I=await U.getObsByEncounterId(F.MEDICATIONS),b=await U.getObsByEncounterId(F.WOMAN_BEHAVIOUR),Z=[...f,...m,...o,...y,...I,...b],vt=s.some(z=>z.obs&&z.obs.length>0),_t=Z.some(z=>z.obs&&z.obs.length>0);vt?_t?e<=0?W.push("quickCheck"):W.push("contact"):W.push("profile"):await Bt(rt,{class:"small-confirm-modal "})},Jt=async s=>{var e,f,m,o,y;Rt.value=!0;try{if(await ft(),s.program_id==R.ANC_PROGRAM||s.program_id==R.PNC_PROGRAM||s.program_id==R.LABOUR_AND_DELIVERY_PROGRAM){if(!Me.value){st("Only female patients can be enrolled in this program.");return}if(Kt.value<pe){st("Patient must be at least ".concat(pe," years old to enroll in this program."));return}if(!((e=V==null?void 0:V.value)==null?void 0:e.find(Z=>Z.id==s.program_id))){if(s.program_id==R.ANC_PROGRAM){tt.value=s.program_id,await Ke();return}else if(s.program_id==R.LABOUR_AND_DELIVERY_PROGRAM){Wt.value=!0,pt.value="Are you sure you want to enroll ".concat((m=(f=u.value)==null?void 0:f.personInformation)==null?void 0:m.given_name.toUpperCase()," in this program?"),tt.value=s.program_id;return}else if(s.program_id==R.PNC_PROGRAM){jt.value=!0,pt.value="Are you sure you want to enroll ".concat((y=(o=u.value)==null?void 0:o.personInformation)==null?void 0:y.given_name.toUpperCase()," in this program?"),tt.value=s.program_id;return}}}const I=await de.userProgramData(u.value.patientID,s);if(s.program_id===14)if(I!=null&&I.canProceed&&I.url&&I.stage){const b=Qe(I.stage);if(!b){st("Unable to determine patient stage");return}if($t(b))return W.push(I.url);st("You don't have access to the ".concat(b.toLowerCase()));return}else{st("The visit is not activated");return}if(I!=null&&I.url)return W.push(I.url)}catch(I){console.error("error: ",I)}finally{Rt.value=!1}},Qe=s=>{switch(s){case"VITALS":return"Waiting for Vitals";case"CONSULTATION":return"Waiting for Consultation";case"LAB":return"Waiting for Laboratory";case"DISPENSATION":return"Waiting for Dispensation";default:return null}},Xt=()=>{Et.value=!1},Ze=()=>{Et.value=!Et.value},Je=async()=>(await At.enrollProgram(u.value.patientID,tt.value,new Date().toString()),await ft(),bt("Enrollment is successful"),W.push("LabourHome")),Xe=async()=>(await At.enrollProgram(u.value.patientID,tt.value,new Date().toString()),await ft(),bt("Enrollment is successful"),W.push("PNCHome")),ft=async()=>{const s=u.activePrograms;V.value=s==null?void 0:s.map(e=>({name:e.program.name,id:e.program_id}))},te=()=>{Ze()},Nt=async()=>{Ue(),await ta(),await Fe(),await je(),await de.userProgramData(u.value.patientID),await ft(),Ge()},ta=async()=>{h.value={},mt.value="";const s=await J.getConceptID("Height (cm)"),e=await J.getConceptID("Weight (kg)"),f=await J.getConceptID("Systolic blood pressure"),m=await J.getConceptID("Diastolic blood pressure"),o=await J.getConceptID("Temperature (c)"),y=await J.getConceptID("Pulse");(await U.getLatestObsByEncounterIdAndConcepts(6,[s,e,f,m,o,y])).forEach(b=>{b.concept_id===s?h.value.height=b.value_numeric:b.concept_id===e?h.value.weight=b.value_numeric:b.concept_id===f?h.value.systolic=b.value_numeric:b.concept_id===m?h.value.diastolic=b.value_numeric:b.concept_id===o?h.value.temperature=b.value_numeric:b.concept_id===y&&(h.value.pulse=b.value_numeric)}),mt.value=new Vt().getBloodGlucose(u.value)},ea=s=>s=="Undetermined"?"Undetermined":["Male","M"].includes(s)?"Male":["Female","F"].includes(s)?"Female":"",aa=()=>{var s,e;return G.getBirthdateAge((e=(s=u.value)==null?void 0:s.personInformation)==null?void 0:e.birthdate)};return _e(async()=>{await Nt()}),Mt(()=>u,async()=>{await Nt()},{deep:!0}),Mt(Ie,async s=>{await Nt()},{deep:!0}),T({showUnderageWarning:qt}),(s,e)=>{const f=oe("ion-list"),m=oe("ion-popover");return r(),D(t(be),null,{default:n(()=>[a(Va),a(t(xt),{fullscreen:!0},{default:n(()=>[t(P).program_id!==33&&t(P).program_id!==38&&t(P).program_id!=""&&t(Dt)<1120?(r(),D(Ua,{key:0,onOpenPopover:e[0]||(e[0]=o=>t(Ut)(o))})):_("",!0),a(t(ut),{closeModalFunc:Xt,onYes:Je,onNo:te,isOpen:Wt.value,title:pt.value},null,8,["isOpen","title"]),a(t(Ce),{closeModalFunc:Xt,onYes:Xe,onNo:te,isOpen:jt.value,title:pt.value},null,8,["isOpen","title"]),t(P).program_id==t(R).IMMUNIZATION_PROGRAM?(r(),D(t(B),{key:1,updateData:t(u)},null,8,["updateData"])):_("",!0),t(P).program_id==t(R).HTS_PROGRAM?(r(),D(t(Y),{key:2,updateData:t(u)},null,8,["updateData"])):_("",!0),t(P).program_id==t(R).AETC_PROGRAM?(r(),D(t(ot),{key:3,updateData:t(u)},null,8,["updateData"])):_("",!0),Qt.value?(r(),D(t(K),{key:4})):_("",!0),t(P).program_id!==t(R).AETC_PROGRAM&&t(P).program_id!==t(R).IMMUNIZATION_PROGRAM&&t(P).program_id!==t(R).HTS_PROGRAM&&!Qt.value&&t(P).program_id!=""?(r(),A("div",on,[a(t(L),{class:"content_width"},{default:n(()=>[a(t(p),{size:"2.5","size-lg":"2.6","size-md":"3",class:"displayNoneLeftPanel"},{default:n(()=>[a(t(Ct),{style:{"margin-bottom":"20px","background-color":"#fff"}},{default:n(()=>[a(t(St),null,{default:n(()=>{var o,y,I,b,Z,vt,_t,z;return[i("div",ln,[e[23]||(e[23]=i("div",null,null,-1)),i("div",{class:"name",style:{color:"var(--ion-color-primary)","margin-top":"10px"},onClick:e[1]||(e[1]=et=>t(Ut)(et))},[a(t(k),{icon:t(Ia),style:{"font-size":"2.2rem"}},null,8,["icon"])])]),i("div",rn,[i("div",{class:ye(((y=(o=t(u))==null?void 0:o.personInformation)==null?void 0:y.gender)=="M"?"initialsBox maleColor":"initialsBox femaleColor"),onClick:e[2]||(e[2]=et=>t(zt)())},[a(t(k),{style:{color:"#fff","font-size":"70px"},icon:t(Aa)},null,8,["icon"])],2),i("div",un,[i("div",dn,C((b=(I=t(u))==null?void 0:I.personInformation)==null?void 0:b.given_name)+" "+C((vt=(Z=t(u))==null?void 0:Z.personInformation)==null?void 0:vt.middle_name)+" "+C((z=(_t=t(u))==null?void 0:_t.personInformation)==null?void 0:z.family_name),1)])]),a(t(L),null,{default:n(()=>[a(t(p),{size:"4"},{default:n(()=>[...e[24]||(e[24]=[d("MRN:",-1)])]),_:1}),a(t(p),{class:"demoContent"},{default:n(()=>[d(C(t(u).ID),1)]),_:1})]),_:1}),t(P).program_id===32?(r(),D(t(L),{key:0},{default:n(()=>[a(t(p),{size:"4"},{default:n(()=>[...e[25]||(e[25]=[d("NCDNumber:",-1)])]),_:1}),a(t(p),{class:"demoContent"},{default:n(()=>[d(C(t(u).NcdID),1)]),_:1})]),_:1})):_("",!0),a(t(L),null,{default:n(()=>[a(t(p),{size:"4"},{default:n(()=>[...e[26]||(e[26]=[d("Gender:",-1)])]),_:1}),a(t(p),{class:"demoContent"},{default:n(()=>{var et,ne;return[d(C(ea((ne=(et=t(u))==null?void 0:et.personInformation)==null?void 0:ne.gender)),1)]}),_:1})]),_:1}),a(t(L),null,{default:n(()=>[a(t(p),{size:"4"},{default:n(()=>[...e[27]||(e[27]=[d("Age:",-1)])]),_:1}),a(t(p),{class:"demoContent"},{default:n(()=>[d(C(aa()),1)]),_:1})]),_:1}),a(t(L),null,{default:n(()=>[a(t(p),{size:"4"},{default:n(()=>[...e[28]||(e[28]=[d("Address:",-1)])]),_:1}),a(t(p),{class:"demoContent"},{default:n(()=>[d(C(t(Re)(t(u))),1)]),_:1})]),_:1})]}),_:1})]),_:1}),t(yt).getProgramID()===1?(r(),D(Ya,{key:0,patient:t(u)},null,8,["patient"])):_("",!0),a(t(Ct),{style:{"margin-bottom":"20px","background-color":"#fff"}},{default:n(()=>[a(t(Pa),{value:["first"]},{default:n(()=>[a(t(Da),{value:"first",style:{"background-color":"#fff"},"toggle-icon-slot":"start"},{default:n(()=>[a(t(M),{slot:"header",color:"white"},{default:n(()=>[a(t(N),{class:"side_title"},{default:n(()=>[...e[29]||(e[29]=[d("Alerts & Reminders ",-1)])]),_:1})]),_:1}),a(t(St),{slot:"content"},{default:n(()=>[(r(!0),A(X,null,It(ze(),(o,y)=>(r(),A("span",{key:y},[o.value?(r(),D(t(L),{key:0,style:ie("border-radius: 5px;  margin-top:10px; margin-bottom:10px;background-color:"+o.backgroundColor)},null,8,["style"])):_("",!0)]))),128))]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),a(t(p),{offset:"0.07","size-sm":"12","size-md":"12","size-lg":t(Dt)>1120?"9.33":"12"},{default:n(()=>[a(t(Ct),{style:{"background-color":"#fff","margin-inline":"0px",padding:"5px","margin-bottom":"5px",contain:"unset",overflow:"unset"}},{default:n(()=>[i("div",null,[i("div",cn,[e[30]||(e[30]=i("div",{class:"vitalsTitle"},"Most recent Vitals & Biometrics",-1)),i("div",mn,[i("div",pn,[t($t)("Waiting for Laboratory")?_("",!0):(r(),A("div",fn,[Be.value?(r(),D(nt,{key:0,name:"Activate visit",onClick:e[3]||(e[3]=o=>Ye()),loading:Ot.value,icon:t(ve),fill:"solid",color:"success"},null,8,["loading","icon"])):_("",!0),$e.value?(r(),D(nt,{key:1,name:"Deactivate Visit",onClick:e[4]||(e[4]=o=>We()),loading:wt.value,fill:"solid",icon:t(ge),color:"danger"},null,8,["loading","icon"])):_("",!0)])),i("div",vn,[a(nt,{name:"Tasks","onClicked:btn":e[5]||(e[5]=o=>Zt()),class:"send-text",fill:"clear",color:"secondary"})]),i("div",_n,[a(nt,{name:"Printout/Other","onClicked:btn":e[6]||(e[6]=o=>Zt("other")),class:"send-text",fill:"solid",color:"secondary"})]),i("div",gn,[a(nt,{name:"Start visit","onClicked:btn":e[7]||(e[7]=o=>Jt(t(P))),loading:Rt.value,textFontSize:"12px",class:"send-text"},null,8,["loading"]),i("button",{class:"send-arrow",onClick:e[8]||(e[8]=o=>qe(o))})])])])])]),i("div",yn,[a(t(L),null,{default:n(()=>[a(t(p),{class:"vitalsHeading"},{default:n(()=>[...e[31]||(e[31]=[d("Weight",-1)])]),_:1}),a(t(p),{class:"vitalsHeading"},{default:n(()=>[...e[32]||(e[32]=[d("Height",-1)])]),_:1}),a(t(p),{class:"vitalsHeading"},{default:n(()=>[...e[33]||(e[33]=[d("Temperature",-1)])]),_:1}),a(t(p),{class:"vitalsHeading"},{default:n(()=>[...e[34]||(e[34]=[d("Blood glucose",-1)])]),_:1}),a(t(p),{class:"vitalsHeading"},{default:n(()=>[...e[35]||(e[35]=[d("Pulse Rate",-1)])]),_:1}),a(t(p),{class:"vitalsHeading"},{default:n(()=>[...e[36]||(e[36]=[d("Blood pressure",-1)])]),_:1})]),_:1}),a(t(L),null,{default:n(()=>[a(t(p),{class:"vitalsValue"},{default:n(()=>{var o;return[d(C((o=h.value)==null?void 0:o.weight)+" ",1),e[37]||(e[37]=i("span",{class:"vitalsUnits"},"kg",-1))]}),_:1}),a(t(p),{class:"vitalsValue"},{default:n(()=>{var o;return[d(C((o=h.value)==null?void 0:o.height)+" ",1),e[38]||(e[38]=i("span",{class:"vitalsUnits"},"cm",-1))]}),_:1}),a(t(p),{class:"vitalsValue"},{default:n(()=>{var o;return[d(C((o=h.value)==null?void 0:o.temperature)+" ",1),e[39]||(e[39]=i("span",{class:"vitalsUnits"},"Â°C",-1))]}),_:1}),a(t(p),{class:"vitalsValue"},{default:n(()=>{var o,y;return[d(C((o=mt.value)==null?void 0:o.value)+" ",1),i("span",bn,C((y=mt.value)==null?void 0:y.unit),1)]}),_:1}),a(t(p),{class:"vitalsValue"},{default:n(()=>{var o;return[d(C((o=h.value)==null?void 0:o.pulse)+" ",1),e[40]||(e[40]=i("span",{class:"vitalsUnits"},"bpm ",-1))]}),_:1}),a(t(p),{class:"vitalsValue"},{default:n(()=>{var o,y;return[d(C((o=h.value)==null?void 0:o.systolic)+"/"+C((y=h.value)==null?void 0:y.diastolic),1),e[41]||(e[41]=i("span",{class:"vitalsUnits"},"mmhg",-1))]}),_:1})]),_:1})])]),_:1}),i("div",Cn,[a(t(ka),{value:$.value,style:{"margin-top":"5px","min-width":"540px"}},{default:n(()=>[a(t(q),{value:"Patient Charts",onClick:e[9]||(e[9]=o=>j("Patient Charts"))},{default:n(()=>[a(t(N),null,{default:n(()=>[...e[42]||(e[42]=[d("Patient Charts",-1)])]),_:1})]),_:1}),a(t(q),{value:"Visits History",onClick:e[10]||(e[10]=o=>j("Visits History"))},{default:n(()=>[a(t(N),null,{default:n(()=>[...e[43]||(e[43]=[d("Visits History",-1)])]),_:1})]),_:1}),a(t(q),{value:"Vitals History",onClick:e[11]||(e[11]=o=>j("Vitals History"))},{default:n(()=>[a(t(N),null,{default:n(()=>[...e[44]||(e[44]=[d("Vitals History",-1)])]),_:1})]),_:1}),a(t(q),{value:"Lab Tests History",onClick:e[12]||(e[12]=o=>j("Lab Tests History"))},{default:n(()=>[a(t(N),null,{default:n(()=>[...e[45]||(e[45]=[d("Lab Tests History",-1)])]),_:1})]),_:1}),a(t(q),{value:"Diagnosis History",onClick:e[13]||(e[13]=o=>j("Diagnosis History"))},{default:n(()=>[a(t(N),null,{default:n(()=>[...e[46]||(e[46]=[d("Diagnosis History",-1)])]),_:1})]),_:1}),a(t(q),{value:"Allergies History",onClick:e[14]||(e[14]=o=>j("Allergies History"))},{default:n(()=>[a(t(N),null,{default:n(()=>[...e[47]||(e[47]=[d("Allergies History",-1)])]),_:1})]),_:1}),a(t(q),{value:"Medication History",onClick:e[15]||(e[15]=o=>j("Medication History"))},{default:n(()=>[a(t(N),null,{default:n(()=>[...e[48]||(e[48]=[d("Medication History",-1)])]),_:1})]),_:1})]),_:1},8,["value"])]),$.value=="Patient Charts"?(r(),A("div",In,[i("div",{style:ie(t(Dt)>826?"display: flex;":"display: block;")},[kt.value?(r(),A("div",An,[a(t(it))])):_("",!0),i("div",Pn,[a(t(Pt))]),kt.value?_("",!0):(r(),A("div",Dn,[a(t(lt))]))],4)])):_("",!0),$.value=="Visits History"?(r(),A("div",kn,[a(t(l))])):_("",!0),$.value=="Vitals History"?(r(),A("div",En,[a(t(c))])):_("",!0),$.value=="Lab Tests History"?(r(),A("div",On,[a(t(S),{showAddTestButton:!1,showSendToLabButton:!1})])):_("",!0),$.value=="Diagnosis History"?(r(),A("div",wn,[a(t(w))])):_("",!0),$.value=="Allergies History"?(r(),A("div",Rn,[a(t(x))])):_("",!0),$.value=="Medication History"?(r(),A("div",Nn,[a(t(g))])):_("",!0)]),_:1},8,["size-lg"])]),_:1})])):_("",!0)]),_:1}),a(m,{style:{"--offset-x":"-10px"},"is-open":t(Gt),"show-backdrop":!1,"dismiss-on-select":!0,event:t(De),onDidDismiss:e[21]||(e[21]=o=>Gt.value=!1)},{default:n(()=>[i("div",null,[a(f,{style:{"--ion-background-color":"#fff","--offset-x":"-30px"}},{default:n(()=>[a(t(M),{button:!0,detail:!1,onClick:e[16]||(e[16]=o=>t(zt)()),style:{cursor:"pointer"},class:"list-content"},{default:n(()=>[a(t(k),{icon:t(Ea),slot:"start",class:"sub-menu-icon"},null,8,["icon"]),e[49]||(e[49]=i("span",{class:"sub-menu-txt"},"Update demographics",-1))]),_:1}),a(t(M),{button:!0,detail:!1,onClick:e[17]||(e[17]=o=>t(ke)()),style:{cursor:"pointer"},class:"list-content"},{default:n(()=>[a(t(k),{icon:t(Oa),slot:"start",class:"sub-menu-icon"},null,8,["icon"]),e[50]||(e[50]=i("span",{class:"sub-menu-txt"},"Update outcome",-1))]),_:1}),t(yt).getProgramID()==32?(r(),D(t(M),{key:0,button:!0,detail:!1,onClick:e[18]||(e[18]=o=>t(Ee)()),style:{cursor:"pointer"},class:"list-content"},{default:n(()=>[a(t(k),{icon:t(fe),slot:"start",class:"sub-menu-icon"},null,8,["icon"]),e[51]||(e[51]=i("span",{class:"sub-menu-txt"},"Update NCD Number",-1))]),_:1})):_("",!0),a(t(M),{button:!0,detail:!1,onClick:e[19]||(e[19]=o=>t(Oe)()),style:{cursor:"pointer"},class:"list-content"},{default:n(()=>[a(t(k),{icon:t(le),slot:"start",class:"sub-menu-icon"},null,8,["icon"]),e[52]||(e[52]=i("span",{class:"sub-menu-txt"},"Print visit summary",-1))]),_:1}),a(t(M),{button:!0,detail:!1,onClick:e[20]||(e[20]=o=>t(we)()),style:{cursor:"pointer"},class:"list-content"},{default:n(()=>[a(t(k),{icon:t(le),slot:"start",class:"sub-menu-icon"},null,8,["icon"]),e[53]||(e[53]=i("span",{class:"sub-menu-txt"},"Print client identifier",-1))]),_:1})]),_:1})])]),_:1},8,["is-open","event"]),a(m,{"is-open":ct.value,"show-backdrop":!1,"dismiss-on-select":!0,event:Yt.value,onDidDismiss:e[22]||(e[22]=o=>ct.value=!1),style:{"--width":"350px"}},{default:n(()=>[a(t(xt),null,{default:n(()=>[a(f,null,{default:n(()=>[(r(!0),A(X,null,It(He.value,(o,y)=>(r(),D(t(M),{button:!0,detail:!1,style:{cursor:"pointer"},key:y,onClick:I=>Jt(o)},{default:n(()=>[a(t(k),{slot:"start",icon:t(wa)},null,8,["icon"]),i("span",hn,C(o==null?void 0:o.actionName),1)]),_:2},1032,["onClick"]))),128))]),_:1})]),_:1})]),_:1},8,["is-open","event"])]),_:1})}}}),Sn=Ht(Mn,[["__scopeId","data-v-53a8dfc0"]]),zn=Object.freeze(Object.defineProperty({__proto__:null,default:Sn},Symbol.toStringTag,{value:"Module"}));export{Ya as A,zn as P,Wa as u};
