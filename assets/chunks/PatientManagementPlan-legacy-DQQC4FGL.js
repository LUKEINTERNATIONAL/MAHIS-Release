System.register(["./vendor-legacy-CYGntlS9.js","../index-legacy-BqmzGIdC.js","./DemographicBar-legacy-B9xVHW06.js","./nonPharmaTherapyStore-legacy-D0Hgg0Tf.js","./lodash-legacy-pOOc9Efu.js","./formatServerData-legacy-uRGu9GI3.js","./usePatientProfile-legacy-Bj-Dz2QF.js","./apexcharts-legacy-BRtJ1Nb2.js","./drug_prescription_service-legacy-Bw6y651s.js","./patient_diagnosis_service-legacy-Bc-EHEWM.js","./Registration-legacy-CKKP2JxC.js","./useLocation-legacy-1080iEcP.js","./vaccines_service-legacy-DUkAb9Pz.js","./sms_service-legacy-Dvj4lKOF.js","./EIRreportsStore-legacy-pTs2c5Ii.js","./Export-legacy-u2f9jhmR.js","./useNeonatalEnrollmentStore-legacy-BAzP5q4r.js","./enrollment-legacy-BWFKsMdA.js"],function(e,a){"use strict";var n,i,t,l,o,s,r,c,u,d,g,p,m,y,v,b,h,_,f,T,S,x,k,P,F,w,D,C,M,A,I,j,N,B,R,O,L,E,z,H,V,G,U,W,J,$,q,Y,K,Q,Z,X,ee,ae,ne,ie,te,le,oe,se,re;return{setters:[e=>{n=e.c,i=e.d,t=e.r,l=e.O,o=e.f,s=e.u,r=e.bq,c=e.J,u=e.l,d=e.aU,g=e.ao,p=e.cp,m=e.aV,y=e.w,v=e.a,b=e.a3,h=e.k,_=e.m,f=e.i,T=e.bM,S=e.v,x=e.a6,k=e.b9},e=>{P=e.aC,F=e.l,w=e.aH,D=e.u,C=e.aI,M=e.aJ,A=e.aK,I=e.aL,j=e.d,N=e.aM,B=e.g,R=e.Z,O=e.e,L=e.T,E=e.J,z=e.N,H=e.H,V=e.aN,G=e.aO,U=e.aP,W=e.aQ,J=e.t,$=e.aS,q=e.G,Y=e.aT,K=e.a0,Q=e.S},e=>{Z=e.D},e=>{X=e.u,ee=e.a,ae=e._,ne=e.s,ie=e.c,te=e.b},e=>{le=e.l},e=>{oe=e.a,se=e.b},e=>{re=e.u},null,null,null,null,null,null,null,null,null,null,null],execute:function(){const a=i({__name:"NonPharmacological",setup(e){const a=t(null),i=n(()=>[{componentType:"Heading",name:"Procedures",grid:{s:"5"}},{grid:{s:"2"}},{componentType:"Heading",name:"Supportive Care",grid:{s:"5"}},{componentType:"checkboxField",type:"single",label:"Minor Surgery",name:"minor_surgery",grid:{s:"5"}},{grid:{s:"2"}},{componentType:"checkboxField",type:"single",label:"Wound Dressing",name:"wound_dressing",grid:{s:"5"}},{componentType:"checkboxField",type:"single",label:"Suturing",name:"suturing",grid:{s:"5"}},{grid:{s:"2"}},{componentType:"checkboxField",type:"single",label:"Patient Education",name:"patient_education",grid:{s:"5"}},{componentType:"checkboxField",type:"single",label:"Joint Reduction",name:"joint_reduction",grid:{s:"5"}},{grid:{s:"2"}},{componentType:"checkboxField",type:"single",label:"Counselling",name:"counselling",grid:{s:"5"}},{componentType:"checkboxField",type:"single",label:"Fracture Reduction",name:"fracture_reduction",grid:{s:"5"}},{grid:{s:"2"}},{componentType:"checkboxField",type:"single",label:"Feeding",name:"feeding",grid:{s:"5"}},{componentType:"checkboxField",type:"single",label:"Intercostal Drain Insertion",name:"intercostal_drain_insertion",grid:{s:"5"}},{grid:{s:"2"}},{componentType:"checkboxField",type:"single",label:"Oxygenation",name:"oxygenation",grid:{s:"5"}},{componentType:"checkboxField",type:"single",label:"Pleurocentesis",name:"pleurocentesis",grid:{s:"5"}},{grid:{s:"2"}},{componentType:"checkboxField",type:"single",label:"Tepid Sponging",name:"tepid_sponging",grid:{s:"5"}},{componentType:"checkboxField",type:"single",label:"Pericardiocentesis",name:"pericardiocentesis",grid:{s:"5"}},{grid:{s:"2"}},{componentType:"checkboxField",type:"single",label:"Electrocardiography (ECG) Monitoring",name:"electrocardiography_monitoring",grid:{s:"5"}},{componentType:"checkboxField",type:"single",label:"Paracentesis",name:"paracentesis",grid:{s:"5"}},{grid:{s:"2"}},{componentType:"checkboxField",type:"single",label:"Turning Patients",name:"turning_patients",grid:{s:"5"}},{componentType:"checkboxField",type:"single",label:"Lumbar Puncture",name:"lumbar_puncture",grid:{s:"5"}},{grid:{s:"2"}},{componentType:"checkboxField",type:"single",label:"Oral Care",name:"oral_care",grid:{s:"5"}},{componentType:"checkboxField",type:"single",label:"Intravenous Cannulation",name:"intravenous_cannulation",grid:{s:"5"}},{grid:{s:"2"}},{componentType:"checkboxField",type:"single",label:"Other (Specify)",name:"supportive_care_other",grid:{s:"5"}},{componentType:"checkboxField",type:"single",label:"Central Line Insertion",name:"central_line_insertion",grid:{s:"5"}},{grid:{s:"2"}},{componentType:"checkboxField",type:"single",label:"Urethral Catheterization",name:"urethral_catheterization",grid:{s:"12"}},{componentType:"checkboxField",type:"single",label:"Suprapubic Catheterization",name:"suprapubic_catheterization",grid:{s:"12"}},{componentType:"checkboxField",type:"single",label:"Suctioning",name:"suctioning",grid:{s:"12"}},{componentType:"checkboxField",type:"single",label:"Oropharyngeal Airway Insertion",name:"oropharyngeal_airway_insertion",grid:{s:"12"}},{componentType:"checkboxField",type:"single",label:"Nasopharyngeal Airway Insertion",name:"nasopharyngeal_airway_insertion",grid:{s:"12"}},{componentType:"checkboxField",type:"single",label:"Laryngeal Mask Airway Insertion",name:"laryngeal_mask_airway_insertion",grid:{s:"12"}},{componentType:"checkboxField",type:"single",label:"Endotracheal Tube Insertion",name:"endotracheal_tube_insertion",grid:{s:"12"}},{componentType:"checkboxField",type:"single",label:"Nasogastric Tube Insertion",name:"nasogastric_tube_insertion",grid:{s:"12"}},{componentType:"checkboxField",type:"single",label:"Manual Ventilation",name:"manual_ventilation",grid:{s:"12"}},{componentType:"checkboxField",type:"single",label:"Continuous Positive Airway Pressure (CPAP)",name:"continuous_positive_airway_pressure",grid:{s:"12"}},{componentType:"checkboxField",type:"single",label:"Other (Specify)",name:"procedures_other",grid:{s:"12"}}]);return(e,n)=>(o(),l(s(r),null,{default:c(()=>[u(s(d),null,{default:c(()=>[u(P,{formData:s(i),ref_key:"formRef",ref:a},null,8,["formData"])]),_:1})]),_:1}))}}),ce=i({__name:"Medication",setup(e){const a=t(null),i=n(()=>[{componentType:"multiSelectInputField",header:"Medication Name",name:"medication_name",isMultiple:!1,trackBy:"id",grid:{s:"4"},icon:F.search,options:[{id:1,name:"Dextrose"},{id:2,name:"Epinephrine"},{id:3,name:"Atropine"},{id:4,name:"Amiodarone"}]},{componentType:"multiSelectInputField",header:"Formulation",name:"formulation",isMultiple:!1,trackBy:"id",grid:{s:"4"},icon:F.search,options:[{id:1,name:"Solution"},{id:2,name:"Powder"},{id:3,name:"Capsule"},{id:4,name:"Tablet"}]},{componentType:"inputField",header:"Dose",name:"dose",grid:{s:"4"},initialUnit:"Years",unitOptions:[{label:"Grams (g)",value:"Grams (g)"},{label:"Milligrams (mg)",value:"Milligrams (mg)"},{label:"Micrograms (mcg)",value:"Micrograms (mcg)"},{label:"Units",value:"Units"}],unitValidation:e=>e&&""!==e?null:"Please select a unit."},{componentType:"multiSelectInputField",header:"Frequency",name:"frequency",isMultiple:!1,trackBy:"id",grid:{s:"4"},icon:F.search,options:[{id:1,name:"Daily"},{id:2,name:"Twice Daily"},{id:3,name:"Three Times Daily"},{id:4,name:"Four Times Daily"}]},{componentType:"inputField",header:"Duration",name:"duration ",grid:{s:"4"},initialUnit:"hours",unitOptions:[{label:"Hours",value:"hours"},{label:"Days",value:"days"},{label:"Weeks",value:"weeks"},{label:"Months",value:"months"},{label:"Years",value:"years"}],unitValidation:e=>e&&""!==e?null:"Please select a unit."}]);return(e,n)=>(o(),l(s(r),null,{default:c(()=>[u(s(d),null,{default:c(()=>[u(P,{formData:s(i),ref_key:"formRef",ref:a},null,8,["formData"])]),_:1})]),_:1}))}}),ue=i({__name:"PatientCareArea",setup(e){const a=t(null),i=n(()=>[{header:"Select Patient Care Area",name:"patient_care_area",componentType:"radioButtonField",type:"inline",grid:{s:"8"},options:[{label:"Rescitation",value:"Rescitation"},{label:"Short Stay",value:"Short Stay"},{label:"Gynae Bench",value:"Gynae Bench"},{label:"Isolation Room",value:"Isolation Room"},{label:"Trauma",value:"Trauma"},{label:"Medical Bench",value:"Medical Bench"},{label:"Surgical Bench",value:"Surgical Bench"},{label:"SSW",value:"SSW"},{label:"Priority Area",value:"Priority Area"},{label:"Other",value:"Other"}]}]);return(e,n)=>(o(),l(s(r),null,{default:c(()=>[u(s(d),null,{default:c(()=>[u(P,{formData:s(i),ref_key:"formRef",ref:a},null,8,["formData"])]),_:1})]),_:1}))}}),de={style:{width:"90vw",margin:"0 auto","margin-top":"10px"}},ge={class:"back_profile"};e("default",i({__name:"PatientManagementPlan",setup(e,{expose:i}){const{onTabBeforeChange:r,currentTabIndex:d}=X();re();const P=g(),F=p();t([]),t([]),t(!1);const pe=t(!0),me=t(!1),ye=t(!1),ve=n(()=>({text:ye.value?"Saving...":"Finish",icon:ye.value?"hourglass-outline":"checkmark",hideText:!1,hideIcon:!1,disabled:me.value||ye.value})),be=w(),he=D(),_e=C(),fe=M();A();const Te=I(),Se=j();N();const xe=B(),ke=ee(),Pe=R(),{patient:Fe}=m(he),{vitals:we}=m(be),{investigations:De}=m(_e),{diagnosis:Ce}=m(fe),{substance:Me}=m(xe),{selectedNCDMedicationList:Ae}=m(Te),{FootScreening:Ie,visualScreening:je,cvScreening:Ne}=m(ke),{sessionDate:Be}=m(Pe),{apiStatus:Re}=m(O());y(ve,(e,a)=>{console.log("Done button options changed:",{from:a,to:e,currentStep:d.value,tabsLength:Ee.value.length}),e.disabled!==(null==a?void 0:a.disabled)&&console.log("Done button "+(e.disabled?"disabled":"enabled")),e.text!==(null==a?void 0:a.text)&&console.log(`Done button text changed from "${null==a?void 0:a.text}" to "${e.text}"`)},{deep:!0}),y(ye,(e,a)=>{e!==a&&(console.log(`Saving state changed: ${a} -> ${e}`),e?console.log("Starting save process..."):console.log("Save process completed"))});const Oe=e=>{console.log("Done button change received from wizard:",e),e.newOptions.disabled&&console.log("Done button has been disabled"),e.isLastStep&&console.log("User is on the last step, done button should be visible")},Le=()=>{let e=!1;return Ve(),ye.value&&(e=!0),me.value=e,!e},Ee=t([{title:"Non Pharmacological",icon:""},{title:"Patient Care Area",icon:""},{title:"Medication",icon:""}]),ze=t(null),He=t(null),Ve=()=>{var e;if(!Ee.value||0===Ee.value.length)return console.log("Tabs not yet initialized"),null;const a=d.value>=0&&d.value<Ee.value.length?d.value:0;switch(null===(e=Ee.value[a])||void 0===e?void 0:e.title){case"Non Pharmacological":return"NonPharmacological";case"Patient Care Area":return"PatientCareArea";case"Medication":return"Medication";default:if(Se.NCDActivities.length>0)switch(Se.NCDActivities[0]){case"Non Pharmacological":return"NonPharmacological";case"Patient Care Area":return"PatientCareArea";case"Medication":return"Medication"}return null}},Ge=()=>{pe.value=!1,setTimeout(()=>{d.value=0,pe.value=!0},0)},Ue=()=>{const e=w();e.setVitals(e.getInitialVitals(Fe.value.ID))},We=async()=>{const e=z(Be.value,"sessionDate","value")||H.sessionDate(),a=V("vitals");for(let i=0;i<Ee.value.length;i++){const t=Ee.value[i];if("Vital Signs"===t.title)Ee.value[i].icon=Je(e,a)?k:"";else if("Risk Assessment"===t.title){const a=V("substanceAbuse");Ee.value[i].icon=Je(e,a)?k:""}else if("Investigations"===t.title){var n;const a=null==Fe||null===(n=Fe.value)||void 0===n||null===(n=n.labOrders)||void 0===n?void 0:n.saved,t=null==a?void 0:a.filter(a=>H.toStandardHisFormat(e)===H.toStandardHisFormat(a.order_date));Ee.value[i].icon=(null==t?void 0:t.length)>0?k:""}else if("Diagnosis"===t.title){const a=V("diagnosis");Ee.value[i].icon=Je(e,a)?k:""}else if("Complications Screening"===t.title){const a=V("screening");Ee.value[i].icon=Je(e,a)?k:""}else"Treatment Plan"===t.title&&(Ae.value.length>0?Ee.value[i].icon=G()?k:"":Ee.value[i].icon="")}Le()},Je=(e,a)=>{const n=new Date(e);return n.setHours(0,0,0,0),a.some(e=>{const a=new Date(e.obs_datetime);return a.setHours(0,0,0,0),a.getTime()===n.getTime()})},$e=async(e,a)=>{var n;const i=null===(n=Ee.value[a])||void 0===n?void 0:n.title;var t,l;e%1==0&&(d.value=e),"Vital Signs"==i&&(null===(t=ze.value)||void 0===t||t.onSubmit()),"Risk Assessment"==i&&(null===(l=He.value)||void 0===l||l.onSubmit()),"Complications Screening"==i&&await(async()=>{const e=[],a=await oe(je.value),n=await se(Ie.value),i=await oe(Ne.value);var t,l,o,s;a.length>0&&e.push({concept_id:await $.getConceptID("Visual acuity",!0),value_text:"visual acuity test",obs_datetime:$.getSessionDate(),child:a}),n.length>0&&e.push({concept_id:await $.getConceptID("Foot check",!0),value_text:"foot screening",obs_datetime:$.getSessionDate(),child:n}),i.length>0&&e.push(...i),e.length>0?(null!==(l=(t=null!==(s=(o=Fe.value).screening)&&void 0!==s?s:o.screening={}).unsaved)&&void 0!==l||(t.unsaved=[]),Fe.value.screening.unsaved.push(...e),q("Complications saved successfully")):J("No complications data to save")})(),"Treatment Plan"==i&&await(async()=>{const e=Y();if(!le.isEmpty(e.selectedMedicalAllergiesList)){const a=K(),n=e.selectedMedicalAllergiesList.map(e=>({concept_id:e.concept_id,obs_datetime:Q.getSessionDate(),value_coded:e.concept_id,location_id:a.facilityLocation.code,value_text:e.name})),i=await ne(n);Fe.value=Object.assign(Fe.value,i),console.log("Allergies staged successfully:",Fe.value),e.clearSelectedMedicalAllergiesList()}const a=await ie();Fe.value=Object.assign(Fe.value,a);const n=await te().saveNonPharmaTherapyPatientData();Fe.value=Object.assign(Fe.value,n)})(),await U(Fe.value)},qe=async()=>{ye.value=!0;try{await W(),await U(Fe.value),P.push("/triageList")}catch(e){console.error("Error saving data:",e),J("Error occurred while saving data. Please try again.")}finally{ye.value=!1}};return v(async()=>{0!==Se.NCDActivities.length?(ee().resetScreening(),Ee.value=[{title:"Non Pharmacological",icon:""},{title:"Patient Care Area",icon:""},{title:"Medication",icon:""}],await We(),(void 0===d.value||d.value<0)&&(d.value=0,console.log("Setting initial tab index to 0")),me.value=!1,ye.value=!1,Le()):P.push("patientProfile")}),y(d,async()=>{await Le()}),y(we,async()=>{await We()},{deep:!0}),y(Fe,async()=>{ee().resetScreening(),await We()},{deep:!0}),y(Be,async()=>{await We()},{deep:!0}),y(De,async()=>{await We()},{deep:!0}),y(Ce,async()=>{await We()},{deep:!0}),y(Me,async()=>{await We()},{deep:!0}),y(Ae,async()=>{await We()},{deep:!0}),y(F,async e=>{Ge(),Ue(),Ee.value=[{title:"Non Pharmacological",icon:""},{title:"Patient Care Area",icon:""},{title:"Medication",icon:""}]},{deep:!0}),y(Fe,async(e,a)=>{e.ID!=a.ID&&(Ge(),Ue())},{deep:!0}),i({saveData:qe,markWizard:We,refreshWizard:Ge,validateDoneButtonState:Le}),(e,n)=>(o(),l(s(x),null,{default:c(()=>[u(L),u(s(b),{fullscreen:!0},{default:c(()=>[u(Z),h("div",de,[pe.value?(o(),l(ae,{key:0,ref:"wizard",headingTitle:"Patient Management Plan","vertical-tabs":"","navigable-tabs":"","scrollable-tabs":"",startIndex:0,doneButton:ve.value,"custom-tabs":Ee.value,beforeChange:s(r),onChange:$e,"onComplete:wizard":n[1]||(n[1]=e=>qe()),onDoneButtonChanged:Oe},{default:c(()=>[h("div",null,[h("div",ge,[u(E,{name:"Back to profile",iconSlot:"start",fill:"clear",icon:s(T),"font-weight":"600",onClick:n[0]||(n[0]=e=>{P.push("/patientProfile")})},null,8,["icon"])])]),f(h("div",null,[u(a,{ref:"nonPharmacologicalRef"},null,512)],512),[[S,"NonPharmacological"==Ve()]]),f(h("div",null,[u(ue,{ref:"patientCareAreaRef"},null,512)],512),[[S,"PatientCareArea"==Ve()]]),f(h("div",null,[u(ce,{ref:"medicationRef"},null,512)],512),[[S,"Medication"==Ve()]])]),_:1},8,["doneButton","custom-tabs","beforeChange"])):_("",!0)])]),_:1})]),_:1}))}}))}}});
