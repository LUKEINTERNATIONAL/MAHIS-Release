import{d as W,c as M,e as E,f as v,p as J,k as l,l as e,u as t,L as nt,bT as Mt,K as y,O as D,J as n,a4 as h,a5 as u,bm as at,bZ as Bt,a2 as Ft,Q as m,N as V,R as Y,an as $t,aS as N,aP as P,dh as R,Z as O,r as $,aV as Ht,w as Ct,a as Wt,H as Lt,m as w,cX as Gt,dQ as Ut,al as jt,ak as F,_ as S,W as H,aj as Qt,ds as tt,b5 as Jt}from"./vendor-CWILCKEU.js";import{l as Zt}from"./lodash-NJiRuGo9.js";import{_ as Z,m as Q,H as z,u as qt,j as Kt,l as Xt,bm as Yt,S as te,af as ee,aW as ne,P as ae}from"../index-B9UHlCUb.js";import{u as le}from"./usePatientProfile-hmqWz6Ve.js";import se from"./WeightHeightChart-BLJYFl0T.js";import{O as oe,w as ie}from"./weightAndHeight-DjHVBCFo.js";import{N as re}from"./neonatal_service-C6fHyYTS.js";import"./apexcharts-MUkJV7jj.js";import"./Registration-DiPexudm.js";import"./useLocation-Bob_wAnf.js";import"./vaccines_service-D-JvPElq.js";import"./sms_service-CHgsJr3i.js";import"./EIRreportsStore-Dt8rZt23.js";import"./Export-CZRKKlCy.js";import"./NeonatalEnrollmentStore-CtSmIkwN.js";import"./chartjs-CdSb8wpc.js";import"./BasicForm-nfbe5Mkp.js";import"./DateInputField-Dtp_vv3I.js";import"./customDatePicker-4q2f8ddc.js";import"./VitalsMixin.vue_vue_type_script_lang-BbLQYUE6.js";import"./formatServerData-DCwdi0xy.js";const de={class:"alert-content"},ce={class:"alert-message"},ue=W({__name:"AlertActionButton",props:{message:{},actionText:{},type:{default:"danger"}},emits:["action"],setup(x,{emit:p}){const c=x,f=p,_=M(()=>"alert-".concat(c.type)),o=M(()=>"action-".concat(c.type)),k=()=>{f("action")};return(L,I)=>(v(),E("div",{class:J(["alert-action-button",_.value])},[l("div",de,[e(t(nt),{icon:t(Mt),class:"alert-icon"},null,8,["icon"]),l("span",ce,y(x.message),1)]),l("button",{onClick:k,class:J(["action-button",o.value])},y(x.actionText),3)],2))}}),et=Z(ue,[["__scopeId","data-v-e117fd66"]]),me=W({__name:"GridActionAlert",setup(x){const p=c=>{console.log("".concat(c," action was triggered."))};return(c,f)=>(v(),D(t(at),null,{default:n(()=>[e(t(h),{class:"ion-margin-bottom"},{default:n(()=>[e(t(u),{size:"12"},{default:n(()=>[e(et,{message:"Baby's Oxygen level too low",actionText:"Take immediate action",type:"danger",onAction:f[0]||(f[0]=_=>p("active"))})]),_:1})]),_:1}),e(t(h),{class:"ion-align-items-start"},{default:n(()=>[e(t(u),{size:"12","size-md":"6"},{default:n(()=>[e(et,{message:"Temperature needs monitoring",actionText:"Check temperature",type:"warning",onAction:f[1]||(f[1]=_=>p("retry"))})]),_:1}),e(t(u),{size:"12","size-md":"6"},{default:n(()=>[e(et,{message:"Scheduled checkup in 2 hours",actionText:"View schedule",type:"info",onAction:f[2]||(f[2]=_=>p("update"))})]),_:1})]),_:1})]),_:1}))}}),pe={class:"enrollment-card"},fe={class:"card-header"},ve={class:"header-left"},_e={class:"header-right"},ge={class:"date-value"},ye={class:"card-actions"},he=W({__name:"EnrollmentCard",props:{date:{default:new Date().toISOString()},patient_Id:{default:0}},emits:["cancel","enroll","close"],setup(x,{emit:p}){const c=x,f=p,_=M(()=>new Date(c.date).toLocaleDateString("en-GB",{day:"2-digit",month:"short",year:"numeric"})),o=async()=>{try{await Y.dismiss({action:"cancel",patientId:c.patient_Id})}catch(I){console.error("Modal dismissal error:",I)}f("cancel",c.patient_Id)},k=async()=>{try{await Y.dismiss({action:"enroll",patientId:c.patient_Id})}catch(I){console.error("Modal dismissal error:",I)}f("enroll",c.patient_Id)},L=async()=>{try{await Y.dismiss({action:"close"})}catch(I){console.error("Modal dismissal error:",I)}f("close")};return(I,g)=>(v(),E("div",pe,[l("div",fe,[l("div",ve,[e(t(nt),{icon:t(Bt),class:"header-icon"},null,8,["icon"]),g[0]||(g[0]=l("h2",{class:"header-title"},"Enrollment",-1))]),l("div",_e,[g[1]||(g[1]=l("span",{class:"date-label"},"Date:",-1)),l("span",ge,y(_.value),1)]),l("button",{onClick:L,class:"close-button","aria-label":"Close"},[e(t(nt),{icon:t(Ft),size:"large"},null,8,["icon"])])]),g[4]||(g[4]=l("div",{class:"card-content"},[l("p",{class:"enrollment-message"}," This neonate is currently not enrolled into the Neonatal Program. "),l("p",{class:"enrollment-question"}," Do you wish to enroll to continue? ")],-1)),l("div",ye,[e(t(V),{expand:"block",color:"danger",onClick:o,class:"action-button cancel-button"},{default:n(()=>[...g[2]||(g[2]=[m(" Cancel ",-1)])]),_:1}),e(t(V),{expand:"block",color:"success",onClick:k,class:"action-button enroll-button"},{default:n(()=>[...g[3]||(g[3]=[m(" Enroll ",-1)])]),_:1})])]))}}),St=Z(he,[["__scopeId","data-v-7dddaa7f"]]),Ie={class:"neonatal-home-component"},be={class:"icon-container"},ke={class:"icon-container"},we={class:"icon-container"},xe={class:"icon-container"},Ce={class:"icon-container"},$e={class:"icon-container"},Se=W({__name:"NeonatalCare",setup(x){$t();const p=_=>"src/apps/Neonatal/public/patient_profile_imgs/".concat(_),c=_=>{console.log("Navigating to: ".concat(_))},f=()=>{Q(St,{class:"otherVitalsModal"},!1,{patient_Id:0})};return(_,o)=>(v(),E("div",Ie,[o[11]||(o[11]=l("div",{class:"section-header"},[l("h2",null,"Activities")],-1)),e(t(at),null,{default:n(()=>[e(t(h),null,{default:n(()=>[e(t(u),{size:"6"},{default:n(()=>[e(t(N),{button:"",onClick:f,class:"activity-card"},{default:n(()=>[e(t(P),{class:"card-content"},{default:n(()=>[l("div",be,[e(t(R),{src:p("baby_transport.png"),alt:"Admit",class:"activity-icon"},null,8,["src"])]),e(t(O),{class:"card-label"},{default:n(()=>[...o[5]||(o[5]=[l("p",null,"Admit",-1)])]),_:1})]),_:1})]),_:1})]),_:1}),e(t(u),{size:"6"},{default:n(()=>[e(t(N),{button:"",onClick:o[0]||(o[0]=k=>c("discharge")),class:"activity-card"},{default:n(()=>[e(t(P),{class:"card-content"},{default:n(()=>[l("div",ke,[e(t(R),{src:p("cry_baby.png"),alt:"Discharge",class:"activity-icon"},null,8,["src"])]),e(t(O),{class:"card-label"},{default:n(()=>[...o[6]||(o[6]=[l("p",null,"Discharge",-1)])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),e(t(h),null,{default:n(()=>[e(t(u),{size:"6"},{default:n(()=>[e(t(N),{button:"",onClick:o[1]||(o[1]=k=>c("neonatal-opd")),class:"activity-card"},{default:n(()=>[e(t(P),{class:"card-content"},{default:n(()=>[l("div",we,[e(t(R),{src:p("ouroboros.png"),alt:"Neonatal OPD",class:"activity-icon"},null,8,["src"])]),e(t(O),{class:"card-label"},{default:n(()=>[...o[7]||(o[7]=[l("p",null,"Neonatal OPD",-1)])]),_:1})]),_:1})]),_:1})]),_:1}),e(t(u),{size:"6"},{default:n(()=>[e(t(N),{button:"",onClick:o[2]||(o[2]=k=>c("clinical-review")),class:"activity-card"},{default:n(()=>[e(t(P),{class:"card-content"},{default:n(()=>[l("div",xe,[e(t(R),{src:p("med_clinic.png"),alt:"Clinical Review",class:"activity-icon"},null,8,["src"])]),e(t(O),{class:"card-label"},{default:n(()=>[...o[8]||(o[8]=[l("p",null,"Clinical Review",-1)])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),o[12]||(o[12]=l("div",{class:"section-header",style:{"margin-top":"24px"}},[l("h2",null,"Quick Actions")],-1)),e(t(at),null,{default:n(()=>[e(t(h),null,{default:n(()=>[e(t(u),{size:"6"},{default:n(()=>[e(t(N),{button:"",onClick:o[3]||(o[3]=k=>c("emergency-triage")),class:"activity-card"},{default:n(()=>[e(t(P),{class:"card-content"},{default:n(()=>[l("div",Ce,[e(t(R),{src:p("pulse.png"),alt:"Start Emergency Triage",class:"activity-icon"},null,8,["src"])]),e(t(O),{class:"card-label"},{default:n(()=>[...o[9]||(o[9]=[l("p",null,"Start Emergency Triage",-1)])]),_:1})]),_:1})]),_:1})]),_:1}),e(t(u),{size:"6"},{default:n(()=>[e(t(N),{button:"",onClick:o[4]||(o[4]=k=>c("instruction-guides")),class:"activity-card"},{default:n(()=>[e(t(P),{class:"card-content"},{default:n(()=>[l("div",$e,[e(t(R),{src:p("info.png"),alt:"Instruction Guides",class:"activity-icon"},null,8,["src"])]),e(t(O),{class:"card-label"},{default:n(()=>[...o[10]||(o[10]=[l("p",null,"Instruction Guides",-1)])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]))}}),De=Z(Se,[["__scopeId","data-v-0d074f15"]]),Ee={style:{"max-width":"900px",margin:"auto"}},Te={style:{"--background":"#fff"}},Ae={class:"demographics"},Ne={style:{"text-overflow":"ellipsis"}},Pe={style:{display:"flex","justify-content":"space-between","align-content":"center","padding-bottom":"5px","padding-top":"5px","padding-left":"5px"}},Re={style:{"margin-right":"5px"}},Oe={style:{"margin-top":"5px"}},ze={class:"demographicsFirstRow"},Ve={class:"name custom-name-container"},Me={class:"demographicsOtherRow",style:{"margin-top":"10px"}},Be={class:"demographicsText",style:{display:"flex","flex-wrap":"wrap"}},Fe={style:{"flex-shrink":"0"}},He={style:{"flex-shrink":"0"}},We={key:0,class:"demographicsOtherRow"},Le={class:"demographicsText mediumFontColor"},Ge={key:1,class:"demographicsOtherRow"},Ue={class:"demographicsText mediumFontColor"},je={class:"demographicsOtherRow"},Qe={class:"demographicsText smallFont"},Je={class:"mediumFontColor"},Ze={style:{background:"transparent"}},qe={class:"graphSection"},Ke={class:"graphBtn",style:{"margin-bottom":"5px"}},Xe={class:"weightHeightGraphBtns"},Ye={key:0},tn={key:1},en={class:"ion-padding",slot:"content"},nn=W({__name:"NeonatalPatientProfile",setup(x){const{event:p,popoverOpen:c,openPopover:f,openPIM:_,printVisitSummary:o,printID:k,formatCurrentAddress:L}=le(),I=$t(),g=Xt,q=$(!1),G=$(7),Dt=$([]),Et=$([]),lt=$([]),T=$(null),A=$(!1),U=M(()=>{var r,C,B;const s=(C=(r=T.value)==null?void 0:r.enrolled)!=null?C:!1,a=((B=T.value)==null?void 0:B.enrollment_data)!=null;return s&&a}),st=M(()=>{var a,r;const s=(r=(a=T.value)==null?void 0:a.enrollment_data)==null?void 0:r.date_enrolled;return s?z.toStandardHisDisplayFormat(s):null}),Tt=M(()=>A.value?"Checking enrollment…":U.value?st.value?"Enrolled ".concat(st.value):"Enrolled":"Not enrolled"),At=qt(),{patient:i}=Ht(At),K=async s=>{G.value=s},j=$(!1),X=async()=>{var a;const s=Number((a=i.value)==null?void 0:a.patientID);if(!s||isNaN(s)){T.value=null;return}A.value=!0;try{const r=await re.checkEnrollment(s);T.value=r}catch(r){console.error("Failed to fetch neonatal enrollment status",r),T.value={enrolled:!1}}finally{A.value=!1,!U.value&&!j.value&&(j.value=!0,await Nt())}},Nt=async()=>{var s,a;try{const r=await Q(St,{class:"otherVitalsModal"},!1,{date:new Date().toISOString(),patient_Id:(a=(s=i.value)==null?void 0:s.patientID)!=null?a:0});(r==null?void 0:r.action)==="enroll"&&ot()}catch(r){console.error("Error showing enrollment modal:",r)}},ot=()=>{var s;!((s=i.value)!=null&&s.patientID)||A.value||I.push("/neonatal/enrollment")},it=async()=>{try{const s=await Yt.getLabResults(i.value);lt.value=(s==null?void 0:s.results)||[]}catch(s){console.error("Error fetching lab results:",s),lt.value=[]}},rt=async()=>{var s;Et.value=await te.getJson("/hts_referral_orders",{patient_id:(s=i.value)==null?void 0:s.patientID,filter_by_lab_result:!0})},Pt=async()=>{var a;const s=await ee.getObsByEncounterId(ne.REFERRAL);Dt.value=((a=s[0])==null?void 0:a.obs)||[]},Rt=s=>z.calculateDisplayAge(z.toStandardHisFormat(s)),dt=()=>{var s,a,r,C;Zt.isEmpty((a=(s=i.value)==null?void 0:s.personInformation)==null?void 0:a.birthdate)||(q.value=z.dateDiffInDays(z.sessionDate(),(C=(r=i.value)==null?void 0:r.personInformation)==null?void 0:C.birthdate)<42)},Ot=()=>{Q(oe,{class:"otherVitalsModal"})},zt=()=>{Q(ie,{class:"otherVitalsModal"})},ct=()=>!!new ae().isUnderFive(),Vt=()=>{var s,a;return z.toStandardHisDisplayFormat((a=(s=i.value)==null?void 0:s.personInformation)==null?void 0:a.birthdate)};return Ct(()=>I.currentRoute.value,async s=>{(s.name=="patientProfile"||s.name=="neonatalPatientProfile")&&i.value.patientID&&(j.value=!1,await X())}),Ct(()=>{var s;return(s=i.value)==null?void 0:s.patientID},async(s,a)=>{s&&s!==a&&(j.value=!1,dt(),await it(),await rt(),await X())}),Wt(async()=>{dt(),await Pt(),await rt(),await it(),await X()}),(s,a)=>{var C,B,ut,mt,pt,ft,vt,_t,gt,yt,ht,It,bt,kt,wt,xt;const r=Lt("ion-icon");return v(),E("div",Ee,[l("div",Te,[l("div",Ae,[l("div",Ne,[l("div",Pe,[l("div",Re,[e(t(h),null,{default:n(()=>[e(t(u),null,{default:n(()=>{var d,b;return[l("div",{class:J(((b=(d=t(i))==null?void 0:d.personInformation)==null?void 0:b.gender)=="M"?"initialsBox maleColor":"initialsBox femaleColor"),style:{display:"flex","flex-direction":"column","align-items":"center"}},[e(r,{style:{color:"#fff","font-size":"100px"},icon:t(Gt)},null,8,["icon"])],2)]}),_:1})]),_:1}),e(t(h),null,{default:n(()=>[e(t(u),{class:"pill-row"},{default:n(()=>[a[11]||(a[11]=l("span",{class:"pill-text"},"Returning Client",-1)),l("span",{class:J(["pill-text enrollment-pill",U.value?"pill-success":"pill-warning"])},y(Tt.value),3)]),_:1})]),_:1}),!U.value&&!A.value?(v(),D(t(h),{key:0},{default:n(()=>[e(t(u),null,{default:n(()=>[e(t(V),{class:"enroll-pill-button",fill:"outline",size:"small",onClick:ot},{default:n(()=>[...a[12]||(a[12]=[m(" Enroll in neonatal program ",-1)])]),_:1})]),_:1})]),_:1})):w("",!0),A.value?(v(),D(t(h),{key:1},{default:n(()=>[e(t(u),null,{default:n(()=>[...a[13]||(a[13]=[l("span",{class:"enrollment-loading-text"},"Checking enrollment…",-1)])]),_:1})]),_:1})):w("",!0)]),l("div",Oe,[l("div",ze,[l("div",Ve,[(B=(C=t(i))==null?void 0:C.personInformation)!=null&&B.given_name?(v(),D(t(h),{key:0,class:"custom-name-row"},{default:n(()=>[e(t(u),{class:"custom-name-col"},{default:n(()=>{var d,b;return[m(y((b=(d=t(i))==null?void 0:d.personInformation)==null?void 0:b.given_name),1)]}),_:1})]),_:1})):w("",!0),(mt=(ut=t(i))==null?void 0:ut.personInformation)!=null&&mt.middle_name?(v(),D(t(h),{key:1,class:"custom-name-row"},{default:n(()=>[e(t(u),{class:"custom-name-col"},{default:n(()=>{var d,b;return[m(y((b=(d=t(i))==null?void 0:d.personInformation)==null?void 0:b.middle_name),1)]}),_:1})]),_:1})):w("",!0),(ft=(pt=t(i))==null?void 0:pt.personInformation)!=null&&ft.family_name?(v(),D(t(h),{key:2,class:"custom-name-row"},{default:n(()=>[e(t(u),{class:"custom-name-col"},{default:n(()=>{var d,b;return[m(y((b=(d=t(i))==null?void 0:d.personInformation)==null?void 0:b.family_name),1)]}),_:1})]),_:1})):w("",!0)])]),l("div",Me,[l("div",Be,[l("span",Fe,y(((_t=(vt=t(i))==null?void 0:vt.personInformation)==null?void 0:_t.gender)=="M"?"Male":"Female"),1),a[14]||(a[14]=l("span",{style:{"flex-shrink":"0"}},".",-1)),l("span",He,y(Rt((yt=(gt=t(i))==null?void 0:gt.personInformation)==null?void 0:yt.birthdate))+" ("+y(Vt())+")",1)])]),(It=(ht=t(i))==null?void 0:ht.personInformation)!=null&&It.current_district?(v(),E("div",We,[a[15]||(a[15]=l("div",{class:"demographicsText"},"Current Address:",-1)),l("div",Le,y(t(L)(t(i))),1)])):w("",!0),(kt=(bt=t(i))==null?void 0:bt.personInformation)!=null&&kt.country?(v(),E("div",Ge,[a[16]||(a[16]=l("div",{class:"demographicsText"},"Country:",-1)),l("div",Ue,y((xt=(wt=t(i))==null?void 0:wt.personInformation)==null?void 0:xt.country),1)])):w("",!0),l("div",je,[l("div",Qe,[a[17]||(a[17]=m(" MRN: ",-1)),l("span",Je,y(t(i).ID),1)])])])])]),l("div",Ze,[e(t(h),{class:"no-wrap-row",style:{"align-items":"center"}},{default:n(()=>[e(t(u),{style:{flex:"1","min-width":"0"}},{default:n(()=>[e(t(V),{class:"deactivate-button",fill:"solid",shape:"round"},{default:n(()=>[...a[18]||(a[18]=[m(" Deactivate Visit ",-1)])]),_:1})]),_:1}),e(t(u),{size:"auto",style:{"flex-shrink":"0"}},{default:n(()=>[l("div",{class:"name",style:{color:"var(--ion-color-primary)","margin-top":"10px"},onClick:a[0]||(a[0]=d=>t(f)(d))},[e(r,{icon:t(Ut)},null,8,["icon"])])]),_:1})]),_:1})])]),l("div",qe,[l("div",null,[ct()?(v(),D(se,{key:0,checkUnderSixWeeks:q.value,showHeightWeight:!0},null,8,["checkUnderSixWeeks"])):w("",!0),ct()?w("",!0):(v(),D(Kt,{key:1}))]),l("div",Ke,[l("div",Xe,[l("div",null,[e(t(V),{class:"btnText",fill:"solid",onClick:a[1]||(a[1]=d=>zt())},{default:n(()=>[q.value?(v(),E("span",tn," Enter Weight")):(v(),E("span",Ye," Enter Weight/Height")),e(r,{slot:"end",size:"small",icon:t(g).whiteHeightWeight},null,8,["icon"])]),_:1})]),l("div",null,[e(t(V),{class:"btnText",fill:"solid",onClick:a[2]||(a[2]=d=>Ot())},{default:n(()=>[a[19]||(a[19]=m(" Enter Other Vitals ",-1)),e(r,{slot:"end",size:"small",icon:t(g).whiteVitals},null,8,["icon"])]),_:1})])])])]),e(me),e(De),e(t(Jt),{style:{"--offset-x":"-10px"},"is-open":t(c),"show-backdrop":!1,event:t(p),onDidDismiss:a[10]||(a[10]=d=>c.value=!1)},{default:n(()=>[l("div",null,[e(t(jt),{multiple:!0},{default:n(()=>[e(t(F),{value:"first","toggle-icon":"",onClick:a[3]||(a[3]=d=>t(_)())},{default:n(()=>[e(t(S),{slot:"header",color:"light"},{default:n(()=>[e(t(H),null,{default:n(()=>[...a[20]||(a[20]=[m("Update demographics",-1)])]),_:1})]),_:1})]),_:1}),e(t(F),{value:"first","toggle-icon":"",onClick:a[4]||(a[4]=()=>{})},{default:n(()=>[e(t(S),{slot:"header",color:"light"},{default:n(()=>[e(t(H),null,{default:n(()=>[...a[21]||(a[21]=[m("Follow up visits",-1)])]),_:1})]),_:1})]),_:1}),e(t(F),{value:"second","toggle-icon":"",onClick:a[5]||(a[5]=d=>t(o)())},{default:n(()=>[e(t(S),{slot:"header",color:"light"},{default:n(()=>[e(t(H),null,{default:n(()=>[...a[22]||(a[22]=[m("Print visit summary",-1)])]),_:1})]),_:1})]),_:1}),e(t(F),{value:"third","toggle-icon":"",onClick:a[6]||(a[6]=d=>t(k)())},{default:n(()=>[e(t(S),{slot:"header",color:"light"},{default:n(()=>[e(t(H),null,{default:n(()=>[...a[23]||(a[23]=[m("Print client identifier",-1)])]),_:1})]),_:1})]),_:1}),e(t(F),{value:"fourth"},{default:n(()=>[e(t(S),{slot:"header",color:"light"},{default:n(()=>[e(t(H),null,{default:n(()=>[...a[24]||(a[24]=[m("Update outcome",-1)])]),_:1})]),_:1}),l("div",en,[e(t(Qt),null,{default:n(()=>[e(t(S),null,{default:n(()=>[e(t(tt),{checked:G.value==7,value:"active",onIonChange:a[7]||(a[7]=d=>K(7))},{default:n(()=>[...a[25]||(a[25]=[m(" Active ",-1)])]),_:1},8,["checked"])]),_:1}),e(t(S),null,{default:n(()=>[e(t(tt),{checked:G.value==6,value:"inactive",onIonChange:a[8]||(a[8]=d=>K(6))},{default:n(()=>[...a[26]||(a[26]=[m(" Inactive ",-1)])]),_:1},8,["checked"])]),_:1}),e(t(S),null,{default:n(()=>[e(t(tt),{checked:G.value==3,value:"died",onIonChange:a[9]||(a[9]=d=>K(3))},{default:n(()=>[...a[27]||(a[27]=[m(" Died ",-1)])]),_:1},8,["checked"])]),_:1})]),_:1})])]),_:1})]),_:1})])]),_:1},8,["is-open","event"])])])}}}),Cn=Z(nn,[["__scopeId","data-v-00847ab9"]]);export{Cn as default};
