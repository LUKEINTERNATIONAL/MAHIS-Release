import{d as b,r as F,at as x,w as d,e as R,f as y,l as v,u as m,bh as Oe,c as te,F as me,T as fe,k as g,I as J,G as j,Q as Me,H as P,m as He,ae as Be,N as ie,S as Ae,a3 as Q,P as le,b as je,L as Pe,bq as Le,aF as We,cr as Ue,aj as Ge,bU as Ye,eV as qe}from"./vendor-CJ2tyHrn.js";import{C as T,_ as D,T as ze,u as Ke,cl as Je,t as re,H as Qe,K as z,ci as Xe,b as Ze,G as de,k as et}from"../index-CPIhguZJ.js";import{D as tt}from"./DemographicBar-CMCjh8ca.js";import{l as h,m as V,u as M,N as ot,o as at,t as nt}from"./NeonatalStepper-BvXO5k96.js";import"./lodash-NJiRuGo9.js";import"./apexcharts-BtvCa6MI.js";import"./SaveProgressModal-Bs8SOcXY.js";import"./enrollment-DU-PLRUa.js";import"./images-142qstiX.js";const rt={class:"triage-section-wrapper"},st=b({__name:"EmergencyTriageSection",setup(f,{expose:u}){const o=F(null),a=h[0],l=a.formData,c=a.conditionalRules||[],n=x(V),r=M(),e=t=>{n&&(n.crying=t.crying||"",r.setField("crying",t.crying||""),r.setField("breathing",t.breathing||""))};return d(()=>{var t;return(t=o.value)==null?void 0:t.formValues},t=>{t&&e(t)},{deep:!0}),d(()=>o.value,t=>{t!=null&&t.getFormValues&&e(t.getFormValues())},{immediate:!0}),u({getFormRef:()=>o.value,validateForm:()=>{var t,s;return((s=(t=o.value)==null?void 0:t.validateForm)==null?void 0:s.call(t))||null},getFormValues:()=>{var t,s;return((s=(t=o.value)==null?void 0:t.getFormValues)==null?void 0:s.call(t))||{}}}),(t,s)=>(y(),R("div",rt,[v(T,{formData:m(l),conditionalRules:m(c),ref_key:"formRef",ref:o},null,8,["formData","conditionalRules"])]))}}),ge=D(st,[["__scopeId","data-v-4feaf236"]]),it={class:"triage-section-wrapper"},lt=b({__name:"BreathingAssessmentSection",setup(f,{expose:u}){const o=F(null),a=h[0],l=a.formData,c=a.conditionalRules||[],n=x(V),r=e=>{n&&(n.breathing=e.breathing)};return d(()=>{var e;return(e=o.value)==null?void 0:e.formValues},e=>{e&&r(e)},{deep:!0}),d(()=>o.value,e=>{e!=null&&e.getFormValues&&r(e.getFormValues())},{immediate:!0}),u({getFormRef:()=>o.value,validateForm:()=>{var e,t;return((t=(e=o.value)==null?void 0:e.validateForm)==null?void 0:t.call(e))||null},getFormValues:()=>{var e,t;return((t=(e=o.value)==null?void 0:e.getFormValues)==null?void 0:t.call(e))||{}}}),(e,t)=>(y(),R("div",it,[v(T,{formData:m(l),conditionalRules:m(c),ref_key:"formRef",ref:o},null,8,["formData","conditionalRules"])]))}}),pe=D(lt,[["__scopeId","data-v-2d1b12e9"]]),ct={class:"triage-section-wrapper"},ut=b({__name:"EmergencyManagementSection",setup(f,{expose:u}){const o=F(null),a=h.find(e=>e.title==="Oxygen Saturation"),l=a.formData,c=a.conditionalRules||[],n=x(V),r=e=>{n&&Object.assign(n,e)};return d(()=>{var e;return(e=o.value)==null?void 0:e.formValues},e=>{e&&r(e)},{deep:!0}),u({getFormRef:()=>o.value,validateForm:()=>{var e,t;return((t=(e=o.value)==null?void 0:e.validateForm)==null?void 0:t.call(e))||null},getFormValues:()=>{var e,t;return((t=(e=o.value)==null?void 0:e.getFormValues)==null?void 0:t.call(e))||{}}}),(e,t)=>(y(),R("div",ct,[v(T,{formData:m(l),conditionalRules:m(c),ref_key:"formRef",ref:o},null,8,["formData","conditionalRules"])]))}}),mt=D(ut,[["__scopeId","data-v-3306617f"]]),ft={class:"triage-section-wrapper"},dt=b({__name:"OxygenSaturationSection",setup(f,{expose:u}){const o=F(null),a=h[3],l=a.formData,c=a.conditionalRules||[],n=x(V),r=M(),e=t=>{n&&(Object.assign(n,t),r.setField("observations",t.observations))};return d(()=>{var t;return(t=o.value)==null?void 0:t.formValues},t=>{t&&e(t)},{deep:!0}),u({getFormRef:()=>o.value,validateForm:()=>{var t,s;return((s=(t=o.value)==null?void 0:t.validateForm)==null?void 0:s.call(t))||null},getFormValues:()=>{var t,s;return((s=(t=o.value)==null?void 0:t.getFormValues)==null?void 0:s.call(t))||{}}}),(t,s)=>(y(),R("div",ft,[v(T,{formData:m(l),conditionalRules:m(c),ref_key:"formRef",ref:o},null,8,["formData","conditionalRules"])]))}}),_e=D(dt,[["__scopeId","data-v-740aefb2"]]),gt={class:"triage-section-wrapper"},pt=b({__name:"CentralCyanosisSection",setup(f,{expose:u}){const o=F(null),a=h.find(e=>e.title==="Emergency Management 3"),l=a.formData,c=a.conditionalRules||[],n=x(V),r=e=>{n&&Object.assign(n,e)};return d(()=>{var e;return(e=o.value)==null?void 0:e.formValues},e=>{e&&r(e)},{deep:!0}),u({getFormRef:()=>o.value,validateForm:()=>{var e,t;return((t=(e=o.value)==null?void 0:e.validateForm)==null?void 0:t.call(e))||null},getFormValues:()=>{var e,t;return((t=(e=o.value)==null?void 0:e.getFormValues)==null?void 0:t.call(e))||{}}}),(e,t)=>(y(),R("div",gt,[v(T,{formData:m(l),conditionalRules:m(c),ref_key:"formRef",ref:o},null,8,["formData","conditionalRules"])]))}}),ve=D(pt,[["__scopeId","data-v-0e2784f0"]]),_t={class:"triage-section-wrapper"},vt=b({__name:"ConvulsionsSection",setup(f,{expose:u}){const o=F(null),a=h.find(e=>e.title==="Emergency Management 4"),l=a.formData,c=a.conditionalRules||[],n=x(V),r=e=>{n&&Object.assign(n,e)};return d(()=>{var e;return(e=o.value)==null?void 0:e.formValues},e=>{e&&r(e)},{deep:!0}),u({getFormRef:()=>o.value,validateForm:()=>{var e,t;return((t=(e=o.value)==null?void 0:e.validateForm)==null?void 0:t.call(e))||null},getFormValues:()=>{var e,t;return((t=(e=o.value)==null?void 0:e.getFormValues)==null?void 0:t.call(e))||{}}}),(e,t)=>(y(),R("div",_t,[v(T,{formData:m(l),conditionalRules:m(c),ref_key:"formRef",ref:o},null,8,["formData","conditionalRules"])]))}}),ye=D(vt,[["__scopeId","data-v-78f15785"]]),yt={class:"triage-section-wrapper"},Ft=b({__name:"VitalSectionTwo",setup(f,{expose:u}){const o=F(null),a=h.find(t=>t.title==="Vital Signs 2"),l=a.formData,c=a.conditionalRules||[],n=x(V),r=M(),e=t=>{n&&r.setField("saturation_in_oxygen",t.saturation_in_oxygen)};return d(()=>{var t;return(t=o.value)==null?void 0:t.formValues},t=>{t&&e(t)},{deep:!0}),d(()=>o.value,t=>{t!=null&&t.getFormValues&&e(t.getFormValues())},{immediate:!0}),u({getFormRef:()=>o.value,validateForm:()=>{var t,s;return((s=(t=o.value)==null?void 0:t.validateForm)==null?void 0:s.call(t))||null},getFormValues:()=>{var t,s;return((s=(t=o.value)==null?void 0:t.getFormValues)==null?void 0:s.call(t))||{}}}),(t,s)=>(y(),R("div",yt,[v(T,{formData:m(l),conditionalRules:m(c),ref_key:"formRef",ref:o},null,8,["formData","conditionalRules"])]))}}),Fe=D(Ft,[["__scopeId","data-v-18df91a1"]]),Rt={class:"triage-section-wrapper"},ht=b({__name:"VitalSectionThree",setup(f,{expose:u}){const o=F(null),a=h.find(t=>t.title==="Vital Signs 3"),l=a.formData,c=a.conditionalRules||[],n=x(V),r=M(),e=t=>{n&&(r.setField("temperature",t.temperature),r.setField("can_measure_temp",t.can_measure_temp))};return d(()=>{var t;return(t=o.value)==null?void 0:t.formValues},t=>{t&&e(t)},{deep:!0}),d(()=>o.value,t=>{t!=null&&t.getFormValues&&e(t.getFormValues())},{immediate:!0}),u({getFormRef:()=>o.value,validateForm:()=>{var t,s;return((s=(t=o.value)==null?void 0:t.validateForm)==null?void 0:s.call(t))||null},getFormValues:()=>{var t,s;return((s=(t=o.value)==null?void 0:t.getFormValues)==null?void 0:s.call(t))||{}}}),(t,s)=>(y(),R("div",Rt,[v(T,{formData:m(l),conditionalRules:m(c),ref_key:"formRef",ref:o},null,8,["formData","conditionalRules"])]))}}),Re=D(ht,[["__scopeId","data-v-8f1c7b62"]]),St={class:"summary-wrapper"},bt={class:"summary-card-body"},Dt={class:"summary-row-label"},Vt={class:"summary-row-value"},xt=b({__name:"TriageSummarySection",setup(f){const u=M(),{formValues:o}=Oe(u),a={not_breathing:"Not breathing",hr_low:"Heart rate low",hr_fast:"Heart rate fast",gasping:"GASPING or irregular breathing",chest_indrawing:"Chest indrawing",floppy:"VERY FLOPPY (Normal breathing & HR)",stable:"stable"},l={None:"None",Convulsions_twitching:"Convulsions or twitching",grunting:"Grunting or Severe chest indrawing's",Central_cyanosis:"Central cyanosis"},c={none:"None",trunk_cold:"Trunk feels cold",capillary_refill:"Capillary refill >3 seconds",weak_pulse:"Weak femoral pulse"},n=i=>i==null||i===""?null:i===!0||i==="yes"?"(yes)":i===!1||i==="no"?"(no)":String(i),r=i=>i==null||i===""?null:String(i),e=(i,k)=>!Array.isArray(i)||i.length===0?null:i.map(N=>{var S;const p=String(N);return(S=k==null?void 0:k[p])!=null?S:p}).join("\n"),t=te(()=>{const i=o.value||{};return[{title:"Triage",items:[{label:"Is the baby crying?",value:n(i.crying)},{label:"Is the baby breathing?",value:e(i.breathing,a)},{label:"Observations",value:e(i.observations,l)},{label:"Present signs",value:e(i.present_signs,c)}]},{title:"Vitals",items:[{label:"Respiratory Rate",value:r(i.respiratory_rate)},{label:"Heart Rate (bpm)",value:r(i.heart_rate)},{label:"Oxygen Sats in Air (%)",value:r(i.oxygen_saturation_vital)},{label:"Saturations in Oxygen (%)",value:r(i.saturation_in_oxygen)},{label:"Temperature (degs C)",value:r(i.temperature)},{label:"Blood Sugar",value:i.blood_sugar?"".concat(i.blood_sugar," ").concat(i.bloodSugar_unit||"").trim():null},{label:"Admission Weight (kg)",value:r(i.admission_weight)},{label:"Birth Weight (kg)",value:r(i.birth_weight)},{label:"Head Circumference (cm)",value:r(i.head_circumference)}]}]}),s=te(()=>t.value.map(i=>({...i,items:i.items.filter(k=>k.value!==null&&k.value!=="")})).filter(i=>i.items.length>0));return(i,k)=>(y(),R("div",St,[(y(!0),R(me,null,fe(s.value,H=>(y(),R("div",{key:H.title,class:"summary-card"},[g("div",bt,[(y(!0),R(me,null,fe(H.items,N=>(y(),R("div",{key:N.label,class:"summary-row"},[g("span",Dt,J(N.label),1),g("span",Vt,J(N.value),1)]))),128))])]))),128))]))}}),Tt=D(xt,[["__scopeId","data-v-6aeaf1fc"]]),It={class:"weight-loss"},Ct=b({__name:"VitalSectionFour",setup(f,{expose:u}){const o=F(null),a=h.find(s=>s.title==="Vital Signs Four"),l=a.formData,c=a.conditionalRules||[],n=x(V),r=M(),e=F(0),t=s=>{if(!n)return;r.setField("admission_weight",s.admission_weight),r.setField("birth_weight",s.birth_weight),r.setField("head_circumference",s.head_circumference);const i=Number(s.birth_weight),k=Number(s.admission_weight);i>0?e.value=parseFloat(((i-k)/i*100).toFixed(2)):e.value=0};return d(()=>{var s;return(s=o.value)==null?void 0:s.formValues},s=>{s&&t(s)},{deep:!0}),d(()=>o.value,s=>{s!=null&&s.getFormValues&&t(s.getFormValues())},{immediate:!0}),u({getFormRef:()=>o.value,validateForm:()=>{var s,i;return((i=(s=o.value)==null?void 0:s.validateForm)==null?void 0:i.call(s))||null},getFormValues:()=>{var s,i;return((i=(s=o.value)==null?void 0:s.getFormValues)==null?void 0:i.call(s))||{}}}),(s,i)=>{const k=j("ion-card");return y(),Me(k,{class:"triage-section-wrapper"},{default:P(()=>[v(T,{formData:m(l),conditionalRules:m(c),ref_key:"formRef",ref:o},{percentage:P(()=>[g("div",It,"Weight loss percentage: "+J(e.value)+"%",1)]),_:1},8,["formData","conditionalRules"])]),_:1})}}}),wt=D(Ct,[["__scopeId","data-v-cd93ef53"]]),kt={class:"triage-section-wrapper"},$t=b({__name:"TemperatureHight",setup(f,{expose:u}){const o=F(null),a=h.find(e=>e.title==="Temperature High"),l=a.formData,c=a.conditionalRules||[],n=x(V),r=e=>{n&&(n.crying=e.crying||"")};return d(()=>{var e;return(e=o.value)==null?void 0:e.formValues},e=>{e&&r(e)},{deep:!0}),d(()=>o.value,e=>{e!=null&&e.getFormValues&&r(e.getFormValues())},{immediate:!0}),u({getFormRef:()=>o.value,validateForm:()=>{var e,t;return((t=(e=o.value)==null?void 0:e.validateForm)==null?void 0:t.call(e))||null},getFormValues:()=>{var e,t;return((t=(e=o.value)==null?void 0:e.getFormValues)==null?void 0:t.call(e))||{}}}),(e,t)=>(y(),R("div",kt,[t[0]||(t[0]=g("div",{style:{"background-color":"#fedf89",padding:"10px"}},[g("p",null,"The temperature is too high!")],-1)),v(T,{formData:m(l),conditionalRules:m(c),ref_key:"formRef",ref:o},null,8,["formData","conditionalRules"])]))}}),he=D($t,[["__scopeId","data-v-2f9d8428"]]),Et={class:"triage-section-wrapper"},Nt={key:0,class:"triage-dialog-backdrop"},Ot={class:"triage-dialog-card"},Mt={class:"triage-dialog-header"},Ht={class:"triage-dialog-icon"},Bt={class:"triage-dialog-actions"},At=b({__name:"VitalBloodSugar",props:{stepIndex:{},goToNext:{type:Function},goToPrevious:{type:Function},goToStep:{type:Function}},setup(f,{expose:u}){const o=f,a=F(null),l=h.find(p=>p.title==="Emergency Triage Blood Sugar"),c=l.formData,n=l.conditionalRules||[],r=x(V),e=M(),t=F(!1),s=p=>{r&&(e.setField("can_measure_blood_sugar",p.can_measure_blood_sugar),e.setField("blood_sugar",p.bloodSugar),e.setField("bloodSugar_unit",p.bloodSugar_unit))};function i(){const p=e.formValues.bloodSugar_unit,S=Number(e.formValues.blood_sugar);if(p==="mg/dL"&&S<45||p==="mmol/L"&&S<2.5){t.value=!0;return}o.goToNext&&o.goToNext()}function k(){t.value=!1}function H(){e.setField("lowSugar","Hypoglycemia-Asymptomatic");const p=h.findIndex(S=>S.title==="Hypoglycemia-Asymptomatic");o.goToStep&&o.goToStep(p),t.value=!1}function N(){e.setField("lowSugar","Hypoglycemia-Symptomatic");const p=h.findIndex(S=>S.title==="Hypoglycemia-Symptomatic");o.goToStep&&o.goToStep(p),t.value=!1}return d(()=>{var p;return(p=a.value)==null?void 0:p.formValues},p=>{p&&s(p)},{deep:!0}),d(()=>a.value,p=>{p!=null&&p.getFormValues&&s(p.getFormValues())},{immediate:!0}),u({getFormRef:()=>a.value,validateForm:()=>{var p,S;return((S=(p=a.value)==null?void 0:p.validateForm)==null?void 0:S.call(p))||null},getFormValues:()=>{var p,S;return((S=(p=a.value)==null?void 0:p.getFormValues)==null?void 0:S.call(p))||{}},openDialog:i}),(p,S)=>(y(),R("div",Et,[S[6]||(S[6]=g("div",{style:{"background-color":"#fedf89",padding:"10px"}},"Check Blood Sugar.",-1)),v(T,{formData:m(c),conditionalRules:m(n),ref_key:"formRef",ref:a},null,8,["formData","conditionalRules"]),t.value?(y(),R("div",Nt,[g("div",Ot,[g("button",{class:"triage-dialog-close",type:"button",onClick:k},[v(m(ie),{icon:m(Be)},null,8,["icon"])]),g("div",Mt,[g("div",Ht,[v(m(ie),{icon:m(Ae)},null,8,["icon"])]),S[0]||(S[0]=g("h2",null,"Hypoglycemia?",-1))]),S[3]||(S[3]=g("div",{class:"triage-dialog-divider"},null,-1)),S[4]||(S[4]=g("p",{class:"triage-dialog-subtitle"},"The baby’s blood sugar is low.",-1)),S[5]||(S[5]=g("p",{class:"triage-dialog-body"},"Is the baby symptomatic? e.g Jittery, lethargic or not responding.",-1)),g("div",Bt,[v(m(le),{class:"triage-dialog-btn secondary",expand:"block",onClick:H},{default:P(()=>[...S[1]||(S[1]=[Q(" NO ",-1)])]),_:1}),v(m(le),{class:"triage-dialog-btn primary",expand:"block",onClick:N},{default:P(()=>[...S[2]||(S[2]=[Q(" YES ",-1)])]),_:1})])])])):He("",!0)]))}}),jt=D(At,[["__scopeId","data-v-37bf7ce2"]]),Pt={class:"triage-section-wrapper"},Lt=b({__name:"EmergencyTriage",setup(f,{expose:u}){const o=F(null),a=h.find(e=>e.title==="Emergency Triage 1"),l=a.formData,c=a.conditionalRules||[],n=x(V),r=e=>{n&&Object.assign(n,e)};return d(()=>{var e;return(e=o.value)==null?void 0:e.formValues},e=>{e&&r(e)},{deep:!0}),u({getFormRef:()=>o.value,validateForm:()=>{var e,t;return((t=(e=o.value)==null?void 0:e.validateForm)==null?void 0:t.call(e))||null},getFormValues:()=>{var e,t;return((t=(e=o.value)==null?void 0:e.getFormValues)==null?void 0:t.call(e))||{}}}),(e,t)=>(y(),R("div",Pt,[t[0]||(t[0]=g("div",{style:{"background-color":"#fedf89",padding:"10px"}}," You may start measuring the vitals while continuing with the triage since the readings takes a while. ",-1)),v(T,{formData:m(l),conditionalRules:m(c),ref_key:"formRef",ref:o},null,8,["formData","conditionalRules"])]))}}),Se=D(Lt,[["__scopeId","data-v-ef810f36"]]),Wt={class:"triage-section-wrapper"},Ut=b({__name:"BabyDemographics",setup(f,{expose:u}){const o=F(null),a=h.find(t=>t.title==="Demographics"),l=a.formData,c=a.conditionalRules||[],n=x(V),r=M(),e=t=>{n&&(Object.assign(n,t),r.setField("first_name",t.first_name),r.setField("last_name",t.last_name))};return d(()=>{var t;return(t=o.value)==null?void 0:t.formValues},t=>{t&&e(t)},{deep:!0}),u({getFormRef:()=>o.value,validateForm:()=>{var t,s;return((s=(t=o.value)==null?void 0:t.validateForm)==null?void 0:s.call(t))||null},getFormValues:()=>{var t,s;return((s=(t=o.value)==null?void 0:t.getFormValues)==null?void 0:s.call(t))||{}}}),(t,s)=>(y(),R("div",Wt,[v(T,{formData:m(l),conditionalRules:m(c),ref_key:"formRef",ref:o},null,8,["formData","conditionalRules"])]))}}),Gt=D(Ut,[["__scopeId","data-v-f14b7f8a"]]),Yt={class:"triage-section-wrapper"},qt=b({__name:"HypoglycemiaSymptomatic",setup(f,{expose:u}){const o=F(null),a=h.find(e=>e.title==="Hypoglycemia-Symptomatic"),l=a.formData,c=a.conditionalRules||[],n=x(V),r=e=>{n&&(n.crying=e.crying||"")};return d(()=>{var e;return(e=o.value)==null?void 0:e.formValues},e=>{e&&r(e)},{deep:!0}),d(()=>o.value,e=>{e!=null&&e.getFormValues&&r(e.getFormValues())},{immediate:!0}),u({getFormRef:()=>o.value,validateForm:()=>{var e,t;return((t=(e=o.value)==null?void 0:e.validateForm)==null?void 0:t.call(e))||null},getFormValues:()=>{var e,t;return((t=(e=o.value)==null?void 0:e.getFormValues)==null?void 0:t.call(e))||{}}}),(e,t)=>(y(),R("div",Yt,[t[0]||(t[0]=g("div",{style:{"background-color":"#fedf89",padding:"10px"}},"Hypoglycemia - Symptomatic",-1)),v(T,{formData:m(l),conditionalRules:m(c),ref_key:"formRef",ref:o},null,8,["formData","conditionalRules"])]))}}),zt=D(qt,[["__scopeId","data-v-84bba3cb"]]),Kt={class:"triage-section-wrapper"},Jt=b({__name:"HypoglycemiaAsymptomatic",setup(f,{expose:u}){const o=F(null),a=h.find(e=>e.title==="Hypoglycemia-Asymptomatic"),l=a.formData,c=a.conditionalRules||[],n=x(V),r=e=>{n&&(n.crying=e.crying||"")};return d(()=>{var e;return(e=o.value)==null?void 0:e.formValues},e=>{e&&r(e)},{deep:!0}),d(()=>o.value,e=>{e!=null&&e.getFormValues&&r(e.getFormValues())},{immediate:!0}),u({getFormRef:()=>o.value,validateForm:()=>{var e,t;return((t=(e=o.value)==null?void 0:e.validateForm)==null?void 0:t.call(e))||null},getFormValues:()=>{var e,t;return((t=(e=o.value)==null?void 0:e.getFormValues)==null?void 0:t.call(e))||{}}}),(e,t)=>(y(),R("div",Kt,[t[0]||(t[0]=g("div",{style:{"background-color":"#fedf89",padding:"10px"}},"Hypoglycemia - Asymptomatic",-1)),v(T,{formData:m(l),conditionalRules:m(c),ref_key:"formRef",ref:o},null,8,["formData","conditionalRules"])]))}}),Qt=D(Jt,[["__scopeId","data-v-d3132015"]]),Xt={class:"triage-section-wrapper"},Zt=b({__name:"EmergencyManagementTwo",setup(f,{expose:u}){const o=F(null),a=h.find(e=>e.title==="Emergency Management 2"),l=a.formData,c=a.conditionalRules||[],n=x(V),r=e=>{n&&Object.assign(n,e)};return d(()=>{var e;return(e=o.value)==null?void 0:e.formValues},e=>{e&&r(e)},{deep:!0}),u({getFormRef:()=>o.value,validateForm:()=>{var e,t;return((t=(e=o.value)==null?void 0:e.validateForm)==null?void 0:t.call(e))||null},getFormValues:()=>{var e,t;return((t=(e=o.value)==null?void 0:e.getFormValues)==null?void 0:t.call(e))||{}}}),(e,t)=>(y(),R("div",Xt,[v(T,{formData:m(l),conditionalRules:m(c),ref_key:"formRef",ref:o},null,8,["formData","conditionalRules"])]))}}),eo=D(Zt,[["__scopeId","data-v-3f603ae7"]]),to={class:"triage-section-wrapper"},oo=b({__name:"EmergencyManagementSix",setup(f,{expose:u}){const o=F(null),a=h.find(e=>e.title==="Emergency Management 6"),l=a.formData,c=a.conditionalRules||[],n=x(V),r=e=>{n&&Object.assign(n,e)};return d(()=>{var e;return(e=o.value)==null?void 0:e.formValues},e=>{e&&r(e)},{deep:!0}),u({getFormRef:()=>o.value,validateForm:()=>{var e,t;return((t=(e=o.value)==null?void 0:e.validateForm)==null?void 0:t.call(e))||null},getFormValues:()=>{var e,t;return((t=(e=o.value)==null?void 0:e.getFormValues)==null?void 0:t.call(e))||{}}}),(e,t)=>(y(),R("div",to,[v(T,{formData:m(l),conditionalRules:m(c),ref_key:"formRef",ref:o},null,8,["formData","conditionalRules"])]))}}),ao=D(oo,[["__scopeId","data-v-574bb0b2"]]),no={class:"triage-section-wrapper"},ro=b({__name:"EmergencyManagementSeven",setup(f,{expose:u}){const o=F(null),a=h.find(e=>e.title==="Emergency Management 7"),l=a.formData,c=a.conditionalRules||[],n=x(V),r=e=>{n&&Object.assign(n,e)};return d(()=>{var e;return(e=o.value)==null?void 0:e.formValues},e=>{e&&r(e)},{deep:!0}),u({getFormRef:()=>o.value,validateForm:()=>{var e,t;return((t=(e=o.value)==null?void 0:e.validateForm)==null?void 0:t.call(e))||null},getFormValues:()=>{var e,t;return((t=(e=o.value)==null?void 0:e.getFormValues)==null?void 0:t.call(e))||{}}}),(e,t)=>(y(),R("div",no,[v(T,{formData:m(l),conditionalRules:m(c),ref_key:"formRef",ref:o},null,8,["formData","conditionalRules"])]))}}),be=D(ro,[["__scopeId","data-v-bda3a435"]]),so={class:"triage-section-wrapper"},io=b({__name:"EmergencyManagementEight",setup(f,{expose:u}){const o=F(null),a=h.find(e=>e.title==="Temperature Low - Warm The Baby"),l=a.formData,c=a.conditionalRules||[],n=x(V),r=e=>{n&&Object.assign(n,e)};return d(()=>{var e;return(e=o.value)==null?void 0:e.formValues},e=>{e&&r(e)},{deep:!0}),u({getFormRef:()=>o.value,validateForm:()=>{var e,t;return((t=(e=o.value)==null?void 0:e.validateForm)==null?void 0:t.call(e))||null},getFormValues:()=>{var e,t;return((t=(e=o.value)==null?void 0:e.getFormValues)==null?void 0:t.call(e))||{}}}),(e,t)=>(y(),R("div",so,[t[0]||(t[0]=g("div",{style:{"background-color":"#fedf89",padding:"10px"}},[g("p",null,"Mild Hypothermia = 36 - 36.4 degs C"),g("p",null,"Moderate Hypothermia = 32 - 35.9 degs C"),g("p",null,"Severe Hypothermia = 32 degs C")],-1)),v(T,{formData:m(l),conditionalRules:m(c),ref_key:"formRef",ref:o},null,8,["formData","conditionalRules"])]))}}),lo=D(io,[["__scopeId","data-v-708783bf"]]),co={class:"triage-section-wrapper"},uo=b({__name:"BabyRecoveredStillSevereRespiratory",setup(f,{expose:u}){const o=F(null),a=h.find(e=>e.title==="Baby Recovered"),l=a.formData,c=a.conditionalRules||[],n=x(V),r=e=>{n&&Object.assign(n,e)};return d(()=>{var e;return(e=o.value)==null?void 0:e.formValues},e=>{e&&r(e)},{deep:!0}),u({getFormRef:()=>o.value,validateForm:()=>{var e,t;return((t=(e=o.value)==null?void 0:e.validateForm)==null?void 0:t.call(e))||null},getFormValues:()=>{var e,t;return((t=(e=o.value)==null?void 0:e.getFormValues)==null?void 0:t.call(e))||{}}}),(e,t)=>(y(),R("div",co,[t[0]||(t[0]=g("div",{style:{"background-color":"#fedf89",padding:"10px"}},[g("p",null,[g("b",null,"The baby has recovered but still has severe respiratory distress and WILL require referral.")])],-1)),v(T,{formData:m(l),conditionalRules:m(c),ref_key:"formRef",ref:o},null,8,["formData","conditionalRules"])]))}}),De=D(uo,[["__scopeId","data-v-5f09a4b0"]]),mo={class:"triage-section-wrapper"},fo=b({__name:"ConvulsionsVitalsSection",setup(f,{expose:u}){const o=F(null),a=h.find(e=>e.title==="Emergency Management"),l=a.formData,c=a.conditionalRules||[],n=x(V),r=e=>{n&&Object.assign(n,e)};return d(()=>{var e;return(e=o.value)==null?void 0:e.formValues},e=>{e&&r(e)},{deep:!0}),u({getFormRef:()=>o.value,validateForm:()=>{var e,t;return((t=(e=o.value)==null?void 0:e.validateForm)==null?void 0:t.call(e))||null},getFormValues:()=>{var e,t;return((t=(e=o.value)==null?void 0:e.getFormValues)==null?void 0:t.call(e))||{}}}),(e,t)=>(y(),R("div",mo,[v(T,{formData:m(l),conditionalRules:m(c),ref_key:"formRef",ref:o},null,8,["formData","conditionalRules"])]))}}),go=D(fo,[["__scopeId","data-v-00517c43"]]),po={class:"triage-section-wrapper"},_o=b({__name:"ObservationsSection",setup(f,{expose:u}){const o=F(null),a=h[9],l=a.formData,c=a.conditionalRules||[],n=x(V),r=e=>{n&&Object.assign(n,e)};return d(()=>{var e;return(e=o.value)==null?void 0:e.formValues},e=>{e&&r(e)},{deep:!0}),u({getFormRef:()=>o.value,validateForm:()=>{var e,t;return((t=(e=o.value)==null?void 0:e.validateForm)==null?void 0:t.call(e))||null},getFormValues:()=>{var e,t;return((t=(e=o.value)==null?void 0:e.getFormValues)==null?void 0:t.call(e))||{}}}),(e,t)=>(y(),R("div",po,[v(T,{formData:m(l),conditionalRules:m(c),ref_key:"formRef",ref:o},null,8,["formData","conditionalRules"])]))}}),Ve=D(_o,[["__scopeId","data-v-8636a51d"]]),vo={class:"triage-section-wrapper"},yo=b({__name:"DangerSignsSection",setup(f,{expose:u}){const o=F(null),a=h[13],l=a.formData,c=a.conditionalRules||[],n=x(V),r=e=>{n&&Object.assign(n,e)};return d(()=>{var e;return(e=o.value)==null?void 0:e.formValues},e=>{e&&r(e)},{deep:!0}),u({getFormRef:()=>o.value,validateForm:()=>{var e,t;return((t=(e=o.value)==null?void 0:e.validateForm)==null?void 0:t.call(e))||null},getFormValues:()=>{var e,t;return((t=(e=o.value)==null?void 0:e.getFormValues)==null?void 0:t.call(e))||{}}}),(e,t)=>(y(),R("div",vo,[v(T,{formData:m(l),conditionalRules:m(c),ref_key:"formRef",ref:o},null,8,["formData","conditionalRules"])]))}}),xe=D(yo,[["__scopeId","data-v-e181448d"]]),Fo={class:"triage-section-wrapper"},Ro=b({__name:"SelectPresentSignsSection",setup(f,{expose:u}){const o=F(null),a=h[14],l=a.formData,c=a.conditionalRules||[],n=x(V),r=e=>{n&&Object.assign(n,e)};return d(()=>{var e;return(e=o.value)==null?void 0:e.formValues},e=>{e&&r(e)},{deep:!0}),u({getFormRef:()=>o.value,validateForm:()=>{var e,t;return((t=(e=o.value)==null?void 0:e.validateForm)==null?void 0:t.call(e))||null},getFormValues:()=>{var e,t;return((t=(e=o.value)==null?void 0:e.getFormValues)==null?void 0:t.call(e))||{}}}),(e,t)=>(y(),R("div",Fo,[v(T,{formData:m(l),conditionalRules:m(c),ref_key:"formRef",ref:o},null,8,["formData","conditionalRules"])]))}}),Te=D(Ro,[["__scopeId","data-v-e5765fc2"]]),ho={class:"triage-section-wrapper"},So=b({__name:"TrunkFeelsColdSection",setup(f,{expose:u}){const o=F(null),a=h[15],l=a.formData,c=a.conditionalRules||[],n=x(V),r=e=>{n&&Object.assign(n,e)};return d(()=>{var e;return(e=o.value)==null?void 0:e.formValues},e=>{e&&r(e)},{deep:!0}),u({getFormRef:()=>o.value,validateForm:()=>{var e,t;return((t=(e=o.value)==null?void 0:e.validateForm)==null?void 0:t.call(e))||null},getFormValues:()=>{var e,t;return((t=(e=o.value)==null?void 0:e.getFormValues)==null?void 0:t.call(e))||{}}}),(e,t)=>(y(),R("div",ho,[v(T,{formData:m(l),conditionalRules:m(c),ref_key:"formRef",ref:o},null,8,["formData","conditionalRules"])]))}}),Ie=D(So,[["__scopeId","data-v-b2a7358c"]]),bo={class:"triage-section-wrapper"},Do=b({__name:"KeepWarmSection",setup(f,{expose:u}){const o=F(null),a=h[16],l=a.formData,c=a.conditionalRules||[],n=x(V),r=e=>{n&&Object.assign(n,e)};return d(()=>{var e;return(e=o.value)==null?void 0:e.formValues},e=>{e&&r(e)},{deep:!0}),u({getFormRef:()=>o.value,validateForm:()=>{var e,t;return((t=(e=o.value)==null?void 0:e.validateForm)==null?void 0:t.call(e))||null},getFormValues:()=>{var e,t;return((t=(e=o.value)==null?void 0:e.getFormValues)==null?void 0:t.call(e))||{}}}),(e,t)=>(y(),R("div",bo,[v(T,{formData:m(l),conditionalRules:m(c),ref_key:"formRef",ref:o},null,8,["formData","conditionalRules"])]))}}),Ce=D(Do,[["__scopeId","data-v-3dff9401"]]),Vo={class:"triage-section-wrapper"},xo={class:"respiratory-timer-body"},To={class:"respiratory-timer-time"},Io={class:"respiratory-timer-instruction"},se=60,Co=b({__name:"VitalSignsSection",setup(f,{expose:u}){const o=F(null),a=h.find(I=>I.title==="Vital Signs"),l=a.formData,c=a.conditionalRules||[],n=x(V),r=F(se),e=F(!1),t=F(!1);let s=null;const i=te(()=>{const I=Math.floor(r.value/60).toString().padStart(2,"0"),O=(r.value%60).toString().padStart(2,"0");return"".concat(I,":").concat(O)}),k=te(()=>e.value?"TAP TO PAUSE COUNTDOWN":r.value===se?"TAP TO START COUNTDOWN":r.value===0?"TAP TO RESTART COUNTDOWN":"TAP TO RESUME COUNTDOWN"),H=()=>{s===null&&(e.value=!0,t.value=!1,s=window.setInterval(()=>{r.value>0?r.value-=1:(e.value=!1,t.value=!0,s!==null&&(clearInterval(s),s=null))},1e3))},N=()=>{s!==null&&(clearInterval(s),s=null),e.value=!1},p=()=>{N(),r.value=se,t.value=!1},S=()=>{e.value?N():(r.value===0&&p(),H())};je(()=>{s!==null&&clearInterval(s)});const L=M(),W=I=>{n&&(Object.assign(n,I),L.setField("respiratory_rate",I.respiratory_rate),L.setField("heart_rate",I.heart_rate),L.setField("can_measure_oxygen_saturation",I.can_measure_oxygen_saturation),L.setField("oxygen_saturation_vital",I.oxygen_saturation_vital),L.setField("oxygen_facility_available",I.oxygen_facility_available))};return d(()=>{var I;return(I=o.value)==null?void 0:I.formValues},I=>{I&&W(I)},{deep:!0}),u({getFormRef:()=>o.value,validateForm:()=>{var I,O;return((O=(I=o.value)==null?void 0:I.validateForm)==null?void 0:O.call(I))||null},getFormValues:()=>{var I,O;return((O=(I=o.value)==null?void 0:I.getFormValues)==null?void 0:O.call(I))||{}}}),(I,O)=>(y(),R("div",Vo,[g("div",{class:"respiratory-timer-card",onClick:S},[O[0]||(O[0]=g("div",{class:"respiratory-timer-header"},"Respiratory  Rate Timer",-1)),g("div",xo,[g("div",To,J(i.value),1),g("div",Io,J(k.value),1)])]),v(T,{formData:m(l),conditionalRules:m(c),ref_key:"formRef",ref:o},null,8,["formData","conditionalRules"])]))}}),ee=D(Co,[["__scopeId","data-v-54fa99a2"]]),wo={class:"triage-section-wrapper"},ko=b({__name:"RespiratoryDistressSection",setup(f,{expose:u}){const o=F(null),a=h.find(e=>e.title==="Danger Signs"),l=a.formData,c=a.conditionalRules||[],n=x(V),r=e=>{n&&Object.assign(n,e)};return d(()=>{var e;return(e=o.value)==null?void 0:e.formValues},e=>{e&&r(e)},{deep:!0}),u({getFormRef:()=>o.value,validateForm:()=>{var e,t;return((t=(e=o.value)==null?void 0:e.validateForm)==null?void 0:t.call(e))||null},getFormValues:()=>{var e,t;return((t=(e=o.value)==null?void 0:e.getFormValues)==null?void 0:t.call(e))||{}}}),(e,t)=>(y(),R("div",wo,[t[0]||(t[0]=g("div",{style:{"background-color":"#fedf89",padding:"10px"}},"Feel for 3 danger signs.",-1)),v(T,{formData:m(l),conditionalRules:m(c),ref_key:"formRef",ref:o},null,8,["formData","conditionalRules"])]))}}),we=D(ko,[["__scopeId","data-v-e75e77c9"]]),$o={class:"triage-section-wrapper"},Eo=b({__name:"TemperatureHighSection",setup(f,{expose:u}){const o=F(null),a=h[26],l=a.formData,c=a.conditionalRules||[],n=x(V),r=M(),e=t=>{n&&(Object.assign(n,t),r.setField("present_signs",t.present_signs))};return d(()=>{var t;return(t=o.value)==null?void 0:t.formValues},t=>{t&&e(t)},{deep:!0}),u({getFormRef:()=>o.value,validateForm:()=>{var t,s;return((s=(t=o.value)==null?void 0:t.validateForm)==null?void 0:s.call(t))||null},getFormValues:()=>{var t,s;return((s=(t=o.value)==null?void 0:t.getFormValues)==null?void 0:s.call(t))||{}}}),(t,s)=>(y(),R("div",$o,[v(T,{formData:m(l),conditionalRules:m(c),ref_key:"formRef",ref:o},null,8,["formData","conditionalRules"])]))}}),ke=D(Eo,[["__scopeId","data-v-81461ba7"]]),No={class:"triage-section-wrapper"},Oo=b({__name:"SecondVitalSignsSection",setup(f,{expose:u}){const o=F(null),a=h.find(e=>e.title==="Trunk Feels Cold"),l=a.formData,c=a.conditionalRules||[],n=x(V),r=e=>{n&&Object.assign(n,e)};return d(()=>{var e;return(e=o.value)==null?void 0:e.formValues},e=>{e&&r(e)},{deep:!0}),u({getFormRef:()=>o.value,validateForm:()=>{var e,t;return((t=(e=o.value)==null?void 0:e.validateForm)==null?void 0:t.call(e))||null},getFormValues:()=>{var e,t;return((t=(e=o.value)==null?void 0:e.getFormValues)==null?void 0:t.call(e))||{}}}),(e,t)=>(y(),R("div",No,[t[0]||(t[0]=g("div",{style:{"background-color":"#fedf89",padding:"10px"}},[g("p",null,"Mild Hypothermia = 36 - 36.4 degs C"),g("p",null,"Moderate Hypothermia = 32 - 35.9 degs C"),g("p",null,"Severe Hypothermia = 32 degs C")],-1)),v(T,{formData:m(l),conditionalRules:m(c),ref_key:"formRef",ref:o},null,8,["formData","conditionalRules"])]))}}),$e=D(Oo,[["__scopeId","data-v-4a384fc4"]]),Mo={class:"triage-section-wrapper"},Ho=b({__name:"BloodSugarSection",setup(f,{expose:u}){const o=F(null),a=h.find(e=>e.title==="Emmergency Management 4"),l=a.formData,c=a.conditionalRules||[],n=x(V),r=e=>{n&&Object.assign(n,e)};return d(()=>{var e;return(e=o.value)==null?void 0:e.formValues},e=>{e&&r(e)},{deep:!0}),u({getFormRef:()=>o.value,validateForm:()=>{var e,t;return((t=(e=o.value)==null?void 0:e.validateForm)==null?void 0:t.call(e))||null},getFormValues:()=>{var e,t;return((t=(e=o.value)==null?void 0:e.getFormValues)==null?void 0:t.call(e))||{}}}),(e,t)=>(y(),R("div",Mo,[t[0]||(t[0]=g("div",{style:{"background-color":"#fedf89",padding:"10px"}}," This baby may be in Shock! See pg 74 COIN (NB. Don't give a bolus to a baby that has not responded to resuscitation) ",-1)),v(T,{formData:m(l),conditionalRules:m(c),ref_key:"formRef",ref:o},null,8,["formData","conditionalRules"])]))}}),Ee=D(Ho,[["__scopeId","data-v-eec9c993"]]),Bo={class:"triage-section-wrapper"},Ao=b({__name:"ReferralInstructionsSection",setup(f,{expose:u}){const o=F(null),a=h.find(e=>e.title==="Referral Instructions"),l=a.formData,c=a.conditionalRules||[],n=x(V),r=e=>{n&&(n.crying=e.crying||"")};return d(()=>{var e;return(e=o.value)==null?void 0:e.formValues},e=>{e&&r(e)},{deep:!0}),d(()=>o.value,e=>{e!=null&&e.getFormValues&&r(e.getFormValues())},{immediate:!0}),u({getFormRef:()=>o.value,validateForm:()=>{var e,t;return((t=(e=o.value)==null?void 0:e.validateForm)==null?void 0:t.call(e))||null},getFormValues:()=>{var e,t;return((t=(e=o.value)==null?void 0:e.getFormValues)==null?void 0:t.call(e))||{}}}),(e,t)=>(y(),R("div",Bo,[t[0]||(t[0]=g("div",{style:{"background-color":"#fedf89",padding:"10px"}},[g("p",null,[g("b",null,"If oxygen is NOT available CALL referral hospital immediately "),Q(" for guidance and if possible send the baby with accompanying health worker with bag valve mask (BVM) ventilation equipment. "),g("br"),g("br"),Q(" Continue with the Neotree examination. ")])],-1)),v(T,{formData:m(l),conditionalRules:m(c),ref_key:"formRef",ref:o},null,8,["formData","conditionalRules"])]))}}),Ne=D(Ao,[["__scopeId","data-v-d4742399"]]),jo=b({name:"NeonatalTriage",components:{IonPage:Le,IonContent:Pe,IonButton:le,IonIcon:ie,Toolbar:ze,DemographicBar:tt,NeonatalStepper:ot,EmergencyTriageSection:ge,BreathingAssessmentSection:pe,EmergencyManagementSection:mt,OxygenSaturationSection:_e,CentralCyanosisSection:ve,ConvulsionsSection:ye,ObservationsSection:Ve,DangerSignsSection:xe,SelectPresentSignsSection:Te,TrunkFeelsColdSection:Ie,KeepWarmSection:Ce,VitalSignsSection:ee,RespiratoryDistressSection:we,TemperatureHighSection:ke,SecondVitalSignsSection:$e,BloodSugarSection:Ee,VitalsSignsSection:ee,ReferralInstructionsSection:Ne,VitalSectionThree:Re,VitalSectionTwo:Fe,TemperatureHigh:he,EmergencyTriage:Se,EmergencyManagementSeven:be},setup(){var ce;const f=We(),u=Ue(),o=Ke(),a=M(),{patient:l}=Oe(o),c=()=>{const _=u.query.source;return Array.isArray(_)?_[0]:_},n=c();n==="dashboard"&&a.reset();const r=!!((ce=l.value)!=null&&ce.patientID),t=Ge({...at,_hasPatient:r,_forceDemographics:n==="dashboard"&&!r});qe(V,t),d(()=>{var _;return(_=l.value)==null?void 0:_.patientID},_=>{const C=!!_;t._hasPatient=C,c()==="dashboard"&&(t._forceDemographics=!C)}),d(()=>c(),_=>{var C;t._forceDemographics=_==="dashboard"&&!((C=l.value)!=null&&C.patientID)});const s=F(h.map((_,C)=>({title:_.title,number:C+1,checked:!1,class:C===0?"open_step common_step":"common_step",last_step:C===h.length-1?"last_step":""}))),i=_=>h.findIndex(C=>C.title==_),k=new Set(["crying","can_measure_oxygen_saturation","oxygen_facility_available","can_measure_temp","central_cyanosis"]),H=new Set(["respiratory_rate","heart_rate","oxygen_saturation_vital","saturation_in_oxygen","temperature","head_circumference"]),N=new Set(["admission_weight","birth_weight"]),p=_=>{if(_==null||_==="")return null;if(typeof _=="string"){const C=_.toLowerCase();if(["yes","y","true","1"].includes(C))return"Yes";if(["no","n","false","0"].includes(C))return"No"}return _===!0||_===1?"Yes":_===!1||_===0||_===2?"No":null},S=async(_,C,$,U,G)=>{if($==null||$==="")return null;if(k.has(_)){const B=p($);return B?z.buildValueCoded(C,B,U):null}if(_==="blood_sugar"){const B=G.bloodSugar_unit||"mg/dL",Y=Number($);if(Number.isNaN(Y))return null;const A=B==="mmol/L"?Y*18.018:Y;return z.buildValueNumber(C,A,null,null,U)}if(H.has(_)||N.has(_)){let B=Number($);return Number.isNaN(B)?null:(N.has(_)&&(B=B/1e3),z.buildValueNumber(C,B,null,null,U))}const ue=Array.isArray($)?$.join(", "):String($);return z.buildValueText(C,ue,U)},W=[{title:"Emergency Triage",value:"1",component:ge,configIndex:i("Emergency Triage")},{title:"Emergency Management",value:"2",component:pe,configIndex:i("Emergency Management 1")},{title:"Emergency Triage",value:"3",component:Se,configIndex:i("Emergency Triage 1")},{title:"Danger Signs",value:"4",component:_e,configIndex:i("Danger Signs")},{title:"Emergency Management",value:"5",component:eo,configIndex:i("Emergency Management 2")},{title:"Emergency Management",value:"6",component:ve,configIndex:i("Emergency Management 3")},{title:"Emergency Management",value:"7",component:ye,configIndex:i("Emergency Management 4")},{title:"Central Cyanosis",value:"8",component:Ve,configIndex:i("Central Cyanosis")},{title:"Convulsions/Twitching",value:"9",component:xe,configIndex:i("Convulsions/Twitching")},{title:"Danger Signs 2",value:"10",component:Te,configIndex:i("Danger Signs 2")},{title:"Emergency Management - Grunting/Indrawing",value:"11",component:Ie,configIndex:i("Emergency Management - Grunting/Indrawing")},{title:"Emergency Management - Central Cyanosis",value:"12",component:Ce,configIndex:i("Emergency Management - Central Cyanosis")},{title:"Emergency Management - Convulsions",value:"13",component:ee,configIndex:i("Emergency Management - Convulsions")},{title:"Danger Signs",value:"14",component:we,configIndex:i("Danger Signs")},{title:"Temperature High",value:"15",component:ke,configIndex:i("Temperature High")},{title:"Trunk Feels Cold",value:"16",component:$e,configIndex:i("Trunk Feels Cold")},{title:"Emmergency Management 4",value:"17",component:Ee,configIndex:i("Emmergency Management 4")},{title:"Vital Signs",value:"18",component:ee,configIndex:i("Vital Signs")},{title:"Emergency Management 6",value:"19",component:ao,configIndex:i("Emergency Management 6")},{title:"Referral Instructions",value:"19",component:Ne,configIndex:i("Referral Instructions")},{title:"Emergency Management",value:"20",component:go,configIndex:i("Emergency Management")},{title:"Vital Signs",value:"21",component:Fe,configIndex:i("Vital Signs 2")},{title:"Emergency Management",value:"21",component:be,configIndex:i("Emergency Management 7")},{title:"Severe Respiratory Distress - Referral Required",value:"22",component:De,configIndex:i("Severe Respiratory Distress - Referral Required")},{title:"Baby Recovered",value:"23",component:De,configIndex:i("Baby Recovered")},{title:"Vital Signs",value:"24",component:Re,configIndex:i("Vital Signs 3")},{title:"Temperature Low - Warm The Baby",value:"25",component:lo,configIndex:i("Temperature Low - Warm The Baby")},{title:"Temperature High",value:"26",component:he,configIndex:i("Temperature High")},{title:"Emergency Triage",value:"27",component:jt,configIndex:i("Emergency Triage Blood Sugar"),hasDialog:!0},{title:"Hypoglycemia Symptomatic",value:"28",component:zt,configIndex:i("Hypoglycemia-Symptomatic")},{title:"Hypoglycemia-Asymptomatic",value:"29",component:Qt,configIndex:i("Hypoglycemia-Asymptomatic")},{title:"Vital Signs",value:"30",component:wt,configIndex:i("Vital Signs Four")},{title:"Triage Summary",value:"31",component:Tt,configIndex:i("Triage Summary")},{title:"Demographics",value:"32",component:Gt,configIndex:i("Demographics")}],I="Emergency Triage Assessment",O=F("1");return{wizardData:s,stepperData:W,stepperTitle:I,currentOpenStepper:O,updateStatus:_=>{_&&_.value&&s.value.forEach((C,$)=>{_.value===($+1).toString()?(C.class="open_step common_step",C.checked=!1):$<parseInt(_.value)-1?(C.class="common_step color_white",C.checked=!0):(C.class="common_step",C.checked=!1)})},getSaveFunction:_=>{var Y;const C=W.findIndex(A=>A.title==="Triage Summary"),$=W.findIndex(A=>A.title==="Demographics"),U=W.length-1,G=!!((Y=l.value)!=null&&Y.patientID);if(c(),_===C&&G||_===$&&!G||_===U&&G)return async()=>{var A;try{const E={...t,...a.formValues};let K=(A=l.value)==null?void 0:A.patientID;if(!K&&E.first_name&&E.last_name){const w=new Date;w.setDate(w.getDate()-1);const q=w.toISOString().split("T")[0],ae={given_name:E.first_name,family_name:E.last_name,gender:"U",birthdate:q,birthdate_estimated:1},Z=await new Je().registerPatient(ae,[]);if(!(Z!=null&&Z.patient_id)){re("Failed to create temporary patient record");return}K=Z.patient_id,await o.setPatientRecord({patient_id:K})}if(!K){re("No patient available to save triage data");return}const X=[],oe=Qe.sessionDate();if(Object.keys(E).some(w=>w!=="first_name"&&w!=="last_name"&&w!=="_hasPatient"&&w!=="_forceDemographics"&&E[w]!==void 0&&E[w]!==null&&E[w]!==""))for(const[w,q]of Object.entries(nt)){const ae=E[w],ne=await S(w,q,ae,oe,E);ne&&X.push(ne)}else{const w=await z.buildValueText("First name",E.first_name||"Unknown",oe),q=await z.buildValueText("Last name",E.last_name||"Unknown",oe);w&&X.push(w),q&&X.push(q)}await Xe(K,Ze.NEONATAL_TRIAGE,X),de("Emergency triage saved successfully"),await new Promise(w=>setTimeout(w,800)),f.push("/neonatal/checkpoint")}catch(E){console.error("Failed to save triage assessment",E),re("Failed to save triage assessment")}}},handleCancelTriage:async()=>{await et("Are you sure you want to cancel this triage? All unsaved data will be lost.",{header:"Cancel Triage",confirmBtnLabel:"Yes, Cancel"})&&(a.reset(),c()==="profile"?f.push("/patientProfile"):f.push("/NeonatalHome"),de("Triage cancelled successfully"))},chevronBackOutline:Ye}}}),Po={class:"cancel-button-container"};function Lo(f,u,o,a,l,c){const n=j("Toolbar"),r=j("ion-icon"),e=j("ion-button"),t=j("NeonatalStepper"),s=j("ion-content"),i=j("ion-page");return y(),Me(i,{class:"neonatal-triage-page"},{default:P(()=>[v(n),v(s,{fullscreen:!0},{default:P(()=>[g("div",Po,[v(e,{class:"cancel-triage-button",fill:"clear",onClick:f.handleCancelTriage},{default:P(()=>[v(r,{slot:"start",icon:f.chevronBackOutline},null,8,["icon"]),u[0]||(u[0]=Q(" Cancel Triage ",-1))]),_:1},8,["onClick"])]),v(t,{wizardData:f.wizardData,StepperData:f.stepperData,stepperTitle:f.stepperTitle,openStepper:f.currentOpenStepper,backUrl:"/NeonatalHome",getSaveFunction:f.getSaveFunction,onUpdateStatus:f.updateStatus},null,8,["wizardData","StepperData","stepperTitle","openStepper","getSaveFunction","onUpdateStatus"])]),_:1})]),_:1})}const oa=D(jo,[["render",Lo],["__scopeId","data-v-ef1f8058"]]);export{oa as default};
