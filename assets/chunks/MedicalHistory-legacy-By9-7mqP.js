System.register(["../index-legacy-ByfisDBi.js","./vendor-legacy-CL4ddJgY.js"],function(e,a){"use strict";var n,i,t,o,r,l,s,c,d,u,m,v,h,y,p,f,b,g,A,F,x,T,_,w,O,N;return{setters:[e=>{n=e.u,i=e.aG,t=e.t,o=e.ai,r=e.b,l=e.K,s=e._,c=e.n},e=>{d=e.c,u=e.d,m=e.r,v=e.b2,h=e.w,y=e.a,p=e.e,f=e.f,b=e.l,g=e.J,A=e.u,F=e.aV,x=e.O,T=e.bw,_=e.n,w=e.aS,O=e.aR,N=e.Q}],execute:function(){var a=document.createElement("style");a.textContent=".medications-container[data-v-84d90f8d]{display:flex;flex-direction:column;align-items:center;width:100%;height:90vh;overflow-y:auto}.medications-card[data-v-84d90f8d]{width:100%;max-width:1300px;margin-bottom:20px;color:#000;min-height:500px;max-height:700px;overflow-y:auto}@media(max-width:1500px){.medications-container[data-v-84d90f8d]{padding:10px}}[data-v-84d90f8d] .standard-form-wrapper{padding:10px}[data-v-84d90f8d] .medications-card .ion-card-content{padding:0}.container[data-v-069dc36d]{display:flex;flex-direction:column;align-items:center}.section[data-v-069dc36d]{width:100%;max-width:1300px;margin-bottom:20px}ion-card[data-v-069dc36d]{width:100%;color:#000}@media(max-width:1500px){.container[data-v-069dc36d]{padding:10px}}.container[data-v-806b49d9]{display:flex;flex-direction:column;align-items:center}.section[data-v-806b49d9]{width:100%;max-width:1300px;margin-bottom:20px}.sub_item_header[data-v-806b49d9]{font-weight:700;font-size:medium}ion-card[data-v-806b49d9]{width:100%;color:#000}@media(max-width:1500px){.container[data-v-806b49d9]{padding:10px}}\n/*$vite$:1*/",document.head.appendChild(a);const V={class:"medications-container"},I=(e("a",s(u({__name:"Medications",setup(e,{expose:a}){const s=(()=>{const e=[{id:1,name:"Oral PreP for HIV"},{id:2,name:"Analgesic"},{id:3,name:"Anti-consulsive"},{id:4,name:"Anti-TB"},{id:5,name:"Antihelmintic"},{id:6,name:"Antimarials"},{id:7,name:"Antitussive"},{id:8,name:"Aspirin"},{id:9,name:"Calcium"},{id:10,name:"Doxylamine"},{id:11,name:"Hematinic"},{id:12,name:"Iron"},{id:13,name:"Metoclopramide"},{id:14,name:"Thyroid medication"},{id:15,name:"Antiacids"},{id:16,name:"Anti-psychotics"},{id:17,name:"Anti-diabetic"},{id:18,name:"Anti-hypertensive"},{id:19,name:"ARVs"},{id:20,name:"Antivirals"},{id:21,name:"Asthamatic"},{id:22,name:"Co-trimoxazole"},{id:23,name:"Folic acid"},{id:24,name:"Hemorrhoidal medication"},{id:25,name:"Magnesium"},{id:26,name:"Multivitamin"},{id:27,name:"Vitamin A"},{id:28,name:"Other"},{id:29,name:"None"}];return{medicationsFormSection:d(()=>[{componentType:"Heading",header:"Current Medications",name:"Current Medications",grid:{s:"12"}},{componentType:"multiSelectInputField",header:"Which medications is the woman currently prescribed?",name:"Current Medications",obsValueType:"value_text",isMultiple:!0,trackBy:"id",grid:{s:"12"},options:e,validation:e=>{if(!e||0===e.length)return"Please select at least one medication or 'None'";if(Array.isArray(e)){const a=e.some(e=>"None"===e.name),n=e.some(e=>"None"!==e.name);if(a&&n)return"'None' cannot be selected with other medications"}return null},onChange:(e,a)=>{const n={};if(Array.isArray(e)){const a=e.some(e=>"None"===e.name),i=e.some(e=>"Other"===e.name);if(a){const a=e.find(e=>"None"===e.name);n.current_medications=[a],n.other_medication_notes=""}else i&&(n.other_medication_notes_required=!0);i||(n.other_medication_notes="")}return n}},{componentType:"inputField",header:"Specify other medications",name:"other_medication_notes",obsValueType:"value_text",grid:{s:"12"},condition:e=>{const a=e.current_medications;if(!Array.isArray(a))return!1;const n=a.some(e=>"Other"===e.name),i=a.some(e=>"None"===e.name);return n&&!i},validation:(e,a)=>{const n=a.current_medications;if(!Array.isArray(n))return null;const i=n.some(e=>"Other"===e.name),t=n.some(e=>"None"===e.name);return!i||t||e&&""!==e.trim()?null:"Please specify other medications"}}]),resetForm:()=>{}}})(),c=m(null),u=m(0),w=n(),{patient:O}=v(w);h(()=>{var e;return null===(e=O.value)||void 0===e?void 0:e.patientID},async(e,a)=>{e&&e!==a&&await D()});const N=d(()=>s.medicationsFormSection.value),I=e=>{console.log("Field changed:",e.fieldName,e.value),"current_medications"===e.fieldName&&console.log("Medications updated:",e.value)},D=async()=>{var e;u.value++,await _(),null!==(e=c.value)&&void 0!==e&&e.resetForm&&c.value.resetForm()},C=async e=>{const a=[],n=e.current_medications;if(Array.isArray(n)&&n.length>0){const i=n.map(e=>e.name).join(", ");a.push(await o.buildValueText("Current medications prescribed",i));const t=n.some(e=>"Other"===e.name),r=e.other_medication_notes;t&&r&&""!==r.trim()&&a.push(await o.buildValueText("Other medications notes",r.trim()))}return a};return y(async()=>{await D()}),a({validateForm:()=>{var e;return null===(e=c.value)||void 0===e?void 0:e.validateForm()},onSubmit:async()=>{if(!c.value)return console.error("Form reference is not available"),t("Form is not ready"),!1;const e=c.value.validateForm();if(e)return console.error("Validation errors:",e),t("Please fix validation errors before submitting"),!1;const a=c.value.getFormValues();console.log("Form data to submit:",a);const n=await C(a);if(0===n.length)return t("No medications data to save"),!1;try{return await o.addObsToEncounterPatient(n,r.MEDICATIONS),await D(),l("Medications saved successfully"),!0}catch(i){return console.error("Error saving medications:",i),t("Failed to save medications"),!1}},resetForm:async()=>{await D()},getFormValues:()=>{var e;return(null===(e=c.value)||void 0===e?void 0:e.getFormValues())||{}}}),(e,a)=>(f(),p("div",V,[b(A(T),{class:"medications-card"},{default:g(()=>[b(A(F),null,{default:g(()=>[(f(),x(i,{formData:N.value,ref_key:"formRef",ref:c,key:u.value,onFieldChanged:I},null,8,["formData"]))]),_:1})]),_:1})]))}}),[["__scopeId","data-v-84d90f8d"]])),{class:"container"}),D=(e("W",s(u({__name:"WomanBehaviour",setup(e,{expose:a}){const s={resetForm:()=>{},womanBehaviourFormSection:d(()=>[{componentType:"Heading",name:"Daily caffeine intake",grid:{s:"12"}},{componentType:"checkboxField",name:"Daily caffeine use",type:"multiple",required:!0,options:[{value:"More than 2 cups of coffee",label:"More than 2 cups of coffee"},{value:"More than 4 cups of tea",label:"More than 4 cups of tea"},{value:"More than 12 bars of chocolate",label:"More than 12 bars of chocolate"},{value:"More than one bottle of soda, energy, soft drink",label:"More than one bottle of soda, energy, soft drink"},{value:"None",label:"None"}],grid:{s:"12"},validation:e=>!e||Array.isArray(e)&&0===e.length?"Please select at least one option for daily caffeine intake":null,onChange:(e,a)=>{if(!a||!Array.isArray(e))return{};const n={},i=e.includes("None"),t=e.some(e=>"None"!==e);return i&&t?(n["Daily caffeine use"]=["None"],n):n}},{grid:{s:"12"},componentType:"Dashes"},{componentType:"Heading",name:"Drug and substance abuse",grid:{s:"12"}},{componentType:"checkboxField",name:"Drug and substance abuse",type:"multiple",required:!0,options:[{value:"Recently quit tobacco products",label:"Recently quit tobacco products"},{value:"Exposure to second hand smoke",label:"Exposure to second hand smoke"},{value:"Pica",label:"Pica"},{value:"Alcohol intake",label:"Alcohol intake"},{value:"None",label:"None"}],grid:{s:"12"},validation:e=>!e||Array.isArray(e)&&0===e.length?"Please select at least one option for drug and substance abuse":null,onChange:(e,a)=>{if(!a||!Array.isArray(e))return{};const n={},i=e.includes("None"),t=e.some(e=>"None"!==e);return i&&t?(n["Drug and substance abuse"]=["None"],n):n}}])},c=m(null),u=m(0),w=n(),{patient:O}=v(w);h(()=>{var e;return null===(e=O.value)||void 0===e?void 0:e.patientID},async(e,a)=>{e&&e!==a&&(u.value++,await _())});const N=async e=>{const a=[],n=e["Daily caffeine use"];if(Array.isArray(n)&&n.length>0)for(const t of n)t&&""!==t&&a.push(await o.buildValueText("Daily caffeine use",t));const i=e["Drug and substance abuse"];if(Array.isArray(i)&&i.length>0)for(const t of i)t&&""!==t&&a.push(await o.buildValueText("Drug and substance abuse",t));return a};y(async()=>{await _()});const V=d(()=>s.womanBehaviourFormSection.value);return a({validateForm:()=>{var e;return null===(e=c.value)||void 0===e?void 0:e.validateForm()},onSubmit:async()=>{if(!c.value)return console.error("Form reference is not available"),!1;const e=c.value.validateForm();if(e)return t("Please fix validation errors before submitting"),console.log("Validation errors:",e),!1;const a=c.value.getFormValues(),n=await N(a);return 0===n.length?(t("No woman behaviour data to save"),!1):(await o.addObsToEncounterPatient(n,r.WOMAN_BEHAVIOUR),u.value++,await _(),l("Woman behaviour saved successfully"),!0)},resetForm:()=>{u.value++}}),(e,a)=>(f(),p("div",I,[b(A(T),{class:"section"},{default:g(()=>[b(A(F),null,{default:g(()=>[(f(),x(i,{formData:V.value,ref_key:"formRef",ref:c,key:u.value},null,8,["formData"]))]),_:1})]),_:1})]))}}),[["__scopeId","data-v-069dc36d"]])),{class:"container"});e("M",s(u({__name:"MedicalHistory",setup(e,{expose:a}){const s={resetForm:()=>{},pastSurgeriesFormSection:d(()=>[{componentType:"checkboxField",name:"past surgeries",type:"multiple",twoColumns:!0,options:[{value:"dilation and currettage",label:"Dilation and currettage"},{value:"myomectomy",label:"Myomectomy"},{value:"removal of ovarian cyst",label:"Removal of ovarian cyst"},{value:"oophorectomy",label:"Oophorectomy"},{value:"salpingectomy",label:"Salpingectomy"},{value:"cervical cone",label:"Cervical cone"},{value:"Other",label:"Other"},{value:"None",label:"None"}],grid:{s:"12",md:"6"},onChange:(e,a)=>{if(!Array.isArray(e))return{};const n={},i=e[e.length-1];if("None"===i)return n["past surgeries"]=["None"],n["Other surgery notes"]="",n;if(e.includes("None")&&"None"!==i){const a=e.filter(e=>"None"!==e);return n["past surgeries"]=a,a.includes("Other")||(n["Other surgery notes"]=""),n}return e.includes("Other")||(n["Other surgery notes"]=""),n}},{componentType:"inputField",header:"Specify other surgery",name:"Other surgery notes",icon:c.editPen,required:!0,twoColumns:!0,grid:{s:"12"},validation:(e,a)=>{const n=null==a?void 0:a["past surgeries"];return!Array.isArray(n)||!n.includes("Other")||e&&""!==e?null:"Please specify other surgery"},condition:e=>{const a=e["past surgeries"];return Array.isArray(a)&&a.includes("Other")}}]),allergiesFormSection:d(()=>[{componentType:"checkboxField",name:"Allergies",type:"multiple",twoColumns:!0,options:[{value:"albendazole",label:"Albendazole"},{value:"aluminium-hydroxide",label:"Aluminium-hydroxide"},{value:"calcium",label:"Calcium"},{value:"chamomile",label:"Chamomile"},{value:"folic-acid",label:"Folic-acid"},{value:"ginger",label:"Ginger"},{value:"fish",label:"Fish"},{value:"iron",label:"Iron"},{value:"sulfadoxine-pyrimethamine",label:"Sulfadoxine-Pyrimethamine"},{value:"mebendazole",label:"Mebendazole"},{value:"penicillin",label:"Penicillin"},{value:"prep-tdf",label:"PrEP(TDF)"},{value:"Other",label:"Other"},{value:"None",label:"None"}],grid:{s:"12"},onChange:(e,a)=>{if(!Array.isArray(e))return{};const n={},i=e[e.length-1];if("None"===i)return n.allergies=["None"],n["Other allergy notes"]="",n;if(e.includes("None")&&"None"!==i){const a=e.filter(e=>"None"!==e);return n.allergies=a,a.includes("Other")||(n["Other allergy notes"]=""),n}return e.includes("Other")||(n["Other allergy notes"]=""),n}},{componentType:"inputField",header:"Specify other allergy",name:"Other allergy notes",icon:c.editPen,required:!0,grid:{s:"12"},validation:(e,a)=>{const n=null==a?void 0:a.allergies;return!Array.isArray(n)||!n.includes("Other")||e&&""!==e?null:"Please specify other allergy"},condition:e=>{const a=e.allergies;return Array.isArray(a)&&a.includes("Other")}}]),chronicConditionsFormSection:d(()=>[{componentType:"checkboxField",name:"chronic conditions",type:"multiple",twoColumns:!0,options:[{value:"auto immune disease",label:"Auto-immune desease"},{value:"asthma",label:"Asthma"},{value:"sickle cell",label:"Sickle cell"},{value:"anemia",label:"Anemia"},{value:"hiv positive",label:"HIV positive"},{value:"thalassemia",label:"Thalassemia"},{value:"gynae cancer",label:"Gynae Cancer"},{value:"ccf",label:"CCF"},{value:"rhd",label:"RHD"},{value:"gestational diabetes",label:"Gestational diabetes"},{value:"diabetes type 1",label:"Diabetes Type 1"},{value:"diabetes type 2",label:"Diabetes Type 2"},{value:"epilepsy",label:"Epilepsy"},{value:"hypertension",label:"Hypertension"},{value:"kidney disease",label:"Kidney Disease"},{value:"tb",label:"TB"},{value:"mental illness",label:"Mental illness"},{value:"Other",label:"Other"},{value:"None",label:"None"}],grid:{s:"12",md:"6"},onChange:(e,a)=>{if(!Array.isArray(e))return{};const n={},i=e[e.length-1];if("None"===i)return n["chronic conditions"]=["None"],n["Other chronic notes"]="",n["HIV test date"]="",n["Is client on ART"]="",n["Art number"]="",n["facility for art"]="",n;if(e.includes("None")&&"None"!==i){const a=e.filter(e=>"None"!==e);return n["chronic conditions"]=a,a.includes("hiv positive")||(n["HIV test date"]="",n["Is client on ART"]="",n["Art number"]="",n["facility for art"]=""),a.includes("Other")||(n["Other chronic notes"]=""),n}return e.includes("hiv positive")||(n["HIV test date"]="",n["Is client on ART"]="",n["Art number"]="",n["facility for art"]=""),e.includes("Other")||(n["Other chronic notes"]=""),n}},{componentType:"inputField",header:"Specify other chronic conditions",name:"Other chronic notes",icon:c.editPen,required:!0,grid:{s:"12"},validation:(e,a)=>{const n=null==a?void 0:a["chronic conditions"];return!Array.isArray(n)||!n.includes("Other")||e&&""!==e?null:"Please specify other chronic conditions"},condition:e=>{const a=e["chronic conditions"];return Array.isArray(a)&&a.includes("Other")}},{grid:{s:"12"},componentType:"Dashes"},{componentType:"dateInputField",header:"HIV test date*",name:"HIV test date",icon:c.calenderPrimary,required:!0,grid:{s:"12",md:"6"},validation:(e,a)=>{const n=null==a?void 0:a["chronic conditions"];return!Array.isArray(n)||!n.includes("hiv positive")||e&&""!==e?null:"HIV test date is required"},condition:e=>{const a=e["chronic conditions"];return Array.isArray(a)&&a.includes("hiv positive")}},{componentType:"radioButtonField",header:"Is the client on ART?*",name:"Is client on ART",required:!0,options:[{value:"Yes",label:"Yes"},{value:"No",label:"No"}],grid:{s:"12",md:"6"},validation:(e,a)=>{const n=null==a?void 0:a["chronic conditions"];return!Array.isArray(n)||!n.includes("hiv positive")||e&&""!==e?null:"Please specify if client is on ART"},condition:e=>{const a=e["chronic conditions"];return Array.isArray(a)&&a.includes("hiv positive")},onChange:(e,a)=>{const n={};return"No"===e&&(n["Art number"]="",n["facility for art"]=""),n}},{grid:{s:"12"},componentType:"Dashes"},{componentType:"inputField",header:"ART number*",name:"Art number",icon:c.editPen,required:!0,grid:{s:"6"},validation:(e,a)=>{const n=null==a?void 0:a["chronic conditions"],i=null==a?void 0:a["Is client on ART"];return!Array.isArray(n)||!n.includes("hiv positive")||"Yes"!==i||e&&""!==e?null:"ART number is required"},condition:e=>{const a=e["chronic conditions"],n=e["Is client on ART"];return Array.isArray(a)&&a.includes("hiv positive")&&"Yes"===n}},{componentType:"inputField",header:"Facility for ART*",name:"facility for art",icon:c.search,required:!0,grid:{s:"12",md:"6"},validation:(e,a)=>{const n=null==a?void 0:a["chronic conditions"],i=null==a?void 0:a["Is client on ART"];return!Array.isArray(n)||!n.includes("hiv positive")||"Yes"!==i||e&&""!==e?null:"Facility for ART is required"},condition:e=>{const a=e["chronic conditions"],n=e["Is client on ART"];return Array.isArray(a)&&a.includes("hiv positive")&&"Yes"===n}}])},u=m(null),V=m(null),I=m(null),C=m(0),R=m(0),P=m(0),M=n(),{patient:S}=v(M);h(()=>{var e;return null===(e=S.value)||void 0===e?void 0:e.patientID},async(e,a)=>{e&&e!==a&&(C.value++,R.value++,P.value++,await _())});const k=async(e,a,n)=>{const i=[],t=e["past surgeries"];if(Array.isArray(t)&&t.length>0)for(const u of t)u&&""!==u&&i.push(await o.buildValueText("Past surgery",u));const r=e["Other surgery notes"];r&&""!==r&&i.push(await o.buildValueText("Other surgery notes",r));const l=a.allergies;if(Array.isArray(l)&&l.length>0)for(const u of l)u&&""!==u&&i.push(await o.buildValueText("Allergy",u));const s=a["Other allergy notes"];s&&""!==s&&i.push(await o.buildValueText("Other allergy notes",s));const c=n["chronic conditions"];if(Array.isArray(c)&&c.length>0)for(const u of c)u&&""!==u&&i.push(await o.buildValueText("Chronic condition",u));const d=n["Other chronic notes"];if(d&&""!==d&&i.push(await o.buildValueText("Other chronic condition notes",d)),Array.isArray(c)&&c.includes("hiv positive")){const e=n["HIV test date"];e&&""!==e&&i.push(await o.buildValueText("HIV test date",e));const a=n["Is client on ART"];if(a&&""!==a&&i.push(await o.buildValueText("Is client on ART",a)),"Yes"===a){const e=n["Art number"];e&&""!==e&&i.push(await o.buildValueText("ART number",e));const a=n["facility for art"];a&&""!==a&&i.push(await o.buildValueText("Facility for ART",a))}}return i};y(async()=>{await _()});const H=d(()=>s.pastSurgeriesFormSection.value),q=d(()=>s.allergiesFormSection.value),E=d(()=>s.chronicConditionsFormSection.value);return a({validateForm:()=>{var e,a,n;const i=null===(e=u.value)||void 0===e?void 0:e.validateForm(),t=null===(a=V.value)||void 0===a?void 0:a.validateForm(),o=null===(n=I.value)||void 0===n?void 0:n.validateForm();return i||t||o},onSubmit:async()=>{var e,a,n,i,s,c;const d=null===(e=u.value)||void 0===e?void 0:e.validateForm(),m=null===(a=V.value)||void 0===a?void 0:a.validateForm(),v=null===(n=I.value)||void 0===n?void 0:n.validateForm();if(d||m||v)return t("Please fix validation errors before submitting"),!1;const h=(null===(i=u.value)||void 0===i?void 0:i.getFormValues())||{},y=(null===(s=V.value)||void 0===s?void 0:s.getFormValues())||{},p=(null===(c=I.value)||void 0===c?void 0:c.getFormValues())||{},f=await k(h,y,p);return 0===f.length?(t("No medical history data to save"),!1):(await o.addObsToEncounterPatient(f,r.MEDICAL_HISTORY),C.value++,R.value++,P.value++,await _(),l("Medical history saved successfully"),!0)},resetForm:()=>{C.value++,R.value++,P.value++}}),(e,a)=>(f(),p("div",D,[b(A(T),{class:"section"},{default:g(()=>[b(A(w),null,{default:g(()=>[b(A(O),{class:"sub_item_header"},{default:g(()=>[...a[0]||(a[0]=[N("Past Medical and Surgical History",-1)])]),_:1})]),_:1}),b(A(F),null,{default:g(()=>[(f(),x(i,{formData:H.value,ref_key:"surgeriesFormRef",ref:u,key:C.value},null,8,["formData"]))]),_:1})]),_:1}),b(A(T),{class:"section"},{default:g(()=>[b(A(w),null,{default:g(()=>[b(A(O),{class:"sub_item_header"},{default:g(()=>[...a[1]||(a[1]=[N("Allergies",-1)])]),_:1})]),_:1}),b(A(F),null,{default:g(()=>[(f(),x(i,{formData:q.value,ref_key:"allergiesFormRef",ref:V,key:R.value},null,8,["formData"]))]),_:1})]),_:1}),b(A(T),{class:"section"},{default:g(()=>[b(A(w),null,{default:g(()=>[b(A(O),{class:"sub_item_header"},{default:g(()=>[...a[2]||(a[2]=[N("Existing Chronic Health Conditions",-1)])]),_:1})]),_:1}),b(A(F),null,{default:g(()=>[(f(),x(i,{formData:E.value,ref_key:"chronicFormRef",ref:I,key:P.value},null,8,["formData"]))]),_:1})]),_:1})]))}}),[["__scopeId","data-v-806b49d9"]]))}}});
