import{D as j,d as T,ah as b,b1 as q,G as W,E as M,ai as G,aj as L,_ as K,I as O,a3 as $,R as F,am as Q,be as X,aS as Y,H as p,e as C,m as w,f as H,k as n,O as R,Q as D,K as Z,l as u,J as c,a6 as tt}from"./vendor-BpjEhVym.js";import{l as f,j as et,B as st,aP as x,N as d,u as N,H as g,_ as E,bd as k,M as m,S as P,bS as B,G as at,t as it,ce as nt}from"../index-BGZn44vv.js";import{l as A}from"./lodash-NJiRuGo9.js";import{B as U}from"./BasicForm-oeezmGFS.js";import{c as z}from"./customDatePicker-CEOg2OAP.js";import{_ as ot}from"./VitalsMixin.vue_vue_type_script_lang-CFLlevid.js";import{a as J}from"./formatServerData-BSNABAKR.js";const _=[{data:{rowData:[{colData:[{inputHeader:"Systolic Pressure",unit:"mmHg",icon:f.systolicPressure,value:"",name:"Systolic",required:!0,eventType:"input",disabled:!1,valueType:"number",validationFunctionName:"vitalsSystolic"},{inputHeader:"Diastolic pressure",unit:"mmHg",icon:f.diastolicPressure,value:"",name:"Diastolic",required:!0,eventType:"input",disabled:!1,valueType:"number",validationFunctionName:"vitalsDiastolic"}]}]},alerts:[{backgroundColor:"",status:"",icon:"",textColor:"",value:"",name:"bp",index:""}],previousView:{name:"vitals"}},{data:{rowData:[{colData:[{inputHeader:"Temperature",unit:"C",icon:f.temprature,value:"",name:"Temperature",eventType:"input",validationFunctionName:"vitalsTemperature",valueType:"number"},{inputHeader:"Pulse rate",unit:"BMP",icon:f.pulse,value:"",name:"Pulse",eventType:"input",validationFunctionName:"vitalsPulseRate",valueType:"number"}]}]},alerts:[{backgroundColor:"",status:"",icon:"",textColor:"",value:"",name:"temp",index:""},{backgroundColor:"",status:"",icon:"",textColor:"",value:"",name:"pulse",index:""}]},{data:{rowData:[{colData:[{inputHeader:"Respiratory rate",unit:"BMP",icon:f.respiratory,value:"",name:"Respiratory rate",eventType:"input",validationFunctionName:"vitalsRespiratoryRate",valueType:"number"},{inputHeader:"Oxygen saturation",unit:"%",icon:f.oxgenStaturation,value:"",name:"SAO2",eventType:"input",validationFunctionName:"vitalsOxygenSaturation",valueType:"number"}]}]},alerts:[{backgroundColor:"",status:"",icon:"",textColor:"",value:"",name:"respiratory",index:""},{backgroundColor:"",status:"",icon:"",textColor:"",value:"",name:"oxygen",index:""}]}],V=j("immunizationVitalsStore",{state:()=>({vitals:[..._]}),actions:{setVitals(t){this.vitals=t},getInitialVitals(){return[...A.cloneDeep(_)]}},persist:!0}),lt=T({mixins:[ot],components:{IonContent:$,IonHeader:O,IonItem:K,IonList:L,IonMenu:G,IonTitle:M,IonToolbar:W,IonInput:q,BasicInputField:st,BasicForm:U,PreviousVitals:et,customDatePicker:z},data(){return{iconsContent:f,vValidations:"",hasValidationErrors:[],vitalsInstance:{},validationStatus:{heightWeight:!1,bloodPressure:!1,pulseRate:!1},showPD:!1,todays_date:g.sessionDate(),formOpen:!0}},computed:{...b(N,["patient"]),...b(V,["vitals"])},async serverPrefetch(){this.updateVitalsStores()},async mounted(){this.cleanVitalForm(),this.vitalsData=this.vitals,await this.setTodayVitals(),await this.validateRowData()},watch:{vitals:{handler(){this.vitalsData=this.vitals},deep:!0},$route:{handler(){this.cleanVitalForm(),this.vitalsData=this.vitals}}},setup(){return{checkmark:Y,pulseOutline:X}},methods:{cleanVitalForm(){const t=V();t.setVitals(t.getInitialVitals())},navigationMenu(t){Q.close(),this.$router.push(t)},updateVitalsStores(){V().setVitals(this.vitals)},async validateRowData(){const t=d(this.vitals,"Height (cm)","value"),e=d(this.vitals,"Weight","value"),s=d(this.vitals,"Systolic","value"),i=d(this.vitals,"Diastolic","value"),o=d(this.vitals,"Temperature","value"),l=d(this.vitals,"Pulse","value"),a=d(this.vitals,"Respiratory rate","value"),r=d(this.vitals,"SAO2","value");await this.setBMI(t,e),await this.updateBP(s,i);const v=this.getPulseRateStatus(l);await this.updateRate("pulse",l," BMP",v,4);const h=this.getTemperatureStatus(o);this.updateRate("temp",o,"Â°C",h,4);const y=this.getRespiratoryRateStatus(a);this.updateRate("respiratory",a,"BMP",y,6);const I=this.getOxygenSaturationStatus(r);this.updateRate("oxygen",r,"%",I,6)},showCPD(){this.showPD=!0},closeForm(){this.formOpen=!1},async saveVitals(){var e;F.dismiss();const t=await J(this.vitals);if(t.length>0){let s=(e=this.patient)==null?void 0:e.vitals;s.unsaved=[...s.unsaved,...t],await x(this.patient)}}}}),rt={key:0,class:"modal_wrapper"},ut={class:"OtherVitalsHeading"},dt={class:"TodaysDate"},ht={class:""},ct={class:"btnContent"},pt={class:"saveBtn"};function vt(t,e,s,i,o,l){const a=p("basic-form"),r=p("customDatePicker"),v=p("ion-icon"),h=p("ion-button");return t.formOpen?(H(),C("div",rt,[n("div",ut,[e[3]||(e[3]=n("div",{class:"OtherVitalsTitle"},"OTHER VITALS",-1)),n("div",dt,[e[1]||(e[1]=D("Todays Date: ",-1)),e[2]||(e[2]=n("span",null,null,-1)),D(" "+Z(t.todays_date),1)])]),n("div",ht,[u(a,{contentData:t.vitals,"onUpdate:inputValue":e[0]||(e[0]=y=>t.validateRowData())},null,8,["contentData"])]),t.showPD?(H(),R(r,{key:0})):w("",!0),n("div",ct,[n("div",pt,[n("div",null,[u(h,{class:"btnText",fill:"solid",onClick:t.saveVitals},{default:c(()=>[e[4]||(e[4]=D(" Done today ",-1)),u(v,{slot:"end",size:"small",icon:t.iconsContent.calenderwithPlus},null,8,["icon"])]),_:1},8,["onClick"])]),e[6]||(e[6]=n("div",null,null,-1)),n("div",null,[u(h,{class:"btnText",fill:"solid",onClick:t.showCPD},{default:c(()=>[e[5]||(e[5]=D(" Done earlier ",-1)),u(v,{slot:"end",size:"small",icon:t.iconsContent.calenderWithPenEdit},null,8,["icon"])]),_:1},8,["onClick"])])])])])):w("",!0)}const Bt=E(lt,[["render",vt],["__scopeId","data-v-07214b1e"]]),mt=T({name:"Home",components:{IonContent:$,IonHeader:O,IonPage:tt,IonTitle:M,IonToolbar:W,BasicForm:U,customDatePicker:z},data(){return{popoverOpen:!1,iconContent:f,event:null,BMI:"",showPD:!1,vitals_date:g.toStandardHisFormat(g.sessionDate()),formOpen:!0,checkUnderSixWeeks:!1,showDateBtns:!0}},computed:{...b(N,["patient"]),...b(nt,["vitalsWeightHeight"])},watch:{patient:{async handler(){this.checkAge()}}},mounted(){this.checkAge()},setup(){},methods:{checkAge(){var t,e,s,i;A.isEmpty((e=(t=this.patient)==null?void 0:t.personInformation)==null?void 0:e.birthdate)||(this.checkUnderSixWeeks=g.dateDiffInDays(g.sessionDate(),(i=(s=this.patient)==null?void 0:s.personInformation)==null?void 0:i.birthdate)<42,this.controlHeight())},nav(t){this.$router.push(t)},formatBirthdate(){var t,e;return g.getBirthdateAge((e=(t=this.patient)==null?void 0:t.personInformation)==null?void 0:e.birthdate)},controlHeight(){this.checkUnderSixWeeks?(m(this.vitalsWeightHeight,"Height (cm)","inputHeader","Height"),m(this.vitalsWeightHeight,"Height (cm)","inputDisplayNone",!0)):m(this.vitalsWeightHeight,"Height (cm)","inputDisplayNone",!1)},async validaterowData(t){const e=P.getUserID(),s=new B(this.patient.patientID,e),i=d(this.vitalsWeightHeight,"weight","value"),o=d(this.vitalsWeightHeight,"Height (cm)","value"),l=s.validator({inputHeader:"Height*",value:o}),a=s.validator({inputHeader:"Weight*",value:i});l&&o?m(this.vitalsWeightHeight,"Height (cm)","alertsErrorMassage",l.flat(1/0)[0]):m(this.vitalsWeightHeight,"Height (cm)","alertsErrorMassage",""),a&&i?m(this.vitalsWeightHeight,"weight","alertsErrorMassage",a.flat(1/0)[0]):m(this.vitalsWeightHeight,"weight","alertsErrorMassage",""),this.setBMI(i,o)},async saveVitals(){const t=P.getUserID(),e=new B(this.patient.patientID,t),s=d(this.vitalsWeightHeight,"weight","value");d(this.vitalsWeightHeight,"Height (cm)","value");let i=null;const o=e.validator({inputHeader:"Weight*",value:s}),l=await J(this.vitalsWeightHeight);if(l.length>0&&o==null&&i==null){const a=JSON.parse(JSON.stringify(this.patient));let r=a==null?void 0:a.vitals;r.unsaved=[...r.unsaved,...l],await x(a),at("Vitals saved successful"),this.cleanInputFields()}else it("Please complete the form")},cleanInputFields(){m(this.vitalsWeightHeight,"weight","value",""),m(this.vitalsWeightHeight,"Height (cm)","value",""),this.dismiss()},dismiss(){F.dismiss()},async setBMI(t,e){var s,i,o,l,a,r,v,h;(i=(s=this.patient)==null?void 0:s.personInformation)!=null&&i.gender&&((l=(o=this.patient)==null?void 0:o.personInformation)!=null&&l.birthdate)&&(this.BMI=await k.getBMI(parseInt(t),parseInt(e),(r=(a=this.patient)==null?void 0:a.personInformation)==null?void 0:r.gender,g.calculateAge((h=(v=this.patient)==null?void 0:v.personInformation)==null?void 0:h.birthdate,g.sessionDate()))),this.updateBMI()},async updateBMI(){var s,i,o,l,a,r;const t=(i=(s=this.BMI)==null?void 0:s.color)!=null?i:[],e=this.vitalsWeightHeight[0].alerts[0];e.icon=k.iconBMI(t),e.backgroundColor=t[0],e.textColor=t[1],e.index="BMI "+((l=(o=this.BMI)==null?void 0:o.index)!=null?l:""),e.value=(r=(a=this.BMI)==null?void 0:a.result)!=null?r:""},showCPD(){this.showPD=!0,this.showDateBtns=!1},updateDate(t){this.vitals_date=g.toStandardHisFormat(t)}}}),gt={key:0,class:"pim-cls-1 modal_wrapper"},ft={class:"center text_12"},Dt={class:"btnContent"},yt={key:0,class:"saveBtn"},wt={key:1,class:"saveBtn"};function Ht(t,e,s,i,o,l){const a=p("BasicForm"),r=p("ion-row"),v=p("customDatePicker"),h=p("ion-icon"),y=p("ion-button"),I=p("ion-col");return t.formOpen?(H(),C("div",gt,[e[7]||(e[7]=n("div",{class:"OtherVitalsHeading"},[n("div",{class:"OtherVitalsTitle"},"Add Weight/Height")],-1)),n("div",null,[n("div",ft,[u(r,null,{default:c(()=>[u(a,{contentData:t.vitalsWeightHeight,"onUpdate:inputValue":e[0]||(e[0]=S=>t.validaterowData(S))},null,8,["contentData"])]),_:1})])]),t.showPD?(H(),R(v,{key:0,onDateChange:t.updateDate},null,8,["onDateChange"])):w("",!0),n("div",Dt,[t.showDateBtns?(H(),C("div",yt,[n("div",null,[u(y,{class:"btnText",fill:"solid",onClick:e[1]||(e[1]=S=>t.saveVitals())},{default:c(()=>[e[3]||(e[3]=D(" Done today ",-1)),u(h,{slot:"end",size:"small",icon:t.iconContent.calenderwithPlus},null,8,["icon"])]),_:1})]),n("div",null,[u(y,{class:"btnText",fill:"solid",onClick:t.showCPD},{default:c(()=>[e[4]||(e[4]=D(" Done earlier ",-1)),u(h,{slot:"end",size:"small",icon:t.iconContent.calenderWithPenEdit},null,8,["icon"])]),_:1},8,["onClick"])])])):w("",!0),t.showDateBtns?w("",!0):(H(),C("div",wt,[u(r,null,{default:c(()=>[u(I,null,{default:c(()=>[u(y,{onClick:t.dismiss,id:"cbtn",class:"btnText cbtn",fill:"solid",style:{width:"130px"}},{default:c(()=>[...e[5]||(e[5]=[D(" Cancel ",-1)])]),_:1},8,["onClick"])]),_:1}),u(I,null,{default:c(()=>[u(y,{onClick:e[2]||(e[2]=S=>t.saveVitals()),class:"btnText",fill:"solid",style:{width:"130px"}},{default:c(()=>[...e[6]||(e[6]=[D(" save ",-1)])]),_:1})]),_:1})]),_:1})]))])])):w("",!0)}const _t=E(mt,[["render",Ht],["__scopeId","data-v-db5e7dd3"]]);export{Bt as O,_t as w};
