import{c as q,d as V,r as h,O as F,f as Y,u as p,aS as H,J as f,l as c,aP as M,an as xe,cE as Ne,aV as x,w as S,a as Be,a3 as Fe,k as N,m as Ye,i as k,bK as Ce,v as z,a6 as Re,b9 as P}from"./vendor-DNPAeyur.js";import{aB as i,aC as E,aG as te,u as Pe,aH as qe,aI as Ve,aJ as Ie,aK as ke,d as ze,aL as He,g as Me,Z as Ee,e as Le,T as Oe,J as je,N as Ge,H as K,aM as j,aN as $e,aO as ne,aP as We,t as ie,aQ as G,G as Ue,aR as Je,a0 as Ke,S as Qe}from"../index-iTmV8kmc.js";import{D as Ze}from"./DemographicBar-YEOSJ_8G.js";import{u as Xe,a as Q,_ as ea,s as aa,c as ta,b as na}from"./useFormWizard-DyHmg9ie.js";import{l as ia}from"./lodash-NJiRuGo9.js";import{a as se,b as sa}from"./formatServerData-vL-ElkBV.js";import{u as oa}from"./usePatientProfile-C15C4xRY.js";import"./apexcharts-B0hKRFaF.js";import"./drug_prescription_service-DFFxCqXs.js";import"./patient_diagnosis_service-D6YnvUew.js";import"./Registration-dPehyVCs.js";import"./useLocation-ORoACdDW.js";import"./vaccines_service-EttThb0Y.js";import"./sms_service-XnxKW2U8.js";import"./EIRreportsStore-Dj0gGrI4.js";import"./Export-CIGBbsjq.js";import"./NeonatalEnrollmentStore-CapK2pGB.js";const ra=()=>{const g=[{id:"secretion",label:"Secretions - blood, vomit, other"},{id:"tongue_swelling",label:"Tongue swelling"},{id:"neck_swelling",label:"Neck swelling"},{id:"neck_haematoma",label:"Neck haematoma"},{id:"tongue_falling_back",label:"Tongue falling back"},{id:"other",label:"Other"}],r=[{id:"suctioning_done",label:"Suctioning Done"},{id:"jaw_thrust_manoeuver",label:"Jaw thrust manoeuver"},{id:"head_tilt_chin_lift",label:"Head tilt/chin lift"},{id:"oropharyngeal",label:"Airway adjunct (Oropharyngeal airway and size / nasopharyngeal airway)"},{id:"lma_insertion",label:"Laryngeal mask airway (LMA) insertion"},{id:"endotracheal_intubation",label:"Endotracheal intubation"},{id:"cricothyroidotomy",label:"Performed Cricothyroidotomy(Surgical Airway)"},{id:"tracheostomy",label:"Performed tracheostomy"}];return{airwayAssessmentFormSection:q(()=>[{componentType:"Heading",name:"Airway Patent",grid:{s:"4"}},{componentType:"radioButtonField",header:"Is Airway Patent?",name:"is_airway_patent",obsValueType:"value_text",type:"standard",grid:{s:"4"},options:[{label:"Yes",value:"Yes"},{label:"No",value:"No"},{label:"Threatened",value:"Threatened"}]},{componentType:"radioButtonField",header:"Is Patient Injured?",name:"is_patient_injured",obsValueType:"value_text",type:"standard",grid:{s:"4",md:"4"},options:[{label:"Yes",value:"Yes"},{label:"No",value:"No"}]},{componentType:"Dashes",condition:a=>a.is_airway_patent==="Threatened"||a.is_airway_patent==="No"},{componentType:"Heading",name:"Airway Threatened Details",grid:{s:"4"},condition:a=>a.is_airway_patent==="Threatened"||a.is_airway_patent==="No"},{componentType:"multiSelectInputField",header:"Reason for Airway Threat",name:"airway_threatened_reason",obsValueType:"value_text",grid:{s:"8"},options:g,condition:a=>a.is_airway_patent==="Threatened"||a.is_airway_patent==="No"},{componentType:"inputField",header:"Specify Other Reason",name:"other_reason",obsValueType:"value_text",validation:i.required,grid:{s:"12"},condition:a=>{const e=a.airway_threatened_reason;return(a.is_airway_patent==="Threatened"||a.is_airway_patent==="No")&&Array.isArray(e)&&e.some(s=>s.id==="other")}},{componentType:"Dashes",condition:a=>a.is_patient_injured==="Yes"},{componentType:"Alert",header:"C-Spine Stabilization Required",message:"Please stabilize the C-Spine",grid:{s:"12"},condition:a=>a.is_patient_injured==="Yes"},{componentType:"Heading",name:"Neck Collar and Head Blocks",grid:{s:"4"},condition:a=>a.is_patient_injured==="Yes"},{componentType:"radioButtonField",header:"Neck Collar Applied",name:"neck_collar_applied",obsValueType:"value_text",validation:i.required,type:"standard",grid:{s:"4"},condition:a=>a.is_patient_injured==="Yes",options:[{label:"Yes",value:"Yes"},{label:"No",value:"No"},{label:"Not Indicated",value:"Not Indicated"}]},{componentType:"radioButtonField",header:"Head Blocks Applied",name:"head_blocks_applied",obsValueType:"value_text",validation:i.required,type:"standard",grid:{s:"4"},condition:a=>a.is_patient_injured==="Yes",options:[{label:"Yes",value:"Yes"},{label:"No",value:"No"}]},{componentType:"Dashes",condition:a=>a.is_airway_patent==="No"||a.is_airway_patent==="Threatened"},{componentType:"Heading",name:"Interventions",grid:{s:"4"},condition:a=>a.is_airway_patent==="No"||a.is_airway_patent==="Threatened"},{componentType:"multiSelectInputField",header:"Airway Opening Intervention",name:"airway_opening_intervention",obsValueType:"value_text",validation:i.required,grid:{s:"8"},options:r,condition:a=>a.is_airway_patent==="No"||a.is_airway_patent==="Threatened"},{componentType:"Dashes",condition:a=>{const e=a.airway_opening_intervention;return(a.is_airway_patent==="No"||a.is_airway_patent==="Threatened")&&Array.isArray(e)&&e.some(s=>s.id==="oropharyngeal")}},{componentType:"Heading",name:"Airway Size",grid:{s:"12"},condition:a=>{const e=a.airway_opening_intervention;return(a.is_airway_patent==="No"||a.is_airway_patent==="Threatened")&&Array.isArray(e)&&e.some(s=>s.id==="oropharyngeal")}},{componentType:"radioButtonField",header:"Nasopharyngeal Airway Size (CM)",name:"nasopharyngeal_airway_size",obsValueType:"value_numeric",validation:i.required,type:"standard",grid:{s:"6",md:"4"},condition:a=>{const e=a.airway_opening_intervention;return(a.is_airway_patent==="No"||a.is_airway_patent==="Threatened")&&Array.isArray(e)&&e.some(s=>s.id==="oropharyngeal")},options:[{label:"5",value:"5"},{label:"6",value:"6"},{label:"7",value:"7"},{label:"8",value:"8"},{label:"9",value:"9"}]},{componentType:"radioButtonField",header:"Oropharyngeal Airway Size (MM)",name:"oropharyngeal_airway_size",obsValueType:"value_numeric",validation:i.required,type:"standard",grid:{s:"6",md:"4"},condition:a=>{const e=a.airway_opening_intervention;return(a.is_airway_patent==="No"||a.is_airway_patent==="Threatened")&&Array.isArray(e)&&e.some(s=>s.id==="oropharyngeal")},options:[{label:"80",value:"80"},{label:"90",value:"90"},{label:"100",value:"100"},{label:"110",value:"110"},{label:"120",value:"120"}]}])}},la=V({__name:"AirwayAssessment",setup(g){const r=h(null),l=ra().airwayAssessmentFormSection;return(a,e)=>(Y(),F(p(H),null,{default:f(()=>[c(p(M),null,{default:f(()=>[c(E,{formData:p(l),ref_key:"formRef",ref:r},null,8,["formData"])]),_:1})]),_:1}))}}),da=()=>{const g=[{label:"Concentrator",value:"concentrator"},{label:"Cylinder",value:"cylinder"},{label:"Piped Oxygen",value:"piped_oxygen"}],r=[{id:"nasal_prongs",label:"Nasal Prongs"},{id:"simple_face_mask",label:"Simple face mask"},{id:"venturi_face_mask",label:"Venturi face mask"},{id:"nebulising_chamber",label:"Face mask with nebulising chamber"},{id:"non_rebreather",label:"Nonrebreather face mask"},{id:"non_invasive_ventilation_mask",label:"Noninvasive ventilation mask"},{id:"laryngeal",label:"Laryngeal mask airway"},{id:"endotracheal",label:"Endotracheal tube"}],l=[{id:"bag_and_mask",label:"Bag and mask"},{id:"laryngeal_mask_airway_and_bag",label:"Laryngeal Mask Airway and bag"},{id:"endotracheal",label:"Endotracheal tube (ETT)"}];return{breathingAssessmentFormSection:q(()=>[{componentType:"Heading",name:"Breathing Assessment",grid:{s:"4"}},{componentType:"radioButtonField",header:"Is Patient Breathing?",name:"is_breathing_abnormal",obsValueType:"value_text",validation:i.required,type:"standard",grid:{s:"8"},options:[{label:"Yes",value:"Yes"},{label:"No",value:"No"}]},{componentType:"Dashes",condition:e=>e.is_breathing_abnormal==="No"},{grid:{s:"4"}},{componentType:"Alert",header:"Immediate Action Required",message:"Assist with ventilation. Manually assist patient breathing",grid:{s:"8"},condition:e=>e.is_breathing_abnormal==="No"},{componentType:"Heading",name:"Ventilation Intervention",grid:{s:"4"},condition:e=>e.is_breathing_abnormal==="No"},{componentType:"inputField",header:"Start Time",name:"start_time",obsValueType:"value_text",type:"time",grid:{s:"4"},condition:e=>e.is_breathing_abnormal==="No"},{componentType:"inputField",header:"End Time",name:"end_time",obsValueType:"value_text",type:"time",grid:{s:"4"},condition:e=>e.is_breathing_abnormal==="No"},{grid:{s:"4"}},{componentType:"multiSelectInputField",header:"Device used for intervention",name:"device_used_for_intervention",obsValueType:"value_text",validation:i.required,grid:{s:"8"},options:l,condition:e=>e.is_breathing_abnormal==="No"},{componentType:"Dashes",condition:e=>e.is_breathing_abnormal==="Yes"},{componentType:"Heading",name:"Respiratory and Oxygen",grid:{s:"4"},condition:e=>e.is_breathing_abnormal==="Yes"},{componentType:"inputField",header:"Respiratory Rate (bpm)",name:"respiratory_rate",obsValueType:"value_numeric",validation:e=>{if(!e)return"Respiratory rate is required";const s=Number(e);return s<1||s>70?"Must be between 1 and 70":null},type:"number",grid:{s:"4"},condition:e=>e.is_breathing_abnormal==="Yes"},{componentType:"inputField",header:"Oxygen Saturation (%)",name:"oxygen_saturation",obsValueType:"value_numeric",validation:e=>{if(!e)return"Oxygen saturation is required";const s=Number(e);return s<10||s>100?"Must be between 10 and 100":null},type:"number",grid:{s:"6",md:"4"},condition:e=>e.is_breathing_abnormal==="Yes"},{grid:{s:"4"}},{componentType:"radioButtonField",header:"Patient Need Oxygen?",name:"patient_need_oxygen",obsValueType:"value_text",validation:i.required,type:"standard",grid:{s:"4"},condition:e=>e.is_breathing_abnormal==="Yes",options:[{label:"Yes",value:"Yes"},{label:"No",value:"No"}]},{componentType:"radioButtonField",header:"Oxygen Source",name:"oxygen_source",obsValueType:"value_text",validation:i.required,type:"standard",grid:{s:"4"},options:g,condition:e=>e.is_breathing_abnormal==="Yes"&&e.patient_need_oxygen==="Yes"},{grid:{s:"4"}},{componentType:"inputField",header:"Oxygen Given (L/min)",name:"oxygen_given",obsValueType:"value_numeric",validation:e=>{if(!e)return"Oxygen amount is required";const s=Number(e);return s<1||s>15?"Must be between 1 and 15":null},type:"number",grid:{s:"4"},condition:e=>e.is_breathing_abnormal==="Yes"&&e.patient_need_oxygen==="Yes"},{componentType:"multiSelectInputField",header:"Device Used",name:"device_used",obsValueType:"value_text",validation:i.required,grid:{s:"4"},options:r,condition:e=>e.is_breathing_abnormal==="Yes"&&e.patient_need_oxygen==="Yes"},{componentType:"Dashes",condition:e=>e.is_breathing_abnormal==="Yes"},{componentType:"Heading",name:"Trachea and Chest",grid:{s:"4"},condition:e=>e.is_breathing_abnormal==="Yes"},{componentType:"radioButtonField",header:"Is Trachea Central?",name:"is_trachea_central",obsValueType:"value_text",validation:i.required,type:"standard",grid:{s:"4"},condition:e=>e.is_breathing_abnormal==="Yes",options:[{label:"Yes",value:"Yes"},{label:"No",value:"No"}]},{componentType:"radioButtonField",header:"Which side is it deviated to?",name:"side_deviated",obsValueType:"value_text",validation:i.required,type:"standard",grid:{s:"4"},condition:e=>e.is_breathing_abnormal==="Yes"&&e.is_trachea_central==="No",options:[{label:"Left",value:"Left"},{label:"Right",value:"Right"}]},{grid:{s:"4"}},{componentType:"radioButtonField",header:"Chest Wall Abnormality?",name:"chest_wall_abnormality",obsValueType:"value_text",validation:i.required,type:"standard",grid:{s:"12",md:"4"},condition:e=>e.is_breathing_abnormal==="Yes",options:[{label:"Yes",value:"Yes"},{label:"No",value:"No"}]},{componentType:"radioButtonField",header:"Chest Expansion",name:"chest_expansion",obsValueType:"value_text",validation:i.required,type:"standard",grid:{s:"4"},condition:e=>e.is_breathing_abnormal==="Yes",options:[{label:"Normal",value:"Normal"},{label:"Reduced",value:"Reduced"}]},{grid:{s:"4"}},{componentType:"Alert",header:"Diagram Required",message:"Diagram to select area",grid:{s:"8"},condition:e=>e.is_breathing_abnormal==="Yes"&&e.chest_wall_abnormality==="Yes"},{grid:{s:"4"}},{componentType:"radioButtonField",header:"Percussion",name:"percussion",obsValueType:"value_text",validation:i.required,type:"standard",grid:{s:"4"},condition:e=>e.is_breathing_abnormal==="Yes",options:[{label:"Normal",value:"Normal"},{label:"Abnormal",value:"Abnormal"}]},{componentType:"radioButtonField",header:"Breath Sounds",name:"breathing_sounds",obsValueType:"value_text",validation:i.required,type:"standard",grid:{s:"4"},condition:e=>e.is_breathing_abnormal==="Yes",options:[{label:"Normal",value:"Normal"},{label:"Abnormal",value:"Abnormal"}]},{grid:{s:"4"}},{componentType:"textAreaField",header:"Additional Notes",name:"additional_notes",obsValueType:"value_text",grid:{s:"8"},condition:e=>e.is_breathing_abnormal==="Yes"}])}},ua=V({__name:"BreathingAssessment",setup(g){const r=h(null),l=da().breathingAssessmentFormSection;return(a,e)=>(Y(),F(p(H),null,{default:f(()=>[c(p(M),null,{default:f(()=>[c(E,{formData:p(l),ref_key:"formRef",ref:r},null,8,["formData"])]),_:1})]),_:1}))}}),ca=()=>{const g=[{id:"14g",label:"14G"},{id:"16g",label:"16G"},{id:"18g",label:"18G"},{id:"20g",label:"20G"},{id:"22g",label:"22G"},{id:"central_line",label:"Central Line"}],r=[{id:"pale",label:"Pale"},{id:"dry",label:"Dry"},{id:"cyanosis",label:"Cyanosis"},{id:"jaundice",label:"Jaundice"}],l=[{label:"Weak",value:"weak"},{label:"Strong",value:"strong_regular"}],a=[{label:"Regular",value:"regular_rhythm"},{label:"Irregular",value:"irregular"}],e=[{label:"Less than 3 seconds",value:"less_than_3_seconds"},{label:"3 seconds",value:"three_seconds"},{label:"More than 3 seconds",value:"more_than_three_seconds"}],s=[{id:"patient_uncooperative",label:"Patient uncooperative"},{id:"machine_not_available",label:"Machine not available"},{id:"batteries_not_available",label:"Batteries not available"},{id:"inappropriately_sized_cuff",label:"No inappropriately sized cuff"},{id:"no_power_supply",label:"No power supply"},{id:"other",label:"Other"}],w=[{id:"left",label:"Left"},{id:"right",label:"Right"}],B=[{id:"antecubital_fossa",label:"Antecubital fossa"},{id:"hand",label:"Hand"},{id:"wrist",label:"Wrist"},{id:"forearm",label:"Forearm"},{id:"foot",label:"Foot"},{id:"external_jugular",label:"External Jugular"}],A=[{id:"femoral",label:"Femoral"},{id:"subclavian",label:"Subclavian"},{id:"internal_jugular",label:"Internal Jugular"}];return{circulationAssessmentFormSection:q(()=>[{componentType:"Heading",name:"Bleeding and Pulse Rate",grid:{s:"4"}},{componentType:"radioButtonField",header:"Is the patient actively bleeding?",name:"is_patient_actively_bleeding",obsValueType:"value_text",validation:i.required,type:"standard",grid:{s:"4"},options:[{label:"Yes",value:"Yes"},{label:"No",value:"No"}]},{componentType:"radioButtonField",header:"Does the patient have a pulse?",name:"is_the_patient_have_pulse",obsValueType:"value_text",validation:i.required,type:"standard",grid:{s:"4"},options:[{label:"Yes",value:"Yes"},{label:"No",value:"No"}]},{grid:{s:"4"}},{componentType:"Alert",header:"Immediate Action Required",message:"Apply pressure",grid:{s:"8"},condition:t=>t.is_patient_actively_bleeding==="Yes"},{grid:{s:"4"}},{componentType:"textAreaField",header:"Action Done",name:"action_done",obsValueType:"value_text",validation:i.required,grid:{s:"8"},condition:t=>t.is_patient_actively_bleeding==="Yes"},{grid:{s:"4"}},{componentType:"Alert",header:"Critical - No Pulse Detected",message:"Start cardiopulmonary resuscitation immediately",grid:{s:"8"},condition:t=>t.is_the_patient_have_pulse==="No"},{componentType:"Dashes",condition:t=>t.is_the_patient_have_pulse==="Yes"},{grid:{s:"4"}},{componentType:"inputField",header:"Pulse Rate (bpm)",name:"pulse_rate",obsValueType:"value_numeric",validation:i.required,type:"number",grid:{s:"8"},condition:t=>t.is_the_patient_have_pulse==="Yes"},{grid:{s:"4"}},{componentType:"radioButtonField",header:"Pulse Strength",name:"pulse_strength",obsValueType:"value_text",validation:i.required,type:"standard",grid:{s:"4"},options:l,condition:t=>t.is_the_patient_have_pulse==="Yes"},{componentType:"radioButtonField",header:"Pulse Rhythm",name:"pulse_rhythm",obsValueType:"value_text",validation:i.required,type:"standard",grid:{s:"4"},options:a,condition:t=>t.is_the_patient_have_pulse==="Yes"},{grid:{s:"4"}},{componentType:"radioButtonField",header:"Capillary Refill Time",name:"capillary_refill_time",obsValueType:"value_text",validation:i.required,type:"standard",grid:{s:"8"},options:e,condition:t=>t.is_the_patient_have_pulse==="Yes"},{componentType:"Dashes"},{componentType:"Heading",name:"Mucous and Peripherals",grid:{s:"4"}},{componentType:"radioButtonField",header:"Mucous Membranes",name:"mucous_membranes",obsValueType:"value_text",validation:i.required,type:"standard",grid:{s:"4"},options:[{label:"Normal",value:"Normal"},{label:"Abnormal",value:"Abnormal"}]},{componentType:"radioButtonField",header:"Assess Peripheries",name:"assess_peripheries",obsValueType:"value_text",validation:i.required,type:"standard",grid:{s:"4"},options:[{label:"Cold and clammy",value:"cold and clammy"},{label:"Warm",value:"warm"}]},{grid:{s:"4"}},{componentType:"multiSelectInputField",header:"Mucous Abnormal",name:"mucous_abnormal",obsValueType:"value_text",validation:i.required,grid:{s:"8"},options:r,condition:t=>t.mucous_membranes==="Abnormal"},{componentType:"Dashes"},{componentType:"Heading",name:"Blood Pressure",grid:{s:"4"}},{componentType:"radioButtonField",header:"Blood Pressure Measured",name:"blood_pressure_measured",obsValueType:"value_text",validation:i.required,type:"standard",grid:{s:"8"},options:[{label:"Done",value:"Done"},{label:"Not Done",value:"Not Done"},{label:"BP Unrecordable",value:"BP Unrecordable"}]},{grid:{s:"4"}},{componentType:"inputField",header:"Blood Pressure Systolic (mmHg)",name:"systolic_blood_pressure",obsValueType:"value_numeric",validation:t=>{if(!t)return"Systolic BP is required";const b=Number(t);return b<0||b>300?"Must be between 0 and 300":null},type:"number",grid:{s:"4"},condition:t=>t.blood_pressure_measured==="Done"},{componentType:"inputField",header:"Blood Pressure Diastolic (mmHg)",name:"diastolic_blood_pressure",obsValueType:"value_numeric",validation:t=>{if(!t)return"Diastolic BP is required";const b=Number(t);return b<0||b>300?"Must be between 0 and 300":null},type:"number",grid:{s:"4"},condition:t=>t.blood_pressure_measured==="Done"},{grid:{s:"4"}},{componentType:"multiSelectInputField",header:"Reason Not Done",name:"reason_not_done",obsValueType:"value_text",validation:i.required,grid:{s:"8"},options:s,condition:t=>t.blood_pressure_measured==="Not Done"},{grid:{s:"4"}},{componentType:"textAreaField",header:"Specify Other Reason",name:"bp_not_done_other",obsValueType:"value_text",validation:i.required,grid:{s:"8"},condition:t=>{const b=t.reason_not_done;return t.blood_pressure_measured==="Not Done"&&Array.isArray(b)&&b.some(I=>I.id==="other")}},{grid:{s:"4"}},{componentType:"inputField",header:"Reason BP Is Unrecordable",name:"reason_not_recorded",obsValueType:"value_text",validation:i.required,grid:{s:"8"},condition:t=>t.blood_pressure_measured==="BP Unrecordable"},{componentType:"Dashes"},{componentType:"Heading",name:"Circulation Specific Trauma",grid:{s:"4"}},{componentType:"radioButtonField",header:"Is the patient injured?",name:"is_patient_traumatized",obsValueType:"value_text",validation:i.required,type:"standard",grid:{s:"4"},options:[{label:"Yes",value:"Yes"},{label:"No",value:"No"}]},{componentType:"radioButtonField",header:"Is the pelvis unstable?",name:"is_pelvis_stable",obsValueType:"value_text",validation:i.required,type:"standard",grid:{s:"4"},condition:t=>t.is_patient_traumatized==="Yes",options:[{label:"Yes",value:"Yes"},{label:"No",value:"No"}]},{grid:{s:"4"}},{componentType:"Alert",header:"Immediate Action Required",message:"Apply pelvic binder",grid:{s:"8"},condition:t=>t.is_patient_traumatized==="Yes"&&t.is_pelvis_stable==="Yes"},{grid:{s:"4"}},{componentType:"radioButtonField",header:"Is the femur and tibia normal?",name:"is_femur_tibia_normal",obsValueType:"value_text",validation:i.required,type:"standard",grid:{s:"8"},condition:t=>t.is_patient_traumatized==="Yes",options:[{label:"Yes",value:"Yes"},{label:"No",value:"No"}]},{grid:{s:"4"}},{componentType:"Alert",header:"Leg Assessment Required",message:"Select affected area on diagram",grid:{s:"8"},condition:t=>t.is_patient_traumatized==="Yes"&&t.is_femur_tibia_normal==="No"},{componentType:"Dashes"},{componentType:"Heading",name:"Intravenous Access",grid:{s:"4"}},{componentType:"radioButtonField",header:"Does the patient need intravenous access?",name:"patient_intravenous",obsValueType:"value_text",validation:i.required,type:"standard",grid:{s:"8"},options:[{label:"Yes",value:"Yes"},{label:"No",value:"No"}]},{grid:{s:"4"}},{componentType:"multiSelectInputField",header:"Size of Intravenous Catheter",name:"size_of_catheter",obsValueType:"value_text",validation:i.required,grid:{s:"4"},options:g,condition:t=>t.patient_intravenous==="Yes"},{componentType:"multiSelectInputField",header:"Cannulation Site (Central Line)",name:"central_line_cannulation_site",obsValueType:"value_text",validation:i.required,grid:{s:"4"},options:A,condition:t=>{const b=t.size_of_catheter;return t.patient_intravenous==="Yes"&&Array.isArray(b)&&b.some(I=>I.id==="central_line")}},{grid:{s:"4"}},{componentType:"multiSelectInputField",header:"Cannulation Site (Left/Right)",name:"cannulation_site",obsValueType:"value_text",validation:i.required,grid:{s:"8"},options:w,condition:t=>t.patient_intravenous==="Yes"},{grid:{s:"4"}},{componentType:"multiSelectInputField",header:"Diagram Cannulation Site",name:"diagram_cannulation_site",obsValueType:"value_text",validation:i.required,grid:{s:"8"},options:B,condition:t=>{const b=t.cannulation_site;return t.patient_intravenous==="Yes"&&Array.isArray(b)&&b.length>0}},{componentType:"Dashes"},{componentType:"Heading",name:"Circulation Specific Abdominal Findings",grid:{s:"4"}},{componentType:"radioButtonField",header:"Is there abdominal distention?",name:"abdominal_distention",obsValueType:"value_text",validation:i.required,type:"standard",grid:{s:"4"},options:[{label:"Yes",value:"Yes"},{label:"No",value:"No"}]},{componentType:"radioButtonField",header:"Is there any other abnormalities?",name:"is_there_any_other_abnormalities",obsValueType:"value_text",validation:i.required,type:"standard",grid:{s:"4"},options:[{label:"Yes",value:"Yes"},{label:"No",value:"No"}]},{grid:{s:"4"}},{componentType:"Alert",header:"Abdomen Assessment Required",message:"Select affected area on abdomen diagram",grid:{s:"8"},condition:t=>t.is_there_any_other_abnormalities==="Yes"},{grid:{s:"4"}},{componentType:"textAreaField",header:"Additional Notes",name:"additional_notes",obsValueType:"value_text",grid:{s:"8"}}])}},pa=V({__name:"CirculationAssessment",setup(g){const r=h(null),l=ca().circulationAssessmentFormSection;return(a,e)=>(Y(),F(p(H),null,{default:f(()=>[c(p(M),null,{default:f(()=>[c(E,{formData:p(l),ref_key:"formRef",ref:r},null,8,["formData"])]),_:1})]),_:1}))}}),ma=()=>{const g=[{label:"Spontaneously",value:"4"},{label:"To Speech",value:"3"},{label:"To Pain",value:"2"},{label:"No Response",value:"1"}],r=[{label:"Oriented To Time, Place and Person",value:"5"},{label:"Confused",value:"4"},{label:"Inappropriate Words",value:"3"},{label:"Incomprehensible Words",value:"2"},{label:"No Response",value:"1"}],l=[{label:"Obey Commands",value:"6"},{label:"Moves to Localized Pain",value:"5"},{label:"Flexion Withdrawal from Pain",value:"4"},{label:"Abnormal Flexion (Decorticate)",value:"3"},{label:"Abnormal Extension (Decerbrate)",value:"2"},{label:"No Response",value:"1"}],a=[{id:"mmol/l",label:"mmol/l"},{id:"mg/dl",label:"mg/dl"}];return{disabilityAssessmentFormSection:q(()=>[{componentType:"Heading",name:"Glasgow Coma Scale (GCS)",grid:{s:"4"}},{componentType:"radioButtonField",header:"Eye Opening Response",name:"eye_opening_response",obsValueType:"value_numeric",validation:i.required,type:"standard",grid:{s:"4"},options:g},{componentType:"Alert",header:"Eye Opening Score",message:"Selected Score: {eye_opening_response}",grid:{s:"4"},condition:s=>!!s.eye_opening_response},{componentType:"Dashes"},{grid:{s:"4"}},{componentType:"radioButtonField",header:"Best Verbal Response",name:"verbal_response",obsValueType:"value_numeric",validation:i.required,type:"standard",grid:{s:"4"},options:r},{componentType:"Alert",header:"Verbal Response Score",message:"Selected Score: {verbal_response}",grid:{s:"4"},condition:s=>!!s.verbal_response},{componentType:"Dashes"},{grid:{s:"4"}},{componentType:"radioButtonField",header:"Best Motor Response",name:"motor_response",obsValueType:"value_numeric",validation:i.required,type:"standard",grid:{s:"4"},options:l},{componentType:"Alert",header:"Motor Response Score",message:"Selected Score: {motor_response}",grid:{s:"4"},condition:s=>!!s.motor_response},{grid:{s:"4"}},{componentType:"Alert",header:"Total GCS Score",message:"Total Score: {gcs_total}",grid:{s:"8"},condition:s=>{const w=Number(s.eye_opening_response)||0,B=Number(s.verbal_response)||0,A=Number(s.motor_response)||0;return w+B+A>0}},{componentType:"Dashes"},{componentType:"Heading",name:"Pupillary Response-Right Eye",grid:{s:"4"}},{componentType:"inputField",header:"Right Pupil Size (mm)",name:"right_pupil_size",obsValueType:"value_numeric",type:"number",grid:{s:"4"}},{componentType:"radioButtonField",header:"Right Pupil Reaction",name:"right_pupil_reaction",obsValueType:"value_text",type:"standard",grid:{s:"4"},options:[{label:"Yes",value:"Yes"},{label:"No",value:"No"}]},{componentType:"Dashes"},{componentType:"Heading",name:"Pupillary Response-Left Eye",grid:{s:"4"}},{componentType:"inputField",header:"Left Pupil Size (mm)",name:"left_pupil_size",obsValueType:"value_numeric",type:"number",grid:{s:"4"}},{componentType:"radioButtonField",header:"Left Pupil Reaction",name:"left_pupil_reaction",obsValueType:"value_text",type:"standard",grid:{s:"4"},options:[{label:"Yes",value:"Yes"},{label:"No",value:"No"}]},{grid:{s:"4"}},{componentType:"textAreaField",header:"Focal Neurology",name:"focal_neurology",obsValueType:"value_text",validation:i.required,grid:{s:"8"}},{componentType:"Dashes"},{componentType:"Heading",name:"Additional Findings and Glucose",grid:{s:"4"}},{componentType:"inputField",header:"Posture",name:"posture",obsValueType:"value_text",validation:i.required,grid:{s:"8"}},{grid:{s:"4"}},{componentType:"multiSelectInputField",header:"Blood Glucose Units",name:"blood_glucose_units",obsValueType:"value_text",initialValue:"mmol/l",grid:{s:"4"},options:a},{componentType:"inputField",header:"Patient's Random Blood Glucose",name:"blood_glucose",obsValueType:"value_numeric",validation:s=>{if(!s)return null;const w=Number(s);return w<0||w>1e3?"Must be between 0 and 1000":null},type:"number",grid:{s:"4"}},{grid:{s:"4"}},{componentType:"radioButtonField",header:"Is the patient having Seizures?",name:"active_seizures",obsValueType:"value_text",validation:i.required,type:"standard",grid:{s:"8"},options:[{label:"Yes",value:"Yes"},{label:"No",value:"No"}]}])}},_a=V({__name:"DisabilityAssessment",setup(g){const r=h(null),l=ma().disabilityAssessmentFormSection;return(a,e)=>(Y(),F(p(H),null,{default:f(()=>[c(p(M),null,{default:f(()=>[c(E,{formData:p(l),ref_key:"formRef",ref:r},null,8,["formData"])]),_:1})]),_:1}))}}),ba=()=>({exposureAssessmentFormSection:q(()=>[{componentType:"Heading",name:"Exposure Assessment",grid:{s:"4"}},{componentType:"inputField",header:"Temperature (Â°C)",name:"temperature",obsValueType:"value_numeric",validation:r=>{if(!r)return"Temperature is required";const l=Number(r);return l<20||l>45?"Temperature must be between 20 and 45":null},type:"number",grid:{s:"8"}},{componentType:"Dashes"},{grid:{s:"4"}},{componentType:"Alert",header:"Body Examination",message:"Select areas with rash, injuries and other abnormalities on the body diagrams below",grid:{s:"8"}},{componentType:"Heading",name:"Full Body Assessment",grid:{s:"4"}},{grid:{s:"8"}},{componentType:"Dashes"},{grid:{s:"4"}},{componentType:"textAreaField",header:"Additional Notes",name:"additional_notes",obsValueType:"value_text",grid:{s:"8"}}])}),ya=V({__name:"ExposureAssessment",setup(g){const r=h(null),l=ba().exposureAssessmentFormSection;return(a,e)=>(Y(),F(p(H),null,{default:f(()=>[c(p(M),null,{default:f(()=>[c(E,{formData:p(l),ref_key:"formRef",ref:r},null,8,["formData"])]),_:1})]),_:1}))}}),ga={style:{width:"88vw",margin:"0 auto","margin-top":"10px"}},va={class:"back_profile"},ka=V({__name:"PrimarySurvey",setup(g,{expose:r}){const{onTabBeforeChange:l,currentTabIndex:a}=Xe();oa();const e=xe(),s=Ne();h([]),h([]),h(!1);const w=h(!0),B=h(!1),A=h(!1),$=q(()=>({text:A.value?"Saving...":"Finish",icon:A.value?"hourglass-outline":"checkmark",hideText:!1,hideIcon:!1,disabled:B.value||A.value})),t=te(),b=Pe(),I=qe(),oe=Ve();Ie();const re=ke(),W=ze();He();const le=Me(),de=Q(),ue=Ee(),{patient:_}=x(b),{vitals:ce}=x(t),{investigations:pe}=x(I),{diagnosis:me}=x(oe),{substance:_e}=x(le),{selectedNCDMedicationList:Z}=x(re),{FootScreening:be,visualScreening:ye,cvScreening:ge}=x(de),{sessionDate:X}=x(ue),{apiStatus:ha}=x(Le());S($,(n,o)=>{console.log("Done button options changed:",{from:o,to:n,currentStep:a.value,tabsLength:m.value.length}),n.disabled!==(o==null?void 0:o.disabled)&&console.log("Done button ".concat(n.disabled?"disabled":"enabled")),n.text!==(o==null?void 0:o.text)&&console.log('Done button text changed from "'.concat(o==null?void 0:o.text,'" to "').concat(n.text,'"'))},{deep:!0}),S(A,(n,o)=>{n!==o&&(console.log("Saving state changed: ".concat(o," -> ").concat(n)),console.log(n?"Starting save process...":"Save process completed"))});const ve=n=>{console.log("Done button change received from wizard:",n),n.newOptions.disabled&&console.log("Done button has been disabled"),n.isLastStep&&console.log("User is on the last step, done button should be visible")},L=()=>{let n=!1;return C(),A.value&&(n=!0),B.value=n,!n},he=()=>{e.push("/patientProfile")},U=()=>[{title:"Airway Assessment",icon:""},{title:"Breathing Assessment",icon:""},{title:"Circulation Assessment",icon:""},{title:"Disability Assessment",icon:""},{title:"Exposure Assessment",icon:""}],m=h(U()),Te=h(null),fe=h(null),C=()=>{var u;if(!m.value||m.value.length===0)return console.log("Tabs not yet initialized"),null;const n=a.value>=0&&a.value<m.value.length?a.value:0;switch((u=m.value[n])==null?void 0:u.title){case"Airway Assessment":return"AirwayAssessment";case"Breathing Assessment":return"BreathingAssessment";case"Circulation Assessment":return"CirculationAssessment";case"Disability Assessment":return"DisabilityAssessment";case"Exposure Assessment":return"ExposureAssessment";default:if(W.NCDActivities.length>0)switch(W.NCDActivities[0]){case"Airway Assessment":return"AirwayAssessment";case"Breathing Assessment":return"BreathingAssessment";case"Circulation Assessment":return"CirculationAssessment";case"Disability Assessment":return"DisabilityAssessment";case"Exposure Assessment":return"ExposureAssessment"}return null}},J=()=>{w.value=!1,setTimeout(()=>{a.value=0,w.value=!0},0)},ee=()=>{const n=te();n.setVitals(n.getInitialVitals(_.value.ID))},D=async()=>{var u,T;const n=Ge(X.value,"sessionDate","value")||K.sessionDate(),o=j("vitals");for(let d=0;d<m.value.length;d++){const v=m.value[d];if(v.title==="Vital Signs")m.value[d].icon=O(n,o)?P:"";else if(v.title==="Risk Assessment"){const y=j("substanceAbuse");m.value[d].icon=O(n,y)?P:""}else if(v.title==="Investigations"){const y=(T=(u=_==null?void 0:_.value)==null?void 0:u.labOrders)==null?void 0:T.saved,R=y==null?void 0:y.filter(De=>K.toStandardHisFormat(n)===K.toStandardHisFormat(De.order_date));m.value[d].icon=(R==null?void 0:R.length)>0?P:""}else if(v.title==="Diagnosis"){const y=j("diagnosis");m.value[d].icon=O(n,y)?P:""}else if(v.title==="Complications Screening"){const y=j("screening");m.value[d].icon=O(n,y)?P:""}else v.title==="Treatment Plan"&&(Z.value.length>0?m.value[d].icon=$e()?P:"":m.value[d].icon="")}L()},O=(n,o)=>{const u=new Date(n);return u.setHours(0,0,0,0),o.some(T=>{const d=new Date(T.obs_datetime);return d.setHours(0,0,0,0),d.getTime()===u.getTime()})},Ae=async()=>{var d,v,y,R;const n=[],o=await se(ye.value),u=await sa(be.value),T=await se(ge.value);o.length>0&&n.push({concept_id:await G.getConceptID("Visual acuity",!0),value_text:"visual acuity test",obs_datetime:G.getSessionDate(),child:o}),u.length>0&&n.push({concept_id:await G.getConceptID("Foot check",!0),value_text:"foot screening",obs_datetime:G.getSessionDate(),child:u}),T.length>0&&n.push(...T),n.length>0?((R=(y=(v=(d=_.value).screening)!=null?v:d.screening={}).unsaved)!=null||(y.unsaved=[]),_.value.screening.unsaved.push(...n),Ue("Complications saved successfully")):ie("No complications data to save")},Se=async()=>{const n=Je();if(!ia.isEmpty(n.selectedMedicalAllergiesList)){const T=Ke(),d=n.selectedMedicalAllergiesList.map(y=>({concept_id:y.concept_id,obs_datetime:Qe.getSessionDate(),value_coded:y.concept_id,location_id:T.facilityLocation.code,value_text:y.name})),v=await aa(d);_.value=Object.assign(_.value,v),console.log("Allergies staged successfully:",_.value),n.clearSelectedMedicalAllergiesList()}const o=await ta();_.value=Object.assign(_.value,o);const u=await na().saveNonPharmaTherapyPatientData();_.value=Object.assign(_.value,u)},we=async(n,o)=>{var T,d,v;const u=(T=m.value[o])==null?void 0:T.title;n%1===0&&(a.value=n),u=="Vital Signs"&&((d=Te.value)==null||d.onSubmit()),u=="Risk Assessment"&&((v=fe.value)==null||v.onSubmit()),u=="Complications Screening"&&await Ae(),u=="Treatment Plan"&&await Se(),await ne(_.value)},ae=async()=>{A.value=!0;try{await We(),await ne(_.value),e.push("/triageList")}catch(n){console.error("Error saving data:",n),ie("Error occurred while saving data. Please try again.")}finally{A.value=!1}};return Be(async()=>{if(W.NCDActivities.length===0){e.push("patientProfile");return}Q().resetScreening(),m.value=U(),await D(),(a.value===void 0||a.value<0)&&(a.value=0,console.log("Setting initial tab index to 0")),B.value=!1,A.value=!1,L()}),S(a,async()=>{await L()}),S(ce,async()=>{await D()},{deep:!0}),S(_,async()=>{Q().resetScreening(),await D()},{deep:!0}),S(X,async()=>{await D()},{deep:!0}),S(pe,async()=>{await D()},{deep:!0}),S(me,async()=>{await D()},{deep:!0}),S(_e,async()=>{await D()},{deep:!0}),S(Z,async()=>{await D()},{deep:!0}),S(s,async n=>{J(),ee(),m.value=U()},{deep:!0}),S(_,async(n,o)=>{n.ID!=o.ID&&(J(),ee())},{deep:!0}),r({saveData:ae,markWizard:D,refreshWizard:J,validateDoneButtonState:L}),(n,o)=>(Y(),F(p(Re),null,{default:f(()=>[c(Oe),c(p(Fe),{fullscreen:!0},{default:f(()=>[c(Ze),N("div",ga,[w.value?(Y(),F(ea,{key:0,ref:"wizard",headingTitle:"Primary Survey","vertical-tabs":"","navigable-tabs":"","scrollable-tabs":"",startIndex:0,doneButton:$.value,"custom-tabs":m.value,beforeChange:p(l),onChange:we,"onComplete:wizard":o[1]||(o[1]=u=>ae()),onDoneButtonChanged:ve},{default:f(()=>[N("div",null,[N("div",va,[c(je,{name:"Back to profile",iconSlot:"start",fill:"clear",icon:p(Ce),"font-weight":"600",onClick:o[0]||(o[0]=u=>he())},null,8,["icon"])])]),k(N("div",null,[c(la,{ref:"airwayAssessmentRef"},null,512)],512),[[z,C()=="AirwayAssessment"]]),k(N("div",null,[c(ua,{ref:"breathingAssessmentRef"},null,512)],512),[[z,C()=="BreathingAssessment"]]),k(N("div",null,[c(pa,{ref:"circulationAssessmentRef"},null,512)],512),[[z,C()=="CirculationAssessment"]]),k(N("div",null,[c(_a,{ref:"disabilityAssessmentRef"},null,512)],512),[[z,C()=="DisabilityAssessment"]]),k(N("div",null,[c(ya,{ref:"exposureAssessmentRef"},null,512)],512),[[z,C()=="ExposureAssessment"]])]),_:1},8,["doneButton","custom-tabs","beforeChange"])):Ye("",!0)])]),_:1})]),_:1}))}});export{ka as default};
