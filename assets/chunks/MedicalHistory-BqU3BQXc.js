import{c as T,d as j,r as _,b2 as K,w as $,a as G,n as S,e as J,f as R,l as f,J as m,u as h,aS as W,aR as z,Q as Y,aV as E,O as H,bw as B}from"./vendor-BTebhqHt.js";import{n as D,u as L,z as q,t as F,J as b,b as Q,F as U,_ as V}from"../index-CdDTX_Tr.js";const te=()=>{const w=()=>{};return{medicationsFormSection:T(()=>[{componentType:"checkboxField",header:"Which medications is the woman currently prescribed?",name:"Which medications is the woman currently prescribed?",type:"multiple",twoColumns:!0,options:[{value:"oral prep for hiv",label:"Oral PreP for HIV"},{value:"analgesic",label:"Analgesic"},{value:"anti-consulsive",label:"Anti-consulsive"},{value:"anti-tb",label:"Anti-TB"},{value:"antihelmintic",label:"Antihelmintic"},{value:"antimarials",label:"Antimarials"},{value:"antitussive",label:"Antitussive"},{value:"aspirin",label:"Aspirin"},{value:"calcium",label:"Calcium"},{value:"doxylamine",label:"Doxylamine"},{value:"hematinic",label:"Hematinic"},{value:"iron",label:"Iron"},{value:"metoclopramide",label:"Metoclopramide"},{value:"thyroid medication",label:"Thyroid medication"},{value:"antiacids",label:"Antiacids"},{value:"anti-psychotics",label:"Anti-psychotics"},{value:"anti-diabetic",label:"Anti-diabetic"},{value:"anti-hypertensive",label:"Anti-hypertensive"},{value:"arvs",label:"ARVs"},{value:"antivirals",label:"Antivirals"},{value:"asthamatic",label:"Asthamatic"},{value:"co-trimoxazole",label:"Co-trimoxazole"},{value:"folic acid",label:"Folic acid"},{value:"hemorrhoidal medication",label:"Hemorrhoidal medication"},{value:"magnesium",label:"Magnesium"},{value:"multivitamin",label:"Multivitamin"},{value:"vitamin a",label:"Vitamin A"},{value:"Other",label:"Other"},{value:"None",label:"None"}],grid:{s:"12"},validation:n=>!n||Array.isArray(n)&&n.length===0?"Please select at least one medication or 'None'":null,onChange:(n,a)=>{if(!Array.isArray(n))return{};const e={},i=n[n.length-1];if(i==="None")return e["Which medications is the woman currently prescribed?"]=["None"],e["Other medication notes"]="",e;if(n.includes("None")&&i!=="None"){const t=n.filter(r=>r!=="None");return e["Which medications is the woman currently prescribed?"]=t,t.includes("Other")||(e["Other medication notes"]=""),e}return n.includes("Other")||(e["Other medication notes"]=""),e}},{componentType:"inputField",header:"Specify other medications",name:"Other medication notes",icon:D.editPen,grid:{s:"12"},validation:(n,a)=>{const e=a==null?void 0:a["Which medications is the woman currently prescribed?"];return Array.isArray(e)&&e.includes("Other")&&(!n||n==="")?"Please specify other medications":null},condition:n=>{const a=n["Which medications is the woman currently prescribed?"];return Array.isArray(a)&&a.includes("Other")}}]),resetForm:w}},ie={class:"container"},ne=j({__name:"Medications",setup(w,{expose:A}){const n=te(),a=_(null),e=_(0),i=L(),{patient:t}=K(i);$(()=>{var o;return(o=t.value)==null?void 0:o.patientID},async(o,l)=>{o&&o!==l&&(e.value++,await S())});const r=async()=>{var u,s;if((u=a.value)==null?void 0:u.validateForm())return F("Please fix validation errors before submitting"),!1;const l=((s=a.value)==null?void 0:s.getFormValues())||{};try{const c=await d(l);return c.length===0?(F("No medications data to save"),!1):(await b.addObsToEncounterPatient(c,Q.MEDICATIONS),e.value++,await S(),U("Medications saved successfully"),!0)}catch(c){return F((c==null?void 0:c.message)||"Failed to save medications"),!1}},d=async o=>{const l=[];for(const[u,s]of Object.entries(o))if(!(!s||s===!1||s===""))if(Array.isArray(s))for(const c of s){const N=typeof c=="object"&&c!==null?c.value||c.name:c;N&&N!==""&&l.push(await b.buildValueText(u,String(N)))}else typeof s=="string"||typeof s=="number"?l.push(await b.buildValueText(u,String(s))):typeof s=="boolean"&&s===!0&&l.push(await b.buildValueText("Medication finding",u));return l};G(async()=>{await S()});const g=T(()=>n.medicationsFormSection.value);return A({validateForm:()=>{var o;return(o=a.value)==null?void 0:o.validateForm()},onSubmit:r,resetForm:()=>{e.value++}}),(o,l)=>(R(),J("div",ie,[f(h(B),{class:"section"},{default:m(()=>[f(h(W),null,{default:m(()=>[f(h(z),{class:"sub_item_header"},{default:m(()=>[...l[0]||(l[0]=[Y("Current Medications",-1)])]),_:1})]),_:1}),f(h(E),null,{default:m(()=>[(R(),H(q,{formData:g.value,ref_key:"medicationsFormRef",ref:a,key:e.value},null,8,["formData"]))]),_:1})]),_:1})]))}}),fe=V(ne,[["__scopeId","data-v-41854088"]]),ae=()=>{const w=()=>{},A=T(()=>[{componentType:"Heading",name:"Daily caffeine intake",grid:{s:"12"}},{componentType:"checkboxField",name:"Daily caffeine use",type:"multiple",required:!0,options:[{value:"More than 2 cups of coffee",label:"More than 2 cups of coffee"},{value:"More than 4 cups of tea",label:"More than 4 cups of tea"},{value:"More than 12 bars of chocolate",label:"More than 12 bars of chocolate"},{value:"More than one bottle of soda, energy, soft drink",label:"More than one bottle of soda, energy, soft drink"},{value:"None",label:"None"}],grid:{s:"12"},validation:n=>!n||Array.isArray(n)&&n.length===0?"Please select at least one option for daily caffeine intake":null,onChange:(n,a)=>{if(!Array.isArray(n))return{};const e={},i=n[n.length-1];if(i==="None")return e["Daily caffeine use"]=["None"],e;if(n.includes("None")&&i!=="None"){const t=n.filter(r=>r!=="None");return e["Daily caffeine use"]=t,e}return e}},{grid:{s:"12"},componentType:"Dashes"},{componentType:"Heading",name:"Drug and substance abuse",grid:{s:"12"}},{componentType:"checkboxField",name:"Misuse of drugs",type:"multiple",required:!0,options:[{value:"Recently quit tobacco products",label:"Recently quit tobacco products"},{value:"Exposure to second hand smoke",label:"Exposure to second hand smoke"},{value:"Pica",label:"Pica"},{value:"Alcohol intake",label:"Alcohol intake"},{value:"None",label:"None"}],grid:{s:"12"},validation:n=>!n||Array.isArray(n)&&n.length===0?"Please select at least one option for drug and substance abuse":null,onChange:(n,a)=>{if(!Array.isArray(n))return{};const e={},i=n[n.length-1];if(i==="None")return e["Misuse of drugs"]=["None"],e;if(n.includes("None")&&i!=="None"){const t=n.filter(r=>r!=="None");return e["Misuse of drugs"]=t,e}return e}}]);return{resetForm:w,womanBehaviourFormSection:A}},re={class:"container"},oe=j({__name:"WomanBehaviour",setup(w,{expose:A}){const n=ae(),a=_(null),e=_(0),i=L(),{patient:t}=K(i);$(()=>{var o;return(o=t.value)==null?void 0:o.patientID},async(o,l)=>{o&&o!==l&&(e.value++,await S())});const r=async()=>{if(!a.value)return!1;if(a.value.validateForm())return F("Please fix validation errors before submitting"),!1;const l=a.value.getFormValues();try{const u=await d(l);return u.length===0?(F("No woman behaviour data to save"),!1):(await b.addObsToEncounterPatient(u,Q.WOMAN_BEHAVIOUR),e.value++,await S(),U("Woman behaviour saved successfully"),!0)}catch(u){return F((u==null?void 0:u.message)||"Failed to save woman behaviour data"),!1}},d=async o=>{const l=[];for(const[u,s]of Object.entries(o))if(!(!s||s===!1||s===""))if(Array.isArray(s))for(const c of s){const N=typeof c=="object"&&c!==null?c.value||c.name:c;N&&N!==""&&l.push(await b.buildValueText(u,String(N)))}else typeof s=="string"||typeof s=="number"?l.push(await b.buildValueText(u,String(s))):typeof s=="boolean"&&s===!0&&l.push(await b.buildValueText("Behaviour finding",u));return l};G(async()=>{await S()});const g=T(()=>n.womanBehaviourFormSection.value);return A({validateForm:()=>{var o;return(o=a.value)==null?void 0:o.validateForm()},onSubmit:r,resetForm:()=>{e.value++}}),(o,l)=>(R(),J("div",re,[f(h(B),{class:"section"},{default:m(()=>[f(h(E),null,{default:m(()=>[(R(),H(q,{formData:g.value,ref_key:"formRef",ref:a,key:e.value},null,8,["formData"]))]),_:1})]),_:1})]))}}),me=V(oe,[["__scopeId","data-v-434b6dcd"]]),se=()=>{const w=()=>{},A=T(()=>[{componentType:"checkboxField",name:"past surgeries",type:"multiple",twoColumns:!0,options:[{value:"dilation and currettage",label:"Dilation and currettage"},{value:"myomectomy",label:"Myomectomy"},{value:"removal of ovarian cyst",label:"Removal of ovarian cyst"},{value:"oophorectomy",label:"Oophorectomy"},{value:"salpingectomy",label:"Salpingectomy"},{value:"cervical cone",label:"Cervical cone"},{value:"Other",label:"Other"},{value:"None",label:"None"}],grid:{s:"12",md:"6"},onChange:(e,i)=>{if(!Array.isArray(e))return{};const t={},r=e[e.length-1];if(r==="None")return t["past surgeries"]=["None"],t["Other surgery notes"]="",t;if(e.includes("None")&&r!=="None"){const d=e.filter(g=>g!=="None");return t["past surgeries"]=d,d.includes("Other")||(t["Other surgery notes"]=""),t}return e.includes("Other")||(t["Other surgery notes"]=""),t}},{componentType:"inputField",header:"Specify other surgery",name:"Other surgery notes",icon:D.editPen,required:!0,twoColumns:!0,grid:{s:"12"},validation:(e,i)=>{const t=i==null?void 0:i["past surgeries"];return Array.isArray(t)&&t.includes("Other")&&(!e||e==="")?"Please specify other surgery":null},condition:e=>{const i=e["past surgeries"];return Array.isArray(i)&&i.includes("Other")}}]),n=T(()=>[{componentType:"checkboxField",name:"allergies",type:"multiple",twoColumns:!0,options:[{value:"albendazole",label:"Albendazole"},{value:"aluminium-hydroxide",label:"Aluminium-hydroxide"},{value:"calcium",label:"Calcium"},{value:"chamomile",label:"Chamomile"},{value:"folic-acid",label:"Folic-acid"},{value:"ginger",label:"Ginger"},{value:"fish",label:"Fish"},{value:"iron",label:"Iron"},{value:"sulfadoxine-pyrimethamine",label:"Sulfadoxine-Pyrimethamine"},{value:"mebendazole",label:"Mebendazole"},{value:"penicillin",label:"Penicillin"},{value:"prep-tdf",label:"PrEP(TDF)"},{value:"Other",label:"Other"},{value:"None",label:"None"}],grid:{s:"12"},onChange:(e,i)=>{if(!Array.isArray(e))return{};const t={},r=e[e.length-1];if(r==="None")return t.allergies=["None"],t["Other allergy notes"]="",t;if(e.includes("None")&&r!=="None"){const d=e.filter(g=>g!=="None");return t.allergies=d,d.includes("Other")||(t["Other allergy notes"]=""),t}return e.includes("Other")||(t["Other allergy notes"]=""),t}},{componentType:"inputField",header:"Specify other allergy",name:"Other allergy notes",icon:D.editPen,required:!0,grid:{s:"12"},validation:(e,i)=>{const t=i==null?void 0:i.allergies;return Array.isArray(t)&&t.includes("Other")&&(!e||e==="")?"Please specify other allergy":null},condition:e=>{const i=e.allergies;return Array.isArray(i)&&i.includes("Other")}}]),a=T(()=>[{componentType:"checkboxField",name:"chronic conditions",type:"multiple",twoColumns:!0,options:[{value:"auto immune disease",label:"Auto-immune desease"},{value:"asthma",label:"Asthma"},{value:"sickle cell",label:"Sickle cell"},{value:"anemia",label:"Anemia"},{value:"hiv positive",label:"HIV positive"},{value:"thalassemia",label:"Thalassemia"},{value:"gynae cancer",label:"Gynae Cancer"},{value:"ccf",label:"CCF"},{value:"rhd",label:"RHD"},{value:"gestational diabetes",label:"Gestational diabetes"},{value:"diabetes type 1",label:"Diabetes Type 1"},{value:"diabetes type 2",label:"Diabetes Type 2"},{value:"epilepsy",label:"Epilepsy"},{value:"hypertension",label:"Hypertension"},{value:"kidney disease",label:"Kidney Disease"},{value:"tb",label:"TB"},{value:"mental illness",label:"Mental illness"},{value:"Other",label:"Other"},{value:"None",label:"None"}],grid:{s:"12",md:"6"},onChange:(e,i)=>{if(!Array.isArray(e))return{};const t={},r=e[e.length-1];if(r==="None")return t["chronic conditions"]=["None"],t["Other chronic notes"]="",t["HIV test date"]="",t["Is client on ART?"]="",t["Art number"]="",t["facility for art"]="",t;if(e.includes("None")&&r!=="None"){const d=e.filter(g=>g!=="None");return t["chronic conditions"]=d,d.includes("hiv positive")||(t["HIV test date"]="",t["Is client on ART?"]="",t["Art number"]="",t["facility for art"]=""),d.includes("Other")||(t["Other chronic notes"]=""),t}return e.includes("hiv positive")||(t["HIV test date"]="",t["Is client on ART?"]="",t["Art number"]="",t["facility for art"]=""),e.includes("Other")||(t["Other chronic notes"]=""),t}},{componentType:"inputField",header:"Specify other chronic conditions",name:"Other chronic notes",icon:D.editPen,required:!0,grid:{s:"12"},validation:(e,i)=>{const t=i==null?void 0:i["chronic conditions"];return Array.isArray(t)&&t.includes("Other")&&(!e||e==="")?"Please specify other chronic conditions":null},condition:e=>{const i=e["chronic conditions"];return Array.isArray(i)&&i.includes("Other")}},{grid:{s:"12"},componentType:"Dashes"},{componentType:"dateInputField",header:"HIV test date*",name:"HIV test date",icon:D.calenderPrimary,required:!0,grid:{s:"12",md:"6"},validation:(e,i)=>{const t=i==null?void 0:i["chronic conditions"];return Array.isArray(t)&&t.includes("hiv positive")&&(!e||e==="")?"HIV test date is required":null},condition:e=>{const i=e["chronic conditions"];return Array.isArray(i)&&i.includes("hiv positive")}},{componentType:"radioButtonField",header:"Is the client on ART?*",name:"Is client on ART?",required:!0,options:[{value:"Yes",label:"Yes"},{value:"No",label:"No"}],grid:{s:"12",md:"6"},validation:(e,i)=>{const t=i==null?void 0:i["chronic conditions"];return Array.isArray(t)&&t.includes("hiv positive")&&(!e||e==="")?"Please specify if client is on ART":null},condition:e=>{const i=e["chronic conditions"];return Array.isArray(i)&&i.includes("hiv positive")},onChange:(e,i)=>{const t={};return e==="No"&&(t["Art number"]="",t["facility for art"]=""),t}},{grid:{s:"12"},componentType:"Dashes"},{componentType:"inputField",header:"ART number*",name:"Art number",icon:D.editPen,required:!0,grid:{s:"6"},validation:(e,i)=>{const t=i==null?void 0:i["chronic conditions"],r=i==null?void 0:i["Is client on ART"];return Array.isArray(t)&&t.includes("hiv positive")&&r==="Yes"&&(!e||e==="")?"ART number is required":null},condition:e=>{const i=e["chronic conditions"],t=e["Is client on ART?"];return Array.isArray(i)&&i.includes("hiv positive")&&t==="Yes"}},{componentType:"inputField",header:"Facility for ART*",name:"facility for art",icon:D.search,required:!0,grid:{s:"12",md:"6"},validation:(e,i)=>{const t=i==null?void 0:i["chronic conditions"],r=i==null?void 0:i["Is client on ART?"];return Array.isArray(t)&&t.includes("hiv positive")&&r==="Yes"&&(!e||e==="")?"Facility for ART is required":null},condition:e=>{const i=e["chronic conditions"],t=e["Is client on ART?"];return Array.isArray(i)&&i.includes("hiv positive")&&t==="Yes"}}]);return{resetForm:w,pastSurgeriesFormSection:A,allergiesFormSection:n,chronicConditionsFormSection:a}},le={class:"container"},ce=j({__name:"MedicalHistory",setup(w,{expose:A}){const n=se(),a=_(null),e=_(null),i=_(null),t=_(0),r=_(0),d=_(0),g=L(),{patient:o}=K(g);$(()=>{var v;return(v=o.value)==null?void 0:v.patientID},async(v,y)=>{v&&v!==y&&(t.value++,r.value++,d.value++,await S())});const l=async()=>{var p,C,M,X,Z,ee;const v=(p=a.value)==null?void 0:p.validateForm(),y=(C=e.value)==null?void 0:C.validateForm(),P=(M=i.value)==null?void 0:M.validateForm();if(v||y||P)return F("Please fix validation errors before submitting"),!1;const O=((X=a.value)==null?void 0:X.getFormValues())||{},I=((Z=e.value)==null?void 0:Z.getFormValues())||{},x=((ee=i.value)==null?void 0:ee.getFormValues())||{};try{const k=await u(O,I,x);return k.length===0?(F("No medical history data to save"),!1):(await b.addObsToEncounterPatient(k,Q.MEDICAL_HISTORY),t.value++,r.value++,d.value++,await S(),U("Medical history saved successfully"),!0)}catch(k){return console.error("Error details:",k),F((k==null?void 0:k.message)||"Failed to save medical history"),!1}},u=async(v,y,P)=>{const O=[],I={...v,...y,...P};for(const[x,p]of Object.entries(I))if(!(!p||p===!1||p===""))if(Array.isArray(p))for(const C of p){const M=typeof C=="object"&&C!==null?C.value||C.name:C;M&&M!==""&&M!=="None"&&O.push(await b.buildValueText(x,String(M)))}else typeof p=="string"||typeof p=="number"?O.push(await b.buildValueText(x,String(p))):typeof p=="boolean"&&p===!0&&O.push(await b.buildValueText("Medical history finding",x));return O};G(async()=>{await S()});const s=T(()=>n.pastSurgeriesFormSection.value),c=T(()=>n.allergiesFormSection.value),N=T(()=>n.chronicConditionsFormSection.value);return A({validateForm:()=>{var O,I,x;const v=(O=a.value)==null?void 0:O.validateForm(),y=(I=e.value)==null?void 0:I.validateForm(),P=(x=i.value)==null?void 0:x.validateForm();return v||y||P},onSubmit:l,resetForm:()=>{t.value++,r.value++,d.value++}}),(v,y)=>(R(),J("div",le,[f(h(B),{class:"section"},{default:m(()=>[f(h(W),null,{default:m(()=>[f(h(z),{class:"sub_item_header"},{default:m(()=>[...y[0]||(y[0]=[Y("Past Medical and Surgical History",-1)])]),_:1})]),_:1}),f(h(E),null,{default:m(()=>[(R(),H(q,{formData:s.value,ref_key:"surgeriesFormRef",ref:a,key:t.value},null,8,["formData"]))]),_:1})]),_:1}),f(h(B),{class:"section"},{default:m(()=>[f(h(W),null,{default:m(()=>[f(h(z),{class:"sub_item_header"},{default:m(()=>[...y[1]||(y[1]=[Y("Allergies",-1)])]),_:1})]),_:1}),f(h(E),null,{default:m(()=>[(R(),H(q,{formData:c.value,ref_key:"allergiesFormRef",ref:e,key:r.value},null,8,["formData"]))]),_:1})]),_:1}),f(h(B),{class:"section"},{default:m(()=>[f(h(W),null,{default:m(()=>[f(h(z),{class:"sub_item_header"},{default:m(()=>[...y[2]||(y[2]=[Y("Existing Chronic Health Conditions",-1)])]),_:1})]),_:1}),f(h(E),null,{default:m(()=>[(R(),H(q,{formData:N.value,ref_key:"chronicFormRef",ref:i,key:d.value},null,8,["formData"]))]),_:1})]),_:1})]))}}),he=V(ce,[["__scopeId","data-v-be233b2a"]]);export{he as M,me as W,fe as a};
