import{d as F,aF as U,r as _,c as b,a as V,G as P,Q as H,f as L,H as h,l as e,u as n,L as T,k as t,bU as q,dq as g,p as E,I as G,b6 as Y,bt as z,bq as K}from"./vendor-CJ2tyHrn.js";import{aY as Q,u as R,T as W,F as l,o as $,K as j,x as J,bM as X,S as Z,t as S,G as tt,_ as et}from"../index-CPIhguZJ.js";import{D as at}from"./DemographicBar-CVlkGgKM.js";import{u as nt,L as ot,N as st}from"./NextAppointmentModal-AQowm71F.js";import{S as it}from"./SaveProgressModal-Bs8SOcXY.js";import{f as ct}from"./formatServerData-C4-2caW3.js";import"./lodash-NJiRuGo9.js";import"./apexcharts-BtvCa6MI.js";import"./BasicForm-BEa7BD3q.js";import"./DateInputField-BPowwEHU.js";class lt extends Q{constructor(i,o){super(i,7,o)}}const rt={class:"main-container"},pt={class:"status-card"},ut={class:"back-wrapper"},dt={class:"appointment-info"},mt={class:"icon-circle"},vt={class:"text-group"},ft={class:"action-grid"},_t={class:"grid-item main-action"},bt={class:"grid-item"},ht={class:"grid-item"},gt={class:"landing-wrapper"},St=F({__name:"ANCHome",props:{backBtn:{default:"Back to profile"},backUrl:{default:""},contact:{default:""}},setup(r){const i=r,o=U(),d=nt(),C=R(),c=_(!1),p=_(""),m=b(()=>d.nextAppointmentDate),v=b(()=>C.patient),k=()=>{i.backUrl?o.push(i.backUrl):$(it)},A=async()=>{const s=await j.getFirstObsValue(v.value.patientID,"Appointment date","value_text");p.value=s},x=async()=>[...await ct(m.value)],D=async()=>{if(m.value.length>=0){const s=Z.getUserID(),a=new lt(v.value.patientID,s);if(!await a.createEncounter())return S("Unable to create appointment date encounter");if(!await a.saveObservationList(await x()))return S("Unable to create date!");tt("Client has been scheduled for next contact")}},w=async()=>{if(!await d.validate()){J("Next appointment date has errors");return}await D(),u(),await o.push("ANCHome"),await X()},N=()=>{u()},B=()=>{M()},M=()=>{c.value=!c.value},u=()=>{c.value=!1},I=()=>{o.push("/contacts")},O=()=>{o.push("/contact")};return V(()=>{A()}),(s,a)=>{const f=P("ion-icon");return L(),H(n(K),null,{default:h(()=>[e(W),e(n(T),{fullscreen:!0,class:"ion-padding-bottom"},{default:h(()=>[e(at),t("div",rt,[t("div",pt,[t("div",ut,[e(l,{name:r.backBtn,iconSlot:"start",fill:"clear",icon:n(q),onClick:a[0]||(a[0]=y=>k()),class:"back-btn-custom"},null,8,["name","icon"])]),t("div",dt,[t("div",mt,[e(f,{icon:n(g)},null,8,["icon"])]),t("div",vt,[a[1]||(a[1]=t("span",{class:"label"},"Next Appointment",-1)),t("span",{class:E(["value",{"no-date":!p.value}])},G(p.value||"Not scheduled"),3)])])]),t("div",ft,[t("div",_t,[e(l,{name:"New ANC Contact",iconSlot:"start",fill:"solid",icon:n(Y),onClick:O,class:"cta-button"},null,8,["icon"])]),t("div",bt,[e(l,{name:"View Contacts",iconSlot:"start",fill:"outline",icon:n(z),onClick:I,class:"sub-button"},null,8,["icon"])]),t("div",ht,[e(l,{name:"Schedule Contact",iconSlot:"start",fill:"outline",icon:n(g),onClick:B,class:"sub-button"},null,8,["icon"])])]),a[2]||(a[2]=t("div",{class:"content-divider"},[t("span",null,"Patient Overview")],-1)),t("div",gt,[e(ot)])]),e(st,{isOpen:c.value,title:"",closeModalFunc:u,onYes:w,onNo:N},null,8,["isOpen"])]),_:1})]),_:1})}}}),Ot=et(St,[["__scopeId","data-v-cd8ea696"]]);export{Ot as default};
