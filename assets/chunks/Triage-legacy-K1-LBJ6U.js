System.register(["./vendor-legacy-CdypqbXP.js","../index-legacy-a_4iRUcf.js","./DemographicBar-legacy-CxKOxyu2.js","./Vitals-legacy-CC-GByE0.js","./LevelOfConsciousness.vue_vue_type_script_setup_true_lang-legacy-UAip8EkQ.js","./previousComplaints-legacy-BjYUy8nf.js","./patient_complaints_service-legacy-CZHdfWSM.js","./DashBox-legacy-DFW12oy_.js","./useFormWizard-legacy-DczO6gxA.js","./ComplicationsStore-legacy-C6kh9Gm4.js","./nonPharmaTherapyStore-legacy-CIos6l4G.js","./lodash-legacy-pOOc9Efu.js","./formatServerData-legacy-Yp36q8Ko.js","./usePatientProfile-legacy-CTY7g2IJ.js","./apexcharts-legacy-DPlv51y0.js","./drug_prescription_service-legacy-Bt1zalX2.js","./patient_diagnosis_service-legacy-B6wTHM2k.js","./Registration-legacy-y0qunijT.js","./useSetRegistrationValues-legacy-BX1Hth6U.js","./useLocation-legacy-jbXTMHh3.js","./vaccines_service-legacy-BnD5h3GQ.js","./sms_service-legacy-BEUUNZXG.js","./EIRreportsStore-legacy-CgG4vUEp.js","./Export-legacy-CIpkoeO6.js","./user_role_management-legacy-EpDa5FhZ.js","./useNeonatalEnrollmentStore-legacy-DHZSAMR0.js","./enrollment-legacy-BWFKsMdA.js","./Outcome-legacy-DPqvv6wS.js","./wardsStore-legacy-Dp7v843R.js"],function(e,a){"use strict";var n,t,i,l,o,s,r,u,d,c,p,v,g,m,_,y,b,h,f,T,C,D,S,w,Y,x,P,B,N,k,V,F,j,O,R,A,H,q,L,I,E,z,M,W,G,$,U,Q,Z,J,K,X,ee,ae,ne,te,ie,le,oe,se,re,ue,de,ce,pe,ve,ge,me,_e,ye,be,he,fe,Te,Ce,De,Se,we,Ye;return{setters:[e=>{n=e.c,t=e.d,i=e.r,l=e.O,o=e.f,s=e.u,r=e.bw,u=e.J,d=e.l,c=e.aV,p=e.b2,v=e.a,g=e.H,m=e.e,_=e.m,y=e.k,b=e.a6,h=e.Q,f=e.F,T=e.am,C=e.cr,D=e.w,S=e.ab,w=e.i,Y=e.bT,x=e.v,P=e.ae,B=e.ba},e=>{N=e.x,k=e.z,V=e.n,F=e.y,j=e.aY,O=e.D,R=e.a0,A=e.S,H=e.F,q=e.b,L=e.t,I=e.Z,E=e._,z=e.b8,M=e.u,W=e.b9,G=e.ba,$=e.b0,U=e.bb,Q=e.e,Z=e.b1,J=e.i,K=e.a7,X=e.f,ee=e.T,ae=e.a1,ne=e.H,te=e.b3,ie=e.bc,le=e.C,oe=e.bd,se=e.an,re=e.be,ue=e.a9},e=>{de=e.D},e=>{ce=e.V},e=>{pe=e._},e=>{ve=e.u,ge=e.p},e=>{me=e.P},e=>{_e=e.D},e=>{ye=e.u,be=e._},e=>{he=e.u},e=>{fe=e.s,Te=e.c,Ce=e.u},e=>{De=e.l},e=>{Se=e.f,we=e.a},e=>{Ye=e.u},null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],execute:function(){var a=document.createElement("style");a.textContent=".vitals_title[data-v-ea5c124d]{border-bottom:1px solid #b3b3b3;margin-bottom:50px}.input-with-icon[data-v-ea5c124d]{position:relative}.input-icon[data-v-ea5c124d]{position:absolute;left:10px;top:50%;transform:translateY(-50%);color:gray}ion-col[data-v-ea5c124d]{padding-bottom:15px}h5[data-v-ea5c124d]{margin-top:0;text-overflow:ellipsis;white-space:nowrap;overflow:hidden}.previousView[data-v-ea5c124d]{margin-top:70px;margin-bottom:20px}\n/*$vite$:1*/",document.head.appendChild(a);const xe=t({__name:"AirwayBreathing",setup(e){const a=i(null),t=n(()=>[{componentType:"Heading",name:"Airway and Breathing",grid:{s:"4"}},{componentType:"radioButtonField",header:"is Airway Compromised",name:"is_airway_compromised",obsValueType:"value_text",validation:N.required,type:"standard",grid:{s:"4"},options:[{label:"Yes",value:"Yes"},{label:"No",value:"No"}]},{componentType:"radioButtonField",header:"is Breathing Abnormal?",name:"is_breathing_abnormal",obsValueType:"value_text",validation:N.required,type:"standard",grid:{s:"4"},options:[{label:"Yes",value:"Yes"},{label:"No",value:"No"}]},{componentType:"Dashes",condition:e=>"Yes"===e.is_breathing_abnormal},{componentType:"Heading",name:"Exhaustion and Inability to Speak",grid:{s:"4"},condition:e=>"Yes"===e.is_breathing_abnormal},{componentType:"radioButtonField",header:"Severe Respiratory dysfunction or exhaustion ",name:"severe_respiratory_dysfunction_or_exhaustion",obsValueType:"value_text",validation:N.required,type:"standard",grid:{s:"4"},condition:e=>"Yes"===e.is_breathing_abnormal,options:[{label:"Yes",value:"Yes"},{label:"No",value:"No"}]},{componentType:"radioButtonField",header:"Inability to speak in complete sentences ",name:"inability_to_speak_in_complete_sentences",obsValueType:"value_text",validation:N.required,type:"standard",grid:{s:"4"},condition:e=>"Yes"===e.is_breathing_abnormal,options:[{label:"Yes",value:"Yes"},{label:"No",value:"No"}]},{componentType:"Dashes",condition:e=>"Yes"===e.is_breathing_abnormal},{componentType:"Heading",name:"Stridor and Reduced Consciousness",grid:{s:"4"},condition:e=>"Yes"===e.is_breathing_abnormal},{componentType:"radioButtonField",header:"Stridor",name:"stridor",obsValueType:"value_text",validation:N.required,type:"standard",grid:{s:"4"},condition:e=>"Yes"===e.is_breathing_abnormal,options:[{label:"Yes",value:"Yes"},{label:"No",value:"No"}]},{componentType:"radioButtonField",header:"Reduced Level of Consciousness due to low oxygen",name:"reduced_level_of_consciousness_due_to_low_oxygen",obsValueType:"value_text",validation:N.required,type:"standard",grid:{s:"4"},condition:e=>"Yes"===e.is_breathing_abnormal,options:[{label:"Yes",value:"Yes"},{label:"No",value:"No"}]}]);return(e,n)=>(o(),l(s(r),null,{default:u(()=>[d(s(c),null,{default:u(()=>[d(k,{formData:s(t),ref_key:"formRef",ref:a},null,8,["formData"])]),_:1})]),_:1}))}}),Pe=t({__name:"BloodCirculation",setup(e){const a=i(null),t=n(()=>[{componentType:"Heading",name:"Circulation",grid:{s:"4"}},{componentType:"radioButtonField",header:"Is Circulation Abnormal",name:"is_circulation_abnormal",obsValueType:"value_text",validation:N.required,type:"standard",grid:{s:"4"},options:[{label:"Yes",value:"Yes"},{label:"No",value:"No"}]},{componentType:"Dashes",condition:e=>"Yes"===e.is_circulation_abnormal},{componentType:"Heading",name:"Heart Rate and Pulse",grid:{s:"4"},condition:e=>"Yes"===e.is_circulation_abnormal},{componentType:"radioButtonField",header:"Heart Rate",name:"heart_rate",obsValueType:"value_text",validation:N.required,type:"standard",grid:{s:"4"},condition:e=>"Yes"===e.is_circulation_abnormal,options:[{label:"Weak/Thready",value:"Weak/Thready"},{label:"Strong",value:"Strong"}]},{componentType:"radioButtonField",header:"Pulse Rate",name:"pulse_rate",obsValueType:"value_text",validation:N.required,type:"standard",grid:{s:"4"},condition:e=>"Yes"===e.is_circulation_abnormal,options:[{label:"Irregular",value:"Irregular"},{label:"Regular",value:"Regular"}]},{componentType:"Dashes",condition:e=>"Yes"===e.is_circulation_abnormal},{componentType:"Heading",name:"Reduced Urinary and Clammy Peripherals",grid:{s:"4"},condition:e=>"Yes"===e.is_circulation_abnormal},{componentType:"radioButtonField",header:"Reduced urinary output < 30ml/hr",name:"reduced_urinary_output_less_than_30ml_per_hr",obsValueType:"value_text",validation:N.required,type:"standard",grid:{s:"4"},condition:e=>"Yes"===e.is_circulation_abnormal,options:[{label:"Yes",value:"Yes"},{label:"No",value:"No"}]},{componentType:"radioButtonField",header:"Cool clammy peripherals or cap refill > 4 seconds",name:"cool_clammy_peripherals_or_cap_refill_greater_than_4_seconds",obsValueType:"value_text",validation:N.required,type:"standard",grid:{s:"4"},condition:e=>"Yes"===e.is_circulation_abnormal,options:[{label:"Yes",value:"Yes"},{label:"No",value:"No"}]},{componentType:"Dashes",condition:e=>"Yes"===e.is_circulation_abnormal},{componentType:"Heading",name:"Hemorrhage and Skin Turgor",grid:{s:"4"},condition:e=>"Yes"===e.is_circulation_abnormal},{componentType:"radioButtonField",header:"Hemorrhage",name:"hemorrhage",obsValueType:"value_text",validation:N.required,type:"standard",grid:{s:"4"},condition:e=>"Yes"===e.is_circulation_abnormal,options:[{label:"Yes",value:"Yes"},{label:"No",value:"No"}]},{componentType:"radioButtonField",header:"Dehydration skin turgor, sunken eyes",name:"dehydration_skin_turgor_sunken_eyes",obsValueType:"value_text",validation:N.required,type:"standard",grid:{s:"4"},condition:e=>"Yes"===e.is_circulation_abnormal,options:[{label:"Yes",value:"Yes"},{label:"No",value:"No"}]}]);return(e,n)=>(o(),l(s(r),null,{default:u(()=>[d(s(c),null,{default:u(()=>[d(k,{formData:s(t),ref_key:"formRef",ref:a},null,8,["formData"])]),_:1})]),_:1}))}}),Be=t({__name:"Disability",setup(e){const a=i(null),t=n(()=>[{componentType:"Heading",name:"Consciousness",grid:{s:"4"}},{componentType:"radioButtonField",header:"Does the patient have a reduced Level of consciousness",name:"is_reduced_level_of_consciousness",obsValueType:"value_text",validation:N.required,type:"standard",grid:{s:"8"},options:[{label:"Yes",value:"Yes"},{label:"No",value:"No"}]},{componentType:"Dashes",condition:e=>"Yes"===e.is_reduced_level_of_consciousness},{componentType:"Heading",name:"Blood Glucose and GCS",grid:{s:"4"},condition:e=>"Yes"===e.is_reduced_level_of_consciousness},{componentType:"inputField",header:"Blood Glucose",name:"blood_glucose",type:"number",grid:{s:"4"},disabled:e=>!0,condition:e=>"Yes"===e.is_reduced_level_of_consciousness},{componentType:"inputField",header:"GCS",name:"gcs",type:"number",grid:{s:"4"},disabled:e=>!0,condition:e=>"Yes"===e.is_reduced_level_of_consciousness}]);return(e,n)=>(o(),l(s(r),null,{default:u(()=>[d(s(c),null,{default:u(()=>[d(k,{formData:s(t),ref_key:"formRef",ref:a},null,8,["formData"])]),_:1})]),_:1}))}}),Ne={key:0},ke={style:{"align-content":"center"}},Ve={class:"ion-padding",slot:"content"},Fe=E(t({__name:"PresentingComplaints",setup(e,{expose:a}){const t=ve(),{presentingComplaints:T}=p(t),C=i(V),D=i(!0),S=i(!1),w=i(!0),Y=i(!1),x=i([]),P=i([]),B=i(),E=n(()=>[{componentType:"multiSelectInputField",header:"Presenting Complaints",name:"PresentingComplaints",trackBy:"concept_id",icon:V.search,hideSelected:!0,validation:e=>W(null==e?void 0:e.name,x.value)?"Presenting complaint already added":N.required(e),options:P.value,grid:{s:"6"}},{componentType:"inputField",header:"Duration",name:"duration",icon:V.time,validation:e=>N.isNotEmptyandNumber(e),grid:{s:"6"},unitOptions:[{label:"Hours",value:"Hours"},{label:"Days",value:"Days"},{label:"Weeks",value:"Weeks"},{label:"Months",value:"Months"},{label:"Years",value:"Years"}],unitValidation:e=>e&&""!==e?null:"Please select a unit."},{componentType:"inputField",header:"Specify the presenting complaint(s)",name:"Other (specify)",icon:V.editPen,validation:e=>W(e,x.value)?"Presenting complaint already added":N.required(e),condition:e=>{var a;return"Other"===(null==e||null===(a=e.PresentingComplaints)||void 0===a?void 0:a.name)}},{componentType:"Alert",condition:e=>{var a;return!(null==N.required(null==e||null===(a=e.PresentingComplaints)||void 0===a?void 0:a.name))},backgroundColor:"lightyellow",textColor:"black",value:"Please search thoroughly for the complaint. If it is not listed, search and select the 'Other' option to specify the complaint.",name:"noMatchAlert"}]),{formRef:z}=F(),M=e=>{var a;const n=e.duration+" "+e.duration_unit,t=e.PresentingComplaints,i="Other"===t.name?e["Other (specify)"]:t.name;x.value.push({actionBtn:!0,btn:["delete"],name:i,concept_id:t.concept_id,duration:t.duration,durationUnits:t.duration_unit,display:[i,n],data:[{concept_id:8578,value_coded:t.concept_id,obs_datetime:A.getSessionDate(),child:[{concept_id:t.concept_id,value_text:n,obs_datetime:A.getSessionDate()}]}]}),null===(a=z.value)||void 0===a||a.resetForm(),Y.value=!0},W=(e,a)=>a.some(a=>a.name===e),G=e=>{x.value=x.value.filter(a=>a.display[0]!==e.name)};return v(async()=>{await(async()=>{P.value=await me.getComplaintsList("Presenting complaint"),R(T.value,"PresentingComplaints","multiSelectData",P.value)})()}),a({onSubmit:async()=>{const e=await H.getObsByEncounterIdAndDate(q.PRESENTING_COMPLAINTS),a=x.value.flatMap(e=>e.data);if(a.length<=0&&e.length<=0)return L("Presenting complaints is required");a.length<=0||(await H.addObsToEncounterPatient(a,q.PRESENTING_COMPLAINTS),I("Presenting complaints saved successful"),x.value=[])}}),(e,a)=>{const n=g("ion-row"),t=g("ion-label"),i=g("ion-accordion"),p=g("ion-accordion-group");return o(),m(f,null,[d(s(r),null,{default:u(()=>[d(s(c),null,{default:u(()=>[d(_e,{status:D.value,content:"No presenting complaints added"},null,8,["status"]),Y.value?(o(),m("span",Ne,[d(j,{listData:x.value,"onClicked:delete":G},null,8,["listData"])])):_("",!0),S.value?(o(),l(n,{key:1},{default:u(()=>[d(k,{formData:E.value,ref_key:"formRef",ref:z},null,8,["formData"]),y("div",ke,[d(O,{fill:"clear",icon:C.value.plus,iconSlot:"icon-only","onClicked:btn":a[0]||(a[0]=e=>(async()=>{var e,a;const n=null===(e=z.value)||void 0===e?void 0:e.getFormValues();null==(null===(a=z.value)||void 0===a?void 0:a.validateForm())&&(M(n),S.value=!1,w.value=!0)})()),name:"Save"},null,8,["icon"])])]),_:1})):_("",!0),w.value?(o(),l(n,{key:2,style:{"margin-top":"10px"}},{default:u(()=>[d(O,{fill:"clear",icon:C.value.plus,iconSlot:"icon-only","onClicked:btn":a[1]||(a[1]=e=>(D.value=!1,w.value=!1,void(S.value=!0))),name:"Add new presenting complaints"},null,8,["icon"])]),_:1})):_("",!0)]),_:1})]),_:1}),d(n,null,{default:u(()=>[d(p,{ref_key:"accordionGroup",ref:B,class:"previousView"},{default:u(()=>[d(i,{value:"first","toggle-icon-slot":"start",style:{"border-radius":"10px","background-color":"#fff"}},{default:u(()=>[d(s(b),{slot:"header",color:"light"},{default:u(()=>[d(t,{class:"previousLabel"},{default:u(()=>[...a[2]||(a[2]=[h("Previous presenting complaints",-1)])]),_:1})]),_:1}),y("div",Ve,[d(ge)])]),_:1})]),_:1},512)]),_:1})],64)}}}),[["__scopeId","data-v-ea5c124d"]]),je=t({__name:"PersistentPain",setup(e){const a=i(null),t=n(()=>[{componentType:"Heading",name:"Seizures and Focal Neurologic",grid:{s:"4"}},{componentType:"radioButtonField",header:"Active Seizures",name:"active_seizures",obsValueType:"value_text",validation:N.required,type:"standard",grid:{s:"4"},options:[{label:"Yes",value:"Yes"},{label:"No",value:"No"}]},{componentType:"radioButtonField",header:"Focal neurologic findings",name:"focal_neurologic_findings",obsValueType:"value_text",validation:N.required,type:"standard",grid:{s:"4"},options:[{label:"Yes",value:"Yes"},{label:"No",value:"No"}]},{componentType:"Dashes"},{componentType:"Heading",name:"Headache and Weakness",grid:{s:"4"}},{componentType:"radioButtonField",header:"Headache",name:"headache",obsValueType:"value_text",validation:N.required,type:"standard",grid:{s:"4"},options:[{label:"Yes",value:"Yes"},{label:"No",value:"No"}]},{componentType:"radioButtonField",header:"Weakness",name:"weakness",obsValueType:"value_text",validation:N.required,type:"standard",grid:{s:"4"},options:[{label:"Yes",value:"Yes"},{label:"No",value:"No"}]},{componentType:"Dashes"},{componentType:"Heading",name:"Severe Pain and Confusion",grid:{s:"4"}},{componentType:"radioButtonField",header:"Severe Pain",name:"severe_pain",obsValueType:"value_text",validation:N.required,type:"standard",grid:{s:"4"},options:[{label:"Yes",value:"Yes"},{label:"No",value:"No"}]},{componentType:"radioButtonField",header:"Confusion",name:"confusion",obsValueType:"value_text",validation:N.required,type:"standard",grid:{s:"4"},options:[{label:"Yes",value:"Yes"},{label:"No",value:"No"}]},{grid:{s:"4"}},{componentType:"radioButtonField",header:"moderate pain or a reason to be seen in under four hours",name:"moderate_pain_or_a_reason_to_be_seen_in_under_four_hours",obsValueType:"value_text",validation:N.required,type:"standard",grid:{s:"8"},options:[{label:"Yes",value:"Yes"},{label:"No",value:"No"}]}]);return(e,n)=>(o(),l(s(r),null,{default:u(()=>[d(s(c),null,{default:u(()=>[d(k,{formData:s(t),ref_key:"formRef",ref:a},null,8,["formData"])]),_:1})]),_:1}))}}),Oe={style:{width:"90vw",margin:"0 auto","margin-top":"10px"}},Re={class:"back_profile"};e("default",t({__name:"Triage",setup(e,{expose:a}){const{onTabBeforeChange:t,currentTabIndex:r}=ye();Ye();const c=T(),g=C();i([]),i([]),i(!1);const m=i(!0),b=i(!1),h=i(!1),f=n(()=>({text:h.value?"Saving...":"Finish",icon:h.value?"hourglass-outline":"checkmark",hideText:!1,hideIcon:!1,disabled:b.value||h.value})),N=z(),k=M(),V=W(),F=G();$();const j=U(),R=Q();Z();const H=J(),q=he(),E=K(),{patient:ve}=p(k),{vitals:ge}=p(N),{investigations:me}=p(V),{diagnosis:_e}=p(F),{substance:Ne}=p(H),{selectedNCDMedicationList:ke}=p(j),{FootScreening:Ve,visualScreening:Ae,cvScreening:He}=p(q),{sessionDate:qe}=p(E),{apiStatus:Le}=p(X());D(f,(e,a)=>{console.log("Done button options changed:",{from:a,to:e,currentStep:r.value,tabsLength:ze.value.length}),e.disabled!==(null==a?void 0:a.disabled)&&console.log("Done button "+(e.disabled?"disabled":"enabled")),e.text!==(null==a?void 0:a.text)&&console.log(`Done button text changed from "${null==a?void 0:a.text}" to "${e.text}"`)},{deep:!0}),D(h,(e,a)=>{e!==a&&(console.log(`Saving state changed: ${a} -> ${e}`),e?console.log("Starting save process..."):console.log("Save process completed"))});const Ie=e=>{console.log("Done button change received from wizard:",e),e.newOptions.disabled&&console.log("Done button has been disabled"),e.isLastStep&&console.log("User is on the last step, done button should be visible")},Ee=()=>{let e=!1;return Ge(),h.value&&(e=!0),b.value=e,!e},ze=i([{title:"Presenting Complaints",icon:""},{title:"Vital Signs",icon:""},{title:"Level Of Consciousness",icon:""},{title:"Airway/Breathing",icon:""},{title:"Blood Circulation",icon:""},{title:"Disability",icon:""},{title:"Persistent Pain/Other Concerns",icon:""}]),Me=i(null),We=i(null);i(null),i(null),i(null),i(null),i(null);const Ge=()=>{var e;if(!ze.value||0===ze.value.length)return console.log("Tabs not yet initialized"),null;const a=r.value>=0&&r.value<ze.value.length?r.value:0;switch(null===(e=ze.value[a])||void 0===e?void 0:e.title){case"Presenting Complaints":return"PresentingComplaints";case"Vital Signs":return"Vitals";case"Level Of Consciousness":return"LevelOfConsciousness";case"Airway/Breathing":return"AirwayBreathing";case"Blood Circulation":return"BloodCirculation";case"Disability":return"Disability";case"Persistent Pain/Other Concerns":return"Persistent";default:if(R.NCDActivities.length>0)switch(R.NCDActivities[0]){case"Presenting Complaints":return"PresentingComplaints";case"Vital Signs":return"Vitals";case"Level Of Consciousness":return"LevelOfConsciousness";case"Airway/Breathing":return"Airway/Breathing";case"Blood Circulation":return"BloodCirculation";case"Disability":return"Disability";case"Persistent Pain/Other Concerns":return"Persistent"}return null}},$e=()=>{m.value=!1,setTimeout(()=>{r.value=0,m.value=!0},0)},Ue=()=>{const e=z();e.setVitals(e.getInitialVitals(ve.value.ID))},Qe=async()=>{const e=ae(qe.value,"sessionDate","value")||ne.sessionDate(),a=te("vitals");for(let t=0;t<ze.value.length;t++){const i=ze.value[t];if("Vital Signs"===i.title)ze.value[t].icon=Ze(e,a)?B:"";else if("Risk Assessment"===i.title){const a=te("substanceAbuse");ze.value[t].icon=Ze(e,a)?B:""}else if("Investigations"===i.title){var n;const a=null==ve||null===(n=ve.value)||void 0===n||null===(n=n.labOrders)||void 0===n?void 0:n.saved,i=null==a?void 0:a.filter(a=>ne.toStandardHisFormat(e)===ne.toStandardHisFormat(a.order_date));ze.value[t].icon=(null==i?void 0:i.length)>0?B:""}else if("Diagnosis"===i.title){const a=te("diagnosis");ze.value[t].icon=Ze(e,a)?B:""}else if("Complications Screening"===i.title){const a=te("screening");ze.value[t].icon=Ze(e,a)?B:""}else"Treatment Plan"===i.title&&(ke.value.length>0?ze.value[t].icon=ie()?B:"":ze.value[t].icon="")}Ee()},Ze=(e,a)=>{const n=new Date(e);return n.setHours(0,0,0,0),a.some(e=>{const a=new Date(e.obs_datetime);return a.setHours(0,0,0,0),a.getTime()===n.getTime()})},Je=async(e,a)=>{var n;const t=null===(n=ze.value[a])||void 0===n?void 0:n.title;var i,l;e%1==0&&(r.value=e),"Vital Signs"==t&&(null===(i=Me.value)||void 0===i||i.onSubmit()),"Risk Assessment"==t&&(null===(l=We.value)||void 0===l||l.onSubmit()),"Complications Screening"==t&&await(async()=>{const e=[],a=await Se(Ae.value),n=await we(Ve.value),t=await Se(He.value);var i,l,o,s;a.length>0&&e.push({concept_id:await se.getConceptID("Visual acuity",!0),value_text:"visual acuity test",obs_datetime:se.getSessionDate(),child:a}),n.length>0&&e.push({concept_id:await se.getConceptID("Foot check",!0),value_text:"foot screening",obs_datetime:se.getSessionDate(),child:n}),t.length>0&&e.push(...t),e.length>0?(null!==(l=(i=null!==(s=(o=ve.value).screening)&&void 0!==s?s:o.screening={}).unsaved)&&void 0!==l||(i.unsaved=[]),ve.value.screening.unsaved.push(...e),I("Complications saved successfully")):L("No complications data to save")})(),"Treatment Plan"==t&&await(async()=>{const e=re();if(!De.isEmpty(e.selectedMedicalAllergiesList)){const a=ue(),n=e.selectedMedicalAllergiesList.map(e=>({concept_id:e.concept_id,obs_datetime:A.getSessionDate(),value_coded:e.concept_id,location_id:a.facilityLocation.code,value_text:e.name})),t=await fe(n);ve.value=Object.assign(ve.value,t),console.log("Allergies staged successfully:",ve.value),e.clearSelectedMedicalAllergiesList()}const a=await Te();ve.value=Object.assign(ve.value,a);const n=await Ce().saveNonPharmaTherapyPatientData();ve.value=Object.assign(ve.value,n)})(),await le(ve.value)},Ke=async()=>{h.value=!0;try{await oe(),await le(ve.value),c.push("/triageList")}catch(e){console.error("Error saving data:",e),L("Error occurred while saving data. Please try again.")}finally{h.value=!1}};return v(async()=>{0!==R.NCDActivities.length?(he().resetScreening(),ze.value=[{title:"Presenting Complaints",icon:""},{title:"Vital Signs",icon:""},{title:"Level Of Consciousness",icon:""},{title:"Airway/Breathing",icon:""},{title:"Blood Circulation",icon:""},{title:"Disability",icon:""},{title:"Persistent Pain/Other Concerns",icon:""}],await Qe(),(void 0===r.value||r.value<0)&&(r.value=0,console.log("Setting initial tab index to 0")),b.value=!1,h.value=!1,Ee()):c.push("patientProfile")}),D(r,async()=>{await Ee()}),D(ge,async()=>{await Qe()},{deep:!0}),D(ve,async()=>{he().resetScreening(),await Qe()},{deep:!0}),D(qe,async()=>{await Qe()},{deep:!0}),D(me,async()=>{await Qe()},{deep:!0}),D(_e,async()=>{await Qe()},{deep:!0}),D(Ne,async()=>{await Qe()},{deep:!0}),D(ke,async()=>{await Qe()},{deep:!0}),D(g,async e=>{$e(),Ue(),ze.value=[{title:"Presenting Complaints",icon:""},{title:"Vital Signs",icon:""},{title:"Level Of Consciousness",icon:""},{title:"Airway/Breathing",icon:""},{title:"Blood Circulation",icon:""},{title:"Disability",icon:""},{title:"Persistent Pain/Other Concerns",icon:""}]},{deep:!0}),D(ve,async(e,a)=>{e.ID!=a.ID&&($e(),Ue())},{deep:!0}),a({saveData:Ke,markWizard:Qe,refreshWizard:$e,validateDoneButtonState:Ee}),(e,a)=>(o(),l(s(P),null,{default:u(()=>[d(ee),d(s(S),{fullscreen:!0},{default:u(()=>[d(de),y("div",Oe,[m.value?(o(),l(be,{key:0,ref:"wizard",headingTitle:"Triage","vertical-tabs":"","navigable-tabs":"","scrollable-tabs":"",startIndex:0,doneButton:f.value,"custom-tabs":ze.value,beforeChange:s(t),onChange:Je,"onComplete:wizard":a[1]||(a[1]=e=>Ke()),onDoneButtonChanged:Ie},{default:u(()=>[y("div",null,[y("div",Re,[d(O,{name:"Back to triage list",iconSlot:"start",fill:"clear",icon:s(Y),"font-weight":"600",onClick:a[0]||(a[0]=e=>{c.push("/triageList")})},null,8,["icon"])])]),w(y("div",null,[d(Fe,{ref:"presentingComplaintsRef"},null,512)],512),[[x,"PresentingComplaints"==Ge()]]),w(y("div",null,[d(ce,{ref_key:"vitalsRef",ref:Me},null,512)],512),[[x,"Vitals"==Ge()]]),w(y("div",null,[d(pe,{ref:"levelOfConsciousnessRef"},null,512)],512),[[x,"LevelOfConsciousness"==Ge()]]),w(y("div",null,[d(xe,{ref:"airwayBreathingRef"},null,512)],512),[[x,"AirwayBreathing"==Ge()]]),w(y("div",null,[d(Pe,{ref:"bloodCirculationRef"},null,512)],512),[[x,"BloodCirculation"==Ge()]]),w(y("div",null,[d(Be,{ref:"disabilityRef"},null,512)],512),[[x,"Disability"==Ge()]]),w(y("div",null,[d(je,{ref:"persistentRef"},null,512)],512),[[x,"Persistent"==Ge()]])]),_:1},8,["doneButton","custom-tabs","beforeChange"])):_("",!0)])]),_:1})]),_:1}))}}))}}});
