System.register(["./vendor-legacy-BV-WGgzk.js","../index-legacy-qZ3WdbT2.js","./NeonatalStepper-legacy-o9w6HIbW.js","./neonatal_service-legacy-DrxC7Fzm.js","./lodash-legacy-pOOc9Efu.js","./apexcharts-legacy-CgZ9vWXi.js","./SaveProgressModal-legacy-BP4ET2UM.js","./images-legacy-gTS9vAYU.js","./enrollment-legacy-BWFKsMdA.js"],function(e,a){"use strict";var t,n,l,o,i,r,u,s,c,m,d,v,p,f,g,y,S,_,h,N,V,b,T,I,F,A,D,w,O,E,x,R,M,P,C;return{setters:[e=>{t=e.d,n=e.r,l=e.eR,o=e.c,i=e.b,r=e.w,u=e.e,s=e.f,c=e.k,m=e.l,d=e.K,v=e.u,p=e.D,f=e.a3,g=e.a6,y=e.an,S=e.aU,_=e.eS,h=e.H,N=e.O,V=e.J},e=>{b=e.aD,T=e._,I=e.T,F=e.u,A=e.aY,D=e.t,w=e.ag,O=e.ch,E=e.G},e=>{x=e.a,R=e.b,M=e.d,P=e.N},e=>{C=e.N},null,null,null,null,null],execute:function(){var a=document.createElement("style");a.textContent=".neonatal-vitals-section[data-v-19d42943]{display:flex;flex-direction:column;gap:1rem}.respiratory-timer-card[data-v-19d42943]{width:100%;border-radius:8px;overflow:hidden;cursor:pointer;box-shadow:0 1px 4px rgba(0,0,0,.08)}.respiratory-timer-header[data-v-19d42943]{padding:.75rem 1rem;font-weight:600;font-size:1.1rem}.respiratory-timer-body[data-v-19d42943]{background-color:#e7f5e7;padding:2.5rem 1rem 2.75rem;display:flex;flex-direction:column;align-items:center;justify-content:center}.respiratory-timer-time[data-v-19d42943]{font-size:4rem;font-weight:700;letter-spacing:.1em;color:#17621f}.respiratory-timer-instruction[data-v-19d42943]{margin-top:1rem;font-size:1rem;text-align:center;letter-spacing:.1em;text-transform:uppercase}.neonatal-vitals-section[data-v-7a8515ce],.neonatal-vitals-section[data-v-bfd75302],.neonatal-vitals-section[data-v-34b36eb5],.neonatal-vitals-section[data-v-a5dcc574],.neonatal-vitals-section[data-v-fbe7c51f]{display:flex;flex-direction:column;gap:1rem}.neonatal-vitals-page[data-v-5f1f2ad2]{--background: #f5f5f5}ion-content[data-v-5f1f2ad2]{--background: #f5f5f5}\n/*$vite$:1*/",document.head.appendChild(a);const L={class:"neonatal-vitals-section"},k={class:"respiratory-timer-body"},j={class:"respiratory-timer-time"},H={class:"respiratory-timer-instruction"},W=T(t({__name:"VitalSignsSection",setup(e,{expose:a}){const t=n(null),p=x.find(e=>"Vital Signs"===e.title);if(!p)throw new Error("[VitalSignsSection] Missing configuration for Vital Signs section");const f=l(R),g=n(60),y=n(!1),S=n(!1);let _=null;const h=o(()=>`${Math.floor(g.value/60).toString().padStart(2,"0")}:${(g.value%60).toString().padStart(2,"0")}`),N=o(()=>y.value?"TAP TO PAUSE COUNTDOWN":60===g.value?"TAP TO START COUNTDOWN":0===g.value?"TAP TO RESTART COUNTDOWN":"TAP TO RESUME COUNTDOWN"),V=()=>{null===_&&(y.value=!0,S.value=!1,_=window.setInterval(()=>{g.value>0?g.value-=1:(y.value=!1,S.value=!0,null!==_&&(clearInterval(_),_=null))},1e3))},T=()=>{null!==_&&(clearInterval(_),_=null),y.value=!1},I=()=>{y.value?T():0===g.value?(T(),g.value=60,S.value=!1,V()):V()};i(()=>{null!==_&&clearInterval(_)});const F=o(()=>p.formData.map(e=>{var a,t;if(!e.name||!f)return{...e};const n=f[e.name],l="switchField"===e.componentType?null!=n?n:null:null!==(a=null!==(t=null!=n?n:e.initialValue)&&void 0!==t?t:e.value)&&void 0!==a?a:"";return{...e,initialValue:l}})),A=p.conditionalRules||[],D=e=>{var a,t;f&&(f.respiratory_rate=e.respiratory_rate||"",f.heart_rate=e.heart_rate||"",f.can_measure_oxygen_saturation=null!==(a=e.can_measure_oxygen_saturation)&&void 0!==a?a:null,f.oxygen_saturation=e.oxygen_saturation||"",f.can_measure_temperature=null!==(t=e.can_measure_temperature)&&void 0!==t?t:null,f.temperature=e.temperature||"")};return r(()=>{var e;return null===(e=t.value)||void 0===e?void 0:e.formValues},e=>{e&&D(e)},{deep:!0}),r(()=>t.value,e=>{null!=e&&e.getFormValues&&D(e.getFormValues())},{immediate:!0}),a({getFormRef:()=>t.value,validateForm:()=>{var e,a;return(null===(e=t.value)||void 0===e||null===(a=e.validateForm)||void 0===a?void 0:a.call(e))||null},getFormValues:()=>{var e,a;return(null===(e=t.value)||void 0===e||null===(a=e.getFormValues)||void 0===a?void 0:a.call(e))||{}}}),(e,a)=>(s(),u("div",L,[c("div",{class:"respiratory-timer-card",onClick:I},[c("div",k,[c("div",j,d(h.value),1),c("div",H,d(N.value),1)])]),m(b,{formData:F.value,conditionalRules:v(A),ref_key:"formRef",ref:t},null,8,["formData","conditionalRules"])]))}}),[["__scopeId","data-v-19d42943"]]),U={class:"neonatal-vitals-section"},B=T(t({__name:"WeightMeasurementsSection",setup(e,{expose:a}){const t=n(null),i=x.find(e=>"Weight Measurements"===e.title);if(!i)throw new Error("[WeightMeasurementsSection] Missing configuration for Weight Measurements section");const c=l(R),d=o(()=>i.formData.map(e=>{var a,t;if(!e.name||!c)return{...e};const n=c[e.name];return{...e,initialValue:null!==(a=null!==(t=null!=n?n:e.initialValue)&&void 0!==t?t:e.value)&&void 0!==a?a:""}})),p=i.conditionalRules||[],f=e=>{c&&(c.current_weight=e.current_weight||"",c.head_circumference=e.head_circumference||"")};return r(()=>{var e;return null===(e=t.value)||void 0===e?void 0:e.formValues},e=>{e&&f(e)},{deep:!0}),r(()=>t.value,e=>{null!=e&&e.getFormValues&&f(e.getFormValues())},{immediate:!0}),a({getFormRef:()=>t.value,validateForm:()=>{var e,a;return(null===(e=t.value)||void 0===e||null===(a=e.validateForm)||void 0===a?void 0:a.call(e))||null},getFormValues:()=>{var e,a;return(null===(e=t.value)||void 0===e||null===(a=e.getFormValues)||void 0===a?void 0:a.call(e))||{}}}),(e,a)=>(s(),u("div",U,[m(b,{formData:d.value,conditionalRules:v(p),ref_key:"formRef",ref:t},null,8,["formData","conditionalRules"])]))}}),[["__scopeId","data-v-7a8515ce"]]),Y={class:"neonatal-vitals-section"},z=T(t({__name:"BloodSugarSection",setup(e,{expose:a}){const t=n(null),i=x.find(e=>"Blood Sugar"===e.title);if(!i)throw new Error("[BloodSugarSection] Missing configuration for Blood Sugar section");const c=l(R),d=o(()=>i.formData.map(e=>{var a,t;if(!e.name||!c)return{...e};const n=c[e.name];var l,o;if("blood_sugar"===e.name)return{...e,initialValue:null!==(l=null!==(o=null!=n?n:e.initialValue)&&void 0!==o?o:e.value)&&void 0!==l?l:"",initialUnit:c.blood_sugar_unit||e.initialUnit||"mg/dL"};const i="switchField"===e.componentType?null!=n?n:null:null!==(a=null!==(t=null!=n?n:e.initialValue)&&void 0!==t?t:e.value)&&void 0!==a?a:"";return{...e,initialValue:i}})),p=i.conditionalRules||[],f=e=>{var a;c&&(c.can_measure_blood_sugar=null!==(a=e.can_measure_blood_sugar)&&void 0!==a?a:null,c.blood_sugar=e.blood_sugar||"",c.blood_sugar_unit=e.blood_sugar_unit||c.blood_sugar_unit||"mg/dL")};return r(()=>{var e;return null===(e=t.value)||void 0===e?void 0:e.formValues},e=>{e&&f(e)},{deep:!0}),r(()=>t.value,e=>{null!=e&&e.getFormValues&&f(e.getFormValues())},{immediate:!0}),a({getFormRef:()=>t.value,validateForm:()=>{var e,a;return(null===(e=t.value)||void 0===e||null===(a=e.validateForm)||void 0===a?void 0:a.call(e))||null},getFormValues:()=>{var e,a;return(null===(e=t.value)||void 0===e||null===(a=e.getFormValues)||void 0===a?void 0:a.call(e))||{}}}),(e,a)=>(s(),u("div",Y,[m(b,{formData:d.value,conditionalRules:v(p),ref_key:"formRef",ref:t},null,8,["formData","conditionalRules"])]))}}),[["__scopeId","data-v-bfd75302"]]),J={class:"neonatal-vitals-section"},X=T(t({__name:"HypoglycemiaSymptomaticSection",setup(e,{expose:a}){const t=n(null),i=x.find(e=>"Hypoglycemia-Symptomatic"===e.title);if(!i)throw new Error("[HypoglycemiaSymptomaticSection] Missing configuration for Hypoglycemia-Symptomatic section");const c=l(R),d=o(()=>i.formData.map(e=>{var a,t;if(!e.name||!c)return{...e};const n=c[e.name],l="switchField"===e.componentType?null!=n?n:null:null!==(a=null!==(t=null!=n?n:e.initialValue)&&void 0!==t?t:e.value)&&void 0!==a?a:"";return{...e,initialValue:l}})),p=i.conditionalRules||[],f=e=>{c&&Object.assign(c,e)};return r(()=>{var e;return null===(e=t.value)||void 0===e?void 0:e.formValues},e=>{e&&f(e)},{deep:!0}),r(()=>t.value,e=>{null!=e&&e.getFormValues&&f(e.getFormValues())},{immediate:!0}),a({getFormRef:()=>t.value,validateForm:()=>{var e,a;return(null===(e=t.value)||void 0===e||null===(a=e.validateForm)||void 0===a?void 0:a.call(e))||null},getFormValues:()=>{var e,a;return(null===(e=t.value)||void 0===e||null===(a=e.getFormValues)||void 0===a?void 0:a.call(e))||{}}}),(e,a)=>(s(),u("div",J,[m(b,{formData:d.value,conditionalRules:v(p),ref_key:"formRef",ref:t},null,8,["formData","conditionalRules"])]))}}),[["__scopeId","data-v-34b36eb5"]]),G={class:"neonatal-vitals-section"},$=T(t({__name:"HypoglycemiaAsymptomaticSection",setup(e,{expose:a}){const t=n(null),i=x.find(e=>"Hypoglycemia-Asymptomatic"===e.title);if(!i)throw new Error("[HypoglycemiaAsymptomaticSection] Missing configuration for Hypoglycemia-Asymptomatic section");const c=l(R),d=o(()=>i.formData.map(e=>{var a,t;if(!e.name||!c)return{...e};const n=c[e.name],l="switchField"===e.componentType?null!=n?n:null:null!==(a=null!==(t=null!=n?n:e.initialValue)&&void 0!==t?t:e.value)&&void 0!==a?a:"";return{...e,initialValue:l}})),p=i.conditionalRules||[],f=e=>{c&&Object.assign(c,e)};return r(()=>{var e;return null===(e=t.value)||void 0===e?void 0:e.formValues},e=>{e&&f(e)},{deep:!0}),r(()=>t.value,e=>{null!=e&&e.getFormValues&&f(e.getFormValues())},{immediate:!0}),a({getFormRef:()=>t.value,validateForm:()=>{var e,a;return(null===(e=t.value)||void 0===e||null===(a=e.validateForm)||void 0===a?void 0:a.call(e))||null},getFormValues:()=>{var e,a;return(null===(e=t.value)||void 0===e||null===(a=e.getFormValues)||void 0===a?void 0:a.call(e))||{}}}),(e,a)=>(s(),u("div",G,[m(b,{formData:d.value,conditionalRules:v(p),ref_key:"formRef",ref:t},null,8,["formData","conditionalRules"])]))}}),[["__scopeId","data-v-a5dcc574"]]),K={class:"neonatal-vitals-section"},q=T(t({__name:"VitalsSummarySection",setup(e,{expose:a}){const t=n(null),i=x.find(e=>"Vitals Summary"===e.title);if(!i)throw new Error("[VitalsSummarySection] Missing configuration for Vitals Summary section");const r=l(R),c=o(()=>i.formData.map(e=>{if("summaryField"!==e.componentType||!r)return{...e};const a=e.builder;return{...e,builder:e=>{if("function"!=typeof a)return[];const t={...r||{},...e};return a(t)}}}));return a({getFormRef:()=>t.value,validateForm:()=>null,getFormValues:()=>({...r||{}})}),(e,a)=>(s(),u("div",K,[m(b,{formData:c.value,ref_key:"formRef",ref:t},null,8,["formData"])]))}}),[["__scopeId","data-v-fbe7c51f"]]),Q=()=>JSON.parse(JSON.stringify(M)),Z=p("neonatalVitalsStore",{state:()=>({activePatientId:null,formData:Q(),formCache:{}}),actions:{initializeForPatient(e){if(null==e)return this.activePatientId=null,void Object.assign(this.formData,Q());this.activePatientId=e;const a=String(e),t=this.formCache[a];t?Object.assign(this.formData,t):Object.assign(this.formData,Q()),this.saveSnapshot()},saveSnapshot(){if(null==this.activePatientId)return;const e=String(this.activePatientId);this.formCache[e]=JSON.parse(JSON.stringify(this.formData))},resetActiveForm(){Object.assign(this.formData,Q()),this.saveSnapshot()},clearPatient(e){delete this.formCache[String(e)],this.activePatientId===e&&this.resetActiveForm()}},persist:{paths:["activePatientId","formData","formCache"]}}),ee=t({name:"NeonatalVitals",components:{IonPage:g,IonContent:f,Toolbar:I,NeonatalStepper:P},setup(){const e=y(),a=F(),{patient:t}=S(a),l=Z(),o=()=>{var e;const a=(e=>{const a=Number(e);return Number.isFinite(a)?a:null})(null===(e=t.value)||void 0===e?void 0:e.patientID);l.initializeForPatient(a)};o(),r(()=>{var e;return null===(e=t.value)||void 0===e?void 0:e.patientID},()=>o());const i=l.formData;_(R,i),r(()=>l.formData,()=>l.saveSnapshot(),{deep:!0});const u=n(x.map((e,a)=>({title:e.title,number:a+1,checked:!1,class:0===a?"open_step common_step":"common_step",last_step:a===x.length-1?"last_step":""}))),s=e=>x.findIndex(a=>a.title===e),c=[{title:"Vital Signs",value:"1",component:W,configIndex:s("Vital Signs")},{title:"Weight Measurements",value:"2",component:B,configIndex:s("Weight Measurements")},{title:"Blood Sugar",value:"3",component:z,configIndex:s("Blood Sugar")},{title:"Hypoglycemia-Symptomatic",value:"4",component:X,configIndex:s("Hypoglycemia-Symptomatic")},{title:"Hypoglycemia-Asymptomatic",value:"5",component:$,configIndex:s("Hypoglycemia-Asymptomatic")},{title:"Vitals Summary",value:"6",component:q,configIndex:s("Vitals Summary")}],m=n("1"),d=e=>(null!=e?e:"").trim().toUpperCase(),v=[{encounterType:A.NEONATAL_SIGNS_SYMPTOMS,route:"/neonatal/signs-symptoms",encounterNames:["NEONATAL SIGNS & SYMPTOMS"]},{encounterType:A.NEONATAL_REVIEW_OF_SYSTEMS,route:"/neonatal/review-of-systems",encounterNames:["NEONATAL REVIEW OF SYSTEMS"]},{encounterType:A.PHYSICAL_EXAMINATION_BABY,route:"/neonatal/general-examination",encounterNames:["PHYSICAL EXAMINATION BABY","NEONATAL GENERAL EXAMINATION"]},{encounterType:A.VITALS,route:"/neonatal/vitals",encounterNames:["VITALS","NEONATAL VITALS"]},{encounterType:A.NEONATAL_SYSTEMIC_EXAMINATION,route:"/neonatal/SystemicExamination",encounterNames:["NEONATAL SYSTEMIC EXAMINATION"]}],p=v[v.length-1].route,f=new Map;return v.forEach(e=>{e.encounterNames.forEach(a=>{f.set(d(a),e.encounterType)})}),{wizardData:u,stepperData:c,stepperTitle:"Neonatal Vital Signs",currentOpenStepper:m,updateStatus:e=>{e&&e.value&&u.value.forEach((a,t)=>{e.value===(t+1).toString()?(a.class="open_step common_step",a.checked=!1):t<parseInt(e.value)-1?(a.class="common_step color_white",a.checked=!0):(a.class="common_step",a.checked=!1)})},getSaveFunction:a=>a===c.length-1?async()=>{var a;if(null!==(a=t.value)&&void 0!==a&&a.patientID)try{const a=[];if(i.respiratory_rate&&a.push(await w.buildValueNumber("Respiratory rate",Number(i.respiratory_rate))),i.heart_rate&&a.push(await w.buildValueNumber("Pulse",Number(i.heart_rate))),i.oxygen_saturation&&a.push(await w.buildValueNumber("Oxygen saturation",Number(i.oxygen_saturation))),i.temperature&&a.push(await w.buildValueNumber("Temperature (C)",Number(i.temperature))),i.current_weight&&a.push(await w.buildValueNumber("Weight (kg)",Number(i.current_weight)/1e3)),i.head_circumference&&a.push(await w.buildValueNumber("Head circumference",Number(i.head_circumference))),i.blood_sugar){let e=Number(i.blood_sugar);"mmol/L"===(i.blood_sugar_unit||"mg/dL")&&(e*=18.018),a.push(await w.buildValueNumber("Blood sugar",e))}await O(t.value.patientID,A.VITALS,a),E("Vital signs recorded successfully"),l.clearPatient(t.value.patientID);try{const a=await C.getSavedEncounters(t.value.patientID),n=(e=>{const a=new Set;e.forEach(e=>{const t=d(e),n=f.get(t);void 0!==n&&a.add(n)});const t=v.find(e=>!a.has(e.encounterType));return t?t.route:p})(Array.isArray(null==a?void 0:a.encounters)?a.encounters:[]);e.push(n)}catch(n){console.error("Error determining next admission step:",n),e.push({path:"/patientProfile"})}}catch(n){console.error("Failed to save vital signs",n),D("Failed to save vital signs")}else D("No patient selected")}:null,neonatalVitalsSections:x}}});e("default",T(ee,[["render",function(e,a,t,n,l,o){const i=h("Toolbar"),r=h("NeonatalStepper"),u=h("ion-content"),c=h("ion-page");return s(),N(c,{class:"neonatal-vitals-page"},{default:V(()=>[m(i),m(u,{fullscreen:!0},{default:V(()=>[m(r,{wizardData:e.wizardData,StepperData:e.stepperData,stepperTitle:e.stepperTitle,openStepper:e.currentOpenStepper,backUrl:"/patientProfile",flowType:"vitals",getSaveFunction:e.getSaveFunction,sectionsConfig:e.neonatalVitalsSections,onUpdateStatus:e.updateStatus},null,8,["wizardData","StepperData","stepperTitle","openStepper","getSaveFunction","sectionsConfig","onUpdateStatus"])]),_:1})]),_:1})}],["__scopeId","data-v-5f1f2ad2"]]))}}});
