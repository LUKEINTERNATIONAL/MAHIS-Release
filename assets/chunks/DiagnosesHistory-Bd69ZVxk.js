import{d as y,bh as w,cr as S,r as a,w as l,e as i,f as c,l as O,H as T,k as u,F as B,T as H,I as k,u as E,bl as p,cY as x}from"./vendor-CJ2tyHrn.js";import{u as C,K as N,aq as F,H as I,_ as V}from"../index-CPIhguZJ.js";import"./lodash-NJiRuGo9.js";import"./apexcharts-BtvCa6MI.js";const R={class:"table-responsive"},q=y({__name:"DiagnosesHistory",setup(A){const m=C(),{patient:b}=w(m),_=S(),f=a(null),e=a([]),g=a(["Diagnosis","Date"]),v=a({responsive:!0,select:!1,layout:{topStart:"",topEnd:"search",bottomStart:"info",bottomEnd:"paging"},ordering:!1}),d=async()=>{try{e.value=[];const D=(await N.getObsByEncounterId(41)).flatMap(t=>t.obs||[]).filter(t=>t.value_coded).sort((t,r)=>{const n=new Date(t.obs_datetime).getTime();return new Date(r.obs_datetime).getTime()-n});for(const t of D){const r=await F.getConceptName(t.value_coded),n=I.toStandardHisFormat(t.obs_datetime);e.value.push([r,n])}}catch(s){console.error("Error updating diagnosis data:",s),e.value=[]}p.use(x)};return l(()=>_,async()=>{await d()},{deep:!0}),l(b,async()=>{await d()},{deep:!0,immediate:!0}),(s,h)=>(c(),i("div",R,[O(E(p),{ref_key:"dataTable",ref:f,options:v.value,data:e.value,class:"display nowrap modern-table",width:"100%"},{default:T(()=>[u("thead",null,[u("tr",null,[(c(!0),i(B,null,H(g.value,o=>(c(),i("th",{key:o},k(o),1))),128))])])]),_:1},8,["options","data"])]))}}),z=V(q,[["__scopeId","data-v-78c82edc"]]);export{z as default};
