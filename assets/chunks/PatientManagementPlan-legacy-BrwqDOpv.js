System.register(["./vendor-legacy-DWjfM6CY.js","../index-legacy-aIM58y9y.js","./DemographicBar-legacy-DxhJGIoh.js","./useFormWizard-legacy-C-fuC8aA.js","./ComplicationsStore-legacy-C_KaZIJU.js","./nonPharmaTherapyStore-legacy-CWaS_vCV.js","./lodash-legacy-pOOc9Efu.js","./formatServerData-legacy-Be8H8oVu.js","./usePatientProfile-legacy-DdmokWg3.js","./apexcharts-legacy-DV2yaYXq.js","./drug_prescription_service-legacy-DCEdap8f.js","./patient_diagnosis_service-legacy-DXf5r4ft.js","./Registration-legacy-AnpNt9I2.js","./useSetRegistrationValues-legacy-0u80S9A2.js","./useLocation-legacy-CrJ5BzV8.js","./vaccines_service-legacy-B0JtwUTA.js","./sms_service-legacy-Phc_bNH3.js","./EIRreportsStore-legacy-XTlL5gug.js","./Export-legacy-BHIoj6Z6.js","./user_role_management-legacy-DNFUFN86.js","./useNeonatalEnrollmentStore-legacy-HnC_RjLi.js","./enrollment-legacy-BWFKsMdA.js","./Outcome-legacy-B1IgSRo-.js","./wardsStore-legacy-CD-82_YY.js"],function(e,a){"use strict";var n,i,t,l,o,s,r,c,u,d,g,p,m,y,v,b,h,_,f,T,S,x,k,P,F,w,D,C,A,M,j,I,N,R,B,O,z,L,E,V,H,U,W,G,$,q,J,Y,K,Q,X,Z,ee,ae,ne,ie,te,le,oe,se,re;return{setters:[e=>{n=e.c,i=e.d,t=e.r,l=e.O,o=e.f,s=e.u,r=e.bw,c=e.J,u=e.l,d=e.aV,g=e.am,p=e.cr,m=e.b2,y=e.w,v=e.a,b=e.ab,h=e.k,_=e.m,f=e.i,T=e.bT,S=e.v,x=e.ae,k=e.ba},e=>{P=e.z,F=e.n,w=e.b9,D=e.u,C=e.ba,A=e.bb,M=e.b1,j=e.bc,I=e.e,N=e.b2,R=e.i,B=e.a8,O=e.f,z=e.T,L=e.D,E=e.a1,V=e.H,H=e.b4,U=e.bd,W=e.I,G=e.be,$=e.t,q=e.ao,J=e.F,Y=e.bf,K=e.aa,Q=e.S},e=>{X=e.D},e=>{Z=e.u,ee=e._},e=>{ae=e.u},e=>{ne=e.s,ie=e.c,te=e.u},e=>{le=e.l},e=>{oe=e.f,se=e.a},e=>{re=e.u},null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],execute:function(){const a=i({__name:"NonPharmacological",setup(e){const a=t(null),i=n(()=>[{componentType:"Heading",name:"Procedures",grid:{s:"5"}},{grid:{s:"2"}},{componentType:"Heading",name:"Supportive Care",grid:{s:"5"}},{componentType:"checkboxField",type:"single",label:"Minor Surgery",name:"minor_surgery",grid:{s:"5"}},{grid:{s:"2"}},{componentType:"checkboxField",type:"single",label:"Wound Dressing",name:"wound_dressing",grid:{s:"5"}},{componentType:"checkboxField",type:"single",label:"Suturing",name:"suturing",grid:{s:"5"}},{grid:{s:"2"}},{componentType:"checkboxField",type:"single",label:"Patient Education",name:"patient_education",grid:{s:"5"}},{componentType:"checkboxField",type:"single",label:"Joint Reduction",name:"joint_reduction",grid:{s:"5"}},{grid:{s:"2"}},{componentType:"checkboxField",type:"single",label:"Counselling",name:"counselling",grid:{s:"5"}},{componentType:"checkboxField",type:"single",label:"Fracture Reduction",name:"fracture_reduction",grid:{s:"5"}},{grid:{s:"2"}},{componentType:"checkboxField",type:"single",label:"Feeding",name:"feeding",grid:{s:"5"}},{componentType:"checkboxField",type:"single",label:"Intercostal Drain Insertion",name:"intercostal_drain_insertion",grid:{s:"5"}},{grid:{s:"2"}},{componentType:"checkboxField",type:"single",label:"Oxygenation",name:"oxygenation",grid:{s:"5"}},{componentType:"checkboxField",type:"single",label:"Pleurocentesis",name:"pleurocentesis",grid:{s:"5"}},{grid:{s:"2"}},{componentType:"checkboxField",type:"single",label:"Tepid Sponging",name:"tepid_sponging",grid:{s:"5"}},{componentType:"checkboxField",type:"single",label:"Pericardiocentesis",name:"pericardiocentesis",grid:{s:"5"}},{grid:{s:"2"}},{componentType:"checkboxField",type:"single",label:"Electrocardiography (ECG) Monitoring",name:"electrocardiography_monitoring",grid:{s:"5"}},{componentType:"checkboxField",type:"single",label:"Paracentesis",name:"paracentesis",grid:{s:"5"}},{grid:{s:"2"}},{componentType:"checkboxField",type:"single",label:"Turning Patients",name:"turning_patients",grid:{s:"5"}},{componentType:"checkboxField",type:"single",label:"Lumbar Puncture",name:"lumbar_puncture",grid:{s:"5"}},{grid:{s:"2"}},{componentType:"checkboxField",type:"single",label:"Oral Care",name:"oral_care",grid:{s:"5"}},{componentType:"checkboxField",type:"single",label:"Intravenous Cannulation",name:"intravenous_cannulation",grid:{s:"5"}},{grid:{s:"2"}},{componentType:"checkboxField",type:"single",label:"Other (Specify)",name:"supportive_care_other",grid:{s:"5"}},{componentType:"checkboxField",type:"single",label:"Central Line Insertion",name:"central_line_insertion",grid:{s:"5"}},{grid:{s:"2"}},{componentType:"checkboxField",type:"single",label:"Urethral Catheterization",name:"urethral_catheterization",grid:{s:"12"}},{componentType:"checkboxField",type:"single",label:"Suprapubic Catheterization",name:"suprapubic_catheterization",grid:{s:"12"}},{componentType:"checkboxField",type:"single",label:"Suctioning",name:"suctioning",grid:{s:"12"}},{componentType:"checkboxField",type:"single",label:"Oropharyngeal Airway Insertion",name:"oropharyngeal_airway_insertion",grid:{s:"12"}},{componentType:"checkboxField",type:"single",label:"Nasopharyngeal Airway Insertion",name:"nasopharyngeal_airway_insertion",grid:{s:"12"}},{componentType:"checkboxField",type:"single",label:"Laryngeal Mask Airway Insertion",name:"laryngeal_mask_airway_insertion",grid:{s:"12"}},{componentType:"checkboxField",type:"single",label:"Endotracheal Tube Insertion",name:"endotracheal_tube_insertion",grid:{s:"12"}},{componentType:"checkboxField",type:"single",label:"Nasogastric Tube Insertion",name:"nasogastric_tube_insertion",grid:{s:"12"}},{componentType:"checkboxField",type:"single",label:"Manual Ventilation",name:"manual_ventilation",grid:{s:"12"}},{componentType:"checkboxField",type:"single",label:"Continuous Positive Airway Pressure (CPAP)",name:"continuous_positive_airway_pressure",grid:{s:"12"}},{componentType:"checkboxField",type:"single",label:"Other (Specify)",name:"procedures_other",grid:{s:"12"}}]);return(e,n)=>(o(),l(s(r),null,{default:c(()=>[u(s(d),null,{default:c(()=>[u(P,{formData:s(i),ref_key:"formRef",ref:a},null,8,["formData"])]),_:1})]),_:1}))}}),ce=i({__name:"Medication",setup(e){const a=t(null),i=n(()=>[{componentType:"multiSelectInputField",header:"Medication Name",name:"medication_name",isMultiple:!1,trackBy:"id",grid:{s:"4"},icon:F.search,options:[{id:1,name:"Dextrose"},{id:2,name:"Epinephrine"},{id:3,name:"Atropine"},{id:4,name:"Amiodarone"}]},{componentType:"multiSelectInputField",header:"Formulation",name:"formulation",isMultiple:!1,trackBy:"id",grid:{s:"4"},icon:F.search,options:[{id:1,name:"Solution"},{id:2,name:"Powder"},{id:3,name:"Capsule"},{id:4,name:"Tablet"}]},{componentType:"inputField",header:"Dose",name:"dose",grid:{s:"4"},initialUnit:"Years",unitOptions:[{label:"Grams (g)",value:"Grams (g)"},{label:"Milligrams (mg)",value:"Milligrams (mg)"},{label:"Micrograms (mcg)",value:"Micrograms (mcg)"},{label:"Units",value:"Units"}],unitValidation:e=>e&&""!==e?null:"Please select a unit."},{componentType:"multiSelectInputField",header:"Frequency",name:"frequency",isMultiple:!1,trackBy:"id",grid:{s:"4"},icon:F.search,options:[{id:1,name:"Daily"},{id:2,name:"Twice Daily"},{id:3,name:"Three Times Daily"},{id:4,name:"Four Times Daily"}]},{componentType:"inputField",header:"Duration",name:"duration ",grid:{s:"4"},initialUnit:"hours",unitOptions:[{label:"Hours",value:"hours"},{label:"Days",value:"days"},{label:"Weeks",value:"weeks"},{label:"Months",value:"months"},{label:"Years",value:"years"}],unitValidation:e=>e&&""!==e?null:"Please select a unit."}]);return(e,n)=>(o(),l(s(r),null,{default:c(()=>[u(s(d),null,{default:c(()=>[u(P,{formData:s(i),ref_key:"formRef",ref:a},null,8,["formData"])]),_:1})]),_:1}))}}),ue=i({__name:"PatientCareArea",setup(e){const a=t(null),i=n(()=>[{header:"Select Patient Care Area",name:"patient_care_area",componentType:"radioButtonField",type:"inline",grid:{s:"8"},options:[{label:"Rescitation",value:"Rescitation"},{label:"Short Stay",value:"Short Stay"},{label:"Gynae Bench",value:"Gynae Bench"},{label:"Isolation Room",value:"Isolation Room"},{label:"Trauma",value:"Trauma"},{label:"Medical Bench",value:"Medical Bench"},{label:"Surgical Bench",value:"Surgical Bench"},{label:"SSW",value:"SSW"},{label:"Priority Area",value:"Priority Area"},{label:"Other",value:"Other"}]}]);return(e,n)=>(o(),l(s(r),null,{default:c(()=>[u(s(d),null,{default:c(()=>[u(P,{formData:s(i),ref_key:"formRef",ref:a},null,8,["formData"])]),_:1})]),_:1}))}}),de={style:{width:"90vw",margin:"0 auto","margin-top":"10px"}},ge={class:"back_profile"};e("default",i({__name:"PatientManagementPlan",setup(e,{expose:i}){const{onTabBeforeChange:r,currentTabIndex:d}=Z();re();const P=g(),F=p();t([]),t([]),t(!1);const pe=t(!0),me=t(!1),ye=t(!1),ve=n(()=>({text:ye.value?"Saving...":"Finish",icon:ye.value?"hourglass-outline":"checkmark",hideText:!1,hideIcon:!1,disabled:me.value||ye.value})),be=w(),he=D(),_e=C(),fe=A();M();const Te=j(),Se=I();N();const xe=R(),ke=ae(),Pe=B(),{patient:Fe}=m(he),{vitals:we}=m(be),{investigations:De}=m(_e),{diagnosis:Ce}=m(fe),{substance:Ae}=m(xe),{selectedNCDMedicationList:Me}=m(Te),{FootScreening:je,visualScreening:Ie,cvScreening:Ne}=m(ke),{sessionDate:Re}=m(Pe),{apiStatus:Be}=m(O());y(ve,(e,a)=>{console.log("Done button options changed:",{from:a,to:e,currentStep:d.value,tabsLength:Le.value.length}),e.disabled!==(null==a?void 0:a.disabled)&&console.log("Done button "+(e.disabled?"disabled":"enabled")),e.text!==(null==a?void 0:a.text)&&console.log(`Done button text changed from "${null==a?void 0:a.text}" to "${e.text}"`)},{deep:!0}),y(ye,(e,a)=>{e!==a&&(console.log(`Saving state changed: ${a} -> ${e}`),e?console.log("Starting save process..."):console.log("Save process completed"))});const Oe=e=>{console.log("Done button change received from wizard:",e),e.newOptions.disabled&&console.log("Done button has been disabled"),e.isLastStep&&console.log("User is on the last step, done button should be visible")},ze=()=>{let e=!1;return He(),ye.value&&(e=!0),me.value=e,!e},Le=t([{title:"Non Pharmacological",icon:""},{title:"Patient Care Area",icon:""},{title:"Medication",icon:""}]),Ee=t(null),Ve=t(null),He=()=>{var e;if(!Le.value||0===Le.value.length)return console.log("Tabs not yet initialized"),null;const a=d.value>=0&&d.value<Le.value.length?d.value:0;switch(null===(e=Le.value[a])||void 0===e?void 0:e.title){case"Non Pharmacological":return"NonPharmacological";case"Patient Care Area":return"PatientCareArea";case"Medication":return"Medication";default:if(Se.NCDActivities.length>0)switch(Se.NCDActivities[0]){case"Non Pharmacological":return"NonPharmacological";case"Patient Care Area":return"PatientCareArea";case"Medication":return"Medication"}return null}},Ue=()=>{pe.value=!1,setTimeout(()=>{d.value=0,pe.value=!0},0)},We=()=>{const e=w();e.setVitals(e.getInitialVitals(Fe.value.ID))},Ge=async()=>{const e=E(Re.value,"sessionDate","value")||V.sessionDate(),a=H("vitals");for(let i=0;i<Le.value.length;i++){const t=Le.value[i];if("Vital Signs"===t.title)Le.value[i].icon=$e(e,a)?k:"";else if("Risk Assessment"===t.title){const a=H("substanceAbuse");Le.value[i].icon=$e(e,a)?k:""}else if("Investigations"===t.title){var n;const a=null==Fe||null===(n=Fe.value)||void 0===n||null===(n=n.labOrders)||void 0===n?void 0:n.saved,t=null==a?void 0:a.filter(a=>V.toStandardHisFormat(e)===V.toStandardHisFormat(a.order_date));Le.value[i].icon=(null==t?void 0:t.length)>0?k:""}else if("Diagnosis"===t.title){const a=H("diagnosis");Le.value[i].icon=$e(e,a)?k:""}else if("Complications Screening"===t.title){const a=H("screening");Le.value[i].icon=$e(e,a)?k:""}else"Treatment Plan"===t.title&&(Me.value.length>0?Le.value[i].icon=U()?k:"":Le.value[i].icon="")}ze()},$e=(e,a)=>{const n=new Date(e);return n.setHours(0,0,0,0),a.some(e=>{const a=new Date(e.obs_datetime);return a.setHours(0,0,0,0),a.getTime()===n.getTime()})},qe=async(e,a)=>{var n;const i=null===(n=Le.value[a])||void 0===n?void 0:n.title;var t,l;e%1==0&&(d.value=e),"Vital Signs"==i&&(null===(t=Ee.value)||void 0===t||t.onSubmit()),"Risk Assessment"==i&&(null===(l=Ve.value)||void 0===l||l.onSubmit()),"Complications Screening"==i&&await(async()=>{const e=[],a=await oe(Ie.value),n=await se(je.value),i=await oe(Ne.value);var t,l,o,s;a.length>0&&e.push({concept_id:await q.getConceptID("Visual acuity",!0),value_text:"visual acuity test",obs_datetime:q.getSessionDate(),child:a}),n.length>0&&e.push({concept_id:await q.getConceptID("Foot check",!0),value_text:"foot screening",obs_datetime:q.getSessionDate(),child:n}),i.length>0&&e.push(...i),e.length>0?(null!==(l=(t=null!==(s=(o=Fe.value).screening)&&void 0!==s?s:o.screening={}).unsaved)&&void 0!==l||(t.unsaved=[]),Fe.value.screening.unsaved.push(...e),J("Complications saved successfully")):$("No complications data to save")})(),"Treatment Plan"==i&&await(async()=>{const e=Y();if(!le.isEmpty(e.selectedMedicalAllergiesList)){const a=K(),n=e.selectedMedicalAllergiesList.map(e=>({concept_id:e.concept_id,obs_datetime:Q.getSessionDate(),value_coded:e.concept_id,location_id:a.facilityLocation.code,value_text:e.name})),i=await ne(n);Fe.value=Object.assign(Fe.value,i),console.log("Allergies staged successfully:",Fe.value),e.clearSelectedMedicalAllergiesList()}const a=await ie();Fe.value=Object.assign(Fe.value,a);const n=await te().saveNonPharmaTherapyPatientData();Fe.value=Object.assign(Fe.value,n)})(),await W(Fe.value)},Je=async()=>{ye.value=!0;try{await G(),await W(Fe.value),P.push("/triageList")}catch(e){console.error("Error saving data:",e),$("Error occurred while saving data. Please try again.")}finally{ye.value=!1}};return v(async()=>{0!==Se.NCDActivities.length?(ae().resetScreening(),Le.value=[{title:"Non Pharmacological",icon:""},{title:"Patient Care Area",icon:""},{title:"Medication",icon:""}],await Ge(),(void 0===d.value||d.value<0)&&(d.value=0,console.log("Setting initial tab index to 0")),me.value=!1,ye.value=!1,ze()):P.push("patientProfile")}),y(d,async()=>{await ze()}),y(we,async()=>{await Ge()},{deep:!0}),y(Fe,async()=>{ae().resetScreening(),await Ge()},{deep:!0}),y(Re,async()=>{await Ge()},{deep:!0}),y(De,async()=>{await Ge()},{deep:!0}),y(Ce,async()=>{await Ge()},{deep:!0}),y(Ae,async()=>{await Ge()},{deep:!0}),y(Me,async()=>{await Ge()},{deep:!0}),y(F,async e=>{Ue(),We(),Le.value=[{title:"Non Pharmacological",icon:""},{title:"Patient Care Area",icon:""},{title:"Medication",icon:""}]},{deep:!0}),y(Fe,async(e,a)=>{e.ID!=a.ID&&(Ue(),We())},{deep:!0}),i({saveData:Je,markWizard:Ge,refreshWizard:Ue,validateDoneButtonState:ze}),(e,n)=>(o(),l(s(x),null,{default:c(()=>[u(z),u(s(b),{fullscreen:!0},{default:c(()=>[u(X),h("div",de,[pe.value?(o(),l(ee,{key:0,ref:"wizard",headingTitle:"Patient Management Plan","vertical-tabs":"","navigable-tabs":"","scrollable-tabs":"",startIndex:0,doneButton:ve.value,"custom-tabs":Le.value,beforeChange:s(r),onChange:qe,"onComplete:wizard":n[1]||(n[1]=e=>Je()),onDoneButtonChanged:Oe},{default:c(()=>[h("div",null,[h("div",ge,[u(L,{name:"Back to profile",iconSlot:"start",fill:"clear",icon:s(T),"font-weight":"600",onClick:n[0]||(n[0]=e=>{P.push("/patientProfile")})},null,8,["icon"])])]),f(h("div",null,[u(a,{ref:"nonPharmacologicalRef"},null,512)],512),[[S,"NonPharmacological"==He()]]),f(h("div",null,[u(ue,{ref:"patientCareAreaRef"},null,512)],512),[[S,"PatientCareArea"==He()]]),f(h("div",null,[u(ce,{ref:"medicationRef"},null,512)],512),[[S,"Medication"==He()]])]),_:1},8,["doneButton","custom-tabs","beforeChange"])):_("",!0)])]),_:1})]),_:1}))}}))}}});
