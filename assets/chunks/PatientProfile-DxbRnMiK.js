const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./LabOrdersList-B_Y32l1G.js","./vendor-g-7mo7AQ.js","./lodash-NJiRuGo9.js","../vendor.CmTprahb.css","../index-B4PcD-tN.js","./apexcharts-BvabVeHX.js","../index.D3pLehO8.css","./BasicForm-4b-86afG.js","./DateInputField-BDLp8vpZ.js","../DateInputField.BYUMEomf.css","../BasicForm.CS8soES6.css","./useUserActivities-C--fuos_.js","../LabOrdersList.CHAE01_j.css","./DiagnosesHistory-Dw1mY0_7.js","../DiagnosesHistory.BZT4odKr.css","./AllergiesContraindication-BWGGb107.js","./UpcomingFeature-B_Xzsjjy.js","../UpcomingFeature.DBJv9ELz.css","../AllergiesContraindication.DSdMoqwN.css","./VisitsHistory-iySNj1XI.js","../VisitsHistory.C5b1Qybn.css","./VitalsMeasurementsSummary-2ewlVaMu.js","../VitalsMeasurementsSummary.GGcaBhen.css","./PatientProfile-ySOc9C8r.js","./DemographicBar-rFI6qgqm.js","../DemographicBar.DtnnoAYr.css","./SaveProgressModal-CliGhgIW.js","../SaveProgressModal.DLXC0SP6.css","./Stepper-Ug738wSx.js","./NextAppointment-D4kCevbN.js","./group_validation-DZMNyv83.js","./RadiologyStore-CFTyQt1n.js","./formatServerData-ByJuAUOI.js","./DashBox-MNF8nhJK.js","./previousComplaints-CUpEqf9P.js","../previousComplaints.CaFy6Jya.css","./patient_complaints_service-DVfu5TFL.js","./nonPharmaTherapyStore-C28gRMVp.js","./drug_prescription_service-nHduwgVj.js","./patient_diagnosis_service-C2rzNIBF.js","./user_role_management-Bx6yzc30.js","./ncd_appointment_service-3cxR7kZF.js","../NextAppointment.DrwdY6dI.css","./OPDOutcome-BPW0BEIx.js","./LevelOfConsciousness.vue_vue_type_script_setup_true_lang-CZQyIwD3.js","./Outcome-CRynCuw6.js","./wardsStore-CLS-r5KO.js","../Outcome.BrkOxEBI.css","../OPDOutcome.teiG8WUF.css","./VitalsMixin.vue_vue_type_script_lang-BF_3ePz1.js","./TreatmentPlan-DIBcbwV3.js","./ComplicationsStore-C8Aeqfp4.js","../TreatmentPlan.D-2-rvxn.css","./OPDDiagnosis-CO3IhGty.js","../OPDDiagnosis.BkZ0ABWg.css","./FeatusModal-CWz3haAh.js","../FeatusModal.Cfk5MYmH.css","./BasicCard-Bj6VFSFM.js","../BasicCard.CLPwwedX.css","./PastObstreticHistoryStore-DzzFT6Qx.js","../Stepper.B2n3cIUE.css","./WeightHeightChart-CbUviyC-.js","./chartjs-BIKejXn8.js","../WeightHeightChart.BZ52GXpK.css","./weightAndHeight-DbgHyt9l.js","./customDatePicker-yjLEAxxf.js","../customDatePicker.twJBaIU5.css","../weightAndHeight.CJuqOhq_.css","./vaccines_service-DcM__yoW.js","./sms_service-B4KqQSPo.js","./EIRreportsStore-DP4ZVk4m.js","./Export-yAlRqNaz.js","../vaccines_service.DKZw05E0.css","./barcode-qrcode-reader-BiDOOocG.js","./stock_service-BlnfpkPx.js","./Registration-DAyxP_9h.js","./useLocation-DvpSTaEw.js","./useNeonatalEnrollmentStore-RF1lC8bz.js","./enrollment-DU-PLRUa.js","../Registration.DWcKqqrC.css","./AdministerOtherVaccinesStore-JBVdAGAR.js","./usePatientProfile-CtOhKLwD.js","../usePatientProfile.BRwk2gaY.css","../PatientProfile.xh9sFISw.css","./HTSPatientProfile-BDWEmIM_.js","../HTSPatientProfile.D35WQABU.css","./NeonatalPatientProfile-Bx7ZDI3Y.js","./neonatal_service-06rm6NBv.js","../NeonatalPatientProfile.BD3bs8tI.css","./AETCPatientProfile-HStfmhY-.js","./confirm_pregnancy_service-WQ9qFRMw.js","./CPR-D-gFXoCJ.js","./useRespiratoryRateOxygenForm-CxCb1x3E.js","../CPR.C4Sa7ms4.css","./tasks-C8PnJ-AZ.js","../AETCPatientProfile.BWr2ypdR.css","./BloodPressure-DtHdae80.js","../BloodPressure.Dl5SnRi2.css","./AncEnrollmentModal-BiUFP4TE.js","../AncEnrollmentModal.CLq9tGu0.css","./LabourEnrollmentModal-BQwGAH62.js","../LabourEnrollmentModal.DgSOWoB_.css","./PNCEnrollmentModal-CivdW1rC.js","../PNCEnrollmentModal.BDNYT6XY.css"])))=>i.map(i=>d[i]);
import{d as Mt,r as f,w as ht,O as I,f as r,u as t,br as gt,J as n,l as a,aR as Ze,e as b,dS as vt,Q as c,L as P,aw as Je,F as Z,aS as Qe,ak as Xe,P as yt,$ as T,X as h,aP as ta,k as l,K as g,cE as ue,bZ as ea,bW as aa,aV as St,z as na,D as sa,a as de,I as oa,G as la,dT as ia,E as ra,N as ua,a3 as Tt,a4 as Vt,bn as da,a5 as L,a6 as m,p as ce,dU as te,m as _,b$ as ca,a7 as me,R as ma,ap as pa,cp as fa,b2 as Et,c as _t,H as ee,cL as w,dV as va,c$ as _a,am as ga,al as ya,W as ae,dd as Ca,de as q,aG as ba,c1 as Aa,aI as ne,d0 as Ia,cD as O}from"./vendor-g-7mo7AQ.js";import{a8 as ot,_ as Lt,P as xt,a9 as Pa,a0 as ka,m as pe,aa as Da,ab as wa,u as Oa,a as Ra,f as Ea,T as Na,w as E,S as at,J as nt,ac as Nt,i as se,ad as ha,q as oe,G as j,n as Sa,ae as le,t as st,af as K,ag as Ta,H as G,ah as ie}from"../index-B4PcD-tN.js";import{l as Va}from"./lodash-NJiRuGo9.js";import{C as xa}from"./confirm_pregnancy_service-WQ9qFRMw.js";import{u as Ma}from"./useUserActivities-C--fuos_.js";import{u as La}from"./usePatientProfile-CtOhKLwD.js";import{f as $a}from"./formatServerData-ByJuAUOI.js";import{D as Ua}from"./DemographicBar-rFI6qgqm.js";import{i as Ba}from"./tasks-C8PnJ-AZ.js";const Ha=Mt({__name:"ARTCard",props:{patient:{default:{}}},setup($){const S=$,V=f(!1),R=f({artStartDate:"",arvNumber:"",fileNumber:"",currentOutcome:""}),x=async v=>{V.value=!0;try{const i=await ot.getProgramInformation(v);R.value={artStartDate:(()=>{const[d,U,H]=i.art_start_date.split("/"),z=i.art_start_date.match(/n\/a/i)?"":"(".concat(na(ot.getSessionDate()).diff("".concat(H,"-").concat(U,"-").concat(d),"months")," Month(s))");return"".concat(i.art_start_date," ").concat(z)})(),arvNumber:"".concat(i.arv_number," | Regimen: ").concat(i.current_regimen),fileNumber:i.filing_number.number,currentOutcome:i.current_outcome}}catch(i){console.error("Error fetching ART information:",i)}finally{V.value=!1}};return ht(()=>S.patient,v=>{v&&v.patientID?x(v.patientID):R.value={artStartDate:"--",arvNumber:"--",fileNumber:"--",currentOutcome:"--"}},{immediate:!0,deep:!0}),(v,i)=>(r(),I(t(gt),null,{default:n(()=>[a(t(Qe),null,{default:n(()=>[a(t(Ze),null,{default:n(()=>[V.value?(r(),I(t(vt),{key:0,animated:"",style:{width:"200px",height:"24px"}})):(r(),b(Z,{key:1},[a(t(P),{icon:t(Je)},null,8,["icon"]),i[0]||(i[0]=c(" ART Information ",-1))],64))]),_:1})]),_:1}),a(t(St),null,{default:n(()=>[a(t(Xe),null,{default:n(()=>[V.value?(r(),b(Z,{key:0},yt(4,d=>a(t(T),{key:d},{default:n(()=>[a(t(vt),{slot:"start",animated:"",style:{width:"24px",height:"24px","border-radius":"50%"}}),a(t(h),null,{default:n(()=>[a(t(vt),{animated:"",style:{width:"120px",height:"16px","margin-bottom":"8px"}}),a(t(vt),{animated:"",style:{width:"180px",height:"20px"}})]),_:1})]),_:1})),64)):(r(),b(Z,{key:1},[a(t(T),null,{default:n(()=>[a(t(P),{icon:t(ta),slot:"start"},null,8,["icon"]),a(t(h),null,{default:n(()=>[i[1]||(i[1]=l("h3",null,"ART Start Date",-1)),l("p",null,g(R.value.artStartDate),1)]),_:1})]),_:1}),a(t(T),null,{default:n(()=>[a(t(P),{icon:t(ue),slot:"start"},null,8,["icon"]),a(t(h),null,{default:n(()=>[i[2]||(i[2]=l("h3",null,"ARV Number",-1)),l("p",null,g(R.value.arvNumber),1)]),_:1})]),_:1}),a(t(T),null,{default:n(()=>[a(t(P),{icon:t(ea),slot:"start"},null,8,["icon"]),a(t(h),null,{default:n(()=>[i[3]||(i[3]=l("h3",null,"File Number",-1)),l("p",null,g(R.value.fileNumber),1)]),_:1})]),_:1}),a(t(T),null,{default:n(()=>[a(t(P),{icon:t(aa),slot:"start"},null,8,["icon"]),a(t(h),null,{default:n(()=>[i[4]||(i[4]=l("h3",null,"Current Outcome",-1)),l("p",null,g(R.value.currentOutcome),1)]),_:1})]),_:1})],64))]),_:1})]),_:1})]),_:1}))}}),Ga=Lt(Ha,[["__scopeId","data-v-7ec7b45c"]]),re=[{classDash:"dashed_bottom_border",radioBtnContent:{header:{title:"Is the pregnancy confirmed?*",class:"bold",selectedValue:"",name:"Pregnancy confirmed"},data:[{value:"Yes",name:"Yes",colSize:"2"},{value:"No",name:"No",colSize:"2"}]}},{classDash:"dashed_bottom_border",radioBtnContent:{header:{title:"Was the pregnancy planned?*",selectedValue:"",class:"bold",name:"Pregnancy planned"},data:[{value:"Yes",name:"Yes",colSize:"2"},{value:"No",name:"No",colSize:"2"}]}}],za=sa("ANCEnrollmentStore",{state:()=>({ConfirmPregnancy:[...re]}),actions:{setConfirmPregnancy($){this.ConfirmPregnancy=$},getInitial(){return[...Va.cloneDeep(re)]}}}),Fa={class:"header-content"},Wa={class:"title-section"},Ya={class:"tasks-container"},qa=["onClick"],ja={class:"task-icon-container"},Ka={class:"task-content"},Za={key:0,class:"task-status"},Ja={key:1,class:"empty-state"},Qa={class:"empty-icon"},Xa=Mt({__name:"TaskView",props:{tasks:{type:Object,required:!0}},setup($){const S=f([]),V=$;de(async()=>{const v=new xt;S.value=[];const i=await new Pa(v.getID()).getProgram();V.tasks.forEach(async d=>{var H,z,lt,it;const U={orderNumber:(H=d.sortOrder)!=null?H:9999,label:(z=d.displayName)!=null?z:d.name,icon:d.icon,disabled:!1,taskCompleted:!1,task:d};if(!(typeof d.workflowID=="string"&&!await Ba(d.workflowID))&&!(typeof d.condition=="function"&&!await d.condition(V.tasks))&&!(typeof d.globalProperty=="string"&&!await ka.isProp("".concat(d.globalProperty,"=true"))))return typeof d.allowTaskAfterDeath=="boolean"&&d.allowTaskAfterDeath===!1&&/died/i.test("".concat((lt=i==null?void 0:i.program)==null?void 0:lt.outcome))&&new Date(xt.getSessionDate())>=new Date((it=i==null?void 0:i.program)==null?void 0:it.startDate)&&(U.disabled=!0),typeof d.disabled=="function"&&(U.disabled=await d.disabled(V.tasks)),S.value.push(U),S.value.sort((rt,Ct)=>{var ut,dt;return((ut=rt.orderNumber)!=null?ut:9999)-((dt=Ct.orderNumber)!=null?dt:9999)}),d})});const R=v=>{if(!v.disabled){if(v.task.action)x(),v.task.action();else if(v.task.component&&v.task.isFormComponent){pe(Da,{},!1,{title:v.task.name,useComponent:v.task.component,onClose:x});return}}};function x(){ma.dismiss()}return(v,i)=>(r(),I(t(me),null,{default:n(()=>[a(t(oa),{class:"ion-no-border"},{default:n(()=>[a(t(la),{class:"custom-header"},{default:n(()=>[l("div",Fa,[l("div",Wa,[a(t(P),{icon:t(ia),class:"header-icon"},null,8,["icon"]),a(t(ra),{class:"custom-title"},{default:n(()=>[...i[0]||(i[0]=[c("Program Activities",-1)])]),_:1})]),a(t(ua),{onClick:x,fill:"clear",shape:"round"},{default:n(()=>[a(t(P),{icon:t(Tt)},null,8,["icon"])]),_:1})])]),_:1})]),_:1}),a(t(Vt),{class:"custom-content"},{default:n(()=>[l("div",Ya,[S.value&&S.value.length>0?(r(),I(t(da),{key:0,class:"tasks-grid"},{default:n(()=>[a(t(L),{class:"ion-justify-content-center"},{default:n(()=>[(r(!0),b(Z,null,yt(S.value,(d,U)=>(r(),I(t(m),{size:"12","size-sm":"6","size-md":"4","size-lg":"3",key:U,class:"task-col"},{default:n(()=>[l("div",{class:ce(["task-card",{"task-completed":d.taskCompleted,"task-disabled":d.disabled}]),onClick:H=>!d.disabled&&R(d)},[l("div",ja,[a(t(P),{color:d.taskCompleted?"success":"primary",icon:d.taskCompleted?t(te):d.icon,class:"task-icon"},null,8,["color","icon"])]),l("div",Ka,[a(t(h),{class:"task-label"},{default:n(()=>[c(g(d.label),1)]),_:2},1024),d.taskCompleted?(r(),b("div",Za,[a(t(P),{icon:t(te),color:"success"},null,8,["icon"]),i[1]||(i[1]=l("span",null,"Completed",-1))])):_("",!0)])],10,qa)]),_:2},1024))),128))]),_:1})]),_:1})):(r(),b("div",Ja,[l("div",Qa,[a(t(P),{icon:t(ca)},null,8,["icon"])]),i[2]||(i[2]=l("h3",null,"No Activities Yet",-1)),i[3]||(i[3]=l("p",null,"Your program activities will appear here once they're available.",-1))]))])]),_:1})]),_:1}))}}),tn=Lt(Xa,[["__scopeId","data-v-244ec438"]]);async function en($,S="tasks"){var x,v;const R=(x={1:wa}[$])!=null?x:{};pe(tn,{},!0,{tasks:(v=R==null?void 0:R[S])!=null?v:[]})}const an={key:5,class:"content_manager"},nn={style:{display:"flex","justify-content":"space-between"}},sn={class:"p_name_image"},on={style:{width:"100%"}},ln={class:"p_name"},rn={style:{display:"flex","justify-content":"space-between"}},un={class:"start-visit"},dn={class:"button-group"},cn={key:0,class:"send-button-container action-buttons"},mn={class:"send-button-container"},pn={class:"send-button-container"},fn={class:"send-button-container"},vn={style:{"padding-left":"10px","padding-right":"10px"}},_n={class:"vitalsUnits"},gn={style:{width:"100%",overflow:"scroll",height:"64px"}},yn={key:0,style:{"margin-top":"1px"}},Cn={key:0,class:"patient-chart"},bn={class:"patient-chart"},An={key:1,class:"patient-chart"},In={key:1},Pn={key:2},kn={key:3},Dn={key:4},wn={key:5},On={class:"rght-drpm"},Rn="NEONATAL PROGRAM",En=Mt({__name:"PatientProfile",setup($,{expose:S}){const V=w(()=>O(()=>import("./LabOrdersList-B_Y32l1G.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12]),import.meta.url)),R=w(()=>O(()=>import("./DiagnosesHistory-Dw1mY0_7.js"),__vite__mapDeps([13,1,2,3,4,5,6,14]),import.meta.url)),x=w(()=>O(()=>import("./AllergiesContraindication-BWGGb107.js"),__vite__mapDeps([15,1,2,3,4,5,6,16,17,18]),import.meta.url)),v=w(()=>O(()=>import("./VisitsHistory-iySNj1XI.js"),__vite__mapDeps([19,1,2,3,4,5,6,20]),import.meta.url)),i=w(()=>O(()=>import("./VitalsMeasurementsSummary-2ewlVaMu.js"),__vite__mapDeps([21,1,2,3,4,5,6,22]),import.meta.url)),d=w(()=>O(()=>import("./PatientProfile-ySOc9C8r.js"),__vite__mapDeps([23,1,2,3,4,5,6,24,25,26,27,28,29,0,7,8,9,10,11,12,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,16,17,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83]),import.meta.url)),U=w(()=>O(()=>import("./HTSPatientProfile-BDWEmIM_.js"),__vite__mapDeps([84,1,2,3,4,5,6,68,69,70,71,72,81,75,76,40,77,78,79,45,46,47,82,61,62,63,64,7,8,9,10,65,66,49,32,67,85]),import.meta.url)),H=w(()=>O(()=>import("./NeonatalPatientProfile-Bx7ZDI3Y.js"),__vite__mapDeps([86,1,2,3,4,5,6,81,75,76,68,69,70,71,72,40,77,78,79,45,46,47,82,61,62,63,87,64,7,8,9,10,65,66,49,32,67,88]),import.meta.url)),z=w(()=>O(()=>import("./AETCPatientProfile-HStfmhY-.js"),__vite__mapDeps([89,1,2,3,4,5,6,90,81,75,76,68,69,70,71,72,40,77,78,79,45,46,47,82,32,24,25,91,92,93,11,94,95]),import.meta.url)),lt=w(()=>O(()=>import("./WeightHeightChart-CbUviyC-.js"),__vite__mapDeps([61,4,1,2,3,5,6,62,63]),import.meta.url)),it=w(()=>O(()=>import("../index-B4PcD-tN.js").then(s=>s.cK),__vite__mapDeps([4,1,2,3,5,6]),import.meta.url)),rt=w(()=>O(()=>import("./BloodPressure-DtHdae80.js"),__vite__mapDeps([96,1,2,3,5,4,6,97]),import.meta.url)),Ct=w(()=>O(()=>import("./AncEnrollmentModal-BiUFP4TE.js"),__vite__mapDeps([98,1,2,3,4,5,6,7,8,9,10,90,11,81,75,76,68,69,70,71,72,40,77,78,79,45,46,47,82,32,24,25,94,99]),import.meta.url)),ut=w(()=>O(()=>import("./LabourEnrollmentModal-BQwGAH62.js"),__vite__mapDeps([100,1,2,3,4,5,6,75,76,68,69,70,71,72,40,77,78,79,7,8,9,10,90,11,81,45,46,47,82,32,24,25,94,101]),import.meta.url)),dt=w(()=>O(()=>import("./PNCEnrollmentModal-CivdW1rC.js"),__vite__mapDeps([102,1,2,3,4,5,6,75,76,68,69,70,71,72,40,77,78,79,7,8,9,10,90,11,81,45,46,47,82,32,24,25,94,103]),import.meta.url)),J=pa(),fe=fa(),ct=Oa(),ve=Ra(),_e=za(),{hasWaitingList:$t}=Ma(),{event:ge,popoverOpen:Ut,openPopover:Bt,openPIM:Ht,openOutCome:ye,openUpdateNCDNUmbers:Ce,printVisitSummary:be,printID:Ae,formatCurrentAddress:Ie}=La(),{screenWidth:bt}=Ea(),{patient:u}=Et(ct),{activeProgram:k,authorizedPrograms:Gt}=Et(ve),{ConfirmPregnancy:Pe}=Et(_e),mt=f(!1),ke=f(!0),De=f(!1),At=f(!1),we=f(!1),B=f("Patient Charts"),zt=f(null),N=f({}),F=f(!1),Q=f(!1),Ft=f(!1),Wt=f(!1),M=f([]),W=f(0),pt=f(),X=f(""),It=f(!1),Oe=s=>s==null?void 0:s.trim().toUpperCase(),Re=s=>s===E.NEONATAL_PROGRAM||s===E.HTC_PROGRAM,Ee=s=>Oe(s)===Rn,Ne=s=>{var D;if(!s)return!1;const e=(D=s.id)!=null?D:s.program_id;return Re(e)||Ee(s.name)},he=_t(()=>{var e,D;const s=(D=(e=u.value)==null?void 0:e.personInformation)==null?void 0:D.gender;return s==="Male"||s==="M"?Gt.value.filter(p=>p.name!=="ANC PROGRAM"&&p.name!=="LABOUR AND DELIVERY PROGRAM"&&p.name!=="PNC PROGRAM"):Gt.value.map(p=>{if(p.name==="ANC PROGRAM"||p.name==="LABOUR AND DELIVERY PROGRAM"||p.name==="PNC PROGRAM"){if(!(M!=null&&M.value))return;const o=M==null?void 0:M.value.some(y=>y.id===p.program_id);return{...p,actionName:o?"Start ".concat(p.name):"Enroll in ".concat(p.name)}}return p})}),Se=_t(()=>!F.value&&k.value.program_id==14),Te=_t(()=>F.value&&k.value.program_id==14),Yt=_t(()=>Ne(k.value)),Ve=()=>{var s,e;if((e=(s=u.value)==null?void 0:s.personInformation)!=null&&e.birthdate){const D=G.getAgeInYears(u.value.personInformation.birthdate);It.value=D<9}},xe=()=>{var s,e;(e=(s=u.value)==null?void 0:s.personInformation)!=null&&e.birthdate&&(ke.value=G.getAgeInYears(u.value.personInformation.birthdate)>=14,De.value=G.ageInMonths(u.value.personInformation.birthdate)<9,At.value=G.getAgeInYears(u.value.personInformation.birthdate)<5,we.value=G.dateDiffInDays(G.sessionDate(),u.value.personInformation.birthdate)<42)},Y=s=>{B.value=s},Me=()=>[{backgroundColor:"#B9E6FE",status:"",icon:Nt(["#B9E6FE","#026AA2","#9ADBFE"]),textColor:"#026AA2",value:"No further action is required.",name:"",index:"Blood sugar is normal"},{backgroundColor:"#FEDF89",status:"",icon:Nt(["#FEDF89","#B54708","#FED667"]),textColor:"#B54708",value:"Please call or follow up!",name:"",index:"Patient Defaulted"},{backgroundColor:"#FECDCA",status:"",icon:Nt(["#FECDCA","#B42318","#FDA19B"]),textColor:"#B42318",value:"Administer medications!",name:"",index:"Patient is hypertensive"}],Le=async()=>{if(k.value.program_id==14)try{const s=await ie(ct.patient.ID);if(!s)return;F.value=!!s.length}catch(s){console.error(s)}},Pt=f(!1),$e=async()=>{try{await se("Are you sure you want to create the visit?")&&(Pt.value=!0,await ha(ct.patient)&&(F.value=!0,await oe().refresh(at.getUserLocationId()),j("The patient visit is now active. Patient is on the waiting list for vitals")))}catch(s){console.error("error activating visit: ",s)}finally{Pt.value=!1}},kt=f(!1),Ue=async()=>{try{await se("Are you sure you want to close the visit?")&&(kt.value=!0,await Sa(u.value)&&(F.value=!1,await oe().refresh(at.getUserLocationId()),j("The patient visit is now closed")))}catch(s){console.error("error: ",s)}finally{kt.value=!1}},Be=async()=>{if(k.value.program_id==14)try{const s=await ie(ct.patient.ID);F.value=s.length>0}catch(s){console.error(s)}},He=s=>{zt.value=s,mt.value=!mt.value},qt=(s="tasks")=>en(k.value.program_id,s),Dt=f(!1),jt=async s=>{var e,D,p,o,y;Dt.value=!0;try{if(await tt(),(s.program_id==E.ANC_PROGRAM||s.program_id==E.PNC_PROGRAM||s.program_id==E.LABOUR_AND_DELIVERY_PROGRAM)&&!((e=M==null?void 0:M.value)==null?void 0:e.find(ft=>ft.id==s.program_id))){if(s.program_id==E.ANC_PROGRAM){Q.value=!0,W.value=s.program_id;return}else if(s.program_id==E.LABOUR_AND_DELIVERY_PROGRAM){Ft.value=!0,X.value="Are you sure you want to enroll ".concat((p=(D=u.value)==null?void 0:D.personInformation)==null?void 0:p.given_name.toUpperCase()," in this program?"),W.value=s.program_id;return}else if(s.program_id==E.PNC_PROGRAM){Wt.value=!0,X.value="Are you sure you want to enroll ".concat((y=(o=u.value)==null?void 0:o.personInformation)==null?void 0:y.given_name.toUpperCase()," in this program?"),W.value=s.program_id;return}}const A=await le.userProgramData(u.value.patientID,s);if(s.program_id===14)if(A!=null&&A.canProceed&&A.url&&A.stage){const C=Ge(A.stage);if(!C){st("Unable to determine patient stage");return}if($t(C))return J.push(A.url);st("You don't have access to the ".concat(C.toLowerCase()));return}else{st("The visit is not activated");return}if(A!=null&&A.url)return J.push(A.url)}catch(A){console.error("error: ",A)}finally{Dt.value=!1}},Ge=s=>{switch(s){case"VITALS":return"Waiting for Vitals";case"CONSULTATION":return"Waiting for Consultation";case"LAB":return"Waiting for Laboratory";case"DISPENSATION":return"Waiting for Dispensation";default:return null}},wt=()=>{Q.value=!1},Kt=()=>{Q.value=!Q.value},ze=async()=>{const s=at.getUserID(),e=new xa(u.value.patientID,s);if(!await e.createEncounter())return st("Unable to create quick check encounter");const p=await e.saveObservationList(await Ke());try{await ot.enrollProgram(u.value.patientID,W.value,new Date().toString()),j("Enrollment is successful")}catch(o){j("Already Enrolled")}return p?(await tt(),Kt(),J.push("ANCHome")):st("Unable to create quick check details!")},Fe=async()=>(await ot.enrollProgram(u.value.patientID,W.value,new Date().toString()),await tt(),j("Enrollment is successful"),J.push("LabourHome")),We=async()=>(await ot.enrollProgram(u.value.patientID,W.value,new Date().toString()),await tt(),j("Enrollment is successful"),J.push("PNCHome")),tt=async()=>{const s=u.activePrograms;M.value=s==null?void 0:s.map(e=>({name:e.program.name,id:e.program_id}))},Ot=()=>{Kt()},Rt=async()=>{xe(),await Ye(),await Le(),await Be(),await le.userProgramData(u.value.patientID),await tt(),Ve()},Ye=async()=>{N.value={},pt.value="";const s=await K.getConceptID("Height (cm)"),e=await K.getConceptID("Weight (kg)"),D=await K.getConceptID("Systolic blood pressure"),p=await K.getConceptID("Diastolic blood pressure"),o=await K.getConceptID("Temperature (c)"),y=await K.getConceptID("Pulse");(await Ta.getLatestObsByEncounterIdAndConcepts(6,[s,e,D,p,o,y])).forEach(C=>{C.concept_id===s?N.value.height=C.value_numeric:C.concept_id===e?N.value.weight=C.value_numeric:C.concept_id===D?N.value.systolic=C.value_numeric:C.concept_id===p?N.value.diastolic=C.value_numeric:C.concept_id===o?N.value.temperature=C.value_numeric:C.concept_id===y&&(N.value.pulse=C.value_numeric)}),pt.value=new xt().getBloodGlucose(u.value)},qe=s=>s=="Undetermined"?"Undetermined":["Male","M"].includes(s)?"Male":["Female","F"].includes(s)?"Female":"",je=()=>{var s,e;return G.getBirthdateAge((e=(s=u.value)==null?void 0:s.personInformation)==null?void 0:e.birthdate)},Ke=async()=>await $a(Pe.value);return de(async()=>{await Rt()}),ht(()=>u.value,async()=>{await Rt()},{deep:!0}),ht(fe,async s=>{await Rt()},{deep:!0}),S({showUnderageWarning:It}),(s,e)=>{const D=ee("ion-list"),p=ee("ion-popover");return r(),I(t(me),null,{default:n(()=>[a(Na),a(t(Vt),{fullscreen:!0},{default:n(()=>[t(k).program_id!==33&&t(k).program_id!=""&&t(bt)<1120?(r(),I(Ua,{key:0,onOpenPopover:e[0]||(e[0]=o=>t(Bt)(o))})):_("",!0),a(t(Ct),{closeModalFunc:wt,onYes:ze,onNo:Ot,isOpen:Q.value,title:X.value,showUnderageWarning:It.value},null,8,["isOpen","title","showUnderageWarning"]),a(t(ut),{closeModalFunc:wt,onYes:Fe,onNo:Ot,isOpen:Ft.value,title:X.value},null,8,["isOpen","title"]),a(t(dt),{closeModalFunc:wt,onYes:We,onNo:Ot,isOpen:Wt.value,title:X.value},null,8,["isOpen","title"]),t(k).program_id==t(E).IMMUNIZATION_PROGRAM?(r(),I(t(d),{key:1,updateData:t(u)},null,8,["updateData"])):_("",!0),t(k).program_id==t(E).HTS_PROGRAM?(r(),I(t(U),{key:2,updateData:t(u)},null,8,["updateData"])):_("",!0),t(k).program_id==t(E).AETC_PROGRAM?(r(),I(t(z),{key:3,updateData:t(u)},null,8,["updateData"])):_("",!0),Yt.value?(r(),I(t(H),{key:4})):_("",!0),t(k).program_id!==t(E).AETC_PROGRAM&&t(k).program_id!==t(E).IMMUNIZATION_PROGRAM&&t(k).program_id!==t(E).HTS_PROGRAM&&!Yt.value&&t(k).program_id!=""?(r(),b("div",an,[a(t(L),{class:"content_width"},{default:n(()=>[a(t(m),{size:"2.5","size-lg":"2.6","size-md":"3",class:"displayNoneLeftPanel"},{default:n(()=>[a(t(gt),{style:{"margin-bottom":"20px","background-color":"#fff"}},{default:n(()=>[a(t(St),null,{default:n(()=>{var o,y,A,C,ft,Zt,Jt,Qt;return[l("div",nn,[e[22]||(e[22]=l("div",null,null,-1)),l("div",{class:"name",style:{color:"var(--ion-color-primary)","margin-top":"10px"},onClick:e[1]||(e[1]=et=>t(Bt)(et))},[a(t(P),{icon:t(va),style:{"font-size":"2.2rem"}},null,8,["icon"])])]),l("div",sn,[l("div",{class:ce(((y=(o=t(u))==null?void 0:o.personInformation)==null?void 0:y.gender)=="M"?"initialsBox maleColor":"initialsBox femaleColor"),onClick:e[2]||(e[2]=et=>t(Ht)())},[a(t(P),{style:{color:"#fff","font-size":"70px"},icon:t(_a)},null,8,["icon"])],2),l("div",on,[l("div",ln,g((C=(A=t(u))==null?void 0:A.personInformation)==null?void 0:C.given_name)+" "+g((Zt=(ft=t(u))==null?void 0:ft.personInformation)==null?void 0:Zt.middle_name)+" "+g((Qt=(Jt=t(u))==null?void 0:Jt.personInformation)==null?void 0:Qt.family_name),1)])]),a(t(L),null,{default:n(()=>[a(t(m),{size:"4"},{default:n(()=>[...e[23]||(e[23]=[c("MRN:",-1)])]),_:1}),a(t(m),{class:"demoContent"},{default:n(()=>[c(g(t(u).ID),1)]),_:1})]),_:1}),t(k).program_id===32?(r(),I(t(L),{key:0},{default:n(()=>[a(t(m),{size:"4"},{default:n(()=>[...e[24]||(e[24]=[c("NCDNumber:",-1)])]),_:1}),a(t(m),{class:"demoContent"},{default:n(()=>[c(g(t(u).NcdID),1)]),_:1})]),_:1})):_("",!0),a(t(L),null,{default:n(()=>[a(t(m),{size:"4"},{default:n(()=>[...e[25]||(e[25]=[c("Gender:",-1)])]),_:1}),a(t(m),{class:"demoContent"},{default:n(()=>{var et,Xt;return[c(g(qe((Xt=(et=t(u))==null?void 0:et.personInformation)==null?void 0:Xt.gender)),1)]}),_:1})]),_:1}),a(t(L),null,{default:n(()=>[a(t(m),{size:"4"},{default:n(()=>[...e[26]||(e[26]=[c("Age:",-1)])]),_:1}),a(t(m),{class:"demoContent"},{default:n(()=>[c(g(je()),1)]),_:1})]),_:1}),a(t(L),null,{default:n(()=>[a(t(m),{size:"4"},{default:n(()=>[...e[27]||(e[27]=[c("Address:",-1)])]),_:1}),a(t(m),{class:"demoContent"},{default:n(()=>[c(g(t(Ie)(t(u))),1)]),_:1})]),_:1})]}),_:1})]),_:1}),t(at).getProgramID()===1?(r(),I(Ga,{key:0,patient:t(u)},null,8,["patient"])):_("",!0),a(t(gt),{style:{"margin-bottom":"20px","background-color":"#fff"}},{default:n(()=>[a(t(ga),{value:["first"]},{default:n(()=>[a(t(ya),{value:"first",style:{"background-color":"#fff"},"toggle-icon-slot":"start"},{default:n(()=>[a(t(T),{slot:"header",color:"white"},{default:n(()=>[a(t(h),{class:"side_title"},{default:n(()=>[...e[28]||(e[28]=[c("Alerts & Reminders ",-1)])]),_:1})]),_:1}),a(t(St),{slot:"content"},{default:n(()=>[(r(!0),b(Z,null,yt(Me(),(o,y)=>(r(),b("span",{key:y},[o.value?(r(),I(t(L),{key:0,style:ae("border-radius: 5px;  margin-top:10px; margin-bottom:10px;background-color:"+o.backgroundColor)},null,8,["style"])):_("",!0)]))),128))]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),a(t(m),{offset:"0.07","size-sm":"12","size-md":"12","size-lg":t(bt)>1120?"9.33":"12"},{default:n(()=>[a(t(gt),{style:{"background-color":"#fff","margin-inline":"0px",contain:"unset",overflow:"unset"}},{default:n(()=>[l("div",null,[l("div",rn,[e[29]||(e[29]=l("div",{class:"vitalsTitle"},"Most recent Vitals & Biometrics",-1)),l("div",un,[l("div",dn,[t($t)("Waiting for Laboratory")?_("",!0):(r(),b("div",cn,[Se.value?(r(),I(nt,{key:0,name:"Activate visit",onClick:e[3]||(e[3]=o=>$e()),loading:Pt.value,fill:"clear",iconSlot:"start",icon:t(Tt),class:"action-button"},null,8,["loading","icon"])):_("",!0),Te.value?(r(),I(nt,{key:1,name:"Deactivate Visit",onClick:e[4]||(e[4]=o=>Ue()),loading:kt.value,fill:"clear",iconSlot:"start",icon:t(Tt),class:"action-button danger"},null,8,["loading","icon"])):_("",!0)])),l("div",mn,[a(nt,{name:"Tasks","onClicked:btn":e[5]||(e[5]=o=>qt()),class:"send-text",fill:"clear",color:"secondary"})]),l("div",pn,[a(nt,{name:"Printout/Other","onClicked:btn":e[6]||(e[6]=o=>qt("other")),class:"send-text",fill:"solid",color:"secondary"})]),l("div",fn,[a(nt,{name:"Start visit","onClicked:btn":e[7]||(e[7]=o=>jt(t(k))),loading:Dt.value,textFontSize:"12px",class:"send-text"},null,8,["loading"]),l("button",{class:"send-arrow",onClick:e[8]||(e[8]=o=>He(o))})])])])])]),l("div",vn,[a(t(L),null,{default:n(()=>[a(t(m),{class:"vitalsHeading"},{default:n(()=>[...e[30]||(e[30]=[c("Weight",-1)])]),_:1}),a(t(m),{class:"vitalsHeading"},{default:n(()=>[...e[31]||(e[31]=[c("Height",-1)])]),_:1}),a(t(m),{class:"vitalsHeading"},{default:n(()=>[...e[32]||(e[32]=[c("Temperature",-1)])]),_:1}),a(t(m),{class:"vitalsHeading"},{default:n(()=>[...e[33]||(e[33]=[c("Blood glucose",-1)])]),_:1}),a(t(m),{class:"vitalsHeading"},{default:n(()=>[...e[34]||(e[34]=[c("Pulse Rate",-1)])]),_:1}),a(t(m),{class:"vitalsHeading"},{default:n(()=>[...e[35]||(e[35]=[c("Blood pressure",-1)])]),_:1})]),_:1}),a(t(L),null,{default:n(()=>[a(t(m),{class:"vitalsValue"},{default:n(()=>{var o;return[c(g((o=N.value)==null?void 0:o.weight)+" ",1),e[36]||(e[36]=l("span",{class:"vitalsUnits"},"kg",-1))]}),_:1}),a(t(m),{class:"vitalsValue"},{default:n(()=>{var o;return[c(g((o=N.value)==null?void 0:o.height)+" ",1),e[37]||(e[37]=l("span",{class:"vitalsUnits"},"cm",-1))]}),_:1}),a(t(m),{class:"vitalsValue"},{default:n(()=>{var o;return[c(g((o=N.value)==null?void 0:o.temperature)+" ",1),e[38]||(e[38]=l("span",{class:"vitalsUnits"},"Â°C",-1))]}),_:1}),a(t(m),{class:"vitalsValue"},{default:n(()=>{var o,y;return[c(g((o=pt.value)==null?void 0:o.value)+" ",1),l("span",_n,g((y=pt.value)==null?void 0:y.unit),1)]}),_:1}),a(t(m),{class:"vitalsValue"},{default:n(()=>{var o;return[c(g((o=N.value)==null?void 0:o.pulse)+" ",1),e[39]||(e[39]=l("span",{class:"vitalsUnits"},"bpm ",-1))]}),_:1}),a(t(m),{class:"vitalsValue"},{default:n(()=>{var o,y;return[c(g((o=N.value)==null?void 0:o.systolic)+"/"+g((y=N.value)==null?void 0:y.diastolic),1),e[40]||(e[40]=l("span",{class:"vitalsUnits"},"mmhg",-1))]}),_:1})]),_:1})])]),_:1}),l("div",gn,[a(t(Ca),{value:B.value,style:{"margin-top":"5px","min-width":"540px"}},{default:n(()=>[a(t(q),{value:"Patient Charts",onClick:e[9]||(e[9]=o=>Y("Patient Charts"))},{default:n(()=>[a(t(h),null,{default:n(()=>[...e[41]||(e[41]=[c("Patient Charts",-1)])]),_:1})]),_:1}),a(t(q),{value:"Visits History",onClick:e[10]||(e[10]=o=>Y("Visits History"))},{default:n(()=>[a(t(h),null,{default:n(()=>[...e[42]||(e[42]=[c("Visits History",-1)])]),_:1})]),_:1}),a(t(q),{value:"Vitals & Measurements Summary",onClick:e[11]||(e[11]=o=>Y("Vitals & Measurements Summary"))},{default:n(()=>[a(t(h),null,{default:n(()=>[...e[43]||(e[43]=[c("Vitals & Measurements Summary",-1)])]),_:1})]),_:1}),a(t(q),{value:"Lab Tests History",onClick:e[12]||(e[12]=o=>Y("Lab Tests History"))},{default:n(()=>[a(t(h),null,{default:n(()=>[...e[44]||(e[44]=[c("Lab Tests History",-1)])]),_:1})]),_:1}),a(t(q),{value:"Diagnosis History",onClick:e[13]||(e[13]=o=>Y("Diagnosis History"))},{default:n(()=>[a(t(h),null,{default:n(()=>[...e[45]||(e[45]=[c("Diagnosis History",-1)])]),_:1})]),_:1}),a(t(q),{value:"Allergies & Contraindication",onClick:e[14]||(e[14]=o=>Y("Allergies & Contraindication"))},{default:n(()=>[a(t(h),null,{default:n(()=>[...e[46]||(e[46]=[c("Allergies & Contraindication",-1)])]),_:1})]),_:1})]),_:1},8,["value"])]),B.value=="Patient Charts"?(r(),b("div",yn,[l("div",{style:ae(t(bt)>826?"display: flex;":"display: block;")},[At.value?(r(),b("div",Cn,[a(t(lt))])):_("",!0),l("div",bn,[a(t(rt))]),At.value?_("",!0):(r(),b("div",An,[a(t(it))]))],4)])):_("",!0),B.value=="Visits History"?(r(),b("div",In,[a(t(v))])):_("",!0),B.value=="Vitals & Measurements Summary"?(r(),b("div",Pn,[a(t(i))])):_("",!0),B.value=="Lab Tests History"?(r(),b("div",kn,[a(t(V))])):_("",!0),B.value=="Diagnosis History"?(r(),b("div",Dn,[a(t(R))])):_("",!0),B.value=="Allergies & Contraindication"?(r(),b("div",wn,[a(t(x))])):_("",!0)]),_:1},8,["size-lg"])]),_:1})])):_("",!0)]),_:1}),a(p,{style:{"--offset-x":"-10px"},"is-open":t(Ut),"show-backdrop":!1,"dismiss-on-select":!0,event:t(ge),onDidDismiss:e[20]||(e[20]=o=>Ut.value=!1)},{default:n(()=>[l("div",null,[a(D,{style:{"--ion-background-color":"#fff","--offset-x":"-30px"}},{default:n(()=>[a(t(T),{button:!0,detail:!1,onClick:e[15]||(e[15]=o=>t(Ht)()),style:{cursor:"pointer"},class:"list-content"},{default:n(()=>[a(t(P),{icon:t(ba),slot:"start",class:"sub-menu-icon"},null,8,["icon"]),e[47]||(e[47]=l("span",{class:"sub-menu-txt"},"Update demographics",-1))]),_:1}),a(t(T),{button:!0,detail:!1,onClick:e[16]||(e[16]=o=>t(ye)()),style:{cursor:"pointer"},class:"list-content"},{default:n(()=>[a(t(P),{icon:t(Aa),slot:"start",class:"sub-menu-icon"},null,8,["icon"]),e[48]||(e[48]=l("span",{class:"sub-menu-txt"},"Update outcome",-1))]),_:1}),t(at).getProgramID()==32?(r(),I(t(T),{key:0,button:!0,detail:!1,onClick:e[17]||(e[17]=o=>t(Ce)()),style:{cursor:"pointer"},class:"list-content"},{default:n(()=>[a(t(P),{icon:t(ue),slot:"start",class:"sub-menu-icon"},null,8,["icon"]),e[49]||(e[49]=l("span",{class:"sub-menu-txt"},"Update NCD Number",-1))]),_:1})):_("",!0),a(t(T),{button:!0,detail:!1,onClick:e[18]||(e[18]=o=>t(be)()),style:{cursor:"pointer"},class:"list-content"},{default:n(()=>[a(t(P),{icon:t(ne),slot:"start",class:"sub-menu-icon"},null,8,["icon"]),e[50]||(e[50]=l("span",{class:"sub-menu-txt"},"Print visit summary",-1))]),_:1}),a(t(T),{button:!0,detail:!1,onClick:e[19]||(e[19]=o=>t(Ae)()),style:{cursor:"pointer"},class:"list-content"},{default:n(()=>[a(t(P),{icon:t(ne),slot:"start",class:"sub-menu-icon"},null,8,["icon"]),e[51]||(e[51]=l("span",{class:"sub-menu-txt"},"Print client identifier",-1))]),_:1})]),_:1})])]),_:1},8,["is-open","event"]),a(p,{"is-open":mt.value,"show-backdrop":!1,"dismiss-on-select":!0,event:zt.value,onDidDismiss:e[21]||(e[21]=o=>mt.value=!1),style:{"--width":"350px"}},{default:n(()=>[a(t(Vt),null,{default:n(()=>[a(D,null,{default:n(()=>[(r(!0),b(Z,null,yt(he.value,(o,y)=>(r(),I(t(T),{button:!0,detail:!1,style:{cursor:"pointer"},key:y,onClick:A=>jt(o)},{default:n(()=>[a(t(P),{slot:"start",icon:t(Ia)},null,8,["icon"]),l("span",On,g(o==null?void 0:o.actionName),1)]),_:2},1032,["onClick"]))),128))]),_:1})]),_:1})]),_:1},8,["is-open","event"])]),_:1})}}}),Nn=Lt(En,[["__scopeId","data-v-0b2776ca"]]),Bn=Object.freeze(Object.defineProperty({__proto__:null,default:Nn},Symbol.toStringTag,{value:"Module"}));export{Ga as A,Bn as P,za as u};
