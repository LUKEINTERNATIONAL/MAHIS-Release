import{d as w,ah as B,a5 as D,a4 as E,dq as L,dr as z,a6 as k,a3 as M,di as A,eT as O,H as l,e as T,f as p,l as s,k as n,J as r,p as d,F as b,P as U,K as _,Q as v,i as P,b8 as I,O as J}from"./vendor-DoZkSJso.js";import{N}from"./NavigationMenu-CcM9XJgj.js";import{P as R,A as q}from"./AEFIReportTemplate-CCrSkJdF.js";import{c as H,d as K,e as Q}from"./vaccines_service-CQ7yhFHd.js";import{E as S}from"./EIRreportsStore-BwOyTE6V.js";import{P as $,u as j,m as G,_ as x}from"../index-gGhCNNm-.js";import"./lodash-NJiRuGo9.js";import"./bottomNavBar-DVV0F7DQ.js";import"./sms_service-DxUxqMsi.js";import"./Export-ZturoHo9.js";import"./apexcharts-BgIpHCiE.js";const W=w({name:"TableComponent",components:{IonContent:M,IonPage:k,IonFab:z,IonFabButton:L,NavigationMenu:N,IonRow:E,IonCol:D,PersonCardComponent:R},data(){return{selectedSection:"",selectedColumn:"",tableData:[],fileTray:O,downloadOutline:A,exportReportToCSV:Q,peopleArray:[{id:1,firstName:"John",lastName:"Doe",age:30,dob:"1993-05-15",sex:"Male"},{id:2,firstName:"Jane",lastName:"Smith",age:28,dob:"1995-09-22",sex:"Female"}]}},watch:{$route:{async handler(e){e.name=="EIRReport"&&await this.getDrugs(),await this.initReport()},deep:!0}},computed:{...B(S,["start_date","end_date","navigationPayload"])},async mounted(){await this.getDrugs(),await this.initReport()},methods:{selectSection(e){this.selectedSection=e,this.selectedColumn=""},selectColumn(e){this.selectedColumn=e,this.selectedSection=""},async initReport(){const e=await K(this.start_date,this.end_date);e.less_than_one_year.forEach(t=>{this.fillCells(t,"lessThan1y")}),e.greater_than_one_year.forEach(t=>{this.fillCells(t,"moreThan1y")})},fillCells(e,t){this.tableData.forEach(a=>{if(a.drug.name==e.value_text&&t in a.fixed){let i=t+"Persons",c=a.fixed[t];a.fixed[t]=c+1,a.fixed[i].push(e)}})},async getDrugs(){const e=await H(),t=[];e.forEach(i=>{const c={label:i.name,fixed:{lessThan1y:0,moreThan1y:0,lessThan1yPersons:[],moreThan1yPersons:[]},outreach:{lessThan1y:0,moreThan1y:0},drug:i};t.push(c)}),this.tableData=t,S().setImmunizationMonthlyRepoartData(this.tableData)},openPersonCardComponent(e){console.log(e);const t=i=>{this.openPatientProfile(i.detail.client_id)},a={people:e,headingText:"Immunization (Client Drill Down | ".concat(this.navigationPayload.subTxt,")")};G(R,{class:"large-modal"},!0,a,{"view-client":t})},async openPatientProfile(e){(await $.findByID(e)).patient_identifiers.forEach(async a=>{if(a.identifier_type==3){const i=await $.findByNpid(a.identifier);await j().setPatientRecord(i[0]),this.$router.push("patientProfile")}})}}}),X={class:"custom-table"},Y=["onUpdate:modelValue"],Z=["onUpdate:modelValue"];function ee(e,t,a,i,c,V){const u=l("ion-col"),h=l("ion-row"),f=l("ion-icon"),y=l("ion-fab-button"),C=l("ion-fab"),g=l("pan");return p(),T(b,null,[s(h,null,{default:r(()=>[s(u,null,{default:r(()=>[...t[6]||(t[6]=[n("h1",{style:{width:"100%","text-align":"left","font-weight":"400"}},"Immunization",-1)])]),_:1})]),_:1}),s(C,{slot:"fixed",horizontal:"end",vertical:"top",onClick:e.exportReportToCSV},{default:r(()=>[s(y,null,{default:r(()=>[s(f,{icon:e.downloadOutline},null,8,["icon"])]),_:1})]),_:1},8,["onClick"]),n("table",X,[t[9]||(t[9]=n("colgroup",null,[n("col",{style:{width:"20%"}}),n("col",{style:{width:"20%"}}),n("col",{style:{width:"20%"}}),n("col",{style:{width:"20%"}}),n("col",{style:{width:"20%"}})],-1)),n("thead",null,[n("tr",null,[t[7]||(t[7]=n("th",null,null,-1)),n("th",{colspan:"2",onClick:t[0]||(t[0]=o=>e.selectSection("fixed")),class:d({selected:e.selectedSection==="fixed"})},"Static",2),n("th",{colspan:"2",onClick:t[1]||(t[1]=o=>e.selectSection("outreach")),class:d({selected:e.selectedSection==="outreach"})},"Outreach",2)]),n("tr",null,[t[8]||(t[8]=n("th",null,null,-1)),n("th",{onClick:t[2]||(t[2]=o=>e.selectColumn("fixedLessThan1y")),class:d({selected:e.selectedColumn==="fixedLessThan1y"})},"<1y",2),n("th",{onClick:t[3]||(t[3]=o=>e.selectColumn("fixedMoreThan1y")),class:d({selected:e.selectedColumn==="fixedMoreThan1y"})},">1y",2),n("th",{onClick:t[4]||(t[4]=o=>e.selectColumn("outreachLessThan1y")),class:d({selected:e.selectedColumn==="outreachLessThan1y"})},"<1y",2),n("th",{onClick:t[5]||(t[5]=o=>e.selectColumn("outreachMoreThan1y")),class:d({selected:e.selectedColumn==="outreachMoreThan1y"})},">1y",2)])]),n("tbody",null,[(p(!0),T(b,null,U(e.tableData,(o,F)=>(p(),T("tr",{key:F},[n("td",null,_(o.label),1),n("td",{class:d({selected:e.selectedSection==="fixed"||e.selectedColumn==="fixedLessThan1y"})},[s(g,{onClick:m=>e.openPersonCardComponent(o.fixed.lessThan1yPersons)},{default:r(()=>[v(_(o.fixed.lessThan1y),1)]),_:2},1032,["onClick"])],2),n("td",{class:d({selected:e.selectedSection==="fixed"||e.selectedColumn==="fixedMoreThan1y"})},[s(g,{onClick:m=>e.openPersonCardComponent(o.fixed.moreThan1yPersons)},{default:r(()=>[v(_(o.fixed.moreThan1y),1)]),_:2},1032,["onClick"])],2),n("td",{class:d({selected:e.selectedSection==="outreach"||e.selectedColumn==="outreachLessThan1y"})},[P(n("input",{"onUpdate:modelValue":m=>o.outreach.lessThan1y=m,class:"editable-input"},null,8,Y),[[I,o.outreach.lessThan1y]])],2),n("td",{class:d({selected:e.selectedSection==="outreach"||e.selectedColumn==="outreachMoreThan1y"})},[P(n("input",{"onUpdate:modelValue":m=>o.outreach.moreThan1y=m,class:"editable-input"},null,8,Z),[[I,o.outreach.moreThan1y]])],2)]))),128))])])],64)}const te=x(W,[["render",ee],["__scopeId","data-v-5b5a0e38"]]),ne=w({name:"TableComponent",components:{IonContent:M,IonPage:k,NavigationMenu:N,AEFIReportTemplate:q,EIR_Report_Template:te,IonRow:E,IonCol:D},data(){return{}},watch:{},computed:{},async mounted(){},methods:{}});function oe(e,t,a,i,c,V){const u=l("NavigationMenu"),h=l("EIR_Report_Template"),f=l("AEFIReportTemplate"),y=l("ion-content"),C=l("ion-page");return p(),J(C,null,{default:r(()=>[s(u),s(y,{class:"ion-padding"},{default:r(()=>[s(h),s(f)]),_:1})]),_:1})}const fe=x(ne,[["render",oe],["__scopeId","data-v-caf79033"]]);export{fe as default};
