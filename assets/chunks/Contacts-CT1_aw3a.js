import{d as T,e as x,f as h,k as o,l as r,O as g,m as j,u as s,L as $,cl as K,K as S,p as Q,c8 as D,H as M,J as v,j as q,aa as X,I as Z,ab as L,F as E,R as O,r as A,b2 as H,Q as ee,c as k,am as Y,c6 as te,eB as ae,ca as oe,cg as ne,eS as ie,a as re,bT as le,dq as se,eT as ce,eU as ue,P as de,ae as pe}from"./vendor-Do41i3tR.js";import{_ as P,S as me,u as W,D as y,J as F,H as ve,b as R,F as I,I as fe,x as i,n as u,y as U,z,t as G,T as he,o as V}from"../index-DmWNBpr9.js";import{D as ye}from"./DemographicBar-C9QNE1qW.js";import{u as be}from"./useLocation-zxaj1Df3.js";import{P as _e}from"./patient_diagnosis_service-JLNpMt4z.js";import"./lodash-NJiRuGo9.js";import"./apexcharts-DB4uOJSt.js";const ge={class:"icon-container"},Te={class:"card-title"},Ce=T({__name:"ANCCard",props:{icon:{},title:{},isSaved:{type:Boolean,default:!1}},emits:["click"],setup(l,{emit:n}){const a=n;return(d,e)=>(h(),x("div",{class:Q(["card",{"card-saved":l.isSaved}]),onClick:e[0]||(e[0]=c=>a("click"))},[o("div",ge,[r(s($),{icon:l.icon,class:"card-icon"},null,8,["icon"]),l.isSaved?(h(),g(s($),{key:0,icon:s(K),class:"check-icon"},null,8,["icon"])):j("",!0)]),o("div",Te,S(l.title),1)],2))}}),Se=P(Ce,[["__scopeId","data-v-2f6e2295"]]),Fe={class:"header-gradient"},Ae={class:"header-content"},De={class:"title-section"},Pe={class:"icon-wrapper"},Ne={class:"title-text"},Ve={class:"subtitle"},xe={class:"header-actions"},Oe=T({__name:"StandardModal",props:{title:{default:"Title"},subtitle:{default:"Sub title"},headerIcon:{default:D}},setup(l){const n=()=>{O.dismiss({saved:!1})};return(a,d)=>{const e=M("ion-icon");return h(),x(E,null,[r(s(Z),{class:"modern-header"},{default:v(()=>[o("div",Fe,[o("div",Ae,[o("div",De,[o("div",Pe,[r(e,{icon:l.headerIcon,class:"header-icon"},null,8,["icon"])]),o("div",Ne,[o("h1",null,S(l.title),1),o("p",Ve,S(l.subtitle),1)])]),o("div",xe,[q(a.$slots,"top-buttons",{},void 0,!0),o("button",{onClick:n,class:"close-button","aria-label":"Close modal"},[r(e,{icon:s(X)},null,8,["icon"])])])])])]),_:3}),r(s(L),{class:"modal-content"},{default:v(()=>[q(a.$slots,"content",{},void 0,!0)]),_:3})],64)}}}),w=P(Oe,[["__scopeId","data-v-a7b9a829"]]),ke={class:"calendar-container"},Re={class:"calendar-selector"},Ie={class:"calendar-day"},we={class:"day-wrapper"},Be={class:"count-badge"},$e=T({__name:"NextAppointment",setup(l){const n=A(null),a=A(new Date(me.getSessionDate())),d=W(),{patient:e}=H(d),c=async()=>{if(!n.value)return;const m=await F.buildValueDate("Appointment date",ve.toStandardHisFormat(n.value));await F.addObsToEncounterPatient([m],R.APPOINTMENT)&&I("next Appointment Set Successfully"),await fe(e.value),O.dismiss()},t=m=>"",p=async m=>{m&&(n.value=m)};return(m,b)=>{const N=M("VueDatePicker");return h(),g(w,{title:"Next Appointment ",subtitle:"ANC Next Appointment",headerIcon:s(D)},{"top-buttons":v(()=>[r(y,{name:"Save Appointment",onClick:c,fill:"solid",class:"save-button"})]),content:v(()=>[o("div",ke,[b[1]||(b[1]=o("h2",{class:"calendar-title"},"Set Appointments",-1)),o("div",Re,[r(N,{class:"calendar",onDateUpdate:p,inline:"","auto-apply":"","enable-time-picker":!1,"min-date":a.value,modelValue:n.value,"onUpdate:modelValue":b[0]||(b[0]=C=>n.value=C)},{day:v(({day:C,date:f})=>[o("p",Ie,[o("span",we,[ee(S(C)+" ",1),o("sup",Be,S(t(f)),1)])])]),_:1},8,["min-date","modelValue"])])])]),_:1},8,["headerIcon"])}}}),qe=P($e,[["__scopeId","data-v-3ca86ed3"]]),Me=()=>{const{facilityList:l,getFacilities:n}=be(),a=A([]),d=async t=>{const p=t.trim().toLowerCase()||"";return a.value=await _e.getDiagnosis(p,1,15),a.value};d(""),n();const e=["Walking","Ambulance","Public transport","Private transport","Police vehicle","Other public or company vehicle","Motorcycle","Taxi (car/motorcycle)","Bicycle"].map(t=>({label:t,value:t}));return{ANCReferralForm:k(()=>[{componentType:"radioButtonField",header:"Referral for urgent care",name:"Referral for urgent care",obsValueType:"value_text",validation:i.required,type:"inline",options:[{label:"Yes",value:"Yes"},{label:"No",value:"No"}]},{componentType:"radioButtonField",header:"Reason for referral",name:"Reason for referral",obsValueType:"value_text",type:"inline",options:[{label:"Referral for screening including diagnostics",value:"Referral for screening including diagnostics"},{label:"Referral for other general services",value:"Referral for other general services"}]},{componentType:"textAreaField",header:"Other reasons for referral",name:"_Reason for referral",obsValueType:"value_text",icon:u.editPen,condition:t=>(t==null?void 0:t["Reason for referral"])==="Referral for other general services"},{componentType:"radioButtonField",header:"Any treatment given before referral?",name:"Any treatment given before referral",obsValueType:"value_text",validation:i.required,type:"inline",options:[{label:"Yes",value:"Yes"},{label:"No",value:"No"}]},{componentType:"textAreaField",header:"Summary of current condition and treatment provided on referral?",name:"Summary of current condition and treatment provided on referral?",obsValueType:"value_text",icon:u.editPen,condition:t=>(t==null?void 0:t["Any treatment given before referral"])==="Yes"},{componentType:"Dashes"},{name:"Provisional Diagnosis",header:"Provisional Diagnosis",componentType:"multiSelectInputField",isMultiple:!0,trackBy:"name",obsValueType:"value_coded",options:a.value,icon:u.search,onSearchChange:d,validation:i.required},{componentType:"Dashes"},{componentType:"multiSelectInputField",header:"Facility",name:"Referral facility",trackBy:"code",openDirection:"auto",icon:u.search,obsValueType:"value_text",validation:t=>i.required(t),options:l.value.facilities||l.value},{componentType:"inputField",header:"Department",name:"Department",obsValueType:"value_text",grid:{s:"6"},icon:u.editPen},{componentType:"inputField",header:"Contact Person",name:"Contact Person",obsValueType:"value_text",icon:u.editPen,grid:{s:"6"}},{componentType:"Dashes"},{componentType:"switchField",label:"Accompanying Staff",name:"Accompanying Staff",obsValueType:"value_text",trueValue:"Yes",falseValue:"No"},{componentType:"multiSelectInputField",header:"Transport Type",name:"Mode of transport",obsValueType:"value_text",isMultiple:!1,label:"label",trackBy:"value",options:e,grid:{s:"6"}},{componentType:"inputField",header:"Provider’s phone number",name:"Provider’s phone number",obsValueType:"value_text",grid:{s:"6"},icon:u.phone,validation:i.isMWPhoneNumber},{componentType:"dateInputField",header:"Referral Appointment Date",name:"Date referral was made",showTodayButton:!0,validation:i.required,obsValueType:"value_date",icon:u.calendar,grid:{s:"6"}},{componentType:"inputField",header:"Referral Appointment Time",name:"Time referral made",type:"time",validation:i.required,obsValueType:"value_text",icon:u.time,grid:{s:"6"}},{componentType:"Dashes"},{componentType:"textAreaField",header:"Referral notes",name:"Referral notes",obsValueType:"value_text",icon:u.editPen,validation:i.required}])}},Le={class:"content-wrapper"},Ee=T({__name:"ANCreferral",setup(l){const{ANCReferralForm:n}=Me(),{formRef:a}=U(),d=async()=>{var c,t,p;const e=(c=a.value)==null?void 0:c.getFormValues();if(((t=a.value)==null?void 0:t.validateForm())!==null)return G("Please fill all the required fields");await F.buildSaveObs(e,R.REFERRAL)&&I("ANC referral details have been created"),(p=a.value)==null||p.resetForm(),O.dismiss()};return(e,c)=>(h(),g(w,{title:"Referral Form",subtitle:"ANC Patient Referral",headerIcon:s(D)},{"top-buttons":v(()=>[r(y,{name:"Save Referral",onClick:d,fill:"solid",class:"save-button"})]),content:v(()=>[o("div",Le,[r(z,{formData:s(n),ref_key:"formRef",ref:a},null,8,["formData"])])]),_:1},8,["headerIcon"]))}}),He=()=>{const l=[{label:"In labour",value:"In labour"},{label:"Live birth",value:"Live birth"},{label:"Stillbirth",value:"Stillbirth"},{label:"Pregnancy, miscarriage",value:"Pregnancy, miscarriage"},{label:"Abortion",value:"Abortion"},{label:"Death",value:"Death"},{label:"Lost to follow up",value:"Lost to follow up"},{label:"Moved away",value:"Moved away"},{label:"Other outcome",value:"Other outcome"}],n=[{label:"Home",value:"Home or TBA"},{label:"Health-care facility",value:"Health-care facility"},{label:"Other",value:"Other"}],a=[{label:"Normal",value:"Normal"},{label:"Forceps",value:"Forceps"},{label:"Vacuum",value:"Vacuum"},{label:"Caesarean section",value:"Caesarean section"}];return{pregnantOutComeForm:k(()=>[{componentType:"radioButtonField",header:"What is the outcome of the pregnancy?",name:"ANC pregnancy outcome",obsValueType:"value_coded",type:"inline",validation:i.required,options:l},{grid:{s:"1"}},{componentType:"textAreaField",header:"Specify",name:"Pregnancy outcome notes",obsValueType:"value_text",icon:u.editPen,grid:{s:"11"},validation:i.required,condition:e=>(e==null?void 0:e["ANC pregnancy outcome"])==="Other outcome"},{grid:{s:"1"}},{componentType:"dateInputField",header:"Date of death",name:"Date of death",showTodayButton:!0,grid:{s:"11"},validation:i.required,obsValueType:"value_date",icon:u.calendar,condition:e=>(e==null?void 0:e["ANC pregnancy outcome"])==="Death"},{grid:{s:"1"}},{componentType:"textAreaField",header:"Cause of Death",name:"Cause of death",obsValueType:"value_text",icon:u.editPen,grid:{s:"11"},validation:i.required,condition:e=>(e==null?void 0:e["ANC pregnancy outcome"])==="Death"},{grid:{s:"1"}},{componentType:"dateInputField",header:"Estimated date of delivery",name:"Estimated date of delivery",showTodayButton:!0,grid:{s:"11"},validation:i.required,obsValueType:"value_date",icon:u.calendar,condition:e=>(e==null?void 0:e["ANC pregnancy outcome"])==="Live birth"},{grid:{s:"1"}},{componentType:"radioButtonField",header:"Place of delivery",name:"Place of Delivery",obsValueType:"value_coded",grid:{s:"11"},validation:i.required,type:"inline",options:n,condition:e=>(e==null?void 0:e["ANC pregnancy outcome"])==="Live birth"},{grid:{s:"1"}},{componentType:"inputField",header:"Specify",name:"_Place of delivery",obsValueType:"value_text",icon:u.editPen,grid:{s:"11"},validation:i.required,condition:e=>(e==null?void 0:e["Place of Delivery"])==="Other"},{grid:{s:"1"}},{componentType:"radioButtonField",header:"Preterm birth",name:"Preterm birth",obsValueType:"value_coded",grid:{s:"11"},validation:i.required,type:"inline",options:[{label:"Yes",value:"Yes"},{label:"No",value:"No"}],condition:e=>(e==null?void 0:e["ANC pregnancy outcome"])==="Live birth"},{grid:{s:"1"}},{componentType:"radioButtonField",header:"Mode of delivery",name:"Mode of delivery",obsValueType:"value_coded",type:"inline",grid:{s:"11"},validation:i.required,options:a,condition:e=>(e==null?void 0:e["ANC pregnancy outcome"])==="Live birth"},{grid:{s:"1"}},{componentType:"inputField",header:"Birth weight (grams)",name:"Weight",obsValueType:"value_numeric",type:"number",icon:u.weight,grid:{s:"11"},validation:e=>{const c=i.required(e);if(c!==!0)return c;const t=Number(e);return isNaN(t)?"Value should be a number":t<0?"Weight must be positive":t>6e3?"Weight must be less than 6000g":!0},condition:e=>(e==null?void 0:e["ANC pregnancy outcome"])==="Live birth"}])}},Ye={class:"content-wrapper"},We=T({__name:"PregnantOutcome",setup(l){const{pregnantOutComeForm:n}=He(),{formRef:a}=U(),d=Y(),e=async()=>{var t,p,m;const c=(t=a.value)==null?void 0:t.getFormValues();if(((p=a.value)==null?void 0:p.validateForm())!==null)return G("Please fill all the required fields");await F.buildSaveObs(c,R.PREGNANT_OUTCOME)&&I("ANC referral details have been created"),(m=a.value)==null||m.resetForm(),d.push("patientProfile")};return(c,t)=>(h(),g(w,{title:"Pregnancy Outcome",subtitle:"ANC Pregnancy Outcome",headerIcon:s(D)},{"top-buttons":v(()=>[r(y,{name:"Save Outcome",onClick:e,fill:"solid",class:"submit-button"})]),content:v(()=>[o("div",Ye,[r(z,{formData:s(n),ref_key:"formRef",ref:a},null,8,["formData"])])]),_:1},8,["headerIcon"]))}}),Ue={class:"dashboard-container"},ze={class:"back-profile"},Ge={class:"dashboard-grid"},Je=T({__name:"Contacts",setup(l){const n=Y(),a=W(),{patient:d}=H(a),e=A(""),c=[{title:"Symptoms and Follow Up",path:"/symptomsFollowUp",icon:te,isSaved:!1},{title:"Physical Examination",path:"/physicalExamination",icon:ae,isSaved:!1},{title:"Lab Tests and Imaging",path:"/labTests",icon:oe,isSaved:!1},{title:"Diagnosis and Treatment",path:"/ANCDiagnosisTreatment",icon:ne,isSaved:!1},{title:"Counselling",path:"/counselling",icon:ie,isSaved:!1}],t=k(()=>e.value?c.filter(f=>f.title!=="Profile"):c),p=f=>{n.push({path:f})},m=async()=>{await V(qe,{class:"medium-modal"})},b=async()=>{await V(Ee,{class:"medium-modal"})},N=async()=>{await V(We,{class:"medium-modal"})},C=async()=>{try{const f=await F.getFirstObsValue(d.value.patientID,"Gravida","value_text");e.value=f}catch(f){console.error("Error fetching gravida:",f)}};return re(()=>{C()}),(f,B)=>(h(),g(s(pe),null,{default:v(()=>[r(he),r(s(L),{fullscreen:!0},{default:v(()=>[r(ye),o("div",Ue,[o("div",ze,[r(y,{name:"Back to profile",iconSlot:"start",fill:"clear",icon:s(le),onClick:B[0]||(B[0]=_=>p("/patientProfile"))},null,8,["icon"]),o("div",null,[r(y,{name:"Schedule appointment",iconSlot:"start",fill:"outline",icon:s(se),onClick:m,class:"sub-button"},null,8,["icon"]),r(y,{name:"Referral",iconSlot:"start",fill:"outline",icon:s(ce),onClick:b,class:"sub-button"},null,8,["icon"]),r(y,{name:"Pregnancy outcome",iconSlot:"start",fill:"outline",icon:s(ue),onClick:N,class:"sub-button"},null,8,["icon"])])]),o("div",Ge,[(h(!0),x(E,null,de(t.value,(_,J)=>(h(),g(Se,{key:J,icon:_.icon,title:_.title,isSaved:_.isSaved,onClick:je=>!_.isSaved&&p(_.path)},null,8,["icon","title","isSaved","onClick"]))),128))])])]),_:1})]),_:1}))}}),ot=P(Je,[["__scopeId","data-v-96bfe89a"]]);export{ot as default};
