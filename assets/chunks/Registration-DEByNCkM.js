var tt=Object.defineProperty;var nt=(n,e,t)=>e in n?tt(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var we=(n,e,t)=>nt(n,typeof e!="symbol"?e+"":e,t);import{d as O,N as he,L as Ve,$ as Ne,ak as Be,a6 as Me,dq as Ee,a5 as $e,d_ as xe,X as Ae,R as ee,H as k,e as A,f as S,m as q,l as c,k as y,J as h,Q as E,F as se,r as N,c as f,O as H,u as b,K as M,P as He,z as at,cr as Oe,w as _e,b2 as Le,a as qe,bx as it,ap as ot,a7 as st,p as Se,V as rt,I as lt,a4 as ut,i as W,v as z,M as dt,a3 as ct,eo as mt}from"./vendor-BataJFSH.js";import{n as F,M as oe,_ as ve,aF as D,aE as G,aG as I,H as j,S as T,g as Ye,x as pt,a0 as _t,o as Ge,P as ht,u as ye,ai as J,b as vt,w as yt,aU as Te,K as Pe,aH as gt,f as bt,Z as Dt,a2 as Ft,t as ke,b5 as ft,X as wt}from"../index-CYcjB3lE.js";import{u as re}from"./useLocation-Bl6i7Nj8.js";import{g as St}from"./vaccines_service-jL4y0Qg3.js";import{i as Tt}from"./user_role_management-BpRRS3k4.js";import{u as Pt}from"./useNeonatalEnrollmentStore-eD5cG8pe.js";const kt=O({components:{IonLabel:Ae,IonAvatar:xe,IonRow:$e,IonImg:Ee,IonCol:Me,IonList:Be,IonItem:Ne,IonIcon:Ve,IonButton:he,DynamicButton:oe},data:()=>({selectedResult:{},iconsContent:F,isAnyAccordionOpen:!0,isLoading:!1}),methods:{dismiss(n){ee.dismiss(n)}}}),Ct={key:0,class:"spinner-overlay"};function Vt(n,e,t,i,a,o){const l=k("ion-spinner"),r=k("ion-title"),d=k("ion-icon"),u=k("ion-header"),g=k("center"),s=k("ion-content"),v=k("DynamicButton"),C=k("ion-col"),V=k("ion-row"),P=k("ion-footer");return S(),A(se,null,[n.isLoading?(S(),A("div",Ct,[c(l,{name:"bubbles"}),e[3]||(e[3]=y("div",{class:"loading-text"},"Please wait...",-1))])):q("",!0),c(u,{style:{display:"flex","justify-content":"space-between"}},{default:h(()=>[c(r,{class:"modalTitle"},{default:h(()=>[...e[4]||(e[4]=[E("Printer",-1)])]),_:1}),c(d,{onClick:e[0]||(e[0]=$=>n.dismiss("dismiss")),style:{"padding-top":"10px","padding-right":"10px"},icon:n.iconsContent.cancel},null,8,["icon"])]),_:1}),c(s,{fullscreen:!0,class:"ion-padding",style:{"--background":"#fff"}},{default:h(()=>[c(g,null,{default:h(()=>[...e[5]||(e[5]=[y("h3",{class:"ion-padding"},"Do you want to print a barcode?",-1)])]),_:1})]),_:1}),c(P,null,{default:h(()=>[c(V,null,{default:h(()=>[c(C,null,{default:h(()=>[c(v,{color:"danger",onClick:e[1]||(e[1]=$=>n.dismiss("dismiss")),name:"No",fill:"solid",style:{float:"right","margin-right":"2%",width:"100px"}}),c(v,{onClick:e[2]||(e[2]=$=>n.dismiss("Yes")),name:"Yes",fill:"solid",style:{float:"right","margin-right":"2%",width:"100px"}})]),_:1})]),_:1})]),_:1})],64)}const Nt=ve(kt,[["render",Vt]]),Bt=n=>{const e=N(!1),{getDistricts:t,districtList:i,selectedTraditionalAuthorityId:a,villages:o,selectedDistrictId:l,TAs:r}=re();return t(),{currentLocation:f(()=>[{componentType:"Heading",name:"Current Location",position:"center"},{componentType:"multiSelectInputField",header:"Current district",name:"current_district",trackBy:"district_id",validation:u=>D.required(u),icon:F.search,options:i.value,onChange:(u,g)=>{n!=null&&n.value&&(n.value.setFormValue("current_traditional_authority",[]),n.value.setFormValue("current_village",[])),l.value=(u==null?void 0:u.district_id)||null}},{componentType:"multiSelectInputField",header:"Current traditional authority",name:"current_traditional_authority",trackBy:"traditional_authority_id",validation:u=>D.required(u),icon:F.search,options:r.value,disabled:u=>{var g;return!((g=r==null?void 0:r.value)!=null&&g.length)},onChange:(u,g)=>{var s;n!=null&&n.value&&((s=n==null?void 0:n.value)==null||s.setFormValue("current_village",[])),a.value=(u==null?void 0:u.traditional_authority_id)||null}},{componentType:"multiSelectInputField",header:"Current village",name:"current_village",trackBy:"village_id",icon:F.search,validation:u=>D.required(u),options:o.value,disabled:u=>{var g;return!((g=o==null?void 0:o.value)!=null&&g.length)}},{componentType:"multiSelectInputField",header:"Closest landmark/Plot number",name:"closestLandmark",trackBy:"id",icon:F.search,options:[{id:1,name:"Church"},{id:2,name:"Mosque"},{id:3,name:"Primary School"},{id:4,name:"Borehole"},{id:5,name:"Secondary School"},{id:6,name:"College"},{id:7,name:"Market"},{id:8,name:"Football Ground"},{id:9,name:"Other"}]}]),TAs:r,isLoadingTAs:e,selectedDistrictId:l}},Mt=O({__name:"CurrentLocation",setup(n,{expose:e}){const{formRef:t,exposeFormMethods:i}=G(),{currentLocation:a}=Bt(t);return e(i()),(o,l)=>(S(),H(I,{formData:b(a),ref_key:"formRef",ref:t},null,8,["formData"]))}}),Et=(n,e)=>{if(!(n!=null&&n.value)||!(e!=null&&e.value))return;const{current_district:t,current_traditional_authority:i,current_village:a}=n.value;e.value.setFormValue("home_district",t),e.value.setFormValue("home_traditional_authority",i),e.value.setFormValue("home_village",a)},$t=n=>{n!=null&&n.value&&(n.value.setFormValue("home_district",[]),n.value.setFormValue("home_traditional_authority",[]),n.value.setFormValue("home_village",[]))},xt=(n,e,t)=>{e.value=(n==null?void 0:n.district_id)||null,t!=null&&t.value&&(t.value.setFormValue("home_traditional_authority",[]),t.value.setFormValue("home_village",[]))},At=(n,e,t)=>{var i;e.value=(n==null?void 0:n.traditional_authority_id)||null,(i=t==null?void 0:t.value)==null||i.setFormValue("home_village",[])},Ce=(n,e)=>n!=null&&n.same_as_current?!1:!(e!=null&&e.length),Ht=(n,e)=>t=>{setTimeout(()=>{t?Et(n,e):$t(e)},0)},Ot=(n,e)=>{const{getDistricts:t,districtList:i,selectedTraditionalAuthorityId:a,villages:o,selectedDistrictId:l,TAs:r}=re();return t(),{homeLocation:f(()=>[{componentType:"Heading",name:"Home Location",position:"center"},{componentType:"checkboxField",type:"single",name:"same_as_current",label:"Same as current",onChange:Ht(n,e)},{componentType:"multiSelectInputField",header:"Home district",name:"home_district",trackBy:"district_id",icon:F.search,validation:D.required,options:i.value,onChange:u=>xt(u,l,e)},{componentType:"multiSelectInputField",header:"Home traditional authority",name:"home_traditional_authority",trackBy:"traditional_authority_id",validation:D.required,icon:F.search,options:r.value,disabled:u=>Ce(u,r.value),onChange:u=>At(u,a,e),openDirection:"auto"},{componentType:"multiSelectInputField",header:"Home village",name:"home_village",trackBy:"village_id",icon:F.search,validation:D.required,options:o.value,disabled:u=>Ce(u,o.value),openDirection:"auto"}])}},Lt=O({__name:"HomeLocation",props:{currentLocationFormValues:{}},setup(n,{expose:e}){const t=n,{formRef:i,exposeFormMethods:a}=G(),o=f(()=>t.currentLocationFormValues),{homeLocation:l}=Ot(o,i);return e(a()),(r,d)=>(S(),H(I,{formData:b(l),ref_key:"formRef",ref:i},null,8,["formData"]))}}),qt=()=>{const{countriesList:n,getCountries:e}=re();return e(),{country:f(()=>[{componentType:"Heading",name:"Country",position:"center"},{componentType:"multiSelectInputField",header:"Country",name:"country",trackBy:"district_id",openDirection:"auto",icon:F.search,validation:i=>D.required(i),options:n.value}])}},Yt=O({__name:"Country",setup(n,{expose:e}){const{country:t}=qt(),{formRef:i,exposeFormMethods:a}=G();return e(a()),(o,l)=>(S(),H(I,{formData:b(t),ref_key:"formRef",ref:i},null,8,["formData"]))}}),Gt=()=>{function n(t,i){const a=new Date(t);return a.setFullYear(a.getFullYear()-i),a.toISOString().split("T")[0]}return{personalInformation:f(()=>[{componentType:"Heading",name:"Personal Information",position:"center"},{componentType:"inputField",header:"National ID",name:"nationalID",placeholder:"__-__-__-__",icon:F.nationalID,validation:t=>D.isMWNationalID(t)},{componentType:"inputField",header:"First name",name:"firstname",icon:F.fullName,validation:t=>D.isName(t)},{componentType:"inputField",header:"Middle name",name:"middleName",icon:F.fullName,validation:t=>D.isNamesEmpty(t)},{componentType:"inputField",header:"Last name",name:"lastname",icon:F.fullName,validation:t=>D.isName(t)},{componentType:"radioButtonField",header:"Gender",name:"gender",type:"inline",validation:t=>D.required(t),options:[{label:"Male",value:"M"},{label:"Female",value:"F"},{label:"Undetermined",value:"Undetermined"}]},{componentType:"dateInputField",header:"Date of birth",name:"birthdate",icon:F.calenderPrimary,minDate:n(j.sessionDate(),110),validation:t=>D.required(t),condition:t=>!t.Estimate,disabled:t=>t.Estimate},{componentType:"inputField",header:"Estimated age",name:"estimation",icon:F.time,validation:t=>D.isEstimationDate(t),initialUnit:"Years",unitOptions:[{label:"Days",value:"Days"},{label:"Weeks",value:"Weeks"},{label:"Months",value:"Months"},{label:"Years",value:"Years"}],unitValidation:t=>!t||t===""?"Please select a unit.":null,condition:t=>t.Estimate},{componentType:"checkboxField",name:"Estimate",type:"single",label:"Estimate age"},{componentType:"phoneInputField",name:"Phone Number",header:"Phone Number",validation:t=>D.isMWPhoneNumber(t.phoneNumber)}])}},It=O({__name:"PersonalInformation",setup(n,{expose:e}){const{personalInformation:t}=Gt(),{formRef:i,exposeFormMethods:a}=G();return e(a()),(o,l)=>(S(),H(I,{formData:b(t),ref_key:"formRef",ref:i},null,8,["formData"]))}}),Ut=O({components:{IonLabel:Ae,IonAvatar:xe,IonRow:$e,IonImg:Ee,IonCol:Me,IonList:Be,IonItem:Ne,IonIcon:Ve,IonButton:he},data:()=>({selectedResult:{},iconsContent:F,isAnyAccordionOpen:!0,isLoading:!1}),methods:{updateAccordionState(n){const e=this.$refs.accordionGroup;this.isAnyAccordionOpen=e.value!==void 0},dismiss(n){ee.dismiss(n)},async init(){this.setData(this.deduplicationData[0]||{})},async onSelect(){ee.dismiss(this.selectedResult)},setData(n){this.selectedResult=n},dateFormat(n){return j.toStandardHisDisplayFormat(n)},probabilityToPercentage(n){return(n*100).toFixed(2)+"%"}},props:{deduplicationData:{default:[]},to_be_registered:{default:[]}},mounted(){this.init()},activated(){this.init()}}),Wt={key:0,class:"spinner-overlay"},zt={class:"header position_content"},jt={style:{"font-size":"1.2em","font-weight":"700"}},Jt={class:"due_date"},Rt={class:"ion-padding",slot:"content"},Kt={style:{display:"flex","justify-content":"end",gap:"10px"}};function Xt(n,e,t,i,a,o){const l=k("ion-spinner"),r=k("ion-icon"),d=k("ion-header"),u=k("ion-label"),g=k("ion-item"),s=k("ion-col"),v=k("ion-row"),C=k("ion-accordion"),V=k("ion-accordion-group"),P=k("ion-content"),$=k("ion-button"),Y=k("ion-footer");return S(),A(se,null,[n.isLoading?(S(),A("div",Wt,[c(l,{name:"bubbles"}),e[3]||(e[3]=y("div",{class:"loading-text"},"Please wait...",-1))])):q("",!0),c(d,null,{default:h(()=>[y("div",zt,[y("div",{style:{display:"flex","align-items":"center"},onClick:e[0]||(e[0]=p=>n.dismiss("back"))},[c(r,{slot:"separator",size:"large",icon:n.iconsContent.arrowLeft},null,8,["icon"])]),y("div",jt,"Matches found: ("+M(n.deduplicationData.length)+")",1)])]),_:1}),c(P,{fullscreen:!0,class:"ion-padding",style:{"--background":"#fff"}},{default:h(()=>[c(V,{ref:"accordionGroup",class:"previousView",value:"0",onIonChange:n.updateAccordionState},{default:h(()=>[(S(!0),A(se,null,He(n.deduplicationData,(p,L)=>(S(),H(C,{style:{"margin-bottom":"15px"},value:L,"toggle-icon-slot":"start",class:"custom_card",button:"",key:L,detail:!0,color:p.value===n.selectedResult.value?"light":"",onClick:_=>n.setData(p)},{default:h(()=>[c(g,{slot:"header"},{default:h(()=>[c(u,{class:"previousLabel"},{default:h(()=>{var _,x;return[E(M((_=p==null?void 0:p.person)==null?void 0:_.given_name)+" "+M((x=p==null?void 0:p.person)==null?void 0:x.family_name),1)]}),_:2},1024),y("div",Jt,[e[4]||(e[4]=E(" Score: ",-1)),y("b",null,M(n.probabilityToPercentage(p==null?void 0:p.score)||"-"),1)])]),_:2},1024),y("div",Rt,[c(v,null,{default:h(()=>[c(s,null,{default:h(()=>[...e[5]||(e[5]=[y("b",null,"To be Registered",-1)])]),_:1}),c(s,null,{default:h(()=>[...e[6]||(e[6]=[y("b",null,"Already Registered",-1)])]),_:1})]),_:1}),c(v,null,{default:h(()=>[c(s,null,{default:h(()=>[c(v,null,{default:h(()=>{var _,x;return[e[7]||(e[7]=E(" Name: ",-1)),y("b",null,M((_=n.to_be_registered)==null?void 0:_.given_name)+" "+M((x=n.to_be_registered)==null?void 0:x.family_name),1)]}),_:1}),c(v,null,{default:h(()=>{var _;return[e[8]||(e[8]=E("Gender: ",-1)),y("b",null,M((_=n.to_be_registered)==null?void 0:_.gender),1)]}),_:1}),c(v,null,{default:h(()=>{var _;return[e[9]||(e[9]=E("Birthdate: ",-1)),y("b",null,M((_=n.to_be_registered)==null?void 0:_.birthdate),1)]}),_:1}),c(v,null,{default:h(()=>{var _;return[e[10]||(e[10]=E("Home District: ",-1)),y("b",null,M((_=n.to_be_registered)==null?void 0:_.home_district),1)]}),_:1}),c(v,null,{default:h(()=>{var _;return[e[11]||(e[11]=E("Home TA: ",-1)),y("b",null,M((_=n.to_be_registered)==null?void 0:_.home_traditional_authority),1)]}),_:1})]),_:1}),c(s,null,{default:h(()=>[c(v,null,{default:h(()=>{var _,x;return[e[12]||(e[12]=E(" Name: ",-1)),y("b",null,M((_=p==null?void 0:p.person)==null?void 0:_.given_name)+" "+M((x=p==null?void 0:p.person)==null?void 0:x.family_name),1)]}),_:2},1024),c(v,null,{default:h(()=>{var _;return[e[13]||(e[13]=E("Gender: ",-1)),y("b",null,M((_=p==null?void 0:p.person)==null?void 0:_.gender),1)]}),_:2},1024),c(v,null,{default:h(()=>{var _;return[e[14]||(e[14]=E("Birthdate: ",-1)),y("b",null,M(n.dateFormat((_=p==null?void 0:p.person)==null?void 0:_.birthdate)),1)]}),_:2},1024),c(v,null,{default:h(()=>{var _;return[e[15]||(e[15]=E("Home District: ",-1)),y("b",null,M((_=p==null?void 0:p.person)==null?void 0:_.home_district),1)]}),_:2},1024),c(v,null,{default:h(()=>{var _;return[e[16]||(e[16]=E("Home TA: ",-1)),y("b",null,M((_=p==null?void 0:p.person)==null?void 0:_.home_traditional_authority),1)]}),_:2},1024)]),_:2},1024)]),_:2},1024)])]),_:2},1032,["value","color","onClick"]))),128))]),_:1},8,["onIonChange"])]),_:1}),c(Y,{collapse:"fade",class:"ion-no-border"},{default:h(()=>[y("div",Kt,[c($,{fill:"solid",color:"secondary",onClick:e[1]||(e[1]=p=>n.dismiss("dismiss"))},{default:h(()=>[...e[17]||(e[17]=[E(" Not Duplicate ",-1)])]),_:1}),c($,{onClick:e[2]||(e[2]=p=>n.onSelect()),fill:"solid",disabled:!n.isAnyAccordionOpen},{default:h(()=>[...e[18]||(e[18]=[E("Select ",-1)])]),_:1},8,["disabled"])])]),_:1})],64)}const Zt=ve(Ut,[["render",Xt],["__scopeId","data-v-ffb46cdd"]]),Qt=pt();class pe{async getDDEIds(){var a,o,l;const e=T.getPouchDbStatus(),t=T.getLanConnectionStatus(),i=T.getAPIStatus();if(t){const r=await this.getAndUpdateAvailableDdeId();return r!=null&&r.success?r.ddeId:void 0}if(e&&!t){const r=await Ye("dde");if((a=r[0])!=null&&a.npid)return((o=r[0])==null?void 0:o.npid)||""}if(i)try{const r=await T.getJson("/dde/patients/sync_npids",{count:1,program_id:T.getProgramID()});return((l=r==null?void 0:r.npids[0])==null?void 0:l.npid)||""}catch(r){return""}return""}async deleteDDEId(e){Qt.postData({command:"deleteData",storeName:"dde",data:{npid:e}})}async possibleDuplicates(e){var t;if(T.getAPIStatus())try{const i=new _t,a=await i.checkPotentialDuplicates(e);if(a.length>0){const o=await Ge(Zt,{class:"fullScreenModal"},!0,{to_be_registered:e,deduplicationData:a});if(o!="dismiss"&&o!="back"){const l=await i.importPatient((t=o==null?void 0:o.person)==null?void 0:t.id),r=await ht.findByID(l.patient_id);return await ye().setPatientRecord(r),!0}else if(o=="back")return!0;return!1}else return!1}catch(i){return!1}return!1}async getAndUpdateAvailableDdeId(){try{const{couchdbUsername:e,couchdbPassword:t,couchdbPort:i,couchdbHost:a,couchdbProtocol:o}=T.getCouchdbConfig(),l="".concat(o,"://").concat(a,":").concat(i,"/dde"),r="Basic "+btoa("".concat(e,":").concat(t)),d={selector:{type:"dde_id",$or:[{status:{$exists:!1}},{status:{$ne:"used"}}]},limit:1},u=await fetch("".concat(l,"/_find"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:r},body:JSON.stringify(d)});if(!u.ok)throw new Error("Failed to query documents: ".concat(u.statusText));const g=await u.json();if(console.log("ðŸš€ ~ DDEService ~ getAndUpdateAvailableDdeId ~ findResult:",g),!g.docs||g.docs.length===0)return{success:!1,error:"No available DDE IDs found"};const s=g.docs[0],v=s.dde_id;s.status="used",s.assignedAt=new Date().toISOString();const C=await fetch("".concat(l,"/").concat(s._id),{method:"PUT",headers:{"Content-Type":"application/json",Authorization:r},body:JSON.stringify(s)});if(!C.ok)throw new Error("Failed to update document: ".concat(C.statusText));return console.log("ðŸš€ ~ DDEService ~ getAndUpdateAvailableDdeId ~ ddeId:",v),{success:!0,ddeId:v}}catch(e){return console.error("Error getting and updating DDE ID:",e),null}}}class en{getRegion(e){return{1:"Central Region",2:"Northern Region",3:"Southern Region",4:"Foreign"}[e]}hasValidData(e,t=[]){return!e||typeof e!="object"?!1:t.length===0?Object.values(e).some(i=>i!=null&&i!==""):t.every(i=>e[i]!==null&&e[i]!==void 0&&e[i]!=="")}async buildObservation(e,t){if(!t)return null;const i=typeof t=="object"&&t.name?t.name:t;return await J.buildValueText(e,i)}buildGuardianInfo(e){const t={};return t.given_name=(e==null?void 0:e.guardianFirstname)||"",t.middle_name=(e==null?void 0:e.guardianMiddleName)||"",t.family_name=(e==null?void 0:e.guardianLastname)||"",t.cell_phone_number=(e==null?void 0:e.guardianPhoneNumber.phoneNumber)||"",t.national_id=(e==null?void 0:e.guardianNationalID)||"",t.gender="",t.birthdate="",t.birthdate_estimated="false",t.home_region="",t.home_district="",t.home_traditional_authority="",t.home_village="",t.current_region="",t.current_district="",t.current_traditional_authority="",t.current_village="",t.landmark="",{saved:[],unsaved:[t]}}async buildVitals(e){return e!=null&&e.Weight?{saved:[],unsaved:[await this.buildObservation("Weight",e.Weight)]}:null}async buildARTPatientType(e,t){const i=[];let a=[];return e&&i.push(await J.buildValueText("Art clinic location",e)),t&&i.push(await J.buildValueCoded("Type of patient",t)),i.length===0?[]:(a=[{encounter_type:vt.REGISTRATION,status:"unsaved",obs:i}],a)}async buildBirthRegistrationObservations(e){if(!this.hasValidData(e))return null;const i=(await Promise.all([this.buildObservation("How many doses of Tdv did the mother receive?",e["How many doses of Tdv did the mother receive?"]),this.buildObservation("Protected at birth",e["Protected at birth"]),this.buildObservation("HIV status",e["HIV status"])])).filter(a=>a!==null);return i.length>0?i:null}async buildPatientRecord(e,t,i=""){var s,v,C,V,P,$,Y,p,L,_,x,te,K;const{personalInformation:a,currentLocation:o,homeLocation:l,birthRegistration:r,guardianInformation:d,socialHistory:u,patientType:g}=e;return{patientID:i||t||"",ID:t||"",NcdID:"",personInformation:{given_name:(a==null?void 0:a.firstname)||"",middle_name:(a==null?void 0:a.middleName)||"",family_name:(a==null?void 0:a.lastname)||"",gender:(a==null?void 0:a.gender)||"",birthdate:a!=null&&a.Estimate?new Q().calculateDoB(a==null?void 0:a.estimation,(a==null?void 0:a.estimation_unit)||"Years"):(a==null?void 0:a.birthdate)||"",birthdate_estimated:a!=null&&a.Estimate?"true":"false",home_region:this.getRegion((s=l==null?void 0:l.home_district)==null?void 0:s.region_id)||"",home_district:((v=l==null?void 0:l.home_district)==null?void 0:v.name)||"",home_traditional_authority:((C=l==null?void 0:l.home_traditional_authority)==null?void 0:C.name)||"",home_village:((V=l==null?void 0:l.home_village)==null?void 0:V.name)||"",current_region:this.getRegion((P=o==null?void 0:o.current_district)==null?void 0:P.region_id)||"",current_district:(($=o==null?void 0:o.current_district)==null?void 0:$.name)||"",current_traditional_authority:((Y=o==null?void 0:o.current_traditional_authority)==null?void 0:Y.name)||"",current_village:((p=o==null?void 0:o.current_village)==null?void 0:p.name)||"",country:(e==null?void 0:e.country.country.name)||"",landmark:((L=o==null?void 0:o.closestLandmark)==null?void 0:L.name)||"",cell_phone_number:((_=a["Phone Number"])==null?void 0:_.phoneNumber)||"",occupation:(u==null?void 0:u.occupation)||"",marital_status:(u==null?void 0:u.maritalStatus)||"",religion:((x=u==null?void 0:u.religion)==null?void 0:x.name)||"",education_level:(u==null?void 0:u.highestLevelOfEducation)||""},guardianInformation:this.buildGuardianInfo(d),birthRegistration:await this.buildBirthRegistrationObservations(r),otherPersonInformation:{nationalID:(a==null?void 0:a.nationalID)||"",ichisID:T.getIchisId()||"",TEI:T.getTEI()||"",birthID:r["Serial Number"]||"",relationshipID:((te=d==null?void 0:d.relationship)==null?void 0:te.id)||""},vitals:await this.buildVitals(r),vaccineSchedule:await St(a==null?void 0:a.gender,a==null?void 0:a.birthdate),vaccineAdministration:{orders:[],obs:[],voided:[]},observations:await this.buildARTPatientType((K=g==null?void 0:g.facility)==null?void 0:K.name,g==null?void 0:g.patient_type),appointments:{saved:[],unsaved:[]},saveStatusPersonInformation:"pending",saveStatusGuardianInformation:"pending",saveStatusBirthRegistration:"pending",saveStatusVitals:"pending",date_created:"",creator:"",sync_status:"unsynced"}}}const tn=async n=>{const e=T.getIchisDiagnosis();if(e.length<=0)return n;const t=await Promise.all(e.map(async i=>{var l,r,d;const a=((r=(l=i==null?void 0:i.value)==null?void 0:l.match(/[\d.]+/))==null?void 0:r[0])||"",o=i==null?void 0:i.date;if(i.display=="NCD_CV_D_Likelihood of Diabetes"){const u=(d=i==null?void 0:i.id)==null?void 0:d.split("-");return await J.buildValueNumber("Unspecified Diabetes",a,null,null,o,u[1])}if(i.display=="NCD_SHD_CV_Client waist circumference")return await J.buildValueNumber("Waist circumference",a,null,null,o);if(i.display=="NCD_SHD_CV_Client systolic blood pressure")return await J.buildValueNumber("Systolic",a,null,null,o);if(i.display=="NCD_SHD_CV_Client diastolic blood pressure")return await J.buildValueNumber("Diastolic",a,null,null,o)}));return n.observations.push({encounter_type:"VITALS",status:"unsaved",obs:t}),n};class Q extends T{constructor(){super();we(this,"patientRecordBuilder");this.patientRecordBuilder=new en}async saveRegistrationData(t){const i=await new pe().getDDEIds();if(!i&&(yt("DDE IDs are not available."),T.getLanConnectionStatus()||T.getPouchDbStatus()))return!1;let a=await this.patientRecordBuilder.buildPatientRecord(t,i);return T.getProgramID()==32&&(a=await tn(a)),await new pe().possibleDuplicates(a.personInformation)?!0:await Te(a)?(Pe("Registration successful"),sessionStorage.setItem("ichis_diagnosis",JSON.stringify([])),T.getPouchDbStatus()&&await new pe().deleteDDEId(i),await this.printBarcode(),!0):!1}async updateDemographics(t){let i=await this.patientRecordBuilder.buildPatientRecord(t,T.getNationalID(),T.getPatientID());return i.saveStatusPersonInformation="edit",i.saveStatusGuardianInformation="edit",i.saveStatusBirthRegistration="edit",i.saveStatusVitals="edit",await Te(i)?(Pe("Updated successful"),!0):!1}checkIfChild(t){if(!(t!=null&&t.estimation)&&!(t!=null&&t.birthdate))return{moreThanThirteenYears:!0,underNineMonths:!1,underFiveYears:!1};let i="";return t.estimation?i=this.calculateDoB(t.estimation,t.estimation_unit||"Years")||"":i=t.birthdate,{moreThanThirteenYears:j.getAgeInYears(i)>13,underNineMonths:j.ageInMonths(i)<9,underFiveYears:j.getAgeInYears(i)<5}}async printBarcode(){await Ge(Nt,{class:"small-confirm-modal "})!=="dismiss"&&new gt().printData("barcode")}calculateDoB(t,i){try{let a=at(T.getSessionDate());if(i==="Years"&&t<0)a=a.add(Math.abs(t),"years");else switch(i){case"Days":a=a.subtract(t,"days");break;case"Months":a=a.subtract(t,"months");break;case"Years":a=a.subtract(t,"years");break;default:return null}return j.toStandardHisDisplayFormat(a.format("YYYY-MM-DD"))||""}catch(a){return console.error("Error calculating date:",a),null}}}function nn(){const n=N([]),e=N([]),t=N([]),i=bt();Oe();const a=f(()=>i.apiStatus),o=r=>{var s;const d=["Brother","Father","Son","Grandfather","Grandson","Boyfriend","Stepfather","Stepson"],u=["Sister","Mother","Daughter","Grandmother","Granddaughter","Girlfriend","Stepmother","Stepdaughter"],g=["Spouse/Partner","Aunt/Uncle","Niece/Nephew","Doctor","Other","Patient","TB Contact Person","TB Patient","treatment suporter"];((s=e.value)==null?void 0:s.length)>0&&(t.value=e.value.filter(v=>r==="M"?d.includes(v.a_is_to_b)||g.includes(v.a_is_to_b):r==="F"&&u.includes(v.a_is_to_b)||g.includes(v.a_is_to_b)))};return{relationships:n,relationshipsData:e,filteredRelationships:t,apiStatus:a,getRelationships:async r=>r?(T.getPouchDbStatus()&&T.getLanConnectionStatus()?e.value=await Ye("relationship"):e.value=await Dt.getRelations(),o(r),n.value=n.value=t.value.map(d=>[{name:d.b_is_to_a,id:d.relationship_type_id,trackByID:d.relationship_type_id+d.b_is_to_a}]).reduce((d,u)=>d.concat(u),[]),n.value):(o(r),n.value=t.value.map(d=>[{name:d.b_is_to_a,id:d.relationship_type_id,trackByID:d.relationship_type_id+d.b_is_to_a}]).reduce((d,u)=>d.concat(u),[]),n.value),filterRelationships:o}}const an=(n,e,t)=>{const i=f(()=>new Q().checkIfChild(n.value).moreThanThirteenYears),{getRelationships:a}=nn(),o=N();return _e(n,async r=>{r&&(o.value=await a(r.gender))}),_e(t,async r=>{o.value=r}),{guardianInformation:f(()=>[{componentType:"Heading",name:"Guardian Information",position:"center"},{componentType:"inputField",header:"Guardian National ID",name:"guardianNationalID",placeholder:"__-__-__-__",icon:F.nationalID,validation:r=>D.isMWNationalID(r)},{componentType:"inputField",header:"First name",name:"guardianFirstname",icon:F.fullName,validation:r=>i.value?D.isNameEmpty(r):D.isName(r)},{componentType:"inputField",header:"Middle name",name:"guardianMiddleName",icon:F.fullName,validation:r=>D.isNameEmpty(r)},{componentType:"inputField",header:"Last name",name:"guardianLastname",icon:F.fullName,validation:r=>i.value?D.isNameEmpty(r):D.isName(r)},{componentType:"phoneInputField",name:"guardianPhoneNumber",header:"Phone Number",validation:r=>D.isMWPhoneNumber(r.phoneNumber)},{componentType:"multiSelectInputField",header:"Relationship to patient",name:"relationship",trackBy:"trackByID",icon:F.search,validation:r=>i.value?null:D.required(r==null?void 0:r.name),options:()=>o.value,disabled:()=>!o.value}])}},on=O({__name:"GuardianInformation",props:{personalInformationFormValues:{},relationshipsData:{}},setup(n,{expose:e}){const{formRef:t,exposeFormMethods:i}=G(),a=n,o=f(()=>a.personalInformationFormValues),l=f(()=>a.relationshipsData),{guardianInformation:r}=an(o,t,l);return e(i()),(d,u)=>(S(),H(I,{formData:b(r),ref_key:"formRef",ref:t},null,8,["formData"]))}}),sn=()=>{const n=N();return Ft.isProp("military_site=true").then(t=>{n.value=t}),{socialHistory:f(()=>[{componentType:"Heading",name:"Social History",position:"center"},{componentType:"multiSelectInputField",header:"Religion",name:"religion",icon:F.search,trackBy:"id",options:[{id:1,name:"Christianity"},{id:2,name:"Islam"},{id:3,name:"Judaism"},{id:4,name:"Hinduism"},{id:5,name:"Buddhism"},{id:6,name:"Sikhism"},{id:7,name:"Jainism"},{id:8,name:"BahÃ¡'Ã­ Faith"},{id:9,name:"Zoroastrianism"},{id:10,name:"Confucianism"},{id:11,name:"Taoism"},{id:12,name:"Shinto"},{id:13,name:"Baha'i Faith"},{id:14,name:"Juche"},{id:15,name:"Rastafari"}]},{componentType:"radioButtonField",header:"Occupation status",name:"occupation",type:"inline",validation:D.required,condition:()=>T.getProgramID()==1&&n.value,options:[{label:"Military",value:"Military"},{label:"Civilian",value:"Civilian"}]},{componentType:"radioButtonField",header:"Occupation status",name:"occupation",type:"inline",condition:t=>!n,options:[{label:"Employed",value:"employed"},{label:"Student",value:"Student"},{label:"Unemployed",value:"unemployed"},{label:"Other",value:"Other"}]},{componentType:"radioButtonField",header:"Marital status",name:"maritalStatus",type:"inline",options:[{label:"Single",value:"single"},{label:"Married",value:"married"},{label:"Widow",value:"widow"},{label:"Widower",value:"widower"},{label:"Divorced",value:"divorced"}]},{componentType:"radioButtonField",header:"Highest level of education",name:"highestLevelOfEducation",type:"inline",options:[{label:"No education",value:"No education"},{label:"Primary school",value:"primary school"},{label:"Secondary school",value:"secondary school"},{label:"Tertiary education",value:"tertiary education"}]}])}},rn=O({__name:"SocialHistory",setup(n,{expose:e}){const{socialHistory:t}=sn(),{formRef:i,exposeFormMethods:a}=G();return e(a()),(o,l)=>(S(),H(I,{formData:b(t),ref_key:"formRef",ref:i},null,8,["formData"]))}}),ln=()=>{const{facilityList:n,getFacilities:e}=re();return e(),{patientType:f(()=>[{componentType:"Heading",name:"Patient Type",position:"center"},{componentType:"radioButtonField",header:"Patient Type",name:"patient_type",type:"inline",validation:D.required,options:[{label:"New patient",value:"New patient"},{label:"Emergency supply",value:"Emergency supply"},{label:"External consultation",value:"External consultation"}]},{componentType:"multiSelectInputField",header:"Facility",name:"facility",trackBy:"facility_id",openDirection:"auto",icon:F.search,validation:i=>D.required(i),options:n.value.facilities||n.value,condition:i=>(i==null?void 0:i.patient_type)=="Emergency supply"||(i==null?void 0:i.patient_type)=="External consultation"}])}},un=O({__name:"PatientType",setup(n,{expose:e}){const{patientType:t}=ln(),{formRef:i,exposeFormMethods:a}=G();return e(a()),(o,l)=>(S(),H(I,{formData:b(t),ref_key:"formRef",ref:i},null,8,["formData"]))}}),dn=n=>({birthRegistration:f(()=>[{componentType:"Heading",name:"Birth Registration",position:"center"},{componentType:"inputField",header:"Birth certificate number",name:"Serial Number",icon:F.nationalID,placeholder:"__-__-__-__"},{componentType:"inputField",header:"Birth Weight/First weight (kg)",name:"Weight",icon:F.weight,validation:t=>D.validateWeight(t)},{componentType:"multiSelectInputField",header:"How many doses of Tdv did the mother receive?",name:"How many doses of Tdv did the mother receive?",icon:F.search,options:[{concept_id:11997,name:"0-2 doses, less than two weeks before delivery"},{concept_id:11998,name:"2-5 doses more than two weeks of delivery"},{concept_id:1067,name:"Unknown"}],trackBy:"concept_id",validation:t=>D.required(t),onChange:t=>{const i=t==null?void 0:t.name;i=="Unknown"?n.value.setFormValue("Protected at birth",{concept_id:1067,name:"Don't know"}):i=="0-2 doses, less than two weeks before delivery"?n.value.setFormValue("Protected at birth",{concept_id:1066,name:"No"}):i=="2-5 doses more than two weeks of delivery"&&n.value.setFormValue("Protected at birth",{concept_id:1065,name:"Yes"})}},{componentType:"multiSelectInputField",header:"Protected at birth (PAB)",name:"Protected at birth",icon:F.search,trackBy:"concept_id",validation:t=>D.required(t),disabled:t=>!t["How many doses of Tdv did the mother receive?"]},{componentType:"multiSelectInputField",header:"HIV status of the Child's Mother",name:"HIV status",icon:F.search,options:[{id:703,name:"Positive"},{id:664,name:"Negative"},{id:1067,name:"Unknown"}],trackBy:"id",validation:t=>D.required(t)}])}),cn=O({__name:"BirthRegistration",setup(n,{expose:e}){const{formRef:t,exposeFormMethods:i}=G(),{birthRegistration:a}=dn(t);return e(i()),(o,l)=>(S(),H(I,{formData:b(a),ref_key:"formRef",ref:t},null,8,["formData"]))}});function mn(){const n=N(1),e=N(4),t=4,i=ye(),{patient:a}=Le(i),o=()=>{const P=window.innerWidth;return P>=992?4:P>=768?3:P>=576?2:1},l=f(()=>e.value===0?t:Math.ceil(t/e.value)),r=f(()=>l.value>1),d=f(()=>r.value&&n.value>1),u=f(()=>r.value&&n.value<l.value),g=P=>{if(l.value===1)return!0;const $=(n.value-1)*e.value,Y=$+e.value-1;return P>=$&&P<=Y},s=()=>{n.value<l.value&&n.value++},v=()=>{n.value>1&&n.value--},C=P=>{P>=1&&P<=l.value&&(n.value=P)},V=()=>{e.value=o(),n.value>l.value&&(n.value=l.value),n.value===0&&l.value>0&&(n.value=1)};return qe(()=>{window.addEventListener("resize",V),V()}),it(()=>{window.removeEventListener("resize",V)}),{currentPage:n,columnsPerRow:e,totalPages:l,showPaginationButtons:r,showPreviousButton:d,showNextButton:u,nextPage:s,prevPage:v,goToPage:C,handleResize:V,isCardVisible:g}}function pn(){const n=ye(),{patient:e}=Le(n),t=a=>{var v,C,V;const{personalInformationRef:o,socialHistoryRef:l,countryRef:r,currentLocationRef:d,homeLocationRef:u,guardianInformationRef:g}=a.value,s=(v=e==null?void 0:e.value)==null?void 0:v.personInformation;o==null||o.setFormValue("nationalID",(V=(C=e==null?void 0:e.value)==null?void 0:C.otherPersonInformation)==null?void 0:V.nationalID),o==null||o.setFormValue("firstname",s==null?void 0:s.given_name),o==null||o.setFormValue("middleName",s==null?void 0:s.middle_name),o==null||o.setFormValue("lastname",s==null?void 0:s.family_name),o==null||o.setFormValue("gender",s==null?void 0:s.gender),o==null||o.setFormValue("birthdate",s!=null&&s.birthdate?j.toStandardHisDisplayFormat(s==null?void 0:s.birthdate):""),o==null||o.setFormValue("Phone Number",s!=null&&s.cell_phone_number?s==null?void 0:s.cell_phone_number:""),u==null||u.setFormValue("home_district",{name:s==null?void 0:s.home_district}),u==null||u.setFormValue("home_traditional_authority",{name:s==null?void 0:s.home_traditional_authority}),u==null||u.setFormValue("home_village",{name:s==null?void 0:s.home_village}),d==null||d.setFormValue("current_district",{name:s==null?void 0:s.current_district}),d==null||d.setFormValue("current_traditional_authority",{name:s==null?void 0:s.current_traditional_authority}),d==null||d.setFormValue("current_village",{name:s==null?void 0:s.current_village}),d==null||d.setFormValue("closestLandmark",{name:s==null?void 0:s.landmark}),r==null||r.setFormValue("country",s!=null&&s.country?{name:s==null?void 0:s.country}:{name:"Malawi"}),l==null||l.setFormValue("religion",{name:s==null?void 0:s.religion}),l==null||l.setFormValue("occupation",s==null?void 0:s.occupation),l==null||l.setFormValue("maritalStatus",s==null?void 0:s.marital_status),l==null||l.setFormValue("highestLevelOfEducation",s==null?void 0:s.education_level),i(g)},i=a=>{var r,d,u;const o=(d=(r=e==null?void 0:e.value)==null?void 0:r.guardianInformation)==null?void 0:d.saved[0],l=(u=o==null?void 0:o.relationship_type)!=null&&u.b_is_to_a?{name:o.relationship_type.b_is_to_a,id:o.relationship_type.relationship_type_id,trackByID:o.relationship_type.relationship_type_id+o.relationship_type.b_is_to_a}:"";a==null||a.setFormValue("guardianNationalID",(o==null?void 0:o.national_id)||""),a==null||a.setFormValue("guardianFirstname",(o==null?void 0:o.given_name)||""),a==null||a.setFormValue("guardianMiddleName",(o==null?void 0:o.middle_name)||""),a==null||a.setFormValue("guardianLastname",(o==null?void 0:o.family_name)||""),a==null||a.setFormValue("guardianPhoneNumber",o!=null&&o.cell_phone_number?o==null?void 0:o.cell_phone_number:""),a==null||a.setFormValue("relationship",l||"")};return{setFormValues:t,setGuardianInformation:i}}const _n={key:0,class:"spinner-overlay"},hn={class:"header-title"},vn={class:"masonry-grid"},yn={class:"card-container"},gn={class:"custom-card"},bn={class:"card-container"},Dn={key:0,class:"custom-card"},Fn={key:1,class:"custom-card"},fn={class:"custom-card card-margin-top"},wn={key:0,class:"card-container"},Sn={class:"custom-card"},Tn={class:"custom-card card-margin-top"},Pn={class:"card-container"},kn={class:"custom-card"},Cn={key:0,class:"custom-card card-margin-top"},Vn={class:"footer-content"},Nn={class:"footer-buttons-left"},Bn={key:0,class:"pagination-dots"},Mn=["onClick","aria-label"],En={class:"footer-buttons-right"},$n=O({__name:"Registration",props:{editMode:{type:Boolean,default:!1}},setup(n){const e=N(!1),t=ot(),i=Oe(),a=Pt(),o=N(null),l=N(null),r=N(null),d=N(null),u=N(null),g=N(null),s=N(null),v=N(null),C=N(!1),V=N({personalInformationRef:o,birthRegistrationRef:l,socialHistoryRef:r,countryRef:d,currentLocationRef:u,homeLocationRef:g,guardianInformationRef:s,patientTypeRef:v}),P=f(()=>{var m;return((m=o.value)==null?void 0:m.currentFormValues)||{}}),$=f(()=>{var m;return((m=l.value)==null?void 0:m.currentFormValues)||{}}),Y=f(()=>{var m;return((m=r.value)==null?void 0:m.currentFormValues)||{}}),p=f(()=>{var m;return((m=d.value)==null?void 0:m.currentFormValues)||{}}),L=f(()=>{var m;return((m=u.value)==null?void 0:m.currentFormValues)||{}}),_=f(()=>{var m;return((m=g.value)==null?void 0:m.currentFormValues)||{}}),x=f(()=>{var m;return((m=s.value)==null?void 0:m.currentFormValues)||{}}),te=f(()=>{var m;return((m=v.value)==null?void 0:m.currentFormValues)||{}}),K=f(()=>({personalInformation:P.value,birthRegistration:$.value,socialHistory:Y.value,country:p.value,currentLocation:L.value,homeLocation:_.value,guardianInformation:x.value,patientType:te.value})),ge=()=>{const m=Object.values(V.value);return m.forEach(w=>w==null?void 0:w.validateForm()),m.every(w=>(w==null?void 0:w.validateForm())==null)},ne=()=>{Object.values(V.value).forEach(m=>m==null?void 0:m.resetForm())},le=f(()=>new Q().checkIfChild(P.value)),{nextPage:Ie,prevPage:Ue,goToPage:We,isCardVisible:ae,showPreviousButton:ze,showPaginationButtons:je,totalPages:be,currentPage:De,showNextButton:Je}=mn(),{setFormValues:Fe}=pn(),Re=async()=>{var m,w,B,R,X,Z;try{if(C.value=!0,!ge()){ke("Please fill in all required fields");return}if(await new Q().saveRegistrationData(K.value)){const Qe=i.query.context,de=i.query.returnTo;if(Qe==="neonatal-mother"&&de==="/neonatal/enrollment"){const ie=T.getUserID();if(ie){const U=P.value,ce=_.value,me=L.value,et={patientID:ie,firstName:U.firstname||"",middleName:U.middleName||"",lastName:U.lastname||"",gender:U.gender||"F",birthdate:U.birthdate||"",nationalId:U.nationalID||"",phone:U["Phone Number"]||"",address:{city_village:((m=ce.home_village)==null?void 0:m.name)||((w=me.current_village)==null?void 0:w.name)||"",township_division:((B=ce.home_traditional_authority)==null?void 0:B.name)||((R=me.current_traditional_authority)==null?void 0:R.name)||"",state_province:((X=ce.home_district)==null?void 0:X.name)||((Z=me.current_district)==null?void 0:Z.name)||""}};a.setCreatedMother(ie,et),ne(),setTimeout(()=>{t.replace({path:de,query:{motherAdded:ie.toString(),timestamp:Date.now().toString()}})},100)}else ne(),setTimeout(()=>{t.replace({path:de})},100);return}ne(),T.getProgramID()==32?Tt()?ue("/home"):ue("/NCDEnrollment"):ue("/patientProfile")}}catch(fe){console.error(fe)}finally{C.value=!1}},Ke=async()=>{try{if(C.value=!0,!ge()){ke("Please fill in all required fields");return}await new Q().updateDemographics(K.value)&&ee.dismiss()}catch(m){console.error(m)}finally{C.value=!1}},Xe=async()=>{if(await ft("Do you want to cancel registration?")){const w=i.query.context,B=i.query.returnTo;if(ne(),w==="neonatal-mother"&&B==="/neonatal/enrollment"){a.clearEnrollmentContext(),setTimeout(()=>{t.replace({path:B})},50);return}t.replace({path:"/home"})}},Ze=async()=>{await wt("Do you want to cancel editing of demographics?","",{confirmBtnLabel:"Yes",icon:"",showBackdrop:!0})&&ee.dismiss()},ue=m=>{t.push({path:m})};return _e(i,async m=>{m.query.context!=="neonatal-mother"&&Fe(V)},{deep:!0}),qe(async()=>{i.query.context!=="neonatal-mother"&&Fe(V)}),(m,w)=>(S(),H(b(st),{class:Se({loading:e.value})},{default:h(()=>[e.value?(S(),A("div",_n,[c(b(rt),{name:"bubbles"}),w[4]||(w[4]=y("div",{class:"loading-text"},"Please wait...",-1))])):q("",!0),c(b(lt),null,{default:h(()=>[y("div",hn,M(n.editMode?"Edit Patient Demographic":"New Patient Registration"),1)]),_:1}),c(b(ut),null,{default:h(()=>{var B,R,X,Z;return[y("div",vn,[W(y("div",yn,[y("div",gn,[c(It,{ref_key:"personalInformationRef",ref:o},null,512)])],512),[[z,b(ae)(0)]]),W(y("div",bn,[le.value.underNineMonths&&!n.editMode?(S(),A("div",Dn,[le.value.underNineMonths?(S(),H(cn,{key:0,ref_key:"birthRegistrationRef",ref:l},null,512)):q("",!0)])):q("",!0),le.value.moreThanThirteenYears?(S(),A("div",Fn,[c(rn,{ref_key:"socialHistoryRef",ref:r},null,512)])):q("",!0),y("div",fn,[c(Yt,{ref_key:"countryRef",ref:d},null,512)])],512),[[z,b(ae)(1)]]),!((R=(B=p.value)==null?void 0:B.country)!=null&&R.name)||((Z=(X=p.value)==null?void 0:X.country)==null?void 0:Z.name)==="Malawi"?W((S(),A("div",wn,[y("div",Sn,[c(Mt,{ref_key:"currentLocationRef",ref:u},null,512)]),y("div",Tn,[c(Lt,{currentLocationFormValues:L.value,ref_key:"homeLocationRef",ref:g},null,8,["currentLocationFormValues"])])],512)),[[z,b(ae)(2)]]):q("",!0),W(y("div",Pn,[y("div",kn,[c(on,{personalInformationFormValues:P.value,ref_key:"guardianInformationRef",ref:s},null,8,["personalInformationFormValues"])]),b(T).getProgramID()==1?(S(),A("div",Cn,[c(un,{ref_key:"patientTypeRef",ref:v},null,512)])):q("",!0)],512),[[z,b(ae)(3)]])])]}),_:1}),c(b(dt),null,{default:h(()=>[y("div",Vn,[y("div",Nn,[c(oe,{name:"Cancel",color:"danger",icon:b(ct),"onClicked:btn":w[0]||(w[0]=B=>n.editMode?Ze():Xe())},null,8,["icon"]),W(c(b(he),{onClick:w[1]||(w[1]=B=>b(Ue)()),"aria-label":"Go to previous page"},{default:h(()=>[...w[5]||(w[5]=[E("Previous",-1)])]),_:1},512),[[z,b(ze)]])]),b(je)?(S(),A("div",Bn,[(S(!0),A(se,null,He(b(be),B=>(S(),A("span",{key:B,class:Se({dot:!0,active:B===b(De)}),onClick:R=>b(We)(B),"aria-label":"Go to page ".concat(B),role:"button"},null,10,Mn))),128))])):q("",!0),y("div",En,[W(c(oe,{name:n.editMode?"Update":"Save",loading:C.value,fill:"solid",color:"primary",icon:b(mt),"onClicked:btn":w[2]||(w[2]=B=>n.editMode?Ke():Re())},null,8,["name","loading","icon"]),[[z,b(De)===b(be)]]),W(c(oe,{name:"Next","onClicked:btn":w[3]||(w[3]=B=>b(Ie)())},null,512),[[z,b(Je)]])])])]),_:1})]),_:1},8,["class"]))}}),xn=ve($n,[["__scopeId","data-v-6acca109"]]),In=Object.freeze(Object.defineProperty({__proto__:null,default:xn},Symbol.toStringTag,{value:"Module"}));export{Nt as C,xn as R,on as _,nn as a,Lt as b,Mt as c,It as d,rn as e,In as f,pn as u};
