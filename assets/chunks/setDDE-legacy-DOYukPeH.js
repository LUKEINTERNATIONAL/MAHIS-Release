System.register(["./vendor-legacy-CdypqbXP.js","./OutcomeModal-legacy-DBkyHhF6.js","../index-legacy-a_4iRUcf.js","./BasicForm-legacy-8qaXwGgZ.js","./FacilityInformationBar-legacy-CvQZ2WwM.js","./lodash-legacy-pOOc9Efu.js","./apexcharts-legacy-DPlv51y0.js","./DateInputField-legacy-Df5wg7zw.js"],function(e,a){"use strict";var t,d,s,l,n,o,i,u,r,c,f,_,D,p,g,h,y,m,S,b,v,E,w,I,x,C,H,P,j,F,L,M,$,k,B,T,U,z,A,N,Y,V;return{setters:[e=>{t=e.d,d=e.af,s=e.bF,l=e.ae,n=e.M,o=e.G,i=e.E,u=e.ag,r=e.ah,c=e.a6,f=e.I,_=e.ab,D=e.z,p=e.H,g=e.O,h=e.f,y=e.J,m=e.e,S=e.m,b=e.l,v=e.k,E=e.Q,w=e.K,I=e.p},e=>{x=e.D},e=>{C=e.D,H=e.T,P=e.H,j=e.a1,F=e.S,L=e.Z,M=e.t,$=e.a0,k=e.a5,B=e.o,T=e.a6,U=e.N,z=e.a7,A=e.n,N=e._},e=>{Y=e.B},e=>{V=e.F},null,null,null],execute:function(){var a=document.createElement("style");a.textContent=".ddeStatusContent[data-v-8831d8d6]{font-weight:700;font-size:16px;padding:2px}.ddeStatusHeader[data-v-8831d8d6]{font-size:16px;padding:2px}.demographics_title[data-v-8831d8d6]{font-weight:700;font-size:24px}.gender[data-v-8831d8d6]{display:flex;justify-content:space-between;max-width:170px;padding-top:10px}.gender_title[data-v-8831d8d6]{margin-top:30px}.positionCenter[data-v-8831d8d6]{width:100%;margin-top:20px;display:flex;justify-content:center;align-items:center}\n/*$vite$:1*/",document.head.appendChild(a);const G=t({name:"Menu",components:{IonContent:_,IonHeader:f,IonItem:c,IonList:r,IonMenu:u,IonTitle:i,IonToolbar:o,BasicForm:Y,Toolbar:H,DynamicButton:C,IonFooter:n,IonPage:l,FacilityInformationBar:V,IonToggle:s},data:()=>({cardData:{},inputField:"",isDDEEnabled:!0,setName:"",initialPersonalData:[],iconsContent:A,apiDate:"",date:"",DDE:{},isLoading:!1}),computed:{...d(z,["sessionDate"]),...d(U,["globalPropertyStore"])},watch:{globalPropertyStore:{async handler(){await this.setDDEStatus()},deep:!0},$route:{async handler(){await this.ddeData()},deep:!0}},async mounted(){try{this.isLoading=!1,await U().loadDDEStatus(),this.apiDate=await F.getApiDate(),await this.ddeData(),this.date=j(this.sessionDate,"sessionDate","value"),this.isLoading=!1}catch(e){console.log(e)}},methods:{async setDDEStatus(){const e=U();await e.setGlobalProperty("dde_enabled",`${this.globalPropertyStore.dde_enabled}`),await this.ddeData()},async ddeData(){if("true"===this.globalPropertyStore.dde_enabled)try{const e=(await T.getRemainingNpids()).npid_status[0],a=e.unassigned,t=e.avg_consumption_rate_per_day||1;this.DDE={id:e.location_id,avg:t,unassigned:e.unassigned,assigned:e.assigned,daysLeft:Math.floor(a/t),allocated:e.allocated,unallocated:e.unallocated,lastUpdated:D(e.date_last_updated).format("DD/MMM/YYYY HH:mm:ss"),title:e.location_name+" DDE NPID Status"}}catch(e){}},openModal(){B(x)},S(e){return k(this.sessionDate,e.name,this[e.name])},handleInputData(){},async resetSessionDate(){$(this.sessionDate,"sessionDate","value","");try{await F.resetSessionDate(),L(`Session date has been reset to ${this.formatDate(this.apiDate)}`),this.redirect()}catch(e){M(`${e}`)}},redirect(){this.$router.back()},async onSubmit(){this.date=j(this.sessionDate,"sessionDate","value");try{await F.setSessionDate(this.date),L(`Successfully Back dated to ${this.formatDate(this.date)}`),this.redirect()}catch(e){M(`${e}`)}},formatDate:e=>P.toStandardHisDisplayFormat(e)}}),O={key:0,class:"spinner-overlay"},J={key:0,class:"positionCenter"},K={class:"card_content"},Q={key:1,class:"positionCenter"},R={class:"card_content"},Z={class:"card_hearder"},q={key:2};e("default",N(G,[["render",function(e,a,t,d,s,l){const n=p("ion-spinner"),o=p("Toolbar"),i=p("ion-toggle"),u=p("ion-card"),r=p("ion-row"),c=p("ion-col"),f=p("ion-content"),_=p("ion-page");return h(),g(_,{class:I({loading:e.isLoading})},{default:y(()=>[e.isLoading?(h(),m("div",O,[b(n,{name:"bubbles"}),a[1]||(a[1]=v("div",{class:"loading-text"},"Please wait...",-1))])):S("",!0),b(o),b(f,{fullscreen:!0},{default:y(()=>[e.globalPropertyStore.dde_enabled?S("",!0):(h(),m("div",J,[b(u,{class:"registration_ion_card"},{default:y(()=>[v("div",K,[a[3]||(a[3]=v("div",{class:"card_hearder"},"Set DDE",-1)),b(i,{"enable-on-off-labels":!0,modelValue:e.globalPropertyStore.dde_enabled,"onUpdate:modelValue":a[0]||(a[0]=a=>e.globalPropertyStore.dde_enabled=a)},{default:y(()=>[...a[2]||(a[2]=[E("Enable DDE",-1)])]),_:1},8,["modelValue"])])]),_:1})])),"true"==e.globalPropertyStore.dde_enabled?(h(),m("div",Q,[b(u,{class:"registration_ion_card"},{default:y(()=>[v("div",R,[v("div",Z,w(e.DDE.title),1),b(r,null,{default:y(()=>[b(c,null,{default:y(()=>[b(r,{class:"ddeStatusHeader"},{default:y(()=>[...a[4]||(a[4]=[E("Location ID",-1)])]),_:1})]),_:1}),b(c,null,{default:y(()=>[b(r,{class:"ddeStatusContent"},{default:y(()=>[E(w(e.DDE.id),1)]),_:1})]),_:1})]),_:1}),b(r,null,{default:y(()=>[b(c,null,{default:y(()=>[b(r,{class:"ddeStatusHeader"},{default:y(()=>[...a[5]||(a[5]=[E("Estimated days left",-1)])]),_:1})]),_:1}),b(c,null,{default:y(()=>[b(r,{class:"ddeStatusContent"},{default:y(()=>[E(w(e.DDE.avg),1)]),_:1})]),_:1})]),_:1}),b(r,null,{default:y(()=>[b(c,null,{default:y(()=>[b(r,{class:"ddeStatusHeader"},{default:y(()=>[...a[6]||(a[6]=[E("Unassigned",-1)])]),_:1})]),_:1}),b(c,null,{default:y(()=>[b(r,{class:"ddeStatusContent"},{default:y(()=>[E(w(e.DDE.unassigned),1)]),_:1})]),_:1})]),_:1}),b(r,null,{default:y(()=>[b(c,null,{default:y(()=>[b(r,{class:"ddeStatusHeader"},{default:y(()=>[...a[7]||(a[7]=[E("Assigned",-1)])]),_:1})]),_:1}),b(c,null,{default:y(()=>[b(r,{class:"ddeStatusContent"},{default:y(()=>[E(w(e.DDE.assigned),1)]),_:1})]),_:1})]),_:1}),b(r,null,{default:y(()=>[b(c,null,{default:y(()=>[b(r,{class:"ddeStatusHeader"},{default:y(()=>[...a[8]||(a[8]=[E("Unallocated",-1)])]),_:1})]),_:1}),b(c,null,{default:y(()=>[b(r,{class:"ddeStatusContent"},{default:y(()=>[E(w(e.DDE.unallocated),1)]),_:1})]),_:1})]),_:1}),b(r,null,{default:y(()=>[b(c,null,{default:y(()=>[b(r,{class:"ddeStatusHeader"},{default:y(()=>[...a[9]||(a[9]=[E("Allocated",-1)])]),_:1})]),_:1}),b(c,null,{default:y(()=>[b(r,{class:"ddeStatusContent"},{default:y(()=>[E(w(e.DDE.allocated),1)]),_:1})]),_:1})]),_:1}),b(r,null,{default:y(()=>[b(c,null,{default:y(()=>[b(r,{class:"ddeStatusHeader"},{default:y(()=>[...a[10]||(a[10]=[E("Average consumption per day",-1)])]),_:1})]),_:1}),b(c,null,{default:y(()=>[b(r,{class:"ddeStatusContent"},{default:y(()=>[E(w(e.DDE.daysLeft),1)]),_:1})]),_:1})]),_:1}),b(r,null,{default:y(()=>[b(c,null,{default:y(()=>[b(r,{class:"ddeStatusHeader"},{default:y(()=>[...a[11]||(a[11]=[E("Last update",-1)])]),_:1})]),_:1}),b(c,null,{default:y(()=>[b(r,{class:"ddeStatusContent"},{default:y(()=>[E(w(e.DDE.lastUpdated),1)]),_:1})]),_:1})]),_:1})])]),_:1})])):(h(),m("div",q,[...a[12]||(a[12]=[v("div",{class:"card_hearder"},"DDE is disabled",-1)])]))]),_:1})]),_:1},8,["class"])}],["__scopeId","data-v-8831d8d6"]]))}}});
