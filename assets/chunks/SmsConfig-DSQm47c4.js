import{d as M,bl as C,a6 as B,M as k,G as F,E as P,ai as R,aj as O,_ as U,I as _,a3 as A,dY as K,H as i,O as u,f as p,J as s,l as o,k as t,m,i as f,dZ as g,K as c}from"./vendor-ChpUWbYC.js";import{S as y}from"./sms_service-Bt0s9GZR.js";import{B as T}from"./BasicForm-WNyfXg7b.js";import{B as $,J as N,T as H,G as E,t as G,H as L,_ as J}from"../index-rYNkOVTy.js";import{F as j}from"./FacilityInformationBar-kd9c4MkU.js";import"./lodash-NJiRuGo9.js";import"./DateInputField-DaKctdmX.js";import"./apexcharts-Cj7xBElI.js";const W=M({name:"Menu",components:{IonContent:A,IonHeader:_,IonItem:U,IonList:O,IonMenu:R,IonTitle:P,IonToolbar:F,BasicForm:T,Toolbar:H,DynamicButton:N,IonFooter:k,IonPage:B,FacilityInformationBar:j,BasicInputField:$,VueMultiselect:C},data(){return{configData:{url:"",apiKey:"",reminderMessage:"",cancelMessage:"",reminderPeriod:"",smsReminder:!1,smsActivation:!1,smsPopup:!1},selectedPeriod:[],periodOptions:[{name:"Instant reminder",value:"Instant reminder"},{name:"1 day before",value:"1 day before"},{name:"2 days before",value:"2 days before"},{name:"3 days before",value:"3 days before"},{name:"4 days before",value:"4 days before"},{name:"5 days before",value:"5 days before"},{name:"6 days before",value:"6 days before"},{name:"7 days before",value:"7 days before"}]}},setup(){return{createOutline:K}},async mounted(){const e=await y.getConfigurations();this.updateConfigData(e)},methods:{updateConfigData(e){this.configData.url=e.sms_gateway_url,this.configData.apiKey=e.sms_api_key,this.configData.smsReminder=e.sms_reminder,this.configData.reminderMessage=e.next_appointment_message,this.configData.cancelMessage=e.cancel_appointment_message,this.configData.reminderPeriod=e.next_appointment_reminder_period,this.configData.smsActivation=e.sms_activation,this.configData.smsPopup=e.show_sms_popup,this.selectedPeriod=this.periodOptions.find(n=>n.value===e.next_appointment_reminder_period)},toggleSwitch(e){this.configData[e]=this.configData[e]},handleSelectedData(e){this.configData.reminderPeriod=e.value},handleInputData(e,n){this.configData[n]=e.target.value},handleInputKeyUp(e,n){const d=document.getElementById(n);d&&(d.innerHTML="")},handleInputDatachange(e,n){const d=document.getElementById(n);d&&(d.innerHTML="<b>Preview of the message to be sent</b> </br>".concat(e.target.value," ").concat(L.currentDisplayDate()))},async onSubmit(){try{const e=await y.setConfigurations(this.configData);this.updateConfigData(e.message),E("Successfully updated configuration file")}catch(e){G("".concat(e))}}}}),Y={class:"positionCenter"},Z={class:"card_content"},q={class:"switch-container"},z={class:"switch"},Q={class:"label-text"},X={class:"switch-container"},x={class:"switch"},ee={class:"label-text"},ne={class:"switch-container"},ae={class:"switch"},oe={class:"label-text"};function te(e,n,d,se,ie,le){const b=i("Toolbar"),D=i("BasicInputField"),l=i("ion-col"),r=i("ion-row"),v=i("ion-textarea"),I=i("vue-multiselect"),w=i("DynamicButton"),h=i("ion-card"),V=i("ion-content"),S=i("ion-page");return p(),u(S,null,{default:s(()=>[o(b),o(V,{fullscreen:!0},{default:s(()=>[t("div",Y,[o(h,{class:"registration_ion_card"},{default:s(()=>[t("div",Z,[n[26]||(n[26]=t("div",{class:"card_hearder"},"SMS CONFIGURATION",-1)),o(r,{class:"form-row"},{default:s(()=>[o(l,null,{default:s(()=>[o(D,{modelValue:e.configData.url,"onUpdate:modelValue":n[0]||(n[0]=a=>e.configData.url=a),inputValue:e.configData.url,placeholder:"Gateway url","onUpdate:inputValue":n[1]||(n[1]=a=>e.handleInputData(a,"url")),icon:e.createOutline},null,8,["modelValue","inputValue","icon"])]),_:1})]),_:1}),o(r,{class:"form-row"},{default:s(()=>[o(l,null,{default:s(()=>[o(D,{modelValue:e.configData.apiKey,"onUpdate:modelValue":n[2]||(n[2]=a=>e.configData.apiKey=a),inputValue:e.configData.apiKey,placeholder:"Gateway API Key","onUpdate:inputValue":n[3]||(n[3]=a=>e.handleInputData(a,"apiKey")),icon:e.createOutline,inputType:"password"},null,8,["modelValue","inputValue","icon"])]),_:1})]),_:1}),o(r,{class:"form-row"},{default:s(()=>[o(l,null,{default:s(()=>[t("div",q,[t("label",z,[f(t("input",{type:"checkbox","onUpdate:modelValue":n[4]||(n[4]=a=>e.configData.smsReminder=a),onChange:n[5]||(n[5]=a=>e.toggleSwitch("smsReminder"))},null,544),[[g,e.configData.smsReminder]]),n[21]||(n[21]=t("span",{class:"slider round"},null,-1))]),t("span",Q,c(e.configData.smsReminder?"SMS Reminder turned ON":"SMS Reminder turned OFF"),1)])]),_:1})]),_:1}),e.configData.smsReminder?(p(),u(r,{key:0,class:"form-row"},{default:s(()=>[o(l,null,{default:s(()=>[o(v,{class:"custom",modelValue:e.configData.reminderMessage,"onUpdate:modelValue":n[6]||(n[6]=a=>e.configData.reminderMessage=a),value:e.configData.reminderMessage,label:"Reminder Message","label-placement":"floating",onIonInput:n[7]||(n[7]=a=>e.handleInputData(a,"reminderMessage")),onIonBlur:n[8]||(n[8]=a=>e.handleInputKeyUp(a,"reminder_preview")),onInput:n[9]||(n[9]=a=>e.handleInputDatachange(a,"reminder_preview")),onIonFocus:n[10]||(n[10]=a=>e.handleInputDatachange(a,"reminder_preview")),placeholder:"Add Reminder message","auto-grow":!0,fill:"outline"},null,8,["modelValue","value"]),n[22]||(n[22]=t("div",{id:"reminder_preview",style:{"background-color":"beige","font-style":"italic",color:"orange"}},null,-1))]),_:1})]),_:1})):m("",!0),e.configData.smsReminder?(p(),u(r,{key:1,class:"form-row"},{default:s(()=>[o(l,null,{default:s(()=>[o(v,{class:"custom",modelValue:e.configData.cancelMessage,"onUpdate:modelValue":n[11]||(n[11]=a=>e.configData.cancelMessage=a),value:e.configData.cancelMessage,label:"Cancel Appointment Message","label-placement":"floating",onIonInput:n[12]||(n[12]=a=>e.handleInputData(a,"cancelMessage")),onIonBlur:n[13]||(n[13]=a=>e.handleInputKeyUp(a,"appointment_preview")),onInput:n[14]||(n[14]=a=>e.handleInputDatachange(a,"appointment_preview")),onIonFocus:n[15]||(n[15]=a=>e.handleInputDatachange(a,"appointment_preview")),placeholder:"Add Cancel appointment message","auto-grow":!0,fill:"outline"},null,8,["modelValue","value"]),n[23]||(n[23]=t("div",{id:"appointment_preview",style:{"background-color":"beige","font-style":"italic",color:"orange"}},null,-1))]),_:1})]),_:1})):m("",!0),e.configData.smsReminder?(p(),u(r,{key:2,class:"form-row"},{default:s(()=>[o(l,null,{default:s(()=>[o(I,{modelValue:e.selectedPeriod,"onUpdate:modelValue":[n[16]||(n[16]=a=>e.selectedPeriod=a),e.handleSelectedData],options:e.periodOptions,multiple:!1,"max-height":150,"hide-selected":!1,"close-on-select":!0,searchable:!0,"track-by":"name",label:"name","open-direction":"bottom",placeholder:"Select reminder period"},null,8,["modelValue","options","onUpdate:modelValue"])]),_:1})]),_:1})):m("",!0),o(r,{class:"form-row"},{default:s(()=>[o(l,null,{default:s(()=>[t("div",X,[t("label",x,[f(t("input",{type:"checkbox","onUpdate:modelValue":n[17]||(n[17]=a=>e.configData.smsActivation=a),onChange:n[18]||(n[18]=a=>e.toggleSwitch("smsActivation"))},null,544),[[g,e.configData.smsActivation]]),n[24]||(n[24]=t("span",{class:"slider round"},null,-1))]),t("span",ee,c(e.configData.smsActivation?"SMS notification turned ON":"SMS notification turned OFF"),1)])]),_:1})]),_:1}),o(r,{class:"form-row"},{default:s(()=>[o(l,null,{default:s(()=>[t("div",ne,[t("label",ae,[f(t("input",{type:"checkbox","onUpdate:modelValue":n[19]||(n[19]=a=>e.configData.smsPopup=a),onChange:n[20]||(n[20]=a=>e.toggleSwitch("smsPopup"))},null,544),[[g,e.configData.smsPopup]]),n[25]||(n[25]=t("span",{class:"slider round"},null,-1))]),t("span",oe,c(e.configData.smsPopup?"Reminder popup turned ON":"Reminder popup turned OFF"),1)])]),_:1})]),_:1}),t("div",null,[o(w,{onClick:e.onSubmit,name:"Save",fill:"solid",iconSlot:"icon-only",style:{float:"right"}},null,8,["onClick"])])])]),_:1})])]),_:1})]),_:1})}const De=J(W,[["render",te],["__scopeId","data-v-dc6e95d3"]]);export{De as default};
