import{d as y,am as M,b2 as h,r,c as E,a as x,w as f,O as R,f as P,J as T,l,u as i,ab as D,k as I,N as B,Q as Y,L as k,f8 as w,K as G,ae as b}from"./vendor-BTebhqHt.js";import{u as V,b as o,T as U,t as O,_ as F}from"../index-DBQF-8Xn.js";import{N as X}from"./neonatal_service-Cya1LD0G.js";import{g as q}from"./admissionWorkflow-C1e4oic-.js";import{A as W}from"./AdmissionProgressBar-DTe5yw7R.js";import"./lodash-NJiRuGo9.js";import"./apexcharts-no8IW45T.js";const z={class:"checkpoint-container"},H={class:"control-buttons"},J=y({__name:"NeonatalCheckpoint",setup(K){const a=M(),v=V(),{patient:N}=h(v),m=r(!1),u=r([]),p=r(!1),A=r(!1),n=r([{encounterType:o.NEONATAL_SIGNS_SYMPTOMS,title:"Signs & Symptoms",route:"/neonatal/signs-symptoms",encounterNames:["NEONATAL SIGNS & SYMPTOMS","NEONATAL SIGNS SYMPTOMS"],isCompleted:!1},{encounterType:o.NEONATAL_REVIEW_OF_SYSTEMS,title:"Review of Systems",route:"/neonatal/review-of-systems",encounterNames:["NEONATAL REVIEW OF SYSTEMS"],isCompleted:!1},{encounterType:o.PHYSICAL_EXAMINATION_BABY,title:"General Examination",route:"/neonatal/general-examination",encounterNames:["PHYSICAL EXAMINATION BABY","NEONATAL GENERAL EXAMINATION"],isCompleted:!1},{encounterType:o.VITALS,title:"Vitals",route:"/neonatal/vitals",encounterNames:["VITALS","NEONATAL VITALS"],isCompleted:!1},{encounterType:o.NEONATAL_SYSTEMIC_EXAMINATION,title:"Systemic Examination",route:"/neonatal/SystemicExamination",encounterNames:["NEONATAL SYSTEMIC EXAMINATION"],isCompleted:!1},{encounterType:o.DIAGNOSIS,title:"Diagnosis",route:"/neonatal/diagnosis",encounterNames:["DIAGNOSIS","NEONATAL DIAGNOSIS"],isCompleted:!1},{title:"Investigations",route:"/neonatal/investigation",encounterNames:["LAB ORDERS","LAB RESULTS"],isCompleted:!1},{encounterType:o.TREATMENT,title:"Treatment Plan",route:"/neonatal/treatment-plan",encounterNames:["TREATMENT","NEONATAL TREATMENT PLAN"],isCompleted:!1},{encounterType:o.NEONATAL_ADMISSION_OUTCOMES,title:"Admission Outcomes",route:"/neonatal/admission-outcomes",encounterNames:["NEONATAL ADMISSION OUTCOMES","ADMISSION OUTCOMES"],isCompleted:!1},{title:"Sign Off",route:"/neonatal/admission-signoff",encounterNames:["NEONATAL SIGNOFF"],isCompleted:!1}]),S=e=>(e!=null?e:"").trim().toUpperCase(),C=E(()=>{if(!A.value)return"Next: Triage";if(!p.value)return"Next: Profiling";const e=n.value.find(t=>!t.isCompleted);return e?"Next: ".concat(e.title):"Print Summary"}),L=E(()=>n.value.every(e=>e.isCompleted)),d=async()=>{var e;if(!((e=N.value)!=null&&e.patientID)){O("No patient selected"),a.push("/patientProfile");return}m.value=!0;try{const t=await X.getSavedEncounters(N.value.patientID);u.value=Array.isArray(t==null?void 0:t.encounters)?t.encounters:[],p.value=u.value.some(s=>{const c=S(s);return c==="NEONATAL ENROLLMENT"||c==="NEONATAL ENROLMENT"}),A.value=u.value.some(s=>S(s)==="NEONATAL TRIAGE");const g=q(u.value,n.value);n.value.forEach((s,c)=>{s.isCompleted=c<g})}catch(t){console.error("Error loading progress:",t),O("Unable to load progress")}finally{m.value=!1}},_=()=>{if(!A.value){a.push("/neonatal/triage");return}if(!p.value){a.push("/neonatal/enrollment");return}const e=n.value.find(t=>!t.isCompleted);e?a.push({path:e.route,query:e.query||{}}):L.value&&a.push("/neonatal/admission-outcomes")};return x(()=>{d()}),f(()=>{var e;return(e=N.value)==null?void 0:e.patientID},e=>{e&&d()}),f(()=>a.currentRoute.value.fullPath,e=>{e==="/neonatal/checkpoint"&&d()}),(e,t)=>(P(),R(i(b),null,{default:T(()=>[l(U),l(i(D),{class:"ion-padding"},{default:T(()=>[I("div",z,[l(W),I("div",H,[l(i(B),{expand:"block",fill:"solid",color:"primary",onClick:_,disabled:m.value},{default:T(()=>[l(i(k),{slot:"start",icon:i(w)},null,8,["icon"]),Y(" "+G(C.value),1)]),_:1},8,["disabled"])])])]),_:1})]),_:1}))}}),ae=F(J,[["__scopeId","data-v-162d27fd"]]);export{ae as default};
