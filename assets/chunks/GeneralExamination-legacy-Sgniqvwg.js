!function(){function e(e,a,s){return(a=function(e){var a=function(e,a){if("object"!=typeof e||!e)return e;var s=e[Symbol.toPrimitive];if(void 0!==s){var t=s.call(e,a||"default");if("object"!=typeof t)return t;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===a?String:Number)(e)}(e,"string");return"symbol"==typeof a?a:a+""}(a))in e?Object.defineProperty(e,a,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[a]=s,e}System.register(["./vendor-legacy-h4cyiMXU.js","../index-legacy-ByMUQtpm.js","./DemographicBar-legacy-BS2GJa91.js","./NeonatalStepper-legacy-DxBo5JGo.js","./useNeonatalExamStore-legacy-DM0Mu8Ec.js","./lodash-legacy-pOOc9Efu.js","./apexcharts-legacy-CRcfwVwU.js","./SaveProgressModal-legacy-GkN0WTU4.js","./images-legacy-CpQcoUy5.js","./enrollment-legacy-BWFKsMdA.js"],function(a,s){"use strict";var t,n,l,i,o,r,u,m,c,d,v,p,b,y,f,h,A,g,w,P,_,C,F,B,x,O,S,D,I;return{setters:[e=>{t=e.b2,n=e.d,l=e.r,i=e.w,o=e.e,r=e.f,u=e.l,m=e.u,c=e.c,d=e.ab,v=e.ae,p=e.am,b=e.H,y=e.O,f=e.J},e=>{h=e.u,A=e.aa,g=e.F,w=e.aE,P=e.w,_=e.aX,C=e.z,F=e._,B=e.T,x=e.t},e=>{O=e.D},e=>{S=e.n,D=e.N},e=>{I=e.u},null,null,null,null,null],execute:function(){var s=document.createElement("style");s.textContent=".activity-assessment-wrapper[data-v-ac0b0041]{display:flex;flex-direction:column}.head-assessment-wrapper[data-v-4aef5988],.cardiovascular-assessment-wrapper[data-v-4929920c],.genital-anus-assessment-wrapper[data-v-94b28256],.cleft-lip-palate-wrapper[data-v-5d6bdac9],.congenital-abnormalities-wrapper[data-v-83d289a0],.general-examination-summary-wrapper[data-v-7475ebc7]{display:flex;flex-direction:column;gap:1rem}.neonatal-general-examination-page[data-v-dff41fbe]{min-height:100vh}\n/*$vite$:1*/",document.head.appendChild(s);class V extends _{constructor(e,a){super(e,117,a)}}class k extends _{constructor(a,s){super(a,117,s),e(this,"physical_examination_service",void 0),e(this,"childObservation",async e=>await this.physical_examination_service.buildValueCoded(e,e)),e(this,"computeParentObservation",async e=>({tag:e,obs:await this.physical_examination_service.buildValueCoded(e,e)})),e(this,"buildValueText",async(e,a)=>await this.physical_examination_service.buildValueText(e,a)),this.physical_examination_service=new V(a,s)}async ensureEncounterExists(){if(this.encounterID)return;const e=await this.physical_examination_service.createEncounter();if(!e)throw new Error("Failed to create encounter");if(this.encounterID=e.encounter_id,e.patient_id!==this.patientID)throw new Error("Encounter created for the wrong patient! Context inconsistency detected.")}async onSubmit(e){await this.ensureEncounterExists(),this.saveObservationList(e)}}const E=async(e,a,s,t)=>{if(!s){const e=`${t} is required`;throw P(e),new Error(e)}const n=await e.computeParentObservation(a),l={[`${a.replace(/\s/g,"").toLowerCase()}Observation`]:n},i=await e.childObservation(s);if(!i){throw new Error(`${t} observations are required`)}return l[Object.keys(l)[0]].obs.child=[i],l},H=async e=>{try{const a=I(),s=await E(e,"Activity",a.activityAssessment,"Activity Assessment");await e.onSubmit([s.activityObservation.obs]),a.setActivityAssessment(null)}catch(a){throw a}},G=async e=>{try{const a=I(),s=await E(e,"Fontanelle",a.fontanelleAssessment,"Fontanelle Assessment");await e.onSubmit([s.fontanelleObservation.obs]),a.setFontanelleAssessment(null);const t=await E(e,"Head",a.massInHeadAssessment,"Mass in Head Assessment");await e.onSubmit([t.headObservation.obs]),a.setMassInHeadAssessment(null);const n={colorObservation:await e.computeParentObservation("Colour")};if(n.colorObservation.obs.child=[],null!==a.isBabyYellow&&a.isBabyYellow){const a=await e.childObservation("Yell");n.colorObservation.obs.child.push(a)}if(null!==a.isBabyPallorPink&&a.isBabyPallorPink){const a=await e.childObservation("Pink");n.colorObservation.obs.child.push(a)}if(null!==a.hasBabyCyanosis&&a.hasBabyCyanosis){const a=await e.childObservation("Blue");n.colorObservation.obs.child.push(a)}if(null!==a.hasBabyOedema&&a.hasBabyOedema){const a=await e.childObservation("White");n.colorObservation.obs.child.push(a)}await e.onSubmit([n.colorObservation.obs]),a.setIsBabyYellow(null),a.setIsBabyPallorPink(null),a.setHasBabyCyanosis(null),a.setHasBabyOedema(null)}catch(a){throw a}},N=async e=>{try{const a=I(),s=await E(e,"Femorals",a.femoralPulses,"Femoral Pulses assessment");await e.onSubmit([s.femoralsObservation.obs]),a.setFemoralPulses(null)}catch(a){throw a}},T=async e=>{try{const a=I(),s=await E(e,"Anus2",a.anusAssessment,"Anus assessment");await e.onSubmit([s.anus2Observation.obs]),a.setAnusAssessment(null);const t=await E(e,"Genitalia",a.genitaliaAssessment,"Genitalia assessment");await e.onSubmit([t.genitaliaObservation.obs]),a.setGenitaliaAssessment(null)}catch(a){throw a}},j=async e=>{try{const a=I(),s=await E(e,"Palate",a.cleftAssessment,"Cleft Lip/Palate assessment");await e.onSubmit([s.palateObservation.obs]),a.setCleftAssessment(null)}catch(a){throw a}},L=async e=>{try{const a=I(),s={congenitalAbnormalitiesObservation:await e.computeParentObservation("Other congenital abnormality")};if(s.congenitalAbnormalitiesObservation.obs.child=[],null!==a.hasCongenitalAbnormalities){let t=a.hasCongenitalAbnormalities?"Yes":"No";const n=await e.childObservation(t);s.congenitalAbnormalitiesObservation.obs.child.push(n)}if(""!==a.abnormalitiesNotes){const t=await e.buildValueText("Notes",a.abnormalitiesNotes);s.congenitalAbnormalitiesObservation.obs.child.push(t)}await e.onSubmit([s.congenitalAbnormalitiesObservation.obs]),a.setHasCongenitalAbnormalities(null),a.setAbnormalitiesNotes("")}catch(a){throw a}},Y=async()=>{try{const e=h(),{patient:a}=t(e),s=A(),n=new k(a.value.patientID,s.user_ID);await Promise.all([H(n),G(n),N(n),T(n),j(n),L(n)]),console.log("SUCCESS: All General Examination sections saved successfully!"),g("General Examination saved successfully"),w.push({path:"/neonatal/checkpoint"})}catch(e){throw console.error("FAILED to save General Examination:",e),P("Failed to save General Examination. Please try again."),e}},M={class:"activity-assessment-wrapper"},R=F(n({__name:"ActivityAssessmentForm",setup(e,{expose:a}){const s=l(null),t=S[0].formData,n=I();return i(()=>{var e,a;return null===(e=s.value)||void 0===e||null===(a=e.getFormValues)||void 0===a||null===(a=a.call(e))||void 0===a?void 0:a.activityAssessment},e=>{(e=>{n.setActivityAssessment(null!=e?e:null)})(e)},{immediate:!0}),a({validateForm:()=>{var e,a;return(null===(e=s.value)||void 0===e||null===(a=e.validateForm)||void 0===a?void 0:a.call(e))||null},getFormValues:()=>{var e,a;return(null===(e=s.value)||void 0===e||null===(a=e.getFormValues)||void 0===a?void 0:a.call(e))||{}}}),(e,a)=>(r(),o("div",M,[u(C,{formData:m(t),ref_key:"formRef",ref:s},null,8,["formData"])]))}}),[["__scopeId","data-v-ac0b0041"]]),$={class:"head-assessment-wrapper"},z=F(n({__name:"HeadAssessmentForm",setup(e,{expose:a}){const s=l(null),t=S[1].formData,n=I(),c=e=>{e.fontanelleAssessment&&n.setFontanelleAssessment(e.fontanelleAssessment),e.massInHeadAssessment&&n.setMassInHeadAssessment(e.massInHeadAssessment),void 0!==e.isBabyYellow&&n.setIsBabyYellow("yes"===e.isBabyYellow||"no"!==e.isBabyYellow&&null),void 0!==e.isBabyPallorPink&&n.setIsBabyPallorPink("yes"===e.isBabyPallorPink||"no"!==e.isBabyPallorPink&&null),void 0!==e.hasBabyCyanosis&&n.setHasBabyCyanosis("yes"===e.hasBabyCyanosis||"no"!==e.hasBabyCyanosis&&null),void 0!==e.hasBabyOedema&&n.setHasBabyOedema("yes"===e.hasBabyOedema||"no"!==e.hasBabyOedema&&null)};return i(()=>{var e;return null===(e=s.value)||void 0===e?void 0:e.formValues},e=>{e&&c(e)},{deep:!0}),i(()=>s.value,e=>{null!=e&&e.getFormValues&&c(e.getFormValues())},{immediate:!0}),a({validateForm:()=>{var e,a;return(null===(e=s.value)||void 0===e||null===(a=e.validateForm)||void 0===a?void 0:a.call(e))||null},getFormValues:()=>{var e,a;return(null===(e=s.value)||void 0===e||null===(a=e.getFormValues)||void 0===a?void 0:a.call(e))||{}}}),(e,a)=>(r(),o("div",$,[u(C,{formData:m(t),ref_key:"formRef",ref:s},null,8,["formData"])]))}}),[["__scopeId","data-v-4aef5988"]]),U={class:"cardiovascular-assessment-wrapper"},q=F(n({__name:"CardiovascularAssessmentForm",setup(e,{expose:a}){const s=l(null),t=S[2].formData,n=I(),c=e=>{e.heartSoundsAssessment&&n.setHeartSoundsAssessment(e.heartSoundsAssessment),e.femoralPulses&&n.setFemoralPulses(e.femoralPulses),void 0!==e.hasCardiacAbnormality&&n.setHasCardiacAbnormality("yes"===e.hasCardiacAbnormality||"no"!==e.hasCardiacAbnormality&&null)};return i(()=>{var e;return null===(e=s.value)||void 0===e?void 0:e.formValues},e=>{e&&c(e)},{deep:!0}),i(()=>s.value,e=>{null!=e&&e.getFormValues&&c(e.getFormValues())},{immediate:!0}),a({validateForm:()=>{var e,a;return(null===(e=s.value)||void 0===e||null===(a=e.validateForm)||void 0===a?void 0:a.call(e))||null},getFormValues:()=>{var e,a;return(null===(e=s.value)||void 0===e||null===(a=e.getFormValues)||void 0===a?void 0:a.call(e))||{}}}),(e,a)=>(r(),o("div",U,[u(C,{formData:m(t),ref_key:"formRef",ref:s},null,8,["formData"])]))}}),[["__scopeId","data-v-4929920c"]]),J={class:"genital-anus-assessment-wrapper"},W=F(n({__name:"GenitalAndAnusAssessmentForm",setup(e,{expose:a}){const s=l(null),t=S[3].formData,n=I(),c=e=>{e.genitaliaAssessment&&n.setGenitaliaAssessment(e.genitaliaAssessment),e.anusPatent&&n.setAnusAssessment(e.anusPatent),void 0!==e.hasMeconiumPassed&&n.setHasMeconiumPassed("yes"===e.hasMeconiumPassed||"no"!==e.hasMeconiumPassed&&null)};return i(()=>{var e;return null===(e=s.value)||void 0===e?void 0:e.formValues},e=>{e&&c(e)},{deep:!0}),i(()=>s.value,e=>{null!=e&&e.getFormValues&&c(e.getFormValues())},{immediate:!0}),a({validateForm:()=>{var e,a;return(null===(e=s.value)||void 0===e||null===(a=e.validateForm)||void 0===a?void 0:a.call(e))||null},getFormValues:()=>{var e,a;return(null===(e=s.value)||void 0===e||null===(a=e.getFormValues)||void 0===a?void 0:a.call(e))||{}}}),(e,a)=>(r(),o("div",J,[u(C,{formData:m(t),ref_key:"formRef",ref:s},null,8,["formData"])]))}}),[["__scopeId","data-v-94b28256"]]),X={class:"cleft-lip-palate-wrapper"},K=F(n({__name:"CleftLipPalateForm",setup(e,{expose:a}){const s=l(null),t=S[4].formData,n=I();return i(()=>{var e,a;return null===(e=s.value)||void 0===e||null===(a=e.getFormValues)||void 0===a||null===(a=a.call(e))||void 0===a?void 0:a.cleftLipPalateAssessment},e=>{console.log("selection: ",e),(e=>{if(!e)return n.setHasCleftLip(null),n.setHasCleftPalate(null),void n.setCleftAssessment(null);const a="cleft_lip"===e||"cleft_lip_and_palate"===e,s="cleft_palate"===e||"cleft_lip_and_palate"===e;n.setHasCleftLip(a),n.setHasCleftPalate(s),n.setCleftAssessment(a||s?"present":"absent")})(null!=e?e:null)},{immediate:!0}),a({validateForm:()=>{var e,a;return(null===(e=s.value)||void 0===e||null===(a=e.validateForm)||void 0===a?void 0:a.call(e))||null},getFormValues:()=>{var e,a;return(null===(e=s.value)||void 0===e||null===(a=e.getFormValues)||void 0===a?void 0:a.call(e))||{}}}),(e,a)=>(r(),o("div",X,[u(C,{formData:m(t),ref_key:"formRef",ref:s},null,8,["formData"])]))}}),[["__scopeId","data-v-5d6bdac9"]]),Q={class:"congenital-abnormalities-wrapper"},Z=F(n({__name:"CongenitalAbnormalitiesForm",setup(e,{expose:a}){const s=l(null),t=S[5].formData,n=I(),c=e=>{void 0!==e.hasCongenitalAbnormalities&&n.setHasCongenitalAbnormalities("yes"===e.hasCongenitalAbnormalities||"no"!==e.hasCongenitalAbnormalities&&null),e.congenitalAbnormalitiesDescription&&n.setAbnormalitiesNotes(e.congenitalAbnormalitiesDescription)};return i(()=>{var e;return null===(e=s.value)||void 0===e?void 0:e.formValues},e=>{e&&c(e)},{deep:!0}),i(()=>s.value,e=>{null!=e&&e.getFormValues&&c(e.getFormValues())},{immediate:!0}),a({validateForm:()=>{var e,a;return(null===(e=s.value)||void 0===e||null===(a=e.validateForm)||void 0===a?void 0:a.call(e))||null},getFormValues:()=>{var e,a;return(null===(e=s.value)||void 0===e||null===(a=e.getFormValues)||void 0===a?void 0:a.call(e))||{}}}),(e,a)=>(r(),o("div",Q,[u(C,{formData:m(t),ref_key:"formRef",ref:s},null,8,["formData"])]))}}),[["__scopeId","data-v-83d289a0"]]),ee={class:"general-examination-summary-wrapper"},ae=F(n({__name:"GeneralExaminationSummary",setup(e,{expose:a}){const s=l(null),t=S[6].formData,n=I(),i=c(()=>({activityAssessment:n.activityAssessment,fontanelleAssessment:n.fontanelleAssessment,massInHeadAssessment:n.massInHeadAssessment,isBabyYellow:n.isBabyYellow?"yes":!1===n.isBabyYellow?"no":void 0,isBabyPallorPink:n.isBabyPallorPink?"yes":!1===n.isBabyPallorPink?"no":void 0,hasBabyCyanosis:n.hasBabyCyanosis?"yes":!1===n.hasBabyCyanosis?"no":void 0,hasBabyOedema:n.hasBabyOedema?"yes":!1===n.hasBabyOedema?"no":void 0,heartSoundsAssessment:n.heartSoundsAssessment,femoralPulses:n.femoralPulses,hasCardiacAbnormality:n.hasCardiacAbnormality?"yes":!1===n.hasCardiacAbnormality?"no":void 0,genitaliaAssessment:n.genitaliaAssessment,anusPatent:n.anusAssessment,hasMeconiumPassed:n.hasMeconiumPassed?"yes":!1===n.hasMeconiumPassed?"no":void 0,hasCleftLip:n.hasCleftLip?"yes":!1===n.hasCleftLip?"no":void 0,hasCleftPalate:n.hasCleftPalate?"yes":!1===n.hasCleftPalate?"no":void 0,hasCongenitalAbnormalities:n.hasCongenitalAbnormalities?"yes":!1===n.hasCongenitalAbnormalities?"no":void 0,congenitalAbnormalitiesDescription:n.abnormalitiesNotes})),m=t.find(e=>"summaryField"===e.componentType),d=c(()=>null!=m&&m.builder?m.builder(i.value):[]),v=c(()=>t.map(e=>"summaryField"===e.componentType?{...e,builder:void 0,summaryRows:d.value}:e));return a({validateForm:()=>null,getFormValues:()=>{var e,a;return(null===(e=s.value)||void 0===e||null===(a=e.getFormValues)||void 0===a?void 0:a.call(e))||{}}}),(e,a)=>(r(),o("div",ee,[u(C,{formData:v.value,ref_key:"formRef",ref:s},null,8,["formData"])]))}}),[["__scopeId","data-v-7475ebc7"]]),se=n({name:"NeonatalGeneralExamination",components:{IonPage:v,IonContent:d,Toolbar:B,DemographicBar:O,NeonatalStepper:D,ActivityAssessmentForm:R,HeadAssessmentForm:z,CardiovascularAssessmentForm:q,GenitalAndAnusAssessmentForm:W,CleftLipPalateForm:K,CongenitalAbnormalitiesForm:Z,GeneralExaminationSummary:ae},setup(){const e=p(),a=h(),{patient:s}=t(a),n=I(),o=l(!1),r=()=>{var e;const a=null==(t=null===(e=s.value)||void 0===e?void 0:e.patientID)?null:String(t);var t;a&&n.setCurrentPatientID(a)};r(),i(()=>{var e;return null===(e=s.value)||void 0===e?void 0:e.patientID},()=>r());const u=l(S.map((e,a)=>({title:e.title,number:a+1,checked:!1,class:0===a?"open_step common_step":"common_step",last_step:a===S.length-1?"last_step":""}))),m=[{title:S[0].title,subtitle:S[0].subtitle||"",value:"1",component:R},{title:S[1].title,subtitle:S[1].subtitle||"",value:"2",component:z},{title:S[2].title,subtitle:S[2].subtitle||"",value:"3",component:q},{title:S[3].title,subtitle:S[3].subtitle||"",value:"4",component:W},{title:S[4].title,subtitle:S[4].subtitle||"",value:"5",component:K},{title:S[5].title,subtitle:S[5].subtitle||"",value:"6",component:Z},{title:S[6].title,subtitle:S[6].subtitle||"",value:"7",component:ae}];return{router:e,patient:s,stepperTitle:"General Examination",currentOpenStepper:"1",wizardData:u,stepperData:m,updateStatus:e=>{e&&e.value&&u.value.forEach((a,s)=>{e.value===(s+1).toString()?(a.class="open_step common_step",a.checked=!1):s<parseInt(e.value)-1?(a.class="common_step color_white",a.checked=!0):(a.class="common_step",a.checked=!1)})},getSaveFunction:a=>a===m.length-1?async()=>{var a;if(null!==(a=s.value)&&void 0!==a&&a.patientID){if(!o.value)try{console.log("[GeneralExamination] finish clicked, saving exam"),console.log("[GeneralExamination] store payload",{activityAssessment:n.activityAssessment,fontanelleAssessment:n.fontanelleAssessment,massInHeadAssessment:n.massInHeadAssessment,isBabyYellow:n.isBabyYellow,isBabyPallorPink:n.isBabyPallorPink,hasBabyCyanosis:n.hasBabyCyanosis,hasBabyOedema:n.hasBabyOedema,heartSoundsAssessment:n.heartSoundsAssessment,femoralPulses:n.femoralPulses,hasCardiacAbnormality:n.hasCardiacAbnormality,genitaliaAssessment:n.genitaliaAssessment,anusAssessment:n.anusAssessment,hasMeconiumPassed:n.hasMeconiumPassed,cleftAssessment:n.cleftAssessment,hasCleftLip:n.hasCleftLip,hasCleftPalate:n.hasCleftPalate,hasCongenitalAbnormalities:n.hasCongenitalAbnormalities,abnormalitiesNotes:n.abnormalitiesNotes}),o.value=!0,await Y(),g("General examination saved successfully"),e.push({path:"/neonatal/checkpoint"}),n.resetExamData()}catch(t){console.error("General examination save failed",t),P("Failed to save general examination. Please try again."),o.value=!1}}else x("No patient selected")}:null,isSaving:o}}});a("default",F(se,[["render",function(e,a,s,t,n,l){const i=b("Toolbar"),o=b("NeonatalStepper"),m=b("ion-content"),c=b("ion-page");return r(),y(c,{class:"neonatal-general-examination-page"},{default:f(()=>[u(i),u(m,{fullscreen:!0},{default:f(()=>[u(o,{wizardData:e.wizardData,StepperData:e.stepperData,stepperTitle:e.stepperTitle,openStepper:e.currentOpenStepper,backUrl:"/patientProfile",getSaveFunction:e.getSaveFunction,flowType:"general-examination",onUpdateStatus:e.updateStatus},null,8,["wizardData","StepperData","stepperTitle","openStepper","getSaveFunction","onUpdateStatus"])]),_:1})]),_:1})}],["__scopeId","data-v-dff41fbe"]]))}}})}();
