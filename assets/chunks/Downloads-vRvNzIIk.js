import{d as E,ao as R,r as g,a as T,O as I,f as r,J as t,l as i,u as l,a3 as W,k as e,e as v,m as B,dn as H,E as U,Q as c,K as w,F as G,P as V,bq as A,aU as C,V as z,L as M,N as b,p as $,cj as K,dp as P,bs as j,dq as J,a6 as Q,dr as y,ds as D,dt as L}from"./vendor-CdYsMjog.js";import{i as X}from"./Img-CJEgX1Vr.js";import{_ as Y}from"../index-BTVmKFoP.js";import"./lodash-NJiRuGo9.js";import"./apexcharts-CTeizPIP.js";const Z={class:"download-container"},ee={class:"header-section"},oe={class:"logo-container"},se={key:0,class:"version-info"},le={key:1,class:"loading-text"},ae={class:"downloads-grid"},ne={class:"card-header"},ie={class:"platform-info"},te={class:"platform-name"},de={class:"platform-description"},re={class:"file-details"},ce={class:"detail-item"},ue={key:0,class:"detail-item"},pe={key:2},fe={key:3},me={class:"help-buttons"},ve={class:"back-link"},we=E({__name:"Downloads",setup(he){const S=R(),p=g(null),f=g(""),_=g(!0),x=g("test"),m=g([{id:"windows",name:"Windows",icon:y,file:"",color:"#0078D4",description:"For Windows 10 and above"},{id:"mac",name:"macOS",icon:D,file:"",color:"#000000",description:"For macOS 10.15 and above"},{id:"linux",name:"Linux",icon:y,file:"",color:"#FCC624",description:"For Debian/Ubuntu distributions"},{id:"android",name:"Android",icon:L,file:"",color:"#3DDC84",description:"For Android 8.0 and above"}]),k=d=>{if(d===0)return"0 Bytes";const o=1024,s=["Bytes","KB","MB","GB"],a=Math.floor(Math.log(d)/Math.log(o));return Math.round(d/Math.pow(o,a)*100)/100+" "+s[a]},N=async()=>{try{_.value=!0;const d=x.value==="production"?"https://api.github.com/repos/LUKEINTERNATIONAL/MAHIS-Production/releases/latest":"https://api.github.com/repos/LUKEINTERNATIONAL/MAHIS-Release/releases/latest",o=await fetch(d);if(!o.ok)throw new Error("Failed to fetch latest release");const s=await o.json();f.value=s.tag_name,s.assets.forEach(a=>{const h=a.name.toLowerCase();if(h.endsWith(".exe")){const n=m.value.find(u=>u.id==="windows");n&&(n.file=a.name,n.size=k(a.size))}else if(h.endsWith(".dmg")){const n=m.value.find(u=>u.id==="mac");n&&(n.file=a.name,n.size=k(a.size))}else if(h.endsWith(".deb")||h.endsWith(".appimage")){const n=m.value.find(u=>u.id==="linux");n&&(n.file=a.name,n.size=k(a.size))}else if(h.endsWith(".apk")){const n=m.value.find(u=>u.id==="android");n&&(n.file=a.name,n.size=k(a.size))}}),console.log("Latest release loaded:",f.value)}catch(d){console.error("Error fetching latest release:",d),f.value="v1.0.25-alpha.1",F()}finally{_.value=!1}},F=()=>{m.value=[{id:"windows",name:"Windows",icon:y,file:"MaHIS-Setup-1.0.25-alpha.1.exe",size:"85 MB",color:"#0078D4",description:"For Windows 10 and above"},{id:"mac",name:"macOS",icon:D,file:"MaHIS-1.0.25-alpha.1.dmg",size:"92 MB",color:"#000000",description:"For macOS 10.15 and above"},{id:"linux",name:"Linux",icon:y,file:"mahis_1.0.25-alpha.1_amd64.deb",size:"78 MB",color:"#FCC624",description:"For Debian/Ubuntu distributions"},{id:"android",name:"Android",icon:L,file:"MaHIS-1.0.25-alpha.1.apk",size:"45 MB",color:"#3DDC84",description:"For Android 8.0 and above"}]},O=(d,o)=>{if(!d){console.error("No file available for download");return}p.value=o;const s="https://github.com/LUKEINTERNATIONAL/MAHIS-Release/releases/download/".concat(f.value),a="".concat(s,"/").concat(d);window.open(a,"_blank"),console.log("Downloading ".concat(d," from ").concat(a)),setTimeout(()=>{p.value=null},3e3)},q=()=>{S.push("/")};return T(()=>{N()}),(d,o)=>(r(),I(l(Q),null,{default:t(()=>[i(l(W),{class:"ion-padding download-page"},{default:t(()=>[e("div",Z,[e("div",ee,[e("div",oe,[i(l(H),{src:l(X)("mw.png"),class:"logo-img"},null,8,["src"])]),i(l(U),{class:"page-title"},{default:t(()=>[...o[0]||(o[0]=[c("Download MaHIS",-1)])]),_:1}),o[1]||(o[1]=e("p",{class:"page-subtitle"},"Malawi Health Information System - Access healthcare data anywhere, anytime",-1)),f.value?(r(),v("p",se,"Latest Version: "+w(f.value),1)):B("",!0),_.value?(r(),v("p",le,"Checking for latest version...")):B("",!0)]),e("div",ae,[(r(!0),v(G,null,V(m.value,s=>(r(),I(l(A),{key:s.id,class:"download-card"},{default:t(()=>[i(l(C),null,{default:t(()=>[e("div",ne,[e("div",{class:"icon-wrapper",style:z({backgroundColor:s.color+"15"})},[i(l(M),{icon:s.icon,style:z({color:s.color}),class:"platform-icon"},null,8,["icon","style"])],4),e("div",ie,[e("h3",te,w(s.name),1),e("p",de,w(s.description),1)])]),e("div",re,[e("p",ce,[o[2]||(o[2]=e("span",{class:"detail-label"},"File:",-1)),c(" "+w(s.file),1)]),s.size?(r(),v("p",ue,[o[3]||(o[3]=e("span",{class:"detail-label"},"Size:",-1)),c(" "+w(s.size),1)])):B("",!0)]),i(l(b),{expand:"block",disabled:p.value===s.id||_.value,onClick:a=>O(s.file,s.id),class:$(["download-button",{downloaded:p.value===s.id}])},{default:t(()=>[p.value===s.id?(r(),I(l(M),{key:0,icon:l(K),slot:"start"},null,8,["icon"])):(r(),I(l(M),{key:1,icon:l(P),slot:"start"},null,8,["icon"])),p.value===s.id?(r(),v("span",pe,"Downloaded!")):(r(),v("span",fe,"Download for "+w(s.name),1))]),_:2},1032,["disabled","onClick","class"])]),_:2},1024)]),_:2},1024))),128))]),i(l(A),{class:"requirements-card"},{default:t(()=>[i(l(C),null,{default:t(()=>[...o[4]||(o[4]=[e("h2",{class:"section-title"},"System Requirements",-1),e("div",{class:"requirements-grid"},[e("div",{class:"requirement-section"},[e("h3",{class:"requirement-title"},"Desktop Applications"),e("ul",{class:"requirement-list"},[e("li",null,[e("span",{class:"bullet"},"•"),e("span",null,"Minimum 4GB RAM (8GB recommended)")]),e("li",null,[e("span",{class:"bullet"},"•"),e("span",null,"500MB free disk space")]),e("li",null,[e("span",{class:"bullet"},"•"),e("span",null,"Internet connection for sync")])])]),e("div",{class:"requirement-section"},[e("h3",{class:"requirement-title"},"Mobile Application"),e("ul",{class:"requirement-list"},[e("li",null,[e("span",{class:"bullet"},"•"),e("span",null,"Android 8.0 or higher")]),e("li",null,[e("span",{class:"bullet"},"•"),e("span",null,"Minimum 2GB RAM")]),e("li",null,[e("span",{class:"bullet"},"•"),e("span",null,"200MB free storage space")])])])],-1)])]),_:1})]),_:1}),i(l(A),{class:"help-card"},{default:t(()=>[i(l(C),null,{default:t(()=>[o[9]||(o[9]=e("h2",{class:"section-title"},"Need Help Installing?",-1)),o[10]||(o[10]=e("p",{class:"help-text"},"Follow our step-by-step installation guides for your platform:",-1)),e("div",me,[i(l(b),{fill:"outline",class:"guide-button"},{default:t(()=>[...o[5]||(o[5]=[c("Windows Guide",-1)])]),_:1}),i(l(b),{fill:"outline",class:"guide-button"},{default:t(()=>[...o[6]||(o[6]=[c("macOS Guide",-1)])]),_:1}),i(l(b),{fill:"outline",class:"guide-button"},{default:t(()=>[...o[7]||(o[7]=[c("Linux Guide",-1)])]),_:1}),i(l(b),{fill:"outline",class:"guide-button"},{default:t(()=>[...o[8]||(o[8]=[c("Android Guide",-1)])]),_:1})])]),_:1})]),_:1}),e("div",ve,[e("a",{href:"#",onClick:j(q,["prevent"])},[i(l(M),{icon:l(J)},null,8,["icon"]),o[11]||(o[11]=c(" Back to Login ",-1))])])])]),_:1})]),_:1}))}}),Me=Y(we,[["__scopeId","data-v-cdf06e4c"]]);export{Me as default};
