import{S as b,H as h,ah as _,L as d,aX as g,b as y,J as f}from"../index-MoYXGJcQ.js";class O extends b{static async enrollNeonate(e,n,l=h.sessionDate()){const t=await this.buildEnrollmentObservations(n,l),c={patient_id:e,date_enrolled:l,location_id:b.getUserLocationId(),encounter_datetime:new Date().toISOString(),observations:t};return this.postJson("/neonatal/enroll",c)}static async buildEnrollmentObservations(e,n){var o,m;const l=[],t=u=>u!=null&&u!=="",c=async(u,w)=>{try{l.push(await w())}catch(p){console.warn('[NeonatalEnrollment] Skipping concept "'.concat(u,'":'),p)}},i=async(u,w)=>{t(w)&&await c(u,()=>f.buildValueCoded(u,w,n))},r=async(u,w)=>{t(w)&&await c(u,()=>f.buildValueText(u,w,n))},a=async(u,w,p)=>{if(!t(w))return;const v=typeof w=="number"?w:parseFloat(String(w));if(isNaN(v))return;const S=p?p(v):v;await c(u,()=>f.buildValueNumber(u,S,null,null,n))},s=async(u,w)=>{t(w)&&await c(u,()=>f.buildValueDate(u,w,n))};if(await i("Multiple birth",e.hasTwin),await r("Place of birth",e.placeOfBirth),await r("Name of birth facility",e.nameOfBirthFacility),await r("Type of birth",e.typeOfBirth),await a("Birth weight",e.birthWeight,u=>u/1e3),await r("Time of birth",e.timeOfBirth),await i("Referred",e.referredFromOtherFacility),await r("Referring facility name",e.referringFacilityName),await r("Referred from",e.referredFrom),await r("Mode of transport",e.modeOfTransport),await r("Admitted from",e.admittedFrom),await i("Cried after birth",e.criedAfterBirth),await a("APGAR score at 1 minute",e.apgarScoreAt1),await a("APGAR score at 5 minutes",e.apgarScoreAt5),await a("APGAR score at 10 minutes",e.apgarScoreAt10),(o=e.resuscitationMethods)!=null&&o.length)for(const u of e.resuscitationMethods)await i("Resuscitation method",u);if(e.motherPatientId&&await r("Mother identifier",e.motherPatientId.toString()),await r("Mother name",e.motherName),await r("Mother national ID",e.motherNationalId),await a("Gestation in weeks",e.gestationWeeks),await i("Steroids given",e.steroidsGiven),await r("Gestation method assessment",e.gestationMethodAssessment),await r("Ultra sound scanning - USS",e.ultraSoundScanning),await r("Onset of labor",e.onsetOfLabor),await i("Rupture of membranes",e.ruptureOfMembranes),await r("Duration of rupture of membranes",e.durationOfRuptureMembranes),await i("Offensive liquor",e.offensiveLiquor),await r("Mode of delivery",e.modeOfDelivery),await i("Meconium present",e.meconiumPresent),await i("Maternal analgesia",e.maternalAnalgesia),await r("Analgesia drug",e.analgesiasDrug),await i("Anesthesia used",e.anesthesiaUsed),await i("TEO",e.teo),await i("Chlorohexidine cord care",e.chlorohexidineCordCare),await i("Vitamin K given",e.vitaminKGiven),await i("Dextrose 10% given",e.dextroseGiven),await i("Mother status",e.motherStatus),await i("Mother HIV status",e.motherHivStatus),await s("Last HIV test date",e.lastHivTestDate),await i("Do HIV re-test",e.doHivRetest),await i("Baby given NVP",e.babyGivenNvp),await i("Mother VDRL/Syphilis result",e.motherVdrlResult),await i("Mother treated for VDRL/Syphilis",e.motherTreatedForVdrl),await i("Baby tested for Hepatitis",e.babyTestedForHepatitis),await i("All three doses completed",e.allThreeDosesCompleted),await i("Mother Hepatitis result",e.motherHepatitisResult),(m=e.tetanusDiphtheria)!=null&&m.length)for(const u of e.tetanusDiphtheria)await r("Tetanus Diphtheria",u);return l}static async checkEnrollment(e){try{const n=await _.getPatientPrograms(e),l=Array.isArray(n)?n.find(t=>{var r,a,s,o,m;const c=(a=(r=t==null?void 0:t.program)==null?void 0:r.program_id)!=null?a:t==null?void 0:t.program_id,i=((m=(o=(s=t==null?void 0:t.program)==null?void 0:s.name)!=null?o:t==null?void 0:t.name)!=null?m:"").trim().toUpperCase();return c===d.NEONATAL_PROGRAM||i==="NEONATAL PROGRAM"}):null;return l?{enrolled:!0,enrollment_data:l}:{enrolled:!1}}catch(n){return console.error("Failed to check neonatal enrollment via program service",n),{enrolled:!1}}}static async getPatientSummary(e,n=h.sessionDate()){return this.getJson("/neonatal/patient/".concat(e),{date:n})}static async getNextEncounter(e,n=h.sessionDate()){try{return await this.getJson("/neonatal/next_encounter/".concat(e),{date:n})}catch(l){if(l.status===204)return null;throw l}}static async getRemainingEncounters(e,n=h.sessionDate()){return this.getJson("/neonatal/remaining_encounters/".concat(e),{date:n})}static async isWorkflowComplete(e,n=h.sessionDate()){return this.getJson("/neonatal/workflow_complete/".concat(e),{date:n})}static async getSavedEncounters(e,n=h.sessionDate()){return this.getJson("/neonatal/saved_encounters/".concat(e),{date:n})}static async getPatientLabels(e,n=h.sessionDate()){return this.getJson("/neonatal/labels/".concat(e),{date:n})}static async getEnrolledPatients(e={}){return this.getJson("/neonatal/enrolled_patients",e)}static async searchPatients(e){return this.getJson("/neonatal/search",e)}static async getVisits(e=h.sessionDate()){return this.getJson("/neonatal/visits",{date:e})}static async getAppointments(e=h.sessionDate()){return this.getJson("/neonatal/appointments",{date:e})}static async getStatistics(e=h.sessionDate()){return this.getJson("/neonatal/statistics",{date:e})}static async getVisitSummary(e=h.sessionDate()){return this.getJson("/neonatal/visit_summary",{date:e})}static async updateEnrollment(e,n){return this.putJson("/neonatal/enrollment/".concat(e),n)}static async exitProgram(e,n){return this.postJson("/neonatal/exit",{patient_id:e,...n})}static async saveSystemicExaminationAssessment(e,n,l=h.sessionDate()){try{const t=await this.buildSystemicExaminationObservations(n,l);if(t.length===0)return console.warn("[NeonatalService] No observations to save for systemic examination"),null;const c=b.getUserID()||-1,i=new g(e,y.NEONATAL_SYSTEMIC_EXAMINATION,c);i.setDate(l),await i.createEncounter();const r=await i.saveObservationList(t);return console.log("[NeonatalService] Systemic examination saved successfully",{encounterId:i.getEncounterID(),observationCount:t.length}),r}catch(t){throw console.error("[NeonatalService] Failed to save systemic examination:",t),t}}static async buildSystemicExaminationObservations(e,n){var a,s;const l=[],t=o=>o==null||o===""?!1:Array.isArray(o)?o.length>0:!0,c=async(o,m)=>{try{l.push(await m())}catch(u){console.warn('[SystemicExamination] Skipping concept "'.concat(o,'":'),u)}},i=async(o,m)=>{if(t(m)){const u=typeof m=="boolean"?m?"Yes":"No":m;await c(o,()=>f.buildValueCoded(o,u,n))}},r=async(o,m)=>{t(m)&&await c(o,()=>f.buildValueText(o,m,n))};if(await i("Respiratory distress",e.respiratoryDistress),await i("Gasping",e.gasping),await i("Fast breathing",e.fastBreathing),await i("Nasal flaring",e.nasalFlaring),await i("Chest indrawing",e.chestIndrawing),await i("Stridor",e.stridor),await i("Grunting",e.grunting),await i("Stethoscope available",e.stethoscopeAvailable),await i("Chest clear",e.chestClear),await i("Unequal air entry",e.unequalAirEntry),await i("Unilateral crackles",e.unilateralCrackles),await i("Unilateral wheeze",e.unilateralWheeze),await i("Bilateral crackles/wheeze",e.bilateralCracklesWheeze),await i("Stridor on auscultation",e.stridorAuscultation),await i("Normal heart sounds",e.normalHeartSounds),await i("Murmur or extra sounds",e.murmurExtraSounds),await i("Not confident auscultating murmurs",e.notConfidentMurmurs),await i("Color pink",e.colorPink),await i("Color blue",e.colorBlue),await i("Color pale",e.colorPale),await i("Color yellow",e.colorYellow),await i("CRT less than 3 seconds",e.crtLessThan3),await i("CRT 3 or more seconds",e.crt3OrMore),await i("Femoral pulse palpable",e.femoralPulsePalpable),await i("Femoral pulse weak",e.femoralPulseWeak),await i("Not confident femoral pulses",e.notConfidentFemoralPulses),await i("Femoral pulse difficult",e.femoralPulseDifficult),await r("Chest summary notes",e.chestSummaryNotes),await i("Abdomen soft normal",e.abdomenSoftNormal),await i("Abdomen distended",e.abdomenDistended),await i("Abdominal wall defect",e.abdomenWallDefect),await i("Prune belly syndrome",e.pruneBellySyndrome),await i("Abdominal mass",e.abdomenMass),await i("Abdomen distended confirmed",e.abdomenDistendedConfirm),await i("Abdomen shiny",e.abdomenShiny),await i("Abdomen color change",e.abdomenColorChange),await i("Abdomen distended veins",e.abdomenDistendedVeins),await i("Abdomen tender",e.abdomenTender),await i("Hepatomegaly",e.hepatomegaly),await i("Splenomegaly",e.splenomegaly),await i("Palpable kidneys",e.palpableKidneys),await i("Other masses",e.otherMasses),await r("Other masses description",e.otherMassesDescription),await i("Umbilicus healthy",e.umbilicusHealthy),await i("Umbilicus bleeding",e.umbilicusBleeding),await i("Umbilicus red skin",e.umbilicusRedSkin),await i("Umbilicus meconium",e.umbilicusMeconium),await i("Umbilical hernia",e.umbilicalHernia),await i("Umbilicus abnormal",e.umbilicusAbnormal),await i("Genitalia male normal",e.genitaliaMaleNormal),await i("Genitalia female normal",e.genitaliaFemaleNormal),await i("Genitalia male abnormal",e.genitaliaMaleAbnormal),await i("Genitalia female abnormal",e.genitaliaFemaleAbnormal),await i("Genitalia ambiguous",e.genitaliaAmbiguous),await i("Anus patent",e.anusPatent),await i("Anus imperforate",e.anusImperforate),await i("Anus abnormal",e.anusAbnormal),await r("Abdomen summary notes",e.abdomenSummaryNotes),await i("Tone assessment",e.toneAssessment),await i("Suck reflex",e.suckReflex),await i("Grasp reflex",e.graspReflex),await i("Moro reflex",e.MoreReflex),await r("Neurological summary notes",e.neurologicalSummaryNotes),(a=e.musculoskeletalDeformities)!=null&&a.length)for(const o of e.musculoskeletalDeformities)await i("Musculoskeletal deformities",o);if((s=e.skinFindings)!=null&&s.length)for(const o of e.skinFindings)await i("Skin findings",o);return await i("Birth asphyxia suspected",e.birthAsphyxiaSuspected),await i("Thompson respiration score",e.thompsonRespirationScore),await i("Thompson suck score",e.thompsonSuckScore),await i("Thompson moro score",e.thompsonMoroScore),await i("Thompson grasp score",e.thompsonGraspScore),await i("Thompson fontanelle score",e.thompsonFontanelleScore),await i("Thompson tone score",e.thompsonToneScore),await i("Thompson consciousness score",e.thompsonConsciousnessScore),await i("Thompson fits score",e.thompsonFitsScore),await i("Thompson posture score",e.thompsonPostureScore),l}static async saveSignsSymptomsAssessment(e,n,l=h.sessionDate()){try{const t=await this.buildSignsSymptomsObservations(n,l);if(t.length===0)return console.warn("[NeonatalService] No observations to save for signs/symptoms"),null;const c=b.getUserID()||-1,i=new g(e,y.NEONATAL_SIGNS_SYMPTOMS,c);i.setDate(l),await i.createEncounter();const r=await i.saveObservationList(t);return console.log("[NeonatalService] Signs/symptoms assessment saved successfully",{encounterId:i.getEncounterID(),observationCount:t.length}),r}catch(t){throw console.error("[NeonatalService] Failed to save signs/symptoms assessment:",t),t}}static async buildSignsSymptomsObservations(e,n){const l=[],t=a=>a!=null&&a!=="",c=async(a,s)=>{try{l.push(await s())}catch(o){console.warn('[SignsSymptoms] Skipping concept "'.concat(a,'":'),o)}},i=async(a,s)=>{t(s)&&await c(a,()=>f.buildValueCoded(a,s,n))},r=async(a,s)=>{t(s)&&await c(a,()=>f.buildValueText(a,s,n))};if(await i("Re-admission",e.is_readmission),e.presenting_complaints&&Array.isArray(e.presenting_complaints)&&e.presenting_complaints.length>0)for(const a of e.presenting_complaints){const s=typeof a=="object"&&a!==null&&"value"in a?a.value:a;await i("Presenting complaint",s)}return await r("Signs/Symptoms notes",e.detailed_assessment_notes),await r("Symptom onset time",e.symptom_onset_time),await i("Symptom severity",e.symptom_severity),l}static async saveReviewOfSystemsAssessment(e,n,l=h.sessionDate()){try{const t=await this.buildReviewOfSystemsObservations(n,l);if(t.length===0)return console.warn("[NeonatalService] No observations to save for review of systems"),null;const c=b.getUserID()||-1,i=new g(e,y.NEONATAL_REVIEW_OF_SYSTEMS,c);i.setDate(l),await i.createEncounter();const r=await i.saveObservationList(t);return console.log("[NeonatalService] Review of systems saved successfully",{encounterId:i.getEncounterID(),observationCount:t.length}),r}catch(t){throw console.error("[NeonatalService] Failed to save review of systems:",t),t}}static async buildReviewOfSystemsObservations(e,n){const l=[],t=s=>s!=null&&s!=="",c=async(s,o)=>{try{l.push(await o())}catch(m){console.warn('[ReviewOfSystems] Skipping concept "'.concat(s,'":'),m)}},i=async(s,o)=>{t(o)&&await c(s,()=>f.buildValueCoded(s,o,n))},r=async(s,o)=>{t(o)&&await c(s,()=>f.buildValueText(s,o,n))},a=async(s,o)=>{if(!t(o))return;const m=typeof o=="number"?o:parseFloat(String(o));Number.isNaN(m)||await c(s,()=>f.buildValueNumber(s,m,null,null,n))};return await i("Type of feed",e.type_of_feed),await i("Mode of feeding",e.mode_of_feeding),await i("Frequency of feeding",e.frequency_of_feeding),await r("Duration of feeding",e.duration_of_feeding),await i("Effort during feeding",e.effort_during_feeding),await i("Is baby vomiting",e.is_baby_vomiting),await r("Frequency of vomiting",e.frequency_of_vomiting),await i("Passage of meconium",e.passage_of_meconium),await r("Frequency of stooling",e.frequency_of_stooling),await i("Color of stools",e.color_of_stools),await i("Consistency of stools",e.consistency_of_stools),await i("Blood in stools",e.blood_in_stools),await i("Mucus in stools",e.mucus_in_stools),await i("Is the baby passing urine?",e.is_baby_passing_urine),await a("Number of wet nappies per day",e.number_of_wet_nappies),await i("Color of urine",e.color_of_urine),await a("Volume (ml)",e.volume_ml),await i("Weight trend since birth",e.weight_trend_since_birth),await i("Does the baby have Oral thrush?",e.does_baby_have_oral_thrush),await i("Does the baby have Oral sores?",e.does_baby_have_oral_sores),await i("Does the baby have Tongue tie (Ankyloglossia)?",e.does_baby_have_tongue_tie),await i("Activity level",e.activity),await i("Has passed urine",e.hydration_urination),await i("Has passed meconium",e.stool_passed_meconium),await i("Has passed transitional stools",e.stool_passed_transitional),await i("Vomiting",e.vomiting),await i("Bile stained vomit",e.vomiting_bile_stained),await i("Difficulty breathing",e.difficulty_breathing),await i("Bleeding",e.bleeding),await i("Jaundice",e.jaundice),await i("Convulsions",e.convulsions),await i("Baby grunting",e.baby_grunting),await i("Vomiting after every feed",e.frequency_of_vomiting),await i("Color of vomit",e.color_of_vomit),await i("Gasping",e.gasping),await i("Nasal flaring",e.nasal_flaring),await i("Cyanosis",e.cyanosis),await i("Size of uterus",e.size_of_uterus),await i("Oxygen level category",e.oxygen_level_2),await r("Oxygen level value",e.oxygen_level_value),await i("Birthmark abnormalities",e.birthmark_abnormalities),await i("Pustules",e.pustules),await i("Peeling",e.peeling),await i("Umbilical discharge",e.umbilical_discharge),await i("Swelling",e.swelling),await i("Abdominal distension",e.abdominal_distension),await i("Abdominal pain",e.abdominal_pain),await i("Umbilical condition",e.umbilical_condition),await i("Abdominal mass",e.mass),await i("Abdominal tenderness",e.tenderness),await i("Organomegaly",e.organomegaly),await i("Skin rash",e.skin_rash),await i("Talipes",e.talipes),await i("Extra digits",e.extra_digits),await i("Spinal bifida",e.spinal_bifida),await i("Reduced movement",e.reduced_movement),await i("Fracture",e.fracture),await i("Deformity",e.deformity),await i("Club foot",e.club_foot),await i("Other abnormalities",e.other_abnormalities),l}static async saveAdmissionOutcomes(e,n,l=h.sessionDate()){try{const t=await this.buildAdmissionOutcomesObservations(n,l);if(t.length===0)return console.warn("[NeonatalService] No observations to save for admission outcomes"),null;const c=b.getUserID()||-1,i=new g(e,y.NEONATAL_ADMISSION_OUTCOMES,c);i.setDate(l),await i.createEncounter();const r=await i.saveObservationList(t);return console.log("[NeonatalService] Admission outcomes saved successfully",{encounterId:i.getEncounterID(),observationCount:t.length}),r}catch(t){throw console.error("[NeonatalService] Failed to save admission outcomes:",t),t}}static async buildAdmissionOutcomesObservations(e,n){const l=[],t=a=>a!=null&&a!=="",c=async(a,s)=>{try{l.push(await s())}catch(o){console.warn('[AdmissionOutcomes] Skipping concept "'.concat(a,'":'),o)}},i=async(a,s)=>{t(s)&&await c(a,()=>f.buildValueCoded(a,s,n))},r=async(a,s)=>{t(s)&&await c(a,()=>f.buildValueText(a,s,n))};return await i("Admission outcome",e.admissionOutcome),await r("Safeguard concerns",e.safeguardConcerns),l}static async dischargeNeonate(e,n,l=h.sessionDate()){try{const t=await this.buildDischargeObservations(n,l),c=b.getUserID()||-1,i=new g(e,y.DISCHARGE_PATIENT,c);return i.setDate(l),await i.createEncounter(),t.length>0&&await i.saveObservationList(t),n.outcome&&await this.exitProgram(e,{date_completed:l,outcome:n.outcome}),console.log("[NeonatalService] Discharge completed successfully",{encounterId:i.getEncounterID(),observationCount:t.length,outcome:n.outcome}),{success:!0,encounterId:i.getEncounterID()}}catch(t){throw console.error("[NeonatalService] Failed to discharge neonate:",t),t}}static async buildDischargeObservations(e,n){const l=[],t=s=>s!=null&&s!=="",c=async(s,o)=>{try{l.push(await o())}catch(m){console.warn('[Discharge] Skipping concept "'.concat(s,'":'),m)}},i=async(s,o)=>{t(o)&&await c(s,()=>f.buildValueCoded(s,o,n))},r=async(s,o)=>{t(o)&&await c(s,()=>f.buildValueText(s,o,n))},a=async(s,o,m)=>{if(!t(o))return;const u=typeof o=="number"?o:parseFloat(String(o));if(isNaN(u))return;const w=m?m(u):u;await c(s,()=>f.buildValueNumber(s,w,null,null,n))};if(await a("Weight",e.weight,s=>s>10?s/1e3:s),await a("Pulse",e.heartRate),await a("Respiratory rate",e.respiratoryRate),await a("Blood oxygen saturation",e.oxygenSaturation),await a("Temperature",e.temperature),e.mainDiagnosis&&await i("Primary diagnosis",e.mainDiagnosis.value),e.otherProblems&&e.otherProblems.length>0)for(const s of e.otherProblems)await i("Secondary diagnosis",s.value);if(e.medications&&e.medications.length>0){let s="";for(const o of e.medications)s+="".concat(o.name," (").concat(o.dosage||"-"," ").concat(o.frequency||"-","); ");await r("Medication orders",s)}return e.clinicFollowUp&&await r("Next facility to visit",e.clinicFollowUp),await r("Health education",e.healthEducationGiven),await i("Insecticide treated net given",e.insecticideTreatedNetGiven),await i("Patient admission outcome",e.outcome),l}}export{O as N};
