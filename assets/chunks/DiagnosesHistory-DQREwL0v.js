import{d as h,b2 as w,cp as S,r as a,w as l,a as O,b7 as u,cW as B,e as c,f as d,l as T,J as k,k as p,F as E,P as H,K as x,u as C}from"./vendor-CzFJ4KTZ.js";import{u as N,ag as F,af as V,H as I,_ as M}from"../index-MS1JWVwx.js";import"./lodash-NJiRuGo9.js";import"./apexcharts-C9muk_WD.js";const R={class:"table-responsive"},A=h({__name:"DiagnosesHistory",setup(J){const m=N(),{patient:b}=w(m),f=S(),_=a(null),t=a([]),g=a(["Diagnosis","Date"]),v=a({responsive:!0,select:!1,layout:{topStart:"",topEnd:"search",bottomStart:"info",bottomEnd:"paging"},ordering:!1}),s=async()=>{try{t.value=[];const D=(await F.getObsByEncounterId(41)).flatMap(e=>e.obs||[]).filter(e=>e.value_coded).sort((e,r)=>{const i=new Date(e.obs_datetime).getTime();return new Date(r.obs_datetime).getTime()-i});for(const e of D){const r=await V.getConceptName(e.value_coded),i=I.toStandardHisFormat(e.obs_datetime);t.value.push([r,i])}}catch(o){console.error("Error updating diagnosis data:",o),t.value=[]}};return l(()=>f,async()=>{await s()},{deep:!0,immediate:!0}),l(b,async()=>{await s()},{deep:!0,immediate:!0}),O(async()=>{await s(),u.use(B)}),(o,y)=>(d(),c("div",R,[T(C(u),{ref_key:"dataTable",ref:_,options:v.value,data:t.value,class:"display nowrap modern-table",width:"100%"},{default:k(()=>[p("thead",null,[p("tr",null,[(d(!0),c(E,null,H(g.value,n=>(d(),c("th",{key:n},x(n),1))),128))])])]),_:1},8,["options","data"])]))}}),q=M(A,[["__scopeId","data-v-0e90b5ee"]]);export{q as default};
