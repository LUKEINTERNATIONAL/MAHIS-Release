import{d as S,ax as p,ac as R,ay as w,az as E,aA as O,ak as B,al as g,K as V,L as M,G as i,Q as y,f as o,P as nt,N as dt,av as pt,dt as mt,ad as ut,e1 as yt,a5 as it,M as ht,e as C,m as _,l as n,k as u,H as s,a3 as ft,F as _t,bC as bt,aC as Ct,aB as Dt,b4 as Tt,cB as It,b5 as St,b7 as gt,bH as Ht,bq as Nt,cs as vt,eu as Pt,d9 as $t,ev as kt,b6 as wt,bU as Et,p as F}from"./vendor-CJ2tyHrn.js";import{aT as k,bL as Bt,a1 as Z,i as m,o as I,n as H,_ as N,F as ot,a3 as Vt,T as Mt,K as D,b as T,J as Ft,a2 as Rt,t as q,y as Ot,aa as At,Y as zt,P as Lt,bf as Gt,S as x,bM as tt,e as Ut,bc as Yt,bb as Wt,b1 as jt,u as Jt,f as Kt}from"../index-CPIhguZJ.js";import{D as qt}from"./DemographicBar-CMCjh8ca.js";import{S as Qt}from"./SaveProgressModal-Bs8SOcXY.js";import{S as Xt}from"./Stepper-DvXDczDz.js";import{F as Zt,S as xt,P as te}from"./NCDNumber-CU47u8Wp.js";import{D as A}from"./OutcomeModal-BlRCbEvu.js";import{B as z}from"./BasicForm-BEa7BD3q.js";import{B as L,u as et}from"./BasicCard-Inj7xA0F.js";import{_ as ee}from"./RiskAssessment.vue_vue_type_script_setup_true_lang-DgZoeOfH.js";import{b as j,c as Q}from"./formatServerData-C4-2caW3.js";import"./lodash-NJiRuGo9.js";import"./apexcharts-BtvCa6MI.js";import"./NextAppointment-B2xGYVAH.js";import"./LabOrdersList-DT-nxfOM.js";import"./EnterLabResultsModal-BmOe-JXc.js";import"./useUserActivities-DlNwy1Si.js";import"./DateInputField-BPowwEHU.js";import"./group_validation-Crr58cZF.js";import"./RadiologyStore-BdyLHyrH.js";import"./DashBox-6RT18Q5Q.js";import"./previousComplaints-yArM2eha.js";import"./patient_complaints_service-4HB_6iqv.js";import"./useFormWizard-CAiBa2il.js";import"./user_role_management-C_d1iPJp.js";import"./nonPharmaTherapyStore-CAVSqzBF.js";import"./drug_prescription_service-DiJpwuPJ.js";import"./patient_diagnosis_service-DTN-hwjk.js";import"./ncd_appointment_service-BMjAPhMQ.js";import"./OPDOutcome-BN3V9Alf.js";import"./LevelOfConsciousness.vue_vue_type_script_setup_true_lang-Xe7gnJc0.js";import"./Outcome-BVD9d5EL.js";import"./wardsStore-DRE4cKPY.js";import"./VitalsMixin.vue_vue_type_script_lang-G5DkK3jL.js";import"./TreatmentPlan-DPtio9gL.js";import"./ComplicationsStore-Ibxa1dsq.js";import"./OPDDiagnosis-2W0dlvYN.js";import"./MedicalHistory-S5r77Dmx.js";import"./ReasonForVisit.vue_vue_type_script_setup_true_lang-BFe7qA5m.js";import"./UpcomingFeature-BWezfBQA.js";import"./AbdominalExamination.vue_vue_type_script_setup_true_lang-ZON2YM_x.js";import"./TB-DcRFpJ7S.js";import"./ClinicalCounselling-MzzpyYGJ.js";import"./Ipv-CbA-fuYX.js";import"./PastObstreticHistoryStore-DMO3jEGO.js";const ne=S({name:"Menu",components:{IonContent:M,IonHeader:V,IonItem:g,IonList:B,IonMenu:O,IonTitle:E,IonToolbar:w,IonCheckbox:R,BasicForm:z,BasicCard:L},data(){return{iconsContent:H,test:"",cardData:{}}},computed:{...p(m,["patientHistoryHIV"])},watch:{patientHistoryHIV:{handler(){this.controllFields(),this.buildCards()},deep:!0}},mounted(){this.updateEnrollmentStores(),this.buildCards()},methods:{buildCards(){const t=m();this.cardData={mainTitle:"Enrollment",cards:[{cardTitle:"HIV history  ",content:this.patientHistoryHIV,initialData:t.getInitialPatientHistoryHIV()}]}},openModal(){I(A)},updateEnrollmentStores(){m().setPatientHistoryHIV(this.patientHistoryHIV)},controllFields(){Bt(this.patientHistoryHIV,"HIV")=="R"?Z(this.patientHistoryHIV,"ART_start_date","displayNone",!1):Z(this.patientHistoryHIV,"ART_start_date","displayNone",!0)},async handleInputData(t){console.log(t.al),t.al&&(t.value.detail.checked?k(this.patientHistoryHIV,t.al.name,"displayNone",!1):k(this.patientHistoryHIV,t.al.name,"displayNone",!0))}}});function ie(t,e,d,l,c,h){const a=i("basic-card");return o(),y(a,{content:t.cardData,"onUpdate:inputValue":t.handleInputData},null,8,["content","onUpdate:inputValue"])}const oe=N(ne,[["render",ie],["__scopeId","data-v-965a0906"]]),ae=S({name:"Menu",components:{IonContent:M,IonHeader:V,IonItem:g,IonList:B,IonMenu:O,IonTitle:E,IonToolbar:w,IonCheckbox:R,BasicForm:z,BasicCard:L},data(){return{iconsContent:H,test:"",cardData:{}}},computed:{...p(m,["familyHistory"])},watch:{familyHistory:{handler(){this.buildCards()},deep:!0}},async mounted(){this.buildCards()},methods:{buildCards(){this.cardData={mainTitle:"Enrollment",cards:[{cardTitle:"Family history",content:this.familyHistory}]}},openModal(){I(A)},updateEnrollmentStores(){m().setFamilyHistory(this.familyHistory)},testF(t){console.log(t)}}});function se(t,e,d,l,c,h){const a=i("basic-card");return o(),y(a,{content:t.cardData},null,8,["content"])}const re=N(ae,[["render",se],["__scopeId","data-v-4c6d7db7"]]),le=S({name:"Menu",components:{IonContent:M,IonHeader:V,IonItem:g,IonList:B,IonMenu:O,IonTitle:E,IonToolbar:w,IonCheckbox:R,BasicForm:z,BasicCard:L},data(){return{iconsContent:H,test:"",cardData:{}}},computed:{...p(m,["traditionalMedicine"])},watch:{traditionalMedicine:{handler(){this.buildCards()},deep:!0}},mounted(){this.updateEnrollmentStores(),this.buildCards()},methods:{buildCards(){const t=m();this.cardData={mainTitle:"Enrollment",cards:[{cardTitle:"Traditional Medicine",content:this.traditionalMedicine,initialData:t.getInitialTraditionalMedicine()}]}},openModal(){I(A)},updateEnrollmentStores(){m().setTraditionalMedicine(this.traditionalMedicine)},async handleInputData(t){console.log(t.al),t.al&&(t.value.detail.checked?k(this.traditionalMedicine,t.al.name,"displayNone",!1):k(this.traditionalMedicine,t.al.name,"displayNone",!0))}}});function ce(t,e,d,l,c,h){const a=i("basic-card");return o(),y(a,{content:t.cardData,"onUpdate:inputValue":t.handleInputData},null,8,["content","onUpdate:inputValue"])}const de=N(le,[["render",ce],["__scopeId","data-v-efb5c045"]]),pe=S({name:"Menu",components:{IonContent:M,IonHeader:V,IonItem:g,IonList:B,IonMenu:O,IonTitle:E,IonToolbar:w,IonCheckbox:R,BasicForm:z,BasicCard:L},data(){return{iconsContent:H,test:"",cardData:{}}},computed:{...p(m,["patientTB"])},watch:{patientTB:{handler(){this.buildCards()},deep:!0}},mounted(){this.updateEnrollmentStores(),this.buildCards()},methods:{buildCards(){const t=m();this.cardData={mainTitle:"Enrollment",cards:[{cardTitle:"TB History",content:this.patientTB,initialData:t.getInitialPatientTB()}]}},openModal(){I(A)},updateEnrollmentStores(){m().setPatientTB(this.patientTB)},async handleInputData(t){console.log(t.al),t.al&&(t.value.detail.checked?k(this.patientTB,t.al.name,"displayNone",!1):k(this.patientTB,t.al.name,"displayNone",!0))}}});function me(t,e,d,l,c,h){const a=i("basic-card");return o(),y(a,{content:t.cardData,"onUpdate:inputValue":t.handleInputData},null,8,["content","onUpdate:inputValue"])}const ue=N(pe,[["render",me],["__scopeId","data-v-b58010a4"]]),ye=S({name:"Menu",components:{IonContent:M,IonHeader:V,IonItem:g,IonList:B,IonMenu:O,IonTitle:E,IonToolbar:w,IonCheckbox:R,BasicForm:z,BasicCard:L},data(){return{iconsContent:H,test:"",cardData:{}}},computed:{...p(m,["patientType"])},watch:{patientType:{handler(){this.buildCards()},deep:!0}},async mounted(){this.buildCards()},methods:{buildCards(){this.cardData={mainTitle:"Enrollment",cards:[{cardTitle:"",content:this.patientType}]}},openModal(){I(A)},testF(t){console.log(t)}}});function he(t,e,d,l,c,h){const a=i("basic-card");return o(),y(a,{content:t.cardData},null,8,["content"])}const fe=N(ye,[["render",he],["__scopeId","data-v-b8beb3da"]]),_e=S({components:{IonLabel:it,IonAvatar:yt,IonRow:ut,IonImg:mt,IonCol:pt,IonList:B,IonItem:g,IonIcon:dt,IonButton:nt,DynamicButton:ot},data:()=>({selectedResult:{},iconsContent:H,isAnyAccordionOpen:!0,isLoading:!1}),methods:{dismiss(t){ht.dismiss(t)}}}),be={key:0,class:"spinner-overlay"};function Ce(t,e,d,l,c,h){const a=i("ion-spinner"),r=i("ion-title"),f=i("ion-icon"),v=i("ion-header"),P=i("center"),G=i("ion-content"),$=i("DynamicButton"),U=i("ion-col"),J=i("ion-row"),Y=i("ion-footer");return o(),C(_t,null,[t.isLoading?(o(),C("div",be,[n(a,{name:"bubbles"}),e[3]||(e[3]=u("div",{class:"loading-text"},"Please wait...",-1))])):_("",!0),n(v,{style:{display:"flex","justify-content":"space-between"}},{default:s(()=>[n(r,{class:"modalTitle"},{default:s(()=>[...e[4]||(e[4]=[ft("Enrollment",-1)])]),_:1}),n(f,{onClick:e[0]||(e[0]=W=>t.dismiss("dismiss")),style:{"padding-top":"10px","padding-right":"10px"},icon:t.iconsContent.cancel},null,8,["icon"])]),_:1}),n(G,{fullscreen:!0,class:"ion-padding",style:{"--background":"#fff"}},{default:s(()=>[n(P,null,{default:s(()=>[...e[5]||(e[5]=[u("h3",{class:"ion-padding"},"Do you want to enroll this patient in NCD Program?",-1)])]),_:1})]),_:1}),n(Y,null,{default:s(()=>[n(J,null,{default:s(()=>[n(U,null,{default:s(()=>[n($,{color:"danger",onClick:e[1]||(e[1]=W=>t.dismiss("dismiss")),name:"No",fill:"solid",style:{float:"right","margin-right":"2%",width:"100px"}}),n($,{onClick:e[2]||(e[2]=W=>t.dismiss("Yes")),name:"Yes",fill:"solid",style:{float:"right","margin-right":"2%",width:"100px"}})]),_:1})]),_:1})]),_:1})],64)}const De=N(_e,[["render",Ce]]),Te=S({name:"Home",components:{IonContent:M,IonHeader:V,IonMenuButton:vt,IonPage:Nt,IonTitle:E,IonToolbar:w,Toolbar:Mt,ToolbarSearch:Vt,DemographicBar:qt,IonButton:nt,IonCard:Ht,IonCardContent:gt,IonCardHeader:St,IonCardSubtitle:It,IonCardTitle:Tt,IonAccordion:Dt,IonAccordionGroup:Ct,IonItem:g,IonLabel:it,IonModal:bt,Stepper:Xt,PatientHistory:te,PatientHistoryHIV:oe,EnrollmentDiagnosis:xt,Substance:ee,NCDNumber:Zt,FamilyHistory:re,PatientHistoryTraditionalMedicine:de,PatientHistoryTB:ue,PatientType:fe,DynamicButton:ot},data(){return{iconsContent:H,demographic:!0,currentStep:"NCD Number, Patient Type & Family History",scanner:!1,steps:"",isOpen:!1,iconListStatus:"active_icon",iconGridStatus:"inactive_icon"}},watch:{$route:{async handler(t){await tt(),t.name=="NCDEnrollment"&&await this.checkEnrollment()},deep:!0}},computed:{...p(Kt,["apiStatus"]),...p(Jt,["patient"]),...p(jt,["vitals"]),...p(Wt,["investigations"]),...p(Yt,["diagnosis"]),...p(et,["enrollmentDisplayType"]),...p(Ut,["NCDActivities"]),...p(m,["NCDNumber","enrollmentDiagnosis","substance","patientHistoryHIV","patientHistory","patientType","familyHistory","traditionalMedicine","patientTB"])},async mounted(){await tt(),await this.checkEnrollment(),this.setDisplayType(this.enrollmentDisplayType)},setup(){return{chevronBackOutline:Et,checkmark:wt,arrowForwardCircle:kt,grid:$t,list:Pt}},methods:{async checkEnrollment(){await I(De,{class:"small-confirm-modal "})!="Yes"&&this.nav("/consultationPlan")},setCurrentStep(t){this.currentStep=t},nextStep(){const t=this.steps.indexOf(this.currentStep);t<this.steps.length-1&&(this.currentStep=this.steps[t+1])},previousStep(){const t=this.steps.indexOf(this.currentStep);t>0&&(this.currentStep=this.steps[t-1])},async saveData(){await this.saveNcdNumber()},async saveNcdNumber(){const t=JSON.parse(localStorage.getItem("userRoles")),e=t||[],d=Rt(this.NCDNumber,"NCDNumber","value");if(this.apiStatus){if(!d){q("NCD number is blank",5e3);return}if(d&&Ot.isNumber(d)==null){localStorage.getItem("locationID");const c=await At.get("site_prefix")+"-NCD-"+d;if(await zt.ncdNumberExists(c))q("NCD number already exists",5e3);else{const a=new Lt;this.patient.NcdID=c,a.createNcdNumber(c),await this.saveEnrollment(),await Gt();let r="";e.some(f=>f.role==="General Registration Clerk"||e.some(v=>v.role==="Vitals Clerk"||e.some(P=>P.role==="Registration Clerk")))&&x.getProgramID()==32||this.NCDActivities.length==0?r="home":r="consultationPlan",this.$router.push(r)}}else q("Invalid NCD number",5e3)}else{this.patient.NcdID="-",await this.saveEnrollment();let l="";e.some(c=>c.role==="General Registration Clerk"||e.some(h=>h.role==="Vitals Clerk"||e.some(a=>a.role==="Registration Clerk")))&&x.getProgramID()==32||this.NCDActivities.length==0?l="home":l="consultationPlan",this.$router.push(l)}},openModal(){I(Qt)},nav(t){this.$router.push(t)},setDisplayType(t){t=="grid"?this.currentStep="Enrollment":(this.currentStep="NCD Number, Patient Type & Family History",this.steps=["NCD Number, Patient Type & Family History","Patient History","HIV & TB History & Diagnosis"]),et().setEnrollmentDisplayType(t),this.setIconClass()},setIconClass(){this.iconListStatus="inactive_icon",this.iconGridStatus="inactive_icon",this.enrollmentDisplayType=="list"?this.iconListStatus="active_icon":this.enrollmentDisplayType=="grid"&&(this.iconGridStatus="active_icon")},async saveEnrollment(){const t=await j(this.enrollmentDiagnosis),e=await Q(this.familyHistory),d=await Q(this.patientType),l=await j(this.patientHistory),c=await Q(this.patientHistoryHIV),h=await j(this.patientTB),a=await j(this.traditionalMedicine);await D.addObsToEncounterPatient(e,T.FAMILY_MEDICAL_HISTORY),await D.addObsToEncounterPatient(d,T.PATIENT_REGISTRATION),await D.addObsToEncounterPatient(l,T.COMPLICATIONS),await D.addObsToEncounterPatient(c,T.HIV_STATUS_AT_ENROLLMENT),await D.addObsToEncounterPatient(h,T.TB_RECEPTION),await D.addObsToEncounterPatient(a,T.MEDICAL_HISTORY);const r=await D.addObsToEncounterPatient(t,T.DIAGNOSIS);await Ft(r)}}}),Ie={class:"container"},Se={class:"icon_div"},ge={key:0},He={key:1},Ne={key:0},ve={key:1},Pe={style:{display:"flex","justify-content":"center"}},$e={key:2},ke={key:0,class:"footer2"},we={class:"footer position_content"};function Ee(t,e,d,l,c,h){const a=i("Toolbar"),r=i("DynamicButton"),f=i("ion-icon"),v=i("NCDNumber"),P=i("PatientType"),G=i("FamilyHistory"),$=i("ion-col"),U=i("PatientHistory"),J=i("PatientHistoryTraditionalMedicine"),Y=i("PatientHistoryHIV"),W=i("PatientHistoryTB"),X=i("EnrollmentDiagnosis"),at=i("ion-row"),st=i("ion-content"),K=i("ion-breadcrumb"),rt=i("ion-breadcrumbs"),lt=i("ion-footer"),ct=i("ion-page");return o(),y(ct,null,{default:s(()=>[n(a),n(st,null,{default:s(()=>[u("div",Ie,[u("div",{style:{display:"flex","align-items":"center"},onClick:e[0]||(e[0]=b=>t.nav("patientProfile"))},[n(r,{fill:"clear",name:"Back to profile",iconSlot:"start",icon:t.iconsContent.arrowLeft},null,8,["icon"])]),e[9]||(e[9]=u("div",{class:"title"},[u("div",{class:"demographics_title"},"Enrollment")],-1)),u("div",Se,[n(f,{class:F(t.iconListStatus),icon:t.list,onClick:e[1]||(e[1]=b=>t.setDisplayType("list"))},null,8,["class","icon"]),n(f,{class:F(t.iconGridStatus),style:{"font-size":"21px","margin-top":"1.5px"},icon:t.grid,onClick:e[2]||(e[2]=b=>t.setDisplayType("grid"))},null,8,["class","icon"])])]),t.enrollmentDisplayType=="grid"?(o(),C("div",ge,[t.enrollmentDisplayType=="grid"?(o(),y(at,{key:0,class:"card_row"},{default:s(()=>[n($,{"size-sm":"12","size-md":"12","size-lg":"6","size-xl":"4"},{default:s(()=>[n(v),n(P),n(G)]),_:1}),n($,{"size-sm":"12","size-md":"12","size-lg":"6","size-xl":"4"},{default:s(()=>[n(U),n(J)]),_:1}),n($,{"size-sm":"12","size-md":"12","size-lg":"6","size-xl":"4"},{default:s(()=>[n(Y),n(W),n(X)]),_:1})]),_:1})):_("",!0)])):_("",!0),t.enrollmentDisplayType=="list"?(o(),C("div",He,[t.currentStep=="NCD Number, Patient Type & Family History"?(o(),C("div",Ne,[n(v),n(P),n(G)])):_("",!0),t.currentStep=="Patient History"?(o(),C("div",ve,[u("div",Pe,[n(U)])])):_("",!0),t.currentStep=="HIV & TB History & Diagnosis"?(o(),C("div",$e,[n(Y),n(X)])):_("",!0)])):_("",!0)]),_:1}),t.enrollmentDisplayType=="grid"?(o(),C("div",ke,[n(r,{name:"Save",iconSlot:"end",icon:t.iconsContent.saveWhite,onClick:e[3]||(e[3]=b=>t.saveData())},null,8,["icon"])])):_("",!0),t.enrollmentDisplayType=="list"?(o(),y(lt,{key:1},{default:s(()=>[u("div",we,[t.currentStep=="NCD Number, Patient Type & Family History"?(o(),y(r,{key:0,name:"Cancel",color:"danger",onClick:e[4]||(e[4]=b=>t.nav("/patientProfile"))})):(o(),y(r,{key:1,name:"Previous",icon:t.iconsContent.arrowLeftWhite,color:"medium",onClick:t.previousStep},null,8,["icon","onClick"])),n(rt,{class:"breadcrumbs displayNoneMobile"},{default:s(()=>[n(K,{onClick:e[5]||(e[5]=b=>t.setCurrentStep("NCD Number, Patient Type & Family History")),class:F({active:t.currentStep==="NCD Number, Patient Type & Family History"})},{default:s(()=>[e[10]||(e[10]=u("span",{class:"breadcrumb-text"},"NCD Number, Patient Type & Family History",-1)),n(f,{slot:"separator",size:"large",icon:t.iconsContent.arrowRight},null,8,["icon"])]),_:1},8,["class"]),n(K,{onClick:e[6]||(e[6]=b=>t.setCurrentStep("Patient History")),class:F({active:t.currentStep==="Patient History"})},{default:s(()=>[e[11]||(e[11]=u("span",{class:"breadcrumb-text"},"Patient History",-1)),n(f,{slot:"separator",size:"large",icon:t.iconsContent.arrowRight},null,8,["icon"])]),_:1},8,["class"]),n(K,{onClick:e[7]||(e[7]=b=>t.setCurrentStep("HIV & TB History & Diagnosis")),class:F({active:t.currentStep==="HIV & TB History & Diagnosis"})},{default:s(()=>[e[12]||(e[12]=u("span",{class:"breadcrumb-text"},"HIV & TB History & Diagnosis",-1)),n(f,{slot:"separator",size:"large",icon:t.iconsContent.arrowRight},null,8,["icon"])]),_:1},8,["class"])]),_:1}),t.currentStep=="HIV & TB History & Diagnosis"?(o(),y(r,{key:2,name:"Save",iconSlot:"end",icon:t.iconsContent.saveWhite,onClick:e[8]||(e[8]=b=>t.saveData())},null,8,["icon"])):(o(),y(r,{key:3,name:"Next",iconSlot:"end",icon:t.iconsContent.arrowRightWhite,onClick:t.nextStep},null,8,["icon","onClick"]))])]),_:1})):_("",!0)]),_:1})}const Hn=N(Te,[["render",Ee],["__scopeId","data-v-cc9e0828"]]);export{Hn as default};
