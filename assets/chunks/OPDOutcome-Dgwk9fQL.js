var Ha=Object.defineProperty;var Na=(n,r,c)=>r in n?Ha(n,r,{enumerable:!0,configurable:!0,writable:!0,value:c}):n[r]=c;var ft=(n,r,c)=>Na(n,typeof r!="symbol"?r+"":r,c);import{d as ce,aV as pe,r as i,a as He,w as te,e as k,f as d,k as l,l as e,u as a,ah as It,b5 as Va,b2 as rt,G as xa,E as Ma,ai as $a,aj as dt,_ as ve,I as La,a3 as aa,bf as wt,aU as Ra,H as X,m as b,J as t,Q as F,c as fe,F as ue,O as V,bz as Lt,aP as Fa,bm as gt,a4 as ge,a5 as J,al as ut,P as Ee,ak as Re,W as Ce,K as M,bC as Ba,bv as na,Z as Ua,aS as qa,z as Xe,an as Ga,cG as Wa,a2 as At,R as za,i as nt,v as st,b9 as Ke,au as Qe,et as Ya,eu as ja,ev as Ka,az as Qa,aF as sa,aw as ia,bV as Ja,aN as Xa,p as Ze,bs as Za,L as ot,ew as Rt,ex as Ft,bk as lt,ey as Bt,ez as Ut,d8 as qt,eA as Gt,eB as Wt,eC as zt,dd as Yt,bU as en,ay as tn,c0 as an,N as Oe,br as Pe,bl as et,bn as oa,b_ as nn,bu as sn,c6 as jt,dp as on,e6 as Kt}from"./vendor-Cjwp4qqF.js";import{bF as la,bw as ra,b0 as Ie,M as ae,b2 as Ne,t as ke,ag as we,aX as de,G as ze,_ as Ae,J as xe,b6 as Ot,B as qe,be as ln,S as Te,o as Qt,O as Jt,aR as _e,aI as kt,H as Le,u as Je,l as Ve,bG as ua,aC as We,aB as da,aD as ca,b3 as _t,L as rn,bH as un,bI as dn,bJ as cn,bK as mn,bL as pn,bM as vn,bN as fn,P as Pt,bO as ht,bP as gn,bQ as _n,bR as hn,bS as yn,s as bn,aH as Xt,aJ as Dn,aK as Ye,aL as Cn,d as Sn,aM as ma,g as In,Z as wn,e as kn,N as An,aN as it,aO as On,aP as Zt,aQ as Pn,aS as Et,a0 as En,m as pa,bT as Tn,bU as Hn,aU as Nn,b9 as Vn,K as xn,ax as ea,ao as yt,as as bt,ar as Mn}from"../index-hyu0M4vo.js";import{p as va,e as $n,a as Ln,m as Rn,b as Fn,v as Bn,c as Un,_ as qn}from"./LevelOfConsciousness.vue_vue_type_script_setup_true_lang-sbbootiQ.js";import{P as fa}from"./patient_complaints_service-BtPp3b7X.js";import{D as Tt}from"./DashBox-C2apGPDM.js";import{B as at}from"./BasicForm-Duz2D88q.js";import{c as Ht,f as ct,a as tt,b as Gn}from"./formatServerData-Bn4-C3HP.js";import Wn from"./LabOrdersList-CyKMZQBo.js";import{R as zn,_ as Yn,L as jn,A as Kn,D as Qn,a as Jn}from"./NextAppointment-DR3Cd6_C.js";import{v as ta}from"./group_validation-BZYoBS0C.js";import{u as Xn,a as Dt,_ as Zn,s as es,c as ts,b as as,P as ns}from"./useFormWizard-CSV8vyhB.js";import{l as Ge}from"./lodash-NJiRuGo9.js";import{u as ss,_ as Ct,D as is,A as os,R as ls,a as rs,b as us}from"./usePatientProfile-DOzJOMk2.js";import{a as ds,b as cs}from"./drug_prescription_service-DoUAULbV.js";const ms={class:"modal_wrapper"},ps={class:"uniform_columns"},vs=ce({__name:"AHDPastMedicalHistory",setup(n,{expose:r}){const c=la(),{pastMedicalHistory:m}=pe(c),v=i([]);He(()=>{v.value=c.getInitial(),f()}),te(m,()=>{f()},{deep:!0});const f=()=>{var p;const C=["TB","Chronic Obstructive Pulmonary Disease (COPD)","Asthma","Epilepsy","Previous stroke","Peptic Ulcer Disease (PUD)","Mental disorder","Bleeding disorders","Hypertension","HIV Positive","Diabetes Mellitus"];(p=ra(m.value,"None"))!=null&&p.checked?C.forEach(O=>{Ie(m.value,"TB treatment","displayNone",!0),ae(m.value,"TB drugs","displayNone",!0),ae(m.value,"TB drug start date","displayNone",!0),Ie(m.value,"Hypertension medication","displayNone",!0),ae(m.value,"Current hypertension treatment regimen","displayNone",!0),Ie(m.value,"HIV status","displayNone",!0),ae(m.value,"ARV start date","displayNone",!0),Ie(m.value,"Diabetes","displayNone",!0),Ie(m.value,"Controlled by","displayNone",!0),Ne(m.value,O,"checked",!1),Ne(m.value,O,"disabled",!0)}):C.forEach(O=>{Ne(m.value,O,"disabled",!1)})},A=C=>{ae(m.value,"TB drugs","popOverData",{filterData:!0,data:[{name:"Auramine 'O' (C.I. 41000) 50g"},{name:"Bedaquilline 100mg"},{name:"Clofazimine 100mg"},{name:"Clofazimine 50mg"},{name:"Cycloserine 125mg"},{name:"Cycloserine 250mg"},{name:"Delamanid 50mg"},{name:"Ethambutol 100mg"},{name:"Ethambutol 400mg"},{name:"Ethionamide 250mg"},{name:"Isoniazid 100mg "},{name:"Isoniazid 300mg"},{name:"Isoniazid / Rifapentine 300mg / 300mg"},{name:"Levofloxacin 100mg"},{name:"Levofloxacin 250mg"},{name:"Linezolid 600mg"},{name:"Moxifloxacin 400mg"},{name:"Pyrazinamide 400mg"},{name:"Rifabutin 150mg Capsules"},{name:"Rifampicin 150mg/isoniazid 75mg"},{name:"Rifampicin 75mg+INH 50mg dispersible"},{name:"Rifampicin 75mg+INH 50mg+Pyrazinamide 150mg dispersible"},{name:"Rifampicin150mg/Isoniazid75mg/Pyrazinamide 400mg/Ethambutol"}]}),ae(m.value,"Current hypertension treatment regimen","popOverData",{filterData:!0,data:[{name:"Captopril 12.5mg"},{name:"Aspirin 75mg"},{name:"Hydrochlorothiazide 25mg"},{name:"Enalapril Meleate 5mg"},{name:"Enalapril Maleate 10mg"}]})},u=async()=>[...await Ht(m.value),...await ct(m.value),...await tt(m.value)];return r({onSubmit:async()=>{const C=await u();if(C.length===0){ke("No past medical history data to save");return}await we.addObsToEncounterPatient(C,de.AHD_PAST_MEDICAL_HISTORY),ze("Past medical history saved successful")}}),(C,p)=>(d(),k("div",ms,[l("div",ps,[e(at,{contentData:a(m),initialData:v.value,"onUpdate:inputValue":A,"onUpdate:selected":A},null,8,["contentData","initialData"])])]))}}),fs=Ae(vs,[["__scopeId","data-v-e5153372"]]),gs=ce({name:"Menu",mixins:[Yn],components:{IonContent:aa,IonHeader:La,IonItem:ve,IonList:dt,IonMenu:$a,IonTitle:Ma,IonToolbar:xa,IonInput:rt,IonPopover:Va,DashBox:Tt,SelectionPopover:ln,BasicInputField:qe,BasicForm:at,List:Ot,DynamicButton:xe,LabOrdersList:Wn,RadiologyInvestigation:zn},data(){return{segmentContent:"Lab Investigations",iconsContent:Ve,no_item:!1,search_item:!1,display_item:!1,addItemButton:!0,selectedText:"",testResult:"",test:"",labOrders:"",filteredSpecimen:"",testData:[],popoverOpen:!1,labOrderStatus:!1,event:"",specimen:"",radiologyOrdersStatus:!1,otherOrdersStatus:!1}},setup(){return{checkmark:Ra,pulseOutline:wt}},computed:{...It(kt,["investigations"]),...It(Je,["patient"]),inputFields(){return this.investigations[0].data.rowData[0].colData}},watch:{investigations:{handler(){this.setDashedBox()},deep:!0},patient:{async handler(){var n;(n=this.patient)!=null&&n.labOrders&&(this.labOrders=[...this.patient.labOrders.saved,...this.patient.labOrders.unsaved])},deep:!0},$route:{async handler(){await this.getTests()},deep:!0}},async mounted(){await this.getTests(),this.updateInvestigationsStores(),this.setDashedBox(),this.updateInvestigationWizard()},methods:{setSegmentContent(n){this.segmentContent=n},async getTests(){let n;Te.getPouchDbStatus()&&Te.getLanConnectionStatus()?n=await Qt("test_types"):n=await Jt.getTestTypes(),ae(this.investigations,"test","multiSelectData",n)},toggleLabOrderStatus(){this.labOrderStatus=!this.labOrderStatus},async updateInvestigationWizard(){var r;if(!((r=this.patient)!=null&&r.labOrders))return;this.labOrders=[...this.patient.labOrders.saved,...this.patient.labOrders.unsaved];const n=await this.labOrders.filter(c=>Le.toStandardHisFormat(Le.sessionDate())===Le.toStandardHisFormat(c.order_date));n.length>0?this.investigations[0].selectedData=n:this.investigations[0].selectedData=""},async updateInvestigationsStores(){await this.updateInvestigationWizard(),kt().setInvestigations(this.investigations)},displayInputFields(){this.testResult="",this.selectedText="",this.no_item=!1,this.addItemButton=!1,this.search_item=!0},async validateRowData(){return ta(this.investigations)},async checkTest(){return await this.isNameInData(this.inputFields[0].value.name,await this.investigations[0].selectedData)?(ae(this.investigations,"test","alertsErrorMassage","Lab order already selected"),!1):(ae(this.investigations,"test","alertsErrorMassage",""),!0)},async addNewRow(){ta(this.investigations)&&await this.checkTest()&&(await this.saveTest(),this.investigations[0].data.rowData[0].colData[0].value="",this.investigations[0].data.rowData[0].colData[1].value="",this.search_item=!1,this.display_item=!0,this.addItemButton=!0),this.updateInvestigationWizard()},isNameInData(n,r){for(let c of r)for(let m of c.tests)if(m.name===n)return!0;return!1},async saveTest(){await new jn().postAHDActivities(this.patient.patientID,[{concept_id:this.inputFields[0].value.concept_id,name:this.inputFields[0].value.name,specimen:this.inputFields[1].value.name,reason:"Routine",specimenConcept:await _e.getConceptID(this.inputFields[1].value.name,!0)}]),ae(this.investigations,"specimen","disabled",!0),this.labOrders=[...this.patient.labOrders.saved,...this.patient.labOrders.unsaved]},async handleInputData(n){if(n.inputHeader=="Test"&&this.checkTest(),ae(this.investigations,"specimen","alertsErrorMassage",""),n.inputHeader=="Test"&&n.value){let r;Te.getPouchDbStatus()&&Te.getLanConnectionStatus()?r=await Qt("specimens"):r=await Jt.getSpecimens("",1e3),this.specimen=await _e.getConceptSet(n.value.name,"",{names:r.map(c=>c.name)}),this.specimen.length==1?(ae(this.investigations,"specimen","value",this.specimen[0]),ae(this.investigations,"specimen","disabled",!0)):(ae(this.investigations,"specimen","value",""),ae(this.investigations,"specimen","disabled",!1)),ae(this.investigations,"specimen","multiSelectData",this.specimen)}},async filterTest(n){return await this.labOrders.filter(r=>r.name.toLowerCase().includes(n.toLowerCase()))},async filterSpecimen(n){var r;return(r=this.specimen[0])!=null&&r.name&&n?await this.specimen.filter(c=>c==null?void 0:c.name.toLowerCase().includes(n.toLowerCase())):[]},setTest(n){this.selectedText=n.name,this.inputFields[1].inputHeader=="Test"?this.investigations[0].data.rowData[0].colData[0].value=n.name:this.investigations[0].data.rowData[0].colData[1].value=n.name,this.updateInvestigationsStores()},setDashedBox(){(this.inputFields[1].value||this.inputFields[0].value)&&(this.addItemButton=!1,this.search_item=!0,this.no_item=!1),this.investigations[0].selectedData.length>0?(this.display_item=!0,this.no_item=!1):this.search_item||(this.no_item=!0)}}}),_s={class:"background"},hs={key:0},ys={key:1},bs={key:2},Ds={class:"",slot:"content",style:{"margin-bottom":"125px","margin-top":"2px"}},Cs={key:3},Ss={class:"ion-padding",slot:"content"},Is={key:4};function ws(n,r,c,m,v,f){const A=X("ion-label"),u=X("ion-segment-button"),_=X("ion-segment"),C=X("VisitsHistory"),p=X("LabOrdersList"),O=X("RadiologyInvestigation");return d(),k("div",_s,[e(_,{value:n.segmentContent,style:{"margin-top":"5px"}},{default:t(()=>[e(u,{value:"Lab Investigations",onClick:r[0]||(r[0]=W=>n.setSegmentContent("Lab Investigations"))},{default:t(()=>[e(A,null,{default:t(()=>[...r[3]||(r[3]=[F("Lab Investigations",-1)])]),_:1})]),_:1}),e(u,{value:"Radiology Investigation",onClick:r[1]||(r[1]=W=>n.setSegmentContent("Radiology Investigation"))},{default:t(()=>[e(A,null,{default:t(()=>[...r[4]||(r[4]=[F("Radiology Investigation",-1)])]),_:1})]),_:1}),e(u,{value:"Other Investigation",onClick:r[2]||(r[2]=W=>n.setSegmentContent("Other Investigation"))},{default:t(()=>[e(A,null,{default:t(()=>[...r[5]||(r[5]=[F("Other Investigation",-1)])]),_:1})]),_:1})]),_:1},8,["value"]),n.segmentContent=="Radiology Investigation"?(d(),k("div",hs,[e(C)])):b("",!0),n.segmentContent=="Other Investigation"?(d(),k("div",ys)):b("",!0),n.segmentContent=="Lab Investigations"?(d(),k("div",bs,[l("div",Ds,[l("span",null,[e(p,{propOrders:n.labOrders},null,8,["propOrders"])])])])):b("",!0),n.segmentContent=="Radiology Investigation"?(d(),k("div",Cs,[l("div",Ss,[e(O)])])):b("",!0),n.segmentContent=="Other Investigation"?(d(),k("div",Is)):b("",!0)])}const ks=Ae(gs,[["render",ws],["__scopeId","data-v-67ff1a61"]]),As={key:0},Os={style:{"align-content":"center"}},Ps={class:"ion-padding",slot:"content"},Es=ce({__name:"AHDPresentingComplaints",setup(n,{expose:r}){const c=ua(),{presentingComplaints:m}=pe(c),v=i(Ve),f=i(!0),A=i(!1),u=i(!0),_=i(!1),C=i([]),p=i([]),O=i(),W=fe(()=>[{componentType:"multiSelectInputField",header:"Presenting Complaints",name:"PresentingComplaints",trackBy:"concept_id",icon:Ve.search,hideSelected:!0,validation:w=>U(w==null?void 0:w.name,C.value)?"Presenting complaint already added":We.required(w),options:p.value,grid:{s:"6"}},{componentType:"inputField",header:"Duration",name:"duration",icon:Ve.time,validation:w=>We.isNotEmptyandNumber(w),grid:{s:"6"},unitOptions:[{label:"Hours",value:"Hours"},{label:"Days",value:"Days"},{label:"Weeks",value:"Weeks"},{label:"Months",value:"Months"},{label:"Years",value:"Years"}],unitValidation:w=>!w||w===""?"Please select a unit.":null},{componentType:"inputField",header:"Specify the presenting complaint(s)",name:"Other (specify)",icon:Ve.editPen,validation:w=>U(w,C.value)?"Presenting complaint already added":We.required(w),condition:w=>{var T;return((T=w==null?void 0:w.PresentingComplaints)==null?void 0:T.name)==="Other"}},{componentType:"Alert",condition:w=>{var T;return We.required((T=w==null?void 0:w.PresentingComplaints)==null?void 0:T.name)!=null},backgroundColor:"lightyellow",textColor:"black",value:"Please search thoroughly for the complaint. If it is not listed, search and select the 'Other' option to specify the complaint.",name:"noMatchAlert"}]),{formRef:y}=da(),S=async()=>{p.value=await fa.getComplaintsList("Presenting complaint"),ae(m.value,"PresentingComplaints","multiSelectData",p.value)},G=()=>{f.value=!1,u.value=!1,A.value=!0},H=async()=>{var q,h;const w=(q=y.value)==null?void 0:q.getFormValues();((h=y.value)==null?void 0:h.validateForm())==null&&(B(w),A.value=!1,u.value=!0)},B=w=>{var s;const T=w.duration+" "+w.duration_unit,q=w.PresentingComplaints,h=q.name==="Other"?w["Other (specify)"]:q.name;C.value.push({actionBtn:!0,btn:["delete"],name:h,concept_id:q.concept_id,duration:q.duration,durationUnits:q.duration_unit,display:[h,T],data:[{concept_id:8578,value_coded:q.concept_id,obs_datetime:Te.getSessionDate(),child:[{concept_id:q.concept_id,value_text:T,obs_datetime:Te.getSessionDate()}]}]}),(s=y.value)==null||s.resetForm(),_.value=!0},U=(w,T)=>T.some(q=>q.name===w),L=w=>{C.value=C.value.filter(T=>T.display[0]!==w.name)},z=async()=>{const w=C.value.flatMap(T=>T.data);if(w.length<=0)return ke("Presenting complaints is required");w.length<=0||(await we.addObsToEncounterPatient(w,de.AHD_PRESENTING_COMPLAINTS),ze("Presenting complaints saved successful"),C.value=[])};return He(async()=>{await S()}),r({onSubmit:z}),(w,T)=>{const q=X("ion-row"),h=X("ion-label"),s=X("ion-accordion"),N=X("ion-accordion-group");return d(),k(ue,null,[e(Tt,{status:f.value,content:"No presenting complaints added"},null,8,["status"]),_.value?(d(),k("span",As,[e(Ot,{listData:C.value,"onClicked:delete":L},null,8,["listData"])])):b("",!0),A.value?(d(),V(q,{key:1},{default:t(()=>[e(ca,{formData:W.value,ref_key:"formRef",ref:y},null,8,["formData"]),l("div",Os,[e(xe,{fill:"clear",icon:v.value.plus,iconSlot:"icon-only","onClicked:btn":T[0]||(T[0]=o=>H()),name:"Save"},null,8,["icon"])])]),_:1})):b("",!0),u.value?(d(),V(q,{key:2,style:{"margin-top":"10px"}},{default:t(()=>[e(xe,{fill:"clear",icon:v.value.plus,iconSlot:"icon-only","onClicked:btn":T[1]||(T[1]=o=>G()),name:"Add new presenting complaints"},null,8,["icon"])]),_:1})):b("",!0),e(q,null,{default:t(()=>[e(N,{ref_key:"accordionGroup",ref:O,class:"previousView"},{default:t(()=>[e(s,{value:"first","toggle-icon-slot":"start",style:{"border-radius":"10px","background-color":"#fff"}},{default:t(()=>[e(a(ve),{slot:"header",color:"light"},{default:t(()=>[e(h,{class:"previousLabel"},{default:t(()=>[...T[2]||(T[2]=[F("Previous presenting complaints",-1)])]),_:1})]),_:1}),l("div",Ps,[e(va)])]),_:1})]),_:1},512)]),_:1})],64)}}}),Ts=Ae(Es,[["__scopeId","data-v-04755951"]]);class St extends _t{constructor(c,m,v){super(c,de.AHD_HIV_STAGING,v);ft(this,"age");ft(this,"confirmatoryTest");this.age=m,this.confirmatoryTest=null}isAdult(){return this.age>=15}isPedaid(){return this.age<=14}setAge(c){this.age=c}getFacilities(c=""){return rn.getFacilities({name:c})}getConfirmatoryTestType(){return this.confirmatoryTest}cd4CountIsValid(c){try{return!!c.match(/^(=|<|>)([0-9]*)$/m)}catch(m){return!1}}getAlertGuidelines(){return un}getWhoStageGuidelines(){return this.isAdult()?dn:cn}getProgramEligibilityGuidelines(){return this.isAdult()?mn:pn}getRecommendedConditionGuidelines(){return this.isAdult()?vn:fn}getStagingConditions(c){const m=this.getStagingCategoryByNum(c);return _t.getConceptsByCategory(m)}buildWhoStageObs(c){return this.buildValueCoded("Who stage",c)}buildWhoCriteriaObs(c){return this.buildValueCoded("Who stages criteria present",c)}buildReasonForArtObs(c){return this.buildValueCoded("Reason for ART eligibility",c)}getStagingCategoryByNum(c){switch(c){case 1:return this.isAdult()?"stage_1_conditions_adults":"stage_1_conditions_pedaids";case 2:return this.isAdult()?"stage_2_conditions_adults":"stage_2_conditions_pedaids";case 3:return this.isAdult()?"stage_3_conditions_adults":"stage_3_conditions_pedaids";case 4:return this.isAdult()?"stage_4_conditions_adults":"stage_4_conditions_pedaids";default:return""}}async loadHivConfirmatoryTestType(){const c=await _t.getFirstValueCoded(this.patientID,"Confirmatory hiv test type");c&&(this.confirmatoryTest=c)}}const Hs={key:0,class:"ion-padding"},Ns={class:"accordion_group ion-padding"},Vs={style:{"font-weight":"bold"}},xs={class:"error"},Ms={class:"ion-padding",slot:"content"},$s={class:"ion-padding"},Ls={class:"ion-padding"},Rs={key:0,class:"ion-padding"},Fs={class:"ion-padding",style:{"border-bottom":"dashed #ccc"}},Bs=ce({__name:"AHDStaging",props:{hideSubmit:{type:Boolean,default:!1},date:{default:St.getSessionDate()}},setup(n,{expose:r}){const c=n,m=new Pt,v=i({}),f=new St(m.getID(),m.getAge(),-1);te(()=>c.date,o=>{var K;const g=(K=o==null?void 0:o.standardDate)!=null?K:St.getSessionDate(),I=Xe(g).diff(m.getBirthdate(),"years");f.setAge(I),f.setDate(g)},{deep:!0,immediate:!0});const A=Lt({stage_4_conditions:{title:"Stage 4 Conditions",options:[]},stage_3_conditions:{title:"Stage 3 Conditions",options:[]},stage_2_conditions:{title:"Stage 2 Conditions",options:[]},stage_1_conditions:{title:"Stage 1 Conditions",options:[]}}),u=Lt({cd4:"",cd4Date:"",isChildBearing:!1,reasonForArt:"",pregnant:"",breastFeeding:"",cd4Available:"",cd4Modifier:"",cd4Location:"",whoStage:"",staging:[],confirmatoryTest:""}),_={reasonForArt:{buildObs:()=>f.buildReasonForArtObs(u.reasonForArt),suggestAvalue:()=>({"PRESUMED SEVERE HIV":{priority:1,condition:()=>m.getAgeInMonths()<12&&u.confirmatoryTest==="HIV rapid test"&&_e.getConceptsByCategory("pshd_condition").some(o=>B().includes(o.name))},"WHO STAGE IV PEDS":{priority:2,condition:()=>f.isPedaid()&&p(["stage_4_conditions"])},"WHO STAGE III PEDS":{priority:3,condition:()=>f.isPedaid()&&p(["stage_3_conditions"])},"HIV DNA polymerase chain reaction":{priority:4,condition:()=>m.getAgeInMonths()<12&&u.confirmatoryTest==="HIV DNA polymerase chain reaction"},"CD4 COUNT LESS THAN OR EQUAL TO 750":{priority:5,condition:()=>G(750)&&H()&&O()&&m.ageInMonths()>=24&&m.ageInMonths()<=56},"CD4 COUNT LESS THAN OR EQUAL TO 500":{priority:6,condition:()=>f.isPedaid()&&G(500)&&H()&&O()},"HIV infected":{priority:7,condition:()=>m.getAgeInMonths()<24||m.getAge()<=5},"WHO STAGE IV ADULT":{priority:1,condition:()=>{const o=_e.getConceptsByCategory("severe_hiv_wasting_syndrome");return f.isAdult()&&(p(["stage_4_conditions"])||o.filter(g=>B().includes(g.name)).length>=2)}},"WHO STAGE III ADULT":{priority:2,condition:()=>f.isAdult()&&p(["stage_3_conditions"])},"cd4 less than or equal to 350":{priority:3,condition:()=>f.isAdult()&&G(350)&&O()},"cd4 less than or equal to 250":{priority:4,condition:()=>f.isAdult()&&G(250)&&O()},"cd4 less than or equal to 500":{priority:4,condition:()=>f.isAdult()&&G(500)&&O()},BREASTFEEDING:{priority:5,condition:()=>f.isAdult()&&u.breastFeeding==="Yes"&&H()},"PATIENT PREGNANT":{priority:6,condition:()=>f.isAdult()&&u.pregnant==="Yes"&&H()},Asymptomatic:{priority:7,condition:()=>H()}})},whoStage:{buildObs:()=>f.buildWhoStageObs(u.whoStage),suggestAvalue:()=>({"WHO STAGE IV ADULT":{priority:1,condition:()=>f.isAdult()&&p(["stage_4_conditions"])},"WHO STAGE III ADULT":{priority:2,condition:()=>f.isAdult()&&p(["stage_3_conditions"])},"WHO STAGE II ADULT":{priority:3,condition:()=>f.isAdult()&&p(["stage_2_conditions"])},"WHO STAGE I ADULT":{priority:4,condition:()=>f.isAdult()&&p(["stage_1_conditions"])},"WHO STAGE IV PEDS":{priority:1,condition:()=>f.isPedaid()&&(p(["stage_4_conditions"])||u.reasonForArt==="WHO STAGE IV PEDS")},"WHO STAGE III PEDS":{priority:2,condition:()=>f.isPedaid()&&p(["stage_3_conditions"])},"WHO STAGE II PEDS":{priority:3,condition:()=>f.isPedaid()&&p(["stage_2_conditions"])},"WHO STAGE I PEDS":{priority:4,condition:()=>f.isPedaid()&&p(["stage_1_conditions"])}})},cd4Available:{required:()=>!0,dataHandler:o=>{o!="Yes"&&(u.cd4="",u.cd4Date=""),v.value.cd4="",v.value.cd4Modifier="",v.value.cd4Date="",v.value.cd4Location=""}},pregnant:{required:()=>u.isChildBearing,buildObs:()=>f.buildValueCoded("Is patient pregnant?",u.pregnant)},breastFeeding:{required:()=>u.isChildBearing,buildObs:()=>f.buildValueCoded("Is patient breast feeding?",u.breastFeeding)},cd4:{required:()=>u.cd4Available==="Yes",validation:()=>{if(!S()){v.value.cd4="A number is required";return}y()>1e4&&(v.value.cd4="CD4 value cannot exceed 10,000")},buildObs:()=>f.buildValueNumber("CD4 count",y(),W())},cd4Modifier:{required:()=>u.cd4Available==="Yes",validation:()=>{u.cd4Modifier||(v.value.cd4Modifier="Please select modifier")},dataHandler:o=>u.cd4Modifier=o,options:[{label:"=",value:"="},{label:">",value:">"},{label:"<",value:"<"}]},cd4Date:{required:()=>u.cd4Available==="Yes",dataHandler:o=>{o&&(u.cd4Date=Xe(o).format("YYYY-MM-DD"))},validation:()=>{if(isNaN(new Date(u.cd4Date).getTime())){v.value.cd4Date="Invalid CD4 date";return}const o=Xe(u.cd4Date);if(o.isAfter(Xe(f.getDate()))){v.value.cd4Date="Cd4 result date can't be greater than ".concat(f.getDate());return}o.isBefore(Xe(m.getBirthdate()))&&(v.value.cd4Date="CD4 date must not be earlier than birthdate")},buildObs:()=>f.buildValueDate("Cd4 count datetime",u.cd4Date)},cd4Location:{required:()=>u.cd4Available==="Yes",dataHandler:o=>u.cd4Location=o,buildObs:()=>f.buildValueText("Cd4 count location",u.cd4Location)},staging:{validation:()=>{if(Object.keys(A).every(K=>w(K)<=0)){v.value.staging="Please select one or more staging conditions";return}const g=["stage_4_conditions","stage_3_conditions","stage_2_conditions"].some(K=>w(K)>0);A.stage_1_conditions.options.some(K=>/asymptomatic/i.test(K.name)&&K.checked)&&g&&(v.value.staging="Asymptomatic cannot be selected with other staging conditions")},buildObs:()=>Object.keys(A).reduce((g,I)=>(A[I].options.forEach(K=>{K.checked&&g.push(K.name)}),g),[]).map(g=>f.buildWhoCriteriaObs(g))}};function C(){Object.keys(u).forEach(o=>{typeof u[o]=="boolean"?u[o]=!1:Array.isArray(u[o])?u[o]=[]:u[o]=""}),Object.keys(v.value).forEach(o=>v.value[o]=""),h()}function p(o){return o.some(g=>w(g)>0)}function O(){return new Date(u.cd4Date)<=new Date("2016-04-30")}function W(){return u.cd4Modifier}function y(){return parseInt("".concat(u.cd4))}function S(){return/^\d+$/i.test("".concat(u.cd4))}function G(o){if(!S())return!1;const g=W(),I=y();return g==="="&&o===I||g==="<"&&I<=o||g===">"&&I>=o}function H(){return p(["stage_2_conditions","stage_1_conditions"])}function B(){return Object.keys(A).reduce((o,g)=>(A[g].options.forEach(I=>I.checked&&o.push(I.name)),o),[])}function U(o){if(v.value[o]="",typeof _[o].required=="function"&&_[o].required()&&!u[o]){v.value[o]="This field is required";return}u[o]&&typeof _[o].validation=="function"&&_[o].validation()}function L(o){var g,I,K;if(_[o]&&"suggestAvalue"in _[o]){u[o]="";const ne=_[o].suggestAvalue(),De=Object.keys(ne).reduce((Y,Se)=>{const Me=ne[Se];return typeof Me.condition=="function"&&Me.condition()?[...Y,{value:Se,priority:Me.priority}]:Y},[]);u[o]=(K=(I=(g=De.sort((Y,Se)=>Y.priority-Se.priority))==null?void 0:g[0])==null?void 0:I.value)!=null?K:""}}function z(){return Object.keys(u).reduce((o,g)=>{if(g in _&&u[g]&&typeof _[g].buildObs=="function"){const I=_[g].buildObs();return Array.isArray(I)?[...o,...I]:[...o,I]}return o},[])}function w(o){return A[o].options.filter(g=>g.checked).length}async function T(){await f.loadHivConfirmatoryTestType(),u.confirmatoryTest=f.getConfirmatoryTestType(),u.isChildBearing=m.isChildBearing()}function q(o,g){o in _&&typeof _[o].dataHandler=="function"&&_[o].dataHandler(g),U(o),Object.keys(_).forEach(I=>L(I))}function h(){Object.keys(A).forEach(o=>{var K,ne;const g=Number((ne=(K=o.match(/\d+/))==null?void 0:K[0])!=null?ne:0),I=f.getStagingConditions(g);A[o].options=I.map(De=>({checked:!1,name:De.name,concept_id:De.concept_id}))})}function s(){return Object.keys(_).forEach(o=>U(o)),Object.keys(v.value).every(o=>"".concat(v.value[o]).length<=0)}async function N(){if(console.log("Submitting staging"),!s())return ke("Please review form for errors"),!1;try{const o=await Promise.all(z());return await f.createEncounter(),await f.saveObservationList(o),ze("Staging Observations saved!"),!0}catch(o){return console.error(o),bn("Error has occured while saving observations"),!1}}return te(()=>c.date,o=>{f.setDate(o),m.date=o,C()}),He(async()=>{await T(),h()}),r({validateStagingForm:s,buildPayload:z,onSubmit:N}),(o,g)=>(d(),V(a(qa),null,{default:t(()=>[e(a(Fa),null,{default:t(()=>[u.isChildBearing?(d(),k("div",Hs,[e(a(gt),null,{default:t(()=>[e(a(ge),null,{default:t(()=>[e(a(J),null,{default:t(()=>[e(ht,{label:"Pregnant?",modelValue:u.pregnant,"onUpdate:modelValue":g[0]||(g[0]=I=>u.pregnant=I),onIonChange:g[1]||(g[1]=I=>q("pregnant",I)),"error-message":v.value.pregnant},null,8,["modelValue","error-message"])]),_:1}),e(a(J),null,{default:t(()=>[e(ht,{label:"Breastfeeding?",modelValue:u.breastFeeding,"onUpdate:modelValue":g[2]||(g[2]=I=>u.breastFeeding=I),onOnChange:g[3]||(g[3]=I=>q("breastFeeding",I)),"error-message":v.value.breastFeeding},null,8,["modelValue","error-message"])]),_:1})]),_:1})]),_:1})])):b("",!0),l("div",Ns,[e(a(ut),{color:"light"},{default:t(()=>[(d(!0),k(ue,null,Ee(A,(I,K)=>(d(),V(a(Re),{key:K},{default:t(()=>[e(a(ve),{color:"light",slot:"header"},{default:t(()=>[e(a(Ce),{style:{color:"grey","font-size":"17px"},class:"ion-padding"},{default:t(()=>[l("b",Vs,[F(M(I.title)+" ",1),e(a(Ba),{color:w("".concat(K))>0?"primary":void 0},{default:t(()=>[F(" Selected: "+M(w("".concat(K))),1)]),_:2},1032,["color"])]),l("p",xs,M(v.value.staging),1)]),_:2},1024)]),_:2},1024),l("div",Ms,[e(a(dt),null,{default:t(()=>[(d(!0),k(ue,null,Ee(I.options,(ne,De)=>(d(),V(a(ve),{key:De},{default:t(()=>[e(a(na),{modelValue:ne.checked,"onUpdate:modelValue":Y=>ne.checked=Y,onIonChange:Y=>q("staging",{stage_type:K,raw:Y,option:ne})},null,8,["modelValue","onUpdate:modelValue","onIonChange"]),e(a(Ce),{style:{margin:"13px"}},{default:t(()=>[F(M(ne.name),1)]),_:2},1024),g[15]||(g[15]=l("p",null,null,-1)),ne.description?(d(),V(a(Ua),{key:0,color:ne.color},{default:t(()=>[F(M(ne.text),1)]),_:2},1032,["color"])):b("",!0)]),_:2},1024))),128))]),_:2},1024)])]),_:2},1024))),128))]),_:1})]),l("div",$s,[l("div",Ls,[e(ht,{label:"Recent CD4 count results available?",modelValue:u.cd4Available,"onUpdate:modelValue":g[4]||(g[4]=I=>u.cd4Available=I),onOnChange:g[5]||(g[5]=I=>q("cd4Available",I)),"error-message":v.value.cd4Available},null,8,["modelValue","error-message"])]),u.cd4Available==="Yes"?(d(),k("div",Rs,[e(a(gt),{class:"ion-padding"},{default:t(()=>[e(a(ge),null,{default:t(()=>[e(a(J),null,{default:t(()=>[e(gn,{label:"CD4 Count Date",modelValue:u.cd4Date,"onUpdate:modelValue":g[6]||(g[6]=I=>u.cd4Date=I),required:u.cd4Available==="Yes","error-message":v.value.cd4Date,onOnChange:g[7]||(g[7]=I=>q("cd4Date",I))},null,8,["modelValue","required","error-message"])]),_:1})]),_:1}),e(a(ge),null,{default:t(()=>[e(a(J),{size:"2"},{default:t(()=>[e(_n,{label:"CD4 Result Modifier",required:u.cd4Available==="Yes","error-message":v.value.cd4Modifier,options:_.cd4Modifier.options,onOnChange:g[8]||(g[8]=I=>q("cd4Modifier",I.value))},null,8,["required","error-message","options"])]),_:1}),e(a(J),{size:"10"},{default:t(()=>[e(hn,{label:"CD4 Count",modelValue:u.cd4,"onUpdate:modelValue":g[9]||(g[9]=I=>u.cd4=I),type:"number",onOnChange:g[10]||(g[10]=I=>q("cd4",I)),placeholder:"Enter CD4 Count","error-message":v.value.cd4},null,8,["modelValue","error-message"])]),_:1})]),_:1}),e(a(ge),{style:{"margin-top":"15px"}},{default:t(()=>[e(a(J),null,{default:t(()=>[e(yn,{label:"CD4 Count Location",modelValue:u.cd4Location,"onUpdate:modelValue":g[11]||(g[11]=I=>u.cd4Location=I),required:u.cd4Available==="Yes","error-message":v.value.cd4Location,show_error:!1,selected_district_ids:[],selected_location:u.cd4Location,onOnChange:g[12]||(g[12]=I=>{q("cd4Location",I)})},null,8,["modelValue","required","error-message","selected_location"])]),_:1})]),_:1})]),_:1})])):b("",!0)]),l("div",Fs,[e(a(gt),null,{default:t(()=>[e(a(ge),null,{default:t(()=>[e(a(J),null,{default:t(()=>[e(a(rt),{readonly:"",placeholder:"N/A",label:"REASON FOR ART:",modelValue:u.reasonForArt,"onUpdate:modelValue":g[13]||(g[13]=I=>u.reasonForArt=I)},null,8,["modelValue"])]),_:1}),e(a(J),null,{default:t(()=>[e(a(rt),{readonly:"",placeholder:"N/A",label:"WHO STAGE:",modelValue:u.whoStage,"onUpdate:modelValue":g[14]||(g[14]=I=>u.whoStage=I)},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})])]),_:1})]),_:1}))}}),Us=Ae(Bs,[["__scopeId","data-v-1fe6c93a"]]),qs={style:{display:"flex","align-items":"center"}},Gs={style:{width:"88vw",margin:"0 auto","margin-top":"10px"}},Ws=ce({__name:"AHDWorkflow",setup(n,{expose:r}){const{onTabBeforeChange:c,currentTabIndex:m}=Xn();ss();const v=Ga(),f=Wa();i([]),i([]),i(!1);const A=i(!0),u=i(!1),_=i(!1),C=fe(()=>({text:_.value?"Saving...":"Finish",icon:_.value?"hourglass-outline":"checkmark",hideText:!1,hideIcon:!1,disabled:u.value||_.value})),p=Xt(),O=Je(),W=kt(),y=Dn();Ye();const S=Cn(),G=Sn();ma();const H=In(),B=Dt(),U=wn(),{patient:L}=pe(O),{vitals:z}=pe(p),{investigations:w}=pe(W),{diagnosis:T}=pe(y),{substance:q}=pe(H),{selectedNCDMedicationList:h}=pe(S),{FootScreening:s,visualScreening:N,cvScreening:o}=pe(B),{sessionDate:g}=pe(U),{apiStatus:I}=pe(kn());te(C,(x,j)=>{console.log("Done button options changed:",{from:j,to:x,currentStep:m.value,tabsLength:Y.value.length}),x.disabled!==(j==null?void 0:j.disabled)&&console.log("Done button ".concat(x.disabled?"disabled":"enabled")),x.text!==(j==null?void 0:j.text)&&console.log('Done button text changed from "'.concat(j==null?void 0:j.text,'" to "').concat(x.text,'"'))},{deep:!0}),te(_,(x,j)=>{x!==j&&(console.log("Saving state changed: ".concat(j," -> ").concat(x)),console.log(x?"Starting save process...":"Save process completed"))});const K=x=>{console.log("Done button change received from wizard:",x),x.newOptions.disabled&&console.log("Done button has been disabled"),x.isLastStep&&console.log("User is on the last step, done button should be visible")},ne=()=>{let x=!1;return P(),_.value&&(x=!0),u.value=x,!x},De=()=>[{title:"Presenting Complaints",icon:""},{title:"Past Medical History",icon:""},{title:"WHO",icon:""},{title:"Investigation",icon:""}],Y=i(De()),Se=i(null),Me=i(null),P=()=>{var se;if(!Y.value||Y.value.length===0)return console.log("Tabs not yet initialized"),null;const x=m.value>=0&&m.value<Y.value.length?m.value:0;switch((se=Y.value[x])==null?void 0:se.title){case"Presenting Complaints":return"Presenting Complaints";case"Past Medical History":return"Past Medical History";case"WHO":return"WHO";case"Investigation":return"Investigation";default:if(G.NCDActivities.length>0)switch(G.NCDActivities[0]){case"Presenting Complaints":return"Presenting Complaints";case"Past Medical History":return"Past Medical History";case"WHO":return"WHO";case"Investigation":return"Investigation"}return null}},R=()=>{A.value=!1,setTimeout(()=>{m.value=0,A.value=!0},0)},Q=()=>{const x=Xt();x.setVitals(x.getInitialVitals(L.value.ID))},ie=async()=>{var se,me;const x=An(g.value,"sessionDate","value")||Le.sessionDate(),j=it("vitals");for(let ee=0;ee<Y.value.length;ee++){const re=Y.value[ee];if(re.title==="Vital Signs")Y.value[ee].icon=Fe(x,j)?Ke:"";else if(re.title==="Risk Assessment"){const oe=it("substanceAbuse");Y.value[ee].icon=Fe(x,oe)?Ke:""}else if(re.title==="Investigations"){const oe=(me=(se=L==null?void 0:L.value)==null?void 0:se.labOrders)==null?void 0:me.saved,Ue=oe==null?void 0:oe.filter(mt=>Le.toStandardHisFormat(x)===Le.toStandardHisFormat(mt.order_date));Y.value[ee].icon=(Ue==null?void 0:Ue.length)>0?Ke:""}else if(re.title==="Diagnosis"){const oe=it("diagnosis");Y.value[ee].icon=Fe(x,oe)?Ke:""}else if(re.title==="Complications Screening"){const oe=it("screening");Y.value[ee].icon=Fe(x,oe)?Ke:""}else re.title==="Treatment Plan"&&(h.value.length>0?Y.value[ee].icon=On()?Ke:"":Y.value[ee].icon="")}ne()},Fe=(x,j)=>{const se=new Date(x);return se.setHours(0,0,0,0),j.some(me=>{const ee=new Date(me.obs_datetime);return ee.setHours(0,0,0,0),ee.getTime()===se.getTime()})},he=async()=>{var ee,re,oe,Ue;const x=[],j=await tt(N.value),se=await Gn(s.value),me=await tt(o.value);j.length>0&&x.push({concept_id:await _e.getConceptID("Visual acuity",!0),value_text:"visual acuity test",obs_datetime:_e.getSessionDate(),child:j}),se.length>0&&x.push({concept_id:await _e.getConceptID("Foot check",!0),value_text:"foot screening",obs_datetime:_e.getSessionDate(),child:se}),me.length>0&&x.push(...me),x.length>0?((Ue=(oe=(re=(ee=L.value).screening)!=null?re:ee.screening={}).unsaved)!=null||(oe.unsaved=[]),L.value.screening.unsaved.push(...x),ze("Complications saved successfully")):ke("No complications data to save")},ye=async()=>{const x=Et();if(!Ge.isEmpty(x.selectedMedicalAllergiesList)){const me=En(),ee=x.selectedMedicalAllergiesList.map(oe=>({concept_id:oe.concept_id,obs_datetime:Te.getSessionDate(),value_coded:oe.concept_id,location_id:me.facilityLocation.code,value_text:oe.name})),re=await es(ee);L.value=Object.assign(L.value,re),console.log("Allergies staged successfully:",L.value),x.clearSelectedMedicalAllergiesList()}const j=await ts();L.value=Object.assign(L.value,j);const se=await as().saveNonPharmaTherapyPatientData();L.value=Object.assign(L.value,se)},$e=async(x,j)=>{var me,ee,re;const se=(me=Y.value[j])==null?void 0:me.title;x%1===0&&(m.value=x),se=="Vital Signs"&&((ee=Se.value)==null||ee.onSubmit()),se=="Risk Assessment"&&((re=Me.value)==null||re.onSubmit()),se=="Complications Screening"&&await he(),se=="Treatment Plan"&&await ye(),await Zt(L.value)},Be=async()=>{_.value=!0;try{await Pn(),await Zt(L.value),v.push("/triageList")}catch(x){console.error("Error saving data:",x),ke("Error occurred while saving data. Please try again.")}finally{_.value=!1}};return He(async()=>{if(G.NCDActivities.length===0){v.push("patientProfile");return}Dt().resetScreening(),Y.value=De(),await ie(),(m.value===void 0||m.value<0)&&(m.value=0,console.log("Setting initial tab index to 0")),u.value=!1,_.value=!1,ne()}),te(m,async()=>{await ne()}),te(z,async()=>{await ie()},{deep:!0}),te(L,async()=>{Dt().resetScreening(),await ie()},{deep:!0}),te(g,async()=>{await ie()},{deep:!0}),te(w,async()=>{await ie()},{deep:!0}),te(T,async()=>{await ie()},{deep:!0}),te(q,async()=>{await ie()},{deep:!0}),te(h,async()=>{await ie()},{deep:!0}),te(f,async x=>{R(),Q(),Y.value=De()},{deep:!0}),te(L,async(x,j)=>{x.ID!=j.ID&&(R(),Q())},{deep:!0}),r({saveData:Be,markWizard:ie,refreshWizard:R,validateDoneButtonState:ne}),(x,j)=>{const se=X("ion-icon"),me=X("ion-title"),ee=X("ion-toolbar"),re=X("ion-header");return d(),k(ue,null,[e(re,null,{default:t(()=>[e(ee,{class:"modal-title"},{default:t(()=>[e(me,null,{default:t(()=>[l("div",qs,[e(se,{icon:a(Ve).demographics,class:"sub-menu-icon",style:{"font-size":"1.4rem"}},null,8,["icon"]),j[2]||(j[2]=l("b",{style:{"margin-left":"6px"}},"Advance HIV Disease",-1))])]),_:1}),e(se,{slot:"end",onClick:j[0]||(j[0]=oe=>a(za).dismiss()),style:{"font-size":"30px","padding-right":"10px"},icon:a(At)},null,8,["icon"])]),_:1})]),_:1}),e(a(aa),{class:"ion-padding"},{default:t(()=>[l("div",Gs,[A.value?(d(),V(Zn,{key:0,ref:"wizard",headingTitle:"AHD Screening","vertical-tabs":"","navigable-tabs":"","scrollable-tabs":"",startIndex:0,doneButton:C.value,"custom-tabs":Y.value,beforeChange:a(c),onChange:$e,"onComplete:wizard":j[1]||(j[1]=oe=>Be()),onDoneButtonChanged:K},{default:t(()=>[nt(l("div",null,[e(Ts,{ref:"observationsRef"},null,512)],512),[[st,P()=="Presenting Complaints"]]),nt(l("div",null,[e(fs,{ref:"interventionsRef"},null,512)],512),[[st,P()=="Past Medical History"]]),nt(l("div",null,[e(Us,{ref:"medicationsRef"},null,512)],512),[[st,P()=="WHO"]]),nt(l("div",null,[e(ks,{ref:"medicationsRef"},null,512)],512),[[st,P()=="Investigation"]])]),_:1},8,["doneButton","custom-tabs","beforeChange"])):b("",!0)])]),_:1})],64)}}}),zs={key:0},Ys={style:{"align-content":"center"}},js={class:"ion-padding",slot:"content"},Ks=ce({__name:"PresentingComplaints",setup(n,{expose:r}){const c=ua(),{presentingComplaints:m}=pe(c),v=i(Ve),f=i(!0),A=i(!1),u=i(!1),_=i(!0),C=i(!1),p=i([]),O=i([]),W=i(),y=fe(()=>[{componentType:"multiSelectInputField",header:"Presenting Complaints",name:"PresentingComplaints",trackBy:"concept_id",icon:Ve.search,hideSelected:!0,validation:h=>w(h==null?void 0:h.name,p.value)?"Presenting complaint already added":We.required(h),options:O.value,grid:{s:"6"}},{componentType:"inputField",header:"Duration",name:"duration",icon:Ve.time,validation:h=>We.isNotEmptyandNumber(h),grid:{s:"6"},unitOptions:[{label:"Hours",value:"Hours"},{label:"Days",value:"Days"},{label:"Weeks",value:"Weeks"},{label:"Months",value:"Months"},{label:"Years",value:"Years"}],unitValidation:h=>!h||h===""?"Please select a unit.":null},{componentType:"inputField",header:"Specify the presenting complaint(s)",name:"Other (specify)",icon:Ve.editPen,validation:h=>w(h,p.value)?"Presenting complaint already added":We.required(h),condition:h=>{var s;return((s=h==null?void 0:h.PresentingComplaints)==null?void 0:s.name)==="Other"}},{componentType:"Alert",condition:h=>{var s;return We.required((s=h==null?void 0:h.PresentingComplaints)==null?void 0:s.name)!=null},backgroundColor:"lightyellow",textColor:"black",value:"Please search thoroughly for the complaint. If it is not listed, search and select the 'Other' option to specify the complaint.",name:"noMatchAlert"}]),{formRef:S}=da(),G=async()=>{pa(Ws,{class:"fullScreenModal"})},H=async()=>{O.value=await fa.getComplaintsList("Presenting complaint"),ae(m.value,"PresentingComplaints","multiSelectData",O.value)},B=()=>{f.value=!1,_.value=!1,u.value=!0},U=async()=>{var N,o;const h=(N=S.value)==null?void 0:N.getFormValues();((o=S.value)==null?void 0:o.validateForm())==null&&(L(h),u.value=!1,_.value=!0)},L=h=>{var g;const s=h.duration+" "+h.duration_unit,N=h.PresentingComplaints,o=N.name==="Other"?h["Other (specify)"]:N.name;p.value.push({actionBtn:!0,btn:["delete"],name:o,concept_id:N.concept_id,duration:N.duration,durationUnits:N.duration_unit,display:[o,s],data:[{concept_id:8578,value_coded:N.concept_id,obs_datetime:Te.getSessionDate(),child:[{concept_id:N.concept_id,value_text:s,obs_datetime:Te.getSessionDate()}]}]}),(g=S.value)==null||g.resetForm(),C.value=!0,z()},z=()=>{const h=["Cough","Convulsions"];A.value=p.value.some(s=>h.includes(s.name))},w=(h,s)=>s.some(N=>N.name===h),T=h=>{p.value=p.value.filter(s=>s.display[0]!==h.name)},q=async()=>{const h=await we.getObsByEncounterIdAndDate(de.PRESENTING_COMPLAINTS),s=p.value.flatMap(N=>N.data);if(s.length<=0&&h.length<=0)return ke("Presenting complaints is required");s.length<=0||(await we.addObsToEncounterPatient(s,de.PRESENTING_COMPLAINTS),ze("Presenting complaints saved successful"),p.value=[])};return He(async()=>{await H()}),r({onSubmit:q}),(h,s)=>{const N=X("ion-row"),o=X("ion-label"),g=X("ion-accordion"),I=X("ion-accordion-group");return d(),k(ue,null,[e(Tt,{status:f.value,content:"No presenting complaints added"},null,8,["status"]),C.value?(d(),k("span",zs,[e(Ot,{listData:p.value,"onClicked:delete":T},null,8,["listData"])])):b("",!0),u.value?(d(),V(N,{key:1},{default:t(()=>[e(ca,{formData:y.value,ref_key:"formRef",ref:S},null,8,["formData"]),l("div",Ys,[e(xe,{fill:"clear",icon:v.value.plus,iconSlot:"icon-only","onClicked:btn":s[0]||(s[0]=K=>U()),name:"Save"},null,8,["icon"])])]),_:1})):b("",!0),_.value?(d(),V(N,{key:2,style:{"margin-top":"10px"}},{default:t(()=>[e(xe,{fill:"clear",icon:v.value.plus,iconSlot:"icon-only","onClicked:btn":s[1]||(s[1]=K=>B()),name:"Add new presenting complaints"},null,8,["icon"])]),_:1})):b("",!0),A.value?(d(),V(N,{key:3,class:"ion-float-right"},{default:t(()=>[e(xe,{color:"danger","onClicked:btn":s[2]||(s[2]=K=>G()),name:"AHD Screening"})]),_:1})):b("",!0),e(N,null,{default:t(()=>[e(I,{ref_key:"accordionGroup",ref:W,class:"previousView"},{default:t(()=>[e(g,{value:"first","toggle-icon-slot":"start",style:{"border-radius":"10px","background-color":"#fff"}},{default:t(()=>[e(a(ve),{slot:"header",color:"light"},{default:t(()=>[e(o,{class:"previousLabel"},{default:t(()=>[...s[3]||(s[3]=[F("Previous presenting complaints",-1)])]),_:1})]),_:1}),l("div",js,[e(va)])]),_:1})]),_:1},512)]),_:1})],64)}}}),Qs=Ae(Ks,[["__scopeId","data-v-0aa2f61c"]]),Js={class:"allergies-container"},Xs={key:0,class:"no-allergies"},Zs={key:1,class:"date-groups"},ei=["onClick"],ti={class:"date-info"},ai={class:"date-text"},ni={class:"allergy-count"},si={class:"card-header"},ii={class:"allergy-type"},oi={class:"card-content"},li=ce({__name:"AllergiesListing",setup(n){const r=Je(),{patient:c}=pe(r),m=i({}),v={antiviral:/abacavir|lamivudine|lopinavir|ritonavir|zidovudine|efavirenz|tenofovir/i,antibiotic:/penicillin|amoxicillin|cephalexin|azithromycin|ciprofloxacin|doxycycline/i,analgesic:/aspirin|ibuprofen|acetaminophen|morphine|codeine|tramadol/i,cardiac:/metoprolol|lisinopril|amlodipine|atorvastatin|warfarin/i,activated:/activated\s+charcoal/i},f={985:{name:"Other",icon:Qe,severity:"danger"},7759:{name:"Location/Environmental",icon:sa,severity:"info"},7579:{name:"Medical Condition",icon:Qa,severity:"warning"},drug:{name:"Drug Allergy",icon:Qe,severity:"danger"},food:{name:"Food Allergy",icon:Ka,severity:"danger"},environmental:{name:"Environmental",icon:ja,severity:"warning"},contact:{name:"Contact Allergy",icon:Ya,severity:"warning"},unknown:{name:"Drug Allergy",icon:Qe,severity:"danger"}},A=y=>{const S=y.toLowerCase();return v.antiviral.test(S)?{type:"Antiviral Medication",icon:"shield-outline"}:v.antibiotic.test(S)?{type:"Antibiotic",icon:"bandage-outline"}:v.analgesic.test(S)?{type:"Pain Medication",icon:"fitness-outline"}:v.cardiac.test(S)?{type:"Cardiac Medication",icon:"heart-outline"}:v.activated.test(S)?{type:"Detoxification Agent",icon:"flask-outline"}:{type:"Medication",icon:"medical-outline"}},u=fe(()=>{var S,G,H,B,U,L;return[...(H=(G=(S=c.value)==null?void 0:S.allergies)==null?void 0:G.saved)!=null?H:[],...(L=(U=(B=c.value)==null?void 0:B.allergies)==null?void 0:U.unsaved)!=null?L:[]].length>0}),_=fe(()=>{var H,B,U,L,z,w;const y=(U=(B=(H=c.value)==null?void 0:H.allergies)==null?void 0:B.saved)!=null?U:[],S=(w=(z=(L=c.value)==null?void 0:L.allergies)==null?void 0:z.unsaved)!=null?w:[],G=[...y,...S];return G.length===0?[]:G.map(T=>{var g;const q=((g=T.concept_id)==null?void 0:g.toString())||"unknown",h=f[q]||f.unknown;let s="Unknown",N=null;return T.value_text&&T.value_text!=="Unknown"&&T.value_text!==""?(s=T.value_text,(q==="985"||q==="985###")&&(N=A(T.value_text))):T.concept_name&&(s=T.concept_name),{...N?{...h,name:N.type,icon:N.icon}:h,displayValue:s,conceptId:T.concept_id,date:T.obs_datetime||T.encounter_datetime,providerId:T.provider_id,locationId:T.location_id,encounterId:T.encounter_id,isDrug:q==="985",raw:T}})}),C=fe(()=>{const y={};_.value.forEach(H=>{const B=H.date?O(H.date):"Unknown Date";y[B]||(y[B]=[]),y[B].push(H)});const S={};return Object.keys(y).sort((H,B)=>H==="Unknown Date"?1:B==="Unknown Date"?-1:new Date(B).getTime()-new Date(H).getTime()).forEach(H=>{S[H]=y[H]}),S}),p=y=>{m.value[y]=!m.value[y]},O=y=>{if(!y)return"Unknown Date";try{return new Date(y).toISOString().split("T")[0]}catch(S){return"Unknown Date"}},W=y=>{if(y==="Unknown Date")return"Unknown Date";try{const S=new Date(y),G=Le.sessionDate(),H=new Date(G),B=new Date(H);B.setDate(B.getDate()-1);const U=S.toDateString(),L=H.toDateString(),z=B.toDateString();return U===L?"Today":U===z?"Yesterday":S.toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})}catch(S){return y}};return te(()=>C.value,y=>{const S=Object.keys(y);S.length>0&&(m.value[S[0]]=!0)},{immediate:!0}),te(()=>{var y;return(y=c.value)==null?void 0:y.allergies},y=>{console.log("Allergies updated:",y)},{deep:!0}),He(()=>{var y;console.log("Allergies component mounted",(y=c.value)==null?void 0:y.allergies)}),(y,S)=>{const G=X("ion-icon"),H=X("ion-label");return d(),k("div",Js,[e(H,{class:"section-title"},{default:t(()=>[e(G,{icon:a(ia),class:"alert-icon"},null,8,["icon"]),e(H,null,{default:t(()=>[...S[0]||(S[0]=[F("Allergies (Medication, Healthcare items, Environment and Food)",-1)])]),_:1})]),_:1}),u.value?(d(),k("div",Zs,[(d(!0),k(ue,null,Ee(C.value,(B,U)=>(d(),k("div",{key:U,class:"date-group"},[l("div",{class:Ze(["date-header",{expanded:m.value[U]}]),onClick:L=>p(U)},[l("div",ti,[e(G,{icon:a(Xa),class:"date-icon"},null,8,["icon"]),l("span",ai,M(W(U)),1),l("span",ni,"("+M(B.length)+" "+M(B.length===1?"allergy":"allergies")+")",1)]),e(G,{icon:a(Za),class:Ze(["expand-icon",{rotated:m.value[U]}])},null,8,["icon","class"])],10,ei),l("div",{class:Ze(["allergies-grid",{collapsed:!m.value[U]}])},[(d(!0),k(ue,null,Ee(B,(L,z)=>(d(),k("div",{key:z,class:Ze(["allergy-card",L.severity])},[l("div",si,[e(G,{icon:L.icon,class:"allergy-icon"},null,8,["icon"]),l("span",ii,M(L.name),1)]),l("div",oi,[l("div",{class:Ze(["allergy-value",{"drug-name":L.isDrug}])},M(L.displayValue),3)])],2))),128))],2)]))),128))])):(d(),k("div",Xs,[e(G,{icon:a(Ja),class:"no-allergies-icon"},null,8,["icon"]),S[1]||(S[1]=l("p",null,"No known allergies",-1))]))])}}}),ga=Ae(li,[["__scopeId","data-v-fa7b8158"]]),ri=ce({name:"VisitHistory",components:{AllergiesListing:ga,IonIcon:ot},setup(){const n=Et();return{selectedAllergiesList2:fe(()=>n.selectedMedicalAllergiesList),alertCircleOutline:ia,documentTextOutline:an,femaleOutline:tn,medicalOutline:Qe,warningOutline:en,bodyOutline:Rt,eyeOutline:Yt,nutritionOutline:zt,fitnessOutline:Ut,pulseOutline:wt,earOutline:Wt,happyOutline:Gt,manOutline:qt,moveOutline:Bt,addOutline:lt,scanOutline:Ft}},data(){return{presentingComplaintsWithDuration:[],pastMedicalHistory:[],levelOfConsciousness:{eyeResponse:null,verbalResponse:null,motorResponse:null},pregnancy:{patientPregnant:null,breastFeeding:null},physicalExamCategories:{Eyes:{icon:Yt,abnormalities:[],normal:!1},Mouth:{icon:zt,abnormalities:[],normal:!1},Ears:{icon:Wt,abnormalities:[],normal:!1},Face:{icon:Gt,abnormalities:[],normal:!1},Neck:{icon:qt,abnormalities:[],normal:!1},Chest:{icon:Ut,abnormalities:[],normal:!1},"Chest Movement":{icon:Bt,abnormalities:[],normal:!1},"Heart Sounds":{icon:wt,abnormalities:[],normal:!1},"Breath Sounds":{icon:lt,abnormalities:[],normal:!1},"Added Breath Sounds":{icon:lt,abnormalities:[],normal:!1},"Abdominal Inspection":{icon:Ft,abnormalities:[],normal:!1},"Genital Examination":{icon:Rt,abnormalities:[],normal:!1}}}},computed:{...It(Je,["patient"]),hasLevelOfConsciousness(){return this.levelOfConsciousness.eyeResponse||this.levelOfConsciousness.verbalResponse||this.levelOfConsciousness.motorResponse},hasPresentingComplaints(){var n;return((n=this.presentingComplaintsWithDuration)==null?void 0:n.length)>0},hasPregnancyData(){return this.pregnancy.patientPregnant||this.pregnancy.breastFeeding},hasPastMedicalHistory(){var n;return((n=this.uniquePastMedicalHistory)==null?void 0:n.length)>0},hasAllergies(){var n,r;return((r=(n=this.selectedAllergiesList2)==null?void 0:n.filter(c=>c.selected))==null?void 0:r.length)>0},hasPhysicalExam(){return Object.values(this.physicalExamCategories).some(n=>n.abnormalities.length>0||n.normal)},uniquePastMedicalHistory(){return[...new Set(this.pastMedicalHistory)]},uniquePresentingComplaints(){return[...new Set(this.presentingComplaintsWithDuration.map(n=>n.name))]},isMinor(){var n,r;return Le.getAgeInYears((r=(n=this.patient)==null?void 0:n.personInformation)==null?void 0:r.birthdate)<18},gcsScore(){var u,_,C;if(!this.hasLevelOfConsciousness)return null;const n=this.levelOfConsciousness.eyeResponse,r=this.levelOfConsciousness.motorResponse,c=this.levelOfConsciousness.verbalResponse,m=n&&(u=(this.isMinor?$n:Ln)[n])!=null?u:0,v=r&&(_=(this.isMinor?Rn:Fn)[r])!=null?_:0,f=c&&(C=(this.isMinor?Bn:Un)[c])!=null?C:0,A=m+v+f;return"(M ".concat(v," V ").concat(f," E ").concat(m,") ").concat(A,"/").concat(this.isMinor?5:15)}},methods:{async updateData(){var n;(n=this.patient)!=null&&n.patientID&&(await this.loadPresentingComplaints(),await this.loadPastMedicalHistory(),await this.loadLevelOfConsciousness(),await this.loadPregnancyStatus(),await this.loadPhysicalExam())},async loadPresentingComplaints(){try{const n=await we.getObsByEncounterIdAndDate(de.PRESENTING_COMPLAINTS);this.presentingComplaintsWithDuration=[];const r=n.filter(c=>c.concept_name==="Presenting complaint");for(const c of r){const m=n.find(f=>f.concept_id===c.value_coded&&f.concept_name!=="Presenting complaint"),v=await _e.getConceptName(c.value_coded);this.presentingComplaintsWithDuration.push({name:v,duration:(m==null?void 0:m.value_text)||"Duration not specified"})}}catch(n){console.error("Error loading presenting complaints:",n)}},async loadPastMedicalHistory(){try{const r=(await we.getObsByEncounterIdAndDate(de.PAST_MEDICAL_HISTORY)).filter(c=>c.concept_name==="Chronic disease");this.pastMedicalHistory=await Promise.all(r.map(async c=>await _e.getConceptName(c.value_coded)))}catch(n){console.error("Error loading past medical history:",n)}},async loadLevelOfConsciousness(){try{const n=await we.getObsByEncounterIdAndDate(de.ASSESSMENT);if(n&&Array.isArray(n)){const r=n.find(v=>v.concept_name==="Eye opening response");this.levelOfConsciousness.eyeResponse=r!=null&&r.value_coded?await _e.getConceptName(r.value_coded):null;const c=n.find(v=>v.concept_name==="Best verbal response");this.levelOfConsciousness.verbalResponse=c!=null&&c.value_coded?await _e.getConceptName(c.value_coded):null;const m=n.find(v=>v.concept_name==="Best motor response");this.levelOfConsciousness.motorResponse=m!=null&&m.value_coded?await _e.getConceptName(m.value_coded):null}}catch(n){console.error("Error loading level of consciousness:",n)}},async loadPregnancyStatus(){try{const n=await we.getObsByEncounterIdAndDate(de.PREGNANCY_STATUS);if(n&&Array.isArray(n)){const r=n.find(m=>m.concept_name==="Patient pregnant");this.pregnancy.patientPregnant=r!=null&&r.value_coded?await _e.getConceptName(r.value_coded):null;const c=n.find(m=>m.concept_name==="Is patient breast feeding?");this.pregnancy.breastFeeding=c!=null&&c.value_coded?await _e.getConceptName(c.value_coded):null}}catch(n){console.error("Error loading pregnancy status:",n)}},async loadPhysicalExam(){try{const n=await we.getObsByEncounterIdAndDate(de.PHYSICAL_EXAMINATION);Object.values(this.physicalExamCategories).forEach(r=>{r.abnormalities=[],r.normal=!1});for(const r of n)if(r.concept_id){if(r.value_coded===1065)switch(r.concept_id){case 10837:this.physicalExamCategories.Eyes.normal=!0;break;case 10842:this.physicalExamCategories.Mouth.normal=!0;break;case 11028:this.physicalExamCategories.Ears.normal=!0;break;case 10854:this.physicalExamCategories.Face.normal=!0;break;case 10858:this.physicalExamCategories.Neck.normal=!0;break;case 10894:this.physicalExamCategories.Chest.normal=!0;break;case 10903:this.physicalExamCategories["Heart Sounds"].normal=!0;break;case 10909:this.physicalExamCategories["Breath Sounds"].normal=!0;break;case 10919:case 10928:case 10939:this.physicalExamCategories["Abdominal Inspection"].normal=!0;break;case 10803:case 10946:this.physicalExamCategories["Genital Examination"].normal=!0;break}if(r.value_coded){const c=await _e.getConceptName(r.value_coded);switch(r.concept_id){case 10838:this.physicalExamCategories.Eyes.abnormalities.push(c);break;case 10843:this.physicalExamCategories.Mouth.abnormalities.push(c);break;case 10852:this.physicalExamCategories.Ears.abnormalities.push(c);break;case 10855:this.physicalExamCategories.Face.abnormalities.push(c);break;case 10859:this.physicalExamCategories.Neck.abnormalities.push(c);break;case 10897:this.physicalExamCategories.Chest.abnormalities.push(c);break;case 10904:this.physicalExamCategories["Heart Sounds"].abnormalities.push(c);break;case 10910:this.physicalExamCategories["Breath Sounds"].abnormalities.push(c);break;case 10920:case 10929:case 10939:this.physicalExamCategories["Abdominal Inspection"].abnormalities.push(c);break;case 10797:case 10804:case 10947:this.physicalExamCategories["Genital Examination"].abnormalities.push(c);break}}}}catch(n){console.error("Error loading physical exam:",n)}}},watch:{patient:{async handler(){await this.updateData()},deep:!0}},async mounted(){await this.updateData()}}),ui={class:"visit-container"},di={class:"visit-sections"},ci={key:0,class:"visit-section"},mi={class:"section-header"},pi={class:"section-content"},vi={key:0,class:"info-item"},fi={class:"info-value"},gi={key:1,class:"info-item"},_i={class:"info-value"},hi={key:2,class:"info-item"},yi={class:"info-value"},bi={key:3,class:"info-item"},Di={class:"info-value highlight"},Ci={key:1,class:"visit-section"},Si={class:"section-header"},Ii={class:"complaints-container"},wi={class:"complaint-name"},ki={class:"complaint-duration"},Ai={key:2,class:"visit-section"},Oi={class:"section-header"},Pi={class:"section-content"},Ei={key:0,class:"info-item"},Ti={class:"info-value highlight"},Hi={key:1,class:"info-item"},Ni={class:"info-value highlight"},Vi={key:3,class:"visit-section"},xi={class:"section-header"},Mi={class:"tags-container"},$i={class:"allergies-section"},Li={class:"allergies-container"},Ri={key:4,class:"visit-section"},Fi={class:"section-header"},Bi={class:"exam-section"},Ui={key:0,class:"exam-category"},qi={class:"exam-category-header"},Gi={class:"exam-items"},Wi={key:1,class:"exam-item normal"};function zi(n,r,c,m,v,f){const A=X("ion-icon"),u=X("AllergiesListing");return d(),k("div",ui,[r[11]||(r[11]=l("div",{class:"visit-header"},[l("h5",null,"Patient's Clinical Assessment Summary")],-1)),l("div",di,[n.hasLevelOfConsciousness?(d(),k("div",ci,[l("div",mi,[e(A,{icon:n.alertCircleOutline,class:"section-icon"},null,8,["icon"]),r[0]||(r[0]=l("h3",null,"Level of Consciousness",-1))]),l("div",pi,[n.levelOfConsciousness.eyeResponse?(d(),k("div",vi,[r[1]||(r[1]=l("span",{class:"info-label"},"Eye Response:",-1)),l("span",fi,M(n.levelOfConsciousness.eyeResponse),1)])):b("",!0),n.levelOfConsciousness.verbalResponse?(d(),k("div",gi,[r[2]||(r[2]=l("span",{class:"info-label"},"Verbal Response:",-1)),l("span",_i,M(n.levelOfConsciousness.verbalResponse),1)])):b("",!0),n.levelOfConsciousness.motorResponse?(d(),k("div",hi,[r[3]||(r[3]=l("span",{class:"info-label"},"Motor Response:",-1)),l("span",yi,M(n.levelOfConsciousness.motorResponse),1)])):b("",!0),n.gcsScore?(d(),k("div",bi,[r[4]||(r[4]=l("span",{class:"info-label"},"Score:",-1)),l("span",Di,M(n.gcsScore),1)])):b("",!0)])])):b("",!0),n.hasPresentingComplaints?(d(),k("div",Ci,[l("div",Si,[e(A,{icon:n.documentTextOutline,class:"section-icon"},null,8,["icon"]),r[5]||(r[5]=l("h3",null,"Presenting Complaints",-1))]),l("div",Ii,[(d(!0),k(ue,null,Ee(n.presentingComplaintsWithDuration,(_,C)=>(d(),k("div",{class:"complaint-item",key:C},[l("div",wi,M(_.name),1),l("div",ki,M(_.duration),1)]))),128))])])):b("",!0),n.hasPregnancyData?(d(),k("div",Ai,[l("div",Oi,[e(A,{icon:n.femaleOutline,class:"section-icon"},null,8,["icon"]),r[6]||(r[6]=l("h3",null,"Pregnancy Status",-1))]),l("div",Pi,[n.pregnancy.patientPregnant?(d(),k("div",Ei,[r[7]||(r[7]=l("span",{class:"info-label"},"Pregnant:",-1)),l("span",Ti,M(n.pregnancy.patientPregnant),1)])):b("",!0),n.pregnancy.breastFeeding?(d(),k("div",Hi,[r[8]||(r[8]=l("span",{class:"info-label"},"Breastfeeding:",-1)),l("span",Ni,M(n.pregnancy.breastFeeding),1)])):b("",!0)])])):b("",!0),n.hasPastMedicalHistory?(d(),k("div",Vi,[l("div",xi,[e(A,{icon:n.medicalOutline,class:"section-icon"},null,8,["icon"]),r[9]||(r[9]=l("h3",null,"Medical History",-1))]),l("div",Mi,[(d(!0),k(ue,null,Ee(n.uniquePastMedicalHistory,(_,C)=>(d(),k("div",{class:"medical-tag",key:C},M(_),1))),128))])])):b("",!0),l("div",$i,[l("div",Li,[e(u)])]),n.hasPhysicalExam?(d(),k("div",Ri,[l("div",Fi,[e(A,{icon:n.bodyOutline,class:"section-icon"},null,8,["icon"]),r[10]||(r[10]=l("h3",null,"Physical Examination",-1))]),l("div",Bi,[(d(!0),k(ue,null,Ee(n.physicalExamCategories,(_,C)=>(d(),k(ue,{key:C},[_.abnormalities.length>0||_.normal?(d(),k("div",Ui,[l("div",qi,[e(A,{icon:_.icon},null,8,["icon"]),l("h4",null,M(C),1)]),l("div",Gi,[_.abnormalities.length>0?(d(!0),k(ue,{key:0},Ee(_.abnormalities,(p,O)=>(d(),k("div",{class:"exam-item abnormal",key:O},M(p),1))),128)):_.normal?(d(),k("div",Wi," Normal examination ")):b("",!0)])])):b("",!0)],64))),128))])])):b("",!0)])])}const Yi=Ae(ri,[["render",zi],["__scopeId","data-v-795e1865"]]),ji={class:"modal_wrapper"},Ki=ce({__name:"PregnancyBreastfeeding",setup(n,{expose:r}){const c=Tn(),{pregnancy:m}=pe(c),v=()=>{};return r({onSubmit:async()=>{const A=await ct(m.value);A.length>0?(await we.addObsToEncounterPatient(A,de.PREGNANCY_STATUS),ze("Pregnancy status saved successfully")):ke("No pregnancy status data to save ")}}),(A,u)=>(d(),k("div",ji,[e(at,{contentData:a(m),"onUpdate:inputValue":v},null,8,["contentData"])]))}}),Qi={class:"modal_wrapper"},Ji={class:"uniform_columns"},Xi=ce({__name:"PastMedicalHistory",setup(n,{expose:r}){const c=la(),{pastMedicalHistory:m}=pe(c),v=i([]);He(()=>{v.value=c.getInitial(),f()}),te(m,()=>{f()},{deep:!0});const f=()=>{var p;const C=["TB","Chronic Obstructive Pulmonary Disease (COPD)","Asthma","Epilepsy","Previous stroke","Peptic Ulcer Disease (PUD)","Mental disorder","Bleeding disorders","Hypertension","HIV Positive","Diabetes Mellitus"];(p=ra(m.value,"None"))!=null&&p.checked?C.forEach(O=>{Ie(m.value,"TB treatment","displayNone",!0),ae(m.value,"TB drugs","displayNone",!0),ae(m.value,"TB drug start date","displayNone",!0),Ie(m.value,"Hypertension medication","displayNone",!0),ae(m.value,"Current hypertension treatment regimen","displayNone",!0),Ie(m.value,"HIV status","displayNone",!0),ae(m.value,"ARV start date","displayNone",!0),Ie(m.value,"Diabetes","displayNone",!0),Ie(m.value,"Controlled by","displayNone",!0),Ne(m.value,O,"checked",!1),Ne(m.value,O,"disabled",!0)}):C.forEach(O=>{Ne(m.value,O,"disabled",!1)})},A=C=>{ae(m.value,"TB drugs","popOverData",{filterData:!0,data:[{name:"Auramine 'O' (C.I. 41000) 50g"},{name:"Bedaquilline 100mg"},{name:"Clofazimine 100mg"},{name:"Clofazimine 50mg"},{name:"Cycloserine 125mg"},{name:"Cycloserine 250mg"},{name:"Delamanid 50mg"},{name:"Ethambutol 100mg"},{name:"Ethambutol 400mg"},{name:"Ethionamide 250mg"},{name:"Isoniazid 100mg "},{name:"Isoniazid 300mg"},{name:"Isoniazid / Rifapentine 300mg / 300mg"},{name:"Levofloxacin 100mg"},{name:"Levofloxacin 250mg"},{name:"Linezolid 600mg"},{name:"Moxifloxacin 400mg"},{name:"Pyrazinamide 400mg"},{name:"Rifabutin 150mg Capsules"},{name:"Rifampicin 150mg/isoniazid 75mg"},{name:"Rifampicin 75mg+INH 50mg dispersible"},{name:"Rifampicin 75mg+INH 50mg+Pyrazinamide 150mg dispersible"},{name:"Rifampicin150mg/Isoniazid75mg/Pyrazinamide 400mg/Ethambutol"}]}),ae(m.value,"Current hypertension treatment regimen","popOverData",{filterData:!0,data:[{name:"Captopril 12.5mg"},{name:"Aspirin 75mg"},{name:"Hydrochlorothiazide 25mg"},{name:"Enalapril Meleate 5mg"},{name:"Enalapril Maleate 10mg"}]})},u=async()=>[...await Ht(m.value),...await ct(m.value),...await tt(m.value)];return r({onSubmit:async()=>{const C=await u();if(C.length===0){ke("No past medical history data to save");return}await we.addObsToEncounterPatient(C,de.PAST_MEDICAL_HISTORY),ze("Past medical history saved successful")}}),(C,p)=>(d(),k("div",Qi,[l("div",Ji,[e(at,{contentData:a(m),initialData:v.value,"onUpdate:inputValue":A,"onUpdate:selected":A},null,8,["contentData","initialData"])])]))}}),Zi=Ae(Xi,[["__scopeId","data-v-49fdce72"]]),eo={class:"container"},to=ce({__name:"PhysicalExamination",setup(n,{expose:r}){const c=Hn(),m=Je(),{physicalExam:v}=pe(c),{patient:f}=pe(m),A=i([]);He(()=>{A.value=c.getInitial(),u(),_()}),te(v,()=>{u(),_()},{deep:!0});const u=()=>{Nn(v.value,"Physical examination")=="No"?Ie(v.value,"Reason why physical examination not done","displayNone",!1):(Ie(v.value,"Reason why physical examination not done","displayNone",!0),Ie(v.value,"Reason why physical examination not done","selectedValue",""))},_=()=>{var W,y;const O=(y=(W=f.value)==null?void 0:W.personInformation)==null?void 0:y.gender;O=="M"&&(Ne(v.value,"Vulva examination","disabled",!0),Ne(v.value,"Visible bleeding","disabled",!0)),O=="F"&&(Ne(v.value,"Urethral meatus abnormal","disabled",!0),Ne(v.value,"Scrotal swelling","disabled",!0),Ne(v.value,"Tastes swelling","disabled",!0))},C=async()=>[...await Ht(v.value),...await ct(v.value),...await tt(v.value)];return r({onSubmit:async()=>{const O=await C();if(console.log("Selected physical data is",O),O.length===0){ke("No physical examination data to save");return}await we.addObsToEncounterPatient(O,de.PHYSICAL_EXAMINATION),ze("Physical examination saved successful")}}),(O,W)=>{const y=X("ion-card-content"),S=X("ion-card");return d(),k("div",eo,[e(S,{class:"section"},{default:t(()=>[e(y,null,{default:t(()=>[e(at,{contentData:a(v),initialData:A.value},null,8,["contentData","initialData"])]),_:1})]),_:1})])}}}),ao=Ae(to,[["__scopeId","data-v-f45150df"]]),no={key:0},so={class:"ion-padding",slot:"content"},io={class:"nav-buttons"},oo={class:"ion-padding",slot:"content"},lo={class:"nav-buttons"},ro={class:"ion-padding",slot:"content"},uo={class:"nav-buttons"},co={class:"ion-padding",slot:"content"},mo={class:"nav-buttons"},po={class:"ion-padding",slot:"content"},vo={class:"nav-buttons"},fo={class:"ion-padding",slot:"content"},go={class:"nav-buttons"},_o=ce({__name:"ClinicalAssessment",setup(n,{expose:r}){const c=i("loc"),m=i(0),v=i(!1),f=i(!1),A=new Pt,u=Je(),_=()=>{m.value++},C=i(null),p=i(null),O=i(null),W=i(null),y=i(null),S=i(null),G=[{id:"loc",label:"Level of consciousness",show:!0},{id:"pc",label:"Presenting complaints",show:!0},{id:"pbs",label:"Pregnancy and breastfeeding status",show:()=>A.isChildBearing()},{id:"pmh",label:"Past medical history",show:!0},{id:"al",label:"Allergies",show:!0},{id:"pe",label:"Physical examination",show:!0}];async function H(){const h=Te.getSessionDate(),s=[de.ASSESSMENT,de.PRESENTING_COMPLAINTS,de.PAST_MEDICAL_HISTORY,de.PHYSICAL_EXAMINATION,de.PREGNANCY_STATUS];let N=!1;for(const o of s)try{const g=await we.getObsByEncounterIdAndDate(o);if(g&&g.some(I=>I.obs_datetime?Le.toStandardHisFormat(I.obs_datetime)===Le.toStandardHisFormat(h):!1)){N=!0;break}}catch(g){console.error("Error checking observations for encounter type ".concat(o,":"),g)}v.value=N}He(H),te(()=>u.patient,H);const B=fe(()=>v.value),U=fe(()=>G.filter(h=>typeof h.show=="function"?h.show():h.show)),L=h=>{const s=G.find(N=>N.id===h);return s?typeof s.show=="function"?s.show():s.show:!1},z=h=>U.value.findIndex(s=>s.id===h),w=h=>{const s=z(h);s>0&&(c.value=U.value[s-1].id)},T=h=>{const N=z(h)+1;N<U.value.length?c.value=U.value[N].id:(c.value="",_())};return r({onSubmit:async()=>{const h=[{ref:C,name:"PresentingComplaints"},{ref:p,name:"LevelOfConsciousness"},{ref:O,name:"PastMedicalHistory"},{ref:y,name:"PregnancyBreastfeeding"},{ref:S,name:"PhysicalExamination"}];for(const s of h)if(s.ref.value&&typeof s.ref.value.onSubmit=="function")try{await s.ref.value.onSubmit()}catch(N){console.error("Error calling ".concat(s.name," onSubmit:"),N)}else console.log("".concat(s.name," component ref not available or no onSubmit method"))}}),(h,s)=>{const N=X("ion-toggle");return d(),k(ue,null,[B.value?(d(),k("div",no,[e(a(ve),{lines:"none"},{default:t(()=>[e(a(Ce),null,{default:t(()=>[...s[14]||(s[14]=[F("Switch between Capture Mode and Summary Mode",-1)])]),_:1}),e(N,{checked:f.value,onIonChange:s[0]||(s[0]=o=>f.value=o.detail.checked),slot:"end"},null,8,["checked"])]),_:1}),f.value?b("",!0):(d(),V(Yi,{key:m.value}))])):b("",!0),!B.value||f.value?(d(),V(a(ge),{key:1,style:{width:"100%"}},{default:t(()=>[e(a(ut),{value:c.value,"onUpdate:value":s[13]||(s[13]=o=>c.value=o),ref:"accordionGroup",class:"previousView"},{default:t(()=>[L("loc")?(d(),V(a(Re),{key:0,value:"loc",class:"_card"},{default:t(()=>[e(a(ve),{slot:"header",color:"light"},{default:t(()=>[e(a(Ce),{class:"previousLabel"},{default:t(()=>[...s[15]||(s[15]=[F("Level of consciousness",-1)])]),_:1})]),_:1}),l("div",so,[e(qn,{"is-active":c.value==="loc",ref_key:"levelOfConsciousnessFormRef",ref:p,onDataSaved:_},null,8,["is-active"]),l("div",io,[z("loc")>0?(d(),V(a(Oe),{key:0,fill:"outline",onClick:s[1]||(s[1]=Pe(o=>w("loc"),["stop"]))},{default:t(()=>[...s[16]||(s[16]=[F(" Back ",-1)])]),_:1})):b("",!0),e(a(Oe),{fill:"outline",onClick:s[2]||(s[2]=Pe(o=>T("loc"),["stop"]))},{default:t(()=>[F(M(z("loc")<U.value.length-1?"Next":"Finish"),1)]),_:1})])])]),_:1})):b("",!0),L("pc")?(d(),V(a(Re),{key:1,value:"pc",class:"_card"},{default:t(()=>[e(a(ve),{slot:"header",color:"light"},{default:t(()=>[e(a(Ce),{class:"previousLabel"},{default:t(()=>[...s[17]||(s[17]=[F("Presenting complaints",-1)])]),_:1})]),_:1}),l("div",oo,[e(Qs,{"is-active":c.value==="pc",onDataSaved:_,ref_key:"presentingComplaintsFormRef",ref:C},null,8,["is-active"]),l("div",lo,[z("pc")>0?(d(),V(a(Oe),{key:0,fill:"outline",onClick:s[3]||(s[3]=Pe(o=>w("pc"),["stop"]))},{default:t(()=>[...s[18]||(s[18]=[F(" Back ",-1)])]),_:1})):b("",!0),e(a(Oe),{fill:"outline",onClick:s[4]||(s[4]=Pe(o=>T("pc"),["stop"]))},{default:t(()=>[F(M(z("pc")<U.value.length-1?"Next":"Finish"),1)]),_:1})])])]),_:1})):b("",!0),L("pbs")?(d(),V(a(Re),{key:2,value:"pbs",class:"_card"},{default:t(()=>[e(a(ve),{slot:"header",color:"light"},{default:t(()=>[e(a(Ce),{class:"previousLabel"},{default:t(()=>[...s[19]||(s[19]=[F("Pregnancy and breastfeeding status",-1)])]),_:1})]),_:1}),l("div",ro,[e(Ki,{"is-active":c.value==="pbs",ref_key:"pregnancyBreastfeedingFormRef",ref:y,onDataSaved:_},null,8,["is-active"]),l("div",uo,[z("pbs")>0?(d(),V(a(Oe),{key:0,fill:"outline",onClick:s[5]||(s[5]=Pe(o=>w("pbs"),["stop"]))},{default:t(()=>[...s[20]||(s[20]=[F(" Back ",-1)])]),_:1})):b("",!0),e(a(Oe),{fill:"outline",onClick:s[6]||(s[6]=Pe(o=>T("pbs"),["stop"]))},{default:t(()=>[F(M(z("pbs")<U.value.length-1?"Next":"Finish"),1)]),_:1})])])]),_:1})):b("",!0),L("pmh")?(d(),V(a(Re),{key:3,value:"pmh",class:"_card"},{default:t(()=>[e(a(ve),{slot:"header",color:"light"},{default:t(()=>[e(a(Ce),{class:"previousLabel"},{default:t(()=>[...s[21]||(s[21]=[F("Past medical history",-1)])]),_:1})]),_:1}),l("div",co,[e(Zi,{"is-active":c.value==="pmh",ref_key:"pastMedicalHistoryFormRef",ref:O,onDataSaved:_},null,8,["is-active"]),l("div",mo,[z("pmh")>0?(d(),V(a(Oe),{key:0,fill:"outline",onClick:s[7]||(s[7]=Pe(o=>w("pmh"),["stop"]))},{default:t(()=>[...s[22]||(s[22]=[F(" Back ",-1)])]),_:1})):b("",!0),e(a(Oe),{fill:"outline",onClick:s[8]||(s[8]=Pe(o=>T("pmh"),["stop"]))},{default:t(()=>[F(M(z("pmh")<U.value.length-1?"Next":"Finish"),1)]),_:1})])])]),_:1})):b("",!0),L("al")?(d(),V(a(Re),{key:4,value:"al",class:"_card"},{default:t(()=>[e(a(ve),{slot:"header",color:"light"},{default:t(()=>[e(a(Ce),{class:"previousLabel"},{default:t(()=>[...s[23]||(s[23]=[F("Allergies",-1)])]),_:1})]),_:1}),l("div",po,[e(Kn,{"is-active":c.value==="al",ref_key:"allergiesFormRef",ref:W,onDataSaved:_},null,8,["is-active"]),l("div",vo,[z("al")>0?(d(),V(a(Oe),{key:0,fill:"outline",onClick:s[9]||(s[9]=Pe(o=>w("al"),["stop"]))},{default:t(()=>[...s[24]||(s[24]=[F(" Back ",-1)])]),_:1})):b("",!0),e(a(Oe),{fill:"outline",onClick:s[10]||(s[10]=Pe(o=>T("al"),["stop"]))},{default:t(()=>[F(M(z("al")<U.value.length-1?"Next":"Finish"),1)]),_:1})])])]),_:1})):b("",!0),L("pe")?(d(),V(a(Re),{key:5,value:"pe",class:"_card"},{default:t(()=>[e(a(ve),{slot:"header",color:"light"},{default:t(()=>[e(a(Ce),{class:"previousLabel"},{default:t(()=>[...s[25]||(s[25]=[F("Physical examination",-1)])]),_:1})]),_:1}),l("div",fo,[e(ao,{"is-active":c.value==="pe",ref_key:"physicalExaminationFormRef",ref:S,onDataSaved:_},null,8,["is-active"]),l("div",go,[z("pe")>0?(d(),V(a(Oe),{key:0,fill:"outline",onClick:s[11]||(s[11]=Pe(o=>w("pe"),["stop"]))},{default:t(()=>[...s[26]||(s[26]=[F(" Back ",-1)])]),_:1})):b("",!0),e(a(Oe),{fill:"outline",onClick:s[12]||(s[12]=Pe(o=>T("pe"),["stop"]))},{default:t(()=>[F(M(z("pe")<U.value.length-1?"Next":"Finish"),1)]),_:1})])])]),_:1})):b("",!0)]),_:1},8,["value"])]),_:1})):b("",!0)],64)}}}),vl=Ae(_o,[["__scopeId","data-v-597092a6"]]),ho={class:"allergies-section"},yo={class:"allergies-container"},bo={class:"medication-section"},Do={class:"medication-content"},Co={key:0,class:"add-medication-form"},So={class:"form-group"},Io={class:"option-label"},wo={key:0,class:"error-message"},ko={class:"form-row"},Ao={class:"form-group"},Oo={key:0,class:"error-message"},Po={class:"form-group"},Eo={key:0,class:"error-message"},To={class:"form-group"},Ho={key:0,class:"error-message"},No={class:"action-buttons"},Vo={class:"notes-section"},xo={class:"notes-content"},Mo={class:"notes-input-container"},$o={class:"ion-padding",slot:"content"},Lo={class:"notes-timeline"},Ro={class:"note-date"},Fo={class:"note-content"},Bo={class:"ion-padding",slot:"content"},Uo={class:"note-date"},qo={class:"note-content"},Go=ce({watch:{},name:"xxxComponent"}),Wo=ce({...Go,setup(n){const r=Ve,c=ds,m=i(!1),v=i(!1),f=i(!0),A=i(0),u=i(""),_=i(!1),C=i(),p=i(!1),O=i(""),W=i(""),y=i(""),S=i(""),G=i(""),H=i(""),B="Add new medication",U=Ye(),L=Et(),z=fe(()=>L.selectedMedicalAllergiesList),w=fe(()=>U.selectedMedicalDrugsList),T=fe(()=>U.partialOPDdrugList),q=fe(()=>U.nonPharmalogicalTherapyAndOtherNotes),h=["first","second","third"],s=i(),N=i(),o=i(),g=i(!1),I=i(!1),K=i("Show more notes"),ne=i(),De=i(),Y=i(),Se=fe(()=>U.editingDrugItem),Me=i("Select a route"),P=i(!1),R=i("Select frequency"),Q=i(!1),ie=i("Select drug"),Fe=i(!1),he=i(),ye=i(),$e=i(),Be=i([]),x=i([{concept_id:11797,name:"Buccal",concept_name_id:null,id:1769},{concept_id:11794,name:"Intradermal",concept_name_id:null,id:6284},{concept_id:11795,name:"Intramuscular (IM)",concept_name_id:null,id:6285},{concept_id:11799,name:"Intraosseous",concept_name_id:null,id:6286},{concept_id:11793,name:"Intravenous (IV)",concept_name_id:null,id:6295},{concept_id:3327,name:"Oral",concept_name_id:null,id:8686},{concept_id:11800,name:"Other method of prescription",concept_name_id:null,id:8920},{concept_id:11792,name:"Rectally",concept_name_id:null,id:10785},{concept_id:11798,name:"Subcutaneous",concept_name_id:null,id:12342},{concept_id:11796,name:"Sublingual",concept_name_id:null,id:12344},{concept_id:11792,name:"Rectally",concept_name_id:null,id:14078},{concept_id:11793,name:"Intravenous (IV)",concept_name_id:null,id:14079},{concept_id:11794,name:"Intradermal",concept_name_id:null,id:14080},{concept_id:11795,name:"Intramuscular (IM)",concept_name_id:null,id:14081},{concept_id:11796,name:"Sublingual",concept_name_id:null,id:14082},{concept_id:11797,name:"Buccal",concept_name_id:null,id:14083},{concept_id:11798,name:"Subcutaneous",concept_name_id:null,id:14084},{concept_id:11799,name:"Intraosseous",concept_name_id:null,id:14085},{concept_id:11800,name:"Other method of prescription",concept_name_id:null,id:14086}]),j=fe(()=>Be.value.length?Be.value:x.value);function se(E){he.value=E}async function me(){return await cs()}async function ee(E=5,D=1e3){let $=0;for(;$<E&&(Be.value=await me(),!(Be.value.length>0));)$++,await new Promise(Z=>setTimeout(Z,D));Be.value.length===0&&console.warn("Failed to fetch route list after maximum retries.")}He(async()=>{const E=new ns,{previousDrugPrescriptions:D,previousClinicalNotes:$,previousDrugAllergies:Z}=await E.getPatientEncounters();s.value=D,N.value=Object.entries($)[0];const[,...le]=Object.entries($);o.value=le,ne.value=Object.entries(Z)[0];const[,...be]=Object.entries(Z);De.value=be,await ee()}),te(()=>W.value,async E=>{_a()}),te(()=>y.value,async E=>{Nt()});function re(){if(Ge.isEmpty(he.value)==!0)return P.value=!0,!1;if(Ge.isEmpty(he.value)==!1)return P.value=!1,!0}function oe(){if(Ge.isEmpty(ye.value)==!0)return Q.value=!0,!1;if(Ge.isEmpty(ye.value)==!1)return Q.value=!1,!0}function Ue(){if(Ge.isEmpty($e.value)==!0)return Fe.value=!0,!1;if(Ge.isEmpty($e.value)==!1)return Fe.value=!1,!0}function mt(){f.value=!f.value,m.value=!0,_.value=!1,p.value=!1}async function _a(){return Mt(W.value)?_.value=!1:(u.value="please enter a number",_.value=!0),_.value}async function Nt(){return Mt(y.value)?p.value=!1:(C.value="please enter a number",p.value=!0),p.value}async function Vt(){const E=await Nt(),D=oe(),$=Ue(),Z=re();return!E&&D==!0&&$==!0&&Z==!0}function ha(E){ye.value=E}async function xt(){try{const E=()=>Y.value.dose_strength!=null&&Y.value.dose_strength?Math.trunc(Y.value.dose_strength):1;if(Se.value!==null){if(!await Vt()){ke("Please enter correct data values",4e3);return}const $=Te.getSessionDate(),Z=$t($,parseInt(y.value));let le=!1;pt(Y.value)==!0&&(le=!0);const be={drugName:O.value,dose:E(),frequency:ye.value.label,frequency_code:ye.value.code,duration:y.value,prescription:Z,drug_id:H.value,units:G.value,route_concept_id:he.value.concept_id,route_name:he.value.name,highlightbackground:le},vt=Ye();console.log(vt.setSelectedMedicalDrugsList([be])),vt.editingDrugItem=null,f.value=!0}else{if(!await Vt()){ke("Please enter correct data values",4e3);return}Aa();const $=Te.getSessionDate(),Z=$t($,parseInt(y.value));let le=!1;pt(Y.value)==!0&&(le=!0);const be={drugName:O.value,dose:E(),frequency:ye.value.label,frequency_code:ye.value.code,duration:y.value,prescription:Z,drug_id:H.value,units:G.value,route_concept_id:he.value.concept_id,route_name:he.value.name,highlightbackground:le};Ye().setSelectedMedicalDrugsList([be])}H.value="",O.value="",W.value="",ye.value=null,y.value="",S.value="",A.value++,$e.value=null,he.value=null}catch(E){console.error("Error saving data:",E)}}async function ya(E){const D=E,le=await xn.getOfflineOPDDrugs({name:D,page:1,page_size:10});le.map(be=>({label:be.name,value:be.name,other:be})),U.setPartialOPDdrugList(le)}function pt(E){const D=[];return z.value.forEach(Z=>{Z.selected&&D.push(Z.concept_id)}),ba([E],D)==!0?(ke("Client is allergic to the selected medication",4e6),!0):!1}function ba(E,D){try{return E.some($=>D.includes($.concept_id))}catch($){return!1}}function Da(E){E&&(O.value=E.name,H.value=E.drug_id,G.value=E.units,Y.value=E,pt(E))}function Ca(E){const D=w.value[E],$=Ye();$.removeDrugById(D.drug_id),$.editingDrugItem=D,H.value="",O.value="",W.value="",ye.value=null,y.value="",S.value="",$e.value=null,he.value=null,H.value=D.drug_id,O.value=D.drugName,W.value=D.dose,ye.value={label:D.frequency,code:D.frequency_code},y.value=D.duration,S.value=D.prescription;const Z=T.value.find(le=>le.name===D.drugName);Z&&($e.value=Z),he.value={concept_id:D.route_concept_id,name:D.route_name},f.value=!1,A.value++}function Sa(){if(Se.value!==null){H.value="",O.value="",W.value="",ye.value=null,y.value="",S.value="",$e.value=null,he.value=null;const E=Ye();E.setSelectedMedicalDrugsList([Se.value]),E.editingDrugItem=null}f.value=!0,A.value++}function Ia(E){w.value.splice(E,1),A.value++,ke("you have removed a drug from list",6e3)}function wa(E){let D=E.target.value;ka(D)}function ka(E){Ye().setNonPharmalogicalTherapyAndOtherNotes(E)}function Mt(E){return/^[0-9]+$/.test(E)}function $t(E,D){const $=new Date(E);$.setDate($.getDate()+D);const Z=$.getFullYear(),le=String($.getMonth()+1).padStart(2,"0"),be=String($.getDate()).padStart(2,"0");return"".concat(Z,"-").concat(le,"-").concat(be)}function Aa(){m.value=!1,v.value=!0,f.value=!0}function Oa(E){h.filter($=>$!==E.detail.value);const D=E.detail.value;D!==void 0?D=="third"&&(K.value="Show less notes",I.value=!g.value):(K.value="Show more notes",I.value=!g.value)}function Pa(E){return E[1]}function Ea(E){(E.key==="Enter"||E.key==="ArrowDown")&&(E.preventDefault(),xt())}const je=fe(()=>[{showAddItemButton:!0,addItemButton:!0,name:Se.value!==null?"Update":"ADD",fn:xt},{showAddItemButton:!0,addItemButton:!0,name:"CANCEL",fn:Ta}]),Ta=async()=>{pa(Vn,{class:"otherVitalsModal"},!0,{message:"Are you sure you want to cancle?"},{cancel:Z=>{},confirm:async Z=>{Z.detail==!0&&Sa()}})};return(E,D)=>(d(),V(a(dt),null,{default:t(()=>[l("div",ho,[l("div",yo,[e(ga)])]),l("div",bo,[e(a(ve),{lines:"none",class:"section-header"},{default:t(()=>[e(a(ot),{icon:a(Qe),class:"section-icon"},null,8,["icon"]),e(a(Ce),{class:"section-title",style:{"margin-top":"12px"}},{default:t(()=>[...D[9]||(D[9]=[F("Medication",-1)])]),_:1})]),_:1}),l("div",Do,[(d(),V(Qn,{_selectedMedicalDrugsList:w.value,onEditItem:Ca,onRemoveItem:Ia,key:A.value,class:"medication-list"},null,8,["_selectedMedicalDrugsList"])),f.value?b("",!0):(d(),k("div",Co,[l("div",So,[D[10]||(D[10]=l("label",{class:"input-label"},"Medication",-1)),e(a(et),{modelValue:$e.value,"onUpdate:modelValue":[D[0]||(D[0]=$=>$e.value=$),D[1]||(D[1]=$=>Da($))],options:T.value,searchable:!0,"close-on-select":!0,"show-labels":!1,placeholder:"Select medication",label:"name","track-by":"drug_id",onSearchChange:D[2]||(D[2]=$=>ya($))},{option:t($=>[l("div",Io,M($.option.name),1)]),_:1},8,["modelValue","options"]),Fe.value?(d(),k("div",wo,M(ie.value),1)):b("",!0)]),l("div",ko,[l("div",Ao,[D[11]||(D[11]=l("label",{class:"input-label"},"Route",-1)),e(a(et),{modelValue:he.value,"onUpdate:modelValue":[D[3]||(D[3]=$=>he.value=$),D[4]||(D[4]=$=>se($))],options:j.value,searchable:!0,"close-on-select":!0,"show-labels":!1,placeholder:"Select route",label:"name","track-by":"concept_id",disabled:!1},null,8,["modelValue","options"]),P.value?(d(),k("div",Oo,M(Me.value),1)):b("",!0)]),l("div",Po,[D[12]||(D[12]=l("label",{class:"input-label"},"Frequency",-1)),e(a(et),{modelValue:ye.value,"onUpdate:modelValue":[D[5]||(D[5]=$=>ye.value=$),D[6]||(D[6]=$=>ha($))],options:a(c),searchable:!0,"close-on-select":!0,"show-labels":!1,placeholder:"Select frequency",label:"label","track-by":"code"},null,8,["modelValue","options"]),Q.value?(d(),k("div",Eo,M(R.value),1)):b("",!0)]),l("div",To,[D[13]||(D[13]=l("label",{class:"input-label"},"Duration (days)",-1)),e(a(rt),{modelValue:y.value,"onUpdate:modelValue":D[7]||(D[7]=$=>y.value=$),type:"number",inputmode:"numeric",pattern:"[0-9]*",fill:"outline",placeholder:"Enter duration",onKeydown:Ea},null,8,["modelValue"]),p.value?(d(),k("div",Ho,M(C.value),1)):b("",!0)])]),l("div",No,[je.value[0].addItemButton?(d(),V(xe,{key:0,name:je.value[0].name,icon:a(oa),"onClicked:btn":je.value[0].fn,class:"save-button"},null,8,["name","icon","onClicked:btn"])):b("",!0),je.value[1].addItemButton?(d(),V(xe,{key:1,name:je.value[1].name,icon:a(At),"onClicked:btn":je.value[1].fn,class:"cancel-button"},null,8,["name","icon","onClicked:btn"])):b("",!0)])])),f.value?(d(),V(xe,{key:1,name:B,icon:a(lt),fontWeight:"600","onClicked:btn":mt,class:"add-new-button"},null,8,["icon"])):b("",!0)])]),l("div",Vo,[e(a(ve),{lines:"none",class:"section-header"},{default:t(()=>[e(a(ot),{icon:a(nn),class:"section-icon"},null,8,["icon"]),e(a(Ce),{class:"section-title"},{default:t(()=>[...D[14]||(D[14]=[F("Non-pharmacological therapy and other notes",-1)])]),_:1})]),_:1}),l("div",xo,[e(Jn,{class:"intervention-component"}),l("div",Mo,[e(a(ve),{class:"notes-input-item"},{default:t(()=>[e(a(ot),{slot:"start",icon:a(r).editPen,class:"edit-icon","aria-hidden":"true"},null,8,["icon"]),e(a(sn),{modelValue:q.value,"onUpdate:modelValue":D[8]||(D[8]=$=>q.value=$),onIonInput:wa,placeholder:"Enter notes here...","auto-grow":!0,class:"notes-textarea",fill:"outline",style:{"--padding-start":"16px"}},null,8,["modelValue"])]),_:1})]),e(a(ut),{ref:"accordionGroup",class:"previous-notes"},{default:t(()=>[e(a(Re),{value:"fourth","toggle-icon-slot":"start"},{default:t(()=>[e(a(ve),{slot:"header",color:"light",class:"previous-notes-header"},{default:t(()=>[e(a(Ce),null,{default:t(()=>[...D[15]||(D[15]=[F("Previous visit notes",-1)])]),_:1})]),_:1}),l("div",$o,[l("div",Lo,[E.index===1?(d(!0),k(ue,{key:0},Ee(N.value,($,Z)=>(d(),k("div",{key:Z,class:"note-entry"},[(d(!0),k(ue,null,Ee($,(le,be)=>(d(),k("div",{key:be},[l("div",Ro,M(le.date),1),l("div",Fo,M(le.notes),1)]))),128))]))),128)):b("",!0),e(a(ut),{onIonChange:Oa},{default:t(()=>[e(a(Re),{value:"third","toggle-icon-slot":"start"},{default:t(()=>[e(a(ve),{slot:"header",color:"light",class:"show-more-header"},{default:t(()=>[e(a(Ce),{color:"primary"},{default:t(()=>[F(M(K.value),1)]),_:1})]),_:1}),l("div",Bo,[(d(!0),k(ue,null,Ee(o.value,($,Z)=>(d(),k("div",{key:Z,class:"note-entry"},[(d(!0),k(ue,null,Ee(Pa($),(le,be)=>(d(),k("div",{key:be},[l("div",Uo,M(le.date),1),l("div",qo,M(le.notes),1)]))),128))]))),128))])]),_:1})]),_:1})])])]),_:1})]),_:1},512)])])]),_:1}))}}),fl=Ae(Wo,[["__scopeId","data-v-928c62f1"]]),zo=ce({name:"xxxComponent"}),Yo=ce({...zo,emits:["dataSaved"],setup(n,{emit:r}){const c=i(),m=i("gurdian phone number");i(!0),i(!0);const v=i(!0),f=i(),A=i();He(async()=>{De()});const u=[{placeHolder:{default:"Enter time of death if known"},property_name:"timeOfDeath",dataHandler:U,dataValue:i(),show_error:i(!1),error_message:"Time required",type:"time",skip_validation:!1},{placeHolder:{default:"Enter time arrived"},property_name:"timeArrived",dataHandler:L,dataValue:i(),show_error:i(!1),error_message:"Time required",type:"time",skip_validation:!1},{placeHolder:{default:"Enter time confirming death"},property_name:"timeOfDeathConfirmation",dataHandler:z,dataValue:i(),show_error:i(!1),error_message:"Time required",skip_validation:!1}],_=[{placeHolder:{default:"Enter date of death"},property_name:"dateOfDeath",dataHandler:w,dataValue:i(),show_error:i(!1),error_message:"Date required",type:"date",skip_validation:!1},{placeHolder:{default:"Enter date arrived"},property_name:"dateArrived",dataHandler:T,dataValue:i(),show_error:i(!1),error_message:"Date required",type:"date",skip_validation:!1},{placeHolder:{default:"Enter date confirming death"},property_name:"dateOfDeathConfirmation",dataHandler:q,dataValue:i(),show_error:i(!1),error_message:"Date required",type:"date",skip_validation:!1}],C=[{lblTxt:"Was the individual pregnant at the time of death?",value:i(!1),disable_checkbox:i(!0)}],p=[{placeHolder:"Enter place of death",property_name:"placeOfDeath",dataHandler:h,dataValue:i(),show_error:i(!1),error_message:"Input required, Only letters allowed",type:"text",skip_validation:!1},{placeHolder:"Enter name of guardian",property_name:"nameOfGuardian",dataHandler:s,dataValue:i(),show_error:i(!1),error_message:"Input required, Only letters allowed",type:"text",skip_validation:!1},{placeHolder:"Enter name of person confirming death",property_name:"nameOfPersonConfirmindDeath",dataHandler:N,dataValue:i(),show_error:i(!1),error_message:"Input required, Only letters allowed",type:"text",skip_validation:!1},{placeHolder:"Enter position of the person confirming death",property_name:"positionOfthePersonConfirmingDeath",dataHandler:o,dataValue:i(),show_error:i(!1),error_message:"Input required, Only letters allowed",type:"text",skip_validation:!1},{placeHolder:"Enter medical council registration number of the person confirming death",property_name:"medicalConcilRegistrationNumberOfThePersonConfirmingDeath",dataHandler:g,dataValue:i(),show_error:i(!1),error_message:"Input required, Only letters and numbers are allowed",type:"alphanumeric",skip_validation:!1},{placeHolder:"Other (specify)",property_name:"otherNotes",dataHandler:I,dataValue:i(),show_error:i(!1),error_message:"Input required, Only letters allowed",dissabled:v.value,type:"text",skip_validation:!0}],O=[{showAddItemButton:!0,addItemButton:!0,name:"save",btnFill:"clear",fn:Y},{showAddItemButton:!0,addItemButton:!0,name:"cancel",btnFill:"clear",fn:G}],W=i([{id:1,name:"Natural",selected:!1},{id:2,name:"Accident",selected:!1},{id:3,name:"Homicide",selected:!1},{id:4,name:"Suicide",selected:!1},{id:5,name:"Pending investigation",selected:!1},{id:6,name:"Could not be determined",selected:!1},{id:7,name:"Other - specify",selected:!1}]),y=i([{id:1,name:"Motor vehicle (passenger)",selected:!1},{id:2,name:"Motor vehicle (pedestrian)",selected:!1},{id:3,name:"Drowning",selected:!1},{id:4,name:"Other - specify",selected:!1}]),S=[{multi_Selection:!1,manner_of_death_Selection_value:i(),show_list_label:!0,unqueId:"qwerty",name_of_list:"Manner of death ",property_name:"mannerOfDeath",placeHolder:"Choose one",items:W.value,listUpdatedFN:K,listFilteredFN:()=>{},use_internal_filter:!0,disabled:i(!1),show_error:i(!1),error_message:"selection required"},{multi_Selection:!1,show_list_label:!0,unqueId:"qwerty1hjkn",name_of_list:"How did it occur?",property_name:"howDiditOccur",placeHolder:"Choose one",items:y.value,listUpdatedFN:ne,listFilteredFN:()=>{},use_internal_filter:!0,disabled:i(!0),show_error:i(!1),error_message:"selection required"}];function G(){B()}const H=r;function B(P={dataSaved:!0}){H("dataSaved",P)}function U(P){u[0].dataValue.value=P}function L(P){u[1].dataValue.value=P}function z(P){u[2].dataValue.value=P}function w(P){const R={day:P.value.day,month:P.value.month,year:P.value.year,formattedDate:P.value.formattedDate};_[0].dataValue.value=R}function T(P){const R={day:P.value.day,month:P.value.month,year:P.value.year,formattedDate:P.value.formattedDate};_[1].dataValue.value=R,console.log(_[2].dataValue.value)}function q(P){const R={day:P.value.day,month:P.value.month,year:P.value.year,formattedDate:P.value.formattedDate};_[2].dataValue.value=R,console.log(_[2].dataValue.value)}function h(P){const R=P.target.value;p[0].dataValue.value=R}function s(P){const R=P.target.value;p[1].dataValue.value=R}function N(P){const R=P.target.value;p[2].dataValue.value=R}function o(P){const R=P.target.value;p[3].dataValue.value=R}function g(P){const R=P.target.value;p[4].dataValue.value=R}function I(P){const R=P.target.value;p[5].dataValue.value=R}function K(P){W.value.forEach(Q=>Q.selected=!1);const R=W.value.find(Q=>Q.id==P.id);S[1].disabled.value=P.name!="Accident",R.selected=!0}function ne(P){console.log("listUpdated",P),y.value.forEach(Q=>Q.selected=!1);const R=y.value.find(Q=>Q.id==P.id);R.selected=!0}function De(){const R=new Pt().isChildBearing;R==!0&&(C[0].disable_checkbox.value=!1),R==!1&&(C[0].disable_checkbox.value=!0)}function Y(){yt(p),yt(_),yt(u),Se();const P=Ge.merge(bt(p),bt(_),bt(u),Me(S[0]),Me(S[1]));console.log(P)}function Se(){const P=W.value.filter(R=>R.selected);if(P.length==0)S[0].show_error.value=!0;else if(S[0].show_error.value=!1,P[0].name=="Accident"){const R=y.value.filter(Q=>Q.selected);S[1].show_error.value=R.length==0}}function Me(P){const R=[];let Q={};return P.items.forEach(ie=>{ie.selected==!0&&R.push({property_name:P.property_name,name:ie.name})}),R.length>0&&(Q[R[0].property_name]=R[0].name),Q}return(P,R)=>{const Q=X("ion-label");return d(),k(ue,null,[e(a(ge),{class:"checkbox_content md"},{default:t(()=>[e(a(J),null,{default:t(()=>[e(qe,{placeholder:p[0].placeHolder,icon:a(sa),inputValue:p[0].dataValue.value,"onUpdate:inputValue":p[0].dataHandler},null,8,["placeholder","icon","inputValue","onUpdate:inputValue"]),l("div",null,[p[0].show_error.value?(d(),V(Q,{key:0,class:"error-label"},{default:t(()=>[F(M(p[0].error_message),1)]),_:1})):b("",!0)])]),_:1}),e(a(J),null,{default:t(()=>[e(ea,{place_holder:_[0].placeHolder,onDateUpDated:_[0].dataHandler,date_prop:""},null,8,["place_holder","onDateUpDated"]),l("div",null,[_[0].show_error.value?(d(),V(Q,{key:0,class:"error-label"},{default:t(()=>[F(M(_[0].error_message),1)]),_:1})):b("",!0)])]),_:1})]),_:1}),e(a(ge),null,{default:t(()=>[e(a(J),null,{default:t(()=>[e(Ct,{place_holder:u[0].placeHolder,onTimeUpDated:u[0].dataHandler,time_prop:""},null,8,["place_holder","onTimeUpDated"]),l("div",null,[u[0].show_error.value?(d(),V(Q,{key:0,class:"error-label"},{default:t(()=>[F(M(u[0].error_message),1)]),_:1})):b("",!0)])]),_:1}),e(a(J))]),_:1}),e(a(ge),{class:"checkbox_content md"},{default:t(()=>[e(a(J),null,{default:t(()=>[e(qe,{placeholder:p[1].placeHolder,icon:a(jt),inputValue:p[1].dataValue.value,"onUpdate:inputValue":p[1].dataHandler},null,8,["placeholder","icon","inputValue","onUpdate:inputValue"]),l("div",null,[p[1].show_error.value?(d(),V(Q,{key:0,class:"error-label"},{default:t(()=>[F(M(p[1].error_message),1)]),_:1})):b("",!0)])]),_:1}),e(a(J),null,{default:t(()=>[e(a(na),{value:C[0].value,alignment:"start",class:"ion-lblCls",disabled:C[0].disable_checkbox.value},{default:t(()=>[F(M(C[0].lblTxt),1)]),_:1},8,["value","disabled"])]),_:1})]),_:1}),e(a(ge),null,{default:t(()=>[e(a(J),null,{default:t(()=>[e(qe,{placeholder:m.value,icon:a(on),inputValue:c.value},null,8,["placeholder","icon","inputValue"])]),_:1}),e(a(J))]),_:1}),e(a(ge),null,{default:t(()=>[e(a(J),null,{default:t(()=>[e(ea,{place_holder:_[1].placeHolder,onDateUpDated:_[1].dataHandler,date_prop:""},null,8,["place_holder","onDateUpDated"]),l("div",null,[_[1].show_error.value?(d(),V(Q,{key:0,class:"error-label"},{default:t(()=>[F(M(_[1].error_message),1)]),_:1})):b("",!0)])]),_:1}),e(a(J),null,{default:t(()=>[e(Ct,{place_holder:u[1].placeHolder,onTimeUpDated:u[1].dataHandler,time_prop:""},null,8,["place_holder","onTimeUpDated"]),l("div",null,[u[1].show_error.value?(d(),V(Q,{key:0,class:"error-label"},{default:t(()=>[F(M(u[1].error_message),1)]),_:1})):b("",!0)])]),_:1})]),_:1}),e(a(ge),null,{default:t(()=>[e(a(J),null,{default:t(()=>[e(a(et),{modelValue:f.value,"onUpdate:modelValue":[R[0]||(R[0]=ie=>f.value=ie),R[1]||(R[1]=ie=>K(ie))],multiple:!1,taggable:!1,"hide-selected":!0,"close-on-select":!0,openDirection:"bottom","tag-placeholder":"Manner of death",placeholder:"Manner of death",selectLabel:"",label:"name",searchable:!0,"track-by":"id",options:W.value},null,8,["modelValue","options"]),l("div",null,[S[0].show_error.value?(d(),V(Q,{key:0,class:"error-label"},{default:t(()=>[F(M(S[0].error_message),1)]),_:1})):b("",!0)])]),_:1}),e(a(J),null,{default:t(()=>[e(a(et),{modelValue:A.value,"onUpdate:modelValue":[R[2]||(R[2]=ie=>A.value=ie),R[3]||(R[3]=ie=>ne(ie))],multiple:!1,taggable:!1,"hide-selected":!0,"close-on-select":!0,openDirection:"bottom","tag-placeholder":"How did it occur?",placeholder:"How did it occur?",selectLabel:"",label:"name",disabled:S[1].disabled.value,searchable:!0,"track-by":"id",options:y.value},null,8,["modelValue","disabled","options"]),l("div",null,[S[1].show_error.value?(d(),V(Q,{key:0,class:"error-label"},{default:t(()=>[F(M(S[1].error_message),1)]),_:1})):b("",!0)])]),_:1})]),_:1}),e(a(ge),null,{default:t(()=>[e(a(J),null,{default:t(()=>[e(qe,{placeholder:p[5].placeHolder,icon:a(Kt),inputValue:p[5].dataValue.value,disabled:v.value,"onUpdate:inputValue":p[5].dataHandler},null,8,["placeholder","icon","inputValue","disabled","onUpdate:inputValue"]),l("div",null,[p[5].show_error.value?(d(),V(Q,{key:0,class:"error-label"},{default:t(()=>[F(M(p[5].error_message),1)]),_:1})):b("",!0)])]),_:1})]),_:1}),e(a(ge),null,{default:t(()=>[e(a(J),null,{default:t(()=>[e(Ct,{place_holder:u[2].placeHolder,onTimeUpDated:u[2].dataHandler,time_prop:""},null,8,["place_holder","onTimeUpDated"]),l("div",null,[u[2].show_error.value?(d(),V(Q,{key:0,class:"error-label"},{default:t(()=>[F(M(u[2].error_message),1)]),_:1})):b("",!0)])]),_:1}),e(a(J),null,{default:t(()=>[e(qe,{placeholder:p[2].placeHolder,icon:a(jt),inputValue:p[2].dataValue.value,"onUpdate:inputValue":p[2].dataHandler},null,8,["placeholder","icon","inputValue","onUpdate:inputValue"]),l("div",null,[p[2].show_error.value?(d(),V(Q,{key:0,class:"error-label"},{default:t(()=>[F(M(p[2].error_message),1)]),_:1})):b("",!0)])]),_:1})]),_:1}),e(a(ge),null,{default:t(()=>[e(a(J),null,{default:t(()=>[e(qe,{placeholder:p[3].placeHolder,icon:a(Qe),inputValue:p[3].dataValue.value,"onUpdate:inputValue":p[3].dataHandler},null,8,["placeholder","icon","inputValue","onUpdate:inputValue"]),l("div",null,[p[3].show_error.value?(d(),V(Q,{key:0,class:"error-label"},{default:t(()=>[F(M(p[3].error_message),1)]),_:1})):b("",!0)])]),_:1}),e(a(J),null,{default:t(()=>[e(qe,{placeholder:p[4].placeHolder,icon:a(Kt),inputValue:p[4].dataValue.value,"onUpdate:inputValue":p[4].dataHandler},null,8,["placeholder","icon","inputValue","onUpdate:inputValue"]),l("div",null,[p[4].show_error.value?(d(),V(Q,{key:0,class:"error-label"},{default:t(()=>[F(M(p[4].error_message),1)]),_:1})):b("",!0)])]),_:1})]),_:1}),(d(),V(a(ge),{key:0,class:"spc_btwn"},{default:t(()=>[O[0].addItemButton?(d(),V(xe,{key:0,name:O[0].name,fill:O[0].btnFill,icon:a(oa),"onClicked:btn":O[0].fn},null,8,["name","fill","icon","onClicked:btn"])):b("",!0),O[1].addItemButton?(d(),V(xe,{key:1,name:O[1].name,fill:O[1].btnFill,icon:a(At),"onClicked:btn":O[1].fn},null,8,["name","fill","icon","onClicked:btn"])):b("",!0)]),_:1}))],64)}}}),jo=Ae(Yo,[["__scopeId","data-v-0aad2f08"]]),Ko={class:"dash_box"},Qo={key:1},Jo=ce({name:"xxxComponent"}),Xo=ce({...Jo,setup(n){const r=i("No outcome created yet"),c=i(!1),m=i("please select a type"),v=i(!0),f=i(""),A=i(!0),u=i(!1),_=ma(),C=fe(()=>_.outcomes),p=i(!1),O=i(!1),W=i(!1),y=i(!1),S=i(!1),G=i(!1),H=i([{name:"Admitted for short stay",selected:!1},{name:"Referred out",selected:!1},{name:"Discharged Home",selected:!1},{name:"Send to Another Clinic",selected:!1}]),B=[{multi_Selection:!1,show_list_label:!0,unqueId:"qwerty2",name_of_list:"Add new outcome",placeHolder:"Choose one",items:H.value,listUpdatedFN:U,listFilteredFN:()=>{},use_internal_filter:!0,disabled:i(!1)}];function U(s){H.value=s,H.value.forEach(N=>{N.selected==!0&&(f.value=N.name)})}He(async()=>{z()}),te(()=>f.value,async s=>{p.value==!0?p.value=!1:q()}),te(()=>C.value.length,async s=>{z()});function L(){H.value.forEach(s=>{s.selected=!1}),f.value=""}function z(){C.value.length>0?A.value=!1:C.value.length==0&&u.value==!1&&(A.value=!0)}function w(s){C.value.splice(s,1)}const T=s=>{};async function q(s=!0){const N=f.value;console.log(N),f.value=N;const o=f.value;o==H.value[0].name?W.value=!0:W.value=!1,o==H.value[1].name?(y.value=!0,console.log("show_discharged_options is set to true")):y.value=!1,o==H.value[2].name?(S.value=!0,console.log("show_discharged_options is set to true")):S.value=!1,o==H.value[3].name?G.value=!0:G.value=!1}function h(){O.value=!1,W.value=!1,y.value=!1,S.value=!1,L()}return(s,N)=>{const o=X("ion-row");return d(),V(a(dt),null,{default:t(()=>[e(o,null,{default:t(()=>[e(a(J),null,{default:t(()=>[(d(),V(is,{key:0,"onUpdate:removeItem":w,"onUpdate:editItem":T,displayData:C.value},null,8,["displayData"]))]),_:1})]),_:1}),A.value?(d(),V(o,{key:0},{default:t(()=>[l("span",Ko,M(r.value),1)]),_:1})):b("",!0),v.value?(d(),k("div",Qo,[e(o,null,{default:t(()=>[e(a(J),null,{default:t(()=>[e(Mn,{multiSelection:B[0].multi_Selection,show_label:B[0].show_list_label,uniqueId:B[0].unqueId,name_of_list:B[0].name_of_list,choose_place_holder:B[0].placeHolder,"items_-list":B[0].items,use_internal_filter:B[0].use_internal_filter,disabled:B[0].disabled.value,onItemListUpDated:B[0].listUpdatedFN,onItemListFiltered:B[0].listFilteredFN},null,8,["multiSelection","show_label","uniqueId","name_of_list","choose_place_holder","items_-list","use_internal_filter","disabled","onItemListUpDated","onItemListFiltered"]),l("div",null,[c.value?(d(),V(a(Ce),{key:0,class:"error-label"},{default:t(()=>[F(M(m.value),1)]),_:1})):b("",!0)])]),_:1})]),_:1})])):b("",!0),W.value?(d(),V(os,{key:2,onDataSaved:h,selected_ward_prop:"",admitted_other_props:""})):b("",!0),y.value?(d(),V(ls,{key:3,onDataSaved:h,selected_referral_data:"",selected_other_referral_data:""})):b("",!0),S.value?(d(),V(rs,{key:4,onDataSaved:h,selected_discharged_prop:"",selected_discharged_data:""})):b("",!0),O.value?(d(),V(jo,{key:5,onDataSaved:h})):b("",!0),G.value?(d(),V(us,{key:6,onDataSaved:h})):b("",!0)]),_:1})}}}),gl=Ae(Xo,[["__scopeId","data-v-fc637de7"]]);export{vl as C,gl as O,Qs as P,Ki as _,ao as a,fl as b};
