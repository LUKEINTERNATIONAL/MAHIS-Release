const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./LabOrdersList-s1IhDS17.js","./vendor-BTebhqHt.js","./lodash-NJiRuGo9.js","../vendor.Dm4sm59p.css","../index-DBQF-8Xn.js","./apexcharts-no8IW45T.js","../index.C-kI_7Qq.css","./EnterLabResultsModal-DctlDkms.js","../EnterLabResultsModal.CFABaZbT.css","./BasicForm-7DaBPuA7.js","./DateInputField-0lrp9UXU.js","../DateInputField.YUpPNB6n.css","../BasicForm.CS8soES6.css","./useUserActivities-60ApcIW0.js","../LabOrdersList.TfoJFXpV.css","./DiagnosesHistory-C6gkc7KD.js","../DiagnosesHistory.BEA7zPYa.css","./AllergiesHistory-DbNqct_r.js","../AllergiesHistory.BdLtFHIK.css","./MedicationsHistory-C9UY7swr.js","../MedicationsHistory.DAk17UPz.css","./VisitsHistory-DIpUTIgO.js","../VisitsHistory.Dg4yoNiI.css","./VitalsMeasurementsSummary-C8hZ3met.js","../VitalsMeasurementsSummary.Bb3yaWqr.css"])))=>i.map(i=>d[i]);
import{d as de,b2 as Z,cr as ue,r as w,c as ie,w as G,a as fe,e as g,f as p,k as n,O as W,u as e,b7 as ge,J as a,l as o,ab as De,m as b,ac as h,ad as f,bw as le,aV as be,L as E,d_ as Ce,p as xe,d1 as ke,K as C,Q as d,dp as Ie,av as he,df as we,dg as V,a2 as $,cN as S,b6 as He,ah as Ve,a6 as re,aD as $e,aF as Ne,ae as Pe,cF as z}from"./vendor-BTebhqHt.js";import{u as me,H as pe,ao as A,_ as ve,a as Ee,h as Se,T as ze}from"../index-DBQF-8Xn.js";import{u as Le}from"./usePatientProfile-AYXZSB7D.js";import{D as Oe}from"./DemographicBar-CPy0fs0J.js";import"./lodash-NJiRuGo9.js";import"./apexcharts-no8IW45T.js";import"./Registration-Bw_Ielpx.js";import"./useSetRegistrationValues-D_O_P88p.js";import"./useLocation-DWKEe-Fi.js";import"./vaccines_service-CPD8V9uh.js";import"./sms_service-BnFxTj4j.js";import"./EIRreportsStore-xF8KfXWW.js";import"./Export-JdaAXeIZ.js";import"./user_role_management-CBMMR3Y4.js";import"./useNeonatalEnrollmentStore-CfCsBxiA.js";import"./enrollment-DU-PLRUa.js";import"./Outcome-Byh15Hmo.js";import"./wardsStore-DgQn54tV.js";const Te={class:"visitContent"},Ae={class:"visitData"},Be={class:"table-responsive"},Me={key:0,class:"loading-state"},Re={key:1,class:"empty-state"},Fe=de({__name:"DeathDetails",setup(ce){const U=me(),{patient:B}=Z(U),j=ue(),D=w([]),L=w(!1),J=ie(()=>({paging:!1,lengthChange:!1,searching:!1,ordering:!1,info:!1,autoWidth:!0,responsive:!0})),K=ie(()=>[{data:"field",title:"Field"},{data:"value",title:"Value"}]),M=s=>s?pe.toStandardHisDisplayFormat(s):"N/A",R=async s=>{try{return await A.getConceptName(s)}catch(r){return console.error("Error fetching concept name for ID ".concat(s,":"),r),"Concept ".concat(s)}},F=async(s,r,x)=>{const m="  ".repeat(r),_=r>0?"└─ ":"";let l="N/A";s.value_text?l=s.value_text:s.value_numeric!==null&&s.value_numeric!==void 0?l=String(s.value_numeric):s.value_datetime?l=M(s.value_datetime):s.value_coded&&(l=await R(s.value_coded));const P=s.concept_name||await R(s.concept_id);if(x.push({field:"".concat(m).concat(_).concat(P),value:l}),s.children&&s.children.length>0)for(const c of s.children)await F(c,r+1,x)},N=async()=>{var s;L.value=!0;try{D.value=[];const x=(((s=B.value)==null?void 0:s.observations)||[]).find(l=>l.encounter_type===40);if(!x||!x.obs){D.value=[{field:"Status",value:"No death information available"}];return}const m=x.obs.find(l=>l.concept_id===11520&&l.concept_name==="Death");if(!m){D.value=[{field:"Status",value:"Death recorded but details not available"}];return}const _=[];if(m.obs_datetime&&_.push({field:"Recorded Date",value:M(m.obs_datetime)}),m.provider_id&&_.push({field:"Provider ID",value:String(m.provider_id)}),m.location_id&&_.push({field:"Location ID",value:String(m.location_id)}),m.children&&m.children.length>0)for(const l of m.children)await F(l,0,_);D.value=_}catch(r){console.error("Error loading death details:",r),D.value=[{field:"Error",value:"Failed to load death information"}]}finally{L.value=!1}};return G(B,async()=>{await N()},{deep:!0,immediate:!0}),G(j,async()=>{await N()},{deep:!0}),fe(async()=>{await N()}),(s,r)=>(p(),g("div",Te,[n("div",Ae,[r[3]||(r[3]=n("div",{class:"table-header"},[n("h3",{class:"encounter-title"},"Death Information")],-1)),n("div",Be,[L.value?(p(),g("div",Me,[...r[0]||(r[0]=[n("p",null,"Loading death details...",-1)])])):D.value.length===0?(p(),g("div",Re,[...r[1]||(r[1]=[n("p",null,"No death information available",-1)])])):(p(),W(e(ge),{key:2,ref:"dataTable",class:"display nowrap modern-table",width:"100%",data:D.value,columns:K.value,options:J.value},{default:a(()=>[...r[2]||(r[2]=[n("thead",null,[n("tr",null,[n("th",null,"Field"),n("th",null,"Value")])],-1)])]),_:1},8,["data","columns","options"]))])])]))}}),We=ve(Fe,[["__scopeId","data-v-26d9c002"]]),Ge={class:"content_manager"},Ue={style:{display:"flex","justify-content":"space-between"}},je={class:"p_name_image"},Je={style:{width:"100%"}},Ke={class:"p_name"},Qe={class:"death-badge"},qe={style:{display:"flex","align-items":"center"}},Xe={style:{width:"100%",overflow:"scroll",height:"64px"}},Ye={key:0,style:{"margin-top":"1px"}},Ze={key:1},et={key:2},tt={key:3},ot={key:4},at={key:5},st={key:6},nt=de({__name:"DeathPatientProfile",setup(ce){const U=S(()=>z(()=>import("./LabOrdersList-s1IhDS17.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14]),import.meta.url)),B=S(()=>z(()=>import("./DiagnosesHistory-C6gkc7KD.js"),__vite__mapDeps([15,1,2,3,4,5,6,16]),import.meta.url)),j=S(()=>z(()=>import("./AllergiesHistory-DbNqct_r.js"),__vite__mapDeps([17,1,2,3,4,5,6,18]),import.meta.url)),D=S(()=>z(()=>import("./MedicationsHistory-C9UY7swr.js"),__vite__mapDeps([19,1,2,3,4,5,6,20]),import.meta.url)),L=S(()=>z(()=>import("./VisitsHistory-DIpUTIgO.js"),__vite__mapDeps([21,1,2,3,4,5,6,22]),import.meta.url)),J=S(()=>z(()=>import("./VitalsMeasurementsSummary-C8hZ3met.js"),__vite__mapDeps([23,1,2,3,4,5,6,24]),import.meta.url)),K=me(),M=Ee(),R=ue(),{event:F,popoverOpen:N,openPopover:s,openPIM:r,printID:x,formatCurrentAddress:m}=Le(),{screenWidth:_}=Se(),{patient:l}=Z(K),{activeProgram:P}=Z(M),c=w("Death Details"),Q=w(""),ee=w(""),te=w(""),q=w(""),X=w(""),H=v=>{c.value=v},_e=v=>v=="Undetermined"?"Undetermined":["Male","M"].includes(v)?"Male":["Female","F"].includes(v)?"Female":"",oe=v=>v?pe.toStandardHisDisplayFormat(v):"N/A",ye=async()=>{var v;try{const u=(((v=l.value)==null?void 0:v.observations)||[]).find(i=>i.encounter_type===40);if(!u||!u.obs)return;const k=u.obs.find(i=>i.concept_id===11520&&i.concept_name==="Death");if(!k||!k.children)return;k.children.forEach(i=>{switch(i.concept_id){case 1815:Q.value=i.value_datetime||i.obs_datetime;break;case 5002:i.value_coded?A.getConceptName(i.value_coded).then(y=>{ee.value=y}):i.value_text&&(ee.value=i.value_text);break;case 7837:i.value_coded?A.getConceptName(i.value_coded).then(y=>{te.value=y}):i.value_text&&(te.value=i.value_text);break;case 1824:q.value=i.value_text||"";break;case 9161:const O=i.value_text||i.value_datetime;O&&Q.value&&(X.value+="Time of death: ".concat(O,"\n"));break;case 7398:i.value_coded&&A.getConceptName(i.value_coded).then(y=>{X.value+="Death on arrival: ".concat(y,"\n")});break;case 1345:i.value_coded&&A.getConceptName(i.value_coded).then(y=>{X.value+="Confirmed: ".concat(y,"\n")});break}}),k.provider_id&&!q.value&&(q.value="Provider ID: ".concat(k.provider_id))}catch(t){console.error("Error loading death details:",t)}},Y=async()=>{await ye()};return fe(async()=>{await Y()}),G(()=>l,async()=>{await Y()},{deep:!0}),G(R,async()=>{await Y()},{deep:!0}),(v,t)=>(p(),W(e(Pe),null,{default:a(()=>[o(ze),o(e(De),{fullscreen:!0},{default:a(()=>[e(P).program_id!==33&&e(P).program_id!==38&&e(P).program_id!=""&&e(_)<1120?(p(),W(Oe,{key:0})):b("",!0),n("div",Ge,[o(e(h),{class:"content_width"},{default:a(()=>[o(e(f),{size:"2.5","size-lg":"2.6","size-md":"3",class:"displayNoneLeftPanel"},{default:a(()=>[o(e(le),{style:{"margin-bottom":"20px","background-color":"#fff"}},{default:a(()=>[o(e(be),null,{default:a(()=>{var u,k,i,O,y,ae,se,ne;return[n("div",Ue,[t[12]||(t[12]=n("div",null,null,-1)),n("div",{class:"name",style:{color:"var(--ion-color-primary)","margin-top":"10px"},onClick:t[0]||(t[0]=I=>e(s)(I))},[o(e(E),{icon:e(Ce),style:{"font-size":"2.2rem"}},null,8,["icon"])])]),n("div",je,[n("div",{class:xe(((k=(u=e(l))==null?void 0:u.personInformation)==null?void 0:k.gender)=="M"?"initialsBox maleColor":"initialsBox femaleColor"),onClick:t[1]||(t[1]=I=>e(r)())},[o(e(E),{style:{color:"#fff","font-size":"70px"},icon:e(ke)},null,8,["icon"])],2),n("div",Je,[n("div",Ke,C((O=(i=e(l))==null?void 0:i.personInformation)==null?void 0:O.given_name)+" "+C((ae=(y=e(l))==null?void 0:y.personInformation)==null?void 0:ae.middle_name)+" "+C((ne=(se=e(l))==null?void 0:se.personInformation)==null?void 0:ne.family_name),1)])]),o(e(h),{style:{"margin-top":"10px","margin-bottom":"10px"}},{default:a(()=>[o(e(f),null,{default:a(()=>[n("div",Qe,[o(e(E),{icon:e(Ie),style:{"margin-right":"5px"}},null,8,["icon"]),t[13]||(t[13]=d(" DECEASED ",-1))])]),_:1})]),_:1}),o(e(h),null,{default:a(()=>[o(e(f),{size:"4"},{default:a(()=>[...t[14]||(t[14]=[d("MRN:",-1)])]),_:1}),o(e(f),{class:"demoContent"},{default:a(()=>[d(C(e(l).ID),1)]),_:1})]),_:1}),e(P).program_id===32?(p(),W(e(h),{key:0},{default:a(()=>[o(e(f),{size:"4"},{default:a(()=>[...t[15]||(t[15]=[d("NCD Number:",-1)])]),_:1}),o(e(f),{class:"demoContent"},{default:a(()=>[d(C(e(l).NcdID),1)]),_:1})]),_:1})):b("",!0),o(e(h),null,{default:a(()=>[o(e(f),{size:"4"},{default:a(()=>[...t[16]||(t[16]=[d("Gender:",-1)])]),_:1}),o(e(f),{class:"demoContent"},{default:a(()=>{var I,T;return[d(C(_e((T=(I=e(l))==null?void 0:I.personInformation)==null?void 0:T.gender)),1)]}),_:1})]),_:1}),o(e(h),null,{default:a(()=>[o(e(f),{size:"4"},{default:a(()=>[...t[17]||(t[17]=[d("Date of Birth:",-1)])]),_:1}),o(e(f),{class:"demoContent"},{default:a(()=>{var I,T;return[d(C(oe((T=(I=e(l))==null?void 0:I.personInformation)==null?void 0:T.birthdate)),1)]}),_:1})]),_:1}),o(e(h),null,{default:a(()=>[o(e(f),{size:"4",style:{color:"#b42318"}},{default:a(()=>[...t[18]||(t[18]=[d("Date of Death:",-1)])]),_:1}),o(e(f),{class:"demoContent",style:{color:"#b42318","font-weight":"700"}},{default:a(()=>[d(C(oe(Q.value)),1)]),_:1})]),_:1}),o(e(h),null,{default:a(()=>[o(e(f),{size:"4"},{default:a(()=>[...t[19]||(t[19]=[d("Address:",-1)])]),_:1}),o(e(f),{class:"demoContent"},{default:a(()=>[d(C(e(m)(e(l))),1)]),_:1})]),_:1})]}),_:1})]),_:1})]),_:1}),o(e(f),{offset:"0.07","size-sm":"12","size-md":"12","size-lg":e(_)>1120?"9.33":"12"},{default:a(()=>[o(e(le),{style:{"background-color":"#fecdca","margin-inline":"0px",padding:"15px","margin-bottom":"10px"}},{default:a(()=>[n("div",qe,[o(e(E),{icon:e(he),style:{"font-size":"24px",color:"#b42318","margin-right":"10px"}},null,8,["icon"]),t[20]||(t[20]=n("div",null,[n("div",{style:{"font-weight":"700","font-size":"16px",color:"#b42318"}},"Patient Deceased"),n("div",{style:{"font-size":"14px",color:"#b42318"}}," This patient's records are for historical reference only. No new visits or treatments can be initiated. ")],-1))])]),_:1}),n("div",Xe,[o(e(we),{value:c.value,style:{"margin-top":"5px","min-width":"540px"}},{default:a(()=>[o(e(V),{value:"Death Details",onClick:t[2]||(t[2]=u=>H("Death Details"))},{default:a(()=>[o(e($),null,{default:a(()=>[...t[21]||(t[21]=[d("Death Details",-1)])]),_:1})]),_:1}),o(e(V),{value:"Visits History",onClick:t[3]||(t[3]=u=>H("Visits History"))},{default:a(()=>[o(e($),null,{default:a(()=>[...t[22]||(t[22]=[d("Visits History",-1)])]),_:1})]),_:1}),o(e(V),{value:"Vitals History",onClick:t[4]||(t[4]=u=>H("Vitals History"))},{default:a(()=>[o(e($),null,{default:a(()=>[...t[23]||(t[23]=[d("Vitals History",-1)])]),_:1})]),_:1}),o(e(V),{value:"Lab Tests History",onClick:t[5]||(t[5]=u=>H("Lab Tests History"))},{default:a(()=>[o(e($),null,{default:a(()=>[...t[24]||(t[24]=[d("Lab Tests History",-1)])]),_:1})]),_:1}),o(e(V),{value:"Diagnosis History",onClick:t[6]||(t[6]=u=>H("Diagnosis History"))},{default:a(()=>[o(e($),null,{default:a(()=>[...t[25]||(t[25]=[d("Diagnosis History",-1)])]),_:1})]),_:1}),o(e(V),{value:"Allergies History",onClick:t[7]||(t[7]=u=>H("Allergies History"))},{default:a(()=>[o(e($),null,{default:a(()=>[...t[26]||(t[26]=[d("Allergies History",-1)])]),_:1})]),_:1}),o(e(V),{value:"Medication History",onClick:t[8]||(t[8]=u=>H("Medication History"))},{default:a(()=>[o(e($),null,{default:a(()=>[...t[27]||(t[27]=[d("Medication History",-1)])]),_:1})]),_:1})]),_:1},8,["value"])]),c.value=="Death Details"?(p(),g("div",Ye,[o(We)])):b("",!0),c.value=="Visits History"?(p(),g("div",Ze,[o(e(L))])):b("",!0),c.value=="Vitals History"?(p(),g("div",et,[o(e(J))])):b("",!0),c.value=="Lab Tests History"?(p(),g("div",tt,[o(e(U),{showAddTestButton:!1,showSendToLabButton:!1})])):b("",!0),c.value=="Diagnosis History"?(p(),g("div",ot,[o(e(B))])):b("",!0),c.value=="Allergies History"?(p(),g("div",at,[o(e(j))])):b("",!0),c.value=="Medication History"?(p(),g("div",st,[o(e(D))])):b("",!0)]),_:1},8,["size-lg"])]),_:1})])]),_:1}),o(e(He),{style:{"--offset-x":"-10px"},"is-open":e(N),"show-backdrop":!1,"dismiss-on-select":!0,event:e(F),onDidDismiss:t[11]||(t[11]=u=>N.value=!1)},{default:a(()=>[n("div",null,[o(e(Ve),{style:{"--ion-background-color":"#fff","--offset-x":"-30px"}},{default:a(()=>[o(e(re),{button:!0,detail:!1,onClick:t[9]||(t[9]=u=>e(r)()),style:{cursor:"pointer"},class:"list-content"},{default:a(()=>[o(e(E),{icon:e($e),slot:"start",class:"sub-menu-icon"},null,8,["icon"]),t[28]||(t[28]=n("span",{class:"sub-menu-txt"},"View demographics",-1))]),_:1}),o(e(re),{button:!0,detail:!1,onClick:t[10]||(t[10]=u=>e(x)()),style:{cursor:"pointer"},class:"list-content"},{default:a(()=>[o(e(E),{icon:e(Ne),slot:"start",class:"sub-menu-icon"},null,8,["icon"]),t[29]||(t[29]=n("span",{class:"sub-menu-txt"},"Print client identifier",-1))]),_:1})]),_:1})])]),_:1},8,["is-open","event"])]),_:1}))}}),It=ve(nt,[["__scopeId","data-v-94677dd3"]]);export{It as default};
