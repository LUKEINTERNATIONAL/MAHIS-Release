import{d as D,b2 as w,cp as S,r as e,w as l,a as O,b7 as u,cW as B,e as c,f as d,l as T,J as k,k as p,F as E,P as H,K as x,u as C}from"./vendor-BuyqdZ53.js";import{u as N,ag as F,af as V,H as I,_ as M}from"../index-DAxTqYIj.js";import"./lodash-NJiRuGo9.js";import"./apexcharts-BQpaTz5X.js";const R={class:"table-responsive"},A=D({__name:"DiagnosesHistory",setup(J){const m=N(),{patient:f}=w(m),b=S(),_=e(null),t=e([]),g=e(["Diagnosis","Date"]),v=e({responsive:!0,select:!1,layout:{topStart:"",topEnd:"search",bottomStart:"info",bottomEnd:"paging"},ordering:!1}),s=async()=>{try{t.value=[];const y=(await F.getObsByEncounterId(41)).flatMap(a=>a.obs||[]).filter(a=>a.value_coded).sort((a,r)=>{const i=new Date(a.obs_datetime).getTime();return new Date(r.obs_datetime).getTime()-i});for(const a of y){const r=await V.getConceptName(a.value_coded),i=I.toStandardHisFormat(a.obs_datetime);t.value.push([r,i])}}catch(o){console.error("Error updating diagnosis data:",o),t.value=[]}};return l(()=>b.path,async()=>{await s()},{deep:!0}),l(f,async()=>{await s()},{deep:!0}),O(async()=>{await s(),u.use(B)}),(o,h)=>(d(),c("div",R,[T(C(u),{ref_key:"dataTable",ref:_,options:v.value,data:t.value,class:"display nowrap modern-table",width:"100%"},{default:k(()=>[p("thead",null,[p("tr",null,[(d(!0),c(E,null,H(g.value,n=>(d(),c("th",{key:n},x(n),1))),128))])])]),_:1},8,["options","data"])]))}}),q=M(A,[["__scopeId","data-v-f14e6255"]]);export{q as default};
