import{D as je,d as V,ax as U,ay as Y,az as ie,aA as ye,ak as j,al as G,K as X,L as q,M as $e,bo as Ae,b6 as Ce,G as l,e as v,f as u,k as a,l as e,bl as _e,bk as Te,a4 as le,H as o,a3 as k,F,bh as ge,r as w,cr as Fe,w as Ne,a as re,n as Ve,T as B,I as x,u as c,cY as ze,aF as We,N as z,a5 as O,bL as qe,av as de,ad as Z,bq as ve,cs as Ke,aU as Qe,m as H,Q as R,p as K,bH as ee,as as Ye,ac as xe,b7 as Se,b4 as Ee,P as we,b5 as Me,c as oe,b0 as Xe,J as Ze,S as et,da as tt,eq as nt,er as ot,es as st,cg as Ie,ap as at,b9 as it,aC as se,aB as ae,c7 as lt,ab as rt,dg as he,df as dt}from"./vendor-CJ2tyHrn.js";import{n as te,a_ as Be,H as Q,K as ne,b0 as ct,a$ as ut,u as W,_ as E,F as pt,B as He,bh as _t,a1 as ue,g as gt,J as Ge,G as mt,x as Re,bc as ft,o as Je,a4 as vt,aq as ht,bi as bt,bj as Dt,bk as Pe,bl as Oe,bm as be,bd as me,bn as De,bo as yt,b2 as fe,a0 as $t,d as Ct,bp as St,T as wt}from"../index-CPIhguZJ.js";import{P as Mt}from"./patient_diagnosis_service-DTN-hwjk.js";import{D as It}from"./DashBox-6RT18Q5Q.js";import{B as pe}from"./BasicForm-BEa7BD3q.js";import{l as kt}from"./lodash-NJiRuGo9.js";import{f as Nt}from"./formatServerData-C4-2caW3.js";import{v as Pt}from"./group_validation-Crr58cZF.js";import{u as Ot}from"./ComplicationsStore-Ibxa1dsq.js";import{g as Lt,P as ke}from"./nonPharmaTherapyStore-CAVSqzBF.js";import{D as At,a as Tt,A as Ft}from"./NextAppointment-B2xGYVAH.js";const Le=je("NCDDiagnosisStore",{state:()=>({diagnosis:[{selectedData:[],isFinishBtn:!1,data:{rowData:[{colData:[{inputHeader:"Diagnosis",icon:te.search,value:"",name:"diagnosis",eventType:"input",required:!0,alertsErrorMassage:"",isSingleSelect:!0,trackBy:"name",valueType:"coded",multiSelectData:[],id:"",validationFunctionName:"required"}]}]}}]}),actions:{setDiagnosis(t){this.diagnosis=t}}}),Vt=V({name:"Menu",components:{IonContent:q,IonHeader:X,IonItem:G,IonList:j,IonMenu:ye,IonTitle:ie,IonToolbar:Y,List:Be},computed:{...U(W,["patient"])},data(){return{valueNumericArray:[],obsDatetime:[],graphIcon:ut(["#006401"]),listIcon:ct(["#636363"]),displayGraph:!0,orders:[],height:[],BMI:[],iconBg:{},activeWeight:[],activeHeight:[],activeBMI:[],list:[],series:[{name:"",data:[]}]}},setup(){return{checkmark:Ce,pulseOutline:Ae}},async mounted(){const t=await ne.getAll(this.patient.patientID,"Primary diagnosis"),n=await ne.getAll(this.patient.patientID,"Secondary diagnosis"),g=await ne.getAll(this.patient.patientID,"Attempted/ Differential diagnosis"),f=[...t||[],...n||[],...g||[]],h=kt.isEmpty(f)?[]:Promise.all(f.map(async s=>({name:await ne.getConceptName(s.value_coded),obs_date:s.obs_datetime})));this.setListData(await h)},methods:{dismiss(){$e.dismiss()},handleIcon(){},setActivClass(t){this.activeHeight="",this.activeBMI="",this.activeWeight="",t=="height"?this.activeHeight="_active":t=="weight"?this.activeWeight="_active":t=="BMI"&&(this.activeBMI="_active")},setListData(t){this.list=[],this.list.push({actionBtn:!1,class:"col_background",header:!0,minHeight:"--min-height: 25px;",display:["Date","Diagnosis","Notes"]}),t.forEach(n=>{this.list.push({actionBtn:!1,minHeight:"--min-height: 25px;",class:"col_background",display:[Q.toStandardHisFormat(n.obs_date),n.name,""]})})}}}),xt={class:"modal_wrapper"};function Et(t,n,g,f,h,s){const i=l("list");return u(),v("div",xt,[a("div",null,[e(i,{listData:t.list},null,8,["listData"])])])}const Bt=E(Vt,[["render",Et],["__scopeId","data-v-5665ae64"]]),Ht=V({name:"Menu",components:{IonContent:q,IonHeader:X,IonItem:G,IonList:j,IonMenu:ye,IonTitle:ie,IonToolbar:Y,IonInput:le,IonPopover:Te,DashBox:It,SelectionPopover:_t,BasicInputField:He,List:Be,BasicForm:pe,DynamicButton:pt,previousDiagnosis:Bt,DataTable:_e},data(){return{iconsContent:te,no_item:!1,search_item:!1,display_item:!1,addItemButton:!0,selectedText:"",conditionStatus:"",data:[],diagnosisData:[],popoverOpen:!1,event:"",selectedCondition:""}},setup(){return{checkmark:Ce,pulseOutline:Ae}},computed:{...U(Le,["diagnosis"]),...U(W,["patient"])},async mounted(){await this.getDiagnosis("")},methods:{async getDiagnosis(t){let n=await Mt.getDiagnosis(t,1,15);ue(this.diagnosis,"diagnosis","multiSelectData",n)},dismiss(){$e.dismiss()},async addNewRow(){var t,n,g,f,h,s,i,r;if(await Pt(this.diagnosis)){ue(this.diagnosis,"diagnosis","alertsErrorMassage","");const d=await Nt(this.diagnosis);let m="";if(this.diagnosis&&this.diagnosis.length>0){const p=this.diagnosis[0];(h=(f=(g=(n=(t=p==null?void 0:p.data)==null?void 0:t.rowData)==null?void 0:n[0])==null?void 0:g.colData)==null?void 0:f[0])!=null&&h.value&&(m=p.data.rowData[0].colData[0].value.name||"")}if(!m&&d.length>0&&d[0].value_coded)try{const p=await gt("concept_names",{selector:{concept_id:d[0].value_coded}});p&&(m=p.name)}catch(p){console.error("Could not fetch from PouchDB:",p)}const _=d.map(p=>({...p,diagnosis_name:m||"Unknown Diagnosis",obs_datetime:p.obs_datetime||Q.sessionDate()})),C=W(),S=JSON.parse(JSON.stringify(C.patient));(r=(i=(s=S.diagnosis)!=null?s:S.diagnosis={}).unsaved)!=null||(i.unsaved=[]),S.diagnosis.unsaved.push(..._);try{await Ge(S),await new Promise(p=>setTimeout(p,500)),mt("Diagnosis successfully saved"),this.dismiss()}catch(p){console.error(" Error saving diagnosis:",p),Re("Failed to save diagnosis. Please try again.")}}else ue(this.diagnosis,"diagnosis","alertsErrorMassage","Please select diagnosis from the list")},updateDiagnosisStores(){Le().setDiagnosis(this.diagnosis)},async handleInputData(t){ue(this.diagnosis,"diagnosis","alertsErrorMassage","")}}}),Gt={class:"modal_wrapper"},Rt={class:""};function Jt(t,n,g,f,h,s){const i=l("ion-title"),r=l("ion-icon"),d=l("ion-header"),m=l("basic-form"),_=l("ion-content"),C=l("DynamicButton"),S=l("ion-col"),p=l("ion-row"),y=l("ion-footer");return u(),v(F,null,[e(d,{style:{display:"flex","justify-content":"space-between"}},{default:o(()=>[e(i,{class:"modalTitle"},{default:o(()=>[...n[2]||(n[2]=[k("Add Diagnosis",-1)])]),_:1}),e(r,{onClick:n[0]||(n[0]=$=>t.dismiss()),style:{"padding-top":"10px","padding-right":"10px"},icon:t.iconsContent.cancel},null,8,["icon"])]),_:1}),e(_,{fullscreen:!0,style:{"--background":"#fff"}},{default:o(()=>[a("div",Gt,[a("div",Rt,[e(m,{contentData:t.diagnosis,onSearchChange:t.getDiagnosis,"onUpdate:inputValue":t.handleInputData},null,8,["contentData","onSearchChange","onUpdate:inputValue"])])])]),_:1}),e(y,{collapse:"fade",class:"ion-no-border"},{default:o(()=>[e(p,null,{default:o(()=>[e(S,null,{default:o(()=>[e(C,{onClick:n[1]||(n[1]=$=>t.addNewRow()),name:"Save",fill:"solid",style:{float:"right",margin:"2%",width:"130px"}})]),_:1})]),_:1})]),_:1})],64)}const Ut=E(Ht,[["render",Jt],["__scopeId","data-v-a39d0e4b"]]),jt={class:"table-responsive"},zt=V({__name:"Diagnosis",setup(t){const n=ft(),g=W(),{diagnosis:f}=ge(n),{patient:h}=ge(g),s=w(null),i=w([]),r=w(te),d=["Diagnosis","Date","Action"],m={responsive:!0,select:!1,layout:{topStart:"buttons",topEnd:"search",bottomStart:"info",bottomEnd:"paging"},ordering:!1,buttons:[{text:" <b>+ Add diagnosis </b>",className:"add-test text-white",action:async()=>{await _()}}]},_=async()=>{await Je(Ut,{class:"lab-results-modal"},!0),await p()},C=async $=>$.length>0?await Promise.all($.map(async M=>{let P=M.diagnosis_name||M.name;!P&&M.value_coded&&(P=await ne.getConceptName(M.value_coded));const N=M.obs_datetime;return[P||"",Q.toStandardHisFormat(N),'<button class="btn btn-outline-danger btn-sm delete-btn" data-id=\''.concat(JSON.stringify({id:M.obs_id,value_coded:M.value_coded,name:P,obs_date:N}),"'>").concat(r.value.delete2,"</button>")]})):[],S=async($,M)=>{var N;if(await vt("Do you want to delete ".concat($.name," ?"),M)){const b=JSON.parse(JSON.stringify(h.value)),D=b.diagnosis;$!=null&&$.id?(D.saved=D.saved.filter(I=>!(I.value_coded===$.value_coded&&I.obs_datetime===$.obs_date)),(N=D.voided)!=null||(D.voided=[]),D.voided.push($)):D.unsaved=D.unsaved.filter(I=>!(I.value_coded===$.value_coded&&I.obs_datetime===$.obs_date)),await Ge(b)}},p=async()=>{var P,N;const $=JSON.parse(JSON.stringify(h.value)),M=[...((P=$==null?void 0:$.diagnosis)==null?void 0:P.unsaved)||[],...((N=$==null?void 0:$.diagnosis)==null?void 0:N.saved)||[]];i.value=await C(M),_e.use(ze)},y=Fe();return Ne(()=>y,async()=>{await p()},{deep:!0}),Ne(()=>h,async()=>{await p()},{deep:!0}),re(async()=>{await p(),Ve(()=>{const $=s.value.dt;$.columns.adjust().draw(),$.on("click",".delete-btn",M=>{const P=M.target.getAttribute("data-id");S(JSON.parse(P),M)})})}),($,M)=>(u(),v("div",jt,[e(c(_e),{ref_key:"dataTableRef",ref:s,options:m,data:i.value,class:"display nowrap modern-table",width:"100%"},{default:o(()=>[a("thead",null,[a("tr",null,[(u(),v(F,null,B(d,P=>a("th",{key:P},x(P),1)),64))])])]),_:1},8,["data"])]))}}),wo=E(zt,[["__scopeId","data-v-13544ebc"]]),Wt={class:"sub_item_body"},qt={class:"ion-padding",slot:"content"},Kt={class:"table-responsive"},Qt=V({__name:"ComplicationsScreening",setup(t){We();const n=Ot(),{FootScreening:g,visualScreening:f,cvScreening:h}=ge(n),s=W(),{patient:i}=ge(s);Fe();const r=w(null),d=w([]);w(!1),w(!1),w("");const m=w("");w({btnColor:"secondary",btnName:"No risk"});const _=w(te),C=["Condition","Result","Date","Action"],S={responsive:!0,select:!1,layout:{topEnd:"search",bottomStart:"info",bottomEnd:"paging"},ordering:!1},p=async()=>{var N,b;const M=JSON.parse(JSON.stringify(i.value)),P=[...((N=M==null?void 0:M.screening)==null?void 0:N.unsaved)||[],...((b=M==null?void 0:M.screening)==null?void 0:b.saved)||[]];d.value=await y(P)},y=async M=>M.length===0?[]:(await Promise.all(M.map(async N=>N.concept_name==="Visual acuity"?N.children.map(b=>[b.concept_name,b.value_text,Q.toStandardHisFormat(b.obs_datetime),'<button class="btn btn-outline-danger btn-sm delete-btn" data-id=\''.concat(JSON.stringify(b),"'>\n                        ").concat(_.value.delete2,"</button>")]):N.concept_name==="Foot check"?Promise.all(N.children.map(async b=>[b.concept_name,await ht.getConceptName(b.value_coded),Q.toStandardHisFormat(b.obs_datetime),'<button class="btn btn-outline-danger btn-sm delete-btn" data-id=\''.concat(JSON.stringify(b),"'>\n                            ").concat(_.value.delete2,"</button>")])):N.concept_name==="Cardiovascular disease"?[["CVD %",N.value_text,Q.toStandardHisFormat(N.obs_datetime),'<button class="btn btn-outline-danger btn-sm delete-btn" data-id=\''.concat(JSON.stringify(N),"'>\n                            ").concat(_.value.delete2,"</button>")]]:[]))).flat(),$=M=>{};return re(async()=>{await p(),Ve(()=>{const M=r.value.dt;M.columns.adjust().draw(),M.on("click",".delete-btn",P=>{const N=P.target.getAttribute("data-id");$(JSON.parse(N))})})}),(M,P)=>{const N=l("ion-label"),b=l("ion-accordion"),D=l("ion-accordion-group"),I=l("ion-row");return u(),v(F,null,[e(pe,{contentData:c(f)},null,8,["contentData"]),e(c(j),null,{default:o(()=>[e(c(G),{lines:m.value,class:"dashed_bottom_border textSectionFormat"},{default:o(()=>[...P[0]||(P[0]=[a("span",{style:{display:"flex","align-items":"center",gap:"10px"}}," Foot screening ",-1)])]),_:1},8,["lines"]),a("div",Wt,[e(pe,{contentData:c(g)},null,8,["contentData"])])]),_:1}),e(pe,{contentData:c(h)},null,8,["contentData"]),e(I,null,{default:o(()=>[e(D,{ref:"accordionGroup",class:"previousView"},{default:o(()=>[e(b,{value:"first","toggle-icon-slot":"start",style:{"border-radius":"10px","background-color":"#fff"}},{default:o(()=>[e(c(G),{slot:"header",color:"light"},{default:o(()=>[e(N,{class:"previousLabel"},{default:o(()=>[...P[1]||(P[1]=[k("Previous Visits",-1)])]),_:1})]),_:1}),a("div",qt,[a("div",Kt,[e(c(_e),{ref_key:"dataTableRef",ref:r,options:S,data:d.value,class:"display nowrap",width:"100%"},{default:o(()=>[a("thead",null,[a("tr",null,[(u(),v(F,null,B(C,A=>a("th",{key:A},x(A),1)),64))])])]),_:1},8,["data"])])])]),_:1})]),_:1},512)]),_:1})],64)}}}),Mo=E(Qt,[["__scopeId","data-v-f3420ad0"]]),Yt=V({name:"Home",components:{IonContent:q,IonHeader:X,IonMenuButton:Ke,IonPage:ve,IonTitle:ie,IonToolbar:Y,IonRow:Z,IonCol:de,IonChip:qe,IonLabel:O,IonIcon:z},computed:{...U(W,["patient"])},data(){const t=w([]),n=w([]),g=async()=>{try{const s=this.patient;Dt(s.ID);const i=w(!1),r=_=>{i.value=_};t.value=await Lt();const d=t.value.some(_=>_.toLowerCase().includes("hypertension")),m=t.value.some(_=>_.toLowerCase().includes("diabetes"));d&&(r(!0),Pe()),m&&(r(!0),Oe()),i.value==!1}catch(s){}},f=async()=>{const s=n.value.some(r=>r.toLowerCase().includes("hypertension")),i=n.value.some(r=>r.toLowerCase().includes("diabetes"));s&&await Pe(),i&&await Oe()};return{diagnoses:t,selectedDiagnoses:n,medkitOutline:Qe,initC:g,toggleDiagnosisSelection:s=>{const i=n.value.indexOf(s);i===-1?(n.value.push(s),be(),f()):(n.value.splice(i,1),be(),f()),n.value.length===0&&(be(),g())}}},async mounted(){this.initC()},watch:{patient:{handler(){bt(this.patient.ID),this.initC()},deep:!0}}}),Xt={key:0,class:"diagnosis-container"},Zt={class:"heading"},en={class:"diagnosis-list"};function tn(t,n,g,f,h,s){const i=l("ion-icon"),r=l("ion-label"),d=l("ion-chip"),m=l("ion-col"),_=l("ion-row");return t.diagnoses.length>0?(u(),v("div",Xt,[a("div",Zt,[e(i,{icon:t.medkitOutline,class:"diagnosis-icon"},null,8,["icon"]),n[0]||(n[0]=a("h2",null,"Diagnosis",-1))]),e(_,null,{default:o(()=>[e(m,null,{default:o(()=>[a("div",en,[(u(!0),v(F,null,B(t.diagnoses,(C,S)=>(u(),R(d,{key:S,class:K({"diagnosis-chip-selected":t.selectedDiagnoses.includes(C)}),onClick:p=>t.toggleDiagnosisSelection(C)},{default:o(()=>[e(r,null,{default:o(()=>[k(x(C),1)]),_:2},1024)]),_:2},1032,["class","onClick"]))),128))])]),_:1})]),_:1})])):H("",!0)}const nn=E(Yt,[["render",tn],["__scopeId","data-v-2bd0f8ca"]]),on=V({name:"MedicationSearch",components:{IonContent:q,IonPage:ve,IonItem:G,IonLabel:O,IonInput:le,IonIcon:z,BasicInputField:He,IonCard:ee},setup(){const t=w(""),n=me();return{searchText:t,searchTextUpdated:f=>{const h=f.target;t.value=h.value;const s=n.medications.filter(i=>i.name.toLowerCase().includes(t.value.toLowerCase()));n.setFilteredMedications(s)},searchOutline:Ye}}});function sn(t,n,g,f,h,s){const i=l("BasicInputField"),r=l("ion-card");return u(),v("div",null,[a("div",null,[e(r,null,{default:o(()=>[e(i,{placeholder:"Filter medication list by name",icon:t.searchOutline,inputValue:t.searchText,"onUpdate:inputValue":t.searchTextUpdated,minHeight:50},null,8,["icon","inputValue","onUpdate:inputValue"])]),_:1})])])}const an=E(on,[["render",sn]]),ln=V({name:"medication",components:{IonCard:ee,IonCardHeader:Me,IonButton:we,IonCardTitle:Ee,IonCardContent:Se,IonInput:le,IonIcon:z,IonCol:de,IonRow:Z,IonCheckbox:xe,PreviousNCDDiagnosis:nn,MedicationSearchInput:an},computed:{...U(me,["medications","filteredMedications"]),...U(De,["otherNCDMedications"]),activeMedications(){return this.useDefaultStores?this.filteredMedications:this.otherNCDMedications}},props:{useDefaultStores:{type:Boolean,default:!0}},setup(t){const n=me();n.initMedications();const g=oe(()=>n.selectedNCDMedicationList),f=De(),h=oe(()=>f.selectedOtherNCDMedicationList),s=oe(()=>t.useDefaultStores?g.value:h.value),i=w(!1),r=w({});let d=null;const m=()=>{i.value=!1,d&&(clearTimeout(d),d=null)},_=b=>{r.value={...r.value,[b]:!0},i.value=!0,d&&clearTimeout(d),d=window.setTimeout(()=>{i.value=!1,d=null},3e3),window.setTimeout(()=>{const D={...r.value};delete D[b],r.value=D},3e3)},C=b=>/^\d*$/.test(b),S=(b,D,I)=>{let A=I.target.value;const J="".concat(b,"-").concat(D);if(A!==""&&!C(A)){_(J);const L=s.value.find(ce=>ce.drug_id===b);A=(L==null?void 0:L.dosage[D])||"",setTimeout(()=>{const ce=I.target;ce&&(ce.value=A)},0);return}if(A!==""){const L=parseInt(A);isNaN(L)||L<0?A="0":A=Math.floor(L).toString()}const T=s.value.findIndex(L=>L.drug_id===b);if(T>-1){const L={...s.value[T]};L.dosage={...L.dosage,[D]:A},s.value[T]=L}},p=(b,D)=>{let I=D.target.value;const A="".concat(b,"-duration");if(I!==""&&!C(I)){_(A);const T=s.value.find(L=>L.drug_id===b);I=(T==null?void 0:T.duration)||"",setTimeout(()=>{const L=D.target;L&&(L.value=I)},0);return}if(I!==""){const T=parseInt(I);isNaN(T)||T<1?I="1":I=Math.floor(T).toString()}const J=s.value.findIndex(T=>T.drug_id===b);if(J>-1){const T={...s.value[J]};T.duration=I,s.value[J]=T}},y=b=>s.value.some(D=>D.drug_id===b);return{medkit:Ie,sunny:st,partlySunny:ot,moon:nt,timeOutline:tt,alertCircleOutline:et,closeCircleOutline:Ze,updateDosage:S,updateDuration:p,getDosage:(b,D)=>{const I=s.value.find(A=>A.drug_id===b);return(I==null?void 0:I.dosage[D])||""},getDuration:b=>{const D=s.value.find(I=>I.drug_id===b);return(D==null?void 0:D.duration)||""},calculateQuantity:b=>{const D=s.value.find(J=>J.drug_id===b);if(!D||!D.dosage||!D.duration)return"";const I=["morning","afternoon","evening"].reduce((J,T)=>{const L=parseInt(D.dosage[T])||0;return J+L},0),A=parseInt(D.duration)||0;return(I*A).toString()},isActive:y,toggleMedication:async b=>{try{if(y(b)){const D=s.value.findIndex(I=>I.drug_id===b);D>-1&&s.value.splice(D,1)}else{const D=await yt(b);t.useDefaultStores==!1?f.setSelectedNCDMedicationList(D):n.setSelectedNCDMedicationList(D)}}catch(D){Re("Error toggling medication: "+D)}},cubeOutline:Xe,showErrorMessage:i,errorFields:r,hideErrorMessage:m}}}),rn={key:0},dn={key:0,class:"error-message"},cn={class:"table-container"},un={class:"prescription-table"},pn=["onClick"],_n=["onClick"],gn={class:"med-kit-font"};function mn(t,n,g,f,h,s){const i=l("PreviousNCDDiagnosis"),r=l("ion-col"),d=l("MedicationSearchInput"),m=l("ion-row"),_=l("ion-icon"),C=l("ion-button"),S=l("ion-checkbox"),p=l("ion-input");return u(),v(F,null,[e(m,null,{default:o(()=>[e(r,{size:"5"},{default:o(()=>[t.useDefaultStores?(u(),R(i,{key:0})):H("",!0)]),_:1}),e(r,null,{default:o(()=>[t.useDefaultStores&&t.medications.length>0?(u(),R(d,{key:0,style:{"margin-top":"0px","font-weight":"600","font-size":"16px"}})):H("",!0)]),_:1})]),_:1}),t.activeMedications.length>0?(u(),v("div",rn,[t.showErrorMessage?(u(),v("div",dn,[e(_,{icon:t.alertCircleOutline,color:"danger"},null,8,["icon"]),n[0]||(n[0]=a("span",{style:{"font-size":"16px","font-weight":"600px",color:"red"}},"Only numbers are allowed",-1)),e(C,{fill:"clear",size:"small",onClick:t.hideErrorMessage},{default:o(()=>[e(_,{icon:t.closeCircleOutline},null,8,["icon"])]),_:1},8,["onClick"])])):H("",!0),a("div",cn,[a("table",un,[a("thead",null,[a("tr",null,[n[6]||(n[6]=a("th",{class:"checkbox-col"},"Select",-1)),n[7]||(n[7]=a("th",null,"Medication",-1)),a("th",null,[e(_,{icon:t.partlySunny},null,8,["icon"]),n[1]||(n[1]=k(" Morning",-1))]),a("th",null,[e(_,{icon:t.sunny},null,8,["icon"]),n[2]||(n[2]=k(" Noon",-1))]),a("th",null,[e(_,{icon:t.moon},null,8,["icon"]),n[3]||(n[3]=k(" Night",-1))]),a("th",null,[e(_,{icon:t.timeOutline},null,8,["icon"]),n[4]||(n[4]=k(" Duration",-1))]),a("th",null,[e(_,{icon:t.cubeOutline},null,8,["icon"]),n[5]||(n[5]=k(" Quantity",-1))])])]),a("tbody",null,[(u(!0),v(F,null,B(t.activeMedications,y=>(u(),v("tr",{key:y.id,class:K({"active-row":t.isActive(y.drug_id)})},[a("td",{class:"checkbox-col",onClick:$=>t.toggleMedication(y.drug_id)},[e(S,{checked:t.isActive(y.drug_id),style:{"--size":"26px"}},null,8,["checked"])],8,pn),a("td",{style:{cursor:"pointer"},onClick:$=>t.toggleMedication(y.drug_id)},[a("span",gn,x(y.name),1)],8,_n),a("td",null,[e(p,{type:"text",class:K(["dose-input bordered-input med-kit-font",{"error-input":t.errorFields["".concat(y.drug_id,"-morning")]}]),disabled:!t.isActive(y.drug_id),value:t.getDosage(y.drug_id,"morning"),onIonInput:$=>t.updateDosage(y.drug_id,"morning",$),placeholder:"0",inputmode:"numeric"},null,8,["class","disabled","value","onIonInput"])]),a("td",null,[e(p,{type:"text",class:K(["dose-input bordered-input med-kit-font",{"error-input":t.errorFields["".concat(y.drug_id,"-afternoon")]}]),disabled:!t.isActive(y.drug_id),value:t.getDosage(y.drug_id,"afternoon"),onIonInput:$=>t.updateDosage(y.drug_id,"afternoon",$),placeholder:"0",inputmode:"numeric"},null,8,["class","disabled","value","onIonInput"])]),a("td",null,[e(p,{type:"text",class:K(["dose-input bordered-input med-kit-font",{"error-input":t.errorFields["".concat(y.drug_id,"-evening")]}]),disabled:!t.isActive(y.drug_id),value:t.getDosage(y.drug_id,"evening"),onIonInput:$=>t.updateDosage(y.drug_id,"evening",$),placeholder:"0",inputmode:"numeric"},null,8,["class","disabled","value","onIonInput"])]),a("td",null,[e(p,{type:"text",class:K(["dose-input bordered-input med-kit-font",{"error-input":t.errorFields["".concat(y.drug_id,"-duration")]}]),disabled:!t.isActive(y.drug_id),value:t.getDuration(y.drug_id),onIonInput:$=>t.updateDuration(y.drug_id,$),placeholder:"0",inputmode:"numeric"},null,8,["class","disabled","value","onIonInput"])]),a("td",null,[e(p,{type:"text",class:"dose-input bordered-input med-kit-font",readonly:"",value:t.calculateQuantity(y.drug_id),placeholder:"0"},null,8,["value"])])],2))),128))])])])])):H("",!0)],64)}const Ue=E(ln,[["render",mn],["__scopeId","data-v-c9584f56"]]),fn=V({name:"DrugSelector",components:{IonContent:q,IonHeader:X,IonItem:G,IonList:j,IonMenu:ye,IonTitle:ie,IonToolbar:Y,IonInput:le,IonPopover:Te,VueMultiselect:at,IonLabel:O,IonCol:de,IonRow:Z},emits:["drug-selected"],data(){const t=h=>{this.$emit("drug-selected",h)},n=async h=>{const s=fe(),i=h,_=(await $t.getOfflineOPDDrugs({name:i,page:1,page_size:20})).map(C=>({label:C.name,value:C.name,other:C,...C}));s.setPartialOPDdrugList(_)},g=oe(()=>this.partialOPDdrugList);return{selected_drug:w(null),selectedDrugName:t,FindDrugName:n,OPDDrugList:g}},computed:{...U(fe,["partialOPDdrugList"])}});function vn(t,n,g,f,h,s){const i=l("VueMultiselect"),r=l("ion-col"),d=l("ion-row");return u(),v("div",null,[e(d,null,{default:o(()=>[e(r,null,{default:o(()=>[e(i,{modelValue:t.selected_drug,"onUpdate:modelValue":[n[0]||(n[0]=m=>t.selected_drug=m),t.selectedDrugName],multiple:!1,taggable:!1,"hide-selected":!1,"close-on-select":!0,openDirection:"bottom","tag-placeholder":"Select medication",placeholder:"Select medication",selectLabel:"",label:"name",searchable:!0,onSearchChange:t.FindDrugName,"track-by":"uuid",options:t.OPDDrugList},null,8,["modelValue","onUpdate:modelValue","onSearchChange","options"])]),_:1})]),_:1})])}const hn=E(fn,[["render",vn],["__scopeId","data-v-e33f5b73"]]),bn=V({name:"Home",mixins:[Ct],components:{IonContent:q,IonHeader:X,IonPage:ve,IonToolbar:Y,IonRow:Z,IonTitle:ie,IonIcon:z,IonFooter:it,OPDMedications:hn,Medication:Ue,IonCol:de,IonButton:we},data(){const t=De(),n=()=>{$e.dismiss()};return{iconsContent:te,dismiss:n,addSearchedDrug:h=>{t.addSearchedDrug(h)},medkit:Ie,checkmark:Ce,onAdd:()=>{St(),t.clearOtherNCDMedications(),n()}}},computed:{},$route:{async handler(){},deep:!0},watch:{},async mounted(){},methods:{}}),Dn={class:"medication-list"},yn={class:"modal_wrapper"},$n={class:""};function Cn(t,n,g,f,h,s){const i=l("ion-icon"),r=l("ion-title"),d=l("ion-header"),m=l("OPDMedications"),_=l("Medication"),C=l("ion-content"),S=l("ion-button"),p=l("ion-col"),y=l("ion-row"),$=l("ion-footer");return u(),v(F,null,[e(d,{style:{display:"flex","justify-content":"space-between"}},{default:o(()=>[e(r,{class:"modalTitle"},{default:o(()=>[a("div",Dn,[e(i,{icon:t.medkit,class:"ion-margin-end"},null,8,["icon"]),n[1]||(n[1]=a("span",null,"Add Other Medication",-1))])]),_:1}),e(i,{onClick:n[0]||(n[0]=M=>t.dismiss()),style:{"padding-top":"10px","padding-right":"10px"},icon:t.iconsContent.cancel},null,8,["icon"])]),_:1}),e(C,{fullscreen:!0,class:"ion-padding",style:{"--background":"#fff"}},{default:o(()=>[a("div",yn,[a("div",$n,[e(m,{onDrugSelected:t.addSearchedDrug},null,8,["onDrugSelected"]),e(_,{"use-default-stores":!1})])])]),_:1}),e($,{collapse:"fade",class:"ion-no-border"},{default:o(()=>[e(y,null,{default:o(()=>[e(p,null,{default:o(()=>[e(S,{onClick:t.onAdd,color:"primary",style:{float:"right","margin-bottom":"20px","margin-right":"20px"}},{default:o(()=>[e(i,{icon:t.checkmark,slot:"start"},null,8,["icon"]),n[2]||(n[2]=k(" Add ",-1))]),_:1},8,["onClick"])]),_:1})]),_:1})]),_:1})],64)}const Sn=E(bn,[["render",Cn],["__scopeId","data-v-dee50533"]]),wn=V({name:"Home",components:{IonContent:q,IonHeader:X,IonPage:ve,IonToolbar:Y,Toolbar:wt,IonRow:Z,IonAccordion:ae,IonAccordionGroup:se,IonItem:G,IonLabel:O,DynamicList:At,IonCard:ee},data(){const t=w(0),n=w("Show more medications"),g=w(!1),f=w();return{componentKey:t,accordionGroupChange:r=>{const d=r.detail.value;d!==void 0?d=="second"&&(n.value="Show less medications",g.value=!g.value):(n.value="Show more medications",g.value=!g.value)},showMoreMedicationsMsg:n,itemWasExpanded:g,accordionGroupChangeFn1:r=>{},PreviuosSelectedMedicalDrugsList:f,loadPreviousMedications:async()=>{const r=new ke,{previousDrugPrescriptions:d}=await r.getPatientEncounters();f.value=d}}},computed:{...U(W,["patient"]),...U(me,["selectedNCDMedicationList"])},$route:{async handler(){},deep:!0},watch:{patient:{handler(){this.loadPreviousMedications()},deep:!0},selectedNCDMedicationList:{handler(){this.loadPreviousMedications()},deep:!0}},async mounted(){this.loadPreviousMedications()}}),Mn={style:{}},In={class:"ion-padding",slot:"content"},kn={key:0},Nn={class:"previousSecDrgs"},Pn={class:"ion-padding",slot:"content"},On={key:0},Ln={class:"previousSecDrgs"};function An(t,n,g,f,h,s){const i=l("ion-label"),r=l("ion-item"),d=l("dynamic-list"),m=l("ion-accordion"),_=l("ion-accordion-group"),C=l("ion-card");return u(),R(C,null,{default:o(()=>[a("div",Mn,[e(_,{ref:"accordionGroup",class:"previousView",onIonChange:t.accordionGroupChangeFn1},{default:o(()=>[e(m,{value:"first","toggle-icon-slot":"start",style:{"border-radius":"10px","background-color":"#fff"}},{default:o(()=>[e(r,{slot:"header",color:"light"},{default:o(()=>[e(i,{class:"previousLabel"},{default:o(()=>[...n[0]||(n[0]=[k("Documented medications timeline",-1)])]),_:1})]),_:1}),a("div",In,[(u(!0),v(F,null,B(t.PreviuosSelectedMedicalDrugsList,(S,p)=>(u(),v("div",{class:"ionLbltp",key:p},[p==0?(u(),v("div",kn,[a("div",null,[e(i,{class:"previousLabelDate"},{default:o(()=>[k(x(S.prescriptionDate),1)]),_:2},1024)]),a("div",Nn,[(u(),R(d,{_selectedMedicalDrugsList:S.previousPrescriptions,show_actions_buttons:!1,key:t.componentKey},null,8,["_selectedMedicalDrugsList"]))])])):H("",!0)]))),128)),e(_,{onIonChange:t.accordionGroupChange},{default:o(()=>[e(m,{value:"second","toggle-icon-slot":"start",style:{"border-radius":"10px","background-color":"#fff"}},{default:o(()=>[e(r,{slot:"header",color:"light"},{default:o(()=>[e(i,{class:"",color:"primary"},{default:o(()=>[k(x(t.showMoreMedicationsMsg),1)]),_:1})]),_:1}),a("div",Pn,[(u(!0),v(F,null,B(t.PreviuosSelectedMedicalDrugsList,(S,p)=>(u(),v("div",{class:"ionLbltp",key:p},[t.itemWasExpanded&&p>0?(u(),v("div",On,[a("div",null,[e(i,{class:"previousLabelDate"},{default:o(()=>[k(x(S.prescriptionDate),1)]),_:2},1024)]),a("div",Ln,[(u(),R(d,{_selectedMedicalDrugsList:S.previousPrescriptions,show_actions_buttons:!1,key:t.componentKey},null,8,["_selectedMedicalDrugsList"]))])])):H("",!0)]))),128))])]),_:1})]),_:1},8,["onIonChange"])])]),_:1})]),_:1},8,["onIonChange"])])]),_:1})}const Tn=E(wn,[["render",An],["__scopeId","data-v-1db96250"]]),Fn=V({name:"PrescriptionTable",components:{IonCard:ee,IonCardHeader:Me,IonButton:we,IonCardTitle:Ee,IonCardContent:Se,IonInput:le,IonIcon:z,IonCol:de,IonRow:Z,IonCheckbox:xe,Medication:Ue,MedicationHistory:Tn},setup(){return{openAddOtherOPDMedicationModal:async()=>{await Je(Sn,{class:"large-modal"},!0,{})},medkit:Ie}}});function Vn(t,n,g,f,h,s){const i=l("Medication"),r=l("ion-icon"),d=l("ion-button"),m=l("ion-col"),_=l("ion-row"),C=l("MedicationHistory"),S=l("IonCol"),p=l("ion-card-content"),y=l("ion-card");return u(),R(y,null,{default:o(()=>[e(p,null,{default:o(()=>[e(i),e(_,null,{default:o(()=>[e(m,null,{default:o(()=>[e(d,{onClick:t.openAddOtherOPDMedicationModal,color:"primary",style:{float:"right"}},{default:o(()=>[e(r,{icon:t.medkit,slot:"start"},null,8,["icon"]),n[0]||(n[0]=a("span",{style:{"margin-left":"10px","font-size":"16px","font-weight":"600"}}," ADD Other Medication",-1))]),_:1},8,["onClick"])]),_:1})]),_:1}),e(_,null,{default:o(()=>[e(S,null,{default:o(()=>[e(C)]),_:1})]),_:1})]),_:1})]),_:1})}const xn=E(Fn,[["render",Vn],["__scopeId","data-v-a4ad7088"]]),En={style:{"margin-top":"14px","margin-left":"10px"}},Bn={class:"ion-padding",slot:"content"},Hn={key:0},Gn={class:"previousSecDrgs"},Rn={class:"ion-padding",slot:"content"},Jn={class:"previousSecDrgs"},Un=V({watch:{},name:"xxxComponent"}),jn=V({...Un,setup(t){const n=w(),g=w(),f=w(!1),h=w(!1),s=w("Show more notes");re(async()=>{const d=new ke,{previousClinicalNotes:m}=await d.getPatientEncounters();n.value=Object.entries(m)[0];const[,..._]=Object.entries(m);g.value=_});function i(d){const m=d.detail.value;m!==void 0?m=="third"&&(s.value="Show less notes",h.value=!f.value):(s.value="Show more notes",h.value=!f.value)}function r(d){return d[1]}return(d,m)=>(u(),R(c(ee),null,{default:o(()=>[a("div",En,[e(c(se),{ref:"accordionGroup",class:"previousView"},{default:o(()=>[e(c(ae),{value:"fourth","toggle-icon-slot":"start",style:{"border-radius":"10px","background-color":"#fff"}},{default:o(()=>[e(c(G),{slot:"header",color:"light"},{default:o(()=>[e(c(O),{class:"previousLabel"},{default:o(()=>[...m[0]||(m[0]=[k("Previous visits notes",-1)])]),_:1})]),_:1}),a("div",Bn,[(u(!0),v(F,null,B(n.value,(_,C)=>(u(),v("div",{class:"ionLbltp",key:C},[C==1?(u(),v("div",Hn,[(u(!0),v(F,null,B(_,(S,p)=>(u(),v("div",{key:p},[a("div",null,[e(c(O),{class:"previousLabelDate"},{default:o(()=>[k(x(S.date),1)]),_:2},1024)]),a("div",Gn,[e(c(j),null,{default:o(()=>[e(c(O),{class:"notes_p"},{default:o(()=>[k(x(S.notes),1)]),_:2},1024)]),_:2},1024)])]))),128))])):H("",!0)]))),128)),e(c(se),{onIonChange:i},{default:o(()=>[e(c(ae),{value:"third","toggle-icon-slot":"start",style:{"border-radius":"10px","background-color":"#fff"}},{default:o(()=>[e(c(G),{slot:"header",color:"light"},{default:o(()=>[e(c(O),{class:"",color:"primary"},{default:o(()=>[k(x(s.value),1)]),_:1})]),_:1}),a("div",Rn,[(u(!0),v(F,null,B(g.value,(_,C)=>(u(),v("div",{class:"ionLbltp",key:C},[(u(!0),v(F,null,B(r(_),(S,p)=>(u(),v("div",{key:p},[a("div",null,[e(c(O),{class:"previousLabelDate"},{default:o(()=>[k(x(S.date),1)]),_:2},1024)]),a("div",Jn,[e(c(j),null,{default:o(()=>[e(c(O),{class:"notes_p"},{default:o(()=>[k(x(S.notes),1)]),_:2},1024)]),_:2},1024)])]))),128))]))),128))])]),_:1})]),_:1})])]),_:1})]),_:1},512)])]),_:1}))}}),zn=E(jn,[["__scopeId","data-v-994df42d"]]),Wn={style:{"margin-top":"14px","margin-left":"10px"}},qn=V({watch:{},name:"xxxComponent"}),Kn=V({...qn,setup(t){const n=fe(),g=te,f=oe(()=>n.nonPharmalogicalTherapyAndOtherNotes);function h(i){let r=i.target.value;s(r)}function s(i){fe().setNonPharmalogicalTherapyAndOtherNotes(i)}return(i,r)=>(u(),R(c(ee),null,{default:o(()=>[e(c(Me),null,{default:o(()=>[e(c(O),{class:"tpStndCls"},{default:o(()=>[e(c(z),{icon:c(lt),class:"header-icon","aria-hidden":"true"},null,8,["icon"]),r[1]||(r[1]=k(" Non-pharmalogical therapy and other notes ",-1))]),_:1})]),_:1}),e(c(Se),null,{default:o(()=>[a("div",null,[e(Tt),e(c(G),{class:"input_item",style:{"min-height":"120px","margin-top":"14px"}},{default:o(()=>[e(c(O),null,{default:o(()=>[e(c(z),{slot:"start",icon:c(g).editPen,"aria-hidden":"true"},null,8,["icon"])]),_:1}),e(c(rt),{onIonInput:h,modelValue:f.value,"onUpdate:modelValue":r[0]||(r[0]=d=>f.value=d),style:{"min-height":"120px"},class:"inputTpln","auto-grow":!0,fill:"outline"},null,8,["modelValue"])]),_:1})]),a("div",Wn,[e(zn)])]),_:1})]),_:1}))}}),Qn=E(Kn,[["__scopeId","data-v-fd19ec21"]]),Yn={class:"ion-padding",slot:"content"},Xn={key:0},Zn={class:"previousSecDrgs"},eo={class:"ion-padding",slot:"content"},to={class:"previousSecDrgs"},no=V({watch:{},name:"xxxComponent"}),oo=V({...no,setup(t){const n=w(!1),g=w(!1),f=w("Show more allergies"),h=w(),s=w();re(async()=>{const d=new ke,{previousDrugAllergies:m}=await d.getPatientEncounters();h.value=Object.entries(m)[0];const[,..._]=Object.entries(m);s.value=_});function i(d){const m=d.detail.value;m!==void 0?m=="fith"&&(f.value="Show less allegies",g.value=!n.value):(f.value="Show more allegies",g.value=!n.value)}function r(d){return d[1]}return(d,m)=>{const _=l("ion-card");return u(),R(_,null,{default:o(()=>[e(c(se),{ref:"accordionGroup",class:"previousView"},{default:o(()=>[e(c(ae),{value:"fourth","toggle-icon-slot":"start",style:{"border-radius":"10px","background-color":"#fff"}},{default:o(()=>[e(c(G),{slot:"header",color:"light"},{default:o(()=>[e(c(O),{class:"previousLabel"},{default:o(()=>[...m[0]||(m[0]=[k("Documented allergies timeline",-1)])]),_:1})]),_:1}),a("div",Yn,[(u(!0),v(F,null,B(h.value,(C,S)=>(u(),v("div",{class:"ionLbltp",key:S},[S==1?(u(),v("div",Xn,[a("div",null,[e(c(O),{class:"previousLabelDate"},{default:o(()=>[k(x(C[0].date),1)]),_:2},1024)]),(u(!0),v(F,null,B(C,(p,y)=>(u(),v("div",{key:y},[a("div",Zn,[e(c(j),null,{default:o(()=>[e(c(O),{class:"notes_p"},{default:o(()=>[k(x(p.value),1)]),_:2},1024)]),_:2},1024)])]))),128))])):H("",!0)]))),128)),e(c(se),{onIonChange:i},{default:o(()=>[e(c(ae),{value:"fith","toggle-icon-slot":"start",style:{"border-radius":"10px","background-color":"#fff"}},{default:o(()=>[e(c(G),{slot:"header",color:"light"},{default:o(()=>[e(c(O),{class:"",color:"primary"},{default:o(()=>[k(x(f.value),1)]),_:1})]),_:1}),a("div",eo,[(u(!0),v(F,null,B(s.value,(C,S)=>(u(),v("div",{class:"ionLbltp",key:S},[a("div",null,[e(c(O),{class:"previousLabelDate"},{default:o(()=>[k(x(C[0]),1)]),_:2},1024)]),(u(!0),v(F,null,B(r(C),(p,y)=>(u(),v("div",{key:y},[a("div",to,[e(c(j),null,{default:o(()=>[e(c(O),{class:"notes_p"},{default:o(()=>[k(x(p.value),1)]),_:2},1024)]),_:2},1024)])]))),128))]))),128))])]),_:1})]),_:1})])]),_:1})]),_:1},512)]),_:1})}}}),so=E(oo,[["__scopeId","data-v-358c5959"]]),ao={class:"background"},io={key:0},lo={style:{margin:"10px"}},ro={key:1},co={style:{margin:"10px"}},uo={key:2},po={style:{margin:"10px"}},_o=V({__name:"TreatmentPlan",setup(t){const n=w(["medications","allergies","other_notes"]),g=w(n.value[0]);re(()=>{f(n.value[0])});function f(h){g.value=h}return(h,s)=>(u(),v("div",ao,[e(c(dt),{value:g.value,style:{"margin-top":"5px"}},{default:o(()=>[e(c(he),{value:"medications",onClick:s[0]||(s[0]=i=>f(n.value[0]))},{default:o(()=>[e(c(O),null,{default:o(()=>[...s[3]||(s[3]=[k("Medications",-1)])]),_:1})]),_:1}),e(c(he),{value:"allergies",onClick:s[1]||(s[1]=i=>f(n.value[1]))},{default:o(()=>[e(c(O),null,{default:o(()=>[...s[4]||(s[4]=[k("Allergies",-1)])]),_:1})]),_:1}),e(c(he),{value:"other_notes",onClick:s[2]||(s[2]=i=>f(n.value[2]))},{default:o(()=>[e(c(O),null,{default:o(()=>[...s[5]||(s[5]=[k("Non-pharmalogical therapy and other notes",-1)])]),_:1})]),_:1})]),_:1},8,["value"]),g.value===n.value[0]?(u(),v("div",io,[a("div",lo,[e(xn)])])):H("",!0),g.value===n.value[1]?(u(),v("div",ro,[a("div",co,[e(Ft),e(so,{style:{"margin-top":"10px"}})])])):H("",!0),g.value===n.value[2]?(u(),v("div",uo,[a("div",po,[e(Qn)])])):H("",!0)]))}}),Io=E(_o,[["__scopeId","data-v-d844be41"]]);export{Mo as C,wo as D,Io as T};
