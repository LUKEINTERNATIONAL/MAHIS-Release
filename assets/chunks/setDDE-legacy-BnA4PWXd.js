System.register(["./vendor-legacy-IGuUoRYO.js","./OutcomeModal-legacy-DjQqO56A.js","../index-legacy-CPN3hcLt.js","./BasicForm-legacy-B3YpG0XM.js","./FacilityInformationBar-legacy-fTLCr6f9.js","./lodash-legacy-pOOc9Efu.js","./apexcharts-legacy-w_Qe4jnt.js","./DateInputField-legacy-DgLPZlDc.js"],function(a,e){"use strict";var t,d,s,l,n,o,i,u,r,c,_,f,D,p,g,y,h,m,S,b,v,E,I,w,x,C,H,P,L,j,F,$,k,M,B,T,U,z,A,Y,G,N;return{setters:[a=>{t=a.d,d=a.ax,s=a.aq,l=a.bq,n=a.b9,o=a.ay,i=a.az,u=a.aA,r=a.ak,c=a.al,_=a.K,f=a.L,D=a.z,p=a.G,g=a.Q,y=a.f,h=a.H,m=a.e,S=a.m,b=a.l,v=a.k,E=a.a3,I=a.I,w=a.p},a=>{x=a.D},a=>{C=a.F,H=a.T,P=a.H,L=a.a2,j=a.S,F=a.G,$=a.t,k=a.a1,M=a.a7,B=a.o,T=a.a8,U=a.U,z=a.a9,A=a.n,Y=a._},a=>{G=a.B},a=>{N=a.F},null,null,null],execute:function(){var e=document.createElement("style");e.textContent=".ddeStatusContent[data-v-8831d8d6]{font-weight:700;font-size:16px;padding:2px}.ddeStatusHeader[data-v-8831d8d6]{font-size:16px;padding:2px}.demographics_title[data-v-8831d8d6]{font-weight:700;font-size:24px}.gender[data-v-8831d8d6]{display:flex;justify-content:space-between;max-width:170px;padding-top:10px}.gender_title[data-v-8831d8d6]{margin-top:30px}.positionCenter[data-v-8831d8d6]{width:100%;margin-top:20px;display:flex;justify-content:center;align-items:center}\n/*$vite$:1*/",document.head.appendChild(e);const V=t({name:"Menu",components:{IonContent:f,IonHeader:_,IonItem:c,IonList:r,IonMenu:u,IonTitle:i,IonToolbar:o,BasicForm:G,Toolbar:H,DynamicButton:C,IonFooter:n,IonPage:l,FacilityInformationBar:N,IonToggle:s},data:()=>({cardData:{},inputField:"",isDDEEnabled:!0,setName:"",initialPersonalData:[],iconsContent:A,apiDate:"",date:"",DDE:{},isLoading:!1}),computed:{...d(z,["sessionDate"]),...d(U,["globalPropertyStore"])},watch:{globalPropertyStore:{async handler(){await this.setDDEStatus()},deep:!0},$route:{async handler(){await this.ddeData()},deep:!0}},async mounted(){try{this.isLoading=!1,await U().loadDDEStatus(),this.apiDate=await j.getApiDate(),await this.ddeData(),this.date=L(this.sessionDate,"sessionDate","value"),this.isLoading=!1}catch(a){console.log(a)}},methods:{async setDDEStatus(){const a=U();await a.setGlobalProperty("dde_enabled",`${this.globalPropertyStore.dde_enabled}`),await this.ddeData()},async ddeData(){if("true"===this.globalPropertyStore.dde_enabled)try{const a=(await T.getRemainingNpids()).npid_status[0],e=a.unassigned,t=a.avg_consumption_rate_per_day||1;this.DDE={id:a.location_id,avg:t,unassigned:a.unassigned,assigned:a.assigned,daysLeft:Math.floor(e/t),allocated:a.allocated,unallocated:a.unallocated,lastUpdated:D(a.date_last_updated).format("DD/MMM/YYYY HH:mm:ss"),title:a.location_name+" DDE NPID Status"}}catch(a){}},openModal(){B(x)},S(a){return M(this.sessionDate,a.name,this[a.name])},handleInputData(){},async resetSessionDate(){k(this.sessionDate,"sessionDate","value","");try{await j.resetSessionDate(),F(`Session date has been reset to ${this.formatDate(this.apiDate)}`),this.redirect()}catch(a){$(`${a}`)}},redirect(){this.$router.back()},async onSubmit(){this.date=L(this.sessionDate,"sessionDate","value");try{await j.setSessionDate(this.date),F(`Successfully Back dated to ${this.formatDate(this.date)}`),this.redirect()}catch(a){$(`${a}`)}},formatDate:a=>P.toStandardHisDisplayFormat(a)}}),q={key:0,class:"spinner-overlay"},K={key:0,class:"positionCenter"},O={class:"card_content"},Q={key:1,class:"positionCenter"},R={class:"card_content"},J={class:"card_hearder"},W={key:2};a("default",Y(V,[["render",function(a,e,t,d,s,l){const n=p("ion-spinner"),o=p("Toolbar"),i=p("ion-toggle"),u=p("ion-card"),r=p("ion-row"),c=p("ion-col"),_=p("ion-content"),f=p("ion-page");return y(),g(f,{class:w({loading:a.isLoading})},{default:h(()=>[a.isLoading?(y(),m("div",q,[b(n,{name:"bubbles"}),e[1]||(e[1]=v("div",{class:"loading-text"},"Please wait...",-1))])):S("",!0),b(o),b(_,{fullscreen:!0},{default:h(()=>[a.globalPropertyStore.dde_enabled?S("",!0):(y(),m("div",K,[b(u,{class:"registration_ion_card"},{default:h(()=>[v("div",O,[e[3]||(e[3]=v("div",{class:"card_hearder"},"Set DDE",-1)),b(i,{"enable-on-off-labels":!0,modelValue:a.globalPropertyStore.dde_enabled,"onUpdate:modelValue":e[0]||(e[0]=e=>a.globalPropertyStore.dde_enabled=e)},{default:h(()=>[...e[2]||(e[2]=[E("Enable DDE",-1)])]),_:1},8,["modelValue"])])]),_:1})])),"true"==a.globalPropertyStore.dde_enabled?(y(),m("div",Q,[b(u,{class:"registration_ion_card"},{default:h(()=>[v("div",R,[v("div",J,I(a.DDE.title),1),b(r,null,{default:h(()=>[b(c,null,{default:h(()=>[b(r,{class:"ddeStatusHeader"},{default:h(()=>[...e[4]||(e[4]=[E("Location ID",-1)])]),_:1})]),_:1}),b(c,null,{default:h(()=>[b(r,{class:"ddeStatusContent"},{default:h(()=>[E(I(a.DDE.id),1)]),_:1})]),_:1})]),_:1}),b(r,null,{default:h(()=>[b(c,null,{default:h(()=>[b(r,{class:"ddeStatusHeader"},{default:h(()=>[...e[5]||(e[5]=[E("Estimated days left",-1)])]),_:1})]),_:1}),b(c,null,{default:h(()=>[b(r,{class:"ddeStatusContent"},{default:h(()=>[E(I(a.DDE.avg),1)]),_:1})]),_:1})]),_:1}),b(r,null,{default:h(()=>[b(c,null,{default:h(()=>[b(r,{class:"ddeStatusHeader"},{default:h(()=>[...e[6]||(e[6]=[E("Unassigned",-1)])]),_:1})]),_:1}),b(c,null,{default:h(()=>[b(r,{class:"ddeStatusContent"},{default:h(()=>[E(I(a.DDE.unassigned),1)]),_:1})]),_:1})]),_:1}),b(r,null,{default:h(()=>[b(c,null,{default:h(()=>[b(r,{class:"ddeStatusHeader"},{default:h(()=>[...e[7]||(e[7]=[E("Assigned",-1)])]),_:1})]),_:1}),b(c,null,{default:h(()=>[b(r,{class:"ddeStatusContent"},{default:h(()=>[E(I(a.DDE.assigned),1)]),_:1})]),_:1})]),_:1}),b(r,null,{default:h(()=>[b(c,null,{default:h(()=>[b(r,{class:"ddeStatusHeader"},{default:h(()=>[...e[8]||(e[8]=[E("Unallocated",-1)])]),_:1})]),_:1}),b(c,null,{default:h(()=>[b(r,{class:"ddeStatusContent"},{default:h(()=>[E(I(a.DDE.unallocated),1)]),_:1})]),_:1})]),_:1}),b(r,null,{default:h(()=>[b(c,null,{default:h(()=>[b(r,{class:"ddeStatusHeader"},{default:h(()=>[...e[9]||(e[9]=[E("Allocated",-1)])]),_:1})]),_:1}),b(c,null,{default:h(()=>[b(r,{class:"ddeStatusContent"},{default:h(()=>[E(I(a.DDE.allocated),1)]),_:1})]),_:1})]),_:1}),b(r,null,{default:h(()=>[b(c,null,{default:h(()=>[b(r,{class:"ddeStatusHeader"},{default:h(()=>[...e[10]||(e[10]=[E("Average consumption per day",-1)])]),_:1})]),_:1}),b(c,null,{default:h(()=>[b(r,{class:"ddeStatusContent"},{default:h(()=>[E(I(a.DDE.daysLeft),1)]),_:1})]),_:1})]),_:1}),b(r,null,{default:h(()=>[b(c,null,{default:h(()=>[b(r,{class:"ddeStatusHeader"},{default:h(()=>[...e[11]||(e[11]=[E("Last update",-1)])]),_:1})]),_:1}),b(c,null,{default:h(()=>[b(r,{class:"ddeStatusContent"},{default:h(()=>[E(I(a.DDE.lastUpdated),1)]),_:1})]),_:1})]),_:1})])]),_:1})])):(y(),m("div",W,[...e[12]||(e[12]=[v("div",{class:"card_hearder"},"DDE is disabled",-1)])]))]),_:1})]),_:1},8,["class"])}],["__scopeId","data-v-8831d8d6"]]))}}});
