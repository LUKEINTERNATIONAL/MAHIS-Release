var Bt=Object.defineProperty;var Lt=(n,u,d)=>u in n?Bt(n,u,{enumerable:!0,configurable:!0,writable:!0,value:d}):n[u]=d;var F=(n,u,d)=>Lt(n,typeof u!="symbol"?u+"":u,d);import{d as M,O as k,f as r,u as c,aS as O,p as H,J as l,l as m,aP as K,k as i,e as f,m as ft,K as v,c as j,Q as A,bo as zt,an as Pt,r as B,a as Ht,a4 as ut,F as L,P as z,a5 as dt,bm as mt,I as Rt,G as Et,E as Ft,a_ as jt,N as Gt,a3 as _t,bi as Ot,a6 as Kt}from"./vendor-D6KKOjhr.js";import{_ as x,T as Qt}from"../index-BVTwk_Db.js";import{N as Ut}from"./neonatal_service-Cc943_1e.js";import{I as h}from"./images-DCsUI3iU.js";import"./lodash-NJiRuGo9.js";import"./apexcharts-DipIgGe9.js";const I=class I{constructor(){F(this,"statusColorMap",{admitted:"danger",discharged:"success",critical:"warning"})}getStatusColor(u){var d;return(d=this.statusColorMap[u.toLowerCase()])!=null?d:"medium"}formatWeight(u){return"".concat((u/1e3).toFixed(2)," kg")}static getInstance(){return I.instance||(I.instance=new I),I.instance}};F(I,"instance");let G=I;const Wt=G.getInstance(),P=[{label:"Triaged without Registration",key:"enrolled",iconSrc:h.icons.triaged},{label:"Admitted Today",key:"admitted",iconSrc:h.icons.newborn},{label:"Discharged Today",key:"discharged",iconSrc:h.icons.babyCarriage},{label:"Critical",key:"critical",iconSrc:h.icons.warningSign,isCritical:!0}],Jt=[{label:"Start Emergency Triage",iconSrc:h.icons.electrocardiogram,iconClass:"emergency-icon",route:"/neonatal/triage"},{label:"Instruction Guides",iconSrc:h.icons.info,route:"/neonatal/guides"}],qt={class:"stat-icon-wrapper"},Xt=["innerHTML"],Yt=["src","alt"],Zt={class:"stat-label"},Vt=M({__name:"card",props:{label:{},value:{},iconSrc:{},svgIcon:{},isCritical:{type:Boolean},clickable:{type:Boolean}},emits:["click"],setup(n,{emit:u}){const d=n,S=u,_=()=>{d.clickable&&S("click")};return(b,N)=>(r(),k(c(O),{class:H(["stat-card",{"is-clickable":n.clickable}]),onClick:_},{default:l(()=>[m(c(K),{class:"stat-content"},{default:l(()=>[i("div",qt,[n.svgIcon?(r(),f("div",{key:0,innerHTML:n.svgIcon,class:"stat-icon"},null,8,Xt)):n.iconSrc?(r(),f("img",{key:1,src:n.iconSrc,class:"stat-icon critical-icon",alt:n.label},null,8,Yt)):ft("",!0)]),i("div",Zt,v(n.label),1),i("div",{class:H(["stat-value",{"critical-value":n.isCritical}])},v(n.value),3)]),_:1})]),_:1},8,["class"]))}}),pt=x(Vt,[["__scopeId","data-v-cc8c780a"]]),yt={class:"action-icon-wrapper"},te=["innerHTML"],ee=["src","alt"],se={class:"action-label"},ne=M({__name:"action-card",props:{label:{},svgIcon:{},iconSrc:{},iconClass:{}},emits:["click"],setup(n,{emit:u}){const d=u,S=()=>{d("click")};return(_,b)=>(r(),k(c(O),{class:"action-card",onClick:S},{default:l(()=>[m(c(K),{class:"action-content"},{default:l(()=>[i("div",yt,[n.svgIcon?(r(),f("div",{key:0,innerHTML:n.svgIcon,class:H(["action-icon",n.iconClass])},null,10,te)):n.iconSrc?(r(),f("img",{key:1,src:n.iconSrc,class:H(["action-icon",n.iconClass]),alt:n.label},null,10,ee)):ft("",!0)]),i("div",se,v(n.label),1)]),_:1})]),_:1}))}}),ce=x(ne,[["__scopeId","data-v-fc22b927"]]),oe={class:"neonate-info"},ae={class:"neonate-name"},ie={class:"neonate-mrn"},le={class:"neonate-details"},re={class:"detail-item"},ue=["src"],de={class:"detail-item"},me=["src"],ge={class:"neonate-status"},fe=M({__name:"neonate-card",props:{neonate:{},getStatusColor:{type:Function}},emits:["click"],setup(n,{emit:u}){const d=n,S=u,_=j(()=>d.getStatusColor(d.neonate.status)),b=()=>{S("click",d.neonate.id)};return(N,$)=>(r(),k(c(O),{class:"neonate-card",onClick:b},{default:l(()=>[m(c(K),{class:"neonate-content"},{default:l(()=>[i("div",oe,[i("div",ae,v(n.neonate.name),1),i("div",ie,v(n.neonate.mrn),1),i("div",le,[i("span",re,[i("img",{src:c(h).icons.deliveryTime,class:"detail-icon"},null,8,ue),A(" "+v(n.neonate.age),1)]),i("span",de,[i("img",{src:c(h).icons.babyWeight,class:"detail-icon"},null,8,me),A(" "+v(n.neonate.weight),1)])])]),i("div",ge,[m(c(zt),{color:_.value,class:"status-badge"},{default:l(()=>[A(v(n.neonate.status),1)]),_:1},8,["color"])])]),_:1})]),_:1}))}}),gt=x(fe,[["__scopeId","data-v-a76e5897"]]),_e={class:"neonatal-dashboard"},ve={class:"header-image"},he=["src"],be={class:"section-container"},Ce={class:"section-container"},ke={class:"section-container"},Se={key:0,class:"neonates-list"},$e={key:1,class:"empty-neonates"},Ie={class:"drilldown-content"},we={key:0,class:"empty-drilldown"},Ne={key:1,class:"drilldown-list"},Te=M({__name:"LandingPage",setup(n){const u={enrolled:"In patient",admitted:"Admitted",discharged:"Discharged",critical:"Critical"},d=()=>P.reduce((t,e)=>(t[e.key]={count:0,neonates:[]},t),{}),S=Pt(),_=B(d()),b=B([]),N=B(!1),$=B(null),D=j(()=>{var t,e;return $.value?(e=(t=_.value[$.value])==null?void 0:t.neonates)!=null?e:[]:[]}),vt=t=>{var e,s;return t&&(s=(e=P.find(o=>o.key===t))==null?void 0:e.label)!=null?s:"Neonates"},ht=j(()=>{const t=vt($.value);return D.value.length?"".concat(t," (").concat(D.value.length,")"):t}),bt=t=>{var e,s;return(s=(e=_.value[t])==null?void 0:e.count)!=null?s:0},Q=t=>{var e,s;return((s=(e=_.value[t])==null?void 0:e.neonates.length)!=null?s:0)>0},Ct=t=>{Q(t)&&($.value=t,N.value=!0)},U=()=>{N.value=!1,$.value=null},W=t=>{S.push({path:t})},J=t=>{W("/patientProfile?id=".concat(t))},q=t=>Wt.getStatusColor(t),kt=async()=>{try{const t=await Ut.getStatistics();_.value=St(t),Tt()}catch(t){console.error("[NeonatalLanding] Failed to load statistics",t),_.value=d(),b.value=[]}},St=t=>{const e=d();return P.forEach(s=>{var C,w;const o=s.key,g=(w=t==null?void 0:t[o])!=null?w:(C=t==null?void 0:t.stats)==null?void 0:C[o],a=$t(t,o);e[o]=It(g,a,o)}),e},$t=(t,e)=>{var o,g,a,C,w;return t?(w=[(o=t==null?void 0:t.neonates)==null?void 0:o[e],(g=t==null?void 0:t.details)==null?void 0:g[e],t==null?void 0:t["".concat(e,"_neonates")],t==null?void 0:t["".concat(e,"_patients")],t==null?void 0:t["".concat(e,"_records")],(a=t==null?void 0:t[e])==null?void 0:a.neonates,(C=t==null?void 0:t[e])==null?void 0:C.patients].find(E=>Array.isArray(E)))!=null?w:[]:[]},It=(t,e,s)=>{if(typeof t=="number")return{count:t,neonates:R(e,s)};if(t&&typeof t=="object"){const g=Array.isArray(t.neonates)?t.neonates:Array.isArray(t.patients)?t.patients:e,a=R(g,s);return{count:typeof t.count=="number"?t.count:typeof t.total=="number"?t.total:typeof t.value=="number"?t.value:a.length,neonates:a}}const o=R(e,s);return{count:o.length,neonates:o}},R=(t,e)=>Array.isArray(t)?t.map((s,o)=>wt(s,e,o)):[],wt=(t,e,s)=>{var X,Y,Z,V,p,y,tt,et,st,nt,ct,ot,at,it,lt,rt;const o=u[e],g="".concat(e,"-").concat(s);if(t!=null&&t.name&&(t!=null&&t.mrn))return{id:String((X=t.id)!=null?X:g),name:t.name,mrn:t.mrn,age:(Y=t.age)!=null?Y:"—",weight:(Z=t.weight)!=null?Z:"—",status:(V=t.status)!=null?V:o};const a=(p=t==null?void 0:t.patient)!=null?p:t,C=(et=(tt=(y=t==null?void 0:t.id)!=null?y:t==null?void 0:t.patient_id)!=null?tt:a==null?void 0:a.patient_id)!=null?et:g,E=[t==null?void 0:t.name,a==null?void 0:a.given_name,a==null?void 0:a.family_name].filter(Boolean).join(" ").trim()||"Unknown Neonate",At=(ct=(nt=(st=t==null?void 0:t.mrn)!=null?st:t==null?void 0:t.identifier)!=null?nt:a==null?void 0:a.identifier)!=null?ct:"N/A",Mt=(at=(ot=t==null?void 0:t.age)!=null?ot:Nt(a==null?void 0:a.birthdate))!=null?at:"—",T=(lt=(it=t==null?void 0:t.weight)!=null?it:t==null?void 0:t.latest_weight)!=null?lt:t==null?void 0:t.weight_kg,xt=typeof T=="number"?"".concat(T.toFixed(2)," Kg"):T!=null?T:"—",Dt=(rt=t==null?void 0:t.status)!=null?rt:o;return{id:String(C),name:E,mrn:At,age:Mt,weight:xt,status:Dt}},Nt=t=>{if(!t)return null;const e=new Date(t);if(Number.isNaN(e.getTime()))return null;const s=Date.now()-e.getTime(),o=Math.floor(s/(1e3*60*60));if(o<24)return"".concat(o," hrs old");const g=Math.floor(o/24);return g<1?"Today":"".concat(g," day").concat(g===1?"":"s"," old")},Tt=()=>{const t=Object.values(_.value).flatMap(e=>e.neonates).slice(0,5);b.value=t};return Ht(()=>{kt()}),(t,e)=>(r(),f("div",_e,[i("div",ve,[i("img",{src:c(h).banners.babyHand,alt:"baby-hand-banner",style:{"object-fit":"cover"}},null,8,he)]),i("div",be,[e[0]||(e[0]=i("h2",{class:"section-title"},"Today's Stats",-1)),m(c(mt),{class:"stats-grid"},{default:l(()=>[m(c(ut),null,{default:l(()=>[(r(!0),f(L,null,z(c(P),s=>(r(),k(c(dt),{key:s.key,size:"6","size-md":"3"},{default:l(()=>[m(pt,{label:s.label,value:bt(s.key),"icon-src":s.iconSrc,"svg-icon":s.svgIcon,"is-critical":s.isCritical,clickable:Q(s.key),onClick:o=>Ct(s.key)},null,8,["label","value","icon-src","svg-icon","is-critical","clickable","onClick"])]),_:2},1024))),128))]),_:1})]),_:1})]),i("div",Ce,[e[1]||(e[1]=i("h2",{class:"section-title"},"Quick Actions",-1)),m(c(mt),{class:"actions-grid"},{default:l(()=>[m(c(ut),null,{default:l(()=>[(r(!0),f(L,null,z(c(Jt),s=>(r(),k(c(dt),{key:s.route,size:"6","size-md":"6"},{default:l(()=>[m(ce,{label:s.label,"svg-icon":s.svgIcon,"icon-src":s.iconSrc,"icon-class":s.iconClass,onClick:o=>W(s.route)},null,8,["label","svg-icon","icon-src","icon-class","onClick"])]),_:2},1024))),128))]),_:1})]),_:1})]),i("div",ke,[e[2]||(e[2]=i("h2",{class:"section-title"},"Recent Neonates",-1)),b.value.length?(r(),f("div",Se,[(r(!0),f(L,null,z(b.value,s=>(r(),k(gt,{key:s.id,neonate:s,"get-status-color":q,onClick:J},null,8,["neonate"]))),128))])):(r(),f("div",$e," No recent neonates to display. "))]),m(c(Ot),{"is-open":N.value,onDidDismiss:U,class:"drilldown-modal"},{default:l(()=>[m(c(Rt),null,{default:l(()=>[m(c(Et),null,{default:l(()=>[m(c(Ft),null,{default:l(()=>[A(v(ht.value),1)]),_:1}),m(c(jt),{slot:"end"},{default:l(()=>[m(c(Gt),{fill:"clear",onClick:U},{default:l(()=>[...e[3]||(e[3]=[A("Close",-1)])]),_:1})]),_:1})]),_:1})]),_:1}),m(c(_t),null,{default:l(()=>[i("div",Ie,[D.value.length?(r(),f("div",Ne,[(r(!0),f(L,null,z(D.value,s=>(r(),k(gt,{key:"".concat($.value,"-").concat(s.id),neonate:s,"get-status-color":q,onClick:J},null,8,["neonate"]))),128))])):(r(),f("div",we," No neonates available for this statistic. "))])]),_:1})]),_:1},8,["is-open"])]))}}),Ae=x(Te,[["__scopeId","data-v-ef019cab"]]),Me=M({__name:"NeonatalHome",setup(n){return(u,d)=>(r(),k(c(Kt),null,{default:l(()=>[m(Qt),m(c(_t),{fullscreen:!0},{default:l(()=>[m(Ae)]),_:1})]),_:1}))}}),Re=x(Me,[["__scopeId","data-v-052dae1c"]]);export{Re as default};
