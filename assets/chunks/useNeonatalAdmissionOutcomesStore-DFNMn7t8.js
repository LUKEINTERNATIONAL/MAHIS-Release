import{d as Yt,b2 as ae,r as b,w as bt,bH as oe,c as f,a as ie,b as re,i as le,v as ue,e as z,f as $,p as de,k as t,m as Ot,u as R,K as n,cx as me,bn as $t,cy as ce,l as ot,J as Et,N as ve,Q as pe,L as fe,aF as ge,D as he}from"./vendor-DXMRec6a.js";import{u as ye,aa as we,J as jt,H as Se,_ as qt,z as be}from"../index-BqLLtAX6.js";import{u as Oe}from"./useNeonatalEnrollmentStore-CRD60qvw.js";import{u as De}from"./useSignsSymptomsStore-BG-7frIT.js";import{u as _e}from"./useNeonatalVitalsStore-DXUND1dz.js";import{j as Ae,k as Pe,x as Ie}from"./NeonatalStepper-CDY_ExGo.js";const Fe={class:"page-header"},Re={class:"logo-container"},Ne=["src"],Me=["src"],Ce={class:"header-meta"},He={class:"facility-name"},xe={class:"facility-details"},Le={class:"patient-meta"},Te={key:0,class:"barcode-container"},Be=["src"],Ve={class:"npid-text"},Ge={class:"print-page"},ke={class:"print-column"},We={class:"print-section"},Ue={class:"field-row"},ze={class:"field-row"},$e={class:"field-row"},Ee={class:"field-row"},je={class:"field-row"},Ye={class:"field-row"},qe={class:"field-row"},Qe={class:"field-row"},Je={class:"field-row"},Xe={class:"field-row"},Ke={class:"field-row"},Ze={class:"print-section"},ts={class:"field-row"},es={class:"field-row"},ss={class:"field-row"},ns={class:"field-row"},as={class:"field-row"},os={class:"field-row"},is={class:"field-row"},rs={class:"field-row"},ls={class:"field-row"},us={class:"print-section"},ds={class:"field-row"},ms={class:"field-row"},cs={class:"field-row"},vs={class:"field-row"},ps={class:"field-row"},fs={class:"field-row"},gs={class:"field-row"},hs={class:"print-section"},ys={class:"field-row"},ws={class:"highlight"},Ss={class:"field-row"},bs={class:"print-column"},Os={class:"print-section"},Ds={class:"field-row"},_s={class:"field-row"},As={class:"field-row"},Ps={class:"field-row"},Is={class:"field-row"},Fs={class:"field-row"},Rs={class:"field-row"},Ns={class:"print-section"},Ms={class:"field-row single-line"},Cs={class:"field-row single-line"},Hs={class:"field-row single-line"},xs={class:"field-row single-line"},Ls={key:0,class:"print-section"},Ts={class:"field-row"},Bs={class:"field-row"},Vs={class:"field-row"},Gs={class:"field-row"},ks={class:"field-row"},Ws={class:"field-row"},Us={class:"field-row"},zs={class:"print-section"},$s={class:"field-row"},Es={class:"field-row"},js={class:"field-row"},Ys={class:"field-row"},qs={class:"print-footer"},Qs=Yt({__name:"PrintableAdmissionForm",props:{forceShow:{type:Boolean,default:!1}},setup(g,{expose:N}){const E=ye(),{patient:d}=ae(E),P=Oe(),w=De(),H=b(!1),rt=()=>{var e,o;const s=(o=(e=d.value)==null?void 0:e.patientID)!=null?o:null;w.initializeForPatient(s)},lt=()=>{const s=w.formData;return s?Array.isArray(s.presenting_complaints)&&s.presenting_complaints.length>0||!!s.detailed_assessment_notes||!!s.symptom_onset_time||!!s.symptom_severity:!1},y=async s=>{var o;const e=(o=d.value)==null?void 0:o.patientID;if(!e)return[];try{const u=await jt.getAll(e,s,Se.sessionDate());return!u||!u.length?[]:(await Promise.all(u.map(l=>jt.resolvePrimaryValue(l)))).map(l=>l==null?"":String(l)).map(l=>l.trim()).filter(l=>l.length>0)}catch(u){return console.warn("[PrintableAdmissionForm] Unable to load ".concat(s," observations"),u),[]}},r=async s=>{const e=await y(s);return e.length>0?e[0]:""},Qt=async()=>{var s;if((s=d.value)!=null&&s.patientID)try{const[e,o,u,m,l,v,_,ht,yt,B,V,G,J,k,W,A,I,xt,U,X,K,S,Z,wt,St,tt,et,st,nt,at]=await Promise.all([r("Twin"),r("Place of birth"),r("Name of birth facility"),r("Type of birth"),r("Birth weight"),r("Gestation"),r("APGAR score at 1 minute"),r("APGAR score at 5 minutes"),r("APGAR score at 10 minutes"),r("Cried after birth"),y("Resuscitation method"),r("Mode of delivery"),r("Rupture of membranes"),r("Duration of rupture of membranes"),r("Offensive liquor"),r("Meconium present"),r("Maternal analgesia"),r("Anaesthesia used"),r("Steroids given"),r("Gestation method of assessment"),r("Mother name"),r("Mother national ID"),r("Mother HIV status"),r("Last HIV test date"),r("Mother VDRL result"),r("Mother Hepatitis result"),y("Tetanus/Diphtheria immunisation"),r("Admitted from"),r("Referred from"),r("Mode of transport")]);dt.value={hasTwin:e,placeOfBirth:o,nameOfBirthFacility:u,typeOfBirth:m,birthWeight:l,gestationWeeks:v,apgarScoreAt1:_,apgarScoreAt5:ht,apgarScoreAt10:yt,criedAfterBirth:B,resuscitationMethods:V,modeOfDelivery:G,ruptureOfMembranes:J,durationOfRuptureMembranes:k,offensiveLiquor:W,meconiumPresent:A,maternalAnalgesia:I,anesthesiaUsed:xt,steroidsGiven:U,gestationMethodAssessment:X,motherName:K,motherNationalId:S,motherHivStatus:Z,lastHivTestDate:wt,motherVdrlResult:St,motherHepatitisResult:tt,tetanusDiphtheria:et,admittedFrom:st,referredFrom:nt,modeOfTransport:at}}catch(e){console.error("[PrintableAdmissionForm] Failed to load enrollment from observations:",e)}},Jt=async()=>{var s;if((s=d.value)!=null&&s.patientID)try{const[e,o,u,m,l,v,_]=await Promise.all([r("Temperature"),r("Heart rate"),r("Respiratory rate"),r("Oxygen saturation"),r("Blood sugar"),r("Weight"),r("Head circumference")]);mt.value={temperature:e,heart_rate:o,respiratory_rate:u,oxygen_saturation:m,blood_sugar:l,current_weight:v,head_circumference:_}}catch(e){console.error("[PrintableAdmissionForm] Failed to load vitals from observations:",e)}},Xt=async()=>{var s;if((s=d.value)!=null&&s.patientID)try{const[e,o,u,m,l,v]=await Promise.all([r("Admission outcome"),r("Safeguard concerns"),r("Healthcare worker ID"),r("User role"),r("Electronic signature"),r("Sign-off date")]);ct.value={admissionOutcome:e,safeguardConcerns:o,healthcareWorkerId:u,userRole:m,electronicSignature:l,signOffDate:v}}catch(e){console.error("[PrintableAdmissionForm] Failed to load admission outcomes from observations:",e)}},Dt=async()=>{var s;if(!(!((s=d.value)!=null&&s.patientID)||vt.value)){vt.value=!0;try{await Promise.all([Qt(),Jt(),Xt(),_t()])}finally{vt.value=!1}}},_t=async()=>{var e;if(!(!((e=d.value)!=null&&e.patientID)||lt()||H.value)){H.value=!0;try{const[o,u,m,l]=await Promise.all([y("Presenting complaint"),y("Signs/Symptoms notes"),y("Symptom onset time"),y("Symptom severity")]),v={};o.length&&(v.presenting_complaints=o),u.length&&(v.detailed_assessment_notes=u[0]),m.length&&(v.symptom_onset_time=m[0]),l.length&&(v.symptom_severity=l[0]),Object.keys(v).length&&(Object.assign(w.formData,v),w.saveSnapshot())}finally{H.value=!1}}};bt(()=>{var s;return(s=d.value)==null?void 0:s.patientID},()=>{rt(),_t()},{immediate:!0});const j=_e(),ut=we(),At=oe(Ae,{}),F=b(!1),x=b(""),dt=b({}),mt=b({}),ct=b({}),vt=b(!1),Pt=new URL(""+new URL("../neotree.4QnvY_lU.png",import.meta.url).href,import.meta.url).href,It="./mw.png",pt=new Map,Kt=Pt,Zt=It,Ft=async s=>s?pt.has(s)?pt.get(s):await new Promise(e=>{const o=new Image;o.crossOrigin="anonymous",o.onload=()=>{try{const u=document.createElement("canvas");u.width=o.width,u.height=o.height;const m=u.getContext("2d");if(!m){e(null);return}m.drawImage(o,0,0);const l=u.toDataURL("image/png");pt.set(s,l),e(l)}catch(u){console.warn("Image toDataURL failed",u),e(null)}},o.onerror=()=>e(null),o.src=s}):null,Y=f(()=>{var e;const s=(e=d.value)==null?void 0:e.personInformation;return s&&"".concat(s.given_name||""," ").concat(s.family_name||"").trim()||"N/A"}),O=f(()=>{var s,e;return((s=d.value)==null?void 0:s.nationalId)||((e=d.value)==null?void 0:e.patientID)||"N/A"}),Rt=f(()=>{var s,e;return((e=(s=d.value)==null?void 0:s.personInformation)==null?void 0:e.gender)||"N/A"}),L=f(()=>{var s,e;return((e=(s=d.value)==null?void 0:s.personInformation)==null?void 0:e.birthdate)||"N/A"}),a=f(()=>{var o;return((o=d.value)==null?void 0:o.patientID)?Object.keys(dt.value).length>0?{...P.enrollmentForm,...dt.value}:P.enrollmentForm||{}:{}}),D=f(()=>{var e;return((e=d.value)==null?void 0:e.patientID)&&w.formData||null}),c=f(()=>{var o;return((o=d.value)==null?void 0:o.patientID)?Object.keys(mt.value).length>0?{...j.formData,...mt.value}:j.formData||null:null}),h=f(()=>Object.keys(ct.value).length>0?{...At,...ct.value}:At),Nt=f(()=>{var s;return T((s=a.value)==null?void 0:s.resuscitationMethods)}),ft=f(()=>ut.userFacilityName||localStorage.getItem("facilityName")||"Healthcare Facility"),q=f(()=>{var s;return((s=ut.facilityLocation)==null?void 0:s.code)||localStorage.getItem("facility_code")||"-"}),Q=f(()=>{var s;return((s=ut.facilityLocation)==null?void 0:s.district)||localStorage.getItem("locationDistrict")||"-"}),te=f(()=>{const s=[ft.value];return Q.value&&Q.value!=="-"&&s.push(Q.value),q.value&&q.value!=="-"&&s.push("Code: ".concat(q.value)),s.join(" · ")}),Mt=f(()=>h.value.signOffDate?new Date(h.value.signOffDate).toLocaleString():new Date().toLocaleString()),i=s=>s==null||s===""?"-":Array.isArray(s)?s.length?s.join(", "):"-":String(s),T=s=>!s||!s.length?"-":s.join(", "),ee=async()=>{var tt,et,st,nt,at,Lt,Tt,Bt,Vt,Gt,kt;const[s,e]=await Promise.all([Ft(Pt),Ft(It)]),o=new me({orientation:"portrait",unit:"pt",format:"a4"}),u=o.internal.pageSize.getWidth(),m=o.internal.pageSize.getHeight(),l=28,v=14,_=(u-l*2-v)/2,ht=l,yt=l+_+v,B=52,V=52,G=100,J=100;let k,W,A=l+8,I=l;if(s&&(o.addImage(s,"PNG",l,l,B,B),I=l+B+10),e){const p=I;o.addImage(e,"PNG",p,l,V,V),I=p+V+10}o.setFontSize(14),o.setFont("helvetica","bold"),o.text(String(ft.value||"Facility"),I,A),A+=18,o.text("Neotree Malawi · Tertiary Admission Form",I,A),o.setFontSize(11),o.setFont("helvetica","normal"),A+=16,["Patient: ".concat(i(Y.value)),"NPID: ".concat(i(O.value)),"DOB: ".concat(i(L.value))].forEach(p=>{o.text(p,I,A),A+=14});const U=i(O.value);let X=l;if(U&&U!=="-")try{const p=await $t.toDataURL(U,{width:G,margin:1}),M=u-l-G,C=l;o.addImage(p,"PNG",M,C,G,J),X=C+J}catch(p){console.warn("QR generation failed",p)}const K=Math.max(A,X+6)+12;k=K,W=K;const S=(p,M,C)=>{const Wt=C==="left"?ht:yt,Ut=C==="left"?k:W;ce(o,{startY:Ut,margin:{left:Wt,right:u-Wt-_},tableWidth:_,head:[[p,""]],body:M.map(([se,ne])=>[se,i(ne)]),theme:"grid",styles:{fontSize:9,cellPadding:3},headStyles:{fillColor:[232,232,232],textColor:20,fontStyle:"bold"},columnStyles:{0:{cellWidth:_*.48},1:{cellWidth:_*.52,halign:"right"}}});const zt=o.lastAutoTable.finalY||Ut;C==="left"?k=zt+10:W=zt+10};S("Birth Details",[["Twin",a.value.hasTwin],["Place of birth",a.value.placeOfBirth],["Birth facility",a.value.nameOfBirthFacility],["Type of birth",a.value.typeOfBirth],["Birth weight (g)",a.value.birthWeight],["Gestation (weeks)",a.value.gestationWeeks],["APGAR (1 min)",a.value.apgarScoreAt1],["APGAR (5 min)",a.value.apgarScoreAt5],["APGAR (10 min)",a.value.apgarScoreAt10],["Cried after birth",a.value.criedAfterBirth],["Resuscitation",Nt.value]],"left"),S("Pregnancy & Delivery",[["Mode of delivery",a.value.modeOfDelivery],["Rupture of membranes",a.value.ruptureOfMembranes],["Duration of ROM",a.value.durationOfRuptureMembranes],["Offensive liquor",a.value.offensiveLiquor],["Meconium present",a.value.meconiumPresent],["Maternal analgesia",a.value.maternalAnalgesia],["Anaesthesia used",a.value.anesthesiaUsed],["Steroids given",a.value.steroidsGiven],["Gestation assessment",a.value.gestationMethodAssessment]],"left"),S("Maternal Information",[["Mother name",a.value.motherName],["Mother NPID",a.value.motherNationalId],["HIV status",a.value.motherHivStatus],["Last HIV test",a.value.lastHivTestDate],["VDRL result",a.value.motherVdrlResult],["Hepatitis result",a.value.motherHepatitisResult],["Tetanus/Diphtheria",T(a.value.tetanusDiphtheria)]],"left"),S("Admission Outcome",[["Outcome",h.value.admissionOutcome],["Safeguard concerns",h.value.safeguardConcerns]],"left"),S("Patient Information",[["Name",Y.value],["NPID",O.value],["Gender",Rt.value],["Date of birth",L.value||L],["Admitted from",a.value.admittedFrom],["Referred from",a.value.referredFrom],["Transport mode",a.value.modeOfTransport]],"right"),console.log(D.value),S("Presenting Complaints",[["Complaints",T((tt=D.value)==null?void 0:tt.presenting_complaints)],["Onset",(et=D.value)==null?void 0:et.symptom_onset_time],["Severity",(st=D.value)==null?void 0:st.symptom_severity],["Notes",(nt=D.value)==null?void 0:nt.detailed_assessment_notes]],"right"),S("Vital Signs",[["Temp (°C)",(at=c.value)==null?void 0:at.temperature],["Heart rate",(Lt=c.value)==null?void 0:Lt.heart_rate],["Resp rate",(Tt=c.value)==null?void 0:Tt.respiratory_rate],["Oxygen saturation",(Bt=c.value)==null?void 0:Bt.oxygen_saturation],["Blood sugar",(Vt=c.value)==null?void 0:Vt.blood_sugar],["Current weight (g)",(Gt=c.value)==null?void 0:Gt.current_weight],["Head circumference",(kt=c.value)==null?void 0:kt.head_circumference]],"right"),S("Sign-off",[["Healthcare Worker",h.value.healthcareWorkerId],["Role/Cadre",h.value.userRole],["Signature",h.value.electronicSignature],["Date",Mt.value]],"right");const Z=o.getNumberOfPages(),wt="Generated: ".concat(new Date().toLocaleString());for(let p=1;p<=Z;p++){o.setPage(p),o.setFontSize(8),o.setFont("helvetica","normal");const M=m-16;o.text(wt,l,M,{align:"left"}),o.text("Page ".concat(p," of ").concat(Z),u-l,M,{align:"right"})}const St="admission-summary-".concat(O.value||"patient",".pdf");o.save(St)},gt=async()=>{const s=i(O.value);if(!s||s==="-"){x.value="";return}try{x.value=await $t.toDataURL(s,{width:140,margin:1})}catch(e){console.error("Error generating QR:",e),x.value=""}},Ct=()=>{F.value=!0,setTimeout(gt,50)},Ht=()=>{F.value=!1};return ie(async()=>{var e;window.addEventListener("beforeprint",Ct),window.addEventListener("afterprint",Ht);const s=(e=d.value)==null?void 0:e.patientID;s&&(j.initializeForPatient(Number(s)),P.initializeEnrollmentForm(Number(s)),w.initializeForPatient(Number(s)),await Dt())}),re(()=>{window.removeEventListener("beforeprint",Ct),window.removeEventListener("afterprint",Ht)}),bt([O,F],()=>{F.value&&setTimeout(gt,50)}),bt(()=>{var s;return(s=d.value)==null?void 0:s.patientID},async s=>{s&&(j.initializeForPatient(Number(s)),P.initializeEnrollmentForm(Number(s)),w.initializeForPatient(Number(s)),await Dt())}),N({showPreview:()=>{F.value=!0,setTimeout(gt,50)},hidePreview:()=>{F.value=!1},exportPdf:ee}),(s,e)=>{var o,u,m,l;return le(($(),z("div",{class:de(["printable-admission-form",{"preview-mode":g.forceShow,"print-mode":!g.forceShow}])},[t("header",Fe,[t("div",Re,[t("img",{src:R(Kt),alt:"Neotree logo",class:"header-logo"},null,8,Ne),t("img",{src:R(Zt),alt:"Coat of arms",class:"header-logo app-logo"},null,8,Me)]),t("div",Ce,[t("div",He,n(ft.value),1),t("div",xe,n(Q.value)+" · Code: "+n(q.value),1),e[0]||(e[0]=t("div",{class:"form-title"},"Neotree Malawi · Tertiary Admission Form",-1)),t("div",Le,[t("span",null,"Patient: "+n(Y.value),1),t("span",null,"NPID: "+n(O.value),1),t("span",null,"DOB: "+n(L.value),1)])]),g.forceShow?Ot("",!0):($(),z("div",Te,[x.value?($(),z("img",{key:0,src:x.value,class:"qr-img",alt:"Patient QR"},null,8,Be)):Ot("",!0),t("div",Ve,n(O.value),1)]))]),t("div",Ge,[t("div",ke,[t("section",We,[e[12]||(e[12]=t("h3",{class:"section-title"},"Birth Details",-1)),t("div",Ue,[e[1]||(e[1]=t("span",null,"Twin",-1)),t("span",null,n(i(a.value.hasTwin)),1)]),t("div",ze,[e[2]||(e[2]=t("span",null,"Place of birth",-1)),t("span",null,n(i(a.value.placeOfBirth)),1)]),t("div",$e,[e[3]||(e[3]=t("span",null,"Birth facility",-1)),t("span",null,n(i(a.value.nameOfBirthFacility)),1)]),t("div",Ee,[e[4]||(e[4]=t("span",null,"Type of birth",-1)),t("span",null,n(i(a.value.typeOfBirth)),1)]),t("div",je,[e[5]||(e[5]=t("span",null,"Birth weight (g)",-1)),t("span",null,n(i(a.value.birthWeight)),1)]),t("div",Ye,[e[6]||(e[6]=t("span",null,"Gestation (weeks)",-1)),t("span",null,n(i(a.value.gestationWeeks)),1)]),t("div",qe,[e[7]||(e[7]=t("span",null,"APGAR (1 min)",-1)),t("span",null,n(i(a.value.apgarScoreAt1)),1)]),t("div",Qe,[e[8]||(e[8]=t("span",null,"APGAR (5 min)",-1)),t("span",null,n(i(a.value.apgarScoreAt5)),1)]),t("div",Je,[e[9]||(e[9]=t("span",null,"APGAR (10 min)",-1)),t("span",null,n(i(a.value.apgarScoreAt10)),1)]),t("div",Xe,[e[10]||(e[10]=t("span",null,"Cried after birth",-1)),t("span",null,n(i(a.value.criedAfterBirth)),1)]),t("div",Ke,[e[11]||(e[11]=t("span",null,"Resuscitation",-1)),t("span",null,n(Nt.value),1)])]),t("section",Ze,[e[22]||(e[22]=t("h3",{class:"section-title"},"Pregnancy & Delivery",-1)),t("div",ts,[e[13]||(e[13]=t("span",null,"Mode of delivery",-1)),t("span",null,n(i(a.value.modeOfDelivery)),1)]),t("div",es,[e[14]||(e[14]=t("span",null,"Rupture of membranes",-1)),t("span",null,n(i(a.value.ruptureOfMembranes)),1)]),t("div",ss,[e[15]||(e[15]=t("span",null,"Duration of ROM",-1)),t("span",null,n(i(a.value.durationOfRuptureMembranes)),1)]),t("div",ns,[e[16]||(e[16]=t("span",null,"Offensive liquor",-1)),t("span",null,n(i(a.value.offensiveLiquor)),1)]),t("div",as,[e[17]||(e[17]=t("span",null,"Meconium present",-1)),t("span",null,n(i(a.value.meconiumPresent)),1)]),t("div",os,[e[18]||(e[18]=t("span",null,"Maternal analgesia",-1)),t("span",null,n(i(a.value.maternalAnalgesia)),1)]),t("div",is,[e[19]||(e[19]=t("span",null,"Anaesthesia used",-1)),t("span",null,n(i(a.value.anesthesiaUsed)),1)]),t("div",rs,[e[20]||(e[20]=t("span",null,"Steroids given",-1)),t("span",null,n(i(a.value.steroidsGiven)),1)]),t("div",ls,[e[21]||(e[21]=t("span",null,"Gestation assessment",-1)),t("span",null,n(i(a.value.gestationMethodAssessment)),1)])]),t("section",us,[e[30]||(e[30]=t("h3",{class:"section-title"},"Maternal Information",-1)),t("div",ds,[e[23]||(e[23]=t("span",null,"Mother name",-1)),t("span",null,n(i(a.value.motherName)),1)]),t("div",ms,[e[24]||(e[24]=t("span",null,"Mother NPID",-1)),t("span",null,n(i(a.value.motherNationalId)),1)]),t("div",cs,[e[25]||(e[25]=t("span",null,"HIV status",-1)),t("span",null,n(i(a.value.motherHivStatus)),1)]),t("div",vs,[e[26]||(e[26]=t("span",null,"Last HIV test",-1)),t("span",null,n(i(a.value.lastHivTestDate)),1)]),t("div",ps,[e[27]||(e[27]=t("span",null,"VDRL result",-1)),t("span",null,n(i(a.value.motherVdrlResult)),1)]),t("div",fs,[e[28]||(e[28]=t("span",null,"Hepatitis result",-1)),t("span",null,n(i(a.value.motherHepatitisResult)),1)]),t("div",gs,[e[29]||(e[29]=t("span",null,"Tetanus/Diphtheria",-1)),t("span",null,n(T(a.value.tetanusDiphtheria)),1)])]),t("section",hs,[e[33]||(e[33]=t("h3",{class:"section-title"},"Admission Outcome",-1)),t("div",ys,[e[31]||(e[31]=t("span",null,"Outcome",-1)),t("span",ws,n(i(h.value.admissionOutcome)),1)]),t("div",Ss,[e[32]||(e[32]=t("span",null,"Safeguard concerns",-1)),t("span",null,n(i(h.value.safeguardConcerns)),1)])])]),t("div",bs,[t("section",Os,[e[41]||(e[41]=t("h3",{class:"section-title"},"Patient Information",-1)),t("div",Ds,[e[34]||(e[34]=t("span",null,"Name",-1)),t("span",null,n(Y.value),1)]),t("div",_s,[e[35]||(e[35]=t("span",null,"NPID",-1)),t("span",null,n(O.value),1)]),t("div",As,[e[36]||(e[36]=t("span",null,"Gender",-1)),t("span",null,n(Rt.value),1)]),t("div",Ps,[e[37]||(e[37]=t("span",null,"Date of birth",-1)),t("span",null,n(L.value),1)]),t("div",Is,[e[38]||(e[38]=t("span",null,"Admitted from",-1)),t("span",null,n(i(a.value.admittedFrom)),1)]),t("div",Fs,[e[39]||(e[39]=t("span",null,"Referred from",-1)),t("span",null,n(i(a.value.referredFrom)),1)]),t("div",Rs,[e[40]||(e[40]=t("span",null,"Transport mode",-1)),t("span",null,n(i(a.value.modeOfTransport)),1)])]),t("section",Ns,[e[46]||(e[46]=t("h3",{class:"section-title"},"Presenting Complaints",-1)),t("div",Ms,[e[42]||(e[42]=t("span",null,"Complaints",-1)),t("span",null,n(T((o=D.value)==null?void 0:o.presenting_complaints)),1)]),t("div",Cs,[e[43]||(e[43]=t("span",null,"Onset",-1)),t("span",null,n(i((u=D.value)==null?void 0:u.symptom_onset_time)),1)]),t("div",Hs,[e[44]||(e[44]=t("span",null,"Severity",-1)),t("span",null,n(i((m=D.value)==null?void 0:m.symptom_severity)),1)]),t("div",xs,[e[45]||(e[45]=t("span",null,"Notes",-1)),t("span",null,n(i((l=D.value)==null?void 0:l.detailed_assessment_notes)),1)])]),c.value?($(),z("section",Ls,[e[54]||(e[54]=t("h3",{class:"section-title"},"Vital Signs",-1)),t("div",Ts,[e[47]||(e[47]=t("span",null,"Temp (°C)",-1)),t("span",null,n(i(c.value.temperature)),1)]),t("div",Bs,[e[48]||(e[48]=t("span",null,"Heart rate",-1)),t("span",null,n(i(c.value.heart_rate)),1)]),t("div",Vs,[e[49]||(e[49]=t("span",null,"Resp rate",-1)),t("span",null,n(i(c.value.respiratory_rate)),1)]),t("div",Gs,[e[50]||(e[50]=t("span",null,"Oxygen saturation",-1)),t("span",null,n(i(c.value.oxygen_saturation)),1)]),t("div",ks,[e[51]||(e[51]=t("span",null,"Blood sugar",-1)),t("span",null,n(i(c.value.blood_sugar)),1)]),t("div",Ws,[e[52]||(e[52]=t("span",null,"Current weight (g)",-1)),t("span",null,n(i(c.value.current_weight)),1)]),t("div",Us,[e[53]||(e[53]=t("span",null,"Head circumference",-1)),t("span",null,n(i(c.value.head_circumference)),1)])])):Ot("",!0),t("section",zs,[e[59]||(e[59]=t("h3",{class:"section-title"},"Sign-off",-1)),t("div",$s,[e[55]||(e[55]=t("span",null,"Healthcare Worker",-1)),t("span",null,n(i(h.value.healthcareWorkerId)),1)]),t("div",Es,[e[56]||(e[56]=t("span",null,"Role/Cadre",-1)),t("span",null,n(i(h.value.userRole)),1)]),t("div",js,[e[57]||(e[57]=t("span",null,"Signature",-1)),t("span",null,n(i(h.value.electronicSignature)),1)]),t("div",Ys,[e[58]||(e[58]=t("span",null,"Date",-1)),t("span",null,n(Mt.value),1)])])])]),t("div",qs,[t("span",null,"Generated: "+n(new Date().toLocaleString()),1),t("span",null,n(te.value),1)])],2)),[[ue,g.forceShow||F.value]])}}}),Js=qt(Qs,[["__scopeId","data-v-6a17dbc5"]]),Xs={class:"print-summary-wrapper"},Ks={class:"print-content"},Zs={class:"print-actions"},tn=Yt({__name:"PrintSummarySection",setup(g,{expose:N}){const E=b(null),d=b(null),P=b(null),w=Pe[1],H=w.formData,rt=w.subtitle,lt=async()=>{var y,r;if((y=d.value)!=null&&y.exportPdf){await d.value.exportPdf();return}(r=P.value)!=null&&r.exportPdf&&await P.value.exportPdf()};return N({getFormRef:()=>E.value,validateForm:()=>null,getFormValues:()=>({})}),(y,r)=>($(),z("div",Xs,[ot(be,{formData:R(H),subtitle:R(rt),ref_key:"formRef",ref:E,class:"main-form"},{printSection:Et(()=>[t("div",Ks,[t("div",Zs,[ot(R(ve),{expand:"block",color:"primary",onClick:lt,class:"print-button"},{default:Et(()=>[ot(R(fe),{icon:R(ge),slot:"start"},null,8,["icon"]),r[0]||(r[0]=pe(" Print Admission Summary ",-1))]),_:1})])])]),_:1},8,["formData","subtitle"]),ot(Js,{ref_key:"printablePrintRef",ref:P},null,512)]))}}),ln=qt(tn,[["__scopeId","data-v-c84df6d7"]]),it=()=>JSON.parse(JSON.stringify(Ie)),un=he("neonatalAdmissionOutcomesStore",{state:()=>({activePatientId:null,admissionOutcomesForm:it(),admissionOutcomesFormCache:{}}),getters:{getActivePatientId(){return this.activePatientId}},actions:{initializeAdmissionOutcomesForm(g){if(g==null){this.activePatientId=null,Object.assign(this.admissionOutcomesForm,it());return}this.activePatientId=g;const N=this.admissionOutcomesFormCache[String(g)];N?Object.assign(this.admissionOutcomesForm,N):Object.assign(this.admissionOutcomesForm,it()),this.saveAdmissionOutcomesSnapshot()},saveAdmissionOutcomesSnapshot(){this.activePatientId!=null&&(this.admissionOutcomesFormCache[String(this.activePatientId)]=JSON.parse(JSON.stringify(this.admissionOutcomesForm)))},resetAdmissionOutcomesForm(){Object.assign(this.admissionOutcomesForm,it()),this.saveAdmissionOutcomesSnapshot()},clearAdmissionOutcomesForm(g){delete this.admissionOutcomesFormCache[String(g)],this.activePatientId===g&&this.resetAdmissionOutcomesForm()}},persist:{paths:["activePatientId","admissionOutcomesForm","admissionOutcomesFormCache"]}});export{ln as P,un as u};
