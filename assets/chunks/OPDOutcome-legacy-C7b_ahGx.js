System.register(["./vendor-legacy-DjGXx6Xl.js","../index-legacy-y7loJJ8f.js","./LevelOfConsciousness.vue_vue_type_script_setup_true_lang-legacy-WZaYKH5t.js","./previousComplaints-legacy-DKyye0Op.js","./patient_complaints_service-legacy-CUjONX5C.js","./DashBox-legacy-CbkI0WOo.js","./BasicForm-legacy-DC88BvMs.js","./formatServerData-legacy-5wynXUsE.js","./NextAppointment-legacy-4qxJ6-Ls.js","./drug_prescription_service-legacy-DHVuxaQ6.js","./nonPharmaTherapyStore-legacy-NYywT6CS.js","./lodash-legacy-pOOc9Efu.js","./Outcome-legacy-BQnXNjLz.js"],function(e,a){"use strict";var t,n,l,o,i,s,r,d,c,u,p,v,m,f,g,h,b,_,y,x,w,k,C,D,S,E,P,I,O,V,A,H,N,M,T,U,L,z,B,R,F,q,j,G,Y,$,W,J,K,X,Q,Z,ee,ae,te,ne,le,oe,ie,se,re,de,ce,ue,pe,ve,me,fe,ge,he,be,_e,ye,xe,we,ke,Ce,De,Se,Ee,Pe,Ie,Oe,Ve,Ae,He,Ne,Me,Te,Ue,Le,ze,Be,Re,Fe,qe,je,Ge,Ye,$e,We,Je,Ke,Xe,Qe,Ze,ea,aa,ta,na,la,oa,ia,sa,ra,da,ca,ua,pa,va,ma,fa,ga,ha,ba,_a,ya,xa,wa,ka;return{setters:[e=>{t=e.d,n=e.aV,l=e.r,o=e.c,i=e.a,s=e.H,r=e.e,d=e.f,c=e.l,u=e.m,p=e.O,v=e.J,m=e.k,f=e.u,g=e._,h=e.Q,b=e.F,_=e.av,y=e.ex,x=e.ey,w=e.ez,k=e.eA,C=e.aG,D=e.w,S=e.ax,E=e.bW,P=e.P,I=e.aO,O=e.K,V=e.p,A=e.bt,H=e.ah,N=e.L,M=e.eB,T=e.eC,U=e.bk,L=e.bf,z=e.eD,B=e.eE,R=e.da,F=e.eF,q=e.eG,j=e.eH,G=e.df,Y=e.bV,$=e.az,W=e.c1,J=e.W,K=e.bz,X=e.al,Q=e.ak,Z=e.N,ee=e.bs,ae=e.a4,te=e.bl,ne=e.b2,le=e.bn,oe=e.a2,ie=e.b$,se=e.bv,re=e.aj,de=e.a5,ce=e.c7,ue=e.bw,pe=e.dt,ve=e.ea},e=>{me=e.bp,fe=e.l,ge=e.aC,he=e.aB,be=e.b4,_e=e.aD,ye=e.J,xe=e.M,we=e.S,ke=e.ag,Ce=e.b3,De=e.t,Se=e.G,Ee=e._,Pe=e.u,Ie=e.H,Oe=e.aT,Ve=e.aU,Ae=e.bU,He=e.bn,Ne=e.bo,Me=e.a_,Te=e.b0,Ue=e.bV,Le=e.bW,ze=e.bJ,Be=e.P,Re=e.aL,Fe=e.m,qe=e.aS,je=e.K,Ge=e.B,Ye=e.ax,$e=e.ao,We=e.as,Je=e.aN,Ke=e.ar},e=>{Xe=e.e,Qe=e.a,Ze=e.m,ea=e.b,aa=e.v,ta=e.c,na=e._},e=>{la=e.p},e=>{oa=e.P},e=>{ia=e.D},e=>{sa=e.B},e=>{ra=e.f,da=e.c,ca=e.a},e=>{ua=e.A,pa=e.D,va=e.a},e=>{ma=e.a,fa=e.b},e=>{ga=e.P},e=>{ha=e.l},e=>{ba=e._,_a=e.D,ya=e.A,xa=e.R,wa=e.a,ka=e.b}],execute:function(){var a=document.createElement("style");a.textContent=".vitals_title[data-v-44affb13]{border-bottom:1px solid #b3b3b3;margin-bottom:50px}.input-with-icon[data-v-44affb13]{position:relative}.input-icon[data-v-44affb13]{position:absolute;left:10px;top:50%;transform:translateY(-50%);color:gray}ion-col[data-v-44affb13]{padding-bottom:15px}h5[data-v-44affb13]{margin-top:0;text-overflow:ellipsis;white-space:nowrap;overflow:hidden}.previousView[data-v-44affb13]{margin-top:70px;margin-bottom:20px}.visit-section[data-v-fa3ff98b]{margin-bottom:1.2rem;padding:1rem;background:#fff;border-radius:12px;border:1px solid #e5e7eb}.section-header[data-v-fa3ff98b]{display:flex;align-items:center;gap:.6rem;margin-bottom:1rem}.section-icon[data-v-fa3ff98b]{font-size:20px;color:#c62828}h3[data-v-fa3ff98b]{font-size:1rem;font-weight:600;margin:0}.no-data[data-v-fa3ff98b]{text-align:center;padding:1.2rem;color:#6b7280}.no-data-icon[data-v-fa3ff98b]{font-size:2rem;color:#16a34a}.accordion-section[data-v-fa3ff98b]{border-top:1px solid #f0f0f0}.accordion-header[data-v-fa3ff98b]{display:flex;justify-content:space-between;padding:.8rem 0;cursor:pointer}.acc-left[data-v-fa3ff98b]{display:flex;align-items:center;gap:.6rem}.acc-icon[data-v-fa3ff98b]{font-size:1.1rem;color:#065f46}.acc-title[data-v-fa3ff98b]{font-weight:600}.acc-count[data-v-fa3ff98b]{font-size:.8rem;color:#6b7280}.chevron[data-v-fa3ff98b]{transition:.2s ease;color:#6b7280}.chevron.rotate[data-v-fa3ff98b]{transform:rotate(180deg)}.accordion-body[data-v-fa3ff98b]{padding:.5rem 0 .8rem .2rem}.allergy-item[data-v-fa3ff98b]{display:flex;gap:.4rem;padding:.3rem 0;font-size:.95rem}.item-label[data-v-fa3ff98b]{font-weight:600;color:#374151}.item-value[data-v-fa3ff98b]{color:#111827;font-weight:500}.visit-container[data-v-795e1865]{background:#fff;border-radius:16px;box-shadow:0 4px 12px rgba(0,0,0,.05);padding:24px;margin:16px;font-family:Segoe UI,Roboto,Helvetica Neue,sans-serif}.visit-header[data-v-795e1865]{display:flex;justify-content:space-between;align-items:center;margin-bottom:24px;padding-bottom:16px;border-bottom:1px solid #f0f0f0}.visit-header h5[data-v-795e1865]{margin:0;font-size:1.25rem;font-weight:600;color:#2d3748}.visit-sections[data-v-795e1865]{display:flex;flex-direction:column;gap:20px}.visit-section[data-v-795e1865]{background:#f8fafc;border-radius:12px;padding:16px;transition:all .2s ease}.visit-section[data-v-795e1865]:hover{box-shadow:0 2px 8px rgba(0,0,0,.08);transform:translateY(-2px)}.section-header[data-v-795e1865]{display:flex;align-items:center;gap:12px;margin-bottom:16px}.section-header h3[data-v-795e1865]{margin:0;font-size:1.1rem;font-weight:500;color:#2d3748}.section-icon[data-v-795e1865]{color:#4299e1;font-size:1.4rem}.section-content[data-v-795e1865]{display:flex;flex-direction:column;gap:12px}.info-item[data-v-795e1865]{display:flex;gap:8px}.info-label[data-v-795e1865]{font-weight:500;color:#4a5568;min-width:120px}.info-value[data-v-795e1865]{color:#2d3748}.highlight[data-v-795e1865]{font-weight:600;color:#3182ce}.tags-container[data-v-795e1865]{display:flex;flex-wrap:wrap;gap:8px}.complaint-tag[data-v-795e1865],.medical-tag[data-v-795e1865],.allergy-tag[data-v-795e1865]{padding:6px 12px;border-radius:20px;font-size:.85rem;font-weight:500}.complaint-tag[data-v-795e1865]{background:#ebf8ff;color:#3182ce}.medical-tag[data-v-795e1865]{background:#f0fff4;color:#38a169}.allergy-tag[data-v-795e1865]{background:#fff5f5;color:#e53e3e}.complaints-container[data-v-795e1865]{display:flex;flex-direction:column;gap:12px}.complaint-item[data-v-795e1865]{display:flex;justify-content:space-between;margin-right:70%;align-items:center;padding:8px 12px;background:#f8fafc;border-radius:8px;gap:10px}.complaint-name[data-v-795e1865]{font-weight:500;color:#2d3748;white-space:nowrap}.complaint-duration[data-v-795e1865]{color:#718096;font-size:.9em;white-space:nowrap}.exam-section[data-v-795e1865]{display:flex;flex-direction:column;gap:16px}.exam-category[data-v-795e1865]{background:#fff;border-radius:8px;padding:12px;box-shadow:0 1px 3px rgba(0,0,0,.05)}.exam-category-header[data-v-795e1865]{display:flex;align-items:center;gap:8px;margin-bottom:8px}.exam-category-header h4[data-v-795e1865]{margin:0;font-size:.95rem;font-weight:500;color:#4a5568}.exam-category-header ion-icon[data-v-795e1865]{color:#718096;font-size:1.1rem}.exam-items[data-v-795e1865]{display:flex;flex-wrap:wrap;gap:8px}.exam-item[data-v-795e1865]{background:#f7fafc;padding:6px 10px;border-radius:6px;font-size:.85rem;color:#4a5568}.exam-item.normal[data-v-795e1865]{background:#e6ffed;color:#38a169}@media(max-width:768px){.visit-container[data-v-795e1865]{padding:16px;margin:8px}.visit-header[data-v-795e1865]{flex-direction:column;align-items:flex-start;gap:8px}.tags-container[data-v-795e1865],.complaints-container[data-v-795e1865]{gap:6px}.complaint-tag[data-v-795e1865],.medical-tag[data-v-795e1865],.allergy-tag[data-v-795e1865]{padding:4px 10px;font-size:.8rem}}.modal_wrapper[data-v-138b9dec]{display:flex;flex-direction:column;width:100%;max-width:1200px;margin:0 auto}@media(max-width:768px){.modal_wrapper[data-v-138b9dec]{max-width:100%}}@media(max-width:480px){.modal_wrapper[data-v-138b9dec]{flex-direction:column}}.container[data-v-9dcf3091]{display:flex;flex-direction:column;align-items:center}.section[data-v-9dcf3091]{width:100%;max-width:1300px;margin-bottom:20px}ion-card[data-v-9dcf3091]{box-shadow:none;background-color:inherit;width:100%;color:#000}.navigation-buttons[data-v-9dcf3091]{display:flex;justify-content:space-between;width:100%;max-width:500px}@media(max-width:1500px){.container[data-v-9dcf3091]{padding:10px}}.sub_item_header[data-v-9dcf3091]{font-weight:700;font-size:14px}._card[data-v-ee4aaff3]{border-radius:5px;background-color:#fff;box-shadow:rgba(0,0,0,.2) 0 3px 1px -2px,rgba(0,0,0,.14) 0 2px 2px,rgba(0,0,0,.12) 0 1px 5px;margin-bottom:10px}ion-item[data-v-ee4aaff3]::part(native){border:none}.previousView[data-v-ee4aaff3]{margin-top:10px}.previousLabel[data-v-ee4aaff3]{font-weight:700;font-size:1rem}.nav-buttons[data-v-ee4aaff3]{display:flex;justify-content:flex-start;gap:10px;margin-top:10px}ion-accordion[data-v-ee4aaff3]::part(header){padding:8px}.ion-padding[data-v-ee4aaff3]{padding-top:0}.required-badge[data-v-ee4aaff3]{color:#d32f2f;font-size:.75rem;font-weight:600;margin-left:8px;background-color:#ffebee;padding:2px 8px;border-radius:4px;text-transform:uppercase}#container[data-v-0c2a73b2]{text-align:center;position:absolute;left:0;right:0;top:50%;transform:translateY(-50%)}#container strong[data-v-0c2a73b2]{font-size:20px;line-height:26px}#container p[data-v-0c2a73b2]{font-size:16px;line-height:22px;color:#8c8c8c;margin:0}#container a[data-v-0c2a73b2]{text-decoration:none}ion-item.medicalAl[data-v-0c2a73b2]{--background: #fff;--border-radius: 5px}ion-button.medicalAlBtn[data-v-0c2a73b2]{--background: #fecdca;--color: #b42318;text-transform:none}.error-label[data-v-0c2a73b2]{background:#fecdca;color:#b42318;text-transform:none;padding:2%;border-radius:10px;margin-top:7px;display:flex;text-align:center}ion-button.addMedicalTpBtn[data-v-0c2a73b2]{--background: #ddeedd;--color: #006401;text-transform:none;font-weight:600;font-size:16px}ion-button.medicalAlAddBtn[data-v-0c2a73b2]{font-size:large}ion-icon.icon-al[data-v-0c2a73b2]{font-size:x-large;margin-bottom:-5px}.item-al[data-v-0c2a73b2]{cursor:pointer;padding:5px;background-color:#ebebeb;margin-top:8px}.item-al[data-v-0c2a73b2]:hover{background-color:rgba(85,81,81,.282);padding:5px;border-radius:3px}ion-popover.popover-al[data-v-0c2a73b2]{--background: #fff}ion-content.content-al[data-v-0c2a73b2]{--background: #fff}ion-list.list-al[data-v-0c2a73b2]{--background: #fff;-ion-item-background:#fff}.checkLbltp[data-v-0c2a73b2]{border-bottom:2px dotted var(--ion-color-medium);--inner-border-width: 0}.tpStndCls[data-v-0c2a73b2]{font-size:16px;font-weight:600;line-height:24px}.action_buttons[data-v-0c2a73b2]{color:var(--ion-color-primary);display:flex;align-items:center;float:right}.action_buttons[data-v-0c2a73b2]:hover{cursor:pointer}.spcls[data-v-0c2a73b2]{display:flex;align-items:center}.previousView[data-v-0c2a73b2]{width:100%;border-radius:10px;margin-top:10px}.previousLabel[data-v-0c2a73b2]{font-weight:600;color:#000}.previousLabelDate[data-v-0c2a73b2]{font-weight:600;color:#000;margin:2%}.previousSecDrgs[data-v-0c2a73b2]{margin:2%}.notes_p[data-v-0c2a73b2]{margin:4%}.qaws[data-v-0c2a73b2]{margin-top:-27px}.allergies-section[data-v-0c2a73b2]{background:#fff;border-radius:8px;box-shadow:0 2px 4px rgba(0,0,0,.05);margin-bottom:10px}.section-title[data-v-0c2a73b2]{display:flex;align-items:center;font-size:18px;font-weight:700;color:#1f2937;letter-spacing:-.01em;margin-bottom:16px}.allergies-container[data-v-0c2a73b2]{min-height:48px}.allergies-grid[data-v-0c2a73b2]{display:flex;flex-wrap:wrap;gap:8px}.allergy-chip[data-v-0c2a73b2]{--background: #fee2e2;--color: #dc2626;font-size:14px;font-weight:500}.allergy-chip ion-icon[data-v-0c2a73b2]{color:#dc2626}.no-allergies[data-v-0c2a73b2]{display:flex;align-items:center;justify-content:center;height:48px;background:#f9fafb;border-radius:6px;font-size:15px;font-weight:500;color:#9c8011}.medication-section[data-v-0c2a73b2]{background:#fff;border-radius:8px;padding:16px;margin:16px 0;box-shadow:0 1px 3px rgba(0,0,0,.1)}.section-header[data-v-0c2a73b2]{margin-bottom:16px;--background: transparent}.section-icon[data-v-0c2a73b2]{font-size:22px;margin-right:10px;color:var(--ion-color-primary)}.medication-content[data-v-0c2a73b2]{padding:0 16px}.add-medication-form[data-v-0c2a73b2]{background:#f9fafb;border-radius:8px;padding:20px;margin-top:16px}.form-group[data-v-0c2a73b2]{margin-bottom:16px}.form-row[data-v-0c2a73b2]{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:16px;margin-bottom:16px}.input-label[data-v-0c2a73b2]{display:block;font-size:16px;font-weight:600;color:#374151;margin-bottom:10px}.error-message[data-v-0c2a73b2]{color:#dc2626;font-size:15px;font-weight:600;margin-top:4px}.action-buttons[data-v-0c2a73b2]{display:flex;gap:8px;justify-content:flex-end;margin-top:16px}.save-button[data-v-0c2a73b2]{--background: var(--ion-color-primary);--color: #ffffff;font-size:16px;font-weight:600}.cancel-button[data-v-0c2a73b2]{--background: #e5e7eb;--color: #374151;font-size:16px;font-weight:600}.add-new-button[data-v-0c2a73b2]{width:100%;margin-top:16px;--background: var(--ion-color-primary-tint);--color: var(--ion-color-primary);font-size:16px;font-weight:600}.notes-section[data-v-0c2a73b2]{background:#fff;border-radius:8px;padding:16px;margin:16px 0;box-shadow:0 1px 3px rgba(0,0,0,.1)}.notes-content[data-v-0c2a73b2]{padding:0 16px}.intervention-component[data-v-0c2a73b2],.notes-input-container[data-v-0c2a73b2]{margin-bottom:16px}.notes-input-item[data-v-0c2a73b2]{--background: #f9fafb;--border-radius: 8px;--padding-start: 12px;--padding-end: 12px;min-height:120px}.edit-icon[data-v-0c2a73b2]{color:var(--ion-color-medium);font-size:20px;margin-right:8px}.notes-textarea[data-v-0c2a73b2]{--padding-top: 12px;--padding-bottom: 12px;--placeholder-color: #9ca3af;--placeholder-opacity: 1;font-size:16px;font-weight:600;line-height:1.6}.previous-notes[data-v-0c2a73b2]{background:#fff;border-radius:8px;overflow:hidden}.previous-notes-header[data-v-0c2a73b2]{--background: #f9fafb;font-weight:600}.notes-timeline[data-v-0c2a73b2]{padding:8px 0}.note-entry[data-v-0c2a73b2]{padding:12px 16px;border-bottom:1px solid #e5e7eb}.note-entry[data-v-0c2a73b2]:last-child{border-bottom:none}.note-date[data-v-0c2a73b2]{font-size:14px;font-weight:600;color:#374151;margin-bottom:8px}.note-content[data-v-0c2a73b2]{font-size:16px;font-weight:600;line-height:1.6;color:#4b5563;white-space:pre-wrap}.show-more-header[data-v-0c2a73b2]{--background: transparent;font-size:16px;font-weight:600}[data-v-0c2a73b2] ion-accordion{margin:0}[data-v-0c2a73b2] ion-accordion-group{background:#fff}[data-v-0c2a73b2] ion-accordion.accordion-expanding,[data-v-0c2a73b2] ion-accordion.accordion-expanded{--background: #ffffff}[data-v-0c2a73b2]{transition:font-size .2s ease,font-weight .2s ease}[data-v-0c2a73b2] .multiselect__option{font-size:16px!important;font-weight:600!important;color:#000}.initTxt[data-v-0aad2f08]{text-align:center}.item-al[data-v-0aad2f08]{cursor:pointer;padding:5px;background-color:#ebebeb;margin-top:8px}.item-al[data-v-0aad2f08]:hover{background-color:rgba(85,81,81,.282);padding:5px;border-radius:3px}ion-popover.popover-al[data-v-0aad2f08]{--background: #fff}ion-list.list-al[data-v-0aad2f08]{--background: #fff;-ion-item-background:#fff}.saveContainer[data-v-0aad2f08]{display:flex;align-items:flex-end}.action_buttons[data-v-0aad2f08]{margin-top:5px}.error-label[data-v-0aad2f08]{background:#fecdca;color:#b42318;text-transform:none;padding:6%;border-radius:10px;margin-top:7px;display:flex;text-align:center}.spc_btwn[data-v-0aad2f08]{margin-top:2%}.ion-lblCls[data-v-0aad2f08]{font-weight:700}.initTxt[data-v-fc637de7]{text-align:center}.spc_btwn[data-v-fc637de7]{margin-top:2%}.item-al[data-v-fc637de7]{cursor:pointer;padding:5px;background-color:#ebebeb;margin-top:8px}.item-al[data-v-fc637de7]:hover{background-color:rgba(85,81,81,.282);padding:5px;border-radius:3px}ion-popover.popover-al[data-v-fc637de7]{--background: #fff}ion-list.list-al[data-v-fc637de7]{--background: #fff;-ion-item-background:#fff}.saveContainer[data-v-fc637de7]{display:flex;align-items:flex-end}.action_buttons[data-v-fc637de7]{margin-top:5px}.error-label[data-v-fc637de7]{background:#fecdca;color:#b42318;text-transform:none;padding:6%;border-radius:10px;margin-top:7px;display:flex;text-align:center}\n/*$vite$:1*/",document.head.appendChild(a);const Ca={key:0},Da={style:{"align-content":"center"}},Sa={class:"ion-padding",slot:"content"},Ea=e("P",Ee(t({__name:"PresentingComplaints",setup(e,{expose:a}){const t=me(),{presentingComplaints:_}=n(t),y=l(fe),x=l(!0),w=l(!1),k=l(!1),C=l(!0),D=l(!1),S=l([]),E=l([]),P=l(),I=o(()=>[{componentType:"multiSelectInputField",header:"Presenting Complaints",name:"PresentingComplaints",trackBy:"concept_id",icon:fe.search,hideSelected:!0,validation:e=>H(null==e?void 0:e.name,S.value)?"Presenting complaint already added":ge.required(e),options:E.value,grid:{s:"6"}},{componentType:"inputField",header:"Duration",name:"duration",icon:fe.time,validation:e=>ge.isNotEmptyandNumber(e),grid:{s:"6"},unitOptions:[{label:"Hours",value:"Hours"},{label:"Days",value:"Days"},{label:"Weeks",value:"Weeks"},{label:"Months",value:"Months"},{label:"Years",value:"Years"}],unitValidation:e=>e&&""!==e?null:"Please select a unit."},{componentType:"inputField",header:"Specify the presenting complaint(s)",name:"Other (specify)",icon:fe.editPen,validation:e=>H(e,S.value)?"Presenting complaint already added":ge.required(e),condition:e=>{var a;return"Other"===(null==e||null===(a=e.PresentingComplaints)||void 0===a?void 0:a.name)}},{componentType:"Alert",condition:e=>{var a;return null!=ge.required(null==e||null===(a=e.PresentingComplaints)||void 0===a?void 0:a.name)},backgroundColor:"lightyellow",textColor:"black",value:"Please search thoroughly for the complaint. If it is not listed, search and select the 'Other' option to specify the complaint.",name:"noMatchAlert"}]),{formRef:O}=he(),V=e=>{var a;const t=e.duration+" "+e.duration_unit,n=e.PresentingComplaints,l="Other"===n.name?e["Other (specify)"]:n.name;S.value.push({actionBtn:!0,btn:["delete"],name:l,concept_id:n.concept_id,duration:n.duration,durationUnits:n.duration_unit,display:[l,t],data:[{concept_id:8578,value_coded:n.concept_id,obs_datetime:we.getSessionDate(),child:[{concept_id:n.concept_id,value_text:t,obs_datetime:we.getSessionDate()}]}]}),null===(a=O.value)||void 0===a||a.resetForm(),D.value=!0,A()},A=()=>{const e=["Cough","Convulsions"];w.value=S.value.some(a=>e.includes(a.name))},H=(e,a)=>a.some(a=>a.name===e),N=e=>{S.value=S.value.filter(a=>a.display[0]!==e.name)};return i(async()=>{await(async()=>{E.value=await oa.getComplaintsList("Presenting complaint"),xe(_.value,"PresentingComplaints","multiSelectData",E.value)})()}),a({onSubmit:async()=>{const e=await ke.getObsByEncounterIdAndDate(Ce.PRESENTING_COMPLAINTS),a=S.value.flatMap(e=>e.data);return a.length<=0&&e.length<=0?(De("Presenting complaints is required"),!1):(a.length<=0||(await ke.addObsToEncounterPatient(a,Ce.PRESENTING_COMPLAINTS),Se("Presenting complaints saved successful"),S.value=[]),!0)}}),(e,a)=>{const t=s("ion-row"),n=s("ion-label"),l=s("ion-accordion"),o=s("ion-accordion-group");return d(),r(b,null,[c(ia,{status:x.value,content:"No presenting complaints added"},null,8,["status"]),D.value?(d(),r("span",Ca,[c(be,{listData:S.value,"onClicked:delete":N},null,8,["listData"])])):u("",!0),k.value?(d(),p(t,{key:1},{default:v(()=>[c(_e,{formData:I.value,ref_key:"formRef",ref:O},null,8,["formData"]),m("div",Da,[c(ye,{fill:"clear",icon:y.value.plus,iconSlot:"icon-only","onClicked:btn":a[0]||(a[0]=e=>(async()=>{var e,a;const t=null===(e=O.value)||void 0===e?void 0:e.getFormValues();null==(null===(a=O.value)||void 0===a?void 0:a.validateForm())&&(V(t),k.value=!1,C.value=!0)})()),name:"Save"},null,8,["icon"])])]),_:1})):u("",!0),C.value?(d(),p(t,{key:2,style:{"margin-top":"10px"}},{default:v(()=>[c(ye,{fill:"clear",icon:y.value.plus,iconSlot:"icon-only","onClicked:btn":a[1]||(a[1]=e=>(x.value=!1,C.value=!1,void(k.value=!0))),name:"Add new presenting complaints"},null,8,["icon"])]),_:1})):u("",!0),c(t,null,{default:v(()=>[c(o,{ref_key:"accordionGroup",ref:P,class:"previousView"},{default:v(()=>[c(l,{value:"first","toggle-icon-slot":"start",style:{"border-radius":"10px","background-color":"#fff"}},{default:v(()=>[c(f(g),{slot:"header",color:"light"},{default:v(()=>[c(n,{class:"previousLabel"},{default:v(()=>[...a[2]||(a[2]=[h("Previous presenting complaints",-1)])]),_:1})]),_:1}),m("div",Sa,[c(la)])]),_:1})]),_:1},512)]),_:1})],64)}}}),[["__scopeId","data-v-44affb13"]])),Pa={class:"visit-section"},Ia={class:"section-header"},Oa={key:0,class:"no-data"},Va={key:1,class:"allergy-accordion"},Aa=["onClick"],Ha={class:"acc-left"},Na={class:"acc-title"},Ma={class:"acc-count"},Ta={key:0,class:"accordion-body"},Ua={class:"item-label"},La={class:"item-value"},za=Ee(t({__name:"AllergiesListing",setup(e){const a=Pe(),{patient:t}=n(a),p=l({}),v={antiviral:/abacavir|lamivudine|lopinavir|ritonavir|zidovudine|efavirenz|tenofovir/i,antibiotic:/penicillin|amoxicillin|cephalexin|azithromycin|ciprofloxacin|doxycycline/i,analgesic:/aspirin|ibuprofen|acetaminophen|morphine|codeine|tramadol/i,cardiac:/metoprolol|lisinopril|amlodipine|atorvastatin|warfarin/i,activated:/activated\s+charcoal/i},g={985:{name:"Other",icon:_,severity:"danger"},7759:{name:"Location/Environmental",icon:C,severity:"info"},7579:{name:"Medical Condition",icon:k,severity:"warning"},drug:{name:"Drug Allergy",icon:_,severity:"danger"},food:{name:"Food Allergy",icon:w,severity:"danger"},environmental:{name:"Environmental",icon:x,severity:"warning"},contact:{name:"Contact Allergy",icon:y,severity:"warning"},unknown:{name:"Drug Allergy",icon:_,severity:"danger"}},h=o(()=>{var e,a,n,l;return[...null!==(e=null===(a=t.value)||void 0===a||null===(a=a.allergies)||void 0===a?void 0:a.saved)&&void 0!==e?e:[],...null!==(n=null===(l=t.value)||void 0===l||null===(l=l.allergies)||void 0===l?void 0:l.unsaved)&&void 0!==n?n:[]].length>0}),H=o(()=>{var e,a,n,l;const o=[...null!==(e=null===(a=t.value)||void 0===a||null===(a=a.allergies)||void 0===a?void 0:a.saved)&&void 0!==e?e:[],...null!==(n=null===(l=t.value)||void 0===l||null===(l=l.allergies)||void 0===l?void 0:l.unsaved)&&void 0!==n?n:[]];return 0===o.length?[]:o.map(e=>{var a;const t=(null===(a=e.concept_id)||void 0===a?void 0:a.toString())||"unknown",n=g[t]||g.unknown;let l="Unknown",o=null;return e.value_text&&"Unknown"!==e.value_text&&""!==e.value_text?(l=e.value_text,"985"!==t&&"985###"!==t||(o=(e=>{const a=e.toLowerCase();return v.antiviral.test(a)?{type:"Antiviral Medication",icon:"shield-outline"}:v.antibiotic.test(a)?{type:"Antibiotic",icon:"bandage-outline"}:v.analgesic.test(a)?{type:"Pain Medication",icon:"fitness-outline"}:v.cardiac.test(a)?{type:"Cardiac Medication",icon:"heart-outline"}:v.activated.test(a)?{type:"Detoxification Agent",icon:"flask-outline"}:{type:"Medication",icon:"medical-outline"}})(e.value_text))):e.concept_name&&(l=e.concept_name),{...o?{...n,name:o.type,icon:o.icon}:n,displayValue:l,conceptId:e.concept_id,date:e.obs_datetime||e.encounter_datetime,providerId:e.provider_id,locationId:e.location_id,encounterId:e.encounter_id,isDrug:"985"===t,raw:e}})}),N=o(()=>{const e={};H.value.forEach(a=>{const t=a.date?M(a.date):"Unknown Date";e[t]||(e[t]=[]),e[t].push(a)});const a={};return Object.keys(e).sort((e,a)=>"Unknown Date"===e?1:"Unknown Date"===a?-1:new Date(a).getTime()-new Date(e).getTime()).forEach(t=>{a[t]=e[t]}),a}),M=e=>{if(!e)return"Unknown Date";try{return new Date(e).toISOString().split("T")[0]}catch(a){return"Unknown Date"}},T=e=>{if("Unknown Date"===e)return"Unknown Date";try{const a=new Date(e),t=Ie.sessionDate(),n=new Date(t),l=new Date(n);l.setDate(l.getDate()-1);const o=a.toDateString(),i=n.toDateString(),s=l.toDateString();return o===i?"Today":o===s?"Yesterday":a.toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})}catch(a){return e}};return D(()=>N.value,e=>{const a=Object.keys(e);a.length>0&&(p.value[a[0]]=!0)},{immediate:!0}),D(()=>{var e;return null===(e=t.value)||void 0===e?void 0:e.allergies},e=>{console.log("Allergies updated:",e)},{deep:!0}),i(()=>{var e;console.log("Allergies component mounted",null===(e=t.value)||void 0===e?void 0:e.allergies)}),(e,a)=>{const t=s("ion-icon");return d(),r("div",Pa,[m("div",Ia,[c(t,{icon:f(S),class:"section-icon"},null,8,["icon"]),a[0]||(a[0]=m("h3",null,"Allergies",-1))]),h.value?(d(),r("div",Va,[(d(!0),r(b,null,P(N.value,(e,a)=>(d(),r("div",{key:a,class:"accordion-section"},[m("div",{class:V(["accordion-header",{open:p.value[a]}]),onClick:e=>(e=>{p.value[e]=!p.value[e]})(a)},[m("div",Ha,[c(t,{icon:f(I),class:"acc-icon"},null,8,["icon"]),m("span",Na,O(T(a)),1),m("span",Ma,"("+O(e.length)+")",1)]),c(t,{icon:f(A),class:V(["chevron",{rotate:p.value[a]}])},null,8,["icon","class"])],10,Aa),p.value[a]?(d(),r("div",Ta,[(d(!0),r(b,null,P(e,(e,a)=>(d(),r("div",{class:"allergy-item",key:a},[m("span",Ua,O(e.name)+":",1),m("span",La,O(e.displayValue),1)]))),128))])):u("",!0)]))),128))])):(d(),r("div",Oa,[c(t,{icon:f(E),class:"no-data-icon"},null,8,["icon"]),a[1]||(a[1]=m("p",null,"No known allergies",-1))]))])}}}),[["__scopeId","data-v-fa3ff98b"]]),Ba=t({name:"VisitHistory",components:{AllergiesListing:za,IonIcon:N},setup(){const e=Ve();return{selectedAllergiesList2:o(()=>e.selectedMedicalAllergiesList),alertCircleOutline:S,documentTextOutline:W,femaleOutline:$,medicalOutline:_,warningOutline:Y,bodyOutline:M,eyeOutline:G,nutritionOutline:j,fitnessOutline:B,pulseOutline:L,earOutline:q,happyOutline:F,manOutline:R,moveOutline:z,addOutline:U,scanOutline:T}},data:()=>({presentingComplaintsWithDuration:[],pastMedicalHistory:[],levelOfConsciousness:{eyeResponse:null,verbalResponse:null,motorResponse:null},pregnancy:{patientPregnant:null,breastFeeding:null},physicalExamCategories:{Eyes:{icon:G,abnormalities:[],normal:!1},Mouth:{icon:j,abnormalities:[],normal:!1},Ears:{icon:q,abnormalities:[],normal:!1},Face:{icon:F,abnormalities:[],normal:!1},Neck:{icon:R,abnormalities:[],normal:!1},Chest:{icon:B,abnormalities:[],normal:!1},"Chest Movement":{icon:z,abnormalities:[],normal:!1},"Heart Sounds":{icon:L,abnormalities:[],normal:!1},"Breath Sounds":{icon:U,abnormalities:[],normal:!1},"Added Breath Sounds":{icon:U,abnormalities:[],normal:!1},"Abdominal Inspection":{icon:T,abnormalities:[],normal:!1},"Genital Examination":{icon:M,abnormalities:[],normal:!1}}}),computed:{...H(Pe,["patient"]),hasLevelOfConsciousness(){return this.levelOfConsciousness.eyeResponse||this.levelOfConsciousness.verbalResponse||this.levelOfConsciousness.motorResponse},hasPresentingComplaints(){var e;return(null===(e=this.presentingComplaintsWithDuration)||void 0===e?void 0:e.length)>0},hasPregnancyData(){return this.pregnancy.patientPregnant||this.pregnancy.breastFeeding},hasPastMedicalHistory(){var e;return(null===(e=this.uniquePastMedicalHistory)||void 0===e?void 0:e.length)>0},hasAllergies(){var e;return(null===(e=this.selectedAllergiesList2)||void 0===e||null===(e=e.filter(e=>e.selected))||void 0===e?void 0:e.length)>0},hasPhysicalExam(){return Object.values(this.physicalExamCategories).some(e=>e.abnormalities.length>0||e.normal)},uniquePastMedicalHistory(){return[...new Set(this.pastMedicalHistory)]},uniquePresentingComplaints(){return[...new Set(this.presentingComplaintsWithDuration.map(e=>e.name))]},isMinor(){var e;return Ie.getAgeInYears(null===(e=this.patient)||void 0===e||null===(e=e.personInformation)||void 0===e?void 0:e.birthdate)<18},gcsScore(){var e,a,t;if(!this.hasLevelOfConsciousness)return null;const n=this.levelOfConsciousness.eyeResponse,l=this.levelOfConsciousness.motorResponse,o=this.levelOfConsciousness.verbalResponse,i=n&&null!==(e=(this.isMinor?Xe:Qe)[n])&&void 0!==e?e:0,s=l&&null!==(a=(this.isMinor?Ze:ea)[l])&&void 0!==a?a:0,r=o&&null!==(t=(this.isMinor?aa:ta)[o])&&void 0!==t?t:0;return`(M ${s} V ${r} E ${i}) ${i+s+r}/${this.isMinor?5:15}`}},methods:{async updateData(){var e;null!==(e=this.patient)&&void 0!==e&&e.patientID&&(await this.loadPresentingComplaints(),await this.loadPastMedicalHistory(),await this.loadLevelOfConsciousness(),await this.loadPregnancyStatus(),await this.loadPhysicalExam())},async loadPresentingComplaints(){try{const e=await ke.getObsByEncounterIdAndDate(Ce.PRESENTING_COMPLAINTS);this.presentingComplaintsWithDuration=[];const a=e.filter(e=>"Presenting complaint"===e.concept_name);for(const t of a){const a=e.find(e=>e.concept_id===t.value_coded&&"Presenting complaint"!==e.concept_name),n=await Oe.getConceptName(t.value_coded);this.presentingComplaintsWithDuration.push({name:n,duration:(null==a?void 0:a.value_text)||"Duration not specified"})}}catch(e){console.error("Error loading presenting complaints:",e)}},async loadPastMedicalHistory(){try{const e=(await ke.getObsByEncounterIdAndDate(Ce.PAST_MEDICAL_HISTORY)).filter(e=>"Chronic disease"===e.concept_name);this.pastMedicalHistory=await Promise.all(e.map(async e=>await Oe.getConceptName(e.value_coded)))}catch(e){console.error("Error loading past medical history:",e)}},async loadLevelOfConsciousness(){try{const e=await ke.getObsByEncounterIdAndDate(Ce.ASSESSMENT);if(e&&Array.isArray(e)){const a=e.find(e=>"Eye opening response"===e.concept_name);this.levelOfConsciousness.eyeResponse=null!=a&&a.value_coded?await Oe.getConceptName(a.value_coded):null;const t=e.find(e=>"Best verbal response"===e.concept_name);this.levelOfConsciousness.verbalResponse=null!=t&&t.value_coded?await Oe.getConceptName(t.value_coded):null;const n=e.find(e=>"Best motor response"===e.concept_name);this.levelOfConsciousness.motorResponse=null!=n&&n.value_coded?await Oe.getConceptName(n.value_coded):null}}catch(e){console.error("Error loading level of consciousness:",e)}},async loadPregnancyStatus(){try{const e=await ke.getObsByEncounterIdAndDate(Ce.PREGNANCY_STATUS);if(e&&Array.isArray(e)){const a=e.find(e=>"Patient pregnant"===e.concept_name);this.pregnancy.patientPregnant=null!=a&&a.value_coded?await Oe.getConceptName(a.value_coded):null;const t=e.find(e=>"Is patient breast feeding?"===e.concept_name);this.pregnancy.breastFeeding=null!=t&&t.value_coded?await Oe.getConceptName(t.value_coded):null}}catch(e){console.error("Error loading pregnancy status:",e)}},async loadPhysicalExam(){try{const e=await ke.getObsByEncounterIdAndDate(Ce.PHYSICAL_EXAMINATION);Object.values(this.physicalExamCategories).forEach(e=>{e.abnormalities=[],e.normal=!1});for(const a of e)if(a.concept_id){if(1065===a.value_coded)switch(a.concept_id){case 10837:this.physicalExamCategories.Eyes.normal=!0;break;case 10842:this.physicalExamCategories.Mouth.normal=!0;break;case 11028:this.physicalExamCategories.Ears.normal=!0;break;case 10854:this.physicalExamCategories.Face.normal=!0;break;case 10858:this.physicalExamCategories.Neck.normal=!0;break;case 10894:this.physicalExamCategories.Chest.normal=!0;break;case 10903:this.physicalExamCategories["Heart Sounds"].normal=!0;break;case 10909:this.physicalExamCategories["Breath Sounds"].normal=!0;break;case 10919:case 10928:case 10939:this.physicalExamCategories["Abdominal Inspection"].normal=!0;break;case 10803:case 10946:this.physicalExamCategories["Genital Examination"].normal=!0}if(a.value_coded){const e=await Oe.getConceptName(a.value_coded);switch(a.concept_id){case 10838:this.physicalExamCategories.Eyes.abnormalities.push(e);break;case 10843:this.physicalExamCategories.Mouth.abnormalities.push(e);break;case 10852:this.physicalExamCategories.Ears.abnormalities.push(e);break;case 10855:this.physicalExamCategories.Face.abnormalities.push(e);break;case 10859:this.physicalExamCategories.Neck.abnormalities.push(e);break;case 10897:this.physicalExamCategories.Chest.abnormalities.push(e);break;case 10904:this.physicalExamCategories["Heart Sounds"].abnormalities.push(e);break;case 10910:this.physicalExamCategories["Breath Sounds"].abnormalities.push(e);break;case 10920:case 10929:case 10939:this.physicalExamCategories["Abdominal Inspection"].abnormalities.push(e);break;case 10797:case 10804:case 10947:this.physicalExamCategories["Genital Examination"].abnormalities.push(e)}}}}catch(e){console.error("Error loading physical exam:",e)}}},watch:{patient:{async handler(){await this.updateData()},deep:!0}},async mounted(){await this.updateData()}}),Ra={class:"visit-container"},Fa={class:"visit-sections"},qa={key:0,class:"visit-section"},ja={class:"section-header"},Ga={class:"section-content"},Ya={key:0,class:"info-item"},$a={class:"info-value"},Wa={key:1,class:"info-item"},Ja={class:"info-value"},Ka={key:2,class:"info-item"},Xa={class:"info-value"},Qa={key:3,class:"info-item"},Za={class:"info-value highlight"},et={key:1,class:"visit-section"},at={class:"section-header"},tt={class:"complaints-container"},nt={class:"complaint-name"},lt={class:"complaint-duration"},ot={key:2,class:"visit-section"},it={class:"section-header"},st={class:"section-content"},rt={key:0,class:"info-item"},dt={class:"info-value highlight"},ct={key:1,class:"info-item"},ut={class:"info-value highlight"},pt={key:3,class:"visit-section"},vt={class:"section-header"},mt={class:"tags-container"},ft={class:"allergies-section"},gt={class:"allergies-container"},ht={key:4,class:"visit-section"},bt={class:"section-header"},_t={class:"exam-section"},yt={key:0,class:"exam-category"},xt={class:"exam-category-header"},wt={class:"exam-items"},kt={key:1,class:"exam-item normal"},Ct=Ee(Ba,[["render",function(e,a,t,n,l,o){const i=s("ion-icon"),p=s("AllergiesListing");return d(),r("div",Ra,[a[11]||(a[11]=m("div",{class:"visit-header"},[m("h5",null,"Patient's Clinical Assessment Summary")],-1)),m("div",Fa,[e.hasLevelOfConsciousness?(d(),r("div",qa,[m("div",ja,[c(i,{icon:e.alertCircleOutline,class:"section-icon"},null,8,["icon"]),a[0]||(a[0]=m("h3",null,"Level of Consciousness",-1))]),m("div",Ga,[e.levelOfConsciousness.eyeResponse?(d(),r("div",Ya,[a[1]||(a[1]=m("span",{class:"info-label"},"Eye Response:",-1)),m("span",$a,O(e.levelOfConsciousness.eyeResponse),1)])):u("",!0),e.levelOfConsciousness.verbalResponse?(d(),r("div",Wa,[a[2]||(a[2]=m("span",{class:"info-label"},"Verbal Response:",-1)),m("span",Ja,O(e.levelOfConsciousness.verbalResponse),1)])):u("",!0),e.levelOfConsciousness.motorResponse?(d(),r("div",Ka,[a[3]||(a[3]=m("span",{class:"info-label"},"Motor Response:",-1)),m("span",Xa,O(e.levelOfConsciousness.motorResponse),1)])):u("",!0),e.gcsScore?(d(),r("div",Qa,[a[4]||(a[4]=m("span",{class:"info-label"},"Score:",-1)),m("span",Za,O(e.gcsScore),1)])):u("",!0)])])):u("",!0),e.hasPresentingComplaints?(d(),r("div",et,[m("div",at,[c(i,{icon:e.documentTextOutline,class:"section-icon"},null,8,["icon"]),a[5]||(a[5]=m("h3",null,"Presenting Complaints",-1))]),m("div",tt,[(d(!0),r(b,null,P(e.presentingComplaintsWithDuration,(e,a)=>(d(),r("div",{class:"complaint-item",key:a},[m("div",nt,O(e.name),1),m("div",lt,O(e.duration),1)]))),128))])])):u("",!0),e.hasPregnancyData?(d(),r("div",ot,[m("div",it,[c(i,{icon:e.femaleOutline,class:"section-icon"},null,8,["icon"]),a[6]||(a[6]=m("h3",null,"Pregnancy Status",-1))]),m("div",st,[e.pregnancy.patientPregnant?(d(),r("div",rt,[a[7]||(a[7]=m("span",{class:"info-label"},"Pregnant:",-1)),m("span",dt,O(e.pregnancy.patientPregnant),1)])):u("",!0),e.pregnancy.breastFeeding?(d(),r("div",ct,[a[8]||(a[8]=m("span",{class:"info-label"},"Breastfeeding:",-1)),m("span",ut,O(e.pregnancy.breastFeeding),1)])):u("",!0)])])):u("",!0),e.hasPastMedicalHistory?(d(),r("div",pt,[m("div",vt,[c(i,{icon:e.medicalOutline,class:"section-icon"},null,8,["icon"]),a[9]||(a[9]=m("h3",null,"Medical History",-1))]),m("div",mt,[(d(!0),r(b,null,P(e.uniquePastMedicalHistory,(e,a)=>(d(),r("div",{class:"medical-tag",key:a},O(e),1))),128))])])):u("",!0),m("div",ft,[m("div",gt,[c(p)])]),e.hasPhysicalExam?(d(),r("div",ht,[m("div",bt,[c(i,{icon:e.bodyOutline,class:"section-icon"},null,8,["icon"]),a[10]||(a[10]=m("h3",null,"Physical Examination",-1))]),m("div",_t,[(d(!0),r(b,null,P(e.physicalExamCategories,(e,a)=>(d(),r(b,{key:a},[e.abnormalities.length>0||e.normal?(d(),r("div",yt,[m("div",xt,[c(i,{icon:e.icon},null,8,["icon"]),m("h4",null,O(a),1)]),m("div",wt,[e.abnormalities.length>0?(d(!0),r(b,{key:0},P(e.abnormalities,(e,a)=>(d(),r("div",{class:"exam-item abnormal",key:a},O(e),1))),128)):e.normal?(d(),r("div",kt," Normal examination ")):u("",!0)])])):u("",!0)],64))),128))])])):u("",!0)])])}],["__scopeId","data-v-795e1865"]]),Dt={class:"modal_wrapper"},St=e("_",t({__name:"PregnancyBreastfeeding",setup(e,{expose:a}){const t=Ae(),{pregnancy:l}=n(t),o=()=>{};return a({onSubmit:async()=>{const e=await ra(l.value);e.length>0?(await ke.addObsToEncounterPatient(e,Ce.PREGNANCY_STATUS),Se("Pregnancy status saved successfully")):De("No pregnancy status data to save ")}}),(e,a)=>(d(),r("div",Dt,[c(sa,{contentData:f(l),"onUpdate:inputValue":o},null,8,["contentData"])]))}})),Et={class:"modal_wrapper"},Pt={class:"uniform_columns"},It=Ee(t({__name:"PastMedicalHistory",setup(e,{expose:a}){const t=He(),{pastMedicalHistory:o}=n(t),s=l([]);i(()=>{s.value=t.getInitial(),u()}),D(o,()=>{u()},{deep:!0});const u=()=>{var e;const a=["TB","Chronic Obstructive Pulmonary Disease (COPD)","Asthma","Epilepsy","Previous stroke","Peptic Ulcer Disease (PUD)","Mental disorder","Bleeding disorders","Hypertension","HIV Positive","Diabetes Mellitus"];null!==(e=Ne(o.value,"None"))&&void 0!==e&&e.checked?a.forEach(e=>{Me(o.value,"TB treatment","displayNone",!0),xe(o.value,"TB drugs","displayNone",!0),xe(o.value,"TB drug start date","displayNone",!0),Me(o.value,"Hypertension medication","displayNone",!0),xe(o.value,"Current hypertension treatment regimen","displayNone",!0),Me(o.value,"HIV status","displayNone",!0),xe(o.value,"ARV start date","displayNone",!0),Me(o.value,"Diabetes","displayNone",!0),Me(o.value,"Controlled by","displayNone",!0),Te(o.value,e,"checked",!1),Te(o.value,e,"disabled",!0)}):a.forEach(e=>{Te(o.value,e,"disabled",!1)})},p=e=>{xe(o.value,"TB drugs","popOverData",{filterData:!0,data:[{name:"Auramine 'O' (C.I. 41000) 50g"},{name:"Bedaquilline 100mg"},{name:"Clofazimine 100mg"},{name:"Clofazimine 50mg"},{name:"Cycloserine 125mg"},{name:"Cycloserine 250mg"},{name:"Delamanid 50mg"},{name:"Ethambutol 100mg"},{name:"Ethambutol 400mg"},{name:"Ethionamide 250mg"},{name:"Isoniazid 100mg "},{name:"Isoniazid 300mg"},{name:"Isoniazid / Rifapentine 300mg / 300mg"},{name:"Levofloxacin 100mg"},{name:"Levofloxacin 250mg"},{name:"Linezolid 600mg"},{name:"Moxifloxacin 400mg"},{name:"Pyrazinamide 400mg"},{name:"Rifabutin 150mg Capsules"},{name:"Rifampicin 150mg/isoniazid 75mg"},{name:"Rifampicin 75mg+INH 50mg dispersible"},{name:"Rifampicin 75mg+INH 50mg+Pyrazinamide 150mg dispersible"},{name:"Rifampicin150mg/Isoniazid75mg/Pyrazinamide 400mg/Ethambutol"}]}),xe(o.value,"Current hypertension treatment regimen","popOverData",{filterData:!0,data:[{name:"Captopril 12.5mg"},{name:"Aspirin 75mg"},{name:"Hydrochlorothiazide 25mg"},{name:"Enalapril Meleate 5mg"},{name:"Enalapril Maleate 10mg"}]})};return a({onSubmit:async()=>{const e=await(async()=>[...await da(o.value),...await ra(o.value),...await ca(o.value)])();0!==e.length?(await ke.addObsToEncounterPatient(e,Ce.PAST_MEDICAL_HISTORY),Ue(),Se("Past medical history saved successful")):De("No past medical history data to save")}}),(e,a)=>(d(),r("div",Et,[m("div",Pt,[c(sa,{contentData:f(o),initialData:s.value,"onUpdate:inputValue":p,"onUpdate:selected":p},null,8,["contentData","initialData"])])]))}}),[["__scopeId","data-v-138b9dec"]]),Ot={class:"container"},Vt=e("a",Ee(t({__name:"PhysicalExamination",setup(e,{expose:a}){const t=Le(),o=Pe(),{physicalExam:u}=n(t),{patient:p}=n(o),m=l([]);i(()=>{m.value=t.getInitial(),g(),h()}),D(u,()=>{g(),h()},{deep:!0});const g=()=>{"No"==ze(u.value,"Physical examination")?Me(u.value,"Reason why physical examination not done","displayNone",!1):(Me(u.value,"Reason why physical examination not done","displayNone",!0),Me(u.value,"Reason why physical examination not done","selectedValue",""))},h=()=>{var e;const a=null===(e=p.value)||void 0===e||null===(e=e.personInformation)||void 0===e?void 0:e.gender;"M"==a&&(Te(u.value,"Vulva examination","disabled",!0),Te(u.value,"Visible bleeding","disabled",!0)),"F"==a&&(Te(u.value,"Urethral meatus abnormal","disabled",!0),Te(u.value,"Scrotal swelling","disabled",!0),Te(u.value,"Tastes swelling","disabled",!0))};return a({onSubmit:async()=>{const e=await(async()=>[...await da(u.value),...await ra(u.value),...await ca(u.value)])();console.log("Selected physical data is",e),0!==e.length?(await ke.addObsToEncounterPatient(e,Ce.PHYSICAL_EXAMINATION),Ue(),Se("Physical examination saved successful")):De("No physical examination data to save")}}),(e,a)=>{const t=s("ion-card-content"),n=s("ion-card");return d(),r("div",Ot,[c(n,{class:"section"},{default:v(()=>[c(t,null,{default:v(()=>[c(sa,{contentData:f(u),initialData:m.value},null,8,["contentData","initialData"])]),_:1})]),_:1})])}}}),[["__scopeId","data-v-9dcf3091"]])),At={key:0},Ht={class:"ion-padding",slot:"content"},Nt={class:"nav-buttons"},Mt={class:"ion-padding",slot:"content"},Tt={class:"nav-buttons"},Ut={class:"ion-padding",slot:"content"},Lt={class:"nav-buttons"},zt={class:"ion-padding",slot:"content"},Bt={class:"nav-buttons"},Rt={class:"ion-padding",slot:"content"},Ft={class:"nav-buttons"},qt={class:"ion-padding",slot:"content"},jt={class:"nav-buttons"},Gt=(e("C",Ee(t({__name:"ClinicalAssessment",setup(e,{expose:a}){const t=l("loc"),n=l(0),s=l(!1),_=l(!1),y=new Be,x=Pe(),w=()=>{n.value++},k=l(null),C=l(null),S=l(null),E=l(null),P=l(null),I=l(null),V=[{id:"loc",label:"Level of consciousness",show:!0},{id:"pc",label:"Presenting complaints",show:!0},{id:"pbs",label:"Pregnancy and breastfeeding status",show:()=>y.isChildBearing()},{id:"pmh",label:"Past medical history",show:!0},{id:"al",label:"Allergies",show:!0},{id:"pe",label:"Physical examination",show:!0}];async function A(){const e=we.getSessionDate(),a=[Ce.ASSESSMENT,Ce.PRESENTING_COMPLAINTS,Ce.PAST_MEDICAL_HISTORY,Ce.PHYSICAL_EXAMINATION,Ce.PREGNANCY_STATUS];let t=!1;for(const l of a)try{const a=await ke.getObsByEncounterIdAndDate(l);if(a&&a.some(a=>!!a.obs_datetime&&Ie.toStandardHisFormat(a.obs_datetime)===Ie.toStandardHisFormat(e))){t=!0;break}}catch(n){console.error(`Error checking observations for encounter type ${l}:`,n)}s.value=t}i(A),D(()=>x.patient,A);const H=o(()=>s.value),N=o(()=>V.filter(e=>"function"==typeof e.show?e.show():e.show)),M=e=>{const a=V.find(a=>a.id===e);return!!a&&("function"==typeof a.show?a.show():a.show)},T=e=>N.value.findIndex(a=>a.id===e),U=e=>{const a=T(e);a>0&&(t.value=N.value[a-1].id)},L=e=>{const a=T(e)+1;a<N.value.length?t.value=N.value[a].id:(t.value="",w())};return a({onSubmit:async()=>{const e=[{ref:k,name:"PresentingComplaints"},{ref:C,name:"LevelOfConsciousness"},{ref:S,name:"PastMedicalHistory"},{ref:P,name:"PregnancyBreastfeeding"},{ref:I,name:"PhysicalExamination"}];for(const t of e)if(t.ref.value&&"function"==typeof t.ref.value.onSubmit)try{const e=await t.ref.value.onSubmit();if("PresentingComplaints"===t.name&&!1===e)return}catch(a){if(console.error(`Error calling ${t.name} onSubmit:`,a),"PresentingComplaints"===t.name)return}else console.log(`${t.name} component ref not available or no onSubmit method`)}}),(e,a)=>(d(),r(b,null,[H.value?(d(),r("div",At,[c(f(g),{lines:"none"},{default:v(()=>[c(f(J),null,{default:v(()=>[...a[14]||(a[14]=[h("Switch between Capture Mode and Summary Mode",-1)])]),_:1}),c(f(K),{checked:_.value,onIonChange:a[0]||(a[0]=e=>_.value=e.detail.checked),slot:"end"},null,8,["checked"])]),_:1}),_.value?u("",!0):(d(),p(Ct,{key:n.value}))])):u("",!0),!H.value||_.value?(d(),p(f(ae),{key:1,style:{width:"100%"}},{default:v(()=>[c(f(X),{value:t.value,"onUpdate:value":a[13]||(a[13]=e=>t.value=e),ref:"accordionGroup",class:"previousView"},{default:v(()=>[M("loc")?(d(),p(f(Q),{key:0,value:"loc",class:"_card"},{default:v(()=>[c(f(g),{slot:"header",color:"light"},{default:v(()=>[c(f(J),{class:"previousLabel"},{default:v(()=>[...a[15]||(a[15]=[h("Level of consciousness",-1)])]),_:1})]),_:1}),m("div",Ht,[c(na,{"is-active":"loc"===t.value,ref_key:"levelOfConsciousnessFormRef",ref:C,onDataSaved:w},null,8,["is-active"]),m("div",Nt,[T("loc")>0?(d(),p(f(Z),{key:0,fill:"outline",onClick:a[1]||(a[1]=ee(e=>U("loc"),["stop"]))},{default:v(()=>[...a[16]||(a[16]=[h(" Back ",-1)])]),_:1})):u("",!0),c(f(Z),{fill:"outline",onClick:a[2]||(a[2]=ee(e=>L("loc"),["stop"]))},{default:v(()=>[h(O(T("loc")<N.value.length-1?"Next":"Finish"),1)]),_:1})])])]),_:1})):u("",!0),M("pc")?(d(),p(f(Q),{key:1,value:"pc",class:"_card"},{default:v(()=>[c(f(g),{slot:"header",color:"light"},{default:v(()=>[c(f(J),{class:"previousLabel"},{default:v(()=>[...a[17]||(a[17]=[h(" Presenting complaints - ",-1),m("span",{class:"required-badge"},"Required",-1)])]),_:1})]),_:1}),m("div",Mt,[c(Ea,{"is-active":"pc"===t.value,onDataSaved:w,ref_key:"presentingComplaintsFormRef",ref:k},null,8,["is-active"]),m("div",Tt,[T("pc")>0?(d(),p(f(Z),{key:0,fill:"outline",onClick:a[3]||(a[3]=ee(e=>U("pc"),["stop"]))},{default:v(()=>[...a[18]||(a[18]=[h(" Back ",-1)])]),_:1})):u("",!0),c(f(Z),{fill:"outline",onClick:a[4]||(a[4]=ee(e=>L("pc"),["stop"]))},{default:v(()=>[h(O(T("pc")<N.value.length-1?"Next":"Finish"),1)]),_:1})])])]),_:1})):u("",!0),M("pbs")?(d(),p(f(Q),{key:2,value:"pbs",class:"_card"},{default:v(()=>[c(f(g),{slot:"header",color:"light"},{default:v(()=>[c(f(J),{class:"previousLabel"},{default:v(()=>[...a[19]||(a[19]=[h("Pregnancy and breastfeeding status",-1)])]),_:1})]),_:1}),m("div",Ut,[c(St,{"is-active":"pbs"===t.value,ref_key:"pregnancyBreastfeedingFormRef",ref:P,onDataSaved:w},null,8,["is-active"]),m("div",Lt,[T("pbs")>0?(d(),p(f(Z),{key:0,fill:"outline",onClick:a[5]||(a[5]=ee(e=>U("pbs"),["stop"]))},{default:v(()=>[...a[20]||(a[20]=[h(" Back ",-1)])]),_:1})):u("",!0),c(f(Z),{fill:"outline",onClick:a[6]||(a[6]=ee(e=>L("pbs"),["stop"]))},{default:v(()=>[h(O(T("pbs")<N.value.length-1?"Next":"Finish"),1)]),_:1})])])]),_:1})):u("",!0),M("pmh")?(d(),p(f(Q),{key:3,value:"pmh",class:"_card"},{default:v(()=>[c(f(g),{slot:"header",color:"light"},{default:v(()=>[c(f(J),{class:"previousLabel"},{default:v(()=>[...a[21]||(a[21]=[h("Past medical history",-1)])]),_:1})]),_:1}),m("div",zt,[c(It,{"is-active":"pmh"===t.value,ref_key:"pastMedicalHistoryFormRef",ref:S,onDataSaved:w},null,8,["is-active"]),m("div",Bt,[T("pmh")>0?(d(),p(f(Z),{key:0,fill:"outline",onClick:a[7]||(a[7]=ee(e=>U("pmh"),["stop"]))},{default:v(()=>[...a[22]||(a[22]=[h(" Back ",-1)])]),_:1})):u("",!0),c(f(Z),{fill:"outline",onClick:a[8]||(a[8]=ee(e=>L("pmh"),["stop"]))},{default:v(()=>[h(O(T("pmh")<N.value.length-1?"Next":"Finish"),1)]),_:1})])])]),_:1})):u("",!0),M("al")?(d(),p(f(Q),{key:4,value:"al",class:"_card"},{default:v(()=>[c(f(g),{slot:"header",color:"light"},{default:v(()=>[c(f(J),{class:"previousLabel"},{default:v(()=>[...a[23]||(a[23]=[h("Allergies",-1)])]),_:1})]),_:1}),m("div",Rt,[c(ua,{"is-active":"al"===t.value,ref_key:"allergiesFormRef",ref:E,onDataSaved:w},null,8,["is-active"]),m("div",Ft,[T("al")>0?(d(),p(f(Z),{key:0,fill:"outline",onClick:a[9]||(a[9]=ee(e=>U("al"),["stop"]))},{default:v(()=>[...a[24]||(a[24]=[h(" Back ",-1)])]),_:1})):u("",!0),c(f(Z),{fill:"outline",onClick:a[10]||(a[10]=ee(e=>L("al"),["stop"]))},{default:v(()=>[h(O(T("al")<N.value.length-1?"Next":"Finish"),1)]),_:1})])])]),_:1})):u("",!0),M("pe")?(d(),p(f(Q),{key:5,value:"pe",class:"_card"},{default:v(()=>[c(f(g),{slot:"header",color:"light"},{default:v(()=>[c(f(J),{class:"previousLabel"},{default:v(()=>[...a[25]||(a[25]=[h("Physical examination",-1)])]),_:1})]),_:1}),m("div",qt,[c(Vt,{"is-active":"pe"===t.value,ref_key:"physicalExaminationFormRef",ref:I,onDataSaved:w},null,8,["is-active"]),m("div",jt,[T("pe")>0?(d(),p(f(Z),{key:0,fill:"outline",onClick:a[11]||(a[11]=ee(e=>U("pe"),["stop"]))},{default:v(()=>[...a[26]||(a[26]=[h(" Back ",-1)])]),_:1})):u("",!0),c(f(Z),{fill:"outline",onClick:a[12]||(a[12]=ee(e=>L("pe"),["stop"]))},{default:v(()=>[h(O(T("pe")<N.value.length-1?"Next":"Finish"),1)]),_:1})])])]),_:1})):u("",!0)]),_:1},8,["value"])]),_:1})):u("",!0)],64))}}),[["__scopeId","data-v-ee4aaff3"]])),{class:"allergies-section"}),Yt={class:"allergies-container"},$t={class:"medication-section"},Wt={class:"medication-content"},Jt={key:0,class:"add-medication-form"},Kt={class:"form-group"},Xt={class:"option-label"},Qt={key:0,class:"error-message"},Zt={class:"form-row"},en={class:"form-group"},an={key:0,class:"error-message"},tn={class:"form-group"},nn={key:0,class:"error-message"},ln={class:"form-group"},on={key:0,class:"error-message"},sn={class:"action-buttons"},rn={class:"notes-section"},dn={class:"notes-content"},cn={class:"notes-input-container"},un={class:"ion-padding",slot:"content"},pn={class:"notes-timeline"},vn={class:"note-date"},mn={class:"note-content"},fn={class:"ion-padding",slot:"content"},gn={class:"note-date"},hn={class:"note-content"},bn=t({watch:{},name:"xxxComponent"}),_n=t({...bn,setup(e){const a=fe,t=ma,n=l(!1),s=l(!1),y=l(!0),x=l(0),w=l(""),k=l(!1),C=l(),S=l(!1),E=l(""),I=l(""),V=l(""),A=l(""),H=l(""),M=l(""),T=Re(),L=Ve(),z=o(()=>L.selectedMedicalAllergiesList),B=o(()=>T.selectedMedicalDrugsList),R=o(()=>T.partialOPDdrugList),F=o(()=>T.nonPharmalogicalTherapyAndOtherNotes),q=["first","second","third"],j=l(),G=l(),Y=l(),$=l(!1),W=l(!1),K=l("Show more notes"),Z=l(),ee=l(),ae=l(),de=o(()=>T.editingDrugItem),ce=l("Select a route"),ue=l(!1),pe=l("Select frequency"),ve=l(!1),me=l("Select drug"),ge=l(!1),he=l(),be=l(),_e=l(),xe=l([]),ke=l([{concept_id:11797,name:"Buccal",concept_name_id:null,id:1769},{concept_id:11794,name:"Intradermal",concept_name_id:null,id:6284},{concept_id:11795,name:"Intramuscular (IM)",concept_name_id:null,id:6285},{concept_id:11799,name:"Intraosseous",concept_name_id:null,id:6286},{concept_id:11793,name:"Intravenous (IV)",concept_name_id:null,id:6295},{concept_id:3327,name:"Oral",concept_name_id:null,id:8686},{concept_id:11800,name:"Other method of prescription",concept_name_id:null,id:8920},{concept_id:11792,name:"Rectally",concept_name_id:null,id:10785},{concept_id:11798,name:"Subcutaneous",concept_name_id:null,id:12342},{concept_id:11796,name:"Sublingual",concept_name_id:null,id:12344},{concept_id:11792,name:"Rectally",concept_name_id:null,id:14078},{concept_id:11793,name:"Intravenous (IV)",concept_name_id:null,id:14079},{concept_id:11794,name:"Intradermal",concept_name_id:null,id:14080},{concept_id:11795,name:"Intramuscular (IM)",concept_name_id:null,id:14081},{concept_id:11796,name:"Sublingual",concept_name_id:null,id:14082},{concept_id:11797,name:"Buccal",concept_name_id:null,id:14083},{concept_id:11798,name:"Subcutaneous",concept_name_id:null,id:14084},{concept_id:11799,name:"Intraosseous",concept_name_id:null,id:14085},{concept_id:11800,name:"Other method of prescription",concept_name_id:null,id:14086}]),Ce=o(()=>xe.value.length?xe.value:ke.value);async function Se(){return await fa()}function Ee(){y.value=!y.value,n.value=!0,k.value=!1,S.value=!1}async function Pe(){return Te(V.value)?S.value=!1:(C.value="please enter a number",S.value=!0),S.value}async function Ie(){const e=await Pe(),a=1==ha.isEmpty(be.value)?(ve.value=!0,!1):0==ha.isEmpty(be.value)?(ve.value=!1,!0):void 0,t=1==ha.isEmpty(_e.value)?(ge.value=!0,!1):0==ha.isEmpty(_e.value)?(ge.value=!1,!0):void 0,n=1==ha.isEmpty(he.value)?(ue.value=!0,!1):0==ha.isEmpty(he.value)?(ue.value=!1,!0):void 0;return!e&&1==a&&1==t&&1==n}async function Oe(){try{const e=()=>null!=ae.value.dose_strength&&ae.value.dose_strength?Math.trunc(ae.value.dose_strength):1;if(null!==de.value){if(!(await Ie()))return void De("Please enter correct data values",4e3);const a=Ue(we.getSessionDate(),parseInt(V.value));let t=!1;1==Ae(ae.value)&&(t=!0);const n={drugName:E.value,dose:e(),frequency:be.value.label,frequency_code:be.value.code,duration:V.value,prescription:a,drug_id:M.value,units:H.value,route_concept_id:he.value.concept_id,route_name:he.value.name,highlightbackground:t},l=Re();console.log(l.setSelectedMedicalDrugsList([n])),l.editingDrugItem=null,y.value=!0}else{if(!(await Ie()))return void De("Please enter correct data values",4e3);n.value=!1,s.value=!0,y.value=!0;const a=Ue(we.getSessionDate(),parseInt(V.value));let t=!1;1==Ae(ae.value)&&(t=!0);const l={drugName:E.value,dose:e(),frequency:be.value.label,frequency_code:be.value.code,duration:V.value,prescription:a,drug_id:M.value,units:H.value,route_concept_id:he.value.concept_id,route_name:he.value.name,highlightbackground:t};Re().setSelectedMedicalDrugsList([l])}M.value="",E.value="",I.value="",be.value=null,V.value="",A.value="",x.value++,_e.value=null,he.value=null}catch(e){console.error("Error saving data:",e)}}function Ae(e){const a=[];return z.value.forEach(e=>{e.selected&&a.push(e.concept_id)}),1==function(e,a){try{return e.some(e=>a.includes(e.concept_id))}catch(t){return!1}}([e],a)&&(De("Client is allergic to the selected medication",4e6),!0)}function He(e){const a=B.value[e],t=Re();t.removeDrugById(a.drug_id),t.editingDrugItem=a,M.value="",E.value="",I.value="",be.value=null,V.value="",A.value="",_e.value=null,he.value=null,M.value=a.drug_id,E.value=a.drugName,I.value=a.dose,be.value={label:a.frequency,code:a.frequency_code},V.value=a.duration,A.value=a.prescription;const n=R.value.find(e=>e.name===a.drugName);n&&(_e.value=n),he.value={concept_id:a.route_concept_id,name:a.route_name},y.value=!1,x.value++}function Ne(e){B.value.splice(e,1),x.value++,De("you have removed a drug from list",6e3)}function Me(e){!function(e){Re().setNonPharmalogicalTherapyAndOtherNotes(e)}(e.target.value)}function Te(e){return/^[0-9]+$/.test(e)}function Ue(e,a){const t=new Date(e);return t.setDate(t.getDate()+a),`${t.getFullYear()}-${String(t.getMonth()+1).padStart(2,"0")}-${String(t.getDate()).padStart(2,"0")}`}function Le(e){q.filter(a=>a!==e.detail.value);const a=e.detail.value;void 0!==a?"third"==a&&(K.value="Show less notes",W.value=!$.value):(K.value="Show more notes",W.value=!$.value)}function ze(e){"Enter"!==e.key&&"ArrowDown"!==e.key||(e.preventDefault(),Oe())}i(async()=>{const e=new ga,{previousDrugPrescriptions:a,previousClinicalNotes:t,previousDrugAllergies:n}=await e.getPatientEncounters();j.value=a,G.value=Object.entries(t)[0];const[,...l]=Object.entries(t);Y.value=l,Z.value=Object.entries(n)[0];const[,...o]=Object.entries(n);ee.value=o,await async function(e=5,a=1e3){let t=0;for(;t<e&&(xe.value=await Se(),!(xe.value.length>0));)t++,await new Promise(e=>setTimeout(e,a));0===xe.value.length&&console.warn("Failed to fetch route list after maximum retries.")}()}),D(()=>I.value,async e=>{!async function(){Te(I.value)?k.value=!1:(w.value="please enter a number",k.value=!0),k.value}()}),D(()=>V.value,async e=>{Pe()});const Be=o(()=>[{showAddItemButton:!0,addItemButton:!0,name:null!==de.value?"Update":"ADD",fn:Oe},{showAddItemButton:!0,addItemButton:!0,name:"CANCEL",fn:Ge}]),Ge=async()=>{Fe(qe,{class:"otherVitalsModal"},!0,{message:"Are you sure you want to cancel?"},{cancel:e=>{},confirm:async e=>{1==e.detail&&function(){if(null!==de.value){M.value="",E.value="",I.value="",be.value=null,V.value="",A.value="",_e.value=null,he.value=null;const e=Re();e.setSelectedMedicalDrugsList([de.value]),e.editingDrugItem=null}y.value=!0,x.value++}()}})};return(e,n)=>(d(),p(f(re),null,{default:v(()=>[m("div",Gt,[m("div",Yt,[c(za)])]),m("div",$t,[c(f(g),{lines:"none",class:"section-header"},{default:v(()=>[c(f(N),{icon:f(_),class:"section-icon"},null,8,["icon"]),c(f(J),{class:"section-title",style:{"margin-top":"12px"}},{default:v(()=>[...n[9]||(n[9]=[h("Medication",-1)])]),_:1})]),_:1}),m("div",Wt,[(d(),p(pa,{_selectedMedicalDrugsList:B.value,onEditItem:He,onRemoveItem:Ne,key:x.value,class:"medication-list"},null,8,["_selectedMedicalDrugsList"])),y.value?u("",!0):(d(),r("div",Jt,[m("div",Kt,[n[10]||(n[10]=m("label",{class:"input-label"},"Medication",-1)),c(f(te),{modelValue:_e.value,"onUpdate:modelValue":[n[0]||(n[0]=e=>_e.value=e),n[1]||(n[1]=e=>{var a;(a=e)&&(E.value=a.name,M.value=a.drug_id,H.value=a.units,ae.value=a,Ae(a))})],options:R.value,searchable:!0,"close-on-select":!0,"show-labels":!1,placeholder:"Select medication",label:"name","track-by":"drug_id",onSearchChange:n[2]||(n[2]=e=>async function(e){const a=e,t=await je.getOfflineOPDDrugs({name:a,page:1,page_size:10});t.map(e=>({label:e.name,value:e.name,other:e})),T.setPartialOPDdrugList(t)}(e))},{option:v(e=>[m("div",Xt,O(e.option.name),1)]),_:1},8,["modelValue","options"]),ge.value?(d(),r("div",Qt,O(me.value),1)):u("",!0)]),m("div",Zt,[m("div",en,[n[11]||(n[11]=m("label",{class:"input-label"},"Route",-1)),c(f(te),{modelValue:he.value,"onUpdate:modelValue":[n[3]||(n[3]=e=>he.value=e),n[4]||(n[4]=e=>{return a=e,void(he.value=a);var a})],options:Ce.value,searchable:!0,"close-on-select":!0,"show-labels":!1,placeholder:"Select route",label:"name","track-by":"concept_id",disabled:!1},null,8,["modelValue","options"]),ue.value?(d(),r("div",an,O(ce.value),1)):u("",!0)]),m("div",tn,[n[12]||(n[12]=m("label",{class:"input-label"},"Frequency",-1)),c(f(te),{modelValue:be.value,"onUpdate:modelValue":[n[5]||(n[5]=e=>be.value=e),n[6]||(n[6]=e=>{return a=e,void(be.value=a);var a})],options:f(t),searchable:!0,"close-on-select":!0,"show-labels":!1,placeholder:"Select frequency",label:"label","track-by":"code"},null,8,["modelValue","options"]),ve.value?(d(),r("div",nn,O(pe.value),1)):u("",!0)]),m("div",ln,[n[13]||(n[13]=m("label",{class:"input-label"},"Duration (days)",-1)),c(f(ne),{modelValue:V.value,"onUpdate:modelValue":n[7]||(n[7]=e=>V.value=e),type:"number",inputmode:"numeric",pattern:"[0-9]*",fill:"outline",placeholder:"Enter duration",onKeydown:ze},null,8,["modelValue"]),S.value?(d(),r("div",on,O(C.value),1)):u("",!0)])]),m("div",sn,[Be.value[0].addItemButton?(d(),p(ye,{key:0,name:Be.value[0].name,icon:f(le),"onClicked:btn":Be.value[0].fn,class:"save-button"},null,8,["name","icon","onClicked:btn"])):u("",!0),Be.value[1].addItemButton?(d(),p(ye,{key:1,name:Be.value[1].name,icon:f(oe),"onClicked:btn":Be.value[1].fn,class:"cancel-button"},null,8,["name","icon","onClicked:btn"])):u("",!0)])])),y.value?(d(),p(ye,{key:1,name:"Add new medication",icon:f(U),fontWeight:"600","onClicked:btn":Ee,class:"add-new-button"},null,8,["icon"])):u("",!0)])]),m("div",rn,[c(f(g),{lines:"none",class:"section-header"},{default:v(()=>[c(f(N),{icon:f(ie),class:"section-icon"},null,8,["icon"]),c(f(J),{class:"section-title"},{default:v(()=>[...n[14]||(n[14]=[h("Non-pharmacological therapy and other notes",-1)])]),_:1})]),_:1}),m("div",dn,[c(va,{class:"intervention-component"}),m("div",cn,[c(f(g),{class:"notes-input-item"},{default:v(()=>[c(f(N),{slot:"start",icon:f(a).editPen,class:"edit-icon","aria-hidden":"true"},null,8,["icon"]),c(f(se),{modelValue:F.value,"onUpdate:modelValue":n[8]||(n[8]=e=>F.value=e),onIonInput:Me,placeholder:"Enter notes here...","auto-grow":!0,class:"notes-textarea",fill:"outline",style:{"--padding-start":"16px"}},null,8,["modelValue"])]),_:1})]),c(f(X),{ref:"accordionGroup",class:"previous-notes"},{default:v(()=>[c(f(Q),{value:"fourth","toggle-icon-slot":"start"},{default:v(()=>[c(f(g),{slot:"header",color:"light",class:"previous-notes-header"},{default:v(()=>[c(f(J),null,{default:v(()=>[...n[15]||(n[15]=[h("Previous visit notes",-1)])]),_:1})]),_:1}),m("div",un,[m("div",pn,[1===e.index?(d(!0),r(b,{key:0},P(G.value,(e,a)=>(d(),r("div",{key:a,class:"note-entry"},[(d(!0),r(b,null,P(e,(e,a)=>(d(),r("div",{key:a},[m("div",vn,O(e.date),1),m("div",mn,O(e.notes),1)]))),128))]))),128)):u("",!0),c(f(X),{onIonChange:Le},{default:v(()=>[c(f(Q),{value:"third","toggle-icon-slot":"start"},{default:v(()=>[c(f(g),{slot:"header",color:"light",class:"show-more-header"},{default:v(()=>[c(f(J),{color:"primary"},{default:v(()=>[h(O(K.value),1)]),_:1})]),_:1}),m("div",fn,[(d(!0),r(b,null,P(Y.value,(e,a)=>{return d(),r("div",{key:a,class:"note-entry"},[(d(!0),r(b,null,P((t=e,t[1]),(e,a)=>(d(),r("div",{key:a},[m("div",gn,O(e.date),1),m("div",hn,O(e.notes),1)]))),128))]);var t}),128))])]),_:1})]),_:1})])])]),_:1})]),_:1},512)])])]),_:1}))}}),yn=(e("b",Ee(_n,[["__scopeId","data-v-0c2a73b2"]])),t({name:"xxxComponent"})),xn=t({...yn,emits:["dataSaved"],setup(e,{emit:a}){const t=l(),n=l("gurdian phone number");l(!0),l(!0);const o=l(!0),g=l(),y=l();i(async()=>{!function(){const e=(new Be).isChildBearing;1==e&&(k[0].disable_checkbox.value=!1),0==e&&(k[0].disable_checkbox.value=!0)}()});const x=[{placeHolder:{default:"Enter time of death if known"},property_name:"timeOfDeath",dataHandler:function(e){x[0].dataValue.value=e},dataValue:l(),show_error:l(!1),error_message:"Time required",type:"time",skip_validation:!1},{placeHolder:{default:"Enter time arrived"},property_name:"timeArrived",dataHandler:function(e){x[1].dataValue.value=e},dataValue:l(),show_error:l(!1),error_message:"Time required",type:"time",skip_validation:!1},{placeHolder:{default:"Enter time confirming death"},property_name:"timeOfDeathConfirmation",dataHandler:function(e){x[2].dataValue.value=e},dataValue:l(),show_error:l(!1),error_message:"Time required",skip_validation:!1}],w=[{placeHolder:{default:"Enter date of death"},property_name:"dateOfDeath",dataHandler:function(e){const a={day:e.value.day,month:e.value.month,year:e.value.year,formattedDate:e.value.formattedDate};w[0].dataValue.value=a},dataValue:l(),show_error:l(!1),error_message:"Date required",type:"date",skip_validation:!1},{placeHolder:{default:"Enter date arrived"},property_name:"dateArrived",dataHandler:function(e){const a={day:e.value.day,month:e.value.month,year:e.value.year,formattedDate:e.value.formattedDate};w[1].dataValue.value=a,console.log(w[2].dataValue.value)},dataValue:l(),show_error:l(!1),error_message:"Date required",type:"date",skip_validation:!1},{placeHolder:{default:"Enter date confirming death"},property_name:"dateOfDeathConfirmation",dataHandler:function(e){const a={day:e.value.day,month:e.value.month,year:e.value.year,formattedDate:e.value.formattedDate};w[2].dataValue.value=a,console.log(w[2].dataValue.value)},dataValue:l(),show_error:l(!1),error_message:"Date required",type:"date",skip_validation:!1}],k=[{lblTxt:"Was the individual pregnant at the time of death?",value:l(!1),disable_checkbox:l(!0)}],D=[{placeHolder:"Enter place of death",property_name:"placeOfDeath",dataHandler:function(e){const a=e.target.value;D[0].dataValue.value=a},dataValue:l(),show_error:l(!1),error_message:"Input required, Only letters allowed",type:"text",skip_validation:!1},{placeHolder:"Enter name of guardian",property_name:"nameOfGuardian",dataHandler:function(e){const a=e.target.value;D[1].dataValue.value=a},dataValue:l(),show_error:l(!1),error_message:"Input required, Only letters allowed",type:"text",skip_validation:!1},{placeHolder:"Enter name of person confirming death",property_name:"nameOfPersonConfirmindDeath",dataHandler:function(e){const a=e.target.value;D[2].dataValue.value=a},dataValue:l(),show_error:l(!1),error_message:"Input required, Only letters allowed",type:"text",skip_validation:!1},{placeHolder:"Enter position of the person confirming death",property_name:"positionOfthePersonConfirmingDeath",dataHandler:function(e){const a=e.target.value;D[3].dataValue.value=a},dataValue:l(),show_error:l(!1),error_message:"Input required, Only letters allowed",type:"text",skip_validation:!1},{placeHolder:"Enter medical council registration number of the person confirming death",property_name:"medicalConcilRegistrationNumberOfThePersonConfirmingDeath",dataHandler:function(e){const a=e.target.value;D[4].dataValue.value=a},dataValue:l(),show_error:l(!1),error_message:"Input required, Only letters and numbers are allowed",type:"alphanumeric",skip_validation:!1},{placeHolder:"Other (specify)",property_name:"otherNotes",dataHandler:function(e){const a=e.target.value;D[5].dataValue.value=a},dataValue:l(),show_error:l(!1),error_message:"Input required, Only letters allowed",dissabled:o.value,type:"text",skip_validation:!0}],S=[{showAddItemButton:!0,addItemButton:!0,name:"save",btnFill:"clear",fn:function(){$e(D),$e(w),$e(x),function(){const e=E.value.filter(e=>e.selected);if(0==e.length)I[0].show_error.value=!0;else if(I[0].show_error.value=!1,"Accident"==e[0].name){const e=P.value.filter(e=>e.selected);I[1].show_error.value=0==e.length}}();const e=ha.merge(We(D),We(w),We(x),N(I[0]),N(I[1]));console.log(e)}},{showAddItemButton:!0,addItemButton:!0,name:"cancel",btnFill:"clear",fn:function(){!function(e={dataSaved:!0}){V("dataSaved",e)}()}}],E=l([{id:1,name:"Natural",selected:!1},{id:2,name:"Accident",selected:!1},{id:3,name:"Homicide",selected:!1},{id:4,name:"Suicide",selected:!1},{id:5,name:"Pending investigation",selected:!1},{id:6,name:"Could not be determined",selected:!1},{id:7,name:"Other - specify",selected:!1}]),P=l([{id:1,name:"Motor vehicle (passenger)",selected:!1},{id:2,name:"Motor vehicle (pedestrian)",selected:!1},{id:3,name:"Drowning",selected:!1},{id:4,name:"Other - specify",selected:!1}]),I=[{multi_Selection:!1,manner_of_death_Selection_value:l(),show_list_label:!0,unqueId:"qwerty",name_of_list:"Manner of death ",property_name:"mannerOfDeath",placeHolder:"Choose one",items:E.value,listUpdatedFN:A,listFilteredFN:()=>{},use_internal_filter:!0,disabled:l(!1),show_error:l(!1),error_message:"selection required"},{multi_Selection:!1,show_list_label:!0,unqueId:"qwerty1hjkn",name_of_list:"How did it occur?",property_name:"howDiditOccur",placeHolder:"Choose one",items:P.value,listUpdatedFN:H,listFilteredFN:()=>{},use_internal_filter:!0,disabled:l(!0),show_error:l(!1),error_message:"selection required"}],V=a;function A(e){E.value.forEach(e=>e.selected=!1);const a=E.value.find(a=>a.id==e.id);I[1].disabled.value="Accident"!=e.name,a.selected=!0}function H(e){console.log("listUpdated",e),P.value.forEach(e=>e.selected=!1),P.value.find(a=>a.id==e.id).selected=!0}function N(e){const a=[];let t={};return e.items.forEach(t=>{1==t.selected&&a.push({property_name:e.property_name,name:t.name})}),a.length>0?(t[a[0].property_name]=a[0].name,t):t}return(e,a)=>{const l=s("ion-label");return d(),r(b,null,[c(f(ae),{class:"checkbox_content md"},{default:v(()=>[c(f(de),null,{default:v(()=>[c(Ge,{placeholder:D[0].placeHolder,icon:f(C),inputValue:D[0].dataValue.value,"onUpdate:inputValue":D[0].dataHandler},null,8,["placeholder","icon","inputValue","onUpdate:inputValue"]),m("div",null,[D[0].show_error.value?(d(),p(l,{key:0,class:"error-label"},{default:v(()=>[h(O(D[0].error_message),1)]),_:1})):u("",!0)])]),_:1}),c(f(de),null,{default:v(()=>[c(Ye,{place_holder:w[0].placeHolder,onDateUpDated:w[0].dataHandler,date_prop:""},null,8,["place_holder","onDateUpDated"]),m("div",null,[w[0].show_error.value?(d(),p(l,{key:0,class:"error-label"},{default:v(()=>[h(O(w[0].error_message),1)]),_:1})):u("",!0)])]),_:1})]),_:1}),c(f(ae),null,{default:v(()=>[c(f(de),null,{default:v(()=>[c(ba,{place_holder:x[0].placeHolder,onTimeUpDated:x[0].dataHandler,time_prop:""},null,8,["place_holder","onTimeUpDated"]),m("div",null,[x[0].show_error.value?(d(),p(l,{key:0,class:"error-label"},{default:v(()=>[h(O(x[0].error_message),1)]),_:1})):u("",!0)])]),_:1}),c(f(de))]),_:1}),c(f(ae),{class:"checkbox_content md"},{default:v(()=>[c(f(de),null,{default:v(()=>[c(Ge,{placeholder:D[1].placeHolder,icon:f(ce),inputValue:D[1].dataValue.value,"onUpdate:inputValue":D[1].dataHandler},null,8,["placeholder","icon","inputValue","onUpdate:inputValue"]),m("div",null,[D[1].show_error.value?(d(),p(l,{key:0,class:"error-label"},{default:v(()=>[h(O(D[1].error_message),1)]),_:1})):u("",!0)])]),_:1}),c(f(de),null,{default:v(()=>[c(f(ue),{value:k[0].value,alignment:"start",class:"ion-lblCls",disabled:k[0].disable_checkbox.value},{default:v(()=>[h(O(k[0].lblTxt),1)]),_:1},8,["value","disabled"])]),_:1})]),_:1}),c(f(ae),null,{default:v(()=>[c(f(de),null,{default:v(()=>[c(Ge,{placeholder:n.value,icon:f(pe),inputValue:t.value},null,8,["placeholder","icon","inputValue"])]),_:1}),c(f(de))]),_:1}),c(f(ae),null,{default:v(()=>[c(f(de),null,{default:v(()=>[c(Ye,{place_holder:w[1].placeHolder,onDateUpDated:w[1].dataHandler,date_prop:""},null,8,["place_holder","onDateUpDated"]),m("div",null,[w[1].show_error.value?(d(),p(l,{key:0,class:"error-label"},{default:v(()=>[h(O(w[1].error_message),1)]),_:1})):u("",!0)])]),_:1}),c(f(de),null,{default:v(()=>[c(ba,{place_holder:x[1].placeHolder,onTimeUpDated:x[1].dataHandler,time_prop:""},null,8,["place_holder","onTimeUpDated"]),m("div",null,[x[1].show_error.value?(d(),p(l,{key:0,class:"error-label"},{default:v(()=>[h(O(x[1].error_message),1)]),_:1})):u("",!0)])]),_:1})]),_:1}),c(f(ae),null,{default:v(()=>[c(f(de),null,{default:v(()=>[c(f(te),{modelValue:g.value,"onUpdate:modelValue":[a[0]||(a[0]=e=>g.value=e),a[1]||(a[1]=e=>A(e))],multiple:!1,taggable:!1,"hide-selected":!0,"close-on-select":!0,openDirection:"bottom","tag-placeholder":"Manner of death",placeholder:"Manner of death",selectLabel:"",label:"name",searchable:!0,"track-by":"id",options:E.value},null,8,["modelValue","options"]),m("div",null,[I[0].show_error.value?(d(),p(l,{key:0,class:"error-label"},{default:v(()=>[h(O(I[0].error_message),1)]),_:1})):u("",!0)])]),_:1}),c(f(de),null,{default:v(()=>[c(f(te),{modelValue:y.value,"onUpdate:modelValue":[a[2]||(a[2]=e=>y.value=e),a[3]||(a[3]=e=>H(e))],multiple:!1,taggable:!1,"hide-selected":!0,"close-on-select":!0,openDirection:"bottom","tag-placeholder":"How did it occur?",placeholder:"How did it occur?",selectLabel:"",label:"name",disabled:I[1].disabled.value,searchable:!0,"track-by":"id",options:P.value},null,8,["modelValue","disabled","options"]),m("div",null,[I[1].show_error.value?(d(),p(l,{key:0,class:"error-label"},{default:v(()=>[h(O(I[1].error_message),1)]),_:1})):u("",!0)])]),_:1})]),_:1}),c(f(ae),null,{default:v(()=>[c(f(de),null,{default:v(()=>[c(Ge,{placeholder:D[5].placeHolder,icon:f(ve),inputValue:D[5].dataValue.value,disabled:o.value,"onUpdate:inputValue":D[5].dataHandler},null,8,["placeholder","icon","inputValue","disabled","onUpdate:inputValue"]),m("div",null,[D[5].show_error.value?(d(),p(l,{key:0,class:"error-label"},{default:v(()=>[h(O(D[5].error_message),1)]),_:1})):u("",!0)])]),_:1})]),_:1}),c(f(ae),null,{default:v(()=>[c(f(de),null,{default:v(()=>[c(ba,{place_holder:x[2].placeHolder,onTimeUpDated:x[2].dataHandler,time_prop:""},null,8,["place_holder","onTimeUpDated"]),m("div",null,[x[2].show_error.value?(d(),p(l,{key:0,class:"error-label"},{default:v(()=>[h(O(x[2].error_message),1)]),_:1})):u("",!0)])]),_:1}),c(f(de),null,{default:v(()=>[c(Ge,{placeholder:D[2].placeHolder,icon:f(ce),inputValue:D[2].dataValue.value,"onUpdate:inputValue":D[2].dataHandler},null,8,["placeholder","icon","inputValue","onUpdate:inputValue"]),m("div",null,[D[2].show_error.value?(d(),p(l,{key:0,class:"error-label"},{default:v(()=>[h(O(D[2].error_message),1)]),_:1})):u("",!0)])]),_:1})]),_:1}),c(f(ae),null,{default:v(()=>[c(f(de),null,{default:v(()=>[c(Ge,{placeholder:D[3].placeHolder,icon:f(_),inputValue:D[3].dataValue.value,"onUpdate:inputValue":D[3].dataHandler},null,8,["placeholder","icon","inputValue","onUpdate:inputValue"]),m("div",null,[D[3].show_error.value?(d(),p(l,{key:0,class:"error-label"},{default:v(()=>[h(O(D[3].error_message),1)]),_:1})):u("",!0)])]),_:1}),c(f(de),null,{default:v(()=>[c(Ge,{placeholder:D[4].placeHolder,icon:f(ve),inputValue:D[4].dataValue.value,"onUpdate:inputValue":D[4].dataHandler},null,8,["placeholder","icon","inputValue","onUpdate:inputValue"]),m("div",null,[D[4].show_error.value?(d(),p(l,{key:0,class:"error-label"},{default:v(()=>[h(O(D[4].error_message),1)]),_:1})):u("",!0)])]),_:1})]),_:1}),(d(),p(f(ae),{key:0,class:"spc_btwn"},{default:v(()=>[S[0].addItemButton?(d(),p(ye,{key:0,name:S[0].name,fill:S[0].btnFill,icon:f(le),"onClicked:btn":S[0].fn},null,8,["name","fill","icon","onClicked:btn"])):u("",!0),S[1].addItemButton?(d(),p(ye,{key:1,name:S[1].name,fill:S[1].btnFill,icon:f(oe),"onClicked:btn":S[1].fn},null,8,["name","fill","icon","onClicked:btn"])):u("",!0)]),_:1}))],64)}}}),wn=Ee(xn,[["__scopeId","data-v-0aad2f08"]]),kn={class:"dash_box"},Cn={key:1},Dn=t({name:"xxxComponent"}),Sn=t({...Dn,setup(e){const a=l("No outcome created yet"),t=l(!1),n=l("please select a type"),g=l(!0),b=l(""),_=l(!0),y=l(!1),x=Je(),w=o(()=>x.outcomes),k=l(!1),C=l(!1),S=l(!1),E=l(!1),P=l(!1),I=l(!1),V=l([{name:"Admitted for short stay",selected:!1},{name:"Referred out",selected:!1},{name:"Discharged Home",selected:!1},{name:"Send to Another Clinic",selected:!1}]),A=[{multi_Selection:!1,show_list_label:!0,unqueId:"qwerty2",name_of_list:"Add new outcome",placeHolder:"Choose one",items:V.value,listUpdatedFN:function(e){V.value=e,V.value.forEach(e=>{1==e.selected&&(b.value=e.name)})},listFilteredFN:()=>{},use_internal_filter:!0,disabled:l(!1)}];function H(){w.value.length>0?_.value=!1:0==w.value.length&&0==y.value&&(_.value=!0)}function N(e){w.value.splice(e,1)}i(async()=>{H()}),D(()=>b.value,async e=>{1==k.value?k.value=!1:async function(){const e=b.value;console.log(e),b.value=e;const a=b.value;a==V.value[0].name?S.value=!0:S.value=!1,a==V.value[1].name?(E.value=!0,console.log("show_discharged_options is set to true")):E.value=!1,a==V.value[2].name?(P.value=!0,console.log("show_discharged_options is set to true")):P.value=!1,a==V.value[3].name?I.value=!0:I.value=!1}()}),D(()=>w.value.length,async e=>{H()});const M=e=>{};function T(){C.value=!1,S.value=!1,E.value=!1,P.value=!1,V.value.forEach(e=>{e.selected=!1}),b.value=""}return(e,l)=>{const o=s("ion-row");return d(),p(f(re),null,{default:v(()=>[c(o,null,{default:v(()=>[c(f(de),null,{default:v(()=>[(d(),p(_a,{key:0,"onUpdate:removeItem":N,"onUpdate:editItem":M,displayData:w.value},null,8,["displayData"]))]),_:1})]),_:1}),_.value?(d(),p(o,{key:0},{default:v(()=>[m("span",kn,O(a.value),1)]),_:1})):u("",!0),g.value?(d(),r("div",Cn,[c(o,null,{default:v(()=>[c(f(de),null,{default:v(()=>[c(Ke,{multiSelection:A[0].multi_Selection,show_label:A[0].show_list_label,uniqueId:A[0].unqueId,name_of_list:A[0].name_of_list,choose_place_holder:A[0].placeHolder,"items_-list":A[0].items,use_internal_filter:A[0].use_internal_filter,disabled:A[0].disabled.value,onItemListUpDated:A[0].listUpdatedFN,onItemListFiltered:A[0].listFilteredFN},null,8,["multiSelection","show_label","uniqueId","name_of_list","choose_place_holder","items_-list","use_internal_filter","disabled","onItemListUpDated","onItemListFiltered"]),m("div",null,[t.value?(d(),p(f(J),{key:0,class:"error-label"},{default:v(()=>[h(O(n.value),1)]),_:1})):u("",!0)])]),_:1})]),_:1})])):u("",!0),S.value?(d(),p(ya,{key:2,onDataSaved:T,selected_ward_prop:"",admitted_other_props:""})):u("",!0),E.value?(d(),p(xa,{key:3,onDataSaved:T,selected_referral_data:"",selected_other_referral_data:""})):u("",!0),P.value?(d(),p(wa,{key:4,onDataSaved:T,selected_discharged_prop:"",selected_discharged_data:""})):u("",!0),C.value?(d(),p(wn,{key:5,onDataSaved:T})):u("",!0),I.value?(d(),p(ka,{key:6,onDataSaved:T})):u("",!0)]),_:1})}}});e("O",Ee(Sn,[["__scopeId","data-v-fc637de7"]]))}}});
