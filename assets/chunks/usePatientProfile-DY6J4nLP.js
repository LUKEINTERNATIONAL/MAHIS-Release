import{d as q,O as F,f as s,W as j,a5 as W,_ as be,H as ne,e as A,P as pe,J as a,l as t,Q as R,K as $,k as d,p as we,F as te,r as n,w as J,u as e,d$ as Me,m as b,bQ as Le,a as ae,aS as me,aQ as _e,aR as ve,a4 as L,bl as Ne,e5 as Pe,bn as ue,a2 as ee,aP as he,N as oe,aV as Fe,c as se,aj as $e,G as fe,E as de,a_ as De,L as Y,I as Ae,a3 as Be,M as Ue,R as He,an as qe,cA as ze,aw as We,b2 as je,Z as Ge,aF as Qe,V as Je,dn as ke,a7 as Ke}from"./vendor-BthE7zCk.js";import{i as Ze,V as Xe,l as Ye,_ as Z,B as Ie,b2 as et,o as tt,aL as ye,t as re,aw as Se,J as X,F as at,L as lt,a as nt,ay as ot,az as st,aq as rt,a7 as Ee,m as ce,b8 as it,S as ie,H as ge,G as dt,u as Te,P as Ce,aO as ut,D as ct,aD as Ve,b9 as ft}from"../index-D3-FX8uE.js";import{R as pt}from"./Registration-B0HGf9op.js";import{l as mt}from"./lodash-NJiRuGo9.js";const _t=q({__name:"personalInformationModal",setup(l){return(m,g)=>(s(),F(pt,{editMode:!0}))}}),vt=q({components:{IonItem:be,IonCol:W,IonLabel:j},data(){return{iconsContent:Ye}},props:{displayData:{type:Array,default:[]}},methods:{highlightItem(l){const m=document.getElementById(l+"_lbl");m&&(m.style.color="#006401"),this.highlightActionBtns(l)},undoHighlightItem(l){const m=document.getElementById(l+"_lbl");m&&(m.style.color="rgb(0,0,0)"),this.undohighlightActionBtns(l)},highlightActionBtns(l){const m=document.getElementsByClassName(l+"_spanlbl");for(let g=0;g<m.length;g++)m[g].style.display="block"},undohighlightActionBtns(l){const m=document.getElementsByClassName(l+"_spanlbl");for(let g=0;g<m.length;g++)m[g].style.display="none"},asignLblID(l){return l+"_lbl"},asignSpanLblID(l){return l+"_spanlbl"},async removeItemAtIndex(l,m){await Xe("Do you want to delete it?",m)&&this.$emit("update:removeItem",l)},async editItemAtIndex(l,m,g){await Ze("Do you want to edit it?",g)&&this.$emit("update:editItem",{index:l,item:m})},fomartDate(l){const m=l.year,g=(l.month<10?"0":"")+l.month,x=(l.day<10?"0":"")+l.day;return m+"-"+g+"-"+x}}});function ht(l,m,g,x,D,u){const w=ne("ion-label"),_=ne("ion-col"),N=ne("ion-icon"),P=ne("ion-item");return s(!0),A(te,null,pe(l.displayData,(r,c)=>(s(),F(P,{displayData:l.displayData,class:"ionLbltp",key:c,onMousemove:C=>l.highlightItem(c),onMouseout:C=>l.undoHighlightItem(c)},{default:a(()=>[t(_,{class:"col-st1"},{default:a(()=>[t(w,{id:l.asignLblID(c),class:"truncate-text",style:{color:"#00190E","font-weight":"400",font:"inter","line-height":"21px"}},{default:a(()=>[R($(r.type),1)]),_:2},1032,["id"])]),_:2},1024),t(_,{class:"col-st2"},{default:a(()=>[t(w,{class:"truncate-text",style:{color:"#636363","font-weight":"400",font:"inter","line-height":"21px"}},{default:a(()=>[m[0]||(m[0]=d("span",{class:"spaceBetween"},null,-1)),R(" "+$(r.name)+" ",1),m[1]||(m[1]=d("span",{class:"spaceBetween"},null,-1)),R($(r.reason),1),m[2]||(m[2]=d("span",{class:"spaceBetween"},null,-1)),R($(l.fomartDate(r.date)),1)]),_:2},1024)]),_:2},1024),t(_,{class:"action_buttons"},{default:a(()=>[t(w,{class:we(l.asignSpanLblID(c)),style:{cursor:"pointer",display:"none","text-align":"end"},onClick:C=>l.editItemAtIndex(c,r,C)},{default:a(()=>[t(N,{icon:l.iconsContent.edit},null,8,["icon"])]),_:1},8,["class","onClick"]),t(w,{class:we(l.asignSpanLblID(c)),style:{cursor:"pointer",display:"none","text-align":"end"},onClick:C=>l.removeItemAtIndex(c,C)},{default:a(()=>[t(N,{icon:l.iconsContent.delete},null,8,["icon"])]),_:1},8,["class","onClick"])]),_:2},1024)]),_:2},1032,["displayData","onMousemove","onMouseout"]))),128)}const yt=Z(vt,[["render",ht],["__scopeId","data-v-4346bf77"]]),Re=q({__name:"TimePicker",props:{place_holder:{},time_prop:{}},emits:["timeUpDated"],setup(l,{emit:m}){const g=n(),x=n({title:"Set Time",popoverOpen:!1,isOpen:!1,event:{},keyboardClose:!1,popoverData:{}}),D=n(),u={name:"Now",show:!0,fn:O},w=n(!0),_=n(!1),N=n(0),P=l;J(()=>P.time_prop,B=>{B&&(g.value=B.time)},{immediate:!0,deep:!0});const r=m;function c(){r("timeUpDated",D.value)}function C(B){_.value==!0?(w.value=!1,_.value=!1):w.value=!0,x.value.isOpen=!0,x.value.event=B}function h(B){g.value=B.detail.value;const U=V(g.value);if(i(U)==!0){O();return}g.value=U}function i(B){return B.indexOf("NaN")!==-1}function V(B){let U=new Date(B),k=U.getHours(),I=U.getMinutes(),T=k>=12?"PM":"AM";k=k%12,k=k||12;let v=k.toString().padStart(2,"0")+":"+I.toString().padStart(2,"0")+" "+T;return D.value={time:v,meridian:T},c(),v}function O(){_.value=!0,g.value=V(new Date),w.value=!1,N.value++}return(B,U)=>{const k=ne("ion-popover");return s(),A(te,null,[(s(),F(Ie,{placeholder:P.place_holder.default,inputValue:g.value,icon:e(Me),"-inner-action-btn-propeties":u,"onClicked:inputValue":C,"onUpdate:InnerActionBtnPropetiesAction":u.fn,key:N.value},null,8,["placeholder","inputValue","icon","onUpdate:InnerActionBtnPropetiesAction"])),t(k,{"show-backdrop":!1,"keep-contents-mounted":!0,"is-open":x.value.isOpen,event:x.value.event,side:"top",onDidDismiss:U[0]||(U[0]=I=>x.value.isOpen=!1)},{default:a(()=>[w.value?(s(),F(e(Le),{key:0,onIonChange:h,id:"datetime",presentation:"time","show-default-buttons":!0})):b("",!0)]),_:1},8,["is-open","event"])],64)}}});class gt extends et{constructor(m,g){super(m,114,g)}}async function bt(l={}){try{const{name:m="",page:g=1,page_size:x=10}=l,D=m?{name:{$regex:new RegExp(m,"i")}}:{},u=await tt("wards",{selector:D,currentPage:g,itemsPerPage:x});return(Array.isArray(u)?u:u.records).map(_=>({name:_.name,value:_.name,other:_}))}catch(m){throw console.error("Error fetching offline wards:",m.message),m}}const wt=q({name:"xxxComponent"}),Dt=q({...wt,props:{selected_ward_prop:{},admitted_other_props:{}},emits:["dataSaved"],setup(l,{emit:m}){const g=n([]),x=ye(),D=n(NaN),u=n(!1),w=n(),_=n(!1);ae(async()=>{U(),h()});const N=[{showAddItemButton:!0,addItemButton:!0,name:"save",btnFill:"clear",fn:k},{showAddItemButton:!0,addItemButton:!0,name:"cancel",btnFill:"clear",fn:E}],P=[{placeHolder:"Reason",dataHandler:O,dataValue:n(),show_error:n(!1),error_message:"please provide a reason"}],r=[{placeHolder:{default:"Enter date"},dataHandler:V,dataValue:n(),show_error:n(!1),error_message:"please provide date"}],c=[{placeHolder:{default:"Enter time of admission"},dataHandler:i,dataValue:n(),show_error:n(!1),error_message:"error"}],C=l;J(()=>C.selected_ward_prop,S=>{S&&(w.value=S)},{immediate:!0,deep:!0}),J(()=>C.admitted_other_props,S=>{S&&(P[0].dataValue.value=S.reason,c[0].dataValue.value=S.time,r[0].dataValue.value=S.date)},{immediate:!0,deep:!0});function h(S=!0){_.value=S}function i(S){c[0].dataValue.value=S,k(!1)}function V(S){const p={day:S.value.day,month:S.value.month,year:S.value.year,formattedDate:S.value.formattedDate};r[0].dataValue.value=p,k(!1)}function O(S){const p=S.target.value;P[0].dataValue.value=p,B(),h(!1)}function B(){_.value==!0&&re("Remember to press the SAVE button",1e4)}async function U(S){const p=await bt({name:"",page:1,page_size:1e3});p||p.forEach(y=>{const M={name:y.name,selected:!1,other:y,location_ward_id:y.other.location_id};g.value.push(M)})}function k(S=!0){I(),T(),H(),z(),r[0].show_error.value==!1&&c[0].show_error.value==!1&&P[0].show_error.value==!1&&u.value==!1?v():S&&re("Please enter correct data values",4e3)}function I(){w.value===void 0||w.value==""?u.value=!0:u.value=!1}function T(){P[0].dataValue.value==""||P[0].dataValue.value===void 0?P[0].show_error.value=!0:P[0].show_error.value=!1}async function v(){const S={name:w.value.name,type:"Admitted for short stay",date:r[0].dataValue,time:c[0].dataValue,reason:P[0].dataValue,other:w.value,selected:!0};await x.addOutcomeData(S,D.value)&&f({dataSaved:!1})}const o=m;function f(S={dataSaved:!0}){o("dataSaved",S)}function E(){f()}function H(){r[0].dataValue.value===void 0||r[0].dataValue.value==""?r[0].show_error.value=!0:r[0].show_error.value=!1}function z(){c[0].dataValue.value===void 0||r[0].dataValue.value==""?c[0].show_error.value=!0:c[0].show_error.value=!1}const K=S=>{w.value=S,h(),k(!1)};return(S,p)=>(s(),F(e(me),null,{default:a(()=>[t(e(ve),null,{default:a(()=>[t(e(_e),null,{default:a(()=>[...p[3]||(p[3]=[R("Admitted for Short Stay",-1)])]),_:1})]),_:1}),t(e(he),null,{default:a(()=>[t(e(L),null,{default:a(()=>[t(e(W),null,{default:a(()=>[t(e(Ne),{modelValue:w.value,"onUpdate:modelValue":[p[0]||(p[0]=y=>w.value=y),p[1]||(p[1]=y=>K(y))],multiple:!1,taggable:!1,"hide-selected":!0,"close-on-select":!0,openDirection:"bottom","tag-placeholder":"Find and select a ward",placeholder:"Find and select a ward",selectLabel:"",label:"name",searchable:!0,disabled:!1,onSearchChange:p[2]||(p[2]=y=>y={}),"track-by":"location_ward_id",options:g.value},null,8,["modelValue","options"]),d("div",null,[u.value?(s(),F(e(j),{key:0,class:"error-label"},{default:a(()=>[...p[4]||(p[4]=[R($("Please select a ward"),-1)])]),_:1})):b("",!0)])]),_:1})]),_:1}),t(e(L),null,{default:a(()=>[t(e(W),null,{default:a(()=>[d("div",null,[t(Se,{place_holder:r[0].placeHolder,onDateUpDated:r[0].dataHandler,date_prop:r[0].dataValue.value},null,8,["place_holder","onDateUpDated","date_prop"]),d("div",null,[r[0].show_error.value?(s(),F(e(j),{key:0,class:"error-label"},{default:a(()=>[R($(r[0].error_message),1)]),_:1})):b("",!0)])])]),_:1})]),_:1}),t(e(L),null,{default:a(()=>[t(e(W),null,{default:a(()=>[d("div",null,[t(Re,{place_holder:c[0].placeHolder,onTimeUpDated:c[0].dataHandler,time_prop:c[0].dataValue.value},null,8,["place_holder","onTimeUpDated","time_prop"]),d("div",null,[c[0].show_error.value?(s(),F(e(j),{key:0,class:"error-label"},{default:a(()=>[R($(c[0].error_message),1)]),_:1})):b("",!0)])])]),_:1})]),_:1}),t(e(L),null,{default:a(()=>[t(e(W),null,{default:a(()=>[t(Ie,{placeholder:P[0].placeHolder,icon:e(Pe),inputValue:P[0].dataValue.value,"onUpdate:inputValue":P[0].dataHandler},null,8,["placeholder","icon","inputValue","onUpdate:inputValue"]),d("div",null,[P[0].show_error.value?(s(),F(e(j),{key:0,class:"error-label"},{default:a(()=>[R($(P[0].error_message),1)]),_:1})):b("",!0)])]),_:1})]),_:1}),N[0].showAddItemButton?(s(),F(e(L),{key:0,class:"action-buttons-row"},{default:a(()=>[N[0].addItemButton?(s(),F(X,{key:0,name:N[0].name,fill:N[0].btnFill,icon:e(ue),"onClicked:btn":N[0].fn},null,8,["name","fill","icon","onClicked:btn"])):b("",!0),N[1].addItemButton?(s(),F(X,{key:1,name:N[1].name,fill:N[1].btnFill,icon:e(ee),"onClicked:btn":N[1].fn},null,8,["name","fill","icon","onClicked:btn"])):b("",!0)]),_:1})):b("",!0)]),_:1})]),_:1}))}}),It=Z(Dt,[["__scopeId","data-v-9cdbde26"]]),St=q({name:"xxxComponent"}),xt=q({...St,props:{selected_referral_data:{},selected_other_referral_data:{}},emits:["dataSaved"],setup(l,{emit:m}){const g=n(NaN),x=n(null),D=ye(),u=n(!1),w=n([]),_=n({}),N=n(!0),P={location_data:{}},r=[{placeHolder:"Reason",dataHandler:V,dataValue:n(),show_error:n(!1),error_message:"please provide a reason"}],c=[{placeHolder:{default:"Enter date"},dataHandler:i,dataValue:n(),show_error:n(!1),error_message:"please provide date"}],C=[{placeHolder:{default:"Enter time of referral"},dataHandler:B,dataValue:n(),show_error:n(!1),error_message:"error"}],h=l;J(()=>h.selected_other_referral_data,p=>{p&&(r[0].dataValue.value=p.reason,c[0].dataValue.value=p.date,C[0].dataValue.value=p.time)},{immediate:!0,deep:!0}),J(()=>h.selected_referral_data,p=>{if(!p)return;x.value=p.selected_location,P.location_data=p;const y=Array.isArray(p.selected_district_ids)?[...p.selected_district_ids]:[],M=p.selected_location?{...p.selected_location}:null;w.value=y,_.value=M},{immediate:!0,deep:!0}),ae(()=>{o()});function i(p){const y={day:p.value.day,month:p.value.month,year:p.value.year,formattedDate:p.value.formattedDate};c[0].dataValue.value=y,U(!1)}function V(p){const y=p.target.value;r[0].dataValue.value=y,O(),o(!1)}function O(){N.value==!0&&re("Remember to press the SAVE button",1e4)}function B(p){C[0].dataValue.value=p,U(!1)}function U(p=!0){v(),k(),I(),T(),c[0].show_error.value==!1&&C[0].show_error.value==!1&&r[0].show_error.value==!1&&u.value==!1?E():p&&re("Please enter correct data values",4e3)}function k(){r[0].dataValue.value==""||r[0].dataValue.value===void 0?r[0].show_error.value=!0:r[0].show_error.value=!1}function I(){c[0].dataValue.value===void 0||c[0].dataValue.value==""?c[0].show_error.value=!0:c[0].show_error.value=!1}function T(){C[0].dataValue.value===void 0||c[0].dataValue.value==""?C[0].show_error.value=!0:C[0].show_error.value=!1}function v(){x.value?u.value=!1:u.value=!0}function o(p=!0){N.value=p}const f=p=>{x.value=p.selected_location,v(),P.location_data=p,o(),U(!1)},E=async()=>{const p={name:x.value.name,type:"Referred out",selected:!0,date:c[0].dataValue,time:C[0].dataValue,reason:r[0].dataValue},y={...p,other:{ref_data:p,location_data:P.location_data}};await D.addOutcomeData(y,g.value)&&K({dataSaved:!1})},H=()=>{K()},z=m;function K(p={dataSaved:!0}){z("dataSaved",p)}const S=[{showAddItemButton:!0,addItemButton:!0,name:" save",btnFill:"clear",fn:U},{showAddItemButton:!0,addItemButton:!0,name:"cancel",btnFill:"clear",fn:H}];return(p,y)=>(s(),F(e(me),null,{default:a(()=>[t(e(ve),null,{default:a(()=>[t(e(_e),null,{default:a(()=>[...y[0]||(y[0]=[R("Referred Out",-1)])]),_:1})]),_:1}),t(e(he),null,{default:a(()=>[t(e(L),null,{default:a(()=>[t(at,{show_error:u.value,onFacilitySelected:f,selected_district_ids:w.value,selected_location:_.value},null,8,["show_error","selected_district_ids","selected_location"])]),_:1}),t(e(L),null,{default:a(()=>[t(e(W),null,{default:a(()=>[d("div",null,[t(Se,{place_holder:c[0].placeHolder,onDateUpDated:c[0].dataHandler,date_prop:c[0].dataValue.value},null,8,["place_holder","onDateUpDated","date_prop"]),d("div",null,[c[0].show_error.value?(s(),F(e(j),{key:0,class:"error-label"},{default:a(()=>[R($(c[0].error_message),1)]),_:1})):b("",!0)])])]),_:1})]),_:1}),t(e(L),null,{default:a(()=>[t(e(W),null,{default:a(()=>[d("div",null,[t(Re,{place_holder:C[0].placeHolder,onTimeUpDated:C[0].dataHandler,time_prop:C[0].dataValue.value},null,8,["place_holder","onTimeUpDated","time_prop"]),d("div",null,[C[0].show_error.value?(s(),F(e(j),{key:0,class:"error-label"},{default:a(()=>[R($(C[0].error_message),1)]),_:1})):b("",!0)])])]),_:1})]),_:1}),t(e(L),null,{default:a(()=>[t(e(W),null,{default:a(()=>[t(Ie,{placeholder:r[0].placeHolder,icon:e(Pe),inputValue:r[0].dataValue.value,"onUpdate:inputValue":r[0].dataHandler},null,8,["placeholder","icon","inputValue","onUpdate:inputValue"]),d("div",null,[r[0].show_error.value?(s(),F(e(j),{key:0,class:"error-label"},{default:a(()=>[R($(r[0].error_message),1)]),_:1})):b("",!0)])]),_:1})]),_:1}),S[0].showAddItemButton?(s(),F(e(L),{key:0,class:"action-buttons-row"},{default:a(()=>[S[0].addItemButton?(s(),F(X,{key:0,name:S[0].name,fill:S[0].btnFill,icon:e(ue),"onClicked:btn":S[0].fn},null,8,["name","fill","icon","onClicked:btn"])):b("",!0),S[1].addItemButton?(s(),F(X,{key:1,name:S[1].name,fill:S[1].btnFill,icon:e(ee),"onClicked:btn":S[1].fn},null,8,["name","fill","icon","onClicked:btn"])):b("",!0)]),_:1})):b("",!0)]),_:1})]),_:1}))}}),kt=Z(xt,[["__scopeId","data-v-f25626fb"]]),Ct=q({name:"xxxComponent"}),Vt=q({...Ct,props:{selected_discharged_prop:{},selected_discharged_data:{}},emits:["dataSaved"],setup(l,{emit:m}){const g=n(NaN),x=n([]),D=ye(),u=n();ae(async()=>{i("")});const w=[{placeHolder:"Reason",dataHandler:r,dataValue:n(),show_error:n(!1),error_message:"please provide a reason"}],_=[{placeHolder:{default:"Enter date"},dataHandler:P,dataValue:n(),show_error:n(!1),error_message:"please provide date"}],N=l;J(()=>N.selected_discharged_prop,o=>{o&&(u.value=o)},{immediate:!0,deep:!0}),J(()=>N.selected_discharged_data,o=>{o&&(_[0].dataValue.value=o.date||"",o.reason&&(w[0].dataValue.value=o.reason))},{immediate:!0,deep:!0});function P(o){const f={day:o.value.day,month:o.value.month,year:o.value.year,formattedDate:o.value.formattedDate};_[0].dataValue.value=f,O(!1)}function r(o){const f=o.target.value;w[0].dataValue.value=f}x.value,n(!1),n(!1);const c=[{placeHolder:{default:"Enter time of referral"},dataHandler:C,dataValue:n(),show_error:n(!1),error_message:"error"}];function C(o){c[0].dataValue.value=o}const h=new Set;async function i(o){const f=o,E=await lt.getFacilities({name:f});E||E.forEach(H=>{h.has(H.location_id)||(h.add(H.location_id),mt.isEmpty(H.name)==!1&&x.value.push({name:H.name,selected:!1,other:H}))})}function V(o){x.value=o}function O(o=!0){B(),_[0].show_error.value?o&&re("Please enter a valid date",4e3):U()}function B(){_[0].dataValue.value===void 0||_[0].dataValue.value==""?_[0].show_error.value=!0:_[0].show_error.value=!1}async function U(){const o={type:"Discharged Home",date:_[0].dataValue,reason:w[0].dataValue.value};await D.addOutcomeData(o,g.value)&&T({dataSaved:!1})}function k(){T()}const I=m;function T(o={dataSaved:!0}){I("dataSaved",o)}const v=[{showAddItemButton:!0,addItemButton:!0,name:"save",btnFill:"clear",fn:O},{showAddItemButton:!0,addItemButton:!0,name:"cancel",btnFill:"clear",fn:k}];return(o,f)=>(s(),F(e(me),null,{default:a(()=>[t(e(ve),null,{default:a(()=>[t(e(_e),null,{default:a(()=>[...f[0]||(f[0]=[R("Discharged Home",-1)])]),_:1})]),_:1}),t(e(he),null,{default:a(()=>[t(e(L),null,{default:a(()=>[t(e(W),null,{default:a(()=>[d("div",null,[t(Se,{place_holder:_[0].placeHolder,onDateUpDated:_[0].dataHandler,date_prop:_[0].dataValue.value},null,8,["place_holder","onDateUpDated","date_prop"]),d("div",null,[_[0].show_error.value?(s(),F(e(j),{key:0,class:"error-label"},{default:a(()=>[R($(_[0].error_message),1)]),_:1})):b("",!0)])])]),_:1})]),_:1}),v[0].showAddItemButton?(s(),F(e(L),{key:0,class:"action-buttons-row"},{default:a(()=>[v[0].addItemButton?(s(),F(X,{key:0,name:v[0].name,fill:v[0].btnFill,icon:e(ue),"onClicked:btn":v[0].fn},null,8,["name","fill","icon","onClicked:btn"])):b("",!0),v[1].addItemButton?(s(),F(X,{key:1,name:v[1].name,fill:v[1].btnFill,icon:e(ee),"onClicked:btn":v[1].fn},null,8,["name","fill","icon","onClicked:btn"])):b("",!0)]),_:1})):b("",!0)]),_:1})]),_:1}))}}),Nt=Z(Vt,[["__scopeId","data-v-c55ed5f5"]]),Pt={class:"date-results-container"},Ft={class:"date-buttons-container"},$t={key:0,class:"validation-message"},At={__name:"DatePillSelector",props:{availableDates:{type:Array,required:!0,default:()=>[]}},emits:["dateSelected"],setup(l,{expose:m,emit:g}){const x=l,D=g,u=n(null),w=n(!1),_=c=>{u.value=c,w.value=!1,D("dateSelected",{date:x.availableDates[c],index:c})},N=c=>{const C=new Date(c),h={weekday:"short",month:"short",day:"numeric"};return isNaN(C)?c:C.toLocaleDateString("en-US",h)};return m({validateSelection:()=>u.value===null?(w.value=!0,!1):(w.value=!1,!0),getSelectedDate:()=>u.value!==null?x.availableDates[u.value]:null}),(c,C)=>(s(),A("div",Pt,[d("div",Ft,[(s(!0),A(te,null,pe(l.availableDates,(h,i)=>(s(),F(e(oe),{key:i,class:we(["date-button",{selected:u.value===i,"error-border":w.value&&u.value!==i}]),fill:"outline",shape:"round",onClick:V=>_(i)},{default:a(()=>[R($(N(h)),1)]),_:2},1032,["class","onClick"]))),128))]),w.value?(s(),A("p",$t," ⚠️ Please select an available date to proceed. ")):b("",!0)]))}},Bt=Z(At,[["__scopeId","data-v-1e34f199"]]),Ut=q({__name:"ReferToAnotherClinic",emits:["programDateSelected","referralDataReady","dataSaved"],setup(l,{emit:m}){const g=m,x=n([]),D=n([]),u=n([]),w=nt(),_=ot(),{activeProgram:N}=Fe(w),P=n(!1),r=[{multi_Selection:!0,show_list_label:!0,unqueId:"qwerty_8_562",name_of_list:"Clinics",placeHolder:"Search for programs",items:[],listUpdatedFN:B,listFilteredFN:()=>{},searchTextFN:()=>{},use_internal_filter:!0,show_error:n(!1),error_message:"Please select one or more clinics/programs to refer to.",disabled:n(!1)}],c=async()=>{P.value=!1;const v=D.value.length>0;if(r[0].show_error.value=!v,!v){console.log("Validation Failed: No programs selected.");return}let o=!0;u.value=[];for(const f of D.value)if(f.dateSelectorRef)if(!f.dateSelectorRef.validateSelection())o=!1;else{const H=f.dateSelectorRef.getSelectedDate();H?u.value.push({programId:f.id,programName:f.name,date:H}):o=!1}else o=!1,console.error("Date Selector ref is missing for program ".concat(f.name));if(!o){P.value=!0,console.log("Validation Failed: Not all dates selected.");return}console.log("Validation Passed! Ready to refer patient with data:",u.value),g("referralDataReady",u.value),await T(u.value,C)},C=async v=>{try{const o=ie.getUserID(),f=ie.getPatientID(),E=new gt(f,o);await E.createEncounter();const H=v.map(z=>({concept_id:2227,value_numeric:z.programId,obs_datetime:ge.sessionDate(),child:[{concept_id:11242,value_text:ge.toStandardHisFormat(z.date),obs_datetime:ge.sessionDate()}]}));await E.saveObservationList(H),dt("Patient referral saved successfully"),i()}catch(o){re("Error saving referral data. Please try again.",4e3),console.error("Error in sub_refferal_data:",o)}},h=()=>{i()};function i(v={dataSaved:!0}){g("dataSaved",v)}const V=[{showAddItemButton:!0,addItemButton:!0,name:"save",btnFill:"clear",fn:c},{showAddItemButton:!0,addItemButton:!0,name:"cancel",btnFill:"clear",fn:h}],O=(v,o,f)=>{g("programDateSelected",{programId:o,programName:f,date:v}),P.value=!1;const E=u.value.findIndex(z=>z.programId===o),H={programId:o,programName:f,date:v};E>-1?u.value[E]=H:u.value.push(H)};async function B(v){x.value=v,U(),P.value=!1,await k()}function U(){const v=[];x.value.forEach(f=>{f.selected==!0&&v.push(f.other)});const o=v.map(f=>f.program_id);D.value=D.value.filter(f=>o.includes(f.id)),u.value=u.value.filter(f=>o.includes(f.programId)),v.forEach(f=>{D.value.some(E=>E.id===f.program_id)||D.value.push({id:f.program_id,name:f.name,dates:[],dateSelectorRef:null})}),r[0].show_error.value=v.length===0}const k=async()=>{const v=D.value.map(async o=>{try{const f=_.getAvailableDatesByProgramId(o.id,90,!0,4);o.dates=f}catch(f){console.error("Error fetching dates for program ".concat(o.name,":"),f),o.dates=[]}});await Promise.all(v)};async function I(){const v=N.value.program_id,o=await Ee.getAllPrograms(),f=[];o.forEach(E=>{E.program_id!==v&&f.push({name:E.name,other:E,selected:!1})}),x.value=f}const T=async(v,o)=>{ce(it,{class:"otherVitalsModal"},!0,{message:"Are you sure you want to add this Referral(s)?"},{cancel:z=>{},confirm:async z=>{z.detail==!0&&await o(v)}})};return ae(async()=>{await I(),st()}),(v,o)=>(s(),F(e(me),null,{default:a(()=>[t(e(ve),null,{default:a(()=>[t(e(_e),null,{default:a(()=>[...o[0]||(o[0]=[R("Refer to another clinic",-1)])]),_:1})]),_:1}),t(e(he),null,{default:a(()=>[t(e(L),null,{default:a(()=>[t(e(W),null,{default:a(()=>[t(e(j),{style:{margin:"10px","margin-left":"0px","margin-top":"0px",color:"grey"}},{default:a(()=>[...o[1]||(o[1]=[R(" Program(s)",-1),d("span",{style:{color:"#b42318"}},"*",-1)])]),_:1}),t(rt,{multiSelection:r[0].multi_Selection,show_label:r[0].show_list_label,uniqueId:r[0].unqueId,name_of_list:r[0].name_of_list,choose_place_holder:r[0].placeHolder,"items_-list":x.value,use_internal_filter:r[0].use_internal_filter,disabled:r[0].disabled.value,onItemListUpDated:r[0].listUpdatedFN,onItemListFiltered:r[0].listFilteredFN,onItemSearchText:r[0].searchTextFN},null,8,["multiSelection","show_label","uniqueId","name_of_list","choose_place_holder","items_-list","use_internal_filter","disabled","onItemListUpDated","onItemListFiltered","onItemSearchText"]),d("div",null,[r[0].show_error.value?(s(),F(e(j),{key:0,class:"error-label"},{default:a(()=>[R($(r[0].error_message),1)]),_:1})):b("",!0)])]),_:1})]),_:1}),(s(!0),A(te,null,pe(D.value,(f,E)=>(s(),F(e(L),{key:f.id},{default:a(()=>[t(e(W),null,{default:a(()=>[t(e(j),{style:{margin:"10px","margin-top":"20px","font-weight":"bold",display:"block"}},{default:a(()=>[o[2]||(o[2]=d("span",{style:{color:"gray"}},"Available Dates for:",-1)),R(" "+$(f.name),1)]),_:2},1024),t(Bt,{availableDates:f.dates,onDateSelected:H=>O(H,f.id,f.name),ref_for:!0,ref:H=>{H&&(f.dateSelectorRef=H)}},null,8,["availableDates","onDateSelected"])]),_:2},1024)]),_:2},1024))),128)),P.value?(s(),F(e(L),{key:0,style:{"margin-top":"-10px"}},{default:a(()=>[t(e(W),null,{default:a(()=>[t(e(j),{class:"error-label"},{default:a(()=>[...o[3]||(o[3]=[R(" ⚠️ Please select an available date for all selected programs. ",-1)])]),_:1})]),_:1})]),_:1})):b("",!0),t(e(L),{class:"action-buttons"},{default:a(()=>[t(e(W),{class:"ion-text-end"},{default:a(()=>[V[1].addItemButton?(s(),F(X,{key:0,name:V[1].name,fill:V[1].btnFill,icon:e(ee),"onClicked:btn":V[1].fn},null,8,["name","fill","icon","onClicked:btn"])):b("",!0),D.value.length>0?(s(),F(X,{key:1,name:V[0].name,fill:V[0].btnFill,icon:e(ue),"onClicked:btn":V[0].fn},null,8,["name","fill","icon","onClicked:btn"])):b("",!0)]),_:1})]),_:1})]),_:1})]),_:1}))}}),Ht=Z(Ut,[["__scopeId","data-v-721c6ae2"]]),Et={class:"dash_box"},Tt={key:0,style:{"margin-top":"100px"}},Rt=q({name:"xxxComponent"}),Ot=q({...Rt,setup(l){const m=n("No outcome created yet"),g=n(!1),x=n(!0),D=n(""),u=n(!0),w=n(!1),_=ye(),N=se(()=>_.outcomes),P=n(!1),r=n(!1),c=n(!1),C=n(!1),h=n(!1),i=n(!1),V=n(),O=n(null),B=n(null),U=n(null),k=n(null),I=n(null),T=n(null),v=n([{name:"Admitted for short stay",selected:!1},{name:"Referred out",selected:!1},{name:"Discharged Home",selected:!1},{name:"Send to Another Clinic",selected:!1}]);function o(y){v.value.forEach(M=>{y.selected==!0&&(y.name==M.name||y.type==M.name)&&(D.value=M.name)})}ae(async()=>{E()}),J(()=>D.value,async y=>{P.value==!0?P.value=!1:K()}),J(()=>N.value.length,async y=>{E()});function f(){v.value.forEach(y=>{y.selected=!1}),D.value=""}function E(){N.value.length>0?u.value=!1:N.value.length==0&&w.value==!1&&(u.value=!0)}function H(y){N.value.splice(y,1)}const z=y=>{H(y.index),o(y.item),O.value=y.item.other.location_data,B.value={reason:y.item.reason,date:y.item.date,time:y.item.time},U.value=y.item.other,k.value=y.item,y.item.type==="Discharged Home"&&(I.value=y.item,T.value={reason:y.item.reason,date:y.item.date})};async function K(y=!0){const M=D.value;D.value=M;const Q=D.value;Q==v.value[0].name?c.value=!0:c.value=!1,Q==v.value[1].name?C.value=!0:C.value=!1,Q==v.value[2].name?h.value=!0:h.value=!1,Q==v.value[3].name?i.value=!0:i.value=!1}function S(){r.value=!1,c.value=!1,h.value=!1,C.value=!1,f()}const p=y=>{v.value.forEach(M=>{M.selected=!1}),V.value=y,V.value.selected=!0,o(V.value)};return(y,M)=>{const Q=ne("ion-row");return s(),F(e($e),null,{default:a(()=>[t(Q,null,{default:a(()=>[t(e(W),null,{default:a(()=>[(s(),F(yt,{key:0,"onUpdate:removeItem":H,"onUpdate:editItem":z,displayData:N.value},null,8,["displayData"]))]),_:1})]),_:1}),u.value?(s(),F(Q,{key:0},{default:a(()=>[d("span",Et,$(m.value),1)]),_:1})):b("",!0),t(Q,null,{default:a(()=>[t(e(W),null,{default:a(()=>[x.value?(s(),A("div",Tt,[t(Q,null,{default:a(()=>[t(e(Ne),{modelValue:V.value,"onUpdate:modelValue":[M[0]||(M[0]=le=>V.value=le),M[1]||(M[1]=le=>p(le))],multiple:!1,taggable:!1,"hide-selected":!0,"close-on-select":!0,openDirection:"top","tag-placeholder":"find and select a referral type",placeholder:"find and select a referral type",selectLabel:"",label:"name",searchable:!0,disabled:!1,onSearchChange:()=>{},"track-by":"name",options:v.value},null,8,["modelValue","options"]),d("div",null,[g.value?(s(),F(e(j),{key:0,class:"error-label"},{default:a(()=>[...M[2]||(M[2]=[R($("please select a type"),-1)])]),_:1})):b("",!0)])]),_:1})])):b("",!0)]),_:1})]),_:1}),c.value?(s(),F(It,{key:1,onDataSaved:S,selected_ward_prop:U.value,admitted_other_props:k.value},null,8,["selected_ward_prop","admitted_other_props"])):b("",!0),C.value?(s(),F(kt,{key:2,onDataSaved:S,selected_referral_data:O.value,selected_other_referral_data:B.value},null,8,["selected_referral_data","selected_other_referral_data"])):b("",!0),h.value?(s(),F(Nt,{key:3,onDataSaved:S,selected_discharged_prop:I.value,selected_discharged_data:T.value},null,8,["selected_discharged_prop","selected_discharged_data"])):b("",!0),i.value?(s(),F(Ht,{key:4,onDataSaved:S})):b("",!0)]),_:1})}}}),Mt=Z(Ot,[["__scopeId","data-v-2873182f"]]),Lt={style:{"font-weight":"400","font-size":"19px"}},qt={style:{display:"flex","align-items":"center"}},zt={class:""},Wt={class:"center text_12"},jt=q({watch:{},name:"xxxComponent"}),Gt=q({...jt,props:{is_open:{},user_id:{}},emits:["closePopover","save"],setup(l,{emit:m}){n("");const g=m;function x(){g("closePopover",!1),He.dismiss()}return(D,u)=>(s(),A(te,null,[t(e(Ae),null,{default:a(()=>[t(e(fe),null,{default:a(()=>[t(e(de),null,{default:a(()=>[...u[1]||(u[1]=[d("div",{style:{display:"flex","align-items":"center"}},[d("b",{style:{"margin-left":"6px"}},"Patient Outcome")],-1)])]),_:1}),t(e(De),{slot:"end"},{default:a(()=>[t(e(de),null,{default:a(()=>[t(e(oe),{onClick:u[0]||(u[0]=w=>x()),fill:"solid"},{default:a(()=>[d("span",Lt,[d("div",qt,[t(e(Y),{icon:e(ee),slot:"start",class:"sub-menu-icon"},null,8,["icon"]),u[2]||(u[2]=d("span",{style:{"margin-left":"6px"}},"Close",-1))])])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),t(e(Be),{class:"ion-padding"},{default:a(()=>[d("div",zt,[d("div",Wt,[t(e(L),null,{default:a(()=>[t(e(W),null,{default:a(()=>[t(Mt)]),_:1})]),_:1})])])]),_:1}),t(e(Ue),null,{default:a(()=>[t(e(fe))]),_:1})],64))}}),Qt={style:{display:"flex","align-items":"center"}},Jt={style:{"font-weight":"400","font-size":"19px"}},Kt={style:{display:"flex","align-items":"center"}},Zt={style:{"font-weight":"600","font-size":"17px"}},Xt={style:{"margin-top":"15px",width:"100%"}},Yt={key:0,class:"error-message"},ea={key:1},ta={slot:"start",class:"prefix-container"},aa=["value"],la={key:0,class:"error-message"},na={style:{"font-size":"16px","font-weight":"600px",color:"red"}},oa={key:1},sa={style:{"font-weight":"400","font-size":"19px"}},ra={style:{display:"flex","align-items":"center"}},ia={style:{"font-weight":"400","font-size":"20px"}},da={style:{display:"flex","align-items":"center"}},ua=q({name:"UpdateNCDNumberModal"}),ca=q({...ua,emits:["closePopover","save"],setup(l,{emit:m}){const g=qe(),x=Te(),{patient:D}=Fe(x),u=n(""),w=n(""),_=n(""),N=n(!1),P=new Ce;let r=null;const c=k=>{const I=k.target.value.replace(/[^0-9]/g,"");I!==k.target.value&&(N.value=!0,r&&clearTimeout(r),r=window.setTimeout(()=>{N.value=!1,r=null},3e3),u.value=I)},C=()=>{N.value=!1,r&&(clearTimeout(r),r=null)},h=se(()=>u.value&&u.value.trim()!==""),i=async()=>{try{const k=await Ee.getNextSuggestedNCDNumber(),I=k.ncd_number.replace(/^\D+|\s/g,""),T=k.ncd_number.replace(/\d+/g,"")+"-NCD-";u.value=I,w.value=T}catch(k){console.error("Error fetching suggested NCD number:",k),_.value="Failed to fetch suggested NCD number (missing SITE Prefix)"}};ae(()=>{i()}),J(()=>D.value.ID,()=>{i()},{deep:!0});const V=m;function O(){V("closePopover",!1),He.dismiss()}function B(k){try{console.log(k),g.push(k)}catch(I){console.error(I)}}async function U(){try{if(_.value="",!h.value){_.value="Please enter a valid NCD number";return}const k="".concat(w.value).concat(u.value),I=await Ce.findByID(D.value.patientID);for(const T of I.patient_identifiers)T.identifier_type===31&&(await P.updateNCDNumber(T.patient_identifier_id,k),V("save",{newNcdId:k}));await ut(D.value),O()}catch(k){console.error(k)}}return(k,I)=>(s(),A(te,null,[t(e(Ae),null,{default:a(()=>[t(e(fe),null,{default:a(()=>[t(e(de),null,{default:a(()=>[d("div",Qt,[t(e(Y),{icon:e(ze),class:"sub-menu-icon",style:{"font-size":"1.6rem"}},null,8,["icon"]),I[3]||(I[3]=d("b",{style:{"margin-left":"6px"}},"Update NCD Number",-1))])]),_:1}),t(e(De),{slot:"end"},{default:a(()=>[t(e(de),null,{default:a(()=>[t(e(oe),{onClick:I[0]||(I[0]=T=>O()),fill:"solid"},{default:a(()=>[d("span",Jt,[d("div",Kt,[t(e(Y),{icon:e(ee),slot:"start",class:"sub-menu-icon"},null,8,["icon"]),I[4]||(I[4]=d("span",{style:{"margin-left":"6px"}},"Close",-1))])])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),t(e(Be),{class:"ion-padding"},{default:a(()=>[t(e($e),null,{default:a(()=>[t(e(be),{class:"current-ncd-item"},{default:a(()=>[t(e(j),null,{default:a(()=>[I[5]||(I[5]=d("h2",null,"Current NCD Number",-1)),d("p",Zt,$(e(D).NcdID||"Not assigned"),1)]),_:1})]),_:1}),t(e(be),null,{default:a(()=>[d("div",Xt,[N.value?(s(),A("div",Yt,[t(e(Y),{icon:e(We),color:"danger"},null,8,["icon"]),I[6]||(I[6]=d("span",{style:{"font-size":"16px","font-weight":"600px",color:"red"}},"Only numbers are allowed",-1)),t(e(oe),{fill:"clear",size:"small",onClick:C},{default:a(()=>[t(e(Y),{icon:e(ee)},null,8,["icon"])]),_:1})])):b("",!0),_.value?b("",!0):(s(),A("div",ea,[I[7]||(I[7]=d("span",{style:{"font-weight":"600","font-size":"17px",color:"grey"}},"New NCD Number",-1)),t(e(je),{modelValue:u.value,"onUpdate:modelValue":I[1]||(I[1]=T=>u.value=T),placeholder:"Enter number",inputmode:"numeric",pattern:"[0-9]*",onInput:c,class:"custom-input"},{default:a(()=>[d("div",ta,[d("input",{value:w.value,readonly:"",class:"prefix-part",type:"text"},null,8,aa)])]),_:1},8,["modelValue"])]))])]),_:1}),_.value?(s(),A("div",la,[t(e(Ge),{color:"danger"},{default:a(()=>[d("span",na,$(_.value),1)]),_:1})])):b("",!0),_.value?(s(),A("div",oa,[t(e(oe),{onClick:I[2]||(I[2]=T=>B("setSitePrefix")),fill:"solid",style:{margin:"14px"}},{default:a(()=>[d("span",sa,[d("div",ra,[t(e(Y),{icon:e(Qe),slot:"start",class:"sub-menu-icon"},null,8,["icon"]),I[8]||(I[8]=d("span",{style:{"margin-left":"6px"}},"set Site Prefix",-1))])])]),_:1})])):b("",!0)]),_:1})]),_:1}),t(e(Ue),null,{default:a(()=>[t(e(fe),null,{default:a(()=>[t(e(De),{slot:"end"},{default:a(()=>[t(e(de),null,{default:a(()=>[t(e(oe),{onClick:U,fill:"solid",disabled:!h.value},{default:a(()=>[d("span",ia,[d("div",da,[t(e(Y),{icon:e(ue),slot:"start",class:"sub-menu-icon"},null,8,["icon"]),I[9]||(I[9]=d("span",{style:{"margin-left":"6px"}},"Save",-1))])])]),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1})]),_:1})],64))}}),fa=Z(ca,[["__scopeId","data-v-696e3b8f"]]),pa={key:0,style:{display:"flex","justify-content":"space-between",width:"100%"}},ma={key:0},_a={key:1,style:{"font-weight":"bold",padding:"1.7px"}},va={key:1,style:{display:"flex","flex-wrap":"wrap",gap:"20px",width:"100%"}},ha={key:0},ya={key:1},ga={key:2},ba={key:2},wa={style:{display:"flex","flex-wrap":"wrap",gap:"8px",width:"100%"}},Da={key:3,style:{display:"flex","flex-wrap":"wrap",gap:"20px",width:"100%"}},Ia={key:0},Sa={key:1},xa={key:2},ka={key:3},Ca={key:4,style:{width:"100%","text-align":"center","border-collapse":"collapse",border:"1px solid black"}},Va={key:0},Na={style:{border:"1px solid black"}},Pa={style:{border:"1px solid black"}},Fa={style:{border:"1px solid black"}},$a={style:{border:"1px solid black"}},Aa=q({__name:"NCDVisitLbl",props:{imageOut:{type:Object},patient:{type:Object}},emits:["label-out"],setup(l,{emit:m}){const g=m,x=n(null),D=n(0),u=n(""),w=n(4),_=l,N=se(()=>{var h;return(h=_.patient)!=null&&h.medications?_.patient.medications.filter(i=>i&&(i.name||i.dose||i.frequency||i.quantity)):[]}),P=se(()=>{var i,V;const h=(i=_.patient)==null?void 0:i.vitals;return h&&(h.height||h.weight||h.bloodPressure||((V=_.patient)==null?void 0:V.bloodGlucose))}),r=se(()=>{const h=N.value;if(h.length===0)return[];if(D.value===0)return h.slice(0,2);{const i=2+(D.value-1)*w.value;return h.slice(i,i+w.value)}}),c=se(()=>{const h=N.value.length;if(h<=2)return 1;const i=h-2;return 1+Math.ceil(i/w.value)}),C=async()=>{const h=[];for(let i=0;i<c.value;i++){D.value=i,await new Promise(V=>setTimeout(V,100));try{let V;ie.getIsIpPrintersStatus()?V=await ke.toCanvas(x.value,{height:300,width:800}):V=await ke.toPng(x.value,{height:300,width:594}),h.push(V)}catch(V){console.error("Error generating image for page",i,V)}}return h};return ae(async()=>{try{const h=ie.getIsIpPrintersStatus();w.value=h?7:4,u.value=h?"800px":"594px";const i=await C();g("label-out",i),typeof _.imageOut=="function"&&_.imageOut(i)}catch(h){console.error("Error generating patient labels:",h)}}),(h,i)=>{var V,O,B,U,k,I,T,v,o,f,E,H,z,K,S,p,y,M,Q,le,xe;return s(),A("div",{ref_key:"lblComponent",ref:x,id:"container",style:Je("padding: 15px; width:"+u.value)},[D.value===0&&((V=l.patient)!=null&&V.latestVisitDate||(O=l.patient)!=null&&O.patientID)?(s(),A("div",pa,[(B=l.patient)!=null&&B.latestVisitDate?(s(),A("span",ma,[i[0]||(i[0]=d("b",null,"Visit:",-1)),R(" "+$(l.patient.latestVisitDate),1)])):b("",!0),(U=l.patient)!=null&&U.patientID?(s(),A("span",_a,$(l.patient.patientID),1)):b("",!0)])):b("",!0),D.value===0&&((k=l.patient)!=null&&k.patientName||(I=l.patient)!=null&&I.gender||(T=l.patient)!=null&&T.diagnoses&&l.patient.diagnoses.length>0)?(s(),A("div",va,[(v=l.patient)!=null&&v.patientName||(o=l.patient)!=null&&o.gender?(s(),A("span",ha,[d("b",null,$((f=l.patient)==null?void 0:f.patientName)+$((E=l.patient)!=null&&E.gender?"(".concat(l.patient.gender,")"):""),1)])):b("",!0),(H=l.patient)!=null&&H.prescriber?(s(),A("span",ya,[i[1]||(i[1]=d("b",null,"Seen by:",-1)),R($(l.patient.prescriber),1)])):b("",!0),(z=l.patient)!=null&&z.nextAppointment?(s(),A("span",ga,[i[2]||(i[2]=d("b",null,"Nxt App:",-1)),R(" "+$(l.patient.nextAppointment),1)])):b("",!0)])):b("",!0),D.value===0&&((K=l.patient)!=null&&K.diagnoses)&&l.patient.diagnoses.length>0?(s(),A("div",ba,[d("span",wa,[i[3]||(i[3]=d("b",null,"Diagnoses:",-1)),R(" "+$(l.patient.diagnoses.filter(G=>G).join(", ")),1)])])):b("",!0),D.value===0&&P.value?(s(),A("div",Da,[(p=(S=l.patient)==null?void 0:S.vitals)!=null&&p.height?(s(),A("span",Ia,$(l.patient.vitals.height||""),1)):b("",!0),(M=(y=l.patient)==null?void 0:y.vitals)!=null&&M.weight?(s(),A("span",Sa,$(l.patient.vitals.weight||""),1)):b("",!0),(le=(Q=l.patient)==null?void 0:Q.vitals)!=null&&le.bloodPressure?(s(),A("span",xa,$(l.patient.vitals.bloodPressure||""),1)):b("",!0),(xe=l.patient)!=null&&xe.bloodGlucose?(s(),A("span",ka,$(l.patient.bloodGlucose||""),1)):b("",!0)])):b("",!0),r.value.length>0?(s(),A("table",Ca,[D.value===0?(s(),A("thead",Va,[...i[4]||(i[4]=[d("tr",null,[d("th",{style:{border:"1px solid black"}},"Drug"),d("th",{style:{border:"1px solid black"}},"Dose"),d("th",{style:{border:"1px solid black"}},"Freq"),d("th",{style:{border:"1px solid black"}},"Qty")],-1)])])):b("",!0),d("tbody",null,[(s(!0),A(te,null,pe(r.value,(G,Oe)=>(s(),A("tr",{key:Oe},[d("td",Na,$((G==null?void 0:G.name)||""),1),d("td",Pa,$((G==null?void 0:G.dose)||""),1),d("td",Fa,$((G==null?void 0:G.frequency)||""),1),d("td",$a,$((G==null?void 0:G.quantity)||""),1)]))),128))])])):b("",!0)],4)}}}),Ba=Z(Aa,[["__scopeId","data-v-cde3e630"]]);async function Ua(){await ct(Ba,{copies:1})}function Oa(){const l=n(Ke.isNativePlatform()),m=n([]),g=n(null),x=n(!1),D=n(null),w=Te().patient;return{isMobile:l,visits:m,event:g,popoverOpen:x,program:D,patient:w,openPopover:i=>{g.value=i,x.value=!0},openPIM:()=>{ce(_t,{class:"fullScreenModal"})},openOutCome:()=>{ce(Gt,{class:"large-modal-x10"})},printVisitSummary:async()=>{ie.getProgramID()==1?await ft():ie.getProgramID()==32?await Ua():new Ve().printData("visit")},printID:()=>{new Ve().printData("barcode")},formatCurrentAddress:i=>{var O,B,U;return[(O=i==null?void 0:i.personInformation)==null?void 0:O.current_district,(B=i==null?void 0:i.personInformation)==null?void 0:B.current_traditional_authority,(U=i==null?void 0:i.personInformation)==null?void 0:U.current_village].filter(Boolean).join(",")},openUpdateNCDNUmbers:()=>{ce(fa,{class:"large-modal-x10"})}}}export{It as A,yt as D,Mt as O,kt as R,Re as _,Nt as a,Ht as b,_t as c,Oa as u};
