import{d as y,ap as M,b2 as h,r,c as T,a as x,w as f,O as R,f as P,J as d,l,u as i,a4 as D,k as E,N as B,Q as Y,L as k,f6 as w,K as G,a7 as b}from"./vendor-BataJFSH.js";import{u as V,b as o,T as U,t as I,_ as F}from"../index-BPAV0PIM.js";import{N as X}from"./neonatal_service-C5vdpGSt.js";import{g as q}from"./admissionWorkflow-C1e4oic-.js";import{A as W}from"./AdmissionProgressBar-Ccbxsux6.js";import"./lodash-NJiRuGo9.js";import"./apexcharts-BVd6_RNM.js";const H={class:"checkpoint-container"},z={class:"control-buttons"},J=y({__name:"NeonatalCheckpoint",setup(K){const a=M(),O=V(),{patient:c}=h(O),N=r(!1),u=r([]),p=r(!1),m=r(!1),n=r([{encounterType:o.NEONATAL_SIGNS_SYMPTOMS,title:"Signs & Symptoms",route:"/neonatal/signs-symptoms",encounterNames:["NEONATAL SIGNS & SYMPTOMS","NEONATAL SIGNS SYMPTOMS"],isCompleted:!1},{encounterType:o.NEONATAL_REVIEW_OF_SYSTEMS,title:"Review of Systems",route:"/neonatal/review-of-systems",encounterNames:["NEONATAL REVIEW OF SYSTEMS"],isCompleted:!1},{encounterType:o.PHYSICAL_EXAMINATION_BABY,title:"General Examination",route:"/neonatal/general-examination",encounterNames:["PHYSICAL EXAMINATION BABY","NEONATAL GENERAL EXAMINATION"],isCompleted:!1},{encounterType:o.VITALS,title:"Vitals",route:"/neonatal/vitals",encounterNames:["VITALS","NEONATAL VITALS"],isCompleted:!1},{encounterType:o.NEONATAL_SYSTEMIC_EXAMINATION,title:"Systemic Examination",route:"/neonatal/SystemicExamination",encounterNames:["NEONATAL SYSTEMIC EXAMINATION"],isCompleted:!1},{encounterType:o.DIAGNOSIS,title:"Diagnosis",route:"/neonatal/diagnosis",encounterNames:["DIAGNOSIS","NEONATAL DIAGNOSIS"],isCompleted:!1},{title:"Investigations",route:"/neonatal/investigation",encounterNames:["LAB ORDERS","LAB RESULTS"],isCompleted:!1},{encounterType:o.TREATMENT,title:"Treatment Plan",route:"/neonatal/treatment-plan",encounterNames:["TREATMENT","NEONATAL TREATMENT PLAN"],isCompleted:!1},{encounterType:o.NEONATAL_ADMISSION_OUTCOMES,title:"Admission Outcomes",route:"/neonatal/admission-outcomes",encounterNames:["NEONATAL ADMISSION OUTCOMES","ADMISSION OUTCOMES"],isCompleted:!1},{title:"Sign Off",route:"/neonatal/admission-signoff",encounterNames:["NEONATAL SIGNOFF"],isCompleted:!1}]),S=e=>(e!=null?e:"").trim().toUpperCase(),v=T(()=>{if(!m.value)return"Next: Triage";if(!p.value)return"Next: Profiling";const e=n.value.find(t=>!t.isCompleted);return e?"Next: ".concat(e.title):"Print Summary"}),C=T(()=>n.value.every(e=>e.isCompleted)),A=async()=>{var e;if(!((e=c.value)!=null&&e.patientID)){I("No patient selected"),a.push("/patientProfile");return}N.value=!0;try{const t=await X.getSavedEncounters(c.value.patientID);u.value=Array.isArray(t==null?void 0:t.encounters)?t.encounters:[],p.value=u.value.some(s=>S(s)==="NEONATAL ENROLLMENT"),m.value=u.value.some(s=>S(s)==="NEONATAL TRIAGE");const L=q(u.value,n.value);n.value.forEach((s,g)=>{s.isCompleted=g<L})}catch(t){console.error("Error loading progress:",t),I("Unable to load progress")}finally{N.value=!1}},_=()=>{if(!m.value){a.push("/neonatal/triage");return}if(!p.value){a.push("/neonatal/enrollment");return}const e=n.value.find(t=>!t.isCompleted);e?a.push({path:e.route,query:e.query||{}}):C.value&&a.push("/neonatal/admission-outcomes")};return x(()=>{A()}),f(()=>{var e;return(e=c.value)==null?void 0:e.patientID},e=>{e&&A()}),f(()=>a.currentRoute.value.fullPath,e=>{e==="/neonatal/checkpoint"&&A()}),(e,t)=>(P(),R(i(b),null,{default:d(()=>[l(U),l(i(D),{class:"ion-padding"},{default:d(()=>[E("div",H,[l(W),E("div",z,[l(i(B),{expand:"block",fill:"solid",color:"primary",onClick:_,disabled:N.value},{default:d(()=>[l(i(k),{slot:"start",icon:i(w)},null,8,["icon"]),Y(" "+G(v.value),1)]),_:1},8,["disabled"])])])]),_:1})]),_:1}))}}),ae=F(J,[["__scopeId","data-v-b5c9d613"]]);export{ae as default};
