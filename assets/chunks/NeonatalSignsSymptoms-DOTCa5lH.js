import{d as F,r as S,bH as w,w as d,e as k,f as D,l as _,u as v,ab as T,ae as z,am as P,b2 as $,eU as H,H as g,O as A,J as R}from"./vendor-CAxM8KGs.js";import{z as b,_ as y,T as B,u as U,t as I,H as O,Z as E}from"../index-CSiBRz_H.js";import{N as W}from"./neonatal_service-CM1yLg5R.js";import{D as j}from"./DemographicBar-Bk6HKvtx.js";import{p as m,q as h,N as q}from"./NeonatalStepper-uAfLQ8AM.js";import{u as J}from"./useSignsSymptomsStore-zSaivufi.js";import"./lodash-NJiRuGo9.js";import"./apexcharts-y0ZeiY9V.js";import"./SaveProgressModal-BP95xqUB.js";import"./images-Zb0Yk5XL.js";import"./enrollment-DU-PLRUa.js";const K={class:"signs-symptoms-section-wrapper"},Z=F({__name:"AdmissionSection",setup(r,{expose:c}){const t=S(null),n=m[0],u=n.formData,l=n.conditionalRules||[],i=w(h),p=e=>{i&&(i.is_readmission=e.is_readmission||"")};return d(()=>{var e;return(e=t.value)==null?void 0:e.formValues},e=>{e&&p(e)},{deep:!0}),d(()=>t.value,e=>{e!=null&&e.getFormValues&&p(e.getFormValues())},{immediate:!0}),c({getFormRef:()=>t.value,validateForm:()=>{var e,o;return((o=(e=t.value)==null?void 0:e.validateForm)==null?void 0:o.call(e))||null},getFormValues:()=>{var e,o;return((o=(e=t.value)==null?void 0:e.getFormValues)==null?void 0:o.call(e))||{}}}),(e,o)=>(D(),k("div",K,[_(b,{formData:v(u),conditionalRules:v(l),ref_key:"formRef",ref:t},null,8,["formData","conditionalRules"])]))}}),N=y(Z,[["__scopeId","data-v-312c3ac7"]]),x={class:"signs-symptoms-section-wrapper"},G=F({__name:"PresentingComplaintsSection",setup(r,{expose:c}){const t=S(null),n=m[1],u=n.formData,l=n.conditionalRules||[],i=w(h),p=e=>{i&&(i.presenting_complaints=e.presenting_complaints||[])};return d(()=>{var e;return(e=t.value)==null?void 0:e.formValues},e=>{e&&p(e)},{deep:!0}),d(()=>t.value,e=>{e!=null&&e.getFormValues&&p(e.getFormValues())},{immediate:!0}),c({getFormRef:()=>t.value,validateForm:()=>{var e,o;return((o=(e=t.value)==null?void 0:e.validateForm)==null?void 0:o.call(e))||null},getFormValues:()=>{var e,o;return((o=(e=t.value)==null?void 0:e.getFormValues)==null?void 0:o.call(e))||{}}}),(e,o)=>(D(),k("div",x,[_(b,{formData:v(u),conditionalRules:v(l),ref_key:"formRef",ref:t},null,8,["formData","conditionalRules"])]))}}),V=y(G,[["__scopeId","data-v-2ad14f66"]]),L=F({name:"NeonatalSignsSymptoms",components:{IonPage:z,IonContent:T,Toolbar:B,DemographicBar:j,NeonatalStepper:q,AdmissionSection:N,PresentingComplaintsSection:V},setup(){const r=P(),c=U(),{patient:t}=$(c),n=J(),u=a=>{const s=Number(a);return Number.isFinite(s)?s:null},l=()=>{var s;const a=u((s=t.value)==null?void 0:s.patientID);n.initializeForPatient(a)};l(),d(()=>{var a;return(a=t.value)==null?void 0:a.patientID},()=>l());const i=n.formData;H(h,i),d(()=>n.formData,()=>n.saveSnapshot(),{deep:!0});const p=S(m.map((a,s)=>({title:a.title,number:s+1,checked:!1,class:s===0?"open_step common_step":"common_step",last_step:s===m.length-1?"last_step":""}))),e=[{title:m[0].title,value:"1",component:N,configIndex:0},{title:m[1].title,value:"2",component:V,configIndex:1}],o="Signs & Symptoms Assessment",C=S("1");return{wizardData:p,stepperData:e,stepperTitle:o,currentOpenStepper:C,updateStatus:a=>{a&&a.value&&p.value.forEach((s,f)=>{a.value===(f+1).toString()?(s.class="open_step common_step",s.checked=!1):f<parseInt(a.value)-1?(s.class="common_step color_white",s.checked=!0):(s.class="common_step",s.checked=!1)})},getSaveFunction:a=>a===e.length-1?async()=>{var s;if(!((s=t.value)!=null&&s.patientID)){I("No patient selected");return}try{const f=O.sessionDate();await W.saveSignsSymptomsAssessment(t.value.patientID,i,f),E("Signs & symptoms assessment saved successfully"),n.clearPatient(t.value.patientID),r.push({path:"/neonatal/checkpoint"})}catch(f){console.error("Failed to save signs/symptoms assessment",f),I("Failed to save signs/symptoms assessment")}}:null,neonatalSignsSymptomsSections:m}}});function M(r,c,t,n,u,l){const i=g("Toolbar"),p=g("NeonatalStepper"),e=g("ion-content"),o=g("ion-page");return D(),A(o,{class:"neonatal-signs-symptoms-page"},{default:R(()=>[_(i),_(e,{fullscreen:!0},{default:R(()=>[_(p,{wizardData:r.wizardData,StepperData:r.stepperData,stepperTitle:r.stepperTitle,openStepper:r.currentOpenStepper,backUrl:"/NeonatalHome",getSaveFunction:r.getSaveFunction,flowType:"signsSymptoms",sectionsConfig:r.neonatalSignsSymptomsSections,onUpdateStatus:r.updateStatus},null,8,["wizardData","StepperData","stepperTitle","openStepper","getSaveFunction","sectionsConfig","onUpdateStatus"])]),_:1})]),_:1})}const me=y(L,[["render",M],["__scopeId","data-v-a896ff63"]]);export{me as default};
