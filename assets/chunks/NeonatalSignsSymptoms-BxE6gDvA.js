import{d as F,r as S,bH as w,w as d,e as k,f as D,l as _,u as v,a4 as b,a7 as P,ap as $,b2 as z,eS as H,H as g,O as A,J as R}from"./vendor-BataJFSH.js";import{aG as C,_ as y,T as B,u as O,t as I,H as U,K as E}from"../index-BPAV0PIM.js";import{N as K}from"./neonatal_service-C5vdpGSt.js";import{D as W}from"./DemographicBar-moo3cMAH.js";import{p as c,q as h,N as j}from"./NeonatalStepper-CR5leb6B.js";import{u as q}from"./useSignsSymptomsStore-DUJOWMS5.js";import"./lodash-NJiRuGo9.js";import"./apexcharts-BVd6_RNM.js";import"./SaveProgressModal-BodNTIHT.js";import"./images-Zb0Yk5XL.js";import"./enrollment-DU-PLRUa.js";const G={class:"signs-symptoms-section-wrapper"},J=F({__name:"AdmissionSection",setup(r,{expose:m}){const t=S(null),n=c[0],u=n.formData,l=n.conditionalRules||[],i=w(h),p=e=>{i&&(i.is_readmission=e.is_readmission||"")};return d(()=>{var e;return(e=t.value)==null?void 0:e.formValues},e=>{e&&p(e)},{deep:!0}),d(()=>t.value,e=>{e!=null&&e.getFormValues&&p(e.getFormValues())},{immediate:!0}),m({getFormRef:()=>t.value,validateForm:()=>{var e,o;return((o=(e=t.value)==null?void 0:e.validateForm)==null?void 0:o.call(e))||null},getFormValues:()=>{var e,o;return((o=(e=t.value)==null?void 0:e.getFormValues)==null?void 0:o.call(e))||{}}}),(e,o)=>(D(),k("div",G,[_(C,{formData:v(u),conditionalRules:v(l),ref_key:"formRef",ref:t},null,8,["formData","conditionalRules"])]))}}),N=y(J,[["__scopeId","data-v-312c3ac7"]]),x={class:"signs-symptoms-section-wrapper"},L=F({__name:"PresentingComplaintsSection",setup(r,{expose:m}){const t=S(null),n=c[1],u=n.formData,l=n.conditionalRules||[],i=w(h),p=e=>{i&&(i.presenting_complaints=e.presenting_complaints||[])};return d(()=>{var e;return(e=t.value)==null?void 0:e.formValues},e=>{e&&p(e)},{deep:!0}),d(()=>t.value,e=>{e!=null&&e.getFormValues&&p(e.getFormValues())},{immediate:!0}),m({getFormRef:()=>t.value,validateForm:()=>{var e,o;return((o=(e=t.value)==null?void 0:e.validateForm)==null?void 0:o.call(e))||null},getFormValues:()=>{var e,o;return((o=(e=t.value)==null?void 0:e.getFormValues)==null?void 0:o.call(e))||{}}}),(e,o)=>(D(),k("div",x,[_(C,{formData:v(u),conditionalRules:v(l),ref_key:"formRef",ref:t},null,8,["formData","conditionalRules"])]))}}),V=y(L,[["__scopeId","data-v-2ad14f66"]]),M=F({name:"NeonatalSignsSymptoms",components:{IonPage:P,IonContent:b,Toolbar:B,DemographicBar:W,NeonatalStepper:j,AdmissionSection:N,PresentingComplaintsSection:V},setup(){const r=$(),m=O(),{patient:t}=z(m),n=q(),u=a=>{const s=Number(a);return Number.isFinite(s)?s:null},l=()=>{var s;const a=u((s=t.value)==null?void 0:s.patientID);n.initializeForPatient(a)};l(),d(()=>{var a;return(a=t.value)==null?void 0:a.patientID},()=>l());const i=n.formData;H(h,i),d(()=>n.formData,()=>n.saveSnapshot(),{deep:!0});const p=S(c.map((a,s)=>({title:a.title,number:s+1,checked:!1,class:s===0?"open_step common_step":"common_step",last_step:s===c.length-1?"last_step":""}))),e=[{title:c[0].title,value:"1",component:N,configIndex:0},{title:c[1].title,value:"2",component:V,configIndex:1}],o="Signs & Symptoms Assessment",T=S("1");return{wizardData:p,stepperData:e,stepperTitle:o,currentOpenStepper:T,updateStatus:a=>{a&&a.value&&p.value.forEach((s,f)=>{a.value===(f+1).toString()?(s.class="open_step common_step",s.checked=!1):f<parseInt(a.value)-1?(s.class="common_step color_white",s.checked=!0):(s.class="common_step",s.checked=!1)})},getSaveFunction:a=>a===e.length-1?async()=>{var s;if(!((s=t.value)!=null&&s.patientID)){I("No patient selected");return}try{const f=U.sessionDate();await K.saveSignsSymptomsAssessment(t.value.patientID,i,f),E("Signs & symptoms assessment saved successfully"),n.clearPatient(t.value.patientID),r.push({path:"/neonatal/checkpoint"})}catch(f){console.error("Failed to save signs/symptoms assessment",f),I("Failed to save signs/symptoms assessment")}}:null,neonatalSignsSymptomsSections:c}}});function Q(r,m,t,n,u,l){const i=g("Toolbar"),p=g("NeonatalStepper"),e=g("ion-content"),o=g("ion-page");return D(),A(o,{class:"neonatal-signs-symptoms-page"},{default:R(()=>[_(i),_(e,{fullscreen:!0},{default:R(()=>[_(p,{wizardData:r.wizardData,StepperData:r.stepperData,stepperTitle:r.stepperTitle,openStepper:r.currentOpenStepper,backUrl:"/NeonatalHome",getSaveFunction:r.getSaveFunction,flowType:"signsSymptoms",sectionsConfig:r.neonatalSignsSymptomsSections,onUpdateStatus:r.updateStatus},null,8,["wizardData","StepperData","stepperTitle","openStepper","getSaveFunction","sectionsConfig","onUpdateStatus"])]),_:1})]),_:1})}const ce=y(M,[["render",Q],["__scopeId","data-v-a896ff63"]]);export{ce as default};
