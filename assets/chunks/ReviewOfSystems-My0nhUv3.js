import{D as J,d as y,r as g,eT as R,w as _,e as b,f as d,l as F,u as p,c as N,O,m as $,a7 as q,a4 as E,ap as G,aW as W,eU as H,H as V,J as C}from"./vendor-9T3c-tPq.js";import{aD as D,_ as h,ck as K,cl as L,T as Q,u as X,t as P,G as Y,s as Z}from"../index-Zqy7iC3X.js";import{j as ee,k as u,l as S,N as te}from"./NeonatalStepper-DqyCFAZs.js";import{N as oe}from"./neonatal_service-exD9ZkT8.js";import"./lodash-NJiRuGo9.js";import"./apexcharts-qlDaiiMc.js";import"./SaveProgressModal-DZ752BDo.js";import"./images-DJIykHYW.js";import"./enrollment-DU-PLRUa.js";const I=()=>JSON.parse(JSON.stringify(ee)),se=J("neonatalReviewOfSystemsStore",{state:()=>({activePatientId:null,formData:I(),storedForms:{}}),actions:{initializeForPatient(a){if(a==null){this.activePatientId=null,Object.assign(this.formData,I());return}this.activePatientId=a;const c=String(a),t=this.storedForms[c];t?Object.assign(this.formData,t):Object.assign(this.formData,I()),this.saveSnapshot()},saveSnapshot(){if(this.activePatientId==null)return;const a=String(this.activePatientId);this.storedForms[a]=JSON.parse(JSON.stringify(this.formData))},resetActiveForm(){Object.assign(this.formData,I()),this.saveSnapshot()},clearPatient(a){delete this.storedForms[String(a)]}},persist:{paths:["activePatientId","formData","storedForms"]}}),ae={class:"review-of-systems-section-wrapper"},ne=y({__name:"BowelMovementsSection",setup(a,{expose:c}){const t=g(null),n=u[0],m=n.formData,r=n.conditionalRules||[],s=R(S),i=e=>{s&&(s.is_baby_vomiting=e.is_baby_vomiting||"",s.frequency_of_vomiting=e.frequency_of_vomiting||"",s.passage_of_meconium=e.passage_of_meconium||"",s.frequency_of_stooling=e.frequency_of_stooling||"",s.color_of_stools=e.color_of_stools||"",s.consistency_of_stools=e.consistency_of_stools||"",s.blood_in_stools=e.blood_in_stools||"",s.mucus_in_stools=e.mucus_in_stools||"")};return _(()=>{var e;return(e=t.value)==null?void 0:e.formValues},e=>{e&&i(e)},{deep:!0}),_(()=>t.value,e=>{e!=null&&e.getFormValues&&i(e.getFormValues())},{immediate:!0}),c({getFormRef:()=>t.value,validateForm:()=>{var e,o;return((o=(e=t.value)==null?void 0:e.validateForm)==null?void 0:o.call(e))||null},getFormValues:()=>{var e,o;return((o=(e=t.value)==null?void 0:e.getFormValues)==null?void 0:o.call(e))||{}}}),(e,o)=>(d(),b("div",ae,[F(D,{formData:p(m),conditionalRules:p(r),ref_key:"formRef",ref:t},null,8,["formData","conditionalRules"])]))}}),T=h(ne,[["__scopeId","data-v-6b71ffe3"]]),re={class:"review-of-systems-section-wrapper"},ie=y({__name:"UrineOutputSection",setup(a,{expose:c}){const t=g(null),n=u[1],m=n.formData,r=n.conditionalRules||[],s=R(S),i=e=>{s&&(s.is_baby_passing_urine=e.is_baby_passing_urine||"",s.number_of_wet_nappies=e.number_of_wet_nappies||"",s.color_of_urine=e.color_of_urine||"",s.volume_ml=e.volume_ml||"")};return _(()=>{var e;return(e=t.value)==null?void 0:e.formValues},e=>{e&&i(e)},{deep:!0}),_(()=>t.value,e=>{e!=null&&e.getFormValues&&i(e.getFormValues())},{immediate:!0}),c({getFormRef:()=>t.value,validateForm:()=>{var e,o;return((o=(e=t.value)==null?void 0:e.validateForm)==null?void 0:o.call(e))||null},getFormValues:()=>{var e,o;return((o=(e=t.value)==null?void 0:e.getFormValues)==null?void 0:o.call(e))||{}}}),(e,o)=>(d(),b("div",re,[F(D,{formData:p(m),conditionalRules:p(r),ref_key:"formRef",ref:t},null,8,["formData","conditionalRules"])]))}}),A=h(ie,[["__scopeId","data-v-ae40b2d0"]]),le={class:"review-of-systems-section-wrapper"},ce=y({__name:"GrowthSection",setup(a,{expose:c}){const t=g(null),n=u[2],m=n.formData,r=n.conditionalRules||[],s=R(S),i=e=>{s&&(s.weight_trend_since_birth=e.weight_trend_since_birth||"")};return _(()=>{var e;return(e=t.value)==null?void 0:e.formValues},e=>{e&&i(e)},{deep:!0}),_(()=>t.value,e=>{e!=null&&e.getFormValues&&i(e.getFormValues())},{immediate:!0}),c({getFormRef:()=>t.value,validateForm:()=>{var e,o;return((o=(e=t.value)==null?void 0:e.validateForm)==null?void 0:o.call(e))||null},getFormValues:()=>{var e,o;return((o=(e=t.value)==null?void 0:e.getFormValues)==null?void 0:o.call(e))||{}}}),(e,o)=>(d(),b("div",le,[F(D,{formData:p(m),conditionalRules:p(r),ref_key:"formRef",ref:t},null,8,["formData","conditionalRules"])]))}}),j=h(ce,[["__scopeId","data-v-d18b28f7"]]),me={class:"review-of-systems-section-wrapper"},ue=y({__name:"MouthOropharynxSection",setup(a,{expose:c}){const t=g(null),n=u[3],m=n.formData,r=n.conditionalRules||[],s=R(S),i=e=>{s&&(s.does_baby_have_oral_thrush=e.does_baby_have_oral_thrush||"",s.does_baby_have_oral_sores=e.does_baby_have_oral_sores||"",s.does_baby_have_tongue_tie=e.does_baby_have_tongue_tie||"")};return _(()=>{var e;return(e=t.value)==null?void 0:e.formValues},e=>{e&&i(e)},{deep:!0}),_(()=>t.value,e=>{e!=null&&e.getFormValues&&i(e.getFormValues())},{immediate:!0}),c({getFormRef:()=>t.value,validateForm:()=>{var e,o;return((o=(e=t.value)==null?void 0:e.validateForm)==null?void 0:o.call(e))||null},getFormValues:()=>{var e,o;return((o=(e=t.value)==null?void 0:e.getFormValues)==null?void 0:o.call(e))||{}}}),(e,o)=>(d(),b("div",me,[F(D,{formData:p(m),conditionalRules:p(r),ref_key:"formRef",ref:t},null,8,["formData","conditionalRules"])]))}}),z=h(ue,[["__scopeId","data-v-a2bf5654"]]),fe={class:"review-of-systems-section-wrapper"},_e=y({__name:"AbdomenSection",setup(a,{expose:c}){const t=g(null),n=u[4],m=n.formData,r=n.conditionalRules||[],s=R(S),i=e=>{s&&(s.abdominal_distension=e.abdominal_distension||"",s.abdominal_pain=e.abdominal_pain||"",s.umbilical_condition=e.umbilical_condition||"")};return _(()=>{var e;return(e=t.value)==null?void 0:e.formValues},e=>{e&&i(e)},{deep:!0}),_(()=>t.value,e=>{e!=null&&e.getFormValues&&i(e.getFormValues())},{immediate:!0}),c({getFormRef:()=>t.value,validateForm:()=>{var e,o;return((o=(e=t.value)==null?void 0:e.validateForm)==null?void 0:o.call(e))||null},getFormValues:()=>{var e,o;return((o=(e=t.value)==null?void 0:e.getFormValues)==null?void 0:o.call(e))||{}}}),(e,o)=>(d(),b("div",fe,[F(D,{formData:p(m),conditionalRules:p(r),ref_key:"formRef",ref:t},null,8,["formData","conditionalRules"])]))}}),M=h(_e,[["__scopeId","data-v-f42ebbfa"]]),pe={class:"review-of-systems-section-wrapper"},de=y({__name:"MusculoskeletalSection",setup(a,{expose:c}){const t=g(null),n=u[5],m=n.formData,r=n.conditionalRules||[],s=R(S),i=e=>{s&&(s.skin_rash=e.skin_rash||"",s.talipes=e.talipes||"",s.extra_digits=e.extra_digits||"",s.spinal_bifida=e.spinal_bifida||"")};return _(()=>{var e;return(e=t.value)==null?void 0:e.formValues},e=>{e&&i(e)},{deep:!0}),_(()=>t.value,e=>{e!=null&&e.getFormValues&&i(e.getFormValues())},{immediate:!0}),c({getFormRef:()=>t.value,validateForm:()=>{var e,o;return((o=(e=t.value)==null?void 0:e.validateForm)==null?void 0:o.call(e))||null},getFormValues:()=>{var e,o;return((o=(e=t.value)==null?void 0:e.getFormValues)==null?void 0:o.call(e))||{}}}),(e,o)=>(d(),b("div",pe,[F(D,{formData:p(m),conditionalRules:p(r),ref_key:"formRef",ref:t},null,8,["formData","conditionalRules"])]))}}),U=h(de,[["__scopeId","data-v-d41ae811"]]),ve={class:"review-of-systems-section-wrapper"},ge=y({__name:"SummarySection",setup(a,{expose:c}){const t=u[6],n=N(()=>t.formData.find(s=>s.componentType==="Alert")),m=N(()=>t.formData.find(s=>s.componentType==="summaryField")),r=R(S);return c({getFormRef:()=>null,validateForm:()=>null,getFormValues:()=>({...r||{}})}),(s,i)=>(d(),b("div",ve,[n.value?(d(),O(K,{key:0,config:n.value,allFormValues:p(r)||{}},null,8,["config","allFormValues"])):$("",!0),m.value?(d(),O(L,{key:1,config:m.value,allFormValues:p(r)||{}},null,8,["config","allFormValues"])):$("",!0)]))}}),B=h(ge,[["__scopeId","data-v-fd63510d"]]),Fe=y({name:"ReviewOfSystems",components:{IonContent:E,IonPage:q,Toolbar:Q,NeonatalStepper:te,BowelMovementsSection:T,UrineOutputSection:A,GrowthSection:j,MouthOropharynxSection:z,AbdomenSection:M,MusculoskeletalSection:U,SummarySection:B},setup(){const a=G(),c=X(),{patient:t}=W(c),n="Review Of Systems",m=g("1"),r=g(!1),s=se(),i=f=>{const l=Number(f);return Number.isFinite(l)?l:null},e=()=>{var l;const f=i((l=t.value)==null?void 0:l.patientID);s.initializeForPatient(f)};e(),_(()=>{var f;return(f=t.value)==null?void 0:f.patientID},()=>e());const o=s.formData;H(S,o),_(()=>s.formData,()=>s.saveSnapshot(),{deep:!0});const k=g(u.map((f,l)=>({title:f.title,number:l+1,checked:!1,class:l===0?"open_step common_step":"common_step",last_step:l===u.length-1?"last_step":""}))),x=[{title:u[0].title,value:"1",component:T,configIndex:0},{title:u[1].title,value:"2",component:A,configIndex:1},{title:u[2].title,value:"3",component:j,configIndex:2},{title:u[3].title,value:"4",component:z,configIndex:3},{title:u[4].title,value:"5",component:M,configIndex:4},{title:u[5].title,value:"6",component:U,configIndex:5},{title:u[6].title,value:"7",component:B,configIndex:6}];return{wizardData:k,stepperData:x,stepperTitle:n,currentOpenStepper:m,updateStatus:f=>{f&&f.value&&k.value.forEach((l,w)=>{f.value===(w+1).toString()?(l.class="open_step common_step",l.checked=!1):w<parseInt(f.value)-1?(l.class="common_step color_white",l.checked=!0):(l.class="common_step",l.checked=!1)})},getSaveFunction:f=>f===x.length-1?async()=>{var l;if(!((l=t.value)!=null&&l.patientID)){P("No patient selected");return}if(!r.value)try{if(r.value=!0,!Object.values(o).some(v=>Array.isArray(v)?v.length>0:typeof v=="boolean"?v===!0:v!=null&&v!=="")){P("Please complete at least one section of the review"),r.value=!1;return}await oe.saveReviewOfSystemsAssessment(t.value.patientID,o),Y("Review of systems saved successfully"),await new Promise(v=>setTimeout(v,500)),a.push({path:"/neonatal/SystemicExamination"})}catch(w){console.error("Failed to save review of systems",w),Z("Failed to save review of systems. Please try again."),r.value=!1}}:null,neonatalReviewOfSystemsSections:u,isSaving:r}}});function ye(a,c,t,n,m,r){const s=V("Toolbar"),i=V("NeonatalStepper"),e=V("ion-content"),o=V("ion-page");return d(),O(o,{class:"review-of-systems-page"},{default:C(()=>[F(s),F(e,{fullscreen:!0},{default:C(()=>[F(i,{wizardData:a.wizardData,StepperData:a.stepperData,stepperTitle:a.stepperTitle,openStepper:a.currentOpenStepper,backUrl:"/NeonatalHome",getSaveFunction:a.getSaveFunction,sectionsConfig:a.neonatalReviewOfSystemsSections,flowType:"reviewOfSystems",onUpdateStatus:a.updateStatus},null,8,["wizardData","StepperData","stepperTitle","openStepper","getSaveFunction","sectionsConfig","onUpdateStatus"])]),_:1})]),_:1})}const Ne=h(Fe,[["render",ye],["__scopeId","data-v-31637e64"]]);export{Ne as default};
