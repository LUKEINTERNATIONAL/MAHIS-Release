import{d as v,r as s,a as y,n as S,H as w,O as D,f,J as i,e as I,m as k,l,k as a,u as r,a3 as O,b5 as p,p as x,a6 as B,cU as M}from"./vendor-BpjEhVym.js";import{H as m,T,o as C,t as N,m as R,_ as V}from"../index-CgDetJyr.js";import{O as A}from"./OfflineMoreDetailsModal-BlC8zYzk.js";import"./lodash-NJiRuGo9.js";import"./apexcharts-DMAoEdNS.js";import"./SetRelationship.vue_vue_type_script_lang-CLZCVgE1.js";import"./BasicForm-DI8tVd_D.js";import"./DateInputField-k7wJqEUJ.js";import"./customDatePicker-BgQIj83L.js";const P={key:0,class:"spinner-overlay"},E={class:"container"},$={class:"table-responsive"},H=v({__name:"OfflineRecords",setup(J){const d=s([]);s([]),s([]),s(m.sessionDate()),s(m.sessionDate()),s("all");const o=s(!1),c=s(null),b={responsive:!0,select:!1,layout:{topStart:null,topEnd:"search",bottomStart:"info",bottomEnd:"paging"}},u=async()=>{o.value=!0;try{const e=await C("patients_records");d.value=e.map(t=>["".concat(t.personInformation.given_name," ").concat(t.personInformation.family_name),t.ID,t.saveStatusPersonInformation,t.saveStatusBirthRegistration,t.saveStatusGuardianInformation,"","",'<button class="btn btn-sm btn-primary edit-btn" data-id=\''.concat(JSON.stringify(t),"'>More details</button>")]),p.use(M)}catch(e){N("An error occurred while loading data.")}finally{o.value=!1}},_=e=>{h(JSON.parse(e))},g=async e=>{console.log("Deleting item with id: ".concat(e))},h=async e=>{await R(A,{class:"fullScreenModal"},!0,{clientData:e})==="dismiss"&&await u()};return y(async()=>{await u(),S(()=>{const e=c.value.dt;e.columns.adjust().draw(),e.on("click",".edit-btn",t=>{const n=t.target.getAttribute("data-id");_(n)}),e.on("click",".delete-btn",t=>{const n=t.target.getAttribute("data-id");g(n)})})}),(e,t)=>{const n=w("ion-spinner");return f(),D(r(B),{class:x({loading:o.value})},{default:i(()=>[o.value?(f(),I("div",P,[l(n,{name:"bubbles"}),t[0]||(t[0]=a("div",{class:"loading-text"},"Please wait...",-1))])):k("",!0),l(T),l(r(O),null,{default:i(()=>[a("div",E,[t[2]||(t[2]=a("h4",{style:{width:"100%","text-align":"center","font-weight":"700"}},"Offline Records Status",-1)),a("div",$,[l(r(p),{ref_key:"dataTable",ref:c,options:b,data:d.value,class:"display nowrap",width:"100%"},{default:i(()=>[...t[1]||(t[1]=[a("thead",null,[a("tr",null,[a("th",null,"Full Name"),a("th",null,"ID"),a("th",null,"Personal Info Status"),a("th",null,"Birth Registration Status"),a("th",null,"Guardian Info Status"),a("th",null,"Vitals Status"),a("th",null,"Vaccine Admin Status"),a("th",null,"Action")])],-1)])]),_:1},8,["data"])])])]),_:1})]),_:1},8,["class"])}}}),Q=V(H,[["__scopeId","data-v-3be717c5"]]);export{Q as default};
