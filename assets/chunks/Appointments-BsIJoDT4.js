import{d as J,ah as U,G as et,E as nt,ai as st,aj as it,_ as at,I as ot,a3 as j,H as E,e as c,f as d,l as s,J as n,k as l,F as V,P as L,O as w,Q as a,K as u,m as I,V as $,a6 as lt,bK as rt,c4 as ut,dg as dt,bf as pt,aU as ct}from"./vendor-BthE7zCk.js";import{J as q,bc as Q,H as W,m as gt,aQ as X,E as Z,P as G,u as x,aH as ht,l as mt,_ as tt,T as ft,af as yt}from"../index-D3-FX8uE.js";import{D as vt}from"./DemographicBar-dxsjYZgX.js";import{a as Dt,L as Ot,u as Tt}from"./NextAppointmentModal-BZHrEhJg.js";import{F as Et}from"./FeatusModal-CxYLraCX.js";import{U as wt,I as It}from"./UpcomingFeature-CnbLvcCP.js";import"./lodash-NJiRuGo9.js";import"./apexcharts-DxvGX8bh.js";import"./BasicForm-B3QnR9ds.js";import"./DateInputField-BKQTL7ro.js";const bt=J({name:"Menu",components:{IonContent:j,IonHeader:ot,IonItem:at,IonList:it,IonMenu:st,IonTitle:nt,IonToolbar:et,UpcomingFeature:wt,DynamicButton:q},data(){return{iconsContent:mt,visits:[],BMI:"",nextAppointMent:"",drugs:"",visitDate:[],primaryDiagnosis:[],presentingComplaint:[],secondaryDiagnosis:[],labOrders:[],vitals:{},vitalsWeightHeight:{},savedEncounters:[],pregnancy:{},appointmentDate:""}},watch:{patient:{async handler(){await this.updateData()},deep:!0},$route:{async handler(){await this.updateData()},deep:!0}},async mounted(){await this.updateData()},computed:{...U(ht,["investigations"]),...U(x,["patient"]),inputFields(){return this.investigations[0].selectedData}},methods:{async updateData(){const e=new G;this.visits=await G.getPatientVisits(e.getID(),!1),await this.loadSavedEncounters(this.visits[0])},covertDate(e){return W.toStandardHisDisplayFormat(e)},async loadSavedEncounters(e){this.visitDate=e;const t=await Z.getEncounters(this.patient.patientID,{date:e});await this.setDiagnosisEncounters(t),await this.setVitalsEncounters(t),await this.setPresentingComplainsEncounters(t),await this.setTreatmentEncounters(t),await this.setANCProfileEncounters(t),await this.setNextAppointmentEncounter(t)},findEncounter(e,t){return e.find(o=>o.type&&o.type.name===t)},async setDiagnosisEncounters(e){var o;const t=(o=this.findEncounter(e,"OUTPATIENT DIAGNOSIS"))==null?void 0:o.observations;this.primaryDiagnosis=await this.getConceptValues(this.filterObs(t,"Primary diagnosis"),"coded"),this.secondaryDiagnosis=await this.getConceptValues(this.filterObs(t,"Secondary diagnosis"),"coded")},async setVitalsEncounters(e){var o,p,g,h,m,i,r,v,f,D,T,y,O,b,C,A,S,N,_,k,P,B,M,R,H;const t=(o=this.findEncounter(e,"VITALS"))==null?void 0:o.observations;this.vitals.weight=(h=(g=(p=this.filterObs(t,"Weight"))==null?void 0:p[0])==null?void 0:g.value_numeric)!=null?h:"",this.vitals.temperature=(r=(i=(m=this.filterObs(t,"Temperature"))==null?void 0:m[0])==null?void 0:i.value_numeric)!=null?r:"",this.vitals.pulse=(D=(f=(v=this.filterObs(t,"Pulse"))==null?void 0:v[0])==null?void 0:f.value_numeric)!=null?D:"",this.vitals.SAO2=(O=(y=(T=this.filterObs(t,"SAO2"))==null?void 0:T[0])==null?void 0:y.value_numeric)!=null?O:"",this.vitals.height=(A=(C=(b=this.filterObs(t,"Height (cm)"))==null?void 0:b[0])==null?void 0:C.value_numeric)!=null?A:"",this.vitals.systolic=(_=(N=(S=this.filterObs(t,"Systolic"))==null?void 0:S[0])==null?void 0:N.value_numeric)!=null?_:"",this.vitals.respirationRate=(B=(P=(k=this.filterObs(t,"Respiration rate"))==null?void 0:k[0])==null?void 0:P.value_numeric)!=null?B:"",this.vitals.diastolic=(H=(R=(M=this.filterObs(t,"Diastolic"))==null?void 0:M[0])==null?void 0:R.value_numeric)!=null?H:"",this.vitals.weight&&this.vitals.height&&await this.setBMI(this.vitals.weight,this.vitals.height)},async setNextAppointmentEncounter(e){var o,p,g,h;const t=(o=this.findEncounter(e,"APPOINTMENT"))==null?void 0:o.observations;this.appointmentDate["Appointment date"]=(h=(g=(p=this.filterObs(t,"Appointment date"))==null?void 0:p[0])==null?void 0:g.value_text)!=null?h:""},async setANCProfileEncounters(e){var o,p,g,h,m,i,r,v,f,D,T,y,O,b,C,A,S,N,_,k,P,B,M,R,H,F,Y,z,K;const t=(o=this.findEncounter(e,"CURRENT PREGNANCY"))==null?void 0:o.observations;this.pregnancy.Gravida=(h=(g=(p=this.filterObs(t,"Gravida"))==null?void 0:p[0])==null?void 0:g.value_text)!=null?h:"",this.pregnancy.Stillbirths=(r=(i=(m=this.filterObs(t,"Stillbirths"))==null?void 0:m[0])==null?void 0:i.value_text)!=null?r:"",this.pregnancy["Abortions/Miscarriages"]=(D=(f=(v=this.filterObs(t,"Abortions/Miscarriages"))==null?void 0:v[0])==null?void 0:f.value_text)!=null?D:"",console.log("lets seeee",t),this.pregnancy.test=(T=await this.getConceptValues(this.filterObs(t,"past pregnancies complications"),"coded"))==null?void 0:T[0],this.pregnancy.surgeries=(y=await this.getConceptValues(this.filterObs(t,"Does the woman have any past surgeries done?"),"coded"))==null?void 0:y[0],this.pregnancy["Other notes"]=(C=(b=(O=this.filterObs(t,"Other notes"))==null?void 0:O[0])==null?void 0:b.value_text)!=null?C:"",this.pregnancy.allergies=(A=await this.getConceptValues(this.filterObs(t,"Does the woman have any allergies?"),"coded"))==null?void 0:A[0],this.pregnancy.chronic=(S=await this.getConceptValues(this.filterObs(t,"chronic conditions"),"coded"))==null?void 0:S[0],this.pregnancy.lnmp=(N=await this.getConceptValues(this.filterObs(t,"LNMP Known?"),"coded"))==null?void 0:N[0],this.pregnancy.Other=(P=(k=(_=this.filterObs(t,"Other notes"))==null?void 0:_[0])==null?void 0:k.value_text)!=null?P:"",this.pregnancy.Ultrasound=(B=await this.getConceptValues(this.filterObs(t,"Ultrasound done?"),"coded"))==null?void 0:B[0],this.pregnancy.Gestation=(M=await this.getConceptValues(this.filterObs(t,"Gestation"),"coded"))==null?void 0:M[0],this.pregnancy.gestationUsed=(R=await this.getConceptValues(this.filterObs(t,"Gestation age to be used"),"coded"))==null?void 0:R[0],this.pregnancy.tetanus=(H=await this.getConceptValues(this.filterObs(t,"The woman received tetanus doses for immunization?"),"coded"))==null?void 0:H[0],this.pregnancy.prescription=(F=await this.getConceptValues(this.filterObs(t,"Which medications is the woman currently prescribed?"),"coded"))==null?void 0:F[0],this.pregnancy.caffeine=(Y=await this.getConceptValues(this.filterObs(t,"Daily caffeine use"),"coded"))==null?void 0:Y[0],this.pregnancy.tobacco=(z=await this.getConceptValues(this.filterObs(t,"Recently quit tobacco products"),"coded"))==null?void 0:z[0],this.pregnancy.smoke=(K=await this.getConceptValues(this.filterObs(t,"Exposure to second hand smoke"),"coded"))==null?void 0:K[0]},async setTreatmentEncounters(e){},async setPresentingComplainsEncounters(e){var o;const t=(o=this.findEncounter(e,"PRESENTING COMPLAINTS"))==null?void 0:o.observations;this.presentingComplaint=await this.getConceptValues(this.filterObs(t,"Presenting complaint"),"coded")},async setLabOrderEncounters(e){var o;const t=(o=this.findEncounter(e,"LAB ORDERS"))==null?void 0:o.observations;this.labOrders=await this.getConceptValues(this.filterObs(t,"Primary diagnosis"),"coded")},filterObs(e,t){return e==null?void 0:e.filter(o=>o.concept.concept_names.some(p=>p.name===t))},async getConceptValues(e,t){if(e)return await Promise.all(e==null?void 0:e.map(async o=>await X.getConceptName(o.value_coded)))},openModal(){gt(It)},async setBMI(e,t){var o,p,g,h,m,i,r,v;(p=(o=this.patient)==null?void 0:o.personInformation)!=null&&p.gender&&((h=(g=this.patient)==null?void 0:g.personInformation)!=null&&h.birthdate)&&(this.BMI=await Q.getBMI(parseInt(e),parseInt(t),(i=(m=this.patient)==null?void 0:m.personInformation)==null?void 0:i.gender,W.calculateAge((v=(r=this.patient)==null?void 0:r.personInformation)==null?void 0:v.birthdate,W.sessionDate()))),this.updateBMI()},async updateBMI(){var t,o,p,g,h,m;const e=(o=(t=this.BMI)==null?void 0:t.color)!=null?o:[];this.vitalsWeightHeight.icon=Q.iconBMI(e),this.vitalsWeightHeight.backgroundColor=e[0],this.vitalsWeightHeight.textColor=e[1],this.vitalsWeightHeight.index="BMI "+((g=(p=this.BMI)==null?void 0:p.index)!=null?g:""),this.vitalsWeightHeight.value=(m=(h=this.BMI)==null?void 0:h.result)!=null?m:""}}}),Ct={class:"visitContent"},At={class:"visitData"},St={key:0},Nt={style:{"max-width":"1000px"}},_t={key:1,class:"noData"},kt={key:2},Pt={style:{"max-width":"300px"}},Bt={class:"position_content alert_content"},Mt={style:{"max-width":"300px"}},Rt={key:3,class:"noData"},Ht={key:4},Vt={style:{display:"flex","flex-wrap":"wrap"}},Lt={key:5,class:"noData"},Ut={key:6},Gt={style:{display:"flex","flex-wrap":"wrap"}},$t={key:7,class:"noData"},Wt={key:8},Ft={style:{display:"flex","flex-wrap":"wrap"}},Yt={key:9,class:"noData"},zt={key:10},Kt={key:11,class:"noData"},Qt={key:12},Jt={key:13,class:"noData"};function jt(e,t,o,p,g,h){const m=E("DynamicButton"),i=E("ion-col"),r=E("ion-row"),v=E("ion-icon");return d(),c("div",Ct,[s(r,null,{default:n(()=>[s(i,{size:"3"},{default:n(()=>[l("div",null,[(d(!0),c(V,null,L(e.visits,(f,D)=>(d(),w(m,{class:"",style:{"margin-bottom":"5px",width:"96%",height:"45px"},onClick:T=>e.loadSavedEncounters(f),key:D,name:e.covertDate(f),fill:e.visitDate!=f?"outline":"solid",color:e.visitDate==f?"success":""},null,8,["onClick","name","fill","color"]))),128))])]),_:1}),s(i,{offset:"0.1",size:"7"},{default:n(()=>{var f,D,T;return[l("div",At,[Object.values(e.pregnancy).every(y=>y!=="")?(d(),c("div",St,[l("div",Nt,[t[25]||(t[25]=l("div",{class:"heading"},"ANC PROFILE",-1)),l("div",null,[s(r,null,{default:n(()=>[s(i,{class:"contentTitle"},{default:n(()=>[...t[0]||(t[0]=[a("GRAVIDA",-1)])]),_:1}),s(i,{class:"contentTitle"},{default:n(()=>[...t[1]||(t[1]=[a("STILLBIRTHS",-1)])]),_:1}),s(i,{class:"contentTitle"},{default:n(()=>[...t[2]||(t[2]=[a("LIVE BIRTHS",-1)])]),_:1}),s(i,{class:"contentTitle"},{default:n(()=>[...t[3]||(t[3]=[a("PREGNANCY COMPLICATIONS",-1)])]),_:1})]),_:1}),s(r,null,{default:n(()=>[s(i,null,{default:n(()=>[a(u(e.pregnancy.Gravida),1)]),_:1}),s(i,null,{default:n(()=>[a(u(e.pregnancy.Stillbirths),1)]),_:1}),s(i,null,{default:n(()=>[a(u(e.pregnancy["Abortions/Miscarriages"]),1)]),_:1}),s(i,null,{default:n(()=>[a(u(e.pregnancy.test),1)]),_:1})]),_:1}),t[20]||(t[20]=l("br",null,null,-1)),s(r,null,{default:n(()=>[s(i,{class:"contentTitle"},{default:n(()=>[...t[4]||(t[4]=[a("PAST SURGERIES",-1)])]),_:1}),s(i,{class:"contentTitle"},{default:n(()=>[...t[5]||(t[5]=[a("OTHER SURGERIES",-1)])]),_:1}),s(i,{class:"contentTitle"},{default:n(()=>[...t[6]||(t[6]=[a("ALLERGIES",-1)])]),_:1}),s(i,{class:"contentTitle"},{default:n(()=>[...t[7]||(t[7]=[a("CHRONIC CONDITIONS",-1)])]),_:1})]),_:1}),s(r,null,{default:n(()=>[s(i,null,{default:n(()=>[a(u(e.pregnancy.surgeries),1)]),_:1}),s(i,null,{default:n(()=>[a(u(e.pregnancy["Other notes"]),1)]),_:1}),s(i,null,{default:n(()=>[a(u(e.pregnancy.allergies),1)]),_:1}),s(i,null,{default:n(()=>[a(u(e.pregnancy.chronic),1)]),_:1})]),_:1}),t[21]||(t[21]=l("br",null,null,-1)),s(r,null,{default:n(()=>[s(i,{class:"contentTitle"},{default:n(()=>[...t[8]||(t[8]=[a("LNMP",-1)])]),_:1}),s(i,{class:"contentTitle"},{default:n(()=>[...t[9]||(t[9]=[a("LIVE BIRTHS",-1)])]),_:1}),s(i,{class:"contentTitle"},{default:n(()=>[...t[10]||(t[10]=[a("PARITY",-1)])]),_:1}),s(i,{class:"contentTitle"},{default:n(()=>[...t[11]||(t[11]=[a("OTHER ALLERGIES",-1)])]),_:1})]),_:1}),s(r,null,{default:n(()=>[s(i,null,{default:n(()=>[a(u(e.pregnancy.lnmp),1)]),_:1}),s(i,null,{default:n(()=>[a(u(e.pregnancy.LiveBirths),1)]),_:1}),s(i,null,{default:n(()=>[a(u(e.pregnancy.Parity),1)]),_:1}),s(i,null,{default:n(()=>[a(u(e.pregnancy.Other),1)]),_:1})]),_:1}),t[22]||(t[22]=l("br",null,null,-1)),s(r,null,{default:n(()=>[s(i,{class:"contentTitle"},{default:n(()=>[...t[12]||(t[12]=[a("ULTRASOUND DONE",-1)])]),_:1}),s(i,{class:"contentTitle"},{default:n(()=>[...t[13]||(t[13]=[a("GESTATION AGE BY PALPATION",-1)])]),_:1}),s(i,{class:"contentTitle"},{default:n(()=>[...t[14]||(t[14]=[a("GESTATION USED",-1)])]),_:1}),s(i,{class:"contentTitle"},{default:n(()=>[...t[15]||(t[15]=[a("TETANUS DOSES",-1)])]),_:1})]),_:1}),s(r,null,{default:n(()=>[s(i,null,{default:n(()=>[a(u(e.pregnancy.Ultrasound),1)]),_:1}),s(i,null,{default:n(()=>[a(u(e.pregnancy.Gestation),1)]),_:1}),s(i,null,{default:n(()=>[a(u(e.pregnancy.gestationUsed),1)]),_:1}),s(i,null,{default:n(()=>[a(u(e.pregnancy.tetanus),1)]),_:1})]),_:1}),t[23]||(t[23]=l("br",null,null,-1)),s(r,null,{default:n(()=>[s(i,{class:"contentTitle"},{default:n(()=>[...t[16]||(t[16]=[a("MEDICATIONS CURRENTLY PRESCRIBED",-1)])]),_:1}),s(i,{class:"contentTitle"},{default:n(()=>[...t[17]||(t[17]=[a("DAILY CAFFEINE INTAKE",-1)])]),_:1}),s(i,{class:"contentTitle"},{default:n(()=>[...t[18]||(t[18]=[a("RECENTLY QUIT TOBACCO PRODUCTS",-1)])]),_:1}),s(i,{class:"contentTitle"},{default:n(()=>[...t[19]||(t[19]=[a("EXPOSURE TO SECOND HAND SMOKE",-1)])]),_:1})]),_:1}),s(r,null,{default:n(()=>[s(i,null,{default:n(()=>[a(u(e.pregnancy.prescription),1)]),_:1}),s(i,null,{default:n(()=>[a(u(e.pregnancy.caffeine),1)]),_:1}),s(i,null,{default:n(()=>[a(u(e.pregnancy.tobacco),1)]),_:1}),s(i,null,{default:n(()=>[a(u(e.pregnancy.smoke),1)]),_:1})]),_:1}),t[24]||(t[24]=l("br",null,null,-1)),s(r),s(r)])])])):(d(),c("div",_t,"No Profile data was found")),Object.values(e.vitals).every(y=>y!=="")?(d(),c("div",kt,[l("div",Pt,[t[28]||(t[28]=l("div",{class:"heading",style:{"margin-top":"0px"}},"Anthropometric Measurements",-1)),l("div",null,[s(r,null,{default:n(()=>[e.vitals.weight?(d(),w(i,{key:0,class:"contentTitle"},{default:n(()=>[...t[26]||(t[26]=[a("Weight",-1)])]),_:1})):I("",!0),e.vitals.height?(d(),w(i,{key:1,class:"contentTitle"},{default:n(()=>[...t[27]||(t[27]=[a("Height",-1)])]),_:1})):I("",!0)]),_:1}),s(r,null,{default:n(()=>[e.vitals.weight?(d(),w(i,{key:0},{default:n(()=>[a(u(e.vitals.weight)+" kg",1)]),_:1})):I("",!0),e.vitals.height?(d(),w(i,{key:1},{default:n(()=>[a(u(e.vitals.height)+" cm",1)]),_:1})):I("",!0)]),_:1}),e.vitals.weight&&e.vitals.height?(d(),w(r,{key:0},{default:n(()=>[l("span",null,[e.vitalsWeightHeight.value?(d(),w(r,{key:0,style:$("border-radius: 5px;  margin-top:10px; margin-bottom:10px;background-color:"+e.vitalsWeightHeight.backgroundColor)},{default:n(()=>[l("span",Bt,[s(v,{slot:"start",icon:e.vitalsWeightHeight.icon,"aria-hidden":"true"},null,8,["icon"]),l("span",{style:$("color:"+e.vitalsWeightHeight.textColor+"; font-weight:600; margin: 0px 20px;")},u(e.vitalsWeightHeight.index),5),l("span",{style:$("color:"+e.vitalsWeightHeight.textColor+";")},u(e.vitalsWeightHeight.value),5)])]),_:1},8,["style"])):I("",!0)])]),_:1})):I("",!0)])]),l("div",Mt,[t[35]||(t[35]=l("div",{class:"heading"},"Vital Signs",-1)),l("div",null,[s(r,null,{default:n(()=>[s(i,{class:"contentTitle"},{default:n(()=>[...t[29]||(t[29]=[a("Systolic pressure",-1)])]),_:1}),s(i,{class:"contentTitle"},{default:n(()=>[...t[30]||(t[30]=[a("Diastolic pressure",-1)])]),_:1})]),_:1}),s(r,null,{default:n(()=>[s(i,null,{default:n(()=>[a(u(e.vitals.systolic)+" mmHg",1)]),_:1}),s(i,null,{default:n(()=>[a(u(e.vitals.diastolic)+" mmHg",1)]),_:1})]),_:1}),s(r,null,{default:n(()=>[s(i,{class:"contentTitle"},{default:n(()=>[...t[31]||(t[31]=[a("Temperature",-1)])]),_:1}),s(i,{class:"contentTitle"},{default:n(()=>[...t[32]||(t[32]=[a("Oxygen Saturation",-1)])]),_:1})]),_:1}),s(r,null,{default:n(()=>[s(i,null,{default:n(()=>[a(u(e.vitals.temperature)+" C",1)]),_:1}),s(i,null,{default:n(()=>[a(u(e.vitals.SAO2)+" %",1)]),_:1})]),_:1}),s(r,null,{default:n(()=>[s(i,{class:"contentTitle"},{default:n(()=>[...t[33]||(t[33]=[a("Pulse Rate",-1)])]),_:1}),s(i,{class:"contentTitle"},{default:n(()=>[...t[34]||(t[34]=[a("Respiratory Rate",-1)])]),_:1})]),_:1}),s(r,null,{default:n(()=>[s(i,null,{default:n(()=>[a(u(e.vitals.pulse)+" BMP",1)]),_:1}),s(i,null,{default:n(()=>[a(u(e.vitals.respirationRate)+" BMP",1)]),_:1})]),_:1})])])])):(d(),c("div",Rt,"No Vitals were recorded")),((f=e.presentingComplaint)==null?void 0:f.length)>0?(d(),c("div",Ht,[t[36]||(t[36]=l("div",{class:"heading"},"Complaints Presented",-1)),l("div",Vt,[(d(!0),c(V,null,L(e.presentingComplaint,(y,O)=>(d(),c("div",{class:"spanContent",key:O},u(y),1))),128))])])):(d(),c("div",Lt,"No complaints were recorded")),((D=e.primaryDiagnosis)==null?void 0:D.length)>0?(d(),c("div",Ut,[t[37]||(t[37]=l("div",{class:"heading"},"Primary Diagnoses",-1)),l("div",Gt,[(d(!0),c(V,null,L(e.primaryDiagnosis,(y,O)=>(d(),c("div",{class:"spanContent",key:O},u(y),1))),128))])])):(d(),c("div",$t,"No primary diagnoses were recorded")),((T=e.secondaryDiagnosis)==null?void 0:T.length)>0?(d(),c("div",Wt,[t[38]||(t[38]=l("div",{class:"heading"},"Secondary Diagnoses",-1)),l("div",Ft,[(d(!0),c(V,null,L(e.secondaryDiagnosis,(y,O)=>(d(),c("div",{class:"spanContent",key:O},u(y),1))),128))])])):(d(),c("div",Yt,"No secondary diagnoses were recorded")),e.drugs?(d(),c("div",zt,[...t[39]||(t[39]=[l("div",{class:"heading"},"Treatment Plan",-1),l("div",null,null,-1)])])):(d(),c("div",Kt,"No Treatment were recorded")),e.nextAppointMent?(d(),c("div",Qt,[...t[40]||(t[40]=[l("span",{class:"heading"},"Next Appointment:",-1),l("span",{class:"nextDate"},"06 September 2024",-1)])])):(d(),c("div",Jt,"No next appointment was set"))])]}),_:1})]),_:1})])}const qt=tt(bt,[["render",jt],["__scopeId","data-v-e5840482"]]),Xt=J({name:"TB screening",components:{FeatusModal:Et,DynamicButton:q,IonContent:j,IonPage:lt,Toolbar:ft,DemographicBar:vt,LandingPage:Ot,NextAppointmentModal:Dt,AppointmentsHistory:qt},props:{backBtn:{type:String,default:"Back to profile"},backUrl:{type:String,default:""},contact:{type:String,default:""}},data(){return{isModalOpen:!1,visitDate:[],appointmentDate:"",visits:[],dateOfAppointment:""}},setup(){return{checkmark:ct,pulseOutline:pt}},mounted(){this.handleAppointment()},computed:{...U(Tt,["nextAppointmentDate"]),...U(x,["patient"])},methods:{calendar(){return dt},eye(){return ut},chevronBackOutline(){return rt},openBackController(){this.$router.push("/ANCHome")},async handleAppointment(){const e=await yt.getFirstObsValue(this.patient.patientID,"Appointment date","value_text");this.dateOfAppointment=e},async updateData(){const e=new G;this.visits=await G.getPatientVisits(e.getID(),!1),await this.loadSavedEncounters(this.visits[0])},async loadSavedEncounters(e){this.visitDate=e;const t=await Z.getEncounters(this.patient.patientID,{date:e});await this.setNextAppointmentEncounter(t)},findEncounter(e,t){return e.find(o=>o.type&&o.type.name===t)},async setNextAppointmentEncounter(e){var o,p,g,h;const t=(o=this.findEncounter(e,"APPOINTMENT"))==null?void 0:o.observations;console.log("Observations:",t),this.appointmentDate["Appointment date"]=(h=(g=(p=this.filterObs(t,"Appointment date"))==null?void 0:p[0])==null?void 0:g.value_text)!=null?h:"",console.log("Appointment Date:",this.appointmentDate["Appointment date"])},filterObs(e,t){return e==null?void 0:e.filter(o=>o.concept.concept_names.some(p=>p.name===t))},async getConceptValues(e,t){if(e)return await Promise.all(e==null?void 0:e.map(async o=>await X.getConceptName(o.value_coded)))}}}),Zt={class:"container"},xt={class:"back_profile"},te={class:"AppointmentDate"},ee={style:{color:"#0b5ed7"}};function ne(e,t,o,p,g,h){const m=E("Toolbar"),i=E("DemographicBar"),r=E("DynamicButton"),v=E("AppointmentsHistory"),f=E("ion-content"),D=E("ion-page");return d(),w(D,null,{default:n(()=>[s(m),s(f,{fullscreen:!0},{default:n(()=>[s(i),l("div",Zt,[l("div",xt,[s(r,{name:"Back to home",iconSlot:"start",fill:"clear",icon:e.chevronBackOutline(),onClick:t[0]||(t[0]=T=>e.openBackController())},null,8,["icon"]),l("div",te,[t[1]||(t[1]=l("span",{style:{"font-size":"14px"}},"Next Appt. Date: ",-1)),l("b",ee,u(e.dateOfAppointment||"Not scheduled"),1)])]),s(v)])]),_:1})]),_:1})}const ge=tt(Xt,[["render",ne],["__scopeId","data-v-4e9654e5"]]);export{ge as default};
