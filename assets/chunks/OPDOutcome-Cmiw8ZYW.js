import{d as oe,b2 as we,r as s,c as z,a as _e,H as ye,e as w,f as c,l as t,m as y,O as x,J as l,k as r,u as i,$ as ne,Q as B,F as Z,aw as Ne,ez as za,eA as Ka,eB as Ja,eC as Xa,aH as ya,w as pe,ay as va,bW as Qa,P as ue,aP as Za,K as P,p as ta,bu as et,ai as at,L as Ve,eD as na,eE as oa,bl as Ye,bg as sa,eF as ia,eG as la,da as ra,eH as ca,eI as da,eJ as ua,df as ma,bV as tt,aA as nt,c1 as ot,n as de,X as re,bz as st,am as Ke,al as ge,N as ie,bt as le,a5 as ce,bm as Ee,b3 as it,bo as ba,a3 as ga,b$ as lt,bw as rt,ak as _a,a6 as j,c7 as pa,bx as ct,dt,ea as ha}from"./vendor-CzFJ4KTZ.js";import{bp as ut,l as K,aD as Me,aC as mt,b4 as pt,aE as Je,J as ke,M as ht,S as Fe,ag as J,aU as X,t as me,G as Re,_ as Ae,u as Oe,H as $e,af as fe,aV as Ca,bU as ft,P as Da,aM as Te,m as yt,aT as vt,K as bt,B as Ce,ay as fa,ap as We,at as je,aO as gt,as as _t}from"../index-DijUtNzv.js";import{e as Ct,a as Dt,m as kt,b as wt,v as At,c as Ot,_ as xt}from"./LevelOfConsciousness.vue_vue_type_script_setup_true_lang-jgdfHc09.js";import{p as Pt}from"./previousComplaints-BX1EKyI-.js";import{P as St}from"./patient_complaints_service-CgJoTn1h.js";import{D as Tt}from"./DashBox-CPN1YaPA.js";import{B as Nt}from"./BasicForm-BergQQ6P.js";import{f as It}from"./formatServerData-BJOn5xYk.js";import{A as Et,D as Ft,a as Ht}from"./NextAppointment-CpFSuvQZ.js";import{a as Bt,b as Mt}from"./drug_prescription_service-DduL6qo9.js";import{P as Vt}from"./nonPharmaTherapyStore-CAggSeGZ.js";import{l as De}from"./lodash-NJiRuGo9.js";import{_ as ze,D as Yt,A as $t,R as Rt,a as Ut,b as Lt}from"./Outcome-CDfavDPL.js";const qt={key:0},Gt={style:{"align-content":"center"}},Wt={class:"ion-padding",slot:"content"},jt=oe({__name:"PresentingComplaints",setup(d,{expose:m}){const p=ut(),{presentingComplaints:_}=we(p),A=s(K),S=s(!0),E=s(!1),T=s(!1),n=s(!0),e=s(!1),a=s([]),f=s([]),H=s(),u=z(()=>[{componentType:"multiSelectInputField",header:"Presenting Complaints",name:"PresentingComplaints",trackBy:"concept_id",icon:K.search,hideSelected:!0,validation:O=>$(O==null?void 0:O.name,a.value)?"Presenting complaint already added":Me.required(O),options:f.value,grid:{s:"6"}},{componentType:"inputField",header:"Duration",name:"duration",icon:K.time,validation:O=>Me.isNotEmptyandNumber(O),grid:{s:"6"},unitOptions:[{label:"Hours",value:"Hours"},{label:"Days",value:"Days"},{label:"Weeks",value:"Weeks"},{label:"Months",value:"Months"},{label:"Years",value:"Years"}],unitValidation:O=>!O||O===""?"Please select a unit.":null},{componentType:"inputField",header:"Specify the presenting complaint(s)",name:"Other (specify)",icon:K.editPen,validation:O=>$(O,a.value)?"Presenting complaint already added":Me.required(O),condition:O=>{var g;return((g=O==null?void 0:O.PresentingComplaints)==null?void 0:g.name)==="Other"}},{componentType:"Alert",condition:O=>{var g;return Me.required((g=O==null?void 0:O.PresentingComplaints)==null?void 0:g.name)!=null},backgroundColor:"lightyellow",textColor:"black",value:"Please search thoroughly for the complaint. If it is not listed, search and select the 'Other' option to specify the complaint.",name:"noMatchAlert"}]),{formRef:v}=mt(),R=async()=>{f.value=await St.getComplaintsList("Presenting complaint"),ht(_.value,"PresentingComplaints","multiSelectData",f.value)},N=()=>{S.value=!1,n.value=!1,T.value=!0},F=async()=>{var o,D;const O=(o=v.value)==null?void 0:o.getFormValues();((D=v.value)==null?void 0:D.validateForm())==null&&(M(O),T.value=!1,n.value=!0)},M=O=>{var q;const g=O.duration+" "+O.duration_unit,o=O.PresentingComplaints,D=o.name==="Other"?O["Other (specify)"]:o.name;a.value.push({actionBtn:!0,btn:["delete"],name:D,concept_id:o.concept_id,duration:o.duration,durationUnits:o.duration_unit,display:[D,g],data:[{concept_id:8578,value_coded:o.concept_id,obs_datetime:Fe.getSessionDate(),child:[{concept_id:o.concept_id,value_text:g,obs_datetime:Fe.getSessionDate()}]}]}),(q=v.value)==null||q.resetForm(),e.value=!0,L()},L=()=>{const O=["Cough","Convulsions"];E.value=a.value.some(g=>O.includes(g.name))},$=(O,g)=>g.some(o=>o.name===O),W=O=>{a.value=a.value.filter(g=>g.display[0]!==O.name)},V=async()=>{const O=await J.getObsByEncounterIdAndDate(X.PRESENTING_COMPLAINTS),g=a.value.flatMap(o=>o.data);return g.length<=0&&O.length<=0?(me("Presenting complaints is required"),!1):(g.length<=0||(await J.addObsToEncounterPatient(g,X.PRESENTING_COMPLAINTS),Re("Presenting complaints saved successful"),a.value=[]),!0)};return _e(async()=>{await R()}),m({onSubmit:V}),(O,g)=>{const o=ye("ion-row"),D=ye("ion-label"),q=ye("ion-accordion"),ee=ye("ion-accordion-group");return c(),w(Z,null,[t(Tt,{status:S.value,content:"No presenting complaints added"},null,8,["status"]),e.value?(c(),w("span",qt,[t(pt,{listData:a.value,"onClicked:delete":W},null,8,["listData"])])):y("",!0),T.value?(c(),x(o,{key:1},{default:l(()=>[t(Je,{formData:u.value,ref_key:"formRef",ref:v},null,8,["formData"]),r("div",Gt,[t(ke,{fill:"clear",icon:A.value.plus,iconSlot:"icon-only","onClicked:btn":g[0]||(g[0]=he=>F()),name:"Save"},null,8,["icon"])])]),_:1})):y("",!0),n.value?(c(),x(o,{key:2,style:{"margin-top":"10px"}},{default:l(()=>[t(ke,{fill:"clear",icon:A.value.plus,iconSlot:"icon-only","onClicked:btn":g[1]||(g[1]=he=>N()),name:"Add new presenting complaints"},null,8,["icon"])]),_:1})):y("",!0),t(o,null,{default:l(()=>[t(ee,{ref_key:"accordionGroup",ref:H,class:"previousView"},{default:l(()=>[t(q,{value:"first","toggle-icon-slot":"start",style:{"border-radius":"10px","background-color":"#fff"}},{default:l(()=>[t(i(ne),{slot:"header",color:"light"},{default:l(()=>[t(D,{class:"previousLabel"},{default:l(()=>[...g[2]||(g[2]=[B("Previous presenting complaints",-1)])]),_:1})]),_:1}),r("div",Wt,[t(Pt)])]),_:1})]),_:1},512)]),_:1})],64)}}}),zt=Ae(jt,[["__scopeId","data-v-44affb13"]]),Kt={class:"visit-section"},Jt={class:"section-header"},Xt={key:0,class:"no-data"},Qt={key:1,class:"allergy-accordion"},Zt=["onClick"],en={class:"acc-left"},an={class:"acc-title"},tn={class:"acc-count"},nn={key:0,class:"accordion-body"},on={class:"item-label"},sn={class:"item-value"},ln=oe({__name:"AllergiesListing",setup(d){const m=Oe(),{patient:p}=we(m),_=s({}),A={antiviral:/abacavir|lamivudine|lopinavir|ritonavir|zidovudine|efavirenz|tenofovir/i,antibiotic:/penicillin|amoxicillin|cephalexin|azithromycin|ciprofloxacin|doxycycline/i,analgesic:/aspirin|ibuprofen|acetaminophen|morphine|codeine|tramadol/i,cardiac:/metoprolol|lisinopril|amlodipine|atorvastatin|warfarin/i,activated:/activated\s+charcoal/i},S={985:{name:"Other",icon:Ne,severity:"danger"},7759:{name:"Location/Environmental",icon:ya,severity:"info"},7579:{name:"Medical Condition",icon:Xa,severity:"warning"},drug:{name:"Drug Allergy",icon:Ne,severity:"danger"},food:{name:"Food Allergy",icon:Ja,severity:"danger"},environmental:{name:"Environmental",icon:Ka,severity:"warning"},contact:{name:"Contact Allergy",icon:za,severity:"warning"},unknown:{name:"Drug Allergy",icon:Ne,severity:"danger"}},E=u=>{const v=u.toLowerCase();return A.antiviral.test(v)?{type:"Antiviral Medication",icon:"shield-outline"}:A.antibiotic.test(v)?{type:"Antibiotic",icon:"bandage-outline"}:A.analgesic.test(v)?{type:"Pain Medication",icon:"fitness-outline"}:A.cardiac.test(v)?{type:"Cardiac Medication",icon:"heart-outline"}:A.activated.test(v)?{type:"Detoxification Agent",icon:"flask-outline"}:{type:"Medication",icon:"medical-outline"}},T=z(()=>{var v,R,N,F,M,L;return[...(N=(R=(v=p.value)==null?void 0:v.allergies)==null?void 0:R.saved)!=null?N:[],...(L=(M=(F=p.value)==null?void 0:F.allergies)==null?void 0:M.unsaved)!=null?L:[]].length>0}),n=z(()=>{var N,F,M,L,$,W;const u=(M=(F=(N=p.value)==null?void 0:N.allergies)==null?void 0:F.saved)!=null?M:[],v=(W=($=(L=p.value)==null?void 0:L.allergies)==null?void 0:$.unsaved)!=null?W:[],R=[...u,...v];return R.length===0?[]:R.map(V=>{var ee;const O=((ee=V.concept_id)==null?void 0:ee.toString())||"unknown",g=S[O]||S.unknown;let o="Unknown",D=null;return V.value_text&&V.value_text!=="Unknown"&&V.value_text!==""?(o=V.value_text,(O==="985"||O==="985###")&&(D=E(V.value_text))):V.concept_name&&(o=V.concept_name),{...D?{...g,name:D.type,icon:D.icon}:g,displayValue:o,conceptId:V.concept_id,date:V.obs_datetime||V.encounter_datetime,providerId:V.provider_id,locationId:V.location_id,encounterId:V.encounter_id,isDrug:O==="985",raw:V}})}),e=z(()=>{const u={};n.value.forEach(N=>{const F=N.date?f(N.date):"Unknown Date";u[F]||(u[F]=[]),u[F].push(N)});const v={};return Object.keys(u).sort((N,F)=>N==="Unknown Date"?1:F==="Unknown Date"?-1:new Date(F).getTime()-new Date(N).getTime()).forEach(N=>{v[N]=u[N]}),v}),a=u=>{_.value[u]=!_.value[u]},f=u=>{if(!u)return"Unknown Date";try{return new Date(u).toISOString().split("T")[0]}catch(v){return"Unknown Date"}},H=u=>{if(u==="Unknown Date")return"Unknown Date";try{const v=new Date(u),R=$e.sessionDate(),N=new Date(R),F=new Date(N);F.setDate(F.getDate()-1);const M=v.toDateString(),L=N.toDateString(),$=F.toDateString();return M===L?"Today":M===$?"Yesterday":v.toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})}catch(v){return u}};return pe(()=>e.value,u=>{const v=Object.keys(u);v.length>0&&(_.value[v[0]]=!0)},{immediate:!0}),pe(()=>{var u;return(u=p.value)==null?void 0:u.allergies},u=>{console.log("Allergies updated:",u)},{deep:!0}),_e(()=>{var u;console.log("Allergies component mounted",(u=p.value)==null?void 0:u.allergies)}),(u,v)=>{const R=ye("ion-icon");return c(),w("div",Kt,[r("div",Jt,[t(R,{icon:i(va),class:"section-icon"},null,8,["icon"]),v[0]||(v[0]=r("h3",null,"Allergies",-1))]),T.value?(c(),w("div",Qt,[(c(!0),w(Z,null,ue(e.value,(N,F)=>(c(),w("div",{key:F,class:"accordion-section"},[r("div",{class:ta(["accordion-header",{open:_.value[F]}]),onClick:M=>a(F)},[r("div",en,[t(R,{icon:i(Za),class:"acc-icon"},null,8,["icon"]),r("span",an,P(H(F)),1),r("span",tn,"("+P(N.length)+")",1)]),t(R,{icon:i(et),class:ta(["chevron",{rotate:_.value[F]}])},null,8,["icon","class"])],10,Zt),_.value[F]?(c(),w("div",nn,[(c(!0),w(Z,null,ue(N,(M,L)=>(c(),w("div",{class:"allergy-item",key:L},[r("span",on,P(M.name)+":",1),r("span",sn,P(M.displayValue),1)]))),128))])):y("",!0)]))),128))])):(c(),w("div",Xt,[t(R,{icon:i(Qa),class:"no-data-icon"},null,8,["icon"]),v[1]||(v[1]=r("p",null,"No known allergies",-1))]))])}}}),ka=Ae(ln,[["__scopeId","data-v-fa3ff98b"]]),rn=oe({name:"VisitHistory",components:{AllergiesListing:ka,IonIcon:Ve},setup(){const d=Ca();return{selectedAllergiesList2:z(()=>d.selectedMedicalAllergiesList),alertCircleOutline:va,documentTextOutline:ot,femaleOutline:nt,medicalOutline:Ne,warningOutline:tt,bodyOutline:na,eyeOutline:ma,nutritionOutline:ua,fitnessOutline:la,pulseOutline:sa,earOutline:da,happyOutline:ca,manOutline:ra,moveOutline:ia,addOutline:Ye,scanOutline:oa}},data(){return{presentingComplaintsWithDuration:[],pastMedicalHistory:[],levelOfConsciousness:{eyeResponse:null,verbalResponse:null,motorResponse:null},pregnancy:{patientPregnant:null,breastFeeding:null},physicalExamCategories:{Eyes:{icon:ma,abnormalities:[],normal:!1},Mouth:{icon:ua,abnormalities:[],normal:!1},Ears:{icon:da,abnormalities:[],normal:!1},Face:{icon:ca,abnormalities:[],normal:!1},Neck:{icon:ra,abnormalities:[],normal:!1},Chest:{icon:la,abnormalities:[],normal:!1},"Chest Movement":{icon:ia,abnormalities:[],normal:!1},"Heart Sounds":{icon:sa,abnormalities:[],normal:!1},"Breath Sounds":{icon:Ye,abnormalities:[],normal:!1},"Added Breath Sounds":{icon:Ye,abnormalities:[],normal:!1},"Abdominal Inspection":{icon:oa,abnormalities:[],normal:!1},"Genital Examination":{icon:na,abnormalities:[],normal:!1}}}},computed:{...at(Oe,["patient"]),hasLevelOfConsciousness(){return this.levelOfConsciousness.eyeResponse||this.levelOfConsciousness.verbalResponse||this.levelOfConsciousness.motorResponse},hasPresentingComplaints(){var d;return((d=this.presentingComplaintsWithDuration)==null?void 0:d.length)>0},hasPregnancyData(){return this.pregnancy.patientPregnant||this.pregnancy.breastFeeding},hasPastMedicalHistory(){var d;return((d=this.uniquePastMedicalHistory)==null?void 0:d.length)>0},hasAllergies(){var d,m;return((m=(d=this.selectedAllergiesList2)==null?void 0:d.filter(p=>p.selected))==null?void 0:m.length)>0},hasPhysicalExam(){return Object.values(this.physicalExamCategories).some(d=>d.abnormalities.length>0||d.normal)},uniquePastMedicalHistory(){return[...new Set(this.pastMedicalHistory)]},uniquePresentingComplaints(){return[...new Set(this.presentingComplaintsWithDuration.map(d=>d.name))]},isMinor(){var d,m;return $e.getAgeInYears((m=(d=this.patient)==null?void 0:d.personInformation)==null?void 0:m.birthdate)<18},gcsScore(){var T,n,e;if(!this.hasLevelOfConsciousness)return null;const d=this.levelOfConsciousness.eyeResponse,m=this.levelOfConsciousness.motorResponse,p=this.levelOfConsciousness.verbalResponse,_=d&&(T=(this.isMinor?Ct:Dt)[d])!=null?T:0,A=m&&(n=(this.isMinor?kt:wt)[m])!=null?n:0,S=p&&(e=(this.isMinor?At:Ot)[p])!=null?e:0,E=_+A+S;return"(M ".concat(A," V ").concat(S," E ").concat(_,") ").concat(E,"/").concat(this.isMinor?5:15)}},methods:{async updateData(){var d;(d=this.patient)!=null&&d.patientID&&(await this.loadPresentingComplaints(),await this.loadPastMedicalHistory(),await this.loadLevelOfConsciousness(),await this.loadPregnancyStatus(),await this.loadPhysicalExam())},async loadPresentingComplaints(){try{const d=await J.getObsByEncounterIdAndDate(X.PRESENTING_COMPLAINTS);this.presentingComplaintsWithDuration=[];const m=d.filter(p=>p.concept_id===8578);for(const p of m){const _=await fe.getConceptName(p.value_coded);let A="Duration not specified";p.child&&p.child.length>0&&(A=p.child[0].value_text||"Duration not specified"),this.presentingComplaintsWithDuration.push({name:_,duration:A})}}catch(d){console.error("Error loading presenting complaints:",d)}},async loadPastMedicalHistory(){try{const m=(await J.getObsByEncounterIdAndDate(X.PAST_MEDICAL_HISTORY)).filter(p=>p.concept_name==="Chronic disease");this.pastMedicalHistory=await Promise.all(m.map(async p=>await fe.getConceptName(p.value_coded)))}catch(d){console.error("Error loading past medical history:",d)}},async loadLevelOfConsciousness(){try{const d=await J.getObsByEncounterIdAndDate(X.ASSESSMENT);if(d&&Array.isArray(d)){const m=d.find(A=>A.concept_name==="Eye opening response");this.levelOfConsciousness.eyeResponse=m!=null&&m.value_coded?await fe.getConceptName(m.value_coded):null;const p=d.find(A=>A.concept_name==="Best verbal response");this.levelOfConsciousness.verbalResponse=p!=null&&p.value_coded?await fe.getConceptName(p.value_coded):null;const _=d.find(A=>A.concept_name==="Best motor response");this.levelOfConsciousness.motorResponse=_!=null&&_.value_coded?await fe.getConceptName(_.value_coded):null}}catch(d){console.error("Error loading level of consciousness:",d)}},async loadPregnancyStatus(){try{const d=await J.getObsByEncounterIdAndDate(X.PREGNANCY_STATUS);if(d&&Array.isArray(d)){const m=d.find(_=>_.concept_name==="Patient pregnant");this.pregnancy.patientPregnant=m!=null&&m.value_coded?await fe.getConceptName(m.value_coded):null;const p=d.find(_=>_.concept_name==="Is patient breast feeding?");this.pregnancy.breastFeeding=p!=null&&p.value_coded?await fe.getConceptName(p.value_coded):null}}catch(d){console.error("Error loading pregnancy status:",d)}},async loadPhysicalExam(){try{const d=await J.getObsByEncounterIdAndDate(X.PHYSICAL_EXAMINATION);Object.values(this.physicalExamCategories).forEach(m=>{m.abnormalities=[],m.normal=!1});for(const m of d)if(m.concept_id){if(m.value_coded===1065)switch(m.concept_id){case 10837:this.physicalExamCategories.Eyes.normal=!0;break;case 10842:this.physicalExamCategories.Mouth.normal=!0;break;case 11028:this.physicalExamCategories.Ears.normal=!0;break;case 10854:this.physicalExamCategories.Face.normal=!0;break;case 10858:this.physicalExamCategories.Neck.normal=!0;break;case 10894:this.physicalExamCategories.Chest.normal=!0;break;case 10903:this.physicalExamCategories["Heart Sounds"].normal=!0;break;case 10909:this.physicalExamCategories["Breath Sounds"].normal=!0;break;case 10919:case 10928:case 10939:this.physicalExamCategories["Abdominal Inspection"].normal=!0;break;case 10803:case 10946:this.physicalExamCategories["Genital Examination"].normal=!0;break}if(m.value_coded){const p=await fe.getConceptName(m.value_coded);switch(m.concept_id){case 10838:this.physicalExamCategories.Eyes.abnormalities.push(p);break;case 10843:this.physicalExamCategories.Mouth.abnormalities.push(p);break;case 10852:this.physicalExamCategories.Ears.abnormalities.push(p);break;case 10855:this.physicalExamCategories.Face.abnormalities.push(p);break;case 10859:this.physicalExamCategories.Neck.abnormalities.push(p);break;case 10897:this.physicalExamCategories.Chest.abnormalities.push(p);break;case 10904:this.physicalExamCategories["Heart Sounds"].abnormalities.push(p);break;case 10910:this.physicalExamCategories["Breath Sounds"].abnormalities.push(p);break;case 10920:case 10929:case 10939:this.physicalExamCategories["Abdominal Inspection"].abnormalities.push(p);break;case 10797:case 10804:case 10947:this.physicalExamCategories["Genital Examination"].abnormalities.push(p);break}}}}catch(d){console.error("Error loading physical exam:",d)}}},watch:{patient:{async handler(){await this.updateData()},deep:!0}},async mounted(){await this.updateData()}}),cn={class:"visit-container"},dn={class:"visit-sections"},un={key:0,class:"visit-section"},mn={class:"section-header"},pn={class:"section-content"},hn={key:0,class:"info-item"},fn={class:"info-value"},yn={key:1,class:"info-item"},vn={class:"info-value"},bn={key:2,class:"info-item"},gn={class:"info-value"},_n={key:3,class:"info-item"},Cn={class:"info-value highlight"},Dn={key:1,class:"visit-section"},kn={class:"section-header"},wn={class:"complaints-container"},An={class:"complaint-name"},On={class:"complaint-duration"},xn={key:2,class:"visit-section"},Pn={class:"section-header"},Sn={class:"section-content"},Tn={key:0,class:"info-item"},Nn={class:"info-value highlight"},In={key:1,class:"info-item"},En={class:"info-value highlight"},Fn={key:3,class:"visit-section"},Hn={class:"section-header"},Bn={class:"tags-container"},Mn={class:"allergies-section"},Vn={class:"allergies-container"},Yn={key:4,class:"visit-section"},$n={class:"section-header"},Rn={class:"exam-section"},Un={key:0,class:"exam-category"},Ln={class:"exam-category-header"},qn={class:"exam-items"},Gn={key:1,class:"exam-item normal"};function Wn(d,m,p,_,A,S){const E=ye("ion-icon"),T=ye("AllergiesListing");return c(),w("div",cn,[m[11]||(m[11]=r("div",{class:"visit-header"},[r("h5",null,"Patient's Clinical Assessment Summary")],-1)),r("div",dn,[d.hasLevelOfConsciousness?(c(),w("div",un,[r("div",mn,[t(E,{icon:d.alertCircleOutline,class:"section-icon"},null,8,["icon"]),m[0]||(m[0]=r("h3",null,"Level of Consciousness",-1))]),r("div",pn,[d.levelOfConsciousness.eyeResponse?(c(),w("div",hn,[m[1]||(m[1]=r("span",{class:"info-label"},"Eye Response:",-1)),r("span",fn,P(d.levelOfConsciousness.eyeResponse),1)])):y("",!0),d.levelOfConsciousness.verbalResponse?(c(),w("div",yn,[m[2]||(m[2]=r("span",{class:"info-label"},"Verbal Response:",-1)),r("span",vn,P(d.levelOfConsciousness.verbalResponse),1)])):y("",!0),d.levelOfConsciousness.motorResponse?(c(),w("div",bn,[m[3]||(m[3]=r("span",{class:"info-label"},"Motor Response:",-1)),r("span",gn,P(d.levelOfConsciousness.motorResponse),1)])):y("",!0),d.gcsScore?(c(),w("div",_n,[m[4]||(m[4]=r("span",{class:"info-label"},"Score:",-1)),r("span",Cn,P(d.gcsScore),1)])):y("",!0)])])):y("",!0),d.hasPresentingComplaints?(c(),w("div",Dn,[r("div",kn,[t(E,{icon:d.documentTextOutline,class:"section-icon"},null,8,["icon"]),m[5]||(m[5]=r("h3",null,"Presenting Complaints",-1))]),r("div",wn,[(c(!0),w(Z,null,ue(d.presentingComplaintsWithDuration,(n,e)=>(c(),w("div",{class:"complaint-item",key:e},[r("div",An,P(n.name),1),r("div",On,P(n.duration),1)]))),128))])])):y("",!0),d.hasPregnancyData?(c(),w("div",xn,[r("div",Pn,[t(E,{icon:d.femaleOutline,class:"section-icon"},null,8,["icon"]),m[6]||(m[6]=r("h3",null,"Pregnancy Status",-1))]),r("div",Sn,[d.pregnancy.patientPregnant?(c(),w("div",Tn,[m[7]||(m[7]=r("span",{class:"info-label"},"Pregnant:",-1)),r("span",Nn,P(d.pregnancy.patientPregnant),1)])):y("",!0),d.pregnancy.breastFeeding?(c(),w("div",In,[m[8]||(m[8]=r("span",{class:"info-label"},"Breastfeeding:",-1)),r("span",En,P(d.pregnancy.breastFeeding),1)])):y("",!0)])])):y("",!0),d.hasPastMedicalHistory?(c(),w("div",Fn,[r("div",Hn,[t(E,{icon:d.medicalOutline,class:"section-icon"},null,8,["icon"]),m[9]||(m[9]=r("h3",null,"Medical History",-1))]),r("div",Bn,[(c(!0),w(Z,null,ue(d.uniquePastMedicalHistory,(n,e)=>(c(),w("div",{class:"medical-tag",key:e},P(n),1))),128))])])):y("",!0),r("div",Mn,[r("div",Vn,[t(T)])]),d.hasPhysicalExam?(c(),w("div",Yn,[r("div",$n,[t(E,{icon:d.bodyOutline,class:"section-icon"},null,8,["icon"]),m[10]||(m[10]=r("h3",null,"Physical Examination",-1))]),r("div",Rn,[(c(!0),w(Z,null,ue(d.physicalExamCategories,(n,e)=>(c(),w(Z,{key:e},[n.abnormalities.length>0||n.normal?(c(),w("div",Un,[r("div",Ln,[t(E,{icon:n.icon},null,8,["icon"]),r("h4",null,P(e),1)]),r("div",qn,[n.abnormalities.length>0?(c(!0),w(Z,{key:0},ue(n.abnormalities,(a,f)=>(c(),w("div",{class:"exam-item abnormal",key:f},P(a),1))),128)):n.normal?(c(),w("div",Gn,"Normal examination")):y("",!0)])])):y("",!0)],64))),128))])])):y("",!0)])])}const jn=Ae(rn,[["render",Wn],["__scopeId","data-v-caaae786"]]),zn={class:"modal_wrapper"},Kn=oe({__name:"PregnancyBreastfeeding",setup(d,{expose:m}){const p=ft(),{pregnancy:_}=we(p),A=()=>{};return m({onSubmit:async()=>{const E=await It(_.value);E.length>0?(await J.addObsToEncounterPatient(E,X.PREGNANCY_STATUS),Re("Pregnancy status saved successfully")):me("No pregnancy status data to save ")}}),(E,T)=>(c(),w("div",zn,[t(Nt,{contentData:i(_),"onUpdate:inputValue":A},null,8,["contentData"])]))}}),Jn=()=>{const d=Oe(),{patient:m}=we(d),p=()=>{},_=z(()=>{var A,S,E,T;return[{componentType:"Heading",name:"Existing Chronic Health Conditions",grid:{s:"12"}},{componentType:"checkboxField",name:"TB",label:"TB",type:"single",grid:{s:"12"},disabled:n=>n.None,onChange:(n,e)=>{const a={};return n||(a["TB treatment"]="",a["TB drugs"]=null,a["TB drug start date"]=""),a}},{componentType:"radioButtonField",header:"On TB medication",name:"TB treatment",options:[{value:"Yes",label:"Yes"},{value:"No",label:"No"}],grid:{s:"12"},condition:n=>n.TB===!0,onChange:(n,e)=>{const a={};return n!=="Yes"&&(a["TB drugs"]=null,a["TB drug start date"]=""),a}},{componentType:"multiSelectInputField",header:"Select medication",name:"TB drugs",isMultiple:!1,trackBy:"name",grid:{s:"6"},icon:K.search,options:[{name:"Auramine 'O' (C.I. 41000) 50g"},{name:"Bedaquilline 100mg"},{name:"Clofazimine 100mg"},{name:"Clofazimine 50mg"}],condition:n=>n.TB===!0&&n["TB treatment"]==="Yes"},{componentType:"dateInputField",header:"Start date",name:"TB drug start date",grid:{s:"6"},condition:n=>n.TB===!0&&n["TB treatment"]==="Yes",minDate:((S=(A=m.value)==null?void 0:A.personInformation)==null?void 0:S.birthdate)||void 0,maxDate:new Date().toISOString().split("T")[0]},{grid:{s:"12"},componentType:"Dashes"},{componentType:"checkboxField",name:"Chronic Obstructive Pulmonary Disease (COPD)",label:"Chronic Obstructive Pulmonary Disease (COPD)",type:"single",grid:{s:"12"},disabled:n=>n.None,onChange:()=>({})},{grid:{s:"12"},componentType:"Dashes"},{componentType:"checkboxField",name:"Asthma",label:"Asthma",type:"single",grid:{s:"12"},disabled:n=>n.None,onChange:()=>({})},{grid:{s:"12"},componentType:"Dashes"},{componentType:"checkboxField",name:"Epilepsy",label:"Epilepsy",type:"single",grid:{s:"12"},disabled:n=>n.None,onChange:()=>({})},{grid:{s:"12"},componentType:"Dashes"},{componentType:"checkboxField",name:"Previous stroke",label:"Previous stroke",type:"single",grid:{s:"12"},disabled:n=>n.None,onChange:()=>({})},{grid:{s:"12"},componentType:"Dashes"},{componentType:"checkboxField",name:"Peptic Ulcer Disease (PUD)",label:"Peptic Ulcer Disease (PUD)",type:"single",grid:{s:"12"},disabled:n=>n.None,onChange:()=>({})},{grid:{s:"12"},componentType:"Dashes"},{componentType:"checkboxField",name:"Mental disorder",label:"Mental disorder",type:"single",grid:{s:"12"},disabled:n=>n.None,onChange:()=>({})},{grid:{s:"12"},componentType:"Dashes"},{componentType:"checkboxField",name:"Bleeding disorders",label:"Bleeding disorders",type:"single",grid:{s:"12"},disabled:n=>n.None,onChange:()=>({})},{grid:{s:"12"},componentType:"Dashes"},{componentType:"checkboxField",name:"Hypertension",label:"Hypertension",type:"single",grid:{s:"12"},disabled:n=>n.None,onChange:(n,e)=>{const a={};return n||(a["Hypertension medication"]="",a["Current hypertension treatment regimen"]=null),a}},{componentType:"radioButtonField",header:"On medication",name:"Hypertension medication",options:[{value:"Yes",label:"Yes"},{value:"No",label:"No"}],grid:{s:"12"},condition:n=>n.Hypertension===!0,onChange:(n,e)=>{const a={};return n!=="Yes"&&(a["Current hypertension treatment regimen"]=null),a}},{componentType:"multiSelectInputField",header:"Select medication",name:"Current hypertension treatment regimen",isMultiple:!1,trackBy:"name",grid:{s:"12"},icon:K.search,options:[{name:"Captopril 12.5mg"},{name:"Aspirin 75mg"},{name:"Hydrochlorothiazide 25mg"},{name:"Enalapril Meleate 5mg"},{name:"Enalapril Maleate 10mg"}],condition:n=>n.Hypertension===!0&&n["Hypertension medication"]==="Yes"},{grid:{s:"12"},componentType:"Dashes"},{componentType:"checkboxField",name:"HIV Positive",label:"HIV Positive",type:"single",grid:{s:"12"},disabled:n=>n.None,onChange:(n,e)=>{const a={};return n||(a["HIV status"]="",a["ARV start date"]=""),a}},{componentType:"radioButtonField",header:"Is the patient on ART",name:"HIV status",options:[{value:"Yes",label:"Yes"},{value:"No",label:"No"}],grid:{s:"12"},condition:n=>n["HIV Positive"]===!0,onChange:(n,e)=>{const a={};return n!=="Yes"&&(a["ARV start date"]=""),a}},{componentType:"dateInputField",header:"Enter ARV start date",name:"ARV start date",grid:{s:"12"},condition:n=>n["HIV Positive"]===!0&&n["HIV status"]==="Yes",minDate:((T=(E=m.value)==null?void 0:E.personInformation)==null?void 0:T.birthdate)||void 0,maxDate:new Date().toISOString().split("T")[0]},{grid:{s:"12"},componentType:"Dashes"},{componentType:"checkboxField",name:"Diabetes Mellitus",label:"Diabetes Mellitus",type:"single",grid:{s:"12"},disabled:n=>n.None,onChange:(n,e)=>{const a={};return n||(a.Diabetes="",a["Controlled by"]=""),a}},{componentType:"radioButtonField",header:"Type",name:"Diabetes",options:[{value:"Type 1 diabetes",label:"Type I"},{value:"Type 2 diabetes",label:"Type II"},{value:"Unknown",label:"Unsure"}],grid:{s:"12"},condition:n=>n["Diabetes Mellitus"]===!0},{componentType:"radioButtonField",header:"Controlled by",name:"Controlled by",options:[{value:"Diet",label:"Diet"},{value:"Tablets",label:"Tablets"},{value:"Insulin",label:"Insulin"}],grid:{s:"12"},condition:n=>n["Diabetes Mellitus"]===!0},{grid:{s:"12"},componentType:"Dashes"},{componentType:"checkboxField",name:"None",label:"None",type:"single",grid:{s:"12"},onChange:(n,e)=>{const a={};return n&&(a.TB=!1,a["Chronic Obstructive Pulmonary Disease (COPD)"]=!1,a.Asthma=!1,a.Epilepsy=!1,a["Previous stroke"]=!1,a["Peptic Ulcer Disease (PUD)"]=!1,a["Mental disorder"]=!1,a["Bleeding disorders"]=!1,a.Hypertension=!1,a["HIV Positive"]=!1,a["Diabetes Mellitus"]=!1,a["TB treatment"]="",a["TB drugs"]=null,a["TB drug start date"]="",a["Hypertension medication"]="",a["Current hypertension treatment regimen"]=null,a["HIV status"]="",a["ARV start date"]="",a.Diabetes="",a["Controlled by"]=""),a}}]});return{resetForm:p,pastMedicalHistoryFormSection:_}},Xn=oe({__name:"PastMedicalHistory",setup(d,{expose:m}){const p=Jn(),_=s(null),A=s(0),S=Oe(),{patient:E}=we(S);pe(()=>{var a;return(a=E.value)==null?void 0:a.patientID},async(a,f)=>{a&&a!==f&&(console.log("Patient changed, resetting form"),A.value++,await de(),await de())}),pe(()=>{var a,f;return(f=(a=_.value)==null?void 0:a.getFormValues())==null?void 0:f.None},a=>{a&&_.value&&de(()=>{})});const T=async()=>{if(!_.value)return console.error("Form reference is not available"),!1;const a=_.value.validateForm();if(a)return console.log("Validation errors:",a),me("Please fix validation errors before submitting"),!1;const f=_.value.getFormValues();console.log("Form data:",f);const H=await n(f);return H.length===0?(me("No past medical history data to save"),!1):(await J.addObsToEncounterPatient(H,X.PAST_MEDICAL_HISTORY),A.value++,await de(),await de(),Re("Past medical history saved successfully"),!0)},n=async a=>{const f=[];for(const[H,u]of Object.entries(a))if(!(!u||u===!1||u===""))if(typeof u=="boolean"&&u===!0)try{const v=await fe.getConceptID(H,!0);v&&f.push(await J.buildValueCoded("Chronic disease",v))}catch(v){f.push(await J.buildValueText("Chronic disease",H))}else typeof u=="string"?f.push(await J.buildValueText(H,u)):typeof u=="object"&&(u!=null&&u.name)?f.push(await J.buildValueText(H,u.name)):(u instanceof Date||/^\d{4}-\d{2}-\d{2}$/.test(u))&&f.push(await J.buildValueDate(H,u));return console.log("Processed past medical history:",f),f};_e(async()=>{console.log("Past medical history form mounted"),await de(),await de()});const e=z(()=>p.pastMedicalHistoryFormSection.value);return m({validateForm:()=>{var a;return(a=_.value)==null?void 0:a.validateForm()},onSubmit:T,resetForm:()=>{A.value++}}),(a,f)=>(c(),x(Je,{formData:e.value,ref_key:"formRef",ref:_,key:A.value},null,8,["formData"]))}}),Qn=()=>{const d=Oe(),{patient:m}=we(d),p=()=>{},_=z(()=>{var T,n;const A=(n=(T=m.value)==null?void 0:T.personInformation)==null?void 0:n.gender,S=A==="M",E=A==="F";return[{componentType:"radioButtonField",header:"Has physical examination been done?",name:"Physical examination",options:[{value:"Yes",label:"Yes"},{value:"No",label:"No"}],grid:{s:"12"},onChange:(e,a)=>{if(e==="No")return{"Eyes normal":"","Abnormality for eyes":[],"Other eye abnormality notes":"","Mouth normal":"","Abnormality for  mouth":[],"Other mouth abnormality notes":"","Ears normal":"","Abnormality for ears":[],"Other ears abnormality notes":"","Face normal":"","Abnormality for face":[],"Other face abnormality notes":"","Neck normal":"","Abnormality for neck":[],"Other neck abnormality notes":"","Chest inspection normal":"","Abnormality for  chest inspection":[],"Other chest abnormality notes":"","Chest movements":"","Heart sounds normal":"","Heart sounds abnormality":[],"Breath sounds normal":"","Breath sounds abnormality":[],"Abnormalities when added":[],"Abdominal inspection normal":"","Abdominal inspection abnormality":[],"Other abdominal abnormality notes":"","Abdominal auscultation normal":"","Abdominal auscultation abnormality":[],"Other abdominal auscultation abnormality notes":"","Bowel sounds abnormality":[],"Abdominal palpation normal":"","Abdominal palpation abnormality":[],"Other abdominal palpation abnormality notes":"","Genital examination normal":"","Genital examination abnormality":[],"Urethral meatus abnormalities":[],"Vulva inspection abnormalities":[],"Other genital abnormality notes":"","Extremities normal":"","Abnormality for extremities":[],"Other extremities abnormalities notes":""}}},{grid:{s:"12"},componentType:"Dashes"},{componentType:"radioButtonField",header:"Reason why physical examination not done?",name:"Reason why physical examination not done",options:[{value:"Condition does not necessitate assessment",label:"Condition does not necessitate assessment"},{value:"Patient refused to consent",label:"Patient refused to consent"}],grid:{s:"12"},condition:e=>e["Physical examination"]==="No"},{componentType:"radioButtonField",header:"Eyes normal?",name:"Eyes normal",options:[{value:"Yes",label:"Yes"},{value:"No",label:"No"}],grid:{s:"12"},condition:e=>e["Physical examination"]==="Yes",onChange:(e,a)=>{if(e==="Yes")return{"Abnormality for eyes":[],"Other eye abnormality notes":""}}},{componentType:"checkboxField",header:"What are the abnormalities on eyes?",name:"Abnormality for eyes",type:"multiple",options:[{value:"Pallor",label:"Pallor"},{value:"Jaundice",label:"Jaundice"},{value:"Ulcerations",label:"Ulcerations"},{value:"Other eye abnormality",label:"Other eye abnormality"}],grid:{s:"12"},condition:e=>e["Physical examination"]==="Yes"&&e["Eyes normal"]==="No",onChange:(e,a)=>{if(!(e!=null&&e.includes("Other eye abnormality")))return{"Other eye abnormality notes":""}}},{componentType:"inputField",header:"Specify eye abnormality",name:"Other eye abnormality notes",icon:K.editPen,grid:{s:"12"},condition:e=>e["Physical examination"]==="Yes"&&e["Eyes normal"]==="No"&&Array.isArray(e["Abnormality for eyes"])&&e["Abnormality for eyes"].includes("Other eye abnormality")},{grid:{s:"12"},componentType:"Dashes"},{componentType:"radioButtonField",header:"Mouth normal?",name:"Mouth normal",options:[{value:"Yes",label:"Yes"},{value:"No",label:"No"}],grid:{s:"12"},condition:e=>e["Physical examination"]==="Yes",onChange:(e,a)=>{if(e==="Yes")return{"Abnormality for  mouth":[],"Other mouth abnormality notes":""}}},{componentType:"checkboxField",header:"What are the abnormalities in the mouth?",name:"Abnormality for  mouth",type:"multiple",options:[{value:"Oral thrush",label:"Oral thrush"},{value:"Kaposi's Sarcoma lesions",label:"Kaposi's Sarcoma lesions"},{value:"Sores",label:"Sores"},{value:"Other mouth abnormality",label:"Other mouth abnormality"}],grid:{s:"12"},condition:e=>e["Physical examination"]==="Yes"&&e["Mouth normal"]==="No",onChange:(e,a)=>{if(!(e!=null&&e.includes("Other mouth abnormality")))return{"Other mouth abnormality notes":""}}},{componentType:"inputField",header:"Specify mouth abnormality",name:"Other mouth abnormality notes",icon:K.editPen,grid:{s:"12"},condition:e=>e["Physical examination"]==="Yes"&&e["Mouth normal"]==="No"&&Array.isArray(e["Abnormality for  mouth"])&&e["Abnormality for  mouth"].includes("Other mouth abnormality")},{grid:{s:"12"},componentType:"Dashes"},{componentType:"radioButtonField",header:"Ears normal?",name:"Ears normal",options:[{value:"Yes",label:"Yes"},{value:"No",label:"No"}],grid:{s:"12"},condition:e=>e["Physical examination"]==="Yes",onChange:(e,a)=>{if(e==="Yes")return{"Abnormality for ears":[],"Other ears abnormality notes":""}}},{componentType:"checkboxField",header:"What are the abnormalities on ears?",name:"Abnormality for ears",type:"multiple",options:[{value:"Ear discharge",label:"Ear discharge"},{value:"Bleeding",label:"Bleeding"},{value:"Other ears abnormality",label:"Other ears abnormality"}],grid:{s:"12"},condition:e=>e["Physical examination"]==="Yes"&&e["Ears normal"]==="No",onChange:(e,a)=>{if(!(e!=null&&e.includes("Other ears abnormality")))return{"Other ears abnormality notes":""}}},{componentType:"inputField",header:"Specify ears abnormality",name:"Other ears abnormality notes",icon:K.editPen,grid:{s:"12"},condition:e=>e["Physical examination"]==="Yes"&&e["Ears normal"]==="No"&&Array.isArray(e["Abnormality for ears"])&&e["Abnormality for ears"].includes("Other ears abnormality")},{grid:{s:"12"},componentType:"Dashes"},{componentType:"radioButtonField",header:"Face normal?",name:"Face normal",options:[{value:"Yes",label:"Yes"},{value:"No",label:"No"}],grid:{s:"12"},condition:e=>e["Physical examination"]==="Yes",onChange:(e,a)=>{if(e==="Yes")return{"Abnormality for face":[],"Other face abnormality notes":""}}},{componentType:"checkboxField",header:"What are the abnormalities on face?",name:"Abnormality for face",type:"multiple",options:[{value:"Rash",label:"Rash"},{value:"Swelling",label:"Swelling"},{value:"Other face abnormality",label:"Other face abnormality"}],grid:{s:"12"},condition:e=>e["Physical examination"]==="Yes"&&e["Face normal"]==="No",onChange:(e,a)=>{if(!(e!=null&&e.includes("Other face abnormality")))return{"Other face abnormality notes":""}}},{componentType:"inputField",header:"Specify face abnormality",name:"Other face abnormality notes",icon:K.editPen,grid:{s:"12"},condition:e=>e["Physical examination"]==="Yes"&&e["Face normal"]==="No"&&Array.isArray(e["Abnormality for face"])&&e["Abnormality for face"].includes("Other face abnormality")},{grid:{s:"12"},componentType:"Dashes"},{componentType:"radioButtonField",header:"Neck normal?",name:"Neck normal",options:[{value:"Yes",label:"Yes"},{value:"No",label:"No"}],grid:{s:"12"},condition:e=>e["Physical examination"]==="Yes",onChange:(e,a)=>{if(e==="Yes")return{"Abnormality for neck":[],"Other neck abnormality notes":""}}},{componentType:"checkboxField",header:"What are the abnormalities on the neck?",name:"Abnormality for neck",type:"multiple",options:[{value:"Neck rash",label:"Neck rash"},{value:"Swelling",label:"Swelling"},{value:"Neck mass",label:"Neck mass"},{value:"Other neck abnormality",label:"Other neck abnormality"}],grid:{s:"12"},condition:e=>e["Physical examination"]==="Yes"&&e["Neck normal"]==="No",onChange:(e,a)=>{if(!(e!=null&&e.includes("Other neck abnormality")))return{"Other neck abnormality notes":""}}},{componentType:"inputField",header:"Specify neck abnormality",name:"Other neck abnormality notes",icon:K.editPen,grid:{s:"12"},condition:e=>e["Physical examination"]==="Yes"&&e["Neck normal"]==="No"&&Array.isArray(e["Abnormality for neck"])&&e["Abnormality for neck"].includes("Other neck abnormality")},{grid:{s:"12"},componentType:"Dashes"},{componentType:"radioButtonField",header:"Chest inspection normal?",name:"Chest inspection normal",options:[{value:"Yes",label:"Yes"},{value:"No",label:"No"}],grid:{s:"12"},condition:e=>e["Physical examination"]==="Yes",onChange:(e,a)=>{if(e==="Yes")return{"Abnormality for  chest inspection":[],"Other chest abnormality notes":""}}},{componentType:"checkboxField",header:"What are the abnormalities on the chest?",name:"Abnormality for  chest inspection",type:"multiple",options:[{value:"Chest rash",label:"Chest rash"},{value:"Chest burns",label:"Chest burns"},{value:"Chest bruises",label:"Chest bruises"},{value:"Chest wounds",label:"Chest wounds"},{value:"Other chest abnormality",label:"Other chest abnormality"}],grid:{s:"12"},condition:e=>e["Physical examination"]==="Yes"&&e["Chest inspection normal"]==="No",onChange:(e,a)=>{if(!(e!=null&&e.includes("Other chest abnormality")))return{"Other chest abnormality notes":""}}},{componentType:"inputField",header:"Specify chest abnormality",name:"Other chest abnormality notes",icon:K.editPen,grid:{s:"12"},condition:e=>e["Physical examination"]==="Yes"&&e["Chest inspection normal"]==="No"&&Array.isArray(e["Abnormality for  chest inspection"])&&e["Abnormality for  chest inspection"].includes("Other chest abnormality")},{grid:{s:"12"},componentType:"Dashes"},{componentType:"radioButtonField",header:"Chest movement?",name:"Chest movements",options:[{value:"Symmetrical",label:"Symmetrical"},{value:"Asymmetrical",label:"Asymmetrical"}],grid:{s:"12"},condition:e=>e["Physical examination"]==="Yes"},{grid:{s:"12"},componentType:"Dashes"},{componentType:"radioButtonField",header:"Heart sounds normal?",name:"Heart sounds normal",options:[{value:"Yes",label:"Yes"},{value:"No",label:"No"}],grid:{s:"12"},condition:e=>e["Physical examination"]==="Yes",onChange:(e,a)=>{if(e==="Yes")return{"Heart sounds abnormality":[]}}},{componentType:"checkboxField",header:"What are the abnormalities on the heart sounds?",name:"Heart sounds abnormality",type:"multiple",options:[{value:"Loud P2",label:"Loud P2"},{value:"Splitting P2",label:"Splitting P2"},{value:"Gallop rhythm",label:"Gallop rhythm"},{value:"Murmur",label:"Murmur"}],grid:{s:"12"},condition:e=>e["Physical examination"]==="Yes"&&e["Heart sounds normal"]==="No"},{grid:{s:"12"},componentType:"Dashes"},{componentType:"radioButtonField",header:"Breath sounds normal?",name:"Breath sounds normal",options:[{value:"Yes",label:"Yes"},{value:"No",label:"No"}],grid:{s:"12"},condition:e=>e["Physical examination"]==="Yes",onChange:(e,a)=>{if(e==="Yes")return{"Breath sounds abnormality":[],"Abnormalities when added":[]}}},{componentType:"checkboxField",header:"What are the abnormalities on the breath sounds?",name:"Breath sounds abnormality",type:"multiple",options:[{value:"Absent",label:"Absent"},{value:"Reduced",label:"Reduced"},{value:"Added",label:"Added"}],grid:{s:"12"},condition:e=>e["Physical examination"]==="Yes"&&e["Breath sounds normal"]==="No",onChange:(e,a)=>{if(!(e!=null&&e.includes("Added")))return{"Abnormalities when added":[]}}},{componentType:"checkboxField",header:"What are the abnormalities on the breath sounds are Added?",name:"Abnormalities when added",type:"multiple",options:[{value:"Crackles",label:"Crackles"},{value:"Wheezes",label:"Wheezes"},{value:"Bronchial",label:"Bronchial"},{value:"Crepitations",label:"Crepitations"}],grid:{s:"12"},condition:e=>e["Physical examination"]==="Yes"&&e["Breath sounds normal"]==="No"&&Array.isArray(e["Breath sounds abnormality"])&&e["Breath sounds abnormality"].includes("Added")},{grid:{s:"12"},componentType:"Dashes"},{componentType:"radioButtonField",header:"Abdominal inspection normal?",name:"Abdominal inspection normal",options:[{value:"Yes",label:"Yes"},{value:"No",label:"No"}],grid:{s:"12"},condition:e=>e["Physical examination"]==="Yes",onChange:(e,a)=>{if(e==="Yes")return{"Abdominal inspection abnormality":[],"Other abdominal abnormality notes":""}}},{componentType:"checkboxField",header:"What are the abnormalities after Abdominal inspection?",name:"Abdominal inspection abnormality",type:"multiple",options:[{value:"Abdominal distension",label:"Abdominal distension"},{value:"Abdominal rash",label:"Abdominal rash"},{value:"Abdominal wounds",label:"Abdominal wounds"},{value:"Laceration",label:"Laceration"},{value:"Abdominal bruises",label:"Abdominal bruises"},{value:"Abdominal burns",label:"Abdominal burns"},{value:"Other abdominal abnormality",label:"Other abdominal abnormality"}],grid:{s:"12"},condition:e=>e["Physical examination"]==="Yes"&&e["Abdominal inspection normal"]==="No",onChange:(e,a)=>{if(!(e!=null&&e.includes("Other abdominal abnormality")))return{"Other abdominal abnormality notes":""}}},{componentType:"inputField",header:"Specify abdominal abnormality",name:"Other abdominal abnormality notes",icon:K.editPen,grid:{s:"12"},condition:e=>e["Physical examination"]==="Yes"&&e["Abdominal inspection normal"]==="No"&&Array.isArray(e["Abdominal inspection abnormality"])&&e["Abdominal inspection abnormality"].includes("Other abdominal abnormality")},{grid:{s:"12"},componentType:"Dashes"},{componentType:"radioButtonField",header:"Abdominal auscultation normal?",name:"Abdominal auscultation normal",options:[{value:"Yes",label:"Yes"},{value:"No",label:"No"}],grid:{s:"12"},condition:e=>e["Physical examination"]==="Yes",onChange:(e,a)=>{if(e==="Yes")return{"Abdominal auscultation abnormality":[],"Other abdominal auscultation abnormality notes":"","Bowel sounds abnormality":[]}}},{componentType:"checkboxField",header:"What are the abdominal auscultation abnormalities?",name:"Abdominal auscultation abnormality",type:"multiple",options:[{value:"Bruit",label:"Bruit"},{value:"Hyperactive",label:"Hyperactive"},{value:"Reduced bowel sounds",label:"Reduced bowel sounds"},{value:"Other",label:"Other"}],grid:{s:"12"},condition:e=>e["Physical examination"]==="Yes"&&e["Abdominal auscultation normal"]==="No",onChange:(e,a)=>{const f={};return e!=null&&e.includes("Reduced bowel sounds")||(f["Bowel sounds abnormality"]=[]),e!=null&&e.includes("Other")||(f["Other abdominal auscultation abnormality notes"]=""),f}},{componentType:"checkboxField",header:"What are the abnormalities on bowel sounds?",name:"Bowel sounds abnormality",type:"multiple",options:[{value:"Reduced bowel sounds",label:"Reduced bowel sounds"},{value:"Abdominal auscultation absent",label:"Abdominal auscultation absent"}],grid:{s:"12"},condition:e=>e["Physical examination"]==="Yes"&&e["Abdominal auscultation normal"]==="No"&&Array.isArray(e["Abdominal auscultation abnormality"])&&e["Abdominal auscultation abnormality"].includes("Reduced bowel sounds")},{componentType:"inputField",header:"Specify abdominal auscultation abnormality",name:"Other abdominal auscultation abnormality notes",icon:K.editPen,grid:{s:"12"},condition:e=>e["Physical examination"]==="Yes"&&e["Abdominal auscultation normal"]==="No"&&Array.isArray(e["Abdominal auscultation abnormality"])&&e["Abdominal auscultation abnormality"].includes("Other")},{grid:{s:"12"},componentType:"Dashes"},{componentType:"radioButtonField",header:"Abdominal palpation normal?",name:"Abdominal palpation normal",options:[{value:"Yes",label:"Yes"},{value:"No",label:"No"}],grid:{s:"12"},condition:e=>e["Physical examination"]==="Yes",onChange:(e,a)=>{if(e==="Yes")return{"Abdominal palpation abnormality":[],"Other abdominal palpation abnormality notes":""}}},{componentType:"checkboxField",header:"What are the abdominal palpation abnormalities?",name:"Abdominal palpation abnormality",type:"multiple",options:[{value:"Tenderness",label:"Tenderness"},{value:"Splenomegaly",label:"Splenomegaly"},{value:"Kidney ballotable",label:"Kidney ballotable"},{value:"Other masses",label:"Other masses"}],grid:{s:"12"},condition:e=>e["Physical examination"]==="Yes"&&e["Abdominal palpation normal"]==="No",onChange:(e,a)=>{if(!(e!=null&&e.includes("Other masses")))return{"Other abdominal palpation abnormality notes":""}}},{componentType:"inputField",header:"Specify abdominal palpation abnormality",name:"Other abdominal palpation abnormality notes",icon:K.editPen,grid:{s:"12"},condition:e=>e["Physical examination"]==="Yes"&&e["Abdominal palpation normal"]==="No"&&Array.isArray(e["Abdominal palpation abnormality"])&&e["Abdominal palpation abnormality"].includes("Other masses")},{grid:{s:"12"},componentType:"Dashes"},{componentType:"radioButtonField",header:"Genital examination normal?",name:"Genital examination normal",options:[{value:"Yes",label:"Yes"},{value:"No",label:"No"}],grid:{s:"12"},condition:e=>e["Physical examination"]==="Yes",onChange:(e,a)=>{if(e==="Yes")return{"Genital examination abnormality":[],"Urethral meatus abnormalities":[],"Vulva inspection abnormalities":[],"Other genital abnormality notes":""}}},{componentType:"checkboxField",header:"What are the abnormalities after genital examination?",name:"Genital examination abnormality",type:"multiple",options:[{value:"Warts",label:"Warts"},{value:"Vesicles",label:"Vesicles"},{value:"Growths",label:"Growths"},{value:"Genital sores",label:"Genital sores"},{value:"Scrotal swelling",label:"Scrotal swelling",disabled:E},{value:"Tastes swelling",label:"Tastes swelling",disabled:E},{value:"Urethral meatus abnormal",label:"Urethral meatus abnormal",disabled:E},{value:"Vulva examination",label:"Vulva examination",disabled:S},{value:"Visible bleeding",label:"Visible bleeding",disabled:S},{value:"Other genital abnormalities",label:"Other genital abnormalities"}],grid:{s:"12"},condition:e=>e["Physical examination"]==="Yes"&&e["Genital examination normal"]==="No",onChange:(e,a)=>{const f={};return e!=null&&e.includes("Urethral meatus abnormal")||(f["Urethral meatus abnormalities"]=[]),e!=null&&e.includes("Vulva examination")||(f["Vulva inspection abnormalities"]=[]),e!=null&&e.includes("Other genital abnormalities")||(f["Other genital abnormality notes"]=""),f}},{componentType:"checkboxField",header:"What are the urethral meatus abnormalities for the patient?",name:"Urethral meatus abnormalities",type:"multiple",options:[{value:"Oedema",label:"Oedema"},{value:"Abnormal discharge",label:"Abnormal discharge"},{value:"Bleeding",label:"Bleeding"}],grid:{s:"12"},condition:e=>e["Physical examination"]==="Yes"&&e["Genital examination normal"]==="No"&&S&&Array.isArray(e["Genital examination abnormality"])&&e["Genital examination abnormality"].includes("Urethral meatus abnormal")},{componentType:"checkboxField",header:"What Vulva abnormalities does the patient have?",name:"Vulva inspection abnormalities",type:"multiple",options:[{value:"Oedematous cervix",label:"Oedematous cervix"},{value:"Abnormal vaginal discharge",label:"Abnormal vaginal discharge"}],grid:{s:"12"},condition:e=>e["Physical examination"]==="Yes"&&e["Genital examination normal"]==="No"&&E&&Array.isArray(e["Genital examination abnormality"])&&e["Genital examination abnormality"].includes("Vulva examination")},{componentType:"inputField",header:"Specify genital abnormality",name:"Other genital abnormality notes",icon:K.editPen,grid:{s:"12"},condition:e=>e["Physical examination"]==="Yes"&&e["Genital examination normal"]==="No"&&Array.isArray(e["Genital examination abnormality"])&&e["Genital examination abnormality"].includes("Other genital abnormalities")},{grid:{s:"12"},componentType:"Dashes"},{componentType:"radioButtonField",header:"Extremities normal?",name:"Extremities normal",options:[{value:"Yes",label:"Yes"},{value:"No",label:"No"}],grid:{s:"12"},condition:e=>e["Physical examination"]==="Yes",onChange:(e,a)=>{if(e==="Yes")return{"Abnormality for extremities":[],"Other extremities abnormalities notes":""}}},{componentType:"checkboxField",header:"What are the abnormalities for extremities?",name:"Abnormality for extremities",type:"multiple",options:[{value:"Cold and clammy",label:"Cold and clammy"},{value:"Generalized oedema",label:"Generalized oedema"},{value:"Fracture",label:"Fracture"},{value:"Extremity burns",label:"Extremity burns"},{value:"Extremity rash",label:"Extremity rash"},{value:"Deformity",label:"Deformity"},{value:"Finger clubbing",label:"Finger clubbing"},{value:"Decreased Power",label:"Decreased Power"},{value:"Decreased Sensation",label:"Decreased Sensation"},{value:"Other extremities abnormality",label:"Other extremities abnormality"}],grid:{s:"12"},condition:e=>e["Physical examination"]==="Yes"&&e["Extremities normal"]==="No",onChange:(e,a)=>{if(!(e!=null&&e.includes("Other extremities abnormality")))return{"Other extremities abnormalities notes":""}}},{componentType:"inputField",header:"Specify extremity abnormality",name:"Other extremities abnormalities notes",icon:K.editPen,grid:{s:"12"},condition:e=>e["Physical examination"]==="Yes"&&e["Extremities normal"]==="No"&&Array.isArray(e["Abnormality for extremities"])&&e["Abnormality for extremities"].includes("Other extremities abnormality")}]});return{resetForm:p,physicalExaminationFormSection:_}},Zn=oe({__name:"PhysicalExamination",setup(d,{expose:m}){const p=Qn(),_=s(null),A=s(0),S=Oe(),{patient:E}=we(S);pe(()=>{var a;return(a=E.value)==null?void 0:a.patientID},async(a,f)=>{a&&a!==f&&(A.value++,await de())});const T=async()=>{if(!_.value)return console.error("Form reference is not available"),!1;if(_.value.validateForm())return me("Please fix validation errors before submitting"),!1;const f=_.value.getFormValues(),H=await n(f);return H.length===0?(me("No physical examination data to save"),!1):(await J.addObsToEncounterPatient(H,X.PHYSICAL_EXAMINATION),A.value++,await de(),Re("Physical examination saved successfully"),!0)},n=async a=>{const f=[];for(const[H,u]of Object.entries(a))!u||u===!1||u===""||(typeof u=="boolean"&&u===!0?f.push(await J.buildValueText("Physical examination finding",H)):typeof u=="string"&&f.push(await J.buildValueText(H,u)));return f};_e(async()=>{await de()});const e=z(()=>p.physicalExaminationFormSection.value);return m({validateForm:()=>{var a;return(a=_.value)==null?void 0:a.validateForm()},onSubmit:T,resetForm:()=>{A.value++}}),(a,f)=>(c(),x(Je,{formData:e.value,ref_key:"formRef",ref:_,key:A.value},null,8,["formData"]))}}),eo={key:0},ao={class:"ion-padding",slot:"content"},to={class:"nav-buttons"},no={class:"ion-padding",slot:"content"},oo={class:"nav-buttons"},so={class:"ion-padding",slot:"content"},io={class:"nav-buttons"},lo={class:"ion-padding",slot:"content"},ro={class:"nav-buttons"},co={class:"ion-padding",slot:"content"},uo={class:"nav-buttons"},mo={class:"ion-padding",slot:"content"},po={class:"nav-buttons"},ho=oe({__name:"ClinicalAssessment",setup(d,{expose:m}){const p=s("loc"),_=s(0),A=s(!1),S=s(!1),E=new Da,T=Oe(),n=()=>{_.value++},e=s(null),a=s(null),f=s(null),H=s(null),u=s(null),v=s(null),R=[{id:"loc",label:"Level of consciousness",show:!0},{id:"pc",label:"Presenting complaints",show:!0},{id:"pbs",label:"Pregnancy and breastfeeding status",show:()=>E.isChildBearing()},{id:"pmh",label:"Past medical history",show:!0},{id:"al",label:"Allergies",show:!0},{id:"pe",label:"Physical examination",show:!0}];async function N(){const g=Fe.getSessionDate(),o=[X.ASSESSMENT,X.PRESENTING_COMPLAINTS,X.PAST_MEDICAL_HISTORY,X.PHYSICAL_EXAMINATION,X.MEDICAL_HISTORY,X.PREGNANCY_STATUS];let D=!1;for(const q of o)try{const ee=await J.getObsByEncounterIdAndDate(q);if(ee&&ee.some(he=>he.obs_datetime?$e.toStandardHisFormat(he.obs_datetime)===$e.toStandardHisFormat(g):!1)){D=!0;break}}catch(ee){console.error("Error checking observations for encounter type ".concat(q,":"),ee)}A.value=D}_e(N),pe(()=>T.patient,N);const F=z(()=>A.value),M=z(()=>R.filter(g=>typeof g.show=="function"?g.show():g.show)),L=g=>{const o=R.find(D=>D.id===g);return o?typeof o.show=="function"?o.show():o.show:!1},$=g=>M.value.findIndex(o=>o.id===g),W=g=>{const o=$(g);o>0&&(p.value=M.value[o-1].id)},V=g=>{const D=$(g)+1;D<M.value.length?p.value=M.value[D].id:(p.value="",n())};return m({onSubmit:async()=>{const g=[{ref:e,name:"PresentingComplaints"},{ref:a,name:"LevelOfConsciousness"},{ref:f,name:"PastMedicalHistory"},{ref:u,name:"PregnancyBreastfeeding"},{ref:v,name:"PhysicalExamination"},{ref:H,name:"Allergies"}];for(const o of g)if(o.ref.value&&typeof o.ref.value.onSubmit=="function")try{const D=await o.ref.value.onSubmit();if(o.name==="PresentingComplaints"&&D===!1)return}catch(D){if(console.error("Error calling ".concat(o.name," onSubmit:"),D),o.name==="PresentingComplaints")return}else console.log("".concat(o.name," component ref not available or no onSubmit method"))}}),(g,o)=>(c(),w(Z,null,[F.value?(c(),w("div",eo,[t(i(ne),{lines:"none"},{default:l(()=>[t(i(re),null,{default:l(()=>[...o[14]||(o[14]=[B("Switch between Capture Mode and Summary Mode",-1)])]),_:1}),t(i(st),{checked:S.value,onIonChange:o[0]||(o[0]=D=>S.value=D.detail.checked),slot:"end"},null,8,["checked"])]),_:1}),S.value?y("",!0):(c(),x(jn,{key:_.value}))])):y("",!0),!F.value||S.value?(c(),x(i(ce),{key:1,style:{width:"100%"}},{default:l(()=>[t(i(Ke),{value:p.value,"onUpdate:value":o[13]||(o[13]=D=>p.value=D),ref:"accordionGroup",class:"previousView"},{default:l(()=>[L("loc")?(c(),x(i(ge),{key:0,value:"loc",class:"_card"},{default:l(()=>[t(i(ne),{slot:"header",color:"light"},{default:l(()=>[t(i(re),{class:"previousLabel"},{default:l(()=>[...o[15]||(o[15]=[B("Level of consciousness",-1)])]),_:1})]),_:1}),r("div",ao,[t(xt,{"is-active":p.value==="loc",ref_key:"levelOfConsciousnessFormRef",ref:a,onDataSaved:n},null,8,["is-active"]),r("div",to,[$("loc")>0?(c(),x(i(ie),{key:0,fill:"outline",onClick:o[1]||(o[1]=le(D=>W("loc"),["stop"]))},{default:l(()=>[...o[16]||(o[16]=[B(" Back ",-1)])]),_:1})):y("",!0),t(i(ie),{fill:"outline",onClick:o[2]||(o[2]=le(D=>V("loc"),["stop"]))},{default:l(()=>[B(P($("loc")<M.value.length-1?"Next":"Finish"),1)]),_:1})])])]),_:1})):y("",!0),L("pc")?(c(),x(i(ge),{key:1,value:"pc",class:"_card"},{default:l(()=>[t(i(ne),{slot:"header",color:"light"},{default:l(()=>[t(i(re),{class:"previousLabel"},{default:l(()=>[...o[17]||(o[17]=[B(" Presenting complaints - ",-1),r("span",{class:"required-badge"},"Required",-1)])]),_:1})]),_:1}),r("div",no,[t(zt,{"is-active":p.value==="pc",onDataSaved:n,ref_key:"presentingComplaintsFormRef",ref:e},null,8,["is-active"]),r("div",oo,[$("pc")>0?(c(),x(i(ie),{key:0,fill:"outline",onClick:o[3]||(o[3]=le(D=>W("pc"),["stop"]))},{default:l(()=>[...o[18]||(o[18]=[B(" Back ",-1)])]),_:1})):y("",!0),t(i(ie),{fill:"outline",onClick:o[4]||(o[4]=le(D=>V("pc"),["stop"]))},{default:l(()=>[B(P($("pc")<M.value.length-1?"Next":"Finish"),1)]),_:1})])])]),_:1})):y("",!0),L("pbs")?(c(),x(i(ge),{key:2,value:"pbs",class:"_card"},{default:l(()=>[t(i(ne),{slot:"header",color:"light"},{default:l(()=>[t(i(re),{class:"previousLabel"},{default:l(()=>[...o[19]||(o[19]=[B("Pregnancy and breastfeeding status",-1)])]),_:1})]),_:1}),r("div",so,[t(Kn,{"is-active":p.value==="pbs",ref_key:"pregnancyBreastfeedingFormRef",ref:u,onDataSaved:n},null,8,["is-active"]),r("div",io,[$("pbs")>0?(c(),x(i(ie),{key:0,fill:"outline",onClick:o[5]||(o[5]=le(D=>W("pbs"),["stop"]))},{default:l(()=>[...o[20]||(o[20]=[B(" Back ",-1)])]),_:1})):y("",!0),t(i(ie),{fill:"outline",onClick:o[6]||(o[6]=le(D=>V("pbs"),["stop"]))},{default:l(()=>[B(P($("pbs")<M.value.length-1?"Next":"Finish"),1)]),_:1})])])]),_:1})):y("",!0),L("pmh")?(c(),x(i(ge),{key:3,value:"pmh",class:"_card"},{default:l(()=>[t(i(ne),{slot:"header",color:"light"},{default:l(()=>[t(i(re),{class:"previousLabel"},{default:l(()=>[...o[21]||(o[21]=[B("Past medical history",-1)])]),_:1})]),_:1}),r("div",lo,[t(Xn,{"is-active":p.value==="pmh",ref_key:"pastMedicalHistoryFormRef",ref:f,onDataSaved:n},null,8,["is-active"]),r("div",ro,[$("pmh")>0?(c(),x(i(ie),{key:0,fill:"outline",onClick:o[7]||(o[7]=le(D=>W("pmh"),["stop"]))},{default:l(()=>[...o[22]||(o[22]=[B(" Back ",-1)])]),_:1})):y("",!0),t(i(ie),{fill:"outline",onClick:o[8]||(o[8]=le(D=>V("pmh"),["stop"]))},{default:l(()=>[B(P($("pmh")<M.value.length-1?"Next":"Finish"),1)]),_:1})])])]),_:1})):y("",!0),L("al")?(c(),x(i(ge),{key:4,value:"al",class:"_card"},{default:l(()=>[t(i(ne),{slot:"header",color:"light"},{default:l(()=>[t(i(re),{class:"previousLabel"},{default:l(()=>[...o[23]||(o[23]=[B("Allergies",-1)])]),_:1})]),_:1}),r("div",co,[t(Et,{"is-active":p.value==="al",ref_key:"allergiesFormRef",ref:H,onDataSaved:n},null,8,["is-active"]),r("div",uo,[$("al")>0?(c(),x(i(ie),{key:0,fill:"outline",onClick:o[9]||(o[9]=le(D=>W("al"),["stop"]))},{default:l(()=>[...o[24]||(o[24]=[B(" Back ",-1)])]),_:1})):y("",!0),t(i(ie),{fill:"outline",onClick:o[10]||(o[10]=le(D=>V("al"),["stop"]))},{default:l(()=>[B(P($("al")<M.value.length-1?"Next":"Finish"),1)]),_:1})])])]),_:1})):y("",!0),L("pe")?(c(),x(i(ge),{key:5,value:"pe",class:"_card"},{default:l(()=>[t(i(ne),{slot:"header",color:"light"},{default:l(()=>[t(i(re),{class:"previousLabel"},{default:l(()=>[...o[25]||(o[25]=[B("Physical examination",-1)])]),_:1})]),_:1}),r("div",mo,[t(Zn,{"is-active":p.value==="pe",ref_key:"physicalExaminationFormRef",ref:v,onDataSaved:n},null,8,["is-active"]),r("div",po,[$("pe")>0?(c(),x(i(ie),{key:0,fill:"outline",onClick:o[11]||(o[11]=le(D=>W("pe"),["stop"]))},{default:l(()=>[...o[26]||(o[26]=[B(" Back ",-1)])]),_:1})):y("",!0),t(i(ie),{fill:"outline",onClick:o[12]||(o[12]=le(D=>V("pe"),["stop"]))},{default:l(()=>[B(P($("pe")<M.value.length-1?"Next":"Finish"),1)]),_:1})])])]),_:1})):y("",!0)]),_:1},8,["value"])]),_:1})):y("",!0)],64))}}),ds=Ae(ho,[["__scopeId","data-v-f7298259"]]),fo={class:"allergies-section"},yo={class:"allergies-container"},vo={class:"medication-section"},bo={class:"medication-content"},go={key:0,class:"add-medication-form"},_o={class:"form-group"},Co={class:"option-label"},Do={key:0,class:"error-message"},ko={class:"form-row"},wo={class:"form-group"},Ao={key:0,class:"error-message"},Oo={class:"form-group"},xo={key:0,class:"error-message"},Po={class:"form-group"},So={key:0,class:"error-message"},To={class:"action-buttons"},No={class:"notes-section"},Io={class:"notes-content"},Eo={class:"notes-input-container"},Fo={class:"ion-padding",slot:"content"},Ho={class:"notes-timeline"},Bo={key:0,class:"note-entry"},Mo={class:"note-date"},Vo={class:"note-content"},Yo={class:"ion-padding",slot:"content"},$o={class:"note-date"},Ro={class:"note-content"},Uo=oe({watch:{},name:"xxxComponent"}),Lo=oe({...Uo,setup(d){const m=K,p=Bt,_=s(!1),A=s(!1),S=s(!0),E=s(0),T=s(""),n=s(!1),e=s(),a=s(!1),f=s(""),H=s(""),u=s(""),v=s(""),R=s(""),N=s(""),F="Add new medication",M=Te(),L=Ca(),$=z(()=>L.selectedMedicalAllergiesList),W=z(()=>M.selectedMedicalDrugsList),V=z(()=>M.partialOPDdrugList),O=z(()=>M.nonPharmalogicalTherapyAndOtherNotes),g=["first","second","third"],o=s(),D=s(),q=s(),ee=s(!1),he=s(!1),xe=s("Show more notes"),He=s(),Ue=s(),ve=s(),Pe=z(()=>M.editingDrugItem),Be=s("Select a route"),C=s(!1),I=s("Select frequency"),Y=s(!1),se=s("Select drug"),Le=s(!1),ae=s(),te=s(),be=s(),Ie=s([]),wa=s([{concept_id:11797,name:"Buccal",concept_name_id:null,id:1769},{concept_id:11794,name:"Intradermal",concept_name_id:null,id:6284},{concept_id:11795,name:"Intramuscular (IM)",concept_name_id:null,id:6285},{concept_id:11799,name:"Intraosseous",concept_name_id:null,id:6286},{concept_id:11793,name:"Intravenous (IV)",concept_name_id:null,id:6295},{concept_id:3327,name:"Oral",concept_name_id:null,id:8686},{concept_id:11800,name:"Other method of prescription",concept_name_id:null,id:8920},{concept_id:11792,name:"Rectally",concept_name_id:null,id:10785},{concept_id:11798,name:"Subcutaneous",concept_name_id:null,id:12342},{concept_id:11796,name:"Sublingual",concept_name_id:null,id:12344},{concept_id:11792,name:"Rectally",concept_name_id:null,id:14078},{concept_id:11793,name:"Intravenous (IV)",concept_name_id:null,id:14079},{concept_id:11794,name:"Intradermal",concept_name_id:null,id:14080},{concept_id:11795,name:"Intramuscular (IM)",concept_name_id:null,id:14081},{concept_id:11796,name:"Sublingual",concept_name_id:null,id:14082},{concept_id:11797,name:"Buccal",concept_name_id:null,id:14083},{concept_id:11798,name:"Subcutaneous",concept_name_id:null,id:14084},{concept_id:11799,name:"Intraosseous",concept_name_id:null,id:14085},{concept_id:11800,name:"Other method of prescription",concept_name_id:null,id:14086}]),Aa=z(()=>Ie.value.length?Ie.value:wa.value);function Oa(b){ae.value=b}async function xa(){return await Mt()}async function Pa(b=5,h=1e3){let k=0;for(;k<b&&(Ie.value=await xa(),!(Ie.value.length>0));)k++,await new Promise(U=>setTimeout(U,h));Ie.value.length===0&&console.warn("Failed to fetch route list after maximum retries.")}_e(async()=>{const b=new Vt,{previousDrugPrescriptions:h,previousClinicalNotes:k,previousDrugAllergies:U}=await b.getPatientEncounters();o.value=h,D.value=Object.entries(k)[0];const[,...G]=Object.entries(k);q.value=G,He.value=Object.entries(U)[0];const[,...Q]=Object.entries(U);Ue.value=Q,await Pa()}),pe(()=>H.value,async b=>{Ea()}),pe(()=>u.value,async b=>{Xe()});function Sa(){if(De.isEmpty(ae.value)==!0)return C.value=!0,!1;if(De.isEmpty(ae.value)==!1)return C.value=!1,!0}function Ta(){if(De.isEmpty(te.value)==!0)return Y.value=!0,!1;if(De.isEmpty(te.value)==!1)return Y.value=!1,!0}function Na(){if(De.isEmpty(be.value)==!0)return Le.value=!0,!1;if(De.isEmpty(be.value)==!1)return Le.value=!1,!0}function Ia(){S.value=!S.value,_.value=!0,n.value=!1,a.value=!1}async function Ea(){return ea(H.value)?n.value=!1:(T.value="please enter a number",n.value=!0),n.value}async function Xe(){return ea(u.value)?a.value=!1:(e.value="please enter a number",a.value=!0),a.value}async function Qe(){const b=await Xe(),h=Ta(),k=Na(),U=Sa();return!b&&h==!0&&k==!0&&U==!0}function Fa(b){te.value=b}async function Ze(){try{const b=()=>ve.value.dose_strength!=null&&ve.value.dose_strength?Math.trunc(ve.value.dose_strength):1;if(Pe.value!==null){if(!await Qe()){me("Please enter correct data values",4e3);return}const k=Fe.getSessionDate(),U=aa(k,parseInt(u.value));let G=!1;qe(ve.value)==!0&&(G=!0);const Q={drugName:f.value,dose:b(),frequency:te.value.label,frequency_code:te.value.code,duration:u.value,prescription:U,drug_id:N.value,units:R.value,route_concept_id:ae.value.concept_id,route_name:ae.value.name,highlightbackground:G},Ge=Te();console.log(Ge.setSelectedMedicalDrugsList([Q])),Ge.editingDrugItem=null,S.value=!0}else{if(!await Qe()){me("Please enter correct data values",4e3);return}La();const k=Fe.getSessionDate(),U=aa(k,parseInt(u.value));let G=!1;qe(ve.value)==!0&&(G=!0);const Q={drugName:f.value,dose:b(),frequency:te.value.label,frequency_code:te.value.code,duration:u.value,prescription:U,drug_id:N.value,units:R.value,route_concept_id:ae.value.concept_id,route_name:ae.value.name,highlightbackground:G};Te().setSelectedMedicalDrugsList([Q])}N.value="",f.value="",H.value="",te.value=null,u.value="",v.value="",E.value++,be.value=null,ae.value=null}catch(b){console.error("Error saving data:",b)}}async function Ha(b){const h=b,G=await bt.getOfflineOPDDrugs({name:h,page:1,page_size:10});G.map(Q=>({label:Q.name,value:Q.name,other:Q})),M.setPartialOPDdrugList(G)}function qe(b){const h=[];return $.value.forEach(U=>{U.selected&&h.push(U.concept_id)}),Ba([b],h)==!0?(me("Client is allergic to the selected medication",4e6),!0):!1}function Ba(b,h){try{return b.some(k=>h.includes(k.concept_id))}catch(k){return!1}}function Ma(b){b&&(f.value=b.name,N.value=b.drug_id,R.value=b.units,ve.value=b,qe(b))}function Va(b){const h=W.value[b],k=Te();k.removeDrugById(h.drug_id),k.editingDrugItem=h,N.value="",f.value="",H.value="",te.value=null,u.value="",v.value="",be.value=null,ae.value=null,N.value=h.drug_id,f.value=h.drugName,H.value=h.dose,te.value={label:h.frequency,code:h.frequency_code},u.value=h.duration,v.value=h.prescription;const U=V.value.find(G=>G.name===h.drugName);U&&(be.value=U),ae.value={concept_id:h.route_concept_id,name:h.route_name},S.value=!1,E.value++}function Ya(){if(Pe.value!==null){N.value="",f.value="",H.value="",te.value=null,u.value="",v.value="",be.value=null,ae.value=null;const b=Te();b.setSelectedMedicalDrugsList([Pe.value]),b.editingDrugItem=null}S.value=!0,E.value++}function $a(b){W.value.splice(b,1),E.value++,me("you have removed a drug from list",6e3)}function Ra(b){let h=b.target.value;Ua(h)}function Ua(b){Te().setNonPharmalogicalTherapyAndOtherNotes(b)}function ea(b){return/^[0-9]+$/.test(b)}function aa(b,h){const k=new Date(b);k.setDate(k.getDate()+h);const U=k.getFullYear(),G=String(k.getMonth()+1).padStart(2,"0"),Q=String(k.getDate()).padStart(2,"0");return"".concat(U,"-").concat(G,"-").concat(Q)}function La(){_.value=!1,A.value=!0,S.value=!0}function qa(b){g.filter(k=>k!==b.detail.value);const h=b.detail.value;h!==void 0?h=="third"&&(xe.value="Show less notes",he.value=!ee.value):(xe.value="Show more notes",he.value=!ee.value)}function Ga(b){return b[1]}function Wa(b){(b.key==="Enter"||b.key==="ArrowDown")&&(b.preventDefault(),Ze())}const Se=z(()=>[{showAddItemButton:!0,addItemButton:!0,name:Pe.value!==null?"Update":"ADD",fn:Ze},{showAddItemButton:!0,addItemButton:!0,name:"CANCEL",fn:ja}]),ja=async()=>{yt(vt,{class:"otherVitalsModal"},!0,{message:"Are you sure you want to cancel?"},{cancel:U=>{},confirm:async U=>{U.detail==!0&&Ya()}})};return(b,h)=>(c(),x(i(_a),null,{default:l(()=>[r("div",fo,[r("div",yo,[t(ka)])]),r("div",vo,[t(i(ne),{lines:"none",class:"section-header"},{default:l(()=>[t(i(Ve),{icon:i(Ne),class:"section-icon"},null,8,["icon"]),t(i(re),{class:"section-title",style:{"margin-top":"12px"}},{default:l(()=>[...h[9]||(h[9]=[B("Medication",-1)])]),_:1})]),_:1}),r("div",bo,[(c(),x(Ft,{_selectedMedicalDrugsList:W.value,onEditItem:Va,onRemoveItem:$a,key:E.value,class:"medication-list"},null,8,["_selectedMedicalDrugsList"])),S.value?y("",!0):(c(),w("div",go,[r("div",_o,[h[10]||(h[10]=r("label",{class:"input-label"},"Medication",-1)),t(i(Ee),{modelValue:be.value,"onUpdate:modelValue":[h[0]||(h[0]=k=>be.value=k),h[1]||(h[1]=k=>Ma(k))],options:V.value,searchable:!0,"close-on-select":!0,"show-labels":!1,placeholder:"Select medication",label:"name","track-by":"drug_id",onSearchChange:h[2]||(h[2]=k=>Ha(k))},{option:l(k=>[r("div",Co,P(k.option.name),1)]),_:1},8,["modelValue","options"]),Le.value?(c(),w("div",Do,P(se.value),1)):y("",!0)]),r("div",ko,[r("div",wo,[h[11]||(h[11]=r("label",{class:"input-label"},"Route",-1)),t(i(Ee),{modelValue:ae.value,"onUpdate:modelValue":[h[3]||(h[3]=k=>ae.value=k),h[4]||(h[4]=k=>Oa(k))],options:Aa.value,searchable:!0,"close-on-select":!0,"show-labels":!1,placeholder:"Select route",label:"name","track-by":"concept_id",disabled:!1},null,8,["modelValue","options"]),C.value?(c(),w("div",Ao,P(Be.value),1)):y("",!0)]),r("div",Oo,[h[12]||(h[12]=r("label",{class:"input-label"},"Frequency",-1)),t(i(Ee),{modelValue:te.value,"onUpdate:modelValue":[h[5]||(h[5]=k=>te.value=k),h[6]||(h[6]=k=>Fa(k))],options:i(p),searchable:!0,"close-on-select":!0,"show-labels":!1,placeholder:"Select frequency",label:"label","track-by":"code"},null,8,["modelValue","options"]),Y.value?(c(),w("div",xo,P(I.value),1)):y("",!0)]),r("div",Po,[h[13]||(h[13]=r("label",{class:"input-label"},"Duration (days)",-1)),t(i(it),{modelValue:u.value,"onUpdate:modelValue":h[7]||(h[7]=k=>u.value=k),type:"number",inputmode:"numeric",pattern:"[0-9]*",fill:"outline",placeholder:"Enter duration",onKeydown:Wa},null,8,["modelValue"]),a.value?(c(),w("div",So,P(e.value),1)):y("",!0)])]),r("div",To,[Se.value[0].addItemButton?(c(),x(ke,{key:0,name:Se.value[0].name,icon:i(ba),"onClicked:btn":Se.value[0].fn,class:"save-button"},null,8,["name","icon","onClicked:btn"])):y("",!0),Se.value[1].addItemButton?(c(),x(ke,{key:1,name:Se.value[1].name,icon:i(ga),"onClicked:btn":Se.value[1].fn,class:"cancel-button"},null,8,["name","icon","onClicked:btn"])):y("",!0)])])),S.value?(c(),x(ke,{key:1,name:F,icon:i(Ye),fontWeight:"600","onClicked:btn":Ia,class:"add-new-button"},null,8,["icon"])):y("",!0)])]),r("div",No,[t(i(ne),{lines:"none",class:"section-header"},{default:l(()=>[t(i(Ve),{icon:i(lt),class:"section-icon"},null,8,["icon"]),t(i(re),{class:"section-title"},{default:l(()=>[...h[14]||(h[14]=[B("Non-pharmacological therapy and other notes",-1)])]),_:1})]),_:1}),r("div",Io,[t(Ht,{class:"intervention-component"}),r("div",Eo,[t(i(ne),{class:"notes-input-item"},{default:l(()=>[t(i(Ve),{slot:"start",icon:i(m).editPen,class:"edit-icon","aria-hidden":"true"},null,8,["icon"]),t(i(rt),{modelValue:O.value,"onUpdate:modelValue":h[8]||(h[8]=k=>O.value=k),onIonInput:Ra,placeholder:"Enter notes here...","auto-grow":!0,class:"notes-textarea",fill:"outline",style:{"--padding-start":"16px"}},null,8,["modelValue"])]),_:1})]),t(i(Ke),{ref:"accordionGroup",class:"previous-notes"},{default:l(()=>[t(i(ge),{value:"fourth","toggle-icon-slot":"start"},{default:l(()=>[t(i(ne),{slot:"header",color:"light",class:"previous-notes-header"},{default:l(()=>[t(i(re),null,{default:l(()=>[...h[15]||(h[15]=[B("Previous visit notes",-1)])]),_:1})]),_:1}),r("div",Fo,[r("div",Ho,[(c(!0),w(Z,null,ue(D.value,(k,U)=>(c(),w(Z,{key:U},[U===1?(c(),w("div",Bo,[(c(!0),w(Z,null,ue(k,(G,Q)=>(c(),w("div",{key:Q},[r("div",Mo,P(G.date),1),r("div",Vo,P(G.notes),1)]))),128))])):y("",!0)],64))),128)),t(i(Ke),{onIonChange:qa},{default:l(()=>[t(i(ge),{value:"third","toggle-icon-slot":"start"},{default:l(()=>[t(i(ne),{slot:"header",color:"light",class:"show-more-header"},{default:l(()=>[t(i(re),{color:"primary"},{default:l(()=>[B(P(xe.value),1)]),_:1})]),_:1}),r("div",Yo,[(c(!0),w(Z,null,ue(q.value,(k,U)=>(c(),w("div",{key:U,class:"note-entry"},[(c(!0),w(Z,null,ue(Ga(k),(G,Q)=>(c(),w("div",{key:Q},[r("div",$o,P(G.date),1),r("div",Ro,P(G.notes),1)]))),128))]))),128))])]),_:1})]),_:1})])])]),_:1})]),_:1},512)])])]),_:1}))}}),us=Ae(Lo,[["__scopeId","data-v-14c793af"]]),qo=oe({name:"xxxComponent"}),Go=oe({...qo,emits:["dataSaved"],setup(d,{emit:m}){const p=s(),_=s("gurdian phone number");s(!0),s(!0);const A=s(!0),S=s(),E=s();_e(async()=>{Ue()});const T=[{placeHolder:{default:"Enter time of death if known"},property_name:"timeOfDeath",dataHandler:M,dataValue:s(),show_error:s(!1),error_message:"Time required",type:"time",skip_validation:!1},{placeHolder:{default:"Enter time arrived"},property_name:"timeArrived",dataHandler:L,dataValue:s(),show_error:s(!1),error_message:"Time required",type:"time",skip_validation:!1},{placeHolder:{default:"Enter time confirming death"},property_name:"timeOfDeathConfirmation",dataHandler:$,dataValue:s(),show_error:s(!1),error_message:"Time required",skip_validation:!1}],n=[{placeHolder:{default:"Enter date of death"},property_name:"dateOfDeath",dataHandler:W,dataValue:s(),show_error:s(!1),error_message:"Date required",type:"date",skip_validation:!1},{placeHolder:{default:"Enter date arrived"},property_name:"dateArrived",dataHandler:V,dataValue:s(),show_error:s(!1),error_message:"Date required",type:"date",skip_validation:!1},{placeHolder:{default:"Enter date confirming death"},property_name:"dateOfDeathConfirmation",dataHandler:O,dataValue:s(),show_error:s(!1),error_message:"Date required",type:"date",skip_validation:!1}],e=[{lblTxt:"Was the individual pregnant at the time of death?",value:s(!1),disable_checkbox:s(!0)}],a=[{placeHolder:"Enter place of death",property_name:"placeOfDeath",dataHandler:g,dataValue:s(),show_error:s(!1),error_message:"Input required, Only letters allowed",type:"text",skip_validation:!1},{placeHolder:"Enter name of guardian",property_name:"nameOfGuardian",dataHandler:o,dataValue:s(),show_error:s(!1),error_message:"Input required, Only letters allowed",type:"text",skip_validation:!1},{placeHolder:"Enter name of person confirming death",property_name:"nameOfPersonConfirmindDeath",dataHandler:D,dataValue:s(),show_error:s(!1),error_message:"Input required, Only letters allowed",type:"text",skip_validation:!1},{placeHolder:"Enter position of the person confirming death",property_name:"positionOfthePersonConfirmingDeath",dataHandler:q,dataValue:s(),show_error:s(!1),error_message:"Input required, Only letters allowed",type:"text",skip_validation:!1},{placeHolder:"Enter medical council registration number of the person confirming death",property_name:"medicalConcilRegistrationNumberOfThePersonConfirmingDeath",dataHandler:ee,dataValue:s(),show_error:s(!1),error_message:"Input required, Only letters and numbers are allowed",type:"alphanumeric",skip_validation:!1},{placeHolder:"Other (specify)",property_name:"otherNotes",dataHandler:he,dataValue:s(),show_error:s(!1),error_message:"Input required, Only letters allowed",dissabled:A.value,type:"text",skip_validation:!0}],f=[{showAddItemButton:!0,addItemButton:!0,name:"save",btnFill:"clear",fn:ve},{showAddItemButton:!0,addItemButton:!0,name:"cancel",btnFill:"clear",fn:R}],H=s([{id:1,name:"Natural",selected:!1},{id:2,name:"Accident",selected:!1},{id:3,name:"Homicide",selected:!1},{id:4,name:"Suicide",selected:!1},{id:5,name:"Pending investigation",selected:!1},{id:6,name:"Could not be determined",selected:!1},{id:7,name:"Other - specify",selected:!1}]),u=s([{id:1,name:"Motor vehicle (passenger)",selected:!1},{id:2,name:"Motor vehicle (pedestrian)",selected:!1},{id:3,name:"Drowning",selected:!1},{id:4,name:"Other - specify",selected:!1}]),v=[{multi_Selection:!1,manner_of_death_Selection_value:s(),show_list_label:!0,unqueId:"qwerty",name_of_list:"Manner of death ",property_name:"mannerOfDeath",placeHolder:"Choose one",items:H.value,listUpdatedFN:xe,listFilteredFN:()=>{},use_internal_filter:!0,disabled:s(!1),show_error:s(!1),error_message:"selection required"},{multi_Selection:!1,show_list_label:!0,unqueId:"qwerty1hjkn",name_of_list:"How did it occur?",property_name:"howDiditOccur",placeHolder:"Choose one",items:u.value,listUpdatedFN:He,listFilteredFN:()=>{},use_internal_filter:!0,disabled:s(!0),show_error:s(!1),error_message:"selection required"}];function R(){F()}const N=m;function F(C={dataSaved:!0}){N("dataSaved",C)}function M(C){T[0].dataValue.value=C}function L(C){T[1].dataValue.value=C}function $(C){T[2].dataValue.value=C}function W(C){const I={day:C.value.day,month:C.value.month,year:C.value.year,formattedDate:C.value.formattedDate};n[0].dataValue.value=I}function V(C){const I={day:C.value.day,month:C.value.month,year:C.value.year,formattedDate:C.value.formattedDate};n[1].dataValue.value=I,console.log(n[2].dataValue.value)}function O(C){const I={day:C.value.day,month:C.value.month,year:C.value.year,formattedDate:C.value.formattedDate};n[2].dataValue.value=I,console.log(n[2].dataValue.value)}function g(C){const I=C.target.value;a[0].dataValue.value=I}function o(C){const I=C.target.value;a[1].dataValue.value=I}function D(C){const I=C.target.value;a[2].dataValue.value=I}function q(C){const I=C.target.value;a[3].dataValue.value=I}function ee(C){const I=C.target.value;a[4].dataValue.value=I}function he(C){const I=C.target.value;a[5].dataValue.value=I}function xe(C){H.value.forEach(Y=>Y.selected=!1);const I=H.value.find(Y=>Y.id==C.id);v[1].disabled.value=C.name!="Accident",I.selected=!0}function He(C){console.log("listUpdated",C),u.value.forEach(Y=>Y.selected=!1);const I=u.value.find(Y=>Y.id==C.id);I.selected=!0}function Ue(){const I=new Da().isChildBearing;I==!0&&(e[0].disable_checkbox.value=!1),I==!1&&(e[0].disable_checkbox.value=!0)}function ve(){We(a),We(n),We(T),Pe();const C=De.merge(je(a),je(n),je(T),Be(v[0]),Be(v[1]));console.log(C)}function Pe(){const C=H.value.filter(I=>I.selected);if(C.length==0)v[0].show_error.value=!0;else if(v[0].show_error.value=!1,C[0].name=="Accident"){const I=u.value.filter(Y=>Y.selected);v[1].show_error.value=I.length==0}}function Be(C){const I=[];let Y={};return C.items.forEach(se=>{se.selected==!0&&I.push({property_name:C.property_name,name:se.name})}),I.length>0&&(Y[I[0].property_name]=I[0].name),Y}return(C,I)=>{const Y=ye("ion-label");return c(),w(Z,null,[t(i(ce),{class:"checkbox_content md"},{default:l(()=>[t(i(j),null,{default:l(()=>[t(Ce,{placeholder:a[0].placeHolder,icon:i(ya),inputValue:a[0].dataValue.value,"onUpdate:inputValue":a[0].dataHandler},null,8,["placeholder","icon","inputValue","onUpdate:inputValue"]),r("div",null,[a[0].show_error.value?(c(),x(Y,{key:0,class:"error-label"},{default:l(()=>[B(P(a[0].error_message),1)]),_:1})):y("",!0)])]),_:1}),t(i(j),null,{default:l(()=>[t(fa,{place_holder:n[0].placeHolder,onDateUpDated:n[0].dataHandler,date_prop:""},null,8,["place_holder","onDateUpDated"]),r("div",null,[n[0].show_error.value?(c(),x(Y,{key:0,class:"error-label"},{default:l(()=>[B(P(n[0].error_message),1)]),_:1})):y("",!0)])]),_:1})]),_:1}),t(i(ce),null,{default:l(()=>[t(i(j),null,{default:l(()=>[t(ze,{place_holder:T[0].placeHolder,onTimeUpDated:T[0].dataHandler,time_prop:""},null,8,["place_holder","onTimeUpDated"]),r("div",null,[T[0].show_error.value?(c(),x(Y,{key:0,class:"error-label"},{default:l(()=>[B(P(T[0].error_message),1)]),_:1})):y("",!0)])]),_:1}),t(i(j))]),_:1}),t(i(ce),{class:"checkbox_content md"},{default:l(()=>[t(i(j),null,{default:l(()=>[t(Ce,{placeholder:a[1].placeHolder,icon:i(pa),inputValue:a[1].dataValue.value,"onUpdate:inputValue":a[1].dataHandler},null,8,["placeholder","icon","inputValue","onUpdate:inputValue"]),r("div",null,[a[1].show_error.value?(c(),x(Y,{key:0,class:"error-label"},{default:l(()=>[B(P(a[1].error_message),1)]),_:1})):y("",!0)])]),_:1}),t(i(j),null,{default:l(()=>[t(i(ct),{value:e[0].value,alignment:"start",class:"ion-lblCls",disabled:e[0].disable_checkbox.value},{default:l(()=>[B(P(e[0].lblTxt),1)]),_:1},8,["value","disabled"])]),_:1})]),_:1}),t(i(ce),null,{default:l(()=>[t(i(j),null,{default:l(()=>[t(Ce,{placeholder:_.value,icon:i(dt),inputValue:p.value},null,8,["placeholder","icon","inputValue"])]),_:1}),t(i(j))]),_:1}),t(i(ce),null,{default:l(()=>[t(i(j),null,{default:l(()=>[t(fa,{place_holder:n[1].placeHolder,onDateUpDated:n[1].dataHandler,date_prop:""},null,8,["place_holder","onDateUpDated"]),r("div",null,[n[1].show_error.value?(c(),x(Y,{key:0,class:"error-label"},{default:l(()=>[B(P(n[1].error_message),1)]),_:1})):y("",!0)])]),_:1}),t(i(j),null,{default:l(()=>[t(ze,{place_holder:T[1].placeHolder,onTimeUpDated:T[1].dataHandler,time_prop:""},null,8,["place_holder","onTimeUpDated"]),r("div",null,[T[1].show_error.value?(c(),x(Y,{key:0,class:"error-label"},{default:l(()=>[B(P(T[1].error_message),1)]),_:1})):y("",!0)])]),_:1})]),_:1}),t(i(ce),null,{default:l(()=>[t(i(j),null,{default:l(()=>[t(i(Ee),{modelValue:S.value,"onUpdate:modelValue":[I[0]||(I[0]=se=>S.value=se),I[1]||(I[1]=se=>xe(se))],multiple:!1,taggable:!1,"hide-selected":!0,"close-on-select":!0,openDirection:"bottom","tag-placeholder":"Manner of death",placeholder:"Manner of death",selectLabel:"",label:"name",searchable:!0,"track-by":"id",options:H.value},null,8,["modelValue","options"]),r("div",null,[v[0].show_error.value?(c(),x(Y,{key:0,class:"error-label"},{default:l(()=>[B(P(v[0].error_message),1)]),_:1})):y("",!0)])]),_:1}),t(i(j),null,{default:l(()=>[t(i(Ee),{modelValue:E.value,"onUpdate:modelValue":[I[2]||(I[2]=se=>E.value=se),I[3]||(I[3]=se=>He(se))],multiple:!1,taggable:!1,"hide-selected":!0,"close-on-select":!0,openDirection:"bottom","tag-placeholder":"How did it occur?",placeholder:"How did it occur?",selectLabel:"",label:"name",disabled:v[1].disabled.value,searchable:!0,"track-by":"id",options:u.value},null,8,["modelValue","disabled","options"]),r("div",null,[v[1].show_error.value?(c(),x(Y,{key:0,class:"error-label"},{default:l(()=>[B(P(v[1].error_message),1)]),_:1})):y("",!0)])]),_:1})]),_:1}),t(i(ce),null,{default:l(()=>[t(i(j),null,{default:l(()=>[t(Ce,{placeholder:a[5].placeHolder,icon:i(ha),inputValue:a[5].dataValue.value,disabled:A.value,"onUpdate:inputValue":a[5].dataHandler},null,8,["placeholder","icon","inputValue","disabled","onUpdate:inputValue"]),r("div",null,[a[5].show_error.value?(c(),x(Y,{key:0,class:"error-label"},{default:l(()=>[B(P(a[5].error_message),1)]),_:1})):y("",!0)])]),_:1})]),_:1}),t(i(ce),null,{default:l(()=>[t(i(j),null,{default:l(()=>[t(ze,{place_holder:T[2].placeHolder,onTimeUpDated:T[2].dataHandler,time_prop:""},null,8,["place_holder","onTimeUpDated"]),r("div",null,[T[2].show_error.value?(c(),x(Y,{key:0,class:"error-label"},{default:l(()=>[B(P(T[2].error_message),1)]),_:1})):y("",!0)])]),_:1}),t(i(j),null,{default:l(()=>[t(Ce,{placeholder:a[2].placeHolder,icon:i(pa),inputValue:a[2].dataValue.value,"onUpdate:inputValue":a[2].dataHandler},null,8,["placeholder","icon","inputValue","onUpdate:inputValue"]),r("div",null,[a[2].show_error.value?(c(),x(Y,{key:0,class:"error-label"},{default:l(()=>[B(P(a[2].error_message),1)]),_:1})):y("",!0)])]),_:1})]),_:1}),t(i(ce),null,{default:l(()=>[t(i(j),null,{default:l(()=>[t(Ce,{placeholder:a[3].placeHolder,icon:i(Ne),inputValue:a[3].dataValue.value,"onUpdate:inputValue":a[3].dataHandler},null,8,["placeholder","icon","inputValue","onUpdate:inputValue"]),r("div",null,[a[3].show_error.value?(c(),x(Y,{key:0,class:"error-label"},{default:l(()=>[B(P(a[3].error_message),1)]),_:1})):y("",!0)])]),_:1}),t(i(j),null,{default:l(()=>[t(Ce,{placeholder:a[4].placeHolder,icon:i(ha),inputValue:a[4].dataValue.value,"onUpdate:inputValue":a[4].dataHandler},null,8,["placeholder","icon","inputValue","onUpdate:inputValue"]),r("div",null,[a[4].show_error.value?(c(),x(Y,{key:0,class:"error-label"},{default:l(()=>[B(P(a[4].error_message),1)]),_:1})):y("",!0)])]),_:1})]),_:1}),(c(),x(i(ce),{key:0,class:"spc_btwn"},{default:l(()=>[f[0].addItemButton?(c(),x(ke,{key:0,name:f[0].name,fill:f[0].btnFill,icon:i(ba),"onClicked:btn":f[0].fn},null,8,["name","fill","icon","onClicked:btn"])):y("",!0),f[1].addItemButton?(c(),x(ke,{key:1,name:f[1].name,fill:f[1].btnFill,icon:i(ga),"onClicked:btn":f[1].fn},null,8,["name","fill","icon","onClicked:btn"])):y("",!0)]),_:1}))],64)}}}),Wo=Ae(Go,[["__scopeId","data-v-0aad2f08"]]),jo={class:"dash_box"},zo={key:1},Ko=oe({name:"xxxComponent"}),Jo=oe({...Ko,setup(d){const m=s("No outcome created yet"),p=s(!1),_=s("please select a type"),A=s(!0),S=s(""),E=s(!0),T=s(!1),n=gt(),e=z(()=>n.outcomes),a=s(!1),f=s(!1),H=s(!1),u=s(!1),v=s(!1),R=s(!1),N=s([{name:"Admitted for short stay",selected:!1},{name:"Referred out",selected:!1},{name:"Discharged Home",selected:!1},{name:"Send to Another Clinic",selected:!1}]),F=[{multi_Selection:!1,show_list_label:!0,unqueId:"qwerty2",name_of_list:"Add new outcome",placeHolder:"Choose one",items:N.value,listUpdatedFN:M,listFilteredFN:()=>{},use_internal_filter:!0,disabled:s(!1)}];function M(o){N.value=o,N.value.forEach(D=>{D.selected==!0&&(S.value=D.name)})}_e(async()=>{$()}),pe(()=>S.value,async o=>{a.value==!0?a.value=!1:O()}),pe(()=>e.value.length,async o=>{$()});function L(){N.value.forEach(o=>{o.selected=!1}),S.value=""}function $(){e.value.length>0?E.value=!1:e.value.length==0&&T.value==!1&&(E.value=!0)}function W(o){e.value.splice(o,1)}const V=o=>{};async function O(o=!0){const D=S.value;console.log(D),S.value=D;const q=S.value;q==N.value[0].name?H.value=!0:H.value=!1,q==N.value[1].name?(u.value=!0,console.log("show_discharged_options is set to true")):u.value=!1,q==N.value[2].name?(v.value=!0,console.log("show_discharged_options is set to true")):v.value=!1,q==N.value[3].name?R.value=!0:R.value=!1}function g(){f.value=!1,H.value=!1,u.value=!1,v.value=!1,L()}return(o,D)=>{const q=ye("ion-row");return c(),x(i(_a),null,{default:l(()=>[t(q,null,{default:l(()=>[t(i(j),null,{default:l(()=>[(c(),x(Yt,{key:0,"onUpdate:removeItem":W,"onUpdate:editItem":V,displayData:e.value},null,8,["displayData"]))]),_:1})]),_:1}),E.value?(c(),x(q,{key:0},{default:l(()=>[r("span",jo,P(m.value),1)]),_:1})):y("",!0),A.value?(c(),w("div",zo,[t(q,null,{default:l(()=>[t(i(j),null,{default:l(()=>[t(_t,{multiSelection:F[0].multi_Selection,show_label:F[0].show_list_label,uniqueId:F[0].unqueId,name_of_list:F[0].name_of_list,choose_place_holder:F[0].placeHolder,"items_-list":F[0].items,use_internal_filter:F[0].use_internal_filter,disabled:F[0].disabled.value,onItemListUpDated:F[0].listUpdatedFN,onItemListFiltered:F[0].listFilteredFN},null,8,["multiSelection","show_label","uniqueId","name_of_list","choose_place_holder","items_-list","use_internal_filter","disabled","onItemListUpDated","onItemListFiltered"]),r("div",null,[p.value?(c(),x(i(re),{key:0,class:"error-label"},{default:l(()=>[B(P(_.value),1)]),_:1})):y("",!0)])]),_:1})]),_:1})])):y("",!0),H.value?(c(),x($t,{key:2,onDataSaved:g,selected_ward_prop:"",admitted_other_props:""})):y("",!0),u.value?(c(),x(Rt,{key:3,onDataSaved:g,selected_referral_data:"",selected_other_referral_data:""})):y("",!0),v.value?(c(),x(Ut,{key:4,onDataSaved:g,selected_discharged_prop:"",selected_discharged_data:""})):y("",!0),f.value?(c(),x(Wo,{key:5,onDataSaved:g})):y("",!0),R.value?(c(),x(Lt,{key:6,onDataSaved:g})):y("",!0)]),_:1})}}}),ms=Ae(Jo,[["__scopeId","data-v-fc637de7"]]);export{ds as C,ms as O,zt as P,Kn as _,Zn as a,us as b};
