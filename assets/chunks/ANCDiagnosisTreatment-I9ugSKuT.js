import{d as H,r as m,c as V,a as W,e as C,f as M,k as c,l as a,J as f,u as s,aV as S,b2 as P,bw as j,F as q,am as K,O as Q,ab as X,i as R,bT as Z,v as k,ae as ee}from"./vendor-DXMRec6a.js";import{u as ne,_ as ie}from"./useFormWizard-B5Cjgitc.js";import{y as L,n as ae,z as x,J as O,b as Y,F as A,u as z,x as F,I as J,t as B,$ as U,T as te,D as oe}from"../index-BqLLtAX6.js";import{D as se}from"./DemographicBar-CCcOgUDv.js";import{P as re}from"./patient_diagnosis_service-rNRTV9fT.js";import"./lodash-NJiRuGo9.js";import"./apexcharts-89lqyBgH.js";const le={class:"custom-card"},de=H({__name:"Diagnosis",setup(h,{expose:e}){const i=m([]),{formRef:v}=L(),l=ae,r=async d=>{const t=d.trim().toLowerCase()||"";return i.value=await re.getDiagnosis(t,1,15),i.value},g=V(()=>[{componentType:"Heading",name:"Diagnosis"},{componentType:"checkboxField",type:"multiple",name:"Diagnosis",twoColumns:!0,options:[{label:"Hypertension",value:"Hypertension"},{label:"Pre-eclampsia",value:"Pre-Eclampsia"},{label:"Pre-eclampsia with Severe Features",value:"severe pre-eclampsia"},{label:"HIV",value:"HIV"},{label:"Hepatitis B",value:"Hepatitis B"},{label:"Hepatitis C",value:"Hepatitis C"},{label:"Syphilis",value:"Syphilis"},{label:"None",value:"None",exclusive:!0}],obsValueType:"value_coded"},{name:"Other diagnosis",header:"Other Diagnosis",componentType:"multiSelectInputField",trackBy:"name",isMultiple:!0,options:i.value,icon:l.search,onSearchChange:r,placeholder:"Search and select diagnosis",obsValueType:"value_coded",condition:d=>{var t;return!((t=d.diagnosisCheckboxes)!=null&&t.includes("None"))}}]);return W(async()=>{await r("")}),e({onSubmit:async()=>{var T;const d=(T=v.value)==null?void 0:T.getFormValues(),t=await O.buildObsValues(d);if(!(t.length<=0))return await O.addObsToEncounterPatient(t,Y.DIAGNOSIS),A("Diagnosis saved successful"),!0}}),(d,t)=>(M(),C("div",null,[c("div",le,[a(s(S),null,{default:f(()=>[a(x,{formData:g.value,ref_key:"formRef",ref:v},null,8,["formData"])]),_:1})])]))}}),ue=()=>({medicationDispensedForm:V(()=>[{componentType:"Heading",name:"Medication Dispensed"},{componentType:"radioButtonField",header:"Aspirin provided?",name:"Aspirin provided",obsValueType:"value_text",type:"inline",options:[{label:"Yes",value:"Yes"},{label:"No",value:"No"}]},{grid:{s:"0.5"}},{componentType:"inputField",unit:"mg",header:"Amount of daily aspirin provided until delivery",name:"Amount of daily aspirin provided",obsValueType:"value_numeric",grid:{s:"6"},condition:e=>e["Aspirin provided"]==="Yes"},{grid:{s:"5.5"}},{grid:{s:"0.5"}},{componentType:"radioButtonField",header:"Reason aspirin not prescribed",name:"Reason aspirin not prescribed",obsValueType:"value_text",type:"inline",grid:{s:"11.5"},condition:e=>e["Aspirin provided"]==="No",options:[{label:"Side effects",value:"Side effects"},{label:"Stock-out",value:"Stock-out"},{label:"Gestational less than 13 weeks",value:"Gestational less than 13 weeks"},{label:"Allergy to medication",value:"Allergy to medication"},{label:"Other",value:"Other"}]},{grid:{s:"0.5"}},{componentType:"inputField",header:"specify",name:"_Reason aspirin not prescribed",obsValueType:"value_text",grid:{s:"11.5"},condition:e=>e["Aspirin provided"]==="No"&&e["Reason aspirin not prescribed"]==="Other"},{componentType:"Dashes"},{componentType:"radioButtonField",header:"SulfadoxineÂ  Pyrimethamine (SP)",name:"SP",obsValueType:"value_text",type:"inline",options:[{label:"Yes",value:"Yes"},{label:"No",value:"No"}]},{grid:{s:"0.5"}},{componentType:"inputField",unit:"mg",header:"Number of tablets given",name:"number of SP tablets given",obsValueType:"value_numeric",grid:{s:"6"},condition:e=>e.SP==="Yes"},{componentType:"Dashes"},{grid:{s:"12"}},{componentType:"radioButtonField",header:"Iron prescribed?",name:"Iron prescription",obsValueType:"value_text",type:"inline",options:[{label:"Yes",value:"Yes"},{label:"No",value:"No"}]},{grid:{s:"0.5"}},{componentType:"radioButtonField",header:"Type of Iron supplement dosage provided",name:"Type of Iron supplement dosage",obsValueType:"value_text",type:"inline",grid:{s:"11.5"},condition:e=>e["Iron prescription"]==="Yes",options:[{label:"Daily",value:"Daily"},{label:"Weekly",value:"Weekly"}]},{grid:{s:"0.5"}},{componentType:"inputField",unit:"mg",header:"Amount of Iron provided till delivery in mg",name:"iron Amount",obsValueType:"value_numeric",grid:{s:"6"},condition:e=>e["Iron prescription"]==="Yes"},{grid:{s:"5.5"}},{grid:{s:"0.5"}},{componentType:"radioButtonField",header:"Reason Iron was not prescribed",name:"Iron and folic acid not prescribed",obsValueType:"value_text",type:"inline",grid:{s:"11.5"},condition:e=>e["Iron prescription"]==="No",options:[{label:"Side effects",value:"Side effects"},{label:"Client was referred",value:"Client was referred"},{label:"Other",value:"Other"}]},{grid:{s:"0.5"}},{componentType:"inputField",header:"specify",name:"_Iron and folic acid not prescribed",obsValueType:"value_text",grid:{s:"11.5"},condition:e=>e["Iron prescription"]==="No"&&e["Iron and folic acid not prescribed"]==="Other"},{componentType:"Dashes"},{grid:{s:"12"}},{componentType:"radioButtonField",header:"Daily dose of folic acid prescribed?*",name:"Folic acid",obsValueType:"value_text",type:"inline",options:[{label:"Yes",value:"Yes"},{label:"No",value:"No"}]},{grid:{s:"0.5"}},{componentType:"inputField",unit:"mg",header:"Amount of Folic acid prescribed till delivery in mg",name:"Amount of Folic acid",obsValueType:"value_numeric",grid:{s:"6"},condition:e=>e["Folic acid"]==="Yes"},{grid:{s:"5.5"}},{grid:{s:"0.5"}},{componentType:"radioButtonField",header:"Reason folic acid was not prescribed",name:"Folic acid not prescribed",obsValueType:"value_text",type:"inline",grid:{s:"11.5"},condition:e=>e["Folic acid"]==="No",options:[{label:"Side effects",value:"Side effects"},{label:"Client was referred",value:"Client was referred"},{label:"Other",value:"Other"}]},{grid:{s:"0.5"}},{componentType:"inputField",header:"specify",name:"_Folic acid not prescribed",obsValueType:"value_text",grid:{s:"11.5"},condition:e=>e["Folic acid"]==="No"&&e["Folic acid not prescribed"]==="Other"},{componentType:"Dashes"},{grid:{s:"12"}},{componentType:"radioButtonField",header:"Vitamin A prescribed?",name:"Vitamin A prescription",obsValueType:"value_text",type:"inline",options:[{label:"Yes",value:"Yes"},{label:"No",value:"No"}]},{grid:{s:"0.5"}},{componentType:"radioButtonField",header:"Type of Vitamin A dosage provided",name:"Type of Vitamin A dosage",obsValueType:"value_text",type:"inline",grid:{s:"11.5"},condition:e=>e["Vitamin A prescription"]==="Yes",options:[{label:"Daily",value:"Daily"},{label:"Weekly",value:"Weekly"}]},{grid:{s:"0.5"}},{componentType:"inputField",unit:"mg",header:"Amount of Vitamin prescribed till delivery in mg",name:"Vitamin Amount",obsValueType:"value_numeric",grid:{s:"6"},condition:e=>e["Vitamin A prescription"]==="Yes"},{grid:{s:"5.5"}},{grid:{s:"0.5"}},{componentType:"radioButtonField",header:"Reason vitamin A not prescribed",name:"vitamin A not prescribed",obsValueType:"value_text",type:"inline",grid:{s:"11.5"},condition:e=>e["Vitamin A prescription"]==="No",options:[{label:"Side effects",value:"Side effects"},{label:"Stock-out",value:"Stock-out"},{label:"Other",value:"Other"}]},{grid:{s:"0.5"}},{componentType:"inputField",header:"Other (specify)",name:"_vitamin A not prescribed",obsValueType:"value_text",grid:{s:"11.5"},condition:e=>e["Vitamin A prescription"]==="No"&&e["vitamin A not prescribed"]==="Other"},{componentType:"Dashes"},{componentType:"radioButtonField",header:"ITN Given?",name:"Insecticide treated net given",obsValueType:"value_text",type:"inline",options:[{label:"Yes",value:"Yes"},{label:"No",value:"No"}]},{componentType:"Dashes"},{componentType:"radioButtonField",header:"HIV Positive?",name:"HIV Positive",obsValueType:"value_text",type:"inline",options:[{label:"Yes",value:"Yes"},{label:"No",value:"No"}]},{grid:{s:"0.5"}},{componentType:"radioButtonField",header:"ARVs Given?",name:"ARV drugs received",obsValueType:"value_text",type:"inline",grid:{s:"11.5"},condition:e=>e["HIV Positive"]==="Yes",options:[{label:"Yes",value:"Yes"},{label:"No",value:"No"}]},{grid:{s:"0.5"}},{componentType:"radioButtonField",header:"CPT Given?",name:"CPT given",obsValueType:"value_text",type:"inline",grid:{s:"11.5"},condition:e=>e["HIV Positive"]==="Yes",options:[{label:"Yes",value:"Yes"},{label:"No",value:"No"}]},{grid:{s:"0.5"}},{componentType:"radioButtonField",header:"Nevirapine syrup Given?",name:"Nevirapine syrup given",obsValueType:"value_text",type:"inline",grid:{s:"11.5"},condition:e=>e["HIV Positive"]==="Yes",options:[{label:"Yes",value:"Yes"},{label:"No",value:"No"}]},{grid:{s:"0.5"}},{componentType:"inputField",header:"Nevirapine syrup in (MLs) volume MLs ",name:"Nevirapine syrup in (MLs) volume MLs",obsValueType:"value_text",grid:{s:"11.5"},condition:e=>e["Nevirapine syrup given"]==="Yes"&&e["HIV Positive"]==="Yes"}])}),ce=H({__name:"MedicationDispensed",setup(h,{expose:e}){const i=z(),{patient:v}=P(i),{formRef:l}=L(),{medicationDispensedForm:r}=ue();return e({onSubmit:async()=>{var t;const p=(t=l.value)==null?void 0:t.getFormValues();await O.buildSaveObs(p,Y.TREATMENT)&&A("Medications successfully saved.")}}),(p,d)=>(M(),C("div",null,[a(s(j),{style:{contain:"unset"}},{default:f(()=>[a(s(S),null,{default:f(()=>[a(x,{formData:s(r),ref_key:"formRef",ref:l},null,8,["formData"])]),_:1})]),_:1})]))}}),pe=()=>{const h=V(()=>[{componentType:"Heading",name:"Deworming"},{componentType:"radioButtonField",header:"Was preventative antihelminthic treatment provided?",name:"antihelminthic treatment",obsValueType:"value_coded",validation:F.required,type:"inline",options:[{label:"Yes",value:"Yes"},{label:"No",value:"No"}]},{grid:{s:"0.5"}},{componentType:"radioButtonField",header:"Preventative antihelminthic treatment provided",name:"antihelminthic treatment provided",obsValueType:"value_coded",validation:F.required,type:"inline",grid:{s:"11.5"},condition:i=>i["antihelminthic treatment"]==="Yes",options:[{label:"Single-dose albendazole 400mg",value:"Albendazole (400mg tablet)"},{label:"Single-dose albendazole 500mg",value:"Albendazole (500mg tablet)"}]},{grid:{s:"0.5"}},{componentType:"radioButtonField",header:"Reason no preventative treatment provided",name:"no preventative treatment provided",obsValueType:"value_coded",validation:F.required,type:"inline",grid:{s:"11.5"},condition:i=>i["antihelminthic treatment"]==="No",options:[{label:"Client was referred",value:"Client was referred"},{label:"Other",value:"Other"}]},{grid:{s:"0.5"}},{componentType:"inputField",header:"specify",name:"_no preventative treatment provided",obsValueType:"value_text",validation:F.required,grid:{s:"11.5"},condition:i=>i["antihelminthic treatment"]==="No"&&i["no preventative treatment provided"]==="Other"}]);return{malariaForm:V(()=>[{componentType:"Heading",name:"Malaria"},{grid:{s:"12"}},{componentType:"radioButtonField",header:"Was counselling on malaria prevention conducted",name:"counselling on malaria prevention",obsValueType:"value_coded",validation:F.required,type:"inline",options:[{label:"Yes",value:"Yes"},{label:"No",value:"No"}]},{grid:{s:"0.5"}},{componentType:"radioButtonField",header:"Reason no counselling on malaria prevention was not conducted",name:"counselling on malaria prevention not conducted",obsValueType:"value_coded",validation:F.required,type:"inline",grid:{s:"11.5"},condition:i=>i["counselling on malaria prevention"]==="No",options:[{label:"Client was referred",value:"Client was referred"},{label:"Other",value:"Other"}]},{grid:{s:"0.5"}},{componentType:"inputField",header:"Other (Specify)",name:"_counselling on malaria prevention not conducted",obsValueType:"value_text",validation:F.required,grid:{s:"11.5"},condition:i=>i["counselling on malaria prevention"]==="No"&&i["counselling on malaria prevention not conducted"]==="Other"}]),dewormingForm:h}},me={class:"custom-card",style:{"margin-bottom":"10px"}},ve={class:"custom-card"},ge=H({__name:"DewormingMalaria",setup(h,{expose:e}){const i={"Albendazole (400mg tablet)":107,"Albendazole (500mg tablet)":1321},v=z(),{patient:l}=P(v),r=m(null),g=m(null),{dewormingForm:p,malariaForm:d}=pe(),t=n=>!n.value||!(n.value.validateForm()===null)?null:n.value.getFormValues(),T=async(n,o,N)=>{const I=await O.buildObsValues(n);return I.length>0?(await O.addObsToEncounterPatient(I,o),A(N),!0):!1},u=async(n,o)=>{var I,$,E,G;const N=await U.buildDrugDispense(n,o);($=(I=l.value).MedicationOrder)!=null||(I.MedicationOrder={}),(G=(E=l.value.MedicationOrder).unsaved)!=null||(E.unsaved=[]),l.value.MedicationOrder.unsaved.push(N),A("Medication ".concat(n," added successfully"))},y=async n=>{await T(n,Y.TREATMENT,"Deworming data saved successful")||B("Deworming data is not saved")},b=async n=>{const o=i[n];o?await u(n,o):B("Unknown drug: ".concat(n))},_=async()=>{const n=t(r);if(!n){B("Deworming data is not saved");return}const o=n["antihelminthic treatment"],N=n["antihelminthic treatment provided"];o==="No"?await y(n):N?await b(N):B("Deworming data is not saved")},w=async()=>{const n=t(g);if(!n){B("Malaria counselling data is not saved");return}await T(n,Y.TREATMENT,"Malaria counselling saved successful")||B("Malaria counselling data is not saved")};return e({onSubmit:async()=>{await Promise.all([_(),w()]),await J(l.value)}}),(n,o)=>(M(),C(q,null,[c("div",me,[a(s(S),null,{default:f(()=>[a(x,{formData:s(p),ref_key:"dewormingFormRef",ref:r},null,8,["formData"])]),_:1})]),c("div",ve,[a(s(S),null,{default:f(()=>[a(x,{formData:s(d),ref_key:"malariaFormRef",ref:g},null,8,["formData"])]),_:1})])],64))}}),ye=()=>{const h=V(()=>[{componentType:"Heading",name:"TDV Vaccination"},{componentType:"radioButtonField",header:"New dose of TDV given?",name:"TDV",obsValueType:"value_text",type:"inline",options:[{label:"Yes",value:"Yes"},{label:"No",value:"No"}]}]),e=V(()=>[{componentType:"Heading",name:"Hepatitis Vaccination"},{componentType:"radioButtonField",header:"Hepatitis B vaccine given?",name:"Hepatitis B vaccine given?",obsValueType:"value_text",type:"inline",options:[{label:"Yes",value:"Yes"},{label:"No",value:"No"}]},{grid:{s:"0.5"}},{componentType:"radioButtonField",header:"Hepatitis B vaccine given",name:"Hepatitis B vaccine given",obsValueType:"value_text",type:"inline",grid:{s:"11.5"},condition:i=>i["Hepatitis B vaccine given?"]==="Yes",options:[{label:"Dose 1",value:"Dose 1"},{label:"Dose 2",value:"Dose 2"},{label:"Dose 3",value:"Dose 3"}]},{grid:{s:"0.5"}},{componentType:"dateInputField",header:"Hep B-2 Date",name:"Hep B-2 Date",obsValueType:"value_datetime",placeholder:"Pick the date",grid:{s:"11.5"},condition:i=>i["Hepatitis B vaccine given?"]==="Yes"},{grid:{s:"0.5"}},{componentType:"radioButtonField",header:"Reason Hepatitis B vaccination not conducted",name:"Reason Hepatitis B vaccination not conducted",obsValueType:"value_text",type:"inline",grid:{s:"11.5"},condition:i=>i["Hepatitis B vaccine given?"]==="No",options:[{label:"Stockout",value:"Stockout"},{label:"Client is ill",value:"Client is ill"},{label:"Client refused",value:"Client refused"},{label:"Allergy to vaccinate",value:"Allergy to vaccinate"},{label:"Other",value:"Other"}]},{grid:{s:"0.5"}},{componentType:"inputField",header:"specify",name:"Hepatitis B not conducted (Other)",obsValueType:"value_text",grid:{s:"11.5"},condition:i=>i["Hepatitis B vaccine given?"]==="No"&&i["Hepatitis B vaccination not conducted"]==="Other"}]);return{TDVForm:h,hepatitisForm:e}},be={style:{"margin-bottom":"10px"}},fe={class:"custom-card"},he={class:"custom-card"},Te=H({__name:"Immunization",setup(h,{expose:e}){const{TDVForm:i,hepatitisForm:v}=ye(),l=z(),{patient:r}=P(l),g=m(null),p=m(null),d=async(u,y)=>{var _,w,D,n;const b=await U.buildDrugDispense(u,y);(w=(_=r.value).MedicationOrder)!=null||(_.MedicationOrder={}),(n=(D=r.value.MedicationOrder).unsaved)!=null||(D.unsaved=[]),r.value.MedicationOrder.unsaved.push(b),A("Medication ".concat(u," added successfully"))},t=async()=>{var y;const u=(y=p.value)==null?void 0:y.getFormValues();if(u["Hepatitis B vaccine given?"]=="Yes"&&u["Hepatitis B vaccine given"])await d("DPT-HepB-Hib_vac",1288);else{if(!await O.buildSaveObs(u,Y.TREATMENT))return;A("Hepatitis B Immunization data successfully saved.")}};return e({onSubmit:async()=>{var u;(u=g.value)==null||u.getFormValues(),await t(),await J(r.value)}}),(u,y)=>(M(),C(q,null,[c("div",be,[c("div",fe,[a(s(S),null,{default:f(()=>[a(x,{formData:s(i),ref_key:"TDVFormRef",ref:g},null,8,["formData"])]),_:1})])]),c("div",null,[c("div",he,[a(s(S),null,{default:f(()=>[a(x,{formData:s(v),ref_key:"hepatitisFormRef",ref:p},null,8,["formData"])]),_:1})])])],64))}}),_e={style:{width:"90vw",margin:"0 auto","margin-top":"10px"}},De={class:"back_profile"},Oe=H({__name:"ANCDiagnosisTreatment",setup(h){const e=K(),i=m(null),v=m(null),l=m(null),r=m(null),g=m(!1),p=m(!1),d=V(()=>({text:p.value?"Saving...":"Finish",icon:p.value?"hourglass-outline":"checkmark",hideText:!1,hideIcon:!1,disabled:g.value||p.value})),{onChangeCurrentTab:t,currentTabIndex:T}=ne(),u=()=>{e.push("contact")},y=()=>[{title:"Diagnosis",icon:""},{title:"Medication dispensed",icon:""},{title:"Immunization",icon:""},{title:"Deworming & Malaria",icon:""}],b=m(y()),_=()=>{var n;if(!b.value||b.value.length===0)return console.log("Tabs not yet initialized"),null;switch((n=b.value[T.value])==null?void 0:n.title){case"Diagnosis":return"Diagnosis";case"Medication dispensed":return"MedicationDispensed";case"Immunization":return"Immunization";case"Deworming & Malaria":return"DewormingMalaria";default:return null}},w=async()=>{const D=[{ref:i},{ref:v},{ref:l},{ref:r}];for(const n of D)if(n.ref.value&&typeof n.ref.value.onSubmit=="function")try{await n.ref.value.onSubmit()}catch(o){console.error("Error calling  onSubmit:",o)}e.push("contact")};return W(async()=>{b.value=y(),T.value=0}),(D,n)=>(M(),Q(s(ee),null,{default:f(()=>[a(te),a(se),a(s(X),{fullscreen:!0},{default:f(()=>[c("div",_e,[a(ie,{ref:"wizard",headingTitle:"Diagnosis and Treatment","vertical-tabs":"","navigable-tabs":"","scrollable-tabs":"",startIndex:0,doneButton:d.value,"custom-tabs":b.value,onChange:s(t),"onComplete:wizard":n[1]||(n[1]=o=>w())},{default:f(()=>[c("div",null,[c("div",De,[a(oe,{name:"Back",iconSlot:"start",fill:"clear",icon:s(Z),"font-weight":"600",onClick:n[0]||(n[0]=o=>u())},null,8,["icon"])])]),R(c("div",null,[a(de,{ref_key:"diagnosisRef",ref:i},null,512)],512),[[k,_()=="Diagnosis"]]),R(c("div",null,[a(ce,{ref_key:"medicationDispensedRef",ref:v},null,512)],512),[[k,_()=="MedicationDispensed"]]),R(c("div",null,[a(Te,{ref_key:"immunizationRef",ref:l},null,512)],512),[[k,_()=="Immunization"]]),R(c("div",null,[a(ge,{ref_key:"dewormingMalariaRef",ref:r},null,512)],512),[[k,_()=="DewormingMalaria"]])]),_:1},8,["doneButton","custom-tabs","onChange"])])]),_:1})]),_:1}))}});export{Oe as default};
