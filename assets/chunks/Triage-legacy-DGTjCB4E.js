System.register(["./vendor-legacy-C2-GgcAe.js","../index-legacy-DWiGgJ_s.js","./DemographicBar-legacy-CyaICotO.js","./Vitals.vue_vue_type_script_setup_true_lang-legacy-BPnmBSSK.js","./LevelOfConsciousness.vue_vue_type_script_setup_true_lang-legacy-B_qev9Fy.js","./patient_complaints_service-legacy-BiVzsY9l.js","./DashBox-legacy-Czc8e2yX.js","./useFormWizard-legacy-Chahdh_W.js","./lodash-legacy-pOOc9Efu.js","./formatServerData-legacy-BUmAaJq6.js","./usePatientProfile-legacy-COpNExm5.js","./apexcharts-legacy-CQtQvBh8.js","./drug_prescription_service-legacy-DcONlsiJ.js","./patient_diagnosis_service-legacy-CUUE8_HV.js","./Registration-legacy-CxUJo3CU.js","./useLocation-legacy-D1mGZGV-.js","./vaccines_service-legacy-BmLq0sLn.js","./sms_service-legacy-CNlwv3aP.js","./EIRreportsStore-legacy-Debh---7.js","./Export-legacy-qVh9lhSE.js","./NeonatalEnrollmentStore-legacy-C8Km8JBl.js"],function(e,a){"use strict";var n,t,i,o,l,s,r,u,d,c,p,v,g,m,_,y,b,h,f,T,C,D,S,w,Y,x,P,N,B,k,F,V,O,A,R,H,I,L,q,j,E,M,z,G,W,$,J,U,K,Q,Z,X,ee,ae,ne,te,ie,oe,le,se,re,ue,de,ce,pe,ve,ge,me,_e,ye,be,he,fe,Te,Ce,De,Se,we,Ye;return{setters:[e=>{n=e.c,t=e.d,i=e.r,o=e.O,l=e.f,s=e.u,r=e.aS,u=e.J,d=e.l,c=e.aP,p=e.aV,v=e.a,g=e.H,m=e.e,_=e.m,y=e.k,b=e._,h=e.Q,f=e.F,T=e.an,C=e.cE,D=e.w,S=e.a3,w=e.i,Y=e.bK,x=e.v,P=e.a6,N=e.b9},e=>{B=e.aB,k=e.aC,F=e.bF,V=e.l,O=e.aA,A=e.b5,R=e.J,H=e.M,I=e.S,L=e.af,q=e.aW,j=e.t,E=e.G,M=e._,z=e.aG,G=e.u,W=e.aH,$=e.aI,J=e.aJ,U=e.aK,K=e.d,Q=e.aL,Z=e.g,X=e.Z,ee=e.e,ae=e.T,ne=e.N,te=e.H,ie=e.aM,oe=e.aN,le=e.aO,se=e.aP,re=e.aQ,ue=e.aR,de=e.a0},e=>{ce=e.D},e=>{pe=e._},e=>{ve=e.p,ge=e._},e=>{me=e.P},e=>{_e=e.D},e=>{ye=e.u,be=e.a,he=e._,fe=e.s,Te=e.c,Ce=e.b},e=>{De=e.l},e=>{Se=e.a,we=e.b},e=>{Ye=e.u},null,null,null,null,null,null,null,null,null,null],execute:function(){var a=document.createElement("style");a.textContent=".vitals_title[data-v-ea5c124d]{border-bottom:1px solid #b3b3b3;margin-bottom:50px}.input-with-icon[data-v-ea5c124d]{position:relative}.input-icon[data-v-ea5c124d]{position:absolute;left:10px;top:50%;transform:translateY(-50%);color:gray}ion-col[data-v-ea5c124d]{padding-bottom:15px}h5[data-v-ea5c124d]{margin-top:0;text-overflow:ellipsis;white-space:nowrap;overflow:hidden}.previousView[data-v-ea5c124d]{margin-top:70px;margin-bottom:20px}\n/*$vite$:1*/",document.head.appendChild(a);const xe=t({__name:"AirwayBreathing",setup(e){const a=i(null),t=n(()=>[{componentType:"Heading",name:"Airway and Breathing",grid:{s:"4"}},{componentType:"radioButtonField",header:"is Airway Compromised",name:"is_airway_compromised",obsValueType:"value_text",validation:B.required,type:"standard",grid:{s:"4"},options:[{label:"Yes",value:"Yes"},{label:"No",value:"No"}]},{componentType:"radioButtonField",header:"is Breathing Abnormal?",name:"is_breathing_abnormal",obsValueType:"value_text",validation:B.required,type:"standard",grid:{s:"4"},options:[{label:"Yes",value:"Yes"},{label:"No",value:"No"}]},{componentType:"Dashes",condition:e=>"Yes"===e.is_breathing_abnormal},{componentType:"Heading",name:"Exhaustion and Inability to Speak",grid:{s:"4"},condition:e=>"Yes"===e.is_breathing_abnormal},{componentType:"radioButtonField",header:"Severe Respiratory dysfunction or exhaustion ",name:"severe_respiratory_dysfunction_or_exhaustion",obsValueType:"value_text",validation:B.required,type:"standard",grid:{s:"4"},condition:e=>"Yes"===e.is_breathing_abnormal,options:[{label:"Yes",value:"Yes"},{label:"No",value:"No"}]},{componentType:"radioButtonField",header:"Inability to speak in complete sentences ",name:"inability_to_speak_in_complete_sentences",obsValueType:"value_text",validation:B.required,type:"standard",grid:{s:"4"},condition:e=>"Yes"===e.is_breathing_abnormal,options:[{label:"Yes",value:"Yes"},{label:"No",value:"No"}]},{componentType:"Dashes",condition:e=>"Yes"===e.is_breathing_abnormal},{componentType:"Heading",name:"Stridor and Reduced Consciousness",grid:{s:"4"},condition:e=>"Yes"===e.is_breathing_abnormal},{componentType:"radioButtonField",header:"Stridor",name:"stridor",obsValueType:"value_text",validation:B.required,type:"standard",grid:{s:"4"},condition:e=>"Yes"===e.is_breathing_abnormal,options:[{label:"Yes",value:"Yes"},{label:"No",value:"No"}]},{componentType:"radioButtonField",header:"Reduced Level of Consciousness due to low oxygen",name:"reduced_level_of_consciousness_due_to_low_oxygen",obsValueType:"value_text",validation:B.required,type:"standard",grid:{s:"4"},condition:e=>"Yes"===e.is_breathing_abnormal,options:[{label:"Yes",value:"Yes"},{label:"No",value:"No"}]}]);return(e,n)=>(l(),o(s(r),null,{default:u(()=>[d(s(c),null,{default:u(()=>[d(k,{formData:s(t),ref_key:"formRef",ref:a},null,8,["formData"])]),_:1})]),_:1}))}}),Pe=t({__name:"BloodCirculation",setup(e){const a=i(null),t=n(()=>[{componentType:"Heading",name:"Circulation",grid:{s:"4"}},{componentType:"radioButtonField",header:"Is Circulation Abnormal",name:"is_circulation_abnormal",obsValueType:"value_text",validation:B.required,type:"standard",grid:{s:"4"},options:[{label:"Yes",value:"Yes"},{label:"No",value:"No"}]},{componentType:"Dashes",condition:e=>"Yes"===e.is_circulation_abnormal},{componentType:"Heading",name:"Heart Rate and Pulse",grid:{s:"4"},condition:e=>"Yes"===e.is_circulation_abnormal},{componentType:"radioButtonField",header:"Heart Rate",name:"heart_rate",obsValueType:"value_text",validation:B.required,type:"standard",grid:{s:"4"},condition:e=>"Yes"===e.is_circulation_abnormal,options:[{label:"Weak/Thready",value:"Weak/Thready"},{label:"Strong",value:"Strong"}]},{componentType:"radioButtonField",header:"Pulse Rate",name:"pulse_rate",obsValueType:"value_text",validation:B.required,type:"standard",grid:{s:"4"},condition:e=>"Yes"===e.is_circulation_abnormal,options:[{label:"Irregular",value:"Irregular"},{label:"Regular",value:"Regular"}]},{componentType:"Dashes",condition:e=>"Yes"===e.is_circulation_abnormal},{componentType:"Heading",name:"Reduced Urinary and Clammy Peripherals",grid:{s:"4"},condition:e=>"Yes"===e.is_circulation_abnormal},{componentType:"radioButtonField",header:"Reduced urinary output < 30ml/hr",name:"reduced_urinary_output_less_than_30ml_per_hr",obsValueType:"value_text",validation:B.required,type:"standard",grid:{s:"4"},condition:e=>"Yes"===e.is_circulation_abnormal,options:[{label:"Yes",value:"Yes"},{label:"No",value:"No"}]},{componentType:"radioButtonField",header:"Cool clammy peripherals or cap refill > 4 seconds",name:"cool_clammy_peripherals_or_cap_refill_greater_than_4_seconds",obsValueType:"value_text",validation:B.required,type:"standard",grid:{s:"4"},condition:e=>"Yes"===e.is_circulation_abnormal,options:[{label:"Yes",value:"Yes"},{label:"No",value:"No"}]},{componentType:"Dashes",condition:e=>"Yes"===e.is_circulation_abnormal},{componentType:"Heading",name:"Hemorrhage and Skin Turgor",grid:{s:"4"},condition:e=>"Yes"===e.is_circulation_abnormal},{componentType:"radioButtonField",header:"Hemorrhage",name:"hemorrhage",obsValueType:"value_text",validation:B.required,type:"standard",grid:{s:"4"},condition:e=>"Yes"===e.is_circulation_abnormal,options:[{label:"Yes",value:"Yes"},{label:"No",value:"No"}]},{componentType:"radioButtonField",header:"Dehydration skin turgor, sunken eyes",name:"dehydration_skin_turgor_sunken_eyes",obsValueType:"value_text",validation:B.required,type:"standard",grid:{s:"4"},condition:e=>"Yes"===e.is_circulation_abnormal,options:[{label:"Yes",value:"Yes"},{label:"No",value:"No"}]}]);return(e,n)=>(l(),o(s(r),null,{default:u(()=>[d(s(c),null,{default:u(()=>[d(k,{formData:s(t),ref_key:"formRef",ref:a},null,8,["formData"])]),_:1})]),_:1}))}}),Ne=t({__name:"Disability",setup(e){const a=i(null),t=n(()=>[{componentType:"Heading",name:"Consciousness",grid:{s:"4"}},{componentType:"radioButtonField",header:"Does the patient have a reduced Level of consciousness",name:"is_reduced_level_of_consciousness",obsValueType:"value_text",validation:B.required,type:"standard",grid:{s:"8"},options:[{label:"Yes",value:"Yes"},{label:"No",value:"No"}]},{componentType:"Dashes",condition:e=>"Yes"===e.is_reduced_level_of_consciousness},{componentType:"Heading",name:"Blood Glucose and GCS",grid:{s:"4"},condition:e=>"Yes"===e.is_reduced_level_of_consciousness},{componentType:"inputField",header:"Blood Glucose",name:"blood_glucose",type:"number",grid:{s:"4"},disabled:e=>!0,condition:e=>"Yes"===e.is_reduced_level_of_consciousness},{componentType:"inputField",header:"GCS",name:"gcs",type:"number",grid:{s:"4"},disabled:e=>!0,condition:e=>"Yes"===e.is_reduced_level_of_consciousness}]);return(e,n)=>(l(),o(s(r),null,{default:u(()=>[d(s(c),null,{default:u(()=>[d(k,{formData:s(t),ref_key:"formRef",ref:a},null,8,["formData"])]),_:1})]),_:1}))}}),Be={key:0},ke={style:{"align-content":"center"}},Fe={class:"ion-padding",slot:"content"},Ve=M(t({__name:"PresentingComplaints",setup(e,{expose:a}){const t=F(),{presentingComplaints:T}=p(t),C=i(V),D=i(!0),S=i(!1),w=i(!0),Y=i(!1),x=i([]),P=i([]),N=i(),M=n(()=>[{componentType:"multiSelectInputField",header:"Presenting Complaints",name:"PresentingComplaints",trackBy:"concept_id",icon:V.search,hideSelected:!0,validation:e=>W(null==e?void 0:e.name,x.value)?"Presenting complaint already added":B.required(e),options:P.value,grid:{s:"6"}},{componentType:"inputField",header:"Duration",name:"duration",icon:V.time,validation:e=>B.isNotEmptyandNumber(e),grid:{s:"6"},unitOptions:[{label:"Hours",value:"Hours"},{label:"Days",value:"Days"},{label:"Weeks",value:"Weeks"},{label:"Months",value:"Months"},{label:"Years",value:"Years"}],unitValidation:e=>e&&""!==e?null:"Please select a unit."},{componentType:"inputField",header:"Specify the presenting complaint(s)",name:"Other (specify)",icon:V.editPen,validation:e=>W(e,x.value)?"Presenting complaint already added":B.required(e),condition:e=>{var a;return"Other"===(null==e||null===(a=e.PresentingComplaints)||void 0===a?void 0:a.name)}},{componentType:"Alert",condition:e=>{var a;return!(null==B.required(null==e||null===(a=e.PresentingComplaints)||void 0===a?void 0:a.name))},backgroundColor:"lightyellow",textColor:"black",value:"Please search thoroughly for the complaint. If it is not listed, search and select the 'Other' option to specify the complaint.",name:"noMatchAlert"}]),{formRef:z}=O(),G=e=>{var a;const n=e.duration+" "+e.duration_unit,t=e.PresentingComplaints,i="Other"===t.name?e["Other (specify)"]:t.name;x.value.push({actionBtn:!0,btn:["delete"],name:i,concept_id:t.concept_id,duration:t.duration,durationUnits:t.duration_unit,display:[i,n],data:[{concept_id:8578,value_coded:t.concept_id,obs_datetime:I.getSessionDate(),child:[{concept_id:t.concept_id,value_text:n,obs_datetime:I.getSessionDate()}]}]}),null===(a=z.value)||void 0===a||a.resetForm(),Y.value=!0},W=(e,a)=>a.some(a=>a.name===e),$=e=>{x.value=x.value.filter(a=>a.display[0]!==e.name)};return v(async()=>{await(async()=>{P.value=await me.getComplaintsList("Presenting complaint"),H(T.value,"PresentingComplaints","multiSelectData",P.value)})()}),a({onSubmit:async()=>{const e=await L.getObsByEncounterIdAndDate(q.PRESENTING_COMPLAINTS),a=x.value.flatMap(e=>e.data);if(a.length<=0&&e.length<=0)return j("Presenting complaints is required");a.length<=0||(await L.addObsToEncounterPatient(a,q.PRESENTING_COMPLAINTS),E("Presenting complaints saved successful"),x.value=[])}}),(e,a)=>{const n=g("ion-row"),t=g("ion-label"),i=g("ion-accordion"),p=g("ion-accordion-group");return l(),m(f,null,[d(s(r),null,{default:u(()=>[d(s(c),null,{default:u(()=>[d(_e,{status:D.value,content:"No presenting complaints added"},null,8,["status"]),Y.value?(l(),m("span",Be,[d(A,{listData:x.value,"onClicked:delete":$},null,8,["listData"])])):_("",!0),S.value?(l(),o(n,{key:1},{default:u(()=>[d(k,{formData:M.value,ref_key:"formRef",ref:z},null,8,["formData"]),y("div",ke,[d(R,{fill:"clear",icon:C.value.plus,iconSlot:"icon-only","onClicked:btn":a[0]||(a[0]=e=>(async()=>{var e,a;const n=null===(e=z.value)||void 0===e?void 0:e.getFormValues();null==(null===(a=z.value)||void 0===a?void 0:a.validateForm())&&(G(n),S.value=!1,w.value=!0)})()),name:"Save"},null,8,["icon"])])]),_:1})):_("",!0),w.value?(l(),o(n,{key:2,style:{"margin-top":"10px"}},{default:u(()=>[d(R,{fill:"clear",icon:C.value.plus,iconSlot:"icon-only","onClicked:btn":a[1]||(a[1]=e=>(D.value=!1,w.value=!1,void(S.value=!0))),name:"Add new presenting complaints"},null,8,["icon"])]),_:1})):_("",!0)]),_:1})]),_:1}),d(n,null,{default:u(()=>[d(p,{ref_key:"accordionGroup",ref:N,class:"previousView"},{default:u(()=>[d(i,{value:"first","toggle-icon-slot":"start",style:{"border-radius":"10px","background-color":"#fff"}},{default:u(()=>[d(s(b),{slot:"header",color:"light"},{default:u(()=>[d(t,{class:"previousLabel"},{default:u(()=>[...a[2]||(a[2]=[h("Previous presenting complaints",-1)])]),_:1})]),_:1}),y("div",Fe,[d(ve)])]),_:1})]),_:1},512)]),_:1})],64)}}}),[["__scopeId","data-v-ea5c124d"]]),Oe=t({__name:"PersistentPain",setup(e){const a=i(null),t=n(()=>[{componentType:"Heading",name:"Seizures and Focal Neurologic",grid:{s:"4"}},{componentType:"radioButtonField",header:"Active Seizures",name:"active_seizures",obsValueType:"value_text",validation:B.required,type:"standard",grid:{s:"4"},options:[{label:"Yes",value:"Yes"},{label:"No",value:"No"}]},{componentType:"radioButtonField",header:"Focal neurologic findings",name:"focal_neurologic_findings",obsValueType:"value_text",validation:B.required,type:"standard",grid:{s:"4"},options:[{label:"Yes",value:"Yes"},{label:"No",value:"No"}]},{componentType:"Dashes"},{componentType:"Heading",name:"Headache and Weakness",grid:{s:"4"}},{componentType:"radioButtonField",header:"Headache",name:"headache",obsValueType:"value_text",validation:B.required,type:"standard",grid:{s:"4"},options:[{label:"Yes",value:"Yes"},{label:"No",value:"No"}]},{componentType:"radioButtonField",header:"Weakness",name:"weakness",obsValueType:"value_text",validation:B.required,type:"standard",grid:{s:"4"},options:[{label:"Yes",value:"Yes"},{label:"No",value:"No"}]},{componentType:"Dashes"},{componentType:"Heading",name:"Severe Pain and Confusion",grid:{s:"4"}},{componentType:"radioButtonField",header:"Severe Pain",name:"severe_pain",obsValueType:"value_text",validation:B.required,type:"standard",grid:{s:"4"},options:[{label:"Yes",value:"Yes"},{label:"No",value:"No"}]},{componentType:"radioButtonField",header:"Confusion",name:"confusion",obsValueType:"value_text",validation:B.required,type:"standard",grid:{s:"4"},options:[{label:"Yes",value:"Yes"},{label:"No",value:"No"}]},{grid:{s:"4"}},{componentType:"radioButtonField",header:"moderate pain or a reason to be seen in under four hours",name:"moderate_pain_or_a_reason_to_be_seen_in_under_four_hours",obsValueType:"value_text",validation:B.required,type:"standard",grid:{s:"8"},options:[{label:"Yes",value:"Yes"},{label:"No",value:"No"}]}]);return(e,n)=>(l(),o(s(r),null,{default:u(()=>[d(s(c),null,{default:u(()=>[d(k,{formData:s(t),ref_key:"formRef",ref:a},null,8,["formData"])]),_:1})]),_:1}))}}),Ae={style:{width:"88vw",margin:"0 auto","margin-top":"10px"}},Re={class:"back_profile"};e("default",t({__name:"Triage",setup(e,{expose:a}){const{onTabBeforeChange:t,currentTabIndex:r}=ye();Ye();const c=T(),g=C();i([]),i([]),i(!1);const m=i(!0),b=i(!1),h=i(!1),f=n(()=>({text:h.value?"Saving...":"Finish",icon:h.value?"hourglass-outline":"checkmark",hideText:!1,hideIcon:!1,disabled:b.value||h.value})),B=z(),k=G(),F=W(),V=$();J();const O=U(),A=K();Q();const H=Z(),L=be(),q=X(),{patient:M}=p(k),{vitals:ve}=p(B),{investigations:me}=p(F),{diagnosis:_e}=p(V),{substance:Be}=p(H),{selectedNCDMedicationList:ke}=p(O),{FootScreening:Fe,visualScreening:He,cvScreening:Ie}=p(L),{sessionDate:Le}=p(q),{apiStatus:qe}=p(ee());D(f,(e,a)=>{console.log("Done button options changed:",{from:a,to:e,currentStep:r.value,tabsLength:Me.value.length}),e.disabled!==(null==a?void 0:a.disabled)&&console.log("Done button "+(e.disabled?"disabled":"enabled")),e.text!==(null==a?void 0:a.text)&&console.log(`Done button text changed from "${null==a?void 0:a.text}" to "${e.text}"`)},{deep:!0}),D(h,(e,a)=>{e!==a&&(console.log(`Saving state changed: ${a} -> ${e}`),e?console.log("Starting save process..."):console.log("Save process completed"))});const je=e=>{console.log("Done button change received from wizard:",e),e.newOptions.disabled&&console.log("Done button has been disabled"),e.isLastStep&&console.log("User is on the last step, done button should be visible")},Ee=()=>{let e=!1;return We(),h.value&&(e=!0),b.value=e,!e},Me=i([{title:"Presenting Complaints",icon:""},{title:"Vital Signs",icon:""},{title:"Level Of Consciousness",icon:""},{title:"Airway/Breathing",icon:""},{title:"Blood Circulation",icon:""},{title:"Disability",icon:""},{title:"Persistent Pain/Other Concerns",icon:""}]),ze=i(null),Ge=i(null);i(null),i(null),i(null),i(null),i(null);const We=()=>{var e;if(!Me.value||0===Me.value.length)return console.log("Tabs not yet initialized"),null;const a=r.value>=0&&r.value<Me.value.length?r.value:0;switch(null===(e=Me.value[a])||void 0===e?void 0:e.title){case"Presenting Complaints":return"PresentingComplaints";case"Vital Signs":return"Vitals";case"Level Of Consciousness":return"LevelOfConsciousness";case"Airway/Breathing":return"AirwayBreathing";case"Blood Circulation":return"BloodCirculation";case"Disability":return"Disability";case"Persistent Pain/Other Concerns":return"Persistent";default:if(A.NCDActivities.length>0)switch(A.NCDActivities[0]){case"Presenting Complaints":return"PresentingComplaints";case"Vital Signs":return"Vitals";case"Level Of Consciousness":return"LevelOfConsciousness";case"Airway/Breathing":return"Airway/Breathing";case"Blood Circulation":return"BloodCirculation";case"Disability":return"Disability";case"Persistent Pain/Other Concerns":return"Persistent"}return null}},$e=()=>{m.value=!1,setTimeout(()=>{r.value=0,m.value=!0},0)},Je=()=>{const e=z();e.setVitals(e.getInitialVitals(M.value.ID))},Ue=async()=>{const e=ne(Le.value,"sessionDate","value")||te.sessionDate(),a=ie("vitals");for(let t=0;t<Me.value.length;t++){const i=Me.value[t];if("Vital Signs"===i.title)Me.value[t].icon=Ke(e,a)?N:"";else if("Risk Assessment"===i.title){const a=ie("substanceAbuse");Me.value[t].icon=Ke(e,a)?N:""}else if("Investigations"===i.title){var n;const a=null==M||null===(n=M.value)||void 0===n||null===(n=n.labOrders)||void 0===n?void 0:n.saved,i=null==a?void 0:a.filter(a=>te.toStandardHisFormat(e)===te.toStandardHisFormat(a.order_date));Me.value[t].icon=(null==i?void 0:i.length)>0?N:""}else if("Diagnosis"===i.title){const a=ie("diagnosis");Me.value[t].icon=Ke(e,a)?N:""}else if("Complications Screening"===i.title){const a=ie("screening");Me.value[t].icon=Ke(e,a)?N:""}else"Treatment Plan"===i.title&&(ke.value.length>0?Me.value[t].icon=oe()?N:"":Me.value[t].icon="")}Ee()},Ke=(e,a)=>{const n=new Date(e);return n.setHours(0,0,0,0),a.some(e=>{const a=new Date(e.obs_datetime);return a.setHours(0,0,0,0),a.getTime()===n.getTime()})},Qe=async(e,a)=>{var n;const t=null===(n=Me.value[a])||void 0===n?void 0:n.title;var i,o;e%1==0&&(r.value=e),"Vital Signs"==t&&(null===(i=ze.value)||void 0===i||i.onSubmit()),"Risk Assessment"==t&&(null===(o=Ge.value)||void 0===o||o.onSubmit()),"Complications Screening"==t&&await(async()=>{const e=[],a=await Se(He.value),n=await we(Fe.value),t=await Se(Ie.value);var i,o,l,s;a.length>0&&e.push({concept_id:await re.getConceptID("Visual acuity",!0),value_text:"visual acuity test",obs_datetime:re.getSessionDate(),child:a}),n.length>0&&e.push({concept_id:await re.getConceptID("Foot check",!0),value_text:"foot screening",obs_datetime:re.getSessionDate(),child:n}),t.length>0&&e.push(...t),e.length>0?(null!==(o=(i=null!==(s=(l=M.value).screening)&&void 0!==s?s:l.screening={}).unsaved)&&void 0!==o||(i.unsaved=[]),M.value.screening.unsaved.push(...e),E("Complications saved successfully")):j("No complications data to save")})(),"Treatment Plan"==t&&await(async()=>{const e=ue();if(!De.isEmpty(e.selectedMedicalAllergiesList)){const a=de(),n=e.selectedMedicalAllergiesList.map(e=>({concept_id:e.concept_id,obs_datetime:I.getSessionDate(),value_coded:e.concept_id,location_id:a.facilityLocation.code,value_text:e.name})),t=await fe(n);M.value=Object.assign(M.value,t),console.log("Allergies staged successfully:",M.value),e.clearSelectedMedicalAllergiesList()}const a=await Te();M.value=Object.assign(M.value,a);const n=await Ce().saveNonPharmaTherapyPatientData();M.value=Object.assign(M.value,n)})(),await le(M.value)},Ze=async()=>{h.value=!0;try{await se(),await le(M.value),c.push("/triageList")}catch(e){console.error("Error saving data:",e),j("Error occurred while saving data. Please try again.")}finally{h.value=!1}};return v(async()=>{0!==A.NCDActivities.length?(be().resetScreening(),Me.value=[{title:"Presenting Complaints",icon:""},{title:"Vital Signs",icon:""},{title:"Level Of Consciousness",icon:""},{title:"Airway/Breathing",icon:""},{title:"Blood Circulation",icon:""},{title:"Disability",icon:""},{title:"Persistent Pain/Other Concerns",icon:""}],await Ue(),(void 0===r.value||r.value<0)&&(r.value=0,console.log("Setting initial tab index to 0")),b.value=!1,h.value=!1,Ee()):c.push("patientProfile")}),D(r,async()=>{await Ee()}),D(ve,async()=>{await Ue()},{deep:!0}),D(M,async()=>{be().resetScreening(),await Ue()},{deep:!0}),D(Le,async()=>{await Ue()},{deep:!0}),D(me,async()=>{await Ue()},{deep:!0}),D(_e,async()=>{await Ue()},{deep:!0}),D(Be,async()=>{await Ue()},{deep:!0}),D(ke,async()=>{await Ue()},{deep:!0}),D(g,async e=>{$e(),Je(),Me.value=[{title:"Presenting Complaints",icon:""},{title:"Vital Signs",icon:""},{title:"Level Of Consciousness",icon:""},{title:"Airway/Breathing",icon:""},{title:"Blood Circulation",icon:""},{title:"Disability",icon:""},{title:"Persistent Pain/Other Concerns",icon:""}]},{deep:!0}),D(M,async(e,a)=>{e.ID!=a.ID&&($e(),Je())},{deep:!0}),a({saveData:Ze,markWizard:Ue,refreshWizard:$e,validateDoneButtonState:Ee}),(e,a)=>(l(),o(s(P),null,{default:u(()=>[d(ae),d(s(S),{fullscreen:!0},{default:u(()=>[d(ce),y("div",Ae,[m.value?(l(),o(he,{key:0,ref:"wizard",headingTitle:"Triage","vertical-tabs":"","navigable-tabs":"","scrollable-tabs":"",startIndex:0,doneButton:f.value,"custom-tabs":Me.value,beforeChange:s(t),onChange:Qe,"onComplete:wizard":a[1]||(a[1]=e=>Ze()),onDoneButtonChanged:je},{default:u(()=>[y("div",null,[y("div",Re,[d(R,{name:"Back to triage list",iconSlot:"start",fill:"clear",icon:s(Y),"font-weight":"600",onClick:a[0]||(a[0]=e=>{c.push("/triageList")})},null,8,["icon"])])]),w(y("div",null,[d(Ve,{ref:"presentingComplaintsRef"},null,512)],512),[[x,"PresentingComplaints"==We()]]),w(y("div",null,[d(pe,{ref_key:"vitalsRef",ref:ze},null,512)],512),[[x,"Vitals"==We()]]),w(y("div",null,[d(ge,{ref:"levelOfConsciousnessRef"},null,512)],512),[[x,"LevelOfConsciousness"==We()]]),w(y("div",null,[d(xe,{ref:"airwayBreathingRef"},null,512)],512),[[x,"AirwayBreathing"==We()]]),w(y("div",null,[d(Pe,{ref:"bloodCirculationRef"},null,512)],512),[[x,"BloodCirculation"==We()]]),w(y("div",null,[d(Ne,{ref:"disabilityRef"},null,512)],512),[[x,"Disability"==We()]]),w(y("div",null,[d(Oe,{ref:"persistentRef"},null,512)],512),[[x,"Persistent"==We()]])]),_:1},8,["doneButton","custom-tabs","beforeChange"])):_("",!0)])]),_:1})]),_:1}))}}))}}});
