const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./LabOrdersList-CyKMZQBo.js","./vendor-Cjwp4qqF.js","./lodash-NJiRuGo9.js","../vendor.DbAX3ai3.css","../index-hyu0M4vo.js","./apexcharts-H6sKa3PN.js","../index.Du9e_9Pv.css","./BasicForm-Duz2D88q.js","./DateInputField-DenoiW-W.js","../DateInputField.BYUMEomf.css","../BasicForm.D5kkmva8.css","../LabOrdersList.BLGluGlR.css","./DiagnosesHistory-mY7NJkDm.js","./DashBox-C2apGPDM.js","./previousDiagnosis-Cwr6kieS.js","../previousDiagnosis.BDQ84dq0.css","../DiagnosesHistory.CtE9ra0K.css","./AllergiesContraindication-DRteSo4x.js","./UpcomingFeature-Cm-iMsbL.js","../UpcomingFeature.DBJv9ELz.css","../AllergiesContraindication.DSdMoqwN.css","./VisitsHistory-w4LUVJwn.js","../VisitsHistory.BvPigtD4.css","./VitalsMeasurementsSummary-D8eS-Q13.js","../VitalsMeasurementsSummary.B3Ypki_f.css","./PatientProfile-DlJMV6Tv.js","./DemographicBar-DvoT-SqS.js","../DemographicBar.DtnnoAYr.css","./SaveProgressModal-D7AlUt6J.js","../SaveProgressModal.DLXC0SP6.css","./Stepper-Br76eL-h.js","./NextAppointment-DR3Cd6_C.js","./group_validation-BZYoBS0C.js","./RadiologyStore-D2KqW1y8.js","./useFormWizard-CSV8vyhB.js","./drug_prescription_service-DoUAULbV.js","./patient_diagnosis_service-D4GDrQhF.js","./ncd_appointment_service-DCCvg-2z.js","../NextAppointment.CHCVxpP_.css","./OPDOutcome-Dgwk9fQL.js","./LevelOfConsciousness.vue_vue_type_script_setup_true_lang-sbbootiQ.js","../LevelOfConsciousness.CaFy6Jya.css","./patient_complaints_service-BtPp3b7X.js","./formatServerData-Bn4-C3HP.js","./usePatientProfile-DOzJOMk2.js","./Registration-BkCl91BN.js","./useLocation-BZPpEztZ.js","./vaccines_service-RO7QnUv-.js","./sms_service-m0YhgETt.js","./EIRreportsStore-Db74iuSW.js","./Export-CrWczVM9.js","../vaccines_service.DKZw05E0.css","./useNeonatalEnrollmentStore-BQIh-FHM.js","./enrollment-DU-PLRUa.js","../Registration.DDA0BoAN.css","../usePatientProfile.JbTJI_P9.css","../OPDOutcome.DjcIwjEP.css","./VitalsMixin.vue_vue_type_script_lang-D0FqAJxr.js","./TreatmentPlan-DDrIVkUK.js","../TreatmentPlan.BMJBT8Bg.css","./OPDDiagnosis-Bp63448Z.js","../OPDDiagnosis.BkZ0ABWg.css","./FeatusModal-Ci9QO15d.js","../FeatusModal.Cfk5MYmH.css","./BasicCard-BzOWOjNS.js","../BasicCard.CLPwwedX.css","./PastObstreticHistoryStore-CsLb78Z1.js","../Stepper.B2n3cIUE.css","./WeightHeightChart-DyUzBRJ4.js","./chartjs-BfaJUDKY.js","../WeightHeightChart.BZ52GXpK.css","./weightAndHeight-BXZkduZG.js","./customDatePicker-APx0qHzR.js","../customDatePicker.twJBaIU5.css","../weightAndHeight.BG3IjMoY.css","./barcode-qrcode-reader-C32a5m93.js","./stock_service-DhdCAFPQ.js","./SetRelationship.vue_vue_type_script_lang-lWg8vJn8.js","./AdministerOtherVaccinesStore-B-Z1p5Yh.js","../PatientProfile.nhwpLnj5.css","./HTSPatientProfile-BorEyUU6.js","../HTSPatientProfile.Ber8elmc.css","./NeonatalPatientProfile-DdsCE1ZB.js","./neonatal_service-CmDi3QHq.js","../NeonatalPatientProfile.C1se2enn.css","./AETCPatientProfile-DSNzfyeh.js","./confirm_pregnancy_service-DpC8rCc8.js","./CPR-fO84yoSt.js","./useRespiratoryRateOxygenForm-Dc6zXL__.js","../CPR.C4Sa7ms4.css","./tasks-dy2xvsUe.js","../AETCPatientProfile.Co4AUmtm.css","./BloodPressure-Chq6hEhz.js","../BloodPressure.SJ33o6fB.css","./AncEnrollmentModal-7Ko3CA00.js","../AncEnrollmentModal.CLq9tGu0.css","./LabourEnrollmentModal-B49WwsJ6.js","../LabourEnrollmentModal.D41Bsool.css","./PNCEnrollmentModal-DRs7Py6n.js","../PNCEnrollmentModal.DOzG4Wv1.css"])))=>i.map(i=>d[i]);
import{d as ht,r as g,w as at,O as y,f as u,u as t,aS as ft,J as n,l as a,aQ as ze,e as b,dO as mt,Q as c,L as C,au as Fe,F as J,aR as Ye,aj as We,P as vt,_ as N,W as O,aN as je,k as o,K as v,cB as le,bY as qe,bV as Je,aP as Ot,z as Ke,D as Qe,a as ie,I as Ze,G as Xe,dP as ta,E as ea,N as aa,a2 as Et,a3 as Nt,bm as na,a4 as M,a5 as m,p as re,dQ as Zt,m as _,b_ as sa,a6 as ue,R as oa,an as la,cG as ia,aV as Dt,c as pt,H as Xt,cJ as I,dR as ra,cZ as ua,al as da,ak as ca,V as te,db as ma,dc as j,aE as pa,c0 as fa,aG as ee,c_ as va,cA as k}from"./vendor-Cjwp4qqF.js";import{a7 as nt,_ as St,P as st,a8 as _a,$ as ga,m as de,a9 as ya,aa as ba,u as Ca,a as Pa,f as Aa,ab as tt,T as Ia,w as R,S as et,J as ae,H,ac as wt,ad as ka,i as ne,ae as Da,q as se,G as q,n as wa,af as Ra,t as Rt,ag as Oa}from"../index-hyu0M4vo.js";import{l as Ea}from"./lodash-NJiRuGo9.js";import{C as Na}from"./confirm_pregnancy_service-DpC8rCc8.js";import{u as ha}from"./usePatientProfile-DOzJOMk2.js";import{f as Sa}from"./formatServerData-Bn4-C3HP.js";import{D as Ta}from"./DemographicBar-DvoT-SqS.js";import{i as Ma}from"./tasks-dy2xvsUe.js";const xa=ht({__name:"ARTCard",props:{patient:{default:{}}},setup(x){const E=x,h=g(!1),D=g({artStartDate:"",arvNumber:"",fileNumber:"",currentOutcome:""}),S=async f=>{h.value=!0;try{const r=await nt.getProgramInformation(f);D.value={artStartDate:(()=>{const[d,V,L]=r.art_start_date.split("/"),G=r.art_start_date.match(/n\/a/i)?"":"(".concat(Ke(nt.getSessionDate()).diff("".concat(L,"-").concat(V,"-").concat(d),"months")," Month(s))");return"".concat(r.art_start_date," ").concat(G)})(),arvNumber:"".concat(r.arv_number," | Regimen: ").concat(r.current_regimen),fileNumber:r.filing_number.number,currentOutcome:r.current_outcome}}catch(r){console.error("Error fetching ART information:",r)}finally{h.value=!1}};return at(()=>E.patient,f=>{f&&f.patientID?S(f.patientID):D.value={artStartDate:"--",arvNumber:"--",fileNumber:"--",currentOutcome:"--"}},{immediate:!0,deep:!0}),(f,r)=>(u(),y(t(ft),null,{default:n(()=>[a(t(Ye),null,{default:n(()=>[a(t(ze),null,{default:n(()=>[h.value?(u(),y(t(mt),{key:0,animated:"",style:{width:"200px",height:"24px"}})):(u(),b(J,{key:1},[a(t(C),{icon:t(Fe)},null,8,["icon"]),r[0]||(r[0]=c(" ART Information ",-1))],64))]),_:1})]),_:1}),a(t(Ot),null,{default:n(()=>[a(t(We),null,{default:n(()=>[h.value?(u(),b(J,{key:0},vt(4,d=>a(t(N),{key:d},{default:n(()=>[a(t(mt),{slot:"start",animated:"",style:{width:"24px",height:"24px","border-radius":"50%"}}),a(t(O),null,{default:n(()=>[a(t(mt),{animated:"",style:{width:"120px",height:"16px","margin-bottom":"8px"}}),a(t(mt),{animated:"",style:{width:"180px",height:"20px"}})]),_:1})]),_:1})),64)):(u(),b(J,{key:1},[a(t(N),null,{default:n(()=>[a(t(C),{icon:t(je),slot:"start"},null,8,["icon"]),a(t(O),null,{default:n(()=>[r[1]||(r[1]=o("h3",null,"ART Start Date",-1)),o("p",null,v(D.value.artStartDate),1)]),_:1})]),_:1}),a(t(N),null,{default:n(()=>[a(t(C),{icon:t(le),slot:"start"},null,8,["icon"]),a(t(O),null,{default:n(()=>[r[2]||(r[2]=o("h3",null,"ARV Number",-1)),o("p",null,v(D.value.arvNumber),1)]),_:1})]),_:1}),a(t(N),null,{default:n(()=>[a(t(C),{icon:t(qe),slot:"start"},null,8,["icon"]),a(t(O),null,{default:n(()=>[r[3]||(r[3]=o("h3",null,"File Number",-1)),o("p",null,v(D.value.fileNumber),1)]),_:1})]),_:1}),a(t(N),null,{default:n(()=>[a(t(C),{icon:t(Je),slot:"start"},null,8,["icon"]),a(t(O),null,{default:n(()=>[r[4]||(r[4]=o("h3",null,"Current Outcome",-1)),o("p",null,v(D.value.currentOutcome),1)]),_:1})]),_:1})],64))]),_:1})]),_:1})]),_:1}))}}),Va=St(xa,[["__scopeId","data-v-7ec7b45c"]]),oe=[{classDash:"dashed_bottom_border",radioBtnContent:{header:{title:"Is the pregnancy confirmed?*",class:"bold",selectedValue:"",name:"Pregnancy confirmed"},data:[{value:"Yes",name:"Yes",colSize:"2"},{value:"No",name:"No",colSize:"2"}]}},{classDash:"dashed_bottom_border",radioBtnContent:{header:{title:"Was the pregnancy planned?*",selectedValue:"",class:"bold",name:"Pregnancy planned"},data:[{value:"Yes",name:"Yes",colSize:"2"},{value:"No",name:"No",colSize:"2"}]}}],$a=Qe("ANCEnrollmentStore",{state:()=>({ConfirmPregnancy:[...oe]}),actions:{setConfirmPregnancy(x){this.ConfirmPregnancy=x},getInitial(){return[...Ea.cloneDeep(oe)]}}}),La={class:"header-content"},Ba={class:"title-section"},Ha={class:"tasks-container"},Ga=["onClick"],Ua={class:"task-icon-container"},za={class:"task-content"},Fa={key:0,class:"task-status"},Ya={key:1,class:"empty-state"},Wa={class:"empty-icon"},ja=ht({__name:"TaskView",props:{tasks:{type:Object,required:!0}},setup(x){const E=g([]),h=x;ie(async()=>{const f=new st;E.value=[];const r=await new _a(f.getID()).getProgram();h.tasks.forEach(async d=>{var L,G,ot,lt;const V={orderNumber:(L=d.sortOrder)!=null?L:9999,label:(G=d.displayName)!=null?G:d.name,icon:d.icon,disabled:!1,taskCompleted:!1,task:d};if(!(typeof d.workflowID=="string"&&!await Ma(d.workflowID))&&!(typeof d.condition=="function"&&!await d.condition(h.tasks))&&!(typeof d.globalProperty=="string"&&!await ga.isProp("".concat(d.globalProperty,"=true"))))return typeof d.allowTaskAfterDeath=="boolean"&&d.allowTaskAfterDeath===!1&&/died/i.test("".concat((ot=r==null?void 0:r.program)==null?void 0:ot.outcome))&&new Date(st.getSessionDate())>=new Date((lt=r==null?void 0:r.program)==null?void 0:lt.startDate)&&(V.disabled=!0),typeof d.disabled=="function"&&(V.disabled=await d.disabled(h.tasks)),E.value.push(V),E.value.sort((it,_t)=>{var rt,ut;return((rt=it.orderNumber)!=null?rt:9999)-((ut=_t.orderNumber)!=null?ut:9999)}),d})});const D=f=>{if(!f.disabled){if(f.task.action)S(),f.task.action();else if(f.task.component&&f.task.isFormComponent){de(ya,{},!1,{title:f.task.name,useComponent:f.task.component,onClose:S});return}}};function S(){oa.dismiss()}return(f,r)=>(u(),y(t(ue),null,{default:n(()=>[a(t(Ze),{class:"ion-no-border"},{default:n(()=>[a(t(Xe),{class:"custom-header"},{default:n(()=>[o("div",La,[o("div",Ba,[a(t(C),{icon:t(ta),class:"header-icon"},null,8,["icon"]),a(t(ea),{class:"custom-title"},{default:n(()=>[...r[0]||(r[0]=[c("Program Activities",-1)])]),_:1})]),a(t(aa),{onClick:S,fill:"clear",shape:"round"},{default:n(()=>[a(t(C),{icon:t(Et)},null,8,["icon"])]),_:1})])]),_:1})]),_:1}),a(t(Nt),{class:"custom-content"},{default:n(()=>[o("div",Ha,[E.value&&E.value.length>0?(u(),y(t(na),{key:0,class:"tasks-grid"},{default:n(()=>[a(t(M),{class:"ion-justify-content-center"},{default:n(()=>[(u(!0),b(J,null,vt(E.value,(d,V)=>(u(),y(t(m),{size:"12","size-sm":"6","size-md":"4","size-lg":"3",key:V,class:"task-col"},{default:n(()=>[o("div",{class:re(["task-card",{"task-completed":d.taskCompleted,"task-disabled":d.disabled}]),onClick:L=>!d.disabled&&D(d)},[o("div",Ua,[a(t(C),{color:d.taskCompleted?"success":"primary",icon:d.taskCompleted?t(Zt):d.icon,class:"task-icon"},null,8,["color","icon"])]),o("div",za,[a(t(O),{class:"task-label"},{default:n(()=>[c(v(d.label),1)]),_:2},1024),d.taskCompleted?(u(),b("div",Fa,[a(t(C),{icon:t(Zt),color:"success"},null,8,["icon"]),r[1]||(r[1]=o("span",null,"Completed",-1))])):_("",!0)])],10,Ga)]),_:2},1024))),128))]),_:1})]),_:1})):(u(),b("div",Ya,[o("div",Wa,[a(t(C),{icon:t(sa)},null,8,["icon"])]),r[2]||(r[2]=o("h3",null,"No Activities Yet",-1)),r[3]||(r[3]=o("p",null,"Your program activities will appear here once they're available.",-1))]))])]),_:1})]),_:1}))}}),qa=St(ja,[["__scopeId","data-v-244ec438"]]);async function Ja(x,E="tasks"){var S,f;const D=(S={1:ba}[x])!=null?S:{};de(qa,{},!0,{tasks:(f=D==null?void 0:D[E])!=null?f:[]})}const Ka={key:5,class:"content_manager"},Qa={style:{display:"flex","justify-content":"space-between"}},Za={class:"p_name_image"},Xa={style:{width:"100%"}},tn={class:"p_name"},en={style:{display:"flex","justify-content":"space-between"}},an={class:"start-visit"},nn={class:"button-group"},sn={class:"send-button-container action-buttons"},on={class:"send-button-container"},ln={class:"send-button-container"},rn={class:"send-button-container"},un={style:{"padding-left":"10px","padding-right":"10px"}},dn={class:"vitalsUnits"},cn={style:{width:"100%",overflow:"scroll",height:"64px"}},mn={key:0,style:{"margin-top":"1px"}},pn={key:0,class:"patient-chart"},fn={class:"patient-chart"},vn={key:1,class:"patient-chart"},_n={key:1},gn={key:2},yn={key:3},bn={key:4},Cn={key:5},Pn={class:"rght-drpm"},An="NEONATAL PROGRAM",In=ht({__name:"PatientProfile",setup(x,{expose:E}){const h=I(()=>k(()=>import("./LabOrdersList-CyKMZQBo.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11]),import.meta.url)),D=I(()=>k(()=>import("./DiagnosesHistory-mY7NJkDm.js"),__vite__mapDeps([12,1,2,3,4,5,6,13,7,8,9,10,14,15,16]),import.meta.url)),S=I(()=>k(()=>import("./AllergiesContraindication-DRteSo4x.js"),__vite__mapDeps([17,1,2,3,4,5,6,18,19,20]),import.meta.url)),f=I(()=>k(()=>import("./VisitsHistory-w4LUVJwn.js"),__vite__mapDeps([21,1,2,3,4,5,6,22]),import.meta.url)),r=I(()=>k(()=>import("./VitalsMeasurementsSummary-D8eS-Q13.js"),__vite__mapDeps([23,1,2,3,4,5,6,13,7,8,9,10,14,15,24]),import.meta.url)),d=I(()=>k(()=>import("./PatientProfile-DlJMV6Tv.js"),__vite__mapDeps([25,1,2,3,4,5,6,26,27,28,29,30,31,13,7,8,9,10,0,11,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,14,15,59,60,61,62,63,64,65,66,18,19,67,68,69,70,71,72,73,74,75,76,77,78,79]),import.meta.url)),V=I(()=>k(()=>import("./HTSPatientProfile-BorEyUU6.js"),__vite__mapDeps([80,1,2,3,4,5,6,47,48,49,50,51,44,45,46,52,53,54,55,68,69,70,71,7,8,9,10,72,73,57,43,74,81]),import.meta.url)),L=I(()=>k(()=>import("./NeonatalPatientProfile-DdsCE1ZB.js"),__vite__mapDeps([82,1,2,3,4,5,6,44,45,46,47,48,49,50,51,52,53,54,55,68,69,70,83,71,7,8,9,10,72,73,57,43,74,84]),import.meta.url)),G=I(()=>k(()=>import("./AETCPatientProfile-DSNzfyeh.js"),__vite__mapDeps([85,1,2,3,4,5,6,86,44,45,46,47,48,49,50,51,52,53,54,55,43,26,27,87,88,89,90,91]),import.meta.url)),ot=I(()=>k(()=>import("./WeightHeightChart-DyUzBRJ4.js"),__vite__mapDeps([68,4,1,2,3,5,6,69,70]),import.meta.url)),lt=I(()=>k(()=>import("../index-hyu0M4vo.js").then(s=>s.cI),__vite__mapDeps([4,1,2,3,5,6]),import.meta.url)),it=I(()=>k(()=>import("./BloodPressure-Chq6hEhz.js"),__vite__mapDeps([92,1,2,3,5,4,6,93]),import.meta.url)),_t=I(()=>k(()=>import("./AncEnrollmentModal-7Ko3CA00.js"),__vite__mapDeps([94,1,2,3,4,5,6,7,8,9,10,86,44,45,46,47,48,49,50,51,52,53,54,55,43,26,27,90,95]),import.meta.url)),rt=I(()=>k(()=>import("./LabourEnrollmentModal-B49WwsJ6.js"),__vite__mapDeps([96,1,2,3,4,5,6,45,46,47,48,49,50,51,52,53,54,7,8,9,10,86,44,55,43,26,27,90,97]),import.meta.url)),ut=I(()=>k(()=>import("./PNCEnrollmentModal-DRs7Py6n.js"),__vite__mapDeps([98,1,2,3,4,5,6,45,46,47,48,49,50,51,52,53,54,7,8,9,10,86,44,55,43,26,27,90,99]),import.meta.url)),K=la(),ce=ia(),gt=Ca(),me=Pa(),pe=$a(),{event:fe,popoverOpen:Tt,openPopover:Mt,openPIM:xt,openOutCome:ve,openUpdateNCDNUmbers:_e,printVisitSummary:ge,printID:ye,formatCurrentAddress:be}=ha(),{screenWidth:yt}=Aa(),{patient:i}=Dt(gt),{activeProgram:P,authorizedPrograms:Vt}=Dt(me),{ConfirmPregnancy:Ce}=Dt(pe),dt=g(!1),Pe=g(!0),Ae=g(!1),bt=g(!1),Ie=g(!1),$=g("Patient Charts"),$t=g(null),ke=g([]),B=g({}),U=g(!1),Q=g(!1),Lt=g(!1),Bt=g(!1),T=g([]),z=g(0),Ct=g(),Z=g(""),Pt=g(!1),De=s=>s==null?void 0:s.trim().toUpperCase(),we=s=>s===R.NEONATAL_PROGRAM||s===R.HTC_PROGRAM,Re=s=>De(s)===An,Oe=s=>{var A;if(!s)return!1;const e=(A=s.id)!=null?A:s.program_id;return we(e)||Re(s.name)},Ee=pt(()=>{var e,A;const s=(A=(e=i.value)==null?void 0:e.personInformation)==null?void 0:A.gender;return s==="Male"||s==="M"?Vt.value.filter(p=>p.name!=="ANC PROGRAM"&&p.name!=="LABOUR AND DELIVERY PROGRAM"&&p.name!=="PNC PROGRAM"):Vt.value.map(p=>{if(p.name==="ANC PROGRAM"||p.name==="LABOUR AND DELIVERY PROGRAM"||p.name==="PNC PROGRAM"){if(!(T!=null&&T.value))return;const l=T==null?void 0:T.value.some(w=>w.id===p.program_id);return{...p,actionName:l?"Start ".concat(p.name):"Enroll in ".concat(p.name)}}return p})}),Ne=pt(()=>!U.value&&P.value.program_id==14),he=pt(()=>U.value&&P.value.program_id==14),Ht=pt(()=>Oe(P.value)),Se=()=>{var s,e;if((e=(s=i.value)==null?void 0:s.personInformation)!=null&&e.birthdate){const A=H.getAgeInYears(i.value.personInformation.birthdate);Pt.value=A<9}},Te=()=>{var s,e;(e=(s=i.value)==null?void 0:s.personInformation)!=null&&e.birthdate&&(Pe.value=H.getAgeInYears(i.value.personInformation.birthdate)>=14,Ae.value=H.ageInMonths(i.value.personInformation.birthdate)<9,bt.value=H.getAgeInYears(i.value.personInformation.birthdate)<5,Ie.value=H.dateDiffInDays(H.sessionDate(),i.value.personInformation.birthdate)<42)},F=s=>{$.value=s},Gt=()=>[{backgroundColor:"#B9E6FE",status:"",icon:wt(["#B9E6FE","#026AA2","#9ADBFE"]),textColor:"#026AA2",value:"No further action is required.",name:"",index:"Blood sugar is normal"},{backgroundColor:"#FEDF89",status:"",icon:wt(["#FEDF89","#B54708","#FED667"]),textColor:"#B54708",value:"Please call or follow up!",name:"",index:"Patient Defaulted"},{backgroundColor:"#FECDCA",status:"",icon:wt(["#FECDCA","#B42318","#FDA19B"]),textColor:"#B42318",value:"Administer medications!",name:"",index:"Patient is hypertensive"}],Ut=async()=>{if(P.value.program_id==14)try{const s=await ka(gt.patient.ID);if(!s)return;U.value=!!s.length}catch(s){console.error(s)}},Me=async()=>{await ne("Are you sure you want to create the visit?")&&await Da(gt.patient)&&(U.value=!0,await se().refresh(et.getUserLocationId()),q("The patient visit is now active. Patient is on the waiting list for vitals"))},xe=async()=>{await ne("Are you sure you want to close the visit?")&&await wa(i.value)&&(U.value=!1,await se().refresh(et.getUserLocationId()),q("The patient visit is now closed"))},zt=async()=>{if(P.value.program_id==14)try{const s=await Ra.getCheckInStatus(i.value.patientID);if(!s)return;U.value=s.length>0}catch(s){console.error(s)}},Ve=s=>{$t.value=s,dt.value=!dt.value},Ft=(s="tasks")=>Ja(P.value.program_id,s),Yt=async s=>{var A,p,l,w,W;if(await Y(),(s.program_id==R.ANC_PROGRAM||s.program_id==R.PNC_PROGRAM||s.program_id==R.LABOUR_AND_DELIVERY_PROGRAM)&&!((A=T==null?void 0:T.value)==null?void 0:A.find(ct=>ct.id==s.program_id))){if(s.program_id==R.ANC_PROGRAM){Q.value=!0,z.value=s.program_id;return}else if(s.program_id==R.LABOUR_AND_DELIVERY_PROGRAM){Lt.value=!0,Z.value="Are you sure you want to enroll ".concat((l=(p=i.value)==null?void 0:p.personInformation)==null?void 0:l.given_name.toUpperCase()," in this program?"),z.value=s.program_id;return}else if(s.program_id==R.PNC_PROGRAM){Bt.value=!0,Z.value="Are you sure you want to enroll ".concat((W=(w=i.value)==null?void 0:w.personInformation)==null?void 0:W.given_name.toUpperCase()," in this program?"),z.value=s.program_id;return}}const e=await tt.userProgramData(i.value.patientID,s);if(s.program_id===14){if(e!=null&&e.canProceed&&e.url)return K.push(e.url);e!=null&&e.showWarning&&Rt("The patient's visit is not activated or you don't have permissions for the current stage");return}if(e!=null&&e.url)return K.push(e.url)},At=()=>{Q.value=!1},Wt=()=>{Q.value=!Q.value},$e=async()=>{const s=et.getUserID(),e=new Na(i.value.patientID,s);if(!await e.createEncounter())return Rt("Unable to create quick check encounter");const p=await e.saveObservationList(await Ue());try{await nt.enrollProgram(i.value.patientID,z.value,new Date().toString()),q("Enrollment is successful")}catch(l){q("Already Enrolled")}return p?(await Y(),Wt(),K.push("ANCHome")):Rt("Unable to create quick check details!")},Le=async()=>(await nt.enrollProgram(i.value.patientID,z.value,new Date().toString()),await Y(),q("Enrollment is successful"),K.push("LabourHome")),Be=async()=>(await nt.enrollProgram(i.value.patientID,z.value,new Date().toString()),await Y(),q("Enrollment is successful"),K.push("PNCHome")),Y=async()=>{const s=i.activePrograms;T.value=s==null?void 0:s.map(e=>({name:e.program.name,id:e.program_id}))},It=()=>{Wt()},jt=async()=>{const e=["Height (cm)","Weight","Systolic","Diastolic","Temperature","Pulse","Respiratory rate"].map(async p=>{const l=await Oa.getFirstValueNumber(i.value.patientID,p);return{[p]:l}});Ct.value=new st().getBloodGlucose(i.value);const A=await Promise.all(e);B.value=Object.assign({},...A)},He=s=>s=="Undetermined"?"Undetermined":["Male","M"].includes(s)?"Male":["Female","F"].includes(s)?"Female":"",Ge=()=>{var s,e;return H.getBirthdateAge((e=(s=i.value)==null?void 0:s.personInformation)==null?void 0:e.birthdate)},Ue=async()=>await Sa(Ce.value);return ie(async()=>{await Ut(),await tt.userProgramData(i.value.patientID),Te();const s=new st;ke.value=await st.getPatientVisits(s.getID(),!1),await Y(),Gt(),await jt(),await zt()}),at(()=>{var s;return(s=i.value)==null?void 0:s.patientID},async s=>{s&&(await tt.userProgramData(s),await Y())},{immediate:!0}),at(()=>i,async()=>{await tt.userProgramData(i.value.patientID),await jt(),await zt(),await Ut()},{deep:!0}),at(ce,async s=>{await tt.userProgramData(i.value.patientID)},{deep:!0}),at(()=>i.value,()=>{Se()},{immediate:!0,deep:!0}),E({showUnderageWarning:Pt}),(s,e)=>{const A=Xt("ion-list"),p=Xt("ion-popover");return u(),y(t(ue),null,{default:n(()=>[a(Ia),a(t(Nt),{fullscreen:!0},{default:n(()=>[t(P).program_id!==33&&t(P).program_id!=""&&t(yt)<1120?(u(),y(Ta,{key:0,onOpenPopover:e[0]||(e[0]=l=>t(Mt)(l))})):_("",!0),a(t(_t),{closeModalFunc:At,onYes:$e,onNo:It,isOpen:Q.value,title:Z.value,showUnderageWarning:Pt.value},null,8,["isOpen","title","showUnderageWarning"]),a(t(rt),{closeModalFunc:At,onYes:Le,onNo:It,isOpen:Lt.value,title:Z.value},null,8,["isOpen","title"]),a(t(ut),{closeModalFunc:At,onYes:Be,onNo:It,isOpen:Bt.value,title:Z.value},null,8,["isOpen","title"]),t(P).program_id==t(R).IMMUNIZATION_PROGRAM?(u(),y(t(d),{key:1,updateData:t(i)},null,8,["updateData"])):_("",!0),t(P).program_id==t(R).HTS_PROGRAM?(u(),y(t(V),{key:2,updateData:t(i)},null,8,["updateData"])):_("",!0),t(P).program_id==t(R).AETC_PROGRAM?(u(),y(t(G),{key:3,updateData:t(i)},null,8,["updateData"])):_("",!0),Ht.value?(u(),y(t(L),{key:4})):_("",!0),t(P).program_id!==t(R).AETC_PROGRAM&&t(P).program_id!==t(R).IMMUNIZATION_PROGRAM&&t(P).program_id!==t(R).HTS_PROGRAM&&!Ht.value&&t(P).program_id!=""?(u(),b("div",Ka,[a(t(M),{class:"content_width"},{default:n(()=>[a(t(m),{size:"2.5","size-lg":"2.6","size-md":"3",class:"displayNoneLeftPanel"},{default:n(()=>[a(t(ft),{style:{"margin-bottom":"20px","background-color":"#fff"}},{default:n(()=>[a(t(Ot),null,{default:n(()=>{var l,w,W,kt,ct,qt,Jt,Kt;return[o("div",Qa,[e[22]||(e[22]=o("div",null,null,-1)),o("div",{class:"name",style:{color:"var(--ion-color-primary)","margin-top":"10px"},onClick:e[1]||(e[1]=X=>t(Mt)(X))},[a(t(C),{icon:t(ra),style:{"font-size":"2.2rem"}},null,8,["icon"])])]),o("div",Za,[o("div",{class:re(((w=(l=t(i))==null?void 0:l.personInformation)==null?void 0:w.gender)=="M"?"initialsBox maleColor":"initialsBox femaleColor"),onClick:e[2]||(e[2]=X=>t(xt)())},[a(t(C),{style:{color:"#fff","font-size":"70px"},icon:t(ua)},null,8,["icon"])],2),o("div",Xa,[o("div",tn,v((kt=(W=t(i))==null?void 0:W.personInformation)==null?void 0:kt.given_name)+" "+v((qt=(ct=t(i))==null?void 0:ct.personInformation)==null?void 0:qt.middle_name)+" "+v((Kt=(Jt=t(i))==null?void 0:Jt.personInformation)==null?void 0:Kt.family_name),1)])]),a(t(M),null,{default:n(()=>[a(t(m),{size:"4"},{default:n(()=>[...e[23]||(e[23]=[c("MRN:",-1)])]),_:1}),a(t(m),{class:"demoContent"},{default:n(()=>[c(v(t(i).ID),1)]),_:1})]),_:1}),t(P).program_id===32?(u(),y(t(M),{key:0},{default:n(()=>[a(t(m),{size:"4"},{default:n(()=>[...e[24]||(e[24]=[c("NCDNumber:",-1)])]),_:1}),a(t(m),{class:"demoContent"},{default:n(()=>[c(v(t(i).NcdID),1)]),_:1})]),_:1})):_("",!0),a(t(M),null,{default:n(()=>[a(t(m),{size:"4"},{default:n(()=>[...e[25]||(e[25]=[c("Gender:",-1)])]),_:1}),a(t(m),{class:"demoContent"},{default:n(()=>{var X,Qt;return[c(v(He((Qt=(X=t(i))==null?void 0:X.personInformation)==null?void 0:Qt.gender)),1)]}),_:1})]),_:1}),a(t(M),null,{default:n(()=>[a(t(m),{size:"4"},{default:n(()=>[...e[26]||(e[26]=[c("Age:",-1)])]),_:1}),a(t(m),{class:"demoContent"},{default:n(()=>[c(v(Ge()),1)]),_:1})]),_:1}),a(t(M),null,{default:n(()=>[a(t(m),{size:"4"},{default:n(()=>[...e[27]||(e[27]=[c("Address:",-1)])]),_:1}),a(t(m),{class:"demoContent"},{default:n(()=>[c(v(t(be)(t(i))),1)]),_:1})]),_:1})]}),_:1})]),_:1}),t(et).getProgramID()===1?(u(),y(Va,{key:0,patient:t(i)},null,8,["patient"])):_("",!0),a(t(ft),{style:{"margin-bottom":"20px","background-color":"#fff"}},{default:n(()=>[a(t(da),{value:["first"]},{default:n(()=>[a(t(ca),{value:"first",style:{"background-color":"#fff"},"toggle-icon-slot":"start"},{default:n(()=>[a(t(N),{slot:"header",color:"white"},{default:n(()=>[a(t(O),{class:"side_title"},{default:n(()=>[...e[28]||(e[28]=[c("Alerts & Reminders ",-1)])]),_:1})]),_:1}),a(t(Ot),{slot:"content"},{default:n(()=>[(u(!0),b(J,null,vt(Gt(),(l,w)=>(u(),b("span",{key:w},[l.value?(u(),y(t(M),{key:0,style:te("border-radius: 5px;  margin-top:10px; margin-bottom:10px;background-color:"+l.backgroundColor)},null,8,["style"])):_("",!0)]))),128))]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),a(t(m),{"size-sm":"12","size-md":"12","size-lg":t(yt)>1120?"9.4":"12"},{default:n(()=>[a(t(ft),{style:{"background-color":"#fff","margin-inline":"0px",contain:"unset",overflow:"unset"}},{default:n(()=>[o("div",null,[o("div",en,[e[29]||(e[29]=o("div",{class:"vitalsTitle"},"Most recent Vitals & Biometrics",-1)),o("div",an,[o("div",nn,[o("div",sn,[Ne.value?(u(),y(ae,{key:0,name:"Activate visit",onClick:e[3]||(e[3]=l=>Me()),fill:"clear",iconSlot:"start",icon:t(Et),class:"action-button"},null,8,["icon"])):_("",!0),he.value?(u(),y(ae,{key:1,name:"Deactivate visit",onClick:e[4]||(e[4]=l=>xe()),fill:"clear",iconSlot:"start",icon:t(Et),class:"action-button danger"},null,8,["icon"])):_("",!0)]),o("div",on,[o("button",{class:"send-text",onClick:e[5]||(e[5]=l=>Ft())},"Tasks")]),o("div",ln,[o("button",{class:"send-text",onClick:e[6]||(e[6]=l=>Ft("other"))},"Printout/Other")]),o("div",rn,[o("button",{class:"send-text",onClick:e[7]||(e[7]=l=>Yt(t(P)))},"Start visit"),o("button",{class:"send-arrow",onClick:e[8]||(e[8]=l=>Ve(l))})])])])])]),o("div",un,[a(t(M),null,{default:n(()=>[a(t(m),{class:"vitalsHeading"},{default:n(()=>[...e[30]||(e[30]=[c("Weight",-1)])]),_:1}),a(t(m),{class:"vitalsHeading"},{default:n(()=>[...e[31]||(e[31]=[c("Height",-1)])]),_:1}),a(t(m),{class:"vitalsHeading"},{default:n(()=>[...e[32]||(e[32]=[c("Temperature",-1)])]),_:1}),a(t(m),{class:"vitalsHeading"},{default:n(()=>[...e[33]||(e[33]=[c("Blood glucose",-1)])]),_:1}),a(t(m),{class:"vitalsHeading"},{default:n(()=>[...e[34]||(e[34]=[c("Pulse Rate",-1)])]),_:1}),a(t(m),{class:"vitalsHeading"},{default:n(()=>[...e[35]||(e[35]=[c("Blood pressure",-1)])]),_:1})]),_:1}),a(t(M),null,{default:n(()=>[a(t(m),{class:"vitalsValue"},{default:n(()=>[c(v(B.value.Weight)+" ",1),e[36]||(e[36]=o("span",{class:"vitalsUnits"},"kg",-1))]),_:1}),a(t(m),{class:"vitalsValue"},{default:n(()=>[c(v(B.value["Height (cm)"])+" ",1),e[37]||(e[37]=o("span",{class:"vitalsUnits"},"cm",-1))]),_:1}),a(t(m),{class:"vitalsValue"},{default:n(()=>[c(v(B.value.Temperature)+" ",1),e[38]||(e[38]=o("span",{class:"vitalsUnits"},"Â°C",-1))]),_:1}),a(t(m),{class:"vitalsValue"},{default:n(()=>{var l,w;return[c(v((l=Ct.value)==null?void 0:l.value)+" ",1),o("span",dn,v((w=Ct.value)==null?void 0:w.unit),1)]}),_:1}),a(t(m),{class:"vitalsValue"},{default:n(()=>[c(v(B.value.Pulse)+" ",1),e[39]||(e[39]=o("span",{class:"vitalsUnits"},"bpm ",-1))]),_:1}),a(t(m),{class:"vitalsValue"},{default:n(()=>[c(v(B.value.Systolic)+"/"+v(B.value.Diastolic),1),e[40]||(e[40]=o("span",{class:"vitalsUnits"},"mmhg",-1))]),_:1})]),_:1})])]),_:1}),o("div",cn,[a(t(ma),{value:$.value,style:{"margin-top":"5px","min-width":"540px"}},{default:n(()=>[a(t(j),{value:"Patient Charts",onClick:e[9]||(e[9]=l=>F("Patient Charts"))},{default:n(()=>[a(t(O),null,{default:n(()=>[...e[41]||(e[41]=[c("Patient Charts",-1)])]),_:1})]),_:1}),a(t(j),{value:"Visits History",onClick:e[10]||(e[10]=l=>F("Visits History"))},{default:n(()=>[a(t(O),null,{default:n(()=>[...e[42]||(e[42]=[c("Visits History",-1)])]),_:1})]),_:1}),a(t(j),{value:"Vitals & Measurements Summary",onClick:e[11]||(e[11]=l=>F("Vitals & Measurements Summary"))},{default:n(()=>[a(t(O),null,{default:n(()=>[...e[43]||(e[43]=[c("Vitals & Measurements Summary",-1)])]),_:1})]),_:1}),a(t(j),{value:"Lab Tests History",onClick:e[12]||(e[12]=l=>F("Lab Tests History"))},{default:n(()=>[a(t(O),null,{default:n(()=>[...e[44]||(e[44]=[c("Lab Tests History",-1)])]),_:1})]),_:1}),a(t(j),{value:"Diagnosis History",onClick:e[13]||(e[13]=l=>F("Diagnosis History"))},{default:n(()=>[a(t(O),null,{default:n(()=>[...e[45]||(e[45]=[c("Diagnosis History",-1)])]),_:1})]),_:1}),a(t(j),{value:"Allergies & Contraindication",onClick:e[14]||(e[14]=l=>F("Allergies & Contraindication"))},{default:n(()=>[a(t(O),null,{default:n(()=>[...e[46]||(e[46]=[c("Allergies & Contraindication",-1)])]),_:1})]),_:1})]),_:1},8,["value"])]),$.value=="Patient Charts"?(u(),b("div",mn,[o("div",{style:te(t(yt)>826?"display: flex;":"display: block;")},[bt.value?(u(),b("div",pn,[a(t(ot))])):_("",!0),o("div",fn,[a(t(it))]),bt.value?_("",!0):(u(),b("div",vn,[a(t(lt))]))],4)])):_("",!0),$.value=="Visits History"?(u(),b("div",_n,[a(t(f))])):_("",!0),$.value=="Vitals & Measurements Summary"?(u(),b("div",gn,[a(t(r))])):_("",!0),$.value=="Lab Tests History"?(u(),b("div",yn,[a(t(h))])):_("",!0),$.value=="Diagnosis History"?(u(),b("div",bn,[a(t(D))])):_("",!0),$.value=="Allergies & Contraindication"?(u(),b("div",Cn,[a(t(S))])):_("",!0)]),_:1},8,["size-lg"])]),_:1})])):_("",!0)]),_:1}),a(p,{style:{"--offset-x":"-10px"},"is-open":t(Tt),"show-backdrop":!1,"dismiss-on-select":!0,event:t(fe),onDidDismiss:e[20]||(e[20]=l=>Tt.value=!1)},{default:n(()=>[o("div",null,[a(A,{style:{"--ion-background-color":"#fff","--offset-x":"-30px"}},{default:n(()=>[a(t(N),{button:!0,detail:!1,onClick:e[15]||(e[15]=l=>t(xt)()),style:{cursor:"pointer"},class:"list-content"},{default:n(()=>[a(t(C),{icon:t(pa),slot:"start",class:"sub-menu-icon"},null,8,["icon"]),e[47]||(e[47]=o("span",{class:"sub-menu-txt"},"Update demographics",-1))]),_:1}),a(t(N),{button:!0,detail:!1,onClick:e[16]||(e[16]=l=>t(ve)()),style:{cursor:"pointer"},class:"list-content"},{default:n(()=>[a(t(C),{icon:t(fa),slot:"start",class:"sub-menu-icon"},null,8,["icon"]),e[48]||(e[48]=o("span",{class:"sub-menu-txt"},"Update outcome",-1))]),_:1}),t(et).getProgramID()==32?(u(),y(t(N),{key:0,button:!0,detail:!1,onClick:e[17]||(e[17]=l=>t(_e)()),style:{cursor:"pointer"},class:"list-content"},{default:n(()=>[a(t(C),{icon:t(le),slot:"start",class:"sub-menu-icon"},null,8,["icon"]),e[49]||(e[49]=o("span",{class:"sub-menu-txt"},"Update NCD Number",-1))]),_:1})):_("",!0),a(t(N),{button:!0,detail:!1,onClick:e[18]||(e[18]=l=>t(ge)()),style:{cursor:"pointer"},class:"list-content"},{default:n(()=>[a(t(C),{icon:t(ee),slot:"start",class:"sub-menu-icon"},null,8,["icon"]),e[50]||(e[50]=o("span",{class:"sub-menu-txt"},"Print visit summary",-1))]),_:1}),a(t(N),{button:!0,detail:!1,onClick:e[19]||(e[19]=l=>t(ye)()),style:{cursor:"pointer"},class:"list-content"},{default:n(()=>[a(t(C),{icon:t(ee),slot:"start",class:"sub-menu-icon"},null,8,["icon"]),e[51]||(e[51]=o("span",{class:"sub-menu-txt"},"Print client identifier",-1))]),_:1})]),_:1})])]),_:1},8,["is-open","event"]),a(p,{"is-open":dt.value,"show-backdrop":!1,"dismiss-on-select":!0,event:$t.value,onDidDismiss:e[21]||(e[21]=l=>dt.value=!1),style:{"--width":"350px"}},{default:n(()=>[a(t(Nt),null,{default:n(()=>[a(A,null,{default:n(()=>[(u(!0),b(J,null,vt(Ee.value,(l,w)=>(u(),y(t(N),{button:!0,detail:!1,style:{cursor:"pointer"},key:w,onClick:W=>Yt(l)},{default:n(()=>[a(t(C),{slot:"start",icon:t(va)},null,8,["icon"]),o("span",Pn,v(l==null?void 0:l.actionName),1)]),_:2},1032,["onClick"]))),128))]),_:1})]),_:1})]),_:1},8,["is-open","event"])]),_:1})}}}),kn=St(In,[["__scopeId","data-v-3e542761"]]),Tn=Object.freeze(Object.defineProperty({__proto__:null,default:kn},Symbol.toStringTag,{value:"Module"}));export{Va as A,Tn as P,$a as u};
