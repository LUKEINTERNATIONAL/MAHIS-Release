System.register(["../index-legacy-ByYLEw00.js","./vendor-legacy-DjGXx6Xl.js"],function(e,a){"use strict";var n,o,t,r,s,i,c,l,d,p,u,_,g,R,m,A,v,h,O,P,b,C,M,f,G,I,x,y,E,k,N,w,F,D,S,T,B,V,L,U,z,Y,H,j,K,J,W,X,Z,$,Q,q,ee;return{setters:[e=>{n=e.a1,o=e.a,t=e.ai,r=e.aj,s=e.S,i=e.t,c=e.ak,l=e.al,d=e.am,p=e._,u=e.w,_=e.z,g=e.U,R=e.l,m=e.m},e=>{A=e.D,v=e.d,h=e.r,O=e.c,P=e.a,b=e.O,C=e.f,M=e.J,f=e.l,G=e.u,I=e.I,x=e.E,y=e.Q,E=e.K,k=e.L,N=e.a2,w=e.R,F=e.a3,D=e.e,S=e.F,T=e.P,B=e.a4,V=e.a5,L=e.bw,U=e.W,z=e.M,Y=e.N,H=e.a6,j=e.w,K=e.H,J=e.b3,W=e.k,X=e.V,Z=e.aV,$=e.m,Q=e.dx,q=e.dw,ee=e.d7}],execute:function(){var a=document.createElement("style");a.textContent=".his-card[data-v-b78c7022]{border:1px solid #cccbcb;background:var(--his-card-primary-color);padding:var(--his-card-primary-padding);margin:var(--his-card-primary-padding);border-radius:var(--his-card-primary-border-radius);-webkit-box-shadow:var(--his-card-primary-shadow-webkit);-moz-box-shadow:var(--his-card-primary-shadow-moz);box-shadow:var(--his-card-primary-shadow)}.clickable[data-v-b78c7022]:hover{transform:translateY(4px);background-color:#ebebeb}.clickable[data-v-b78c7022]:active{background-color:var(--ion-success)}.no-data-container[data-v-b78c7022]{display:flex;justify-content:center;flex-direction:column;align-items:center;height:100%}.search-wrapper[data-v-b69152ed]{display:flex;align-items:center;border:1px solid #b3b3b3;border-radius:10px;padding:8px 12px;background-color:#fff;width:100%;max-width:600px;margin:0 auto;transition:border-color .2s,box-shadow .2s}.search-wrapper[data-v-b69152ed]:focus-within{border-color:#1e4d1e}.search-icon[data-v-b69152ed]{font-size:24px;color:#1e4d1e;margin-right:10px}.search-input[data-v-b69152ed]{flex:1;font-size:18px;caret-color:#000;--padding-start: 0;--padding-end: 0;--background: transparent;--color: #000;--placeholder-color: #999;--highlight-color: transparent;--highlight-height: 0px;border:none;background:transparent;text-align:left}.program-buttons-grid[data-v-e565f108]{display:grid;grid-template-columns:repeat(auto-fit,minmax(120px,1fr));justify-content:center;column-gap:20px;row-gap:40px;padding:10px;margin:40px auto 0;max-width:1000px;width:100%}.program-tile[data-v-e565f108]{cursor:pointer}.program-icon-container[data-v-e565f108]{border-radius:5px;padding:5px;display:flex;align-items:center;justify-content:center;height:85px;width:85px;margin:0 auto}.program-icon[data-v-e565f108]{font-size:30px;color:#000;width:45px}.program-name[data-v-e565f108]{margin-top:8px;font-size:14px;font-weight:500;color:#bebebe}#container[data-v-d96fe9e3]{text-align:center;padding:50px;background:transparent;position:relative}#container strong[data-v-d96fe9e3]{font-size:20px;line-height:26px}#container p[data-v-d96fe9e3]{font-size:1em;line-height:22px;color:#8c8c8c;margin:0}#container a[data-v-d96fe9e3]{text-decoration:none}.close-button[data-v-d96fe9e3]{position:absolute;top:5px;right:5px;--padding-end: 0px;--padding-start: 0px;--padding-top: 0px;--padding-bottom: 0px;--box-shadow: none;width:40px;height:40px;display:flex;justify-content:center;align-items:center;color:#8c8c8c}.close-button ion-icon[data-v-d96fe9e3]{font-size:28px}\n/*$vite$:1*/",document.head.appendChild(a);const ae=e("u",A("actionButtonStore",{state:()=>({show_action_button:!0}),actions:{setShowActionButton(e){this.show_action_button=e},getShowActionButton(){return this.show_action_button},resetShowActionButton(){this.show_action_button=!0}}})),ne=["onClick"],oe={key:1,class:"no-data-container"},te=p(v({__name:"ActivitySelectionModal",setup(e){const a=n(),p=h("activities"),u=h([]),_=O(()=>u.value.filter(e=>e.isChecked)),g=O(()=>u.value.length>0&&u.value.every(e=>e.isChecked)),R=O(()=>g.value?"Deselect All":"Select All");async function m(){try{return await s.postJson("user_properties",{property:p.value,property_value:_.value.map(e=>e.value).join(",")}),w.dismiss(_.value)}catch(a){var e;console.error(a),i(null!==(e=a.message)&&void 0!==e?e:"Failed to save selected activities")}}function A(){const e=!g.value;u.value=u.value.map(a=>(a.isChecked=e,a))}return P(()=>{var e,n;console.log("USER ID",a.getUserId()),console.log("USER PROGRAM",null===(e=o().activeProgram)||void 0===e?void 0:e.name),async function(e){switch(e.toLowerCase()){case"ncd program":u.value=r(d),p.value="NCD_activities";break;case"opd program":u.value=r(l),p.value="OPD_activities";break;case"hiv program":u.value=r(c,"name","workflowID"),p.value="activities";break;default:u.value=[]}}(null===(n=o().activeProgram)||void 0===n?void 0:n.name),async function(){const e=await s.getJson("user_properties",{user_id:a.getUserId(),property:p.value});e&&(u.value=u.value.map(a=>(e.property_value.search(a.value)>=0&&(a.isChecked=!0),a)))}()}),(e,a)=>(C(),b(G(H),null,{default:M(()=>[f(G(I),{style:{display:"flex","justify-content":"space-between"},color:"success"},{default:M(()=>[f(G(x),{class:"modalTitle"},{default:M(()=>[y("Select Program Activites (selected: "+E(_.value.length)+")",1)]),_:1}),f(G(k),{onClick:G(w).dismiss,style:{"padding-top":"10px","padding-right":"10px"},icon:G(N)},null,8,["onClick","icon"])]),_:1}),f(G(F),{fullscreen:!0},{default:M(()=>[u.value.length?(C(),b(t,{key:0,items:u.value,numberOfColumns:2},{default:M(({entries:e})=>[(C(!0),D(S,null,T(e,(e,a)=>(C(),D("div",{class:"his-card clickable",key:a,onClick:a=>e.isChecked=!e.isChecked},[f(G(B),null,{default:M(()=>[f(G(V),{size:"1"},{default:M(()=>[f(G(L),{modelValue:e.isChecked,"onUpdate:modelValue":a=>e.isChecked=a,onClick:a=>e.isChecked=!e.isChecked},null,8,["modelValue","onUpdate:modelValue","onClick"])]),_:2},1024),f(G(V),{class:"ion-text-center his-md-text"},{default:M(()=>[y(E(e.label),1)]),_:2},1024)]),_:2},1024)],8,ne))),128))]),_:1},8,["items"])):(C(),D("div",oe,[f(G(U),null,{default:M(()=>[...a[0]||(a[0]=[y("No activities available for this program",-1)])]),_:1})]))]),_:1}),f(G(z),{class:"ion-padding ion-text-end"},{default:M(()=>[f(G(Y),{fill:"outline",onClick:A},{default:M(()=>[y(E(R.value),1)]),_:1}),f(G(Y),{class:"ion-margin-start",onClick:m},{default:M(()=>[...a[1]||(a[1]=[y("Save",-1)])]),_:1})]),_:1})]),_:1}))}}),[["__scopeId","data-v-b78c7022"]]),re={class:"search-wrapper"},se=p({__name:"SearchField",props:{modelValue:String,placeholder:String},emits:["update:modelValue"],setup(e,{emit:a}){const n=e=>{r.value=e.target.value},o=e,t=a,r=h(o.modelValue||"");return j(r,e=>{t("update:modelValue",e)}),j(()=>o.modelValue,e=>{r.value=e}),(a,o)=>{const t=K("ion-icon"),s=K("ion-input");return C(),D("div",re,[f(t,{icon:G(J),class:"search-icon","aria-hidden":"true"},null,8,["icon"]),f(s,{value:r.value,onIonInput:n,class:"search-input",type:"text",placeholder:e.placeholder},null,8,["value","placeholder"])])}}},[["__scopeId","data-v-b69152ed"]]),ie={class:"program-buttons-grid"},ce=["onClick"],le=["src"],de={class:"program-name"},pe=p(v({__name:"ProgramGrid",props:{programs:{},onSelect:{type:Function}},setup:e=>(a,n)=>(C(),D("div",ie,[(C(!0),D(S,null,T(e.programs,(a,n)=>(C(),D("div",{key:n,class:"program-tile",onClick:()=>e.onSelect(a)},[W("div",{class:"program-icon-container",style:X({backgroundColor:a.color})},[W("img",{src:a.icon,alt:"",class:"program-icon"},null,8,le)],4),W("div",de,E(a.name.replace(/program/i,"").trim()),1)],8,ce))),128))]))}),[["__scopeId","data-v-e565f108"]]),ue={[u.HIV_PROGRAM]:"./assets/icon/program_icons/ribbon.png",[u.TB_PROGRAM]:"./assets/icon/program_icons/tb.png",[u.EARLY_INFANT_DIAGNOSIS_PROGRAM]:"./assets/icon/program_icons/baby-0203_alt.png",[u.MDR_TB_PROGRAM]:"./assets/icon/program_icons/tb.png",[u.KAPOSIS_SARCOMA_PROGRAM]:"./assets/icon/program_icons/lymph-nodes.png",[u.CHRONIC_CARE_PROGRAM]:"./assets/icon/program_icons/intensive-care_unit.png",[u.MATERNITY_PROGRAM]:"./assets/icon/program_icons/pregnant.png",[u.ANC_PROGRAM]:"./assets/icon/program_icons/ancv.png",[u.DIABETES_PROGRAM]:"./assets/icon/program_icons/diabetes.png",[u.OPD_PROGRAM]:"./assets/icon/program_icons/outpatient.png",[u.IPD_PROGRAM]:"./assets/icon/program_icons/observation.png",[u.UNDER_5_PROGRAM]:"./assets/icon/program_icons/boy-0105y.png",[u.CIVIL_REGISTRATION_PROGRAM]:"./assets/icon/program_icons/register-book.png",[u.HTC_PROGRAM]:"./assets/icon/program_icons/blood-pressure.png",[u.ANC_CONNECT_PROGRAM]:"./assets/icon/program_icons/ancv.png",[u.HYPERTENSION_PROGRAM]:"./assets/icon/program_icons/blood-pressure.png",[u.IPT_PROGRAM]:"./assets/icon/program_icons/observation.png",[u.LABORATORY_PROGRAM]:"./assets/icon/program_icons/biochemistry-laboratory.png",[u.CXCA_PROGRAM]:"./assets/icon/program_icons/cervical-cancer.png",[u.RADIOLOGY_PROGRAM]:"./assets/icon/program_icons/radiology.png",[u.PATIENT_REGISTRATION_PROGRAM]:"./assets/icon/program_icons/human-resoruce.png",[u.AETC_PROGRAM]:"./assets/icon/program_icons/accident-and_emergency.png",[u.SPINE_PROGRAM]:"./assets/icon/program_icons/intensive-care_unit.png",[u.NCD_PROGRAM]:"./assets/icon/program_icons/autoimmune-disease.png",[u.IMMUNIZATION_PROGRAM]:"./assets/icon/program_icons/syringe-vaccine.png",[u.LABOUR_AND_DELIVERY_PROGRAM]:"./assets/icon/program_icons/fetus.png",[u.NEONATAL_PROGRAM]:"./assets/icon/program_icons/child-care.png",[u.HTS_PROGRAM]:"./assets/icon/program_icons/blood-analysis.png",[u.MEMIS_PROGRAM]:"./assets/icon/program_icons/memis.png"},_e=e=>{switch(e){case u.HIV_PROGRAM:return"#F4A6A6";case u.TB_PROGRAM:return"#E6B89C";case u.EARLY_INFANT_DIAGNOSIS_PROGRAM:return"#FFF2A6";case u.MDR_TB_PROGRAM:return"#D2A679";case u.KAPOSIS_SARCOMA_PROGRAM:return"#D8B4E2";case u.CHRONIC_CARE_PROGRAM:return"#C7EFCF";case u.MATERNITY_PROGRAM:return"#FFCCE5";case u.ANC_PROGRAM:return"#FFD6DD";case u.DIABETES_PROGRAM:return"#D6F5D6";case u.OPD_PROGRAM:return"#B3E5FC";case u.IPD_PROGRAM:return"#FFF9C4";case u.UNDER_5_PROGRAM:return"#FFB3B3";case u.CIVIL_REGISTRATION_PROGRAM:return"#E0E0E0";case u.HTC_PROGRAM:return"#B2DFDB";case u.ANC_CONNECT_PROGRAM:return"#FFD6DD";case u.HYPERTENSION_PROGRAM:return"#B2DFDB";case u.IPT_PROGRAM:return"#FFF9C4";case u.LABORATORY_PROGRAM:return"#E6B89C";case u.CXCA_PROGRAM:return"#FFF2A6";case u.RADIOLOGY_PROGRAM:return"#CCCCCC";case u.PATIENT_REGISTRATION_PROGRAM:return"#FFF9C4";case u.AETC_PROGRAM:return"#FFB199";case u.SPINE_PROGRAM:return"#C7EFCF";case u.NCD_PROGRAM:return"#D6F5D6";case u.IMMUNIZATION_PROGRAM:return"#FFF2A6";case u.LABOUR_AND_DELIVERY_PROGRAM:return"#E6D6F3";case u.NEONATAL_PROGRAM:return"#FFECEC";default:return"#F5F5DC"}},ge=[u.VHW_PROGRAM,u.TRIAGE_PROGRAM,u.VMMC_PROGRAM,u.PNC_PROGRAM,u.KAPOSIS_SARCOMA_PROGRAM,u.CIVIL_REGISTRATION_PROGRAM,u.DIABETES_PROGRAM,u.LABOUR_AND_DELIVERY_PROGRAM],Re={id:"container"},me={class:"centered-content"},Ae=e("M",p(v({__name:"ModulePicker",setup(e){const a=o(),n=h(""),t=O(()=>a.authorizedPrograms.filter(e=>!ge.includes(e.program_id)).map(e=>({...e,icon:ue[e.program_id]||null,color:_e(e.program_id)}))),r=O(()=>t.value.filter(e=>e.name.toLowerCase().includes(n.value.toLowerCase())));function s(e){a.setActiveProgram(e),_.hide()}function i(){_.hide()}return P(()=>{1===t.value.length&&s(t.value[0])}),(e,a)=>(C(),D("div",Re,[a[1]||(a[1]=W("h1",null,[W("strong",null,"Services")],-1)),W("div",me,[f(G(Y),{class:"close-button",fill:"clear",onClick:i},{default:M(()=>[f(G(k),{icon:G(N),style:{"font-size":"4rem",color:"#dc2626"}},null,8,["icon"])]),_:1}),f(se,{modelValue:n.value,"onUpdate:modelValue":a[0]||(a[0]=e=>n.value=e),placeholder:"Search..."},null,8,["modelValue"]),f(pe,{programs:r.value,onSelect:s},null,8,["programs"])])]))}}),[["__scopeId","data-v-d96fe9e3"]]));e("_",v({__name:"ActionButtons",setup(e){const a=n(),{user_ID:o}=Z(a),t=h(!1),r=ae(),{show_action_button:s}=Z(r);P(async()=>{try{await i()}catch(e){}}),j(()=>o.value,async()=>{await i()},{deep:!0});const i=async()=>{try{const e=await g.getUserAssignAndUnassignProgramActivities(o.value);t.value=null!==e&&e}catch(e){console.error("Error fetching assign and unassign program activities:",e)}};function c(){return m(te,{class:"activity-modal"})}async function l(){return _.show(Ae,{},"module-picker-modal")}return(e,a)=>G(s)?(C(),b(G(Q),{key:0,slot:"fixed",horizontal:"end",vertical:"bottom",class:"ion-margin-bottom",edge:""},{default:M(()=>[t.value?(C(),b(G(q),{key:0,onClick:c},{default:M(()=>[f(G(k),{icon:G(R).exam_multiple_choice},null,8,["icon"])]),_:1})):$("",!0),f(G(q),{color:"primary",class:"ion-margin-vertical",onClick:l},{default:M(()=>[f(G(k),{icon:G(ee)},null,8,["icon"])]),_:1})]),_:1})):$("",!0)}}))}}});
