import{d as F,r as S,eT as N,w as d,e as T,f as D,l as g,u as v,a3 as b,a6 as P,ao as $,aV as z,eU as A,H as _,O as B,J as R}from"./vendor-BolvhNQv.js";import{aD as k,_ as y,T as H,u as U,t as I,H as O,G as E}from"../index-BJJABCwX.js";import{N as W}from"./neonatal_service-Df1CiIOO.js";import{D as j}from"./DemographicBar-WZWR4TLs.js";import{g as m,h,N as G}from"./NeonatalStepper-dMaKQPxJ.js";import{u as J}from"./useSignsSymptomsStore-CKTu90e2.js";import"./lodash-NJiRuGo9.js";import"./apexcharts-Go-aTq24.js";import"./SaveProgressModal-BLz9Q3Sh.js";import"./images-DJIykHYW.js";import"./enrollment-DU-PLRUa.js";const K={class:"signs-symptoms-section-wrapper"},q=F({__name:"AdmissionSection",setup(r,{expose:c}){const t=S(null),n=m[0],u=n.formData,l=n.conditionalRules||[],i=N(h),p=e=>{i&&(i.is_readmission=e.is_readmission||"")};return d(()=>{var e;return(e=t.value)==null?void 0:e.formValues},e=>{e&&p(e)},{deep:!0}),d(()=>t.value,e=>{e!=null&&e.getFormValues&&p(e.getFormValues())},{immediate:!0}),c({getFormRef:()=>t.value,validateForm:()=>{var e,o;return((o=(e=t.value)==null?void 0:e.validateForm)==null?void 0:o.call(e))||null},getFormValues:()=>{var e,o;return((o=(e=t.value)==null?void 0:e.getFormValues)==null?void 0:o.call(e))||{}}}),(e,o)=>(D(),T("div",K,[g(k,{formData:v(u),conditionalRules:v(l),ref_key:"formRef",ref:t},null,8,["formData","conditionalRules"])]))}}),V=y(q,[["__scopeId","data-v-312c3ac7"]]),x={class:"signs-symptoms-section-wrapper"},L=F({__name:"PresentingComplaintsSection",setup(r,{expose:c}){const t=S(null),n=m[1],u=n.formData,l=n.conditionalRules||[],i=N(h),p=e=>{i&&(i.presenting_complaints=e.presenting_complaints||[])};return d(()=>{var e;return(e=t.value)==null?void 0:e.formValues},e=>{e&&p(e)},{deep:!0}),d(()=>t.value,e=>{e!=null&&e.getFormValues&&p(e.getFormValues())},{immediate:!0}),c({getFormRef:()=>t.value,validateForm:()=>{var e,o;return((o=(e=t.value)==null?void 0:e.validateForm)==null?void 0:o.call(e))||null},getFormValues:()=>{var e,o;return((o=(e=t.value)==null?void 0:e.getFormValues)==null?void 0:o.call(e))||{}}}),(e,o)=>(D(),T("div",x,[g(k,{formData:v(u),conditionalRules:v(l),ref_key:"formRef",ref:t},null,8,["formData","conditionalRules"])]))}}),w=y(L,[["__scopeId","data-v-2ad14f66"]]),M=F({name:"NeonatalSignsSymptoms",components:{IonPage:P,IonContent:b,Toolbar:H,DemographicBar:j,NeonatalStepper:G,AdmissionSection:V,PresentingComplaintsSection:w},setup(){const r=$(),c=U(),{patient:t}=z(c),n=J(),u=a=>{const s=Number(a);return Number.isFinite(s)?s:null},l=()=>{var s;const a=u((s=t.value)==null?void 0:s.patientID);n.initializeForPatient(a)};l(),d(()=>{var a;return(a=t.value)==null?void 0:a.patientID},()=>l());const i=n.formData;A(h,i),d(()=>n.formData,()=>n.saveSnapshot(),{deep:!0});const p=S(m.map((a,s)=>({title:a.title,number:s+1,checked:!1,class:s===0?"open_step common_step":"common_step",last_step:s===m.length-1?"last_step":""}))),e=[{title:m[0].title,value:"1",component:V,configIndex:0},{title:m[1].title,value:"2",component:w,configIndex:1}],o="Signs & Symptoms Assessment",C=S("1");return{wizardData:p,stepperData:e,stepperTitle:o,currentOpenStepper:C,updateStatus:a=>{a&&a.value&&p.value.forEach((s,f)=>{a.value===(f+1).toString()?(s.class="open_step common_step",s.checked=!1):f<parseInt(a.value)-1?(s.class="common_step color_white",s.checked=!0):(s.class="common_step",s.checked=!1)})},getSaveFunction:a=>a===e.length-1?async()=>{var s;if(!((s=t.value)!=null&&s.patientID)){I("No patient selected");return}try{const f=O.sessionDate();await W.saveSignsSymptomsAssessment(t.value.patientID,i,f),E("Signs & symptoms assessment saved successfully"),n.clearPatient(t.value.patientID),r.push({path:"/neonatal/review-of-systems"})}catch(f){console.error("Failed to save signs/symptoms assessment",f),I("Failed to save signs/symptoms assessment")}}:null,neonatalSignsSymptomsSections:m}}});function Q(r,c,t,n,u,l){const i=_("Toolbar"),p=_("NeonatalStepper"),e=_("ion-content"),o=_("ion-page");return D(),B(o,{class:"neonatal-signs-symptoms-page"},{default:R(()=>[g(i),g(e,{fullscreen:!0},{default:R(()=>[g(p,{wizardData:r.wizardData,StepperData:r.stepperData,stepperTitle:r.stepperTitle,openStepper:r.currentOpenStepper,backUrl:"/NeonatalHome",getSaveFunction:r.getSaveFunction,flowType:"signsSymptoms",sectionsConfig:r.neonatalSignsSymptomsSections,onUpdateStatus:r.updateStatus},null,8,["wizardData","StepperData","stepperTitle","openStepper","getSaveFunction","sectionsConfig","onUpdateStatus"])]),_:1})]),_:1})}const me=y(M,[["render",Q],["__scopeId","data-v-317f5999"]]);export{me as default};
