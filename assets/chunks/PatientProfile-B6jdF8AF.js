const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./LabOrdersList-CIGW242p.js","./vendor-BataJFSH.js","./lodash-NJiRuGo9.js","../vendor.Dm4sm59p.css","../index-CYcjB3lE.js","./apexcharts-BVd6_RNM.js","../index.BBb7AeN6.css","./EnterLabResultsModal-D2Z2wbNc.js","../EnterLabResultsModal.CFABaZbT.css","./BasicForm-BGQiOLaa.js","./DateInputField-CuXM8Muc.js","../DateInputField.YUpPNB6n.css","../BasicForm.CS8soES6.css","./useUserActivities-BZ8hCdUF.js","../LabOrdersList.TfoJFXpV.css","./DiagnosesHistory-9X4ertPA.js","../DiagnosesHistory.BEA7zPYa.css","./AllergiesHistory-O2Ar2zdf.js","../AllergiesHistory.BdLtFHIK.css","./MedicationsHistory-4yxiK02a.js","../MedicationsHistory.DAk17UPz.css","./VisitsHistory-B3immm_L.js","../VisitsHistory.BWB3hFTK.css","./VitalsMeasurementsSummary-ocOJw4iH.js","../VitalsMeasurementsSummary.Bb3yaWqr.css","./PatientProfile-DVTu61LT.js","./DemographicBar-BmFdNEyR.js","../DemographicBar.DtnnoAYr.css","./SaveProgressModal-BPbswCru.js","../SaveProgressModal.DLXC0SP6.css","./Stepper-BrwUBGhW.js","./NextAppointment-DAOKpNNs.js","./group_validation-B4vdPYQh.js","./RadiologyStore-BEC0RqeJ.js","./formatServerData-CrPFhp8u.js","./DashBox-MvA5RkFq.js","./previousComplaints-DWtu4qAA.js","../previousComplaints.Clw4EhHt.css","./patient_complaints_service-CqslE5al.js","./useFormWizard-WA0BdVFf.js","./user_role_management-BpRRS3k4.js","./nonPharmaTherapyStore-BeLj4Wxw.js","./drug_prescription_service-CAmeZFJa.js","./patient_diagnosis_service-Dw0KiIvk.js","./ncd_appointment_service-i5Ey5kTC.js","../NextAppointment.DrwdY6dI.css","./OPDOutcome-DvtKc-We.js","./LevelOfConsciousness.vue_vue_type_script_setup_true_lang-B3khOm_s.js","./Outcome-T6JLQrwS.js","./wardsStore-CIkFtO0D.js","../Outcome.DJopL97u.css","../OPDOutcome.B2JwPUSr.css","./VitalsMixin.vue_vue_type_script_lang-DA2Aouwm.js","./TreatmentPlan-Cd1Uspiz.js","./ComplicationsStore-BbalwQUK.js","../TreatmentPlan.5e113TPs.css","./OPDDiagnosis-CUqmGVaH.js","../OPDDiagnosis.BeRzIzxW.css","./MedicalHistory-D5SZjFHa.js","../MedicalHistory.DRwf_RCK.css","./FeatusModal-Did74_aj.js","../FeatusModal.D-f1s0wW.css","./AbdominalExamination-Cpnprn3u.js","../AbdominalExamination.XIpmwLNs.css","./dewormingStore-HrwcJ5OD.js","./BasicCard-DGVeOuOR.js","../BasicCard.CLPwwedX.css","./UpcomingFeature-DxFE7uji.js","../UpcomingFeature.DBJv9ELz.css","./PastObstreticHistoryStore-BIJfUlKQ.js","../Stepper.DrvvacpM.css","./WeightHeightChart-Ft4mrg5F.js","./chartjs-B5Utg8dS.js","../WeightHeightChart.C9ItLuK7.css","./weightAndHeight-UpWzgM_i.js","./customDatePicker-BNK8L6Gt.js","../customDatePicker.twJBaIU5.css","../weightAndHeight.CJuqOhq_.css","./vaccines_service-jL4y0Qg3.js","./sms_service-CfLPAmD3.js","./EIRreportsStore-DPBsJTJR.js","./Export-kNnnCNnD.js","../vaccines_service.DKZw05E0.css","./barcode-qrcode-reader-C5_YPMDe.js","./stock_service-Qd2D6aOu.js","./Registration-DEByNCkM.js","./useLocation-Bl6i7Nj8.js","./useNeonatalEnrollmentStore-eD5cG8pe.js","./enrollment-DU-PLRUa.js","../Registration.DACyLEjv.css","./AdministerOtherVaccinesStore-DKL9kpHC.js","./usePatientProfile-BH-LjvQ2.js","../usePatientProfile.BRwk2gaY.css","../PatientProfile.xh9sFISw.css","./HTSPatientProfile-0CFUDFlX.js","../HTSPatientProfile.D35WQABU.css","./NeonatalPatientProfile-coeaWUz2.js","./neonatal_service-BxMlGviG.js","./admissionWorkflow-C1e4oic-.js","../NeonatalPatientProfile.DYI6NX7_.css","./AETCPatientProfile-Dt6Xqzbt.js","./confirm_pregnancy_service-17nSO_Dz.js","./CPR-ByrYFJLf.js","./useRespiratoryRateOxygenForm-BELHOOPo.js","../CPR.C4Sa7ms4.css","./tasks-DR_WYmTq.js","../AETCPatientProfile.CVAhPfon.css","./BloodPressure-HCsI5eGC.js","../BloodPressure.B79nW_rj.css","./AncEnrollmentModal-BBwpNSNb.js","../AncEnrollmentModal.FFucReyv.css","./LabourEnrollmentModal-B1oLihCC.js","../LabourEnrollmentModal.DgSOWoB_.css","./PNCEnrollmentModal-D_znIE-P.js","../PNCEnrollmentModal.BDNYT6XY.css"])))=>i.map(i=>d[i]);
import{d as Mt,r as p,w as ht,O as k,f as r,u as t,bw as gt,J as n,l as a,aR as na,e as A,dU as _t,Q as d,L as D,aw as sa,F as Z,aS as oa,ak as la,P as yt,$ as S,X as N,aP as ia,k as l,K as g,cG as ce,c4 as ra,c1 as me,aV as Tt,z as ua,D as da,a as pe,I as ca,G as ma,dV as pa,E as fa,N as va,a3 as fe,a4 as St,bs as _a,a5 as L,a6 as m,p as ve,dW as ee,m as v,c6 as ga,a7 as _e,R as ya,ap as Ca,cr as ba,b2 as Rt,c as nt,H as ae,cN as w,dX as Aa,d1 as Ia,am as Pa,al as ka,W as ne,df as Da,dg as F,aG as wa,c8 as Oa,aI as se,d2 as Ea,cF as O}from"./vendor-BataJFSH.js";import{aa as lt,_ as Vt,P as xt,ab as Ra,a2 as Na,o as ge,ac as ha,ad as Ta,u as Sa,a as xa,h as Ma,H as U,T as Va,y as R,S as st,M as ot,ae as Nt,k as oe,af as La,s as le,K,q as $a,t as W,ag as ie,ah as X,ai as Ha,aj as re}from"../index-CYcjB3lE.js";import{l as Ba}from"./lodash-NJiRuGo9.js";import{C as Ua}from"./confirm_pregnancy_service-17nSO_Dz.js";import{u as Ga}from"./useUserActivities-BZ8hCdUF.js";import{u as za}from"./usePatientProfile-BH-LjvQ2.js";import{f as Fa}from"./formatServerData-CrPFhp8u.js";import{D as Wa}from"./DemographicBar-BmFdNEyR.js";import{i as Ya}from"./tasks-DR_WYmTq.js";const ja=Mt({__name:"ARTCard",props:{patient:{default:{}}},setup($){const T=$,x=p(!1),E=p({artStartDate:"",arvNumber:"",fileNumber:"",currentOutcome:""}),M=async _=>{x.value=!0;try{const i=await lt.getProgramInformation(_);E.value={artStartDate:(()=>{const[c,H,G]=i.art_start_date.split("/"),Y=i.art_start_date.match(/n\/a/i)?"":"(".concat(ua(lt.getSessionDate()).diff("".concat(G,"-").concat(H,"-").concat(c),"months")," Month(s))");return"".concat(i.art_start_date," ").concat(Y)})(),arvNumber:"".concat(i.arv_number," | Regimen: ").concat(i.current_regimen),fileNumber:i.filing_number.number,currentOutcome:i.current_outcome}}catch(i){console.error("Error fetching ART information:",i)}finally{x.value=!1}};return ht(()=>T.patient,_=>{_&&_.patientID?M(_.patientID):E.value={artStartDate:"--",arvNumber:"--",fileNumber:"--",currentOutcome:"--"}},{immediate:!0,deep:!0}),(_,i)=>(r(),k(t(gt),null,{default:n(()=>[a(t(oa),null,{default:n(()=>[a(t(na),null,{default:n(()=>[x.value?(r(),k(t(_t),{key:0,animated:"",style:{width:"200px",height:"24px"}})):(r(),A(Z,{key:1},[a(t(D),{icon:t(sa)},null,8,["icon"]),i[0]||(i[0]=d(" ART Information ",-1))],64))]),_:1})]),_:1}),a(t(Tt),null,{default:n(()=>[a(t(la),null,{default:n(()=>[x.value?(r(),A(Z,{key:0},yt(4,c=>a(t(S),{key:c},{default:n(()=>[a(t(_t),{slot:"start",animated:"",style:{width:"24px",height:"24px","border-radius":"50%"}}),a(t(N),null,{default:n(()=>[a(t(_t),{animated:"",style:{width:"120px",height:"16px","margin-bottom":"8px"}}),a(t(_t),{animated:"",style:{width:"180px",height:"20px"}})]),_:1})]),_:1})),64)):(r(),A(Z,{key:1},[a(t(S),null,{default:n(()=>[a(t(D),{icon:t(ia),slot:"start"},null,8,["icon"]),a(t(N),null,{default:n(()=>[i[1]||(i[1]=l("h3",null,"ART Start Date",-1)),l("p",null,g(E.value.artStartDate),1)]),_:1})]),_:1}),a(t(S),null,{default:n(()=>[a(t(D),{icon:t(ce),slot:"start"},null,8,["icon"]),a(t(N),null,{default:n(()=>[i[2]||(i[2]=l("h3",null,"ARV Number",-1)),l("p",null,g(E.value.arvNumber),1)]),_:1})]),_:1}),a(t(S),null,{default:n(()=>[a(t(D),{icon:t(ra),slot:"start"},null,8,["icon"]),a(t(N),null,{default:n(()=>[i[3]||(i[3]=l("h3",null,"File Number",-1)),l("p",null,g(E.value.fileNumber),1)]),_:1})]),_:1}),a(t(S),null,{default:n(()=>[a(t(D),{icon:t(me),slot:"start"},null,8,["icon"]),a(t(N),null,{default:n(()=>[i[4]||(i[4]=l("h3",null,"Current Outcome",-1)),l("p",null,g(E.value.currentOutcome),1)]),_:1})]),_:1})],64))]),_:1})]),_:1})]),_:1}))}}),qa=Vt(ja,[["__scopeId","data-v-7ec7b45c"]]),ue=[{classDash:"dashed_bottom_border",radioBtnContent:{header:{title:"Is the pregnancy confirmed?*",class:"bold",selectedValue:"",name:"Pregnancy confirmed"},data:[{value:"Yes",name:"Yes",colSize:"2"},{value:"No",name:"No",colSize:"2"}]}},{classDash:"dashed_bottom_border",radioBtnContent:{header:{title:"Was the pregnancy planned?*",selectedValue:"",class:"bold",name:"Pregnancy planned"},data:[{value:"Yes",name:"Yes",colSize:"2"},{value:"No",name:"No",colSize:"2"}]}}],Ka=da("ANCEnrollmentStore",{state:()=>({ConfirmPregnancy:[...ue]}),actions:{setConfirmPregnancy($){this.ConfirmPregnancy=$},getInitial(){return[...Ba.cloneDeep(ue)]}}}),Xa={class:"header-content"},Za={class:"title-section"},Ja={class:"tasks-container"},Qa=["onClick"],tn={class:"task-icon-container"},en={class:"task-content"},an={key:0,class:"task-status"},nn={key:1,class:"empty-state"},sn={class:"empty-icon"},on=Mt({__name:"TaskView",props:{tasks:{type:Object,required:!0}},setup($){const T=p([]),x=$;pe(async()=>{const _=new xt;T.value=[];const i=await new Ra(_.getID()).getProgram();x.tasks.forEach(async c=>{var G,Y,it,rt;const H={orderNumber:(G=c.sortOrder)!=null?G:9999,label:(Y=c.displayName)!=null?Y:c.name,icon:c.icon,disabled:!1,taskCompleted:!1,task:c};if(!(typeof c.workflowID=="string"&&!await Ya(c.workflowID))&&!(typeof c.condition=="function"&&!await c.condition(x.tasks))&&!(typeof c.globalProperty=="string"&&!await Na.isProp("".concat(c.globalProperty,"=true"))))return typeof c.allowTaskAfterDeath=="boolean"&&c.allowTaskAfterDeath===!1&&/died/i.test("".concat((it=i==null?void 0:i.program)==null?void 0:it.outcome))&&new Date(xt.getSessionDate())>=new Date((rt=i==null?void 0:i.program)==null?void 0:rt.startDate)&&(H.disabled=!0),typeof c.disabled=="function"&&(H.disabled=await c.disabled(x.tasks)),T.value.push(H),T.value.sort((ut,Ct)=>{var dt,ct;return((dt=ut.orderNumber)!=null?dt:9999)-((ct=Ct.orderNumber)!=null?ct:9999)}),c})});const E=_=>{if(!_.disabled){if(_.task.action)M(),_.task.action();else if(_.task.component&&_.task.isFormComponent){ge(ha,{},!1,{title:_.task.name,useComponent:_.task.component,onClose:M});return}}};function M(){ya.dismiss()}return(_,i)=>(r(),k(t(_e),null,{default:n(()=>[a(t(ca),{class:"ion-no-border"},{default:n(()=>[a(t(ma),{class:"custom-header"},{default:n(()=>[l("div",Xa,[l("div",Za,[a(t(D),{icon:t(pa),class:"header-icon"},null,8,["icon"]),a(t(fa),{class:"custom-title"},{default:n(()=>[...i[0]||(i[0]=[d("Program Activities",-1)])]),_:1})]),a(t(va),{onClick:M,fill:"clear",shape:"round"},{default:n(()=>[a(t(D),{icon:t(fe)},null,8,["icon"])]),_:1})])]),_:1})]),_:1}),a(t(St),{class:"custom-content"},{default:n(()=>[l("div",Ja,[T.value&&T.value.length>0?(r(),k(t(_a),{key:0,class:"tasks-grid"},{default:n(()=>[a(t(L),{class:"ion-justify-content-center"},{default:n(()=>[(r(!0),A(Z,null,yt(T.value,(c,H)=>(r(),k(t(m),{size:"12","size-sm":"6","size-md":"4","size-lg":"3",key:H,class:"task-col"},{default:n(()=>[l("div",{class:ve(["task-card",{"task-completed":c.taskCompleted,"task-disabled":c.disabled}]),onClick:G=>!c.disabled&&E(c)},[l("div",tn,[a(t(D),{color:c.taskCompleted?"success":"primary",icon:c.taskCompleted?t(ee):c.icon,class:"task-icon"},null,8,["color","icon"])]),l("div",en,[a(t(N),{class:"task-label"},{default:n(()=>[d(g(c.label),1)]),_:2},1024),c.taskCompleted?(r(),A("div",an,[a(t(D),{icon:t(ee),color:"success"},null,8,["icon"]),i[1]||(i[1]=l("span",null,"Completed",-1))])):v("",!0)])],10,Qa)]),_:2},1024))),128))]),_:1})]),_:1})):(r(),A("div",nn,[l("div",sn,[a(t(D),{icon:t(ga)},null,8,["icon"])]),i[2]||(i[2]=l("h3",null,"No Activities Yet",-1)),i[3]||(i[3]=l("p",null,"Your program activities will appear here once they're available.",-1))]))])]),_:1})]),_:1}))}}),ln=Vt(on,[["__scopeId","data-v-244ec438"]]);async function rn($,T="tasks"){var M,_;const E=(M={1:Ta}[$])!=null?M:{};ge(ln,{},!0,{tasks:(_=E==null?void 0:E[T])!=null?_:[]})}const un={key:5,class:"content_manager"},dn={style:{display:"flex","justify-content":"space-between"}},cn={class:"p_name_image"},mn={style:{width:"100%"}},pn={class:"p_name"},fn={style:{display:"flex","justify-content":"space-between"}},vn={class:"start-visit"},_n={class:"button-group"},gn={key:0,class:"send-button-container action-buttons"},yn={class:"send-button-container"},Cn={class:"send-button-container"},bn={class:"send-button-container"},An={style:{"padding-left":"10px","padding-right":"10px","margin-top":"5px"}},In={class:"vitalsUnits"},Pn={style:{width:"100%",overflow:"scroll",height:"64px"}},kn={key:0,style:{"margin-top":"1px"}},Dn={key:0,class:"patient-chart"},wn={class:"patient-chart"},On={key:1,class:"patient-chart"},En={key:1},Rn={key:2},Nn={key:3},hn={key:4},Tn={key:5},Sn={key:6},xn={class:"rght-drpm"},Mn="NEONATAL PROGRAM",de=10,Vn=Mt({__name:"PatientProfile",setup($,{expose:T}){var Kt,Xt;const x=w(()=>O(()=>import("./LabOrdersList-CIGW242p.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14]),import.meta.url)),E=w(()=>O(()=>import("./DiagnosesHistory-9X4ertPA.js"),__vite__mapDeps([15,1,2,3,4,5,6,16]),import.meta.url)),M=w(()=>O(()=>import("./AllergiesHistory-O2Ar2zdf.js"),__vite__mapDeps([17,1,2,3,4,5,6,18]),import.meta.url)),_=w(()=>O(()=>import("./MedicationsHistory-4yxiK02a.js"),__vite__mapDeps([19,1,2,3,4,5,6,20]),import.meta.url)),i=w(()=>O(()=>import("./VisitsHistory-B3immm_L.js"),__vite__mapDeps([21,1,2,3,4,5,6,22]),import.meta.url)),c=w(()=>O(()=>import("./VitalsMeasurementsSummary-ocOJw4iH.js"),__vite__mapDeps([23,1,2,3,4,5,6,24]),import.meta.url)),H=w(()=>O(()=>import("./PatientProfile-DVTu61LT.js"),__vite__mapDeps([25,1,2,3,4,5,6,26,27,28,29,30,31,0,7,8,9,10,11,12,13,14,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93]),import.meta.url)),G=w(()=>O(()=>import("./HTSPatientProfile-0CFUDFlX.js"),__vite__mapDeps([94,1,2,3,4,5,6,78,79,80,81,82,91,85,86,40,87,88,89,48,49,50,92,71,72,73,74,9,10,11,12,75,76,52,34,77,95]),import.meta.url)),Y=w(()=>O(()=>import("./NeonatalPatientProfile-coeaWUz2.js"),__vite__mapDeps([96,1,2,3,91,4,5,6,85,86,78,79,80,81,82,40,87,88,89,48,49,50,92,71,72,73,97,98,99]),import.meta.url)),it=w(()=>O(()=>import("./AETCPatientProfile-Dt6Xqzbt.js"),__vite__mapDeps([100,1,2,3,4,5,6,101,91,85,86,78,79,80,81,82,40,87,88,89,48,49,50,92,34,26,27,102,103,104,13,105,106]),import.meta.url)),rt=w(()=>O(()=>import("./WeightHeightChart-Ft4mrg5F.js"),__vite__mapDeps([71,4,1,2,3,5,6,72,73]),import.meta.url)),ut=w(()=>O(()=>import("../index-CYcjB3lE.js").then(s=>s.cK),__vite__mapDeps([4,1,2,3,5,6]),import.meta.url)),Ct=w(()=>O(()=>import("./BloodPressure-HCsI5eGC.js"),__vite__mapDeps([107,1,2,3,5,4,6,108]),import.meta.url)),dt=w(()=>O(()=>import("./AncEnrollmentModal-BBwpNSNb.js"),__vite__mapDeps([109,1,2,3,4,5,6,101,13,91,85,86,78,79,80,81,82,40,87,88,89,48,49,50,92,34,26,27,105,110]),import.meta.url)),ct=w(()=>O(()=>import("./LabourEnrollmentModal-B1oLihCC.js"),__vite__mapDeps([111,1,2,3,4,5,6,85,86,78,79,80,81,82,40,87,88,89,9,10,11,12,101,13,91,48,49,50,92,34,26,27,105,112]),import.meta.url)),ye=w(()=>O(()=>import("./PNCEnrollmentModal-D_znIE-P.js"),__vite__mapDeps([113,1,2,3,4,5,6,85,86,78,79,80,81,82,40,87,88,89,9,10,11,12,101,13,91,48,49,50,92,34,26,27,105,114]),import.meta.url)),J=Ca(),Ce=ba(),mt=Sa(),be=xa(),Ae=Ka(),{hasWaitingList:Lt}=Ga(),{event:Ie,popoverOpen:$t,openPopover:Ht,openPIM:Bt,openOutCome:Pe,openUpdateNCDNUmbers:ke,printVisitSummary:De,printID:we,formatCurrentAddress:Oe}=za(),{screenWidth:bt}=Ma(),{patient:u}=Rt(mt),{activeProgram:I,authorizedPrograms:Ut}=Rt(be),{ConfirmPregnancy:Ee}=Rt(Ae),pt=p(!1),Re=p(!0),Ne=p(!1),At=p(!1),he=p(!1),B=p("Patient Charts"),Gt=p(null),h=p({}),j=p(!1),Q=p(!1),zt=p(!1),Ft=p(!1),V=p([]),q=p(0),ft=p(),tt=p(""),It=p(!1),Te=p(U.getAgeInYears((Xt=(Kt=u.value)==null?void 0:Kt.personInformation)==null?void 0:Xt.birthdate)),Se=nt(()=>{var e,y;const s=(y=(e=u.value)==null?void 0:e.personInformation)==null?void 0:y.gender;return s==="Female"||s==="F"}),xe=s=>s==null?void 0:s.trim().toUpperCase(),Me=s=>s===R.NEONATAL_PROGRAM||s===R.HTC_PROGRAM,Ve=s=>xe(s)===Mn,Le=s=>{var y;if(!s)return!1;const e=(y=s.id)!=null?y:s.program_id;return Me(e)||Ve(s.name)},$e=nt(()=>{var e,y;const s=(y=(e=u.value)==null?void 0:e.personInformation)==null?void 0:y.gender;return s==="Male"||s==="M"?Ut.value.filter(f=>f.name!=="ANC PROGRAM"&&f.name!=="LABOUR AND DELIVERY PROGRAM"&&f.name!=="PNC PROGRAM"):Ut.value.map(f=>{if(f.name==="ANC PROGRAM"||f.name==="LABOUR AND DELIVERY PROGRAM"||f.name==="PNC PROGRAM"){if(!(V!=null&&V.value))return;const o=V==null?void 0:V.value.some(C=>C.id===f.program_id);return{...f,actionName:o?"Start ".concat(f.name):"Enroll in ".concat(f.name)}}return f})}),He=nt(()=>!j.value&&I.value.program_id==14),Be=nt(()=>j.value&&I.value.program_id==14),Wt=nt(()=>Le(I.value)),Ue=()=>{var s,e;if((e=(s=u.value)==null?void 0:s.personInformation)!=null&&e.birthdate){const y=U.getAgeInYears(u.value.personInformation.birthdate);It.value=y<9}},Ge=()=>{var s,e;(e=(s=u.value)==null?void 0:s.personInformation)!=null&&e.birthdate&&(Re.value=U.getAgeInYears(u.value.personInformation.birthdate)>=14,Ne.value=U.ageInMonths(u.value.personInformation.birthdate)<9,At.value=U.getAgeInYears(u.value.personInformation.birthdate)<5,he.value=U.dateDiffInDays(U.sessionDate(),u.value.personInformation.birthdate)<42)},z=s=>{B.value=s},ze=()=>[{backgroundColor:"#B9E6FE",status:"",icon:Nt(["#B9E6FE","#026AA2","#9ADBFE"]),textColor:"#026AA2",value:"No further action is required.",name:"",index:"Blood sugar is normal"},{backgroundColor:"#FEDF89",status:"",icon:Nt(["#FEDF89","#B54708","#FED667"]),textColor:"#B54708",value:"Please call or follow up!",name:"",index:"Patient Defaulted"},{backgroundColor:"#FECDCA",status:"",icon:Nt(["#FECDCA","#B42318","#FDA19B"]),textColor:"#B42318",value:"Administer medications!",name:"",index:"Patient is hypertensive"}],Fe=async()=>{if(I.value.program_id==14)try{const s=await re(mt.patient.ID);if(!s)return;j.value=!!s.length}catch(s){console.error(s)}},Pt=p(!1),We=async()=>{try{await oe("Are you sure you want to create the visit?")&&(Pt.value=!0,await La(mt.patient)&&(j.value=!0,await le().refresh(st.getUserLocationId()),K("The patient visit is now active. Patient is on the waiting list for vitals")))}catch(s){console.error("error activating visit: ",s)}finally{Pt.value=!1}},kt=p(!1),Ye=async()=>{try{await oe("Are you sure you want to close the visit?")&&(kt.value=!0,await $a(u.value)&&(j.value=!1,await le().refresh(st.getUserLocationId()),K("The patient visit is now closed")))}catch(s){console.error("error: ",s)}finally{kt.value=!1}},je=async()=>{if(I.value.program_id==14)try{const s=await re(mt.patient.ID);j.value=s.length>0}catch(s){console.error(s)}},qe=s=>{Gt.value=s,pt.value=!pt.value},Yt=(s="tasks")=>rn(I.value.program_id,s),Dt=p(!1),jt=async s=>{var e,y,f,o,C;Dt.value=!0;try{if(await et(),s.program_id==R.ANC_PROGRAM||s.program_id==R.PNC_PROGRAM||s.program_id==R.LABOUR_AND_DELIVERY_PROGRAM){if(!Se.value){W("Only female patients can be enrolled in this program.");return}if(Te.value<de){W("Patient must be at least ".concat(de," years old to enroll in this program."));return}if(!((e=V==null?void 0:V.value)==null?void 0:e.find(vt=>vt.id==s.program_id))){if(s.program_id==R.ANC_PROGRAM){Q.value=!0,q.value=s.program_id;return}else if(s.program_id==R.LABOUR_AND_DELIVERY_PROGRAM){zt.value=!0,tt.value="Are you sure you want to enroll ".concat((f=(y=u.value)==null?void 0:y.personInformation)==null?void 0:f.given_name.toUpperCase()," in this program?"),q.value=s.program_id;return}else if(s.program_id==R.PNC_PROGRAM){Ft.value=!0,tt.value="Are you sure you want to enroll ".concat((C=(o=u.value)==null?void 0:o.personInformation)==null?void 0:C.given_name.toUpperCase()," in this program?"),q.value=s.program_id;return}}}const P=await ie.userProgramData(u.value.patientID,s);if(s.program_id===14)if(P!=null&&P.canProceed&&P.url&&P.stage){const b=Ke(P.stage);if(!b){W("Unable to determine patient stage");return}if(Lt(b))return J.push(P.url);W("You don't have access to the ".concat(b.toLowerCase()));return}else{W("The visit is not activated");return}if(P!=null&&P.url)return J.push(P.url)}catch(P){console.error("error: ",P)}finally{Dt.value=!1}},Ke=s=>{switch(s){case"VITALS":return"Waiting for Vitals";case"CONSULTATION":return"Waiting for Consultation";case"LAB":return"Waiting for Laboratory";case"DISPENSATION":return"Waiting for Dispensation";default:return null}},wt=()=>{Q.value=!1},qt=()=>{Q.value=!Q.value},Xe=async()=>{const s=st.getUserID(),e=new Ua(u.value.patientID,s);if(!await e.createEncounter())return W("Unable to create quickCheck encounter");const f=await e.saveObservationList(await aa());try{await lt.enrollProgram(u.value.patientID,q.value,new Date().toString()),K("Enrollment is successful")}catch(o){K("Already Enrolled")}return f?(await et(),qt(),J.push("/profile")):W("Unable to create quickCheck details!")},Ze=async()=>(await lt.enrollProgram(u.value.patientID,q.value,new Date().toString()),await et(),K("Enrollment is successful"),J.push("LabourHome")),Je=async()=>(await lt.enrollProgram(u.value.patientID,q.value,new Date().toString()),await et(),K("Enrollment is successful"),J.push("PNCHome")),et=async()=>{const s=u.activePrograms;V.value=s==null?void 0:s.map(e=>({name:e.program.name,id:e.program_id}))},Ot=()=>{qt()},Et=async()=>{Ge(),await Qe(),await Fe(),await je(),await ie.userProgramData(u.value.patientID),await et(),Ue()},Qe=async()=>{h.value={},ft.value="";const s=await X.getConceptID("Height (cm)"),e=await X.getConceptID("Weight (kg)"),y=await X.getConceptID("Systolic blood pressure"),f=await X.getConceptID("Diastolic blood pressure"),o=await X.getConceptID("Temperature (c)"),C=await X.getConceptID("Pulse");(await Ha.getLatestObsByEncounterIdAndConcepts(6,[s,e,y,f,o,C])).forEach(b=>{b.concept_id===s?h.value.height=b.value_numeric:b.concept_id===e?h.value.weight=b.value_numeric:b.concept_id===y?h.value.systolic=b.value_numeric:b.concept_id===f?h.value.diastolic=b.value_numeric:b.concept_id===o?h.value.temperature=b.value_numeric:b.concept_id===C&&(h.value.pulse=b.value_numeric)}),ft.value=new xt().getBloodGlucose(u.value)},ta=s=>s=="Undetermined"?"Undetermined":["Male","M"].includes(s)?"Male":["Female","F"].includes(s)?"Female":"",ea=()=>{var s,e;return U.getBirthdateAge((e=(s=u.value)==null?void 0:s.personInformation)==null?void 0:e.birthdate)},aa=async()=>await Fa(Ee.value);return pe(async()=>{await Et()}),ht(()=>u,async()=>{await Et()},{deep:!0}),ht(Ce,async s=>{await Et()},{deep:!0}),T({showUnderageWarning:It}),(s,e)=>{const y=ae("ion-list"),f=ae("ion-popover");return r(),k(t(_e),null,{default:n(()=>[a(Va),a(t(St),{fullscreen:!0},{default:n(()=>[t(I).program_id!==33&&t(I).program_id!==38&&t(I).program_id!=""&&t(bt)<1120?(r(),k(Wa,{key:0,onOpenPopover:e[0]||(e[0]=o=>t(Ht)(o))})):v("",!0),a(t(dt),{closeModalFunc:wt,onYes:Xe,onNo:Ot,isOpen:Q.value,title:tt.value,showUnderageWarning:It.value},null,8,["isOpen","title","showUnderageWarning"]),a(t(ct),{closeModalFunc:wt,onYes:Ze,onNo:Ot,isOpen:zt.value,title:tt.value},null,8,["isOpen","title"]),a(t(ye),{closeModalFunc:wt,onYes:Je,onNo:Ot,isOpen:Ft.value,title:tt.value},null,8,["isOpen","title"]),t(I).program_id==t(R).IMMUNIZATION_PROGRAM?(r(),k(t(H),{key:1,updateData:t(u)},null,8,["updateData"])):v("",!0),t(I).program_id==t(R).HTS_PROGRAM?(r(),k(t(G),{key:2,updateData:t(u)},null,8,["updateData"])):v("",!0),t(I).program_id==t(R).AETC_PROGRAM?(r(),k(t(it),{key:3,updateData:t(u)},null,8,["updateData"])):v("",!0),Wt.value?(r(),k(t(Y),{key:4})):v("",!0),t(I).program_id!==t(R).AETC_PROGRAM&&t(I).program_id!==t(R).IMMUNIZATION_PROGRAM&&t(I).program_id!==t(R).HTS_PROGRAM&&!Wt.value&&t(I).program_id!=""?(r(),A("div",un,[a(t(L),{class:"content_width"},{default:n(()=>[a(t(m),{size:"2.5","size-lg":"2.6","size-md":"3",class:"displayNoneLeftPanel"},{default:n(()=>[a(t(gt),{style:{"margin-bottom":"20px","background-color":"#fff"}},{default:n(()=>[a(t(Tt),null,{default:n(()=>{var o,C,P,b,vt,Zt,Jt,Qt;return[l("div",dn,[e[23]||(e[23]=l("div",null,null,-1)),l("div",{class:"name",style:{color:"var(--ion-color-primary)","margin-top":"10px"},onClick:e[1]||(e[1]=at=>t(Ht)(at))},[a(t(D),{icon:t(Aa),style:{"font-size":"2.2rem"}},null,8,["icon"])])]),l("div",cn,[l("div",{class:ve(((C=(o=t(u))==null?void 0:o.personInformation)==null?void 0:C.gender)=="M"?"initialsBox maleColor":"initialsBox femaleColor"),onClick:e[2]||(e[2]=at=>t(Bt)())},[a(t(D),{style:{color:"#fff","font-size":"70px"},icon:t(Ia)},null,8,["icon"])],2),l("div",mn,[l("div",pn,g((b=(P=t(u))==null?void 0:P.personInformation)==null?void 0:b.given_name)+" "+g((Zt=(vt=t(u))==null?void 0:vt.personInformation)==null?void 0:Zt.middle_name)+" "+g((Qt=(Jt=t(u))==null?void 0:Jt.personInformation)==null?void 0:Qt.family_name),1)])]),a(t(L),null,{default:n(()=>[a(t(m),{size:"4"},{default:n(()=>[...e[24]||(e[24]=[d("MRN:",-1)])]),_:1}),a(t(m),{class:"demoContent"},{default:n(()=>[d(g(t(u).ID),1)]),_:1})]),_:1}),t(I).program_id===32?(r(),k(t(L),{key:0},{default:n(()=>[a(t(m),{size:"4"},{default:n(()=>[...e[25]||(e[25]=[d("NCDNumber:",-1)])]),_:1}),a(t(m),{class:"demoContent"},{default:n(()=>[d(g(t(u).NcdID),1)]),_:1})]),_:1})):v("",!0),a(t(L),null,{default:n(()=>[a(t(m),{size:"4"},{default:n(()=>[...e[26]||(e[26]=[d("Gender:",-1)])]),_:1}),a(t(m),{class:"demoContent"},{default:n(()=>{var at,te;return[d(g(ta((te=(at=t(u))==null?void 0:at.personInformation)==null?void 0:te.gender)),1)]}),_:1})]),_:1}),a(t(L),null,{default:n(()=>[a(t(m),{size:"4"},{default:n(()=>[...e[27]||(e[27]=[d("Age:",-1)])]),_:1}),a(t(m),{class:"demoContent"},{default:n(()=>[d(g(ea()),1)]),_:1})]),_:1}),a(t(L),null,{default:n(()=>[a(t(m),{size:"4"},{default:n(()=>[...e[28]||(e[28]=[d("Address:",-1)])]),_:1}),a(t(m),{class:"demoContent"},{default:n(()=>[d(g(t(Oe)(t(u))),1)]),_:1})]),_:1})]}),_:1})]),_:1}),t(st).getProgramID()===1?(r(),k(qa,{key:0,patient:t(u)},null,8,["patient"])):v("",!0),a(t(gt),{style:{"margin-bottom":"20px","background-color":"#fff"}},{default:n(()=>[a(t(Pa),{value:["first"]},{default:n(()=>[a(t(ka),{value:"first",style:{"background-color":"#fff"},"toggle-icon-slot":"start"},{default:n(()=>[a(t(S),{slot:"header",color:"white"},{default:n(()=>[a(t(N),{class:"side_title"},{default:n(()=>[...e[29]||(e[29]=[d("Alerts & Reminders ",-1)])]),_:1})]),_:1}),a(t(Tt),{slot:"content"},{default:n(()=>[(r(!0),A(Z,null,yt(ze(),(o,C)=>(r(),A("span",{key:C},[o.value?(r(),k(t(L),{key:0,style:ne("border-radius: 5px;  margin-top:10px; margin-bottom:10px;background-color:"+o.backgroundColor)},null,8,["style"])):v("",!0)]))),128))]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),a(t(m),{offset:"0.07","size-sm":"12","size-md":"12","size-lg":t(bt)>1120?"9.33":"12"},{default:n(()=>[a(t(gt),{style:{"background-color":"#fff","margin-inline":"0px",padding:"5px","margin-bottom":"5px",contain:"unset",overflow:"unset"}},{default:n(()=>[l("div",null,[l("div",fn,[e[30]||(e[30]=l("div",{class:"vitalsTitle"},"Most recent Vitals & Biometrics",-1)),l("div",vn,[l("div",_n,[t(Lt)("Waiting for Laboratory")?v("",!0):(r(),A("div",gn,[He.value?(r(),k(ot,{key:0,name:"Activate visit",onClick:e[3]||(e[3]=o=>We()),loading:Pt.value,icon:t(me),fill:"solid",color:"success"},null,8,["loading","icon"])):v("",!0),Be.value?(r(),k(ot,{key:1,name:"Deactivate Visit",onClick:e[4]||(e[4]=o=>Ye()),loading:kt.value,fill:"solid",icon:t(fe),color:"danger"},null,8,["loading","icon"])):v("",!0)])),l("div",yn,[a(ot,{name:"Tasks","onClicked:btn":e[5]||(e[5]=o=>Yt()),class:"send-text",fill:"clear",color:"secondary"})]),l("div",Cn,[a(ot,{name:"Printout/Other","onClicked:btn":e[6]||(e[6]=o=>Yt("other")),class:"send-text",fill:"solid",color:"secondary"})]),l("div",bn,[a(ot,{name:"Start visit","onClicked:btn":e[7]||(e[7]=o=>jt(t(I))),loading:Dt.value,textFontSize:"12px",class:"send-text"},null,8,["loading"]),l("button",{class:"send-arrow",onClick:e[8]||(e[8]=o=>qe(o))})])])])])]),l("div",An,[a(t(L),null,{default:n(()=>[a(t(m),{class:"vitalsHeading"},{default:n(()=>[...e[31]||(e[31]=[d("Weight",-1)])]),_:1}),a(t(m),{class:"vitalsHeading"},{default:n(()=>[...e[32]||(e[32]=[d("Height",-1)])]),_:1}),a(t(m),{class:"vitalsHeading"},{default:n(()=>[...e[33]||(e[33]=[d("Temperature",-1)])]),_:1}),a(t(m),{class:"vitalsHeading"},{default:n(()=>[...e[34]||(e[34]=[d("Blood glucose",-1)])]),_:1}),a(t(m),{class:"vitalsHeading"},{default:n(()=>[...e[35]||(e[35]=[d("Pulse Rate",-1)])]),_:1}),a(t(m),{class:"vitalsHeading"},{default:n(()=>[...e[36]||(e[36]=[d("Blood pressure",-1)])]),_:1})]),_:1}),a(t(L),null,{default:n(()=>[a(t(m),{class:"vitalsValue"},{default:n(()=>{var o;return[d(g((o=h.value)==null?void 0:o.weight)+" ",1),e[37]||(e[37]=l("span",{class:"vitalsUnits"},"kg",-1))]}),_:1}),a(t(m),{class:"vitalsValue"},{default:n(()=>{var o;return[d(g((o=h.value)==null?void 0:o.height)+" ",1),e[38]||(e[38]=l("span",{class:"vitalsUnits"},"cm",-1))]}),_:1}),a(t(m),{class:"vitalsValue"},{default:n(()=>{var o;return[d(g((o=h.value)==null?void 0:o.temperature)+" ",1),e[39]||(e[39]=l("span",{class:"vitalsUnits"},"Â°C",-1))]}),_:1}),a(t(m),{class:"vitalsValue"},{default:n(()=>{var o,C;return[d(g((o=ft.value)==null?void 0:o.value)+" ",1),l("span",In,g((C=ft.value)==null?void 0:C.unit),1)]}),_:1}),a(t(m),{class:"vitalsValue"},{default:n(()=>{var o;return[d(g((o=h.value)==null?void 0:o.pulse)+" ",1),e[40]||(e[40]=l("span",{class:"vitalsUnits"},"bpm ",-1))]}),_:1}),a(t(m),{class:"vitalsValue"},{default:n(()=>{var o,C;return[d(g((o=h.value)==null?void 0:o.systolic)+"/"+g((C=h.value)==null?void 0:C.diastolic),1),e[41]||(e[41]=l("span",{class:"vitalsUnits"},"mmhg",-1))]}),_:1})]),_:1})])]),_:1}),l("div",Pn,[a(t(Da),{value:B.value,style:{"margin-top":"5px","min-width":"540px"}},{default:n(()=>[a(t(F),{value:"Patient Charts",onClick:e[9]||(e[9]=o=>z("Patient Charts"))},{default:n(()=>[a(t(N),null,{default:n(()=>[...e[42]||(e[42]=[d("Patient Charts",-1)])]),_:1})]),_:1}),a(t(F),{value:"Visits History",onClick:e[10]||(e[10]=o=>z("Visits History"))},{default:n(()=>[a(t(N),null,{default:n(()=>[...e[43]||(e[43]=[d("Visits History",-1)])]),_:1})]),_:1}),a(t(F),{value:"Vitals History",onClick:e[11]||(e[11]=o=>z("Vitals History"))},{default:n(()=>[a(t(N),null,{default:n(()=>[...e[44]||(e[44]=[d("Vitals History",-1)])]),_:1})]),_:1}),a(t(F),{value:"Lab Tests History",onClick:e[12]||(e[12]=o=>z("Lab Tests History"))},{default:n(()=>[a(t(N),null,{default:n(()=>[...e[45]||(e[45]=[d("Lab Tests History",-1)])]),_:1})]),_:1}),a(t(F),{value:"Diagnosis History",onClick:e[13]||(e[13]=o=>z("Diagnosis History"))},{default:n(()=>[a(t(N),null,{default:n(()=>[...e[46]||(e[46]=[d("Diagnosis History",-1)])]),_:1})]),_:1}),a(t(F),{value:"Allergies History",onClick:e[14]||(e[14]=o=>z("Allergies History"))},{default:n(()=>[a(t(N),null,{default:n(()=>[...e[47]||(e[47]=[d("Allergies History",-1)])]),_:1})]),_:1}),a(t(F),{value:"Medication History",onClick:e[15]||(e[15]=o=>z("Medication History"))},{default:n(()=>[a(t(N),null,{default:n(()=>[...e[48]||(e[48]=[d("Medication History",-1)])]),_:1})]),_:1})]),_:1},8,["value"])]),B.value=="Patient Charts"?(r(),A("div",kn,[l("div",{style:ne(t(bt)>826?"display: flex;":"display: block;")},[At.value?(r(),A("div",Dn,[a(t(rt))])):v("",!0),l("div",wn,[a(t(Ct))]),At.value?v("",!0):(r(),A("div",On,[a(t(ut))]))],4)])):v("",!0),B.value=="Visits History"?(r(),A("div",En,[a(t(i))])):v("",!0),B.value=="Vitals History"?(r(),A("div",Rn,[a(t(c))])):v("",!0),B.value=="Lab Tests History"?(r(),A("div",Nn,[a(t(x),{showAddTestButton:!1,showSendToLabButton:!1})])):v("",!0),B.value=="Diagnosis History"?(r(),A("div",hn,[a(t(E))])):v("",!0),B.value=="Allergies History"?(r(),A("div",Tn,[a(t(M))])):v("",!0),B.value=="Medication History"?(r(),A("div",Sn,[a(t(_))])):v("",!0)]),_:1},8,["size-lg"])]),_:1})])):v("",!0)]),_:1}),a(f,{style:{"--offset-x":"-10px"},"is-open":t($t),"show-backdrop":!1,"dismiss-on-select":!0,event:t(Ie),onDidDismiss:e[21]||(e[21]=o=>$t.value=!1)},{default:n(()=>[l("div",null,[a(y,{style:{"--ion-background-color":"#fff","--offset-x":"-30px"}},{default:n(()=>[a(t(S),{button:!0,detail:!1,onClick:e[16]||(e[16]=o=>t(Bt)()),style:{cursor:"pointer"},class:"list-content"},{default:n(()=>[a(t(D),{icon:t(wa),slot:"start",class:"sub-menu-icon"},null,8,["icon"]),e[49]||(e[49]=l("span",{class:"sub-menu-txt"},"Update demographics",-1))]),_:1}),a(t(S),{button:!0,detail:!1,onClick:e[17]||(e[17]=o=>t(Pe)()),style:{cursor:"pointer"},class:"list-content"},{default:n(()=>[a(t(D),{icon:t(Oa),slot:"start",class:"sub-menu-icon"},null,8,["icon"]),e[50]||(e[50]=l("span",{class:"sub-menu-txt"},"Update outcome",-1))]),_:1}),t(st).getProgramID()==32?(r(),k(t(S),{key:0,button:!0,detail:!1,onClick:e[18]||(e[18]=o=>t(ke)()),style:{cursor:"pointer"},class:"list-content"},{default:n(()=>[a(t(D),{icon:t(ce),slot:"start",class:"sub-menu-icon"},null,8,["icon"]),e[51]||(e[51]=l("span",{class:"sub-menu-txt"},"Update NCD Number",-1))]),_:1})):v("",!0),a(t(S),{button:!0,detail:!1,onClick:e[19]||(e[19]=o=>t(De)()),style:{cursor:"pointer"},class:"list-content"},{default:n(()=>[a(t(D),{icon:t(se),slot:"start",class:"sub-menu-icon"},null,8,["icon"]),e[52]||(e[52]=l("span",{class:"sub-menu-txt"},"Print visit summary",-1))]),_:1}),a(t(S),{button:!0,detail:!1,onClick:e[20]||(e[20]=o=>t(we)()),style:{cursor:"pointer"},class:"list-content"},{default:n(()=>[a(t(D),{icon:t(se),slot:"start",class:"sub-menu-icon"},null,8,["icon"]),e[53]||(e[53]=l("span",{class:"sub-menu-txt"},"Print client identifier",-1))]),_:1})]),_:1})])]),_:1},8,["is-open","event"]),a(f,{"is-open":pt.value,"show-backdrop":!1,"dismiss-on-select":!0,event:Gt.value,onDidDismiss:e[22]||(e[22]=o=>pt.value=!1),style:{"--width":"350px"}},{default:n(()=>[a(t(St),null,{default:n(()=>[a(y,null,{default:n(()=>[(r(!0),A(Z,null,yt($e.value,(o,C)=>(r(),k(t(S),{button:!0,detail:!1,style:{cursor:"pointer"},key:C,onClick:P=>jt(o)},{default:n(()=>[a(t(D),{slot:"start",icon:t(Ea)},null,8,["icon"]),l("span",xn,g(o==null?void 0:o.actionName),1)]),_:2},1032,["onClick"]))),128))]),_:1})]),_:1})]),_:1},8,["is-open","event"])]),_:1})}}}),Ln=Vt(Vn,[["__scopeId","data-v-9e925acf"]]),jn=Object.freeze(Object.defineProperty({__proto__:null,default:Ln},Symbol.toStringTag,{value:"Module"}));export{qa as A,jn as P,Ka as u};
