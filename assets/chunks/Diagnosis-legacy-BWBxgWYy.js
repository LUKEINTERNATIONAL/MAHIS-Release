!function(){function e(e,a,t){return(a=function(e){var a=function(e,a){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var i=t.call(e,a||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===a?String:Number)(e)}(e,"string");return"symbol"==typeof a?a:a+""}(a))in e?Object.defineProperty(e,a,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[a]=t,e}System.register(["../index-legacy-BOBcaga6.js","./vendor-legacy-h4cyiMXU.js","./NeonatalStepper-legacy-Df0oiWau.js","./images-legacy-CpQcoUy5.js","./useNeonatalVitalsStore-legacy-MfqGa5AC.js","./useReviewOfSystemsStore-legacy-DOaea7BS.js","./useNeonatalExamStore-legacy-DM0Mu8Ec.js","./useSystemicExaminationStore-legacy-BbuKeNUy.js","./useSignsSymptomsStore-legacy-CqNi96ZB.js","./lodash-legacy-pOOc9Efu.js","./apexcharts-legacy-CRcfwVwU.js","./SaveProgressModal-legacy-B6qJY5q_.js","./enrollment-legacy-BWFKsMdA.js"],function(a,t){"use strict";var i,s,n,o,l,r,d,c,u,p,g,m,h,v,b,f,y,D,x,S,w,k,C,_,R,A,P,H,M,I,T,L,B,j,V,N,Y,E,G,O,W,J,z,$;return{setters:[e=>{i=e._,s=e.u,n=e.aa,o=e.F,l=e.w,r=e.aX,d=e.T},e=>{c=e.d,u=e.br,p=e.e,g=e.f,m=e.m,h=e.k,v=e.l,b=e.j,f=e.J,y=e.Q,D=e.K,x=e.u,S=e.r,w=e.w,k=e.c,C=e.O,_=e.p,R=e.cD,A=e.ff,P=e.D,H=e.b2,M=e.b$,I=e.F,T=e.P,L=e.bM,B=e.by,j=e.am,V=e.ab,N=e.ae},e=>{Y=e.u,E=e.N},e=>{G=e.I},e=>{O=e.u},e=>{W=e.u},e=>{J=e.u},e=>{z=e.u},e=>{$=e.u},null,null,null,null],execute:function(){var t=document.createElement("style");t.textContent=".question-header[data-v-349ad15d]{padding:12px 16px;font-weight:600;color:#333;background-color:#fce8a6;font-size:1.1em}.selection-instruction[data-v-349ad15d]{padding:8px 16px;font-size:.9em;color:#666;background-color:#fff;display:flex;justify-content:space-between;align-items:center}.clear-button[data-v-349ad15d]{background:none;border:none;color:#d9534f;cursor:pointer;font-size:.9em;padding:4px 8px;text-decoration:underline;transition:color .2s}.clear-button[data-v-349ad15d]:hover{color:#c9302c}.clear-button[data-v-349ad15d]:active{color:#ac2925}.multiselect-header-wrapper[data-v-bce8dfd3]{margin:20px 0;border-radius:4px;overflow:hidden}.question-header[data-v-bce8dfd3]{padding:12px 16px;font-weight:600;color:#333;background-color:#fce8a6;font-size:1.1em}.selection-instruction[data-v-bce8dfd3]{padding:8px 16px;font-size:.9em;color:#666;background-color:#fff;display:flex;justify-content:space-between;align-items:center}.clear-button[data-v-bce8dfd3]{background:none;border:none;color:#d9534f;cursor:pointer;font-size:.9em;padding:4px 8px;text-decoration:underline;transition:color .2s}.clear-button[data-v-bce8dfd3]:hover{color:#c9302c}.custom__tag[data-v-bce8dfd3]{background-color:#d8ead3;color:#333;padding:7px 5px;border-radius:3px;font-size:.9em;display:inline-flex;align-items:center;margin:4px}.custom__remove[data-v-bce8dfd3]{cursor:pointer;margin-left:8px;font-size:.8em;color:#d9534f;line-height:1}.selected-diagnoses-list[data-v-6f381d34]{padding:8px 0;min-height:60px}.empty-state[data-v-6f381d34]{padding:20px;text-align:center;background-color:#f8f9fa;border:2px dashed #dee2e6;border-radius:8px;color:#6c757d;margin:0 16px}.empty-state p[data-v-6f381d34]{margin:0;font-style:italic;font-size:.95em}.selected-item[data-v-6f381d34]{display:flex;align-items:center;background-color:#ded;color:#333;padding:12px 16px;margin:0 16px 10px;border-radius:6px;font-weight:500;border:2px solid #c5d9c5;transition:all .2s ease;position:relative;gap:10px}.selected-item.draggable-enabled[data-v-6f381d34]{cursor:move}.selected-item.draggable-enabled[data-v-6f381d34]:hover{border-color:#4a90e2;box-shadow:0 2px 8px rgba(74,144,226,.15);transform:translateY(-1px)}.selected-item.is-dragging[data-v-6f381d34]{background-color:#d1e7f8!important;border:2px dashed #316CBA!important;box-shadow:0 6px 12px rgba(49,108,186,.3)!important;transform:rotate(-2deg) translateY(-3px) scale(1.02);z-index:1000;opacity:1}.drag-handle-wrapper[data-v-6f381d34]{cursor:grab;padding:6px 8px;border:1px solid #BBDDBC;border-radius:4px;display:flex;align-items:center;justify-content:center;transition:all .2s;flex-shrink:0;background-color:rgba(255,255,255,.5);touch-action:none}.drag-handle-wrapper[data-v-6f381d34]:hover{border-color:#4a90e2;background-color:rgba(74,144,226,.1)}.drag-handle-wrapper[data-v-6f381d34]:active{cursor:grabbing;background-color:rgba(74,144,226,.2)}.drag-handle-wrapper.is-active[data-v-6f381d34]{border-color:#316cba;background-color:rgba(49,108,186,.15)}.drag-icon[data-v-6f381d34]{font-size:1.3em;line-height:1;color:#666;user-select:none;display:block}.rank-number[data-v-6f381d34]{font-weight:700;color:#4a90e2;font-size:.9em;min-width:28px;flex-shrink:0}.item-label[data-v-6f381d34]{flex-grow:1;word-break:break-word;line-height:1.4}.remove-button[data-v-6f381d34]{background:none;border:none;cursor:pointer;padding:6px 8px;border-radius:4px;transition:all .2s;flex-shrink:0;display:flex;align-items:center;justify-content:center}.remove-button[data-v-6f381d34]:hover{background-color:rgba(217,83,79,.1);transform:scale(1.1)}.remove-button[data-v-6f381d34]:active{transform:scale(.95)}.trash-icon[data-v-6f381d34]{font-size:1.2em;line-height:1}.ghost[data-v-6f381d34]{opacity:.4;background:#e3f2fd!important;border:2px dashed #4a90e2!important}.dragging-element[data-v-6f381d34]{opacity:1}@media(hover:none)and (pointer:coarse){.drag-handle-wrapper[data-v-6f381d34]{padding:10px 12px;border-width:2px}.drag-icon[data-v-6f381d34]{font-size:1.5em}.selected-item[data-v-6f381d34]{padding:14px 16px}.remove-button[data-v-6f381d34]{padding:8px 10px}.trash-icon[data-v-6f381d34]{font-size:1.4em}}.selected-item.draggable-enabled[data-v-6f381d34] *{user-select:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none}.drag-icon[data-v-6f381d34]{width:20px;height:20px;display:block}.center-content[data-v-f467a363]{display:flex;width:100%;max-width:1024px;margin:0 auto;padding:0 16px}.diagnosis-selection-panel[data-v-f467a363]{display:flex;flex-direction:column;width:100%;max-width:1024px;margin:0 auto;padding:20px 16px}.diagnosis-section[data-v-f467a363]{max-width:100%;margin-bottom:20px}.diagnosis-section-title[data-v-f467a363]{font-size:1.2em;font-weight:700;margin-bottom:15px;color:#333;padding-left:10px}.multiselect-component[data-v-f467a363]{width:100%;margin-top:10px}.separator[data-v-f467a363]{max-width:100%;border:0;border-top:1px solid #ddd;margin:30px 0}@media(max-width:768px){.diagnosis-section[data-v-f467a363],.separator[data-v-f467a363]{width:90vw;min-width:350px}.diagnosis-selection-panel[data-v-f467a363]{max-width:100%;padding:20px 0}}@media(max-width:350px){.diagnosis-section[data-v-f467a363],.separator[data-v-f467a363]{min-width:100%}}.description-box[data-v-f467a363]{background-color:#fce8a6;color:#333;font-weight:500;padding:10px 20px;margin-bottom:20px;text-align:center;border-radius:4px}.validation-error[data-v-f467a363]{color:#c00;background-color:#fcc;border:1px solid #cc0000;padding:10px;margin-top:20px;border-radius:4px;font-weight:600}.systems-suggestions-panel[data-v-61bed52f]{margin:20px auto;padding:20px;font-family:Arial,sans-serif;max-width:1200px}.diagnosis-section[data-v-61bed52f]{margin-bottom:30px;background-color:#f9f9f9;padding:20px;border-radius:8px;border:1px solid #e0e0e0}.diagnosis-section-title[data-v-61bed52f]{font-size:1.2em;font-weight:600;color:#333;margin-bottom:15px;padding-bottom:10px}.suggestion-instruction[data-v-61bed52f]{background-color:#fce8a6;padding:15px 20px;border-radius:8px;font-size:.95em;color:#5c4700;margin-top:30px;margin-bottom:30px;line-height:1.5;border-left:4px solid #f5c842}.suggestion-instruction strong[data-v-61bed52f]{color:#3d2f00}.pending-review-notice[data-v-61bed52f]{display:block;margin-top:10px;font-weight:600;color:#d9534f;font-size:.95em}.suggested-diagnosis-section[data-v-61bed52f],.rejected-diagnosis-section[data-v-61bed52f]{margin-bottom:30px}.suggested-title[data-v-61bed52f],.rejected-title[data-v-61bed52f]{font-size:1.2em;font-weight:600;color:#333;margin-bottom:15px;display:flex;align-items:center;gap:10px}.suggestion-count-badge[data-v-61bed52f]{display:inline-flex;align-items:center;justify-content:center;background-color:#ff6b6b;color:#fff;font-size:.75em;font-weight:700;padding:4px 10px;border-radius:12px;animation:pulse-61bed52f 2s ease-in-out infinite}@keyframes pulse-61bed52f{0%,to{opacity:1}50%{opacity:.7}}.empty-suggestions[data-v-61bed52f]{padding:30px;text-align:center;background-color:#d4edda;border:2px solid #c3e6cb;border-radius:8px;color:#155724}.empty-suggestions p[data-v-61bed52f]{margin:0;font-weight:600;font-size:1em}.suggestion-item[data-v-61bed52f],.rejected-item[data-v-61bed52f]{display:flex;align-items:center;justify-content:space-between;background-color:#fff;border:2px solid #e0e0e0;border-radius:8px;padding:14px 18px;margin-bottom:12px;box-shadow:0 1px 3px rgba(0,0,0,.05);transition:all .2s ease}.suggestion-item[data-v-61bed52f]{cursor:pointer;position:relative;border-left:4px solid #ffc107}.suggestion-item[data-v-61bed52f]:hover{border-color:#4a90e2;background-color:#f0f8ff;transform:translateY(-2px)}.suggestion-item[data-v-61bed52f]:active{transform:translateY(0);box-shadow:0 2px 5px rgba(74,144,226,.2)}.suggestion-item[data-v-61bed52f]:focus{outline:3px solid #4a90e2;outline-offset:2px}.suggestion-content[data-v-61bed52f],.rejected-content[data-v-61bed52f]{flex-grow:1;margin-right:15px}.suggestion-label[data-v-61bed52f]{font-weight:600;color:#2d5016;margin:0 0 6px;display:flex;align-items:center;gap:10px;font-size:1em}.add-indicator[data-v-61bed52f]{display:inline-flex;align-items:center;justify-content:center;min-width:24px;height:24px;background-color:#4a90e2;color:#fff;border-radius:50%;font-size:1.3em;font-weight:700;transition:all .2s;line-height:1}.suggestion-item:hover .add-indicator[data-v-61bed52f]{background-color:#357abd;transform:scale(1.15) rotate(90deg)}.rejected-label[data-v-61bed52f]{font-weight:600;color:#c00;margin:0 0 6px;font-size:1em}.suggestion-details[data-v-61bed52f],.rejected-details[data-v-61bed52f]{font-size:.88em;color:#555;line-height:1.4;margin:0}.suggestion-action-button[data-v-61bed52f]{background:none;border:none;cursor:pointer;padding:8px;border-radius:50%;transition:all .2s;display:flex;align-items:center;justify-content:center;flex-shrink:0;min-width:36px;min-height:36px}.reject-button[data-v-61bed52f]{color:#d9534f}.reject-button[data-v-61bed52f]:hover{background-color:#ffe0e0;transform:scale(1.15)}.reject-button[data-v-61bed52f]:active{transform:scale(.95)}.undo-button[data-v-61bed52f]{color:#007bff}.undo-button[data-v-61bed52f]:hover{background-color:#e0f0ff;transform:scale(1.15) rotate(180deg)}.undo-button[data-v-61bed52f]:active{transform:scale(.95)}.cross-icon[data-v-61bed52f],.undo-icon[data-v-61bed52f]{font-size:1.3em;line-height:1}.rejected-title[data-v-61bed52f]{margin-top:30px;border-top:2px solid #ddd;padding-top:20px;color:#a00}.rejected-item[data-v-61bed52f]{background-color:#fff5f5;border:2px solid #f0d0d0;opacity:.85}.rejected-item[data-v-61bed52f]:hover{border-color:#007bff;box-shadow:0 3px 8px rgba(0,123,255,.2);opacity:1;transform:translateY(-1px)}@media(prefers-reduced-motion:reduce){.suggestion-item[data-v-61bed52f],.rejected-item[data-v-61bed52f],.suggestion-action-button[data-v-61bed52f],.add-indicator[data-v-61bed52f]{transition:none}.suggestion-item:hover .add-indicator[data-v-61bed52f],.undo-button[data-v-61bed52f]:hover{transform:scale(1.15) rotate(0)}.suggestion-count-badge[data-v-61bed52f]{animation:none}}@media(hover:none)and (pointer:coarse){.suggestion-item[data-v-61bed52f],.rejected-item[data-v-61bed52f]{padding:16px 18px}.suggestion-action-button[data-v-61bed52f]{padding:12px;min-width:44px;min-height:44px}.add-indicator[data-v-61bed52f]{min-width:28px;height:28px;font-size:1.5em}}@media(max-width:768px){.systems-suggestions-panel[data-v-61bed52f]{padding:15px;margin:10px auto}.diagnosis-section[data-v-61bed52f]{padding:15px}.suggestion-item[data-v-61bed52f],.rejected-item[data-v-61bed52f]{flex-direction:column;align-items:flex-start;gap:12px}.suggestion-action-button[data-v-61bed52f]{align-self:flex-end}.suggested-title[data-v-61bed52f],.rejected-title[data-v-61bed52f]{flex-direction:column;align-items:flex-start;gap:5px}}.validation-error[data-v-61bed52f]{color:#c00;background-color:#fcc;border:1px solid #cc0000;padding:10px;margin-top:20px;border-radius:4px;font-weight:600;line-height:1.5}.diagnosis-summary-panel[data-v-60387580]{margin:0 auto;padding:20px;font-family:Arial,sans-serif}.summary-header[data-v-60387580]{font-size:2em;font-weight:700;color:#38761d;text-align:center;margin-bottom:30px;padding-bottom:10px;border-bottom:2px solid #e0e0e0}.summary-section[data-v-60387580]{margin-bottom:25px;border:1px solid #f0f0f0;border-radius:6px;overflow:hidden;box-shadow:0 1px 3px rgba(0,0,0,.05)}.section-title[data-v-60387580]{font-size:1.3em;font-weight:600;padding:15px;color:#333}.diagnosis-list[data-v-60387580]{padding:10px 15px}.diagnosis-item[data-v-60387580]{font-size:1.1em;padding:8px 0;color:#2c3e50}.primary-item[data-v-60387580]{font-weight:700}.differential-item[data-v-60387580]{padding-left:10px;border-left:3px solid #d8ead3;margin-bottom:5px}.no-data-item[data-v-60387580]{font-style:italic;color:#999}\n/*$vite$:1*/",document.head.appendChild(t);const F={class:"multiselect-header-wrapper"},U={key:0,class:"question-header"},q={class:"selection-instruction"},K=i(c({name:"VueMultiselectStyledHeader",components:{VueMultiselect:u},__name:"VueMultiselectStaticList",props:{options:{type:Array,required:!0,validator:e=>e.every(e=>"label"in e&&"value"in e)},modelValue:{type:[Object,null],default:null}},emits:["update:modelValue"],setup(e,{emit:a}){const t=a,i=()=>{t("update:modelValue",null)};return(a,s)=>(g(),p("div",F,[a.$slots.header?(g(),p("div",U,[b(a.$slots,"header",{},void 0,!0)])):m("",!0),h("div",q,[s[1]||(s[1]=h("span",null,"Select one.",-1)),e.modelValue?(g(),p("button",{key:0,onClick:i,class:"clear-button",type:"button"},"Clear")):m("",!0)]),v(x(u),{"model-value":e.modelValue,"onUpdate:modelValue":s[0]||(s[0]=e=>t("update:modelValue",e)),options:e.options,"track-by":"value",label:"label",searchable:!1,"allow-empty":!0,"show-labels":!1,"close-on-select":!0},{option:f(({option:e})=>[y(D(e.label),1)]),singleLabel:f(({option:e})=>[y(D(e.label),1)]),_:1},8,["model-value","options"])]))}}),[["__scopeId","data-v-349ad15d"]]),Z={class:"multiselect-header-wrapper"},Q={key:0,class:"question-header"},X={class:"selection-instruction"},ee={class:"custom__tag"},ae=["onClick"],te=i(c({name:"VueMultiselectStyledMulti",components:{VueMultiselect:u},__name:"VueMultiselectStyledMulti",props:{options:{type:Array,required:!0,validator:e=>e.every(e=>"label"in e&&"value"in e)},modelValue:{type:Array,default:()=>[]}},emits:["update:modelValue"],setup(e,{emit:a}){const t=a,i=()=>{t("update:modelValue",[])};return(a,s)=>(g(),p("div",Z,[a.$slots.header?(g(),p("div",Q,[b(a.$slots,"header",{},void 0,!0)])):m("",!0),h("div",X,[s[1]||(s[1]=h("span",null,"Select one or more.",-1)),e.modelValue.length>0?(g(),p("button",{key:0,onClick:i,class:"clear-button",type:"button"},"Clear All")):m("",!0)]),v(x(u),{"model-value":e.modelValue,"onUpdate:modelValue":s[0]||(s[0]=e=>t("update:modelValue",e)),options:e.options,"track-by":"value",label:"label",searchable:!0,multiple:!0,"close-on-select":!1,"hide-selected":!0},{tag:f(({option:e,remove:a})=>[h("span",ee,[h("span",null,D(e.label),1),h("span",{class:"custom__remove",onClick:t=>a(e)},"âŒ",8,ae)])]),placeholder:f(()=>[...s[2]||(s[2]=[y(" Select the appropriate diagnosis... ",-1)])]),_:1},8,["model-value","options"])]))}}),[["__scopeId","data-v-bce8dfd3"]]),ie={class:"selected-diagnoses-list"},se={key:0,class:"empty-state"},ne=["src"],oe={key:1,class:"rank-number"},le={class:"item-label"},re=["onClick","aria-label","title"],de=c({__name:"SelectedDiagnosisDisplay",props:{items:{default:()=>[]},isDifferential:{type:Boolean,default:!1},allowDragging:{type:Boolean,default:!1}},emits:["remove-item","update:items"],setup(e,{emit:a}){const t=e,i=a,s=S([]),n=S(null);w(()=>t.items,e=>{s.value=e?[...e]:[]},{immediate:!0,deep:!0});const o=k(()=>({animation:250,disabled:!t.allowDragging||!t.isDifferential,ghostClass:"ghost",dragClass:"dragging-element",forceFallback:!0,fallbackTolerance:5,touchStartThreshold:5,delay:0,delayOnTouchOnly:!0})),l=e=>t.allowDragging&&t.isDifferential,r=e=>{void 0!==e.oldIndex&&s.value[e.oldIndex]&&(n.value=s.value[e.oldIndex].value)},d=e=>{i("update:items",s.value),n.value=null};return(a,t)=>(g(),p("div",ie,[e.items&&0!==e.items.length?(g(),C(x(A),R({key:1,modelValue:s.value,"onUpdate:modelValue":t[0]||(t[0]=e=>s.value=e),"item-key":"value",handle:".drag-handle-wrapper",onStart:r,onEnd:d},o.value,{move:l}),{item:f(({element:a,index:s})=>[h("div",{class:_(["selected-item",{differential:e.isDifferential,"is-dragging":n.value===a.value,"draggable-enabled":e.allowDragging&&e.isDifferential}])},[e.allowDragging&&e.isDifferential?(g(),p("div",{key:0,class:_(["drag-handle-wrapper",{"is-active":n.value===a.value}]),title:"Drag to reorder"},[h("img",{src:x(G).icons.dragIcon,alt:"Drag to reorder",class:"drag-icon"},null,8,ne)],2)):m("",!0),e.isDifferential?(g(),p("span",oe,"#"+D(s+1),1)):m("",!0),h("span",le,D(a.label),1),h("button",{onClick:e=>(e=>{i("remove-item",e)})(a),class:"remove-button",type:"button","aria-label":"Remove "+a.label,title:"Remove "+a.label},[...t[1]||(t[1]=[h("span",{class:"trash-icon"},"ðŸ—‘ï¸",-1)])],8,re)],2)]),_:1},16,["modelValue"])):(g(),p("div",se,[h("p",null,"No "+D(e.isDifferential?"differential":"working")+" diagnosis selected",1)]))]))}}),ce=i(de,[["__scopeId","data-v-6f381d34"]]),ue=P("diagnosisStore",{state:()=>({workingDiagnosis:null,differentialDiagnoses:[],diagnosisNotes:"",current_patient_ID:null}),actions:{setWorkingDiagnosis(e){this.workingDiagnosis=e},setDifferentialDiagnoses(e){this.differentialDiagnoses=e},addDifferentialDiagnosis(e){this.differentialDiagnoses.some(a=>a.value===e.value)||this.differentialDiagnoses.push(e)},removeDifferentialDiagnosis(e){this.differentialDiagnoses=this.differentialDiagnoses.filter(a=>a.value!==e.value)},setDiagnosisNotes(e){this.diagnosisNotes=e},resetDiagnosisData(){this.$reset(),console.log("Diagnosis Store Data has been reset.")},setCurrentPatientID(e){this.current_patient_ID!==e?(this.workingDiagnosis=null,this.differentialDiagnoses=[],this.diagnosisNotes="",this.current_patient_ID=e,console.log(`Patient ID changed to: ${e}. All diagnosis selections have been cleared.`)):console.log(`Patient ID unchanged: ${e}. Diagnosis data retained.`)}},persist:!0}),pe={class:"diagnosis-selection-panel"},ge={class:"diagnosis-section"},me={class:"diagnosis-section"},he={key:0,class:"validation-error"},ve=i(c({__name:"DiagnosisSelection",setup(e,{expose:a}){const t=K,i=ue(),n=s(),{patient:o}=H(n),l=S(null);w(()=>{var e;return null===(e=o.value)||void 0===e?void 0:e.patientID},e=>{const a=null==(t=e)?null:String(t);var t;i.setCurrentPatientID(a)},{immediate:!0});const r=[{label:"Hypoglycaemia (symptomatic)",value:"Hypoglycaemia1"},{label:"Abscess",value:"Abscess"},{label:"Fever",value:"Fever"},{label:"Birth Asphyxia",value:"Asphyxia"},{label:"Neonatal Sepsis (Early onset - Symptomatic)",value:"Neonatal Sepsis - Early Onset"},{label:"Prematurity with Respiratory Distress",value:"Prematurity with RDS"},{label:"Suspected Neonatal Sepsis",value:"Sepsis_Sus"},{label:"Possible Meconium Aspiration",value:"Meconium Aspiration"},{label:"Possible Meconium Aspiration",value:"MAP"},{label:"Suspected neonatal sepsis",value:"NSep"},{label:"Difficulty Feeding",value:"DF"},{label:"Dehydration",value:"Dhyd"},{label:"Congenital Heart Disease",value:"CHD"},{label:"Anaemia",value:"An"},{label:"Congenital Abnormality",value:"Cong"},{label:"Pneumonia / Bronchiolitis",value:"PnBch"},{label:"Transient Tachypnoea of Newborn (TTN)",value:"TTN"},{label:"Umbilical Hernia",value:"UH"},{label:"Meningitis",value:"Mgts"},{label:"Ambiguous Genetalia",value:"AG"},{label:"Untreated Maternal Syphilis",value:"UMS"},{label:"Abdominal obstruction",value:"AbObs"},{label:"Risk factors for sepsis (Not symptomatic)",value:"Risk"},{label:"Birth Trauma",value:"BT"},{label:"Apnoea of prematurity",value:"Apn"},{label:"Birth Asphyxia",value:"BA"},{label:"Convulsions",value:"Conv"},{label:"Low Birth Weight (1500-2499g)",value:"LBW"},{label:"Very Low Birth Weight (1000-1499g)",value:"VLBW"},{label:"Extremely Low Birth Weight (<1000g)",value:"ExLBW"},{label:"High Birth Weight (>4000g at birth)",value:"HBW"},{label:"Mild Hypothermia",value:"MiHypo"},{label:"Moderate Hypothermia",value:"ModHypo"},{label:"Severe Hypothermia",value:"SHypo"},{label:"Hyperthermia",value:"Hyperth"},{label:"Premature (32-36 weeks)",value:"Prem"},{label:"Very Premature (28-31 weeks)",value:"VPrem"},{label:"Extremely Premature (<28 weeks)",value:"ExPrem"},{label:"Hypoglycaemia (symptomatic)",value:"HypogSy"},{label:"Hypoglycaemia (NOT symptomatic)",value:"HypogAs"},{label:"At Risk of Hypoglycaemia",value:"RiHypog"},{label:"HIV Unknown",value:"HIVU"},{label:"HIV Low Risk",value:"HIVLR"},{label:"HIV High Risk",value:"HIVHR"},{label:"Physiological Jaundice",value:"MJ"},{label:"Pathological Jaundice",value:"DJ"},{label:"Prolonged Jaundice",value:"PJaundice"},{label:"Hypoxic Ischaemic Encephalopathy",value:"HIE"},{label:"Suspected Hypoxic Ischaemic Encephalopathy",value:"sHIE"},{label:"Prematurity with Respiratory Distress",value:"PremRD"},{label:"Term baby with Respiratory Distress",value:"TermRD"},{label:"Gastroschisis",value:"GSchis"},{label:"Omphalocele",value:"Omph"},{label:"Cleft lip and/or palate with RD",value:"CleftRD"},{label:"Cleft lip",value:"CleftLip"},{label:"Cleft lip and/or palate",value:"CleftLipPalate"},{label:"Myelomeningocele",value:"Myelo"},{label:"Congenital dislocation of the hip (CDH)",value:"CDH"},{label:"Moderate Talipes (club foot)",value:"MoTalipes"},{label:"Mild Talipes (club foot)",value:"MiTalipes"}],d=k(()=>i.workingDiagnosis?r.filter(e=>{var a;return e.value!==(null===(a=i.workingDiagnosis)||void 0===a?void 0:a.value)}):r),c=k(()=>{if(0===i.differentialDiagnoses.length)return r;const e=i.differentialDiagnoses.map(e=>e.value);return r.filter(a=>!e.includes(a.value))}),u=k({get:()=>i.workingDiagnosis,set:e=>{l.value=null,i.setWorkingDiagnosis(e)}}),b=k(()=>i.workingDiagnosis?[i.workingDiagnosis]:[]),_=()=>{i.setWorkingDiagnosis(null)},R=k({get:()=>i.differentialDiagnoses,set:e=>{l.value=null,i.setDifferentialDiagnoses(e)}}),A=k(()=>i.differentialDiagnoses),P=e=>{i.removeDifferentialDiagnosis(e)};return a({validateForm:function(){const e={};return!!i.workingDiagnosis?(l.value=null,console.log("Validation Success: Diagnosis Selection passed.")):(l.value="A Primary Diagnosis (Working Diagnosis) is required to proceed to the next step.",e.primaryDiagnosisRequired=l.value,console.error("Validation Error: Primary Diagnosis is missing.")),Object.keys(e).length>0?e:null}}),(e,a)=>(g(),p("div",pe,[h("div",ge,[a[3]||(a[3]=h("div",{class:"description-box"}," Select the diagnoses you think the baby has (you can select more than 1) ",-1)),a[4]||(a[4]=h("h3",{class:"diagnosis-section-title"},"Your Selected Working Diagnosis",-1)),v(ce,{items:b.value,onRemoveItem:_},null,8,["items"]),(g(),C(M(x(t)),{modelValue:u.value,"onUpdate:modelValue":a[0]||(a[0]=e=>u.value=e),options:c.value,class:"multiselect-component"},{header:f(()=>[...a[2]||(a[2]=[y(" Primary Diagnosis (Select ONE) ",-1)])]),_:1},8,["modelValue","options"]))]),a[7]||(a[7]=h("hr",{class:"separator"},null,-1)),h("div",me,[a[6]||(a[6]=h("h3",{class:"diagnosis-section-title"},"Your Selected Differential Diagnosis",-1)),v(ce,{items:A.value,"is-differential":!0,onRemoveItem:P},null,8,["items"]),v(te,{modelValue:R.value,"onUpdate:modelValue":a[1]||(a[1]=e=>R.value=e),options:d.value,class:"multiselect-component"},{header:f(()=>[...a[5]||(a[5]=[y(" Differential Diagnoses ",-1)])]),_:1},8,["modelValue","options"]),l.value?(g(),p("div",he,D(l.value),1)):m("",!0)])]))}}),[["__scopeId","data-v-f467a363"]]),be=e=>e.RR>60||"Grun"===e.DangerSigns||"Cyan"===e.DangerSigns||e.SatsAIr<90||e.SatsO2<90||""!==e.RespSR||""!==e.SignsRD;function fe(e){console.log("we here",e.value);const a=ue(),t=S([]),i=k(()=>function(e){if(!e)return[];const a=[];e.EDLIZSummaryTableScore>.9&&a.push({label:"Suspected neonatal sepsis",value:"NSep",severity:1,details:`EDLIZ risk score of ${e.EDLIZSummaryTableScore} is high, triggering the sepsis protocol.`}),be(e)&&(e=>"Yes"===e.MecPresent)(e)&&a.push({label:"Possible Meconium Aspiration",value:"MA",severity:1,details:"Respiratory distress present with meconium risk factors. Requires urgent stabilization."}),"Conv"!==e.DangerSigns&&"Convulsions"!==e.SymptomReviewNeurology&&"Convulsions"!==e.Activity&&"Convulsions"!==e.AdmReason||a.push({label:"Convulsions",value:"Conv",severity:1,details:"Convulsions have been observed on examination or reported in history."}),(e.BloodSugarmmol<2.5||e.BloodSugarmg<45)&&!0===e.HypoSymptoms&&a.push({label:"Hypoglycaemia (symptomatic)",value:"HypogSy",severity:1,details:"Blood sugar is low and the baby is showing symptoms."}),e.BirthWeight<1e3&&a.push({label:"Extremely Low Birth Weight (<1000g)",value:"ExLBW",severity:1,details:`Birth weight is critically low at ${e.BirthWeight}g.`}),e.Temperature<32&&a.push({label:"Severe Hypothermia",value:"SHypo",severity:1,details:"Baby's temperature is critically low (< 32.0Â°C)."}),e.Gestation<28&&a.push({label:"Extremely Premature (<28 weeks)",value:"ExPrem",severity:1,details:`Gestation is ${e.Gestation} weeks, requiring immediate high-level care.`}),e.ThompScore>=11&&a.push({label:"Hypoxic Ischaemic Encephalopathy",value:"HIE",severity:1,details:`Thompson Score is ${e.ThompScore} or higher, indicating severe encephalopathy.`}),e.Gestation<37&&be(e)&&a.push({label:"Prematurity with Respiratory Distress",value:"PremRD",severity:1,details:`Preterm infant (${e.Gestation} weeks) showing signs of respiratory distress.`}),e.Gestation>=37&&be(e)&&a.push({label:"Term baby with Respiratory Distress",value:"TermRD",severity:1,details:`Term infant (${e.Gestation} weeks) showing signs of respiratory distress.`}),e.Gestation<37&&"Apn"===e.RespSR&&a.push({label:"Apnoea of prematurity",value:"Apn",severity:2,details:"Apnoeic episodes observed in a premature infant."}),e.BirthWeight>999&&e.BirthWeight<1500&&a.push({label:"Very Low Birth Weight (1000-1499g)",value:"VLBW",severity:2,details:"Birth weight is between 1000g and 1499g."}),e.Temperature>31.9&&e.Temperature<36&&a.push({label:"Moderate Hypothermia",value:"ModHypo",severity:2,details:"Baby's temperature is low (32.0Â°C to 35.9Â°C)."}),e.Temperature>37.5&&a.push({label:"Hyperthermia",value:"Hyperth",severity:2,details:"Baby's temperature is high (> 37.5Â°C)."}),e.Gestation>31.9&&e.Gestation<36.1&&a.push({label:"Premature (32-36 weeks)",value:"Prem",severity:2,details:`Baby's gestation is ${e.Gestation} weeks.`}),(e.BloodSugarmmol<2.5||e.BloodSugarmg<45)&&!1===e.HypoSymptoms&&a.push({label:"Hypoglycaemia (NOT symptomatic)",value:"HypogAs",severity:2,details:"Blood sugar is low, but baby is currently asymptomatic."}),e.ThompScore>0&&e.ThompScore<=10&&a.push({label:"Suspected Hypoxic Ischaemic Encephalopathy",value:"sHIE",severity:2,details:`Thompson Score is ${e.ThompScore}, indicating suspected encephalopathy.`}),"GSCH"===e.GSCvsOM&&a.push({label:"Gastroschisis",value:"GSchis",severity:2,details:"Abdominal wall defect observed."}),"OMPH"===e.GSCvsOM&&a.push({label:"Omphalocele",value:"Omph",severity:2,details:"Abdominal wall defect observed."}),("Lip"===e.Palate||"Cleft"===e.Palate||"LipPalate"===e.Palate)&&be(e)&&a.push({label:"Cleft lip and/or palate with RD",value:"CleftRD",severity:2,details:"Cleft observed; respiratory distress suggests potential airway compromise."}),e.EDLIZSummaryTableScore>0&&e.EDLIZSummaryTableScore<=.9&&a.push({label:"Risk factors for sepsis (Not symptomatic)",value:"Risk",severity:3,details:`EDLIZ risk score of ${e.EDLIZSummaryTableScore} indicates risk factors are present.`}),e.BirthWeight>1499&&e.BirthWeight<2500&&a.push({label:"Low Birth Weight (1500-2499g)",value:"LBW",severity:3,details:"Birth weight is between 1500g and 2499g."}),e.BirthWeight>4e3&&a.push({label:"High Birth Weight (>4000g at birth)",value:"HBW",severity:3,details:"Birth weight is greater than 4000g."}),e.Temperature>35.9&&e.Temperature<36.5&&a.push({label:"Mild Hypothermia",value:"MiHypo",severity:3,details:"Baby's temperature is slightly low (36.0Â°C to 36.4Â°C)."}),(e.BirthWeight<2500||e.BirthWeight>4e3||e.Gestation<37||"DM"===e.PregConditions||"Y"===e.ANSteroids||"NE"===e.AdmReason)&&a.push({label:"At Risk of Hypoglycaemia",value:"RiHypog",severity:3,details:"Risk factors like low birth weight, prematurity, or maternal diabetes present."});const t=!1===e.MatHIVtest,i=!(!0!==e.MatHIVtest||"R"!==e.HIVtestResult&&"U"!==e.HIVtestResult||"1stTrim"!==e.LengthHAART&&"2ndTrim"!==e.LengthHAART&&"3rdTrim"!==e.LengthHAART),s=!(!0!==e.MatHIVtest||"R"!==e.HIVtestResult&&"U"!==e.HIVtestResult||"N"!==e.HAART&&"Late"!==e.LengthHAART);t&&a.push({label:"HIV Unknown",value:"HIVU",severity:3,details:"Maternal HIV status is unknown or untested."}),i&&a.push({label:"HIV Low Risk",value:"HIVLR",severity:3,details:"Maternal HIV reactive/unknown, but HAART started early."}),s&&a.push({label:"HIV High Risk",value:"HIVHR",severity:3,details:"Maternal HIV reactive/unknown, with no/late HAART."}),"Lip"===e.Palate&&a.push({label:"Cleft lip",value:"CleftLip",severity:3,details:"Cleft lip observed."}),"Cleft"===e.Palate&&a.push({label:"Cleft lip and/or palate",value:"CleftLipPalate",severity:3,details:"Cleft palate/lip and palate observed."}),"NTD"===e.Spine&&a.push({label:"Myelomeningocele",value:"Myelo",severity:3,details:"Neural Tube Defect (NTD) observed on the spine or head."});const n="Y"===e.YColour&&e.Age<24||"Y"===e.YColour&&e.Age>=24&&(e.Age<336&&e.Gestation>36.6||e.Age<504&&e.Gestation<37)&&("DJ"===e.Jaundice||e.Temperature>37||e.BirthWeight<2500||"White"===e.Colour);return n&&a.push({label:"Pathological Jaundice",value:"DJ",severity:4,details:"Jaundice with signs of pathology (early onset, deep jaundice, or risk factors)."}),"MJ"===e.Jaundice&&e.Age>24&&(e.Gestation>36.6&&e.Age<336||e.Gestation<37&&e.Age<504)&&!n&&a.push({label:"Physiological Jaundice",value:"MJ",severity:5,details:"Common, non-pathological jaundice (appears > 24 hours, no danger signs)."}),"Y"===e.YColour&&(e.Age>336&&e.Gestation>36.9||e.Age>504&&e.Gestation<36.6)&&a.push({label:"Prolonged Jaundice",value:"PJaundice",severity:5,details:"Jaundice persisting beyond 14 days term or >21 days preterm infants."}),("Breech"===e.Presentation||"CDH"===e.MatComorbidities||"Legs"===e.MSKproblems||"Folds"===e.Skin||"Yes"===e.Ortolani)&&a.push({label:"Congenital dislocation of the hip (CDH)",value:"CDH",severity:6,details:"Risk factors (e.g., breech) or positive Ortolani/Barlow test."}),"No"===e.TalipesSev&&a.push({label:"Moderate Talipes (club foot)",value:"MoTalipes",severity:7,details:"Foot held in abnormal position and cannot be passively corrected."}),"Yes"===e.TalipesSev&&a.push({label:"Mild Talipes (club foot)",value:"MiTalipes",severity:8,details:"Foot held in abnormal position and CAN be passively corrected."}),a.sort((e,a)=>e.severity-a.severity),a.filter((e,a,t)=>a===t.findIndex(a=>a.value===e.value))}(e.value)),s=k(()=>i.value.filter(e=>{const i=a.differentialDiagnoses.some(a=>a.value===e.value),s=t.value.some(a=>a.value===e.value);return!i&&!s})),n=k(()=>s.value.length),o=k(()=>t.value.length);return{suggestedDiagnoses:s,rejectedDiagnoses:t,allSuggestions:i,suggestionCount:n,rejectedCount:o,acceptSuggestion:e=>{a.addDifferentialDiagnosis({label:e.label,value:e.value})},rejectSuggestion:e=>{t.value.push(e)},undoReject:e=>{t.value=t.value.filter(a=>a.value!==e.value)},clearRejections:()=>{t.value=[]},isRejected:e=>t.value.some(a=>a.value===e),isSuggested:e=>s.value.some(a=>a.value===e)}}const ye=P("suggestedDiagnosisStore",{state:()=>({patientData:{}}),actions:{setPatientData(){const e=O().formData;e.temperature&&(this.patientData.Temperature=e.temperature),e.blood_sugar&&(this.patientData.BloodSugarmg=e.blood_sugar),e.respiratory_rate&&(this.patientData.RR=e.respiratory_rate),e.oxygen_saturation&&(this.patientData.SatsAIr=e.oxygen_saturation);const a=Y().formValues;a.oxygen_saturation&&(this.patientData.SatsAIr=a.oxygen_saturation),a.respiratory_rate&&(this.patientData.RR=a.respiratory_rate),a.temperature&&(this.patientData.Temperature=a.temperature),a.birth_weight&&(this.patientData.BirthWeight=a.birth_weight),a.admission_weight&&(this.patientData.AdmissionWeight=a.admission_weight),a.saturation_in_oxygen&&(this.patientData.SatsO2=a.saturation_in_oxygen),a.convulsions&&(this.patientData.DangerSigns="Conv"),a.central_cyanosis&&(this.patientData.DangerSigns="Cyan"),a.blood_sugar&&("mmol/L"===a.bloodSugar_unit?this.patientData.BloodSugarmmol=a.blood_sugar:this.patientData.BloodSugarmg=a.blood_sugar);const t=W().formData;"Yes"===t.convulsions&&(this.patientData.Activity="Convulsions",this.patientData.SymptomReviewNeurology="Convulsions"),"Yes"===t.jaundice&&(this.patientData.Jaundice="MJ",this.patientData.YColour="Y"),"Yes"===t.baby_grunting&&(this.patientData.SignsRD="GR",this.patientData.DangerSigns="Grun"),"Yes"===t.nasal_flaring&&(this.patientData.SignsRD="NFL"),"Yes"===t.cyanosis&&(this.patientData.DangerSigns="Cyan"),"Yes"===t.gasping&&(this.patientData.SignsRD="Gasp"),"Yes"===t.difficulty_breathing&&(this.patientData.RespSR="DIB"),"White"!==t.color_of_stools&&"Clay-colored"!==t.color_of_stools&&"Pale"!==t.color_of_stools||(this.patientData.Colour="White",this.patientData.Jaundice="DJ"),"Yes"===t.vomiting||t.is_baby_vomiting,"Yes"===t.vomiting_bile_stained||"Green"===t.color_of_vomit||t.color_of_vomit,"Yes"!==t.talipes&&"Yes"!==t.club_foot||(this.patientData.TalipesSev="Yes"),"Yes"===t.spinal_bifida&&(this.patientData.Spine="NTD"),"Yes"!==t.skin_rash&&"Yes"!==t.pustules&&"Yes"!==t.peeling||(this.patientData.Skin=t.skin_rash||t.pustules||t.peeling||""),t.activity&&(t.activity.toLowerCase().includes("convuls")||t.activity.toLowerCase().includes("seizure"))&&(this.patientData.Activity="Convulsions"),"No"===t.is_baby_passing_urine||"0"===t.number_of_wet_nappies||t.hydration_urination,"Yes"!==t.passage_of_meconium&&"Yes"!==t.stool_passed_meconium||(this.patientData.MecPresent="Yes"),t.abdominal_distension,"Yes"===t.bleeding||t.blood_in_stools,t.does_baby_have_tongue_tie;const i=J();if(i.activityAssessment){const e=i.activityAssessment.toLowerCase();(e.includes("convuls")||e.includes("seizure")||e.includes("fitting"))&&(this.patientData.Activity="Convulsions",this.patientData.DangerSigns="Conv")}if(!0===i.isBabyYellow&&(this.patientData.YColour="Y",this.patientData.Jaundice||(this.patientData.Jaundice="MJ")),!0===i.hasBabyCyanosis&&(this.patientData.DangerSigns="Cyan"),i.isBabyPallorPink,i.hasBabyOedema,i.fontanelleAssessment){const e=i.fontanelleAssessment.toLowerCase();e.includes("bulging")||e.includes("tense"),e.includes("sunken")||e.includes("depressed")}if(i.massInHeadAssessment){const e=i.massInHeadAssessment.toLowerCase();e.includes("caput")||e.includes("cephalohematoma")||e.includes("subgaleal")}if(i.hasCardiacAbnormality,i.heartSoundsAssessment){i.heartSoundsAssessment.toLowerCase().includes("murmur")}if(i.capillaryRefillTime){const e=i.capillaryRefillTime.toLowerCase();e.includes("prolonged")||e.includes(">3")||e.includes("delayed")}if(i.femoralPulses){const e=i.femoralPulses.toLowerCase();e.includes("absent")||e.includes("weak")||e.includes("decreased")}if(!0===i.hasCleftLip&&!0===i.hasCleftPalate)this.patientData.Palate="LipPalate";else if(!0===i.hasCleftLip)this.patientData.Palate="Lip";else if(!0===i.hasCleftPalate)this.patientData.Palate="Cleft";else if(i.cleftAssessment){const e=i.cleftAssessment.toLowerCase();e.includes("lip")&&e.includes("palate")?this.patientData.Palate="LipPalate":e.includes("lip")?this.patientData.Palate="Lip":e.includes("palate")&&(this.patientData.Palate="Cleft")}if(i.genitaliaAssessment){const e=i.genitaliaAssessment.toLowerCase();e.includes("ambiguous")&&(this.patientData.MSKproblems?this.patientData.MSKproblems+="; Ambiguous genitalia":this.patientData.MSKproblems="Ambiguous genitalia"),e.includes("hypospadias")||e.includes("undescended")}if(i.anusAssessment){const e=i.anusAssessment.toLowerCase();e.includes("imperforate")||e.includes("absent")||e.includes("atresia")}if(!0===i.hasMeconiumPassed||i.hasMeconiumPassed,!0===i.hasCongenitalAbnormalities&&i.abnormalitiesNotes){const e=i.abnormalitiesNotes.toLowerCase();e.includes("gastroschisis")?this.patientData.GSCvsOM="GSCH":(e.includes("omphalocele")||e.includes("omphalo"))&&(this.patientData.GSCvsOM="OMPH"),(e.includes("spina bifida")||e.includes("myelomeningocele")||e.includes("meningocele"))&&(this.patientData.Spine="NTD"),(e.includes("talipes")||e.includes("club foot")||e.includes("clubfoot"))&&(this.patientData.TalipesSev="Yes"),(e.includes("skin")||e.includes("nevus")||e.includes("birthmark"))&&(this.patientData.Skin=i.abnormalitiesNotes),(e.includes("limb")||e.includes("digit")||e.includes("polydactyly")||e.includes("syndactyly"))&&(this.patientData.MSKproblems=i.abnormalitiesNotes)}const s=z().formData;if(!0===s.grunting&&(this.patientData.SignsRD="GR",this.patientData.DangerSigns="Grun"),!0===s.nasalFlaring&&(this.patientData.SignsRD="NFL"),!0===s.chestIndrawing&&(this.patientData.SignsRD="CHI"),!0===s.stridor&&(this.patientData.SignsRD="ST"),!0===s.gasping&&(this.patientData.SignsRD="Gasp"),"Yes"!==s.respiratoryDistress&&"Severe"!==s.respiratoryDistress||(this.patientData.RespSR="DIB"),!0===s.colorBlue&&(this.patientData.DangerSigns="Cyan"),!0===s.colorYellow&&(this.patientData.YColour="Y",this.patientData.Jaundice||(this.patientData.Jaundice="MJ")),s.colorPale,s.crt3OrMore,!0===s.femoralPulseWeak||s.femoralPulseDifficult,s.murmurExtraSounds,!0===s.abdomenWallDefect&&s.abdomenSummaryNotes){const e=s.abdomenSummaryNotes.toLowerCase();e.includes("gastroschisis")?this.patientData.GSCvsOM="GSCH":(e.includes("omphalocele")||e.includes("omphalo"))&&(this.patientData.GSCvsOM="OMPH")}if(s.pruneBellySyndrome,s.abdomenDistended,s.hepatomegaly,s.splenomegaly,!0===s.umbilicusBleeding||s.umbilicusRedSkin,s.umbilicalHernia,!0===s.genitaliaAmbiguous&&(this.patientData.MSKproblems?this.patientData.MSKproblems+="; Ambiguous genitalia":this.patientData.MSKproblems="Ambiguous genitalia"),!0===s.genitaliaMaleAbnormal||s.genitaliaFemaleAbnormal,s.anusImperforate,s.toneAssessment){const e=s.toneAssessment.toLowerCase();e.includes("hypotonic")||e.includes("floppy")||e.includes("decreased"),e.includes("hypertonic")||e.includes("increased")||e.includes("rigid")}if("Absent"===s.suckReflex||s.suckReflex,"Absent"===s.MoreReflex||s.MoreReflex,"Yes"===s.birthAsphyxiaSuspected){const e={thompsonRespirationScore:parseInt(s.thompsonRespirationScore||"0"),thompsonSuckScore:parseInt(s.thompsonSuckScore||"0"),thompsonMoroScore:parseInt(s.thompsonMoroScore||"0"),thompsonGraspScore:parseInt(s.thompsonGraspScore||"0"),thompsonFontanelleScore:parseInt(s.thompsonFontanelleScore||"0"),thompsonToneScore:parseInt(s.thompsonToneScore||"0"),thompsonConsciousnessScore:parseInt(s.thompsonConsciousnessScore||"0"),thompsonFitsScore:parseInt(s.thompsonFitsScore||"0"),thompsonPostureScore:parseInt(s.thompsonPostureScore||"0")};this.patientData.ThompScore=e.thompsonRespirationScore+e.thompsonSuckScore+e.thompsonMoroScore+e.thompsonGraspScore+e.thompsonFontanelleScore+e.thompsonToneScore+e.thompsonConsciousnessScore+e.thompsonFitsScore+e.thompsonPostureScore,this.patientData.ThompScore>=6&&(this.patientData.AdmReason="NE")}s.musculoskeletalDeformities&&s.musculoskeletalDeformities.length>0&&s.musculoskeletalDeformities.forEach(e=>{const a=e.toLowerCase();(a.includes("talipes")||a.includes("club foot")||a.includes("clubfoot"))&&(a.includes("correctable")||a.includes("mild")||a.includes("flexible")?this.patientData.TalipesSev="Yes":a.includes("rigid")||a.includes("severe")||a.includes("fixed")?this.patientData.TalipesSev="No":this.patientData.TalipesSev="Yes"),(a.includes("spina bifida")||a.includes("myelomeningocele")||a.includes("meningocele")||a.includes("neural tube"))&&(this.patientData.Spine="NTD"),a.includes("hip")&&(a.includes("clunk")||a.includes("disloc"))&&(this.patientData.Ortolani="Yes"),(a.includes("limb")||a.includes("digit")||a.includes("polydactyly")||a.includes("syndactyly")||a.includes("fracture")||a.includes("erb")||a.includes("brachial plexus"))&&(this.patientData.MSKproblems?this.patientData.MSKproblems+=`; ${e}`:this.patientData.MSKproblems=e)}),s.skinFindings&&s.skinFindings.length>0&&(this.patientData.Skin=s.skinFindings.join("; ")),!0===s.unequalAirEntry||s.unilateralCrackles,s.bilateralCracklesWheeze;const n=$().formData;if(n.presenting_complaints&&n.presenting_complaints.length>0&&n.presenting_complaints.forEach(e=>{var a;switch(e){case"convulsions":this.patientData.Activity="Convulsions",this.patientData.SymptomReviewNeurology="Convulsions",this.patientData.DangerSigns="Conv",this.patientData.AdmReason="Convulsions";break;case"cyanosis":this.patientData.DangerSigns="Cyan";break;case"jaundice":this.patientData.YColour="Y",this.patientData.Jaundice||(this.patientData.Jaundice="MJ"),null!==(a=n.symptom_severity)&&void 0!==a&&a.toLowerCase().includes("severe")&&(this.patientData.Jaundice="DJ");break;case"apnoea":this.patientData.RespSR="Apn";break;case"difficulty_breathing":this.patientData.RespSR="DIB";break;case"fever":case"hypothermia":case"poor_feeding":case"not_tolerating_feeds":case"vomiting":case"abdominal_distension":case"diarrhoea":case"umbilical_discharge":case"eye_discharge":case"bleeding":case"pallor":break;case"lethargy":this.patientData.Activity&&"Convulsions"===this.patientData.Activity||(this.patientData.Activity="Lethargy");break;case"irritability":this.patientData.Activity&&"Convulsions"===this.patientData.Activity||(this.patientData.Activity="Irritable");break;case"skin_rash":this.patientData.Skin?this.patientData.Skin+="; Rash noted on presentation":this.patientData.Skin="Rash noted on presentation";break;default:console.warn(`Unhandled presenting complaint: ${e}`)}}),n.detailed_assessment_notes){var o;const e=n.detailed_assessment_notes.toLowerCase();(e.includes("orange")||e.includes("deep yellow"))&&this.patientData.Jaundice,(e.includes("bile")||e.includes("green")||e.includes("bilious"))&&null!==(o=n.presenting_complaints)&&void 0!==o&&o.includes("vomiting"),e.includes("status epilepticus")||e.includes("continuous"),e.includes("grunting")&&!this.patientData.SignsRD&&(this.patientData.SignsRD="GR",this.patientData.DangerSigns="Grun"),e.includes("nasal flaring")&&!this.patientData.SignsRD&&(this.patientData.SignsRD="NFL"),e.includes("chest indrawing")&&!this.patientData.SignsRD&&(this.patientData.SignsRD="CHI"),(e.includes("maternal diabetes")||e.includes("diabetic mother"))&&(this.patientData.PregConditions="DM"),(e.includes("maternal hiv")||e.includes("hiv positive mother"))&&(this.patientData.MatHIVtest=!0,this.patientData.HIVtestResult="R"),e.includes("prom")||e.includes("prolonged rupture"),e.includes("meconium")&&e.includes("stained")&&(this.patientData.MecPresent="Yes"),(e.includes("birth asphyxia")||e.includes("poor apgar")||e.includes("resuscitation"))&&(this.patientData.AdmReason="NE"),e.includes("gastroschisis")&&(this.patientData.GSCvsOM="GSCH"),e.includes("omphalocele")&&(this.patientData.GSCvsOM="OMPH"),(e.includes("spina bifida")||e.includes("myelomeningocele"))&&(this.patientData.Spine="NTD"),(e.includes("talipes")||e.includes("club foot"))&&(this.patientData.TalipesSev="Yes"),e.includes("cleft lip")?e.includes("palate")?this.patientData.Palate="LipPalate":this.patientData.Palate="Lip":e.includes("cleft palate")&&(this.patientData.Palate="Cleft")}if(n.symptom_onset_time){const e=n.symptom_onset_time.toLowerCase();e.includes("birth")||e.includes("delivery")||e.includes("immediately")}if(n.symptom_severity){const e=n.symptom_severity.toLowerCase();(e.includes("severe")||e.includes("critical"))&&"MJ"===this.patientData.Jaundice&&(this.patientData.Jaundice="DJ"),e.includes("mild"),e.includes("moderate")}n.is_readmission},resetPatientData(){this.patientData={}}},persist:!0}),De={class:"systems-suggestions-panel"},xe={class:"diagnosis-section"},Se={class:"diagnosis-section"},we={key:0,class:"validation-error"},ke={class:"suggestion-instruction"},Ce={key:0,class:"pending-review-notice"},_e={class:"suggested-diagnosis-section"},Re={class:"suggested-title"},Ae={key:0,class:"suggestion-count-badge"},Pe={key:0,class:"empty-suggestions"},He=["onClick","aria-label","onKeydown"],Me={class:"suggestion-content"},Ie={class:"suggestion-label"},Te={class:"suggestion-details"},Le=["onClick","title","aria-label"],Be={key:0,class:"rejected-diagnosis-section"},je={class:"rejected-content"},Ve={class:"rejected-label"},Ne={class:"rejected-details"},Ye=["onClick","title","aria-label"],Ee=i(c({__name:"SystemsSuggestions",setup(e,{expose:a}){const t=ue(),i=ye();i.resetPatientData(),i.setPatientData();const s=k(()=>i.patientData);S({Gestation:30.5,BirthWeight:1200,AdmissionWeight:1200,Age:5,Temperature:31.5,RR:65,SatsAIr:95,SatsO2:98,DangerSigns:"Cyan",SignsRD:"GR",RespSR:"",SymptomReviewNeurology:"",Activity:"",AdmReason:"",EDLIZSummaryTableScore:.95,BloodSugarmmol:2,BloodSugarmg:36,HypoSymptoms:!0,PregConditions:"",ANSteroids:"N",ThompScore:0,Jaundice:"",YColour:"N",Colour:"",GSCvsOM:"",Palate:"",Spine:"",Presentation:"",MatComorbidities:"",MSKproblems:"",Skin:"",Ortolani:"No",TalipesSev:"",MecPresent:"No",MatHIVtest:!0,HIVtestResult:"N",HAART:"N",LengthHAART:""});const{suggestedDiagnoses:n,rejectedDiagnoses:o,acceptSuggestion:l,rejectSuggestion:r,undoReject:d}=fe(s),c=S(null),u=k(()=>t.workingDiagnosis?[t.workingDiagnosis]:[]),b=()=>{t.setWorkingDiagnosis(null),c.value=null},f=e=>{t.removeDifferentialDiagnosis(e),c.value=null},w=e=>{t.setDifferentialDiagnoses(e),c.value=null},C=e=>{l(e),c.value=null};return a({validateForm:function(){const e={};if(!!!t.workingDiagnosis){const a="A Primary Diagnosis (Working Diagnosis) must be confirmed before reviewing and submitting the final diagnosis.";c.value=a,e.primaryDiagnosisRequired=a,console.error("Validation Error: Primary Diagnosis removed or missing at review stage.")}if(n.value.length>0){const a=n.value.length,t=`You have ${a} unreviewed suggestion${a>1?"s":""}: ${n.value.map(e=>e.label).join(", ")}. Please either add ${a>1?"them":"it"} to your differential diagnosis or reject ${a>1?"them":"it"} before proceeding.`;c.value=t,e.unreviewedSuggestions=t,console.error(`Validation Error: ${a} unreviewed suggestion(s) remaining.`,n.value)}return 0===Object.keys(e).length&&(c.value=null,console.log("Validation Success: All suggestions reviewed and working diagnosis confirmed.")),Object.keys(e).length>0?e:null}}),(e,a)=>(g(),p("div",De,[h("div",xe,[a[0]||(a[0]=h("h3",{class:"diagnosis-section-title"},"Your Selected Working Diagnosis",-1)),v(ce,{items:u.value,"allow-dragging":!1,onRemoveItem:b},null,8,["items"])]),h("div",Se,[a[1]||(a[1]=h("h3",{class:"diagnosis-section-title"},"Your Selected Differential Diagnosis",-1)),v(ce,{items:x(t).differentialDiagnoses,"is-differential":!0,"allow-dragging":!0,onRemoveItem:f,"onUpdate:items":w},null,8,["items"]),c.value?(g(),p("div",we,D(c.value),1)):m("",!0)]),h("p",ke,[a[2]||(a[2]=y(" Please consider the suggested diagnoses below. ",-1)),a[3]||(a[3]=h("strong",null,"Click on a suggestion to add it to your differential diagnosis",-1)),a[4]||(a[4]=y(", or click the âŒ button to reject it. ",-1)),x(n).length>0?(g(),p("span",Ce," âš ï¸ You must review all "+D(x(n).length)+" suggestion(s) before proceeding. ",1)):m("",!0)]),h("div",_e,[h("h3",Re,[a[5]||(a[5]=y(" Suggested Diagnosis ",-1)),x(n).length>0?(g(),p("span",Ae,D(x(n).length)+" pending ",1)):m("",!0)]),0===x(n).length?(g(),p("div",Pe,[...a[6]||(a[6]=[h("p",null,"âœ“ All suggestions have been reviewed",-1)])])):m("",!0),(g(!0),p(I,null,T(x(n),e=>(g(),p("div",{key:e.value,class:"suggestion-item",onClick:a=>C(e),role:"button",tabindex:"0","aria-label":`Add ${e.label} to differential diagnosis`,onKeydown:[L(a=>C(e),["enter"]),L(B(a=>C(e),["prevent"]),["space"])]},[h("div",Me,[h("p",Ie,[a[7]||(a[7]=h("span",{class:"add-indicator"},"+",-1)),y(" "+D(e.label),1)]),h("p",Te,D(e.details),1)]),h("button",{onClick:B(a=>x(r)(e),["stop"]),class:"suggestion-action-button reject-button",title:`Reject ${e.label}`,"aria-label":`Reject ${e.label}`},[...a[8]||(a[8]=[h("span",{class:"cross-icon"},"âŒ",-1)])],8,Le)],40,He))),128))]),x(o).length>0?(g(),p("div",Be,[a[10]||(a[10]=h("h3",{class:"rejected-title"},"Rejected Diagnosis",-1)),(g(!0),p(I,null,T(x(o),e=>(g(),p("div",{key:e.value,class:"rejected-item"},[h("div",je,[h("p",Ve,D(e.label),1),h("p",Ne,D(e.details),1)]),h("button",{onClick:a=>x(d)(e),class:"suggestion-action-button undo-button",title:`Restore ${e.label}`,"aria-label":`Restore ${e.label} to suggestions`},[...a[9]||(a[9]=[h("span",{class:"undo-icon"},"â†»",-1)])],8,Ye)]))),128))])):m("",!0)]))}}),[["__scopeId","data-v-61bed52f"]]),Ge={class:"diagnosis-summary-panel"},Oe={class:"summary-section"},We={class:"diagnosis-list"},Je={class:"diagnosis-item primary-item"},ze={class:"summary-section"},$e={class:"diagnosis-list"},Fe={key:0,class:"no-data-item"},Ue=i(c({__name:"DiagnosisSummary",setup(e){const a=ue(),t=k(()=>{var e;return(null===(e=a.workingDiagnosis)||void 0===e?void 0:e.label)||"(None selected)"}),i=k(()=>a.differentialDiagnoses);return(e,a)=>(g(),p("div",Ge,[h("div",Oe,[a[0]||(a[0]=h("h2",{class:"section-title"},"Primary Diagnosis",-1)),h("div",We,[h("p",Je,D(t.value),1)])]),h("div",ze,[a[1]||(a[1]=h("h2",{class:"section-title"},"Differential Diagnosis",-1)),h("div",$e,[(g(!0),p(I,null,T(i.value,e=>(g(),p("p",{key:e.value,class:"diagnosis-item differential-item"},D(e.label),1))),128)),i.value.length?m("",!0):(g(),p("p",Fe," (None selected) "))])])]))}}),[["__scopeId","data-v-60387580"]]);class qe extends r{constructor(e,a){super(e,41,a)}}class Ke extends r{constructor(a,t){super(a,41,t),e(this,"diagnosis_service",void 0),e(this,"computeParentObservation",async e=>({tag:e,obs:await this.diagnosis_service.buildValueCoded(e,e)})),e(this,"childObservation",async e=>await this.diagnosis_service.buildValueCoded(e,e)),this.diagnosis_service=new qe(a,t)}async ensureEncounterExists(){if(this.encounterID)return;const e=await this.diagnosis_service.createEncounter();if(!e)throw new Error("Failed to create encounter");if(this.encounterID=e.encounter_id,e.patient_id!==this.patientID)throw new Error("Encounter created for the wrong patient! Context inconsistency detected.")}async onSubmit(e){await this.ensureEncounterExists(),this.saveObservationList(e)}}const Ze=async e=>{try{const a=ue();if(!a.workingDiagnosis)throw l("Diagnosis is required"),new Error("Diagnosis is required");const t={primaryDiagnosisObservation:await e.computeParentObservation("Primary diagnosis")},i=await e.childObservation(a.workingDiagnosis.value);if(!i)throw l("Primary diagnosis observations are required"),new Error("Primary diagnosis observations are required");i&&(t.primaryDiagnosisObservation.obs.child=[i]),await e.onSubmit([t.primaryDiagnosisObservation.obs]),a.setWorkingDiagnosis(null),console.log("PrimaryDiagnosisData",t)}catch(a){throw a}},Qe=async e=>{try{const a=ue(),t={secondaryDiagnosisObservation:await e.computeParentObservation("Secondary diagnosis")},i=a.differentialDiagnoses.map(async a=>await e.childObservation(a.value)),s=await Promise.all(i);if(!(s.length>0))return void console.log("No secondary diagnoses to save.");t.secondaryDiagnosisObservation.obs.child=s,await e.onSubmit([t.secondaryDiagnosisObservation.obs]),a.setDifferentialDiagnoses([]),console.log("SecondaryDiagnosisData",t)}catch(a){throw a}};a("default",c({__name:"Diagnosis",setup(e){const a=S("1"),t=j(),i=[{title:"Diagnosis",value:"1",component:ve},{title:"Systems Suggestions",value:"2",component:Ee},{title:"Summary",value:"3",component:Ue}],r=S(i.map((e,a)=>({title:e.title,number:a+1,checked:!1,class:0===a?"open_step common_step":"common_step",last_step:a===i.length-1?"last_step":""}))),c=e=>{e&&e.value&&r.value.forEach((a,t)=>{e.value===(t+1).toString()?(a.class="open_step common_step",a.checked=!1):t<parseInt(e.value)-1?(a.class="common_step color_white",a.checked=!0):(a.class="common_step",a.checked=!1)})},u=e=>e===i.length-1?async()=>{await(async()=>{try{const e=s(),{patient:a}=H(e),t=n(),i=new Ke(a.value.patientID,t.user_ID);await Promise.all([Ze(i),Qe(i)]),console.log("SUCCESS: All Diagnosis sections saved successfully!"),o("Diagnosis saved successfully")}catch(e){console.error("FAILED to save diagnosis:",e),l("Failed to save diagnosis. Please try again.")}})(),t.push("/neonatal/checkpoint")}:()=>Promise.resolve();return(e,t)=>(g(),C(x(N),{class:"neonatal-enrollment-page"},{default:f(()=>[v(d),v(x(V),{fullscreen:!0},{default:f(()=>[v(E,{wizardData:r.value,StepperData:i,stepperTitle:"General Examination",openStepper:a.value,backUrl:"/patientProfile",getSaveFunction:u,onUpdateStatus:c,"flow-type":"enrollment","show-componet-title":!0},null,8,["wizardData","openStepper"])]),_:1})]),_:1}))}}))}}})}();
