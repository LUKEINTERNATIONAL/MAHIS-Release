import{d as U,ap as V,r as _,c as b,a as F,H as P,O as T,f as H,J as h,l as a,u as n,a4 as L,k as t,bT as E,dm as g,p as J,K,aU as z,bg as R,a7 as W}from"./vendor-BataJFSH.js";import{aT as Y,u as $,T as j,M as l,o as q,ai as G,w as Q,bJ as X,S as Z,t as S,K as tt,_ as at}from"../index-CYcjB3lE.js";import{D as et}from"./DemographicBar-_VCWSR3C.js";import{u as nt,L as ot,N as st}from"./NextAppointmentModal-CCaQ6GYe.js";import{S as it}from"./SaveProgressModal-BPbswCru.js";import{a as ct}from"./formatServerData-CrPFhp8u.js";import"./lodash-NJiRuGo9.js";import"./apexcharts-BVd6_RNM.js";import"./BasicForm-BGQiOLaa.js";import"./DateInputField-CuXM8Muc.js";class lt extends Y{constructor(i,o){super(i,7,o)}}const rt={class:"main-container"},pt={class:"status-card"},ut={class:"back-wrapper"},dt={class:"appointment-info"},mt={class:"icon-circle"},vt={class:"text-group"},ft={class:"action-grid"},_t={class:"grid-item main-action"},bt={class:"grid-item"},ht={class:"grid-item"},gt={class:"landing-wrapper"},St=U({__name:"ANCHome",props:{backBtn:{default:"Back to profile"},backUrl:{default:""},contact:{default:""}},setup(r){const i=r,o=V(),d=nt(),C=$(),c=_(!1),p=_(""),m=b(()=>d.nextAppointmentDate),v=b(()=>C.patient),k=()=>{i.backUrl?o.push(i.backUrl):q(it)},A=async()=>{const s=await G.getFirstObsValue(v.value.patientID,"Appointment date","value_text");p.value=s},w=async()=>[...await ct(m.value)],x=async()=>{if(m.value.length>=0){const s=Z.getUserID(),e=new lt(v.value.patientID,s);if(!await e.createEncounter())return S("Unable to create appointment date encounter");if(!await e.saveObservationList(await w()))return S("Unable to create date!");tt("Client has been scheduled for next contact")}},D=async()=>{if(!await d.validate()){Q("Next appointment date has errors");return}await x(),u(),await o.push("ANCHome"),await X()},N=()=>{u()},B=()=>{M()},M=()=>{c.value=!c.value},u=()=>{c.value=!1},O=()=>{o.push("/contacts")},I=()=>{o.push("/contact")};return F(()=>{A()}),(s,e)=>{const f=P("ion-icon");return H(),T(n(W),null,{default:h(()=>[a(j),a(n(L),{fullscreen:!0,class:"ion-padding-bottom"},{default:h(()=>[a(et),t("div",rt,[t("div",pt,[t("div",ut,[a(l,{name:r.backBtn,iconSlot:"start",fill:"clear",icon:n(E),onClick:e[0]||(e[0]=y=>k()),class:"back-btn-custom"},null,8,["name","icon"])]),t("div",dt,[t("div",mt,[a(f,{icon:n(g)},null,8,["icon"])]),t("div",vt,[e[1]||(e[1]=t("span",{class:"label"},"Next Appointment",-1)),t("span",{class:J(["value",{"no-date":!p.value}])},K(p.value||"Not scheduled"),3)])])]),t("div",ft,[t("div",_t,[a(l,{name:"New ANC Contact",iconSlot:"start",fill:"solid",icon:n(z),onClick:I,class:"cta-button"},null,8,["icon"])]),t("div",bt,[a(l,{name:"View Contacts",iconSlot:"start",fill:"outline",icon:n(R),onClick:O,class:"sub-button"},null,8,["icon"])]),t("div",ht,[a(l,{name:"Schedule Contact",iconSlot:"start",fill:"outline",icon:n(g),onClick:B,class:"sub-button"},null,8,["icon"])])]),e[2]||(e[2]=t("div",{class:"content-divider"},[t("span",null,"Patient Overview")],-1)),t("div",gt,[a(ot)])]),a(st,{isOpen:c.value,title:"",closeModalFunc:u,onYes:D,onNo:N},null,8,["isOpen"])]),_:1})]),_:1})}}}),It=at(St,[["__scopeId","data-v-cd8ea696"]]);export{It as default};
