import{d as b,bh as $,cr as x,r,w as l,e as n,f as i,l as S,H as T,k as p,F as w,T as H,I as m,u as E,bl as _,cY as F}from"./vendor-CJ2tyHrn.js";import{u as q,H as o,_ as k}from"../index-CPIhguZJ.js";import"./lodash-NJiRuGo9.js";import"./apexcharts-BtvCa6MI.js";const M={class:"table-responsive"},B=b({__name:"MedicationsHistory",setup(I){const f=q(),{patient:u}=$(f),y=x(),D=r(null),e=r([]),h=r(["Drug Name","Quantity","Dose","Frequency","Start Date","Expire Date","Instructions"]),v=r({responsive:!0,select:!1,layout:{topStart:"",topEnd:"search",bottomStart:"info",bottomEnd:"paging"},ordering:!1}),A=(a,t)=>{try{const s=new Date(a),N=new Date(t),g=Math.abs(N.getTime()-s.getTime()),d=Math.ceil(g/(1e3*60*60*24));return"".concat(d," day").concat(d!==1?"s":"")}catch(s){return"N/A"}},c=async()=>{try{e.value=[];const a=u.value.MedicationOrder;a&&(a.saved&&Array.isArray(a.saved)&&a.saved.forEach(t=>{e.value.push([t.drug_name||"N/A",t.amountToDispense||t.quantity||"N/A","".concat(t.dose||"N/A"," ").concat(t.units||""),t.frequency||"N/A",t.start_date?o.toStandardHisDisplayFormat(t.start_date):"N/A",t.expire_date?o.toStandardHisDisplayFormat(t.expire_date):"N/A","".concat(t.drug_name,": ").concat(t.dose," ").concat(t.units," ").concat(t.frequency," for ").concat(A(t.start_date,t.expire_date))])}),a.unsaved&&Array.isArray(a.unsaved)&&a.unsaved.forEach(t=>{e.value.push([t.drug_name||"N/A",t.amountToDispense||t.quantity||"N/A","".concat(t.dose||"N/A"," ").concat(t.units||""),t.frequency||"N/A",t.start_date?o.toStandardHisDisplayFormat(t.start_date):"N/A",t.auto_expire_date?o.toStandardHisDisplayFormat(t.auto_expire_date):"N/A",t.instructions||"N/A"])}))}catch(a){console.error("Error updating medication data:",a),e.value=[]}_.use(F)};return l(()=>y,async()=>{await c()},{deep:!0}),l(u,async()=>{await c()},{deep:!0,immediate:!0}),(a,t)=>(i(),n("div",M,[S(E(_),{ref_key:"dataTable",ref:D,options:v.value,data:e.value,class:"display nowrap modern-table",width:"100%"},{default:T(()=>[p("thead",null,[p("tr",null,[(i(!0),n(w,null,H(h.value,s=>(i(),n("th",{key:s},m(s),1))),128))])])]),_:1},8,["options","data"])]))}}),L=k(B,[["__scopeId","data-v-c75b064a"]]);export{L as default};
