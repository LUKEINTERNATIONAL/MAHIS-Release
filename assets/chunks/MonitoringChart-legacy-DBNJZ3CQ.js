System.register(["./vendor-legacy-IGuUoRYO.js","../index-legacy-CPN3hcLt.js","./DemographicBar-legacy-BDCWCL25.js","./ReusableDataTable-legacy-Djg_P2yl.js","./useRespiratoryRateOxygenForm-legacy-WHgsRlZI.js","./useFormWizard-legacy-RaVPiAQl.js","./ComplicationsStore-legacy-B2RTryDZ.js","./nonPharmaTherapyStore-legacy-kzbjJNTA.js","./lodash-legacy-pOOc9Efu.js","./formatServerData-legacy-C4TFvAc3.js","./usePatientProfile-legacy-VQzP8WGN.js","./apexcharts-legacy-w_Qe4jnt.js","./drug_prescription_service-legacy-BvHSYXdJ.js","./patient_diagnosis_service-legacy-WoFtATc_.js","./Registration-legacy-CvR6Zs0X.js","./useSetRegistrationValues-legacy-BU4Dp69e.js","./useLocation-legacy-DYREuazP.js","./vaccines_service-legacy-Bs1jd4gJ.js","./sms_service-legacy-CMNHGQiD.js","./EIRreportsStore-legacy-apL3S7So.js","./Export-legacy-Ba5zfkL5.js","./user_role_management-legacy-s4weOEFd.js","./useNeonatalEnrollmentStore-legacy-DhUIuEvW.js","./enrollment-legacy-BWFKsMdA.js","./Outcome-legacy-va99WsQ3.js","./wardsStore-legacy-2yXvvg-c.js"],function(e,t){"use strict";var n,a,i,l,o,s,c,r,u,d,v,m,p,g,y,h,b,f,_,S,D,w,F,T,k,M,I,x,j,P,C,R,A,B,O,L,E,V,N,z,H,U,G,W,$,q,J,Q,K,X,Y,Z,ee,te,ne,ae,ie,le,oe,se,ce,re,ue,de,ve,me,pe,ge,ye,he;return{setters:[e=>{n=e.c,a=e.d,i=e.r,l=e.Q,o=e.f,s=e.u,c=e.bH,r=e.H,u=e.l,d=e.e,v=e.T,m=e.k,p=e.m,g=e.F,y=e.b7,h=e.G,b=e.a3,f=e.aF,_=e.cr,S=e.bh,D=e.w,w=e.a,F=e.L,T=e.i,k=e.bU,M=e.v,I=e.bq,x=e.a9},e=>{j=e.n,P=e.C,C=e.F,R=e.ba,A=e.u,B=e.bb,O=e.bc,L=e.b2,E=e.bd,V=e.e,N=e.b3,z=e.i,H=e.a9,U=e.f,G=e.T,W=e.a2,$=e.H,q=e.b5,J=e.be,Q=e.J,K=e.bf,X=e.t,Y=e.aq,Z=e.G,ee=e.bg,te=e.ab,ne=e.S},e=>{ae=e.D},e=>{ie=e.R},e=>{le=e.u,oe=e.a,se=e.b},e=>{ce=e.u,re=e._},e=>{ue=e.u},e=>{de=e.s,ve=e.c,me=e.u},e=>{pe=e.l},e=>{ge=e.f,ye=e.a},e=>{he=e.u},null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],execute:function(){const t=()=>{const e=n(()=>[{componentType:"multiSelectInputField",header:"Airway intervention(s)",name:"airway_interventions",isMultiple:!0,trackBy:"id",icon:j.search,options:[{id:1,name:"Positioning"},{id:2,name:"Suctioning"},{id:3,name:"Airway Adjuncts"},{id:4,name:"Advanced Airway"}]},{componentType:"multiSelectInputField",header:"Breathing intervention(s)",name:"breathing_interventions",isMultiple:!0,trackBy:"id",icon:j.search,options:[{id:1,name:"Oxygen Therapy"},{id:2,name:"Inhaled Medications"},{id:3,name:"Chest Decompression"},{id:4,name:"Mechanical Ventilation"}]},{componentType:"multiSelectInputField",header:"Circulation intervention(s)",name:"circulation_interventions",isMultiple:!0,trackBy:"id",icon:j.search,options:[{id:1,name:"IV/IO Access"},{id:2,name:"Fluid Resuscitation"},{id:3,name:"Medications"},{id:4,name:"Blood Products"}]},{componentType:"multiSelectInputField",header:"Disability intervention(s)",name:"disability_interventions",isMultiple:!0,trackBy:"id",icon:j.search,options:[{id:1,name:"Blood Glucose Administration"},{id:2,name:"Seizure Management"},{id:3,name:"Pain Management"}]},{componentType:"multiSelectInputField",header:"Exposure intervention(s)",name:"exposure_interventions",isMultiple:!0,trackBy:"id",icon:j.search,options:[{id:1,name:"Warming Measures"},{id:2,name:"Cooling Measures"},{id:3,name:"Thermal Protection"},{id:4,name:"Electrical Protection"}]}]);return{fluidsFormSection:n(()=>[{componentType:"Dashes"},{componentType:"multiSelectInputField",header:"Intake Fluid Type",name:"intake_fluid_type",isMultiple:!0,trackBy:"id",icon:j.search,grid:{s:"4"},options:[{id:1,name:"Normal Saline"},{id:2,name:"Ringer's Lactate"},{id:3,name:"Dextrose Solution"},{id:4,name:"Blood Products"}]},{componentType:"multiSelectInputField",header:"Output Fluid Type",name:"output_fluid_type",isMultiple:!0,trackBy:"id",icon:j.search,grid:{s:"4"},options:[{id:1,name:"Urine"},{id:2,name:"Vomitus"},{id:3,name:"Drainage"},{id:4,name:"Blood Loss"}]},{componentType:"inputField",header:"Fluid Balance",name:"fluid_balance",unit:"ml",grid:{s:"4"}},{componentType:"inputField",header:"Intake Fluid Amount",name:"intake_fluid_amount",unit:"ml",grid:{s:"4"}},{componentType:"inputField",header:"Output Fluid Amount",name:"output_fluid_amount",unit:"ml",grid:{s:"4"}}]),interventionsFormSection:e}},be=a({__name:"Interventions",setup(e){i(null);const a=i([]),h=t().interventionsFormSection,b=t().fluidsFormSection,f=i([n(()=>b.value)]);return(e,t)=>(o(),l(s(c),null,{default:r(()=>[u(s(y),null,{default:r(()=>[u(P,{formData:s(h),ref:"formRef"},null,8,["formData"]),(o(!0),d(g,null,v(f.value,(e,i)=>(o(),d("div",{key:i,style:{display:"flex","align-items":"center"}},[u(P,{formData:e.value,ref_for:!0,ref:e=>((e,t)=>{e&&(a.value[t]=e)})(e,i)},null,8,["formData"]),m("div",null,[u(C,{onClick:e=>(e=>{f.value.length>1&&(f.value.splice(e,1),a.value.splice(e,1))})(i),fill:"clear",icon:s(j).minus,disabled:1===f.value.length},null,8,["onClick","icon","disabled"]),i===f.value.length-1?(o(),l(C,{key:0,onClick:t[0]||(t[0]=e=>{f.value.push(n(()=>b.value))}),fill:"clear",icon:s(j).plus},null,8,["icon"])):p("",!0)])]))),128))]),_:1})]),_:1}))}}),fe=a({__name:"Medications",setup(e){const t=["Medication","Name","Dose","Frequency","Duration","Formulation","Prescriber"],n={responsive:!0,ordering:!1,layout:{topStart:"buttons",topEnd:"",bottomStart:"info",bottomEnd:"paging"},buttons:[{text:" <b> Print Medication </b>",className:"add-test text-white",action:async()=>{}}]},a=[["Antibiotic","Amoxicillin","500 mg","3 times a day","7 days","Capsule","Dr. Smith"],["Analgesic","Paracetamol","650 mg","4 times a day","5 days","Tablet","Dr. Johnson"],["Antihypertensive","Lisinopril","10 mg","Once daily","30 days","Tablet","Dr. Lee"]];return(e,i)=>{const d=h("ion-card-title");return o(),l(s(c),null,{default:r(()=>[u(s(y),null,{default:r(()=>[u(d,null,{default:r(()=>[...i[0]||(i[0]=[b("Prescribed Medication",-1)])]),_:1}),u(ie,{data:a,headers:t,options:n})]),_:1})]),_:1})}}}),_e=le(),Se=oe(),De=se(),we=n(()=>[{grid:{s:"3"}},{grid:{s:"9"},componentType:"Dashes"},..._e.bloodPressureFormSection.value,{grid:{s:"3"}},{grid:{s:"9"},componentType:"Dashes"},...Se.temperaturePulseRateForm.value,...De.respiratoryRateOxygenForm.value]),Fe=a({__name:"Observations",setup(e){const t=i(null),a=n(()=>[...we.value,{componentType:"Dashes"},{componentType:"inputField",header:"Random Blood Glucose (RBG)",name:"random_blood_glucose",unit:"mg/dL"},{componentType:"inputField",header:"Urine Dipstick - Ketones",name:"urine_dipstick_ketones"},{componentType:"multiSelectInputField",header:"AVPU Scale",name:"avpu_scale",isMultiple:!1,trackBy:"id",icon:j.search,options:[{id:1,name:"Alert"},{id:2,name:"Verbal Response"},{id:3,name:"Pain Response"},{id:4,name:"Unresponsive"}]},{componentType:"inputField",header:"Peak Expiratory Flow Rate (PEFR)",name:"peak_expiratory_flow_rate",unit:"L/min"}]);return(e,n)=>(o(),l(s(c),null,{default:r(()=>[u(s(y),null,{default:r(()=>[u(P,{formData:s(a),ref_key:"formRef",ref:t},null,8,["formData"])]),_:1})]),_:1}))}}),Te={style:{width:"90vw",margin:"0 auto","margin-top":"10px"}},ke={class:"back_profile"};e("default",a({__name:"MonitoringChart",setup(e,{expose:t}){const{onTabBeforeChange:a,currentTabIndex:c}=ce();he();const d=f(),v=_();i([]),i([]),i(!1);const g=i(!0),y=i(!1),h=i(!1),b=n(()=>({text:h.value?"Saving...":"Finish",icon:h.value?"hourglass-outline":"checkmark",hideText:!1,hideIcon:!1,disabled:y.value||h.value})),j=R(),P=A(),ie=B(),le=O();L();const oe=E(),se=V();N();const _e=z(),Se=ue(),De=H(),{patient:we}=S(P),{vitals:Me}=S(j),{investigations:Ie}=S(ie),{diagnosis:xe}=S(le),{substance:je}=S(_e),{selectedNCDMedicationList:Pe}=S(oe),{FootScreening:Ce,visualScreening:Re,cvScreening:Ae}=S(Se),{sessionDate:Be}=S(De),{apiStatus:Oe}=S(U());D(b,(e,t)=>{console.log("Done button options changed:",{from:t,to:e,currentStep:c.value,tabsLength:Ve.value.length}),e.disabled!==(null==t?void 0:t.disabled)&&console.log("Done button "+(e.disabled?"disabled":"enabled")),e.text!==(null==t?void 0:t.text)&&console.log(`Done button text changed from "${null==t?void 0:t.text}" to "${e.text}"`)},{deep:!0}),D(h,(e,t)=>{e!==t&&(console.log(`Saving state changed: ${t} -> ${e}`),e?console.log("Starting save process..."):console.log("Save process completed"))});const Le=e=>{console.log("Done button change received from wizard:",e),e.newOptions.disabled&&console.log("Done button has been disabled"),e.isLastStep&&console.log("User is on the last step, done button should be visible")},Ee=()=>{let e=!1;return He(),h.value&&(e=!0),y.value=e,!e},Ve=i([{title:"Observations",icon:""},{title:"Interventions",icon:""},{title:"Medications",icon:""}]),Ne=i(null),ze=i(null),He=()=>{var e;if(!Ve.value||0===Ve.value.length)return console.log("Tabs not yet initialized"),null;const t=c.value>=0&&c.value<Ve.value.length?c.value:0;switch(null===(e=Ve.value[t])||void 0===e?void 0:e.title){case"Observations":return"Observations";case"Interventions":return"Interventions";case"Medications":return"Medications";default:if(se.NCDActivities.length>0)switch(se.NCDActivities[0]){case"Observations":return"Observations";case"Interventions":return"Interventions";case"Medications":return"Medications"}return null}},Ue=()=>{g.value=!1,setTimeout(()=>{c.value=0,g.value=!0},0)},Ge=()=>{const e=R();e.setVitals(e.getInitialVitals(we.value.ID))},We=async()=>{const e=W(Be.value,"sessionDate","value")||$.sessionDate(),t=q("vitals");for(let a=0;a<Ve.value.length;a++){const i=Ve.value[a];if("Vital Signs"===i.title)Ve.value[a].icon=$e(e,t)?x:"";else if("Risk Assessment"===i.title){const t=q("substanceAbuse");Ve.value[a].icon=$e(e,t)?x:""}else if("Investigations"===i.title){var n;const t=null==we||null===(n=we.value)||void 0===n||null===(n=n.labOrders)||void 0===n?void 0:n.saved,i=null==t?void 0:t.filter(t=>$.toStandardHisFormat(e)===$.toStandardHisFormat(t.order_date));Ve.value[a].icon=(null==i?void 0:i.length)>0?x:""}else if("Diagnosis"===i.title){const t=q("diagnosis");Ve.value[a].icon=$e(e,t)?x:""}else if("Complications Screening"===i.title){const t=q("screening");Ve.value[a].icon=$e(e,t)?x:""}else"Treatment Plan"===i.title&&(Pe.value.length>0?Ve.value[a].icon=J()?x:"":Ve.value[a].icon="")}Ee()},$e=(e,t)=>{const n=new Date(e);return n.setHours(0,0,0,0),t.some(e=>{const t=new Date(e.obs_datetime);return t.setHours(0,0,0,0),t.getTime()===n.getTime()})},qe=async(e,t)=>{var n;const a=null===(n=Ve.value[t])||void 0===n?void 0:n.title;var i,l;e%1==0&&(c.value=e),"Vital Signs"==a&&(null===(i=Ne.value)||void 0===i||i.onSubmit()),"Risk Assessment"==a&&(null===(l=ze.value)||void 0===l||l.onSubmit()),"Complications Screening"==a&&await(async()=>{const e=[],t=await ge(Re.value),n=await ye(Ce.value),a=await ge(Ae.value);var i,l,o,s;t.length>0&&e.push({concept_id:await Y.getConceptID("Visual acuity",!0),value_text:"visual acuity test",obs_datetime:Y.getSessionDate(),child:t}),n.length>0&&e.push({concept_id:await Y.getConceptID("Foot check",!0),value_text:"foot screening",obs_datetime:Y.getSessionDate(),child:n}),a.length>0&&e.push(...a),e.length>0?(null!==(l=(i=null!==(s=(o=we.value).screening)&&void 0!==s?s:o.screening={}).unsaved)&&void 0!==l||(i.unsaved=[]),we.value.screening.unsaved.push(...e),Z("Complications saved successfully")):X("No complications data to save")})(),"Treatment Plan"==a&&await(async()=>{const e=ee();if(!pe.isEmpty(e.selectedMedicalAllergiesList)){const t=te(),n=e.selectedMedicalAllergiesList.map(e=>({concept_id:e.concept_id,obs_datetime:ne.getSessionDate(),value_coded:e.concept_id,location_id:t.facilityLocation.code,value_text:e.name})),a=await de(n);we.value=Object.assign(we.value,a),console.log("Allergies staged successfully:",we.value),e.clearSelectedMedicalAllergiesList()}const t=await ve();we.value=Object.assign(we.value,t);const n=await me().saveNonPharmaTherapyPatientData();we.value=Object.assign(we.value,n)})(),await Q(we.value)},Je=async()=>{h.value=!0;try{await K(),await Q(we.value),d.push("/triageList")}catch(e){console.error("Error saving data:",e),X("Error occurred while saving data. Please try again.")}finally{h.value=!1}};return w(async()=>{0!==se.NCDActivities.length?(ue().resetScreening(),Ve.value=[{title:"Observations",icon:""},{title:"Interventions",icon:""},{title:"Medications",icon:""}],await We(),(void 0===c.value||c.value<0)&&(c.value=0,console.log("Setting initial tab index to 0")),y.value=!1,h.value=!1,Ee()):d.push("patientProfile")}),D(c,async()=>{await Ee()}),D(Me,async()=>{await We()},{deep:!0}),D(we,async()=>{ue().resetScreening(),await We()},{deep:!0}),D(Be,async()=>{await We()},{deep:!0}),D(Ie,async()=>{await We()},{deep:!0}),D(xe,async()=>{await We()},{deep:!0}),D(je,async()=>{await We()},{deep:!0}),D(Pe,async()=>{await We()},{deep:!0}),D(v,async e=>{Ue(),Ge(),Ve.value=[{title:"Observations",icon:""},{title:"Interventions",icon:""},{title:"Medications",icon:""}]},{deep:!0}),D(we,async(e,t)=>{e.ID!=t.ID&&(Ue(),Ge())},{deep:!0}),t({saveData:Je,markWizard:We,refreshWizard:Ue,validateDoneButtonState:Ee}),(e,t)=>(o(),l(s(I),null,{default:r(()=>[u(G),u(s(F),{fullscreen:!0},{default:r(()=>[u(ae),m("div",Te,[g.value?(o(),l(re,{key:0,ref:"wizard",headingTitle:"Monitoring Chart","vertical-tabs":"","navigable-tabs":"","scrollable-tabs":"",startIndex:0,doneButton:b.value,"custom-tabs":Ve.value,beforeChange:s(a),onChange:qe,"onComplete:wizard":t[1]||(t[1]=e=>Je()),onDoneButtonChanged:Le},{default:r(()=>[m("div",null,[m("div",ke,[u(C,{name:"Back to profile",iconSlot:"start",fill:"clear",icon:s(k),"font-weight":"600",onClick:t[0]||(t[0]=e=>{d.push("/patientProfile")})},null,8,["icon"])])]),T(m("div",null,[u(Fe,{ref:"observationsRef"},null,512)],512),[[M,"Observations"==He()]]),T(m("div",null,[u(be,{ref:"interventionsRef"},null,512)],512),[[M,"Interventions"==He()]]),T(m("div",null,[u(fe,{ref:"medicationsRef"},null,512)],512),[[M,"Medications"==He()]])]),_:1},8,["doneButton","custom-tabs","beforeChange"])):p("",!0)])]),_:1})]),_:1}))}}))}}});
