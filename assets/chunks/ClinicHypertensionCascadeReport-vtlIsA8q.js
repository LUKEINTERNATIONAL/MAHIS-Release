import{c7 as g,c8 as y,aF as n,aE as m}from"../index-DZfKDOkt.js";import{P as w}from"./program_report_service-DNDVxuqM.js";import{d as v,r as i,O as C,f as D}from"./vendor-yRLTeOJQ.js";import"./lodash-NJiRuGo9.js";import"./apexcharts-kFb9FTI6.js";const B=v({__name:"ClinicHypertensionCascadeReport",setup(R){const o=i("-"),t=i([]),s=i("Hypertension Cascade Report"),c=[{path:"age_group",label:"Age Group"},{path:"gender",label:"Gender",formatter:g},{path:"due_screening",label:"Due for BP screening",drillable:!0},{path:"screened",label:"Screened for HTN",drillable:!0},{path:"normal_reading",label:"Normal <140/<90",drillable:!0},{path:"mild_reading",label:"Mild 140-159/90-99",drillable:!0},{path:"moderate_reading",label:"Moderate 160-180/100-110",drillable:!0},{path:"severe_reading",label:"Severe >180/>110",drillable:!0},{path:"hydrochlorothiazide_25mg",label:"Hydrochlorothiazide 25mg",drillable:!0},{path:"amlodipine_5mg",label:"Amlodipine 5mg",drillable:!0},{path:"amlodipine_10mg",label:"Amlodipine 10mg",drillable:!0},{path:"captopril_25mg",label:"Captopril 25mg",drillable:!0},{path:"captopril_6_25mg",label:"Captopril 6.25mg",drillable:!0},{path:"captopril_12_5mg",label:"Captopril 12.5mg",drillable:!0},{path:"captopril_50mg",label:"Captopril 50mg",drillable:!0},{path:"enalapril_5mg",label:"Enalapril 5mg",drillable:!0},{path:"enalapril_10mg",label:"Enalapril 10mg",drillable:!0},{path:"atenolol_50mg",label:"Atenolol 50mg",drillable:!0},{path:"atenolol_100mg",label:"Atenolol 100mg",drillable:!0},{path:"nifedipine_10mg",label:"Nifedipine 10mg",drillable:!0},{path:"nifedipine_20mg",label:"Nifedipine 20mg",drillable:!0},{path:"total_regimen",label:"Total (regimen)",drillable:!0}];function b(e){return Object.keys(e).flatMap(r=>Object.keys(e[r]).map(l=>{const d=e[r][l],f=Object.keys(d).reduce((p,u)=>(p[u]=d[u].length,p),{});return{age_group:r,gender:l,...f}})).sort((r,l)=>r.gender<l.gender?-1:r.gender>l.gender?1:r.age_group<l.age_group?-1:r.age_group>l.age_group?1:0)}async function _(e){try{await n.show();const a=new w;if(!(e.dateRange.startDate&&e.dateRange.endDate)){m("Start date and end date required!"),await n.hide();return}a.setStartDate(e.dateRange.startDate),a.setEndDate(e.dateRange.endDate),a.setOccupation(e.occupation),o.value=a.getDateIntervalPeriod();const r=await a.generate("hypertension_report");r?t.value=b(r):t.value=[]}catch(a){console.error(a),m("ERROR! Unable to load report data")}finally{await n.hide()}}function h(e){return"".concat(e.column.label," | ").concat(e.row.age_group," | ").concat(g(e.row.gender))}return(e,a)=>(D(),C(y,{title:s.value,"report-type":"Clinic",columns:c,"drill-title":h,rows:t.value,period:o.value,"use-date-range-filter":"","use-secure-export":"","show-indices":"",onGenerate:_},null,8,["title","rows","period"]))}});export{B as default};
