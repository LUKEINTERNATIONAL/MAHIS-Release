const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./LabOrdersList-BOkaQyJ8.js","./vendor-9T3c-tPq.js","./lodash-NJiRuGo9.js","../vendor.CmTprahb.css","../index-fcpPQh40.js","./apexcharts-qlDaiiMc.js","../index.D3pLehO8.css","./BasicForm-D6FLeA1H.js","./DateInputField-Cb3vPtNb.js","../DateInputField.BYUMEomf.css","../BasicForm.CS8soES6.css","./useUserActivities-HaQbe81Z.js","../LabOrdersList.CHAE01_j.css","./DiagnosesHistory-DQk-WD0K.js","../DiagnosesHistory.CI-6uhvr.css","./AllergiesContraindication-Bq7NK7rh.js","./UpcomingFeature-Co_AAfwh.js","../UpcomingFeature.DBJv9ELz.css","../AllergiesContraindication.DSdMoqwN.css","./VisitsHistory-DpQmgsN9.js","../VisitsHistory.Dz8PKYl3.css","./VitalsMeasurementsSummary-JD6qTPMp.js","../VitalsMeasurementsSummary.Dr2dSJr5.css","./PatientProfile-MCb4ZlTY.js","./DemographicBar-DBq9AUfu.js","../DemographicBar.DtnnoAYr.css","./SaveProgressModal-DklQNfhY.js","../SaveProgressModal.DLXC0SP6.css","./Stepper-C0YpzqTv.js","./NextAppointment-Dr63G3zT.js","./group_validation-CZWswffl.js","./RadiologyStore-DYVYQy9z.js","./formatServerData-C12DovAg.js","./DashBox-Bui9p3xi.js","./previousComplaints-B7OMfM5A.js","../previousComplaints.CaFy6Jya.css","./patient_complaints_service-DHJU6tQI.js","./nonPharmaTherapyStore-CPIA8BYa.js","./drug_prescription_service-DhlI7I6A.js","./patient_diagnosis_service-BqegWREP.js","./user_role_management-BV1gz8FP.js","./ncd_appointment_service-U1bumGhJ.js","../NextAppointment.Bx43K2aq.css","./OPDOutcome-CUXqr9RN.js","./LevelOfConsciousness.vue_vue_type_script_setup_true_lang-CFA9pj1e.js","./Outcome-cfk9uRXb.js","./wardsStore-D2ec8BSr.js","../Outcome.BrkOxEBI.css","../OPDOutcome.DgFcGTjN.css","./VitalsMixin.vue_vue_type_script_lang-zbzmCDZi.js","./TreatmentPlan-BhEREu7_.js","./ComplicationsStore-D9d1LVA8.js","../TreatmentPlan.D-2-rvxn.css","./OPDDiagnosis-D-_knlX-.js","../OPDDiagnosis.BkZ0ABWg.css","./FeatusModal-CMrbLtbW.js","../FeatusModal.Cfk5MYmH.css","./BasicCard-m0TuKzO7.js","../BasicCard.CLPwwedX.css","./PastObstreticHistoryStore-CFG_1I_w.js","../Stepper.B2n3cIUE.css","./WeightHeightChart-Bz-fF4aM.js","./chartjs-mwvbxM87.js","../WeightHeightChart.BZ52GXpK.css","./weightAndHeight-DPz7foqY.js","./customDatePicker-yjvoTiwb.js","../customDatePicker.twJBaIU5.css","../weightAndHeight.CJuqOhq_.css","./vaccines_service-DAmN5Afx.js","./sms_service-Ddj5sHef.js","./EIRreportsStore-uVZgX-zr.js","./Export-BitPCQ4S.js","../vaccines_service.DKZw05E0.css","./barcode-qrcode-reader-HNCe9I3z.js","./stock_service-BGAYe4KR.js","./Registration-ERVZ-mvu.js","./useLocation-DxKMrJ8j.js","./useNeonatalEnrollmentStore-CxYalRxf.js","./enrollment-DU-PLRUa.js","../Registration.DWcKqqrC.css","./AdministerOtherVaccinesStore-wFme3A6k.js","./usePatientProfile-Cz4P5LVY.js","../usePatientProfile.BRwk2gaY.css","../PatientProfile.xh9sFISw.css","./HTSPatientProfile-BCjJzICo.js","../HTSPatientProfile.D35WQABU.css","./NeonatalPatientProfile-7i6Yb7Pe.js","./neonatal_service-BvkeEHO1.js","../NeonatalPatientProfile.BD3bs8tI.css","./AETCPatientProfile-CnIXB5gB.js","./confirm_pregnancy_service-Dl_BNvHM.js","./CPR-BbBz9G1T.js","./useRespiratoryRateOxygenForm-pnk0wrVs.js","../CPR.C4Sa7ms4.css","./tasks-Bkro6424.js","../AETCPatientProfile.BWr2ypdR.css","./BloodPressure-79lCtoR2.js","../BloodPressure.CLAqoSeU.css","./AncEnrollmentModal-BnpFnXEn.js","../AncEnrollmentModal.CLq9tGu0.css","./LabourEnrollmentModal-g5NHeDRC.js","../LabourEnrollmentModal.DgSOWoB_.css","./PNCEnrollmentModal-BsGFtuts.js","../PNCEnrollmentModal.BDNYT6XY.css"])))=>i.map(i=>d[i]);
import{d as xt,r as f,w as ot,O as b,f as u,u as t,br as yt,J as n,l as a,aR as Ke,e as y,dS as _t,Q as c,L as C,aw as Ze,F as Z,aS as Je,ak as Qe,P as bt,$ as S,X as E,aP as Xe,k as o,K as _,cE as ce,bZ as ta,bW as ea,aV as St,z as aa,D as na,a as me,I as sa,G as oa,dT as la,E as ia,N as ra,a3 as Tt,a4 as Vt,bn as ua,a5 as M,a6 as m,p as fe,dU as ne,m as v,b$ as da,a7 as pe,R as ca,ap as ma,cp as fa,aW as Nt,c as gt,H as se,cL as I,dV as pa,c$ as va,am as _a,al as ga,W as oe,dd as ya,de as j,aG as ba,c1 as Ca,aI as le,d0 as Aa,cD as k}from"./vendor-9T3c-tPq.js";import{a8 as lt,_ as Mt,P as it,a9 as Pa,a0 as Ia,m as ve,aa as ka,ab as Da,u as wa,a as Oa,f as Ra,ac as et,T as Ea,w as R,S as at,J as nt,H as G,ad as ht,ae as ie,i as re,af as Na,q as ue,G as K,n as ha,t as st,ag as Sa}from"../index-fcpPQh40.js";import{l as Ta}from"./lodash-NJiRuGo9.js";import{C as Va}from"./confirm_pregnancy_service-Dl_BNvHM.js";import{u as xa}from"./useUserActivities-HaQbe81Z.js";import{u as Ma}from"./usePatientProfile-Cz4P5LVY.js";import{f as La}from"./formatServerData-C12DovAg.js";import{D as $a}from"./DemographicBar-DBq9AUfu.js";import{i as Ua}from"./tasks-Bkro6424.js";const Ba=xt({__name:"ARTCard",props:{patient:{default:{}}},setup(L){const N=L,T=f(!1),D=f({artStartDate:"",arvNumber:"",fileNumber:"",currentOutcome:""}),V=async p=>{T.value=!0;try{const i=await lt.getProgramInformation(p);D.value={artStartDate:(()=>{const[d,$,B]=i.art_start_date.split("/"),z=i.art_start_date.match(/n\/a/i)?"":"(".concat(aa(lt.getSessionDate()).diff("".concat(B,"-").concat($,"-").concat(d),"months")," Month(s))");return"".concat(i.art_start_date," ").concat(z)})(),arvNumber:"".concat(i.arv_number," | Regimen: ").concat(i.current_regimen),fileNumber:i.filing_number.number,currentOutcome:i.current_outcome}}catch(i){console.error("Error fetching ART information:",i)}finally{T.value=!1}};return ot(()=>N.patient,p=>{p&&p.patientID?V(p.patientID):D.value={artStartDate:"--",arvNumber:"--",fileNumber:"--",currentOutcome:"--"}},{immediate:!0,deep:!0}),(p,i)=>(u(),b(t(yt),null,{default:n(()=>[a(t(Je),null,{default:n(()=>[a(t(Ke),null,{default:n(()=>[T.value?(u(),b(t(_t),{key:0,animated:"",style:{width:"200px",height:"24px"}})):(u(),y(Z,{key:1},[a(t(C),{icon:t(Ze)},null,8,["icon"]),i[0]||(i[0]=c(" ART Information ",-1))],64))]),_:1})]),_:1}),a(t(St),null,{default:n(()=>[a(t(Qe),null,{default:n(()=>[T.value?(u(),y(Z,{key:0},bt(4,d=>a(t(S),{key:d},{default:n(()=>[a(t(_t),{slot:"start",animated:"",style:{width:"24px",height:"24px","border-radius":"50%"}}),a(t(E),null,{default:n(()=>[a(t(_t),{animated:"",style:{width:"120px",height:"16px","margin-bottom":"8px"}}),a(t(_t),{animated:"",style:{width:"180px",height:"20px"}})]),_:1})]),_:1})),64)):(u(),y(Z,{key:1},[a(t(S),null,{default:n(()=>[a(t(C),{icon:t(Xe),slot:"start"},null,8,["icon"]),a(t(E),null,{default:n(()=>[i[1]||(i[1]=o("h3",null,"ART Start Date",-1)),o("p",null,_(D.value.artStartDate),1)]),_:1})]),_:1}),a(t(S),null,{default:n(()=>[a(t(C),{icon:t(ce),slot:"start"},null,8,["icon"]),a(t(E),null,{default:n(()=>[i[2]||(i[2]=o("h3",null,"ARV Number",-1)),o("p",null,_(D.value.arvNumber),1)]),_:1})]),_:1}),a(t(S),null,{default:n(()=>[a(t(C),{icon:t(ta),slot:"start"},null,8,["icon"]),a(t(E),null,{default:n(()=>[i[3]||(i[3]=o("h3",null,"File Number",-1)),o("p",null,_(D.value.fileNumber),1)]),_:1})]),_:1}),a(t(S),null,{default:n(()=>[a(t(C),{icon:t(ea),slot:"start"},null,8,["icon"]),a(t(E),null,{default:n(()=>[i[4]||(i[4]=o("h3",null,"Current Outcome",-1)),o("p",null,_(D.value.currentOutcome),1)]),_:1})]),_:1})],64))]),_:1})]),_:1})]),_:1}))}}),Ha=Mt(Ba,[["__scopeId","data-v-7ec7b45c"]]),de=[{classDash:"dashed_bottom_border",radioBtnContent:{header:{title:"Is the pregnancy confirmed?*",class:"bold",selectedValue:"",name:"Pregnancy confirmed"},data:[{value:"Yes",name:"Yes",colSize:"2"},{value:"No",name:"No",colSize:"2"}]}},{classDash:"dashed_bottom_border",radioBtnContent:{header:{title:"Was the pregnancy planned?*",selectedValue:"",class:"bold",name:"Pregnancy planned"},data:[{value:"Yes",name:"Yes",colSize:"2"},{value:"No",name:"No",colSize:"2"}]}}],Ga=na("ANCEnrollmentStore",{state:()=>({ConfirmPregnancy:[...de]}),actions:{setConfirmPregnancy(L){this.ConfirmPregnancy=L},getInitial(){return[...Ta.cloneDeep(de)]}}}),za={class:"header-content"},Fa={class:"title-section"},Wa={class:"tasks-container"},Ya=["onClick"],qa={class:"task-icon-container"},ja={class:"task-content"},Ka={key:0,class:"task-status"},Za={key:1,class:"empty-state"},Ja={class:"empty-icon"},Qa=xt({__name:"TaskView",props:{tasks:{type:Object,required:!0}},setup(L){const N=f([]),T=L;me(async()=>{const p=new it;N.value=[];const i=await new Pa(p.getID()).getProgram();T.tasks.forEach(async d=>{var B,z,rt,ut;const $={orderNumber:(B=d.sortOrder)!=null?B:9999,label:(z=d.displayName)!=null?z:d.name,icon:d.icon,disabled:!1,taskCompleted:!1,task:d};if(!(typeof d.workflowID=="string"&&!await Ua(d.workflowID))&&!(typeof d.condition=="function"&&!await d.condition(T.tasks))&&!(typeof d.globalProperty=="string"&&!await Ia.isProp("".concat(d.globalProperty,"=true"))))return typeof d.allowTaskAfterDeath=="boolean"&&d.allowTaskAfterDeath===!1&&/died/i.test("".concat((rt=i==null?void 0:i.program)==null?void 0:rt.outcome))&&new Date(it.getSessionDate())>=new Date((ut=i==null?void 0:i.program)==null?void 0:ut.startDate)&&($.disabled=!0),typeof d.disabled=="function"&&($.disabled=await d.disabled(T.tasks)),N.value.push($),N.value.sort((dt,Ct)=>{var ct,mt;return((ct=dt.orderNumber)!=null?ct:9999)-((mt=Ct.orderNumber)!=null?mt:9999)}),d})});const D=p=>{if(!p.disabled){if(p.task.action)V(),p.task.action();else if(p.task.component&&p.task.isFormComponent){ve(ka,{},!1,{title:p.task.name,useComponent:p.task.component,onClose:V});return}}};function V(){ca.dismiss()}return(p,i)=>(u(),b(t(pe),null,{default:n(()=>[a(t(sa),{class:"ion-no-border"},{default:n(()=>[a(t(oa),{class:"custom-header"},{default:n(()=>[o("div",za,[o("div",Fa,[a(t(C),{icon:t(la),class:"header-icon"},null,8,["icon"]),a(t(ia),{class:"custom-title"},{default:n(()=>[...i[0]||(i[0]=[c("Program Activities",-1)])]),_:1})]),a(t(ra),{onClick:V,fill:"clear",shape:"round"},{default:n(()=>[a(t(C),{icon:t(Tt)},null,8,["icon"])]),_:1})])]),_:1})]),_:1}),a(t(Vt),{class:"custom-content"},{default:n(()=>[o("div",Wa,[N.value&&N.value.length>0?(u(),b(t(ua),{key:0,class:"tasks-grid"},{default:n(()=>[a(t(M),{class:"ion-justify-content-center"},{default:n(()=>[(u(!0),y(Z,null,bt(N.value,(d,$)=>(u(),b(t(m),{size:"12","size-sm":"6","size-md":"4","size-lg":"3",key:$,class:"task-col"},{default:n(()=>[o("div",{class:fe(["task-card",{"task-completed":d.taskCompleted,"task-disabled":d.disabled}]),onClick:B=>!d.disabled&&D(d)},[o("div",qa,[a(t(C),{color:d.taskCompleted?"success":"primary",icon:d.taskCompleted?t(ne):d.icon,class:"task-icon"},null,8,["color","icon"])]),o("div",ja,[a(t(E),{class:"task-label"},{default:n(()=>[c(_(d.label),1)]),_:2},1024),d.taskCompleted?(u(),y("div",Ka,[a(t(C),{icon:t(ne),color:"success"},null,8,["icon"]),i[1]||(i[1]=o("span",null,"Completed",-1))])):v("",!0)])],10,Ya)]),_:2},1024))),128))]),_:1})]),_:1})):(u(),y("div",Za,[o("div",Ja,[a(t(C),{icon:t(da)},null,8,["icon"])]),i[2]||(i[2]=o("h3",null,"No Activities Yet",-1)),i[3]||(i[3]=o("p",null,"Your program activities will appear here once they're available.",-1))]))])]),_:1})]),_:1}))}}),Xa=Mt(Qa,[["__scopeId","data-v-244ec438"]]);async function tn(L,N="tasks"){var V,p;const D=(V={1:Da}[L])!=null?V:{};ve(Xa,{},!0,{tasks:(p=D==null?void 0:D[N])!=null?p:[]})}const en={key:5,class:"content_manager"},an={style:{display:"flex","justify-content":"space-between"}},nn={class:"p_name_image"},sn={style:{width:"100%"}},on={class:"p_name"},ln={style:{display:"flex","justify-content":"space-between"}},rn={class:"start-visit"},un={class:"button-group"},dn={key:0,class:"send-button-container action-buttons"},cn={class:"send-button-container"},mn={class:"send-button-container"},fn={class:"send-button-container"},pn={style:{"padding-left":"10px","padding-right":"10px"}},vn={class:"vitalsUnits"},_n={style:{width:"100%",overflow:"scroll",height:"64px"}},gn={key:0,style:{"margin-top":"1px"}},yn={key:0,class:"patient-chart"},bn={class:"patient-chart"},Cn={key:1,class:"patient-chart"},An={key:1},Pn={key:2},In={key:3},kn={key:4},Dn={key:5},wn={class:"rght-drpm"},On="NEONATAL PROGRAM",Rn=xt({__name:"PatientProfile",setup(L,{expose:N}){const T=I(()=>k(()=>import("./LabOrdersList-BOkaQyJ8.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12]),import.meta.url)),D=I(()=>k(()=>import("./DiagnosesHistory-DQk-WD0K.js"),__vite__mapDeps([13,1,2,3,4,5,6,14]),import.meta.url)),V=I(()=>k(()=>import("./AllergiesContraindication-Bq7NK7rh.js"),__vite__mapDeps([15,1,2,3,4,5,6,16,17,18]),import.meta.url)),p=I(()=>k(()=>import("./VisitsHistory-DpQmgsN9.js"),__vite__mapDeps([19,1,2,3,4,5,6,20]),import.meta.url)),i=I(()=>k(()=>import("./VitalsMeasurementsSummary-JD6qTPMp.js"),__vite__mapDeps([21,1,2,3,4,5,6,22]),import.meta.url)),d=I(()=>k(()=>import("./PatientProfile-MCb4ZlTY.js"),__vite__mapDeps([23,1,2,3,4,5,6,24,25,26,27,28,29,0,7,8,9,10,11,12,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,16,17,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83]),import.meta.url)),$=I(()=>k(()=>import("./HTSPatientProfile-BCjJzICo.js"),__vite__mapDeps([84,1,2,3,4,5,6,68,69,70,71,72,81,75,76,40,77,78,79,45,46,47,82,61,62,63,64,7,8,9,10,65,66,49,32,67,85]),import.meta.url)),B=I(()=>k(()=>import("./NeonatalPatientProfile-7i6Yb7Pe.js"),__vite__mapDeps([86,1,2,3,4,5,6,81,75,76,68,69,70,71,72,40,77,78,79,45,46,47,82,61,62,63,87,64,7,8,9,10,65,66,49,32,67,88]),import.meta.url)),z=I(()=>k(()=>import("./AETCPatientProfile-CnIXB5gB.js"),__vite__mapDeps([89,1,2,3,4,5,6,90,81,75,76,68,69,70,71,72,40,77,78,79,45,46,47,82,32,24,25,91,92,93,11,94,95]),import.meta.url)),rt=I(()=>k(()=>import("./WeightHeightChart-Bz-fF4aM.js"),__vite__mapDeps([61,4,1,2,3,5,6,62,63]),import.meta.url)),ut=I(()=>k(()=>import("../index-fcpPQh40.js").then(s=>s.cK),__vite__mapDeps([4,1,2,3,5,6]),import.meta.url)),dt=I(()=>k(()=>import("./BloodPressure-79lCtoR2.js"),__vite__mapDeps([96,1,2,3,5,4,6,97]),import.meta.url)),Ct=I(()=>k(()=>import("./AncEnrollmentModal-BnpFnXEn.js"),__vite__mapDeps([98,1,2,3,4,5,6,7,8,9,10,90,11,81,75,76,68,69,70,71,72,40,77,78,79,45,46,47,82,32,24,25,94,99]),import.meta.url)),ct=I(()=>k(()=>import("./LabourEnrollmentModal-g5NHeDRC.js"),__vite__mapDeps([100,1,2,3,4,5,6,75,76,68,69,70,71,72,40,77,78,79,7,8,9,10,90,11,81,45,46,47,82,32,24,25,94,101]),import.meta.url)),mt=I(()=>k(()=>import("./PNCEnrollmentModal-BsGFtuts.js"),__vite__mapDeps([102,1,2,3,4,5,6,75,76,68,69,70,71,72,40,77,78,79,7,8,9,10,90,11,81,45,46,47,82,32,24,25,94,103]),import.meta.url)),J=ma(),_e=fa(),ft=wa(),ge=Oa(),ye=Ga(),{hasWaitingList:Lt}=xa(),{event:be,popoverOpen:$t,openPopover:Ut,openPIM:Bt,openOutCome:Ce,openUpdateNCDNUmbers:Ae,printVisitSummary:Pe,printID:Ie,formatCurrentAddress:ke}=Ma(),{screenWidth:At}=Ra(),{patient:r}=Nt(ft),{activeProgram:A,authorizedPrograms:Ht}=Nt(ge),{ConfirmPregnancy:De}=Nt(ye),pt=f(!1),we=f(!0),Oe=f(!1),Pt=f(!1),Re=f(!1),U=f("Patient Charts"),Gt=f(null),Ee=f([]),h=f({}),F=f(!1),Q=f(!1),zt=f(!1),Ft=f(!1),x=f([]),W=f(0),It=f(),X=f(""),kt=f(!1),Ne=s=>s==null?void 0:s.trim().toUpperCase(),he=s=>s===R.NEONATAL_PROGRAM||s===R.HTC_PROGRAM,Se=s=>Ne(s)===On,Te=s=>{var w;if(!s)return!1;const e=(w=s.id)!=null?w:s.program_id;return he(e)||Se(s.name)},Ve=gt(()=>{var e,w;const s=(w=(e=r.value)==null?void 0:e.personInformation)==null?void 0:w.gender;return s==="Male"||s==="M"?Ht.value.filter(g=>g.name!=="ANC PROGRAM"&&g.name!=="LABOUR AND DELIVERY PROGRAM"&&g.name!=="PNC PROGRAM"):Ht.value.map(g=>{if(g.name==="ANC PROGRAM"||g.name==="LABOUR AND DELIVERY PROGRAM"||g.name==="PNC PROGRAM"){if(!(x!=null&&x.value))return;const l=x==null?void 0:x.value.some(O=>O.id===g.program_id);return{...g,actionName:l?"Start ".concat(g.name):"Enroll in ".concat(g.name)}}return g})}),xe=gt(()=>!F.value&&A.value.program_id==14),Me=gt(()=>F.value&&A.value.program_id==14),Wt=gt(()=>Te(A.value)),Le=()=>{var s,e;if((e=(s=r.value)==null?void 0:s.personInformation)!=null&&e.birthdate){const w=G.getAgeInYears(r.value.personInformation.birthdate);kt.value=w<9}},$e=()=>{var s,e;(e=(s=r.value)==null?void 0:s.personInformation)!=null&&e.birthdate&&(we.value=G.getAgeInYears(r.value.personInformation.birthdate)>=14,Oe.value=G.ageInMonths(r.value.personInformation.birthdate)<9,Pt.value=G.getAgeInYears(r.value.personInformation.birthdate)<5,Re.value=G.dateDiffInDays(G.sessionDate(),r.value.personInformation.birthdate)<42)},Y=s=>{U.value=s},Yt=()=>[{backgroundColor:"#B9E6FE",status:"",icon:ht(["#B9E6FE","#026AA2","#9ADBFE"]),textColor:"#026AA2",value:"No further action is required.",name:"",index:"Blood sugar is normal"},{backgroundColor:"#FEDF89",status:"",icon:ht(["#FEDF89","#B54708","#FED667"]),textColor:"#B54708",value:"Please call or follow up!",name:"",index:"Patient Defaulted"},{backgroundColor:"#FECDCA",status:"",icon:ht(["#FECDCA","#B42318","#FDA19B"]),textColor:"#B42318",value:"Administer medications!",name:"",index:"Patient is hypertensive"}],qt=async()=>{if(A.value.program_id==14)try{const s=await ie(ft.patient.ID);if(!s)return;F.value=!!s.length}catch(s){console.error(s)}},Dt=f(!1),Ue=async()=>{try{await re("Are you sure you want to create the visit?")&&(Dt.value=!0,await Na(ft.patient)&&(F.value=!0,await ue().refresh(at.getUserLocationId()),K("The patient visit is now active. Patient is on the waiting list for vitals")))}catch(s){console.error("error activating visit: ",s)}finally{Dt.value=!1}},wt=f(!1),Be=async()=>{try{await re("Are you sure you want to close the visit?")&&(wt.value=!0,await ha(r.value)&&(F.value=!1,await ue().refresh(at.getUserLocationId()),K("The patient visit is now closed")))}catch(s){console.error("error: ",s)}finally{wt.value=!1}},jt=async()=>{if(A.value.program_id==14)try{const s=await ie(ft.patient.ID);console.log("ðŸš€ ~ checkPatientIFCheckedIn ~ result:",s),F.value=s.length>0}catch(s){console.error(s)}},He=s=>{Gt.value=s,pt.value=!pt.value},Kt=(s="tasks")=>tn(A.value.program_id,s),Ot=f(!1),Zt=async s=>{var e,w,g,l,O;Ot.value=!0;try{if(await q(),(s.program_id==R.ANC_PROGRAM||s.program_id==R.PNC_PROGRAM||s.program_id==R.LABOUR_AND_DELIVERY_PROGRAM)&&!((e=x==null?void 0:x.value)==null?void 0:e.find(vt=>vt.id==s.program_id))){if(s.program_id==R.ANC_PROGRAM){Q.value=!0,W.value=s.program_id;return}else if(s.program_id==R.LABOUR_AND_DELIVERY_PROGRAM){zt.value=!0,X.value="Are you sure you want to enroll ".concat((g=(w=r.value)==null?void 0:w.personInformation)==null?void 0:g.given_name.toUpperCase()," in this program?"),W.value=s.program_id;return}else if(s.program_id==R.PNC_PROGRAM){Ft.value=!0,X.value="Are you sure you want to enroll ".concat((O=(l=r.value)==null?void 0:l.personInformation)==null?void 0:O.given_name.toUpperCase()," in this program?"),W.value=s.program_id;return}}const P=await et.userProgramData(r.value.patientID,s);if(s.program_id===14)if(P!=null&&P.canProceed&&P.url&&P.stage){const H=Ge(P.stage);if(!H){st("Unable to determine patient stage");return}if(Lt(H))return J.push(P.url);st("You don't have access to the ".concat(H.toLowerCase()));return}else{st("The visit is not activated");return}if(P!=null&&P.url)return J.push(P.url)}catch(P){console.error("error: ",P)}finally{Ot.value=!1}},Ge=s=>{switch(s){case"VITALS":return"Waiting for Vitals";case"CONSULTATION":return"Waiting for Consultation";case"LAB":return"Waiting for Laboratory";case"DISPENSATION":return"Waiting for Dispensation";default:return null}},Rt=()=>{Q.value=!1},Jt=()=>{Q.value=!Q.value},ze=async()=>{const s=at.getUserID(),e=new Va(r.value.patientID,s);if(!await e.createEncounter())return st("Unable to create quick check encounter");const g=await e.saveObservationList(await je());try{await lt.enrollProgram(r.value.patientID,W.value,new Date().toString()),K("Enrollment is successful")}catch(l){K("Already Enrolled")}return g?(await q(),Jt(),J.push("ANCHome")):st("Unable to create quick check details!")},Fe=async()=>(await lt.enrollProgram(r.value.patientID,W.value,new Date().toString()),await q(),K("Enrollment is successful"),J.push("LabourHome")),We=async()=>(await lt.enrollProgram(r.value.patientID,W.value,new Date().toString()),await q(),K("Enrollment is successful"),J.push("PNCHome")),q=async()=>{const s=r.activePrograms;x.value=s==null?void 0:s.map(e=>({name:e.program.name,id:e.program_id}))},Et=()=>{Jt()},Qt=async()=>{(await Sa.getLatestObsByEncounterIdAndConcepts(6,["Height (cm)","Weight (kg)","Systolic blood pressure","Diastolic blood pressure","Temperature (c)","Pulse"])).map(e=>{e.concept_name==="Height (cm)"&&(h.value.height=e.value_numeric),e.concept_name==="Weight (kg)"&&(h.value.weight=e.value_numeric),e.concept_name==="Systolic blood pressure"&&(h.value.systolic=e.value_numeric),e.concept_name==="Diastolic blood pressure"&&(h.value.diastolic=e.value_numeric),e.concept_name==="Temperature (c)"&&(h.value.temperature=e.value_numeric),e.concept_name==="Pulse"&&(h.value.pulse=e.value_numeric)}),It.value=new it().getBloodGlucose(r.value)},Ye=s=>s=="Undetermined"?"Undetermined":["Male","M"].includes(s)?"Male":["Female","F"].includes(s)?"Female":"",qe=()=>{var s,e;return G.getBirthdateAge((e=(s=r.value)==null?void 0:s.personInformation)==null?void 0:e.birthdate)},je=async()=>await La(De.value);return me(async()=>{await qt(),await et.userProgramData(r.value.patientID),$e();const s=new it;Ee.value=await it.getPatientVisits(s.getID(),!1),await q(),Yt(),await Qt(),await jt()}),ot(()=>{var s;return(s=r.value)==null?void 0:s.patientID},async s=>{s&&(await et.userProgramData(s),await q())},{immediate:!0}),ot(()=>r,async()=>{await et.userProgramData(r.value.patientID),await Qt(),await jt(),await qt()},{deep:!0}),ot(_e,async s=>{await et.userProgramData(r.value.patientID)},{deep:!0}),ot(()=>r.value,()=>{Le()},{immediate:!0,deep:!0}),N({showUnderageWarning:kt}),(s,e)=>{const w=se("ion-list"),g=se("ion-popover");return u(),b(t(pe),null,{default:n(()=>[a(Ea),a(t(Vt),{fullscreen:!0},{default:n(()=>[t(A).program_id!==33&&t(A).program_id!=""&&t(At)<1120?(u(),b($a,{key:0,onOpenPopover:e[0]||(e[0]=l=>t(Ut)(l))})):v("",!0),a(t(Ct),{closeModalFunc:Rt,onYes:ze,onNo:Et,isOpen:Q.value,title:X.value,showUnderageWarning:kt.value},null,8,["isOpen","title","showUnderageWarning"]),a(t(ct),{closeModalFunc:Rt,onYes:Fe,onNo:Et,isOpen:zt.value,title:X.value},null,8,["isOpen","title"]),a(t(mt),{closeModalFunc:Rt,onYes:We,onNo:Et,isOpen:Ft.value,title:X.value},null,8,["isOpen","title"]),t(A).program_id==t(R).IMMUNIZATION_PROGRAM?(u(),b(t(d),{key:1,updateData:t(r)},null,8,["updateData"])):v("",!0),t(A).program_id==t(R).HTS_PROGRAM?(u(),b(t($),{key:2,updateData:t(r)},null,8,["updateData"])):v("",!0),t(A).program_id==t(R).AETC_PROGRAM?(u(),b(t(z),{key:3,updateData:t(r)},null,8,["updateData"])):v("",!0),Wt.value?(u(),b(t(B),{key:4})):v("",!0),t(A).program_id!==t(R).AETC_PROGRAM&&t(A).program_id!==t(R).IMMUNIZATION_PROGRAM&&t(A).program_id!==t(R).HTS_PROGRAM&&!Wt.value&&t(A).program_id!=""?(u(),y("div",en,[a(t(M),{class:"content_width"},{default:n(()=>[a(t(m),{size:"2.5","size-lg":"2.6","size-md":"3",class:"displayNoneLeftPanel"},{default:n(()=>[a(t(yt),{style:{"margin-bottom":"20px","background-color":"#fff"}},{default:n(()=>[a(t(St),null,{default:n(()=>{var l,O,P,H,vt,Xt,te,ee;return[o("div",an,[e[22]||(e[22]=o("div",null,null,-1)),o("div",{class:"name",style:{color:"var(--ion-color-primary)","margin-top":"10px"},onClick:e[1]||(e[1]=tt=>t(Ut)(tt))},[a(t(C),{icon:t(pa),style:{"font-size":"2.2rem"}},null,8,["icon"])])]),o("div",nn,[o("div",{class:fe(((O=(l=t(r))==null?void 0:l.personInformation)==null?void 0:O.gender)=="M"?"initialsBox maleColor":"initialsBox femaleColor"),onClick:e[2]||(e[2]=tt=>t(Bt)())},[a(t(C),{style:{color:"#fff","font-size":"70px"},icon:t(va)},null,8,["icon"])],2),o("div",sn,[o("div",on,_((H=(P=t(r))==null?void 0:P.personInformation)==null?void 0:H.given_name)+" "+_((Xt=(vt=t(r))==null?void 0:vt.personInformation)==null?void 0:Xt.middle_name)+" "+_((ee=(te=t(r))==null?void 0:te.personInformation)==null?void 0:ee.family_name),1)])]),a(t(M),null,{default:n(()=>[a(t(m),{size:"4"},{default:n(()=>[...e[23]||(e[23]=[c("MRN:",-1)])]),_:1}),a(t(m),{class:"demoContent"},{default:n(()=>[c(_(t(r).ID),1)]),_:1})]),_:1}),t(A).program_id===32?(u(),b(t(M),{key:0},{default:n(()=>[a(t(m),{size:"4"},{default:n(()=>[...e[24]||(e[24]=[c("NCDNumber:",-1)])]),_:1}),a(t(m),{class:"demoContent"},{default:n(()=>[c(_(t(r).NcdID),1)]),_:1})]),_:1})):v("",!0),a(t(M),null,{default:n(()=>[a(t(m),{size:"4"},{default:n(()=>[...e[25]||(e[25]=[c("Gender:",-1)])]),_:1}),a(t(m),{class:"demoContent"},{default:n(()=>{var tt,ae;return[c(_(Ye((ae=(tt=t(r))==null?void 0:tt.personInformation)==null?void 0:ae.gender)),1)]}),_:1})]),_:1}),a(t(M),null,{default:n(()=>[a(t(m),{size:"4"},{default:n(()=>[...e[26]||(e[26]=[c("Age:",-1)])]),_:1}),a(t(m),{class:"demoContent"},{default:n(()=>[c(_(qe()),1)]),_:1})]),_:1}),a(t(M),null,{default:n(()=>[a(t(m),{size:"4"},{default:n(()=>[...e[27]||(e[27]=[c("Address:",-1)])]),_:1}),a(t(m),{class:"demoContent"},{default:n(()=>[c(_(t(ke)(t(r))),1)]),_:1})]),_:1})]}),_:1})]),_:1}),t(at).getProgramID()===1?(u(),b(Ha,{key:0,patient:t(r)},null,8,["patient"])):v("",!0),a(t(yt),{style:{"margin-bottom":"20px","background-color":"#fff"}},{default:n(()=>[a(t(_a),{value:["first"]},{default:n(()=>[a(t(ga),{value:"first",style:{"background-color":"#fff"},"toggle-icon-slot":"start"},{default:n(()=>[a(t(S),{slot:"header",color:"white"},{default:n(()=>[a(t(E),{class:"side_title"},{default:n(()=>[...e[28]||(e[28]=[c("Alerts & Reminders ",-1)])]),_:1})]),_:1}),a(t(St),{slot:"content"},{default:n(()=>[(u(!0),y(Z,null,bt(Yt(),(l,O)=>(u(),y("span",{key:O},[l.value?(u(),b(t(M),{key:0,style:oe("border-radius: 5px;  margin-top:10px; margin-bottom:10px;background-color:"+l.backgroundColor)},null,8,["style"])):v("",!0)]))),128))]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),a(t(m),{offset:"0.07","size-sm":"12","size-md":"12","size-lg":t(At)>1120?"9.33":"12"},{default:n(()=>[a(t(yt),{style:{"background-color":"#fff","margin-inline":"0px",contain:"unset",overflow:"unset"}},{default:n(()=>[o("div",null,[o("div",ln,[e[29]||(e[29]=o("div",{class:"vitalsTitle"},"Most recent Vitals & Biometrics",-1)),o("div",rn,[o("div",un,[t(Lt)("Waiting for Laboratory")?v("",!0):(u(),y("div",dn,[xe.value?(u(),b(nt,{key:0,name:"Activate visit",onClick:e[3]||(e[3]=l=>Ue()),loading:Dt.value,fill:"clear",iconSlot:"start",icon:t(Tt),class:"action-button"},null,8,["loading","icon"])):v("",!0),Me.value?(u(),b(nt,{key:1,name:"Deactivate Visit",onClick:e[4]||(e[4]=l=>Be()),loading:wt.value,fill:"clear",iconSlot:"start",icon:t(Tt),class:"action-button danger"},null,8,["loading","icon"])):v("",!0)])),o("div",cn,[a(nt,{name:"Tasks","onClicked:btn":e[5]||(e[5]=l=>Kt()),class:"send-text",fill:"clear",color:"secondary"})]),o("div",mn,[a(nt,{name:"Printout/Other","onClicked:btn":e[6]||(e[6]=l=>Kt("other")),class:"send-text",fill:"solid",color:"secondary"})]),o("div",fn,[a(nt,{name:"Start visit","onClicked:btn":e[7]||(e[7]=l=>Zt(t(A))),loading:Ot.value,textFontSize:"12px",class:"send-text"},null,8,["loading"]),o("button",{class:"send-arrow",onClick:e[8]||(e[8]=l=>He(l))})])])])])]),o("div",pn,[a(t(M),null,{default:n(()=>[a(t(m),{class:"vitalsHeading"},{default:n(()=>[...e[30]||(e[30]=[c("Weight",-1)])]),_:1}),a(t(m),{class:"vitalsHeading"},{default:n(()=>[...e[31]||(e[31]=[c("Height",-1)])]),_:1}),a(t(m),{class:"vitalsHeading"},{default:n(()=>[...e[32]||(e[32]=[c("Temperature",-1)])]),_:1}),a(t(m),{class:"vitalsHeading"},{default:n(()=>[...e[33]||(e[33]=[c("Blood glucose",-1)])]),_:1}),a(t(m),{class:"vitalsHeading"},{default:n(()=>[...e[34]||(e[34]=[c("Pulse Rate",-1)])]),_:1}),a(t(m),{class:"vitalsHeading"},{default:n(()=>[...e[35]||(e[35]=[c("Blood pressure",-1)])]),_:1})]),_:1}),a(t(M),null,{default:n(()=>[a(t(m),{class:"vitalsValue"},{default:n(()=>[c(_(h.value.weight)+" ",1),e[36]||(e[36]=o("span",{class:"vitalsUnits"},"kg",-1))]),_:1}),a(t(m),{class:"vitalsValue"},{default:n(()=>[c(_(h.value.height)+" ",1),e[37]||(e[37]=o("span",{class:"vitalsUnits"},"cm",-1))]),_:1}),a(t(m),{class:"vitalsValue"},{default:n(()=>[c(_(h.value.temperature)+" ",1),e[38]||(e[38]=o("span",{class:"vitalsUnits"},"Â°C",-1))]),_:1}),a(t(m),{class:"vitalsValue"},{default:n(()=>{var l,O;return[c(_((l=It.value)==null?void 0:l.value)+" ",1),o("span",vn,_((O=It.value)==null?void 0:O.unit),1)]}),_:1}),a(t(m),{class:"vitalsValue"},{default:n(()=>[c(_(h.value.pulse)+" ",1),e[39]||(e[39]=o("span",{class:"vitalsUnits"},"bpm ",-1))]),_:1}),a(t(m),{class:"vitalsValue"},{default:n(()=>[c(_(h.value.systolic)+"/"+_(h.value.diastolic),1),e[40]||(e[40]=o("span",{class:"vitalsUnits"},"mmhg",-1))]),_:1})]),_:1})])]),_:1}),o("div",_n,[a(t(ya),{value:U.value,style:{"margin-top":"5px","min-width":"540px"}},{default:n(()=>[a(t(j),{value:"Patient Charts",onClick:e[9]||(e[9]=l=>Y("Patient Charts"))},{default:n(()=>[a(t(E),null,{default:n(()=>[...e[41]||(e[41]=[c("Patient Charts",-1)])]),_:1})]),_:1}),a(t(j),{value:"Visits History",onClick:e[10]||(e[10]=l=>Y("Visits History"))},{default:n(()=>[a(t(E),null,{default:n(()=>[...e[42]||(e[42]=[c("Visits History",-1)])]),_:1})]),_:1}),a(t(j),{value:"Vitals & Measurements Summary",onClick:e[11]||(e[11]=l=>Y("Vitals & Measurements Summary"))},{default:n(()=>[a(t(E),null,{default:n(()=>[...e[43]||(e[43]=[c("Vitals & Measurements Summary",-1)])]),_:1})]),_:1}),a(t(j),{value:"Lab Tests History",onClick:e[12]||(e[12]=l=>Y("Lab Tests History"))},{default:n(()=>[a(t(E),null,{default:n(()=>[...e[44]||(e[44]=[c("Lab Tests History",-1)])]),_:1})]),_:1}),a(t(j),{value:"Diagnosis History",onClick:e[13]||(e[13]=l=>Y("Diagnosis History"))},{default:n(()=>[a(t(E),null,{default:n(()=>[...e[45]||(e[45]=[c("Diagnosis History",-1)])]),_:1})]),_:1}),a(t(j),{value:"Allergies & Contraindication",onClick:e[14]||(e[14]=l=>Y("Allergies & Contraindication"))},{default:n(()=>[a(t(E),null,{default:n(()=>[...e[46]||(e[46]=[c("Allergies & Contraindication",-1)])]),_:1})]),_:1})]),_:1},8,["value"])]),U.value=="Patient Charts"?(u(),y("div",gn,[o("div",{style:oe(t(At)>826?"display: flex;":"display: block;")},[Pt.value?(u(),y("div",yn,[a(t(rt))])):v("",!0),o("div",bn,[a(t(dt))]),Pt.value?v("",!0):(u(),y("div",Cn,[a(t(ut))]))],4)])):v("",!0),U.value=="Visits History"?(u(),y("div",An,[a(t(p))])):v("",!0),U.value=="Vitals & Measurements Summary"?(u(),y("div",Pn,[a(t(i))])):v("",!0),U.value=="Lab Tests History"?(u(),y("div",In,[a(t(T))])):v("",!0),U.value=="Diagnosis History"?(u(),y("div",kn,[a(t(D))])):v("",!0),U.value=="Allergies & Contraindication"?(u(),y("div",Dn,[a(t(V))])):v("",!0)]),_:1},8,["size-lg"])]),_:1})])):v("",!0)]),_:1}),a(g,{style:{"--offset-x":"-10px"},"is-open":t($t),"show-backdrop":!1,"dismiss-on-select":!0,event:t(be),onDidDismiss:e[20]||(e[20]=l=>$t.value=!1)},{default:n(()=>[o("div",null,[a(w,{style:{"--ion-background-color":"#fff","--offset-x":"-30px"}},{default:n(()=>[a(t(S),{button:!0,detail:!1,onClick:e[15]||(e[15]=l=>t(Bt)()),style:{cursor:"pointer"},class:"list-content"},{default:n(()=>[a(t(C),{icon:t(ba),slot:"start",class:"sub-menu-icon"},null,8,["icon"]),e[47]||(e[47]=o("span",{class:"sub-menu-txt"},"Update demographics",-1))]),_:1}),a(t(S),{button:!0,detail:!1,onClick:e[16]||(e[16]=l=>t(Ce)()),style:{cursor:"pointer"},class:"list-content"},{default:n(()=>[a(t(C),{icon:t(Ca),slot:"start",class:"sub-menu-icon"},null,8,["icon"]),e[48]||(e[48]=o("span",{class:"sub-menu-txt"},"Update outcome",-1))]),_:1}),t(at).getProgramID()==32?(u(),b(t(S),{key:0,button:!0,detail:!1,onClick:e[17]||(e[17]=l=>t(Ae)()),style:{cursor:"pointer"},class:"list-content"},{default:n(()=>[a(t(C),{icon:t(ce),slot:"start",class:"sub-menu-icon"},null,8,["icon"]),e[49]||(e[49]=o("span",{class:"sub-menu-txt"},"Update NCD Number",-1))]),_:1})):v("",!0),a(t(S),{button:!0,detail:!1,onClick:e[18]||(e[18]=l=>t(Pe)()),style:{cursor:"pointer"},class:"list-content"},{default:n(()=>[a(t(C),{icon:t(le),slot:"start",class:"sub-menu-icon"},null,8,["icon"]),e[50]||(e[50]=o("span",{class:"sub-menu-txt"},"Print visit summary",-1))]),_:1}),a(t(S),{button:!0,detail:!1,onClick:e[19]||(e[19]=l=>t(Ie)()),style:{cursor:"pointer"},class:"list-content"},{default:n(()=>[a(t(C),{icon:t(le),slot:"start",class:"sub-menu-icon"},null,8,["icon"]),e[51]||(e[51]=o("span",{class:"sub-menu-txt"},"Print client identifier",-1))]),_:1})]),_:1})])]),_:1},8,["is-open","event"]),a(g,{"is-open":pt.value,"show-backdrop":!1,"dismiss-on-select":!0,event:Gt.value,onDidDismiss:e[21]||(e[21]=l=>pt.value=!1),style:{"--width":"350px"}},{default:n(()=>[a(t(Vt),null,{default:n(()=>[a(w,null,{default:n(()=>[(u(!0),y(Z,null,bt(Ve.value,(l,O)=>(u(),b(t(S),{button:!0,detail:!1,style:{cursor:"pointer"},key:O,onClick:P=>Zt(l)},{default:n(()=>[a(t(C),{slot:"start",icon:t(Aa)},null,8,["icon"]),o("span",wn,_(l==null?void 0:l.actionName),1)]),_:2},1032,["onClick"]))),128))]),_:1})]),_:1})]),_:1},8,["is-open","event"])]),_:1})}}}),En=Mt(Rn,[["__scopeId","data-v-4b1e7070"]]),Un=Object.freeze(Object.defineProperty({__proto__:null,default:En},Symbol.toStringTag,{value:"Module"}));export{Ha as A,Un as P,Ga as u};
