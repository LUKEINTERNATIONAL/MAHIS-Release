System.register(["./vendor-legacy-rL86R-cQ.js","./NavigationMenu-legacy-CszbvjV_.js","./EIRreportsStore-legacy-4YNczKGM.js","../index-legacy-BUSYOKVO.js","./bottomNavBar-legacy-BV92jNku.js","./lodash-legacy-pOOc9Efu.js","./apexcharts-legacy-kzTeKYPj.js"],function(e,t){"use strict";var a,i,n,o,l,s,r,d,c,u,p,g,f,m,v,h,x,b,w,y,_,P,k,C,D,I,O,z,N,A,E,H,S,V,j,L,M,U,B,R,F,T,$,G,J,Y,q,K,Q,W,X,Z,ee,te,ae,ie,ne,oe;return{setters:[e=>{a=e.d,i=e.L,n=e.N,o=e.ad,l=e.ac,s=e.bs,r=e.aV,d=e.aR,c=e.aS,u=e.bw,p=e.G,g=e.E,f=e.ae,m=e.I,v=e.ab,h=e.cL,x=e.dU,b=e.dV,w=e.dW,y=e.ay,_=e.aM,P=e.c8,k=e.bD,C=e.aE,D=e.aD,I=e.H,O=e.e,z=e.f,N=e.k,A=e.l,E=e.J,H=e.F,S=e.P,V=e.Q,j=e.K,L=e.m,M=e.a1,U=e.O,B=e.p,R=e.cr,F=e.b2,T=e.r,$=e.bE,G=e.a,J=e.w,Y=e.i,q=e.u,K=e.bp,Q=e.v,W=e.M},e=>{X=e.N},e=>{Z=e.E},e=>{ee=e.P,te=e.u,ae=e._,ie=e.aa,ne=e.B},e=>{oe=e.B},null,null],execute:function(){var t=document.createElement("style");t.textContent=".cards-container[data-v-82a37352]{width:100%}.responsive-row[data-v-82a37352]{display:grid;gap:20px;grid-template-columns:1fr;padding:10px}@media(min-width:768px){.responsive-row[data-v-82a37352]{grid-template-columns:1fr 1fr;padding:20px}}@media(min-width:1200px){.responsive-row[data-v-82a37352]{grid-template-columns:1fr 1fr 1fr;padding:30px 40px}}@media(min-width:1400px){.responsive-row[data-v-82a37352]{gap:30px}}.card-wrapper[data-v-82a37352]{width:430px;max-width:600px;margin:0;padding:0;display:flex;align-items:stretch}.client-card[data-v-82a37352]{height:fit-content;transition:height .3s ease;position:relative;border-radius:12px;width:100%}.flex[data-v-82a37352]{display:flex;margin-bottom:5px}ion-col[data-v-82a37352]{display:flex}ion-row.ion-align-items-start ion-col[data-v-82a37352]{align-items:flex-start}ion-row:not(.ion-align-items-start) ion-col[data-v-82a37352]{align-items:center}.absolute[data-v-82a37352]{position:absolute;top:.5rem;right:.5rem}.font-semibold[data-v-82a37352]{font-size:15px;font-weight:600}.client-name-title ion-button[data-v-82a37352]{--padding-start: 0;--padding-end: 0;--padding-top: 0;--padding-bottom: 0;text-align:left;white-space:normal;height:auto;width:100%}.open-icon-button[data-v-82a37352]{--padding-start: 0;--padding-end: 0}.truncate[data-v-82a37352]{overflow:hidden;text-overflow:ellipsis;white-space:nowrap;display:block;width:100%}ion-button[fill=outline][data-v-82a37352]{min-width:160px;text-overflow:clip;white-space:nowrap}.flex.items-center[data-v-82a37352]{align-items:center}.hover\\:bg-indigo-100[data-v-82a37352]:hover{background-color:rgba(199,210,254,.5)}.shadow-md[data-v-82a37352]{box-shadow:0 4px 6px -1px rgba(0,0,0,.1),0 2px 4px -1px rgba(0,0,0,.06)}.shadow-lg[data-v-82a37352]{box-shadow:0 10px 15px -3px rgba(0,0,0,.1),0 4px 6px -2px rgba(0,0,0,.05)}.shadow-inner[data-v-82a37352]{box-shadow:inset 0 2px 4px rgba(0,0,0,.05)}.transition-shadow[data-v-82a37352]{transition:box-shadow .3s ease}.transition-colors[data-v-82a37352]{transition:background-color .2s ease}.card-content[data-v-82a37352]{transition:max-height .3s ease;overflow:hidden}.loader-container[data-v-17c24025]{display:flex;align-items:center;justify-content:center}.fullscreen[data-v-17c24025]{position:fixed;top:0;left:0;width:100%;height:100%;background-color:rgba(255,255,255,.8);z-index:9999}.inline[data-v-17c24025]{padding:1rem;width:100%;height:100px;margin:1rem 0}.loader-content[data-v-17c24025]{display:flex;flex-direction:column;align-items:center;gap:1rem}.spinner[data-v-17c24025]{position:relative;width:50px;height:50px}.spinner-ring[data-v-17c24025]{position:absolute;width:100%;height:100%;border:4px solid transparent;border-top-color:#006401;border-radius:50%;animation:spin-17c24025 1s linear infinite}.spinner-core[data-v-17c24025]{position:absolute;top:50%;left:50%;width:30%;height:30%;background-color:#006401;border-radius:50%;transform:translate(-50%,-50%);animation:pulse-17c24025 1.5s ease-in-out infinite}.loader-message[data-v-17c24025]{font-size:14px;color:#333;font-weight:600}@keyframes spin-17c24025{0%{transform:rotate(0)}to{transform:rotate(360deg)}}@keyframes pulse-17c24025{0%,to{opacity:.5;transform:translate(-50%,-50%) scale(.8)}50%{opacity:1;transform:translate(-50%,-50%) scale(1)}}.search-container[data-v-c5fa53b7]{position:sticky;top:0;z-index:1000}.input-col[data-v-c5fa53b7]{padding-left:10;padding-right:10}@media(min-width:768px){.input-col[data-v-c5fa53b7]{padding-left:20px;padding-right:20px}}@media(min-width:1024px){.input-col[data-v-c5fa53b7]{padding-left:300px;padding-right:300px}}@media(min-width:1200px){.input-col[data-v-c5fa53b7]{padding-left:300px;padding-right:300px}}.container[data-v-c5fa53b7]{display:flex;flex-direction:column;height:100%}.scrollable-content[data-v-c5fa53b7]{flex:1;overflow-y:auto}.centered-content[data-v-c5fa53b7]{max-width:1504px;margin-left:auto;margin-right:auto;padding:0 10px}.sticky-footer[data-v-c5fa53b7]{position:sticky;bottom:0;background:transparent;box-shadow:0 -2px 5px rgba(0,0,0,0);z-index:10}\n/*$vite$:1*/",document.head.appendChild(t);const le=a({name:"ClientDetailsCard",components:{IonContent:v,IonHeader:m,IonPage:f,IonTitle:g,IonToolbar:p,IonCard:u,IonCardHeader:c,IonCardTitle:d,IonCardContent:r,IonGrid:s,IonRow:l,IonCol:o,IonButton:n,IonIcon:i},props:{clients:{type:Array,required:!0}},setup:()=>({personOutline:D,locationOutline:C,informationCircleOutline:k,documentTextOutline:P,calendarOutline:_,heartOutline:y,briefcaseOutline:w,schoolOutline:b,ribbonOutline:x,openOutline:h}),methods:{calculateAge(e){const t=new Date,a=new Date(e);let i=t.getFullYear()-a.getFullYear();const n=t.getMonth()-a.getMonth();return(n<0||0===n&&t.getDate()<a.getDate())&&i--,i},formatDate:e=>new Date(e).toLocaleDateString(),findPersonAttribute(e,t){const a=e.person.person_attributes.find(e=>e.type.name===t);return a?a.value:"N/A"},toggleDetails(e){e.showDetails=!e.showDetails},async openClientProfile(e){e.forEach(async e=>{if(3==e.type.patient_identifier_type_id){const t=await ee.findByNpid(e.identifier);te().setPatientRecord(t[0]),this.redirectUser()}})},redirectUser(){const e=JSON.parse(localStorage.getItem("userRoles")),t=e||[];t.some(e=>t.some(e=>"Pharmacist"===e.role))?this.$router.push("NCDDispensations"):this.$router.push("patientProfile")}},mounted(){this.clients.forEach(e=>{e.showDetails=!1})},emits:["view-profile"]}),se={class:"cards-container"},re={class:"flex items-center mb-3 ion-align-items-center"},de={class:"flex flex-col overflow-hidden"},ce={class:"font-semibold text-gray-800 truncate"},ue={class:"flex items-center mb-3 ion-align-items-center"},pe={class:"flex flex-col overflow-hidden"},ge={class:"font-semibold text-gray-800 truncate"},fe={class:"mt-4"},me={class:"flex items-center mb-3 p-2 hover:bg-indigo-100 rounded transition-colors duration-200"},ve={class:"flex flex-col"},he={class:"font-semibold text-gray-800"},xe={class:"flex items-center mb-3 p-2 hover:bg-indigo-100 rounded transition-colors duration-200"},be={class:"flex flex-col"},we={class:"font-semibold text-gray-800"},ye={class:"flex items-center mb-3 p-2 hover:bg-indigo-100 rounded transition-colors duration-200"},_e={class:"flex flex-col"},Pe={class:"font-semibold text-gray-800"},ke={class:"flex items-center mb-3 p-2 hover:bg-indigo-100 rounded transition-colors duration-200"},Ce={class:"flex flex-col"},De={class:"font-semibold text-gray-800"},Ie={class:"flex items-center mb-3 p-2 hover:bg-indigo-100 rounded transition-colors duration-200"},Oe={class:"flex flex-col"},ze={class:"font-semibold text-gray-800"},Ne=ae(le,[["render",function(e,t,a,i,n,o){const l=I("ion-button"),s=I("ion-card-title"),r=I("ion-col"),d=I("ion-icon"),c=I("ion-row"),u=I("ion-card-header"),p=I("ion-grid"),g=I("ion-card-content"),f=I("ion-card");return z(),O("div",null,[N("div",se,[A(c,{class:"responsive-row"},{default:E(()=>[(z(!0),O(H,null,S(e.clients,a=>(z(),O("div",{key:a.patient_id,class:"card-wrapper"},[A(f,{class:"shadow-md hover:shadow-lg transition-shadow client-card"},{default:E(()=>[A(u,{class:"relative"},{default:E(()=>[A(c,{class:"ion-align-items-start"},{default:E(()=>[A(r,{size:"10",class:"ion-text-left"},{default:E(()=>[A(s,{class:"text-indigo-800 client-name-title"},{default:E(()=>[A(l,{fill:"clear",style:{"font-size":"1.4rem"},onClick:t=>e.openClientProfile(a.patient_identifiers)},{default:E(()=>[V(j(a.person.names[0].given_name)+" "+j(a.person.names[0].family_name),1)]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024),A(r,{size:"2",class:"ion-text-right"},{default:E(()=>[A(l,{fill:"clear",class:"absolute top-0 right-0 z-10 text-indigo-600 open-icon-button",onClick:t=>e.openClientProfile(a.patient_identifiers),style:{"font-size":"1.4rem"}},{default:E(()=>[A(d,{icon:e.openOutline,style:{"font-size":"2rem"}},null,8,["icon"])]),_:1},8,["onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1024),A(g,{class:"card-content"},{default:E(()=>{var i,n;return[N("div",re,[A(d,{icon:e.personOutline,class:"mr-2 flex-shrink-0 text-indigo-600"},null,8,["icon"]),N("div",de,[N("span",ce,j(a.person.gender)+" | "+j(e.calculateAge(a.person.birthdate))+" years",1)])]),N("div",ue,[A(d,{icon:e.locationOutline,class:"mr-2 flex-shrink-0 text-indigo-600"},null,8,["icon"]),N("div",pe,[N("span",ge,j(null===(i=a.person.addresses[0])||void 0===i?void 0:i.city_village)+", "+j(null===(n=a.person.addresses[0])||void 0===n?void 0:n.state_province),1)])]),N("div",fe,[A(l,{onClick:t=>e.toggleDetails(a),fill:"outline",size:"small",class:"border-indigo-600 text-indigo-600 hover:bg-indigo-50"},{default:E(()=>[A(d,{icon:e.informationCircleOutline,class:"mr-2"},null,8,["icon"]),V(" "+j(a.showDetails?"Hide Details":"Show More Details"),1)]),_:2},1032,["onClick"]),a.showDetails?(z(),O("div",{key:0,class:"mt-4 bg-indigo-50 p-4 rounded-lg border border-indigo-100 shadow-inner",style:M({maxHeight:a.showDetails?"1000px":"0"})},[t[0]||(t[0]=N("h3",{class:"text-lg font-semibold mb-3 flex items-center text-indigo-800 border-b border-indigo-200 pb-2"}," Personal Information ",-1)),A(p,null,{default:E(()=>[A(c,null,{default:E(()=>[A(r,{size:"auto"},{default:E(()=>[N("div",me,[A(d,{icon:e.calendarOutline,class:"mr-2 flex-shrink-0 text-indigo-600"},null,8,["icon"]),N("div",ve,[N("span",he,j(e.formatDate(a.person.birthdate)),1)])])]),_:2},1024),A(r,{size:"auto"},{default:E(()=>[N("div",xe,[A(d,{icon:e.heartOutline,class:"mr-2 flex-shrink-0 text-indigo-600"},null,8,["icon"]),N("div",be,[N("span",we,j(e.findPersonAttribute(a,"Civil Status")),1)])])]),_:2},1024),A(r,{size:"auto"},{default:E(()=>[N("div",ye,[A(d,{icon:e.briefcaseOutline,class:"mr-2 flex-shrink-0 text-indigo-600"},null,8,["icon"]),N("div",_e,[N("span",Pe,j(e.findPersonAttribute(a,"Occupation")),1)])])]),_:2},1024),A(r,{size:"auto"},{default:E(()=>[N("div",ke,[A(d,{icon:e.schoolOutline,class:"mr-2 flex-shrink-0 text-indigo-600"},null,8,["icon"]),N("div",Ce,[N("span",De,j(e.findPersonAttribute(a,"EDUCATION LEVEL")),1)])])]),_:2},1024),A(r,{size:"12","size-md":"6"},{default:E(()=>[N("div",Ie,[A(d,{icon:e.ribbonOutline,class:"mr-2 flex-shrink-0 text-indigo-600"},null,8,["icon"]),N("div",Oe,[N("span",ze,j(e.findPersonAttribute(a,"Religion")),1)])])]),_:2},1024)]),_:2},1024)]),_:2},1024),t[1]||(t[1]=N("h3",{class:"text-lg font-semibold mt-3 mb-2"},"Identifiers",-1)),A(p,null,{default:E(()=>[A(c,null,{default:E(()=>[(z(!0),O(H,null,S(a.patient_identifiers,e=>(z(),U(r,{key:e.uuid,size:"auto"},{default:E(()=>[N("p",null,[N("strong",null,j(e.type.name)+":",1),V(" "+j(e.identifier),1)])]),_:2},1024))),128))]),_:2},1024)]),_:2},1024)],4)):L("",!0)])]}),_:2},1024)]),_:2},1024)]))),128))]),_:1})])])}],["__scopeId","data-v-82a37352"]]),Ae={class:"loader-content"},Ee={key:0,class:"loader-message"},He=a({name:"ModernLoader"}),Se=a({...He,props:{message:{type:String,default:"Loading..."},fullscreen:{type:Boolean,default:!1}},setup:e=>(t,a)=>(z(),O("div",{class:B(["loader-container",{fullscreen:e.fullscreen,inline:!e.fullscreen}])},[N("div",Ae,[a[0]||(a[0]=N("div",{class:"spinner"},[N("div",{class:"spinner-ring"}),N("div",{class:"spinner-core"})],-1)),e.message?(z(),O("div",Ee,j(e.message),1)):L("",!0)])],2))}),Ve=ae(Se,[["__scopeId","data-v-17c24025"]]),je={class:"container"},Le={key:1,class:"scrollable-content"},Me={class:"centered-content"},Ue=a({name:"xxxComponent"}),Be=a({...Ue,setup(e){const t=R(),a=ie(),{userFacilityName:i,user_ID:n}=F(a),s=T(""),r=T(0),d=T([]),c=T(""),u=T(""),p=T(""),g=$({page:1,itemsPerPage:10}),m=T(!1),h=T(!0),x=({page:e,itemsPerPage:t})=>{g.page=e,g.itemsPerPage=t,b()},b=async(e=!0)=>{e&&(m.value=!0);try{const e=await ee.getNCDClients(g.page,g.itemsPerPage,c.value,u.value,p.value);r.value=e.count,d.value=e.results}catch(t){}finally{e&&(m.value=!1,h.value=!1)}},w=[{placeHolder:"Search for client",dataHandler:async function(e){try{s.value=e.target.value,c.value="",u.value="",p.value="",s.value.length>0?(function(e){w[0].dataValue.value=e;const t=e.split(" ");c.value=t[0],u.value=t.length>=2?t[1]:"",p.value=t.length>=3?t[2]:""}(s.value),g.page=1,await b()):await b(!1)}catch(t){await b(!1)}},dataValue:T(),show_error:T(!1),error_message:"Please provide a reason"}],y=()=>{Z().setNavigationPayload(`NCD Active Patients (${i.value})`,!0,!1,"/","home",""),b()};return G(async()=>{y()}),J(()=>t.name,e=>{"NCDActivePatients"===e&&y()},{immediate:!0}),(e,t)=>(z(),U(q(f),null,{default:E(()=>[A(X),h.value?(z(),U(Ve,{key:0,fullscreen:!0,message:"Loading patient data..."})):L("",!0),Y(A(q(v),null,{default:E(()=>[N("div",je,[A(q(l),{class:"search-container"},{default:E(()=>[A(q(o),{class:"input-col",size:"12"},{default:E(()=>[A(ne,{placeholder:w[0].placeHolder,icon:q(K),inputValue:w[0].dataValue.value,"onUpdate:inputValue":w[0].dataHandler,minHeight:50,"-inner-action-btn-propeties":""},null,8,["placeholder","icon","inputValue","onUpdate:inputValue"])]),_:1})]),_:1}),m.value&&!h.value?(z(),U(Ve,{key:0,message:"Fetching patients..."})):L("",!0),m.value?L("",!0):Y((z(),O("div",Le,[N("div",Me,[!m.value||d.value.length>0?(z(),U(q(l),{key:0},{default:E(()=>[A(Ne,{clients:d.value},null,8,["clients"])]),_:1})):L("",!0)])],512)),[[Q,!h.value]])])]),_:1},512),[[Q,!h.value]]),Y(A(q(W),{class:"sticky-footer"},{default:E(()=>[A(q(l),null,{default:E(()=>[A(q(o),{size:"12"},{default:E(()=>[A(oe,{totalItems:r.value,currentPage:g.page,itemsPerPage:g.itemsPerPage,"onUpdate:pagination":x},null,8,["totalItems","currentPage","itemsPerPage"])]),_:1})]),_:1})]),_:1},512),[[Q,!h.value]])]),_:1}))}});e("default",ae(Be,[["__scopeId","data-v-c5fa53b7"]]))}}});
