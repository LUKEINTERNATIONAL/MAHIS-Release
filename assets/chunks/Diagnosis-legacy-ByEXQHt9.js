!function(){function e(e,a,t){return(a=function(e){var a=function(e,a){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var i=t.call(e,a||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===a?String:Number)(e)}(e,"string");return"symbol"==typeof a?a:a+""}(a))in e?Object.defineProperty(e,a,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[a]=t,e}System.register(["../index-legacy-DERpyovg.js","./vendor-legacy-DiKnuFk3.js","./NeonatalStepper-legacy-DJJwezzc.js","./VueMultiselectStaticList-legacy-Bl-Cr80k.js","./images-legacy-gTS9vAYU.js","./lodash-legacy-pOOc9Efu.js","./apexcharts-legacy-OrDB9Kfl.js","./SaveProgressModal-legacy-DzALyuRG.js","./enrollment-legacy-BWFKsMdA.js"],function(a,t){"use strict";var i,s,o,n,r,l,d,c,g,u,p,m,v,b,f,h,x,y,w,D,k,_,S,j,z,P,V,C,E,I,O,R,A,N,B,F,M,q;return{setters:[e=>{i=e._,s=e.u,o=e.a1,n=e.G,r=e.s,l=e.b2,d=e.T},e=>{c=e.d,g=e.bm,u=e.e,p=e.f,m=e.m,v=e.k,b=e.l,f=e.j,h=e.u,x=e.J,y=e.Q,w=e.K,D=e.r,k=e.w,_=e.c,S=e.O,j=e.p,z=e.cB,P=e.ff,V=e.D,C=e.bU,E=e.F,I=e.P,O=e.bF,R=e.bt,A=e.b2,N=e.a4,B=e.a7},e=>{F=e.N},e=>{M=e.V},e=>{q=e.I},null,null,null,null],execute:function(){var t=document.createElement("style");t.textContent=".multiselect-header-wrapper[data-v-4ce94d6e]{margin:20px 0;border-radius:4px;overflow:hidden}.question-header[data-v-4ce94d6e]{padding:12px 16px;font-weight:600;color:#333;background-color:#fce8a6;font-size:1.1em}.selection-instruction[data-v-4ce94d6e]{padding:8px 16px;font-size:.9em;color:#666;background-color:#fff;display:flex;justify-content:space-between;align-items:center}.clear-button[data-v-4ce94d6e]{background:none;border:none;color:#d9534f;cursor:pointer;font-size:.9em;padding:4px 8px;text-decoration:underline;transition:color .2s}.clear-button[data-v-4ce94d6e]:hover{color:#c9302c}.custom__tag[data-v-4ce94d6e]{background-color:#d8ead3;color:#333;padding:7px 5px;border-radius:3px;font-size:.9em;display:inline-flex;align-items:center;margin:4px}.custom__remove[data-v-4ce94d6e]{cursor:pointer;margin-left:8px;font-size:.8em;color:#d9534f;line-height:1}.selected-diagnoses-list[data-v-6f381d34]{padding:8px 0;min-height:60px}.empty-state[data-v-6f381d34]{padding:20px;text-align:center;background-color:#f8f9fa;border:2px dashed #dee2e6;border-radius:8px;color:#6c757d;margin:0 16px}.empty-state p[data-v-6f381d34]{margin:0;font-style:italic;font-size:.95em}.selected-item[data-v-6f381d34]{display:flex;align-items:center;background-color:#ded;color:#333;padding:12px 16px;margin:0 16px 10px;border-radius:6px;font-weight:500;border:2px solid #c5d9c5;transition:all .2s ease;position:relative;gap:10px}.selected-item.draggable-enabled[data-v-6f381d34]{cursor:move}.selected-item.draggable-enabled[data-v-6f381d34]:hover{border-color:#4a90e2;box-shadow:0 2px 8px rgba(74,144,226,.15);transform:translateY(-1px)}.selected-item.is-dragging[data-v-6f381d34]{background-color:#d1e7f8!important;border:2px dashed #316CBA!important;box-shadow:0 6px 12px rgba(49,108,186,.3)!important;transform:rotate(-2deg) translateY(-3px) scale(1.02);z-index:1000;opacity:1}.drag-handle-wrapper[data-v-6f381d34]{cursor:grab;padding:6px 8px;border:1px solid #BBDDBC;border-radius:4px;display:flex;align-items:center;justify-content:center;transition:all .2s;flex-shrink:0;background-color:rgba(255,255,255,.5);touch-action:none}.drag-handle-wrapper[data-v-6f381d34]:hover{border-color:#4a90e2;background-color:rgba(74,144,226,.1)}.drag-handle-wrapper[data-v-6f381d34]:active{cursor:grabbing;background-color:rgba(74,144,226,.2)}.drag-handle-wrapper.is-active[data-v-6f381d34]{border-color:#316cba;background-color:rgba(49,108,186,.15)}.drag-icon[data-v-6f381d34]{font-size:1.3em;line-height:1;color:#666;user-select:none;display:block}.rank-number[data-v-6f381d34]{font-weight:700;color:#4a90e2;font-size:.9em;min-width:28px;flex-shrink:0}.item-label[data-v-6f381d34]{flex-grow:1;word-break:break-word;line-height:1.4}.remove-button[data-v-6f381d34]{background:none;border:none;cursor:pointer;padding:6px 8px;border-radius:4px;transition:all .2s;flex-shrink:0;display:flex;align-items:center;justify-content:center}.remove-button[data-v-6f381d34]:hover{background-color:rgba(217,83,79,.1);transform:scale(1.1)}.remove-button[data-v-6f381d34]:active{transform:scale(.95)}.trash-icon[data-v-6f381d34]{font-size:1.2em;line-height:1}.ghost[data-v-6f381d34]{opacity:.4;background:#e3f2fd!important;border:2px dashed #4a90e2!important}.dragging-element[data-v-6f381d34]{opacity:1}@media(hover:none)and (pointer:coarse){.drag-handle-wrapper[data-v-6f381d34]{padding:10px 12px;border-width:2px}.drag-icon[data-v-6f381d34]{font-size:1.5em}.selected-item[data-v-6f381d34]{padding:14px 16px}.remove-button[data-v-6f381d34]{padding:8px 10px}.trash-icon[data-v-6f381d34]{font-size:1.4em}}.selected-item.draggable-enabled[data-v-6f381d34] *{user-select:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none}.drag-icon[data-v-6f381d34]{width:20px;height:20px;display:block}.center-content[data-v-0d34bf49]{display:flex;width:100%;max-width:1024px;margin:0 auto;padding:0 16px}.diagnosis-selection-panel[data-v-0d34bf49]{display:flex;flex-direction:column;width:100%;max-width:1024px;margin:0 auto;padding:20px 16px}.diagnosis-section[data-v-0d34bf49]{max-width:100%;margin-bottom:20px}.diagnosis-section-title[data-v-0d34bf49]{font-size:1.2em;font-weight:700;margin-bottom:15px;color:#333;padding-left:10px}.multiselect-component[data-v-0d34bf49]{width:100%;margin-top:10px}.separator[data-v-0d34bf49]{max-width:100%;border:0;border-top:1px solid #ddd;margin:30px 0}@media(max-width:768px){.diagnosis-section[data-v-0d34bf49],.separator[data-v-0d34bf49]{width:90vw;min-width:350px}.diagnosis-selection-panel[data-v-0d34bf49]{max-width:100%;padding:20px 0}}@media(max-width:350px){.diagnosis-section[data-v-0d34bf49],.separator[data-v-0d34bf49]{min-width:100%}}.description-box[data-v-0d34bf49]{background-color:#fce8a6;color:#333;font-weight:500;padding:10px 20px;margin-bottom:20px;text-align:center;border-radius:4px}.validation-error[data-v-0d34bf49]{color:#c00;background-color:#fcc;border:1px solid #cc0000;padding:10px;margin-top:20px;border-radius:4px;font-weight:600}.systems-suggestions-panel[data-v-999eb904]{margin:20px auto;padding:20px;font-family:Arial,sans-serif;max-width:1200px}.diagnosis-section[data-v-999eb904]{margin-bottom:30px;background-color:#f9f9f9;padding:20px;border-radius:8px;border:1px solid #e0e0e0}.diagnosis-section-title[data-v-999eb904]{font-size:1.2em;font-weight:600;color:#333;margin-bottom:15px;padding-bottom:10px}.suggestion-instruction[data-v-999eb904]{background-color:#fce8a6;padding:15px 20px;border-radius:8px;font-size:.95em;color:#5c4700;margin-top:30px;margin-bottom:30px;line-height:1.5;border-left:4px solid #f5c842}.suggestion-instruction strong[data-v-999eb904]{color:#3d2f00}.suggested-diagnosis-section[data-v-999eb904],.rejected-diagnosis-section[data-v-999eb904]{margin-bottom:30px}.suggested-title[data-v-999eb904],.rejected-title[data-v-999eb904]{font-size:1.2em;font-weight:600;color:#333;margin-bottom:15px}.empty-suggestions[data-v-999eb904]{padding:30px;text-align:center;background-color:#f8f9fa;border:2px dashed #dee2e6;border-radius:8px;color:#6c757d}.empty-suggestions p[data-v-999eb904]{margin:0;font-style:italic;font-size:1em}.suggestion-item[data-v-999eb904],.rejected-item[data-v-999eb904]{display:flex;align-items:center;justify-content:space-between;background-color:#fff;border:2px solid #e0e0e0;border-radius:8px;padding:14px 18px;margin-bottom:12px;box-shadow:0 1px 3px rgba(0,0,0,.05);transition:all .2s ease}.suggestion-item[data-v-999eb904]{cursor:pointer;position:relative}.suggestion-item[data-v-999eb904]:hover{border-color:#4a90e2;background-color:#f0f8ff;transform:translateY(-2px)}.suggestion-item[data-v-999eb904]:active{transform:translateY(0);box-shadow:0 2px 5px rgba(74,144,226,.2)}.suggestion-item[data-v-999eb904]:focus{outline:3px solid #4a90e2;outline-offset:2px}.suggestion-content[data-v-999eb904],.rejected-content[data-v-999eb904]{flex-grow:1;margin-right:15px}.suggestion-label[data-v-999eb904]{font-weight:600;color:#2d5016;margin:0 0 6px;display:flex;align-items:center;gap:10px;font-size:1em}.add-indicator[data-v-999eb904]{display:inline-flex;align-items:center;justify-content:center;min-width:24px;height:24px;background-color:#4a90e2;color:#fff;border-radius:50%;font-size:1.3em;font-weight:700;transition:all .2s;line-height:1}.suggestion-item:hover .add-indicator[data-v-999eb904]{background-color:#357abd;transform:scale(1.15) rotate(90deg)}.rejected-label[data-v-999eb904]{font-weight:600;color:#c00;margin:0 0 6px;font-size:1em}.suggestion-details[data-v-999eb904],.rejected-details[data-v-999eb904]{font-size:.88em;color:#555;line-height:1.4;margin:0}.suggestion-action-button[data-v-999eb904]{background:none;border:none;cursor:pointer;padding:8px;border-radius:50%;transition:all .2s;display:flex;align-items:center;justify-content:center;flex-shrink:0;min-width:36px;min-height:36px}.reject-button[data-v-999eb904]{color:#d9534f}.reject-button[data-v-999eb904]:hover{background-color:#ffe0e0;transform:scale(1.15)}.reject-button[data-v-999eb904]:active{transform:scale(.95)}.undo-button[data-v-999eb904]{color:#007bff}.undo-button[data-v-999eb904]:hover{background-color:#e0f0ff;transform:scale(1.15) rotate(180deg)}.undo-button[data-v-999eb904]:active{transform:scale(.95)}.cross-icon[data-v-999eb904],.undo-icon[data-v-999eb904]{font-size:1.3em;line-height:1}.rejected-title[data-v-999eb904]{margin-top:30px;border-top:2px solid #ddd;padding-top:20px;color:#a00}.rejected-item[data-v-999eb904]{background-color:#fff5f5;border:2px solid #f0d0d0;opacity:.85}.rejected-item[data-v-999eb904]:hover{border-color:#007bff;box-shadow:0 3px 8px rgba(0,123,255,.2);opacity:1;transform:translateY(-1px)}@media(prefers-reduced-motion:reduce){.suggestion-item[data-v-999eb904],.rejected-item[data-v-999eb904],.suggestion-action-button[data-v-999eb904],.add-indicator[data-v-999eb904]{transition:none}.suggestion-item:hover .add-indicator[data-v-999eb904],.undo-button[data-v-999eb904]:hover{transform:scale(1.15) rotate(0)}}@media(hover:none)and (pointer:coarse){.suggestion-item[data-v-999eb904],.rejected-item[data-v-999eb904]{padding:16px 18px}.suggestion-action-button[data-v-999eb904]{padding:12px;min-width:44px;min-height:44px}.add-indicator[data-v-999eb904]{min-width:28px;height:28px;font-size:1.5em}}@media(max-width:768px){.systems-suggestions-panel[data-v-999eb904]{padding:15px;margin:10px auto}.diagnosis-section[data-v-999eb904]{padding:15px}.suggestion-item[data-v-999eb904],.rejected-item[data-v-999eb904]{flex-direction:column;align-items:flex-start;gap:12px}.suggestion-action-button[data-v-999eb904]{align-self:flex-end}}.validation-error[data-v-999eb904]{color:#c00;background-color:#fcc;border:1px solid #cc0000;padding:10px;margin-top:20px;border-radius:4px;font-weight:600}.diagnosis-summary-panel[data-v-60387580]{margin:0 auto;padding:20px;font-family:Arial,sans-serif}.summary-header[data-v-60387580]{font-size:2em;font-weight:700;color:#38761d;text-align:center;margin-bottom:30px;padding-bottom:10px;border-bottom:2px solid #e0e0e0}.summary-section[data-v-60387580]{margin-bottom:25px;border:1px solid #f0f0f0;border-radius:6px;overflow:hidden;box-shadow:0 1px 3px rgba(0,0,0,.05)}.section-title[data-v-60387580]{font-size:1.3em;font-weight:600;padding:15px;color:#333}.diagnosis-list[data-v-60387580]{padding:10px 15px}.diagnosis-item[data-v-60387580]{font-size:1.1em;padding:8px 0;color:#2c3e50}.primary-item[data-v-60387580]{font-weight:700}.differential-item[data-v-60387580]{padding-left:10px;border-left:3px solid #d8ead3;margin-bottom:5px}.no-data-item[data-v-60387580]{font-style:italic;color:#999}\n/*$vite$:1*/",document.head.appendChild(t);const $={class:"multiselect-header-wrapper"},U={key:0,class:"question-header"},W={class:"selection-instruction"},Y={class:"custom__tag"},T=["onClick"],H=i(c({name:"VueMultiselectStyledMulti",components:{VueMultiselect:g},__name:"VueMultiselectStyledMulti",props:{options:{type:Array,required:!0,validator:e=>e.every(e=>"label"in e&&"value"in e)},modelValue:{type:Array,default:()=>[]}},emits:["update:modelValue"],setup(e,{emit:a}){const t=a,i=()=>{t("update:modelValue",[])};return(a,s)=>(p(),u("div",$,[a.$slots.header?(p(),u("div",U,[f(a.$slots,"header",{},void 0,!0)])):m("",!0),v("div",W,[s[1]||(s[1]=v("span",null,"Select one or more.",-1)),e.modelValue.length>0?(p(),u("button",{key:0,onClick:i,class:"clear-button",type:"button"},"Clear All")):m("",!0)]),b(h(g),{"model-value":e.modelValue,"onUpdate:modelValue":s[0]||(s[0]=e=>t("update:modelValue",e)),options:e.options,"track-by":"value",label:"label",searchable:!0,multiple:!0,"close-on-select":!1,"hide-selected":!0},{tag:x(({option:e,remove:a})=>[v("span",Y,[v("span",null,w(e.label),1),v("span",{class:"custom__remove",onClick:t=>a(e)},"âŒ",8,T)])]),placeholder:x(()=>[...s[2]||(s[2]=[y(" Select the appropriate diagnosis... ",-1)])]),_:1},8,["model-value","options"])]))}}),[["__scopeId","data-v-4ce94d6e"]]),J={class:"selected-diagnoses-list"},K={key:0,class:"empty-state"},L=["src"],G={key:1,class:"rank-number"},Q={class:"item-label"},X=["onClick","aria-label","title"],Z=c({__name:"SelectedDiagnosisDisplay",props:{items:{default:()=>[]},isDifferential:{type:Boolean,default:!1},allowDragging:{type:Boolean,default:!1}},emits:["remove-item","update:items"],setup(e,{emit:a}){const t=e,i=a,s=D([]),o=D(null);k(()=>t.items,e=>{s.value=e?[...e]:[]},{immediate:!0,deep:!0});const n=_(()=>({animation:250,disabled:!t.allowDragging||!t.isDifferential,ghostClass:"ghost",dragClass:"dragging-element",forceFallback:!0,fallbackTolerance:5,touchStartThreshold:5,delay:0,delayOnTouchOnly:!0})),r=e=>t.allowDragging&&t.isDifferential,l=e=>{void 0!==e.oldIndex&&s.value[e.oldIndex]&&(o.value=s.value[e.oldIndex].value)},d=e=>{i("update:items",s.value),o.value=null};return(a,t)=>(p(),u("div",J,[e.items&&0!==e.items.length?(p(),S(h(P),z({key:1,modelValue:s.value,"onUpdate:modelValue":t[0]||(t[0]=e=>s.value=e),"item-key":"value",handle:".drag-handle-wrapper",onStart:l,onEnd:d},n.value,{move:r}),{item:x(({element:a,index:s})=>[v("div",{class:j(["selected-item",{differential:e.isDifferential,"is-dragging":o.value===a.value,"draggable-enabled":e.allowDragging&&e.isDifferential}])},[e.allowDragging&&e.isDifferential?(p(),u("div",{key:0,class:j(["drag-handle-wrapper",{"is-active":o.value===a.value}]),title:"Drag to reorder"},[v("img",{src:h(q).icons.dragIcon,alt:"Drag to reorder",class:"drag-icon"},null,8,L)],2)):m("",!0),e.isDifferential?(p(),u("span",G,"#"+w(s+1),1)):m("",!0),v("span",Q,w(a.label),1),v("button",{onClick:e=>(e=>{i("remove-item",e)})(a),class:"remove-button",type:"button","aria-label":"Remove "+a.label,title:"Remove "+a.label},[...t[1]||(t[1]=[v("span",{class:"trash-icon"},"ðŸ—‘ï¸",-1)])],8,X)],2)]),_:1},16,["modelValue"])):(p(),u("div",K,[v("p",null,"No "+w(e.isDifferential?"differential":"working")+" diagnosis selected",1)]))]))}}),ee=i(Z,[["__scopeId","data-v-6f381d34"]]),ae=V("diagnosisStore",{state:()=>({workingDiagnosis:null,differentialDiagnoses:[],diagnosisNotes:""}),actions:{setWorkingDiagnosis(e){this.workingDiagnosis=e},setDifferentialDiagnoses(e){this.differentialDiagnoses=e},addDifferentialDiagnosis(e){this.differentialDiagnoses.some(a=>a.value===e.value)||this.differentialDiagnoses.push(e)},removeDifferentialDiagnosis(e){this.differentialDiagnoses=this.differentialDiagnoses.filter(a=>a.value!==e.value)},setDiagnosisNotes(e){this.diagnosisNotes=e},resetDiagnosisData(){this.$reset(),console.log("Diagnosis Store Data has been reset.")}},persist:!0}),te={class:"diagnosis-selection-panel"},ie={class:"diagnosis-section"},se={class:"diagnosis-section"},oe={key:0,class:"validation-error"},ne=i(c({__name:"DiagnosisSelection",setup(e,{expose:a}){const t=M,i=ae(),s=D(null),o=[{label:"Hypoglycaemia (symptomatic)",value:"Hypoglycaemia1"},{label:"Abscess",value:"Abscess"},{label:"Fever",value:"Fever"},{label:"Birth Asphyxia",value:"Asphyxia"},{label:"Neonatal Sepsis (Early onset - Symptomatic)",value:"Neonatal Sepsis - Early Onset"},{label:"Prematurity with Respiratory Distress",value:"Prematurity with RDS"},{label:"Suspected Neonatal Sepsis",value:"Sepsis_Sus"},{label:"Possible Meconium Aspiration",value:"Meconium Aspiration"}],n=_({get:()=>i.workingDiagnosis,set:e=>{s.value=null,i.setWorkingDiagnosis(e)}}),r=_(()=>i.workingDiagnosis?[i.workingDiagnosis]:[]),l=()=>{i.setWorkingDiagnosis(null)},d=_({get:()=>i.differentialDiagnoses,set:e=>{s.value=null,i.setDifferentialDiagnoses(e)}}),c=_(()=>i.differentialDiagnoses),g=e=>{i.removeDifferentialDiagnosis(e)};return a({validateForm:function(){const e={};return!!i.workingDiagnosis?(s.value=null,console.log("Validation Success: Diagnosis Selection passed.")):(s.value="A Primary Diagnosis (Working Diagnosis) is required to proceed to the next step.",e.primaryDiagnosisRequired=s.value,console.error("Validation Error: Primary Diagnosis is missing.")),Object.keys(e).length>0?e:null}}),(e,a)=>(p(),u("div",te,[v("div",ie,[a[3]||(a[3]=v("div",{class:"description-box"}," Select the diagnoses you think the baby has (you can select more than 1) ",-1)),a[4]||(a[4]=v("h3",{class:"diagnosis-section-title"},"Your Selected Working Diagnosis",-1)),b(ee,{items:r.value,onRemoveItem:l},null,8,["items"]),(p(),S(C(h(t)),{modelValue:n.value,"onUpdate:modelValue":a[0]||(a[0]=e=>n.value=e),options:o,class:"multiselect-component"},{header:x(()=>[...a[2]||(a[2]=[y(" Primary Diagnosis (Select ONE) ",-1)])]),_:1},8,["modelValue"]))]),a[7]||(a[7]=v("hr",{class:"separator"},null,-1)),v("div",se,[a[6]||(a[6]=v("h3",{class:"diagnosis-section-title"},"Your Selected Differential Diagnosis",-1)),b(ee,{items:c.value,"is-differential":!0,onRemoveItem:g},null,8,["items"]),b(H,{modelValue:d.value,"onUpdate:modelValue":a[1]||(a[1]=e=>d.value=e),options:o,class:"multiselect-component"},{header:x(()=>[...a[5]||(a[5]=[y(" Differential Diagnoses ",-1)])]),_:1},8,["modelValue"]),s.value?(p(),u("div",oe,w(s.value),1)):m("",!0)])]))}}),[["__scopeId","data-v-0d34bf49"]]),re={class:"systems-suggestions-panel"},le={class:"diagnosis-section"},de={class:"diagnosis-section"},ce={key:0,class:"validation-error"},ge={class:"suggested-diagnosis-section"},ue={key:0,class:"empty-suggestions"},pe=["onClick","aria-label","onKeydown"],me={class:"suggestion-content"},ve={class:"suggestion-label"},be={class:"suggestion-details"},fe=["onClick","title","aria-label"],he={key:0,class:"rejected-diagnosis-section"},xe={class:"rejected-content"},ye={class:"rejected-label"},we={class:"rejected-details"},De=["onClick","title","aria-label"],ke=i(c({__name:"SystemsSuggestions",setup(e,{expose:a}){const t=ae(),i=D(null),s=_(()=>t.workingDiagnosis?[t.workingDiagnosis]:[]),o=()=>{t.setWorkingDiagnosis(null),i.value=null},n=e=>{t.removeDifferentialDiagnosis(e),i.value=null},r=e=>{t.setDifferentialDiagnoses(e),i.value=null},l=[{label:"Term with Respiratory Distress",value:"Term_RD",details:"Baby is term and showed one of the signs/risks of respiratory distress - this baby needs referral."},{label:"Mild Hypothermia",value:"Mild_Hypothermia",details:"Baby's temperature is recorded as 36 degrees up to 36.4 degrees."},{label:"Neonatal Jaundice",value:"Neonatal_Jaundice",details:"Baby shows signs of yellowing of skin or eyes within first week of life."}],d=D([]),c=_(()=>l.filter(e=>{const a=t.differentialDiagnoses.some(a=>a.value===e.value),i=d.value.some(a=>a.value===e.value);return!a&&!i})),g=e=>{t.addDifferentialDiagnosis({label:e.label,value:e.value}),i.value=null};return a({validateForm:function(){const e={};if(!!t.workingDiagnosis)i.value=null,console.log("Validation Success: Systems Suggestions passed.");else{const a="A Primary Diagnosis (Working Diagnosis) must be confirmed before reviewing and submitting the final diagnosis.";i.value=a,e.primaryDiagnosisRequired=a,console.error("Validation Error: Primary Diagnosis removed or missing at review stage.")}return Object.keys(e).length>0?e:null}}),(e,a)=>(p(),u("div",re,[v("div",le,[a[0]||(a[0]=v("h3",{class:"diagnosis-section-title"},"Your Selected Working Diagnosis",-1)),b(ee,{items:s.value,"allow-dragging":!1,onRemoveItem:o},null,8,["items"])]),v("div",de,[a[1]||(a[1]=v("h3",{class:"diagnosis-section-title"},"Your Selected Differential Diagnosis",-1)),b(ee,{items:h(t).differentialDiagnoses,"is-differential":!0,"allow-dragging":!0,onRemoveItem:n,"onUpdate:items":r},null,8,["items"]),i.value?(p(),u("div",ce,w(i.value),1)):m("",!0)]),a[8]||(a[8]=v("p",{class:"suggestion-instruction"},[y(" Please consider the suggested diagnoses below. "),v("strong",null,"Click on a suggestion to add it to your differential diagnosis"),y(", or click the âŒ button to reject it. ")],-1)),v("div",ge,[a[5]||(a[5]=v("h3",{class:"suggested-title"},"Suggested Diagnosis",-1)),0===c.value.length?(p(),u("div",ue,[...a[2]||(a[2]=[v("p",null,"No suggestions available",-1)])])):m("",!0),(p(!0),u(E,null,I(c.value,e=>(p(),u("div",{key:e.value,class:"suggestion-item",onClick:a=>g(e),role:"button",tabindex:"0","aria-label":`Add ${e.label} to differential diagnosis`,onKeydown:[O(a=>g(e),["enter"]),O(R(a=>g(e),["prevent"]),["space"])]},[v("div",me,[v("p",ve,[a[3]||(a[3]=v("span",{class:"add-indicator"},"+",-1)),y(" "+w(e.label),1)]),v("p",be,w(e.details),1)]),v("button",{onClick:R(a=>(e=>{d.value.push(e)})(e),["stop"]),class:"suggestion-action-button reject-button",title:`Reject ${e.label}`,"aria-label":`Reject ${e.label}`},[...a[4]||(a[4]=[v("span",{class:"cross-icon"},"âŒ",-1)])],8,fe)],40,pe))),128))]),d.value.length>0?(p(),u("div",he,[a[7]||(a[7]=v("h3",{class:"rejected-title"},"Rejected Diagnosis",-1)),(p(!0),u(E,null,I(d.value,e=>(p(),u("div",{key:e.value,class:"rejected-item"},[v("div",xe,[v("p",ye,w(e.label),1),v("p",we,w(e.details),1)]),v("button",{onClick:a=>{return t=e,void(d.value=d.value.filter(e=>e.value!==t.value));var t},class:"suggestion-action-button undo-button",title:`Restore ${e.label}`,"aria-label":`Restore ${e.label} to suggestions`},[...a[6]||(a[6]=[v("span",{class:"undo-icon"},"â†»",-1)])],8,De)]))),128))])):m("",!0)]))}}),[["__scopeId","data-v-999eb904"]]),_e={class:"diagnosis-summary-panel"},Se={class:"summary-section"},je={class:"diagnosis-list"},ze={class:"diagnosis-item primary-item"},Pe={class:"summary-section"},Ve={class:"diagnosis-list"},Ce={key:0,class:"no-data-item"},Ee=i(c({__name:"DiagnosisSummary",setup(e){const a=ae(),t=_(()=>{var e;return(null===(e=a.workingDiagnosis)||void 0===e?void 0:e.label)||"(None selected)"}),i=_(()=>a.differentialDiagnoses);return(e,a)=>(p(),u("div",_e,[v("div",Se,[a[0]||(a[0]=v("h2",{class:"section-title"},"Primary Diagnosis",-1)),v("div",je,[v("p",ze,w(t.value),1)])]),v("div",Pe,[a[1]||(a[1]=v("h2",{class:"section-title"},"Differential Diagnosis",-1)),v("div",Ve,[(p(!0),u(E,null,I(i.value,e=>(p(),u("p",{key:e.value,class:"diagnosis-item differential-item"},w(e.label),1))),128)),i.value.length?m("",!0):(p(),u("p",Ce," (None selected) "))])])]))}}),[["__scopeId","data-v-60387580"]]);class Ie extends l{constructor(e,a){super(e,41,a)}}class Oe extends l{constructor(a,t){super(a,41,t),e(this,"diagnosis_service",void 0),e(this,"computeParentObservation",async e=>({tag:e,obs:await this.diagnosis_service.buildValueCoded(e,e)})),e(this,"childObservation",async e=>await this.diagnosis_service.buildValueCoded(e,e)),this.diagnosis_service=new Ie(a,t)}async ensureEncounterExists(){if(this.encounterID)return;const e=await this.diagnosis_service.createEncounter();if(!e)throw new Error("Failed to create encounter");if(this.encounterID=e.encounter_id,e.patient_id!==this.patientID)throw new Error("Encounter created for the wrong patient! Context inconsistency detected.")}async onSubmit(e){await this.ensureEncounterExists(),this.saveObservationList(e)}}const Re=async e=>{try{const a=ae();if(!a.workingDiagnosis)throw r("Diagnosis is required"),new Error("Diagnosis is required");const t={primaryDiagnosisObservation:await e.computeParentObservation("Primary diagnosis")},i=await e.childObservation(a.workingDiagnosis.value);if(!i)throw r("Primary diagnosis observations are required"),new Error("Primary diagnosis observations are required");i&&(t.primaryDiagnosisObservation.obs.child=[i]),await e.onSubmit([t.primaryDiagnosisObservation.obs]),a.setWorkingDiagnosis(null),console.log("PrimaryDiagnosisData",t)}catch(a){throw a}},Ae=async e=>{try{const a=ae(),t={secondaryDiagnosisObservation:await e.computeParentObservation("Secondary diagnosis")},i=a.differentialDiagnoses.map(async a=>await e.childObservation(a.value)),s=await Promise.all(i);if(!(s.length>0))return void console.log("No secondary diagnoses to save.");t.secondaryDiagnosisObservation.obs.child=s,await e.onSubmit([t.secondaryDiagnosisObservation.obs]),a.setDifferentialDiagnoses([]),console.log("SecondaryDiagnosisData",t)}catch(a){throw a}},Ne=async()=>{try{const e=s(),{patient:a}=A(e),t=o(),i=new Oe(a.value.patientID,t.user_ID);await Promise.all([Re(i),Ae(i)]),console.log("SUCCESS: All Diagnosis sections saved successfully!"),n("Diagnosis saved successfully")}catch(e){console.error("FAILED to save diagnosis:",e),r("Failed to save diagnosis. Please try again.")}};a("default",c({__name:"Diagnosis",setup(e){const a=D("1"),t=[{title:"Diagnosis",value:"1",component:ne},{title:"Systems Suggestions",value:"2",component:ke},{title:"Summary",value:"3",component:Ee}],i=D(t.map((e,a)=>({title:e.title,number:a+1,checked:!1,class:0===a?"open_step common_step":"common_step",last_step:a===t.length-1?"last_step":""}))),s=e=>{e&&e.value&&i.value.forEach((a,t)=>{e.value===(t+1).toString()?(a.class="open_step common_step",a.checked=!1):t<parseInt(e.value)-1?(a.class="common_step color_white",a.checked=!0):(a.class="common_step",a.checked=!1)})},o=e=>e===t.length-1?Ne:()=>Promise.resolve();return(e,n)=>(p(),S(h(B),{class:"neonatal-enrollment-page"},{default:x(()=>[b(d),b(h(N),{fullscreen:!0},{default:x(()=>[b(F,{wizardData:i.value,StepperData:t,stepperTitle:"General Examination",openStepper:a.value,backUrl:"/patientProfile",getSaveFunction:o,onUpdateStatus:s,"flow-type":"enrollment","show-componet-title":!0},null,8,["wizardData","openStepper"])]),_:1})]),_:1}))}}))}}})}();
