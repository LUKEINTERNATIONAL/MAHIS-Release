import{c as $,d as M,r as s,O as x,f as F,u as m,bq as O,J as d,l as o,aU as z,aV as B,a as Fe,H as K,e as Se,m as te,k as h,_ as Ie,Q as He,F as Le,ao as qe,cp as $e,w as y,a3 as Me,i as R,bM as Ee,v as A,a6 as We,b9 as q}from"./vendor-DXb7_Vik.js";import{aB as r,aC as G,bp as Oe,l as Z,aA as ze,b4 as Ge,J as ve,M as Ue,S as _e,af as Ce,b2 as Te,t as ge,G as Ne,_ as je,aH as De,u as Je,aI as Qe,aJ as Ke,aK as Ze,aL as Xe,d as et,aM as tt,g as at,Z as nt,e as ot,T as it,N as st,H as pe,aN as X,aO as rt,aP as Pe,aQ as lt,aS as ee,aT as ut,a0 as ct}from"../index-BTzlHWti.js";import{D as dt}from"./DemographicBar-eNQEFxwo.js";import{_ as pt}from"./Vitals.vue_vue_type_script_setup_true_lang-B_DkBDPq.js";import{_ as mt}from"./LevelOfConsciousness.vue_vue_type_script_setup_true_lang-C2_BbRB4.js";import{p as vt}from"./previousComplaints-PKnuwSqq.js";import{P as _t}from"./patient_complaints_service-BdNav1LS.js";import{D as gt}from"./DashBox-B6L57Iw1.js";import{u as ft,a as me,_ as bt,s as yt,c as ht,b as St}from"./nonPharmaTherapyStore-BeISV_Ld.js";import{l as Ct}from"./lodash-NJiRuGo9.js";import{a as Be,b as Tt}from"./formatServerData-7qThvcTY.js";import{u as Dt}from"./usePatientProfile-Sa7_6IKd.js";import"./apexcharts-BuY4MMmo.js";import"./drug_prescription_service-ySIgUyjo.js";import"./patient_diagnosis_service-CQuOZ-dD.js";import"./Registration-BkEh1pO3.js";import"./useLocation-Cp0h58AO.js";import"./vaccines_service-ClIn1bil.js";import"./sms_service-6uMMsQoU.js";import"./EIRreportsStore-BZue7Psd.js";import"./Export-CsyA_qG4.js";import"./useNeonatalEnrollmentStore-CKsTgfLA.js";import"./enrollment-DU-PLRUa.js";const Pt=()=>({airWayBreathingFormSection:$(()=>[{componentType:"Heading",name:"Airway and Breathing",grid:{s:"4"}},{componentType:"radioButtonField",header:"is Airway Compromised",name:"is_airway_compromised",obsValueType:"value_text",validation:r.required,type:"standard",grid:{s:"4"},options:[{label:"Yes",value:"Yes"},{label:"No",value:"No"}]},{componentType:"radioButtonField",header:"is Breathing Abnormal?",name:"is_breathing_abnormal",obsValueType:"value_text",validation:r.required,type:"standard",grid:{s:"4"},options:[{label:"Yes",value:"Yes"},{label:"No",value:"No"}]},{componentType:"Dashes",condition:e=>e.is_breathing_abnormal==="Yes"},{componentType:"Heading",name:"Exhaustion and Inability to Speak",grid:{s:"4"},condition:e=>e.is_breathing_abnormal==="Yes"},{componentType:"radioButtonField",header:"Severe Respiratory dysfunction or exhaustion ",name:"severe_respiratory_dysfunction_or_exhaustion",obsValueType:"value_text",validation:r.required,type:"standard",grid:{s:"4"},condition:e=>e.is_breathing_abnormal==="Yes",options:[{label:"Yes",value:"Yes"},{label:"No",value:"No"}]},{componentType:"radioButtonField",header:"Inability to speak in complete sentences ",name:"inability_to_speak_in_complete_sentences",obsValueType:"value_text",validation:r.required,type:"standard",grid:{s:"4"},condition:e=>e.is_breathing_abnormal==="Yes",options:[{label:"Yes",value:"Yes"},{label:"No",value:"No"}]},{componentType:"Dashes",condition:e=>e.is_breathing_abnormal==="Yes"},{componentType:"Heading",name:"Stridor and Reduced Consciousness",grid:{s:"4"},condition:e=>e.is_breathing_abnormal==="Yes"},{componentType:"radioButtonField",header:"Stridor",name:"stridor",obsValueType:"value_text",validation:r.required,type:"standard",grid:{s:"4"},condition:e=>e.is_breathing_abnormal==="Yes",options:[{label:"Yes",value:"Yes"},{label:"No",value:"No"}]},{componentType:"radioButtonField",header:"Reduced Level of Consciousness due to low oxygen",name:"reduced_level_of_consciousness_due_to_low_oxygen",obsValueType:"value_text",validation:r.required,type:"standard",grid:{s:"4"},condition:e=>e.is_breathing_abnormal==="Yes",options:[{label:"Yes",value:"Yes"},{label:"No",value:"No"}]}])}),Bt=M({__name:"AirwayBreathing",setup(N){const e=s(null),S=Pt().airWayBreathingFormSection;return(_,D)=>(F(),x(m(O),null,{default:d(()=>[o(m(z),null,{default:d(()=>[o(G,{formData:m(S),ref_key:"formRef",ref:e},null,8,["formData"])]),_:1})]),_:1}))}}),Ft=()=>({bloodCirculationFormSection:$(()=>[{componentType:"Heading",name:"Circulation",grid:{s:"4"}},{componentType:"radioButtonField",header:"Is Circulation Abnormal",name:"is_circulation_abnormal",obsValueType:"value_text",validation:r.required,type:"standard",grid:{s:"4"},options:[{label:"Yes",value:"Yes"},{label:"No",value:"No"}]},{componentType:"Dashes",condition:e=>e.is_circulation_abnormal==="Yes"},{componentType:"Heading",name:"Heart Rate and Pulse",grid:{s:"4"},condition:e=>e.is_circulation_abnormal==="Yes"},{componentType:"radioButtonField",header:"Heart Rate",name:"heart_rate",obsValueType:"value_text",validation:r.required,type:"standard",grid:{s:"4"},condition:e=>e.is_circulation_abnormal==="Yes",options:[{label:"Weak/Thready",value:"Weak/Thready"},{label:"Strong",value:"Strong"}]},{componentType:"radioButtonField",header:"Pulse Rate",name:"pulse_rate",obsValueType:"value_text",validation:r.required,type:"standard",grid:{s:"4"},condition:e=>e.is_circulation_abnormal==="Yes",options:[{label:"Irregular",value:"Irregular"},{label:"Regular",value:"Regular"}]},{componentType:"Dashes",condition:e=>e.is_circulation_abnormal==="Yes"},{componentType:"Heading",name:"Reduced Urinary and Clammy Peripherals",grid:{s:"4"},condition:e=>e.is_circulation_abnormal==="Yes"},{componentType:"radioButtonField",header:"Reduced urinary output < 30ml/hr",name:"reduced_urinary_output_less_than_30ml_per_hr",obsValueType:"value_text",validation:r.required,type:"standard",grid:{s:"4"},condition:e=>e.is_circulation_abnormal==="Yes",options:[{label:"Yes",value:"Yes"},{label:"No",value:"No"}]},{componentType:"radioButtonField",header:"Cool clammy peripherals or cap refill > 4 seconds",name:"cool_clammy_peripherals_or_cap_refill_greater_than_4_seconds",obsValueType:"value_text",validation:r.required,type:"standard",grid:{s:"4"},condition:e=>e.is_circulation_abnormal==="Yes",options:[{label:"Yes",value:"Yes"},{label:"No",value:"No"}]},{componentType:"Dashes",condition:e=>e.is_circulation_abnormal==="Yes"},{componentType:"Heading",name:"Hemorrhage and Skin Turgor",grid:{s:"4"},condition:e=>e.is_circulation_abnormal==="Yes"},{componentType:"radioButtonField",header:"Hemorrhage",name:"hemorrhage",obsValueType:"value_text",validation:r.required,type:"standard",grid:{s:"4"},condition:e=>e.is_circulation_abnormal==="Yes",options:[{label:"Yes",value:"Yes"},{label:"No",value:"No"}]},{componentType:"radioButtonField",header:"Dehydration skin turgor, sunken eyes",name:"dehydration_skin_turgor_sunken_eyes",obsValueType:"value_text",validation:r.required,type:"standard",grid:{s:"4"},condition:e=>e.is_circulation_abnormal==="Yes",options:[{label:"Yes",value:"Yes"},{label:"No",value:"No"}]}])}),Nt=M({__name:"BloodCirculation",setup(N){const e=s(null),S=Ft().bloodCirculationFormSection;return(_,D)=>(F(),x(m(O),null,{default:d(()=>[o(m(z),null,{default:d(()=>[o(G,{formData:m(S),ref_key:"formRef",ref:e},null,8,["formData"])]),_:1})]),_:1}))}}),Yt=()=>({disabilityFormSection:$(()=>[{componentType:"Heading",name:"Consciousness",grid:{s:"4"}},{componentType:"radioButtonField",header:"Does the patient have a reduced Level of consciousness",name:"is_reduced_level_of_consciousness",obsValueType:"value_text",validation:r.required,type:"standard",grid:{s:"8"},options:[{label:"Yes",value:"Yes"},{label:"No",value:"No"}]},{componentType:"Dashes",condition:e=>e.is_reduced_level_of_consciousness==="Yes"},{componentType:"Heading",name:"Blood Glucose and GCS",grid:{s:"4"},condition:e=>e.is_reduced_level_of_consciousness==="Yes"},{componentType:"inputField",header:"Blood Glucose",name:"blood_glucose",type:"number",grid:{s:"4"},disabled:e=>!0,condition:e=>e.is_reduced_level_of_consciousness==="Yes"},{componentType:"inputField",header:"GCS",name:"gcs",type:"number",grid:{s:"4"},disabled:e=>!0,condition:e=>e.is_reduced_level_of_consciousness==="Yes"}])}),wt=M({__name:"Disability",setup(N){const e=s(null),S=Yt().disabilityFormSection;return(_,D)=>(F(),x(m(O),null,{default:d(()=>[o(m(z),null,{default:d(()=>[o(G,{formData:m(S),ref_key:"formRef",ref:e},null,8,["formData"])]),_:1})]),_:1}))}}),xt={key:0},kt={style:{"align-content":"center"}},Vt={class:"ion-padding",slot:"content"},Rt=M({__name:"PresentingComplaints",setup(N,{expose:e}){const S=Oe(),{presentingComplaints:_}=B(S),D=s(Z),U=s(!0),k=s(!1),V=s(!0),C=s(!1),T=s([]),E=s([]),ae=s(),ne=$(()=>[{componentType:"multiSelectInputField",header:"Presenting Complaints",name:"PresentingComplaints",trackBy:"concept_id",icon:Z.search,hideSelected:!0,validation:a=>j(a==null?void 0:a.name,T.value)?"Presenting complaint already added":r.required(a),options:E.value,grid:{s:"6"}},{componentType:"inputField",header:"Duration",name:"duration",icon:Z.time,validation:a=>r.isNotEmptyandNumber(a),grid:{s:"6"},unitOptions:[{label:"Hours",value:"Hours"},{label:"Days",value:"Days"},{label:"Weeks",value:"Weeks"},{label:"Months",value:"Months"},{label:"Years",value:"Years"}],unitValidation:a=>!a||a===""?"Please select a unit.":null},{componentType:"inputField",header:"Specify the presenting complaint(s)",name:"Other (specify)",icon:Z.editPen,validation:a=>j(a,T.value)?"Presenting complaint already added":r.required(a),condition:a=>{var i;return((i=a==null?void 0:a.PresentingComplaints)==null?void 0:i.name)==="Other"}},{componentType:"Alert",condition:a=>{var i;return r.required((i=a==null?void 0:a.PresentingComplaints)==null?void 0:i.name)!=null},backgroundColor:"lightyellow",textColor:"black",value:"Please search thoroughly for the complaint. If it is not listed, search and select the 'Other' option to specify the complaint.",name:"noMatchAlert"}]),{formRef:I}=ze(),oe=async()=>{E.value=await _t.getComplaintsList("Presenting complaint"),Ue(_.value,"PresentingComplaints","multiSelectData",E.value)},W=()=>{U.value=!1,V.value=!1,k.value=!0},ie=async()=>{var u,P;const a=(u=I.value)==null?void 0:u.getFormValues();((P=I.value)==null?void 0:P.validateForm())==null&&(se(a),k.value=!1,V.value=!0)},se=a=>{var H;const i=a.duration+" "+a.duration_unit,u=a.PresentingComplaints,P=u.name==="Other"?a["Other (specify)"]:u.name;T.value.push({actionBtn:!0,btn:["delete"],name:P,concept_id:u.concept_id,duration:u.duration,durationUnits:u.duration_unit,display:[P,i],data:[{concept_id:8578,value_coded:u.concept_id,obs_datetime:_e.getSessionDate(),child:[{concept_id:u.concept_id,value_text:i,obs_datetime:_e.getSessionDate()}]}]}),(H=I.value)==null||H.resetForm(),C.value=!0},j=(a,i)=>i.some(u=>u.name===a),p=a=>{T.value=T.value.filter(i=>i.display[0]!==a.name)},re=async()=>{const a=await Ce.getObsByEncounterIdAndDate(Te.PRESENTING_COMPLAINTS),i=T.value.flatMap(u=>u.data);if(i.length<=0&&a.length<=0)return ge("Presenting complaints is required");i.length<=0||(await Ce.addObsToEncounterPatient(i,Te.PRESENTING_COMPLAINTS),Ne("Presenting complaints saved successful"),T.value=[])};return Fe(async()=>{await oe()}),e({onSubmit:re}),(a,i)=>{const u=K("ion-row"),P=K("ion-label"),H=K("ion-accordion"),le=K("ion-accordion-group");return F(),Se(Le,null,[o(m(O),null,{default:d(()=>[o(m(z),null,{default:d(()=>[o(gt,{status:U.value,content:"No presenting complaints added"},null,8,["status"]),C.value?(F(),Se("span",xt,[o(Ge,{listData:T.value,"onClicked:delete":p},null,8,["listData"])])):te("",!0),k.value?(F(),x(u,{key:1},{default:d(()=>[o(G,{formData:ne.value,ref_key:"formRef",ref:I},null,8,["formData"]),h("div",kt,[o(ve,{fill:"clear",icon:D.value.plus,iconSlot:"icon-only","onClicked:btn":i[0]||(i[0]=ue=>ie()),name:"Save"},null,8,["icon"])])]),_:1})):te("",!0),V.value?(F(),x(u,{key:2,style:{"margin-top":"10px"}},{default:d(()=>[o(ve,{fill:"clear",icon:D.value.plus,iconSlot:"icon-only","onClicked:btn":i[1]||(i[1]=ue=>W()),name:"Add new presenting complaints"},null,8,["icon"])]),_:1})):te("",!0)]),_:1})]),_:1}),o(u,null,{default:d(()=>[o(le,{ref_key:"accordionGroup",ref:ae,class:"previousView"},{default:d(()=>[o(H,{value:"first","toggle-icon-slot":"start",style:{"border-radius":"10px","background-color":"#fff"}},{default:d(()=>[o(m(Ie),{slot:"header",color:"light"},{default:d(()=>[o(P,{class:"previousLabel"},{default:d(()=>[...i[2]||(i[2]=[He("Previous presenting complaints",-1)])]),_:1})]),_:1}),h("div",Vt,[o(vt)])]),_:1})]),_:1},512)]),_:1})],64)}}}),At=je(Rt,[["__scopeId","data-v-ea5c124d"]]),It=()=>({persistentPainFormSection:$(()=>[{componentType:"Heading",name:"Seizures and Focal Neurologic",grid:{s:"4"}},{componentType:"radioButtonField",header:"Active Seizures",name:"active_seizures",obsValueType:"value_text",validation:r.required,type:"standard",grid:{s:"4"},options:[{label:"Yes",value:"Yes"},{label:"No",value:"No"}]},{componentType:"radioButtonField",header:"Focal neurologic findings",name:"focal_neurologic_findings",obsValueType:"value_text",validation:r.required,type:"standard",grid:{s:"4"},options:[{label:"Yes",value:"Yes"},{label:"No",value:"No"}]},{componentType:"Dashes"},{componentType:"Heading",name:"Headache and Weakness",grid:{s:"4"}},{componentType:"radioButtonField",header:"Headache",name:"headache",obsValueType:"value_text",validation:r.required,type:"standard",grid:{s:"4"},options:[{label:"Yes",value:"Yes"},{label:"No",value:"No"}]},{componentType:"radioButtonField",header:"Weakness",name:"weakness",obsValueType:"value_text",validation:r.required,type:"standard",grid:{s:"4"},options:[{label:"Yes",value:"Yes"},{label:"No",value:"No"}]},{componentType:"Dashes"},{componentType:"Heading",name:"Severe Pain and Confusion",grid:{s:"4"}},{componentType:"radioButtonField",header:"Severe Pain",name:"severe_pain",obsValueType:"value_text",validation:r.required,type:"standard",grid:{s:"4"},options:[{label:"Yes",value:"Yes"},{label:"No",value:"No"}]},{componentType:"radioButtonField",header:"Confusion",name:"confusion",obsValueType:"value_text",validation:r.required,type:"standard",grid:{s:"4"},options:[{label:"Yes",value:"Yes"},{label:"No",value:"No"}]},{grid:{s:"4"}},{componentType:"radioButtonField",header:"moderate pain or a reason to be seen in under four hours",name:"moderate_pain_or_a_reason_to_be_seen_in_under_four_hours",obsValueType:"value_text",validation:r.required,type:"standard",grid:{s:"8"},options:[{label:"Yes",value:"Yes"},{label:"No",value:"No"}]}])}),Ht=M({__name:"PersistentPain",setup(N){const e=s(null),S=It().persistentPainFormSection;return(_,D)=>(F(),x(m(O),null,{default:d(()=>[o(m(z),null,{default:d(()=>[o(G,{formData:m(S),ref_key:"formRef",ref:e},null,8,["formData"])]),_:1})]),_:1}))}}),Lt={style:{width:"90vw",margin:"0 auto","margin-top":"10px"}},qt={class:"back_profile"},ca=M({__name:"Triage",setup(N,{expose:e}){const{onTabBeforeChange:S,currentTabIndex:_}=ft();Dt();const D=qe(),U=$e();s([]),s([]),s(!1);const k=s(!0),V=s(!1),C=s(!1),T=$(()=>({text:C.value?"Saving...":"Finish",icon:C.value?"hourglass-outline":"checkmark",hideText:!1,hideIcon:!1,disabled:V.value||C.value})),E=De(),ae=Je(),ne=Qe(),I=Ke();Ze();const oe=Xe(),W=et();tt();const ie=at(),se=me(),j=nt(),{patient:p}=B(ae),{vitals:re}=B(E),{investigations:a}=B(ne),{diagnosis:i}=B(I),{substance:u}=B(ie),{selectedNCDMedicationList:P}=B(oe),{FootScreening:H,visualScreening:le,cvScreening:ue}=B(se),{sessionDate:fe}=B(j),{apiStatus:$t}=B(ot());y(T,(t,n)=>{console.log("Done button options changed:",{from:n,to:t,currentStep:_.value,tabsLength:v.value.length}),t.disabled!==(n==null?void 0:n.disabled)&&console.log("Done button ".concat(t.disabled?"disabled":"enabled")),t.text!==(n==null?void 0:n.text)&&console.log('Done button text changed from "'.concat(n==null?void 0:n.text,'" to "').concat(t.text,'"'))},{deep:!0}),y(C,(t,n)=>{t!==n&&(console.log("Saving state changed: ".concat(n," -> ").concat(t)),console.log(t?"Starting save process...":"Save process completed"))});const Ye=t=>{console.log("Done button change received from wizard:",t),t.newOptions.disabled&&console.log("Done button has been disabled"),t.isLastStep&&console.log("User is on the last step, done button should be visible")},J=()=>{let t=!1;return w(),C.value&&(t=!0),V.value=t,!t},we=()=>{D.push("/triageList")},ce=()=>[{title:"Presenting Complaints",icon:""},{title:"Vital Signs",icon:""},{title:"Level Of Consciousness",icon:""},{title:"Airway/Breathing",icon:""},{title:"Blood Circulation",icon:""},{title:"Disability",icon:""},{title:"Persistent Pain/Other Concerns",icon:""}],v=s(ce()),be=s(null),xe=s(null);s(null),s(null),s(null),s(null),s(null);const w=()=>{var c;if(!v.value||v.value.length===0)return console.log("Tabs not yet initialized"),null;const t=_.value>=0&&_.value<v.value.length?_.value:0;switch((c=v.value[t])==null?void 0:c.title){case"Presenting Complaints":return"PresentingComplaints";case"Vital Signs":return"Vitals";case"Level Of Consciousness":return"LevelOfConsciousness";case"Airway/Breathing":return"AirwayBreathing";case"Blood Circulation":return"BloodCirculation";case"Disability":return"Disability";case"Persistent Pain/Other Concerns":return"Persistent";default:if(W.NCDActivities.length>0)switch(W.NCDActivities[0]){case"Presenting Complaints":return"PresentingComplaints";case"Vital Signs":return"Vitals";case"Level Of Consciousness":return"LevelOfConsciousness";case"Airway/Breathing":return"Airway/Breathing";case"Blood Circulation":return"BloodCirculation";case"Disability":return"Disability";case"Persistent Pain/Other Concerns":return"Persistent"}return null}},de=()=>{k.value=!1,setTimeout(()=>{_.value=0,k.value=!0},0)},ye=()=>{const t=De();t.setVitals(t.getInitialVitals(p.value.ID))},Y=async()=>{var c,b;const t=st(fe.value,"sessionDate","value")||pe.sessionDate(),n=X("vitals");for(let l=0;l<v.value.length;l++){const f=v.value[l];if(f.title==="Vital Signs")v.value[l].icon=Q(t,n)?q:"";else if(f.title==="Risk Assessment"){const g=X("substanceAbuse");v.value[l].icon=Q(t,g)?q:""}else if(f.title==="Investigations"){const g=(b=(c=p==null?void 0:p.value)==null?void 0:c.labOrders)==null?void 0:b.saved,L=g==null?void 0:g.filter(Ae=>pe.toStandardHisFormat(t)===pe.toStandardHisFormat(Ae.order_date));v.value[l].icon=(L==null?void 0:L.length)>0?q:""}else if(f.title==="Diagnosis"){const g=X("diagnosis");v.value[l].icon=Q(t,g)?q:""}else if(f.title==="Complications Screening"){const g=X("screening");v.value[l].icon=Q(t,g)?q:""}else f.title==="Treatment Plan"&&(P.value.length>0?v.value[l].icon=rt()?q:"":v.value[l].icon="")}J()},Q=(t,n)=>{const c=new Date(t);return c.setHours(0,0,0,0),n.some(b=>{const l=new Date(b.obs_datetime);return l.setHours(0,0,0,0),l.getTime()===c.getTime()})},ke=async()=>{var l,f,g,L;const t=[],n=await Be(le.value),c=await Tt(H.value),b=await Be(ue.value);n.length>0&&t.push({concept_id:await ee.getConceptID("Visual acuity",!0),value_text:"visual acuity test",obs_datetime:ee.getSessionDate(),child:n}),c.length>0&&t.push({concept_id:await ee.getConceptID("Foot check",!0),value_text:"foot screening",obs_datetime:ee.getSessionDate(),child:c}),b.length>0&&t.push(...b),t.length>0?((L=(g=(f=(l=p.value).screening)!=null?f:l.screening={}).unsaved)!=null||(g.unsaved=[]),p.value.screening.unsaved.push(...t),Ne("Complications saved successfully")):ge("No complications data to save")},Ve=async()=>{const t=ut();if(!Ct.isEmpty(t.selectedMedicalAllergiesList)){const b=ct(),l=t.selectedMedicalAllergiesList.map(g=>({concept_id:g.concept_id,obs_datetime:_e.getSessionDate(),value_coded:g.concept_id,location_id:b.facilityLocation.code,value_text:g.name})),f=await yt(l);p.value=Object.assign(p.value,f),console.log("Allergies staged successfully:",p.value),t.clearSelectedMedicalAllergiesList()}const n=await ht();p.value=Object.assign(p.value,n);const c=await St().saveNonPharmaTherapyPatientData();p.value=Object.assign(p.value,c)},Re=async(t,n)=>{var b,l,f;const c=(b=v.value[n])==null?void 0:b.title;t%1===0&&(_.value=t),c=="Vital Signs"&&((l=be.value)==null||l.onSubmit()),c=="Risk Assessment"&&((f=xe.value)==null||f.onSubmit()),c=="Complications Screening"&&await ke(),c=="Treatment Plan"&&await Ve(),await Pe(p.value)},he=async()=>{C.value=!0;try{await lt(),await Pe(p.value),D.push("/triageList")}catch(t){console.error("Error saving data:",t),ge("Error occurred while saving data. Please try again.")}finally{C.value=!1}};return Fe(async()=>{if(W.NCDActivities.length===0){D.push("patientProfile");return}me().resetScreening(),v.value=ce(),await Y(),(_.value===void 0||_.value<0)&&(_.value=0,console.log("Setting initial tab index to 0")),V.value=!1,C.value=!1,J()}),y(_,async()=>{await J()}),y(re,async()=>{await Y()},{deep:!0}),y(p,async()=>{me().resetScreening(),await Y()},{deep:!0}),y(fe,async()=>{await Y()},{deep:!0}),y(a,async()=>{await Y()},{deep:!0}),y(i,async()=>{await Y()},{deep:!0}),y(u,async()=>{await Y()},{deep:!0}),y(P,async()=>{await Y()},{deep:!0}),y(U,async t=>{de(),ye(),v.value=ce()},{deep:!0}),y(p,async(t,n)=>{t.ID!=n.ID&&(de(),ye())},{deep:!0}),e({saveData:he,markWizard:Y,refreshWizard:de,validateDoneButtonState:J}),(t,n)=>(F(),x(m(We),null,{default:d(()=>[o(it),o(m(Me),{fullscreen:!0},{default:d(()=>[o(dt),h("div",Lt,[k.value?(F(),x(bt,{key:0,ref:"wizard",headingTitle:"Triage","vertical-tabs":"","navigable-tabs":"","scrollable-tabs":"",startIndex:0,doneButton:T.value,"custom-tabs":v.value,beforeChange:m(S),onChange:Re,"onComplete:wizard":n[1]||(n[1]=c=>he()),onDoneButtonChanged:Ye},{default:d(()=>[h("div",null,[h("div",qt,[o(ve,{name:"Back to triage list",iconSlot:"start",fill:"clear",icon:m(Ee),"font-weight":"600",onClick:n[0]||(n[0]=c=>we())},null,8,["icon"])])]),R(h("div",null,[o(At,{ref:"presentingComplaintsRef"},null,512)],512),[[A,w()=="PresentingComplaints"]]),R(h("div",null,[o(pt,{ref_key:"vitalsRef",ref:be},null,512)],512),[[A,w()=="Vitals"]]),R(h("div",null,[o(mt,{ref:"levelOfConsciousnessRef"},null,512)],512),[[A,w()=="LevelOfConsciousness"]]),R(h("div",null,[o(Bt,{ref:"airwayBreathingRef"},null,512)],512),[[A,w()=="AirwayBreathing"]]),R(h("div",null,[o(Nt,{ref:"bloodCirculationRef"},null,512)],512),[[A,w()=="BloodCirculation"]]),R(h("div",null,[o(wt,{ref:"disabilityRef"},null,512)],512),[[A,w()=="Disability"]]),R(h("div",null,[o(Ht,{ref:"persistentRef"},null,512)],512),[[A,w()=="Persistent"]])]),_:1},8,["doneButton","custom-tabs","beforeChange"])):te("",!0)])]),_:1})]),_:1}))}});export{ca as default};
