!function(){function e(e,t,a){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var n=a.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}System.register(["./vendor-legacy-BPXifZFo.js","../index-legacy-BwUjfSRa.js","./useLocation-legacy-DGWP5mEs.js","./vaccines_service-legacy-CgTlGL6-.js","./NeonatalEnrollmentStore-legacy-BT5j_LNC.js"],function(t,a){"use strict";var n,i,o,l,r,d,u,s,c,m,v,p,h,f,g,_,y,b,I,w,D,F,x,k,T,R,P,S,V,N,C,B,L,M,H,E,A,O,Y,q,G,j,W,z,U,J,$,K,Q,X,Z,ee,te,ae,ne,ie,oe,le,re,de,ue,se,ce,me,ve,pe,he,fe,ge;return{setters:[e=>{n=e.d,i=e.N,o=e.L,l=e._,r=e.aj,d=e.a5,u=e.dh,s=e.a4,c=e.dS,m=e.W,v=e.R,p=e.H,h=e.e,f=e.f,g=e.m,_=e.l,y=e.k,b=e.J,I=e.Q,w=e.F,D=e.r,F=e.c,x=e.O,k=e.u,T=e.K,R=e.P,P=e.z,S=e.cE,V=e.w,N=e.aV,C=e.a,B=e.bq,L=e.an,M=e.a6,H=e.p,E=e.bw,A=e.I,O=e.a3,Y=e.i,q=e.v,G=e.M},e=>{j=e.l,W=e.J,z=e._,U=e.aB,J=e.aA,$=e.aC,K=e.H,Q=e.S,X=e.o,Z=e.v,ee=e.Y,te=e.m,ae=e.P,ne=e.u,ie=e.af,oe=e.aW,le=e.s,re=e.aO,de=e.G,ue=e.aD,se=e.e,ce=e.b4,me=e.$,ve=e.t,pe=e.V},e=>{he=e.u},e=>{fe=e.g},e=>{ge=e.u}],execute:function(){var a=document.createElement("style");a.textContent=".large-card[data-v-ffb46cdd]{padding:5%;border-radius:15px;border:1px solid #ccc;height:82vh;background-color:#fff;overflow-y:auto;-webkit-box-shadow:0px -2px 19px -2px rgba(196,190,196,1);-moz-box-shadow:0px -2px 19px -2px rgba(196,190,196,1);box-shadow:0 -2px 19px -2px #c4bec4}.header[data-v-ffb46cdd]{display:flex;gap:20px;padding:10px 20px}.position_content[data-v-ffb46cdd]{max-width:100vw}.accordion-expanded[data-v-ffb46cdd]{background-color:#ded}button[aria-expanded=false][data-v-ffb46cdd]{background:rgba(var(--ion-color-rose-rgb),.25)}ion-accordion.accordion-expanding ion-item[slot=header][data-v-ffb46cdd],ion-accordion.accordion-expanded ion-item[slot=header][data-v-ffb46cdd]{--background: #ddeedd}.spinner-overlay[data-v-555dbb7e]{position:fixed;top:0;left:0;width:100%;height:100%;background-color:rgba(0,0,0,.5);display:flex;flex-direction:column;justify-content:center;align-items:center;z-index:1000}.spinner-overlay ion-spinner[data-v-555dbb7e]{width:50px;height:50px;color:#fff}.spinner-overlay .loading-text[data-v-555dbb7e]{color:#fff;margin-top:10px;font-size:1.1em}.header-title[data-v-555dbb7e]{text-align:center;font-weight:700;font-size:18px;width:100%;padding:14px;background-color:#f8f8f8;color:#333;box-shadow:0 2px 4px rgba(0,0,0,.1)}.masonry-grid[data-v-555dbb7e]{display:grid;grid-template-columns:repeat(auto-fit,minmax(250px,1fr));gap:16px;padding:16px}@media(max-width:575px){.masonry-grid[data-v-555dbb7e]{grid-template-columns:1fr}}@media(min-width:576px)and (max-width:767px){.masonry-grid[data-v-555dbb7e]{grid-template-columns:repeat(2,1fr)}}@media(min-width:768px)and (max-width:991px){.masonry-grid[data-v-555dbb7e]{grid-template-columns:repeat(3,1fr)}}@media(min-width:992px){.masonry-grid[data-v-555dbb7e]{grid-template-columns:repeat(4,1fr)}}@media(min-width:1500px){.masonry-grid[data-v-555dbb7e]{margin-left:100px;margin-right:100px}}.custom-card[data-v-555dbb7e]{background:#fff;border-radius:5px;padding:5px 15px 15px;transition:transform .2s ease-in-out}.footer-content[data-v-555dbb7e]{display:flex;justify-content:space-between;width:100%;padding:10px;align-items:center;background-color:#f8f8f8;box-shadow:0 -2px 4px rgba(0,0,0,.1)}.footer-buttons-left[data-v-555dbb7e],.footer-buttons-right[data-v-555dbb7e]{display:flex;gap:10px}.pagination-dots[data-v-555dbb7e]{display:flex;gap:8px;justify-content:center;align-items:center}.dot[data-v-555dbb7e]{width:10px;height:10px;background-color:#ccc;border-radius:50%;cursor:pointer;transition:background-color .3s ease,transform .3s ease}.dot.active[data-v-555dbb7e]{background-color:#28a745;transform:scale(1.2)}.dot[data-v-555dbb7e]:hover{background-color:#218838}\n/*$vite$:1*/",document.head.appendChild(a);const _e=n({components:{IonLabel:m,IonAvatar:c,IonRow:s,IonImg:u,IonCol:d,IonList:r,IonItem:l,IonIcon:o,IonButton:i,DynamicButton:W},data:()=>({selectedResult:{},iconsContent:j,isAnyAccordionOpen:!0,isLoading:!1}),methods:{dismiss(e){v.dismiss(e)}}}),ye={key:0,class:"spinner-overlay"};const be=t("C",z(_e,[["render",function(e,t,a,n,i,o){const l=p("ion-spinner"),r=p("ion-title"),d=p("ion-icon"),u=p("ion-header"),s=p("center"),c=p("ion-content"),m=p("DynamicButton"),v=p("ion-col"),D=p("ion-row"),F=p("ion-footer");return f(),h(w,null,[e.isLoading?(f(),h("div",ye,[_(l,{name:"bubbles"}),t[3]||(t[3]=y("div",{class:"loading-text"},"Please wait...",-1))])):g("",!0),_(u,{style:{display:"flex","justify-content":"space-between"}},{default:b(()=>[_(r,{class:"modalTitle"},{default:b(()=>[...t[4]||(t[4]=[I("Printer",-1)])]),_:1}),_(d,{onClick:t[0]||(t[0]=t=>e.dismiss("dismiss")),style:{"padding-top":"10px","padding-right":"10px"},icon:e.iconsContent.cancel},null,8,["icon"])]),_:1}),_(c,{fullscreen:!0,class:"ion-padding",style:{"--background":"#fff"}},{default:b(()=>[_(s,null,{default:b(()=>[...t[5]||(t[5]=[y("h3",{class:"ion-padding"},"Do you want to print a barcode?",-1)])]),_:1})]),_:1}),_(F,null,{default:b(()=>[_(D,null,{default:b(()=>[_(v,null,{default:b(()=>[_(m,{color:"danger",onClick:t[1]||(t[1]=t=>e.dismiss("dismiss")),name:"No",fill:"solid",style:{float:"right","margin-right":"2%",width:"100px"}}),_(m,{onClick:t[2]||(t[2]=t=>e.dismiss("Yes")),name:"Yes",fill:"solid",style:{float:"right","margin-right":"2%",width:"100px"}})]),_:1})]),_:1})]),_:1})],64)}]])),Ie=t("a",n({__name:"CurrentLocation",setup(e,{expose:t}){const{formRef:a,exposeFormMethods:n}=J(),{currentLocation:i}=(e=>{const t=D(!1),{getDistricts:a,districtList:n,selectedTraditionalAuthorityId:i,villages:o,selectedDistrictId:l,TAs:r}=he();return a(),{currentLocation:F(()=>[{componentType:"Heading",name:"Current Location",position:"center"},{componentType:"multiSelectInputField",header:"Current district",name:"current_district",trackBy:"district_id",validation:e=>U.required(e),icon:j.search,options:n.value,onChange:(t,a)=>{null!=e&&e.value&&(e.value.setFormValue("current_traditional_authority",[]),e.value.setFormValue("current_village",[])),l.value=(null==t?void 0:t.district_id)||null}},{componentType:"multiSelectInputField",header:"Current traditional authority",name:"current_traditional_authority",trackBy:"traditional_authority_id",validation:e=>U.required(e),icon:j.search,options:r.value,disabled:e=>{var t;return!(null!=r&&null!==(t=r.value)&&void 0!==t&&t.length)},onChange:(t,a)=>{var n;null!=e&&e.value&&(null==e||null===(n=e.value)||void 0===n||n.setFormValue("current_village",[])),i.value=(null==t?void 0:t.traditional_authority_id)||null}},{componentType:"multiSelectInputField",header:"Current village",name:"current_village",trackBy:"village_id",icon:j.search,validation:e=>U.required(e),options:o.value,disabled:e=>{var t;return!(null!=o&&null!==(t=o.value)&&void 0!==t&&t.length)}},{componentType:"multiSelectInputField",header:"Closest landmark/Plot number",name:"closestLandmark",trackBy:"id",icon:j.search,options:[{id:1,name:"Church"},{id:2,name:"Mosque"},{id:3,name:"Primary School"},{id:4,name:"Borehole"},{id:5,name:"Secondary School"},{id:6,name:"College"},{id:7,name:"Market"},{id:8,name:"Football Ground"},{id:9,name:"Other"}]}]),TAs:r,isLoadingTAs:t,selectedDistrictId:l}})(a);return t(n()),(e,t)=>(f(),x($,{formData:k(i),ref_key:"formRef",ref:a},null,8,["formData"]))}})),we=(e,t)=>(null==e||!e.same_as_current)&&!(null!=t&&t.length),De=(e,t)=>a=>{setTimeout(()=>{a?((e,t)=>{if(null==e||!e.value||null==t||!t.value)return;const{current_district:a,current_traditional_authority:n,current_village:i}=e.value;t.value.setFormValue("home_district",a),t.value.setFormValue("home_traditional_authority",n),t.value.setFormValue("home_village",i)})(e,t):(e=>{null!=e&&e.value&&(e.value.setFormValue("home_district",[]),e.value.setFormValue("home_traditional_authority",[]),e.value.setFormValue("home_village",[]))})(t)},0)},Fe=t("_",n({__name:"HomeLocation",props:{currentLocationFormValues:{}},setup(e,{expose:t}){const a=e,{formRef:n,exposeFormMethods:i}=J(),o=F(()=>a.currentLocationFormValues),{homeLocation:l}=((e,t)=>{const{getDistricts:a,districtList:n,selectedTraditionalAuthorityId:i,villages:o,selectedDistrictId:l,TAs:r}=he();a();const d=F(()=>[{componentType:"Heading",name:"Home Location",position:"center"},{componentType:"checkboxField",type:"single",name:"same_as_current",label:"Same as current",onChange:De(e,t)},{componentType:"multiSelectInputField",header:"Home district",name:"home_district",trackBy:"district_id",icon:j.search,validation:U.required,options:n.value,onChange:e=>((e,t,a)=>{t.value=(null==e?void 0:e.district_id)||null,null!=a&&a.value&&(a.value.setFormValue("home_traditional_authority",[]),a.value.setFormValue("home_village",[]))})(e,l,t)},{componentType:"multiSelectInputField",header:"Home traditional authority",name:"home_traditional_authority",trackBy:"traditional_authority_id",validation:U.required,icon:j.search,options:r.value,disabled:e=>we(e,r.value),onChange:e=>((e,t,a)=>{var n;t.value=(null==e?void 0:e.traditional_authority_id)||null,null==a||null===(n=a.value)||void 0===n||n.setFormValue("home_village",[])})(e,i,t),openDirection:"auto"},{componentType:"multiSelectInputField",header:"Home village",name:"home_village",trackBy:"village_id",icon:j.search,validation:U.required,options:o.value,disabled:e=>we(e,o.value),openDirection:"auto"}]);return{homeLocation:d}})(o,n);return t(i()),(e,t)=>(f(),x($,{formData:k(l),ref_key:"formRef",ref:n},null,8,["formData"]))}})),xe=n({__name:"Country",setup(e,{expose:t}){const{country:a}=(()=>{const{countriesList:e,getCountries:t}=he();return t(),{country:F(()=>[{componentType:"Heading",name:"Country",position:"center"},{componentType:"multiSelectInputField",header:"Country",name:"country",trackBy:"district_id",openDirection:"auto",icon:j.search,validation:e=>U.required(e),options:e.value}])}})(),{formRef:n,exposeFormMethods:i}=J();return t(i()),(e,t)=>(f(),x($,{formData:k(a),ref_key:"formRef",ref:n},null,8,["formData"]))}}),ke=t("c",n({__name:"PersonalInformation",setup(e,{expose:t}){const{personalInformation:a}=(()=>{function e(e,t){const a=new Date(e);return a.setFullYear(a.getFullYear()-t),a.toISOString().split("T")[0]}return{personalInformation:F(()=>[{componentType:"Heading",name:"Personal Information",position:"center"},{componentType:"inputField",header:"National ID",name:"nationalID",placeholder:"__-__-__-__",icon:j.nationalID,validation:e=>U.isMWNationalID(e)},{componentType:"inputField",header:"First name",name:"firstname",icon:j.fullName,validation:e=>U.isName(e)},{componentType:"inputField",header:"Middle name",name:"middleName",icon:j.fullName,validation:e=>U.isNamesEmpty(e)},{componentType:"inputField",header:"Last name",name:"lastname",icon:j.fullName,validation:e=>U.isName(e)},{componentType:"radioButtonField",header:"Gender",name:"gender",type:"inline",validation:e=>U.required(e),options:[{label:"Male",value:"M"},{label:"Female",value:"F"},{label:"Undetermined",value:"Undetermined"}]},{componentType:"dateInputField",header:"Date of birth",name:"birthdate",icon:j.calenderPrimary,minDate:e(K.sessionDate(),110),validation:e=>U.required(e),condition:e=>!e.Estimate,disabled:e=>e.Estimate},{componentType:"inputField",header:"Estimated age",name:"estimation",icon:j.time,validation:e=>U.isEstimationDate(e),initialUnit:"Years",unitOptions:[{label:"Days",value:"Days"},{label:"Weeks",value:"Weeks"},{label:"Months",value:"Months"},{label:"Years",value:"Years"}],unitValidation:e=>e&&""!==e?null:"Please select a unit.",condition:e=>e.Estimate},{componentType:"checkboxField",name:"Estimate",type:"single",label:"Estimate age"},{componentType:"phoneInputField",name:"Phone Number",header:"Phone Number",validation:e=>U.isMWPhoneNumber(e.phoneNumber)}])}})(),{formRef:n,exposeFormMethods:i}=J();return t(i()),(e,t)=>(f(),x($,{formData:k(a),ref_key:"formRef",ref:n},null,8,["formData"]))}})),Te=n({components:{IonLabel:m,IonAvatar:c,IonRow:s,IonImg:u,IonCol:d,IonList:r,IonItem:l,IonIcon:o,IonButton:i},data:()=>({selectedResult:{},iconsContent:j,isAnyAccordionOpen:!0,isLoading:!1}),methods:{updateAccordionState(e){const t=this.$refs.accordionGroup;this.isAnyAccordionOpen=void 0!==t.value},dismiss(e){v.dismiss(e)},async init(){this.setData(this.deduplicationData[0]||{})},async onSelect(){v.dismiss(this.selectedResult)},setData(e){this.selectedResult=e},dateFormat:e=>K.toStandardHisDisplayFormat(e),probabilityToPercentage:e=>(100*e).toFixed(2)+"%"},props:{deduplicationData:{default:[]},to_be_registered:{default:[]}},mounted(){this.init()},activated(){this.init()}}),Re={key:0,class:"spinner-overlay"},Pe={class:"header position_content"},Se={style:{"font-size":"1.2em","font-weight":"700"}},Ve={class:"due_date"},Ne={class:"ion-padding",slot:"content"},Ce={style:{display:"flex","justify-content":"end",gap:"10px"}};const Be=z(Te,[["render",function(e,t,a,n,i,o){const l=p("ion-spinner"),r=p("ion-icon"),d=p("ion-header"),u=p("ion-label"),s=p("ion-item"),c=p("ion-col"),m=p("ion-row"),v=p("ion-accordion"),D=p("ion-accordion-group"),F=p("ion-content"),k=p("ion-button"),P=p("ion-footer");return f(),h(w,null,[e.isLoading?(f(),h("div",Re,[_(l,{name:"bubbles"}),t[3]||(t[3]=y("div",{class:"loading-text"},"Please wait...",-1))])):g("",!0),_(d,null,{default:b(()=>[y("div",Pe,[y("div",{style:{display:"flex","align-items":"center"},onClick:t[0]||(t[0]=t=>e.dismiss("back"))},[_(r,{slot:"separator",size:"large",icon:e.iconsContent.arrowLeft},null,8,["icon"])]),y("div",Se,"Matches found: ("+T(e.deduplicationData.length)+")",1)])]),_:1}),_(F,{fullscreen:!0,class:"ion-padding",style:{"--background":"#fff"}},{default:b(()=>[_(D,{ref:"accordionGroup",class:"previousView",value:"0",onIonChange:e.updateAccordionState},{default:b(()=>[(f(!0),h(w,null,R(e.deduplicationData,(a,n)=>(f(),x(v,{style:{"margin-bottom":"15px"},value:n,"toggle-icon-slot":"start",class:"custom_card",button:"",key:n,detail:!0,color:a.value===e.selectedResult.value?"light":"",onClick:t=>e.setData(a)},{default:b(()=>[_(s,{slot:"header"},{default:b(()=>[_(u,{class:"previousLabel"},{default:b(()=>{var e,t;return[I(T(null==a||null===(e=a.person)||void 0===e?void 0:e.given_name)+" "+T(null==a||null===(t=a.person)||void 0===t?void 0:t.family_name),1)]}),_:2},1024),y("div",Ve,[t[4]||(t[4]=I(" Score: ",-1)),y("b",null,T(e.probabilityToPercentage(null==a?void 0:a.score)||"-"),1)])]),_:2},1024),y("div",Ne,[_(m,null,{default:b(()=>[_(c,null,{default:b(()=>[...t[5]||(t[5]=[y("b",null,"To be Registered",-1)])]),_:1}),_(c,null,{default:b(()=>[...t[6]||(t[6]=[y("b",null,"Already Registered",-1)])]),_:1})]),_:1}),_(m,null,{default:b(()=>[_(c,null,{default:b(()=>[_(m,null,{default:b(()=>{var a,n;return[t[7]||(t[7]=I(" Name: ",-1)),y("b",null,T(null===(a=e.to_be_registered)||void 0===a?void 0:a.given_name)+" "+T(null===(n=e.to_be_registered)||void 0===n?void 0:n.family_name),1)]}),_:1}),_(m,null,{default:b(()=>{var a;return[t[8]||(t[8]=I("Gender: ",-1)),y("b",null,T(null===(a=e.to_be_registered)||void 0===a?void 0:a.gender),1)]}),_:1}),_(m,null,{default:b(()=>{var a;return[t[9]||(t[9]=I("Birthdate: ",-1)),y("b",null,T(null===(a=e.to_be_registered)||void 0===a?void 0:a.birthdate),1)]}),_:1}),_(m,null,{default:b(()=>{var a;return[t[10]||(t[10]=I("Home District: ",-1)),y("b",null,T(null===(a=e.to_be_registered)||void 0===a?void 0:a.home_district),1)]}),_:1}),_(m,null,{default:b(()=>{var a;return[t[11]||(t[11]=I("Home TA: ",-1)),y("b",null,T(null===(a=e.to_be_registered)||void 0===a?void 0:a.home_traditional_authority),1)]}),_:1})]),_:1}),_(c,null,{default:b(()=>[_(m,null,{default:b(()=>{var e,n;return[t[12]||(t[12]=I(" Name: ",-1)),y("b",null,T(null==a||null===(e=a.person)||void 0===e?void 0:e.given_name)+" "+T(null==a||null===(n=a.person)||void 0===n?void 0:n.family_name),1)]}),_:2},1024),_(m,null,{default:b(()=>{var e;return[t[13]||(t[13]=I("Gender: ",-1)),y("b",null,T(null==a||null===(e=a.person)||void 0===e?void 0:e.gender),1)]}),_:2},1024),_(m,null,{default:b(()=>{var n;return[t[14]||(t[14]=I("Birthdate: ",-1)),y("b",null,T(e.dateFormat(null==a||null===(n=a.person)||void 0===n?void 0:n.birthdate)),1)]}),_:2},1024),_(m,null,{default:b(()=>{var e;return[t[15]||(t[15]=I("Home District: ",-1)),y("b",null,T(null==a||null===(e=a.person)||void 0===e?void 0:e.home_district),1)]}),_:2},1024),_(m,null,{default:b(()=>{var e;return[t[16]||(t[16]=I("Home TA: ",-1)),y("b",null,T(null==a||null===(e=a.person)||void 0===e?void 0:e.home_traditional_authority),1)]}),_:2},1024)]),_:2},1024)]),_:2},1024)])]),_:2},1032,["value","color","onClick"]))),128))]),_:1},8,["onIonChange"])]),_:1}),_(P,{collapse:"fade",class:"ion-no-border"},{default:b(()=>[y("div",Ce,[_(k,{fill:"solid",color:"secondary",onClick:t[1]||(t[1]=t=>e.dismiss("dismiss"))},{default:b(()=>[...t[17]||(t[17]=[I(" Not Duplicate ",-1)])]),_:1}),_(k,{onClick:t[2]||(t[2]=t=>e.onSelect()),fill:"solid",disabled:!e.isAnyAccordionOpen},{default:b(()=>[...t[18]||(t[18]=[I("Select ",-1)])]),_:1},8,["disabled"])])]),_:1})],64)}],["__scopeId","data-v-ffb46cdd"]]),Le=Z();class Me{async getDDEIds(){const e=Q.getPouchDbStatus(),t=Q.getLanConnectionStatus(),a=Q.getAPIStatus();if(e||t){var n,i;const e=await X("dde");if(null!==(n=e[0])&&void 0!==n&&n.npid)return(null===(i=e[0])||void 0===i?void 0:i.npid)||""}if(a)try{var o;const e=await Q.getJson("/dde/patients/sync_npids",{count:1,program_id:Q.getProgramID()});return(null==e||null===(o=e.npids[0])||void 0===o?void 0:o.npid)||""}catch(l){return""}return""}async deleteDDEId(e){Le.postData({command:"deleteData",storeName:"dde",data:{npid:e}})}async possibleDuplicates(e){if(Q.getAPIStatus())try{const a=new ee,n=await a.checkPotentialDuplicates(e);if(n.length>0){const i=await te(Be,{class:"fullScreenModal"},!0,{to_be_registered:e,deduplicationData:n});if("dismiss"!=i&&"back"!=i){var t;const e=await a.importPatient(null==i||null===(t=i.person)||void 0===t?void 0:t.id),n=await ae.findByID(e.patient_id);return await ne().setPatientRecord(n),!0}return"back"==i}return!1}catch(a){return!1}return!1}}class He{getRegion(e){return{1:"Central Region",2:"Northern Region",3:"Southern Region",4:"Foreign"}[e]}hasValidData(e,t=[]){return!(!e||"object"!=typeof e)&&(0===t.length?Object.values(e).some(e=>null!=e&&""!==e):t.every(t=>null!==e[t]&&void 0!==e[t]&&""!==e[t]))}async buildObservation(e,t){if(!t)return null;const a="object"==typeof t&&t.name?t.name:t;return await ie.buildValueText(e,a)}buildGuardianInfo(e){const t={};return t.given_name=(null==e?void 0:e.guardianFirstname)||"",t.middle_name=(null==e?void 0:e.guardianMiddleName)||"",t.family_name=(null==e?void 0:e.guardianLastname)||"",t.cell_phone_number=(null==e?void 0:e.guardianPhoneNumber.phoneNumber)||"",t.national_id=(null==e?void 0:e.guardianNationalID)||"",t.gender="",t.birthdate="",t.birthdate_estimated="false",t.home_region="",t.home_district="",t.home_traditional_authority="",t.home_village="",t.current_region="",t.current_district="",t.current_traditional_authority="",t.current_village="",t.landmark="",{saved:[],unsaved:[t]}}async buildVitals(e){return null!=e&&e.Weight?{saved:[],unsaved:[await this.buildObservation("Weight",e.Weight)]}:null}async buildARTPatientType(e,t){const a=[];let n=[];return e&&a.push(await ie.buildValueText("Art clinic location",e)),t&&a.push(await ie.buildValueCoded("Type of patient",t)),0===a.length?[]:(n=[{encounter_type:oe.REGISTRATION,status:"unsaved",obs:a}],n)}async buildBirthRegistrationObservations(e){if(!this.hasValidData(e))return null;const t=(await Promise.all([this.buildObservation("How many doses of Tdv did the mother receive?",e["How many doses of Tdv did the mother receive?"]),this.buildObservation("Protected at birth",e["Protected at birth"]),this.buildObservation("HIV status",e["HIV status"])])).filter(e=>null!==e);return t.length>0?t:null}async buildPatientRecord(e,t,a=""){var n,i,o,l,r,d,u,s,c,m,v,p,h;const{personalInformation:f,currentLocation:g,homeLocation:_,birthRegistration:y,guardianInformation:b,socialHistory:I,patientType:w}=e;return{patientID:a||t||"",ID:t||"",NcdID:"",personInformation:{given_name:(null==f?void 0:f.firstname)||"",middle_name:(null==f?void 0:f.middleName)||"",family_name:(null==f?void 0:f.lastname)||"",gender:(null==f?void 0:f.gender)||"",birthdate:null!=f&&f.Estimate?(new Ee).calculateDoB(null==f?void 0:f.estimation,(null==f?void 0:f.estimation_unit)||"Years"):(null==f?void 0:f.birthdate)||"",birthdate_estimated:null!=f&&f.Estimate?"true":"false",home_region:this.getRegion(null==_||null===(n=_.home_district)||void 0===n?void 0:n.region_id)||"",home_district:(null==_||null===(i=_.home_district)||void 0===i?void 0:i.name)||"",home_traditional_authority:(null==_||null===(o=_.home_traditional_authority)||void 0===o?void 0:o.name)||"",home_village:(null==_||null===(l=_.home_village)||void 0===l?void 0:l.name)||"",current_region:this.getRegion(null==g||null===(r=g.current_district)||void 0===r?void 0:r.region_id)||"",current_district:(null==g||null===(d=g.current_district)||void 0===d?void 0:d.name)||"",current_traditional_authority:(null==g||null===(u=g.current_traditional_authority)||void 0===u?void 0:u.name)||"",current_village:(null==g||null===(s=g.current_village)||void 0===s?void 0:s.name)||"",country:(null==e?void 0:e.country.country.name)||"",landmark:(null==g||null===(c=g.closestLandmark)||void 0===c?void 0:c.name)||"",cell_phone_number:(null===(m=f["Phone Number"])||void 0===m?void 0:m.phoneNumber)||"",occupation:(null==I?void 0:I.occupation)||"",marital_status:(null==I?void 0:I.maritalStatus)||"",religion:(null==I||null===(v=I.religion)||void 0===v?void 0:v.name)||"",education_level:(null==I?void 0:I.highestLevelOfEducation)||""},guardianInformation:this.buildGuardianInfo(b),birthRegistration:await this.buildBirthRegistrationObservations(y),otherPersonInformation:{nationalID:(null==f?void 0:f.nationalID)||"",ichisID:Q.getIchisId()||"",TEI:Q.getTEI()||"",birthID:y["Serial Number"]||"",relationshipID:(null==b||null===(p=b.relationship)||void 0===p?void 0:p.id)||""},vitals:await this.buildVitals(y),vaccineSchedule:await fe(null==f?void 0:f.gender,null==f?void 0:f.birthdate),vaccineAdministration:{orders:[],obs:[],voided:[]},observations:await this.buildARTPatientType(null==w||null===(h=w.facility)||void 0===h?void 0:h.name,null==w?void 0:w.patient_type),appointments:{saved:[],unsaved:[]},saveStatusPersonInformation:"pending",saveStatusGuardianInformation:"pending",saveStatusBirthRegistration:"pending",saveStatusVitals:"pending",date_created:"",creator:"",sync_status:"unsynced"}}}class Ee extends Q{constructor(){super(),e(this,"patientRecordBuilder",void 0),this.patientRecordBuilder=new He}async saveRegistrationData(e){const t=await(new Me).getDDEIds();if(!t&&(le("DDE IDs are not available."),Q.getLanConnectionStatus()||Q.getPouchDbStatus()))return!1;let a=await this.patientRecordBuilder.buildPatientRecord(e,t);return 32==Q.getProgramID()&&(a=await(async e=>{const t=Q.getIchisDiagnosis();if(t.length<=0)return e;const a=await Promise.all(t.map(async e=>{var t;const a=(null==e||null===(t=e.value)||void 0===t||null===(t=t.match(/[\d.]+/))||void 0===t?void 0:t[0])||"",n=null==e?void 0:e.date;if("NCD_CV_D_Likelihood of Diabetes"==e.display){var i;const t=null==e||null===(i=e.id)||void 0===i?void 0:i.split("-");return await ie.buildValueNumber("Unspecified Diabetes",a,null,null,n,t[1])}return"NCD_SHD_CV_Client waist circumference"==e.display?await ie.buildValueNumber("Waist circumference",a,null,null,n):"NCD_SHD_CV_Client systolic blood pressure"==e.display?await ie.buildValueNumber("Systolic",a,null,null,n):"NCD_SHD_CV_Client diastolic blood pressure"==e.display?await ie.buildValueNumber("Diastolic",a,null,null,n):void 0}));return e.observations.push({encounter_type:"VITALS",status:"unsaved",obs:a}),e})(a)),!!(await(new Me).possibleDuplicates(a.personInformation))||!!(await re(a))&&(de("Registration successful"),sessionStorage.setItem("ichis_diagnosis",JSON.stringify([])),Q.getPouchDbStatus()&&await(new Me).deleteDDEId(t),await this.printBarcode(),!0)}async updateDemographics(e){let t=await this.patientRecordBuilder.buildPatientRecord(e,Q.getNationalID(),Q.getPatientID());return t.saveStatusPersonInformation="edit",t.saveStatusGuardianInformation="edit",t.saveStatusBirthRegistration="edit",t.saveStatusVitals="edit",!!(await re(t))&&(de("Updated successful"),!0)}checkIfChild(e){if(!(null!=e&&e.estimation||null!=e&&e.birthdate))return{moreThanThirteenYears:!0,underNineMonths:!1,underFiveYears:!1};let t="";return t=e.estimation?this.calculateDoB(e.estimation,e.estimation_unit||"Years")||"":e.birthdate,{moreThanThirteenYears:K.getAgeInYears(t)>13,underNineMonths:K.ageInMonths(t)<9,underFiveYears:K.getAgeInYears(t)<5}}async printBarcode(){"dismiss"!==await te(be,{class:"small-confirm-modal "})&&(new ue).printData("barcode")}calculateDoB(e,t){try{let a=P(Q.getSessionDate());if("Years"===t&&e<0)a=a.add(Math.abs(e),"years");else switch(t){case"Days":a=a.subtract(e,"days");break;case"Months":a=a.subtract(e,"months");break;case"Years":a=a.subtract(e,"years");break;default:return null}return K.toStandardHisDisplayFormat(a.format("YYYY-MM-DD"))||""}catch(a){return console.error("Error calculating date:",a),null}}}const Ae=(e,t)=>{const a=F(()=>(new Ee).checkIfChild(e.value).moreThanThirteenYears),{getRelationships:n}=function(){const e=D([]),t=D([]),a=D([]),n=se();S();const i=F(()=>n.apiStatus),o=e=>{var n;const i=["Brother","Father","Son","Grandfather","Grandson","Boyfriend","Stepfather","Stepson"],o=["Sister","Mother","Daughter","Grandmother","Granddaughter","Girlfriend","Stepmother","Stepdaughter"],l=["Spouse/Partner","Aunt/Uncle","Niece/Nephew","Doctor","Other","Patient","TB Contact Person","TB Patient","treatment suporter"];(null===(n=t.value)||void 0===n?void 0:n.length)>0&&(a.value=t.value.filter(t=>"M"===e?i.includes(t.a_is_to_b)||l.includes(t.a_is_to_b):"F"===e&&o.includes(t.a_is_to_b)||l.includes(t.a_is_to_b)))};return{relationships:e,relationshipsData:t,filteredRelationships:a,apiStatus:i,getRelationships:async n=>n?(Q.getPouchDbStatus()&&Q.getLanConnectionStatus()?t.value=await X("relationship"):t.value=await ce.getRelations(),o(n),e.value=e.value=a.value.map(e=>[{name:e.b_is_to_a,id:e.relationship_type_id,trackByID:e.relationship_type_id+e.b_is_to_a}]).reduce((e,t)=>e.concat(t),[]),e.value):(o(n),e.value=a.value.map(e=>[{name:e.b_is_to_a,id:e.relationship_type_id,trackByID:e.relationship_type_id+e.b_is_to_a}]).reduce((e,t)=>e.concat(t),[]),e.value),filterRelationships:o}}(),i=D();V(e,async e=>{e&&(i.value=await n(e.gender))});return{guardianInformation:F(()=>[{componentType:"Heading",name:"Guardian Information",position:"center"},{componentType:"inputField",header:"Guardian National ID",name:"guardianNationalID",placeholder:"__-__-__-__",icon:j.nationalID,validation:e=>U.isMWNationalID(e)},{componentType:"inputField",header:"First name",name:"guardianFirstname",icon:j.fullName,validation:e=>a.value?U.isNameEmpty(e):U.isName(e)},{componentType:"inputField",header:"Middle name",name:"guardianMiddleName",icon:j.fullName,validation:e=>U.isNameEmpty(e)},{componentType:"inputField",header:"Last name",name:"guardianLastname",icon:j.fullName,validation:e=>a.value?U.isNameEmpty(e):U.isName(e)},{componentType:"phoneInputField",name:"guardianPhoneNumber",header:"Phone Number",validation:e=>U.isMWPhoneNumber(e.phoneNumber)},{componentType:"multiSelectInputField",header:"Relationship to patient",name:"relationship",trackBy:"trackByID",icon:j.search,validation:e=>a.value?null:U.required(null==e?void 0:e.name),options:()=>i.value,disabled:()=>!i.value}])}},Oe=t("b",n({__name:"GuardianInformation",props:{personalInformationFormValues:{}},setup(e,{expose:t}){const{formRef:a,exposeFormMethods:n}=J(),i=e,o=F(()=>i.personalInformationFormValues),{guardianInformation:l}=Ae(o);return t(n()),(e,t)=>(f(),x($,{formData:k(l),ref_key:"formRef",ref:a},null,8,["formData"]))}})),Ye=t("d",n({__name:"SocialHistory",setup(e,{expose:t}){const{socialHistory:a}=(()=>{const e=D();return me.isProp("military_site=true").then(t=>{e.value=t}),{socialHistory:F(()=>[{componentType:"Heading",name:"Social History",position:"center"},{componentType:"multiSelectInputField",header:"Religion",name:"religion",icon:j.search,trackBy:"id",options:[{id:1,name:"Christianity"},{id:2,name:"Islam"},{id:3,name:"Judaism"},{id:4,name:"Hinduism"},{id:5,name:"Buddhism"},{id:6,name:"Sikhism"},{id:7,name:"Jainism"},{id:8,name:"Bahá'í Faith"},{id:9,name:"Zoroastrianism"},{id:10,name:"Confucianism"},{id:11,name:"Taoism"},{id:12,name:"Shinto"},{id:13,name:"Baha'i Faith"},{id:14,name:"Juche"},{id:15,name:"Rastafari"}]},{componentType:"radioButtonField",header:"Occupation status",name:"occupation",type:"inline",validation:U.required,condition:()=>1==Q.getProgramID()&&e.value,options:[{label:"Military",value:"Military"},{label:"Civilian",value:"Civilian"}]},{componentType:"radioButtonField",header:"Occupation status",name:"occupation",type:"inline",condition:t=>!e,options:[{label:"Employed",value:"employed"},{label:"Student",value:"Student"},{label:"Unemployed",value:"unemployed"},{label:"Other",value:"Other"}]},{componentType:"radioButtonField",header:"Marital status",name:"maritalStatus",type:"inline",options:[{label:"Single",value:"single"},{label:"Married",value:"married"},{label:"Widow",value:"widow"},{label:"Widower",value:"widower"},{label:"Divorced",value:"divorced"}]},{componentType:"radioButtonField",header:"Highest level of education",name:"highestLevelOfEducation",type:"inline",options:[{label:"No education",value:"No education"},{label:"Primary school",value:"primary school"},{label:"Secondary school",value:"secondary school"},{label:"Tertiary education",value:"tertiary education"}]}])}})(),{formRef:n,exposeFormMethods:i}=J();return t(i()),(e,t)=>(f(),x($,{formData:k(a),ref_key:"formRef",ref:n},null,8,["formData"]))}})),qe=n({__name:"PatientType",setup(e,{expose:t}){const{patientType:a}=(()=>{const{facilityList:e,getFacilities:t}=he();return t(),{patientType:F(()=>[{componentType:"Heading",name:"Patient Type",position:"center"},{componentType:"radioButtonField",header:"Patient Type",name:"patient_type",type:"inline",validation:U.required,options:[{label:"New patient",value:"New patient"},{label:"Emergency supply",value:"Emergency supply"},{label:"External consultation",value:"External consultation"}]},{componentType:"multiSelectInputField",header:"Facility",name:"facility",trackBy:"facility_id",openDirection:"auto",icon:j.search,validation:e=>U.required(e),options:e.value.facilities||e.value,condition:e=>"Emergency supply"==(null==e?void 0:e.patient_type)||"External consultation"==(null==e?void 0:e.patient_type)}])}})(),{formRef:n,exposeFormMethods:i}=J();return t(i()),(e,t)=>(f(),x($,{formData:k(a),ref_key:"formRef",ref:n},null,8,["formData"]))}}),Ge=n({__name:"BirthRegistration",setup(e,{expose:t}){const{formRef:a,exposeFormMethods:n}=J(),{birthRegistration:i}=(e=>({birthRegistration:F(()=>[{componentType:"Heading",name:"Birth Registration",position:"center"},{componentType:"inputField",header:"Birth certificate number",name:"Serial Number",icon:j.nationalID,placeholder:"__-__-__-__"},{componentType:"inputField",header:"Birth Weight/First weight (kg)",name:"Weight",icon:j.weight,validation:e=>U.validateWeight(e)},{componentType:"multiSelectInputField",header:"How many doses of Tdv did the mother receive?",name:"How many doses of Tdv did the mother receive?",icon:j.search,options:[{concept_id:11997,name:"0-2 doses, less than two weeks before delivery"},{concept_id:11998,name:"2-5 doses more than two weeks of delivery"},{concept_id:1067,name:"Unknown"}],trackBy:"concept_id",validation:e=>U.required(e),onChange:t=>{const a=null==t?void 0:t.name;"Unknown"==a?e.value.setFormValue("Protected at birth",{concept_id:1067,name:"Don't know"}):"0-2 doses, less than two weeks before delivery"==a?e.value.setFormValue("Protected at birth",{concept_id:1066,name:"No"}):"2-5 doses more than two weeks of delivery"==a&&e.value.setFormValue("Protected at birth",{concept_id:1065,name:"Yes"})}},{componentType:"multiSelectInputField",header:"Protected at birth (PAB)",name:"Protected at birth",icon:j.search,trackBy:"concept_id",validation:e=>U.required(e),disabled:e=>!e["How many doses of Tdv did the mother receive?"]},{componentType:"multiSelectInputField",header:"HIV status of the Child's Mother",name:"HIV status",icon:j.search,options:[{id:703,name:"Positive"},{id:664,name:"Negative"},{id:1067,name:"Unknown"}],trackBy:"id",validation:e=>U.required(e)}])}))(a);return t(n()),(e,t)=>(f(),x($,{formData:k(i),ref_key:"formRef",ref:a},null,8,["formData"]))}});function je(){const e=D(1),t=D(4),a=ne(),{patient:n}=N(a),i=F(()=>0===t.value?4:Math.ceil(4/t.value)),o=F(()=>i.value>1),l=F(()=>o.value&&e.value>1),r=F(()=>o.value&&e.value<i.value),d=()=>{t.value=(()=>{const e=window.innerWidth;return e>=992?4:e>=768?3:e>=576?2:1})(),e.value>i.value&&(e.value=i.value),0===e.value&&i.value>0&&(e.value=1)};return C(()=>{window.addEventListener("resize",d),d()}),B(()=>{window.removeEventListener("resize",d)}),{currentPage:e,columnsPerRow:t,totalPages:i,showPaginationButtons:o,showPreviousButton:l,showNextButton:r,nextPage:()=>{e.value<i.value&&e.value++},prevPage:()=>{e.value>1&&e.value--},goToPage:t=>{t>=1&&t<=i.value&&(e.value=t)},handleResize:d,isCardVisible:a=>{if(1===i.value)return!0;const n=(e.value-1)*t.value,o=n+t.value-1;return a>=n&&a<=o}}}const We={key:0,class:"spinner-overlay"},ze={class:"header-title"},Ue={class:"masonry-grid"},Je={class:"card-container"},$e={class:"custom-card"},Ke={class:"card-container"},Qe={key:0,class:"custom-card"},Xe={key:1,class:"custom-card"},Ze={class:"custom-card card-margin-top"},et={key:0,class:"card-container"},tt={class:"custom-card"},at={class:"custom-card card-margin-top"},nt={class:"card-container"},it={class:"custom-card"},ot={key:0,class:"custom-card card-margin-top"},lt={class:"footer-content"},rt={class:"footer-buttons-left"},dt={key:0,class:"pagination-dots"},ut=["onClick","aria-label"],st={class:"footer-buttons-right"},ct=n({__name:"Registration",props:{editMode:{type:Boolean,default:!1}},setup(e){const t=D(!1),a=L(),n=S(),o=ge(),l=D(null),r=D(null),d=D(null),u=D(null),s=D(null),c=D(null),m=D(null),p=D(null),P=D({personalInformationRef:l,birthRegistrationRef:r,socialHistoryRef:d,countryRef:u,currentLocationRef:s,homeLocationRef:c,guardianInformationRef:m,patientTypeRef:p}),V=F(()=>{var e;return(null===(e=l.value)||void 0===e?void 0:e.currentFormValues)||{}}),B=F(()=>{var e;return(null===(e=r.value)||void 0===e?void 0:e.currentFormValues)||{}}),j=F(()=>{var e;return(null===(e=d.value)||void 0===e?void 0:e.currentFormValues)||{}}),W=F(()=>{var e;return(null===(e=u.value)||void 0===e?void 0:e.currentFormValues)||{}}),z=F(()=>{var e;return(null===(e=s.value)||void 0===e?void 0:e.currentFormValues)||{}}),U=F(()=>{var e;return(null===(e=c.value)||void 0===e?void 0:e.currentFormValues)||{}}),J=F(()=>{var e;return(null===(e=m.value)||void 0===e?void 0:e.currentFormValues)||{}}),$=F(()=>{var e;return(null===(e=p.value)||void 0===e?void 0:e.currentFormValues)||{}}),X=F(()=>({personalInformation:V.value,birthRegistration:B.value,socialHistory:j.value,country:W.value,currentLocation:z.value,homeLocation:U.value,guardianInformation:J.value,patientType:$.value})),Z=()=>{const e=Object.values(P.value);return e.forEach(e=>null==e?void 0:e.validateForm()),e.every(e=>null==(null==e?void 0:e.validateForm()))},ee=()=>{Object.values(P.value).forEach(e=>null==e?void 0:e.resetForm())},te=F(()=>(new Ee).checkIfChild(V.value)),{nextPage:ae,prevPage:ie,goToPage:oe,isCardVisible:le,showPreviousButton:re,showPaginationButtons:de,totalPages:ue,currentPage:se,showNextButton:ce}=je(),{setFormValues:me}=function(){const e=ne(),{patient:t}=N(e),a=e=>{var a,n;const i=null==t||null===(a=t.value)||void 0===a||null===(a=a.guardianInformation)||void 0===a?void 0:a.saved[0],o=null!=i&&null!==(n=i.relationship_type)&&void 0!==n&&n.b_is_to_a?{name:i.relationship_type.b_is_to_a,id:i.relationship_type.relationship_type_id,trackByID:i.relationship_type.relationship_type_id+i.relationship_type.b_is_to_a}:"";null==e||e.setFormValue("guardianNationalID",(null==i?void 0:i.national_id)||""),null==e||e.setFormValue("guardianFirstname",(null==i?void 0:i.given_name)||""),null==e||e.setFormValue("guardianMiddleName",(null==i?void 0:i.middle_name)||""),null==e||e.setFormValue("guardianLastname",(null==i?void 0:i.family_name)||""),null==e||e.setFormValue("guardianPhoneNumber",null!=i&&i.cell_phone_number?null==i?void 0:i.cell_phone_number:""),null==e||e.setFormValue("relationship",o||"")};return{setFormValues:e=>{var n,i;const{personalInformationRef:o,socialHistoryRef:l,countryRef:r,currentLocationRef:d,homeLocationRef:u,guardianInformationRef:s}=e.value,c=null==t||null===(n=t.value)||void 0===n?void 0:n.personInformation;null==o||o.setFormValue("nationalID",null==t||null===(i=t.value)||void 0===i||null===(i=i.otherPersonInformation)||void 0===i?void 0:i.nationalID),null==o||o.setFormValue("firstname",null==c?void 0:c.given_name),null==o||o.setFormValue("middleName",null==c?void 0:c.middle_name),null==o||o.setFormValue("lastname",null==c?void 0:c.family_name),null==o||o.setFormValue("gender",null==c?void 0:c.gender),null==o||o.setFormValue("birthdate",null!=c&&c.birthdate?K.toStandardHisDisplayFormat(null==c?void 0:c.birthdate):""),null==o||o.setFormValue("Phone Number",null!=c&&c.cell_phone_number?null==c?void 0:c.cell_phone_number:""),null==u||u.setFormValue("home_district",{name:null==c?void 0:c.home_district}),null==u||u.setFormValue("home_traditional_authority",{name:null==c?void 0:c.home_traditional_authority}),null==u||u.setFormValue("home_village",{name:null==c?void 0:c.home_village}),null==d||d.setFormValue("current_district",{name:null==c?void 0:c.current_district}),null==d||d.setFormValue("current_traditional_authority",{name:null==c?void 0:c.current_traditional_authority}),null==d||d.setFormValue("current_village",{name:null==c?void 0:c.current_village}),null==d||d.setFormValue("closestLandmark",{name:null==c?void 0:c.landmark}),null==r||r.setFormValue("country",null!=c&&c.country?{name:null==c?void 0:c.country}:{name:"Malawi"}),null==l||l.setFormValue("religion",{name:null==c?void 0:c.religion}),null==l||l.setFormValue("occupation",null==c?void 0:c.occupation),null==l||l.setFormValue("maritalStatus",null==c?void 0:c.marital_status),null==l||l.setFormValue("highestLevelOfEducation",null==c?void 0:c.education_level),a(s)}}}(),he=async()=>{if(!Z())return void ve("Please fill in all required fields");if(await(new Ee).saveRegistrationData(X.value)){ee();const e=n.query.context,t=n.query.returnTo;if("neonatal-mother"===e&&"/neonatal/enrollment"===t){const e=Q.getUserID();return e&&o.setCreatedMother(e),void setTimeout(()=>{a.replace({path:t})},50)}32==Q.getProgramID()?!function(){const e=JSON.parse(localStorage.getItem("userRoles"))||[];return!(!e.some(t=>"General Registration Clerk"===t.role||e.some(t=>"Vitals Clerk"===t.role||e.some(e=>"Registration Clerk"===e.role)))||32!=Q.getProgramID())}()?fe("/NCDEnrollment"):fe("/home"):fe("/patientProfile")}},fe=e=>{a.push({path:e})};return C(async()=>{me(P)}),(D,F)=>(f(),x(k(M),{class:H({loading:t.value})},{default:b(()=>[t.value?(f(),h("div",We,[_(k(E),{name:"bubbles"}),F[4]||(F[4]=y("div",{class:"loading-text"},"Please wait...",-1))])):g("",!0),_(k(A),null,{default:b(()=>[y("div",ze,T(e.editMode?"Edit Patient Demographic":"New Patient Registration"),1)]),_:1}),_(k(O),null,{default:b(()=>{var t,a;return[y("div",Ue,[Y(y("div",Je,[y("div",$e,[_(ke,{ref_key:"personalInformationRef",ref:l},null,512)])],512),[[q,k(le)(0)]]),Y(y("div",Ke,[te.value.underNineMonths&&!e.editMode?(f(),h("div",Qe,[te.value.underNineMonths?(f(),x(Ge,{key:0,ref_key:"birthRegistrationRef",ref:r},null,512)):g("",!0)])):g("",!0),te.value.moreThanThirteenYears?(f(),h("div",Xe,[_(Ye,{ref_key:"socialHistoryRef",ref:d},null,512)])):g("",!0),y("div",Ze,[_(xe,{ref_key:"countryRef",ref:u},null,512)])],512),[[q,k(le)(1)]]),null!==(t=W.value)&&void 0!==t&&null!==(t=t.country)&&void 0!==t&&t.name&&"Malawi"!==(null===(a=W.value)||void 0===a||null===(a=a.country)||void 0===a?void 0:a.name)?g("",!0):Y((f(),h("div",et,[y("div",tt,[_(Ie,{ref_key:"currentLocationRef",ref:s},null,512)]),y("div",at,[_(Fe,{currentLocationFormValues:z.value,ref_key:"homeLocationRef",ref:c},null,8,["currentLocationFormValues"])])],512)),[[q,k(le)(2)]]),Y(y("div",nt,[y("div",it,[_(Oe,{personalInformationFormValues:V.value,ref_key:"guardianInformationRef",ref:m},null,8,["personalInformationFormValues"])]),1==k(Q).getProgramID()?(f(),h("div",ot,[_(qe,{ref_key:"patientTypeRef",ref:p},null,512)])):g("",!0)],512),[[q,k(le)(3)]])])]}),_:1}),_(k(G),null,{default:b(()=>[y("div",lt,[y("div",rt,[_(k(i),{color:"danger","aria-label":"Cancel registration",onClick:F[0]||(F[0]=t=>e.editMode?(async()=>{await pe("Do you want to cancel editing of demographics?","",{confirmBtnLabel:"Yes",icon:"",showBackdrop:!0})&&v.dismiss()})():(async()=>{if(await pe("Do you want to cancel registration?","",{confirmBtnLabel:"Yes",icon:"",showBackdrop:!0})){const e=n.query.context,t=n.query.returnTo;if(ee(),"neonatal-mother"===e&&"/neonatal/enrollment"===t)return o.clearEnrollmentContext(),void setTimeout(()=>{a.replace({path:t})},50);a.replace({path:"/home"})}})())},{default:b(()=>[...F[5]||(F[5]=[I("Cancel",-1)])]),_:1}),Y(_(k(i),{onClick:F[1]||(F[1]=e=>k(ie)()),"aria-label":"Go to previous page"},{default:b(()=>[...F[6]||(F[6]=[I("Previous",-1)])]),_:1},512),[[q,k(re)]])]),k(de)?(f(),h("div",dt,[(f(!0),h(w,null,R(k(ue),e=>(f(),h("span",{key:e,class:H({dot:!0,active:e===k(se)}),onClick:t=>k(oe)(e),"aria-label":`Go to page ${e}`,role:"button"},null,10,ut))),128))])):g("",!0),y("div",st,[Y(_(k(i),{name:"Save",onClick:F[2]||(F[2]=t=>e.editMode?(async()=>{Z()?await(new Ee).updateDemographics(X.value)&&v.dismiss():ve("Please fill in all required fields")})():he()),"aria-label":"Save patient data"},{default:b(()=>[I(T(e.editMode?"Update":"Save"),1)]),_:1},512),[[q,k(se)===k(ue)]]),Y(_(k(i),{onClick:F[3]||(F[3]=e=>k(ae)()),"aria-label":"Go to next page"},{default:b(()=>[...F[7]||(F[7]=[I("Next",-1)])]),_:1},512),[[q,k(ce)]])])])]),_:1})]),_:1},8,["class"]))}}),mt=t("R",z(ct,[["__scopeId","data-v-555dbb7e"]])),vt=Object.freeze(Object.defineProperty({__proto__:null,default:mt},Symbol.toStringTag,{value:"Module"}));t("e",vt)}}})}();
