System.register(["./vendor-legacy-dVheaJN3.js","../index-legacy-CvQNWmNm.js","./neonatal_service-legacy-DxxlrfRz.js","./DemographicBar-legacy-Sq7Dxzkw.js","./SaveProgressModal-legacy-B3PFfX8v.js","./images-legacy-CWgrEOfh.js","./NeonatalEnrollmentStore-legacy-CmwpGFRM.js","./lodash-legacy-pOOc9Efu.js","./apexcharts-legacy-jY8W1P_O.js"],function(e,a){"use strict";var t,n,l,r,i,o,s,d,c,u,m,p,v,h,f,g,b,y,w,k,x,S,F,_,N,D,I,T,B,C,z,V,R,A,M,O,P,Y,H,E,$,L,U,j,G,W,K,q,Q,J,Z,X,ee,ae,te,ne,le,re,ie,oe,se,de,ce,ue,me,pe,ve,he,fe,ge,be;return{setters:[e=>{t=e.d,n=e.a4,l=e.a5,r=e.aP,i=e.aS,o=e.N,s=e.aZ,d=e.aY,c=e.f7,u=e.aU,m=e.bJ,p=e.H,v=e.O,h=e.f,f=e.J,g=e.l,b=e.k,y=e.K,w=e.e,k=e.F,x=e.P,S=e.p,F=e.m,_=e.i,N=e.bS,D=e.Q,I=e.v,T=e.eO,B=e.r,C=e.c,z=e.w,V=e.u,R=e.aR,A=e.L,M=e.bj,O=e.cv,P=e.aQ,Y=e.Y,H=e.bE,E=e.cG,$=e.a,L=e.an,U=e.f8,j=e.bk,G=e.f9,W=e.d8,K=e.a3,q=e.a6,Q=e.aV,J=e.bw,Z=e.eP},e=>{X=e.J,ee=e.i,ae=e.m,te=e.t,ne=e._,le=e.l,re=e.u,ie=e.P,oe=e.aC,se=e.L,de=e.T,ce=e.b4,ue=e.H,me=e.ab,pe=e.G},e=>{ve=e.N},e=>{he=e.D},e=>{fe=e.S},e=>{ge=e.I},e=>{be=e.u},null,null],execute:function(){var a=document.createElement("style");a.textContent=".button-row[data-v-21d48500]{display:flex;justify-content:space-between;align-items:center;margin-top:20px;padding:0 20px 20px}.left-button-group[data-v-21d48500],.right-button-group[data-v-21d48500]{display:flex;gap:10px}.cancel-button[data-v-21d48500]{--background: var(--ion-color-danger);color:#fff;border-radius:4px;min-width:120px}.previous-button[data-v-21d48500]{--background: var(--ion-color-medium-shade);color:#fff;border-radius:4px;min-width:120px}.next-button[data-v-21d48500]{--background: var(--ion-color-primary);color:#fff;border-radius:4px;min-width:120px}.back_profile[data-v-21d48500]{display:flex;justify-content:space-between;width:140px;align-items:center;font-weight:400;font-size:14px;z-index:1000;margin-bottom:10px}.wizard_card[data-v-21d48500]{width:100%;background-color:#fff;position:sticky;top:20px}.wizard_title[data-v-21d48500]{padding:16px;font-size:18px;border-bottom:1px solid rgba(0,0,0,.1)}.stepper_content_wrapper[data-v-21d48500]{height:78vh;overflow-y:auto;background-color:#fff;border-radius:8px}.stepper_content_wrapper[data-v-21d48500]::-webkit-scrollbar{width:8px}.stepper_content_wrapper[data-v-21d48500]::-webkit-scrollbar-track{background:#f1f1f1}.stepper_content_wrapper[data-v-21d48500]::-webkit-scrollbar-thumb{background:#888;border-radius:4px}.stepper_content_wrapper[data-v-21d48500]::-webkit-scrollbar-thumb:hover{background:#555}.step_section[data-v-21d48500]{min-height:60vh}.section_header[data-v-21d48500]{padding:10px;border-bottom:1.5px solid #ECECEC}.section_header h2[data-v-21d48500]{margin:0;font-size:24px;font-weight:600}.section_content[data-v-21d48500]{margin-bottom:20px;padding:20px}.wizard_verticle ul.wizard_steps li a .open_step.common_step[data-v-21d48500]{background-color:var(--ion-color-primary)!important;border-color:var(--ion-color-primary)!important;color:#fff!important}@media(max-width:768px){.displayNoneMobile[data-v-21d48500]{display:none}}.twin-search-container[data-v-9ecea754]{padding:0;margin-top:1rem}.header-with-icon[data-v-9ecea754]{display:flex;align-items:center;gap:1rem}.icon-wrapper[data-v-9ecea754]{position:relative;width:48px;height:48px}.header-icon[data-v-9ecea754]{width:48px;height:48px;object-fit:contain}.search-badge-icon[data-v-9ecea754]{position:absolute;bottom:-4px;right:-4px;font-size:18px;background:var(--ion-color-primary);color:#fff;border-radius:50%;padding:4px;box-shadow:0 2px 4px rgba(0,0,0,.2)}.info-note[data-v-9ecea754]{display:block;margin-bottom:1rem;padding:.75rem;background:rgba(var(--ion-color-warning-rgb),.1);border-radius:4px;font-size:.9rem}.search-with-button[data-v-9ecea754]{display:flex;align-items:center;gap:.5rem;margin:1rem 0}.skip-btn[data-v-9ecea754]{flex-shrink:0;margin:0;--padding-start: 12px;--padding-end: 12px}.search-wrapper[data-v-9ecea754]{width:100%;position:relative;display:flex;align-items:center}.search-input[data-v-9ecea754]{width:100%;--border-radius: .5rem;--background: #f6f6f6;--color: #333}.search-results[data-v-9ecea754]{margin-top:1rem}.search-loading[data-v-9ecea754]{display:flex;flex-direction:column;gap:0}.result-item-skeleton[data-v-9ecea754]{padding:1.25rem 1rem;border-top:1px dashed var(--ion-color-light-shade);background:#fff}.result-item-skeleton[data-v-9ecea754]:first-child{border-top:none}.skeleton-header[data-v-9ecea754]{display:flex;align-items:center;gap:1rem;margin-bottom:.75rem;flex-wrap:wrap}.skeleton-name[data-v-9ecea754]{height:20px;width:180px;background:linear-gradient(90deg,#f0f0f0 25%,#e0e0e0,#f0f0f0 75%);background-size:200% 100%;animation:shimmer-9ecea754 1.5s infinite;border-radius:4px}.skeleton-dob[data-v-9ecea754]{height:16px;width:100px;background:linear-gradient(90deg,#f0f0f0 25%,#e0e0e0,#f0f0f0 75%);background-size:200% 100%;animation:shimmer-9ecea754 1.5s infinite;border-radius:4px}@keyframes shimmer-9ecea754{0%{background-position:200% 0}to{background-position:-200% 0}}.results-list[data-v-9ecea754]{margin-top:1rem}.result-item[data-v-9ecea754]{padding:1.25rem 1rem;border-top:1px dashed var(--ion-color-light-shade);cursor:pointer;transition:all .2s;background:#fff}.result-item[data-v-9ecea754]:first-child{border-top:none}.result-item[data-v-9ecea754]:hover{background:var(--ion-color-light-tint)}.result-header[data-v-9ecea754]{display:flex;align-items:center;gap:1rem;margin-bottom:.75rem;flex-wrap:wrap}.twin-name[data-v-9ecea754]{font-size:1.125rem;font-weight:600;color:var(--ion-color-dark);margin:0}.twin-mrn[data-v-9ecea754],.twin-dob[data-v-9ecea754]{font-size:.9rem;color:var(--ion-color-medium)}.result-details[data-v-9ecea754]{padding-left:0}.twin-gender[data-v-9ecea754]{margin:.5rem 0 0;font-size:.9rem;color:var(--ion-color-dark)}.twin-gender strong[data-v-9ecea754]{font-weight:500}.no-results[data-v-9ecea754]{text-align:center;padding:2rem}.no-results-icon[data-v-9ecea754]{font-size:3rem;color:var(--ion-color-medium);margin-bottom:1rem}.info-text[data-v-9ecea754]{font-size:.875rem;color:var(--ion-color-medium);margin-top:.5rem}.selected-twin[data-v-9ecea754]{margin-top:1.5rem}.selected-card[data-v-9ecea754]{border:1px solid #e5e5e5;border-radius:8px;overflow:hidden}.selected-card-header[data-v-9ecea754]{display:flex;align-items:center;justify-content:space-between;padding:.875rem 1rem;background:#f8f8f8;border-bottom:1px solid #ececec}.header-content[data-v-9ecea754]{display:flex;align-items:center;gap:.5rem;background:#fff;padding:.5rem;border-radius:50px;border:1px dotted #ececec}.selected-icon-wrapper[data-v-9ecea754]{width:30px;height:30px;border-radius:50%;background:var(--ion-color-primary);display:flex;align-items:center;justify-content:center;box-shadow:0 2px 6px rgba(0,0,0,.1);flex-shrink:0}.selected-header-icon[data-v-9ecea754]{width:15px;height:15px;object-fit:contain;filter:brightness(0) invert(1)}.header-separator[data-v-9ecea754]{width:1px;height:24px;background:#d4d4d4;flex-shrink:0}.success-icon[data-v-9ecea754]{font-size:1.25rem;color:#10b981}.selected-subtitle[data-v-9ecea754]{font-size:.875rem;font-weight:500;color:#525252}.clear-selection-btn[data-v-9ecea754]{margin:0;--padding-start: 6px;--padding-end: 6px;--color: var(--ion-color-medium-shade)}.clear-selection-btn[data-v-9ecea754]:hover{--color: var(--ion-color-danger)}.clear-selection-btn ion-icon[data-v-9ecea754]{font-size:1.5rem}.selected-card-content[data-v-9ecea754]{padding:1.25rem}.patient-info-grid[data-v-9ecea754]{display:flex;flex-direction:column;gap:1rem}.info-row[data-v-9ecea754]{display:flex;justify-content:space-between;align-items:center;padding:.75rem 1rem;border-bottom:none}.info-row[data-v-9ecea754]:nth-child(odd){background:#ececec}.info-row[data-v-9ecea754]:nth-child(2n){background:#fff}.info-label[data-v-9ecea754]{font-size:.813rem;font-weight:400;color:#737373;text-transform:uppercase;letter-spacing:.5px}.info-value[data-v-9ecea754]{font-size:.938rem;font-weight:600;color:#171717;text-align:right}.birth-details-wrapper[data-v-1a647a53]{display:flex;flex-direction:column;gap:1rem}.mother-search-container[data-v-0beac54f]{padding:0rem}.header-with-icon[data-v-0beac54f]{display:flex;align-items:center;gap:1rem}.icon-wrapper[data-v-0beac54f]{position:relative;width:48px;height:48px}.header-icon[data-v-0beac54f]{width:48px;height:48px;object-fit:contain}.search-badge-icon[data-v-0beac54f]{position:absolute;bottom:-4px;right:-4px;font-size:18px;background:var(--ion-color-primary);color:#fff;border-radius:50%;padding:4px;box-shadow:0 2px 4px rgba(0,0,0,.2)}.info-note[data-v-0beac54f]{display:block;margin-bottom:1rem;padding:.75rem;background:rgba(var(--ion-color-warning-rgb),.3);border-radius:8px;font-size:.9rem}.search-with-button[data-v-0beac54f]{display:flex;align-items:center;gap:.5rem;margin:1rem 0}.new-registration-btn[data-v-0beac54f]{flex-shrink:0;margin:0;--padding-start: 12px;--padding-end: 12px}.search-input[data-v-0beac54f]{flex:1;margin:0;padding:0}.search-results[data-v-0beac54f]{margin-top:1rem}.search-loading[data-v-0beac54f]{display:flex;flex-direction:column;gap:0}.result-item-skeleton[data-v-0beac54f]{padding:1.25rem 1rem;border-top:1px dashed var(--ion-color-light-shade);background:#fff}.result-item-skeleton[data-v-0beac54f]:first-child{border-top:none}.skeleton-header[data-v-0beac54f]{display:flex;align-items:center;gap:1rem;margin-bottom:.75rem;flex-wrap:wrap}.skeleton-name[data-v-0beac54f]{height:20px;width:180px;background:linear-gradient(90deg,#f0f0f0 25%,#e0e0e0,#f0f0f0 75%);background-size:200% 100%;animation:shimmer-0beac54f 1.5s infinite;border-radius:4px}.skeleton-dob[data-v-0beac54f]{height:16px;width:100px;background:linear-gradient(90deg,#f0f0f0 25%,#e0e0e0,#f0f0f0 75%);background-size:200% 100%;animation:shimmer-0beac54f 1.5s infinite;border-radius:4px}.skeleton-gender[data-v-0beac54f]{height:16px;width:60px;background:linear-gradient(90deg,#f0f0f0 25%,#e0e0e0,#f0f0f0 75%);background-size:200% 100%;animation:shimmer-0beac54f 1.5s infinite;border-radius:4px}.skeleton-details[data-v-0beac54f]{display:flex;flex-direction:column;gap:.5rem}.skeleton-address[data-v-0beac54f]{height:16px;width:250px;background:linear-gradient(90deg,#f0f0f0 25%,#e0e0e0,#f0f0f0 75%);background-size:200% 100%;animation:shimmer-0beac54f 1.5s infinite;border-radius:4px}.skeleton-phone[data-v-0beac54f]{height:16px;width:120px;background:linear-gradient(90deg,#f0f0f0 25%,#e0e0e0,#f0f0f0 75%);background-size:200% 100%;animation:shimmer-0beac54f 1.5s infinite;border-radius:4px}@keyframes shimmer-0beac54f{0%{background-position:200% 0}to{background-position:-200% 0}}.results-list[data-v-0beac54f]{margin-top:1rem}.result-item[data-v-0beac54f]{padding:1.25rem 1rem;border-top:1px dashed var(--ion-color-light-shade);cursor:pointer;transition:all .2s;background:#fff}.result-item[data-v-0beac54f]:first-child{border-top:none}.result-item[data-v-0beac54f]:hover{background:var(--ion-color-light-tint)}.result-header[data-v-0beac54f]{display:flex;align-items:center;gap:1rem;margin-bottom:.75rem;flex-wrap:wrap}.mother-name[data-v-0beac54f]{font-size:1.125rem;font-weight:600;color:var(--ion-color-dark);margin:0}.mother-dob[data-v-0beac54f],.mother-gender[data-v-0beac54f]{font-size:.9rem;color:var(--ion-color-medium)}.result-details[data-v-0beac54f]{padding-left:0}.mother-address[data-v-0beac54f]{margin:.5rem 0;font-size:.9rem;color:var(--ion-color-dark)}.mother-address strong[data-v-0beac54f]{font-weight:500}.mother-phone[data-v-0beac54f]{display:flex;align-items:center;gap:.5rem;margin:.5rem 0 0;font-size:.9rem;color:var(--ion-color-dark)}.mother-phone ion-icon[data-v-0beac54f]{font-size:1.1rem;color:var(--ion-color-medium)}.pagination[data-v-0beac54f]{display:flex;justify-content:center;align-items:center;gap:1rem;margin-top:1rem;padding:1rem}.page-info[data-v-0beac54f]{font-size:.9rem;color:var(--ion-color-medium)}.no-results[data-v-0beac54f]{text-align:center;padding:2rem}.no-results-icon[data-v-0beac54f]{font-size:3rem;color:var(--ion-color-medium);margin-bottom:1rem}.selected-mother[data-v-0beac54f]{margin-top:1rem}.selected-card[data-v-0beac54f]{background:#fbfbfb;border:2px dotted var(--ion-color-medium);border-radius:8px;overflow:hidden}.selected-card-header[data-v-0beac54f]{padding:1rem 1rem .5rem}.selected-card-content[data-v-0beac54f]{padding:.5rem 1rem 1rem}.selected-subtitle[data-v-0beac54f]{font-size:.875rem;font-weight:600;color:var(--ion-color-dark);text-transform:uppercase;letter-spacing:.5px}.selected-header-with-button[data-v-0beac54f]{display:flex;align-items:center;justify-content:space-between}.clear-selection-btn[data-v-0beac54f]{margin:0;--padding-start: 8px;--padding-end: 8px;opacity:1}.clear-selection-btn ion-icon[data-v-0beac54f]{opacity:1;font-size:24px}.selected-info[data-v-0beac54f]{margin-bottom:0}.selected-info h3[data-v-0beac54f]{margin:0 0 .5rem;color:#000;text-transform:uppercase;font-size:1.125rem;font-weight:600}.selected-info p[data-v-0beac54f]{margin:.25rem 0;font-size:.9rem}.search-wrapper[data-v-0beac54f]{width:100%;position:relative;display:flex;align-items:center}.search-input[data-v-0beac54f]{width:100%;--border-radius: .5rem;--background: #f6f6f6;--color: #333}.barcode-btn[data-v-0beac54f]{position:absolute;right:0;top:26px;transform:translateY(-50%);height:34px;width:34px;z-index:2}.neonatal-enrollment-page[data-v-1e8dda56]{min-height:100vh}\n/*$vite$:1*/",document.head.appendChild(a);const ye=t({name:"NeonatalStepper",components:{IonButton:o,IonCard:i,IonCardContent:r,IonCol:l,IonRow:n,DynamicButton:X},data:()=>({currentStepIndex:0,stepRefs:new Map}),props:{wizardData:{default:[]},StepperData:{default:[]},stepperTitle:{type:String,default:""},openStepper:{type:String,default:"1"},backBtn:{type:String,default:"Back to profile"},backUrl:{type:String,default:""},getSaveFunction:{type:Function,required:!0}},setup:()=>({chevronBackOutline:m,checkmark:u,closeOutline:c}),mounted(){const e=parseInt(this.openStepper)-1;this.currentStepIndex=e>=0?e:0},methods:{setStepRef(e,a){e&&this.stepRefs.set(a,e)},chevronBack:()=>d,chevronForward:()=>s,openBackController(){this.backUrl?this.$router.push(this.backUrl):ae(fe)},async nextStep(e){const a=await this.validateCurrentStep(e);if(a){const e=Object.values(a).join(", ");return void te(`Please fix the following errors: ${e}`)}const t=this.getSaveFunction(e);t&&"function"==typeof t&&await t();const n=e+1;n<this.StepperData.length&&(this.currentStepIndex=n,this.updateWizardStatus(n),this.$emit("updateStatus",{value:this.StepperData[n].value}))},async validateCurrentStep(e){const a=this.stepRefs.get(e);return a?"function"==typeof a.validateForm?a.validateForm():null:(console.warn(`No component instance found for step ${e}`),null)},previousStep(e){const a=e-1;a>=0&&(this.currentStepIndex=a,this.updateWizardStatus(a),this.$emit("updateStatus",{value:this.StepperData[a].value}))},async handleCancel(){await ee("Are you sure you want to cancel? All unsaved progress will be lost.",{header:"Cancel Neonatal Enrollment",confirmBtnLabel:"Yes, Cancel",cancelBtnLabel:"No, Continue"})&&(this.backUrl?this.$router.push(this.backUrl):ae(fe))},updateWizardStatus(e){this.wizardData.forEach((a,t)=>{t===e?(a.class="open_step common_step",a.checked=!1):t<e?(a.class="common_step color_white",a.checked=!0):(a.class="common_step",a.checked=!1)})}}}),we={class:"wizard_title"},ke={id:"wizard_verticle",class:"form_wizard wizard_verticle"},xe={class:"list-unstyled wizard_steps anchor"},Se={class:"done",isdone:"1",rel:"1"},Fe={key:1,class:""},_e={class:"wizard_text"},Ne={class:"back_profile"},De={class:"stepper_content_wrapper"},Ie={class:"section_header"},Te={class:"section_content"},Be={class:"button-row"},Ce={class:"left-button-group"},ze={class:"right-button-group"},Ve=ne(ye,[["render",function(e,a,t,n,l,r){const i=p("ion-icon"),o=p("ion-card-content"),s=p("ion-card"),d=p("ion-col"),c=p("DynamicButton"),u=p("ion-button"),m=p("ion-row");return h(),v(m,null,{default:f(()=>[g(d,{"size-md":"4","size-xl":"2.5","size-sm":"0","size-lg":"4","offset-sm":"0","offset-md":"0.4","offset-xl":"0.8",class:"displayNoneMobile"},{default:f(()=>[g(s,{class:"wizard_card"},{default:f(()=>[b("div",we,[b("strong",null,y(e.stepperTitle),1)]),g(o,null,{default:f(()=>[b("div",ke,[b("ul",xe,[(h(!0),w(k,null,x(e.wizardData,(a,t)=>(h(),w("li",{key:t,class:S(a.last_step)},[b("a",Se,[b("span",{class:S(a.class)},[a.checked?(h(),v(i,{key:0,icon:e.checkmark,class:"checked_step"},null,8,["icon"])):F("",!0),a.checked?F("",!0):(h(),w("span",Fe,y(a.number),1)),b("span",_e,y(a.title),1)],2)])],2))),128))])])]),_:1})]),_:1})]),_:1}),g(d,{"size-sm":"12","size-xl":"7","size-md":"7.2","size-lg":"7","offset-sm":"0","offset-md":"0.4","offset-xl":"0.8"},{default:f(()=>[b("div",Ne,[g(c,{name:e.backBtn,iconSlot:"start",fill:"clear",icon:e.chevronBackOutline,onClick:a[0]||(a[0]=a=>e.openBackController())},null,8,["name","icon"])]),b("div",De,[(h(!0),w(k,null,x(e.StepperData,(t,n)=>_((h(),w("div",{key:n,class:"step_section"},[b("div",Ie,[b("h2",null,y(t.title),1)]),b("div",Te,[(h(),v(N(t.component),{ref_for:!0,ref:a=>e.setStepRef(a,n)},null,512))]),b("div",Be,[b("div",Ce,[0===n?(h(),v(u,{key:0,class:"cancel-button",onClick:e.handleCancel},{default:f(()=>[g(i,{icon:e.closeOutline,slot:"start"},null,8,["icon"]),a[1]||(a[1]=D(" Cancel ",-1))]),_:1},8,["onClick"])):(h(),v(u,{key:1,class:"previous-button",onClick:a=>e.previousStep(n)},{default:f(()=>[g(i,{icon:e.chevronBack(),slot:"start"},null,8,["icon"]),a[2]||(a[2]=D(" Previous ",-1))]),_:1},8,["onClick"]))]),b("div",ze,[g(u,{class:"next-button",onClick:a=>e.nextStep(n)},{default:f(()=>[D(y(n<e.StepperData.length-1?"Next":"Finish")+" ",1),g(i,{icon:n<e.StepperData.length-1?e.chevronForward():e.checkmark,slot:"end"},null,8,["icon"])]),_:2},1032,["onClick"])])])])),[[I,e.currentStepIndex===n]])),128))])]),_:1})]),_:1})}],["__scopeId","data-v-21d48500"]]),Re=e=>e.map(e=>({value:e,label:e})),Ae=(e,a)=>Array.from({length:a-e+1},(a,t)=>{const n=(e+t).toString();return{value:n,label:n}}),Me=[{title:"Birth details",subtitle:"Capture the initial arrival information",formData:[{componentType:"radioButtonField",header:"Does the baby have a twin?",name:"hasTwin",options:[{label:"Yes",value:"Yes"},{label:"No",value:"No"}],validation:e=>e?null:"Specify whether the neonate has a twin"},{componentType:"multiSelectInputField",header:"Place of Birth",name:"placeOfBirth",placeholder:"Select type",icon:le.search,options:Re(["Hospital","Health Center","Home","Other"]),trackBy:"value",validation:e=>null!=e&&e.value||e?null:"Select the place of birth"},{componentType:"multiSelectInputField",header:"Name of Birth Facility",name:"birthFacility",placeholder:"Select facility",icon:le.search,options:Re(["Lilongwe Central","Queen Elizabeth","District Hospital","Community Clinic"]),trackBy:"value",validation:e=>null!=e&&e.value||e?null:"Select a facility"},{componentType:"multiSelectInputField",header:"Type of Birth",name:"typeOfBirth",placeholder:"Select type",icon:le.search,options:Re(["Singleton","Twin","Triplet"]),trackBy:"value",validation:e=>null!=e&&e.value||e?null:"Select the type of birth"},{componentType:"inputField",header:"Birth weight (grams)",name:"birthWeight",type:"number",placeholder:"Enter weight",validation:e=>Number(e)>0?null:"Provide the birth weight"},{componentType:"timeInputField",header:"Time of birth",name:"birthTime",placeholder:"HH:mm",validation:e=>e?null:"Capture the time of birth"}]},{title:"Referral information",subtitle:"Document how the neonate arrived",description:"Required when the baby was referred from another facility.",formData:[{componentType:"radioButtonField",header:"Is the baby referred from another facility?",name:"referredFromAnotherFacility",options:[{label:"Yes",value:"Yes"},{label:"No",value:"No"}],validation:e=>e?null:"Indicate whether the neonate was referred"},{componentType:"multiSelectInputField",header:"Referred from",name:"referredFrom",placeholder:"Select referee type",icon:le.search,options:Re(["District Hospital","Health Center","Private Clinic","Other"]),trackBy:"value",validation:e=>null!=e&&e.value||e?null:"Select the referral source",condition:e=>"Yes"===e.referredFromAnotherFacility},{componentType:"multiSelectInputField",header:"Name of facility",name:"referringFacilityName",placeholder:"Search and select facility",icon:le.search,options:[],trackBy:"name",validation:(e,a)=>"Yes"!==(null==a?void 0:a.referredFromAnotherFacility)||null!=e&&e.name||e?null:"Select the referring facility",condition:e=>"Yes"===e.referredFromAnotherFacility},{componentType:"multiSelectInputField",header:"Mode of transport",name:"modeOfTransport",placeholder:"Select mode",icon:le.search,options:Re(["Ambulance","Private vehicle","Bicycle","Other"]),trackBy:"value",validation:e=>null!=e&&e.value||e?null:"Select how the neonate arrived",condition:e=>"Yes"===e.referredFromAnotherFacility},{componentType:"multiSelectInputField",header:"Admitted from",name:"admittedFrom",placeholder:"Select origin",icon:le.search,options:Re(["Clinic","Home","Maternity Ward","Other"]),trackBy:"value",validation:e=>null!=e&&e.value||e?null:"Select where the baby was admitted from",condition:e=>"Yes"===e.referredFromAnotherFacility}]},{title:"Birth assessment",subtitle:"Capture the immediate clinical state",formData:[{componentType:"radioButtonField",header:"Did the baby cry straight after birth?",name:"criedAfterBirth",options:[{label:"Yes",value:"Yes"},{label:"No",value:"No"}],validation:e=>e?null:"Indicate whether the baby cried"},{componentType:"multiSelectInputField",header:"Apgar score at 1 minute",name:"apgar1",placeholder:"Select",icon:le.search,options:Ae(0,10),trackBy:"value",validation:e=>null!=e&&e.value||e?null:"Select the Apgar score at 1 min"},{componentType:"multiSelectInputField",header:"Apgar score at 5 minutes",name:"apgar5",placeholder:"Select",icon:le.search,options:Ae(0,10),trackBy:"value",validation:e=>null!=e&&e.value||e?null:"Select the Apgar score at 5 min"},{componentType:"multiSelectInputField",header:"Apgar score at 10 minutes",name:"apgar10",placeholder:"Select",icon:le.search,options:Ae(0,10),trackBy:"value",validation:e=>null!=e&&e.value||e?null:"Select the Apgar score at 10 min"},{componentType:"multiSelectInputField",header:"Was resuscitation needed at birth?",name:"resuscitationMethods",placeholder:"Select the methods",icon:le.search,options:Re(["Stimulation","Suctioning","Oxygen","Bag Valve Mask Ventilation (BVM)","Cardio Pulmonary Resuscitation (CPR)","Unknown","None"]),trackBy:"value",isMultiple:!0,closeOnSelect:!1,validation:e=>e&&e.length?null:"Select at least one method"}]},{title:"Mother's Information",subtitle:"Search and link the mother's record",description:"Find the mother's existing record or register a new mother if not found.",formData:[]},{title:"Pregnancy",subtitle:"Pregnancy and delivery history",formData:[{componentType:"inputField",header:"Gestation in weeks",name:"gestationWeeks",type:"number",placeholder:"Weeks",validation:e=>{const a=Number(e);return a>0&&a<=45?null:"Enter valid gestation weeks (1-45)"}},{componentType:"radioButtonField",header:"Were steroids given?",name:"steroidsGiven",options:[{label:"Yes",value:"Yes"},{label:"No",value:"No"}],validation:e=>e?null:"Specify whether steroids were given"},{componentType:"multiSelectInputField",header:"Gestation method assessment",name:"gestationMethodAssessment",placeholder:"Select method",icon:le.search,options:Re(["LMP","Ultrasound","Clinical Assessment","Ballard Score"]),trackBy:"value",validation:e=>null!=e&&e.value||e?null:"Select gestation assessment method"},{componentType:"radioButtonField",header:"Ultra sound scanning - USS",name:"ultraSoundScanning",options:[{label:"Early",value:"Early"},{label:"Late",value:"Late"}],validation:e=>e?null:"Select ultrasound timing"},{componentType:"timeInputField",header:"Onset of labor",name:"onsetOfLabor",placeholder:"HH:mm",validation:e=>e?null:"Enter onset of labor time"},{componentType:"radioButtonField",header:"Rupture of membranes?",name:"ruptureOfMembranes",options:[{label:"Yes",value:"Yes"},{label:"No",value:"No"}],validation:e=>e?null:"Specify rupture of membranes status"},{componentType:"radioButtonField",header:"Duration of Rupture of Membranes",name:"durationOfRuptureMembranes",options:[{label:"< 18 hours",value:"< 18 hours"},{label:"18 hours >",value:"18 hours >"}],validation:e=>e?null:"Select duration",condition:e=>"Yes"===e.ruptureOfMembranes},{componentType:"radioButtonField",header:"Offensive Liquor?",name:"offensiveLiquor",options:[{label:"Yes",value:"Yes"},{label:"No",value:"No"}],validation:e=>e?null:"Specify offensive liquor status"},{componentType:"multiSelectInputField",header:"Mode of Delivery",name:"modeOfDelivery",placeholder:"Select mode",icon:le.search,options:Re(["Spontaneous Vaginal Delivery","Caesarean Section","Vacuum Extraction","Forceps Delivery","Breech Delivery"]),trackBy:"value",validation:e=>null!=e&&e.value||e?null:"Select mode of delivery"},{componentType:"radioButtonField",header:"Meconium present?",name:"meconiumPresent",options:[{label:"Yes",value:"Yes"},{label:"No",value:"No"}],validation:e=>e?null:"Specify meconium presence"},{componentType:"radioButtonField",header:"Maternal Analgesia?",name:"maternalAnalgesia",options:[{label:"Yes",value:"Yes"},{label:"No",value:"No"}],validation:e=>e?null:"Specify maternal analgesia status"},{componentType:"multiSelectInputField",header:"Analgesia Drug",name:"analgesiasDrug",placeholder:"Select drug",icon:le.search,options:Re(["Paracetamol","Pethidine","Morphine","Epidural","Other"]),trackBy:"value",validation:(e,a)=>"Yes"!==(null==a?void 0:a.maternalAnalgesia)||null!=e&&e.value||e?null:"Select analgesia drug",condition:e=>"Yes"===e.maternalAnalgesia},{componentType:"radioButtonField",header:"Anesthesia used?",name:"anesthesiaUsed",options:[{label:"General",value:"General"},{label:"Spinal",value:"Spinal"},{label:"No",value:"No"}],validation:e=>e?null:"Specify anesthesia used"},{componentType:"radioButtonField",header:"TEO?",name:"teo",options:[{label:"Yes",value:"Yes"},{label:"No",value:"No"}],validation:e=>e?null:"Specify TEO status"},{componentType:"radioButtonField",header:"Chlorohexidine of cord care?",name:"chlorohexidineCordCare",options:[{label:"Yes",value:"Yes"},{label:"No",value:"No"}],validation:e=>e?null:"Specify chlorohexidine cord care"},{componentType:"radioButtonField",header:"Vitamin K given?",name:"vitaminKGiven",options:[{label:"Yes",value:"Yes"},{label:"No",value:"No"}],validation:e=>e?null:"Specify Vitamin K status"},{componentType:"radioButtonField",header:"Dextrose 10% given?",name:"dextroseGiven",options:[{label:"Yes",value:"Yes"},{label:"No",value:"No"}],validation:e=>e?null:"Specify Dextrose 10% status"}]},{title:"Mother's enrollment details",subtitle:"HIV, VDRL, and Hepatitis status",formData:[{componentType:"radioButtonField",header:"Mother's status",name:"motherStatus",options:[{label:"Alive",value:"Alive"},{label:"Died",value:"Died"}],validation:e=>e?null:"Select mother's status"},{componentType:"multiSelectInputField",header:"HIV Status",name:"motherHivStatus",placeholder:"Select status",icon:le.search,options:Re(["Reactive","Non-Reactive","Unknown"]),trackBy:"value",validation:e=>null!=e&&e.value||e?null:"Select HIV status"},{componentType:"dateInputField",header:"Last HIV Test Date",name:"lastHivTestDate",placeholder:"Select date",validation:e=>e?null:"Select the last HIV test date"},{componentType:"radioButtonField",header:"Do a HIV re-test?",name:"doHivRetest",options:[{label:"Yes",value:"Yes"},{label:"No",value:"No"}],validation:e=>e?null:"Specify whether to do HIV re-test"},{componentType:"radioButtonField",header:"Who baby given NVP?",name:"babyGivenNvp",options:[{label:"Yes",value:"Yes"},{label:"No",value:"No"}],validation:e=>e?null:"Specify whether baby was given NVP"},{componentType:"multiSelectInputField",header:"Mother's VDRL/Syphilis result",name:"motherVdrlResult",placeholder:"Select result",icon:le.search,options:Re(["Positive","Negative","Unknown"]),trackBy:"value",validation:e=>null!=e&&e.value||e?null:"Select VDRL/Syphilis result"},{componentType:"radioButtonField",header:"Who mother treated for VDRL/Syphilis?",name:"motherTreatedForVdrl",options:[{label:"Yes",value:"Yes"},{label:"No",value:"No"}],validation:e=>e?null:"Specify whether mother was treated"},{componentType:"radioButtonField",header:"Was the baby tested for Hepatitis?",name:"babyTestedForHepatitis",options:[{label:"Yes",value:"Yes"},{label:"No",value:"No"}],validation:e=>e?null:"Specify whether baby was tested"},{componentType:"radioButtonField",header:"Were all 3 doses of the treatment completed?",name:"allThreeDosesCompleted",options:[{label:"Yes",value:"Yes"},{label:"No",value:"No"}],validation:e=>e?null:"Specify whether all doses were completed"},{componentType:"multiSelectInputField",header:"Mother's Hepatitis result",name:"motherHepatitisResult",placeholder:"Select result",icon:le.search,options:Re(["Positive","Negative","Unknown"]),trackBy:"value",validation:e=>null!=e&&e.value||e?null:"Select Hepatitis result"}]},{title:"Known Medical Conditions",subtitle:"Tetanus vaccination history",formData:[{componentType:"multiSelectInputField",header:"Tetanus Diphtheria",name:"tetanusDiphtheria",placeholder:"Search and select",icon:le.search,options:Re(["Td1","Td2","Td3","Td4","Td5","Unknown","None"]),trackBy:"value",validation:e=>null!=e&&e.value||e?null:"Select Tetanus Diphtheria status"}]}],Oe={motherPatientId:void 0,motherName:void 0,motherNationalId:void 0,hasTwin:"",twinPatientId:void 0,twinName:void 0,placeOfBirth:"",nameOfBirthFacility:"",typeOfBirth:"",birthWeight:"",timeOfBirth:"",referredFromOtherFacility:"",referredFrom:"",referringFacilityName:"",modeOfTransport:"",admittedFrom:"",criedAfterBirth:"",apgarScoreAt1:"",apgarScoreAt5:"",apgarScoreAt10:"",resuscitationMethods:[],gestationWeeks:"",steroidsGiven:"",gestationMethodAssessment:"",ultraSoundScanning:"",onsetOfLabor:"",ruptureOfMembranes:"",durationOfRuptureMembranes:"",offensiveLiquor:"",modeOfDelivery:"",meconiumPresent:"",maternalAnalgesia:"",analgesiasDrug:"",anesthesiaUsed:"",teo:"",chlorohexidineCordCare:"",vitaminKGiven:"",dextroseGiven:"",motherStatus:"",motherHivStatus:"",lastHivTestDate:"",doHivRetest:"",babyGivenNvp:"",motherVdrlResult:"",motherTreatedForVdrl:"",babyTestedForHepatitis:"",allThreeDosesCompleted:"",motherHepatitisResult:"",tetanusDiphtheria:[]},Pe=Symbol("neonatal-enrollment-form"),Ye={key:0,class:"twin-search-container"},He={style:{border:"1px dotted #ececec","border-radius":"8px"}},Ee={class:"header-with-icon"},$e={class:"icon-wrapper"},Le=["src"],Ue={class:"search-with-button"},je={class:"search-wrapper"},Ge={key:0,class:"search-results"},We={key:0,class:"search-loading"},Ke={key:1,class:"results-list"},qe=["onClick"],Qe={class:"result-header"},Je={class:"twin-name"},Ze={class:"twin-mrn"},Xe={class:"twin-dob"},ea={class:"result-details"},aa={key:0,class:"twin-gender"},ta={key:2,class:"no-results"},na={key:1,class:"selected-twin"},la={class:"selected-card"},ra={class:"selected-card-header"},ia={class:"header-content"},oa={class:"selected-icon-wrapper"},sa=["src"],da={class:"selected-card-content"},ca={class:"patient-info-grid"},ua={class:"info-row"},ma={class:"info-value"},pa={class:"info-row"},va={class:"info-value"},ha={key:0,class:"info-row"},fa={class:"info-value"},ga={key:1,class:"info-row"},ba={class:"info-value"},ya=ne(t({__name:"TwinSearch",setup(e,{expose:a}){const t=T(Pe),n=re(),l=B(""),i=B(!1),d=B([]),c=B(null),u=B(!1),m=C(()=>"Yes"===(null==t?void 0:t.hasTwin)),p=async()=>{if(!l.value||l.value.trim().length<2)d.value=[];else{i.value=!0;try{const a=l.value.trim();if(/^\d+$/.test(a))try{const e=await n.getPatientData(Number(a));if(e&&e.personInformation){const a=e.personInformation;d.value=[{patientID:a.person_id,firstName:a.given_name||"",middleName:a.middle_name||"",lastName:a.family_name||"",gender:a.gender,birthdate:a.birthdate}]}else d.value=[]}catch(e){console.error("Error searching by MRN:",e),d.value=[]}else{const e=a.split(" "),t={given_name:e[0],family_name:e[1]||"",page:"1",per_page:"20"},n=await ie.search(t);d.value=Array.isArray(n)?n.filter(e=>{const a=e.person;if(!a.birthdate)return!1;const t=new Date(a.birthdate);return Math.floor((Date.now()-t.getTime())/864e5)<=7}).map(e=>{var a;const t=e.person,n=(null===(a=t.names)||void 0===a?void 0:a[0])||{};return{patientID:t.person_id,firstName:n.given_name||"",middleName:n.middle_name||"",lastName:n.family_name||"",gender:t.gender,birthdate:t.birthdate}}):[]}}catch(e){console.error("Error searching for twin:",e),d.value=[]}finally{i.value=!1}}},v=()=>{c.value=null,u.value=!1,t&&(t.twinPatientId=void 0,t.twinName=void 0)},S=()=>{u.value=!0,c.value=null,l.value="",t&&(t.twinPatientId=void 0,t.twinName=void 0)};z(()=>null==t?void 0:t.hasTwin,e=>{"Yes"!==e&&(v(),u.value=!1)});const _=e=>`${e.firstName} ${e.middleName||""} ${e.lastName}`.trim(),N=e=>e?new Date(e).toLocaleDateString():"";return a({validateForm:()=>"Yes"!==(null==t?void 0:t.hasTwin)||c.value||u.value?null:{twinSelection:"Select the twin record or tap Skip if the twin is not yet registered"},getFormValues:()=>c.value?{twinPatientId:c.value.patientID,twinName:_(c.value)}:{}}),(e,a)=>m.value?(h(),w("div",Ye,[b("div",He,[g(V(R),null,{default:f(()=>[b("div",Ee,[b("div",$e,[b("img",{src:V(ge).icons.twins,alt:"Twin",class:"header-icon"},null,8,Le),g(V(A),{icon:V(M),class:"search-badge-icon"},null,8,["icon"])]),b("div",null,[g(V(O),null,{default:f(()=>[...a[1]||(a[1]=[D("Twin Information",-1)])]),_:1}),g(V(P),null,{default:f(()=>[...a[2]||(a[2]=[D("Search for twin sibling",-1)])]),_:1})])])]),_:1}),g(V(r),null,{default:f(()=>[g(V(Y),{class:"info-note"},{default:f(()=>[...a[3]||(a[3]=[D(" This baby has a twin. Please search for the twin's record or register if not found. ",-1)])]),_:1}),b("div",Ue,[b("div",je,[g(V(H),{modelValue:l.value,"onUpdate:modelValue":a[0]||(a[0]=e=>l.value=e),placeholder:"Search for twin's MRN or scan barcode",onIonInput:p,debounce:300,"show-clear-button":"focus",class:"search-input"},null,8,["modelValue"])]),g(V(o),{color:"primary",onClick:S,class:"skip-btn"},{default:f(()=>[a[4]||(a[4]=D(" Skip ",-1)),g(V(A),{size:"small",icon:V(s),slot:"end"},null,8,["icon"])]),_:1})]),l.value&&l.value.length>0&&!c.value?(h(),w("div",Ge,[i.value?(h(),w("div",We,[(h(),w(k,null,x(3,e=>b("div",{key:`skeleton-${e}`,class:"result-item-skeleton"},[...a[5]||(a[5]=[b("div",{class:"skeleton-header"},[b("div",{class:"skeleton-name"}),b("div",{class:"skeleton-dob"})],-1)])])),64))])):d.value.length>0?(h(),w("div",Ke,[(h(!0),w(k,null,x(d.value,(e,n)=>(h(),w("div",{key:e.patientID||n,class:"result-item",onClick:a=>{return n=e,c.value=n,l.value="",u.value=!1,void(t&&(t.twinPatientId=n.patientID,t.twinName=`${n.firstName} ${n.middleName||""} ${n.lastName}`.trim()));var n}},[b("div",Qe,[b("span",Je,y(_(e)),1),b("span",Ze,"MRN: "+y(e.patientID),1),b("span",Xe,"DOB: "+y(N(e.birthdate)),1)]),b("div",ea,[e.gender?(h(),w("p",aa,[a[6]||(a[6]=b("strong",null,"Gender:",-1)),D(" "+y(e.gender),1)])):F("",!0)])],8,qe))),128))])):(h(),w("div",ta,[g(V(A),{icon:V(M),class:"no-results-icon"},null,8,["icon"]),b("p",null,'No patients found matching "'+y(l.value)+'"',1),a[7]||(a[7]=b("p",{class:"info-text"},"The twin may not be registered yet. You can skip this step and register the twin later.",-1))]))])):F("",!0),c.value?(h(),w("div",na,[b("div",la,[b("div",ra,[b("div",ia,[b("div",oa,[b("img",{src:V(ge).icons.twins,alt:"Twin",class:"selected-header-icon"},null,8,sa)]),a[8]||(a[8]=b("div",{class:"header-separator"},null,-1)),a[9]||(a[9]=b("span",{class:"selected-subtitle"},"Twin Selected",-1))]),g(V(o),{fill:"clear",size:"small",onClick:v,class:"clear-selection-btn"},{default:f(()=>[g(V(A),{icon:V(E)},null,8,["icon"])]),_:1})]),b("div",da,[b("div",ca,[b("div",ua,[a[10]||(a[10]=b("span",{class:"info-label"},"Full Name",-1)),b("span",ma,y(_(c.value)),1)]),b("div",pa,[a[11]||(a[11]=b("span",{class:"info-label"},"MRN",-1)),b("span",va,y(c.value.patientID),1)]),c.value.birthdate?(h(),w("div",ha,[a[12]||(a[12]=b("span",{class:"info-label"},"Date of Birth",-1)),b("span",fa,y(N(c.value.birthdate)),1)])):F("",!0),c.value.gender?(h(),w("div",ga,[a[13]||(a[13]=b("span",{class:"info-label"},"Gender",-1)),b("span",ba,y(c.value.gender),1)])):F("",!0)])])])])):F("",!0)]),_:1})])])):F("",!0)}}),[["__scopeId","data-v-9ecea754"]]),wa=e=>{if(null!=e&&""!==e){if("string"==typeof e||"number"==typeof e)return e.toString();if("object"==typeof e){var a,t,n;const l=null!==(a=null!==(t=null!==(n=e.label)&&void 0!==n?n:e.value)&&void 0!==t?t:e.name)&&void 0!==a?a:e.title;if(null!=l&&""!==l)return l.toString()}}},ka=e=>{if(!e)return[];if(Array.isArray(e))return e.map(e=>wa(e)).filter(e=>!!e);const a=wa(e);return a?[a]:[]},xa=e=>null==e?"":e.toString(),Sa={class:"birth-details-wrapper"},Fa=ne(t({__name:"BirthDetails",setup(e,{expose:a}){const t=B(null),n=B(null),l=B(null),r=Me[0].formData,i=r.slice(0,1),o=r.slice(1),s=T(Pe),d=e=>{s&&(s.hasTwin=e.hasTwin||"")},c=e=>{s&&(s.placeOfBirth=wa(e.placeOfBirth)||"",s.nameOfBirthFacility=wa(e.birthFacility)||"",s.typeOfBirth=wa(e.typeOfBirth)||"",s.birthWeight=xa(e.birthWeight||""),s.timeOfBirth=xa(e.birthTime||""))};return z(()=>{var e;return null===(e=n.value)||void 0===e?void 0:e.formValues},e=>{e&&c(e)},{deep:!0}),z(()=>n.value,e=>{null!=e&&e.getFormValues&&c(e.getFormValues())},{immediate:!0}),z(()=>{var e;return null===(e=t.value)||void 0===e?void 0:e.formValues},e=>{e&&d(e)},{deep:!0}),z(()=>t.value,e=>{null!=e&&e.getFormValues&&d(e.getFormValues())},{immediate:!0}),a({getFormRef:()=>n.value,getTwinQuestionFormRef:()=>t.value,validateForm:()=>{var e,a,r,i,o,s;const d=[(null===(e=t.value)||void 0===e||null===(a=e.validateForm)||void 0===a?void 0:a.call(e))||null,(null===(r=n.value)||void 0===r||null===(i=r.validateForm)||void 0===i?void 0:i.call(r))||null,(null===(o=l.value)||void 0===o||null===(s=o.validateForm)||void 0===s?void 0:s.call(o))||null].filter(Boolean);return d.length?d.reduce((e,a)=>({...e,...a}),{}):null},getFormValues:()=>{var e,a,r,i,o,s;return{...(null===(e=t.value)||void 0===e||null===(a=e.getFormValues)||void 0===a?void 0:a.call(e))||{},...(null===(r=n.value)||void 0===r||null===(i=r.getFormValues)||void 0===i?void 0:i.call(r))||{},...(null===(o=l.value)||void 0===o||null===(s=o.getFormValues)||void 0===s?void 0:s.call(o))||{}}}}),(e,a)=>(h(),w("div",Sa,[g(oe,{formData:V(i),ref_key:"twinQuestionFormRef",ref:t,class:"twin-question-form"},null,8,["formData"]),g(ya,{ref_key:"twinSearchRef",ref:l},null,512),g(oe,{formData:V(o),ref_key:"formRef",ref:n,class:"main-form"},null,8,["formData"])]))}}),[["__scopeId","data-v-1a647a53"]]),_a=t({__name:"ReferralInformation",setup(e,{expose:a}){const t=B(null),n=Me[1].formData,l=T(Pe),r=B([]);$(async()=>{try{const e=await se.getAllFacilities();Array.isArray(e)?r.value=e:null!=e&&e.facilities&&Array.isArray(e.facilities)?r.value=e.facilities:null!=e&&e.records&&Array.isArray(e.records)?r.value=e.records:r.value=[]}catch(e){console.error("Error loading facilities:",e),r.value=[]}});const i=C(()=>n.map(e=>"referringFacilityName"===e.name?{...e,options:r.value.map(e=>({name:e.name||e.facility_name||"Unknown",code:e.code||e.facility_code,district:e.district}))}:e)),o=e=>{if(!l)return;l.referredFromOtherFacility=e.referredFromAnotherFacility||"",l.referredFrom=wa(e.referredFrom)||"";const a=e.referringFacilityName;l.referringFacilityName=(null==a?void 0:a.name)||xa(a||""),l.modeOfTransport=wa(e.modeOfTransport)||"",l.admittedFrom=wa(e.admittedFrom)||""};return z(()=>{var e;return null===(e=t.value)||void 0===e?void 0:e.formValues},e=>{e&&o(e)},{deep:!0}),z(()=>t.value,e=>{null!=e&&e.getFormValues&&o(e.getFormValues())},{immediate:!0}),a({getFormRef:()=>t.value,validateForm:()=>{var e,a;return(null===(e=t.value)||void 0===e||null===(a=e.validateForm)||void 0===a?void 0:a.call(e))||null},getFormValues:()=>{var e,a;return(null===(e=t.value)||void 0===e||null===(a=e.getFormValues)||void 0===a?void 0:a.call(e))||{}}}),(e,a)=>(h(),v(oe,{formData:i.value,ref_key:"formRef",ref:t},null,8,["formData"]))}}),Na=t({__name:"BirthAssessment",setup(e,{expose:a}){const t=B(null),n=Me[2].formData,l=T(Pe),r=e=>{l&&(l.criedAfterBirth=e.criedAfterBirth||"",l.apgarScoreAt1=wa(e.apgar1)||"",l.apgarScoreAt5=wa(e.apgar5)||"",l.apgarScoreAt10=wa(e.apgar10)||"",l.resuscitationMethods=ka(e.resuscitationMethods))};return z(()=>{var e;return null===(e=t.value)||void 0===e?void 0:e.formValues},e=>{e&&r(e)},{deep:!0}),z(()=>t.value,e=>{null!=e&&e.getFormValues&&r(e.getFormValues())},{immediate:!0}),a({getFormRef:()=>t.value,validateForm:()=>{var e,a;return(null===(e=t.value)||void 0===e||null===(a=e.validateForm)||void 0===a?void 0:a.call(e))||null},getFormValues:()=>{var e,a;return(null===(e=t.value)||void 0===e||null===(a=e.getFormValues)||void 0===a?void 0:a.call(e))||{}}}),(e,a)=>(h(),v(oe,{formData:V(n),ref_key:"formRef",ref:t},null,8,["formData"]))}}),Da={class:"mother-search-container"},Ia={style:{border:"1px dotted #ececec","border-radius":"8px"}},Ta={class:"header-with-icon"},Ba={class:"icon-wrapper"},Ca=["src"],za={class:"search-with-button"},Va={class:"search-wrapper"},Ra={class:"barcode-btn","aria-label":"Scan MRN"},Aa={key:0,class:"search-results"},Ma={key:0,class:"search-loading"},Oa={key:1,class:"results-list"},Pa=["onClick"],Ya={class:"result-header"},Ha={class:"mother-name"},Ea={class:"mother-dob"},$a={class:"mother-gender"},La={class:"result-details"},Ua={key:0,class:"mother-address"},ja={key:1,class:"mother-phone"},Ga={key:0,class:"pagination"},Wa={class:"page-info"},Ka={key:2,class:"no-results"},qa={key:1,class:"selected-mother"},Qa={class:"selected-card"},Ja={class:"selected-card-header"},Za={class:"selected-header-with-button"},Xa={class:"selected-card-content"},et={class:"selected-info"},at={key:0},tt={key:1},nt=ne(t({__name:"MotherSearch",setup(e,{expose:a}){const t=L(),n=T(Pe),l=be(),i=re(),s=B(""),d=B(!1),c=B([]),u=B(null),p=B(1);$(async()=>{const e=l.getMotherPatientId;e&&l.shouldReturnToEnrollment&&(await v(e),l.clearEnrollmentContext())}),z(u,e=>{e&&n&&(n.motherPatientId=e.patientID,n.motherName=`${e.firstName} ${e.middleName||""} ${e.lastName}`.trim(),n.motherNationalId=e.nationalId||"")});const v=async e=>{try{d.value=!0;const n=await i.getPatientData(e);if(n&&n.personInformation){var a,t;const l=n.personInformation,r=(null===(a=l.addresses)||void 0===a?void 0:a[0])||{},i=null===(t=l.person_attributes)||void 0===t?void 0:t.find(e=>{var a;return"Cell Phone Number"===(null===(a=e.person_attribute_type)||void 0===a?void 0:a.name)}),o={patientID:l.person_id||e,firstName:l.given_name||"",middleName:l.middle_name||"",lastName:l.family_name||"",gender:l.gender,birthdate:l.birthdate,nationalId:n.national_id||"",address:r,phone:(null==i?void 0:i.value)||""};u.value=o}}catch(n){console.error("Error fetching mother data:",n)}finally{d.value=!1}},S=C(()=>Math.ceil(c.value.length/10)),_=C(()=>{const e=10*(p.value-1),a=e+10;return c.value.slice(e,a)}),N=async()=>{if(!s.value||s.value.trim().length<2)c.value=[];else{d.value=!0,p.value=1;try{const e=s.value.trim().split(" "),a={given_name:e[0],family_name:e[1]||"",page:"1",per_page:"50"},t=await ie.search(a);c.value=Array.isArray(t)?t.filter(e=>{var a;const t=(null===(a=e.person)||void 0===a?void 0:a.gender)||e.gender;return"F"===t||"Female"===t}).map(e=>{var a,t,n;const l=e.person,r=(null===(a=l.names)||void 0===a?void 0:a[0])||{},i=(null===(t=l.addresses)||void 0===t?void 0:t[0])||{},o=null===(n=l.person_attributes)||void 0===n?void 0:n.find(e=>{var a;return"Cell Phone Number"===(null===(a=e.person_attribute_type)||void 0===a?void 0:a.name)});return{patientID:l.person_id,firstName:r.given_name||"",middleName:r.middle_name||"",lastName:r.family_name||"",gender:l.gender,birthdate:l.birthdate,nationalId:e.national_id||"",address:i,phone:(null==o?void 0:o.value)||""}}):[]}catch(e){console.error("Error searching for mothers:",e),c.value=[]}finally{d.value=!1}}},I=()=>{u.value=null,n&&(n.motherPatientId=void 0,n.motherName=void 0,n.motherNationalId=void 0)},K=()=>{var e;const a=T("patient");a&&null!==(e=a.value)&&void 0!==e&&e.patientID&&l.setMotherCreationContext(a.value.patientID,4),t.push({path:"/registration/manual",query:{returnTo:"/neonatal/enrollment",context:"neonatal-mother"}})},q=()=>{p.value<S.value&&p.value++},Q=()=>{p.value>1&&p.value--},J=e=>e?new Date(e).toLocaleDateString():"",Z=e=>{if(!e)return"";if("string"==typeof e)return e;const a=[];return e.city_village&&a.push(e.city_village),e.township_division&&a.push(e.township_division),e.state_province&&a.push(e.state_province),a.join(", ")};return a({getFormRef:()=>({validate:()=>null!==u.value,getFormData:()=>{var e,a;return{motherPatientId:null===(e=u.value)||void 0===e?void 0:e.patientID,motherName:u.value?`${u.value.firstName} ${u.value.middleName||""} ${u.value.lastName}`.trim():void 0,motherNationalId:null===(a=u.value)||void 0===a?void 0:a.nationalId}}}),validateForm:()=>u.value?null:{motherSelection:"Please select a mother or register a new one"},getFormValues:()=>u.value?{motherPatientId:u.value.patientID,motherName:`${u.value.firstName} ${u.value.middleName||""} ${u.value.lastName}`.trim(),motherNationalId:u.value.nationalId}:{}}),(e,a)=>(h(),w("div",Da,[b("div",Ia,[g(V(R),null,{default:f(()=>[b("div",Ta,[b("div",Ba,[b("img",{src:V(ge).icons.care,alt:"Care",class:"header-icon"},null,8,Ca),g(V(A),{icon:V(M),class:"search-badge-icon"},null,8,["icon"])]),b("div",null,[g(V(O),null,{default:f(()=>[...a[1]||(a[1]=[D("Search for Mother",-1)])]),_:1}),g(V(P),null,{default:f(()=>[...a[2]||(a[2]=[D("Find mother's existing record",-1)])]),_:1})])])]),_:1}),g(V(r),null,{default:f(()=>[g(V(Y),{class:"info-note"},{default:f(()=>[...a[3]||(a[3]=[D(" We now need to link this neonate's record to it's mother, please search and find the mother or register if mother not found. ",-1)])]),_:1}),b("div",za,[b("div",Va,[g(V(H),{modelValue:s.value,"onUpdate:modelValue":a[0]||(a[0]=e=>s.value=e),placeholder:"Search for mother's Name or scan MRN",onIonInput:N,debounce:300,"show-clear-button":"focus",class:"search-input"},null,8,["modelValue"]),b("div",Ra,[g(V(A),{color:"primary",size:"small",icon:V(U),slot:"icon-only"},null,8,["icon"])])]),g(V(o),{color:"success",onClick:K,class:"new-registration-btn"},{default:f(()=>[g(V(A),{icon:V(j),slot:"icon-only"},null,8,["icon"]),a[4]||(a[4]=D("New Registration ",-1))]),_:1})]),s.value&&s.value.length>0&&!u.value?(h(),w("div",Aa,[d.value?(h(),w("div",Ma,[(h(),w(k,null,x(3,e=>b("div",{key:`skeleton-${e}`,class:"result-item-skeleton"},[...a[5]||(a[5]=[b("div",{class:"skeleton-header"},[b("div",{class:"skeleton-name"}),b("div",{class:"skeleton-dob"}),b("div",{class:"skeleton-gender"})],-1),b("div",{class:"skeleton-details"},[b("div",{class:"skeleton-address"}),b("div",{class:"skeleton-phone"})],-1)])])),64))])):c.value.length>0?(h(),w("div",Oa,[(h(!0),w(k,null,x(_.value,(e,t)=>(h(),w("div",{key:e.patientID||t,class:"result-item",onClick:a=>(e=>{u.value=e,s.value="",n&&(n.motherPatientId=e.patientID,n.motherName=`${e.firstName} ${e.middleName||""} ${e.lastName}`.trim(),n.motherNationalId=e.nationalId||"")})(e)},[b("div",Ya,[b("span",Ha,y(e.firstName)+" "+y(e.middleName?e.middleName+" ":"")+y(e.lastName),1),b("span",Ea,"DOB "+y(J(e.birthdate)),1),b("span",$a,y("F"===e.gender?"Female":e.gender),1)]),b("div",La,[e.address?(h(),w("p",Ua,[a[6]||(a[6]=b("strong",null,"Current Address:",-1)),D(" "+y(Z(e.address)),1)])):F("",!0),e.phone?(h(),w("p",ja,[g(V(A),{icon:V(G)},null,8,["icon"]),D(" "+y(e.phone),1)])):F("",!0)])],8,Pa))),128)),S.value>1?(h(),w("div",Ga,[g(V(o),{fill:"outline",size:"small",onClick:Q,disabled:1===p.value},{default:f(()=>[g(V(A),{icon:V(m)},null,8,["icon"])]),_:1},8,["disabled"]),b("span",Wa,"Page "+y(p.value)+" of "+y(S.value),1),g(V(o),{fill:"outline",size:"small",onClick:q,disabled:p.value===S.value},{default:f(()=>[g(V(A),{icon:V(W)},null,8,["icon"])]),_:1},8,["disabled"])])):F("",!0)])):(h(),w("div",Ka,[g(V(A),{icon:V(M),class:"no-results-icon"},null,8,["icon"]),b("p",null,'No mothers found matching "'+y(s.value)+'"',1),g(V(o),{expand:"block",onClick:K},{default:f(()=>[...a[7]||(a[7]=[D("Register new mother",-1)])]),_:1})]))])):F("",!0),u.value?(h(),w("div",qa,[b("div",Qa,[b("div",Ja,[b("div",Za,[a[8]||(a[8]=b("span",{class:"selected-subtitle"},"Selected Mother",-1)),g(V(o),{fill:"clear",size:"small",color:"danger",onClick:I,class:"clear-selection-btn"},{default:f(()=>[g(V(A),{icon:V(E),slot:"icon-only"},null,8,["icon"])]),_:1})])]),b("div",Xa,[b("div",et,[b("h3",null,y(u.value.firstName)+" "+y(u.value.middleName?u.value.middleName+" ":"")+y(u.value.lastName),1),b("p",null,[a[9]||(a[9]=b("strong",null,"MRN:",-1)),D(" "+y(u.value.patientID),1)]),u.value.birthdate?(h(),w("p",at,[a[10]||(a[10]=b("strong",null,"DOB:",-1)),D(" "+y(J(u.value.birthdate)),1)])):F("",!0),u.value.address?(h(),w("p",tt,[a[11]||(a[11]=b("strong",null,"Address:",-1)),D(" "+y(Z(u.value.address)),1)])):F("",!0)])])])])):F("",!0)]),_:1})])]))}}),[["__scopeId","data-v-0beac54f"]]),lt=t({__name:"Pregnancy",setup(e,{expose:a}){const t=B(null),n=Me[4].formData,l=T(Pe),r=e=>{l&&(l.gestationWeeks=xa(e.gestationWeeks||""),l.steroidsGiven=e.steroidsGiven||"",l.gestationMethodAssessment=wa(e.gestationMethodAssessment)||"",l.ultraSoundScanning=e.ultraSoundScanning||"",l.onsetOfLabor=xa(e.onsetOfLabor||""),l.ruptureOfMembranes=e.ruptureOfMembranes||"",l.durationOfRuptureMembranes=wa(e.durationOfRuptureMembranes)||"",l.offensiveLiquor=e.offensiveLiquor||"",l.modeOfDelivery=wa(e.modeOfDelivery)||"",l.meconiumPresent=e.meconiumPresent||"",l.maternalAnalgesia=e.maternalAnalgesia||"",l.analgesiasDrug=wa(e.analgesiasDrug)||"",l.anesthesiaUsed=e.anesthesiaUsed||"",l.teo=e.teo||"",l.chlorohexidineCordCare=e.chlorohexidineCordCare||"",l.vitaminKGiven=e.vitaminKGiven||"",l.dextroseGiven=e.dextroseGiven||"")};return z(()=>{var e;return null===(e=t.value)||void 0===e?void 0:e.formValues},e=>{e&&r(e)},{deep:!0}),z(()=>t.value,e=>{null!=e&&e.getFormValues&&r(e.getFormValues())},{immediate:!0}),a({getFormRef:()=>t.value,validateForm:()=>{var e,a;return(null===(e=t.value)||void 0===e||null===(a=e.validateForm)||void 0===a?void 0:a.call(e))||null},getFormValues:()=>{var e,a;return(null===(e=t.value)||void 0===e||null===(a=e.getFormValues)||void 0===a?void 0:a.call(e))||{}}}),(e,a)=>(h(),v(oe,{formData:V(n),ref_key:"formRef",ref:t},null,8,["formData"]))}}),rt=t({__name:"MotherEnrollmentDetails",setup(e,{expose:a}){const t=B(null),n=Me[5].formData,l=T(Pe),r=e=>{l&&(l.motherStatus=e.motherStatus||"",l.motherHivStatus=wa(e.motherHivStatus)||"",l.lastHivTestDate=xa(e.lastHivTestDate||""),l.doHivRetest=e.doHivRetest||"",l.babyGivenNvp=e.babyGivenNvp||"",l.motherVdrlResult=wa(e.motherVdrlResult)||"",l.motherTreatedForVdrl=e.motherTreatedForVdrl||"",l.babyTestedForHepatitis=e.babyTestedForHepatitis||"",l.allThreeDosesCompleted=e.allThreeDosesCompleted||"",l.motherHepatitisResult=wa(e.motherHepatitisResult)||"")};return z(()=>{var e;return null===(e=t.value)||void 0===e?void 0:e.formValues},e=>{e&&r(e)},{deep:!0}),z(()=>t.value,e=>{null!=e&&e.getFormValues&&r(e.getFormValues())},{immediate:!0}),a({getFormRef:()=>t.value,validateForm:()=>{var e,a;return(null===(e=t.value)||void 0===e||null===(a=e.validateForm)||void 0===a?void 0:a.call(e))||null},getFormValues:()=>{var e,a;return(null===(e=t.value)||void 0===e||null===(a=e.getFormValues)||void 0===a?void 0:a.call(e))||{}}}),(e,a)=>(h(),v(oe,{formData:V(n),ref_key:"formRef",ref:t},null,8,["formData"]))}}),it=t({__name:"KnownMedicalConditions",setup(e,{expose:a}){const t=B(null),n=Me[6].formData,l=T(Pe),r=e=>{l&&(l.tetanusDiphtheria=ka(e.tetanusDiphtheria))};return z(()=>{var e;return null===(e=t.value)||void 0===e?void 0:e.formValues},e=>{e&&r(e)},{deep:!0}),z(()=>t.value,e=>{null!=e&&e.getFormValues&&r(e.getFormValues())},{immediate:!0}),a({getFormRef:()=>t.value,validateForm:()=>{var e,a;return(null===(e=t.value)||void 0===e||null===(a=e.validateForm)||void 0===a?void 0:a.call(e))||null},getFormValues:()=>{var e,a;return(null===(e=t.value)||void 0===e||null===(a=e.getFormValues)||void 0===a?void 0:a.call(e))||{}}}),(e,a)=>(h(),v(oe,{formData:V(n),ref_key:"formRef",ref:t},null,8,["formData"]))}}),ot=t({name:"NeonatalEnrollment",components:{IonPage:q,IonContent:K,Toolbar:de,DemographicBar:he,NeonatalStepper:Ve,BirthDetails:Fa,ReferralInformation:_a,BirthAssessment:Na,MotherSearch:nt,Pregnancy:lt,MotherEnrollmentDetails:rt,KnownMedicalConditions:it},setup(){const e=L(),a=re(),{patient:t}=Q(a),n=J({...Oe});Z(Pe,n);const l=B(Me.map((e,a)=>({title:e.title,number:a+1,checked:!1,class:0===a?"open_step common_step":"common_step",last_step:a===Me.length-1?"last_step":""}))),r=[{title:Me[0].title,value:"1",component:Fa},{title:Me[1].title,value:"2",component:_a},{title:Me[2].title,value:"3",component:Na},{title:Me[3].title,value:"4",component:nt},{title:Me[4].title,value:"5",component:lt},{title:Me[5].title,value:"6",component:rt},{title:Me[6].title,value:"7",component:it}];return{router:e,patient:t,enrollmentFormData:n,stepperTitle:"Neonatal enrollment",currentOpenStepper:"1",wizardData:l,stepperData:r,updateStatus:e=>{e&&e.value&&l.value.forEach((a,t)=>{e.value===(t+1).toString()?(a.class="open_step common_step",a.checked=!1):t<parseInt(e.value)-1?(a.class="common_step color_white",a.checked=!0):(a.class="common_step",a.checked=!1)})},getSaveFunction:a=>a===r.length-1?async()=>{var a;if(null!==(a=t.value)&&void 0!==a&&a.patientID)try{if(n.motherPatientId)try{const e=(await ce.getRelations()).find(e=>"Mother"===e.b_is_to_a||"Parent"===e.b_is_to_a);e&&await ce.createRelation(t.value.patientID,n.motherPatientId,e.relationship_type_id)}catch(l){console.error("Failed to create mother-baby relationship",l)}await ve.enrollNeonate(t.value.patientID,n,ue.sessionDate()),await me.userProgramData(t.value.patientID),pe("Neonate enrolled successfully"),e.push("/neonatal/triage")}catch(r){console.error("Neonatal enrollment failed",r),te("Unable to enroll neonate at this time")}}:()=>{}}}});e("default",ne(ot,[["render",function(e,a,t,n,l,r){const i=p("Toolbar"),o=p("DemographicBar"),s=p("NeonatalStepper"),d=p("ion-content"),c=p("ion-page");return h(),v(c,{class:"neonatal-enrollment-page"},{default:f(()=>[g(i),g(d,{fullscreen:!0},{default:f(()=>[g(o),g(s,{wizardData:e.wizardData,StepperData:e.stepperData,stepperTitle:e.stepperTitle,openStepper:e.currentOpenStepper,backUrl:"/patientProfile",getSaveFunction:e.getSaveFunction,onUpdateStatus:e.updateStatus},null,8,["wizardData","StepperData","stepperTitle","openStepper","getSaveFunction","onUpdateStatus"])]),_:1})]),_:1})}],["__scopeId","data-v-1e8dda56"]]))}}});
