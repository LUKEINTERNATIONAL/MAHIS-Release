System.register(["./vendor-legacy-Bsps4SCm.js","../index-legacy-DMtznizA.js"],function(t,i){"use strict";var e,s,a,r,n,c,l;return{setters:[t=>{e=t.cI,s=t.r,a=t.aV,r=t.w},t=>{n=t.d,c=t.S,l=t.U}],execute:function(){t("u",function(){const t=e(),i=n(),o=s(!1),{OPDActivities:v,NCDActivities:u,ARTActivities:g,OPDWaitingLists:y}=a(i),p=async t=>{try{const i=c.getUserID();if(!i)return console.warn(`User ID not available for property: ${t}`),[];const e=await l.getJson("user_properties",{user_id:i,property:t});return null!=e&&e.property_value?e.property_value.split(",").map(t=>t.trim()).filter(t=>t.length>0):[]}catch(i){return console.error(`Error fetching user data for property '${t}':`,i),[]}},A=async()=>{try{o.value=!1;const[t,e,s,a]=await Promise.all([p("OPD_activities"),p("NCD_activities"),p("ART_Admin_assigned_activities"),p("OPD_waiting_list")]);t.length>0&&i.setOPDActivity(t),e.length>0&&i.setNCDActivity(e),s.length>0&&i.setARTActivity(s),a.length>0?i.setOPDWaitingLists(a):console.warn("Offline or empty API response â€” keeping cached OPDWaitingLists")}catch(t){console.error("Error updating activities and waiting lists:",t)}finally{o.value=!0}};return r(()=>t.path,async()=>{await A()},{immediate:!0,deep:!0}),{ready:o,OPDActivities:v,NCDActivities:u,ARTActivities:g,OPDWaitingLists:y,getUserData:p,getUserActivities:async t=>p(t),updateActivitiesAndWaitingLists:A,updateActivities:async()=>A(),hasWaitingList:t=>y.value.includes(t),hasActivity:(t,i="OPD")=>{var e;const s={OPD:v.value,NCD:u.value,ART:g.value};return(null===(e=s[i])||void 0===e?void 0:e.includes(t))||!1},refreshUserData:async()=>{await A()}}})}}});
