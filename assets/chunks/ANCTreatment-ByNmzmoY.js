import{D as O,ew as R,ex as W,d as $,ap as q,b2 as c,r as o,c as w,a as E,O as U,f as Y,J as D,l as t,u as p,a4 as L,k as l,i as f,bT as G,v,a7 as J}from"./vendor-BataJFSH.js";import{u as K,_ as Q}from"./useFormWizard-WA0BdVFf.js";import{n as d,aT as X,u as Z,bI as ee,T as ae,M as te,S as se,t as S,K as ne}from"../index-CYcjB3lE.js";import{D as ie}from"./DemographicBar-_VCWSR3C.js";import{c as oe}from"./formatServerData-CrPFhp8u.js";import{u as le,a as re,b as ce,e as de,d as ue,c as me,_ as pe}from"./dewormingStore-HrwcJ5OD.js";import"./lodash-NJiRuGo9.js";import{u as fe}from"./useUserRole-thYYYNYs.js";import"./apexcharts-BVd6_RNM.js";R().shape({"Vitamin Amount":W().typeError("Amount of vitamin can only be a number").min(0)});const ve=O("medicationDispensed",{state:()=>({iron:[{selectdData:[],isFinishBtn:!1,classDash:"",radioBtnContent:{header:{title:"Aspirin provided?",selectedValue:"",class:"bold",name:"Aspirin provided"},data:[{name:"Yes",value:"yes",colSize:"2.5"},{name:"No",value:"no",colSize:"2.5"}]}},{isFinishBtn:!1,sectionHeader:"",classDash:"dashed_bottom_border _padding",data:{rowData:[{colData:[{displayNone:!0,inputHeader:"Amount of daily aspirin provided until delivery",value:"",name:"Amount of daily aspirin provided",required:!0,unit:"mg",eventType:"input",alertsErrorMassage:""}]}]}},{selectdData:[],isFinishBtn:!1,sectionHeader:"",classDash:"",radioBtnContent:{header:{title:"Reason aspirin not prescribed",selectedValue:"",class:"bold",name:"aspirin not prescribed",displayNone:!0},data:[{name:"Side effects",value:"side effects",colSize:"7"},{name:"Stock-out",value:"stock-out",colSize:"7"},{name:"Gestational less than 13 weeks",value:"gestational less than 13 weeks",colSize:"7"},{name:"Allergy to medication",value:"allergy to medication",colSize:"7"},{name:"Other",value:"other",colSize:"7"}]}},{isFinishBtn:!1,sectionHeader:"",data:{rowData:[{colData:[{displayNone:!0,inputHeader:"specify",unit:"",icon:d.editPen,value:"",name:"Specify",required:!0,eventType:"input",inputWidth:"85%"}]}]}},{selectdData:[],isFinishBtn:!1,classDash:"",radioBtnContent:{header:{title:"Iron prescribed?",selectedValue:"",class:"bold",name:"Iron prescription"},data:[{name:"Yes",value:"yes",colSize:"2.5"},{name:"No",value:"no",colSize:"2.5"}]}},{selectdData:[],isFinishBtn:!1,classDash:"dashed_bottom_border _padding",radioBtnContent:{header:{title:"Type of Iron supplement dosage provided",class:"bold",selectedValue:"",name:"Type of Iron supplement dosage",displayNone:!0},data:[{name:"Daily",value:"daily",labelPlacement:"start",colSize:"7",justify:"space-between"},{name:"Weekly",value:"weekly",labelPlacement:"start",colSize:"7",justify:"space-between"}]}},{isFinishBtn:!1,sectionHeader:"",classDash:"",data:{rowData:[{colData:[{displayNone:!0,inputHeader:"Amount of Iron provided till delivery in mg",value:"",valueType:"text",unit:"mg",name:"iron Amount",required:!0,eventType:"input",alertsErrorMassage:""}]}]}},{selectdData:[],isFinishBtn:!1,sectionHeader:"",classDash:"",radioBtnContent:{header:{title:"Reason Iron was not prescribed",selectedValue:"",class:"bold",displayNone:!0,name:"Iron and folic acid not prescribed"},data:[{name:"Side effects",value:"side effects",labelPlacement:"start",colSize:"7",justify:"space-between"},{name:"Client was referred",value:"referred",labelPlacement:"start",colSize:"7",justify:"space-between"},{name:"Other",value:"other",labelPlacement:"start",colSize:"7",justify:"space-between"}]}},{isFinishBtn:!1,sectionHeader:"",classDash:"dashed_bottom_border _padding",data:{rowData:[{colData:[{displayNone:!0,inputHeader:"specify",unit:"",icon:d.editPen,value:"",name:"Other",required:!0,eventType:"input",inputWidth:"85%"}]}]}}],folicAcid:[{selectdData:[],isFinishBtn:!1,classDash:"",radioBtnContent:{header:{title:"Daily dose of folic acid prescribed?*",selectedValue:"",class:"bold",name:"Folic acid"},data:[{name:"Yes",value:"yes",colSize:"2.5"},{name:"No",value:"no",colSize:"2.5"}]}},{isFinishBtn:!1,sectionHeader:"",classDash:"dashed_bottom_border _padding",data:{rowData:[{colData:[{displayNone:!0,inputHeader:"Amount of Folic acid prescribed till delivery in mg",value:"",unit:"mg",name:"Amount of Folic acid",required:!0,valueType:"text",eventType:"input",alertsErrorMassage:""}]}]}},{selectdData:[],isFinishBtn:!1,sectionHeader:"",classDash:"",radioBtnContent:{header:{title:"Reason folic acid was not prescribed",selectedValue:"",class:"bold",displayNone:!0,name:"Iron and folic acid not prescribed"},data:[{name:"Side effects",value:"side effects",labelPlacement:"start",colSize:"7",justify:"space-between"},{name:"Client was referred",value:"referred",labelPlacement:"start",colSize:"7",justify:"space-between"},{name:"Other",value:"other",labelPlacement:"start",colSize:"7",justify:"space-between"}]}},{isFinishBtn:!1,sectionHeader:"",classDash:"dashed_bottom_border _padding",data:{rowData:[{colData:[{displayNone:!0,inputHeader:"specify",unit:"",icon:d.editPen,value:"",name:"Other",required:!0,eventType:"input",inputWidth:"85%"}]}]}}],vitaminA:[{selectdData:[],isFinishBtn:!1,classDash:"",radioBtnContent:{header:{title:"Vitamin A prescribed?",selectedValue:"",class:"bold",name:"Vitamin A prescription"},data:[{name:"Yes",value:"yes",colSize:"2.5"},{name:"No",value:"no",colSize:"2.5"}]}},{selectdData:[],isFinishBtn:!1,classDash:"_padding",radioBtnContent:{header:{title:"Type of Vitamin A dosage provided",selectedValue:"",class:"bold",name:"Type of Vitamin A dosage",displayNone:!0},data:[{name:"Daily",value:"daily",labelPlacement:"start",colSize:"7",justify:"space-between"},{name:"Weekly",value:"weekly",labelPlacement:"start",colSize:"7",justify:"space-between"}]}},{isFinishBtn:!1,sectionHeader:"",classDash:"dashed_bottom_border _padding",data:{rowData:[{colData:[{displayNone:!0,inputHeader:"Amount of Vitamin prescribed till delivery in mg",value:"",unit:"mg",name:"Vitamin Amount",required:!0,valueType:"text",eventType:"input",alertsErrorMassage:""}]}]}},{selectdData:[],isFinishBtn:!1,sectionHeader:"",classDash:"_padding",radioBtnContent:{header:{title:"Reason vitamin A not prescribed",selectedValue:"",class:"bold",name:"vitamin A not prescribed",displayNone:!0},data:[{name:"Side effects",value:"side effects",labelPlacement:"start",colSize:"7",justify:"space-between"},{name:"Stock-out",value:"referred",labelPlacement:"start",colSize:"7",justify:"space-between"},{name:"Other",value:"other",labelPlacement:"start",colSize:"7",justify:"space-between"}]}},{isFinishBtn:!1,sectionHeader:"",classDash:"dashed_bottom_border _padding",data:{rowData:[{colData:[{displayNone:!0,inputHeader:"Other (specify)",unit:"",icon:d.editPen,value:"",name:"Other",required:!0,eventType:"input",inputWidth:"85%"}]}]}}]}),actions:{setIron(n){this.iron=n},setFolicAcid(n){this.folicAcid=n},setVitaminA(n){this.vitaminA=n}}});class he extends X{constructor(u,h){super(u,25,h)}}const be={style:{width:"90vw",margin:"0 auto","margin-top":"10px"}},De={class:"back_profile"},je=$({__name:"ANCTreatment",setup(n){const u=q();fe();const h=Z(),_=le(),B=ve(),z=re(),T=ce(),{patient:A}=c(h),{diagnoses:g}=c(_),{iron:ge,folicAcid:C}=c(B),{ttDoses:ye,HepBCounselling:we,HepB1:Se,HepB2:_e,HepB3:Be,hepBReason:ze}=c(z),{treatment:Te,malaria:Ae}=c(T),I=o(!1),b=o(!1),k=w(()=>({text:b.value?"Saving...":"Finish",icon:b.value?"hourglass-outline":"checkmark",hideText:!1,hideIcon:!1,disabled:I.value||b.value})),{onTabBeforeChange:F,currentTabIndex:r}=K();o([{title:"Diagnosis",class:"common_step",checked:!1,disabled:!1,number:1,last_step:""},{title:"Medication dispensed",class:"common_step",checked:!1,disabled:!1,number:2,last_step:""},{title:"Immunization",class:"common_step",checked:!1,disabled:!1,number:3,last_step:""},{title:"Deworming & Malaria Prophylaxis",class:"common_step",checked:!1,disabled:!1,number:4,last_step:"last_step"}]),o([{title:"Diagnosis",component:"DiagnosisTreatment",value:"1"},{title:"Medication Dispensed",component:"MedicationDispensed",value:"2"},{title:"Immunization",component:"Immunization",value:"3"},{title:"Deworming & Malaria Prophylaxis",component:"Deworming",value:"4"}]),o(!1),o(d),w(()=>ee(C.value,"Folic acid"));const H=async(e,a)=>{var s;(s=i.value[a])==null||s.title,e%1===0&&(r.value=e)},P=e=>{console.log("Done button change received from wizard:",e),e.newOptions.disabled&&console.log("Done button has been disabled"),e.isLastStep&&console.log("User is on the last step, done button should be visible")},N=()=>{u.push("contact")},y=()=>[{title:"Diagnosis",icon:""},{title:"Medication dispensed",icon:""},{title:"Immunization",icon:""},{title:"Deworming & Malaria Prophylaxis",icon:""}],i=o(y()),m=()=>{var s;if(!i.value||i.value.length===0)return console.log("Tabs not yet initialized"),null;const e=r.value>=0&&r.value<i.value.length?r.value:0;switch((s=i.value[e])==null?void 0:s.title){case"Diagnosis":return"Diagnosis";case"Medication dispensed":return"MedicationDispensed";case"Immunization":return"Immunization";case"Deworming & Malaria Prophylaxis":return"Deworming";default:return null}},V=()=>{},x=async()=>[...await oe(g.value)],M=async()=>{if(g.value.length>0){const e=se.getUserID(),a=new he(A.value.patientID,e);if(!await a.createEncounter())return S("Unable to create medication dispensed encounter");if(!await a.saveObservationList(await x()))return S("Unable to create medication dispensed!");ne("Diagnosis saved")}},j=async()=>{M(),u.push("contact")};return E(async()=>{i.value=y(),await V(),r.value=0}),(e,a)=>(Y(),U(p(J),null,{default:D(()=>[t(ae),t(ie),t(p(L),{fullscreen:!0},{default:D(()=>[l("div",be,[t(Q,{ref:"wizard",headingTitle:"Diagnosis and Treatment","vertical-tabs":"","navigable-tabs":"","scrollable-tabs":"",startIndex:0,doneButton:k.value,"custom-tabs":i.value,beforeChange:p(F),"onComplete:wizard":a[1]||(a[1]=s=>j()),onDoneButtonChanged:P,onChange:H},{default:D(()=>[l("div",null,[l("div",De,[t(te,{name:"Back",iconSlot:"start",fill:"clear",icon:p(G),"font-weight":"600",onClick:a[0]||(a[0]=s=>N())},null,8,["icon"])])]),f(l("div",null,[t(de,{ref:"diagnosisRef"},null,512)],512),[[v,m()=="Diagnosis"]]),f(l("div",null,[t(ue,{ref:"medicationDispensedRef"},null,512)],512),[[v,m()=="MedicationDispensed"]]),f(l("div",null,[t(me,{ref:"immunizationRef"},null,512)],512),[[v,m()=="Immunization"]]),f(l("div",null,[t(pe,{ref:"dewormingRef"},null,512)],512),[[v,m()=="Deworming"]])]),_:1},8,["doneButton","custom-tabs","beforeChange"])])]),_:1})]),_:1}))}});export{je as default};
