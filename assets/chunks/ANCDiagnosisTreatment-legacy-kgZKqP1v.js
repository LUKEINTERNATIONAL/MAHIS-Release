System.register(["./vendor-legacy-rL86R-cQ.js","./useFormWizard-legacy-DjVyaicU.js","../index-legacy-BUSYOKVO.js","./DemographicBar-legacy-B4SWAg0e.js","./patient_diagnosis_service-legacy-CBeNPo8Q.js","./lodash-legacy-pOOc9Efu.js","./apexcharts-legacy-kzTeKYPj.js"],function(e,i){"use strict";var a,n,t,o,l,s,r,d,u,c,p,v,m,y,g,b,f,h,T,_,D,V,F,w,N,B,x,Y,O,S,A,H,I,M,k,R,C,P;return{setters:[e=>{a=e.d,n=e.r,t=e.c,o=e.a,l=e.e,s=e.f,r=e.k,d=e.l,u=e.J,c=e.u,p=e.aV,v=e.b2,m=e.bw,y=e.F,g=e.am,b=e.O,f=e.ab,h=e.i,T=e.bT,_=e.v,D=e.ae},e=>{V=e.u,F=e._},e=>{w=e.y,N=e.n,B=e.z,x=e.J,Y=e.b,O=e.F,S=e.u,A=e.x,H=e.I,I=e.t,M=e.$,k=e.T,R=e.D},e=>{C=e.D},e=>{P=e.P},null,null],execute:function(){const i={class:"custom-card"},z=a({__name:"Diagnosis",setup(e,{expose:a}){const v=n([]),{formRef:m}=w(),y=N,g=async e=>{const i=e.trim().toLowerCase()||"";return v.value=await P.getDiagnosis(i,1,15),v.value},b=t(()=>[{componentType:"Heading",name:"Diagnosis"},{componentType:"checkboxField",type:"multiple",name:"Diagnosis",twoColumns:!0,options:[{label:"Hypertension",value:"Hypertension"},{label:"Pre-eclampsia",value:"Pre-Eclampsia"},{label:"Pre-eclampsia with Severe Features",value:"severe pre-eclampsia"},{label:"HIV",value:"HIV"},{label:"Hepatitis B",value:"Hepatitis B"},{label:"Hepatitis C",value:"Hepatitis C"},{label:"Syphilis",value:"Syphilis"},{label:"None",value:"None",exclusive:!0}],obsValueType:"value_coded"},{name:"Other diagnosis",header:"Other Diagnosis",componentType:"multiSelectInputField",trackBy:"name",isMultiple:!0,options:v.value,icon:y.search,onSearchChange:g,placeholder:"Search and select diagnosis",obsValueType:"value_coded",condition:e=>{var i;return!(null!==(i=e.diagnosisCheckboxes)&&void 0!==i&&i.includes("None"))}}]);return o(async()=>{await g("")}),a({onSubmit:async()=>{var e;const i=null===(e=m.value)||void 0===e?void 0:e.getFormValues(),a=await x.buildObsValues(i);if(!(a.length<=0))return await x.addObsToEncounterPatient(a,Y.DIAGNOSIS),O("Diagnosis saved successful"),!0}}),(e,a)=>(s(),l("div",null,[r("div",i,[d(c(p),null,{default:u(()=>[d(B,{formData:b.value,ref_key:"formRef",ref:m},null,8,["formData"])]),_:1})])]))}}),E=a({__name:"MedicationDispensed",setup(e,{expose:i}){const a=S(),{patient:n}=v(a),{formRef:o}=w(),{medicationDispensedForm:r}={medicationDispensedForm:t(()=>[{componentType:"Heading",name:"Medication Dispensed"},{componentType:"radioButtonField",header:"Aspirin provided?",name:"Aspirin provided",obsValueType:"value_text",type:"inline",options:[{label:"Yes",value:"Yes"},{label:"No",value:"No"}]},{grid:{s:"0.5"}},{componentType:"inputField",unit:"mg",header:"Amount of daily aspirin provided until delivery",name:"Amount of daily aspirin provided",obsValueType:"value_numeric",grid:{s:"6"},condition:e=>"Yes"===e["Aspirin provided"]},{grid:{s:"5.5"}},{grid:{s:"0.5"}},{componentType:"radioButtonField",header:"Reason aspirin not prescribed",name:"Reason aspirin not prescribed",obsValueType:"value_text",type:"inline",grid:{s:"11.5"},condition:e=>"No"===e["Aspirin provided"],options:[{label:"Side effects",value:"Side effects"},{label:"Stock-out",value:"Stock-out"},{label:"Gestational less than 13 weeks",value:"Gestational less than 13 weeks"},{label:"Allergy to medication",value:"Allergy to medication"},{label:"Other",value:"Other"}]},{grid:{s:"0.5"}},{componentType:"inputField",header:"specify",name:"_Reason aspirin not prescribed",obsValueType:"value_text",grid:{s:"11.5"},condition:e=>"No"===e["Aspirin provided"]&&"Other"===e["Reason aspirin not prescribed"]},{componentType:"Dashes"},{componentType:"radioButtonField",header:"SulfadoxineÂ  Pyrimethamine (SP)",name:"SP",obsValueType:"value_text",type:"inline",options:[{label:"Yes",value:"Yes"},{label:"No",value:"No"}]},{grid:{s:"0.5"}},{componentType:"inputField",unit:"mg",header:"Number of tablets given",name:"number of SP tablets given",obsValueType:"value_numeric",grid:{s:"6"},condition:e=>"Yes"===e.SP},{componentType:"Dashes"},{grid:{s:"12"}},{componentType:"radioButtonField",header:"Iron prescribed?",name:"Iron prescription",obsValueType:"value_text",type:"inline",options:[{label:"Yes",value:"Yes"},{label:"No",value:"No"}]},{grid:{s:"0.5"}},{componentType:"radioButtonField",header:"Type of Iron supplement dosage provided",name:"Type of Iron supplement dosage",obsValueType:"value_text",type:"inline",grid:{s:"11.5"},condition:e=>"Yes"===e["Iron prescription"],options:[{label:"Daily",value:"Daily"},{label:"Weekly",value:"Weekly"}]},{grid:{s:"0.5"}},{componentType:"inputField",unit:"mg",header:"Amount of Iron provided till delivery in mg",name:"iron Amount",obsValueType:"value_numeric",grid:{s:"6"},condition:e=>"Yes"===e["Iron prescription"]},{grid:{s:"5.5"}},{grid:{s:"0.5"}},{componentType:"radioButtonField",header:"Reason Iron was not prescribed",name:"Iron and folic acid not prescribed",obsValueType:"value_text",type:"inline",grid:{s:"11.5"},condition:e=>"No"===e["Iron prescription"],options:[{label:"Side effects",value:"Side effects"},{label:"Client was referred",value:"Client was referred"},{label:"Other",value:"Other"}]},{grid:{s:"0.5"}},{componentType:"inputField",header:"specify",name:"_Iron and folic acid not prescribed",obsValueType:"value_text",grid:{s:"11.5"},condition:e=>"No"===e["Iron prescription"]&&"Other"===e["Iron and folic acid not prescribed"]},{componentType:"Dashes"},{grid:{s:"12"}},{componentType:"radioButtonField",header:"Daily dose of folic acid prescribed?*",name:"Folic acid",obsValueType:"value_text",type:"inline",options:[{label:"Yes",value:"Yes"},{label:"No",value:"No"}]},{grid:{s:"0.5"}},{componentType:"inputField",unit:"mg",header:"Amount of Folic acid prescribed till delivery in mg",name:"Amount of Folic acid",obsValueType:"value_numeric",grid:{s:"6"},condition:e=>"Yes"===e["Folic acid"]},{grid:{s:"5.5"}},{grid:{s:"0.5"}},{componentType:"radioButtonField",header:"Reason folic acid was not prescribed",name:"Folic acid not prescribed",obsValueType:"value_text",type:"inline",grid:{s:"11.5"},condition:e=>"No"===e["Folic acid"],options:[{label:"Side effects",value:"Side effects"},{label:"Client was referred",value:"Client was referred"},{label:"Other",value:"Other"}]},{grid:{s:"0.5"}},{componentType:"inputField",header:"specify",name:"_Folic acid not prescribed",obsValueType:"value_text",grid:{s:"11.5"},condition:e=>"No"===e["Folic acid"]&&"Other"===e["Folic acid not prescribed"]},{componentType:"Dashes"},{grid:{s:"12"}},{componentType:"radioButtonField",header:"Vitamin A prescribed?",name:"Vitamin A prescription",obsValueType:"value_text",type:"inline",options:[{label:"Yes",value:"Yes"},{label:"No",value:"No"}]},{grid:{s:"0.5"}},{componentType:"radioButtonField",header:"Type of Vitamin A dosage provided",name:"Type of Vitamin A dosage",obsValueType:"value_text",type:"inline",grid:{s:"11.5"},condition:e=>"Yes"===e["Vitamin A prescription"],options:[{label:"Daily",value:"Daily"},{label:"Weekly",value:"Weekly"}]},{grid:{s:"0.5"}},{componentType:"inputField",unit:"mg",header:"Amount of Vitamin prescribed till delivery in mg",name:"Vitamin Amount",obsValueType:"value_numeric",grid:{s:"6"},condition:e=>"Yes"===e["Vitamin A prescription"]},{grid:{s:"5.5"}},{grid:{s:"0.5"}},{componentType:"radioButtonField",header:"Reason vitamin A not prescribed",name:"vitamin A not prescribed",obsValueType:"value_text",type:"inline",grid:{s:"11.5"},condition:e=>"No"===e["Vitamin A prescription"],options:[{label:"Side effects",value:"Side effects"},{label:"Stock-out",value:"Stock-out"},{label:"Other",value:"Other"}]},{grid:{s:"0.5"}},{componentType:"inputField",header:"Other (specify)",name:"_vitamin A not prescribed",obsValueType:"value_text",grid:{s:"11.5"},condition:e=>"No"===e["Vitamin A prescription"]&&"Other"===e["vitamin A not prescribed"]},{componentType:"Dashes"},{componentType:"radioButtonField",header:"ITN Given?",name:"Insecticide treated net given",obsValueType:"value_text",type:"inline",options:[{label:"Yes",value:"Yes"},{label:"No",value:"No"}]},{componentType:"Dashes"},{componentType:"radioButtonField",header:"HIV Positive?",name:"HIV Positive",obsValueType:"value_text",type:"inline",options:[{label:"Yes",value:"Yes"},{label:"No",value:"No"}]},{grid:{s:"0.5"}},{componentType:"radioButtonField",header:"ARVs Given?",name:"ARV drugs received",obsValueType:"value_text",type:"inline",grid:{s:"11.5"},condition:e=>"Yes"===e["HIV Positive"],options:[{label:"Yes",value:"Yes"},{label:"No",value:"No"}]},{grid:{s:"0.5"}},{componentType:"radioButtonField",header:"CPT Given?",name:"CPT given",obsValueType:"value_text",type:"inline",grid:{s:"11.5"},condition:e=>"Yes"===e["HIV Positive"],options:[{label:"Yes",value:"Yes"},{label:"No",value:"No"}]},{grid:{s:"0.5"}},{componentType:"radioButtonField",header:"Nevirapine syrup Given?",name:"Nevirapine syrup given",obsValueType:"value_text",type:"inline",grid:{s:"11.5"},condition:e=>"Yes"===e["HIV Positive"],options:[{label:"Yes",value:"Yes"},{label:"No",value:"No"}]},{grid:{s:"0.5"}},{componentType:"inputField",header:"Nevirapine syrup in (MLs) volume MLs ",name:"Nevirapine syrup in (MLs) volume MLs",obsValueType:"value_text",grid:{s:"11.5"},condition:e=>"Yes"===e["Nevirapine syrup given"]&&"Yes"===e["HIV Positive"]}])};return i({onSubmit:async()=>{var e;const i=null===(e=o.value)||void 0===e?void 0:e.getFormValues();await x.buildSaveObs(i,Y.TREATMENT)&&O("Medications successfully saved.")}}),(e,i)=>(s(),l("div",null,[d(c(m),{style:{contain:"unset"}},{default:u(()=>[d(c(p),null,{default:u(()=>[d(B,{formData:c(r),ref_key:"formRef",ref:o},null,8,["formData"])]),_:1})]),_:1})]))}}),j={class:"custom-card",style:{"margin-bottom":"10px"}},q={class:"custom-card"},G=a({__name:"DewormingMalaria",setup(e,{expose:i}){const a={"Albendazole (400mg tablet)":107,"Albendazole (500mg tablet)":1321},o=S(),{patient:m}=v(o),g=n(null),b=n(null),{dewormingForm:f,malariaForm:h}=(()=>{const e=t(()=>[{componentType:"Heading",name:"Deworming"},{componentType:"radioButtonField",header:"Was preventative antihelminthic treatment provided?",name:"antihelminthic treatment",obsValueType:"value_coded",validation:A.required,type:"inline",options:[{label:"Yes",value:"Yes"},{label:"No",value:"No"}]},{grid:{s:"0.5"}},{componentType:"radioButtonField",header:"Preventative antihelminthic treatment provided",name:"antihelminthic treatment provided",obsValueType:"value_coded",validation:A.required,type:"inline",grid:{s:"11.5"},condition:e=>"Yes"===e["antihelminthic treatment"],options:[{label:"Single-dose albendazole 400mg",value:"Albendazole (400mg tablet)"},{label:"Single-dose albendazole 500mg",value:"Albendazole (500mg tablet)"}]},{grid:{s:"0.5"}},{componentType:"radioButtonField",header:"Reason no preventative treatment provided",name:"no preventative treatment provided",obsValueType:"value_coded",validation:A.required,type:"inline",grid:{s:"11.5"},condition:e=>"No"===e["antihelminthic treatment"],options:[{label:"Client was referred",value:"Client was referred"},{label:"Other",value:"Other"}]},{grid:{s:"0.5"}},{componentType:"inputField",header:"specify",name:"_no preventative treatment provided",obsValueType:"value_text",validation:A.required,grid:{s:"11.5"},condition:e=>"No"===e["antihelminthic treatment"]&&"Other"===e["no preventative treatment provided"]}]);return{malariaForm:t(()=>[{componentType:"Heading",name:"Malaria"},{grid:{s:"12"}},{componentType:"radioButtonField",header:"Was counselling on malaria prevention conducted",name:"counselling on malaria prevention",obsValueType:"value_coded",validation:A.required,type:"inline",options:[{label:"Yes",value:"Yes"},{label:"No",value:"No"}]},{grid:{s:"0.5"}},{componentType:"radioButtonField",header:"Reason no counselling on malaria prevention was not conducted",name:"counselling on malaria prevention not conducted",obsValueType:"value_coded",validation:A.required,type:"inline",grid:{s:"11.5"},condition:e=>"No"===e["counselling on malaria prevention"],options:[{label:"Client was referred",value:"Client was referred"},{label:"Other",value:"Other"}]},{grid:{s:"0.5"}},{componentType:"inputField",header:"Other (Specify)",name:"_counselling on malaria prevention not conducted",obsValueType:"value_text",validation:A.required,grid:{s:"11.5"},condition:e=>"No"===e["counselling on malaria prevention"]&&"Other"===e["counselling on malaria prevention not conducted"]}]),dewormingForm:e}})(),T=e=>e.value&&null===e.value.validateForm()?e.value.getFormValues():null,_=async(e,i,a)=>{const n=await x.buildObsValues(e);return n.length>0&&(await x.addObsToEncounterPatient(n,i),O(a),!0)},D=async e=>{const i=a[e];i?await(async(e,i)=>{var a,n,t,o;const l=await M.buildDrugDispense(e,i);null!==(n=(a=m.value).MedicationOrder)&&void 0!==n||(a.MedicationOrder={}),null!==(o=(t=m.value.MedicationOrder).unsaved)&&void 0!==o||(t.unsaved=[]),m.value.MedicationOrder.unsaved.push(l),O(`Medication ${e} added successfully`)})(e,i):I(`Unknown drug: ${e}`)},V=async()=>{const e=T(g);if(!e)return void I("Deworming data is not saved");const i=e["antihelminthic treatment"],a=e["antihelminthic treatment provided"];"No"===i?await(async e=>{await _(e,Y.TREATMENT,"Deworming data saved successful")||I("Deworming data is not saved")})(e):a?await D(a):I("Deworming data is not saved")},F=async()=>{const e=T(b);e&&await _(e,Y.TREATMENT,"Malaria counselling saved successful")||I("Malaria counselling data is not saved")};return i({onSubmit:async()=>{await Promise.all([V(),F()]),await H(m.value)}}),(e,i)=>(s(),l(y,null,[r("div",j,[d(c(p),null,{default:u(()=>[d(B,{formData:c(f),ref_key:"dewormingFormRef",ref:g},null,8,["formData"])]),_:1})]),r("div",q,[d(c(p),null,{default:u(()=>[d(B,{formData:c(h),ref_key:"malariaFormRef",ref:b},null,8,["formData"])]),_:1})])],64))}}),W={style:{"margin-bottom":"10px"}},L={class:"custom-card"},$={class:"custom-card"},J=a({__name:"Immunization",setup(e,{expose:i}){const{TDVForm:a,hepatitisForm:o}={TDVForm:t(()=>[{componentType:"Heading",name:"TDV Vaccination"},{componentType:"radioButtonField",header:"New dose of TDV given?",name:"TDV",obsValueType:"value_text",type:"inline",options:[{label:"Yes",value:"Yes"},{label:"No",value:"No"}]}]),hepatitisForm:t(()=>[{componentType:"Heading",name:"Hepatitis Vaccination"},{componentType:"radioButtonField",header:"Hepatitis B vaccine given?",name:"Hepatitis B vaccine given?",obsValueType:"value_text",type:"inline",options:[{label:"Yes",value:"Yes"},{label:"No",value:"No"}]},{grid:{s:"0.5"}},{componentType:"radioButtonField",header:"Hepatitis B vaccine given",name:"Hepatitis B vaccine given",obsValueType:"value_text",type:"inline",grid:{s:"11.5"},condition:e=>"Yes"===e["Hepatitis B vaccine given?"],options:[{label:"Dose 1",value:"Dose 1"},{label:"Dose 2",value:"Dose 2"},{label:"Dose 3",value:"Dose 3"}]},{grid:{s:"0.5"}},{componentType:"dateInputField",header:"Hep B-2 Date",name:"Hep B-2 Date",obsValueType:"value_datetime",placeholder:"Pick the date",grid:{s:"11.5"},condition:e=>"Yes"===e["Hepatitis B vaccine given?"]},{grid:{s:"0.5"}},{componentType:"radioButtonField",header:"Reason Hepatitis B vaccination not conducted",name:"Reason Hepatitis B vaccination not conducted",obsValueType:"value_text",type:"inline",grid:{s:"11.5"},condition:e=>"No"===e["Hepatitis B vaccine given?"],options:[{label:"Stockout",value:"Stockout"},{label:"Client is ill",value:"Client is ill"},{label:"Client refused",value:"Client refused"},{label:"Allergy to vaccinate",value:"Allergy to vaccinate"},{label:"Other",value:"Other"}]},{grid:{s:"0.5"}},{componentType:"inputField",header:"specify",name:"Hepatitis B not conducted (Other)",obsValueType:"value_text",grid:{s:"11.5"},condition:e=>"No"===e["Hepatitis B vaccine given?"]&&"Other"===e["Hepatitis B vaccination not conducted"]}])},m=S(),{patient:g}=v(m),b=n(null),f=n(null),h=async()=>{var e;const i=null===(e=f.value)||void 0===e?void 0:e.getFormValues();if("Yes"==i["Hepatitis B vaccine given?"]&&i["Hepatitis B vaccine given"])await(async(e,i)=>{var a,n,t,o;const l=await M.buildDrugDispense(e,i);null!==(n=(a=g.value).MedicationOrder)&&void 0!==n||(a.MedicationOrder={}),null!==(o=(t=g.value.MedicationOrder).unsaved)&&void 0!==o||(t.unsaved=[]),g.value.MedicationOrder.unsaved.push(l),O(`Medication ${e} added successfully`)})("DPT-HepB-Hib_vac",1288);else{if(!(await x.buildSaveObs(i,Y.TREATMENT)))return;O("Hepatitis B Immunization data successfully saved.")}};return i({onSubmit:async()=>{var e;null===(e=b.value)||void 0===e||e.getFormValues(),await h(),await H(g.value)}}),(e,i)=>(s(),l(y,null,[r("div",W,[r("div",L,[d(c(p),null,{default:u(()=>[d(B,{formData:c(a),ref_key:"TDVFormRef",ref:b},null,8,["formData"])]),_:1})])]),r("div",null,[r("div",$,[d(c(p),null,{default:u(()=>[d(B,{formData:c(o),ref_key:"hepatitisFormRef",ref:f},null,8,["formData"])]),_:1})])])],64))}}),U={style:{width:"90vw",margin:"0 auto","margin-top":"10px"}},K={class:"back_profile"};e("default",a({__name:"ANCDiagnosisTreatment",setup(e){const i=g(),a=n(null),l=n(null),p=n(null),v=n(null),m=n(!1),y=n(!1),w=t(()=>({text:y.value?"Saving...":"Finish",icon:y.value?"hourglass-outline":"checkmark",hideText:!1,hideIcon:!1,disabled:m.value||y.value})),{onChangeCurrentTab:N,currentTabIndex:B}=V(),x=n([{title:"Diagnosis",icon:""},{title:"Medication dispensed",icon:""},{title:"Immunization",icon:""},{title:"Deworming & Malaria",icon:""}]),Y=()=>{var e;if(!x.value||0===x.value.length)return console.log("Tabs not yet initialized"),null;switch(null===(e=x.value[B.value])||void 0===e?void 0:e.title){case"Diagnosis":return"Diagnosis";case"Medication dispensed":return"MedicationDispensed";case"Immunization":return"Immunization";case"Deworming & Malaria":return"DewormingMalaria";default:return null}};return o(async()=>{x.value=[{title:"Diagnosis",icon:""},{title:"Medication dispensed",icon:""},{title:"Immunization",icon:""},{title:"Deworming & Malaria",icon:""}],B.value=0}),(e,n)=>(s(),b(c(D),null,{default:u(()=>[d(k),d(C),d(c(f),{fullscreen:!0},{default:u(()=>[r("div",U,[d(F,{ref:"wizard",headingTitle:"Diagnosis and Treatment","vertical-tabs":"","navigable-tabs":"","scrollable-tabs":"",startIndex:0,doneButton:w.value,"custom-tabs":x.value,onChange:c(N),"onComplete:wizard":n[1]||(n[1]=e=>(async()=>{const e=[{ref:a},{ref:l},{ref:p},{ref:v}];for(const i of e)if(i.ref.value&&"function"==typeof i.ref.value.onSubmit)try{await i.ref.value.onSubmit()}catch(n){console.error("Error calling  onSubmit:",n)}i.push("contact")})())},{default:u(()=>[r("div",null,[r("div",K,[d(R,{name:"Back",iconSlot:"start",fill:"clear",icon:c(T),"font-weight":"600",onClick:n[0]||(n[0]=e=>{i.push("contact")})},null,8,["icon"])])]),h(r("div",null,[d(z,{ref_key:"diagnosisRef",ref:a},null,512)],512),[[_,"Diagnosis"==Y()]]),h(r("div",null,[d(E,{ref_key:"medicationDispensedRef",ref:l},null,512)],512),[[_,"MedicationDispensed"==Y()]]),h(r("div",null,[d(J,{ref_key:"immunizationRef",ref:p},null,512)],512),[[_,"Immunization"==Y()]]),h(r("div",null,[d(G,{ref_key:"dewormingMalariaRef",ref:v},null,512)],512),[[_,"DewormingMalaria"==Y()]])]),_:1},8,["doneButton","custom-tabs","onChange"])])]),_:1})]),_:1}))}}))}}});
