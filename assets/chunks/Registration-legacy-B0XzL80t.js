System.register(["./vendor-legacy-h4cyiMXU.js","./useSetRegistrationValues-legacy-BVHsYaAs.js","../index-legacy-BOBcaga6.js","./user_role_management-legacy-DO4CA4oS.js","./useNeonatalEnrollmentStore-legacy-CX3gCXEa.js"],function(e,a){"use strict";var t,n,o,r,i,l,d,s,u,c,m,v,p,f,h,g,y,_,x,b,w,k,R,I,F,N,D,P,T,S,M,C,V,B,j,L,G,q,E,O,z,H,U,Y,$,A,W,J,K,Q,X,Z,ee,ae,te,ne;return{setters:[e=>{t=e.r,n=e.cr,o=e.c,r=e.w,i=e.d,l=e.O,d=e.f,s=e.u,u=e.am,c=e.a,m=e.ae,v=e.p,p=e.J,f=e.e,h=e.m,g=e.l,y=e.k,_=e.a0,x=e.I,b=e.K,w=e.ab,k=e.i,R=e.v,I=e.M,F=e.aa,N=e.N,D=e.Q,P=e.F,T=e.P,S=e.dn,M=e.R},e=>{C=e.R,V=e.u,B=e.a,j=e._,L=e.b,G=e.c,q=e.d,E=e.e,O=e.f,z=e.g},e=>{H=e.f,U=e.S,Y=e.g,$=e.a5,A=e.n,W=e.x,J=e.y,K=e.z,Q=e.D,X=e.t,Z=e.G,ee=e.a3,ae=e._},e=>{te=e.i},e=>{ne=e.u}],execute:function(){var a=document.createElement("style");function oe(){const e=t([]),a=t([]),r=t([]),i=H();n();const l=o(()=>i.apiStatus),d=e=>{var t;const n=["Brother","Father","Son","Grandfather","Grandson","Boyfriend","Stepfather","Stepson"],o=["Sister","Mother","Daughter","Grandmother","Granddaughter","Girlfriend","Stepmother","Stepdaughter"],i=["Spouse/Partner","Aunt/Uncle","Niece/Nephew","Doctor","Other","Patient","TB Contact Person","TB Patient","treatment suporter"];(null===(t=a.value)||void 0===t?void 0:t.length)>0&&(r.value=a.value.filter(a=>"M"===e?n.includes(a.a_is_to_b)||i.includes(a.a_is_to_b):"F"===e&&o.includes(a.a_is_to_b)||i.includes(a.a_is_to_b)))};return{relationships:e,relationshipsData:a,filteredRelationships:r,apiStatus:l,getRelationships:async t=>t?(U.getPouchDbStatus()&&U.getLanConnectionStatus()?a.value=await Y("relationship"):a.value=await $.getRelations(),d(t),e.value=e.value=r.value.map(e=>[{name:e.b_is_to_a,id:e.relationship_type_id,trackByID:e.relationship_type_id+e.b_is_to_a}]).reduce((e,a)=>e.concat(a),[]),e.value):(d(t),e.value=r.value.map(e=>[{name:e.b_is_to_a,id:e.relationship_type_id,trackByID:e.relationship_type_id+e.b_is_to_a}]).reduce((e,a)=>e.concat(a),[]),e.value),filterRelationships:d}}a.textContent=".spinner-overlay[data-v-6acca109]{position:fixed;top:0;left:0;width:100%;height:100%;background-color:rgba(0,0,0,.5);display:flex;flex-direction:column;justify-content:center;align-items:center;z-index:1000}.spinner-overlay ion-spinner[data-v-6acca109]{width:50px;height:50px;color:#fff}.spinner-overlay .loading-text[data-v-6acca109]{color:#fff;margin-top:10px;font-size:1.1em}.header-title[data-v-6acca109]{text-align:center;font-weight:700;font-size:18px;width:100%;padding:14px;background-color:#f8f8f8;color:#333;box-shadow:0 2px 4px rgba(0,0,0,.1)}.masonry-grid[data-v-6acca109]{display:grid;grid-template-columns:repeat(auto-fit,minmax(250px,1fr));gap:16px;padding:16px}@media(max-width:575px){.masonry-grid[data-v-6acca109]{grid-template-columns:1fr}}@media(min-width:576px)and (max-width:767px){.masonry-grid[data-v-6acca109]{grid-template-columns:repeat(2,1fr)}}@media(min-width:768px)and (max-width:991px){.masonry-grid[data-v-6acca109]{grid-template-columns:repeat(3,1fr)}}@media(min-width:992px){.masonry-grid[data-v-6acca109]{grid-template-columns:repeat(4,1fr)}}@media(min-width:1500px){.masonry-grid[data-v-6acca109]{margin-left:100px;margin-right:100px}}.custom-card[data-v-6acca109]{background:#fff;border-radius:5px;padding:5px 15px 15px;transition:transform .2s ease-in-out}.footer-content[data-v-6acca109]{display:flex;justify-content:space-between;width:100%;padding:10px;align-items:center;background-color:#f8f8f8;box-shadow:0 -2px 4px rgba(0,0,0,.1)}.footer-buttons-left[data-v-6acca109],.footer-buttons-right[data-v-6acca109]{display:flex;gap:10px}.pagination-dots[data-v-6acca109]{display:flex;gap:8px;justify-content:center;align-items:center}.dot[data-v-6acca109]{width:10px;height:10px;background-color:#ccc;border-radius:50%;cursor:pointer;transition:background-color .3s ease,transform .3s ease}.dot.active[data-v-6acca109]{background-color:#28a745;transform:scale(1.2)}.dot[data-v-6acca109]:hover{background-color:#218838}\n/*$vite$:1*/",document.head.appendChild(a),e("u",oe);const re=e("_",i({__name:"GuardianInformation",props:{personalInformationFormValues:{},relationshipsData:{}},setup(e,{expose:a}){const{formRef:n,exposeFormMethods:i}=J(),u=e,c=o(()=>u.personalInformationFormValues),m=o(()=>u.relationshipsData),{guardianInformation:v}=((e,a,n)=>{const i=o(()=>(new C).checkIfChild(e.value).moreThanThirteenYears),{getRelationships:l}=oe(),d=t();return r(e,async e=>{e&&(d.value=await l(e.gender))}),r(n,async e=>{d.value=e}),{guardianInformation:o(()=>[{componentType:"Heading",name:"Guardian Information",position:"center"},{componentType:"inputField",header:"Guardian National ID",name:"guardianNationalID",placeholder:"__-__-__-__",icon:A.nationalID,validation:e=>W.isMWNationalID(e)},{componentType:"inputField",header:"First name",name:"guardianFirstname",icon:A.fullName,validation:e=>i.value?W.isNameEmpty(e):W.isName(e)},{componentType:"inputField",header:"Middle name",name:"guardianMiddleName",icon:A.fullName,validation:e=>W.isNameEmpty(e)},{componentType:"inputField",header:"Last name",name:"guardianLastname",icon:A.fullName,validation:e=>i.value?W.isNameEmpty(e):W.isName(e)},{componentType:"phoneInputField",name:"guardianPhoneNumber",header:"Phone Number",validation:e=>W.isMWPhoneNumber(e.phoneNumber)},{componentType:"multiSelectInputField",header:"Relationship to patient",name:"relationship",trackBy:"trackByID",icon:A.search,validation:e=>i.value?null:W.required(null==e?void 0:e.name),options:()=>d.value,disabled:()=>!d.value}])}})(c,0,m);return a(i()),(e,a)=>(d(),l(K,{formData:s(v),ref_key:"formRef",ref:n},null,8,["formData"]))}})),ie={key:0,class:"spinner-overlay"},le={class:"header-title"},de={class:"masonry-grid"},se={class:"card-container"},ue={class:"custom-card"},ce={class:"card-container"},me={key:0,class:"custom-card"},ve={key:1,class:"custom-card"},pe={class:"custom-card card-margin-top"},fe={key:0,class:"card-container"},he={class:"custom-card"},ge={class:"custom-card card-margin-top"},ye={class:"card-container"},_e={class:"custom-card"},xe={key:0,class:"custom-card card-margin-top"},be={class:"footer-content"},we={class:"footer-buttons-left"},ke={key:0,class:"pagination-dots"},Re=["onClick","aria-label"],Ie={class:"footer-buttons-right"},Fe=i({__name:"Registration",props:{editMode:{type:Boolean,default:!1}},setup(e){const a=t(!1),i=u(),H=n(),Y=ne(),$=t(null),A=t(null),W=t(null),J=t(null),K=t(null),ae=t(null),oe=t(null),Fe=t(null),Ne=t(!1),De=t({personalInformationRef:$,birthRegistrationRef:A,socialHistoryRef:W,countryRef:J,currentLocationRef:K,homeLocationRef:ae,guardianInformationRef:oe,patientTypeRef:Fe}),Pe=o(()=>{var e;return(null===(e=$.value)||void 0===e?void 0:e.currentFormValues)||{}}),Te=o(()=>{var e;return(null===(e=A.value)||void 0===e?void 0:e.currentFormValues)||{}}),Se=o(()=>{var e;return(null===(e=W.value)||void 0===e?void 0:e.currentFormValues)||{}}),Me=o(()=>{var e;return(null===(e=J.value)||void 0===e?void 0:e.currentFormValues)||{}}),Ce=o(()=>{var e;return(null===(e=K.value)||void 0===e?void 0:e.currentFormValues)||{}}),Ve=o(()=>{var e;return(null===(e=ae.value)||void 0===e?void 0:e.currentFormValues)||{}}),Be=o(()=>{var e;return(null===(e=oe.value)||void 0===e?void 0:e.currentFormValues)||{}}),je=o(()=>{var e;return(null===(e=Fe.value)||void 0===e?void 0:e.currentFormValues)||{}}),Le=o(()=>({personalInformation:Pe.value,birthRegistration:Te.value,socialHistory:Se.value,country:Me.value,currentLocation:Ce.value,homeLocation:Ve.value,guardianInformation:Be.value,patientType:je.value})),Ge=()=>{const e=Object.values(De.value);return e.forEach(e=>null==e?void 0:e.validateForm()),e.every(e=>null==(null==e?void 0:e.validateForm()))},qe=()=>{Object.values(De.value).forEach(e=>null==e?void 0:e.resetForm())},Ee=o(()=>(new C).checkIfChild(Pe.value)),{nextPage:Oe,prevPage:ze,goToPage:He,isCardVisible:Ue,showPreviousButton:Ye,showPaginationButtons:$e,totalPages:Ae,currentPage:We,showNextButton:Je}=V(),{setFormValues:Ke}=B(),Qe=e=>{i.push({path:e})};return r(H,async e=>{"neonatal-mother"!==e.query.context&&Ke(De)},{deep:!0}),c(async()=>{"neonatal-mother"!==H.query.context&&Ke(De)}),(t,n)=>(d(),l(s(m),{class:v({loading:a.value})},{default:p(()=>[a.value?(d(),f("div",ie,[g(s(_),{name:"bubbles"}),n[4]||(n[4]=y("div",{class:"loading-text"},"Please wait...",-1))])):h("",!0),g(s(x),null,{default:p(()=>[y("div",le,b(e.editMode?"Edit Patient Demographic":"New Patient Registration"),1)]),_:1}),g(s(w),null,{default:p(()=>{var a,t;return[y("div",de,[k(y("div",se,[y("div",ue,[g(j,{ref_key:"personalInformationRef",ref:$},null,512)])],512),[[R,s(Ue)(0)]]),k(y("div",ce,[Ee.value.underNineMonths&&!e.editMode?(d(),f("div",me,[Ee.value.underNineMonths?(d(),l(L,{key:0,ref_key:"birthRegistrationRef",ref:A},null,512)):h("",!0)])):h("",!0),Ee.value.moreThanThirteenYears?(d(),f("div",ve,[g(G,{ref_key:"socialHistoryRef",ref:W},null,512)])):h("",!0),y("div",pe,[g(q,{ref_key:"countryRef",ref:J},null,512)])],512),[[R,s(Ue)(1)]]),null!==(a=Me.value)&&void 0!==a&&null!==(a=a.country)&&void 0!==a&&a.name&&"Malawi"!==(null===(t=Me.value)||void 0===t||null===(t=t.country)||void 0===t?void 0:t.name)?h("",!0):k((d(),f("div",fe,[y("div",he,[g(E,{ref_key:"currentLocationRef",ref:K},null,512)]),y("div",ge,[g(O,{currentLocationFormValues:Ce.value,ref_key:"homeLocationRef",ref:ae},null,8,["currentLocationFormValues"])])],512)),[[R,s(Ue)(2)]]),k(y("div",ye,[y("div",_e,[g(re,{personalInformationFormValues:Pe.value,ref_key:"guardianInformationRef",ref:oe},null,8,["personalInformationFormValues"])]),1==s(U).getProgramID()?(d(),f("div",xe,[g(z,{ref_key:"patientTypeRef",ref:Fe},null,512)])):h("",!0)],512),[[R,s(Ue)(3)]])])]}),_:1}),g(s(I),null,{default:p(()=>[y("div",be,[y("div",we,[g(Q,{name:"Cancel",color:"danger",icon:s(F),"onClicked:btn":n[0]||(n[0]=a=>e.editMode?(async()=>{await ee("Do you want to cancel editing of demographics?","",{confirmBtnLabel:"Yes",icon:"",showBackdrop:!0})&&M.dismiss()})():(async()=>{if(await Z("Do you want to cancel registration?")){const e=H.query.context,a=H.query.returnTo;if(qe(),"neonatal-mother"===e&&"/neonatal/enrollment"===a)return Y.clearEnrollmentContext(),void setTimeout(()=>{i.replace({path:a})},50);i.replace({path:"/home"})}})())},null,8,["icon"]),k(g(s(N),{onClick:n[1]||(n[1]=e=>s(ze)()),"aria-label":"Go to previous page"},{default:p(()=>[...n[5]||(n[5]=[D("Previous",-1)])]),_:1},512),[[R,s(Ye)]])]),s($e)?(d(),f("div",ke,[(d(!0),f(P,null,T(s(Ae),e=>(d(),f("span",{key:e,class:v({dot:!0,active:e===s(We)}),onClick:a=>s(He)(e),"aria-label":`Go to page ${e}`,role:"button"},null,10,Re))),128))])):h("",!0),y("div",Ie,[k(g(Q,{name:e.editMode?"Update":"Save",loading:Ne.value,fill:"solid",color:"primary",icon:s(S),"onClicked:btn":n[2]||(n[2]=a=>e.editMode?(async()=>{try{if(Ne.value=!0,!Ge())return void X("Please fill in all required fields");await(new C).updateDemographics(Le.value)&&M.dismiss()}catch(e){console.error(e)}finally{Ne.value=!1}})():(async()=>{try{if(Ne.value=!0,!Ge())return void X("Please fill in all required fields");if(await(new C).saveRegistrationData(Le.value)){const l=H.query.context,d=H.query.returnTo;if("neonatal-mother"===l&&"/neonatal/enrollment"===d){const l=U.getUserID();if(l){var e,a,t,n,o,r;const s=Pe.value,u=Ve.value,c=Ce.value,m={patientID:l,firstName:s.firstname||"",middleName:s.middleName||"",lastName:s.lastname||"",gender:s.gender||"F",birthdate:s.birthdate||"",nationalId:s.nationalID||"",phone:s["Phone Number"]||"",address:{city_village:(null===(e=u.home_village)||void 0===e?void 0:e.name)||(null===(a=c.current_village)||void 0===a?void 0:a.name)||"",township_division:(null===(t=u.home_traditional_authority)||void 0===t?void 0:t.name)||(null===(n=c.current_traditional_authority)||void 0===n?void 0:n.name)||"",state_province:(null===(o=u.home_district)||void 0===o?void 0:o.name)||(null===(r=c.current_district)||void 0===r?void 0:r.name)||""}};Y.setCreatedMother(l,m),qe(),setTimeout(()=>{i.replace({path:d,query:{motherAdded:l.toString(),timestamp:Date.now().toString()}})},100)}else qe(),setTimeout(()=>{i.replace({path:d})},100);return}qe(),32==U.getProgramID()?te()?Qe("/home"):Qe("/NCDEnrollment"):Qe("/patientProfile")}}catch(l){console.error(l)}finally{Ne.value=!1}})())},null,8,["name","loading","icon"]),[[R,s(We)===s(Ae)]]),k(g(Q,{name:"Next","onClicked:btn":n[3]||(n[3]=e=>s(Oe)())},null,512),[[R,s(Je)]])])])]),_:1})]),_:1},8,["class"]))}}),Ne=e("R",ae(Fe,[["__scopeId","data-v-6acca109"]])),De=Object.freeze(Object.defineProperty({__proto__:null,default:Ne},Symbol.toStringTag,{value:"Module"}));e("a",De)}}});
