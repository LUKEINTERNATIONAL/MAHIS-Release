import{d as Y,bh as j,cr as z,r as i,w as _,e as f,f as h,l as G,H as J,k as C,F as Q,T as U,I as X,u as Z,bl as S,cY as $}from"./vendor-CJ2tyHrn.js";import{u as tt,K as et,aq as o,H as v,b8 as at,_ as st}from"../index-CPIhguZJ.js";import"./lodash-NJiRuGo9.js";import"./apexcharts-BtvCa6MI.js";const ot={class:"table-responsive"},nt=Y({__name:"VitalsMeasurementsSummary",setup(rt){const B=tt(),{patient:c}=j(B),M=z(),T=i(null),l=i([]),w=i(""),E=i(["Date","Weight","Height (cm)","Temperature","Pulse","SAO2","Systolic","Respiration rate","Diastolic","BMI"]),V=i({responsive:!0,select:!1,layout:{topStart:"",topEnd:"search",bottomStart:"info",bottomEnd:"paging"},ordering:!1}),y=async()=>{try{l.value=[];const r=(await et.getObsByEncounterId(6)).flatMap(e=>e.obs||[]),t=new Map;r.forEach(e=>{var a;if(e.obs_datetime){const s=e.obs_datetime.split(" ")[0];t.has(s)||t.set(s,[]),(a=t.get(s))==null||a.push(e)}});for(const[e,a]of t.entries())await k(e,a);l.value.sort((e,a)=>new Date(a[0]).getTime()-new Date(e[0]).getTime())}catch(n){console.error("Error updating vitals data:",n)}S.use($)},k=async(n,r)=>{const t=K=>{var D;const I=r.find(L=>L.concept_id===K);return(D=I==null?void 0:I.value_numeric)!=null?D:""},e=await o.getConceptID("Height (cm)"),a=await o.getConceptID("Weight (kg)"),s=await o.getConceptID("Systolic blood pressure"),p=await o.getConceptID("Diastolic blood pressure"),u=await o.getConceptID("Temperature (c)"),d=await o.getConceptID("Pulse"),H=await o.getConceptID("Blood oxygen saturation"),O=await o.getConceptID("Respiratory rate"),m=t(a),g=t(e),R=t(u),F=t(d),A=t(H),N=t(s),P=t(O),W=t(p);let b="";m&&g&&(b=await x(m,g));const q=[v.toStandardHisDisplayFormat(n),m,g,R,F,A,N,P,W,b];l.value.push(q)},x=async(n,r)=>{var t,e,a,s,p,u;if((e=(t=c.value)==null?void 0:t.personInformation)!=null&&e.gender&&((s=(a=c.value)==null?void 0:a.personInformation)!=null&&s.birthdate))try{return w.value=await at.getBMI(parseInt(String(n)),parseInt(String(r)),c.value.personInformation.gender,v.calculateAge(c.value.personInformation.birthdate,v.sessionDate())),(u=(p=w.value)==null?void 0:p.index)!=null?u:""}catch(d){return console.error("Error calculating BMI:",d),""}return""};return _(()=>M,async()=>{await y()},{deep:!0}),_(c,async()=>{await y()},{deep:!0,immediate:!0}),(n,r)=>(h(),f("div",ot,[G(Z(S),{ref_key:"dataTable",ref:T,options:V.value,data:l.value,class:"display nowrap modern-table",width:"100%"},{default:J(()=>[C("thead",null,[C("tr",null,[(h(!0),f(Q,null,U(E.value,t=>(h(),f("th",{key:t},X(t),1))),128))])])]),_:1},8,["options","data"])]))}}),ut=st(nt,[["__scopeId","data-v-7d280081"]]);export{ut as default};
