System.register(["./vendor-legacy-h4cyiMXU.js","../index-legacy-DA1Px0Bm.js","./neonatal_service-legacy-DFcFFAKz.js","./admissionWorkflow-legacy-BPvQ4T84.js"],function(e,t){"use strict";var a,l,s,i,o,n,c,r,d,p,v,u,m,g,A,N,f,T,b,x,y,E,S,h,k,I,O,L,C,w,M,R;return{setters:[e=>{a=e.d,l=e.am,s=e.b2,i=e.r,o=e.c,n=e.w,c=e.a,r=e.e,d=e.f,p=e.k,v=e.i,u=e.l,m=e.K,g=e.u,A=e.fk,N=e.fl,f=e.L,T=e.v,b=e.bj,x=e.p,y=e.m,E=e.O,S=e.ba,h=e.Q,k=e.F,I=e.P,O=e.U},e=>{L=e.u,C=e.b,w=e._},e=>{M=e.N},e=>{R=e.g}],execute:function(){var t=document.createElement("style");t.textContent=".summary-wrapper[data-v-854733d0]{margin-bottom:16px}.summary-title[data-v-854733d0]{font-size:24px;font-weight:600;color:#00190e;text-align:center;margin-bottom:12px}.progress-bar-container[data-v-854733d0]{background:rgba(var(--ion-color-success-rgb),.1);border-radius:8px;overflow:hidden;border:2px solid color-mix(in srgb,var(--ion-color-primary) .5%,transparent)}.progress-header[data-v-854733d0]{display:flex;justify-content:space-between;align-items:center;padding:12px 16px;background:#ded;cursor:pointer;user-select:none}.progress-title[data-v-854733d0]{font-size:14px;font-weight:500;color:#404040}.toggle-icon[data-v-854733d0]{font-size:24px;color:var(--ion-color-success-contrast)}.progress-content[data-v-854733d0]{padding:16px 20px;background:#fff}.progress-step[data-v-854733d0]{display:flex;gap:12px;position:relative}.progress-step.last[data-v-854733d0]{padding-bottom:0}.step-indicator[data-v-854733d0]{display:flex;flex-direction:column;align-items:center;position:relative}.step-circle[data-v-854733d0]{width:24px;height:24px;border-radius:50%;background:#fff;border:3px solid #8C8C8C;display:flex;align-items:center;justify-content:center;z-index:2;position:relative}.step-circle.completed[data-v-854733d0]{background:var(--ion-color-primary);border-color:var(--ion-color-primary)}.step-circle ion-icon[data-v-854733d0]{color:#fff;font-size:16px}.step-line[data-v-854733d0]{width:3px;flex:1;background:#8c8c8c;min-height:30px}.step-line.last-line[data-v-854733d0]{min-height:0}.progress-step.completed .step-line[data-v-854733d0]{background:var(--ion-color-primary)}.step-content[data-v-854733d0]{flex:1;padding-bottom:16px}.step-content.expandable[data-v-854733d0]{cursor:pointer}.step-title[data-v-854733d0]{font-size:16px;font-weight:600;color:var(--ion-color-success-contrast);margin-bottom:4px;display:flex;justify-content:space-between;align-items:center}.step-title.incomplete[data-v-854733d0]{color:#8c8c8c;font-weight:400}.step-title.clickable[data-v-854733d0]{cursor:pointer}.step-title.clickable[data-v-854733d0]:hover{text-decoration:underline}.step-title.disabled[data-v-854733d0]{color:var(--ion-color-medium);font-weight:400}.edit-link[data-v-854733d0]{font-size:12px;color:var(--ion-color-primary);font-weight:400;border:1px solid #DDEEDD;border-radius:5px;padding:4px 8px}.sub-steps[data-v-854733d0]{margin-top:8px;margin-left:8px}.sub-step[data-v-854733d0]{display:flex;align-items:center;gap:8px;padding:6px 0;font-size:14px;color:var(--ion-color-dark)}.sub-step.clickable[data-v-854733d0]{cursor:pointer}.sub-step.clickable[data-v-854733d0]:hover{color:var(--ion-color-primary)}.sub-step.completed[data-v-854733d0]{color:var(--ion-color-primary);font-weight:600;cursor:default}.bullet[data-v-854733d0]{font-size:20px;line-height:1}.sub-step-title[data-v-854733d0]{flex:1}\n/*$vite$:1*/",document.head.appendChild(t);const D={class:"summary-wrapper"},P={class:"progress-bar-container"},_={class:"progress-title"},G={class:"progress-content"},Y={class:"step-indicator"},z={key:0,class:"step-line"},B={class:"step-content"},j={class:"step-indicator"},V={key:0,class:"step-line"},U={class:"step-content"},H={class:"step-indicator"},X={class:"step-content expandable"},F={key:0,class:"edit-link"},W={class:"sub-steps"},q=["onClick"],$={class:"sub-step-title"},K={class:"step-indicator"},Q={class:"step-content"},J={class:"step-indicator"},Z={class:"step-content"},ee={class:"step-indicator"},te={class:"step-content"},ae={class:"step-indicator"},le={class:"step-content"};e("A",w(a({__name:"AdmissionProgressBar",setup(e){const t=l(),a=L(),{patient:w}=s(a),se=i(!0),ie=i(!0),oe=i([]),ne=i(["Triage","Profiling","Admission"]),ce=i([{encounterType:C.NEONATAL_SIGNS_SYMPTOMS,title:"Signs & Symptoms",route:"/neonatal/signs-symptoms",encounterNames:["NEONATAL SIGNS & SYMPTOMS","NEONATAL SIGNS SYMPTOMS"],isCompleted:!1},{encounterType:C.NEONATAL_REVIEW_OF_SYSTEMS,title:"A review of systems",route:"/neonatal/review-of-systems",encounterNames:["NEONATAL REVIEW OF SYSTEMS"],isCompleted:!1},{encounterType:C.PHYSICAL_EXAMINATION_BABY,title:"General examination",route:"/neonatal/general-examination",encounterNames:["PHYSICAL EXAMINATION BABY","NEONATAL GENERAL EXAMINATION"],isCompleted:!1},{encounterType:C.VITALS,title:"Vitals",route:"/neonatal/vitals",encounterNames:["VITALS","NEONATAL VITALS"],isCompleted:!1},{encounterType:C.NEONATAL_SYSTEMIC_EXAMINATION,title:"Systemic examination",route:"/neonatal/SystemicExamination",encounterNames:["NEONATAL SYSTEMIC EXAMINATION"],isCompleted:!1}]),re=i(!1),de=i(!1),pe=i(!1),ve=i(!1),ue=i(!1),me=i(!1),ge=o(()=>ce.value.every(e=>e.isCompleted)),Ae=o(()=>ce.value.find(e=>!e.isCompleted)),Ne=e=>{var t;return!(!re.value||!de.value||e.isCompleted||(null===(t=Ae.value)||void 0===t?void 0:t.encounterType)!==e.encounterType)},fe=e=>(null!=e?e:"").trim().toUpperCase(),Te=async()=>{var e;if(null!==(e=w.value)&&void 0!==e&&e.patientID)try{const e=await M.getSavedEncounters(w.value.patientID);oe.value=Array.isArray(null==e?void 0:e.encounters)?e.encounters:[],de.value=oe.value.some(e=>{const t=fe(e);return"NEONATAL ENROLLMENT"===t||"NEONATAL ENROLMENT"===t});const t=R(oe.value,ce.value);ce.value.forEach((e,a)=>{e.isCompleted=a<t});const a=new Set(oe.value.map(e=>fe(e))),l=e=>e.some(e=>a.has(fe(e)));pe.value=l(["DIAGNOSIS","NEONATAL DIAGNOSIS"]),ve.value=l(["INVESTIGATION","NEONATAL INVESTIGATION","LAB ORDERS","LAB RESULTS","AHD LAB ORDERS","AHD LAB RESULTS"]),ue.value=l(["TREATMENT","NEONATAL TREATMENT PLAN"]),me.value=l(["NEONATAL ADMISSION OUTCOMES","ADMISSION OUTCOMES"]),re.value=oe.value.some(e=>"NEONATAL TRIAGE"===fe(e))}catch(t){console.error("Error loading progress:",t)}},be=()=>{se.value=!se.value},xe=async()=>{if(ge.value)t.push("/neonatal/checkpoint");else{if(!re.value){const e=await O.create({header:"Triage Required",message:"Please complete triage before starting admission.",buttons:[{text:"Cancel",role:"cancel"},{text:"Go to Triage",handler:()=>{t.push("/neonatal/triage")}}]});return void(await e.present())}if(!de.value){const e=await O.create({header:"Profiling Required",message:"Please complete profiling before starting admission.",buttons:[{text:"Cancel",role:"cancel"},{text:"Go to Profiling",handler:()=>{t.push("/neonatal/enrollment")}}]});return void(await e.present())}ie.value=!ie.value}};return n(()=>{var e;return null===(e=w.value)||void 0===e?void 0:e.patientID},e=>{e&&Te()}),n(()=>t.currentRoute.value,()=>{Te()}),c(()=>{Te()}),(e,a)=>(d(),r("div",D,[a[11]||(a[11]=p("div",{class:"summary-title"},"Summary",-1)),p("div",P,[p("div",{class:"progress-header",onClick:be},[p("span",_,m(se.value?"Hide progress bar":"Show progress bar"),1),u(g(f),{icon:se.value?g(A):g(N),class:"toggle-icon"},null,8,["icon"])]),v(p("div",G,[p("div",{class:x(["progress-step",{completed:re.value,active:!re.value}])},[p("div",Y,[p("div",{class:x(["step-circle",{completed:re.value}])},[re.value?(d(),E(g(f),{key:0,icon:g(S)},null,8,["icon"])):y("",!0)],2),ne.value.length>1?(d(),r("div",z)):y("",!0)]),p("div",B,[p("div",{class:x(["step-title",{clickable:!re.value,incomplete:!re.value}]),onClick:a[0]||(a[0]=e=>!re.value&&void t.push("/neonatal/triage"))},"Triage",2)])],2),p("div",{class:x(["progress-step",{completed:de.value,active:!de.value&&re.value}])},[p("div",j,[p("div",{class:x(["step-circle",{completed:de.value}])},[de.value?(d(),E(g(f),{key:0,icon:g(S)},null,8,["icon"])):y("",!0)],2),ne.value.length>2?(d(),r("div",V)):y("",!0)]),p("div",U,[p("div",{class:x(["step-title",{clickable:!de.value&&re.value,incomplete:!de.value}]),onClick:a[1]||(a[1]=e=>!de.value&&re.value&&void t.push("/neonatal/enrollment"))},"Profiling",2)])],2),p("div",{class:x(["progress-step",{completed:ge.value,active:!ge.value&&re.value&&de.value}])},[p("div",H,[p("div",{class:x(["step-circle",{completed:ge.value}])},[ge.value?(d(),E(g(f),{key:0,icon:g(S)},null,8,["icon"])):y("",!0)],2),a[3]||(a[3]=p("div",{class:"step-line last-line"},null,-1))]),p("div",X,[p("div",{class:x(["step-title clickable",{incomplete:!ge.value}]),onClick:xe},[a[4]||(a[4]=h(" Admission ",-1)),ie.value?y("",!0):(d(),r("span",F,"edit"))],2),v(p("div",W,[(d(!0),r(k,null,I(ce.value,e=>(d(),r("div",{key:e.encounterType,class:x(["sub-step",{completed:e.isCompleted,clickable:Ne(e)}]),onClick:a=>{return Ne(e)&&(l=e.route,void t.push(l));var l}},[a[5]||(a[5]=p("span",{class:"bullet"},"â€¢",-1)),p("span",$,m(e.title),1)],10,q))),128))],512),[[T,ie.value]])])],2),p("div",{class:x(["progress-step",{completed:pe.value,active:!pe.value&&ge.value}])},[p("div",K,[p("div",{class:x(["step-circle",{completed:pe.value}])},[pe.value?(d(),E(g(f),{key:0,icon:g(S)},null,8,["icon"])):y("",!0)],2),a[6]||(a[6]=p("div",{class:"step-line"},null,-1))]),p("div",Q,[p("div",{class:x(["step-title",{clickable:!pe.value&&ge.value,incomplete:!pe.value}]),onClick:a[2]||(a[2]=e=>!pe.value&&ge.value&&void t.push("/neonatal/diagnosis"))},"Diagnosis",2)])],2),p("div",{class:x(["progress-step",{completed:ve.value,active:ge.value&&!ve.value}])},[p("div",J,[p("div",{class:x(["step-circle",{completed:ve.value}])},[ve.value?(d(),E(g(f),{key:0,icon:g(S)},null,8,["icon"])):y("",!0)],2),a[7]||(a[7]=p("div",{class:"step-line"},null,-1))]),p("div",Z,[p("div",{class:x(["step-title",{incomplete:!ve.value}])},"Investigations",2)])],2),p("div",{class:x(["progress-step",{completed:ue.value,active:ge.value&&!ue.value}])},[p("div",ee,[p("div",{class:x(["step-circle",{completed:ue.value}])},[ue.value?(d(),E(g(f),{key:0,icon:g(S)},null,8,["icon"])):y("",!0)],2),a[8]||(a[8]=p("div",{class:"step-line"},null,-1))]),p("div",te,[p("div",{class:x(["step-title",{incomplete:!ue.value}])},"Treatment Plan",2)])],2),p("div",{class:x(["progress-step",{completed:me.value,active:ge.value&&!me.value}])},[p("div",ae,[p("div",{class:x(["step-circle",{completed:me.value}])},[me.value?(d(),E(g(f),{key:0,icon:g(S)},null,8,["icon"])):y("",!0)],2),a[9]||(a[9]=p("div",{class:"step-line"},null,-1))]),p("div",le,[p("div",{class:x(["step-title",{incomplete:!me.value}])},"Outcome",2)])],2),a[10]||(a[10]=b('<div class="progress-step last" data-v-854733d0><div class="step-indicator" data-v-854733d0><div class="step-circle" data-v-854733d0></div></div><div class="step-content" data-v-854733d0><div class="step-title incomplete" data-v-854733d0>Signoff &amp; Printout</div></div></div>',1))],512),[[T,se.value]])])]))}}),[["__scopeId","data-v-854733d0"]]))}}});
