System.register(["./vendor-legacy-BwtHwPGM.js","../index-legacy-DCo03rSf.js","./NeonatalStepper-legacy-Be-d2wy4.js","./neonatal_service-legacy-D6XO3zS7.js","./lodash-legacy-pOOc9Efu.js","./apexcharts-legacy-DbU8KA5u.js","./SaveProgressModal-legacy-CnAJFGyL.js","./images-legacy-gTS9vAYU.js","./enrollment-legacy-BWFKsMdA.js"],function(e,t){"use strict";var a,s,o,i,n,r,l,c,u,m,d,p,v,f,g,b,h,S,O,F,_,y,D,I,x,w,A,k,P,j,N,C,V,R,T,z,J;return{setters:[e=>{a=e.d,s=e.r,o=e.eT,i=e.w,n=e.e,r=e.f,l=e.l,c=e.u,u=e.a,m=e.J,d=e.k,p=e.L,v=e.aH,f=e.N,g=e.Q,b=e.D,h=e.a3,S=e.a6,O=e.ao,F=e.aV,_=e.eU,y=e.H,D=e.O},e=>{I=e.aC,x=e._,w=e.a0,A=e.H,k=e.T,P=e.u,j=e.t,N=e.G,C=e.s},e=>{V=e.m,R=e.o,T=e.p,z=e.N},e=>{J=e.N},null,null,null,null,null],execute:function(){var t=document.createElement("style");t.textContent=".admission-outcome-wrapper[data-v-b2ea5105],.safeguard-concerns-wrapper[data-v-2dda68fa],.admission-signoff-wrapper[data-v-086b4bcc],.print-summary-wrapper[data-v-f2afb3bb]{display:flex;flex-direction:column;gap:1rem}.print-content[data-v-f2afb3bb]{display:flex;flex-direction:column;align-items:center;gap:2rem;padding:2rem}.print-icon-container[data-v-f2afb3bb]{display:flex;justify-content:center;align-items:center;width:120px;height:120px;background-color:#f5f5f5;border-radius:50%;border:3px solid #016302}.print-icon[data-v-f2afb3bb]{font-size:64px;color:#016302}.print-actions[data-v-f2afb3bb]{width:100%;max-width:400px}.print-button[data-v-f2afb3bb]{--background: #016302;--background-hover: #014d02;--background-activated: #013d02;height:48px;font-size:16px;font-weight:600;text-transform:uppercase}@media print{.print-summary-wrapper[data-v-f2afb3bb]{display:none}}.neonatal-admission-outcomes-page[data-v-780323dd]{min-height:100vh}\n/*$vite$:1*/",document.head.appendChild(t);const U={class:"admission-outcome-wrapper"},H=x(a({__name:"AdmissionOutcomeSection",setup(e,{expose:t}){const a=s(null),u=V[0],m=u.formData,d=u.subtitle,p=o(R),v=e=>{p&&(p.admissionOutcome=e.admissionOutcome||"")};return i(()=>{var e;return null===(e=a.value)||void 0===e?void 0:e.formValues},e=>{e&&v(e)},{deep:!0}),i(()=>a.value,e=>{null!=e&&e.getFormValues&&v(e.getFormValues())},{immediate:!0}),t({getFormRef:()=>a.value,validateForm:()=>{var e,t;return(null===(e=a.value)||void 0===e||null===(t=e.validateForm)||void 0===t?void 0:t.call(e))||null},getFormValues:()=>{var e,t;return(null===(e=a.value)||void 0===e||null===(t=e.getFormValues)||void 0===t?void 0:t.call(e))||{}}}),(e,t)=>(r(),n("div",U,[l(I,{formData:c(m),subtitle:c(d),ref_key:"formRef",ref:a,class:"main-form"},null,8,["formData","subtitle"])]))}}),[["__scopeId","data-v-b2ea5105"]]),W={class:"safeguard-concerns-wrapper"},E=x(a({__name:"SafeguardConcernsSection",setup(e,{expose:t}){const a=s(null),o=V[1],i=o.formData,u=o.subtitle;return t({getFormRef:()=>a.value,validateForm:()=>null,getFormValues:()=>({})}),(e,t)=>(r(),n("div",W,[l(I,{formData:c(i),subtitle:c(u),ref_key:"formRef",ref:a,class:"main-form"},null,8,["formData","subtitle"])]))}}),[["__scopeId","data-v-2dda68fa"]]),G={class:"admission-signoff-wrapper"},L=x(a({__name:"AdmissionSignOffSection",setup(e,{expose:t}){const a=s(null),m=V[2],d=m.formData,p=m.subtitle,v=o(R),f=w();u(()=>{if(a.value&&f.user){const e=a.value.getFormValues();e.healthcareWorkerId=f.user.username||"";const t=[f.user.given_name,f.user.family_name].filter(Boolean).join(" ")||f.user.username||"";e.electronicSignature=t,e.userRole=f.user.user_type||"Medical Doctor",e.signOffDate=A.currentDate()}});const g=e=>{v&&(v.healthcareWorkerId=e.healthcareWorkerId||"",v.electronicSignature=e.electronicSignature||"",v.userRole=e.userRole||"",v.signOffDate=e.signOffDate||"")};return i(()=>{var e;return null===(e=a.value)||void 0===e?void 0:e.formValues},e=>{e&&g(e)},{deep:!0}),i(()=>a.value,e=>{null!=e&&e.getFormValues&&g(e.getFormValues())},{immediate:!0}),t({getFormRef:()=>a.value,validateForm:()=>{var e,t;return(null===(e=a.value)||void 0===e||null===(t=e.validateForm)||void 0===t?void 0:t.call(e))||null},getFormValues:()=>{var e,t;return(null===(e=a.value)||void 0===e||null===(t=e.getFormValues)||void 0===t?void 0:t.call(e))||{}}}),(e,t)=>(r(),n("div",G,[l(I,{formData:c(d),subtitle:c(p),ref_key:"formRef",ref:a,class:"main-form"},null,8,["formData","subtitle"])]))}}),[["__scopeId","data-v-086b4bcc"]]),M={class:"print-summary-wrapper"},$={class:"print-content"},B={class:"print-icon-container"},Q={class:"print-actions"},Z=x(a({__name:"PrintSummarySection",setup(e,{expose:t}){const a=s(null),o=V[3],i=o.formData,u=o.subtitle,b=()=>{window.print()};return t({getFormRef:()=>a.value,validateForm:()=>null,getFormValues:()=>({})}),(e,t)=>(r(),n("div",M,[l(I,{formData:c(i),subtitle:c(u),ref_key:"formRef",ref:a,class:"main-form"},{printSection:m(()=>[d("div",$,[d("div",B,[l(c(p),{icon:c(v),class:"print-icon"},null,8,["icon"])]),d("div",Q,[l(c(f),{expand:"block",color:"primary",onClick:b,class:"print-button"},{default:m(()=>[l(c(p),{icon:c(v),slot:"start"},null,8,["icon"]),t[0]||(t[0]=g(" Print Admission Summary ",-1))]),_:1})])])]),_:1},8,["formData","subtitle"])]))}}),[["__scopeId","data-v-f2afb3bb"]]),q=()=>JSON.parse(JSON.stringify(T)),K=b("neonatalAdmissionOutcomesStore",{state:()=>({activePatientId:null,admissionOutcomesForm:q(),admissionOutcomesFormCache:{}}),getters:{getActivePatientId(){return this.activePatientId}},actions:{initializeAdmissionOutcomesForm(e){if(null==e)return this.activePatientId=null,void Object.assign(this.admissionOutcomesForm,q());this.activePatientId=e;const t=this.admissionOutcomesFormCache[String(e)];t?Object.assign(this.admissionOutcomesForm,t):Object.assign(this.admissionOutcomesForm,q()),this.saveAdmissionOutcomesSnapshot()},saveAdmissionOutcomesSnapshot(){null!=this.activePatientId&&(this.admissionOutcomesFormCache[String(this.activePatientId)]=JSON.parse(JSON.stringify(this.admissionOutcomesForm)))},resetAdmissionOutcomesForm(){Object.assign(this.admissionOutcomesForm,q()),this.saveAdmissionOutcomesSnapshot()},clearAdmissionOutcomesForm(e){delete this.admissionOutcomesFormCache[String(e)],this.activePatientId===e&&this.resetAdmissionOutcomesForm()}},persist:{paths:["activePatientId","admissionOutcomesForm","admissionOutcomesFormCache"]}}),X=a({name:"NeonatalAdmissionOutcomes",components:{IonPage:S,IonContent:h,Toolbar:k,NeonatalStepper:z,AdmissionOutcomeSection:H,SafeguardConcernsSection:E,AdmissionSignOffSection:L,PrintSummarySection:Z},setup(){const e=O(),t=P(),{patient:a}=F(t),o=s(!1),n=K(),r=()=>{var e;const t=(e=>{const t=Number(e);return Number.isFinite(t)?t:null})(null===(e=a.value)||void 0===e?void 0:e.patientID);n.initializeAdmissionOutcomesForm(t)};r(),i(()=>{var e;return null===(e=a.value)||void 0===e?void 0:e.patientID},()=>r());const l=n.admissionOutcomesForm;_(R,l),i(()=>n.admissionOutcomesForm,()=>n.saveAdmissionOutcomesSnapshot(),{deep:!0});const c=s(V.map((e,t)=>({title:e.title,number:t+1,checked:!1,class:0===t?"open_step common_step":"common_step",last_step:t===V.length-1?"last_step":""}))),u=[{title:V[0].title,value:"1",component:H,configIndex:0},{title:V[1].title,value:"2",component:E,configIndex:1},{title:V[2].title,value:"3",component:L,configIndex:2,buttonText:"SIGN"},{title:V[3].title,value:"4",component:Z,configIndex:3}];return{router:e,patient:a,admissionOutcomesFormData:l,stepperTitle:"Admission Outcomes",currentOpenStepper:"1",wizardData:c,stepperData:u,updateStatus:e=>{e&&e.value&&c.value.forEach((t,a)=>{e.value===(a+1).toString()?(t.class="open_step common_step",t.checked=!1):a<parseInt(e.value)-1?(t.class="common_step color_white",t.checked=!0):(t.class="common_step",t.checked=!1)})},getSaveFunction:t=>t===u.length-1?async()=>{var t;if(null!==(t=a.value)&&void 0!==t&&t.patientID){if(!o.value)try{if(o.value=!0,!l.admissionOutcome)return j("Please select an admission outcome"),void(o.value=!1);await J.saveAdmissionOutcomes(a.value.patientID,l,A.sessionDate()),N("Admission outcomes saved successfully"),n.clearAdmissionOutcomesForm(a.value.patientID),e.push({name:"neonatalPatientProfile"})}catch(s){console.error("Failed to save admission outcomes",s),C("Failed to save admission outcomes. Please try again."),o.value=!1}}else j("No patient selected")}:null,isSaving:o,neonatalAdmissionOutcomesSections:V}}});e("default",x(X,[["render",function(e,t,a,s,o,i){const n=y("Toolbar"),c=y("NeonatalStepper"),u=y("ion-content"),d=y("ion-page");return r(),D(d,{class:"neonatal-admission-outcomes-page"},{default:m(()=>[l(n),l(u,{fullscreen:!0},{default:m(()=>[l(c,{wizardData:e.wizardData,StepperData:e.stepperData,stepperTitle:e.stepperTitle,openStepper:e.currentOpenStepper,backUrl:"/patientProfile",getSaveFunction:e.getSaveFunction,flowType:"admissionOutcomes",sectionsConfig:e.neonatalAdmissionOutcomesSections,useSkipLogic:!0,onUpdateStatus:e.updateStatus},null,8,["wizardData","StepperData","stepperTitle","openStepper","getSaveFunction","sectionsConfig","onUpdateStatus"])]),_:1})]),_:1})}],["__scopeId","data-v-780323dd"]]))}}});
