import{d as b,r as y,bH as w,c as F,b as Y,w as S,e as E,f as I,k as L,l as N,K as $,u as C,ab as z,ae as X,am as j,b2 as G,eV as K,H,O as J,J as P}from"./vendor-Do41i3tR.js";import{z as O,_ as A,T as q,u as Q,b as D,t as U,J as V,ch as Z,F as ee}from"../index-DmWNBpr9.js";import{e as h,f as R,N as te}from"./NeonatalStepper-DUriSxpM.js";import{u as ae}from"./useNeonatalVitalsStore-BJtbZ1r9.js";import"./lodash-NJiRuGo9.js";import"./apexcharts-DB4uOJSt.js";import"./SaveProgressModal-CyRzXU-6.js";import"./enrollment-DU-PLRUa.js";import"./images-142qstiX.js";const oe={class:"neonatal-vitals-section"},ne={class:"respiratory-timer-body"},re={class:"respiratory-timer-time"},se={class:"respiratory-timer-instruction"},k=60,ie=b({__name:"VitalSignsSection",setup(f,{expose:g}){const o=y(null),s=h.find(a=>a.title==="Vital Signs");if(!s)throw new Error("[VitalSignsSection] Missing configuration for Vital Signs section");const n=w(R),l=y(k),r=y(!1),i=y(!1);let e=null;const t=F(()=>{const a=Math.floor(l.value/60).toString().padStart(2,"0"),m=(l.value%60).toString().padStart(2,"0");return"".concat(a,":").concat(m)}),v=F(()=>r.value?"TAP TO PAUSE COUNTDOWN":l.value===k?"TAP TO START COUNTDOWN":l.value===0?"TAP TO RESTART COUNTDOWN":"TAP TO RESUME COUNTDOWN"),p=()=>{e===null&&(r.value=!0,i.value=!1,e=window.setInterval(()=>{l.value>0?l.value-=1:(r.value=!1,i.value=!0,e!==null&&(clearInterval(e),e=null))},1e3))},d=()=>{e!==null&&(clearInterval(e),e=null),r.value=!1},T=()=>{d(),l.value=k,i.value=!1},M=()=>{r.value?d():(l.value===0&&T(),p())};Y(()=>{e!==null&&clearInterval(e)});const c=F(()=>s.formData.map(a=>{var B,W;if(!a.name||!n)return{...a};const m=n[a.name],x=a.componentType==="switchField"?m!=null?m:null:(W=(B=m!=null?m:a.initialValue)!=null?B:a.value)!=null?W:"";return{...a,initialValue:x}})),u=s.conditionalRules||[],_=a=>{var m,x;n&&(n.respiratory_rate=a.respiratory_rate||"",n.heart_rate=a.heart_rate||"",n.can_measure_oxygen_saturation=(m=a.can_measure_oxygen_saturation)!=null?m:null,n.oxygen_saturation=a.oxygen_saturation||"",n.can_measure_temperature=(x=a.can_measure_temperature)!=null?x:null,n.temperature=a.temperature||"")};return S(()=>{var a;return(a=o.value)==null?void 0:a.formValues},a=>{a&&_(a)},{deep:!0}),S(()=>o.value,a=>{a!=null&&a.getFormValues&&_(a.getFormValues())},{immediate:!0}),g({getFormRef:()=>o.value,validateForm:()=>{var a,m;return((m=(a=o.value)==null?void 0:a.validateForm)==null?void 0:m.call(a))||null},getFormValues:()=>{var a,m;return((m=(a=o.value)==null?void 0:a.getFormValues)==null?void 0:m.call(a))||{}}}),(a,m)=>(I(),E("div",oe,[L("div",{class:"respiratory-timer-card",onClick:M},[L("div",ne,[L("div",re,$(t.value),1),L("div",se,$(v.value),1)])]),N(O,{formData:c.value,conditionalRules:C(u),ref_key:"formRef",ref:o},null,8,["formData","conditionalRules"])]))}}),ue=A(ie,[["__scopeId","data-v-19d42943"]]),le={class:"neonatal-vitals-section"},ce=b({__name:"WeightMeasurementsSection",setup(f,{expose:g}){const o=y(null),s=h.find(e=>e.title==="Weight Measurements");if(!s)throw new Error("[WeightMeasurementsSection] Missing configuration for Weight Measurements section");const n=w(R),l=F(()=>s.formData.map(e=>{var v,p;if(!e.name||!n)return{...e};const t=n[e.name];return{...e,initialValue:(p=(v=t!=null?t:e.initialValue)!=null?v:e.value)!=null?p:""}})),r=s.conditionalRules||[],i=e=>{n&&(n.current_weight=e.current_weight||"",n.head_circumference=e.head_circumference||"")};return S(()=>{var e;return(e=o.value)==null?void 0:e.formValues},e=>{e&&i(e)},{deep:!0}),S(()=>o.value,e=>{e!=null&&e.getFormValues&&i(e.getFormValues())},{immediate:!0}),g({getFormRef:()=>o.value,validateForm:()=>{var e,t;return((t=(e=o.value)==null?void 0:e.validateForm)==null?void 0:t.call(e))||null},getFormValues:()=>{var e,t;return((t=(e=o.value)==null?void 0:e.getFormValues)==null?void 0:t.call(e))||{}}}),(e,t)=>(I(),E("div",le,[N(O,{formData:l.value,conditionalRules:C(r),ref_key:"formRef",ref:o},null,8,["formData","conditionalRules"])]))}}),me=A(ce,[["__scopeId","data-v-7a8515ce"]]),pe={class:"neonatal-vitals-section"},_e=b({__name:"BloodSugarSection",setup(f,{expose:g}){const o=y(null),s=h.find(e=>e.title==="Blood Sugar");if(!s)throw new Error("[BloodSugarSection] Missing configuration for Blood Sugar section");const n=w(R),l=F(()=>s.formData.map(e=>{var p,d,T,M;if(!e.name||!n)return{...e};const t=n[e.name];if(e.name==="blood_sugar")return{...e,initialValue:(d=(p=t!=null?t:e.initialValue)!=null?p:e.value)!=null?d:"",initialUnit:n.blood_sugar_unit||e.initialUnit||"mg/dL"};const v=e.componentType==="switchField"?t!=null?t:null:(M=(T=t!=null?t:e.initialValue)!=null?T:e.value)!=null?M:"";return{...e,initialValue:v}})),r=s.conditionalRules||[],i=e=>{var t;n&&(n.can_measure_blood_sugar=(t=e.can_measure_blood_sugar)!=null?t:null,n.blood_sugar=e.blood_sugar||"",n.blood_sugar_unit=e.blood_sugar_unit||n.blood_sugar_unit||"mg/dL")};return S(()=>{var e;return(e=o.value)==null?void 0:e.formValues},e=>{e&&i(e)},{deep:!0}),S(()=>o.value,e=>{e!=null&&e.getFormValues&&i(e.getFormValues())},{immediate:!0}),g({getFormRef:()=>o.value,validateForm:()=>{var e,t;return((t=(e=o.value)==null?void 0:e.validateForm)==null?void 0:t.call(e))||null},getFormValues:()=>{var e,t;return((t=(e=o.value)==null?void 0:e.getFormValues)==null?void 0:t.call(e))||{}}}),(e,t)=>(I(),E("div",pe,[N(O,{formData:l.value,conditionalRules:C(r),ref_key:"formRef",ref:o},null,8,["formData","conditionalRules"])]))}}),fe=A(_e,[["__scopeId","data-v-bfd75302"]]),ge={class:"neonatal-vitals-section"},de=b({__name:"HypoglycemiaSymptomaticSection",setup(f,{expose:g}){const o=y(null),s=h.find(e=>e.title==="Hypoglycemia-Symptomatic");if(!s)throw new Error("[HypoglycemiaSymptomaticSection] Missing configuration for Hypoglycemia-Symptomatic section");const n=w(R),l=F(()=>s.formData.map(e=>{var p,d;if(!e.name||!n)return{...e};const t=n[e.name],v=e.componentType==="switchField"?t!=null?t:null:(d=(p=t!=null?t:e.initialValue)!=null?p:e.value)!=null?d:"";return{...e,initialValue:v}})),r=s.conditionalRules||[],i=e=>{n&&Object.assign(n,e)};return S(()=>{var e;return(e=o.value)==null?void 0:e.formValues},e=>{e&&i(e)},{deep:!0}),S(()=>o.value,e=>{e!=null&&e.getFormValues&&i(e.getFormValues())},{immediate:!0}),g({getFormRef:()=>o.value,validateForm:()=>{var e,t;return((t=(e=o.value)==null?void 0:e.validateForm)==null?void 0:t.call(e))||null},getFormValues:()=>{var e,t;return((t=(e=o.value)==null?void 0:e.getFormValues)==null?void 0:t.call(e))||{}}}),(e,t)=>(I(),E("div",ge,[N(O,{formData:l.value,conditionalRules:C(r),ref_key:"formRef",ref:o},null,8,["formData","conditionalRules"])]))}}),ve=A(de,[["__scopeId","data-v-34b36eb5"]]),Se={class:"neonatal-vitals-section"},ye=b({__name:"HypoglycemiaAsymptomaticSection",setup(f,{expose:g}){const o=y(null),s=h.find(e=>e.title==="Hypoglycemia-Asymptomatic");if(!s)throw new Error("[HypoglycemiaAsymptomaticSection] Missing configuration for Hypoglycemia-Asymptomatic section");const n=w(R),l=F(()=>s.formData.map(e=>{var p,d;if(!e.name||!n)return{...e};const t=n[e.name],v=e.componentType==="switchField"?t!=null?t:null:(d=(p=t!=null?t:e.initialValue)!=null?p:e.value)!=null?d:"";return{...e,initialValue:v}})),r=s.conditionalRules||[],i=e=>{n&&Object.assign(n,e)};return S(()=>{var e;return(e=o.value)==null?void 0:e.formValues},e=>{e&&i(e)},{deep:!0}),S(()=>o.value,e=>{e!=null&&e.getFormValues&&i(e.getFormValues())},{immediate:!0}),g({getFormRef:()=>o.value,validateForm:()=>{var e,t;return((t=(e=o.value)==null?void 0:e.validateForm)==null?void 0:t.call(e))||null},getFormValues:()=>{var e,t;return((t=(e=o.value)==null?void 0:e.getFormValues)==null?void 0:t.call(e))||{}}}),(e,t)=>(I(),E("div",Se,[N(O,{formData:l.value,conditionalRules:C(r),ref_key:"formRef",ref:o},null,8,["formData","conditionalRules"])]))}}),he=A(ye,[["__scopeId","data-v-a5dcc574"]]),Ne={class:"neonatal-vitals-section"},Fe=b({__name:"VitalsSummarySection",setup(f,{expose:g}){const o=y(null),s=h.find(r=>r.title==="Vitals Summary");if(!s)throw new Error("[VitalsSummarySection] Missing configuration for Vitals Summary section");const n=w(R),l=F(()=>s.formData.map(r=>{if(r.componentType!=="summaryField"||!n)return{...r};const i=r.builder;return{...r,builder:e=>{if(typeof i!="function")return[];const t={...n||{},...e};return i(t)}}}));return g({getFormRef:()=>o.value,validateForm:()=>null,getFormValues:()=>({...n||{}})}),(r,i)=>(I(),E("div",Ne,[N(O,{formData:l.value,ref_key:"formRef",ref:o},null,8,["formData"])]))}}),Te=A(Fe,[["__scopeId","data-v-fbe7c51f"]]),Ve=b({name:"NeonatalVitals",components:{IonPage:X,IonContent:z,Toolbar:q,NeonatalStepper:te},setup(){const f=j(),g=Q(),{patient:o}=G(g),s=ae(),n=c=>{const u=Number(c);return Number.isFinite(u)?u:null},l=()=>{var u;const c=n((u=o.value)==null?void 0:u.patientID);s.initializeForPatient(c)};l(),S(()=>{var c;return(c=o.value)==null?void 0:c.patientID},()=>l());const r=s.formData;K(R,r),S(()=>s.formData,()=>s.saveSnapshot(),{deep:!0});const i=y(h.map((c,u)=>({title:c.title,number:u+1,checked:!1,class:u===0?"open_step common_step":"common_step",last_step:u===h.length-1?"last_step":""}))),e=c=>h.findIndex(u=>u.title===c),t=[{title:"Vital Signs",value:"1",component:ue,configIndex:e("Vital Signs")},{title:"Weight Measurements",value:"2",component:me,configIndex:e("Weight Measurements")},{title:"Blood Sugar",value:"3",component:fe,configIndex:e("Blood Sugar")},{title:"Hypoglycemia-Symptomatic",value:"4",component:ve,configIndex:e("Hypoglycemia-Symptomatic")},{title:"Hypoglycemia-Asymptomatic",value:"5",component:he,configIndex:e("Hypoglycemia-Asymptomatic")},{title:"Vitals Summary",value:"6",component:Te,configIndex:e("Vitals Summary")}],v="Neonatal Vital Signs",p=y("1"),d=c=>{c&&c.value&&i.value.forEach((u,_)=>{c.value===(_+1).toString()?(u.class="open_step common_step",u.checked=!1):_<parseInt(c.value)-1?(u.class="common_step color_white",u.checked=!0):(u.class="common_step",u.checked=!1)})},T=[{encounterType:D.NEONATAL_SIGNS_SYMPTOMS,route:"/neonatal/signs-symptoms",encounterNames:["NEONATAL SIGNS & SYMPTOMS"]},{encounterType:D.NEONATAL_REVIEW_OF_SYSTEMS,route:"/neonatal/review-of-systems",encounterNames:["NEONATAL REVIEW OF SYSTEMS"]},{encounterType:D.PHYSICAL_EXAMINATION_BABY,route:"/neonatal/general-examination",encounterNames:["PHYSICAL EXAMINATION BABY","NEONATAL GENERAL EXAMINATION"]},{encounterType:D.VITALS,route:"/neonatal/vitals",encounterNames:["VITALS","NEONATAL VITALS"]},{encounterType:D.NEONATAL_SYSTEMIC_EXAMINATION,route:"/neonatal/SystemicExamination",encounterNames:["NEONATAL SYSTEMIC EXAMINATION"]}];return T[T.length-1].route,{wizardData:i,stepperData:t,stepperTitle:v,currentOpenStepper:p,updateStatus:d,getSaveFunction:c=>c===t.length-1?async()=>{var u;if(!((u=o.value)!=null&&u.patientID)){U("No patient selected");return}try{const _=[];if(r.respiratory_rate&&_.push(await V.buildValueNumber("Respiratory rate",Number(r.respiratory_rate))),r.heart_rate&&_.push(await V.buildValueNumber("Pulse",Number(r.heart_rate))),r.oxygen_saturation&&_.push(await V.buildValueNumber("Oxygen saturation",Number(r.oxygen_saturation))),r.temperature&&_.push(await V.buildValueNumber("Temperature (C)",Number(r.temperature))),r.current_weight&&_.push(await V.buildValueNumber("Weight (kg)",Number(r.current_weight)/1e3)),r.head_circumference&&_.push(await V.buildValueNumber("Head circumference",Number(r.head_circumference))),r.blood_sugar){let a=Number(r.blood_sugar);(r.blood_sugar_unit||"mg/dL")==="mmol/L"&&(a=a*18.018),_.push(await V.buildValueNumber("Blood sugar",a))}await Z(o.value.patientID,D.VITALS,_),ee("Vital signs recorded successfully"),f.push({path:"/neonatal/checkpoint"})}catch(_){console.error("Failed to save vital signs",_),U("Failed to save vital signs")}}:null,neonatalVitalsSections:h}}});function be(f,g,o,s,n,l){const r=H("Toolbar"),i=H("NeonatalStepper"),e=H("ion-content"),t=H("ion-page");return I(),J(t,{class:"neonatal-vitals-page"},{default:P(()=>[N(r),N(e,{fullscreen:!0},{default:P(()=>[N(i,{wizardData:f.wizardData,StepperData:f.stepperData,stepperTitle:f.stepperTitle,openStepper:f.currentOpenStepper,backUrl:"/patientProfile",flowType:"vitals",getSaveFunction:f.getSaveFunction,sectionsConfig:f.neonatalVitalsSections,onUpdateStatus:f.updateStatus},null,8,["wizardData","StepperData","stepperTitle","openStepper","getSaveFunction","sectionsConfig","onUpdateStatus"])]),_:1})]),_:1})}const xe=A(Ve,[["render",be],["__scopeId","data-v-b43aa617"]]);export{xe as default};
