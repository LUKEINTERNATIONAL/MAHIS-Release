System.register(["./vendor-legacy-DWjfM6CY.js","./lodash-legacy-pOOc9Efu.js","../index-legacy-aIM58y9y.js"],function(e,t){"use strict";var o,l,r,a,n,i,c,s,p,u,f,E,m;return{setters:[e=>{o=e.r,l=e.ej,r=e.w,a=e.cx,n=e.cy,i=e.ek,c=e.el,s=e.em,p=e.en},e=>{u=e.l},e=>{f=e.t,E=e.w,m=e.F}],execute:function(){e({a:function(e,o,l="document",r=!1,i={}){o=g(o);const c=new a({...i}),s=c.splitTextToSize(l,180),p=s.length<=1?20:10*s.length;c.text(s,14,10);const u={startY:p,head:[e[e.length-1]],body:o};r&&(u.tableWidth="wrap",u.horizontalPageBreak=!0,u.horizontalPageBreakRepeat=0),n(c,u);const{activePlatformProfile:f}=d(),m=`${l}.pdf`;f.value.fileExport===t.WEB?c.save(m):f.value.fileExport===t.FILE_SYSTEM?S(m,c.output(),"blob"):E("Platform not supported")},e:S,t:function(e,o,l="document"){o=g(o);const r=e.concat(o).reduce((e,t)=>e+t.map(e=>`"${e}"`).join(",")+"\n",""),{activePlatformProfile:a}=d(),n=`${l}.csv`;if(a.value.fileExport===t.WEB){const e=new Blob([r],{type:"text/csv;charset=utf-8;"}),t=document.createElement("a");t.setAttribute("id","csv"),t.href=window.URL.createObjectURL(e),t.setAttribute("download",`${l}.csv`),document.body.appendChild(t),t.click(),t.remove()}else a.value.fileExport===t.FILE_SYSTEM?S(n,r,"text"):f("Platform not supported")},u:d});var t=e("F",(e=>(e.WEB="WEB",e.FILE_SYSTEM="FILE_SYSTEM",e))(t||{}));const v={Desktop:{profileName:"Desktop",fileExport:"WEB",scanner:"BARCODE_SCANNER",printer:"WEB",keyboard:"NATIVE_AND_HIS_KEYBOARD"},Mobile:{profileName:"Mobile",fileExport:"FILE_SYSTEM",scanner:"CAMERA_SCANNER",printer:"BLUETOOTH",keyboard:"HIS_KEYBOARD_ONLY"}};function d(){const e=o(v.Desktop),t=o({}),a=localStorage.getItem("active_profile"),n=localStorage.getItem("platformProfiles");return t.value="string"==typeof n?JSON.parse(n):v,"string"==typeof a&&`${a}`.match(/\{.*\}/)?e.value=JSON.parse(a):u.isEmpty(t.value)||(l("mobile")&&"Mobile"in t.value?e.value=t.value.Mobile:l("desktop")&&"Desktop"in t.value&&(e.value=t.value.Desktop)),r(()=>e.value,e=>{localStorage.setItem("active_profile",JSON.stringify(e))}),{activePlatformProfile:e,platformProfiles:t}}function S(e,t,o){let l=null;const r=`MaHIS/${e.replaceAll("/","_")}`;m(`Exporting file to "Documents/${r}"...`),l="blob"===o?i({path:r,blob:t,directory:c.Documents,recursive:!0}):s.writeFile({path:r,data:t,directory:c.Documents,encoding:p.UTF8,recursive:!0}),null!=l&&l.then(()=>m(`File exported to "Documents/${r}"!`,3e3)).catch(e=>E(e))}function g(e){return e.map(e=>e.map(e=>"string"==typeof e?e.replace(/&lt;/g,"<"):e))}}}});
