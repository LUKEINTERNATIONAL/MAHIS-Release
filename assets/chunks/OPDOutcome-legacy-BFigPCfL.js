System.register(["./vendor-legacy-CL4ddJgY.js","../index-legacy-ByfisDBi.js","./LevelOfConsciousness.vue_vue_type_script_setup_true_lang-legacy-Dw7hYLDU.js","./previousComplaints-legacy-AF4LMTss.js","./patient_complaints_service-legacy-7w_DctMF.js","./DashBox-legacy-Rp2VEjYB.js","./NextAppointment-legacy-DfCjDuk4.js","./drug_prescription_service-legacy-DaCsDPSo.js","./nonPharmaTherapyStore-legacy-xURK3FDy.js","./lodash-legacy-pOOc9Efu.js","./Outcome-legacy-CYCNiqbO.js"],function(e,a){"use strict";var t,n,o,l,i,r,s,d,c,u,m,p,v,h,f,b,g,y,_,x,w,k,C,A,D,O,P,T,S,N,E,F,V,I,Y,H,B,M,U,R,L,z,q,G,W,j,$,K,X,J,Q,Z,ee,ae,te,ne,oe,le,ie,re,se,de,ce,ue,me,pe,ve,he,fe,be,ge,ye,_e,xe,we,ke,Ce,Ae,De,Oe,Pe,Te,Se,Ne,Ee,Fe,Ve,Ie,Ye,He,Be,Me,Ue,Re,Le,ze,qe,Ge,We,je,$e,Ke,Xe,Je,Qe,Ze,ea,aa,ta,na,oa,la,ia,ra,sa,da,ca;return{setters:[e=>{t=e.d,n=e.b2,o=e.r,l=e.c,i=e.a,r=e.H,s=e.e,d=e.f,c=e.l,u=e.m,m=e.O,p=e.J,v=e.k,h=e.u,f=e.$,b=e.Q,g=e.F,y=e.w,_=e.ay,x=e.c1,w=e.P,k=e.aP,C=e.K,A=e.p,D=e.bz,O=e.ai,P=e.L,T=e.eA,S=e.eB,N=e.bq,E=e.bb,F=e.eC,V=e.eD,I=e.dc,Y=e.eE,H=e.eF,B=e.eG,M=e.dh,U=e.c0,R=e.aw,L=e.aA,z=e.c8,q=e.n,G=e.X,W=e.bF,j=e.am,$=e.al,K=e.N,X=e.by,J=e.a5,Q=e.br,Z=e.b3,ee=e.bt,ae=e.a3,te=e.c6,ne=e.bB,oe=e.ak,le=e.R,ie=e.aH,re=e.be,se=e.bC,de=e.dv,ce=e.ec,ue=e.a6},e=>{me=e.u,pe=e.n,ve=e.aF,he=e.aE,fe=e.aW,be=e.aG,ge=e.M,ye=e.Q,_e=e.t,xe=e.S,we=e.ai,ke=e.b,Ce=e.K,Ae=e._,De=e.ah,Oe=e.H,Pe=e.bd,Te=e.P,Se=e.a_,Ne=e.o,Ee=e.b6,Fe=e.N,Ve=e.B,Ie=e.aA,Ye=e.ar,He=e.av,Be=e.w,Me=e.a$,Ue=e.au},e=>{Re=e.e,Le=e.a,ze=e.m,qe=e.b,Ge=e.v,We=e.c,je=e._},e=>{$e=e.u,Ke=e.p},e=>{Xe=e.P},e=>{Je=e.D},e=>{Qe=e.A,Ze=e.D,ea=e.a},e=>{aa=e.a,ta=e.b},e=>{na=e.P},e=>{oa=e.l},e=>{la=e._,ia=e.D,ra=e.A,sa=e.R,da=e.a,ca=e.b}],execute:function(){var a=document.createElement("style");a.textContent=".vitals_title[data-v-482c7b52]{border-bottom:1px solid #b3b3b3;margin-bottom:50px}.input-with-icon[data-v-482c7b52]{position:relative}.input-icon[data-v-482c7b52]{position:absolute;left:10px;top:50%;transform:translateY(-50%);color:gray}ion-col[data-v-482c7b52]{padding-bottom:15px}h5[data-v-482c7b52]{margin-top:0;text-overflow:ellipsis;white-space:nowrap;overflow:hidden}.previousView[data-v-482c7b52]{margin-top:70px;margin-bottom:20px}.visit-section[data-v-b14ceaf9]{margin-bottom:1.2rem;padding:1rem;background:#fff;border-radius:12px;border:1px solid #e5e7eb}.section-header[data-v-b14ceaf9]{display:flex;align-items:center;gap:.6rem;margin-bottom:1rem}.section-icon[data-v-b14ceaf9]{font-size:20px;color:#c62828}h3[data-v-b14ceaf9]{font-size:1rem;font-weight:600;margin:0}.no-data[data-v-b14ceaf9]{text-align:center;padding:1.2rem;color:#6b7280}.no-data-icon[data-v-b14ceaf9]{font-size:2rem;color:#16a34a}.accordion-section[data-v-b14ceaf9]{border-top:1px solid #f0f0f0}.accordion-header[data-v-b14ceaf9]{display:flex;justify-content:space-between;padding:.8rem 0;cursor:pointer}.acc-left[data-v-b14ceaf9]{display:flex;align-items:center;gap:.6rem}.acc-icon[data-v-b14ceaf9]{font-size:1.1rem;color:#065f46}.acc-title[data-v-b14ceaf9]{font-weight:600}.acc-count[data-v-b14ceaf9]{font-size:.8rem;color:#6b7280}.chevron[data-v-b14ceaf9]{transition:.2s ease;color:#6b7280}.chevron.rotate[data-v-b14ceaf9]{transform:rotate(180deg)}.accordion-body[data-v-b14ceaf9]{padding:.5rem 0 .8rem .2rem}.allergy-item[data-v-b14ceaf9]{display:flex;gap:.6rem;padding:.4rem .6rem;font-size:.95rem;background:#f9fafb;border-radius:6px;margin-bottom:.3rem}.item-label[data-v-b14ceaf9]{font-weight:600;color:#059669;background:#d1fae5;padding:.2rem .6rem;border-radius:4px;font-size:.85rem;white-space:nowrap}.item-value[data-v-b14ceaf9]{color:#1f2937;font-weight:500;background:#fff;padding:.2rem .6rem;border-radius:4px;flex:1}.visit-container[data-v-382ca63a]{background:#fff;border-radius:16px;box-shadow:0 4px 12px rgba(0,0,0,.05);padding:24px;margin:16px;font-family:Segoe UI,Roboto,Helvetica Neue,sans-serif}.visit-header[data-v-382ca63a]{display:flex;justify-content:space-between;align-items:center;margin-bottom:24px;padding-bottom:16px;border-bottom:1px solid #f0f0f0}.visit-header h5[data-v-382ca63a]{margin:0;font-size:1.25rem;font-weight:600;color:#2d3748}.visit-sections[data-v-382ca63a]{display:flex;flex-direction:column;gap:20px}.visit-section[data-v-382ca63a]{background:#f8fafc;border-radius:12px;padding:16px;transition:all .2s ease}.visit-section[data-v-382ca63a]:hover{box-shadow:0 2px 8px rgba(0,0,0,.08);transform:translateY(-2px)}.section-header[data-v-382ca63a]{display:flex;align-items:center;gap:12px;margin-bottom:16px}.section-header h3[data-v-382ca63a]{margin:0;font-size:1.1rem;font-weight:500;color:#2d3748}.section-icon[data-v-382ca63a]{color:#4299e1;font-size:1.4rem}.section-content[data-v-382ca63a]{display:flex;flex-direction:column;gap:12px}.info-item[data-v-382ca63a]{display:flex;gap:8px}.info-label[data-v-382ca63a]{font-weight:500;color:#4a5568;min-width:120px}.info-value[data-v-382ca63a]{color:#2d3748}.highlight[data-v-382ca63a]{font-weight:600;color:#3182ce}.tags-container[data-v-382ca63a]{display:flex;flex-wrap:wrap;gap:8px}.complaint-tag[data-v-382ca63a],.medical-tag[data-v-382ca63a],.allergy-tag[data-v-382ca63a]{padding:6px 12px;border-radius:20px;font-size:.85rem;font-weight:500}.complaint-tag[data-v-382ca63a]{background:#ebf8ff;color:#3182ce}.medical-tag[data-v-382ca63a]{background:#f0fff4;color:#38a169}.allergy-tag[data-v-382ca63a]{background:#fff5f5;color:#e53e3e}.complaints-container[data-v-382ca63a]{display:flex;flex-direction:column;gap:12px}.complaint-item[data-v-382ca63a]{display:flex;justify-content:space-between;margin-right:70%;align-items:center;padding:8px 12px;background:#f8fafc;border-radius:8px;gap:10px}.complaint-name[data-v-382ca63a]{font-weight:500;color:#2d3748;white-space:nowrap}.complaint-duration[data-v-382ca63a]{color:#718096;font-size:.9em;white-space:nowrap}.exam-section[data-v-382ca63a]{display:flex;flex-direction:column;gap:16px}.exam-category[data-v-382ca63a]{background:#fff;border-radius:8px;padding:12px;box-shadow:0 1px 3px rgba(0,0,0,.05)}.exam-category-header[data-v-382ca63a]{display:flex;align-items:center;gap:8px;margin-bottom:8px}.exam-category-header h4[data-v-382ca63a]{margin:0;font-size:.95rem;font-weight:500;color:#4a5568}.exam-category-header ion-icon[data-v-382ca63a]{color:#718096;font-size:1.1rem}.exam-items[data-v-382ca63a]{display:flex;flex-wrap:wrap;gap:8px}.exam-item[data-v-382ca63a]{background:#f7fafc;padding:6px 10px;border-radius:6px;font-size:.85rem;color:#4a5568}.exam-item.normal[data-v-382ca63a]{background:#e6ffed;color:#38a169}@media(max-width:768px){.visit-container[data-v-382ca63a]{padding:16px;margin:8px}.visit-header[data-v-382ca63a]{flex-direction:column;align-items:flex-start;gap:8px}.tags-container[data-v-382ca63a],.complaints-container[data-v-382ca63a]{gap:6px}.complaint-tag[data-v-382ca63a],.medical-tag[data-v-382ca63a],.allergy-tag[data-v-382ca63a]{padding:4px 10px;font-size:.8rem}}._card[data-v-f7298259]{border-radius:5px;background-color:#fff;box-shadow:rgba(0,0,0,.2) 0 3px 1px -2px,rgba(0,0,0,.14) 0 2px 2px,rgba(0,0,0,.12) 0 1px 5px;margin-bottom:10px}ion-item[data-v-f7298259]::part(native){border:none}.previousView[data-v-f7298259]{margin-top:10px}.previousLabel[data-v-f7298259]{font-weight:700;font-size:1rem}.nav-buttons[data-v-f7298259]{display:flex;justify-content:flex-start;gap:10px;margin-top:10px}ion-accordion[data-v-f7298259]::part(header){padding:8px}.ion-padding[data-v-f7298259]{padding-top:0}.required-badge[data-v-f7298259]{color:#d32f2f;font-size:.75rem;font-weight:600;margin-left:8px;background-color:#ffebee;padding:2px 8px;border-radius:4px;text-transform:uppercase}#container[data-v-14c793af]{text-align:center;position:absolute;left:0;right:0;top:50%;transform:translateY(-50%)}#container strong[data-v-14c793af]{font-size:20px;line-height:26px}#container p[data-v-14c793af]{font-size:16px;line-height:22px;color:#8c8c8c;margin:0}#container a[data-v-14c793af]{text-decoration:none}ion-item.medicalAl[data-v-14c793af]{--background: #fff;--border-radius: 5px}ion-button.medicalAlBtn[data-v-14c793af]{--background: #fecdca;--color: #b42318;text-transform:none}.error-label[data-v-14c793af]{background:#fecdca;color:#b42318;text-transform:none;padding:2%;border-radius:10px;margin-top:7px;display:flex;text-align:center}ion-button.addMedicalTpBtn[data-v-14c793af]{--background: #ddeedd;--color: #006401;text-transform:none;font-weight:600;font-size:16px}ion-button.medicalAlAddBtn[data-v-14c793af]{font-size:large}ion-icon.icon-al[data-v-14c793af]{font-size:x-large;margin-bottom:-5px}.item-al[data-v-14c793af]{cursor:pointer;padding:5px;background-color:#ebebeb;margin-top:8px}.item-al[data-v-14c793af]:hover{background-color:rgba(85,81,81,.282);padding:5px;border-radius:3px}ion-popover.popover-al[data-v-14c793af]{--background: #fff}ion-content.content-al[data-v-14c793af]{--background: #fff}ion-list.list-al[data-v-14c793af]{--background: #fff;-ion-item-background:#fff}.checkLbltp[data-v-14c793af]{border-bottom:2px dotted var(--ion-color-medium);--inner-border-width: 0}.tpStndCls[data-v-14c793af]{font-size:16px;font-weight:600;line-height:24px}.action_buttons[data-v-14c793af]{color:var(--ion-color-primary);display:flex;align-items:center;float:right}.action_buttons[data-v-14c793af]:hover{cursor:pointer}.spcls[data-v-14c793af]{display:flex;align-items:center}.previousView[data-v-14c793af]{width:100%;border-radius:10px;margin-top:10px}.previousLabel[data-v-14c793af]{font-weight:600;color:#000}.previousLabelDate[data-v-14c793af]{font-weight:600;color:#000;margin:2%}.previousSecDrgs[data-v-14c793af]{margin:2%}.notes_p[data-v-14c793af]{margin:4%}.qaws[data-v-14c793af]{margin-top:-27px}.allergies-section[data-v-14c793af]{background:#fff;border-radius:8px;box-shadow:0 2px 4px rgba(0,0,0,.05);margin-bottom:10px}.section-title[data-v-14c793af]{display:flex;align-items:center;font-size:18px;font-weight:700;color:#1f2937;letter-spacing:-.01em;margin-bottom:16px}.allergies-container[data-v-14c793af]{min-height:48px}.allergies-grid[data-v-14c793af]{display:flex;flex-wrap:wrap;gap:8px}.allergy-chip[data-v-14c793af]{--background: #fee2e2;--color: #dc2626;font-size:14px;font-weight:500}.allergy-chip ion-icon[data-v-14c793af]{color:#dc2626}.no-allergies[data-v-14c793af]{display:flex;align-items:center;justify-content:center;height:48px;background:#f9fafb;border-radius:6px;font-size:15px;font-weight:500;color:#9c8011}.medication-section[data-v-14c793af]{background:#fff;border-radius:8px;padding:16px;margin:16px 0;box-shadow:0 1px 3px rgba(0,0,0,.1)}.section-header[data-v-14c793af]{margin-bottom:16px;--background: transparent}.section-icon[data-v-14c793af]{font-size:22px;margin-right:10px;color:var(--ion-color-primary)}.medication-content[data-v-14c793af]{padding:0 16px}.add-medication-form[data-v-14c793af]{background:#f9fafb;border-radius:8px;padding:20px;margin-top:16px}.form-group[data-v-14c793af]{margin-bottom:16px}.form-row[data-v-14c793af]{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:16px;margin-bottom:16px}.input-label[data-v-14c793af]{display:block;font-size:16px;font-weight:600;color:#374151;margin-bottom:10px}.error-message[data-v-14c793af]{color:#dc2626;font-size:15px;font-weight:600;margin-top:4px}.action-buttons[data-v-14c793af]{display:flex;gap:8px;justify-content:flex-end;margin-top:16px}.save-button[data-v-14c793af]{--background: var(--ion-color-primary);--color: #ffffff;font-size:16px;font-weight:600}.cancel-button[data-v-14c793af]{--background: #e5e7eb;--color: #374151;font-size:16px;font-weight:600}.add-new-button[data-v-14c793af]{width:100%;margin-top:16px;--background: var(--ion-color-primary-tint);--color: var(--ion-color-primary);font-size:16px;font-weight:600}.notes-section[data-v-14c793af]{background:#fff;border-radius:8px;padding:16px;margin:16px 0;box-shadow:0 1px 3px rgba(0,0,0,.1)}.notes-content[data-v-14c793af]{padding:0 16px}.intervention-component[data-v-14c793af],.notes-input-container[data-v-14c793af]{margin-bottom:16px}.notes-input-item[data-v-14c793af]{--background: #f9fafb;--border-radius: 8px;--padding-start: 12px;--padding-end: 12px;min-height:120px}.edit-icon[data-v-14c793af]{color:var(--ion-color-medium);font-size:20px;margin-right:8px}.notes-textarea[data-v-14c793af]{--padding-top: 12px;--padding-bottom: 12px;--placeholder-color: #9ca3af;--placeholder-opacity: 1;font-size:16px;font-weight:600;line-height:1.6}.previous-notes[data-v-14c793af]{background:#fff;border-radius:8px;overflow:hidden}.previous-notes-header[data-v-14c793af]{--background: #f9fafb;font-weight:600}.notes-timeline[data-v-14c793af]{padding:8px 0}.note-entry[data-v-14c793af]{padding:12px 16px;border-bottom:1px solid #e5e7eb}.note-entry[data-v-14c793af]:last-child{border-bottom:none}.note-date[data-v-14c793af]{font-size:14px;font-weight:600;color:#374151;margin-bottom:8px}.note-content[data-v-14c793af]{font-size:16px;font-weight:600;line-height:1.6;color:#4b5563;white-space:pre-wrap}.show-more-header[data-v-14c793af]{--background: transparent;font-size:16px;font-weight:600}[data-v-14c793af] ion-accordion{margin:0}[data-v-14c793af] ion-accordion-group{background:#fff}[data-v-14c793af] ion-accordion.accordion-expanding,[data-v-14c793af] ion-accordion.accordion-expanded{--background: #ffffff}[data-v-14c793af]{transition:font-size .2s ease,font-weight .2s ease}[data-v-14c793af] .multiselect__option{font-size:16px!important;font-weight:600!important;color:#000}.form-grid[data-v-827718e5]{display:grid;grid-template-columns:repeat(2,1fr);gap:1rem;padding:1rem 0}.form-field[data-v-827718e5]{display:flex;flex-direction:column;gap:.5rem}.form-field.full-width[data-v-827718e5]{grid-column:1 / -1}.checkbox-field[data-v-827718e5]{display:flex;align-items:center}.ion-lblCls[data-v-827718e5]{font-weight:600}.error-label[data-v-827718e5]{background:#fecdca;color:#b42318;text-transform:none;padding:.5rem;border-radius:8px;font-size:.875rem;display:block}.button-container[data-v-827718e5]{display:flex;gap:1rem;margin-top:1rem;padding-top:1rem;border-top:1px solid #e5e7eb}@media(max-width:768px){.form-grid[data-v-827718e5]{grid-template-columns:1fr}.form-field.full-width[data-v-827718e5]{grid-column:1}}.initTxt[data-v-5c28f6ca]{text-align:center}.spc_btwn[data-v-5c28f6ca]{margin-top:2%}.item-al[data-v-5c28f6ca]{cursor:pointer;padding:5px;background-color:#ebebeb;margin-top:8px}.item-al[data-v-5c28f6ca]:hover{background-color:rgba(85,81,81,.282);padding:5px;border-radius:3px}ion-popover.popover-al[data-v-5c28f6ca]{--background: #fff}ion-list.list-al[data-v-5c28f6ca]{--background: #fff;-ion-item-background:#fff}.saveContainer[data-v-5c28f6ca]{display:flex;align-items:flex-end}.action_buttons[data-v-5c28f6ca]{margin-top:5px}.error-label[data-v-5c28f6ca]{background:#fecdca;color:#b42318;text-transform:none;padding:6%;border-radius:10px;margin-top:7px;display:flex;text-align:center}\n/*$vite$:1*/",document.head.appendChild(a);const ua={key:0},ma={style:{"align-content":"center"}},pa={class:"ion-padding",slot:"content"},va=e("P",Ae(t({__name:"PresentingComplaints",setup(e,{expose:a}){const t=$e(),{presentingComplaints:y}=n(t),_=me(),{patient:x}=n(_),w=o(pe),k=o(!0),C=o(!1),A=o(!1),D=o(!0),O=o(!1),P=o([]),T=o([]),S=o(),N=o(null),E=o(null),F=(e,a)=>{var t;if(!e||!a)return null;const n=null===(t=x.value)||void 0===t||null===(t=t.personInformation)||void 0===t?void 0:t.birthdate;if(!n)return null;const o=Number(e);if(isNaN(o)||o<=0)return null;const l=new Date(n),i=new Date,r=i.getTime()-l.getTime();let s;switch(a){case"Hours":s=r/36e5;break;case"Days":s=r/864e5;break;case"Weeks":s=r/6048e5;break;case"Months":s=12*(i.getFullYear()-l.getFullYear())+(i.getMonth()-l.getMonth()),i.getDate()<l.getDate()&&s--;break;case"Years":s=i.getFullYear()-l.getFullYear(),(i.getMonth()<l.getMonth()||i.getMonth()===l.getMonth()&&i.getDate()<l.getDate())&&s--;break;default:return null}return o>s?"Duration cannot be before patient's birth date":null},V=l(()=>[{componentType:"multiSelectInputField",header:"Presenting Complaints",name:"PresentingComplaints",trackBy:"concept_id",icon:pe.search,hideSelected:!0,validation:e=>B(null==e?void 0:e.name,P.value)?"Presenting complaint already added":ve.required(e),options:T.value,grid:{s:"6"}},{componentType:"inputField",header:"Duration",name:"duration",icon:pe.time,validation:e=>{N.value=e;const a=ve.isNotEmptyandNumber(e);if(a)return a;const t=E.value;if(!t)return null;const n=F(e,t);return console.log("Birthdate validation result:",n),n},grid:{s:"6"},unitOptions:[{label:"Hours",value:"Hours"},{label:"Days",value:"Days"},{label:"Weeks",value:"Weeks"},{label:"Months",value:"Months"},{label:"Years",value:"Years"}],unitValidation:e=>(E.value=e,e&&""!==e?null:"Please select a unit.")},{componentType:"inputField",header:"Specify the presenting complaint(s)",name:"Other (specify)",icon:pe.editPen,validation:e=>B(e,P.value)?"Presenting complaint already added":ve.required(e),condition:e=>{var a;return"Other"===(null==e||null===(a=e.PresentingComplaints)||void 0===a?void 0:a.name)}},{componentType:"Alert",condition:e=>{var a;return null!=ve.required(null==e||null===(a=e.PresentingComplaints)||void 0===a?void 0:a.name)},backgroundColor:"lightyellow",textColor:"black",value:"Please search thoroughly for the complaint. If it is not listed, search and select the 'Other' option to specify the complaint.",name:"noMatchAlert"}]),{formRef:I}=he(),Y=e=>{var a;const t=e.duration+" "+e.duration_unit,n=e.PresentingComplaints,o="Other"===n.name?e["Other (specify)"]:n.name;P.value.push({actionBtn:!0,btn:["delete"],name:o,concept_id:n.concept_id,duration:n.duration,durationUnits:n.duration_unit,display:[o,t],data:[{concept_id:8578,value_coded:n.concept_id,obs_datetime:xe.getSessionDate(),child:[{concept_id:n.concept_id,value_text:t,obs_datetime:xe.getSessionDate()}]}]}),null===(a=I.value)||void 0===a||a.resetForm(),O.value=!0,H()},H=()=>{const e=["Cough","Convulsions"];C.value=P.value.some(a=>e.includes(a.name))},B=(e,a)=>a.some(a=>a.name===e),M=e=>{P.value=P.value.filter(a=>a.display[0]!==e.name)};return i(async()=>{await(async()=>{T.value=await Xe.getComplaintsList("Presenting complaint"),ye(y.value,"PresentingComplaints","multiSelectData",T.value)})()}),a({onSubmit:async()=>{const e=await we.getObsByEncounterIdAndDate(ke.PRESENTING_COMPLAINTS),a=P.value.flatMap(e=>e.data);return a.length<=0&&e.length<=0?(_e("Presenting complaints is required"),!1):(a.length<=0||(await we.addObsToEncounterPatient(a,ke.PRESENTING_COMPLAINTS),Ce("Presenting complaints saved successful"),P.value=[]),!0)}}),(e,a)=>{const t=r("ion-row"),n=r("ion-label"),o=r("ion-accordion"),l=r("ion-accordion-group");return d(),s(g,null,[c(Je,{status:k.value,content:"No presenting complaints added"},null,8,["status"]),O.value?(d(),s("span",ua,[c(fe,{listData:P.value,"onClicked:delete":M},null,8,["listData"])])):u("",!0),A.value?(d(),m(t,{key:1},{default:p(()=>[c(be,{formData:V.value,ref_key:"formRef",ref:I},null,8,["formData"]),v("div",ma,[c(ge,{fill:"clear",icon:w.value.plus,iconSlot:"icon-only","onClicked:btn":a[0]||(a[0]=e=>(async()=>{var e,a;const t=null===(e=I.value)||void 0===e?void 0:e.getFormValues();if(t.duration&&t.duration_unit){console.log("Validating duration against birthdate...");const e=F(t.duration,t.duration_unit);if(console.log("Validation result:",e),e)return void _e(e)}else console.log("Skipping birthdate validation - missing duration or unit");null==(null===(a=I.value)||void 0===a?void 0:a.validateForm())&&(Y(t),A.value=!1,D.value=!0)})()),name:"Save"},null,8,["icon"])])]),_:1})):u("",!0),D.value?(d(),m(t,{key:2,style:{"margin-top":"10px"}},{default:p(()=>[c(ge,{fill:"clear",icon:w.value.plus,iconSlot:"icon-only","onClicked:btn":a[1]||(a[1]=e=>(k.value=!1,D.value=!1,void(A.value=!0))),name:"Add new presenting complaints"},null,8,["icon"])]),_:1})):u("",!0),c(t,null,{default:p(()=>[c(l,{ref_key:"accordionGroup",ref:S,class:"previousView"},{default:p(()=>[c(o,{value:"first","toggle-icon-slot":"start",style:{"border-radius":"10px","background-color":"#fff"}},{default:p(()=>[c(h(f),{slot:"header",color:"light"},{default:p(()=>[c(n,{class:"previousLabel"},{default:p(()=>[...a[2]||(a[2]=[b("Previous presenting complaints",-1)])]),_:1})]),_:1}),v("div",pa,[c(Ke)])]),_:1})]),_:1},512)]),_:1})],64)}}}),[["__scopeId","data-v-482c7b52"]])),ha={class:"visit-section"},fa={class:"section-header"},ba={key:0,class:"no-data"},ga={key:1,class:"allergy-accordion"},ya=["onClick"],_a={class:"acc-left"},xa={class:"acc-title"},wa={class:"acc-count"},ka={key:0,class:"accordion-body"},Ca={class:"item-label"},Aa={class:"item-value"},Da=Ae(t({__name:"AllergiesListing",setup(e){const a=me(),{patient:t}=n(a),m=o({}),p=o([]),f={antiviral:/abacavir|lamivudine|lopinavir|ritonavir|zidovudine|efavirenz|tenofovir/i,antibiotic:/penicillin|amoxicillin|cephalexin|azithromycin|ciprofloxacin|doxycycline/i,analgesic:/aspirin|ibuprofen|acetaminophen|morphine|codeine|tramadol/i,cardiac:/metoprolol|lisinopril|amlodipine|atorvastatin|warfarin/i,activated:/activated\s+charcoal/i},b={985:{name:"Drug Allergy",severity:"danger"},7759:{name:"Location/Environmental",severity:"info"},7579:{name:"Medical Condition",severity:"warning"},drug:{name:"Drug Allergy",severity:"danger"},food:{name:"Food Allergy",severity:"danger"},environmental:{name:"Environmental",severity:"warning"},contact:{name:"Contact Allergy",severity:"warning"},unknown:{name:"Drug Allergy",severity:"danger"}},O=async()=>{try{var e;if(null===(e=t.value)||void 0===e||!e.patientID)return;const a=await we.getObsByEncounterIdAndDate(ke.MEDICAL_HISTORY),n=await De.getConceptID("Allergic"),o=a.filter(e=>e.concept_id===n);p.value=await Promise.all(o.map(async e=>{var a,t;const n=(null===(a=e.value_coded)||void 0===a?void 0:a.toString())||"unknown",o=await De.getConceptName(e.value_coded);let l=(null===(t=b[n])||void 0===t?void 0:t.name)||"Drug Allergy",i=e.value_text||o||"Unknown";return"985"===n&&e.value_text&&(l=(e=>{const a=e.toLowerCase();return f.antiviral.test(a)?"Antiviral Medication":f.antibiotic.test(a)?"Antibiotic":f.analgesic.test(a)?"Pain Medication":f.cardiac.test(a)?"Cardiac Medication":f.activated.test(a)?"Detoxification Agent":"Medication"})(e.value_text)),{name:l,displayValue:i,date:e.obs_datetime||e.encounter_datetime,conceptId:n}}));const l=Object.keys(T.value);l.length>0&&(m.value[l[0]]=!0)}catch(a){console.error("Error loading allergies:",a)}},P=l(()=>p.value.length>0),T=l(()=>{const e={};p.value.forEach(a=>{const t=a.date?S(a.date):"Unknown Date";e[t]||(e[t]=[]),e[t].push(a)});const a={};return Object.keys(e).sort((e,a)=>"Unknown Date"===e?1:"Unknown Date"===a?-1:new Date(a).getTime()-new Date(e).getTime()).forEach(t=>{a[t]=e[t]}),a}),S=e=>{if(!e)return"Unknown Date";try{return new Date(e).toISOString().split("T")[0]}catch(a){return"Unknown Date"}},N=e=>{if("Unknown Date"===e)return"Unknown Date";try{const a=new Date(e),t=Oe.sessionDate(),n=new Date(t),o=new Date(n);o.setDate(o.getDate()-1);const l=a.toDateString(),i=n.toDateString(),r=o.toDateString();return l===i?"Today":l===r?"Yesterday":a.toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})}catch(a){return e}};return y(()=>{var e;return null===(e=t.value)||void 0===e?void 0:e.patientID},async e=>{e&&await O()},{immediate:!0}),y(()=>{var e;return null===(e=t.value)||void 0===e?void 0:e.observations},async(e,a)=>{e!==a&&await O()},{deep:!0}),i(async()=>{await O()}),(e,a)=>{const t=r("ion-icon");return d(),s("div",ha,[v("div",fa,[c(t,{icon:h(_),class:"section-icon"},null,8,["icon"]),a[0]||(a[0]=v("h3",null,"Allergies",-1))]),P.value?(d(),s("div",ga,[(d(!0),s(g,null,w(T.value,(e,a)=>(d(),s("div",{key:a,class:"accordion-section"},[v("div",{class:A(["accordion-header",{open:m.value[a]}]),onClick:e=>(e=>{m.value[e]=!m.value[e]})(a)},[v("div",_a,[c(t,{icon:h(k),class:"acc-icon"},null,8,["icon"]),v("span",xa,C(N(a)),1),v("span",wa,"("+C(e.length)+")",1)]),c(t,{icon:h(D),class:A(["chevron",{rotate:m.value[a]}])},null,8,["icon","class"])],10,ya),m.value[a]?(d(),s("div",ka,[(d(!0),s(g,null,w(e,(e,a)=>(d(),s("div",{class:"allergy-item",key:a},[v("span",Ca,C(e.name)+":",1),v("span",Aa,C(e.displayValue),1)]))),128))])):u("",!0)]))),128))])):(d(),s("div",ba,[c(t,{icon:h(x),class:"no-data-icon"},null,8,["icon"]),a[1]||(a[1]=v("p",null,"No known allergies",-1))]))])}}}),[["__scopeId","data-v-b14ceaf9"]]),Oa=t({name:"VisitHistory",components:{AllergiesListing:Da,IonIcon:P},setup(){const e=Pe();return{selectedAllergiesList2:l(()=>e.selectedMedicalAllergiesList),alertCircleOutline:_,documentTextOutline:z,femaleOutline:L,medicalOutline:R,warningOutline:U,bodyOutline:T,eyeOutline:M,nutritionOutline:B,fitnessOutline:V,pulseOutline:E,earOutline:H,happyOutline:Y,manOutline:I,moveOutline:F,addOutline:N,scanOutline:S}},data:()=>({presentingComplaintsWithDuration:[],pastMedicalHistory:[],levelOfConsciousness:{eyeResponse:null,verbalResponse:null,motorResponse:null},pregnancy:{patientPregnant:null,breastFeeding:null},allergyList:[],physicalExamCategories:{Eyes:{icon:M,abnormalities:[],normal:!1},Mouth:{icon:B,abnormalities:[],normal:!1},Ears:{icon:H,abnormalities:[],normal:!1},Face:{icon:Y,abnormalities:[],normal:!1},Neck:{icon:I,abnormalities:[],normal:!1},Chest:{icon:V,abnormalities:[],normal:!1},"Chest Movement":{icon:F,abnormalities:[],normal:!1},"Heart Sounds":{icon:E,abnormalities:[],normal:!1},"Breath Sounds":{icon:N,abnormalities:[],normal:!1},"Added Breath Sounds":{icon:N,abnormalities:[],normal:!1},"Abdominal Inspection":{icon:S,abnormalities:[],normal:!1},"Genital Examination":{icon:T,abnormalities:[],normal:!1}}}),computed:{...O(me,["patient"]),hasLevelOfConsciousness(){return this.levelOfConsciousness.eyeResponse||this.levelOfConsciousness.verbalResponse||this.levelOfConsciousness.motorResponse},hasPresentingComplaints(){var e;return(null===(e=this.presentingComplaintsWithDuration)||void 0===e?void 0:e.length)>0},hasPregnancyData(){return this.pregnancy.patientPregnant||this.pregnancy.breastFeeding},hasPastMedicalHistory(){var e;return(null===(e=this.uniquePastMedicalHistory)||void 0===e?void 0:e.length)>0},hasAllergies(){var e;return(null===(e=this.allergyList)||void 0===e?void 0:e.length)>0},hasPhysicalExam(){return Object.values(this.physicalExamCategories).some(e=>e.abnormalities.length>0||e.normal)},uniquePastMedicalHistory(){return[...new Set(this.pastMedicalHistory)]},uniquePresentingComplaints(){return[...new Set(this.presentingComplaintsWithDuration.map(e=>e.name))]},isMinor(){var e;return Oe.getAgeInYears(null===(e=this.patient)||void 0===e||null===(e=e.personInformation)||void 0===e?void 0:e.birthdate)<18},gcsScore(){var e,a,t;if(!this.hasLevelOfConsciousness)return null;const n=this.levelOfConsciousness.eyeResponse,o=this.levelOfConsciousness.motorResponse,l=this.levelOfConsciousness.verbalResponse,i=n&&null!==(e=(this.isMinor?Re:Le)[n])&&void 0!==e?e:0,r=o&&null!==(a=(this.isMinor?ze:qe)[o])&&void 0!==a?a:0,s=l&&null!==(t=(this.isMinor?Ge:We)[l])&&void 0!==t?t:0;return`(M ${r} V ${s} E ${i}) ${i+r+s}/${this.isMinor?5:15}`}},methods:{async updateData(){var e;null!==(e=this.patient)&&void 0!==e&&e.patientID&&(await this.loadPresentingComplaints(),await this.loadPastMedicalHistory(),await this.loadLevelOfConsciousness(),await this.loadPregnancyStatus(),await this.loadPhysicalExam(),await this.loadAllergies())},async loadPresentingComplaints(){try{const e=await we.getObsByEncounterIdAndDate(ke.PRESENTING_COMPLAINTS);this.presentingComplaintsWithDuration=[];const a=e.filter(e=>8578===e.concept_id);for(const t of a){const e=await De.getConceptName(t.value_coded);let a="Duration not specified";t.children&&Array.isArray(t.children)&&t.children.length>0?a=t.children[0].value_text||"Duration not specified":t.child&&Array.isArray(t.child)&&t.child.length>0&&(a=t.child[0].value_text||"Duration not specified"),this.presentingComplaintsWithDuration.push({name:e,duration:a})}console.log("Loaded complaints:",this.presentingComplaintsWithDuration)}catch(e){console.error("Error loading presenting complaints:",e)}},async loadPastMedicalHistory(){try{const e=(await we.getObsByEncounterIdAndDate(ke.PAST_MEDICAL_HISTORY)).filter(e=>"Chronic disease"===e.concept_name);this.pastMedicalHistory=await Promise.all(e.map(async e=>await De.getConceptName(e.value_coded)))}catch(e){console.error("Error loading past medical history:",e)}},async loadLevelOfConsciousness(){try{const e=await we.getObsByEncounterIdAndDate(ke.ASSESSMENT);if(e&&Array.isArray(e)){const a=e.find(e=>"Eye opening response"===e.concept_name);this.levelOfConsciousness.eyeResponse=null!=a&&a.value_coded?await De.getConceptName(a.value_coded):null;const t=e.find(e=>"Best verbal response"===e.concept_name);this.levelOfConsciousness.verbalResponse=null!=t&&t.value_coded?await De.getConceptName(t.value_coded):null;const n=e.find(e=>"Best motor response"===e.concept_name);this.levelOfConsciousness.motorResponse=null!=n&&n.value_coded?await De.getConceptName(n.value_coded):null}}catch(e){console.error("Error loading level of consciousness:",e)}},async loadPregnancyStatus(){try{const e=await we.getObsByEncounterIdAndDate(ke.PREGNANCY_STATUS);if(e&&Array.isArray(e)){const a=e.find(e=>"Patient pregnant"===e.concept_name);this.pregnancy.patientPregnant=null!=a&&a.value_coded?await De.getConceptName(a.value_coded):null;const t=e.find(e=>"Is patient breast feeding?"===e.concept_name);this.pregnancy.breastFeeding=null!=t&&t.value_coded?await De.getConceptName(t.value_coded):null}}catch(e){console.error("Error loading pregnancy status:",e)}},async loadAllergies(){try{const e=await we.getObsByEncounterIdAndDate(ke.MEDICAL_HISTORY),a=await De.getConceptID("Allergic"),t=e.filter(e=>e.concept_id===a);this.allergyList=await Promise.all(t.map(async e=>e.value_text||await De.getConceptName(e.value_coded)))}catch(e){console.error("Error loading allergies:",e)}},async loadPhysicalExam(){try{const e=await we.getObsByEncounterIdAndDate(ke.PHYSICAL_EXAMINATION);Object.values(this.physicalExamCategories).forEach(e=>{e.abnormalities=[],e.normal=!1});for(const a of e){if(!a.concept_name)continue;const e=a.concept_name,t=a.value_text;"Eyes normal"===e&&"Yes"===t?this.physicalExamCategories.Eyes.normal=!0:("Abnormality for eyes"===e&&t||"Other eye abnormality notes"===e&&t)&&this.physicalExamCategories.Eyes.abnormalities.push(t),"Mouth normal"===e&&"Yes"===t?this.physicalExamCategories.Mouth.normal=!0:("Abnormality for  mouth"===e&&t||"Other mouth abnormality notes"===e&&t)&&this.physicalExamCategories.Mouth.abnormalities.push(t),"Ears normal"===e&&"Yes"===t?this.physicalExamCategories.Ears.normal=!0:("Abnormality for ears"===e&&t||"Other ears abnormality notes"===e&&t)&&this.physicalExamCategories.Ears.abnormalities.push(t),"Face normal"===e&&"Yes"===t?this.physicalExamCategories.Face.normal=!0:("Abnormality for face"===e&&t||"Other face abnormality notes"===e&&t)&&this.physicalExamCategories.Face.abnormalities.push(t),"Neck normal"===e&&"Yes"===t?this.physicalExamCategories.Neck.normal=!0:("Abnormality for neck"===e&&t||"Other neck abnormality notes"===e&&t)&&this.physicalExamCategories.Neck.abnormalities.push(t),"Chest inspection normal"===e&&"Yes"===t?this.physicalExamCategories.Chest.normal=!0:("Abnormality for  chest inspection"===e&&t||"Other chest abnormality notes"===e&&t)&&this.physicalExamCategories.Chest.abnormalities.push(t),"Chest movements"===e&&t&&this.physicalExamCategories["Chest Movement"].abnormalities.push(t),"Heart sounds normal"===e&&"Yes"===t?this.physicalExamCategories["Heart Sounds"].normal=!0:"Heart sounds abnormality"===e&&t&&this.physicalExamCategories["Heart Sounds"].abnormalities.push(t),"Breath sounds normal"===e&&"Yes"===t?this.physicalExamCategories["Breath Sounds"].normal=!0:"Breath sounds abnormality"===e&&t&&this.physicalExamCategories["Breath Sounds"].abnormalities.push(t),"Abnormalities when added"===e&&t&&this.physicalExamCategories["Added Breath Sounds"].abnormalities.push(t),"Abdominal inspection normal"===e&&"Yes"===t?this.physicalExamCategories["Abdominal Inspection"].normal=!0:("Abdominal inspection abnormality"===e&&t||"Other abdominal abnormality notes"===e&&t||"Abdominal auscultation abnormality"===e&&t||"Bowel sounds abnormality"===e&&t||"Abdominal palpation abnormality"===e&&t)&&this.physicalExamCategories["Abdominal Inspection"].abnormalities.push(t),"Genital examination normal"===e&&"Yes"===t?this.physicalExamCategories["Genital Examination"].normal=!0:("Genital examination abnormality"===e&&t||"Urethral meatus abnormalities"===e&&t||"Vulva inspection abnormalities"===e&&t||"Other genital abnormality notes"===e&&t)&&this.physicalExamCategories["Genital Examination"].abnormalities.push(t)}}catch(e){console.error("Error loading physicalExam:",e)}}},watch:{patient:{async handler(){await this.updateData()},deep:!0}},async mounted(){await this.updateData()}}),Pa={class:"visit-container"},Ta={class:"visit-sections"},Sa={key:0,class:"visit-section"},Na={class:"section-header"},Ea={class:"section-content"},Fa={key:0,class:"info-item"},Va={class:"info-value"},Ia={key:1,class:"info-item"},Ya={class:"info-value"},Ha={key:2,class:"info-item"},Ba={class:"info-value"},Ma={key:3,class:"info-item"},Ua={class:"info-value highlight"},Ra={key:1,class:"visit-section"},La={class:"section-header"},za={class:"complaints-container"},qa={class:"complaint-name"},Ga={class:"complaint-duration"},Wa={key:2,class:"visit-section"},ja={class:"section-header"},$a={class:"section-content"},Ka={key:0,class:"info-item"},Xa={class:"info-value highlight"},Ja={key:1,class:"info-item"},Qa={class:"info-value highlight"},Za={key:3,class:"visit-section"},et={class:"section-header"},at={class:"tags-container"},tt={key:4,class:"visit-section"},nt={class:"section-header"},ot={class:"tags-container"},lt={key:5,class:"visit-section"},it={class:"section-header"},rt={class:"exam-section"},st={key:0,class:"exam-category"},dt={class:"exam-category-header"},ct={class:"exam-items"},ut={key:1,class:"exam-item normal"},mt=Ae(Oa,[["render",function(e,a,t,n,o,l){const i=r("ion-icon");return d(),s("div",Pa,[a[12]||(a[12]=v("div",{class:"visit-header"},[v("h5",null,"Patient's Clinical Assessment Summary")],-1)),v("div",Ta,[e.hasLevelOfConsciousness?(d(),s("div",Sa,[v("div",Na,[c(i,{icon:e.alertCircleOutline,class:"section-icon"},null,8,["icon"]),a[0]||(a[0]=v("h3",null,"Level of Consciousness",-1))]),v("div",Ea,[e.levelOfConsciousness.eyeResponse?(d(),s("div",Fa,[a[1]||(a[1]=v("span",{class:"info-label"},"Eye Response:",-1)),v("span",Va,C(e.levelOfConsciousness.eyeResponse),1)])):u("",!0),e.levelOfConsciousness.verbalResponse?(d(),s("div",Ia,[a[2]||(a[2]=v("span",{class:"info-label"},"Verbal Response:",-1)),v("span",Ya,C(e.levelOfConsciousness.verbalResponse),1)])):u("",!0),e.levelOfConsciousness.motorResponse?(d(),s("div",Ha,[a[3]||(a[3]=v("span",{class:"info-label"},"Motor Response:",-1)),v("span",Ba,C(e.levelOfConsciousness.motorResponse),1)])):u("",!0),e.gcsScore?(d(),s("div",Ma,[a[4]||(a[4]=v("span",{class:"info-label"},"Score:",-1)),v("span",Ua,C(e.gcsScore),1)])):u("",!0)])])):u("",!0),e.hasPresentingComplaints?(d(),s("div",Ra,[v("div",La,[c(i,{icon:e.documentTextOutline,class:"section-icon"},null,8,["icon"]),a[5]||(a[5]=v("h3",null,"Presenting Complaints",-1))]),v("div",za,[(d(!0),s(g,null,w(e.presentingComplaintsWithDuration,(e,a)=>(d(),s("div",{class:"complaint-item",key:a},[v("div",qa,C(e.name),1),v("div",Ga,C(e.duration),1)]))),128))])])):u("",!0),e.hasPregnancyData?(d(),s("div",Wa,[v("div",ja,[c(i,{icon:e.femaleOutline,class:"section-icon"},null,8,["icon"]),a[6]||(a[6]=v("h3",null,"Pregnancy Status",-1))]),v("div",$a,[e.pregnancy.patientPregnant?(d(),s("div",Ka,[a[7]||(a[7]=v("span",{class:"info-label"},"Pregnant:",-1)),v("span",Xa,C(e.pregnancy.patientPregnant),1)])):u("",!0),e.pregnancy.breastFeeding?(d(),s("div",Ja,[a[8]||(a[8]=v("span",{class:"info-label"},"Breastfeeding:",-1)),v("span",Qa,C(e.pregnancy.breastFeeding),1)])):u("",!0)])])):u("",!0),e.hasPastMedicalHistory?(d(),s("div",Za,[v("div",et,[c(i,{icon:e.medicalOutline,class:"section-icon"},null,8,["icon"]),a[9]||(a[9]=v("h3",null,"Medical History",-1))]),v("div",at,[(d(!0),s(g,null,w(e.uniquePastMedicalHistory,(e,a)=>(d(),s("div",{class:"medical-tag",key:a},C(e),1))),128))])])):u("",!0),e.hasAllergies?(d(),s("div",tt,[v("div",nt,[c(i,{icon:e.warningOutline,class:"section-icon"},null,8,["icon"]),a[10]||(a[10]=v("h3",null,"Allergies",-1))]),v("div",ot,[(d(!0),s(g,null,w(e.allergyList,(e,a)=>(d(),s("div",{class:"allergy-tag",key:a},C(e),1))),128))])])):u("",!0),e.hasPhysicalExam?(d(),s("div",lt,[v("div",it,[c(i,{icon:e.bodyOutline,class:"section-icon"},null,8,["icon"]),a[11]||(a[11]=v("h3",null,"Physical Examination",-1))]),v("div",rt,[(d(!0),s(g,null,w(e.physicalExamCategories,(e,a)=>(d(),s(g,{key:a},[e.abnormalities.length>0||e.normal?(d(),s("div",st,[v("div",dt,[c(i,{icon:e.icon},null,8,["icon"]),v("h4",null,C(a),1)]),v("div",ct,[e.abnormalities.length>0?(d(!0),s(g,{key:0},w(e.abnormalities,(e,a)=>(d(),s("div",{class:"exam-item abnormal",key:a},C(e),1))),128)):e.normal?(d(),s("div",ut,"Normal examination")):u("",!0)])])):u("",!0)],64))),128))])])):u("",!0)])])}],["__scopeId","data-v-382ca63a"]]),pt={class:"modal_wrapper"},vt=e("_",t({__name:"PregnancyBreastfeeding",setup(e,{expose:a}){const t=o(null),n=o(0),i=l(()=>[{componentType:"radioButtonField",header:"Are you pregnant?",name:"Patient pregnant",options:[{value:"Yes",label:"Yes"},{value:"No",label:"No"}],grid:{s:"12"}},{grid:{s:"12"},componentType:"Dashes"},{componentType:"radioButtonField",header:"Breastfeeding?",name:"Is patient breast feeding?",options:[{value:"Yes",label:"Yes"},{value:"No",label:"No"}],grid:{s:"12"}}]);return a({validateForm:()=>{var e;return null===(e=t.value)||void 0===e?void 0:e.validateForm()},onSubmit:async()=>{if(!t.value)return!1;const e=t.value.validateForm();if(e)return console.log("Validation errors:",e),_e("Please fix validation errors before submitting"),!1;const a=t.value.getFormValues();console.log("Form data:",a);const o=await(async e=>{const a=[];for(const[n,o]of Object.entries(e))if(o&&!1!==o&&""!==o&&"string"==typeof o)try{const e=await De.getConceptID(o,!0);e?a.push(await we.buildValueCoded(n,e)):a.push(await we.buildValueText(n,o))}catch(t){a.push(await we.buildValueText(n,o))}return a})(a);return 0===o.length?(_e("No pregnancy status data to save"),!1):(await we.addObsToEncounterPatient(o,ke.PREGNANCY_STATUS),n.value++,await q(),Ce("Pregnancy status saved successfully"),!0)},resetForm:()=>{n.value++}}),(e,a)=>(d(),s("div",pt,[(d(),m(be,{formData:i.value,ref_key:"formRef",ref:t,key:n.value},null,8,["formData"]))]))}})),ht=t({__name:"PastMedicalHistory",setup(e,{expose:a}){const t=(()=>{const e=me(),{patient:a}=n(e);return{resetForm:()=>{},pastMedicalHistoryFormSection:l(()=>{var e,t;return[{componentType:"Heading",name:"Existing Chronic Health Conditions",grid:{s:"12"}},{componentType:"checkboxField",name:"TB",label:"TB",type:"single",grid:{s:"12"},disabled:e=>e.None,onChange:(e,a)=>{const t={};return e||(t["TB treatment"]="",t["TB drugs"]=null,t["TB drug start date"]=""),t}},{componentType:"radioButtonField",header:"On TB medication",name:"TB treatment",options:[{value:"Yes",label:"Yes"},{value:"No",label:"No"}],grid:{s:"12"},condition:e=>!0===e.TB,onChange:(e,a)=>{const t={};return"Yes"!==e&&(t["TB drugs"]=null,t["TB drug start date"]=""),t}},{componentType:"multiSelectInputField",header:"Select medication",name:"TB drugs",isMultiple:!1,trackBy:"name",grid:{s:"6"},icon:pe.search,options:[{name:"Auramine 'O' (C.I. 41000) 50g"},{name:"Bedaquilline 100mg"},{name:"Clofazimine 100mg"},{name:"Clofazimine 50mg"}],condition:e=>!0===e.TB&&"Yes"===e["TB treatment"]},{componentType:"dateInputField",header:"Start date",name:"TB drug start date",grid:{s:"6"},condition:e=>!0===e.TB&&"Yes"===e["TB treatment"],minDate:(null===(e=a.value)||void 0===e||null===(e=e.personInformation)||void 0===e?void 0:e.birthdate)||void 0,maxDate:(new Date).toISOString().split("T")[0]},{grid:{s:"12"},componentType:"Dashes"},{componentType:"checkboxField",name:"Chronic Obstructive Pulmonary Disease (COPD)",label:"Chronic Obstructive Pulmonary Disease (COPD)",type:"single",grid:{s:"12"},disabled:e=>e.None,onChange:()=>({})},{grid:{s:"12"},componentType:"Dashes"},{componentType:"checkboxField",name:"Asthma",label:"Asthma",type:"single",grid:{s:"12"},disabled:e=>e.None,onChange:()=>({})},{grid:{s:"12"},componentType:"Dashes"},{componentType:"checkboxField",name:"Epilepsy",label:"Epilepsy",type:"single",grid:{s:"12"},disabled:e=>e.None,onChange:()=>({})},{grid:{s:"12"},componentType:"Dashes"},{componentType:"checkboxField",name:"Previous stroke",label:"Previous stroke",type:"single",grid:{s:"12"},disabled:e=>e.None,onChange:()=>({})},{grid:{s:"12"},componentType:"Dashes"},{componentType:"checkboxField",name:"Peptic Ulcer Disease (PUD)",label:"Peptic Ulcer Disease (PUD)",type:"single",grid:{s:"12"},disabled:e=>e.None,onChange:()=>({})},{grid:{s:"12"},componentType:"Dashes"},{componentType:"checkboxField",name:"Mental disorder",label:"Mental disorder",type:"single",grid:{s:"12"},disabled:e=>e.None,onChange:()=>({})},{grid:{s:"12"},componentType:"Dashes"},{componentType:"checkboxField",name:"Bleeding disorders",label:"Bleeding disorders",type:"single",grid:{s:"12"},disabled:e=>e.None,onChange:()=>({})},{grid:{s:"12"},componentType:"Dashes"},{componentType:"checkboxField",name:"Hypertension",label:"Hypertension",type:"single",grid:{s:"12"},disabled:e=>e.None,onChange:(e,a)=>{const t={};return e||(t["Hypertension medication"]="",t["Current hypertension treatment regimen"]=null),t}},{componentType:"radioButtonField",header:"On medication",name:"Hypertension medication",options:[{value:"Yes",label:"Yes"},{value:"No",label:"No"}],grid:{s:"12"},condition:e=>!0===e.Hypertension,onChange:(e,a)=>{const t={};return"Yes"!==e&&(t["Current hypertension treatment regimen"]=null),t}},{componentType:"multiSelectInputField",header:"Select medication",name:"Current hypertension treatment regimen",isMultiple:!1,trackBy:"name",grid:{s:"12"},icon:pe.search,options:[{name:"Captopril 12.5mg"},{name:"Aspirin 75mg"},{name:"Hydrochlorothiazide 25mg"},{name:"Enalapril Meleate 5mg"},{name:"Enalapril Maleate 10mg"}],condition:e=>!0===e.Hypertension&&"Yes"===e["Hypertension medication"]},{grid:{s:"12"},componentType:"Dashes"},{componentType:"checkboxField",name:"HIV Positive",label:"HIV Positive",type:"single",grid:{s:"12"},disabled:e=>e.None,onChange:(e,a)=>{const t={};return e||(t["HIV status"]="",t["ARV start date"]=""),t}},{componentType:"radioButtonField",header:"Is the patient on ART",name:"HIV status",options:[{value:"Yes",label:"Yes"},{value:"No",label:"No"}],grid:{s:"12"},condition:e=>!0===e["HIV Positive"],onChange:(e,a)=>{const t={};return"Yes"!==e&&(t["ARV start date"]=""),t}},{componentType:"dateInputField",header:"Enter ARV start date",name:"ARV start date",grid:{s:"12"},condition:e=>!0===e["HIV Positive"]&&"Yes"===e["HIV status"],minDate:(null===(t=a.value)||void 0===t||null===(t=t.personInformation)||void 0===t?void 0:t.birthdate)||void 0,maxDate:(new Date).toISOString().split("T")[0]},{grid:{s:"12"},componentType:"Dashes"},{componentType:"checkboxField",name:"Diabetes Mellitus",label:"Diabetes Mellitus",type:"single",grid:{s:"12"},disabled:e=>e.None,onChange:(e,a)=>{const t={};return e||(t.Diabetes="",t["Controlled by"]=""),t}},{componentType:"radioButtonField",header:"Type",name:"Diabetes",options:[{value:"Type 1 diabetes",label:"Type I"},{value:"Type 2 diabetes",label:"Type II"},{value:"Unknown",label:"Unsure"}],grid:{s:"12"},condition:e=>!0===e["Diabetes Mellitus"]},{componentType:"radioButtonField",header:"Controlled by",name:"Controlled by",options:[{value:"Diet",label:"Diet"},{value:"Tablets",label:"Tablets"},{value:"Insulin",label:"Insulin"}],grid:{s:"12"},condition:e=>!0===e["Diabetes Mellitus"]},{grid:{s:"12"},componentType:"Dashes"},{componentType:"checkboxField",name:"None",label:"None",type:"single",grid:{s:"12"},onChange:(e,a)=>{const t={};return e&&(t.TB=!1,t["Chronic Obstructive Pulmonary Disease (COPD)"]=!1,t.Asthma=!1,t.Epilepsy=!1,t["Previous stroke"]=!1,t["Peptic Ulcer Disease (PUD)"]=!1,t["Mental disorder"]=!1,t["Bleeding disorders"]=!1,t.Hypertension=!1,t["HIV Positive"]=!1,t["Diabetes Mellitus"]=!1,t["TB treatment"]="",t["TB drugs"]=null,t["TB drug start date"]="",t["Hypertension medication"]="",t["Current hypertension treatment regimen"]=null,t["HIV status"]="",t["ARV start date"]="",t.Diabetes="",t["Controlled by"]=""),t}}]})}})(),r=o(null),s=o(0),c=me(),{patient:u}=n(c);y(()=>{var e;return null===(e=u.value)||void 0===e?void 0:e.patientID},async(e,a)=>{e&&e!==a&&(console.log("Patient changed, resetting form"),s.value++,await q(),await q())}),y(()=>{var e;return null===(e=r.value)||void 0===e||null===(e=e.getFormValues())||void 0===e?void 0:e.None},e=>{e&&r.value&&q(()=>{})});const p=async e=>{const a=[];for(const[n,o]of Object.entries(e))if(o&&!1!==o&&""!==o)if("boolean"==typeof o&&!0===o)try{const e=await De.getConceptID(n,!0);e&&a.push(await we.buildValueCoded("Chronic disease",e))}catch(t){a.push(await we.buildValueText("Chronic disease",n))}else"string"==typeof o?a.push(await we.buildValueText(n,o)):"object"==typeof o&&null!=o&&o.name?a.push(await we.buildValueText(n,o.name)):(o instanceof Date||/^\d{4}-\d{2}-\d{2}$/.test(o))&&a.push(await we.buildValueDate(n,o));return console.log("Processed past medical history:",a),a};i(async()=>{console.log("Past medical history form mounted"),await q(),await q()});const v=l(()=>t.pastMedicalHistoryFormSection.value);return a({validateForm:()=>{var e;return null===(e=r.value)||void 0===e?void 0:e.validateForm()},onSubmit:async()=>{if(!r.value)return console.error("Form reference is not available"),!1;const e=r.value.validateForm();if(e)return console.log("Validation errors:",e),_e("Please fix validation errors before submitting"),!1;const a=r.value.getFormValues();console.log("Form data:",a);const t=await p(a);return 0===t.length?(_e("No past medical history data to save"),!1):(await we.addObsToEncounterPatient(t,ke.PAST_MEDICAL_HISTORY),s.value++,await q(),await q(),Ce("Past medical history saved successfully"),!0)},resetForm:()=>{s.value++}}),(e,a)=>(d(),m(be,{formData:v.value,ref_key:"formRef",ref:r,key:s.value},null,8,["formData"]))}}),ft=e("a",t({__name:"PhysicalExamination",setup(e,{expose:a}){const t=(()=>{const e=me(),{patient:a}=n(e);return{resetForm:()=>{},physicalExaminationFormSection:l(()=>{var e;const t=null===(e=a.value)||void 0===e||null===(e=e.personInformation)||void 0===e?void 0:e.gender,n="M"===t,o="F"===t;return[{componentType:"radioButtonField",header:"Has physical examination been done?",name:"Physical examination",options:[{value:"Yes",label:"Yes"},{value:"No",label:"No"}],grid:{s:"12"},onChange:(e,a)=>{if("No"===e)return{"Eyes normal":"","Abnormality for eyes":[],"Other eye abnormality notes":"","Mouth normal":"","Abnormality for  mouth":[],"Other mouth abnormality notes":"","Ears normal":"","Abnormality for ears":[],"Other ears abnormality notes":"","Face normal":"","Abnormality for face":[],"Other face abnormality notes":"","Neck normal":"","Abnormality for neck":[],"Other neck abnormality notes":"","Chest inspection normal":"","Abnormality for  chest inspection":[],"Other chest abnormality notes":"","Chest movements":"","Heart sounds normal":"","Heart sounds abnormality":[],"Breath sounds normal":"","Breath sounds abnormality":[],"Abnormalities when added":[],"Abdominal inspection normal":"","Abdominal inspection abnormality":[],"Other abdominal abnormality notes":"","Abdominal auscultation normal":"","Abdominal auscultation abnormality":[],"Other abdominal auscultation abnormality notes":"","Bowel sounds abnormality":[],"Abdominal palpation normal":"","Abdominal palpation abnormality":[],"Other abdominal palpation abnormality notes":"","Genital examination normal":"","Genital examination abnormality":[],"Urethral meatus abnormalities":[],"Vulva inspection abnormalities":[],"Other genital abnormality notes":"","Extremities normal":"","Abnormality for extremities":[],"Other extremities abnormalities notes":""}}},{grid:{s:"12"},componentType:"Dashes"},{componentType:"radioButtonField",header:"Reason why physical examination not done?",name:"Reason why physical examination not done",options:[{value:"Condition does not necessitate assessment",label:"Condition does not necessitate assessment"},{value:"Patient refused to consent",label:"Patient refused to consent"}],grid:{s:"12"},condition:e=>"No"===e["Physical examination"]},{componentType:"radioButtonField",header:"Eyes normal?",name:"Eyes normal",options:[{value:"Yes",label:"Yes"},{value:"No",label:"No"}],grid:{s:"12"},condition:e=>"Yes"===e["Physical examination"],onChange:(e,a)=>{if("Yes"===e)return{"Abnormality for eyes":[],"Other eye abnormality notes":""}}},{componentType:"checkboxField",header:"What are the abnormalities on eyes?",name:"Abnormality for eyes",type:"multiple",options:[{value:"Pallor",label:"Pallor"},{value:"Jaundice",label:"Jaundice"},{value:"Ulcerations",label:"Ulcerations"},{value:"Other eye abnormality",label:"Other eye abnormality"}],grid:{s:"12"},condition:e=>"Yes"===e["Physical examination"]&&"No"===e["Eyes normal"],onChange:(e,a)=>{if(null==e||!e.includes("Other eye abnormality"))return{"Other eye abnormality notes":""}}},{componentType:"inputField",header:"Specify eye abnormality",name:"Other eye abnormality notes",icon:pe.editPen,grid:{s:"12"},condition:e=>"Yes"===e["Physical examination"]&&"No"===e["Eyes normal"]&&Array.isArray(e["Abnormality for eyes"])&&e["Abnormality for eyes"].includes("Other eye abnormality")},{grid:{s:"12"},componentType:"Dashes"},{componentType:"radioButtonField",header:"Mouth normal?",name:"Mouth normal",options:[{value:"Yes",label:"Yes"},{value:"No",label:"No"}],grid:{s:"12"},condition:e=>"Yes"===e["Physical examination"],onChange:(e,a)=>{if("Yes"===e)return{"Abnormality for  mouth":[],"Other mouth abnormality notes":""}}},{componentType:"checkboxField",header:"What are the abnormalities in the mouth?",name:"Abnormality for  mouth",type:"multiple",options:[{value:"Oral thrush",label:"Oral thrush"},{value:"Kaposi's Sarcoma lesions",label:"Kaposi's Sarcoma lesions"},{value:"Sores",label:"Sores"},{value:"Other mouth abnormality",label:"Other mouth abnormality"}],grid:{s:"12"},condition:e=>"Yes"===e["Physical examination"]&&"No"===e["Mouth normal"],onChange:(e,a)=>{if(null==e||!e.includes("Other mouth abnormality"))return{"Other mouth abnormality notes":""}}},{componentType:"inputField",header:"Specify mouth abnormality",name:"Other mouth abnormality notes",icon:pe.editPen,grid:{s:"12"},condition:e=>"Yes"===e["Physical examination"]&&"No"===e["Mouth normal"]&&Array.isArray(e["Abnormality for  mouth"])&&e["Abnormality for  mouth"].includes("Other mouth abnormality")},{grid:{s:"12"},componentType:"Dashes"},{componentType:"radioButtonField",header:"Ears normal?",name:"Ears normal",options:[{value:"Yes",label:"Yes"},{value:"No",label:"No"}],grid:{s:"12"},condition:e=>"Yes"===e["Physical examination"],onChange:(e,a)=>{if("Yes"===e)return{"Abnormality for ears":[],"Other ears abnormality notes":""}}},{componentType:"checkboxField",header:"What are the abnormalities on ears?",name:"Abnormality for ears",type:"multiple",options:[{value:"Ear discharge",label:"Ear discharge"},{value:"Bleeding",label:"Bleeding"},{value:"Other ears abnormality",label:"Other ears abnormality"}],grid:{s:"12"},condition:e=>"Yes"===e["Physical examination"]&&"No"===e["Ears normal"],onChange:(e,a)=>{if(null==e||!e.includes("Other ears abnormality"))return{"Other ears abnormality notes":""}}},{componentType:"inputField",header:"Specify ears abnormality",name:"Other ears abnormality notes",icon:pe.editPen,grid:{s:"12"},condition:e=>"Yes"===e["Physical examination"]&&"No"===e["Ears normal"]&&Array.isArray(e["Abnormality for ears"])&&e["Abnormality for ears"].includes("Other ears abnormality")},{grid:{s:"12"},componentType:"Dashes"},{componentType:"radioButtonField",header:"Face normal?",name:"Face normal",options:[{value:"Yes",label:"Yes"},{value:"No",label:"No"}],grid:{s:"12"},condition:e=>"Yes"===e["Physical examination"],onChange:(e,a)=>{if("Yes"===e)return{"Abnormality for face":[],"Other face abnormality notes":""}}},{componentType:"checkboxField",header:"What are the abnormalities on face?",name:"Abnormality for face",type:"multiple",options:[{value:"Rash",label:"Rash"},{value:"Swelling",label:"Swelling"},{value:"Other face abnormality",label:"Other face abnormality"}],grid:{s:"12"},condition:e=>"Yes"===e["Physical examination"]&&"No"===e["Face normal"],onChange:(e,a)=>{if(null==e||!e.includes("Other face abnormality"))return{"Other face abnormality notes":""}}},{componentType:"inputField",header:"Specify face abnormality",name:"Other face abnormality notes",icon:pe.editPen,grid:{s:"12"},condition:e=>"Yes"===e["Physical examination"]&&"No"===e["Face normal"]&&Array.isArray(e["Abnormality for face"])&&e["Abnormality for face"].includes("Other face abnormality")},{grid:{s:"12"},componentType:"Dashes"},{componentType:"radioButtonField",header:"Neck normal?",name:"Neck normal",options:[{value:"Yes",label:"Yes"},{value:"No",label:"No"}],grid:{s:"12"},condition:e=>"Yes"===e["Physical examination"],onChange:(e,a)=>{if("Yes"===e)return{"Abnormality for neck":[],"Other neck abnormality notes":""}}},{componentType:"checkboxField",header:"What are the abnormalities on the neck?",name:"Abnormality for neck",type:"multiple",options:[{value:"Neck rash",label:"Neck rash"},{value:"Swelling",label:"Swelling"},{value:"Neck mass",label:"Neck mass"},{value:"Other neck abnormality",label:"Other neck abnormality"}],grid:{s:"12"},condition:e=>"Yes"===e["Physical examination"]&&"No"===e["Neck normal"],onChange:(e,a)=>{if(null==e||!e.includes("Other neck abnormality"))return{"Other neck abnormality notes":""}}},{componentType:"inputField",header:"Specify neck abnormality",name:"Other neck abnormality notes",icon:pe.editPen,grid:{s:"12"},condition:e=>"Yes"===e["Physical examination"]&&"No"===e["Neck normal"]&&Array.isArray(e["Abnormality for neck"])&&e["Abnormality for neck"].includes("Other neck abnormality")},{grid:{s:"12"},componentType:"Dashes"},{componentType:"radioButtonField",header:"Chest inspection normal?",name:"Chest inspection normal",options:[{value:"Yes",label:"Yes"},{value:"No",label:"No"}],grid:{s:"12"},condition:e=>"Yes"===e["Physical examination"],onChange:(e,a)=>{if("Yes"===e)return{"Abnormality for  chest inspection":[],"Other chest abnormality notes":""}}},{componentType:"checkboxField",header:"What are the abnormalities on the chest?",name:"Abnormality for  chest inspection",type:"multiple",options:[{value:"Chest rash",label:"Chest rash"},{value:"Chest burns",label:"Chest burns"},{value:"Chest bruises",label:"Chest bruises"},{value:"Chest wounds",label:"Chest wounds"},{value:"Other chest abnormality",label:"Other chest abnormality"}],grid:{s:"12"},condition:e=>"Yes"===e["Physical examination"]&&"No"===e["Chest inspection normal"],onChange:(e,a)=>{if(null==e||!e.includes("Other chest abnormality"))return{"Other chest abnormality notes":""}}},{componentType:"inputField",header:"Specify chest abnormality",name:"Other chest abnormality notes",icon:pe.editPen,grid:{s:"12"},condition:e=>"Yes"===e["Physical examination"]&&"No"===e["Chest inspection normal"]&&Array.isArray(e["Abnormality for  chest inspection"])&&e["Abnormality for  chest inspection"].includes("Other chest abnormality")},{grid:{s:"12"},componentType:"Dashes"},{componentType:"radioButtonField",header:"Chest movement?",name:"Chest movements",options:[{value:"Symmetrical",label:"Symmetrical"},{value:"Asymmetrical",label:"Asymmetrical"}],grid:{s:"12"},condition:e=>"Yes"===e["Physical examination"]},{grid:{s:"12"},componentType:"Dashes"},{componentType:"radioButtonField",header:"Heart sounds normal?",name:"Heart sounds normal",options:[{value:"Yes",label:"Yes"},{value:"No",label:"No"}],grid:{s:"12"},condition:e=>"Yes"===e["Physical examination"],onChange:(e,a)=>{if("Yes"===e)return{"Heart sounds abnormality":[]}}},{componentType:"checkboxField",header:"What are the abnormalities on the heart sounds?",name:"Heart sounds abnormality",type:"multiple",options:[{value:"Loud P2",label:"Loud P2"},{value:"Splitting P2",label:"Splitting P2"},{value:"Gallop rhythm",label:"Gallop rhythm"},{value:"Murmur",label:"Murmur"}],grid:{s:"12"},condition:e=>"Yes"===e["Physical examination"]&&"No"===e["Heart sounds normal"]},{grid:{s:"12"},componentType:"Dashes"},{componentType:"radioButtonField",header:"Breath sounds normal?",name:"Breath sounds normal",options:[{value:"Yes",label:"Yes"},{value:"No",label:"No"}],grid:{s:"12"},condition:e=>"Yes"===e["Physical examination"],onChange:(e,a)=>{if("Yes"===e)return{"Breath sounds abnormality":[],"Abnormalities when added":[]}}},{componentType:"checkboxField",header:"What are the abnormalities on the breath sounds?",name:"Breath sounds abnormality",type:"multiple",options:[{value:"Absent",label:"Absent"},{value:"Reduced",label:"Reduced"},{value:"Added",label:"Added"}],grid:{s:"12"},condition:e=>"Yes"===e["Physical examination"]&&"No"===e["Breath sounds normal"],onChange:(e,a)=>{if(null==e||!e.includes("Added"))return{"Abnormalities when added":[]}}},{componentType:"checkboxField",header:"What are the abnormalities on the breath sounds are Added?",name:"Abnormalities when added",type:"multiple",options:[{value:"Crackles",label:"Crackles"},{value:"Wheezes",label:"Wheezes"},{value:"Bronchial",label:"Bronchial"},{value:"Crepitations",label:"Crepitations"}],grid:{s:"12"},condition:e=>"Yes"===e["Physical examination"]&&"No"===e["Breath sounds normal"]&&Array.isArray(e["Breath sounds abnormality"])&&e["Breath sounds abnormality"].includes("Added")},{grid:{s:"12"},componentType:"Dashes"},{componentType:"radioButtonField",header:"Abdominal inspection normal?",name:"Abdominal inspection normal",options:[{value:"Yes",label:"Yes"},{value:"No",label:"No"}],grid:{s:"12"},condition:e=>"Yes"===e["Physical examination"],onChange:(e,a)=>{if("Yes"===e)return{"Abdominal inspection abnormality":[],"Other abdominal abnormality notes":""}}},{componentType:"checkboxField",header:"What are the abnormalities after Abdominal inspection?",name:"Abdominal inspection abnormality",type:"multiple",options:[{value:"Abdominal distension",label:"Abdominal distension"},{value:"Abdominal rash",label:"Abdominal rash"},{value:"Abdominal wounds",label:"Abdominal wounds"},{value:"Laceration",label:"Laceration"},{value:"Abdominal bruises",label:"Abdominal bruises"},{value:"Abdominal burns",label:"Abdominal burns"},{value:"Other abdominal abnormality",label:"Other abdominal abnormality"}],grid:{s:"12"},condition:e=>"Yes"===e["Physical examination"]&&"No"===e["Abdominal inspection normal"],onChange:(e,a)=>{if(null==e||!e.includes("Other abdominal abnormality"))return{"Other abdominal abnormality notes":""}}},{componentType:"inputField",header:"Specify abdominal abnormality",name:"Other abdominal abnormality notes",icon:pe.editPen,grid:{s:"12"},condition:e=>"Yes"===e["Physical examination"]&&"No"===e["Abdominal inspection normal"]&&Array.isArray(e["Abdominal inspection abnormality"])&&e["Abdominal inspection abnormality"].includes("Other abdominal abnormality")},{grid:{s:"12"},componentType:"Dashes"},{componentType:"radioButtonField",header:"Abdominal auscultation normal?",name:"Abdominal auscultation normal",options:[{value:"Yes",label:"Yes"},{value:"No",label:"No"}],grid:{s:"12"},condition:e=>"Yes"===e["Physical examination"],onChange:(e,a)=>{if("Yes"===e)return{"Abdominal auscultation abnormality":[],"Other abdominal auscultation abnormality notes":"","Bowel sounds abnormality":[]}}},{componentType:"checkboxField",header:"What are the abdominal auscultation abnormalities?",name:"Abdominal auscultation abnormality",type:"multiple",options:[{value:"Bruit",label:"Bruit"},{value:"Hyperactive",label:"Hyperactive"},{value:"Reduced bowel sounds",label:"Reduced bowel sounds"},{value:"Other",label:"Other"}],grid:{s:"12"},condition:e=>"Yes"===e["Physical examination"]&&"No"===e["Abdominal auscultation normal"],onChange:(e,a)=>{const t={};return null!=e&&e.includes("Reduced bowel sounds")||(t["Bowel sounds abnormality"]=[]),null!=e&&e.includes("Other")||(t["Other abdominal auscultation abnormality notes"]=""),t}},{componentType:"checkboxField",header:"What are the abnormalities on bowel sounds?",name:"Bowel sounds abnormality",type:"multiple",options:[{value:"Reduced bowel sounds",label:"Reduced bowel sounds"},{value:"Abdominal auscultation absent",label:"Abdominal auscultation absent"}],grid:{s:"12"},condition:e=>"Yes"===e["Physical examination"]&&"No"===e["Abdominal auscultation normal"]&&Array.isArray(e["Abdominal auscultation abnormality"])&&e["Abdominal auscultation abnormality"].includes("Reduced bowel sounds")},{componentType:"inputField",header:"Specify abdominal auscultation abnormality",name:"Other abdominal auscultation abnormality notes",icon:pe.editPen,grid:{s:"12"},condition:e=>"Yes"===e["Physical examination"]&&"No"===e["Abdominal auscultation normal"]&&Array.isArray(e["Abdominal auscultation abnormality"])&&e["Abdominal auscultation abnormality"].includes("Other")},{grid:{s:"12"},componentType:"Dashes"},{componentType:"radioButtonField",header:"Abdominal palpation normal?",name:"Abdominal palpation normal",options:[{value:"Yes",label:"Yes"},{value:"No",label:"No"}],grid:{s:"12"},condition:e=>"Yes"===e["Physical examination"],onChange:(e,a)=>{if("Yes"===e)return{"Abdominal palpation abnormality":[],"Other abdominal palpation abnormality notes":""}}},{componentType:"checkboxField",header:"What are the abdominal palpation abnormalities?",name:"Abdominal palpation abnormality",type:"multiple",options:[{value:"Tenderness",label:"Tenderness"},{value:"Splenomegaly",label:"Splenomegaly"},{value:"Kidney ballotable",label:"Kidney ballotable"},{value:"Other masses",label:"Other masses"}],grid:{s:"12"},condition:e=>"Yes"===e["Physical examination"]&&"No"===e["Abdominal palpation normal"],onChange:(e,a)=>{if(null==e||!e.includes("Other masses"))return{"Other abdominal palpation abnormality notes":""}}},{componentType:"inputField",header:"Specify abdominal palpation abnormality",name:"Other abdominal palpation abnormality notes",icon:pe.editPen,grid:{s:"12"},condition:e=>"Yes"===e["Physical examination"]&&"No"===e["Abdominal palpation normal"]&&Array.isArray(e["Abdominal palpation abnormality"])&&e["Abdominal palpation abnormality"].includes("Other masses")},{grid:{s:"12"},componentType:"Dashes"},{componentType:"radioButtonField",header:"Genital examination normal?",name:"Genital examination normal",options:[{value:"Yes",label:"Yes"},{value:"No",label:"No"}],grid:{s:"12"},condition:e=>"Yes"===e["Physical examination"],onChange:(e,a)=>{if("Yes"===e)return{"Genital examination abnormality":[],"Urethral meatus abnormalities":[],"Vulva inspection abnormalities":[],"Other genital abnormality notes":""}}},{componentType:"checkboxField",header:"What are the abnormalities after genital examination?",name:"Genital examination abnormality",type:"multiple",options:[{value:"Warts",label:"Warts"},{value:"Vesicles",label:"Vesicles"},{value:"Growths",label:"Growths"},{value:"Genital sores",label:"Genital sores"},{value:"Scrotal swelling",label:"Scrotal swelling",disabled:o},{value:"Tastes swelling",label:"Tastes swelling",disabled:o},{value:"Urethral meatus abnormal",label:"Urethral meatus abnormal",disabled:o},{value:"Vulva examination",label:"Vulva examination",disabled:n},{value:"Visible bleeding",label:"Visible bleeding",disabled:n},{value:"Other genital abnormalities",label:"Other genital abnormalities"}],grid:{s:"12"},condition:e=>"Yes"===e["Physical examination"]&&"No"===e["Genital examination normal"],onChange:(e,a)=>{const t={};return null!=e&&e.includes("Urethral meatus abnormal")||(t["Urethral meatus abnormalities"]=[]),null!=e&&e.includes("Vulva examination")||(t["Vulva inspection abnormalities"]=[]),null!=e&&e.includes("Other genital abnormalities")||(t["Other genital abnormality notes"]=""),t}},{componentType:"checkboxField",header:"What are the urethral meatus abnormalities for the patient?",name:"Urethral meatus abnormalities",type:"multiple",options:[{value:"Oedema",label:"Oedema"},{value:"Abnormal discharge",label:"Abnormal discharge"},{value:"Bleeding",label:"Bleeding"}],grid:{s:"12"},condition:e=>"Yes"===e["Physical examination"]&&"No"===e["Genital examination normal"]&&n&&Array.isArray(e["Genital examination abnormality"])&&e["Genital examination abnormality"].includes("Urethral meatus abnormal")},{componentType:"checkboxField",header:"What Vulva abnormalities does the patient have?",name:"Vulva inspection abnormalities",type:"multiple",options:[{value:"Oedematous cervix",label:"Oedematous cervix"},{value:"Abnormal vaginal discharge",label:"Abnormal vaginal discharge"}],grid:{s:"12"},condition:e=>"Yes"===e["Physical examination"]&&"No"===e["Genital examination normal"]&&o&&Array.isArray(e["Genital examination abnormality"])&&e["Genital examination abnormality"].includes("Vulva examination")},{componentType:"inputField",header:"Specify genital abnormality",name:"Other genital abnormality notes",icon:pe.editPen,grid:{s:"12"},condition:e=>"Yes"===e["Physical examination"]&&"No"===e["Genital examination normal"]&&Array.isArray(e["Genital examination abnormality"])&&e["Genital examination abnormality"].includes("Other genital abnormalities")},{grid:{s:"12"},componentType:"Dashes"},{componentType:"radioButtonField",header:"Extremities normal?",name:"Extremities normal",options:[{value:"Yes",label:"Yes"},{value:"No",label:"No"}],grid:{s:"12"},condition:e=>"Yes"===e["Physical examination"],onChange:(e,a)=>{if("Yes"===e)return{"Abnormality for extremities":[],"Other extremities abnormalities notes":""}}},{componentType:"checkboxField",header:"What are the abnormalities for extremities?",name:"Abnormality for extremities",type:"multiple",options:[{value:"Cold and clammy",label:"Cold and clammy"},{value:"Generalized oedema",label:"Generalized oedema"},{value:"Fracture",label:"Fracture"},{value:"Extremity burns",label:"Extremity burns"},{value:"Extremity rash",label:"Extremity rash"},{value:"Deformity",label:"Deformity"},{value:"Finger clubbing",label:"Finger clubbing"},{value:"Decreased Power",label:"Decreased Power"},{value:"Decreased Sensation",label:"Decreased Sensation"},{value:"Other extremities abnormality",label:"Other extremities abnormality"}],grid:{s:"12"},condition:e=>"Yes"===e["Physical examination"]&&"No"===e["Extremities normal"],onChange:(e,a)=>{if(null==e||!e.includes("Other extremities abnormality"))return{"Other extremities abnormalities notes":""}}},{componentType:"inputField",header:"Specify extremity abnormality",name:"Other extremities abnormalities notes",icon:pe.editPen,grid:{s:"12"},condition:e=>"Yes"===e["Physical examination"]&&"No"===e["Extremities normal"]&&Array.isArray(e["Abnormality for extremities"])&&e["Abnormality for extremities"].includes("Other extremities abnormality")}]})}})(),r=o(null),s=o(0),c=me(),{patient:u}=n(c);y(()=>{var e;return null===(e=u.value)||void 0===e?void 0:e.patientID},async(e,a)=>{e&&e!==a&&(s.value++,await q())});const p=async e=>{const a=[];for(const[t,n]of Object.entries(e))n&&!1!==n&&""!==n&&("boolean"==typeof n&&!0===n?a.push(await we.buildValueText("Physical examination finding",t)):"string"==typeof n&&a.push(await we.buildValueText(t,n)));return a};i(async()=>{await q()});const v=l(()=>t.physicalExaminationFormSection.value);return a({validateForm:()=>{var e;return null===(e=r.value)||void 0===e?void 0:e.validateForm()},onSubmit:async()=>{if(!r.value)return console.error("Form reference is not available"),!1;if(r.value.validateForm())return _e("Please fix validation errors before submitting"),!1;const e=r.value.getFormValues(),a=await p(e);return 0===a.length?(_e("No physical examination data to save"),!1):(await we.addObsToEncounterPatient(a,ke.PHYSICAL_EXAMINATION),s.value++,await q(),Ce("Physical examination saved successfully"),!0)},resetForm:()=>{s.value++}}),(e,a)=>(d(),m(be,{formData:v.value,ref_key:"formRef",ref:r,key:s.value},null,8,["formData"]))}})),bt={key:0},gt={class:"ion-padding",slot:"content"},yt={class:"nav-buttons"},_t={class:"ion-padding",slot:"content"},xt={class:"nav-buttons"},wt={class:"ion-padding",slot:"content"},kt={class:"nav-buttons"},Ct={class:"ion-padding",slot:"content"},At={class:"nav-buttons"},Dt={class:"ion-padding",slot:"content"},Ot={class:"nav-buttons"},Pt={class:"ion-padding",slot:"content"},Tt={class:"nav-buttons"},St=(e("C",Ae(t({__name:"ClinicalAssessment",setup(e,{expose:a}){const t=o("loc"),n=o(0),r=o(!1),_=o(!1),x=new Te,w=me(),k=()=>{n.value++},A=o(null),D=o(null),O=o(null),P=o(null),T=o(null),S=o(null),N=[{id:"loc",label:"Level of consciousness",show:!0},{id:"pc",label:"Presenting complaints",show:!0},{id:"pbs",label:"Pregnancy and breastfeeding status",show:()=>x.isChildBearing()},{id:"pmh",label:"Past medical history",show:!0},{id:"al",label:"Allergies",show:!0},{id:"pe",label:"Physical examination",show:!0}];async function E(){const e=xe.getSessionDate(),a=[ke.ASSESSMENT,ke.PRESENTING_COMPLAINTS,ke.PAST_MEDICAL_HISTORY,ke.PHYSICAL_EXAMINATION,ke.MEDICAL_HISTORY,ke.PREGNANCY_STATUS];let t=!1;for(const o of a)try{const a=await we.getObsByEncounterIdAndDate(o);if(a&&a.some(a=>!!a.obs_datetime&&Oe.toStandardHisFormat(a.obs_datetime)===Oe.toStandardHisFormat(e))){t=!0;break}}catch(n){console.error(`Error checking observations for encounter type ${o}:`,n)}r.value=t}i(E),y(()=>w.patient,E);const F=l(()=>r.value),V=l(()=>N.filter(e=>"function"==typeof e.show?e.show():e.show)),I=e=>{const a=N.find(a=>a.id===e);return!!a&&("function"==typeof a.show?a.show():a.show)},Y=e=>V.value.findIndex(a=>a.id===e),H=e=>{const a=Y(e);a>0&&(t.value=V.value[a-1].id)},B=e=>{const a=Y(e)+1;a<V.value.length?t.value=V.value[a].id:(t.value="",k())};return a({onSubmit:async()=>{const e=[{ref:A,name:"PresentingComplaints"},{ref:D,name:"LevelOfConsciousness"},{ref:O,name:"PastMedicalHistory"},{ref:T,name:"PregnancyBreastfeeding"},{ref:S,name:"PhysicalExamination"},{ref:P,name:"Allergies"}];for(const t of e)if(t.ref.value&&"function"==typeof t.ref.value.onSubmit)try{const e=await t.ref.value.onSubmit();if("PresentingComplaints"===t.name&&!1===e)return}catch(a){if(console.error(`Error calling ${t.name} onSubmit:`,a),"PresentingComplaints"===t.name)return}else console.log(`${t.name} component ref not available or no onSubmit method`)}}),(e,a)=>(d(),s(g,null,[F.value?(d(),s("div",bt,[c(h(f),{lines:"none"},{default:p(()=>[c(h(G),null,{default:p(()=>[...a[14]||(a[14]=[b("Switch between Capture Mode and Summary Mode",-1)])]),_:1}),c(h(W),{checked:_.value,onIonChange:a[0]||(a[0]=e=>_.value=e.detail.checked),slot:"end"},null,8,["checked"])]),_:1}),_.value?u("",!0):(d(),m(mt,{key:n.value}))])):u("",!0),!F.value||_.value?(d(),m(h(J),{key:1,style:{width:"100%"}},{default:p(()=>[c(h(j),{value:t.value,"onUpdate:value":a[13]||(a[13]=e=>t.value=e),ref:"accordionGroup",class:"previousView"},{default:p(()=>[I("loc")?(d(),m(h($),{key:0,value:"loc",class:"_card"},{default:p(()=>[c(h(f),{slot:"header",color:"light"},{default:p(()=>[c(h(G),{class:"previousLabel"},{default:p(()=>[...a[15]||(a[15]=[b("Level of consciousness",-1)])]),_:1})]),_:1}),v("div",gt,[c(je,{"is-active":"loc"===t.value,ref_key:"levelOfConsciousnessFormRef",ref:D,onDataSaved:k},null,8,["is-active"]),v("div",yt,[Y("loc")>0?(d(),m(h(K),{key:0,fill:"outline",onClick:a[1]||(a[1]=X(e=>H("loc"),["stop"]))},{default:p(()=>[...a[16]||(a[16]=[b(" Back ",-1)])]),_:1})):u("",!0),c(h(K),{fill:"outline",onClick:a[2]||(a[2]=X(e=>B("loc"),["stop"]))},{default:p(()=>[b(C(Y("loc")<V.value.length-1?"Next":"Finish"),1)]),_:1})])])]),_:1})):u("",!0),I("pc")?(d(),m(h($),{key:1,value:"pc",class:"_card"},{default:p(()=>[c(h(f),{slot:"header",color:"light"},{default:p(()=>[c(h(G),{class:"previousLabel"},{default:p(()=>[...a[17]||(a[17]=[b(" Presenting complaints - ",-1),v("span",{class:"required-badge"},"Required",-1)])]),_:1})]),_:1}),v("div",_t,[c(va,{"is-active":"pc"===t.value,onDataSaved:k,ref_key:"presentingComplaintsFormRef",ref:A},null,8,["is-active"]),v("div",xt,[Y("pc")>0?(d(),m(h(K),{key:0,fill:"outline",onClick:a[3]||(a[3]=X(e=>H("pc"),["stop"]))},{default:p(()=>[...a[18]||(a[18]=[b(" Back ",-1)])]),_:1})):u("",!0),c(h(K),{fill:"outline",onClick:a[4]||(a[4]=X(e=>B("pc"),["stop"]))},{default:p(()=>[b(C(Y("pc")<V.value.length-1?"Next":"Finish"),1)]),_:1})])])]),_:1})):u("",!0),I("pbs")?(d(),m(h($),{key:2,value:"pbs",class:"_card"},{default:p(()=>[c(h(f),{slot:"header",color:"light"},{default:p(()=>[c(h(G),{class:"previousLabel"},{default:p(()=>[...a[19]||(a[19]=[b("Pregnancy and breastfeeding status",-1)])]),_:1})]),_:1}),v("div",wt,[c(vt,{"is-active":"pbs"===t.value,ref_key:"pregnancyBreastfeedingFormRef",ref:T,onDataSaved:k},null,8,["is-active"]),v("div",kt,[Y("pbs")>0?(d(),m(h(K),{key:0,fill:"outline",onClick:a[5]||(a[5]=X(e=>H("pbs"),["stop"]))},{default:p(()=>[...a[20]||(a[20]=[b(" Back ",-1)])]),_:1})):u("",!0),c(h(K),{fill:"outline",onClick:a[6]||(a[6]=X(e=>B("pbs"),["stop"]))},{default:p(()=>[b(C(Y("pbs")<V.value.length-1?"Next":"Finish"),1)]),_:1})])])]),_:1})):u("",!0),I("pmh")?(d(),m(h($),{key:3,value:"pmh",class:"_card"},{default:p(()=>[c(h(f),{slot:"header",color:"light"},{default:p(()=>[c(h(G),{class:"previousLabel"},{default:p(()=>[...a[21]||(a[21]=[b("Past medical history",-1)])]),_:1})]),_:1}),v("div",Ct,[c(ht,{"is-active":"pmh"===t.value,ref_key:"pastMedicalHistoryFormRef",ref:O,onDataSaved:k},null,8,["is-active"]),v("div",At,[Y("pmh")>0?(d(),m(h(K),{key:0,fill:"outline",onClick:a[7]||(a[7]=X(e=>H("pmh"),["stop"]))},{default:p(()=>[...a[22]||(a[22]=[b(" Back ",-1)])]),_:1})):u("",!0),c(h(K),{fill:"outline",onClick:a[8]||(a[8]=X(e=>B("pmh"),["stop"]))},{default:p(()=>[b(C(Y("pmh")<V.value.length-1?"Next":"Finish"),1)]),_:1})])])]),_:1})):u("",!0),I("al")?(d(),m(h($),{key:4,value:"al",class:"_card"},{default:p(()=>[c(h(f),{slot:"header",color:"light"},{default:p(()=>[c(h(G),{class:"previousLabel"},{default:p(()=>[...a[23]||(a[23]=[b("Allergies",-1)])]),_:1})]),_:1}),v("div",Dt,[c(Qe,{"is-active":"al"===t.value,ref_key:"allergiesFormRef",ref:P,onDataSaved:k},null,8,["is-active"]),v("div",Ot,[Y("al")>0?(d(),m(h(K),{key:0,fill:"outline",onClick:a[9]||(a[9]=X(e=>H("al"),["stop"]))},{default:p(()=>[...a[24]||(a[24]=[b(" Back ",-1)])]),_:1})):u("",!0),c(h(K),{fill:"outline",onClick:a[10]||(a[10]=X(e=>B("al"),["stop"]))},{default:p(()=>[b(C(Y("al")<V.value.length-1?"Next":"Finish"),1)]),_:1})])])]),_:1})):u("",!0),I("pe")?(d(),m(h($),{key:5,value:"pe",class:"_card"},{default:p(()=>[c(h(f),{slot:"header",color:"light"},{default:p(()=>[c(h(G),{class:"previousLabel"},{default:p(()=>[...a[25]||(a[25]=[b("Physical examination",-1)])]),_:1})]),_:1}),v("div",Pt,[c(ft,{"is-active":"pe"===t.value,ref_key:"physicalExaminationFormRef",ref:S,onDataSaved:k},null,8,["is-active"]),v("div",Tt,[Y("pe")>0?(d(),m(h(K),{key:0,fill:"outline",onClick:a[11]||(a[11]=X(e=>H("pe"),["stop"]))},{default:p(()=>[...a[26]||(a[26]=[b(" Back ",-1)])]),_:1})):u("",!0),c(h(K),{fill:"outline",onClick:a[12]||(a[12]=X(e=>B("pe"),["stop"]))},{default:p(()=>[b(C(Y("pe")<V.value.length-1?"Next":"Finish"),1)]),_:1})])])]),_:1})):u("",!0)]),_:1},8,["value"])]),_:1})):u("",!0)],64))}}),[["__scopeId","data-v-f7298259"]])),{class:"allergies-section"}),Nt={class:"allergies-container"},Et={class:"medication-section"},Ft={class:"medication-content"},Vt={key:0,class:"add-medication-form"},It={class:"form-group"},Yt={class:"option-label"},Ht={key:0,class:"error-message"},Bt={class:"form-row"},Mt={class:"form-group"},Ut={key:0,class:"error-message"},Rt={class:"form-group"},Lt={key:0,class:"error-message"},zt={class:"form-group"},qt={key:0,class:"error-message"},Gt={class:"action-buttons"},Wt={class:"notes-section"},jt={class:"notes-content"},$t={class:"notes-input-container"},Kt={class:"ion-padding",slot:"content"},Xt={class:"notes-timeline"},Jt={key:0,class:"note-entry"},Qt={class:"note-date"},Zt={class:"note-content"},en={class:"ion-padding",slot:"content"},an={class:"note-date"},tn={class:"note-content"},nn=t({watch:{},name:"xxxComponent"}),on=t({...nn,setup(e){const a=pe,t=aa,n=o(!1),r=o(!1),_=o(!0),x=o(0),k=o(""),A=o(!1),D=o(),O=o(!1),T=o(""),S=o(""),E=o(""),F=o(""),V=o(""),I=o(""),Y=Se(),H=Pe(),B=l(()=>H.selectedMedicalAllergiesList),M=l(()=>Y.selectedMedicalDrugsList),U=l(()=>Y.partialOPDdrugList),L=l(()=>Y.nonPharmalogicalTherapyAndOtherNotes),z=["first","second","third"],q=o(),W=o(),K=o(),X=o(!1),J=o(!1),le=o("Show more notes"),ie=o(),re=o(),se=o(),de=l(()=>Y.editingDrugItem),ce=o("Select a route"),ue=o(!1),me=o("Select frequency"),ve=o(!1),he=o("Select drug"),fe=o(!1),be=o(),ye=o(),we=o(),ke=o([]),Ce=o([{concept_id:11797,name:"Buccal",concept_name_id:null,id:1769},{concept_id:11794,name:"Intradermal",concept_name_id:null,id:6284},{concept_id:11795,name:"Intramuscular (IM)",concept_name_id:null,id:6285},{concept_id:11799,name:"Intraosseous",concept_name_id:null,id:6286},{concept_id:11793,name:"Intravenous (IV)",concept_name_id:null,id:6295},{concept_id:3327,name:"Oral",concept_name_id:null,id:8686},{concept_id:11800,name:"Other method of prescription",concept_name_id:null,id:8920},{concept_id:11792,name:"Rectally",concept_name_id:null,id:10785},{concept_id:11798,name:"Subcutaneous",concept_name_id:null,id:12342},{concept_id:11796,name:"Sublingual",concept_name_id:null,id:12344},{concept_id:11792,name:"Rectally",concept_name_id:null,id:14078},{concept_id:11793,name:"Intravenous (IV)",concept_name_id:null,id:14079},{concept_id:11794,name:"Intradermal",concept_name_id:null,id:14080},{concept_id:11795,name:"Intramuscular (IM)",concept_name_id:null,id:14081},{concept_id:11796,name:"Sublingual",concept_name_id:null,id:14082},{concept_id:11797,name:"Buccal",concept_name_id:null,id:14083},{concept_id:11798,name:"Subcutaneous",concept_name_id:null,id:14084},{concept_id:11799,name:"Intraosseous",concept_name_id:null,id:14085},{concept_id:11800,name:"Other method of prescription",concept_name_id:null,id:14086}]),Ae=l(()=>ke.value.length?ke.value:Ce.value);async function De(){return await ta()}function Oe(){_.value=!_.value,n.value=!0,A.value=!1,O.value=!1}async function Te(){return Ue(E.value)?O.value=!1:(D.value="please enter a number",O.value=!0),O.value}async function Ve(){const e=await Te(),a=1==oa.isEmpty(ye.value)?(ve.value=!0,!1):0==oa.isEmpty(ye.value)?(ve.value=!1,!0):void 0,t=1==oa.isEmpty(we.value)?(fe.value=!0,!1):0==oa.isEmpty(we.value)?(fe.value=!1,!0):void 0,n=1==oa.isEmpty(be.value)?(ue.value=!0,!1):0==oa.isEmpty(be.value)?(ue.value=!1,!0):void 0;return!e&&1==a&&1==t&&1==n}async function Ie(){try{const e=()=>null!=se.value.dose_strength&&se.value.dose_strength?Math.trunc(se.value.dose_strength):1;if(null!==de.value){if(!(await Ve()))return void _e("Please enter correct data values",4e3);const a=Re(xe.getSessionDate(),parseInt(E.value));let t=!1;1==Ye(se.value)&&(t=!0);const n={drugName:T.value,dose:e(),frequency:ye.value.label,frequency_code:ye.value.code,duration:E.value,prescription:a,drug_id:I.value,units:V.value,route_concept_id:be.value.concept_id,route_name:be.value.name,highlightbackground:t},o=Se();console.log(o.setSelectedMedicalDrugsList([n])),o.editingDrugItem=null,_.value=!0}else{if(!(await Ve()))return void _e("Please enter correct data values",4e3);n.value=!1,r.value=!0,_.value=!0;const a=Re(xe.getSessionDate(),parseInt(E.value));let t=!1;1==Ye(se.value)&&(t=!0);const o={drugName:T.value,dose:e(),frequency:ye.value.label,frequency_code:ye.value.code,duration:E.value,prescription:a,drug_id:I.value,units:V.value,route_concept_id:be.value.concept_id,route_name:be.value.name,highlightbackground:t};Se().setSelectedMedicalDrugsList([o])}I.value="",T.value="",S.value="",ye.value=null,E.value="",F.value="",x.value++,we.value=null,be.value=null}catch(e){console.error("Error saving data:",e)}}function Ye(e){const a=[];return B.value.forEach(e=>{e.selected&&a.push(e.concept_id)}),1==function(e,a){try{return e.some(e=>a.includes(e.concept_id))}catch(t){return!1}}([e],a)&&(_e("Client is allergic to the selected medication",4e6),!0)}function He(e){const a=M.value[e],t=Se();t.removeDrugById(a.drug_id),t.editingDrugItem=a,I.value="",T.value="",S.value="",ye.value=null,E.value="",F.value="",we.value=null,be.value=null,I.value=a.drug_id,T.value=a.drugName,S.value=a.dose,ye.value={label:a.frequency,code:a.frequency_code},E.value=a.duration,F.value=a.prescription;const n=U.value.find(e=>e.name===a.drugName);n&&(we.value=n),be.value={concept_id:a.route_concept_id,name:a.route_name},_.value=!1,x.value++}function Be(e){M.value.splice(e,1),x.value++,_e("you have removed a drug from list",6e3)}function Me(e){!function(e){Se().setNonPharmalogicalTherapyAndOtherNotes(e)}(e.target.value)}function Ue(e){return/^[0-9]+$/.test(e)}function Re(e,a){const t=new Date(e);return t.setDate(t.getDate()+a),`${t.getFullYear()}-${String(t.getMonth()+1).padStart(2,"0")}-${String(t.getDate()).padStart(2,"0")}`}function Le(e){z.filter(a=>a!==e.detail.value);const a=e.detail.value;void 0!==a?"third"==a&&(le.value="Show less notes",J.value=!X.value):(le.value="Show more notes",J.value=!X.value)}function ze(e){"Enter"!==e.key&&"ArrowDown"!==e.key||(e.preventDefault(),Ie())}i(async()=>{const e=new na,{previousDrugPrescriptions:a,previousClinicalNotes:t,previousDrugAllergies:n}=await e.getPatientEncounters();q.value=a,W.value=Object.entries(t)[0];const[,...o]=Object.entries(t);K.value=o,ie.value=Object.entries(n)[0];const[,...l]=Object.entries(n);re.value=l,await async function(e=5,a=1e3){let t=0;for(;t<e&&(ke.value=await De(),!(ke.value.length>0));)t++,await new Promise(e=>setTimeout(e,a));0===ke.value.length&&console.warn("Failed to fetch route list after maximum retries.")}()}),y(()=>S.value,async e=>{!async function(){Ue(S.value)?A.value=!1:(k.value="please enter a number",A.value=!0),A.value}()}),y(()=>E.value,async e=>{Te()});const qe=l(()=>[{showAddItemButton:!0,addItemButton:!0,name:null!==de.value?"Update":"ADD",fn:Ie},{showAddItemButton:!0,addItemButton:!0,name:"CANCEL",fn:Ge}]),Ge=async()=>{Ne(Ee,{class:"otherVitalsModal"},!0,{message:"Are you sure you want to cancel?"},{cancel:e=>{},confirm:async e=>{1==e.detail&&function(){if(null!==de.value){I.value="",T.value="",S.value="",ye.value=null,E.value="",F.value="",we.value=null,be.value=null;const e=Se();e.setSelectedMedicalDrugsList([de.value]),e.editingDrugItem=null}_.value=!0,x.value++}()}})};return(e,n)=>(d(),m(h(oe),null,{default:p(()=>[v("div",St,[v("div",Nt,[c(Da)])]),v("div",Et,[c(h(f),{lines:"none",class:"section-header"},{default:p(()=>[c(h(P),{icon:h(R),class:"section-icon"},null,8,["icon"]),c(h(G),{class:"section-title",style:{"margin-top":"12px"}},{default:p(()=>[...n[9]||(n[9]=[b("Medication",-1)])]),_:1})]),_:1}),v("div",Ft,[(d(),m(Ze,{_selectedMedicalDrugsList:M.value,onEditItem:He,onRemoveItem:Be,key:x.value,class:"medication-list"},null,8,["_selectedMedicalDrugsList"])),_.value?u("",!0):(d(),s("div",Vt,[v("div",It,[n[10]||(n[10]=v("label",{class:"input-label"},"Medication",-1)),c(h(Q),{modelValue:we.value,"onUpdate:modelValue":[n[0]||(n[0]=e=>we.value=e),n[1]||(n[1]=e=>{var a;(a=e)&&(T.value=a.name,I.value=a.drug_id,V.value=a.units,se.value=a,Ye(a))})],options:U.value,searchable:!0,"close-on-select":!0,"show-labels":!1,placeholder:"Select medication",label:"name","track-by":"drug_id",onSearchChange:n[2]||(n[2]=e=>async function(e){const a=e,t=await Fe.getOfflineOPDDrugs({name:a,page:1,page_size:10});t.map(e=>({label:e.name,value:e.name,other:e})),Y.setPartialOPDdrugList(t)}(e))},{option:p(e=>[v("div",Yt,C(e.option.name),1)]),_:1},8,["modelValue","options"]),fe.value?(d(),s("div",Ht,C(he.value),1)):u("",!0)]),v("div",Bt,[v("div",Mt,[n[11]||(n[11]=v("label",{class:"input-label"},"Route",-1)),c(h(Q),{modelValue:be.value,"onUpdate:modelValue":[n[3]||(n[3]=e=>be.value=e),n[4]||(n[4]=e=>{return a=e,void(be.value=a);var a})],options:Ae.value,searchable:!0,"close-on-select":!0,"show-labels":!1,placeholder:"Select route",label:"name","track-by":"concept_id",disabled:!1},null,8,["modelValue","options"]),ue.value?(d(),s("div",Ut,C(ce.value),1)):u("",!0)]),v("div",Rt,[n[12]||(n[12]=v("label",{class:"input-label"},"Frequency",-1)),c(h(Q),{modelValue:ye.value,"onUpdate:modelValue":[n[5]||(n[5]=e=>ye.value=e),n[6]||(n[6]=e=>{return a=e,void(ye.value=a);var a})],options:h(t),searchable:!0,"close-on-select":!0,"show-labels":!1,placeholder:"Select frequency",label:"label","track-by":"code"},null,8,["modelValue","options"]),ve.value?(d(),s("div",Lt,C(me.value),1)):u("",!0)]),v("div",zt,[n[13]||(n[13]=v("label",{class:"input-label"},"Duration (days)",-1)),c(h(Z),{modelValue:E.value,"onUpdate:modelValue":n[7]||(n[7]=e=>E.value=e),type:"number",inputmode:"numeric",pattern:"[0-9]*",fill:"outline",placeholder:"Enter duration",onKeydown:ze},null,8,["modelValue"]),O.value?(d(),s("div",qt,C(D.value),1)):u("",!0)])]),v("div",Gt,[qe.value[0].addItemButton?(d(),m(ge,{key:0,name:qe.value[0].name,icon:h(ee),"onClicked:btn":qe.value[0].fn,class:"save-button"},null,8,["name","icon","onClicked:btn"])):u("",!0),qe.value[1].addItemButton?(d(),m(ge,{key:1,name:qe.value[1].name,icon:h(ae),"onClicked:btn":qe.value[1].fn,class:"cancel-button"},null,8,["name","icon","onClicked:btn"])):u("",!0)])])),_.value?(d(),m(ge,{key:1,name:"Add new medication",icon:h(N),fontWeight:"600","onClicked:btn":Oe,class:"add-new-button"},null,8,["icon"])):u("",!0)])]),v("div",Wt,[c(h(f),{lines:"none",class:"section-header"},{default:p(()=>[c(h(P),{icon:h(te),class:"section-icon"},null,8,["icon"]),c(h(G),{class:"section-title"},{default:p(()=>[...n[14]||(n[14]=[b("Non-pharmacological therapy and other notes",-1)])]),_:1})]),_:1}),v("div",jt,[c(ea,{class:"intervention-component"}),v("div",$t,[c(h(f),{class:"notes-input-item"},{default:p(()=>[c(h(P),{slot:"start",icon:h(a).editPen,class:"edit-icon","aria-hidden":"true"},null,8,["icon"]),c(h(ne),{modelValue:L.value,"onUpdate:modelValue":n[8]||(n[8]=e=>L.value=e),onIonInput:Me,placeholder:"Enter notes here...","auto-grow":!0,class:"notes-textarea",fill:"outline",style:{"--padding-start":"16px"}},null,8,["modelValue"])]),_:1})]),c(h(j),{ref:"accordionGroup",class:"previous-notes"},{default:p(()=>[c(h($),{value:"fourth","toggle-icon-slot":"start"},{default:p(()=>[c(h(f),{slot:"header",color:"light",class:"previous-notes-header"},{default:p(()=>[c(h(G),null,{default:p(()=>[...n[15]||(n[15]=[b("Previous visit notes",-1)])]),_:1})]),_:1}),v("div",Kt,[v("div",Xt,[(d(!0),s(g,null,w(W.value,(e,a)=>(d(),s(g,{key:a},[1===a?(d(),s("div",Jt,[(d(!0),s(g,null,w(e,(e,a)=>(d(),s("div",{key:a},[v("div",Qt,C(e.date),1),v("div",Zt,C(e.notes),1)]))),128))])):u("",!0)],64))),128)),c(h(j),{onIonChange:Le},{default:p(()=>[c(h($),{value:"third","toggle-icon-slot":"start"},{default:p(()=>[c(h(f),{slot:"header",color:"light",class:"show-more-header"},{default:p(()=>[c(h(G),{color:"primary"},{default:p(()=>[b(C(le.value),1)]),_:1})]),_:1}),v("div",en,[(d(!0),s(g,null,w(K.value,(e,a)=>{return d(),s("div",{key:a,class:"note-entry"},[(d(!0),s(g,null,w((t=e,t[1]),(e,a)=>(d(),s("div",{key:a},[v("div",an,C(e.date),1),v("div",tn,C(e.notes),1)]))),128))]);var t}),128))])]),_:1})]),_:1})])])]),_:1})]),_:1},512)])])]),_:1}))}});e("b",Ae(on,[["__scopeId","data-v-14c793af"]]));const ln={class:"form-grid"},rn={class:"form-field"},sn={class:"form-field"},dn={class:"form-field"},cn={class:"form-field"},un={key:0,class:"form-field checkbox-field"},mn={class:"form-field"},pn={class:"form-field"},vn={class:"form-field"},hn={class:"form-field full-width"},fn={key:1,class:"form-field full-width"},bn={key:2,class:"form-field full-width"},gn={key:3,class:"form-field full-width"},yn={class:"form-field"},_n={class:"form-field"},xn={class:"form-field"},wn={class:"form-field"},kn={class:"form-field full-width"},Cn={class:"button-container"},An=t({name:"xxxComponent"}),Dn=t({...An,emits:["dataSaved"],setup(e,{emit:a}){const t=o(),n=o("gurdian phone number");o(!0);const f=o(),g=o(),{showConfirm:y}={showConfirm:async e=>{const a=await le.create({component:Ee,componentProps:{message:e},cssClass:"otherVitalsModal"});return await a.present(),new Promise(e=>{const t=()=>{a.removeEventListener("confirm",t),e(!0)},n=()=>{a.removeEventListener("cancel",n),e(!1)};a.addEventListener("confirm",t),a.addEventListener("cancel",n),a.onDidDismiss().then(()=>e(!1))})}};i(async()=>{});const _=l(()=>{const e=T.value.find(e=>e.selected);return"Other - specify"===(null==e?void 0:e.name)}),x=l(()=>{const e=S.value.find(e=>e.selected);return"Other - specify"===(null==e?void 0:e.name)}),w=l(()=>(new Te).isChildBearing()),k=l(()=>{const e=T.value.find(e=>e.selected);return"Accident"===(null==e?void 0:e.name)}),A=[{placeHolder:{default:"Enter time of death if known"},property_name:"timeOfDeath",dataHandler:function(e){A[0].dataValue.value=e},dataValue:o(),show_error:o(!1),error_message:"Time required",type:"time",skip_validation:!1},{placeHolder:{default:"Enter time arrived"},property_name:"timeArrived",dataHandler:function(e){A[1].dataValue.value=e},dataValue:o(),show_error:o(!1),error_message:"Time required",type:"time",skip_validation:!1},{placeHolder:{default:"Enter time confirming death"},property_name:"timeOfDeathConfirmation",dataHandler:function(e){A[2].dataValue.value=e},dataValue:o(),show_error:o(!1),error_message:"Time required",skip_validation:!1}],D=[{placeHolder:{default:"Enter date of death"},property_name:"dateOfDeath",dataHandler:function(e){const a={day:e.value.day,month:e.value.month,year:e.value.year,formattedDate:e.value.formattedDate};D[0].dataValue.value=a},dataValue:o(),show_error:o(!1),error_message:"Date required",type:"date",skip_validation:!1},{placeHolder:{default:"Enter date arrived"},property_name:"dateArrived",dataHandler:function(e){const a={day:e.value.day,month:e.value.month,year:e.value.year,formattedDate:e.value.formattedDate};D[1].dataValue.value=a,console.log(D[2].dataValue.value)},dataValue:o(),show_error:o(!1),error_message:"Date required",type:"date",skip_validation:!1},{placeHolder:{default:"Enter date confirming death"},property_name:"dateOfDeathConfirmation",dataHandler:function(e){const a={day:e.value.day,month:e.value.month,year:e.value.year,formattedDate:e.value.formattedDate};D[2].dataValue.value=a,console.log(D[2].dataValue.value)},dataValue:o(),show_error:o(!1),error_message:"Date required",type:"date",skip_validation:!1}],O=[{lblTxt:"Was the individual pregnant at the time of death?",value:o(!1),show_error:o(!1),error_message:"Please indicate pregnancy status",skip_validation:!1}],P=[{placeHolder:"Enter place of death",property_name:"placeOfDeath",dataHandler:function(e){const a=e.target.value;P[0].dataValue.value=a},dataValue:o(),show_error:o(!1),error_message:"Input required, Only letters allowed",type:"text",skip_validation:!1},{placeHolder:"Enter name of guardian",property_name:"nameOfGuardian",dataHandler:function(e){const a=e.target.value;P[1].dataValue.value=a},dataValue:o(),show_error:o(!1),error_message:"Input required, Only letters allowed",type:"text",skip_validation:!1},{placeHolder:"Enter name of person confirming death",property_name:"nameOfPersonConfirmindDeath",dataHandler:function(e){const a=e.target.value;P[2].dataValue.value=a},dataValue:o(),show_error:o(!1),error_message:"Input required, Only letters allowed",type:"text",skip_validation:!1},{placeHolder:"Enter position of the person confirming death",property_name:"positionOfthePersonConfirmingDeath",dataHandler:function(e){const a=e.target.value;P[3].dataValue.value=a},dataValue:o(),show_error:o(!1),error_message:"Input required, Only letters allowed",type:"text",skip_validation:!1},{placeHolder:"Enter medical council registration number of the person confirming death",property_name:"medicalConcilRegistrationNumberOfThePersonConfirmingDeath",dataHandler:function(e){const a=e.target.value;P[4].dataValue.value=a},dataValue:o(),show_error:o(!1),error_message:"Input required, Only letters and numbers are allowed",type:"alphanumeric",skip_validation:!1},{placeHolder:"Specify other cause of death",property_name:"otherNotes",dataHandler:function(e){const a=e.target.value;P[5].dataValue.value=a},dataValue:o(),show_error:o(!1),error_message:"Input required, Only letters allowed",type:"text",skip_validation:!0},{placeHolder:"Specify other accident cause of death",property_name:"otherNotes",dataHandler:function(e){const a=e.target.value;P[6].dataValue.value=a},dataValue:o(),show_error:o(!1),error_message:"Input required, Only letters allowed",type:"text",skip_validation:!0}],T=o([{id:1,name:"Natural",selected:!1},{id:2,name:"Accident",selected:!1},{id:3,name:"Homicide",selected:!1},{id:4,name:"Suicide",selected:!1},{id:5,name:"Pending investigation",selected:!1},{id:6,name:"Could not be determined",selected:!1},{id:7,name:"Other - specify",selected:!1}]),S=o([{id:1,name:"Motor vehicle (passenger)",selected:!1},{id:2,name:"Motor vehicle (pedestrian)",selected:!1},{id:3,name:"Drowning",selected:!1},{id:4,name:"Other - specify",selected:!1}]),N=[{multi_Selection:!1,manner_of_death_Selection_value:o(),show_list_label:!0,unqueId:"qwerty",name_of_list:"Manner of death ",property_name:"mannerOfDeath",placeHolder:"Choose one",items:T.value,listUpdatedFN:Y,listFilteredFN:()=>{},use_internal_filter:!0,disabled:o(!1),show_error:o(!1),error_message:"selection required"},{multi_Selection:!1,show_list_label:!0,unqueId:"qwerty1hjkn",name_of_list:"How did it occur?",property_name:"howDiditOccur",placeHolder:"Choose one",items:S.value,listUpdatedFN:B,listFilteredFN:()=>{},use_internal_filter:!0,disabled:o(!0),show_error:o(!1),error_message:"selection required"}];function E(){I()}const F=async(e,a="Do you want to save changes?")=>{await y(a)&&e()},V=a;function I(e={dataSaved:!0}){V("dataSaved",e)}function Y(e){T.value.forEach(e=>e.selected=!1);const a=T.value.find(a=>a.id==e.id);"Accident"!==e.name&&(g.value=null,S.value.forEach(e=>{e.selected=!1}),P[6].dataValue.value=""),"Other - specify"!==e.name&&(P[5].dataValue.value=""),a.selected=!0}const H=[{showAddItemButton:!0,addItemButton:!0,name:"save",btnFill:"clear",fn:async()=>{F(M,"Do you want to save the death outcome?")}},{showAddItemButton:!0,addItemButton:!0,name:"cancel",btnFill:"clear",fn:()=>{F(E,"Are you sure you want to cancel? Unsaved data will be lost.")}}];function B(e){S.value.forEach(e=>e.selected=!1);const a=S.value.find(a=>a.id==e.id);"Other - specify"!==e.name&&(P[6].dataValue.value=""),a.selected=!0}async function M(){try{const e=Ye(P),a=(Ye(D),Ye(A));if(!e||!a)return;!function(){const e=T.value.find(e=>e.selected);if(!e)return N[0].show_error.value=!0,!1;if(N[0].show_error.value=!1,"Accident"===e.name){if(!S.value.find(e=>e.selected))return N[1].show_error.value=!0,!1;N[1].show_error.value=!1}}();const t=oa.merge(He(P),He(D),He(A),L(N[0]),L(N[1])),n=[{concept_id:11520,value_coded:11520,child:U(t),obs_datetime:Oe.sessionDate()}];await we.addObsToEncounterPatient(n,ke.PATIENT_OUTCOME),Ce("Patient outcome saved successfully"),I()}catch(e){Be("Failed to save patient outcome"),console.error(e)}}const U=e=>{var a,t,n,o,l;const i=Oe.sessionDate(),r=[];return null!==(a=e.dateOfDeath)&&void 0!==a&&a.formattedDate&&r.push({concept_id:1815,value_text:e.dateOfDeath.formattedDate,obs_datetime:i}),null!==(t=e.dateArrived)&&void 0!==t&&t.formattedDate&&r.push({concept_id:7398,value_text:e.dateArrived.formattedDate,obs_datetime:i}),null!==(n=e.timeOfDeath)&&void 0!==n&&n.time&&r.push({concept_id:9161,value_text:e.timeOfDeath.time,obs_datetime:i}),null!==(o=e.timeArrived)&&void 0!==o&&o.time&&r.push({concept_id:5605,value_text:e.timeArrived.time,obs_datetime:i}),null!==(l=e.timeOfDeathConfirmation)&&void 0!==l&&l.time&&r.push({concept_id:1345,value_text:e.timeOfDeathConfirmation.time,obs_datetime:i}),e.mannerOfDeath&&r.push({concept_id:5002,value_text:e.mannerOfDeath,obs_datetime:i}),e.positionOfthePersonConfirmingDeath&&r.push({concept_id:7837,value_text:e.positionOfthePersonConfirmingDeath,obs_datetime:i}),e.nameOfGuardian&&r.push({concept_id:1824,value_text:e.nameOfGuardian,obs_datetime:i}),e.nameOfPersonConfirmindDeath&&r.push({concept_id:2122,value_text:e.nameOfPersonConfirmindDeath,obs_datetime:i}),e.medicalConcilRegistrationNumberOfThePersonConfirmingDeath&&r.push({concept_id:9763,value_text:e.medicalConcilRegistrationNumberOfThePersonConfirmingDeath,obs_datetime:i}),r};function L(e){const a=[];let t={};return e.items.forEach(t=>{1==t.selected&&a.push({property_name:e.property_name,name:t.name})}),a.length>0?(t[a[0].property_name]=a[0].name,t):t}return(e,a)=>{const o=r("ion-label");return d(),s("div",ln,[v("div",rn,[c(Ve,{placeholder:P[0].placeHolder,icon:h(ie),inputValue:P[0].dataValue.value,"onUpdate:inputValue":P[0].dataHandler},null,8,["placeholder","icon","inputValue","onUpdate:inputValue"]),P[0].show_error.value?(d(),m(o,{key:0,class:"error-label"},{default:p(()=>[b(C(P[0].error_message),1)]),_:1})):u("",!0)]),v("div",sn,[c(Ie,{place_holder:D[0].placeHolder,onDateUpDated:D[0].dataHandler,date_prop:""},null,8,["place_holder","onDateUpDated"]),D[0].show_error.value?(d(),m(o,{key:0,class:"error-label"},{default:p(()=>[b(C(D[0].error_message),1)]),_:1})):u("",!0)]),v("div",dn,[c(la,{place_holder:A[0].placeHolder,onTimeUpDated:A[0].dataHandler,time_prop:""},null,8,["place_holder","onTimeUpDated"]),A[0].show_error.value?(d(),m(o,{key:0,class:"error-label"},{default:p(()=>[b(C(A[0].error_message),1)]),_:1})):u("",!0)]),v("div",cn,[c(Ve,{placeholder:P[1].placeHolder,icon:h(re),inputValue:P[1].dataValue.value,"onUpdate:inputValue":P[1].dataHandler},null,8,["placeholder","icon","inputValue","onUpdate:inputValue"]),P[1].show_error.value?(d(),m(o,{key:0,class:"error-label"},{default:p(()=>[b(C(P[1].error_message),1)]),_:1})):u("",!0)]),w.value?(d(),s("div",un,[c(h(se),{modelValue:O[0].value.value,"onUpdate:modelValue":a[0]||(a[0]=e=>O[0].value.value=e),alignment:"start",class:"ion-lblCls"},{default:p(()=>[b(C(O[0].lblTxt),1)]),_:1},8,["modelValue"]),O[0].show_error.value?(d(),m(o,{key:0,class:"error-label"},{default:p(()=>[b(C(O[0].error_message),1)]),_:1})):u("",!0)])):u("",!0),v("div",mn,[c(Ve,{placeholder:n.value,icon:h(de),modelValue:t.value,"onUpdate:modelValue":a[1]||(a[1]=e=>t.value=e)},null,8,["placeholder","icon","modelValue"])]),v("div",pn,[c(Ie,{place_holder:D[1].placeHolder,onDateUpDated:D[1].dataHandler,date_prop:""},null,8,["place_holder","onDateUpDated"]),D[1].show_error.value?(d(),m(o,{key:0,class:"error-label"},{default:p(()=>[b(C(D[1].error_message),1)]),_:1})):u("",!0)]),v("div",vn,[c(la,{place_holder:A[1].placeHolder,onTimeUpDated:A[1].dataHandler,time_prop:""},null,8,["place_holder","onTimeUpDated"]),A[1].show_error.value?(d(),m(o,{key:0,class:"error-label"},{default:p(()=>[b(C(A[1].error_message),1)]),_:1})):u("",!0)]),v("div",hn,[c(h(Q),{modelValue:f.value,"onUpdate:modelValue":[a[2]||(a[2]=e=>f.value=e),a[3]||(a[3]=e=>Y(e))],multiple:!1,taggable:!1,"hide-selected":!0,"close-on-select":!0,openDirection:"bottom",placeholder:"Manner of death",selectLabel:"",label:"name",searchable:!0,"track-by":"id",options:T.value},null,8,["modelValue","options"]),N[0].show_error.value?(d(),m(o,{key:0,class:"error-label"},{default:p(()=>[b(C(N[0].error_message),1)]),_:1})):u("",!0)]),_.value?(d(),s("div",fn,[c(Ve,{placeholder:P[5].placeHolder,icon:h(ce),inputValue:P[5].dataValue.value,"onUpdate:inputValue":P[5].dataHandler},null,8,["placeholder","icon","inputValue","onUpdate:inputValue"]),P[5].show_error.value?(d(),m(o,{key:0,class:"error-label"},{default:p(()=>[b(C(P[5].error_message),1)]),_:1})):u("",!0)])):u("",!0),k.value?(d(),s("div",bn,[c(h(Q),{modelValue:g.value,"onUpdate:modelValue":[a[4]||(a[4]=e=>g.value=e),a[5]||(a[5]=e=>B(e))],multiple:!1,taggable:!1,"hide-selected":!0,"close-on-select":!0,openDirection:"bottom",placeholder:"How did it occur?",selectLabel:"",label:"name",searchable:!0,"track-by":"id",options:S.value},null,8,["modelValue","options"]),N[1].show_error.value?(d(),m(o,{key:0,class:"error-label"},{default:p(()=>[b(C(N[1].error_message),1)]),_:1})):u("",!0)])):u("",!0),x.value?(d(),s("div",gn,[c(Ve,{placeholder:P[6].placeHolder,icon:h(ce),inputValue:P[6].dataValue.value,"onUpdate:inputValue":P[6].dataHandler},null,8,["placeholder","icon","inputValue","onUpdate:inputValue"]),P[6].show_error.value?(d(),m(o,{key:0,class:"error-label"},{default:p(()=>[b(C(P[6].error_message),1)]),_:1})):u("",!0)])):u("",!0),v("div",yn,[c(Ie,{place_holder:D[2].placeHolder,onDateUpDated:D[2].dataHandler,date_prop:""},null,8,["place_holder","onDateUpDated"]),D[2].show_error.value?(d(),m(o,{key:0,class:"error-label"},{default:p(()=>[b(C(D[2].error_message),1)]),_:1})):u("",!0)]),v("div",_n,[c(la,{place_holder:A[2].placeHolder,onTimeUpDated:A[2].dataHandler,time_prop:""},null,8,["place_holder","onTimeUpDated"]),A[2].show_error.value?(d(),m(o,{key:0,class:"error-label"},{default:p(()=>[b(C(A[2].error_message),1)]),_:1})):u("",!0)]),v("div",xn,[c(Ve,{placeholder:P[2].placeHolder,icon:h(re),inputValue:P[2].dataValue.value,"onUpdate:inputValue":P[2].dataHandler},null,8,["placeholder","icon","inputValue","onUpdate:inputValue"]),P[2].show_error.value?(d(),m(o,{key:0,class:"error-label"},{default:p(()=>[b(C(P[2].error_message),1)]),_:1})):u("",!0)]),v("div",wn,[c(Ve,{placeholder:P[3].placeHolder,icon:h(R),inputValue:P[3].dataValue.value,"onUpdate:inputValue":P[3].dataHandler},null,8,["placeholder","icon","inputValue","onUpdate:inputValue"]),P[3].show_error.value?(d(),m(o,{key:0,class:"error-label"},{default:p(()=>[b(C(P[3].error_message),1)]),_:1})):u("",!0)]),v("div",kn,[c(Ve,{placeholder:P[4].placeHolder,icon:h(ce),inputValue:P[4].dataValue.value,"onUpdate:inputValue":P[4].dataHandler},null,8,["placeholder","icon","inputValue","onUpdate:inputValue"]),P[4].show_error.value?(d(),m(o,{key:0,class:"error-label"},{default:p(()=>[b(C(P[4].error_message),1)]),_:1})):u("",!0)]),v("div",Cn,[(d(),m(ge,{key:0,name:H[0].name,fill:H[0].btnFill,icon:h(ee),"onClicked:btn":H[0].fn},null,8,["name","fill","icon","onClicked:btn"])),(d(),m(ge,{key:1,name:H[1].name,fill:H[1].btnFill,icon:h(ae),"onClicked:btn":H[1].fn},null,8,["name","fill","icon","onClicked:btn"]))])])}}}),On=Ae(Dn,[["__scopeId","data-v-827718e5"]]),Pn={class:"dash_box"},Tn={key:1},Sn=t({name:"xxxComponent"}),Nn=t({...Sn,setup(e){const a=o("No outcome created yet"),t=o(!1),n=o("please select a type"),f=o(!0),g=o(""),_=o(!0),x=o(!1),w=Me(),k=l(()=>w.outcomes),A=o(!1),D=o(!1),O=o(!1),P=o(!1),T=o(!1),S=o(!1),N=o([{name:"Admitted for short stay",selected:!1},{name:"Referred out",selected:!1},{name:"Discharged Home",selected:!1},{name:"Send to Another Clinic",selected:!1},{name:"Death",selected:!1}]),E=[{multi_Selection:!1,show_list_label:!0,unqueId:"qwerty2",name_of_list:"Add new outcome",placeHolder:"Choose one",items:N.value,listUpdatedFN:function(e){N.value=e,N.value.forEach(e=>{1==e.selected&&(g.value=e.name)})},listFilteredFN:()=>{},use_internal_filter:!0,disabled:o(!1)}];function F(){k.value.length>0?_.value=!1:0==k.value.length&&0==x.value&&(_.value=!0)}function V(e){k.value.splice(e,1)}i(async()=>{F()}),y(()=>g.value,async e=>{1==A.value?A.value=!1:async function(){const e=g.value;console.log(e),g.value=e;const a=g.value;a==N.value[0].name?O.value=!0:O.value=!1,a==N.value[1].name?(P.value=!0,console.log("show_discharged_options is set to true")):P.value=!1,a==N.value[2].name?(T.value=!0,console.log("show_discharged_options is set to true")):T.value=!1,a==N.value[3].name?S.value=!0:S.value=!1,a==N.value[4].name?D.value=!0:D.value=!1}()}),y(()=>k.value.length,async e=>{F()});const I=e=>{console.log(e)};function Y(){D.value=!1,O.value=!1,P.value=!1,T.value=!1,N.value.forEach(e=>{e.selected=!1}),g.value=""}return(e,o)=>{const l=r("ion-row");return d(),m(h(oe),null,{default:p(()=>[c(l,null,{default:p(()=>[c(h(ue),null,{default:p(()=>[(d(),m(ia,{key:0,"onUpdate:removeItem":V,"onUpdate:editItem":I,displayData:k.value},null,8,["displayData"]))]),_:1})]),_:1}),_.value?(d(),m(l,{key:0},{default:p(()=>[v("span",Pn,C(a.value),1)]),_:1})):u("",!0),f.value?(d(),s("div",Tn,[c(l,null,{default:p(()=>[c(h(ue),null,{default:p(()=>[c(Ue,{multiSelection:E[0].multi_Selection,show_label:E[0].show_list_label,uniqueId:E[0].unqueId,name_of_list:E[0].name_of_list,choose_place_holder:E[0].placeHolder,"items_-list":E[0].items,use_internal_filter:E[0].use_internal_filter,disabled:E[0].disabled.value,onItemListUpDated:E[0].listUpdatedFN,onItemListFiltered:E[0].listFilteredFN},null,8,["multiSelection","show_label","uniqueId","name_of_list","choose_place_holder","items_-list","use_internal_filter","disabled","onItemListUpDated","onItemListFiltered"]),v("div",null,[t.value?(d(),m(h(G),{key:0,class:"error-label"},{default:p(()=>[b(C(n.value),1)]),_:1})):u("",!0)])]),_:1})]),_:1})])):u("",!0),O.value?(d(),m(ra,{key:2,onDataSaved:Y,selected_ward_prop:"",admitted_other_props:""})):u("",!0),P.value?(d(),m(sa,{key:3,onDataSaved:Y,selected_referral_data:"",selected_other_referral_data:""})):u("",!0),T.value?(d(),m(da,{key:4,onDataSaved:Y,selected_discharged_prop:"",selected_discharged_data:""})):u("",!0),D.value?(d(),m(On,{key:5,onDataSaved:Y})):u("",!0),S.value?(d(),m(ca,{key:6,onDataSaved:Y})):u("",!0)]),_:1})}}});e("O",Ae(Nn,[["__scopeId","data-v-5c28f6ca"]]))}}});
