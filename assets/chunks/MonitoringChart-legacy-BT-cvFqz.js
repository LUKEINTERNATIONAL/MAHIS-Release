System.register(["./vendor-legacy-BV-WGgzk.js","../index-legacy-CpEYyvxF.js","./DemographicBar-legacy-CnddpUg0.js","./ReusableDataTable-legacy-CQu_TcZx.js","./useRespiratoryRateOxygenForm-legacy-B5zOgjkm.js","./useFormWizard-legacy-DwflWRwj.js","./lodash-legacy-pOOc9Efu.js","./formatServerData-legacy-ISKpCd5X.js","./usePatientProfile-legacy-CJPsukSF.js","./apexcharts-legacy-CgZ9vWXi.js","./drug_prescription_service-legacy-CW071MYa.js","./patient_diagnosis_service-legacy--XShy8Wh.js","./Registration-legacy-CMRHOvth.js","./useLocation-legacy-DS6EiV0j.js","./vaccines_service-legacy-BzxsU5nC.js","./sms_service-legacy-D25GxL01.js","./EIRreportsStore-legacy-3Y83EF5Q.js","./Export-legacy-D8acVOKt.js","./useNeonatalEnrollmentStore-legacy-BHOsgqmj.js","./enrollment-legacy-BWFKsMdA.js"],function(e,t){"use strict";var n,a,i,l,o,s,c,r,u,d,v,m,p,g,y,h,b,f,_,S,D,w,T,F,M,k,I,x,C,P,A,j,B,O,R,L,E,N,V,z,H,U,G,J,W,$,K,Q,q,Z,X,Y,ee,te,ne,ae,ie,le,oe,se,ce,re,ue,de,ve,me,pe,ge,ye,he;return{setters:[e=>{n=e.c,a=e.d,i=e.r,l=e.O,o=e.f,s=e.u,c=e.bp,r=e.J,u=e.l,d=e.e,v=e.P,m=e.k,p=e.m,g=e.F,y=e.aT,h=e.H,b=e.Q,f=e.an,_=e.cG,S=e.aU,D=e.w,w=e.a,T=e.a3,F=e.i,M=e.bL,k=e.v,I=e.a6,x=e.b8},e=>{C=e.l,P=e.aD,A=e.J,j=e.aH,B=e.u,O=e.aI,R=e.aJ,L=e.aK,E=e.aL,N=e.d,V=e.aM,z=e.g,H=e.Z,U=e.e,G=e.T,J=e.N,W=e.H,$=e.aN,K=e.aO,Q=e.aP,q=e.aQ,Z=e.t,X=e.aS,Y=e.G,ee=e.aT,te=e.a0,ne=e.S},e=>{ae=e.D},e=>{ie=e.R},e=>{le=e.u,oe=e.a,se=e.b},e=>{ce=e.u,re=e.a,ue=e._,de=e.s,ve=e.c,me=e.b},e=>{pe=e.l},e=>{ge=e.a,ye=e.b},e=>{he=e.u},null,null,null,null,null,null,null,null,null,null,null],execute:function(){const t=()=>{const e=n(()=>[{componentType:"multiSelectInputField",header:"Airway intervention(s)",name:"airway_interventions",isMultiple:!0,trackBy:"id",icon:C.search,options:[{id:1,name:"Positioning"},{id:2,name:"Suctioning"},{id:3,name:"Airway Adjuncts"},{id:4,name:"Advanced Airway"}]},{componentType:"multiSelectInputField",header:"Breathing intervention(s)",name:"breathing_interventions",isMultiple:!0,trackBy:"id",icon:C.search,options:[{id:1,name:"Oxygen Therapy"},{id:2,name:"Inhaled Medications"},{id:3,name:"Chest Decompression"},{id:4,name:"Mechanical Ventilation"}]},{componentType:"multiSelectInputField",header:"Circulation intervention(s)",name:"circulation_interventions",isMultiple:!0,trackBy:"id",icon:C.search,options:[{id:1,name:"IV/IO Access"},{id:2,name:"Fluid Resuscitation"},{id:3,name:"Medications"},{id:4,name:"Blood Products"}]},{componentType:"multiSelectInputField",header:"Disability intervention(s)",name:"disability_interventions",isMultiple:!0,trackBy:"id",icon:C.search,options:[{id:1,name:"Blood Glucose Administration"},{id:2,name:"Seizure Management"},{id:3,name:"Pain Management"}]},{componentType:"multiSelectInputField",header:"Exposure intervention(s)",name:"exposure_interventions",isMultiple:!0,trackBy:"id",icon:C.search,options:[{id:1,name:"Warming Measures"},{id:2,name:"Cooling Measures"},{id:3,name:"Thermal Protection"},{id:4,name:"Electrical Protection"}]}]);return{fluidsFormSection:n(()=>[{componentType:"Dashes"},{componentType:"multiSelectInputField",header:"Intake Fluid Type",name:"intake_fluid_type",isMultiple:!0,trackBy:"id",icon:C.search,grid:{s:"4"},options:[{id:1,name:"Normal Saline"},{id:2,name:"Ringer's Lactate"},{id:3,name:"Dextrose Solution"},{id:4,name:"Blood Products"}]},{componentType:"multiSelectInputField",header:"Output Fluid Type",name:"output_fluid_type",isMultiple:!0,trackBy:"id",icon:C.search,grid:{s:"4"},options:[{id:1,name:"Urine"},{id:2,name:"Vomitus"},{id:3,name:"Drainage"},{id:4,name:"Blood Loss"}]},{componentType:"inputField",header:"Fluid Balance",name:"fluid_balance",unit:"ml",grid:{s:"4"}},{componentType:"inputField",header:"Intake Fluid Amount",name:"intake_fluid_amount",unit:"ml",grid:{s:"4"}},{componentType:"inputField",header:"Output Fluid Amount",name:"output_fluid_amount",unit:"ml",grid:{s:"4"}}]),interventionsFormSection:e}},be=a({__name:"Interventions",setup(e){i(null);const a=i([]),h=t().interventionsFormSection,b=t().fluidsFormSection,f=i([n(()=>b.value)]);return(e,t)=>(o(),l(s(c),null,{default:r(()=>[u(s(y),null,{default:r(()=>[u(P,{formData:s(h),ref:"formRef"},null,8,["formData"]),(o(!0),d(g,null,v(f.value,(e,i)=>(o(),d("div",{key:i,style:{display:"flex","align-items":"center"}},[u(P,{formData:e.value,ref_for:!0,ref:e=>((e,t)=>{e&&(a.value[t]=e)})(e,i)},null,8,["formData"]),m("div",null,[u(A,{onClick:e=>(e=>{f.value.length>1&&(f.value.splice(e,1),a.value.splice(e,1))})(i),fill:"clear",icon:s(C).minus,disabled:1===f.value.length},null,8,["onClick","icon","disabled"]),i===f.value.length-1?(o(),l(A,{key:0,onClick:t[0]||(t[0]=e=>{f.value.push(n(()=>b.value))}),fill:"clear",icon:s(C).plus},null,8,["icon"])):p("",!0)])]))),128))]),_:1})]),_:1}))}}),fe=a({__name:"Medications",setup(e){const t=["Medication","Name","Dose","Frequency","Duration","Formulation","Prescriber"],n={responsive:!0,ordering:!1,layout:{topStart:"buttons",topEnd:"",bottomStart:"info",bottomEnd:"paging"},buttons:[{text:" <b> Print Medication </b>",className:"add-test text-white",action:async()=>{}}]},a=[["Antibiotic","Amoxicillin","500 mg","3 times a day","7 days","Capsule","Dr. Smith"],["Analgesic","Paracetamol","650 mg","4 times a day","5 days","Tablet","Dr. Johnson"],["Antihypertensive","Lisinopril","10 mg","Once daily","30 days","Tablet","Dr. Lee"]];return(e,i)=>{const d=h("ion-card-title");return o(),l(s(c),null,{default:r(()=>[u(s(y),null,{default:r(()=>[u(d,null,{default:r(()=>[...i[0]||(i[0]=[b("Prescribed Medication",-1)])]),_:1}),u(ie,{data:a,headers:t,options:n})]),_:1})]),_:1})}}}),_e=le(),Se=oe(),De=se(),we=n(()=>[{grid:{s:"3"}},{grid:{s:"9"},componentType:"Dashes"},..._e.bloodPressureFormSection.value,{grid:{s:"3"}},{grid:{s:"9"},componentType:"Dashes"},...Se.temperaturePulseRateForm.value,...De.respiratoryRateOxygenForm.value]),Te=a({__name:"Observations",setup(e){const t=i(null),a=n(()=>[...we.value,{componentType:"Dashes"},{componentType:"inputField",header:"Random Blood Glucose (RBG)",name:"random_blood_glucose",unit:"mg/dL"},{componentType:"inputField",header:"Urine Dipstick - Ketones",name:"urine_dipstick_ketones"},{componentType:"multiSelectInputField",header:"AVPU Scale",name:"avpu_scale",isMultiple:!1,trackBy:"id",icon:C.search,options:[{id:1,name:"Alert"},{id:2,name:"Verbal Response"},{id:3,name:"Pain Response"},{id:4,name:"Unresponsive"}]},{componentType:"inputField",header:"Peak Expiratory Flow Rate (PEFR)",name:"peak_expiratory_flow_rate",unit:"L/min"}]);return(e,n)=>(o(),l(s(c),null,{default:r(()=>[u(s(y),null,{default:r(()=>[u(P,{formData:s(a),ref_key:"formRef",ref:t},null,8,["formData"])]),_:1})]),_:1}))}}),Fe={style:{width:"88vw",margin:"0 auto","margin-top":"10px"}},Me={class:"back_profile"};e("default",a({__name:"MonitoringChart",setup(e,{expose:t}){const{onTabBeforeChange:a,currentTabIndex:c}=ce();he();const d=f(),v=_();i([]),i([]),i(!1);const g=i(!0),y=i(!1),h=i(!1),b=n(()=>({text:h.value?"Saving...":"Finish",icon:h.value?"hourglass-outline":"checkmark",hideText:!1,hideIcon:!1,disabled:y.value||h.value})),C=j(),P=B(),ie=O(),le=R();L();const oe=E(),se=N();V();const _e=z(),Se=re(),De=H(),{patient:we}=S(P),{vitals:ke}=S(C),{investigations:Ie}=S(ie),{diagnosis:xe}=S(le),{substance:Ce}=S(_e),{selectedNCDMedicationList:Pe}=S(oe),{FootScreening:Ae,visualScreening:je,cvScreening:Be}=S(Se),{sessionDate:Oe}=S(De),{apiStatus:Re}=S(U());D(b,(e,t)=>{console.log("Done button options changed:",{from:t,to:e,currentStep:c.value,tabsLength:Ne.value.length}),e.disabled!==(null==t?void 0:t.disabled)&&console.log("Done button "+(e.disabled?"disabled":"enabled")),e.text!==(null==t?void 0:t.text)&&console.log(`Done button text changed from "${null==t?void 0:t.text}" to "${e.text}"`)},{deep:!0}),D(h,(e,t)=>{e!==t&&(console.log(`Saving state changed: ${t} -> ${e}`),e?console.log("Starting save process..."):console.log("Save process completed"))});const Le=e=>{console.log("Done button change received from wizard:",e),e.newOptions.disabled&&console.log("Done button has been disabled"),e.isLastStep&&console.log("User is on the last step, done button should be visible")},Ee=()=>{let e=!1;return He(),h.value&&(e=!0),y.value=e,!e},Ne=i([{title:"Observations",icon:""},{title:"Interventions",icon:""},{title:"Medications",icon:""}]),Ve=i(null),ze=i(null),He=()=>{var e;if(!Ne.value||0===Ne.value.length)return console.log("Tabs not yet initialized"),null;const t=c.value>=0&&c.value<Ne.value.length?c.value:0;switch(null===(e=Ne.value[t])||void 0===e?void 0:e.title){case"Observations":return"Observations";case"Interventions":return"Interventions";case"Medications":return"Medications";default:if(se.NCDActivities.length>0)switch(se.NCDActivities[0]){case"Observations":return"Observations";case"Interventions":return"Interventions";case"Medications":return"Medications"}return null}},Ue=()=>{g.value=!1,setTimeout(()=>{c.value=0,g.value=!0},0)},Ge=()=>{const e=j();e.setVitals(e.getInitialVitals(we.value.ID))},Je=async()=>{const e=J(Oe.value,"sessionDate","value")||W.sessionDate(),t=$("vitals");for(let a=0;a<Ne.value.length;a++){const i=Ne.value[a];if("Vital Signs"===i.title)Ne.value[a].icon=We(e,t)?x:"";else if("Risk Assessment"===i.title){const t=$("substanceAbuse");Ne.value[a].icon=We(e,t)?x:""}else if("Investigations"===i.title){var n;const t=null==we||null===(n=we.value)||void 0===n||null===(n=n.labOrders)||void 0===n?void 0:n.saved,i=null==t?void 0:t.filter(t=>W.toStandardHisFormat(e)===W.toStandardHisFormat(t.order_date));Ne.value[a].icon=(null==i?void 0:i.length)>0?x:""}else if("Diagnosis"===i.title){const t=$("diagnosis");Ne.value[a].icon=We(e,t)?x:""}else if("Complications Screening"===i.title){const t=$("screening");Ne.value[a].icon=We(e,t)?x:""}else"Treatment Plan"===i.title&&(Pe.value.length>0?Ne.value[a].icon=K()?x:"":Ne.value[a].icon="")}Ee()},We=(e,t)=>{const n=new Date(e);return n.setHours(0,0,0,0),t.some(e=>{const t=new Date(e.obs_datetime);return t.setHours(0,0,0,0),t.getTime()===n.getTime()})},$e=async(e,t)=>{var n;const a=null===(n=Ne.value[t])||void 0===n?void 0:n.title;var i,l;e%1==0&&(c.value=e),"Vital Signs"==a&&(null===(i=Ve.value)||void 0===i||i.onSubmit()),"Risk Assessment"==a&&(null===(l=ze.value)||void 0===l||l.onSubmit()),"Complications Screening"==a&&await(async()=>{const e=[],t=await ge(je.value),n=await ye(Ae.value),a=await ge(Be.value);var i,l,o,s;t.length>0&&e.push({concept_id:await X.getConceptID("Visual acuity",!0),value_text:"visual acuity test",obs_datetime:X.getSessionDate(),child:t}),n.length>0&&e.push({concept_id:await X.getConceptID("Foot check",!0),value_text:"foot screening",obs_datetime:X.getSessionDate(),child:n}),a.length>0&&e.push(...a),e.length>0?(null!==(l=(i=null!==(s=(o=we.value).screening)&&void 0!==s?s:o.screening={}).unsaved)&&void 0!==l||(i.unsaved=[]),we.value.screening.unsaved.push(...e),Y("Complications saved successfully")):Z("No complications data to save")})(),"Treatment Plan"==a&&await(async()=>{const e=ee();if(!pe.isEmpty(e.selectedMedicalAllergiesList)){const t=te(),n=e.selectedMedicalAllergiesList.map(e=>({concept_id:e.concept_id,obs_datetime:ne.getSessionDate(),value_coded:e.concept_id,location_id:t.facilityLocation.code,value_text:e.name})),a=await de(n);we.value=Object.assign(we.value,a),console.log("Allergies staged successfully:",we.value),e.clearSelectedMedicalAllergiesList()}const t=await ve();we.value=Object.assign(we.value,t);const n=await me().saveNonPharmaTherapyPatientData();we.value=Object.assign(we.value,n)})(),await Q(we.value)},Ke=async()=>{h.value=!0;try{await q(),await Q(we.value),d.push("/triageList")}catch(e){console.error("Error saving data:",e),Z("Error occurred while saving data. Please try again.")}finally{h.value=!1}};return w(async()=>{0!==se.NCDActivities.length?(re().resetScreening(),Ne.value=[{title:"Observations",icon:""},{title:"Interventions",icon:""},{title:"Medications",icon:""}],await Je(),(void 0===c.value||c.value<0)&&(c.value=0,console.log("Setting initial tab index to 0")),y.value=!1,h.value=!1,Ee()):d.push("patientProfile")}),D(c,async()=>{await Ee()}),D(ke,async()=>{await Je()},{deep:!0}),D(we,async()=>{re().resetScreening(),await Je()},{deep:!0}),D(Oe,async()=>{await Je()},{deep:!0}),D(Ie,async()=>{await Je()},{deep:!0}),D(xe,async()=>{await Je()},{deep:!0}),D(Ce,async()=>{await Je()},{deep:!0}),D(Pe,async()=>{await Je()},{deep:!0}),D(v,async e=>{Ue(),Ge(),Ne.value=[{title:"Observations",icon:""},{title:"Interventions",icon:""},{title:"Medications",icon:""}]},{deep:!0}),D(we,async(e,t)=>{e.ID!=t.ID&&(Ue(),Ge())},{deep:!0}),t({saveData:Ke,markWizard:Je,refreshWizard:Ue,validateDoneButtonState:Ee}),(e,t)=>(o(),l(s(I),null,{default:r(()=>[u(G),u(s(T),{fullscreen:!0},{default:r(()=>[u(ae),m("div",Fe,[g.value?(o(),l(ue,{key:0,ref:"wizard",headingTitle:"Monitoring Chart","vertical-tabs":"","navigable-tabs":"","scrollable-tabs":"",startIndex:0,doneButton:b.value,"custom-tabs":Ne.value,beforeChange:s(a),onChange:$e,"onComplete:wizard":t[1]||(t[1]=e=>Ke()),onDoneButtonChanged:Le},{default:r(()=>[m("div",null,[m("div",Me,[u(A,{name:"Back to profile",iconSlot:"start",fill:"clear",icon:s(M),"font-weight":"600",onClick:t[0]||(t[0]=e=>{d.push("/patientProfile")})},null,8,["icon"])])]),F(m("div",null,[u(Te,{ref:"observationsRef"},null,512)],512),[[k,"Observations"==He()]]),F(m("div",null,[u(be,{ref:"interventionsRef"},null,512)],512),[[k,"Interventions"==He()]]),F(m("div",null,[u(fe,{ref:"medicationsRef"},null,512)],512),[[k,"Medications"==He()]])]),_:1},8,["doneButton","custom-tabs","beforeChange"])):p("",!0)])]),_:1})]),_:1}))}}))}}});
