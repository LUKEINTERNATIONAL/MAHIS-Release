const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./LabOrdersList-Ceee82Ps.js","./vendor-BolvhNQv.js","./lodash-NJiRuGo9.js","../vendor.CmTprahb.css","../index-tYOBQoko.js","./apexcharts-Go-aTq24.js","../index.d6peQfMG.css","./BasicForm-Cm0hfhXQ.js","./DateInputField-E1P4V10v.js","../DateInputField.BYUMEomf.css","../BasicForm.CS8soES6.css","./useUserActivities-BCLD44tN.js","../LabOrdersList.CHAE01_j.css","./DiagnosesHistory-DcNLgENa.js","./DashBox-Dlqc2XWD.js","./previousDiagnosis-SEaJR_y0.js","../previousDiagnosis.BDQ84dq0.css","../DiagnosesHistory.CtE9ra0K.css","./AllergiesContraindication-D2d9OWs6.js","./UpcomingFeature-BqNISBpV.js","../UpcomingFeature.DBJv9ELz.css","../AllergiesContraindication.DSdMoqwN.css","./VisitsHistory-MWUc_qPq.js","../VisitsHistory.Dc_khrbC.css","./VitalsMeasurementsSummary-CHPhmD2e.js","../VitalsMeasurementsSummary.B3Ypki_f.css","./PatientProfile-BI3Pp6_6.js","./DemographicBar-y2oRJtka.js","../DemographicBar.DtnnoAYr.css","./SaveProgressModal-DLLGu8-a.js","../SaveProgressModal.DLXC0SP6.css","./Stepper-D_IsEvFF.js","./NextAppointment-7B0qpCdg.js","./group_validation-DfSghP4X.js","./RadiologyStore-BbgMYe4N.js","./formatServerData-Bl5lGrMz.js","./previousComplaints-rIravNSg.js","../previousComplaints.CaFy6Jya.css","./patient_complaints_service-AcuXw6jZ.js","./nonPharmaTherapyStore-DB6uh0hL.js","./drug_prescription_service-DPLeiVjb.js","./patient_diagnosis_service-BfoHPGKU.js","./user_role_management-QHN5L9ep.js","./ncd_appointment_service-hVvjncgp.js","../NextAppointment.Bx43K2aq.css","./OPDOutcome-DZYJxxAm.js","./LevelOfConsciousness.vue_vue_type_script_setup_true_lang-BT4LfzfY.js","./Outcome-IldoQuNC.js","../Outcome.CuBAseit.css","../OPDOutcome.DgFcGTjN.css","./VitalsMixin.vue_vue_type_script_lang-3FyFguGC.js","./TreatmentPlan-DMBGmbN-.js","./ComplicationsStore-CNie8nQr.js","../TreatmentPlan.CSblzt7n.css","./OPDDiagnosis-D3uPqsxo.js","../OPDDiagnosis.BkZ0ABWg.css","./FeatusModal-DUKF3TV0.js","../FeatusModal.Cfk5MYmH.css","./BasicCard-fam-8UFW.js","../BasicCard.CLPwwedX.css","./PastObstreticHistoryStore-LqwhLf-R.js","../Stepper.B2n3cIUE.css","./WeightHeightChart-Bg4UrdHD.js","./chartjs-CrOkRUyJ.js","../WeightHeightChart.BZ52GXpK.css","./weightAndHeight-BagZujoV.js","./customDatePicker-C0nWBe-0.js","../customDatePicker.twJBaIU5.css","../weightAndHeight.CJuqOhq_.css","./vaccines_service-CopRqNq4.js","./sms_service-DlCTujAJ.js","./EIRreportsStore-hgF2UhSl.js","./Export-CQg0-Eon.js","../vaccines_service.DKZw05E0.css","./barcode-qrcode-reader-Bh1af4k3.js","./stock_service-CTnu3aV3.js","./Registration-DqatflXy.js","./useLocation-M30rIvjF.js","./useNeonatalEnrollmentStore-DndLv6lC.js","./enrollment-DU-PLRUa.js","../Registration.DWcKqqrC.css","./AdministerOtherVaccinesStore-Bv03U2z0.js","./usePatientProfile-BZBaAYv4.js","../usePatientProfile.BRwk2gaY.css","../PatientProfile.xh9sFISw.css","./HTSPatientProfile-C1xequN8.js","../HTSPatientProfile.D35WQABU.css","./NeonatalPatientProfile-h3YafLmL.js","./neonatal_service-CJEhnp1D.js","../NeonatalPatientProfile.BD3bs8tI.css","./AETCPatientProfile-BJv81_aX.js","./confirm_pregnancy_service-Cvr6dKUW.js","./CPR-Dd6aeqbv.js","./useRespiratoryRateOxygenForm-CGsBeU38.js","../CPR.C4Sa7ms4.css","./tasks-CnDzYGgE.js","../AETCPatientProfile.BayosZ6Y.css","./BloodPressure-DJPBi12j.js","../BloodPressure.CLAqoSeU.css","./AncEnrollmentModal-CTuQX6LU.js","../AncEnrollmentModal.CLq9tGu0.css","./LabourEnrollmentModal-Dt5OZs4i.js","../LabourEnrollmentModal.DgSOWoB_.css","./PNCEnrollmentModal-BI471C5A.js","../PNCEnrollmentModal.BDNYT6XY.css"])))=>i.map(i=>d[i]);
import{d as ht,r as _,w as st,O as b,f as u,u as t,bq as gt,J as n,l as a,aQ as Ye,e as y,dS as vt,Q as c,L as C,av as qe,F as Z,aR as je,aj as Ke,P as yt,_ as h,W as R,aO as Ze,k as o,K as v,cE as re,bZ as Je,bW as Qe,aU as Rt,z as Xe,D as ta,a as ue,I as ea,G as aa,dT as na,E as sa,N as oa,a2 as Et,a3 as Nt,bm as ia,a4 as V,a5 as m,p as de,dU as Xt,m as f,b$ as la,a6 as ce,R as ra,ao as ua,cp as da,aV as wt,c as _t,H as te,cL as P,dV as ca,c$ as ma,al as pa,ak as fa,V as ee,dd as va,de as j,aF as _a,c1 as ga,aH as ae,d0 as ya,cD as I}from"./vendor-BolvhNQv.js";import{a8 as ot,_ as St,P as it,a9 as ba,a0 as Ca,m as me,aa as Aa,ab as Pa,u as Ia,a as ka,f as Da,ac as et,T as wa,w as O,S as at,J as ne,H,ad as Ot,ae as se,i as oe,af as Oa,q as ie,G as K,n as Ra,t as nt,ag as Ea}from"../index-tYOBQoko.js";import{l as Na}from"./lodash-NJiRuGo9.js";import{C as ha}from"./confirm_pregnancy_service-Cvr6dKUW.js";import{u as Sa}from"./useUserActivities-BCLD44tN.js";import{u as Ta}from"./usePatientProfile-BZBaAYv4.js";import{f as Ma}from"./formatServerData-Bl5lGrMz.js";import{D as Va}from"./DemographicBar-y2oRJtka.js";import{i as xa}from"./tasks-CnDzYGgE.js";const La=ht({__name:"ARTCard",props:{patient:{default:{}}},setup(x){const E=x,S=_(!1),k=_({artStartDate:"",arvNumber:"",fileNumber:"",currentOutcome:""}),T=async p=>{S.value=!0;try{const l=await ot.getProgramInformation(p);k.value={artStartDate:(()=>{const[d,L,U]=l.art_start_date.split("/"),G=l.art_start_date.match(/n\/a/i)?"":"(".concat(Xe(ot.getSessionDate()).diff("".concat(U,"-").concat(L,"-").concat(d),"months")," Month(s))");return"".concat(l.art_start_date," ").concat(G)})(),arvNumber:"".concat(l.arv_number," | Regimen: ").concat(l.current_regimen),fileNumber:l.filing_number.number,currentOutcome:l.current_outcome}}catch(l){console.error("Error fetching ART information:",l)}finally{S.value=!1}};return st(()=>E.patient,p=>{p&&p.patientID?T(p.patientID):k.value={artStartDate:"--",arvNumber:"--",fileNumber:"--",currentOutcome:"--"}},{immediate:!0,deep:!0}),(p,l)=>(u(),b(t(gt),null,{default:n(()=>[a(t(je),null,{default:n(()=>[a(t(Ye),null,{default:n(()=>[S.value?(u(),b(t(vt),{key:0,animated:"",style:{width:"200px",height:"24px"}})):(u(),y(Z,{key:1},[a(t(C),{icon:t(qe)},null,8,["icon"]),l[0]||(l[0]=c(" ART Information ",-1))],64))]),_:1})]),_:1}),a(t(Rt),null,{default:n(()=>[a(t(Ke),null,{default:n(()=>[S.value?(u(),y(Z,{key:0},yt(4,d=>a(t(h),{key:d},{default:n(()=>[a(t(vt),{slot:"start",animated:"",style:{width:"24px",height:"24px","border-radius":"50%"}}),a(t(R),null,{default:n(()=>[a(t(vt),{animated:"",style:{width:"120px",height:"16px","margin-bottom":"8px"}}),a(t(vt),{animated:"",style:{width:"180px",height:"20px"}})]),_:1})]),_:1})),64)):(u(),y(Z,{key:1},[a(t(h),null,{default:n(()=>[a(t(C),{icon:t(Ze),slot:"start"},null,8,["icon"]),a(t(R),null,{default:n(()=>[l[1]||(l[1]=o("h3",null,"ART Start Date",-1)),o("p",null,v(k.value.artStartDate),1)]),_:1})]),_:1}),a(t(h),null,{default:n(()=>[a(t(C),{icon:t(re),slot:"start"},null,8,["icon"]),a(t(R),null,{default:n(()=>[l[2]||(l[2]=o("h3",null,"ARV Number",-1)),o("p",null,v(k.value.arvNumber),1)]),_:1})]),_:1}),a(t(h),null,{default:n(()=>[a(t(C),{icon:t(Je),slot:"start"},null,8,["icon"]),a(t(R),null,{default:n(()=>[l[3]||(l[3]=o("h3",null,"File Number",-1)),o("p",null,v(k.value.fileNumber),1)]),_:1})]),_:1}),a(t(h),null,{default:n(()=>[a(t(C),{icon:t(Qe),slot:"start"},null,8,["icon"]),a(t(R),null,{default:n(()=>[l[4]||(l[4]=o("h3",null,"Current Outcome",-1)),o("p",null,v(k.value.currentOutcome),1)]),_:1})]),_:1})],64))]),_:1})]),_:1})]),_:1}))}}),$a=St(La,[["__scopeId","data-v-7ec7b45c"]]),le=[{classDash:"dashed_bottom_border",radioBtnContent:{header:{title:"Is the pregnancy confirmed?*",class:"bold",selectedValue:"",name:"Pregnancy confirmed"},data:[{value:"Yes",name:"Yes",colSize:"2"},{value:"No",name:"No",colSize:"2"}]}},{classDash:"dashed_bottom_border",radioBtnContent:{header:{title:"Was the pregnancy planned?*",selectedValue:"",class:"bold",name:"Pregnancy planned"},data:[{value:"Yes",name:"Yes",colSize:"2"},{value:"No",name:"No",colSize:"2"}]}}],Ua=ta("ANCEnrollmentStore",{state:()=>({ConfirmPregnancy:[...le]}),actions:{setConfirmPregnancy(x){this.ConfirmPregnancy=x},getInitial(){return[...Na.cloneDeep(le)]}}}),Ba={class:"header-content"},Ha={class:"title-section"},Ga={class:"tasks-container"},za=["onClick"],Fa={class:"task-icon-container"},Wa={class:"task-content"},Ya={key:0,class:"task-status"},qa={key:1,class:"empty-state"},ja={class:"empty-icon"},Ka=ht({__name:"TaskView",props:{tasks:{type:Object,required:!0}},setup(x){const E=_([]),S=x;ue(async()=>{const p=new it;E.value=[];const l=await new ba(p.getID()).getProgram();S.tasks.forEach(async d=>{var U,G,lt,rt;const L={orderNumber:(U=d.sortOrder)!=null?U:9999,label:(G=d.displayName)!=null?G:d.name,icon:d.icon,disabled:!1,taskCompleted:!1,task:d};if(!(typeof d.workflowID=="string"&&!await xa(d.workflowID))&&!(typeof d.condition=="function"&&!await d.condition(S.tasks))&&!(typeof d.globalProperty=="string"&&!await Ca.isProp("".concat(d.globalProperty,"=true"))))return typeof d.allowTaskAfterDeath=="boolean"&&d.allowTaskAfterDeath===!1&&/died/i.test("".concat((lt=l==null?void 0:l.program)==null?void 0:lt.outcome))&&new Date(it.getSessionDate())>=new Date((rt=l==null?void 0:l.program)==null?void 0:rt.startDate)&&(L.disabled=!0),typeof d.disabled=="function"&&(L.disabled=await d.disabled(S.tasks)),E.value.push(L),E.value.sort((ut,bt)=>{var dt,ct;return((dt=ut.orderNumber)!=null?dt:9999)-((ct=bt.orderNumber)!=null?ct:9999)}),d})});const k=p=>{if(!p.disabled){if(p.task.action)T(),p.task.action();else if(p.task.component&&p.task.isFormComponent){me(Aa,{},!1,{title:p.task.name,useComponent:p.task.component,onClose:T});return}}};function T(){ra.dismiss()}return(p,l)=>(u(),b(t(ce),null,{default:n(()=>[a(t(ea),{class:"ion-no-border"},{default:n(()=>[a(t(aa),{class:"custom-header"},{default:n(()=>[o("div",Ba,[o("div",Ha,[a(t(C),{icon:t(na),class:"header-icon"},null,8,["icon"]),a(t(sa),{class:"custom-title"},{default:n(()=>[...l[0]||(l[0]=[c("Program Activities",-1)])]),_:1})]),a(t(oa),{onClick:T,fill:"clear",shape:"round"},{default:n(()=>[a(t(C),{icon:t(Et)},null,8,["icon"])]),_:1})])]),_:1})]),_:1}),a(t(Nt),{class:"custom-content"},{default:n(()=>[o("div",Ga,[E.value&&E.value.length>0?(u(),b(t(ia),{key:0,class:"tasks-grid"},{default:n(()=>[a(t(V),{class:"ion-justify-content-center"},{default:n(()=>[(u(!0),y(Z,null,yt(E.value,(d,L)=>(u(),b(t(m),{size:"12","size-sm":"6","size-md":"4","size-lg":"3",key:L,class:"task-col"},{default:n(()=>[o("div",{class:de(["task-card",{"task-completed":d.taskCompleted,"task-disabled":d.disabled}]),onClick:U=>!d.disabled&&k(d)},[o("div",Fa,[a(t(C),{color:d.taskCompleted?"success":"primary",icon:d.taskCompleted?t(Xt):d.icon,class:"task-icon"},null,8,["color","icon"])]),o("div",Wa,[a(t(R),{class:"task-label"},{default:n(()=>[c(v(d.label),1)]),_:2},1024),d.taskCompleted?(u(),y("div",Ya,[a(t(C),{icon:t(Xt),color:"success"},null,8,["icon"]),l[1]||(l[1]=o("span",null,"Completed",-1))])):f("",!0)])],10,za)]),_:2},1024))),128))]),_:1})]),_:1})):(u(),y("div",qa,[o("div",ja,[a(t(C),{icon:t(la)},null,8,["icon"])]),l[2]||(l[2]=o("h3",null,"No Activities Yet",-1)),l[3]||(l[3]=o("p",null,"Your program activities will appear here once they're available.",-1))]))])]),_:1})]),_:1}))}}),Za=St(Ka,[["__scopeId","data-v-244ec438"]]);async function Ja(x,E="tasks"){var T,p;const k=(T={1:Pa}[x])!=null?T:{};me(Za,{},!0,{tasks:(p=k==null?void 0:k[E])!=null?p:[]})}const Qa={key:5,class:"content_manager"},Xa={style:{display:"flex","justify-content":"space-between"}},tn={class:"p_name_image"},en={style:{width:"100%"}},an={class:"p_name"},nn={style:{display:"flex","justify-content":"space-between"}},sn={class:"start-visit"},on={class:"button-group"},ln={key:0,class:"send-button-container action-buttons"},rn={class:"send-button-container"},un={class:"send-button-container"},dn={class:"send-button-container"},cn={style:{"padding-left":"10px","padding-right":"10px"}},mn={class:"vitalsUnits"},pn={style:{width:"100%",overflow:"scroll",height:"64px"}},fn={key:0,style:{"margin-top":"1px"}},vn={key:0,class:"patient-chart"},_n={class:"patient-chart"},gn={key:1,class:"patient-chart"},yn={key:1},bn={key:2},Cn={key:3},An={key:4},Pn={key:5},In={class:"rght-drpm"},kn="NEONATAL PROGRAM",Dn=ht({__name:"PatientProfile",setup(x,{expose:E}){const S=P(()=>I(()=>import("./LabOrdersList-Ceee82Ps.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12]),import.meta.url)),k=P(()=>I(()=>import("./DiagnosesHistory-DcNLgENa.js"),__vite__mapDeps([13,1,2,3,4,5,6,14,7,8,9,10,15,16,17]),import.meta.url)),T=P(()=>I(()=>import("./AllergiesContraindication-D2d9OWs6.js"),__vite__mapDeps([18,1,2,3,4,5,6,19,20,21]),import.meta.url)),p=P(()=>I(()=>import("./VisitsHistory-MWUc_qPq.js"),__vite__mapDeps([22,1,2,3,4,5,6,23]),import.meta.url)),l=P(()=>I(()=>import("./VitalsMeasurementsSummary-CHPhmD2e.js"),__vite__mapDeps([24,1,2,3,4,5,6,14,7,8,9,10,15,16,25]),import.meta.url)),d=P(()=>I(()=>import("./PatientProfile-BI3Pp6_6.js"),__vite__mapDeps([26,1,2,3,4,5,6,27,28,29,30,31,32,0,7,8,9,10,11,12,33,34,35,14,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,15,16,52,53,54,55,56,57,58,59,60,19,20,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84]),import.meta.url)),L=P(()=>I(()=>import("./HTSPatientProfile-C1xequN8.js"),__vite__mapDeps([85,1,2,3,4,5,6,69,70,71,72,73,82,76,77,42,78,79,80,47,48,83,62,63,64,65,7,8,9,10,66,67,50,35,68,86]),import.meta.url)),U=P(()=>I(()=>import("./NeonatalPatientProfile-h3YafLmL.js"),__vite__mapDeps([87,1,2,3,4,5,6,82,76,77,69,70,71,72,73,42,78,79,80,47,48,83,62,63,64,88,65,7,8,9,10,66,67,50,35,68,89]),import.meta.url)),G=P(()=>I(()=>import("./AETCPatientProfile-BJv81_aX.js"),__vite__mapDeps([90,1,2,3,4,5,6,91,82,76,77,69,70,71,72,73,42,78,79,80,47,48,83,35,27,28,92,93,94,11,95,96]),import.meta.url)),lt=P(()=>I(()=>import("./WeightHeightChart-Bg4UrdHD.js"),__vite__mapDeps([62,4,1,2,3,5,6,63,64]),import.meta.url)),rt=P(()=>I(()=>import("../index-tYOBQoko.js").then(s=>s.cK),__vite__mapDeps([4,1,2,3,5,6]),import.meta.url)),ut=P(()=>I(()=>import("./BloodPressure-DJPBi12j.js"),__vite__mapDeps([97,1,2,3,5,4,6,98]),import.meta.url)),bt=P(()=>I(()=>import("./AncEnrollmentModal-CTuQX6LU.js"),__vite__mapDeps([99,1,2,3,4,5,6,7,8,9,10,91,11,82,76,77,69,70,71,72,73,42,78,79,80,47,48,83,35,27,28,95,100]),import.meta.url)),dt=P(()=>I(()=>import("./LabourEnrollmentModal-Dt5OZs4i.js"),__vite__mapDeps([101,1,2,3,4,5,6,76,77,69,70,71,72,73,42,78,79,80,7,8,9,10,91,11,82,47,48,83,35,27,28,95,102]),import.meta.url)),ct=P(()=>I(()=>import("./PNCEnrollmentModal-BI471C5A.js"),__vite__mapDeps([103,1,2,3,4,5,6,76,77,69,70,71,72,73,42,78,79,80,7,8,9,10,91,11,82,47,48,83,35,27,28,95,104]),import.meta.url)),J=ua(),pe=da(),mt=Ia(),fe=ka(),ve=Ua(),{hasWaitingList:Tt}=Sa(),{event:_e,popoverOpen:Mt,openPopover:Vt,openPIM:xt,openOutCome:ge,openUpdateNCDNUmbers:ye,printVisitSummary:be,printID:Ce,formatCurrentAddress:Ae}=Ta(),{screenWidth:Ct}=Da(),{patient:r}=wt(mt),{activeProgram:A,authorizedPrograms:Lt}=wt(fe),{ConfirmPregnancy:Pe}=wt(ve),pt=_(!1),Ie=_(!0),ke=_(!1),At=_(!1),De=_(!1),$=_("Patient Charts"),$t=_(null),we=_([]),N=_({}),z=_(!1),Q=_(!1),Ut=_(!1),Bt=_(!1),M=_([]),F=_(0),Pt=_(),X=_(""),It=_(!1),Oe=s=>s==null?void 0:s.trim().toUpperCase(),Re=s=>s===O.NEONATAL_PROGRAM||s===O.HTC_PROGRAM,Ee=s=>Oe(s)===kn,Ne=s=>{var D;if(!s)return!1;const e=(D=s.id)!=null?D:s.program_id;return Re(e)||Ee(s.name)},he=_t(()=>{var e,D;const s=(D=(e=r.value)==null?void 0:e.personInformation)==null?void 0:D.gender;return s==="Male"||s==="M"?Lt.value.filter(g=>g.name!=="ANC PROGRAM"&&g.name!=="LABOUR AND DELIVERY PROGRAM"&&g.name!=="PNC PROGRAM"):Lt.value.map(g=>{if(g.name==="ANC PROGRAM"||g.name==="LABOUR AND DELIVERY PROGRAM"||g.name==="PNC PROGRAM"){if(!(M!=null&&M.value))return;const i=M==null?void 0:M.value.some(w=>w.id===g.program_id);return{...g,actionName:i?"Start ".concat(g.name):"Enroll in ".concat(g.name)}}return g})}),Se=_t(()=>!z.value&&A.value.program_id==14),Te=_t(()=>z.value&&A.value.program_id==14),Ht=_t(()=>Ne(A.value)),Me=()=>{var s,e;if((e=(s=r.value)==null?void 0:s.personInformation)!=null&&e.birthdate){const D=H.getAgeInYears(r.value.personInformation.birthdate);It.value=D<9}},Ve=()=>{var s,e;(e=(s=r.value)==null?void 0:s.personInformation)!=null&&e.birthdate&&(Ie.value=H.getAgeInYears(r.value.personInformation.birthdate)>=14,ke.value=H.ageInMonths(r.value.personInformation.birthdate)<9,At.value=H.getAgeInYears(r.value.personInformation.birthdate)<5,De.value=H.dateDiffInDays(H.sessionDate(),r.value.personInformation.birthdate)<42)},W=s=>{$.value=s},Gt=()=>[{backgroundColor:"#B9E6FE",status:"",icon:Ot(["#B9E6FE","#026AA2","#9ADBFE"]),textColor:"#026AA2",value:"No further action is required.",name:"",index:"Blood sugar is normal"},{backgroundColor:"#FEDF89",status:"",icon:Ot(["#FEDF89","#B54708","#FED667"]),textColor:"#B54708",value:"Please call or follow up!",name:"",index:"Patient Defaulted"},{backgroundColor:"#FECDCA",status:"",icon:Ot(["#FECDCA","#B42318","#FDA19B"]),textColor:"#B42318",value:"Administer medications!",name:"",index:"Patient is hypertensive"}],zt=async()=>{if(A.value.program_id==14)try{const s=await se(mt.patient.ID);if(!s)return;z.value=!!s.length}catch(s){console.error(s)}},xe=async()=>{await oe("Are you sure you want to create the visit?")&&await Oa(mt.patient)&&(z.value=!0,await ie().refresh(at.getUserLocationId()),K("The patient visit is now active. Patient is on the waiting list for vitals"))},Le=async()=>{await oe("Are you sure you want to close the visit?")&&await Ra(r.value)&&(z.value=!1,await ie().refresh(at.getUserLocationId()),K("The patient visit is now closed"))},Ft=async()=>{if(A.value.program_id==14)try{const s=await se(mt.patient.ID);console.log("ðŸš€ ~ checkPatientIFCheckedIn ~ result:",s),z.value=s.length>0}catch(s){console.error(s)}},$e=s=>{$t.value=s,pt.value=!pt.value},Wt=(s="tasks")=>Ja(A.value.program_id,s),Yt=async s=>{var D,g,i,w,q;if(await Y(),(s.program_id==O.ANC_PROGRAM||s.program_id==O.PNC_PROGRAM||s.program_id==O.LABOUR_AND_DELIVERY_PROGRAM)&&!((D=M==null?void 0:M.value)==null?void 0:D.find(ft=>ft.id==s.program_id))){if(s.program_id==O.ANC_PROGRAM){Q.value=!0,F.value=s.program_id;return}else if(s.program_id==O.LABOUR_AND_DELIVERY_PROGRAM){Ut.value=!0,X.value="Are you sure you want to enroll ".concat((i=(g=r.value)==null?void 0:g.personInformation)==null?void 0:i.given_name.toUpperCase()," in this program?"),F.value=s.program_id;return}else if(s.program_id==O.PNC_PROGRAM){Bt.value=!0,X.value="Are you sure you want to enroll ".concat((q=(w=r.value)==null?void 0:w.personInformation)==null?void 0:q.given_name.toUpperCase()," in this program?"),F.value=s.program_id;return}}const e=await et.userProgramData(r.value.patientID,s);if(s.program_id===14)if(e!=null&&e.canProceed&&e.url&&e.stage){const B=Ue(e.stage);if(!B){nt("Unable to determine patient stage");return}if(Tt(B))return J.push(e.url);nt("You don't have access to the ".concat(B.toLowerCase()));return}else{nt("The visit is not activated");return}if(e!=null&&e.url)return J.push(e.url)},Ue=s=>{switch(s){case"VITALS":return"Waiting for Vitals";case"CONSULTATION":return"Waiting for Consultation";case"LAB":return"Waiting for Laboratory";case"DISPENSATION":return"Waiting for Dispensation";default:return null}},kt=()=>{Q.value=!1},qt=()=>{Q.value=!Q.value},Be=async()=>{const s=at.getUserID(),e=new ha(r.value.patientID,s);if(!await e.createEncounter())return nt("Unable to create quick check encounter");const g=await e.saveObservationList(await We());try{await ot.enrollProgram(r.value.patientID,F.value,new Date().toString()),K("Enrollment is successful")}catch(i){K("Already Enrolled")}return g?(await Y(),qt(),J.push("ANCHome")):nt("Unable to create quick check details!")},He=async()=>(await ot.enrollProgram(r.value.patientID,F.value,new Date().toString()),await Y(),K("Enrollment is successful"),J.push("LabourHome")),Ge=async()=>(await ot.enrollProgram(r.value.patientID,F.value,new Date().toString()),await Y(),K("Enrollment is successful"),J.push("PNCHome")),Y=async()=>{const s=r.activePrograms;M.value=s==null?void 0:s.map(e=>({name:e.program.name,id:e.program_id}))},Dt=()=>{qt()},jt=async()=>{(await Ea.getLatestObsByEncounterIdAndConcepts(6,["Height (cm)","Weight (kg)","Systolic blood pressure","Diastolic blood pressure","Temperature (c)","Pulse"])).map(e=>{e.concept_name==="Height (cm)"&&(N.value.height=e.value_numeric),e.concept_name==="Weight (kg)"&&(N.value.weight=e.value_numeric),e.concept_name==="Systolic blood pressure"&&(N.value.systolic=e.value_numeric),e.concept_name==="Diastolic blood pressure"&&(N.value.diastolic=e.value_numeric),e.concept_name==="Temperature (c)"&&(N.value.temperature=e.value_numeric),e.concept_name==="Pulse"&&(N.value.pulse=e.value_numeric)}),Pt.value=new it().getBloodGlucose(r.value)},ze=s=>s=="Undetermined"?"Undetermined":["Male","M"].includes(s)?"Male":["Female","F"].includes(s)?"Female":"",Fe=()=>{var s,e;return H.getBirthdateAge((e=(s=r.value)==null?void 0:s.personInformation)==null?void 0:e.birthdate)},We=async()=>await Ma(Pe.value);return ue(async()=>{await zt(),await et.userProgramData(r.value.patientID),Ve();const s=new it;we.value=await it.getPatientVisits(s.getID(),!1),await Y(),Gt(),await jt(),await Ft()}),st(()=>{var s;return(s=r.value)==null?void 0:s.patientID},async s=>{s&&(await et.userProgramData(s),await Y())},{immediate:!0}),st(()=>r,async()=>{await et.userProgramData(r.value.patientID),await jt(),await Ft(),await zt()},{deep:!0}),st(pe,async s=>{await et.userProgramData(r.value.patientID)},{deep:!0}),st(()=>r.value,()=>{Me()},{immediate:!0,deep:!0}),E({showUnderageWarning:It}),(s,e)=>{const D=te("ion-list"),g=te("ion-popover");return u(),b(t(ce),null,{default:n(()=>[a(wa),a(t(Nt),{fullscreen:!0},{default:n(()=>[t(A).program_id!==33&&t(A).program_id!=""&&t(Ct)<1120?(u(),b(Va,{key:0,onOpenPopover:e[0]||(e[0]=i=>t(Vt)(i))})):f("",!0),a(t(bt),{closeModalFunc:kt,onYes:Be,onNo:Dt,isOpen:Q.value,title:X.value,showUnderageWarning:It.value},null,8,["isOpen","title","showUnderageWarning"]),a(t(dt),{closeModalFunc:kt,onYes:He,onNo:Dt,isOpen:Ut.value,title:X.value},null,8,["isOpen","title"]),a(t(ct),{closeModalFunc:kt,onYes:Ge,onNo:Dt,isOpen:Bt.value,title:X.value},null,8,["isOpen","title"]),t(A).program_id==t(O).IMMUNIZATION_PROGRAM?(u(),b(t(d),{key:1,updateData:t(r)},null,8,["updateData"])):f("",!0),t(A).program_id==t(O).HTS_PROGRAM?(u(),b(t(L),{key:2,updateData:t(r)},null,8,["updateData"])):f("",!0),t(A).program_id==t(O).AETC_PROGRAM?(u(),b(t(G),{key:3,updateData:t(r)},null,8,["updateData"])):f("",!0),Ht.value?(u(),b(t(U),{key:4})):f("",!0),t(A).program_id!==t(O).AETC_PROGRAM&&t(A).program_id!==t(O).IMMUNIZATION_PROGRAM&&t(A).program_id!==t(O).HTS_PROGRAM&&!Ht.value&&t(A).program_id!=""?(u(),y("div",Qa,[a(t(V),{class:"content_width"},{default:n(()=>[a(t(m),{size:"2.5","size-lg":"2.6","size-md":"3",class:"displayNoneLeftPanel"},{default:n(()=>[a(t(gt),{style:{"margin-bottom":"20px","background-color":"#fff"}},{default:n(()=>[a(t(Rt),null,{default:n(()=>{var i,w,q,B,ft,Kt,Zt,Jt;return[o("div",Xa,[e[22]||(e[22]=o("div",null,null,-1)),o("div",{class:"name",style:{color:"var(--ion-color-primary)","margin-top":"10px"},onClick:e[1]||(e[1]=tt=>t(Vt)(tt))},[a(t(C),{icon:t(ca),style:{"font-size":"2.2rem"}},null,8,["icon"])])]),o("div",tn,[o("div",{class:de(((w=(i=t(r))==null?void 0:i.personInformation)==null?void 0:w.gender)=="M"?"initialsBox maleColor":"initialsBox femaleColor"),onClick:e[2]||(e[2]=tt=>t(xt)())},[a(t(C),{style:{color:"#fff","font-size":"70px"},icon:t(ma)},null,8,["icon"])],2),o("div",en,[o("div",an,v((B=(q=t(r))==null?void 0:q.personInformation)==null?void 0:B.given_name)+" "+v((Kt=(ft=t(r))==null?void 0:ft.personInformation)==null?void 0:Kt.middle_name)+" "+v((Jt=(Zt=t(r))==null?void 0:Zt.personInformation)==null?void 0:Jt.family_name),1)])]),a(t(V),null,{default:n(()=>[a(t(m),{size:"4"},{default:n(()=>[...e[23]||(e[23]=[c("MRN:",-1)])]),_:1}),a(t(m),{class:"demoContent"},{default:n(()=>[c(v(t(r).ID),1)]),_:1})]),_:1}),t(A).program_id===32?(u(),b(t(V),{key:0},{default:n(()=>[a(t(m),{size:"4"},{default:n(()=>[...e[24]||(e[24]=[c("NCDNumber:",-1)])]),_:1}),a(t(m),{class:"demoContent"},{default:n(()=>[c(v(t(r).NcdID),1)]),_:1})]),_:1})):f("",!0),a(t(V),null,{default:n(()=>[a(t(m),{size:"4"},{default:n(()=>[...e[25]||(e[25]=[c("Gender:",-1)])]),_:1}),a(t(m),{class:"demoContent"},{default:n(()=>{var tt,Qt;return[c(v(ze((Qt=(tt=t(r))==null?void 0:tt.personInformation)==null?void 0:Qt.gender)),1)]}),_:1})]),_:1}),a(t(V),null,{default:n(()=>[a(t(m),{size:"4"},{default:n(()=>[...e[26]||(e[26]=[c("Age:",-1)])]),_:1}),a(t(m),{class:"demoContent"},{default:n(()=>[c(v(Fe()),1)]),_:1})]),_:1}),a(t(V),null,{default:n(()=>[a(t(m),{size:"4"},{default:n(()=>[...e[27]||(e[27]=[c("Address:",-1)])]),_:1}),a(t(m),{class:"demoContent"},{default:n(()=>[c(v(t(Ae)(t(r))),1)]),_:1})]),_:1})]}),_:1})]),_:1}),t(at).getProgramID()===1?(u(),b($a,{key:0,patient:t(r)},null,8,["patient"])):f("",!0),a(t(gt),{style:{"margin-bottom":"20px","background-color":"#fff"}},{default:n(()=>[a(t(pa),{value:["first"]},{default:n(()=>[a(t(fa),{value:"first",style:{"background-color":"#fff"},"toggle-icon-slot":"start"},{default:n(()=>[a(t(h),{slot:"header",color:"white"},{default:n(()=>[a(t(R),{class:"side_title"},{default:n(()=>[...e[28]||(e[28]=[c("Alerts & Reminders ",-1)])]),_:1})]),_:1}),a(t(Rt),{slot:"content"},{default:n(()=>[(u(!0),y(Z,null,yt(Gt(),(i,w)=>(u(),y("span",{key:w},[i.value?(u(),b(t(V),{key:0,style:ee("border-radius: 5px;  margin-top:10px; margin-bottom:10px;background-color:"+i.backgroundColor)},null,8,["style"])):f("",!0)]))),128))]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),a(t(m),{offset:"0.07","size-sm":"12","size-md":"12","size-lg":t(Ct)>1120?"9.33":"12"},{default:n(()=>[a(t(gt),{style:{"background-color":"#fff","margin-inline":"0px",contain:"unset",overflow:"unset"}},{default:n(()=>[o("div",null,[o("div",nn,[e[29]||(e[29]=o("div",{class:"vitalsTitle"},"Most recent Vitals & Biometrics",-1)),o("div",sn,[o("div",on,[t(Tt)("Waiting for Laboratory")?f("",!0):(u(),y("div",ln,[Se.value?(u(),b(ne,{key:0,name:"Activate visit",onClick:e[3]||(e[3]=i=>xe()),fill:"clear",iconSlot:"start",icon:t(Et),class:"action-button"},null,8,["icon"])):f("",!0),Te.value?(u(),b(ne,{key:1,name:"Deactivate visit",onClick:e[4]||(e[4]=i=>Le()),fill:"clear",iconSlot:"start",icon:t(Et),class:"action-button danger"},null,8,["icon"])):f("",!0)])),o("div",rn,[o("button",{class:"send-text",onClick:e[5]||(e[5]=i=>Wt())},"Tasks")]),o("div",un,[o("button",{class:"send-text",onClick:e[6]||(e[6]=i=>Wt("other"))},"Printout/Other")]),o("div",dn,[o("button",{class:"send-text",onClick:e[7]||(e[7]=i=>Yt(t(A)))},"Start visit"),o("button",{class:"send-arrow",onClick:e[8]||(e[8]=i=>$e(i))})])])])])]),o("div",cn,[a(t(V),null,{default:n(()=>[a(t(m),{class:"vitalsHeading"},{default:n(()=>[...e[30]||(e[30]=[c("Weight",-1)])]),_:1}),a(t(m),{class:"vitalsHeading"},{default:n(()=>[...e[31]||(e[31]=[c("Height",-1)])]),_:1}),a(t(m),{class:"vitalsHeading"},{default:n(()=>[...e[32]||(e[32]=[c("Temperature",-1)])]),_:1}),a(t(m),{class:"vitalsHeading"},{default:n(()=>[...e[33]||(e[33]=[c("Blood glucose",-1)])]),_:1}),a(t(m),{class:"vitalsHeading"},{default:n(()=>[...e[34]||(e[34]=[c("Pulse Rate",-1)])]),_:1}),a(t(m),{class:"vitalsHeading"},{default:n(()=>[...e[35]||(e[35]=[c("Blood pressure",-1)])]),_:1})]),_:1}),a(t(V),null,{default:n(()=>[a(t(m),{class:"vitalsValue"},{default:n(()=>[c(v(N.value.weight)+" ",1),e[36]||(e[36]=o("span",{class:"vitalsUnits"},"kg",-1))]),_:1}),a(t(m),{class:"vitalsValue"},{default:n(()=>[c(v(N.value.height)+" ",1),e[37]||(e[37]=o("span",{class:"vitalsUnits"},"cm",-1))]),_:1}),a(t(m),{class:"vitalsValue"},{default:n(()=>[c(v(N.value.temperature)+" ",1),e[38]||(e[38]=o("span",{class:"vitalsUnits"},"Â°C",-1))]),_:1}),a(t(m),{class:"vitalsValue"},{default:n(()=>{var i,w;return[c(v((i=Pt.value)==null?void 0:i.value)+" ",1),o("span",mn,v((w=Pt.value)==null?void 0:w.unit),1)]}),_:1}),a(t(m),{class:"vitalsValue"},{default:n(()=>[c(v(N.value.pulse)+" ",1),e[39]||(e[39]=o("span",{class:"vitalsUnits"},"bpm ",-1))]),_:1}),a(t(m),{class:"vitalsValue"},{default:n(()=>[c(v(N.value.systolic)+"/"+v(N.value.diastolic),1),e[40]||(e[40]=o("span",{class:"vitalsUnits"},"mmhg",-1))]),_:1})]),_:1})])]),_:1}),o("div",pn,[a(t(va),{value:$.value,style:{"margin-top":"5px","min-width":"540px"}},{default:n(()=>[a(t(j),{value:"Patient Charts",onClick:e[9]||(e[9]=i=>W("Patient Charts"))},{default:n(()=>[a(t(R),null,{default:n(()=>[...e[41]||(e[41]=[c("Patient Charts",-1)])]),_:1})]),_:1}),a(t(j),{value:"Visits History",onClick:e[10]||(e[10]=i=>W("Visits History"))},{default:n(()=>[a(t(R),null,{default:n(()=>[...e[42]||(e[42]=[c("Visits History",-1)])]),_:1})]),_:1}),a(t(j),{value:"Vitals & Measurements Summary",onClick:e[11]||(e[11]=i=>W("Vitals & Measurements Summary"))},{default:n(()=>[a(t(R),null,{default:n(()=>[...e[43]||(e[43]=[c("Vitals & Measurements Summary",-1)])]),_:1})]),_:1}),a(t(j),{value:"Lab Tests History",onClick:e[12]||(e[12]=i=>W("Lab Tests History"))},{default:n(()=>[a(t(R),null,{default:n(()=>[...e[44]||(e[44]=[c("Lab Tests History",-1)])]),_:1})]),_:1}),a(t(j),{value:"Diagnosis History",onClick:e[13]||(e[13]=i=>W("Diagnosis History"))},{default:n(()=>[a(t(R),null,{default:n(()=>[...e[45]||(e[45]=[c("Diagnosis History",-1)])]),_:1})]),_:1}),a(t(j),{value:"Allergies & Contraindication",onClick:e[14]||(e[14]=i=>W("Allergies & Contraindication"))},{default:n(()=>[a(t(R),null,{default:n(()=>[...e[46]||(e[46]=[c("Allergies & Contraindication",-1)])]),_:1})]),_:1})]),_:1},8,["value"])]),$.value=="Patient Charts"?(u(),y("div",fn,[o("div",{style:ee(t(Ct)>826?"display: flex;":"display: block;")},[At.value?(u(),y("div",vn,[a(t(lt))])):f("",!0),o("div",_n,[a(t(ut))]),At.value?f("",!0):(u(),y("div",gn,[a(t(rt))]))],4)])):f("",!0),$.value=="Visits History"?(u(),y("div",yn,[a(t(p))])):f("",!0),$.value=="Vitals & Measurements Summary"?(u(),y("div",bn,[a(t(l))])):f("",!0),$.value=="Lab Tests History"?(u(),y("div",Cn,[a(t(S))])):f("",!0),$.value=="Diagnosis History"?(u(),y("div",An,[a(t(k))])):f("",!0),$.value=="Allergies & Contraindication"?(u(),y("div",Pn,[a(t(T))])):f("",!0)]),_:1},8,["size-lg"])]),_:1})])):f("",!0)]),_:1}),a(g,{style:{"--offset-x":"-10px"},"is-open":t(Mt),"show-backdrop":!1,"dismiss-on-select":!0,event:t(_e),onDidDismiss:e[20]||(e[20]=i=>Mt.value=!1)},{default:n(()=>[o("div",null,[a(D,{style:{"--ion-background-color":"#fff","--offset-x":"-30px"}},{default:n(()=>[a(t(h),{button:!0,detail:!1,onClick:e[15]||(e[15]=i=>t(xt)()),style:{cursor:"pointer"},class:"list-content"},{default:n(()=>[a(t(C),{icon:t(_a),slot:"start",class:"sub-menu-icon"},null,8,["icon"]),e[47]||(e[47]=o("span",{class:"sub-menu-txt"},"Update demographics",-1))]),_:1}),a(t(h),{button:!0,detail:!1,onClick:e[16]||(e[16]=i=>t(ge)()),style:{cursor:"pointer"},class:"list-content"},{default:n(()=>[a(t(C),{icon:t(ga),slot:"start",class:"sub-menu-icon"},null,8,["icon"]),e[48]||(e[48]=o("span",{class:"sub-menu-txt"},"Update outcome",-1))]),_:1}),t(at).getProgramID()==32?(u(),b(t(h),{key:0,button:!0,detail:!1,onClick:e[17]||(e[17]=i=>t(ye)()),style:{cursor:"pointer"},class:"list-content"},{default:n(()=>[a(t(C),{icon:t(re),slot:"start",class:"sub-menu-icon"},null,8,["icon"]),e[49]||(e[49]=o("span",{class:"sub-menu-txt"},"Update NCD Number",-1))]),_:1})):f("",!0),a(t(h),{button:!0,detail:!1,onClick:e[18]||(e[18]=i=>t(be)()),style:{cursor:"pointer"},class:"list-content"},{default:n(()=>[a(t(C),{icon:t(ae),slot:"start",class:"sub-menu-icon"},null,8,["icon"]),e[50]||(e[50]=o("span",{class:"sub-menu-txt"},"Print visit summary",-1))]),_:1}),a(t(h),{button:!0,detail:!1,onClick:e[19]||(e[19]=i=>t(Ce)()),style:{cursor:"pointer"},class:"list-content"},{default:n(()=>[a(t(C),{icon:t(ae),slot:"start",class:"sub-menu-icon"},null,8,["icon"]),e[51]||(e[51]=o("span",{class:"sub-menu-txt"},"Print client identifier",-1))]),_:1})]),_:1})])]),_:1},8,["is-open","event"]),a(g,{"is-open":pt.value,"show-backdrop":!1,"dismiss-on-select":!0,event:$t.value,onDidDismiss:e[21]||(e[21]=i=>pt.value=!1),style:{"--width":"350px"}},{default:n(()=>[a(t(Nt),null,{default:n(()=>[a(D,null,{default:n(()=>[(u(!0),y(Z,null,yt(he.value,(i,w)=>(u(),b(t(h),{button:!0,detail:!1,style:{cursor:"pointer"},key:w,onClick:q=>Yt(i)},{default:n(()=>[a(t(C),{slot:"start",icon:t(ya)},null,8,["icon"]),o("span",In,v(i==null?void 0:i.actionName),1)]),_:2},1032,["onClick"]))),128))]),_:1})]),_:1})]),_:1},8,["is-open","event"])]),_:1})}}}),wn=St(Dn,[["__scopeId","data-v-1648d699"]]),xn=Object.freeze(Object.defineProperty({__proto__:null,default:wn},Symbol.toStringTag,{value:"Module"}));export{$a as A,xn as P,Ua as u};
