!function(){function a(a,e,t){return(e=function(a){var e=function(a,e){if("object"!=typeof a||!a)return a;var t=a[Symbol.toPrimitive];if(void 0!==t){var n=t.call(a,e||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(a)}(a,"string");return"symbol"==typeof e?e:e+""}(e))in a?Object.defineProperty(a,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):a[e]=t,a}System.register(["./vendor-legacy-BV-WGgzk.js","../index-legacy-BUxrhWpn.js","./neonatal_service-legacy-CuNTW79e.js","./images-legacy-gTS9vAYU.js","./lodash-legacy-pOOc9Efu.js","./apexcharts-legacy-CgZ9vWXi.js"],function(e,t){"use strict";var n,i,o,l,s,c,r,d,u,v,p,g,m,f,x,b,h,y,w,k,_,C,S,z,I,j,$,N,T,A,M,D,L,P,E,F,H,B,O,R;return{setters:[a=>{n=a.d,i=a.O,o=a.f,l=a.u,s=a.bp,c=a.p,r=a.J,d=a.l,u=a.aT,v=a.k,p=a.e,g=a.m,m=a.K,f=a.c,x=a.Q,b=a.bh,h=a.I,y=a.G,w=a.E,k=a.aZ,_=a.N,C=a.L,S=a.aR,z=a.a3,I=a.j,j=a.an,$=a.r,N=a.a,T=a.a4,A=a.F,M=a.P,D=a.a5,L=a.bl,P=a.dQ,E=a.a6},a=>{F=a._,H=a.u,B=a.T},a=>{O=a.N},a=>{R=a.I},null,null],execute:function(){var t=document.createElement("style");t.textContent=".stat-card[data-v-cc8c780a]{margin:8px;border-radius:12px;box-shadow:0 2px 8px rgba(0,0,0,.1);transition:transform .2s ease;cursor:default}.stat-card.is-clickable[data-v-cc8c780a]{cursor:pointer}.stat-card.is-clickable[data-v-cc8c780a]:hover{transform:translateY(-2px);box-shadow:0 4px 12px rgba(0,0,0,.15)}.stat-content[data-v-cc8c780a]{text-align:center;padding:20px 16px}.stat-icon-wrapper[data-v-cc8c780a]{display:flex;justify-content:center;align-items:center;margin-bottom:12px}.stat-icon[data-v-cc8c780a]{width:60px;height:60px;object-fit:contain}.stat-icon.critical-icon[data-v-cc8c780a]{width:60px;height:60px}.stat-label[data-v-cc8c780a]{font-size:14px;color:#666;margin-bottom:8px;min-height:32px;display:flex;align-items:center;justify-content:center}.stat-value[data-v-cc8c780a]{font-size:28px;font-weight:700;color:#333}.stat-value.critical-value[data-v-cc8c780a]{color:#dc3545}@media(max-width:768px){.stat-card[data-v-cc8c780a]{margin:4px}.stat-content[data-v-cc8c780a]{padding:16px 12px}.stat-icon[data-v-cc8c780a]{width:50px;height:50px}.stat-label[data-v-cc8c780a]{font-size:12px;min-height:28px}.stat-value[data-v-cc8c780a]{font-size:24px}}.action-card[data-v-fc22b927]{margin:8px;border-radius:12px;box-shadow:0 2px 8px rgba(0,0,0,.1);cursor:pointer;transition:transform .2s ease;background:#f8f9fa}.action-card[data-v-fc22b927]:hover{transform:translateY(-2px);box-shadow:0 4px 12px rgba(0,0,0,.15)}.action-content[data-v-fc22b927]{text-align:center;padding:24px 16px}.action-icon-wrapper[data-v-fc22b927]{display:flex;justify-content:center;align-items:center;margin-bottom:12px}.action-icon[data-v-fc22b927],.action-icon.emergency-icon[data-v-fc22b927]{width:80px;height:80px}.action-label[data-v-fc22b927]{font-size:16px;font-weight:500;color:#333}@media(max-width:768px){.action-card[data-v-fc22b927]{margin:4px}.action-content[data-v-fc22b927]{padding:20px 12px}.action-icon[data-v-fc22b927]{width:60px;height:60px}.action-label[data-v-fc22b927]{font-size:14px}}.neonate-card[data-v-60eeda47]{border-radius:12px;box-shadow:0 2px 8px rgba(0,0,0,.1);cursor:pointer;transition:transform .2s ease;margin:0}.neonate-card[data-v-60eeda47]:hover{transform:translate(4px);box-shadow:0 4px 12px rgba(0,0,0,.15)}.neonate-content[data-v-60eeda47]{display:flex;justify-content:space-between;align-items:center;padding:16px}.neonate-info[data-v-60eeda47]{flex:1}.neonate-name[data-v-60eeda47]{font-size:16px;font-weight:600;color:#333;margin-bottom:4px}.neonate-mrn[data-v-60eeda47]{font-size:14px;color:#666;margin-bottom:8px}.neonate-details[data-v-60eeda47]{display:flex;gap:16px;font-size:14px;color:#666}.detail-item[data-v-60eeda47]{display:flex;align-items:center;gap:4px}.detail-icon[data-v-60eeda47]{font-size:16px;height:16px}.neonate-status[data-v-60eeda47]{flex-shrink:0}.status-badge[data-v-60eeda47]{padding:8px 16px;border-radius:20px;font-size:14px;font-weight:600}.status-primary[data-v-60eeda47]{background-color:rgba(var(--ion-color-primary-rgb),.15);color:rgba(var(--ion-color-primary-rgb),.85)}.status-danger[data-v-60eeda47]{background-color:rgba(var(--ion-color-danger-rgb),.15);color:rgba(var(--ion-color-danger-rgb),.85)}.status-success[data-v-60eeda47]{background-color:rgba(var(--ion-color-success-rgb),.15);color:rgba(var(--ion-color-success-rgb),.85)}.status-warning[data-v-60eeda47]{background-color:rgba(var(--ion-color-warning-rgb),.15);color:rgba(var(--ion-color-warning-rgb),.85)}.status-medium[data-v-60eeda47]{background-color:rgba(var(--ion-color-medium-rgb),.15);color:rgba(var(--ion-color-medium-rgb),.85)}@media(max-width:768px){.neonate-content[data-v-60eeda47]{padding:12px}.neonate-name[data-v-60eeda47]{font-size:15px}.neonate-mrn[data-v-60eeda47]{font-size:13px}.neonate-details[data-v-60eeda47]{font-size:13px;gap:12px}.status-badge[data-v-60eeda47]{padding:6px 12px;font-size:12px}}@media(max-width:576px){.neonate-content[data-v-60eeda47]{flex-direction:column;align-items:flex-start;gap:12px}.neonate-status[data-v-60eeda47]{width:100%;display:flex;justify-content:flex-end}}.drilldown-modal[data-v-912ed09a]{--height: 90%}.drilldown-content[data-v-912ed09a]{padding:20px}.drilldown-list[data-v-912ed09a]{display:flex;flex-direction:column;gap:12px;max-height:70vh;overflow-y:auto}.empty-drilldown[data-v-912ed09a]{text-align:center;padding:32px 16px;color:#7a7a7a;font-size:14px}.drilldown-list[data-v-912ed09a] .neonate-card{box-shadow:0 4px 12px rgba(0,0,0,.15)}.drilldown-list[data-v-912ed09a] .neonate-card:hover{box-shadow:0 6px 16px rgba(0,0,0,.2)}.neonatal-dashboard[data-v-f305a4c6]{width:100%;padding:0;margin:0}.header-image[data-v-f305a4c6]{width:100%;height:200px;overflow:hidden;position:relative}.header-image img[data-v-f305a4c6]{width:100%;height:100%;object-fit:cover;filter:brightness(.9)}.section-container[data-v-f305a4c6]{padding:20px;max-width:1200px;margin:0 auto}.section-title[data-v-f305a4c6]{font-size:20px;font-weight:600;color:#5a5a5a;margin-bottom:16px;padding-left:4px}.stats-grid[data-v-f305a4c6],.actions-grid[data-v-f305a4c6]{padding:0}.neonates-list[data-v-f305a4c6]{display:flex;flex-direction:column;gap:12px}.empty-neonates[data-v-f305a4c6]{text-align:center;padding:24px 0;color:#8a8a8a;font-size:14px}.neonate-skeleton[data-v-f305a4c6]{display:flex;align-items:center;gap:16px;padding:16px;background:#fff;border-radius:12px;box-shadow:0 2px 4px rgba(0,0,0,.08)}.skeleton-content[data-v-f305a4c6]{flex:1;display:flex;flex-direction:column;gap:4px}@media(max-width:768px){.header-image[data-v-f305a4c6]{height:150px}.section-container[data-v-f305a4c6]{padding:16px}.section-title[data-v-f305a4c6]{font-size:18px;margin-bottom:12px}}ion-content[data-v-052dae1c]{--background: #f5f5f5}\n/*$vite$:1*/",document.head.appendChild(t);class q{constructor(){a(this,"statusColorMap",{admitted:"primary",discharged:"success",critical:"warning"})}getStatusColor(a){var e;return null!==(e=this.statusColorMap[a.toLowerCase()])&&void 0!==e?e:"medium"}formatWeight(a){return`${(a/1e3).toFixed(2)} kg`}static getInstance(){return q.instance||(q.instance=new q),q.instance}}a(q,"instance",void 0);const Q=q.getInstance(),G=[{label:"Triaged without Registration",key:"enrolled",iconSrc:R.icons.triaged},{label:"Admitted Today",key:"admitted",iconSrc:R.icons.newborn},{label:"Discharged Today",key:"discharged",iconSrc:R.icons.babyCarriage},{label:"Critical",key:"critical",iconSrc:R.icons.warningSign,isCritical:!0}],K=[{label:"Start Emergency Triage",iconSrc:R.icons.electrocardiogram,iconClass:"emergency-icon",route:"/neonatal/triage",query:{source:"dashboard"}},{label:"Instruction Guides",iconSrc:R.icons.info,route:"/neonatal/guides"}],U={class:"stat-icon-wrapper"},W=["innerHTML"],Y=["src","alt"],J={class:"stat-label"},Z=n({__name:"card",props:{label:{},value:{},iconSrc:{},svgIcon:{},isCritical:{type:Boolean},clickable:{type:Boolean}},emits:["click"],setup(a,{emit:e}){const t=a,n=e,f=()=>{t.clickable&&n("click")};return(e,t)=>(o(),i(l(s),{class:c(["stat-card",{"is-clickable":a.clickable}]),onClick:f},{default:r(()=>[d(l(u),{class:"stat-content"},{default:r(()=>[v("div",U,[a.svgIcon?(o(),p("div",{key:0,innerHTML:a.svgIcon,class:"stat-icon"},null,8,W)):a.iconSrc?(o(),p("img",{key:1,src:a.iconSrc,class:"stat-icon critical-icon",alt:a.label},null,8,Y)):g("",!0)]),v("div",J,m(a.label),1),v("div",{class:c(["stat-value",{"critical-value":a.isCritical}])},m(a.value),3)]),_:1})]),_:1},8,["class"]))}}),V=F(Z,[["__scopeId","data-v-cc8c780a"]]),X={class:"action-icon-wrapper"},aa=["innerHTML"],ea=["src","alt"],ta={class:"action-label"},na=F(n({__name:"action-card",props:{label:{},svgIcon:{},iconSrc:{},iconClass:{}},emits:["click"],setup(a,{emit:e}){const t=e,n=()=>{t("click")};return(e,t)=>(o(),i(l(s),{class:"action-card",onClick:n},{default:r(()=>[d(l(u),{class:"action-content"},{default:r(()=>[v("div",X,[a.svgIcon?(o(),p("div",{key:0,innerHTML:a.svgIcon,class:c(["action-icon",a.iconClass])},null,10,aa)):a.iconSrc?(o(),p("img",{key:1,src:a.iconSrc,class:c(["action-icon",a.iconClass]),alt:a.label},null,10,ea)):g("",!0)]),v("div",ta,m(a.label),1)]),_:1})]),_:1}))}}),[["__scopeId","data-v-fc22b927"]]),ia={class:"neonate-info"},oa={class:"neonate-name"},la={class:"neonate-mrn"},sa={class:"neonate-details"},ca={class:"detail-item"},ra=["src"],da={class:"detail-item"},ua=["src"],va={class:"neonate-status"},pa=F(n({__name:"neonate-card",props:{neonate:{},getStatusColor:{type:Function}},emits:["click"],setup(a,{emit:e}){const t=a,n=e,p=f(()=>t.getStatusColor(t.neonate.status)),g=()=>{n("click",t.neonate.id)};return(e,t)=>(o(),i(l(s),{class:"neonate-card",onClick:g},{default:r(()=>[d(l(u),{class:"neonate-content"},{default:r(()=>[v("div",ia,[v("div",oa,m(a.neonate.name),1),v("div",la,m(a.neonate.mrn),1),v("div",sa,[v("span",ca,[v("img",{src:l(R).icons.deliveryTime,class:"detail-icon"},null,8,ra),x(" "+m(a.neonate.age),1)]),v("span",da,[v("img",{src:l(R).icons.babyWeight,class:"detail-icon"},null,8,ua),x(" "+m(a.neonate.weight),1)])])]),v("div",va,[v("div",{class:c(["status-badge",`status-${p.value}`])},m(a.neonate.status),3)])]),_:1})]),_:1}))}}),[["__scopeId","data-v-60eeda47"]]),ga={class:"drilldown-content"},ma={key:0,class:"empty-drilldown"},fa={key:1,class:"drilldown-list"},xa=n({__name:"DrilldownModal",props:{isOpen:{type:Boolean},title:{},isEmpty:{type:Boolean,default:!1},emptyMessage:{default:"No items available."}},emits:["close","dismiss"],setup(a,{emit:e}){const t=e,n=S,s=()=>{t("close")},c=()=>{t("dismiss")};return(e,t)=>(o(),i(l(b),{"is-open":a.isOpen,onDidDismiss:c,class:"drilldown-modal"},{default:r(()=>[d(l(h),null,{default:r(()=>[d(l(y),null,{default:r(()=>[d(l(w),null,{default:r(()=>[x(m(a.title),1)]),_:1}),d(l(k),{slot:"end"},{default:r(()=>[d(l(_),{fill:"clear",onClick:s},{default:r(()=>[d(l(C),{slot:"icon-only",icon:l(n)},null,8,["icon"])]),_:1})]),_:1})]),_:1})]),_:1}),d(l(z),null,{default:r(()=>[v("div",ga,[a.isEmpty?(o(),p("div",ma,m(a.emptyMessage),1)):(o(),p("div",fa,[I(e.$slots,"default",{},void 0,!0)]))])]),_:3})]),_:3},8,["is-open"]))}}),ba=F(xa,[["__scopeId","data-v-912ed09a"]]),ha={class:"neonatal-dashboard"},ya={class:"header-image"},wa=["src"],ka={class:"section-container"},_a={class:"section-container"},Ca={class:"section-container"},Sa={key:0,class:"neonates-list"},za={class:"skeleton-content"},Ia={key:1,class:"neonates-list"},ja={key:2,class:"empty-neonates"},$a=F(n({__name:"LandingPage",setup(a){const e={enrolled:"In patient",admitted:"Admitted",discharged:"Discharged",critical:"Critical"},t=()=>G.reduce((a,e)=>(a[e.key]={count:0,neonates:[]},a),{}),n=j(),s=$(t()),c=$([]),u=$(!0),g=$(!1),m=$(null),x=f(()=>{var a,e;return m.value&&null!==(a=null===(e=s.value[m.value])||void 0===e?void 0:e.neonates)&&void 0!==a?a:[]}),b=f(()=>{const a=(e=m.value)&&null!==(t=null===(n=G.find(a=>a.key===e))||void 0===n?void 0:n.label)&&void 0!==t?t:"Neonates";var e,t,n;return x.value.length?`${a} (${x.value.length})`:a}),h=a=>{var e,t;return(null!==(e=null===(t=s.value[a])||void 0===t?void 0:t.neonates.length)&&void 0!==e?e:0)>0},y=()=>{g.value=!1,m.value=null},w=a=>{n.push({path:a})},k=async a=>{try{const e=H();await e.setPatientRecord({patientID:Number(a)}),w(`/patientProfile?id=${a}`)}catch(e){console.error("[NeonatalLanding] Failed to load patient:",e),w(`/patientProfile?id=${a}`)}},_=a=>Q.getStatusColor(a),C=a=>{const e=t();return G.forEach(t=>{var n,i;const o=t.key,l=null!==(n=null==a?void 0:a[o])&&void 0!==n?n:null==a||null===(i=a.stats)||void 0===i?void 0:i[o],s=S(a,o);e[o]=z(l,s,o)}),e},S=(a,e)=>{var t,n,i,o,l;if(!a)return[];return null!==(l=[null==a||null===(t=a.neonates)||void 0===t?void 0:t[e],null==a||null===(n=a.details)||void 0===n?void 0:n[e],null==a?void 0:a[`${e}_neonates`],null==a?void 0:a[`${e}_patients`],null==a?void 0:a[`${e}_records`],null==a||null===(i=a[e])||void 0===i?void 0:i.neonates,null==a||null===(o=a[e])||void 0===o?void 0:o.patients].find(a=>Array.isArray(a)))&&void 0!==l?l:[]},z=(a,e,t)=>{if("number"==typeof a)return{count:a,neonates:I(e,t)};if(a&&"object"==typeof a){const n=Array.isArray(a.neonates)?a.neonates:Array.isArray(a.patients)?a.patients:e,i=I(n,t);return{count:"number"==typeof a.count?a.count:"number"==typeof a.total?a.total:"number"==typeof a.value?a.value:i.length,neonates:i}}const n=I(e,t);return{count:n.length,neonates:n}},I=(a,e)=>Array.isArray(a)?a.map((a,t)=>E(a,e,t)):[],E=(a,t,n)=>{var i,o,l,s,c,r,d,u,v,p,g,m;const f=e[t],x=`${t}-${n}`;var b,h,y,w;if(null!=a&&a.name&&null!=a&&a.mrn)return{id:String(null!==(b=a.id)&&void 0!==b?b:x),name:a.name,mrn:a.mrn,age:null!==(h=a.age)&&void 0!==h?h:"—",weight:null!==(y=a.weight)&&void 0!==y?y:"—",status:null!==(w=a.status)&&void 0!==w?w:f};const k=null!==(i=null==a?void 0:a.patient)&&void 0!==i?i:a,_=null!==(o=null!==(l=null!==(s=null==a?void 0:a.id)&&void 0!==s?s:null==a?void 0:a.patient_id)&&void 0!==l?l:null==k?void 0:k.patient_id)&&void 0!==o?o:x,C=[null==a?void 0:a.name,null==k?void 0:k.given_name,null==k?void 0:k.family_name].filter(Boolean).join(" ").trim()||"Unknown Neonate",S=null!==(c=null!==(r=null!==(d=null==a?void 0:a.mrn)&&void 0!==d?d:null==a?void 0:a.identifier)&&void 0!==r?r:null==k?void 0:k.identifier)&&void 0!==c?c:"N/A",z=null!==(u=null!==(v=null==a?void 0:a.age)&&void 0!==v?v:F(null==k?void 0:k.birthdate))&&void 0!==u?u:"—",I=null!==(p=null!==(g=null==a?void 0:a.weight)&&void 0!==g?g:null==a?void 0:a.latest_weight)&&void 0!==p?p:null==a?void 0:a.weight_kg,j="number"==typeof I?`${I.toFixed(2)} Kg`:null!=I?I:"—",$=null!==(m=null==a?void 0:a.status)&&void 0!==m?m:f;return{id:String(_),name:C,mrn:S,age:z,weight:j,status:$}},F=a=>{if(!a)return null;const e=new Date(a);if(Number.isNaN(e.getTime()))return null;const t=Date.now()-e.getTime(),n=Math.floor(t/36e5);if(n<24)return`${n} hrs old`;const i=Math.floor(n/24);return i<1?"Today":`${i} day${1===i?"":"s"} old`},B=()=>{const a=Object.values(s.value).flatMap(a=>a.neonates).slice(0,5);c.value=a};return N(()=>{(async()=>{try{u.value=!0;const a=await O.getStatistics();s.value=C(a),a.recent_neonates&&Array.isArray(a.recent_neonates)?c.value=a.recent_neonates.map(a=>({id:String(a.id||a.patient_id||""),name:a.name||"Unknown Neonate",mrn:a.mrn||"N/A",age:a.age||"—",weight:a.weight||"—",status:a.status||"In patient"})):B()}catch(a){console.error("[NeonatalLanding] Failed to load statistics",a),s.value=t(),c.value=[]}finally{u.value=!1}})()}),(a,e)=>(o(),p("div",ha,[v("div",ya,[v("img",{src:l(R).banners.babyHand,alt:"baby-hand-banner",style:{"object-fit":"cover"}},null,8,wa)]),v("div",ka,[e[0]||(e[0]=v("h2",{class:"section-title"},"Today's Stats",-1)),d(l(L),{class:"stats-grid"},{default:r(()=>[d(l(T),null,{default:r(()=>[(o(!0),p(A,null,M(l(G),a=>(o(),i(l(D),{key:a.key,size:"6","size-md":"3"},{default:r(()=>{return[d(V,{label:a.label,value:(e=a.key,null!==(t=null===(n=s.value[e])||void 0===n?void 0:n.count)&&void 0!==t?t:0),"icon-src":a.iconSrc,"svg-icon":a.svgIcon,"is-critical":a.isCritical,clickable:h(a.key),onClick:e=>(a=>{h(a)&&(m.value=a,g.value=!0)})(a.key)},null,8,["label","value","icon-src","svg-icon","is-critical","clickable","onClick"])];var e,t,n}),_:2},1024))),128))]),_:1})]),_:1})]),v("div",_a,[e[1]||(e[1]=v("h2",{class:"section-title"},"Quick Actions",-1)),d(l(L),{class:"actions-grid"},{default:r(()=>[d(l(T),null,{default:r(()=>[(o(!0),p(A,null,M(l(K),a=>(o(),i(l(D),{key:a.route,size:"6","size-md":"6"},{default:r(()=>[d(na,{label:a.label,"svg-icon":a.svgIcon,"icon-src":a.iconSrc,"icon-class":a.iconClass,onClick:e=>(a=>{n.push({path:a.route,query:a.query})})(a)},null,8,["label","svg-icon","icon-src","icon-class","onClick"])]),_:2},1024))),128))]),_:1})]),_:1})]),v("div",Ca,[e[2]||(e[2]=v("h2",{class:"section-title"},"Recent Neonates",-1)),u.value?(o(),p("div",Sa,[(o(),p(A,null,M(5,a=>v("div",{key:`skeleton-${a}`,class:"neonate-skeleton"},[d(l(P),{animated:!0,style:{width:"60px",height:"60px","border-radius":"50%"}}),v("div",za,[d(l(P),{animated:!0,style:{width:"70%",height:"20px","margin-bottom":"8px"}}),d(l(P),{animated:!0,style:{width:"50%",height:"16px","margin-bottom":"4px"}}),d(l(P),{animated:!0,style:{width:"40%",height:"16px"}})]),d(l(P),{animated:!0,style:{width:"80px",height:"24px","border-radius":"12px"}})])),64))])):c.value.length?(o(),p("div",Ia,[(o(!0),p(A,null,M(c.value,a=>(o(),i(pa,{key:a.id,neonate:a,"get-status-color":_,onClick:k},null,8,["neonate"]))),128))])):(o(),p("div",ja,"No recent neonates to display."))]),d(ba,{"is-open":g.value,title:b.value,"is-empty":!x.value.length,"empty-message":"No neonates available for this statistic.",onClose:y,onDismiss:y},{default:r(()=>[(o(!0),p(A,null,M(x.value,a=>(o(),i(pa,{key:`${m.value}-${a.id}`,neonate:a,"get-status-color":_,onClick:k},null,8,["neonate"]))),128))]),_:1},8,["is-open","title","is-empty"])]))}}),[["__scopeId","data-v-f305a4c6"]]);e("default",F(n({__name:"NeonatalHome",setup:a=>(a,e)=>(o(),i(l(E),null,{default:r(()=>[d(B),d(l(z),{fullscreen:!0},{default:r(()=>[d($a)]),_:1})]),_:1}))}),[["__scopeId","data-v-052dae1c"]]))}}})}();
