import{d as P,r as s,aF as B,a as C,Q as x,f as c,H as n,l as a,u as r,L as I,bH as k,b5 as R,b4 as u,a3 as p,b7 as V,k as $,e as A,m as D,bq as M}from"./vendor-CJ2tyHrn.js";import{y as l,D as q,T as H,C as w,F as E,k as G,t as J,S as L,n as f,_ as O}from"../index-CPIhguZJ.js";import{G as Z}from"./GoBack-woLTbSTX.js";import{R as z}from"./ReusableDataTable-t4OJD7FM.js";import{u as Q}from"./usePatientProfile-Bjyh6yGB.js";import"./lodash-NJiRuGo9.js";import"./apexcharts-BtvCa6MI.js";import"./Registration-F5RJpZPr.js";import"./useSetRegistrationValues-CWxNfeBu.js";import"./useLocation-BxHWO3Ky.js";import"./vaccines_service-CFrWoT5a.js";import"./sms_service-ba9KXWCi.js";import"./EIRreportsStore-COMUTdOQ.js";import"./Export-CZmpfP5c.js";import"./user_role_management-C_d1iPJp.js";import"./useNeonatalEnrollmentStore--u9Qw-om.js";import"./enrollment-DU-PLRUa.js";import"./Outcome-BVD9d5EL.js";import"./wardsStore-DRE4cKPY.js";const W={class:"ion-padding ion-text-center"},j={key:0},K=P({__name:"FindPatient",setup(U){const d=s([]),i=s(null),o=s([]),m=B(),g=["MRN","First Name","Last Name","Gender","DoB","Home address","Current address","Phone","Action"],b={responsive:!0,ordering:!1,layout:{topStart:"buttons",topEnd:"",bottomStart:"info",bottomEnd:"paging"},buttons:[{text:" <b>+ Add New Patient </b>",className:"add-test text-white",action:async()=>{m.push("/registration/manual")}}]},v=[{type:"input",header:"First name",name:"given_name",componentType:"inputField",validation:l.required,grid:{s:"4"}},{type:"input",header:"Last name",name:"family_name",componentType:"inputField",validation:l.required,grid:{s:"4"}},{grid:{s:"0.5"}},{componentType:"radioButtonField",header:"Gender",name:"gender",obsValueType:"value_text",validation:l.required,type:"inline",grid:{s:"3.5"},options:[{label:"Male",value:"M"},{label:"Female",value:"F"}]}],y=new q,{openPIM:N}=Q(),h=t=>'\n        <button class="btn btn-outline-danger btn-sm btn-table redirection-btn" \n                style="color:rgb(0, 100, 1)" \n                data-id=\''.concat(JSON.stringify(t),"'>\n            ").concat(f.redirection,'\n        </button>\n        <button class="btn btn-outline-danger btn-sm btn-table view-btn" \n                style="color: rgba(0, 0, 0, 0.54);" \n                data-id=\'').concat(JSON.stringify(t),"'>\n            ").concat(f.view2,"\n        </button>\n    "),_={"redirection-btn":async t=>{console.log("Redirecting for:",t),await G("Are you sure you want to continue with this patient?")&&(console.log("Abscond confirmed for:",t),m.push("/home"))},"view-btn":async t=>{console.log("Abscond requested for:",t),N()}},S=async()=>{if(i.value.validateForm()){J("Test not saved");return}if(!i.value){console.error("Form reference is not available");return}const t=i.value.getFormValues();console.log("ðŸš€ ~ performSearch ~ data:",t);const e={searchText:"".concat(t.given_name," ").concat(t.family_name," ").concat(t.gender),page:1,paginationSize:10,sitePrefix:"",ddeEnabled:"",programId:L.getProgramID(),activeFilter:"Names"},F=await y.searchPatients(e);o.value=F.onlinePatients,console.log("ðŸš€ ~ performSearch ~ results:",o.value)},T=async()=>{const t=[{id:1,visitNumber:"VN001",firstName:"John",lastName:"Doe",gender:"Male",arrivalTime:"2024-06-01T09:00:00Z",waitingTime:"15 mins",aggregate:"15 mins",screenedBy:"Nurse A"},{id:2,visitNumber:"VN002",firstName:"Jane",lastName:"Smith",gender:"Female",arrivalTime:"2024-06-01T09:00:00Z",waitingTime:"10 mins",aggregate:"10 mins",screenedBy:"Nurse B"}];d.value=t.map(e=>[e.visitNumber,e.firstName,e.lastName,e.gender,e.arrivalTime,e.waitingTime,e.aggregate,e.screenedBy,h({id:e.id,visitNumber:e.visitNumber,name:"".concat(e.firstName," ").concat(e.lastName)})])};return C(async()=>{await T()}),(t,e)=>(c(),x(r(M),null,{default:n(()=>[a(H),a(r(I),{fullscreen:!0},{default:n(()=>[a(Z),a(r(k),{class:"card"},{default:n(()=>[a(r(R),null,{default:n(()=>[a(r(u),null,{default:n(()=>[...e[0]||(e[0]=[p("Search Patient",-1)])]),_:1})]),_:1}),a(r(V),null,{default:n(()=>[a(w,{formData:v,ref_key:"formRef",ref:i},null,512),$("div",W,[a(E,{onClick:S,name:"Search"})]),o.value.length>0?(c(),A("div",j,[a(r(u),null,{default:n(()=>[...e[1]||(e[1]=[p("Search Results",-1)])]),_:1}),a(z,{headers:g,data:d.value,options:b,actionHandlers:_},null,8,["data"])])):D("",!0)]),_:1})]),_:1})]),_:1})]),_:1}))}}),ve=O(K,[["__scopeId","data-v-8517d821"]]);export{ve as default};
