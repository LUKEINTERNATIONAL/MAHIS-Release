import{D as Re,d as E,ah as j,b6 as ue,b5 as Ne,b2 as te,G as ne,E as fe,ai as Oe,aj as U,_ as R,I as oe,a3 as K,R as Pe,bf as Je,aU as Le,H as i,e as g,f as c,l as e,J as n,Q as k,k as s,F,aV as pe,r as $,cG as Te,w as we,a as se,n as Ae,P as x,K as V,u as r,cU as Ge,an as je,L as z,W as P,bC as Ue,a5 as ae,a4 as Q,a6 as me,cn as ze,aD as We,m as H,O as J,p as W,aS as q,bj as Ke,bv as Fe,aP as De,aQ as Ve,N as ye,aR as Ce,c as Y,aL as Qe,a2 as qe,aw as Xe,d6 as Ye,ek as Ze,el as et,em as tt,cd as Se,bl as nt,M as ot,al as Z,ak as ee,b_ as st,bu as at,dc as ve,db as it}from"./vendor-Cjwp4qqF.js";import{l as X,J as lt,b6 as rt,B as Ee,be as dt,M as re,aP as xe,G as ct,u as ie,_ as B,aJ as ut,m as Be,V as pt,ag as _t,H as de,aR as gt,bf as ft,bg as mt,bh as Me,bi as Ie,bj as he,aL as _e,bk as be,bl as vt,s as ht,aK as ge,K as bt,c as Dt,bm as yt,T as Ct}from"../index-DBy9wZdk.js";import{P as St}from"./patient_diagnosis_service---vPltbu.js";import{D as $t}from"./DashBox-BD1JYpj9.js";import{B as ce}from"./BasicForm-_k1jxPZV.js";import{p as wt}from"./previousDiagnosis-BX5nZG22.js";import{a as Mt}from"./formatServerData-B5bjwRiX.js";import{v as It}from"./group_validation-DFSEwUsV.js";import{a as kt,g as Nt,P as $e}from"./useFormWizard-1qNwZbal.js";import{D as Ot,a as Pt,A as Lt}from"./NextAppointment-0CNer4F_.js";const ke=Re("NCDDiagnosisStore",{state:()=>({diagnosis:[{selectedData:[],isFinishBtn:!1,data:{rowData:[{colData:[{inputHeader:"Diagnosis",icon:X.search,value:"",name:"diagnosis",eventType:"input",required:!0,alertsErrorMassage:"",isSingleSelect:!0,trackBy:"concept_id",valueType:"coded",multiSelectData:[],id:"",validationFunctionName:"required"}]}]}}]}),actions:{setDiagnosis(t){this.diagnosis=t}}}),Tt=E({name:"Menu",components:{IonContent:K,IonHeader:oe,IonItem:R,IonList:U,IonMenu:Oe,IonTitle:fe,IonToolbar:ne,IonInput:te,IonPopover:Ne,DashBox:$t,SelectionPopover:dt,BasicInputField:Ee,List:rt,BasicForm:ce,DynamicButton:lt,previousDiagnosis:wt,DataTable:ue},data(){return{iconsContent:X,no_item:!1,search_item:!1,display_item:!1,addItemButton:!0,selectedText:"",conditionStatus:"",data:[],diagnosisData:[],popoverOpen:!1,event:"",selectedCondition:""}},setup(){return{checkmark:Le,pulseOutline:Je}},computed:{...j(ke,["diagnosis"]),...j(ie,["patient"])},async mounted(){await this.getDiagnosis("")},methods:{async getDiagnosis(t){let o=await St.getDiagnosis(t,1,15);re(this.diagnosis,"diagnosis","multiSelectData",o)},dismiss(){Pe.dismiss()},async addNewRow(){var t,o,_;if(await It(this.diagnosis)){re(this.diagnosis,"diagnosis","alertsErrorMassage","");const b=await Mt(this.diagnosis),f=JSON.parse(JSON.stringify(this.patient));(_=(o=(t=f.diagnosis)!=null?t:f.diagnosis={}).unsaved)!=null||(o.unsaved=[]),f.diagnosis.unsaved.push(...b),await xe(f),ct("Diagnosis successfully saved"),this.dismiss()}else re(this.diagnosis,"diagnosis","alertsErrorMassage","Please select diagnosis from the list")},updateDiagnosisStores(){ke().setDiagnosis(this.diagnosis)},async handleInputData(t){re(this.diagnosis,"diagnosis","alertsErrorMassage","")}}}),At={class:"modal_wrapper"},Ft={class:""};function Vt(t,o,_,b,f,a){const l=i("ion-title"),d=i("ion-icon"),u=i("ion-header"),h=i("basic-form"),p=i("ion-content"),C=i("DynamicButton"),w=i("ion-col"),S=i("ion-row"),D=i("ion-footer");return c(),g(F,null,[e(u,{style:{display:"flex","justify-content":"space-between"}},{default:n(()=>[e(l,{class:"modalTitle"},{default:n(()=>[...o[2]||(o[2]=[k("Add Diagnosis",-1)])]),_:1}),e(d,{onClick:o[0]||(o[0]=y=>t.dismiss()),style:{"padding-top":"10px","padding-right":"10px"},icon:t.iconsContent.cancel},null,8,["icon"])]),_:1}),e(p,{fullscreen:!0,style:{"--background":"#fff"}},{default:n(()=>[s("div",At,[s("div",Ft,[e(h,{contentData:t.diagnosis,onSearchChange:t.getDiagnosis,"onUpdate:inputValue":t.handleInputData},null,8,["contentData","onSearchChange","onUpdate:inputValue"])])])]),_:1}),e(D,{collapse:"fade",class:"ion-no-border"},{default:n(()=>[e(S,null,{default:n(()=>[e(w,null,{default:n(()=>[e(C,{onClick:o[1]||(o[1]=y=>t.addNewRow()),name:"Save",fill:"solid",style:{float:"right",margin:"2%",width:"130px"}})]),_:1})]),_:1})]),_:1})],64)}const Et=B(Tt,[["render",Vt],["__scopeId","data-v-b8528a6f"]]),xt={class:"table-responsive"},Bt=E({__name:"Diagnosis",setup(t){const o=ut(),_=ie(),{diagnosis:b}=pe(o),{patient:f}=pe(_),a=$(null),l=$([]),d=$(X),u=["Diagnosis","Date","Action"],h={responsive:!0,select:!1,layout:{topStart:"buttons",topEnd:"search",bottomStart:"info",bottomEnd:"paging"},ordering:!1,buttons:[{text:" <b>+ Add diagnosis </b>",className:"add-test text-white",action:async()=>{await p()}}]},p=async()=>{await Be(Et,{class:"lab-results-modal"},!0),await S()},C=async y=>y.length>0?await Promise.all(y.map(async I=>{const O=await _t.getConceptName(I.value_coded),N=I.obs_datetime;return[O||"",de.toStandardHisFormat(N),'<button class="btn btn-outline-danger btn-sm delete-btn" data-id=\''.concat(JSON.stringify({id:I.obs_id,value_coded:I.value_coded,name:O,obs_date:N}),"'>").concat(d.value.delete2,"</button>")]})):[],w=async(y,I)=>{var N;if(await pt("Do you want to delete ".concat(y.name," ?"),I)){const m=JSON.parse(JSON.stringify(f.value)),v=m.diagnosis;y!=null&&y.id?(v.saved=v.saved.filter(M=>!(M.value_coded===y.value_coded&&M.obs_datetime===y.obs_date)),(N=v.voided)!=null||(v.voided=[]),v.voided.push(y)):v.unsaved=v.unsaved.filter(M=>!(M.value_coded===y.value_coded&&M.obs_datetime===y.obs_date)),await xe(m)}},S=async()=>{var O,N;const y=JSON.parse(JSON.stringify(f.value)),I=[...((O=y==null?void 0:y.diagnosis)==null?void 0:O.unsaved)||[],...((N=y==null?void 0:y.diagnosis)==null?void 0:N.saved)||[]];l.value=await C(I),ue.use(Ge)},D=Te();return we(()=>D,async()=>{await S()},{deep:!0}),we(()=>f,async()=>{await S()},{deep:!0}),se(async()=>{await S(),Ae(()=>{const y=a.value.dt;y.columns.adjust().draw(),y.on("click",".delete-btn",I=>{const O=I.target.getAttribute("data-id");w(JSON.parse(O),I)})})}),(y,I)=>(c(),g("div",xt,[e(r(ue),{ref_key:"dataTableRef",ref:a,options:h,data:l.value,class:"display nowrap modern-table",width:"100%"},{default:n(()=>[s("thead",null,[s("tr",null,[(c(),g(F,null,x(u,O=>s("th",{key:O},V(O),1)),64))])])]),_:1},8,["data"])]))}}),vo=B(Bt,[["__scopeId","data-v-534f4a89"]]),Ht={class:"sub_item_body"},Rt={class:"ion-padding",slot:"content"},Jt={class:"table-responsive"},Gt=E({__name:"ComplicationsScreening",setup(t){je();const o=kt(),{FootScreening:_,visualScreening:b,cvScreening:f}=pe(o),a=ie(),{patient:l}=pe(a);Te();const d=$(null),u=$([]);$(!1),$(!1),$("");const h=$("");$({btnColor:"secondary",btnName:"No risk"});const p=$(X),C=["Condition","Result","Date","Action"],w={responsive:!0,select:!1,layout:{topEnd:"search",bottomStart:"info",bottomEnd:"paging"},ordering:!1},S=async()=>{var N,m;const I=JSON.parse(JSON.stringify(l.value)),O=[...((N=I==null?void 0:I.screening)==null?void 0:N.unsaved)||[],...((m=I==null?void 0:I.screening)==null?void 0:m.saved)||[]];u.value=await D(O)},D=async I=>I.length===0?[]:(await Promise.all(I.map(async N=>N.concept_name==="Visual acuity"?N.children.map(m=>[m.concept_name,m.value_text,de.toStandardHisFormat(m.obs_datetime),'<button class="btn btn-outline-danger btn-sm delete-btn" data-id=\''.concat(JSON.stringify(m),"'>\n                        ").concat(p.value.delete2,"</button>")]):N.concept_name==="Foot check"?Promise.all(N.children.map(async m=>[m.concept_name,await gt.getConceptName(m.value_coded),de.toStandardHisFormat(m.obs_datetime),'<button class="btn btn-outline-danger btn-sm delete-btn" data-id=\''.concat(JSON.stringify(m),"'>\n                            ").concat(p.value.delete2,"</button>")])):N.concept_name==="Cardiovascular disease"?[["CVD %",N.value_text,de.toStandardHisFormat(N.obs_datetime),'<button class="btn btn-outline-danger btn-sm delete-btn" data-id=\''.concat(JSON.stringify(N),"'>\n                            ").concat(p.value.delete2,"</button>")]]:[]))).flat(),y=I=>{};return se(async()=>{await S(),Ae(()=>{const I=d.value.dt;I.columns.adjust().draw(),I.on("click",".delete-btn",O=>{const N=O.target.getAttribute("data-id");y(JSON.parse(N))})})}),(I,O)=>{const N=i("ion-label"),m=i("ion-accordion"),v=i("ion-accordion-group"),M=i("ion-row");return c(),g(F,null,[e(ce,{contentData:r(b)},null,8,["contentData"]),e(r(U),null,{default:n(()=>[e(r(R),{lines:h.value,class:"dashed_bottom_border textSectionFormat"},{default:n(()=>[...O[0]||(O[0]=[s("span",{style:{display:"flex","align-items":"center",gap:"10px"}}," Foot screening ",-1)])]),_:1},8,["lines"]),s("div",Ht,[e(ce,{contentData:r(_)},null,8,["contentData"])])]),_:1}),e(ce,{contentData:r(f)},null,8,["contentData"]),e(M,null,{default:n(()=>[e(v,{ref:"accordionGroup",class:"previousView"},{default:n(()=>[e(m,{value:"first","toggle-icon-slot":"start",style:{"border-radius":"10px","background-color":"#fff"}},{default:n(()=>[e(r(R),{slot:"header",color:"light"},{default:n(()=>[e(N,{class:"previousLabel"},{default:n(()=>[...O[1]||(O[1]=[k("Previous Visits",-1)])]),_:1})]),_:1}),s("div",Rt,[s("div",Jt,[e(r(ue),{ref_key:"dataTableRef",ref:d,options:w,data:u.value,class:"display nowrap",width:"100%"},{default:n(()=>[s("thead",null,[s("tr",null,[(c(),g(F,null,x(C,T=>s("th",{key:T},V(T),1)),64))])])]),_:1},8,["data"])])])]),_:1})]),_:1},512)]),_:1})],64)}}}),ho=B(Gt,[["__scopeId","data-v-f3420ad0"]]),jt=E({name:"Home",components:{IonContent:K,IonHeader:oe,IonMenuButton:ze,IonPage:me,IonTitle:fe,IonToolbar:ne,IonRow:Q,IonCol:ae,IonChip:Ue,IonLabel:P,IonIcon:z},computed:{...j(ie,["patient"])},data(){const t=$([]),o=$([]),_=async()=>{try{const a=this.patient;mt(a.ID);const l=$(!1),d=p=>{l.value=p};t.value=await Nt();const u=t.value.some(p=>p.toLowerCase().includes("hypertension")),h=t.value.some(p=>p.toLowerCase().includes("diabetes"));u&&(d(!0),Me()),h&&(d(!0),Ie()),l.value==!1}catch(a){}},b=async()=>{const a=o.value.some(d=>d.toLowerCase().includes("hypertension")),l=o.value.some(d=>d.toLowerCase().includes("diabetes"));a&&await Me(),l&&await Ie()};return{diagnoses:t,selectedDiagnoses:o,medkitOutline:We,initC:_,toggleDiagnosisSelection:a=>{const l=o.value.indexOf(a);l===-1?(o.value.push(a),he(),b()):(o.value.splice(l,1),he(),b()),o.value.length===0&&(he(),_())}}},async mounted(){this.initC()},watch:{patient:{handler(){ft(this.patient.ID),this.initC()},deep:!0}}}),Ut={key:0,class:"diagnosis-container"},zt={class:"heading"},Wt={class:"diagnosis-list"};function Kt(t,o,_,b,f,a){const l=i("ion-icon"),d=i("ion-label"),u=i("ion-chip"),h=i("ion-col"),p=i("ion-row");return t.diagnoses.length>0?(c(),g("div",Ut,[s("div",zt,[e(l,{icon:t.medkitOutline,class:"diagnosis-icon"},null,8,["icon"]),o[0]||(o[0]=s("h2",null,"Diagnosis",-1))]),e(p,null,{default:n(()=>[e(h,null,{default:n(()=>[s("div",Wt,[(c(!0),g(F,null,x(t.diagnoses,(C,w)=>(c(),J(u,{key:w,class:W({"diagnosis-chip-selected":t.selectedDiagnoses.includes(C)}),onClick:S=>t.toggleDiagnosisSelection(C)},{default:n(()=>[e(d,null,{default:n(()=>[k(V(C),1)]),_:2},1024)]),_:2},1032,["class","onClick"]))),128))])]),_:1})]),_:1})])):H("",!0)}const Qt=B(jt,[["render",Kt],["__scopeId","data-v-2bd0f8ca"]]),qt=E({name:"MedicationSearch",components:{IonContent:K,IonPage:me,IonItem:R,IonLabel:P,IonInput:te,IonIcon:z,BasicInputField:Ee,IonCard:q},setup(){const t=$(""),o=_e();return{searchText:t,searchTextUpdated:b=>{const f=b.target;t.value=f.value;const a=o.medications.filter(l=>l.name.toLowerCase().includes(t.value.toLowerCase()));o.setFilteredMedications(a)},searchOutline:Ke}}});function Xt(t,o,_,b,f,a){const l=i("BasicInputField"),d=i("ion-card");return c(),g("div",null,[s("div",null,[e(d,null,{default:n(()=>[e(l,{placeholder:"Filter medication list by name",icon:t.searchOutline,inputValue:t.searchText,"onUpdate:inputValue":t.searchTextUpdated,minHeight:50},null,8,["icon","inputValue","onUpdate:inputValue"])]),_:1})])])}const Yt=B(qt,[["render",Xt]]),Zt=E({name:"medication",components:{IonCard:q,IonCardHeader:Ce,IonButton:ye,IonCardTitle:Ve,IonCardContent:De,IonInput:te,IonIcon:z,IonCol:ae,IonRow:Q,IonCheckbox:Fe,PreviousNCDDiagnosis:Qt,MedicationSearchInput:Yt},computed:{...j(_e,["medications","filteredMedications"]),...j(be,["otherNCDMedications"]),activeMedications(){return this.useDefaultStores?this.filteredMedications:this.otherNCDMedications}},props:{useDefaultStores:{type:Boolean,default:!0}},setup(t){const o=_e();o.initMedications();const _=Y(()=>o.selectedNCDMedicationList),b=be(),f=Y(()=>b.selectedOtherNCDMedicationList),a=Y(()=>t.useDefaultStores?_.value:f.value),l=$(!1),d=$({});let u=null;const h=()=>{l.value=!1,u&&(clearTimeout(u),u=null)},p=m=>{d.value={...d.value,[m]:!0},l.value=!0,u&&clearTimeout(u),u=window.setTimeout(()=>{l.value=!1,u=null},3e3),window.setTimeout(()=>{const v={...d.value};delete v[m],d.value=v},3e3)},C=m=>/^\d*$/.test(m),w=(m,v,M)=>{let T=M.target.value;const G="".concat(m,"-").concat(v);if(T!==""&&!C(T)){p(G);const L=a.value.find(le=>le.drug_id===m);T=(L==null?void 0:L.dosage[v])||"",setTimeout(()=>{const le=M.target;le&&(le.value=T)},0);return}if(T!==""){const L=parseInt(T);isNaN(L)||L<0?T="0":T=Math.floor(L).toString()}const A=a.value.findIndex(L=>L.drug_id===m);if(A>-1){const L={...a.value[A]};L.dosage={...L.dosage,[v]:T},a.value[A]=L}},S=(m,v)=>{let M=v.target.value;const T="".concat(m,"-duration");if(M!==""&&!C(M)){p(T);const A=a.value.find(L=>L.drug_id===m);M=(A==null?void 0:A.duration)||"",setTimeout(()=>{const L=v.target;L&&(L.value=M)},0);return}if(M!==""){const A=parseInt(M);isNaN(A)||A<1?M="1":M=Math.floor(A).toString()}const G=a.value.findIndex(A=>A.drug_id===m);if(G>-1){const A={...a.value[G]};A.duration=M,a.value[G]=A}},D=m=>a.value.some(v=>v.drug_id===m);return{medkit:Se,sunny:tt,partlySunny:et,moon:Ze,timeOutline:Ye,alertCircleOutline:Xe,closeCircleOutline:qe,updateDosage:w,updateDuration:S,getDosage:(m,v)=>{const M=a.value.find(T=>T.drug_id===m);return(M==null?void 0:M.dosage[v])||""},getDuration:m=>{const v=a.value.find(M=>M.drug_id===m);return(v==null?void 0:v.duration)||""},calculateQuantity:m=>{const v=a.value.find(G=>G.drug_id===m);if(!v||!v.dosage||!v.duration)return"";const M=["morning","afternoon","evening"].reduce((G,A)=>{const L=parseInt(v.dosage[A])||0;return G+L},0),T=parseInt(v.duration)||0;return(M*T).toString()},isActive:D,toggleMedication:async m=>{try{if(D(m)){const v=a.value.findIndex(M=>M.drug_id===m);v>-1&&a.value.splice(v,1)}else{const v=await vt(m);t.useDefaultStores==!1?b.setSelectedNCDMedicationList(v):o.setSelectedNCDMedicationList(v)}}catch(v){ht("Error toggling medication: "+v)}},cubeOutline:Qe,showErrorMessage:l,errorFields:d,hideErrorMessage:h}}}),en={key:0},tn={key:0,class:"error-message"},nn={class:"table-container"},on={class:"prescription-table"},sn={class:"checkbox-col"},an={style:{cursor:"pointer"}},ln=["onClick"];function rn(t,o,_,b,f,a){const l=i("PreviousNCDDiagnosis"),d=i("ion-col"),u=i("MedicationSearchInput"),h=i("ion-row"),p=i("ion-icon"),C=i("ion-button"),w=i("ion-checkbox"),S=i("ion-input");return c(),g(F,null,[e(h,null,{default:n(()=>[e(d,{size:"5"},{default:n(()=>[t.useDefaultStores?(c(),J(l,{key:0})):H("",!0)]),_:1}),e(d,null,{default:n(()=>[t.useDefaultStores&&t.medications.length>0?(c(),J(u,{key:0,style:{"margin-top":"0px","font-weight":"600","font-size":"16px"}})):H("",!0)]),_:1})]),_:1}),t.activeMedications.length>0?(c(),g("div",en,[t.showErrorMessage?(c(),g("div",tn,[e(p,{icon:t.alertCircleOutline,color:"danger"},null,8,["icon"]),o[0]||(o[0]=s("span",{style:{"font-size":"16px","font-weight":"600px",color:"red"}},"Only numbers are allowed",-1)),e(C,{fill:"clear",size:"small",onClick:t.hideErrorMessage},{default:n(()=>[e(p,{icon:t.closeCircleOutline},null,8,["icon"])]),_:1},8,["onClick"])])):H("",!0),s("div",nn,[s("table",on,[s("thead",null,[s("tr",null,[o[6]||(o[6]=s("th",{class:"checkbox-col"},"Select",-1)),o[7]||(o[7]=s("th",null,"Medication",-1)),s("th",null,[e(p,{icon:t.partlySunny},null,8,["icon"]),o[1]||(o[1]=k(" Morning",-1))]),s("th",null,[e(p,{icon:t.sunny},null,8,["icon"]),o[2]||(o[2]=k(" Noon",-1))]),s("th",null,[e(p,{icon:t.moon},null,8,["icon"]),o[3]||(o[3]=k(" Night",-1))]),s("th",null,[e(p,{icon:t.timeOutline},null,8,["icon"]),o[4]||(o[4]=k(" Duration",-1))]),s("th",null,[e(p,{icon:t.cubeOutline},null,8,["icon"]),o[5]||(o[5]=k(" Quantity",-1))])])]),s("tbody",null,[(c(!0),g(F,null,x(t.activeMedications,D=>(c(),g("tr",{key:D.id,class:W({"active-row":t.isActive(D.drug_id)})},[s("td",sn,[e(w,{checked:t.isActive(D.drug_id),onIonChange:y=>t.toggleMedication(D.drug_id)},null,8,["checked","onIonChange"])]),s("td",an,[s("span",{class:"med-kit-font",onClick:y=>t.toggleMedication(D.drug_id)},V(D.name),9,ln)]),s("td",null,[e(S,{type:"text",class:W(["dose-input bordered-input med-kit-font",{"error-input":t.errorFields["".concat(D.drug_id,"-morning")]}]),disabled:!t.isActive(D.drug_id),value:t.getDosage(D.drug_id,"morning"),onIonInput:y=>t.updateDosage(D.drug_id,"morning",y),placeholder:"0",inputmode:"numeric"},null,8,["class","disabled","value","onIonInput"])]),s("td",null,[e(S,{type:"text",class:W(["dose-input bordered-input med-kit-font",{"error-input":t.errorFields["".concat(D.drug_id,"-afternoon")]}]),disabled:!t.isActive(D.drug_id),value:t.getDosage(D.drug_id,"afternoon"),onIonInput:y=>t.updateDosage(D.drug_id,"afternoon",y),placeholder:"0",inputmode:"numeric"},null,8,["class","disabled","value","onIonInput"])]),s("td",null,[e(S,{type:"text",class:W(["dose-input bordered-input med-kit-font",{"error-input":t.errorFields["".concat(D.drug_id,"-evening")]}]),disabled:!t.isActive(D.drug_id),value:t.getDosage(D.drug_id,"evening"),onIonInput:y=>t.updateDosage(D.drug_id,"evening",y),placeholder:"0",inputmode:"numeric"},null,8,["class","disabled","value","onIonInput"])]),s("td",null,[e(S,{type:"text",class:W(["dose-input bordered-input med-kit-font",{"error-input":t.errorFields["".concat(D.drug_id,"-duration")]}]),disabled:!t.isActive(D.drug_id),value:t.getDuration(D.drug_id),onIonInput:y=>t.updateDuration(D.drug_id,y),placeholder:"0",inputmode:"numeric"},null,8,["class","disabled","value","onIonInput"])]),s("td",null,[e(S,{type:"text",class:"dose-input bordered-input med-kit-font",readonly:"",value:t.calculateQuantity(D.drug_id),placeholder:"0"},null,8,["value"])])],2))),128))])])])])):H("",!0)],64)}const He=B(Zt,[["render",rn],["__scopeId","data-v-601894a0"]]),dn=E({name:"DrugSelector",components:{IonContent:K,IonHeader:oe,IonItem:R,IonList:U,IonMenu:Oe,IonTitle:fe,IonToolbar:ne,IonInput:te,IonPopover:Ne,VueMultiselect:nt,IonLabel:P,IonCol:ae,IonRow:Q},emits:["drug-selected"],data(){const t=f=>{this.$emit("drug-selected",f)},o=async f=>{const a=ge(),l=f,p=(await bt.getOfflineOPDDrugs({name:l,page:1,page_size:20})).map(C=>({label:C.name,value:C.name,other:C,...C}));a.setPartialOPDdrugList(p)},_=Y(()=>this.partialOPDdrugList);return{selected_drug:$(null),selectedDrugName:t,FindDrugName:o,OPDDrugList:_}},computed:{...j(ge,["partialOPDdrugList"])}});function cn(t,o,_,b,f,a){const l=i("VueMultiselect"),d=i("ion-col"),u=i("ion-row");return c(),g("div",null,[e(u,null,{default:n(()=>[e(d,null,{default:n(()=>[e(l,{modelValue:t.selected_drug,"onUpdate:modelValue":[o[0]||(o[0]=h=>t.selected_drug=h),t.selectedDrugName],multiple:!1,taggable:!1,"hide-selected":!1,"close-on-select":!0,openDirection:"bottom","tag-placeholder":"Select medication",placeholder:"Select medication",selectLabel:"",label:"name",searchable:!0,onSearchChange:t.FindDrugName,"track-by":"uuid",options:t.OPDDrugList},null,8,["modelValue","onUpdate:modelValue","onSearchChange","options"])]),_:1})]),_:1})])}const un=B(dn,[["render",cn],["__scopeId","data-v-e33f5b73"]]),pn=E({name:"Home",mixins:[Dt],components:{IonContent:K,IonHeader:oe,IonPage:me,IonToolbar:ne,IonRow:Q,IonTitle:fe,IonIcon:z,IonFooter:ot,OPDMedications:un,Medication:He,IonCol:ae,IonButton:ye},data(){const t=be(),o=()=>{Pe.dismiss()};return{iconsContent:X,dismiss:o,addSearchedDrug:f=>{t.addSearchedDrug(f)},medkit:Se,checkmark:Le,onAdd:()=>{yt(),t.clearOtherNCDMedications(),o()}}},computed:{},$route:{async handler(){},deep:!0},watch:{},async mounted(){},methods:{}}),_n={class:"medication-list"},gn={class:"modal_wrapper"},fn={class:""};function mn(t,o,_,b,f,a){const l=i("ion-icon"),d=i("ion-title"),u=i("ion-header"),h=i("OPDMedications"),p=i("Medication"),C=i("ion-content"),w=i("ion-button"),S=i("ion-col"),D=i("ion-row"),y=i("ion-footer");return c(),g(F,null,[e(u,{style:{display:"flex","justify-content":"space-between"}},{default:n(()=>[e(d,{class:"modalTitle"},{default:n(()=>[s("div",_n,[e(l,{icon:t.medkit,class:"ion-margin-end"},null,8,["icon"]),o[1]||(o[1]=s("span",null,"Add Other Medication",-1))])]),_:1}),e(l,{onClick:o[0]||(o[0]=I=>t.dismiss()),style:{"padding-top":"10px","padding-right":"10px"},icon:t.iconsContent.cancel},null,8,["icon"])]),_:1}),e(C,{fullscreen:!0,class:"ion-padding",style:{"--background":"#fff"}},{default:n(()=>[s("div",gn,[s("div",fn,[e(h,{onDrugSelected:t.addSearchedDrug},null,8,["onDrugSelected"]),e(p,{"use-default-stores":!1})])])]),_:1}),e(y,{collapse:"fade",class:"ion-no-border"},{default:n(()=>[e(D,null,{default:n(()=>[e(S,null,{default:n(()=>[e(w,{onClick:t.onAdd,color:"primary",style:{float:"right","margin-bottom":"20px","margin-right":"20px"}},{default:n(()=>[e(l,{icon:t.checkmark,slot:"start"},null,8,["icon"]),o[2]||(o[2]=k(" Add ",-1))]),_:1},8,["onClick"])]),_:1})]),_:1})]),_:1})],64)}const vn=B(pn,[["render",mn],["__scopeId","data-v-dee50533"]]),hn=E({name:"Home",components:{IonContent:K,IonHeader:oe,IonPage:me,IonToolbar:ne,Toolbar:Ct,IonRow:Q,IonAccordion:ee,IonAccordionGroup:Z,IonItem:R,IonLabel:P,DynamicList:Ot,IonCard:q},data(){const t=$(0),o=$("Show more medications"),_=$(!1),b=$();return{componentKey:t,accordionGroupChange:d=>{const u=d.detail.value;u!==void 0?u=="second"&&(o.value="Show less medications",_.value=!_.value):(o.value="Show more medications",_.value=!_.value)},showMoreMedicationsMsg:o,itemWasExpanded:_,accordionGroupChangeFn1:d=>{},PreviuosSelectedMedicalDrugsList:b,loadPreviousMedications:async()=>{const d=new $e,{previousDrugPrescriptions:u}=await d.getPatientEncounters();b.value=u}}},computed:{...j(ie,["patient"]),...j(_e,["selectedNCDMedicationList"])},$route:{async handler(){},deep:!0},watch:{patient:{handler(){this.loadPreviousMedications()},deep:!0},selectedNCDMedicationList:{handler(){this.loadPreviousMedications()},deep:!0}},async mounted(){this.loadPreviousMedications()}}),bn={style:{}},Dn={class:"ion-padding",slot:"content"},yn={key:0},Cn={class:"previousSecDrgs"},Sn={class:"ion-padding",slot:"content"},$n={key:0},wn={class:"previousSecDrgs"};function Mn(t,o,_,b,f,a){const l=i("ion-label"),d=i("ion-item"),u=i("dynamic-list"),h=i("ion-accordion"),p=i("ion-accordion-group"),C=i("ion-card");return c(),J(C,null,{default:n(()=>[s("div",bn,[e(p,{ref:"accordionGroup",class:"previousView",onIonChange:t.accordionGroupChangeFn1},{default:n(()=>[e(h,{value:"first","toggle-icon-slot":"start",style:{"border-radius":"10px","background-color":"#fff"}},{default:n(()=>[e(d,{slot:"header",color:"light"},{default:n(()=>[e(l,{class:"previousLabel"},{default:n(()=>[...o[0]||(o[0]=[k("Documented medications timeline",-1)])]),_:1})]),_:1}),s("div",Dn,[(c(!0),g(F,null,x(t.PreviuosSelectedMedicalDrugsList,(w,S)=>(c(),g("div",{class:"ionLbltp",key:S},[S==0?(c(),g("div",yn,[s("div",null,[e(l,{class:"previousLabelDate"},{default:n(()=>[k(V(w.prescriptionDate),1)]),_:2},1024)]),s("div",Cn,[(c(),J(u,{_selectedMedicalDrugsList:w.previousPrescriptions,show_actions_buttons:!1,key:t.componentKey},null,8,["_selectedMedicalDrugsList"]))])])):H("",!0)]))),128)),e(p,{onIonChange:t.accordionGroupChange},{default:n(()=>[e(h,{value:"second","toggle-icon-slot":"start",style:{"border-radius":"10px","background-color":"#fff"}},{default:n(()=>[e(d,{slot:"header",color:"light"},{default:n(()=>[e(l,{class:"",color:"primary"},{default:n(()=>[k(V(t.showMoreMedicationsMsg),1)]),_:1})]),_:1}),s("div",Sn,[(c(!0),g(F,null,x(t.PreviuosSelectedMedicalDrugsList,(w,S)=>(c(),g("div",{class:"ionLbltp",key:S},[t.itemWasExpanded&&S>0?(c(),g("div",$n,[s("div",null,[e(l,{class:"previousLabelDate"},{default:n(()=>[k(V(w.prescriptionDate),1)]),_:2},1024)]),s("div",wn,[(c(),J(u,{_selectedMedicalDrugsList:w.previousPrescriptions,show_actions_buttons:!1,key:t.componentKey},null,8,["_selectedMedicalDrugsList"]))])])):H("",!0)]))),128))])]),_:1})]),_:1},8,["onIonChange"])])]),_:1})]),_:1},8,["onIonChange"])])]),_:1})}const In=B(hn,[["render",Mn],["__scopeId","data-v-1db96250"]]),kn=E({name:"PrescriptionTable",components:{IonCard:q,IonCardHeader:Ce,IonButton:ye,IonCardTitle:Ve,IonCardContent:De,IonInput:te,IonIcon:z,IonCol:ae,IonRow:Q,IonCheckbox:Fe,Medication:He,MedicationHistory:In},setup(){return{openAddOtherOPDMedicationModal:async()=>{await Be(vn,{class:"large-modal"},!0,{})},medkit:Se}}});function Nn(t,o,_,b,f,a){const l=i("Medication"),d=i("ion-icon"),u=i("ion-button"),h=i("ion-col"),p=i("ion-row"),C=i("MedicationHistory"),w=i("IonCol"),S=i("ion-card-content"),D=i("ion-card");return c(),J(D,null,{default:n(()=>[e(S,null,{default:n(()=>[e(l),e(p,null,{default:n(()=>[e(h,null,{default:n(()=>[e(u,{onClick:t.openAddOtherOPDMedicationModal,color:"primary",style:{float:"right"}},{default:n(()=>[e(d,{icon:t.medkit,slot:"start"},null,8,["icon"]),o[0]||(o[0]=s("span",{style:{"margin-left":"10px","font-size":"16px","font-weight":"600"}}," ADD Other Medication",-1))]),_:1},8,["onClick"])]),_:1})]),_:1}),e(p,null,{default:n(()=>[e(w,null,{default:n(()=>[e(C)]),_:1})]),_:1})]),_:1})]),_:1})}const On=B(kn,[["render",Nn],["__scopeId","data-v-a4ad7088"]]),Pn={style:{"margin-top":"14px","margin-left":"10px"}},Ln={class:"ion-padding",slot:"content"},Tn={key:0},An={class:"previousSecDrgs"},Fn={class:"ion-padding",slot:"content"},Vn={class:"previousSecDrgs"},En=E({watch:{},name:"xxxComponent"}),xn=E({...En,setup(t){const o=$(),_=$(),b=$(!1),f=$(!1),a=$("Show more notes");se(async()=>{const u=new $e,{previousClinicalNotes:h}=await u.getPatientEncounters();o.value=Object.entries(h)[0];const[,...p]=Object.entries(h);_.value=p});function l(u){const h=u.detail.value;h!==void 0?h=="third"&&(a.value="Show less notes",f.value=!b.value):(a.value="Show more notes",f.value=!b.value)}function d(u){return u[1]}return(u,h)=>(c(),J(r(q),null,{default:n(()=>[s("div",Pn,[e(r(Z),{ref:"accordionGroup",class:"previousView"},{default:n(()=>[e(r(ee),{value:"fourth","toggle-icon-slot":"start",style:{"border-radius":"10px","background-color":"#fff"}},{default:n(()=>[e(r(R),{slot:"header",color:"light"},{default:n(()=>[e(r(P),{class:"previousLabel"},{default:n(()=>[...h[0]||(h[0]=[k("Previous visits notes",-1)])]),_:1})]),_:1}),s("div",Ln,[(c(!0),g(F,null,x(o.value,(p,C)=>(c(),g("div",{class:"ionLbltp",key:C},[C==1?(c(),g("div",Tn,[(c(!0),g(F,null,x(p,(w,S)=>(c(),g("div",{key:S},[s("div",null,[e(r(P),{class:"previousLabelDate"},{default:n(()=>[k(V(w.date),1)]),_:2},1024)]),s("div",An,[e(r(U),null,{default:n(()=>[e(r(P),{class:"notes_p"},{default:n(()=>[k(V(w.notes),1)]),_:2},1024)]),_:2},1024)])]))),128))])):H("",!0)]))),128)),e(r(Z),{onIonChange:l},{default:n(()=>[e(r(ee),{value:"third","toggle-icon-slot":"start",style:{"border-radius":"10px","background-color":"#fff"}},{default:n(()=>[e(r(R),{slot:"header",color:"light"},{default:n(()=>[e(r(P),{class:"",color:"primary"},{default:n(()=>[k(V(a.value),1)]),_:1})]),_:1}),s("div",Fn,[(c(!0),g(F,null,x(_.value,(p,C)=>(c(),g("div",{class:"ionLbltp",key:C},[(c(!0),g(F,null,x(d(p),(w,S)=>(c(),g("div",{key:S},[s("div",null,[e(r(P),{class:"previousLabelDate"},{default:n(()=>[k(V(w.date),1)]),_:2},1024)]),s("div",Vn,[e(r(U),null,{default:n(()=>[e(r(P),{class:"notes_p"},{default:n(()=>[k(V(w.notes),1)]),_:2},1024)]),_:2},1024)])]))),128))]))),128))])]),_:1})]),_:1})])]),_:1})]),_:1},512)])]),_:1}))}}),Bn=B(xn,[["__scopeId","data-v-994df42d"]]),Hn={style:{"margin-top":"14px","margin-left":"10px"}},Rn=E({watch:{},name:"xxxComponent"}),Jn=E({...Rn,setup(t){const o=ge(),_=X,b=Y(()=>o.nonPharmalogicalTherapyAndOtherNotes);function f(l){let d=l.target.value;a(d)}function a(l){ge().setNonPharmalogicalTherapyAndOtherNotes(l)}return(l,d)=>(c(),J(r(q),null,{default:n(()=>[e(r(Ce),null,{default:n(()=>[e(r(P),{class:"tpStndCls"},{default:n(()=>[e(r(z),{icon:r(st),class:"header-icon","aria-hidden":"true"},null,8,["icon"]),d[1]||(d[1]=k(" Non-pharmalogical therapy and other notes ",-1))]),_:1})]),_:1}),e(r(De),null,{default:n(()=>[s("div",null,[e(Pt),e(r(R),{class:"input_item",style:{"min-height":"120px","margin-top":"14px"}},{default:n(()=>[e(r(P),null,{default:n(()=>[e(r(z),{slot:"start",icon:r(_).editPen,"aria-hidden":"true"},null,8,["icon"])]),_:1}),e(r(at),{onIonInput:f,modelValue:b.value,"onUpdate:modelValue":d[0]||(d[0]=u=>b.value=u),style:{"min-height":"120px"},class:"inputTpln","auto-grow":!0,fill:"outline"},null,8,["modelValue"])]),_:1})]),s("div",Hn,[e(Bn)])]),_:1})]),_:1}))}}),Gn=B(Jn,[["__scopeId","data-v-fd19ec21"]]),jn={class:"ion-padding",slot:"content"},Un={key:0},zn={class:"previousSecDrgs"},Wn={class:"ion-padding",slot:"content"},Kn={class:"previousSecDrgs"},Qn=E({watch:{},name:"xxxComponent"}),qn=E({...Qn,setup(t){const o=$(!1),_=$(!1),b=$("Show more allergies"),f=$(),a=$();se(async()=>{const u=new $e,{previousDrugAllergies:h}=await u.getPatientEncounters();f.value=Object.entries(h)[0];const[,...p]=Object.entries(h);a.value=p});function l(u){const h=u.detail.value;h!==void 0?h=="fith"&&(b.value="Show less allegies",_.value=!o.value):(b.value="Show more allegies",_.value=!o.value)}function d(u){return u[1]}return(u,h)=>{const p=i("ion-card");return c(),J(p,null,{default:n(()=>[e(r(Z),{ref:"accordionGroup",class:"previousView"},{default:n(()=>[e(r(ee),{value:"fourth","toggle-icon-slot":"start",style:{"border-radius":"10px","background-color":"#fff"}},{default:n(()=>[e(r(R),{slot:"header",color:"light"},{default:n(()=>[e(r(P),{class:"previousLabel"},{default:n(()=>[...h[0]||(h[0]=[k("Documented allergies timeline",-1)])]),_:1})]),_:1}),s("div",jn,[(c(!0),g(F,null,x(f.value,(C,w)=>(c(),g("div",{class:"ionLbltp",key:w},[w==1?(c(),g("div",Un,[s("div",null,[e(r(P),{class:"previousLabelDate"},{default:n(()=>[k(V(C[0].date),1)]),_:2},1024)]),(c(!0),g(F,null,x(C,(S,D)=>(c(),g("div",{key:D},[s("div",zn,[e(r(U),null,{default:n(()=>[e(r(P),{class:"notes_p"},{default:n(()=>[k(V(S.value),1)]),_:2},1024)]),_:2},1024)])]))),128))])):H("",!0)]))),128)),e(r(Z),{onIonChange:l},{default:n(()=>[e(r(ee),{value:"fith","toggle-icon-slot":"start",style:{"border-radius":"10px","background-color":"#fff"}},{default:n(()=>[e(r(R),{slot:"header",color:"light"},{default:n(()=>[e(r(P),{class:"",color:"primary"},{default:n(()=>[k(V(b.value),1)]),_:1})]),_:1}),s("div",Wn,[(c(!0),g(F,null,x(a.value,(C,w)=>(c(),g("div",{class:"ionLbltp",key:w},[s("div",null,[e(r(P),{class:"previousLabelDate"},{default:n(()=>[k(V(C[0]),1)]),_:2},1024)]),(c(!0),g(F,null,x(d(C),(S,D)=>(c(),g("div",{key:D},[s("div",Kn,[e(r(U),null,{default:n(()=>[e(r(P),{class:"notes_p"},{default:n(()=>[k(V(S.value),1)]),_:2},1024)]),_:2},1024)])]))),128))]))),128))])]),_:1})]),_:1})])]),_:1})]),_:1},512)]),_:1})}}}),Xn=B(qn,[["__scopeId","data-v-358c5959"]]),Yn={class:"background"},Zn={key:0},eo={style:{margin:"10px"}},to={key:1},no={style:{margin:"10px"}},oo={key:2},so={style:{margin:"10px"}},ao=E({__name:"TreatmentPlan",setup(t){const o=$(["medications","allergies","other_notes"]),_=$(o.value[0]);se(()=>{b(o.value[0])});function b(f){_.value=f}return(f,a)=>(c(),g("div",Yn,[e(r(it),{value:_.value,style:{"margin-top":"5px"}},{default:n(()=>[e(r(ve),{value:"medications",onClick:a[0]||(a[0]=l=>b(o.value[0]))},{default:n(()=>[e(r(P),null,{default:n(()=>[...a[3]||(a[3]=[k("Medications",-1)])]),_:1})]),_:1}),e(r(ve),{value:"allergies",onClick:a[1]||(a[1]=l=>b(o.value[1]))},{default:n(()=>[e(r(P),null,{default:n(()=>[...a[4]||(a[4]=[k("Allergies",-1)])]),_:1})]),_:1}),e(r(ve),{value:"other_notes",onClick:a[2]||(a[2]=l=>b(o.value[2]))},{default:n(()=>[e(r(P),null,{default:n(()=>[...a[5]||(a[5]=[k("Non-pharmalogical therapy and other notes",-1)])]),_:1})]),_:1})]),_:1},8,["value"]),_.value===o.value[0]?(c(),g("div",Zn,[s("div",eo,[e(On)])])):H("",!0),_.value===o.value[1]?(c(),g("div",to,[s("div",no,[e(Lt),e(Xn,{style:{"margin-top":"10px"}})])])):H("",!0),_.value===o.value[2]?(c(),g("div",oo,[s("div",so,[e(Gn)])])):H("",!0)]))}}),bo=B(ao,[["__scopeId","data-v-d844be41"]]);export{ho as C,vo as D,bo as T};
