import{d as E,r as T,bl as b,cY as _,c as x,w as C,a as D,n as m,b as O,e as c,f as d,l as R,H as B,k as h,F as H,T as S,I as $,u as j,p as I}from"./vendor-CJ2tyHrn.js";import{_ as L}from"../index-CPIhguZJ.js";const V=E({__name:"ReusableDataTable",props:{headers:{},data:{},options:{default:()=>({})},actionHandlers:{default:()=>({})},containerClass:{default:"ion-padding"}},setup(s,{expose:g}){const n=s,o=T(null);let r=!1;b.use(_);const k={responsive:!0,select:!1,layout:{topStart:"buttons",topEnd:"search",bottomStart:"info",bottomEnd:"paging"},ordering:!1,buttons:[]},v=x(()=>({...k,...n.options})),i=()=>{var e;const t=(e=o.value)==null?void 0:e.dt;!t||r||(t.columns.adjust().draw(),Object.entries(n.actionHandlers).forEach(([a,w])=>{t.off("click",".".concat(a)),t.on("click",".".concat(a),async l=>{l.stopPropagation(),l.preventDefault();const f=l.target.closest(".".concat(a));if(f){const p=f.getAttribute("data-id"),y=p?JSON.parse(p):null;await w(y)}})}),r=!0)},u=()=>{var e;const t=(e=o.value)==null?void 0:e.dt;t&&Object.keys(n.actionHandlers).forEach(a=>{t.off("click",".".concat(a))}),r=!1};return C(()=>n.data,async()=>{await m(),u(),i()},{deep:!0}),D(async()=>{await m(),i()}),O(()=>{u()}),g({dataTableRef:o}),(t,e)=>(d(),c("div",{class:I(["table-responsive",s.containerClass])},[R(j(b),{ref_key:"dataTableRef",ref:o,options:v.value,data:s.data,class:"display nowrap modern-table",width:"100%"},{default:B(()=>[h("thead",null,[h("tr",null,[(d(!0),c(H,null,S(s.headers,a=>(d(),c("th",{key:a},$(a),1))),128))])])]),_:1},8,["options","data"])],2))}}),J=L(V,[["__scopeId","data-v-1968b5d1"]]);export{J as R};
