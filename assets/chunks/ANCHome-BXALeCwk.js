import{d as U,am as F,r as _,c as b,a as V,H as P,O as H,f as L,J as h,l as e,u as n,ab as T,k as t,bT as E,dq as g,p as J,K as q,aU as z,bg as K,ae as R}from"./vendor-Do41i3tR.js";import{aX as W,u as X,T as Y,D as l,o as $,J as j,w as G,bL as Q,S as Z,t as S,F as tt,_ as et}from"../index-DmWNBpr9.js";import{D as at}from"./DemographicBar-C9QNE1qW.js";import{u as nt,L as ot,N as st}from"./NextAppointmentModal-CK3gHZYN.js";import{S as it}from"./SaveProgressModal-CyRzXU-6.js";import{f as ct}from"./formatServerData-DFmQRhdp.js";import"./lodash-NJiRuGo9.js";import"./apexcharts-DB4uOJSt.js";import"./BasicForm-CAHG-Ryz.js";import"./DateInputField-B-oTnImo.js";class lt extends W{constructor(i,o){super(i,7,o)}}const rt={class:"main-container"},pt={class:"status-card"},ut={class:"back-wrapper"},dt={class:"appointment-info"},mt={class:"icon-circle"},vt={class:"text-group"},ft={class:"action-grid"},_t={class:"grid-item main-action"},bt={class:"grid-item"},ht={class:"grid-item"},gt={class:"landing-wrapper"},St=U({__name:"ANCHome",props:{backBtn:{default:"Back to profile"},backUrl:{default:""},contact:{default:""}},setup(r){const i=r,o=F(),d=nt(),C=X(),c=_(!1),p=_(""),m=b(()=>d.nextAppointmentDate),v=b(()=>C.patient),k=()=>{i.backUrl?o.push(i.backUrl):$(it)},A=async()=>{const s=await j.getFirstObsValue(v.value.patientID,"Appointment date","value_text");p.value=s},D=async()=>[...await ct(m.value)],w=async()=>{if(m.value.length>=0){const s=Z.getUserID(),a=new lt(v.value.patientID,s);if(!await a.createEncounter())return S("Unable to create appointment date encounter");if(!await a.saveObservationList(await D()))return S("Unable to create date!");tt("Client has been scheduled for next contact")}},x=async()=>{if(!await d.validate()){G("Next appointment date has errors");return}await w(),u(),await o.push("ANCHome"),await Q()},N=()=>{u()},B=()=>{O()},O=()=>{c.value=!c.value},u=()=>{c.value=!1},M=()=>{o.push("/contacts")},I=()=>{o.push("/contact")};return V(()=>{A()}),(s,a)=>{const f=P("ion-icon");return L(),H(n(R),null,{default:h(()=>[e(Y),e(n(T),{fullscreen:!0,class:"ion-padding-bottom"},{default:h(()=>[e(at),t("div",rt,[t("div",pt,[t("div",ut,[e(l,{name:r.backBtn,iconSlot:"start",fill:"clear",icon:n(E),onClick:a[0]||(a[0]=y=>k()),class:"back-btn-custom"},null,8,["name","icon"])]),t("div",dt,[t("div",mt,[e(f,{icon:n(g)},null,8,["icon"])]),t("div",vt,[a[1]||(a[1]=t("span",{class:"label"},"Next Appointment",-1)),t("span",{class:J(["value",{"no-date":!p.value}])},q(p.value||"Not scheduled"),3)])])]),t("div",ft,[t("div",_t,[e(l,{name:"New ANC Contact",iconSlot:"start",fill:"solid",icon:n(z),onClick:I,class:"cta-button"},null,8,["icon"])]),t("div",bt,[e(l,{name:"View Contacts",iconSlot:"start",fill:"outline",icon:n(K),onClick:M,class:"sub-button"},null,8,["icon"])]),t("div",ht,[e(l,{name:"Schedule Contact",iconSlot:"start",fill:"outline",icon:n(g),onClick:B,class:"sub-button"},null,8,["icon"])])]),a[2]||(a[2]=t("div",{class:"content-divider"},[t("span",null,"Patient Overview")],-1)),t("div",gt,[e(ot)])]),e(st,{isOpen:c.value,title:"",closeModalFunc:u,onYes:x,onNo:N},null,8,["isOpen"])]),_:1})]),_:1})}}}),It=et(St,[["__scopeId","data-v-cd8ea696"]]);export{It as default};
