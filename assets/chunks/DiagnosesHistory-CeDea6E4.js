import{d as y,aW as w,cp as S,r as e,w as l,a as O,b7 as p,cW as T,e as c,f as d,l as B,J as k,k as u,F as E,P as H,K as x,u as C}from"./vendor-9T3c-tPq.js";import{u as N,af as F,aT as V,H as I,_ as M}from"../index-Zqy7iC3X.js";import"./lodash-NJiRuGo9.js";import"./apexcharts-qlDaiiMc.js";const R={class:"table-responsive"},W=y({__name:"DiagnosesHistory",setup(A){const m=N(),{patient:_}=w(m),f=S(),b=e(null),t=e([]),g=e(["Diagnosis","Date"]),v=e({responsive:!0,select:!1,layout:{topStart:"",topEnd:"search",bottomStart:"info",bottomEnd:"paging"},ordering:!1}),s=async()=>{try{t.value=[];const h=(await F.getObsByEncounterId(41)).flatMap(a=>a.obs||[]).filter(a=>a.concept_name==="Diagnosis"&&a.value_coded).sort((a,r)=>{const i=new Date(a.obs_datetime).getTime();return new Date(r.obs_datetime).getTime()-i});for(const a of h){const r=await V.getConceptName(a.value_coded),i=I.toStandardHisFormat(a.obs_datetime);t.value.push([r,i])}}catch(o){console.error("Error updating diagnosis data:",o),t.value=[]}};return l(()=>f.path,async()=>{await s()},{deep:!0}),l(_,async()=>{await s()},{deep:!0}),O(async()=>{await s(),p.use(T)}),(o,D)=>(d(),c("div",R,[B(C(p),{ref_key:"dataTable",ref:b,options:v.value,data:t.value,class:"display nowrap modern-table",width:"100%"},{default:k(()=>[u("thead",null,[u("tr",null,[(d(!0),c(E,null,H(g.value,n=>(d(),c("th",{key:n},x(n),1))),128))])])]),_:1},8,["options","data"])]))}}),q=M(W,[["__scopeId","data-v-2587d87c"]]);export{q as default};
