import{D as Je,d as E,ah as j,b6 as ue,b5 as Ne,b2 as ne,G as se,E as me,ai as Pe,aj as U,_ as R,I as ae,a3 as Q,R as Oe,bf as Ge,aT as Le,H as r,e as v,f as u,l as e,J as o,Q as k,k as s,F as V,aV as pe,r as w,cp as Te,w as we,a as ie,n as Ae,P as x,K as F,u as c,cW as je,ao as Ue,L as z,W as O,bD as ze,a5 as le,a4 as q,a6 as fe,cq as We,aE as Ke,m as H,O as J,p as W,bq as X,bj as Qe,bw as Ve,aU as De,aQ as Fe,N as ye,aR as Ce,c as Z,aM as qe,a2 as Xe,ax as Ye,d8 as Ze,em as et,en as tt,eo as ot,ce as Se,bl as nt,M as st,al as te,ak as oe,b$ as at,bv as it,de as ve,dd as lt}from"./vendor-DXb7_Vik.js";import{l as Y,J as rt,b4 as dt,B as Ee,bd as ct,M as de,o as ut,H as ee,u as K,aP as xe,G as pt,s as Be,_ as B,aJ as _t,m as He,V as gt,af as mt,aS as ft,be as vt,bf as ht,bg as Me,bh as Ie,bi as he,aL as _e,bj as be,bk as bt,aK as ge,K as Dt,c as yt,bl as Ct,T as St}from"../index-BTzlHWti.js";import{P as $t}from"./patient_diagnosis_service-CQuOZ-dD.js";import{D as wt}from"./DashBox-B6L57Iw1.js";import{B as ce}from"./BasicForm-D7ict4Ee.js";import{p as Mt}from"./previousDiagnosis-BXFeTYtL.js";import{a as It}from"./formatServerData-7qThvcTY.js";import{v as kt}from"./group_validation-D1UmyalB.js";import{a as Nt,g as Pt,P as $e}from"./nonPharmaTherapyStore-BeISV_Ld.js";import{D as Ot,a as Lt,A as Tt}from"./NextAppointment-1xKyys5A.js";const ke=Je("NCDDiagnosisStore",{state:()=>({diagnosis:[{selectedData:[],isFinishBtn:!1,data:{rowData:[{colData:[{inputHeader:"Diagnosis",icon:Y.search,value:"",name:"diagnosis",eventType:"input",required:!0,alertsErrorMassage:"",isSingleSelect:!0,trackBy:"concept_id",valueType:"coded",multiSelectData:[],id:"",validationFunctionName:"required"}]}]}}]}),actions:{setDiagnosis(t){this.diagnosis=t}}}),At=E({name:"Menu",components:{IonContent:Q,IonHeader:ae,IonItem:R,IonList:U,IonMenu:Pe,IonTitle:me,IonToolbar:se,IonInput:ne,IonPopover:Ne,DashBox:wt,SelectionPopover:ct,BasicInputField:Ee,List:dt,BasicForm:ce,DynamicButton:rt,previousDiagnosis:Mt,DataTable:ue},data(){return{iconsContent:Y,no_item:!1,search_item:!1,display_item:!1,addItemButton:!0,selectedText:"",conditionStatus:"",data:[],diagnosisData:[],popoverOpen:!1,event:"",selectedCondition:""}},setup(){return{checkmark:Le,pulseOutline:Ge}},computed:{...j(ke,["diagnosis"]),...j(K,["patient"])},async mounted(){await this.getDiagnosis("")},methods:{async getDiagnosis(t){let n=await $t.getDiagnosis(t,1,15);de(this.diagnosis,"diagnosis","multiSelectData",n)},dismiss(){Oe.dismiss()},async addNewRow(){var t,n,f,y,C,a,i,l;if(await kt(this.diagnosis)){de(this.diagnosis,"diagnosis","alertsErrorMassage","");const d=await It(this.diagnosis);let g="";if(this.diagnosis&&this.diagnosis.length>0){const p=this.diagnosis[0];(C=(y=(f=(n=(t=p==null?void 0:p.data)==null?void 0:t.rowData)==null?void 0:n[0])==null?void 0:f.colData)==null?void 0:y[0])!=null&&C.value&&(g=p.data.rowData[0].colData[0].value.name||"")}if(!g&&d.length>0&&d[0].value_coded)try{const m=(await ut("concept_names")).find(h=>h.concept_id===d[0].value_coded);m&&(g=m.name)}catch(p){console.error("Could not fetch from PouchDB:",p)}const _=d.map(p=>({...p,diagnosis_name:g||"Unknown Diagnosis",obs_datetime:p.obs_datetime||ee.sessionDate()})),S=K(),$=JSON.parse(JSON.stringify(S.patient));(l=(i=(a=$.diagnosis)!=null?a:$.diagnosis={}).unsaved)!=null||(i.unsaved=[]),$.diagnosis.unsaved.push(..._);try{await xe($),await new Promise(p=>setTimeout(p,500)),pt("Diagnosis successfully saved"),this.dismiss()}catch(p){console.error(" Error saving diagnosis:",p),Be("Failed to save diagnosis. Please try again.")}}else de(this.diagnosis,"diagnosis","alertsErrorMassage","Please select diagnosis from the list")},updateDiagnosisStores(){ke().setDiagnosis(this.diagnosis)},async handleInputData(t){de(this.diagnosis,"diagnosis","alertsErrorMassage","")}}}),Vt={class:"modal_wrapper"},Ft={class:""};function Et(t,n,f,y,C,a){const i=r("ion-title"),l=r("ion-icon"),d=r("ion-header"),g=r("basic-form"),_=r("ion-content"),S=r("DynamicButton"),$=r("ion-col"),p=r("ion-row"),m=r("ion-footer");return u(),v(V,null,[e(d,{style:{display:"flex","justify-content":"space-between"}},{default:o(()=>[e(i,{class:"modalTitle"},{default:o(()=>[...n[2]||(n[2]=[k("Add Diagnosis",-1)])]),_:1}),e(l,{onClick:n[0]||(n[0]=h=>t.dismiss()),style:{"padding-top":"10px","padding-right":"10px"},icon:t.iconsContent.cancel},null,8,["icon"])]),_:1}),e(_,{fullscreen:!0,style:{"--background":"#fff"}},{default:o(()=>[s("div",Vt,[s("div",Ft,[e(g,{contentData:t.diagnosis,onSearchChange:t.getDiagnosis,"onUpdate:inputValue":t.handleInputData},null,8,["contentData","onSearchChange","onUpdate:inputValue"])])])]),_:1}),e(m,{collapse:"fade",class:"ion-no-border"},{default:o(()=>[e(p,null,{default:o(()=>[e($,null,{default:o(()=>[e(S,{onClick:n[1]||(n[1]=h=>t.addNewRow()),name:"Save",fill:"solid",style:{float:"right",margin:"2%",width:"130px"}})]),_:1})]),_:1})]),_:1})],64)}const xt=B(At,[["render",Et],["__scopeId","data-v-644a3526"]]),Bt={class:"table-responsive"},Ht=E({__name:"Diagnosis",setup(t){const n=_t(),f=K(),{diagnosis:y}=pe(n),{patient:C}=pe(f),a=w(null),i=w([]),l=w(Y),d=["Diagnosis","Date","Action"],g={responsive:!0,select:!1,layout:{topStart:"buttons",topEnd:"search",bottomStart:"info",bottomEnd:"paging"},ordering:!1,buttons:[{text:" <b>+ Add diagnosis </b>",className:"add-test text-white",action:async()=>{await _()}}]},_=async()=>{await He(xt,{class:"lab-results-modal"},!0),await p()},S=async h=>h.length>0?await Promise.all(h.map(async M=>{let P=M.diagnosis_name||M.name;!P&&M.value_coded&&(P=await mt.getConceptName(M.value_coded));const N=M.obs_datetime;return[P||"",ee.toStandardHisFormat(N),'<button class="btn btn-outline-danger btn-sm delete-btn" data-id=\''.concat(JSON.stringify({id:M.obs_id,value_coded:M.value_coded,name:P,obs_date:N}),"'>").concat(l.value.delete2,"</button>")]})):[],$=async(h,M)=>{var N;if(await gt("Do you want to delete ".concat(h.name," ?"),M)){const b=JSON.parse(JSON.stringify(C.value)),D=b.diagnosis;h!=null&&h.id?(D.saved=D.saved.filter(I=>!(I.value_coded===h.value_coded&&I.obs_datetime===h.obs_date)),(N=D.voided)!=null||(D.voided=[]),D.voided.push(h)):D.unsaved=D.unsaved.filter(I=>!(I.value_coded===h.value_coded&&I.obs_datetime===h.obs_date)),await xe(b)}},p=async()=>{var P,N;const h=JSON.parse(JSON.stringify(C.value)),M=[...((P=h==null?void 0:h.diagnosis)==null?void 0:P.unsaved)||[],...((N=h==null?void 0:h.diagnosis)==null?void 0:N.saved)||[]];i.value=await S(M),ue.use(je)},m=Te();return we(()=>m,async()=>{await p()},{deep:!0}),we(()=>C,async()=>{await p()},{deep:!0}),ie(async()=>{await p(),Ae(()=>{const h=a.value.dt;h.columns.adjust().draw(),h.on("click",".delete-btn",M=>{const P=M.target.getAttribute("data-id");$(JSON.parse(P),M)})})}),(h,M)=>(u(),v("div",Bt,[e(c(ue),{ref_key:"dataTableRef",ref:a,options:g,data:i.value,class:"display nowrap modern-table",width:"100%"},{default:o(()=>[s("thead",null,[s("tr",null,[(u(),v(V,null,x(d,P=>s("th",{key:P},F(P),1)),64))])])]),_:1},8,["data"])]))}}),hn=B(Ht,[["__scopeId","data-v-13544ebc"]]),Rt={class:"sub_item_body"},Jt={class:"ion-padding",slot:"content"},Gt={class:"table-responsive"},jt=E({__name:"ComplicationsScreening",setup(t){Ue();const n=Nt(),{FootScreening:f,visualScreening:y,cvScreening:C}=pe(n),a=K(),{patient:i}=pe(a);Te();const l=w(null),d=w([]);w(!1),w(!1),w("");const g=w("");w({btnColor:"secondary",btnName:"No risk"});const _=w(Y),S=["Condition","Result","Date","Action"],$={responsive:!0,select:!1,layout:{topEnd:"search",bottomStart:"info",bottomEnd:"paging"},ordering:!1},p=async()=>{var N,b;const M=JSON.parse(JSON.stringify(i.value)),P=[...((N=M==null?void 0:M.screening)==null?void 0:N.unsaved)||[],...((b=M==null?void 0:M.screening)==null?void 0:b.saved)||[]];d.value=await m(P)},m=async M=>M.length===0?[]:(await Promise.all(M.map(async N=>N.concept_name==="Visual acuity"?N.children.map(b=>[b.concept_name,b.value_text,ee.toStandardHisFormat(b.obs_datetime),'<button class="btn btn-outline-danger btn-sm delete-btn" data-id=\''.concat(JSON.stringify(b),"'>\n                        ").concat(_.value.delete2,"</button>")]):N.concept_name==="Foot check"?Promise.all(N.children.map(async b=>[b.concept_name,await ft.getConceptName(b.value_coded),ee.toStandardHisFormat(b.obs_datetime),'<button class="btn btn-outline-danger btn-sm delete-btn" data-id=\''.concat(JSON.stringify(b),"'>\n                            ").concat(_.value.delete2,"</button>")])):N.concept_name==="Cardiovascular disease"?[["CVD %",N.value_text,ee.toStandardHisFormat(N.obs_datetime),'<button class="btn btn-outline-danger btn-sm delete-btn" data-id=\''.concat(JSON.stringify(N),"'>\n                            ").concat(_.value.delete2,"</button>")]]:[]))).flat(),h=M=>{};return ie(async()=>{await p(),Ae(()=>{const M=l.value.dt;M.columns.adjust().draw(),M.on("click",".delete-btn",P=>{const N=P.target.getAttribute("data-id");h(JSON.parse(N))})})}),(M,P)=>{const N=r("ion-label"),b=r("ion-accordion"),D=r("ion-accordion-group"),I=r("ion-row");return u(),v(V,null,[e(ce,{contentData:c(y)},null,8,["contentData"]),e(c(U),null,{default:o(()=>[e(c(R),{lines:g.value,class:"dashed_bottom_border textSectionFormat"},{default:o(()=>[...P[0]||(P[0]=[s("span",{style:{display:"flex","align-items":"center",gap:"10px"}}," Foot screening ",-1)])]),_:1},8,["lines"]),s("div",Rt,[e(ce,{contentData:c(f)},null,8,["contentData"])])]),_:1}),e(ce,{contentData:c(C)},null,8,["contentData"]),e(I,null,{default:o(()=>[e(D,{ref:"accordionGroup",class:"previousView"},{default:o(()=>[e(b,{value:"first","toggle-icon-slot":"start",style:{"border-radius":"10px","background-color":"#fff"}},{default:o(()=>[e(c(R),{slot:"header",color:"light"},{default:o(()=>[e(N,{class:"previousLabel"},{default:o(()=>[...P[1]||(P[1]=[k("Previous Visits",-1)])]),_:1})]),_:1}),s("div",Jt,[s("div",Gt,[e(c(ue),{ref_key:"dataTableRef",ref:l,options:$,data:d.value,class:"display nowrap",width:"100%"},{default:o(()=>[s("thead",null,[s("tr",null,[(u(),v(V,null,x(S,T=>s("th",{key:T},F(T),1)),64))])])]),_:1},8,["data"])])])]),_:1})]),_:1},512)]),_:1})],64)}}}),bn=B(jt,[["__scopeId","data-v-f3420ad0"]]),Ut=E({name:"Home",components:{IonContent:Q,IonHeader:ae,IonMenuButton:We,IonPage:fe,IonTitle:me,IonToolbar:se,IonRow:q,IonCol:le,IonChip:ze,IonLabel:O,IonIcon:z},computed:{...j(K,["patient"])},data(){const t=w([]),n=w([]),f=async()=>{try{const a=this.patient;ht(a.ID);const i=w(!1),l=_=>{i.value=_};t.value=await Pt();const d=t.value.some(_=>_.toLowerCase().includes("hypertension")),g=t.value.some(_=>_.toLowerCase().includes("diabetes"));d&&(l(!0),Me()),g&&(l(!0),Ie()),i.value==!1}catch(a){}},y=async()=>{const a=n.value.some(l=>l.toLowerCase().includes("hypertension")),i=n.value.some(l=>l.toLowerCase().includes("diabetes"));a&&await Me(),i&&await Ie()};return{diagnoses:t,selectedDiagnoses:n,medkitOutline:Ke,initC:f,toggleDiagnosisSelection:a=>{const i=n.value.indexOf(a);i===-1?(n.value.push(a),he(),y()):(n.value.splice(i,1),he(),y()),n.value.length===0&&(he(),f())}}},async mounted(){this.initC()},watch:{patient:{handler(){vt(this.patient.ID),this.initC()},deep:!0}}}),zt={key:0,class:"diagnosis-container"},Wt={class:"heading"},Kt={class:"diagnosis-list"};function Qt(t,n,f,y,C,a){const i=r("ion-icon"),l=r("ion-label"),d=r("ion-chip"),g=r("ion-col"),_=r("ion-row");return t.diagnoses.length>0?(u(),v("div",zt,[s("div",Wt,[e(i,{icon:t.medkitOutline,class:"diagnosis-icon"},null,8,["icon"]),n[0]||(n[0]=s("h2",null,"Diagnosis",-1))]),e(_,null,{default:o(()=>[e(g,null,{default:o(()=>[s("div",Kt,[(u(!0),v(V,null,x(t.diagnoses,(S,$)=>(u(),J(d,{key:$,class:W({"diagnosis-chip-selected":t.selectedDiagnoses.includes(S)}),onClick:p=>t.toggleDiagnosisSelection(S)},{default:o(()=>[e(l,null,{default:o(()=>[k(F(S),1)]),_:2},1024)]),_:2},1032,["class","onClick"]))),128))])]),_:1})]),_:1})])):H("",!0)}const qt=B(Ut,[["render",Qt],["__scopeId","data-v-2bd0f8ca"]]),Xt=E({name:"MedicationSearch",components:{IonContent:Q,IonPage:fe,IonItem:R,IonLabel:O,IonInput:ne,IonIcon:z,BasicInputField:Ee,IonCard:X},setup(){const t=w(""),n=_e();return{searchText:t,searchTextUpdated:y=>{const C=y.target;t.value=C.value;const a=n.medications.filter(i=>i.name.toLowerCase().includes(t.value.toLowerCase()));n.setFilteredMedications(a)},searchOutline:Qe}}});function Yt(t,n,f,y,C,a){const i=r("BasicInputField"),l=r("ion-card");return u(),v("div",null,[s("div",null,[e(l,null,{default:o(()=>[e(i,{placeholder:"Filter medication list by name",icon:t.searchOutline,inputValue:t.searchText,"onUpdate:inputValue":t.searchTextUpdated,minHeight:50},null,8,["icon","inputValue","onUpdate:inputValue"])]),_:1})])])}const Zt=B(Xt,[["render",Yt]]),eo=E({name:"medication",components:{IonCard:X,IonCardHeader:Ce,IonButton:ye,IonCardTitle:Fe,IonCardContent:De,IonInput:ne,IonIcon:z,IonCol:le,IonRow:q,IonCheckbox:Ve,PreviousNCDDiagnosis:qt,MedicationSearchInput:Zt},computed:{...j(_e,["medications","filteredMedications"]),...j(be,["otherNCDMedications"]),activeMedications(){return this.useDefaultStores?this.filteredMedications:this.otherNCDMedications}},props:{useDefaultStores:{type:Boolean,default:!0}},setup(t){const n=_e();n.initMedications();const f=Z(()=>n.selectedNCDMedicationList),y=be(),C=Z(()=>y.selectedOtherNCDMedicationList),a=Z(()=>t.useDefaultStores?f.value:C.value),i=w(!1),l=w({});let d=null;const g=()=>{i.value=!1,d&&(clearTimeout(d),d=null)},_=b=>{l.value={...l.value,[b]:!0},i.value=!0,d&&clearTimeout(d),d=window.setTimeout(()=>{i.value=!1,d=null},3e3),window.setTimeout(()=>{const D={...l.value};delete D[b],l.value=D},3e3)},S=b=>/^\d*$/.test(b),$=(b,D,I)=>{let T=I.target.value;const G="".concat(b,"-").concat(D);if(T!==""&&!S(T)){_(G);const L=a.value.find(re=>re.drug_id===b);T=(L==null?void 0:L.dosage[D])||"",setTimeout(()=>{const re=I.target;re&&(re.value=T)},0);return}if(T!==""){const L=parseInt(T);isNaN(L)||L<0?T="0":T=Math.floor(L).toString()}const A=a.value.findIndex(L=>L.drug_id===b);if(A>-1){const L={...a.value[A]};L.dosage={...L.dosage,[D]:T},a.value[A]=L}},p=(b,D)=>{let I=D.target.value;const T="".concat(b,"-duration");if(I!==""&&!S(I)){_(T);const A=a.value.find(L=>L.drug_id===b);I=(A==null?void 0:A.duration)||"",setTimeout(()=>{const L=D.target;L&&(L.value=I)},0);return}if(I!==""){const A=parseInt(I);isNaN(A)||A<1?I="1":I=Math.floor(A).toString()}const G=a.value.findIndex(A=>A.drug_id===b);if(G>-1){const A={...a.value[G]};A.duration=I,a.value[G]=A}},m=b=>a.value.some(D=>D.drug_id===b);return{medkit:Se,sunny:ot,partlySunny:tt,moon:et,timeOutline:Ze,alertCircleOutline:Ye,closeCircleOutline:Xe,updateDosage:$,updateDuration:p,getDosage:(b,D)=>{const I=a.value.find(T=>T.drug_id===b);return(I==null?void 0:I.dosage[D])||""},getDuration:b=>{const D=a.value.find(I=>I.drug_id===b);return(D==null?void 0:D.duration)||""},calculateQuantity:b=>{const D=a.value.find(G=>G.drug_id===b);if(!D||!D.dosage||!D.duration)return"";const I=["morning","afternoon","evening"].reduce((G,A)=>{const L=parseInt(D.dosage[A])||0;return G+L},0),T=parseInt(D.duration)||0;return(I*T).toString()},isActive:m,toggleMedication:async b=>{try{if(m(b)){const D=a.value.findIndex(I=>I.drug_id===b);D>-1&&a.value.splice(D,1)}else{const D=await bt(b);t.useDefaultStores==!1?y.setSelectedNCDMedicationList(D):n.setSelectedNCDMedicationList(D)}}catch(D){Be("Error toggling medication: "+D)}},cubeOutline:qe,showErrorMessage:i,errorFields:l,hideErrorMessage:g}}}),to={key:0},oo={key:0,class:"error-message"},no={class:"table-container"},so={class:"prescription-table"},ao=["onClick"],io=["onClick"],lo={class:"med-kit-font"};function ro(t,n,f,y,C,a){const i=r("PreviousNCDDiagnosis"),l=r("ion-col"),d=r("MedicationSearchInput"),g=r("ion-row"),_=r("ion-icon"),S=r("ion-button"),$=r("ion-checkbox"),p=r("ion-input");return u(),v(V,null,[e(g,null,{default:o(()=>[e(l,{size:"5"},{default:o(()=>[t.useDefaultStores?(u(),J(i,{key:0})):H("",!0)]),_:1}),e(l,null,{default:o(()=>[t.useDefaultStores&&t.medications.length>0?(u(),J(d,{key:0,style:{"margin-top":"0px","font-weight":"600","font-size":"16px"}})):H("",!0)]),_:1})]),_:1}),t.activeMedications.length>0?(u(),v("div",to,[t.showErrorMessage?(u(),v("div",oo,[e(_,{icon:t.alertCircleOutline,color:"danger"},null,8,["icon"]),n[0]||(n[0]=s("span",{style:{"font-size":"16px","font-weight":"600px",color:"red"}},"Only numbers are allowed",-1)),e(S,{fill:"clear",size:"small",onClick:t.hideErrorMessage},{default:o(()=>[e(_,{icon:t.closeCircleOutline},null,8,["icon"])]),_:1},8,["onClick"])])):H("",!0),s("div",no,[s("table",so,[s("thead",null,[s("tr",null,[n[6]||(n[6]=s("th",{class:"checkbox-col"},"Select",-1)),n[7]||(n[7]=s("th",null,"Medication",-1)),s("th",null,[e(_,{icon:t.partlySunny},null,8,["icon"]),n[1]||(n[1]=k(" Morning",-1))]),s("th",null,[e(_,{icon:t.sunny},null,8,["icon"]),n[2]||(n[2]=k(" Noon",-1))]),s("th",null,[e(_,{icon:t.moon},null,8,["icon"]),n[3]||(n[3]=k(" Night",-1))]),s("th",null,[e(_,{icon:t.timeOutline},null,8,["icon"]),n[4]||(n[4]=k(" Duration",-1))]),s("th",null,[e(_,{icon:t.cubeOutline},null,8,["icon"]),n[5]||(n[5]=k(" Quantity",-1))])])]),s("tbody",null,[(u(!0),v(V,null,x(t.activeMedications,m=>(u(),v("tr",{key:m.id,class:W({"active-row":t.isActive(m.drug_id)})},[s("td",{class:"checkbox-col",onClick:h=>t.toggleMedication(m.drug_id)},[e($,{checked:t.isActive(m.drug_id),style:{"--size":"26px"}},null,8,["checked"])],8,ao),s("td",{style:{cursor:"pointer"},onClick:h=>t.toggleMedication(m.drug_id)},[s("span",lo,F(m.name),1)],8,io),s("td",null,[e(p,{type:"text",class:W(["dose-input bordered-input med-kit-font",{"error-input":t.errorFields["".concat(m.drug_id,"-morning")]}]),disabled:!t.isActive(m.drug_id),value:t.getDosage(m.drug_id,"morning"),onIonInput:h=>t.updateDosage(m.drug_id,"morning",h),placeholder:"0",inputmode:"numeric"},null,8,["class","disabled","value","onIonInput"])]),s("td",null,[e(p,{type:"text",class:W(["dose-input bordered-input med-kit-font",{"error-input":t.errorFields["".concat(m.drug_id,"-afternoon")]}]),disabled:!t.isActive(m.drug_id),value:t.getDosage(m.drug_id,"afternoon"),onIonInput:h=>t.updateDosage(m.drug_id,"afternoon",h),placeholder:"0",inputmode:"numeric"},null,8,["class","disabled","value","onIonInput"])]),s("td",null,[e(p,{type:"text",class:W(["dose-input bordered-input med-kit-font",{"error-input":t.errorFields["".concat(m.drug_id,"-evening")]}]),disabled:!t.isActive(m.drug_id),value:t.getDosage(m.drug_id,"evening"),onIonInput:h=>t.updateDosage(m.drug_id,"evening",h),placeholder:"0",inputmode:"numeric"},null,8,["class","disabled","value","onIonInput"])]),s("td",null,[e(p,{type:"text",class:W(["dose-input bordered-input med-kit-font",{"error-input":t.errorFields["".concat(m.drug_id,"-duration")]}]),disabled:!t.isActive(m.drug_id),value:t.getDuration(m.drug_id),onIonInput:h=>t.updateDuration(m.drug_id,h),placeholder:"0",inputmode:"numeric"},null,8,["class","disabled","value","onIonInput"])]),s("td",null,[e(p,{type:"text",class:"dose-input bordered-input med-kit-font",readonly:"",value:t.calculateQuantity(m.drug_id),placeholder:"0"},null,8,["value"])])],2))),128))])])])])):H("",!0)],64)}const Re=B(eo,[["render",ro],["__scopeId","data-v-c9584f56"]]),co=E({name:"DrugSelector",components:{IonContent:Q,IonHeader:ae,IonItem:R,IonList:U,IonMenu:Pe,IonTitle:me,IonToolbar:se,IonInput:ne,IonPopover:Ne,VueMultiselect:nt,IonLabel:O,IonCol:le,IonRow:q},emits:["drug-selected"],data(){const t=C=>{this.$emit("drug-selected",C)},n=async C=>{const a=ge(),i=C,_=(await Dt.getOfflineOPDDrugs({name:i,page:1,page_size:20})).map(S=>({label:S.name,value:S.name,other:S,...S}));a.setPartialOPDdrugList(_)},f=Z(()=>this.partialOPDdrugList);return{selected_drug:w(null),selectedDrugName:t,FindDrugName:n,OPDDrugList:f}},computed:{...j(ge,["partialOPDdrugList"])}});function uo(t,n,f,y,C,a){const i=r("VueMultiselect"),l=r("ion-col"),d=r("ion-row");return u(),v("div",null,[e(d,null,{default:o(()=>[e(l,null,{default:o(()=>[e(i,{modelValue:t.selected_drug,"onUpdate:modelValue":[n[0]||(n[0]=g=>t.selected_drug=g),t.selectedDrugName],multiple:!1,taggable:!1,"hide-selected":!1,"close-on-select":!0,openDirection:"bottom","tag-placeholder":"Select medication",placeholder:"Select medication",selectLabel:"",label:"name",searchable:!0,onSearchChange:t.FindDrugName,"track-by":"uuid",options:t.OPDDrugList},null,8,["modelValue","onUpdate:modelValue","onSearchChange","options"])]),_:1})]),_:1})])}const po=B(co,[["render",uo],["__scopeId","data-v-e33f5b73"]]),_o=E({name:"Home",mixins:[yt],components:{IonContent:Q,IonHeader:ae,IonPage:fe,IonToolbar:se,IonRow:q,IonTitle:me,IonIcon:z,IonFooter:st,OPDMedications:po,Medication:Re,IonCol:le,IonButton:ye},data(){const t=be(),n=()=>{Oe.dismiss()};return{iconsContent:Y,dismiss:n,addSearchedDrug:C=>{t.addSearchedDrug(C)},medkit:Se,checkmark:Le,onAdd:()=>{Ct(),t.clearOtherNCDMedications(),n()}}},computed:{},$route:{async handler(){},deep:!0},watch:{},async mounted(){},methods:{}}),go={class:"medication-list"},mo={class:"modal_wrapper"},fo={class:""};function vo(t,n,f,y,C,a){const i=r("ion-icon"),l=r("ion-title"),d=r("ion-header"),g=r("OPDMedications"),_=r("Medication"),S=r("ion-content"),$=r("ion-button"),p=r("ion-col"),m=r("ion-row"),h=r("ion-footer");return u(),v(V,null,[e(d,{style:{display:"flex","justify-content":"space-between"}},{default:o(()=>[e(l,{class:"modalTitle"},{default:o(()=>[s("div",go,[e(i,{icon:t.medkit,class:"ion-margin-end"},null,8,["icon"]),n[1]||(n[1]=s("span",null,"Add Other Medication",-1))])]),_:1}),e(i,{onClick:n[0]||(n[0]=M=>t.dismiss()),style:{"padding-top":"10px","padding-right":"10px"},icon:t.iconsContent.cancel},null,8,["icon"])]),_:1}),e(S,{fullscreen:!0,class:"ion-padding",style:{"--background":"#fff"}},{default:o(()=>[s("div",mo,[s("div",fo,[e(g,{onDrugSelected:t.addSearchedDrug},null,8,["onDrugSelected"]),e(_,{"use-default-stores":!1})])])]),_:1}),e(h,{collapse:"fade",class:"ion-no-border"},{default:o(()=>[e(m,null,{default:o(()=>[e(p,null,{default:o(()=>[e($,{onClick:t.onAdd,color:"primary",style:{float:"right","margin-bottom":"20px","margin-right":"20px"}},{default:o(()=>[e(i,{icon:t.checkmark,slot:"start"},null,8,["icon"]),n[2]||(n[2]=k(" Add ",-1))]),_:1},8,["onClick"])]),_:1})]),_:1})]),_:1})],64)}const ho=B(_o,[["render",vo],["__scopeId","data-v-dee50533"]]),bo=E({name:"Home",components:{IonContent:Q,IonHeader:ae,IonPage:fe,IonToolbar:se,Toolbar:St,IonRow:q,IonAccordion:oe,IonAccordionGroup:te,IonItem:R,IonLabel:O,DynamicList:Ot,IonCard:X},data(){const t=w(0),n=w("Show more medications"),f=w(!1),y=w();return{componentKey:t,accordionGroupChange:l=>{const d=l.detail.value;d!==void 0?d=="second"&&(n.value="Show less medications",f.value=!f.value):(n.value="Show more medications",f.value=!f.value)},showMoreMedicationsMsg:n,itemWasExpanded:f,accordionGroupChangeFn1:l=>{},PreviuosSelectedMedicalDrugsList:y,loadPreviousMedications:async()=>{const l=new $e,{previousDrugPrescriptions:d}=await l.getPatientEncounters();y.value=d}}},computed:{...j(K,["patient"]),...j(_e,["selectedNCDMedicationList"])},$route:{async handler(){},deep:!0},watch:{patient:{handler(){this.loadPreviousMedications()},deep:!0},selectedNCDMedicationList:{handler(){this.loadPreviousMedications()},deep:!0}},async mounted(){this.loadPreviousMedications()}}),Do={style:{}},yo={class:"ion-padding",slot:"content"},Co={key:0},So={class:"previousSecDrgs"},$o={class:"ion-padding",slot:"content"},wo={key:0},Mo={class:"previousSecDrgs"};function Io(t,n,f,y,C,a){const i=r("ion-label"),l=r("ion-item"),d=r("dynamic-list"),g=r("ion-accordion"),_=r("ion-accordion-group"),S=r("ion-card");return u(),J(S,null,{default:o(()=>[s("div",Do,[e(_,{ref:"accordionGroup",class:"previousView",onIonChange:t.accordionGroupChangeFn1},{default:o(()=>[e(g,{value:"first","toggle-icon-slot":"start",style:{"border-radius":"10px","background-color":"#fff"}},{default:o(()=>[e(l,{slot:"header",color:"light"},{default:o(()=>[e(i,{class:"previousLabel"},{default:o(()=>[...n[0]||(n[0]=[k("Documented medications timeline",-1)])]),_:1})]),_:1}),s("div",yo,[(u(!0),v(V,null,x(t.PreviuosSelectedMedicalDrugsList,($,p)=>(u(),v("div",{class:"ionLbltp",key:p},[p==0?(u(),v("div",Co,[s("div",null,[e(i,{class:"previousLabelDate"},{default:o(()=>[k(F($.prescriptionDate),1)]),_:2},1024)]),s("div",So,[(u(),J(d,{_selectedMedicalDrugsList:$.previousPrescriptions,show_actions_buttons:!1,key:t.componentKey},null,8,["_selectedMedicalDrugsList"]))])])):H("",!0)]))),128)),e(_,{onIonChange:t.accordionGroupChange},{default:o(()=>[e(g,{value:"second","toggle-icon-slot":"start",style:{"border-radius":"10px","background-color":"#fff"}},{default:o(()=>[e(l,{slot:"header",color:"light"},{default:o(()=>[e(i,{class:"",color:"primary"},{default:o(()=>[k(F(t.showMoreMedicationsMsg),1)]),_:1})]),_:1}),s("div",$o,[(u(!0),v(V,null,x(t.PreviuosSelectedMedicalDrugsList,($,p)=>(u(),v("div",{class:"ionLbltp",key:p},[t.itemWasExpanded&&p>0?(u(),v("div",wo,[s("div",null,[e(i,{class:"previousLabelDate"},{default:o(()=>[k(F($.prescriptionDate),1)]),_:2},1024)]),s("div",Mo,[(u(),J(d,{_selectedMedicalDrugsList:$.previousPrescriptions,show_actions_buttons:!1,key:t.componentKey},null,8,["_selectedMedicalDrugsList"]))])])):H("",!0)]))),128))])]),_:1})]),_:1},8,["onIonChange"])])]),_:1})]),_:1},8,["onIonChange"])])]),_:1})}const ko=B(bo,[["render",Io],["__scopeId","data-v-1db96250"]]),No=E({name:"PrescriptionTable",components:{IonCard:X,IonCardHeader:Ce,IonButton:ye,IonCardTitle:Fe,IonCardContent:De,IonInput:ne,IonIcon:z,IonCol:le,IonRow:q,IonCheckbox:Ve,Medication:Re,MedicationHistory:ko},setup(){return{openAddOtherOPDMedicationModal:async()=>{await He(ho,{class:"large-modal"},!0,{})},medkit:Se}}});function Po(t,n,f,y,C,a){const i=r("Medication"),l=r("ion-icon"),d=r("ion-button"),g=r("ion-col"),_=r("ion-row"),S=r("MedicationHistory"),$=r("IonCol"),p=r("ion-card-content"),m=r("ion-card");return u(),J(m,null,{default:o(()=>[e(p,null,{default:o(()=>[e(i),e(_,null,{default:o(()=>[e(g,null,{default:o(()=>[e(d,{onClick:t.openAddOtherOPDMedicationModal,color:"primary",style:{float:"right"}},{default:o(()=>[e(l,{icon:t.medkit,slot:"start"},null,8,["icon"]),n[0]||(n[0]=s("span",{style:{"margin-left":"10px","font-size":"16px","font-weight":"600"}}," ADD Other Medication",-1))]),_:1},8,["onClick"])]),_:1})]),_:1}),e(_,null,{default:o(()=>[e($,null,{default:o(()=>[e(S)]),_:1})]),_:1})]),_:1})]),_:1})}const Oo=B(No,[["render",Po],["__scopeId","data-v-a4ad7088"]]),Lo={style:{"margin-top":"14px","margin-left":"10px"}},To={class:"ion-padding",slot:"content"},Ao={key:0},Vo={class:"previousSecDrgs"},Fo={class:"ion-padding",slot:"content"},Eo={class:"previousSecDrgs"},xo=E({watch:{},name:"xxxComponent"}),Bo=E({...xo,setup(t){const n=w(),f=w(),y=w(!1),C=w(!1),a=w("Show more notes");ie(async()=>{const d=new $e,{previousClinicalNotes:g}=await d.getPatientEncounters();n.value=Object.entries(g)[0];const[,..._]=Object.entries(g);f.value=_});function i(d){const g=d.detail.value;g!==void 0?g=="third"&&(a.value="Show less notes",C.value=!y.value):(a.value="Show more notes",C.value=!y.value)}function l(d){return d[1]}return(d,g)=>(u(),J(c(X),null,{default:o(()=>[s("div",Lo,[e(c(te),{ref:"accordionGroup",class:"previousView"},{default:o(()=>[e(c(oe),{value:"fourth","toggle-icon-slot":"start",style:{"border-radius":"10px","background-color":"#fff"}},{default:o(()=>[e(c(R),{slot:"header",color:"light"},{default:o(()=>[e(c(O),{class:"previousLabel"},{default:o(()=>[...g[0]||(g[0]=[k("Previous visits notes",-1)])]),_:1})]),_:1}),s("div",To,[(u(!0),v(V,null,x(n.value,(_,S)=>(u(),v("div",{class:"ionLbltp",key:S},[S==1?(u(),v("div",Ao,[(u(!0),v(V,null,x(_,($,p)=>(u(),v("div",{key:p},[s("div",null,[e(c(O),{class:"previousLabelDate"},{default:o(()=>[k(F($.date),1)]),_:2},1024)]),s("div",Vo,[e(c(U),null,{default:o(()=>[e(c(O),{class:"notes_p"},{default:o(()=>[k(F($.notes),1)]),_:2},1024)]),_:2},1024)])]))),128))])):H("",!0)]))),128)),e(c(te),{onIonChange:i},{default:o(()=>[e(c(oe),{value:"third","toggle-icon-slot":"start",style:{"border-radius":"10px","background-color":"#fff"}},{default:o(()=>[e(c(R),{slot:"header",color:"light"},{default:o(()=>[e(c(O),{class:"",color:"primary"},{default:o(()=>[k(F(a.value),1)]),_:1})]),_:1}),s("div",Fo,[(u(!0),v(V,null,x(f.value,(_,S)=>(u(),v("div",{class:"ionLbltp",key:S},[(u(!0),v(V,null,x(l(_),($,p)=>(u(),v("div",{key:p},[s("div",null,[e(c(O),{class:"previousLabelDate"},{default:o(()=>[k(F($.date),1)]),_:2},1024)]),s("div",Eo,[e(c(U),null,{default:o(()=>[e(c(O),{class:"notes_p"},{default:o(()=>[k(F($.notes),1)]),_:2},1024)]),_:2},1024)])]))),128))]))),128))])]),_:1})]),_:1})])]),_:1})]),_:1},512)])]),_:1}))}}),Ho=B(Bo,[["__scopeId","data-v-994df42d"]]),Ro={style:{"margin-top":"14px","margin-left":"10px"}},Jo=E({watch:{},name:"xxxComponent"}),Go=E({...Jo,setup(t){const n=ge(),f=Y,y=Z(()=>n.nonPharmalogicalTherapyAndOtherNotes);function C(i){let l=i.target.value;a(l)}function a(i){ge().setNonPharmalogicalTherapyAndOtherNotes(i)}return(i,l)=>(u(),J(c(X),null,{default:o(()=>[e(c(Ce),null,{default:o(()=>[e(c(O),{class:"tpStndCls"},{default:o(()=>[e(c(z),{icon:c(at),class:"header-icon","aria-hidden":"true"},null,8,["icon"]),l[1]||(l[1]=k(" Non-pharmalogical therapy and other notes ",-1))]),_:1})]),_:1}),e(c(De),null,{default:o(()=>[s("div",null,[e(Lt),e(c(R),{class:"input_item",style:{"min-height":"120px","margin-top":"14px"}},{default:o(()=>[e(c(O),null,{default:o(()=>[e(c(z),{slot:"start",icon:c(f).editPen,"aria-hidden":"true"},null,8,["icon"])]),_:1}),e(c(it),{onIonInput:C,modelValue:y.value,"onUpdate:modelValue":l[0]||(l[0]=d=>y.value=d),style:{"min-height":"120px"},class:"inputTpln","auto-grow":!0,fill:"outline"},null,8,["modelValue"])]),_:1})]),s("div",Ro,[e(Ho)])]),_:1})]),_:1}))}}),jo=B(Go,[["__scopeId","data-v-fd19ec21"]]),Uo={class:"ion-padding",slot:"content"},zo={key:0},Wo={class:"previousSecDrgs"},Ko={class:"ion-padding",slot:"content"},Qo={class:"previousSecDrgs"},qo=E({watch:{},name:"xxxComponent"}),Xo=E({...qo,setup(t){const n=w(!1),f=w(!1),y=w("Show more allergies"),C=w(),a=w();ie(async()=>{const d=new $e,{previousDrugAllergies:g}=await d.getPatientEncounters();C.value=Object.entries(g)[0];const[,..._]=Object.entries(g);a.value=_});function i(d){const g=d.detail.value;g!==void 0?g=="fith"&&(y.value="Show less allegies",f.value=!n.value):(y.value="Show more allegies",f.value=!n.value)}function l(d){return d[1]}return(d,g)=>{const _=r("ion-card");return u(),J(_,null,{default:o(()=>[e(c(te),{ref:"accordionGroup",class:"previousView"},{default:o(()=>[e(c(oe),{value:"fourth","toggle-icon-slot":"start",style:{"border-radius":"10px","background-color":"#fff"}},{default:o(()=>[e(c(R),{slot:"header",color:"light"},{default:o(()=>[e(c(O),{class:"previousLabel"},{default:o(()=>[...g[0]||(g[0]=[k("Documented allergies timeline",-1)])]),_:1})]),_:1}),s("div",Uo,[(u(!0),v(V,null,x(C.value,(S,$)=>(u(),v("div",{class:"ionLbltp",key:$},[$==1?(u(),v("div",zo,[s("div",null,[e(c(O),{class:"previousLabelDate"},{default:o(()=>[k(F(S[0].date),1)]),_:2},1024)]),(u(!0),v(V,null,x(S,(p,m)=>(u(),v("div",{key:m},[s("div",Wo,[e(c(U),null,{default:o(()=>[e(c(O),{class:"notes_p"},{default:o(()=>[k(F(p.value),1)]),_:2},1024)]),_:2},1024)])]))),128))])):H("",!0)]))),128)),e(c(te),{onIonChange:i},{default:o(()=>[e(c(oe),{value:"fith","toggle-icon-slot":"start",style:{"border-radius":"10px","background-color":"#fff"}},{default:o(()=>[e(c(R),{slot:"header",color:"light"},{default:o(()=>[e(c(O),{class:"",color:"primary"},{default:o(()=>[k(F(y.value),1)]),_:1})]),_:1}),s("div",Ko,[(u(!0),v(V,null,x(a.value,(S,$)=>(u(),v("div",{class:"ionLbltp",key:$},[s("div",null,[e(c(O),{class:"previousLabelDate"},{default:o(()=>[k(F(S[0]),1)]),_:2},1024)]),(u(!0),v(V,null,x(l(S),(p,m)=>(u(),v("div",{key:m},[s("div",Qo,[e(c(U),null,{default:o(()=>[e(c(O),{class:"notes_p"},{default:o(()=>[k(F(p.value),1)]),_:2},1024)]),_:2},1024)])]))),128))]))),128))])]),_:1})]),_:1})])]),_:1})]),_:1},512)]),_:1})}}}),Yo=B(Xo,[["__scopeId","data-v-358c5959"]]),Zo={class:"background"},en={key:0},tn={style:{margin:"10px"}},on={key:1},nn={style:{margin:"10px"}},sn={key:2},an={style:{margin:"10px"}},ln=E({__name:"TreatmentPlan",setup(t){const n=w(["medications","allergies","other_notes"]),f=w(n.value[0]);ie(()=>{y(n.value[0])});function y(C){f.value=C}return(C,a)=>(u(),v("div",Zo,[e(c(lt),{value:f.value,style:{"margin-top":"5px"}},{default:o(()=>[e(c(ve),{value:"medications",onClick:a[0]||(a[0]=i=>y(n.value[0]))},{default:o(()=>[e(c(O),null,{default:o(()=>[...a[3]||(a[3]=[k("Medications",-1)])]),_:1})]),_:1}),e(c(ve),{value:"allergies",onClick:a[1]||(a[1]=i=>y(n.value[1]))},{default:o(()=>[e(c(O),null,{default:o(()=>[...a[4]||(a[4]=[k("Allergies",-1)])]),_:1})]),_:1}),e(c(ve),{value:"other_notes",onClick:a[2]||(a[2]=i=>y(n.value[2]))},{default:o(()=>[e(c(O),null,{default:o(()=>[...a[5]||(a[5]=[k("Non-pharmalogical therapy and other notes",-1)])]),_:1})]),_:1})]),_:1},8,["value"]),f.value===n.value[0]?(u(),v("div",en,[s("div",tn,[e(Oo)])])):H("",!0),f.value===n.value[1]?(u(),v("div",on,[s("div",nn,[e(Tt),e(Yo,{style:{"margin-top":"10px"}})])])):H("",!0),f.value===n.value[2]?(u(),v("div",sn,[s("div",an,[e(jo)])])):H("",!0)]))}}),Dn=B(ln,[["__scopeId","data-v-d844be41"]]);export{bn as C,hn as D,Dn as T};
