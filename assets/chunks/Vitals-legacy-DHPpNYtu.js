System.register(["../index-legacy-CPN3hcLt.js","./vendor-legacy-IGuUoRYO.js"],function(e,t){"use strict";var n,i,a,o,r,l,s,d,c,u,p,g,h,m,y,v,b,f,k,S,w,T,F,P,C,R,x,O,M,H,B,V,I,_;return{setters:[e=>{n=e.bI,i=e.n,a=e.y,o=e.u,r=e.C,l=e.l,s=e.t,d=e.K,c=e.b,u=e.J,p=e.G,g=e._},e=>{h=e.r,m=e.c,y=e.d,v=e.bh,b=e.w,f=e.a,k=e.n,S=e.b,w=e.e,T=e.f,F=e.Q,P=e.l,C=e.H,R=e.u,x=e.aC,O=e.aB,M=e.k,H=e.al,B=e.a5,V=e.a3,I=e.ad,_=e.F}],execute:function(){var t=document.createElement("style");t.textContent=".previousView[data-v-369a8536]{margin-top:20px;width:100%}.previousLabel[data-v-369a8536]{font-weight:500}\n/*$vite$:1*/",document.head.appendChild(t);const A={class:"ion-padding",slot:"content"};e("V",g(y({__name:"Vitals",setup(e,{expose:t}){const g=(()=>{const e=n(),t=h(""),o=h(!1),r=m(()=>[{componentType:"Heading",name:"Height and weight",grid:{s:"3"}},{componentType:"inputField",name:"height",header:"Height",unit:"cm",type:"number",icon:i.height,value:t.value||"",grid:{s:"4.5"},validation:(e,t)=>null!=t&&t["Check height not done"]||o.value?null:a.vitalsHeight(e),disabled:e=>e["Check height not done"]||o.value},{componentType:"inputField",name:"weight",header:"Weight",unit:"kg",icon:i.weight,type:"number",grid:{s:"4.5"},validation:(e,t)=>null!=t&&t["Check weight not done"]?null:a.vitalsWeight(e),disabled:e=>e["Check weight not done"]},{grid:{s:"3"}},{componentType:"Alert",condition:async t=>null==a.vitalsWeight(t.weight)&&null==a.vitalsHeight(t.height)&&await e.setBMI(t.height,t.weight),grid:{s:"9"}},{grid:{s:"3"}},{componentType:"checkboxField",name:"Check height not done",type:"single",label:"Height not done",value:!1,grid:{s:"4.5"},disabled:e=>o.value,onChange:(e,t)=>{if(!0===e)return{height:""}}},{componentType:"checkboxField",name:"Check weight not done",type:"single",label:"Weight not done",value:!1,grid:{s:"4.5"},onChange:(e,t)=>{if(!0===e)return{weight:""}}},{grid:{s:"3"}},{componentType:"multiSelectInputField",header:"Specify Reason",name:"Other notes",isMultiple:!1,trackBy:"id",grid:{s:"4.5"},icon:i.search,options:[{id:1,name:"Patient uncooperative"},{id:2,name:"Machine not working"},{id:3,name:"Machine not available"}],condition:e=>e["Check height not done"],taggable:!1,hideSelected:!1,closeOnSelect:!0},{componentType:"multiSelectInputField",header:"Specify Reason",name:"Other notes",isMultiple:!1,trackBy:"id",grid:{s:"4.5"},icon:i.search,options:[{id:1,name:"Patient uncooperative"},{id:2,name:"Machine not working"},{id:3,name:"Machine not available"}],condition:e=>e["Check weight not done"],taggable:!1,hideSelected:!1,closeOnSelect:!0}]);return{height:t,isHeightPreLoaded:o,loadHeight:async()=>{const n=await e.checkHeight();n&&""!=n&&"0"!=n?(t.value=n,o.value=!0):(t.value="",o.value=!1)},resetHeight:()=>{t.value="",o.value=!1},heightWeightFormSection:r}})(),y=(()=>{const e=n();return{bloodPressureFormSection:m(()=>[{componentType:"Heading",name:"Blood pressure",grid:{s:"3"}},{componentType:"inputField",name:"Systolic",header:"Systolic Pressure",unit:"mmHg",type:"number",icon:i.systolicPressure,grid:{s:"4.5"},validation:e=>a.vitalsSystolic(e),disabled:e=>e["Check blood pressure not done"]},{componentType:"inputField",name:"Diastolic",header:"Diastolic pressure",unit:"mmHg",icon:i.diastolicPressure,type:"number",grid:{s:"4.5"},validation:e=>a.vitalsDiastolic(e),disabled:e=>e["Check blood pressure not done"]},{grid:{s:"3"}},{componentType:"Alert",grid:{s:"9"},condition:async t=>null==a.vitalsSystolic(t.Systolic)&&null==a.vitalsDiastolic(t.Diastolic)&&await e.updateBP(t.Systolic,t.Diastolic)},{grid:{s:"3"}},{componentType:"checkboxField",name:"Check blood pressure not done",type:"single",label:"Blood pressure not done",value:"",grid:{s:"4.5"}},{componentType:"multiSelectInputField",header:"Specify Reason",name:"Blood Pressure",isMultiple:!1,trackBy:"id",grid:{s:"4.5"},icon:i.search,options:[{id:1,name:"Patient uncooperative"},{id:2,name:"Machine not working"},{id:3,name:"Machine not available"}],condition:e=>e["Check blood pressure not done"],taggable:!1,hideSelected:!1,closeOnSelect:!0}])}})(),D=(()=>{const e=n();return{temperaturePulseRateForm:m(()=>[{componentType:"Heading",name:"Temperature and rates",grid:{s:"3"}},{componentType:"inputField",name:"Temperature",header:"Temperature",unit:"°C",type:"number",icon:i.temprature,grid:{s:"4.5"},validation:e=>a.vitalsTemperature(e),disabled:e=>e["Check temperature not done"]},{componentType:"inputField",name:"Pulse",header:"Pulse rate",unit:"BMP",icon:i.pulse,type:"number",grid:{s:"4.5"},validation:e=>a.vitalsPulseRate(e),disabled:e=>e["Check pulse rate not done"]},{grid:{s:"3"}},{componentType:"Alert",grid:{s:"9"},condition:async t=>{if(null==a.vitalsTemperature(t.Temperature)){const n=e.getTemperatureStatus(t.Temperature);return await e.updateRate("temp",t.Temperature,"°C",n,4)}return!1}},{grid:{s:"3"}},{componentType:"Alert",grid:{s:"9"},condition:async t=>{if(null==a.vitalsPulseRate(t.Pulse)){const n=e.getPulseRateStatus(t.Pulse);return await e.updateRate("pulse",t.Pulse,"BMP",n,4)}return!1}},{grid:{s:"3"}},{componentType:"checkboxField",name:"Check temperature not done",type:"single",label:"Temperature not done",grid:{s:"4.5"}},{componentType:"checkboxField",name:"Check pulse rate not done",type:"single",label:"Pulse not done",grid:{s:"4.5"}},{grid:{s:"3"}},{componentType:"multiSelectInputField",header:"Specify Reason",name:"Other notes",isMultiple:!1,trackBy:"id",grid:{s:"4.5"},icon:i.search,options:[{id:1,name:"Patient uncooperative"},{id:2,name:"Machine not working"},{id:3,name:"Machine not available"}],condition:e=>e["Check temperature not done"],taggable:!1,hideSelected:!1,closeOnSelect:!0},{componentType:"multiSelectInputField",header:"Specify Reason",name:"Other notes",isMultiple:!1,trackBy:"id",grid:{s:"4.5"},icon:i.search,options:[{id:1,name:"Patient uncooperative"},{id:2,name:"Machine not working"},{id:3,name:"Machine not available"}],condition:e=>e["Check pulse rate not done"],taggable:!1,hideSelected:!1,closeOnSelect:!0}])}})(),W=(()=>{const e=n();return{respiratoryRateOxygenForm:m(()=>[{grid:{s:"3"}},{componentType:"inputField",name:"Respiratory rate",header:"Respiratory rate",unit:"BMP",icon:i.respiratory,type:"number",grid:{s:"4.5"},validation:e=>a.vitalsRespiratoryRate(e),disabled:e=>e["Check respiratory rate not done"]},{componentType:"inputField",name:"SAO2",header:"Oxygen saturation",unit:"%",icon:i.oxgenStaturation,type:"number",grid:{s:"4.5"},validation:e=>a.vitalsOxygenSaturation(e),disabled:e=>e["Check oxygen saturation not done"]},{grid:{s:"3"}},{componentType:"Alert",grid:{s:"9"},condition:async t=>{if(null==a.vitalsRespiratoryRate(t["Respiratory rate"])){const n=e.getRespiratoryRateStatus(t["Respiratory rate"]);return await e.updateRate("respiratory",t["Respiratory rate"],"BMP",n,4)}return!1}},{grid:{s:"3"}},{componentType:"Alert",grid:{s:"9"},condition:async t=>{if(null==a.vitalsOxygenSaturation(t.SAO2)){const n=e.getOxygenSaturationStatus(t.SAO2);return await e.updateRate("oxygen",t.SAO2,"%",n,4)}return!1}},{grid:{s:"3"}},{componentType:"checkboxField",name:"Check respiratory rate not done",type:"single",label:"Respiratory rate not done",grid:{s:"4.5"}},{componentType:"checkboxField",name:"Check oxygen saturation not done",type:"single",label:"Oxygen saturation not done",value:"",grid:{s:"4.5"}},{grid:{s:"3"}},{componentType:"multiSelectInputField",header:"Specify Reason",name:"Other notes",isMultiple:!1,trackBy:"id",grid:{s:"4.5"},icon:i.search,options:[{id:1,name:"Patient uncooperative"},{id:2,name:"Machine not working"},{id:3,name:"Machine not available"}],condition:e=>e["Check respiratory rate not done"],taggable:!1,hideSelected:!1,closeOnSelect:!0},{componentType:"multiSelectInputField",header:"Specify Reason",name:"Other notes",isMultiple:!1,trackBy:"id",grid:{s:"4.5"},icon:i.search,options:[{id:1,name:"Patient uncooperative"},{id:2,name:"Machine not working"},{id:3,name:"Machine not available"}],condition:e=>e["Check oxygen saturation not done"],taggable:!1,hideSelected:!1,closeOnSelect:!0}])}})(),j=h(null),N=h(0),L=o(),{patient:$}=v(L);b(()=>{var e;return null===(e=$.value)||void 0===e?void 0:e.patientID},async(e,t)=>{e&&e!==t&&(g.resetHeight(),N.value++,await k(),await k(),await g.loadHeight(),console.log("Form reset complete for new patient"))});const E=async e=>{const t=[],n=[];for(const[i,a]of Object.entries(e))if(i.startsWith("Check ")&&i.endsWith(" not done"))console.log(`Skipping checkbox field: ${i}`);else if("string"==typeof a&&a&&!isNaN(Number(a))||"number"==typeof a)t.push(await d.buildValueNumber(i,parseInt(String(a))));else if(a&&"object"==typeof a&&null!=a&&a.name){let e=i;i.endsWith("_reason")&&(e=i.replace("_reason","")),n.push(await d.buildValueText(e,a.name))}return console.log("Processed vitals:",{newVitals:t,vitalsReasons:n}),{newVitals:t,vitalsReasons:n}};f(async()=>{g.resetHeight(),await k(),await k(),await g.loadHeight(),console.log("Vitals form initialization complete")}),S(()=>{console.log("Vitals form unmounting")});const G=m(()=>[...g.heightWeightFormSection.value,{grid:{s:"3"}},{grid:{s:"9"},componentType:"Dashes"},...y.bloodPressureFormSection.value,{grid:{s:"3"}},{grid:{s:"9"},componentType:"Dashes"},...D.temperaturePulseRateForm.value,...W.respiratoryRateOxygenForm.value]);return t({validateForm:()=>{var e;return null===(e=j.value)||void 0===e?void 0:e.validateForm()},onSubmit:async()=>{if(!j.value)return console.error("Form reference is not available"),!1;const e=j.value.validateForm();if(e)return console.log("Validation errors:",e),s("Please fix validation errors before submitting"),!1;const t=j.value.getFormValues();console.log("Form data after validation:",t);const n=Object.keys(t).some(e=>e.startsWith("Check ")&&e.endsWith(" not done")&&!0===t[e]);if(!n){const e=j.value.validateForm();if(e)return console.log("Validation errors:",e),s("Please fix validation errors before submitting"),!1}const{newVitals:i,vitalsReasons:a}=await E(t);if(!i.length&&!a.length&&!n)return s("No vitals data to save"),!1;const o=await d.addObsToEncounterPatient([...i,...a],c.VITALS);return await u(o),N.value++,await k(),await k(),await g.loadHeight(),p("Vitals saved successful"),!0},resetForm:()=>{N.value++,k(()=>{g.loadHeight()})}}),(e,t)=>(T(),w(_,null,[(T(),F(r,{formData:G.value,ref_key:"formRef",ref:j,key:N.value},null,8,["formData"])),P(R(I),null,{default:C(()=>[P(R(x),{ref:"accordionGroup",class:"previousView"},{default:C(()=>[P(R(O),{value:"first","toggle-icon-slot":"start",style:{"border-radius":"10px","background-color":"#fff"}},{default:C(()=>[P(R(H),{slot:"header",color:"light"},{default:C(()=>[P(R(B),{class:"previousLabel"},{default:C(()=>[...t[0]||(t[0]=[V("Previous measurements",-1)])]),_:1})]),_:1}),M("div",A,[P(l)])]),_:1})]),_:1},512)]),_:1})],64))}}),[["__scopeId","data-v-369a8536"]]))}}});
