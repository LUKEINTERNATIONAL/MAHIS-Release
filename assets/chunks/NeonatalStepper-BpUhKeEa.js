const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./infographics-BeEjz9i9.js","./images-DFClaPJu.js"])))=>i.map(i=>d[i]);
import{cz as m,d as E,a4 as M,a5 as R,aP as x,aS as A,N as P,eO as O,cy as q,dj as H,f9 as V,aU as $,bK as L,H as u,O as h,f as p,J as d,l,k as c,e as S,F as z,P as W,i as G,K as k,bS as K,Q as _,v as Y}from"./vendor-BthE7zCk.js";import{J as U,i as j,m as w,t as J,_ as Q}from"../index-D3-FX8uE.js";import{S as I}from"./SaveProgressModal-DNaPgUV3.js";import{I as v}from"./images-DFClaPJu.js";const C=[{title:"Emergency Triage",subtitle:"Initial assessment",formData:[{componentType:"radioButtonField",name:"crying",header:"Is the baby crying?",type:"standard",allowDeselect:!1,options:[{label:"Yes, baby is crying",value:"yes"},{label:"No, the baby is not crying",value:"no"}],validation:e=>e?null:"Please select one option",showClearButton:!0}]},{title:"Breathing Assessment",subtitle:"Check the Airway, Heart Rate and Time",formData:[{componentType:"listSelectionField",name:"breathing",header:"Is the baby breathing?",subtitle:"Check the Airway, Heart Rate and Tone.",titleStyle:"tonal",type:"single",allowDeselect:!1,showCheckmark:!0,options:[{label:"NOT BREATHING!",value:"not_breathing"},{label:"GASPING or irregular breathing",value:"gasping"},{label:"Normal breathing but HR < 100",value:"hr_low"},{label:"VERY FLOPPY (Normal breathing & HR)",value:"floppy"},{label:"Stable",value:"stable"}],validation:e=>e?null:"Please select one option"}],skipCondition:e=>e.crying==="yes"},{title:"Emergency Management",subtitle:"Immediate intervention required",description:"Critical breathing status detected - immediate action needed",formData:[{componentType:"infographicField",name:"emergency_management_flow",header:"Emergency Management - Helping Babies Breathe",displayMode:"visual",showStepNumber:!1,infographicData:()=>m(()=>import("./infographics-BeEjz9i9.js"),__vite__mapDeps([0,1]),import.meta.url).then(e=>e.getInfographicByKey("EmergencyManagement"))},{componentType:"infographicField",name:"bag_valve_mask_instructions",header:"How to use a bag valve mask",subtitle:"Proper technique for bag valve mask ventilation",displayMode:"cards",showStepNumber:!0,infographicData:()=>m(()=>import("./infographics-BeEjz9i9.js"),__vite__mapDeps([0,1]),import.meta.url).then(e=>e.getInfographicByKey("BagValveMaskUsage")),condition:e=>e.breathing==="not_breathing"||e.breathing==="gasping"}],skipCondition:e=>{const t=e.crying==="yes",n=e.breathing;if(t||!n||n==="")return!0;const r=typeof n=="string"?n.toLowerCase():n;return!["not_breathing","gasping","hr_low","floppy"].includes(r)}},{title:"Oxygen Saturation",subtitle:"Measure oxygen saturation level",formData:[{componentType:"radioButtonField",name:"oxygen_saturation",header:"Oxygen Saturation Level",type:"standard",allowDeselect:!1,options:[{label:"< 90% (Critical)",value:"low"},{label:"90-94% (Moderate)",value:"medium"},{label:"> 94% (Normal)",value:"normal"}],validation:e=>e?null:"Please select oxygen saturation level",showClearButton:!0}],skipCondition:e=>{const t=e.crying==="yes",n=["not_breathing","gasping","hr_low","floppy"].includes(e.breathing);return t||!n}},{title:"Central Cyanosis",subtitle:"Check for central cyanosis",formData:[{componentType:"radioButtonField",name:"central_cyanosis",header:"Is central cyanosis present?",type:"standard",allowDeselect:!1,options:[{label:"Yes",value:"yes"},{label:"No",value:"no"}],validation:e=>e?null:"Please select one option",showClearButton:!0}],skipCondition:e=>{const t=e.crying==="yes",n=["not_breathing","gasping","hr_low","floppy"].includes(e.breathing);return t||!n}},{title:"Convulsions/Twitching",subtitle:"Neurological assessment",formData:[{componentType:"radioButtonField",name:"convulsions",header:"Are convulsions or twitching present?",type:"standard",allowDeselect:!1,options:[{label:"Yes",value:"yes"},{label:"No",value:"no"}],validation:e=>e?null:"Please select one option",showClearButton:!0}],skipCondition:e=>{const t=e.crying==="yes",n=["not_breathing","gasping","hr_low","floppy"].includes(e.breathing);return t||!n}},{title:"Emergency Observations",subtitle:"Can you observe any of the following on the baby?",description:"Select all those that are present",formData:[{componentType:"checkboxField",name:"emergency_observations",header:"Select all those that are present",type:"multiple",options:[{label:"Grunting or Severe chest indrawing's",value:"grunting_indrawing"},{label:"Central cyanosis",value:"central_cyanosis"},{label:"Convulsions or twitching",value:"convulsions"},{label:"NONE",value:"none"}]}],skipCondition:e=>{const t=e.crying==="yes",n=e.breathing==="stable",r=["not_breathing","gasping","hr_low","floppy"].includes(e.breathing),i=!e.breathing;return t||n?!1:!!(r||i)}},{title:"Emergency Management - Grunting/Indrawing",subtitle:"Respiratory distress management",description:"Immediate intervention for grunting or severe chest indrawing",formData:[{componentType:"infographicField",name:"grunting_indrawing_management",header:"Respiratory Distress Management",displayMode:"cards",showStepNumber:!0,infographicData:()=>m(()=>import("./infographics-BeEjz9i9.js"),__vite__mapDeps([0,1]),import.meta.url).then(e=>e.getInfographicByKey("GruntingIndrawingManagement"))}],skipCondition:e=>{const t=e.emergency_observations;return!t||!Array.isArray(t)?!0:!t.includes("grunting_indrawing")}},{title:"Emergency Management - Central Cyanosis",subtitle:"Oxygenation emergency management",description:"Immediate intervention for central cyanosis",formData:[{componentType:"infographicField",name:"central_cyanosis_management",header:"Central Cyanosis Management",displayMode:"cards",showStepNumber:!0,infographicData:()=>m(()=>import("./infographics-BeEjz9i9.js"),__vite__mapDeps([0,1]),import.meta.url).then(e=>e.getInfographicByKey("CentralCyanosisManagement"))}],skipCondition:e=>{const t=e.emergency_observations;return!t||!Array.isArray(t)?!0:!t.includes("central_cyanosis")}},{title:"Emergency Management - Convulsions",subtitle:"Seizure management",description:"Immediate intervention for convulsions or twitching",formData:[{componentType:"infographicField",name:"convulsions_management",header:"Convulsions Management",displayMode:"cards",showStepNumber:!0,infographicData:()=>m(()=>import("./infographics-BeEjz9i9.js"),__vite__mapDeps([0,1]),import.meta.url).then(e=>e.getInfographicByKey("ConvulsionsManagement"))}],skipCondition:e=>{const t=e.emergency_observations;return!t||!Array.isArray(t)?!0:!t.includes("convulsions")}},{title:"Danger Signs",subtitle:"Assess for danger signs",description:"Perform physical assessments as shown",formData:[{componentType:"infographicField",name:"danger_signs_instructions",header:"Physical Assessment Instructions",subtitle:"Perform physical assessments as shown",displayMode:"visual",showStepNumber:!0,infographicData:{key:"danger_signs_assessment",sections:[{title:"Feel the trunk",content:"Check if the trunk feels warm or cold.",description:"A cold trunk indicates hypothermia.",image:v.infographics.feelTheTrunk},{title:"Measure capillary refill time",content:"Press on the chest and count the seconds until the colour returns.",description:"Normal refill time is &lt; 3 seconds."},{title:"Feel the femoral pulse",content:"Locate and assess the femoral pulse strength.",description:"A weak pulse indicates poor circulation.",image:v.infographics.feelFemoralPulse}]}}],skipCondition:e=>["not_breathing","gasping","hr_low","floppy"].includes(e.breathing)},{title:"Select Present Signs",subtitle:"Identify danger signs present",formData:[{componentType:"checkboxField",name:"present_signs",header:"Select all signs that are present",type:"multiple",options:[{label:"Trunk feels cold",value:"trunk_cold"},{label:"Capillary refill >3 seconds",value:"capillary_refill"},{label:"Weak femoral pulse",value:"weak_pulse"}]}],skipCondition:e=>["not_breathing","gasping","hr_low","floppy"].includes(e.breathing)},{title:"Trunk Feels Cold",subtitle:"Temperature management required",description:"Baby's trunk is cold - immediate warming needed",formData:[{componentType:"infographicField",name:"trunk_cold_warning",header:"Hypothermia Alert",subtitle:"Baby's trunk is cold - immediate warming needed",displayMode:"cards",showStepNumber:!0,infographicData:{key:"trunk_cold_management",sections:[{title:"Warning",content:"Baby's trunk feels cold.",description:"This indicates hypothermia risk."},{title:"Immediate action",bullets:["Initiate warming procedures immediately.","See the next step for warming instructions."]}]}}],skipCondition:e=>{var t;return!((t=e.present_signs)!=null&&t.includes("trunk_cold"))}},{title:"Keep Warm",subtitle:"Warming protocol",description:"Instructions for maintaining baby's temperature",formData:[{componentType:"infographicField",name:"warming_instructions",header:"Emergency Management",subtitle:"Hypothermia Management",displayMode:"visual",showStepNumber:!1,infographicData:{key:"warming_protocol",sections:[{title:"Warming Methods",image:v.infographics.babyWarmth}]}}],skipCondition:e=>{var t;return!((t=e.present_signs)!=null&&t.includes("trunk_cold"))}},{title:"Vital Signs",subtitle:"Measure and record vital signs",formData:[{componentType:"inputField",name:"respiratory_rate",header:"Respiratory Rate (breaths/min)",type:"number",placeholder:"Count for 60 seconds",validation:e=>{const t=Number(e);return e?t<=0||t>200?"Enter valid respiratory rate (1-200)":null:"Respiratory rate is required"}},{componentType:"inputField",name:"heart_rate",header:"Heart Rate (beats/min)",type:"number",placeholder:"Enter heart rate",validation:e=>{const t=Number(e);return e?t<=0||t>300?"Enter valid heart rate (1-300)":null:"Heart rate is required"}},{componentType:"inputField",name:"oxygen_saturation_vital",header:"Oxygen Saturation (%)",type:"number",placeholder:"Enter SpO2",validation:e=>{const t=Number(e);return e?t<0||t>100?"Enter valid oxygen saturation (0-100)":null:"Oxygen saturation is required"}},{componentType:"inputField",name:"temperature",header:"Temperature (°C)",type:"number",placeholder:"Enter temperature (e.g., 36.5)",validation:e=>{const t=Number(e);return e?t<30||t>45?"Enter valid temperature (30-45°C)":null:"Temperature is required"}}]},{title:"Respiratory Distress",subtitle:"High respiratory rate detected",description:"Respiratory rate >60 requires additional assessment",formData:[{componentType:"checkboxField",name:"respiratory_distress_signs",header:"Select signs of respiratory distress present",type:"multiple",options:[{label:"Nasal flaring",value:"nasal_flaring"},{label:"Grunting",value:"grunting"},{label:"Chest retractions",value:"chest_retractions"},{label:"Cyanosis",value:"cyanosis"}]}],skipCondition:e=>{const t=Number(e.respiratory_rate);return!t||t<=60}},{title:"Temperature High",subtitle:"Elevated temperature management",description:"Temperature >37.5°C requires intervention",formData:[{componentType:"radioButtonField",name:"fever_management",header:"Fever management initiated?",type:"standard",allowDeselect:!1,options:[{label:"Yes",value:"yes"},{label:"No",value:"no"}],validation:e=>e?null:"Please select one option"}],skipCondition:e=>{const t=Number(e.temperature);return!t||t<=37.5}},{title:"Second Vital Signs",subtitle:"Repeat vital signs measurement",description:"Record second set of vital signs for monitoring",formData:[{componentType:"inputField",name:"respiratory_rate_2",header:"Respiratory Rate (breaths/min)",type:"number",placeholder:"Count for 60 seconds",validation:e=>{const t=Number(e);return e?t<=0||t>200?"Enter valid respiratory rate (1-200)":null:"Respiratory rate is required"}},{componentType:"inputField",name:"heart_rate_2",header:"Heart Rate (beats/min)",type:"number",placeholder:"Enter heart rate",validation:e=>{const t=Number(e);return e?t<=0||t>300?"Enter valid heart rate (1-300)":null:"Heart rate is required"}},{componentType:"inputField",name:"oxygen_saturation_2",header:"Oxygen Saturation (%)",type:"number",placeholder:"Enter SpO2",validation:e=>{const t=Number(e);return e?t<0||t>100?"Enter valid oxygen saturation (0-100)":null:"Oxygen saturation is required"}}],skipCondition:e=>{const t=Number(e.respiratory_rate);return!t||t<=60}},{title:"Blood Sugar",subtitle:"Blood glucose assessment",formData:[{componentType:"inputField",name:"blood_sugar",header:"Blood Glucose (mg/dL)",type:"number",placeholder:"Enter blood glucose level",validation:e=>{const t=Number(e);return e?t<0||t>600?"Enter valid blood glucose (0-600)":null:"Blood glucose is required"}}]},{title:"Referral Instructions",subtitle:"Complete triage assessment",formData:[{componentType:"textAreaField",name:"referral_notes",header:"Referral Notes",placeholder:"Enter any additional notes for referral",minHeight:120},{componentType:"radioButtonField",name:"referral_required",header:"Is referral required?",type:"standard",allowDeselect:!1,options:[{label:"Yes, immediate referral",value:"immediate"},{label:"Yes, routine referral",value:"routine"},{label:"No referral needed",value:"none"}],validation:e=>e?null:"Please select referral status"},{componentType:"inputField",name:"referral_facility",header:"Referral Facility Name",type:"text",placeholder:"Enter the name of the referral facility",validation:e=>e?null:"Facility name is required for referrals"},{componentType:"inputField",name:"transport_method",header:"Transport Method",type:"text",placeholder:"How will the baby be transported?"}],conditionalRules:[{id:"hide_referral_fields_if_no_referral",name:"Hide referral fields when no referral is needed",condition:"referral_required === 'none'",actions:[{type:"hideField",target:["referral_facility","transport_method"]},{type:"clearValue",target:["referral_facility","transport_method"]}]},{id:"require_facility_for_immediate_referral",name:"Make facility required for immediate referrals",condition:"referral_required === 'immediate'",actions:[{type:"setRequired",target:"referral_facility"}]}]}];function F(e,t){const n=e+1;if(n>=C.length)return null;const r=C[n];return r.skipCondition&&r.skipCondition(t)?F(n,t):n}function T(e,t){const n=e-1;if(n<0)return null;const r=C[n];return r.skipCondition&&r.skipCondition(t)?T(n,t):n}const pe={crying:"",breathing:void 0,oxygen_saturation:"",central_cyanosis:"",convulsions:"",present_signs:[],respiratory_rate:"",heart_rate:"",oxygen_saturation_vital:"",temperature:"",respiratory_distress_signs:[],fever_management:"",respiratory_rate_2:"",heart_rate_2:"",oxygen_saturation_2:"",blood_sugar:"",referral_notes:"",referral_required:""},X=Symbol("neonatalTriageForm"),Z=E({name:"NeonatalStepper",components:{IonButton:P,IonCard:A,IonCardContent:x,IonCol:R,IonRow:M,DynamicButton:U},data(){return{currentStepIndex:0,stepRefs:new Map}},props:{wizardData:{default:[]},StepperData:{default:[]},stepperTitle:{type:String,default:""},openStepper:{type:String,default:"1"},backBtn:{type:String,default:"Back to profile"},backUrl:{type:String,default:""},getSaveFunction:{type:Function,required:!0}},setup(){const e=O(X);return{chevronBackOutline:L,checkmark:$,closeOutline:V,arrowBack:H,arrowForward:q,triageForm:e}},mounted(){const e=parseInt(this.openStepper)-1;this.currentStepIndex=e>=0?e:0},methods:{setStepRef(e,t){e&&this.stepRefs.set(t,e)},buildTriageSnapshot(e){const t={...this.triageForm||{}},n=this.stepRefs.get(e);return n!=null&&n.getFormValues&&Object.assign(t,n.getFormValues()),t},getStepConfigIndices(e){const t=this.StepperData[e];return t?Array.isArray(t.configIndices)&&t.configIndices.length?t.configIndices:typeof t.configIndex=="number"?[t.configIndex]:[e]:[e]},findStepperIndexForConfig(e){return this.StepperData.findIndex((t,n)=>(Array.isArray(t.configIndices)&&t.configIndices.length?t.configIndices:[typeof t.configIndex=="number"?t.configIndex:n]).includes(e))},openBackController(){this.backUrl?this.$router.push(this.backUrl):w(I)},async nextStep(e){const t=await this.validateCurrentStep(e);if(t){const a=Object.values(t).join(", ");J("Please fix the following errors: ".concat(a));return}const n=this.getSaveFunction(e);n&&typeof n=="function"&&await n();const r=this.buildTriageSnapshot(e),i=this.getStepConfigIndices(e),o=Math.max(...i),g=F(o,r);if(g!==null){const a=this.findStepperIndexForConfig(g);a!==-1&&a<this.StepperData.length&&(this.currentStepIndex=a,this.updateWizardStatus(a),this.$emit("updateStatus",{value:this.StepperData[a].value}))}},async validateCurrentStep(e){const t=this.stepRefs.get(e);return t?typeof t.validateForm=="function"?t.validateForm():null:(console.warn("No component instance found for step ".concat(e)),null)},previousStep(e){const t=this.buildTriageSnapshot(e),n=this.getStepConfigIndices(e),r=Math.min(...n),i=T(r,t);if(i!==null&&i>=0){const o=this.findStepperIndexForConfig(i);o!==-1&&o>=0&&(this.currentStepIndex=o,this.updateWizardStatus(o),this.$emit("updateStatus",{value:this.StepperData[o].value}))}},async handleCancel(){await j("Are you sure you want to cancel? All unsaved progress will be lost.",{header:"Cancel ".concat(this.stepperTitle),confirmBtnLabel:"Yes, Cancel",cancelBtnLabel:"No, Continue"})&&(this.backUrl?this.$router.push(this.backUrl):w(I))},updateWizardStatus(e){this.wizardData.forEach((t,n)=>{n===e?(t.class="open_step common_step",t.checked=!1):n<e?(t.class="common_step color_white",t.checked=!0):(t.class="common_step",t.checked=!1)})}}}),ee={class:"back_profile"},te={class:"section_header"},ne={class:"section_content"},re={class:"button-row"},ae={class:"left-button-group"},ie={class:"right-button-group"};function oe(e,t,n,r,i,o){const g=u("DynamicButton"),a=u("ion-icon"),f=u("ion-button"),B=u("ion-card"),D=u("ion-col"),N=u("ion-row");return p(),h(N,{class:"ion-justify-content-center"},{default:d(()=>[l(D,{class:"stepper-col","size-sm":"12","size-xl":"8","size-md":"10","size-lg":"8"},{default:d(()=>[c("div",ee,[l(g,{name:e.backBtn,iconSlot:"start",fill:"clear",icon:e.chevronBackOutline,onClick:t[0]||(t[0]=y=>e.openBackController())},null,8,["name","icon"])]),l(B,{class:"stepper_content_wrapper"},{default:d(()=>[(p(!0),S(z,null,W(e.StepperData,(y,s)=>G((p(),S("div",{key:s,class:"step_section"},[c("div",te,[c("h2",null,k(y.title),1)]),c("div",ne,[(p(),h(K(y.component),{ref_for:!0,ref:b=>e.setStepRef(b,s)},null,512))]),c("div",re,[c("div",ae,[s===0?(p(),h(f,{key:0,class:"cancel-button",onClick:e.handleCancel},{default:d(()=>[l(a,{icon:e.closeOutline,slot:"start"},null,8,["icon"]),t[1]||(t[1]=_(" Cancel ",-1))]),_:1},8,["onClick"])):(p(),h(f,{key:1,class:"previous-button",onClick:b=>e.previousStep(s)},{default:d(()=>[l(a,{icon:e.arrowBack,slot:"start"},null,8,["icon"]),t[2]||(t[2]=_(" Back ",-1))]),_:1},8,["onClick"]))]),c("div",ie,[l(f,{class:"next-button",onClick:b=>e.nextStep(s)},{default:d(()=>[_(k(s<e.StepperData.length-1?"Next":"Finish")+" ",1),l(a,{icon:s<e.StepperData.length-1?e.arrowForward:e.checkmark,slot:"end"},null,8,["icon"])]),_:2},1032,["onClick"])])])])),[[Y,e.currentStepIndex===s]])),128))]),_:1})]),_:1})]),_:1})}const de=Q(Z,[["render",oe],["__scopeId","data-v-9fd4860b"]]);export{de as N,C as a,pe as d,X as n};
