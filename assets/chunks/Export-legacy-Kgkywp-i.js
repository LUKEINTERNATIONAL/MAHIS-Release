System.register(["./vendor-legacy-Bsps4SCm.js","./lodash-legacy-pOOc9Efu.js","../index-legacy-dSdC9OL_.js"],function(e,t){"use strict";var o,l,r,a,i,n,c,s,u,p,f,E,v;return{setters:[e=>{o=e.r,l=e.eh,r=e.w,a=e.cu,i=e.cv,n=e.ei,c=e.ej,s=e.ek,u=e.el},e=>{p=e.l},e=>{f=e.t,E=e.s,v=e.G}],execute:function(){e({a:function(e,o,l="document",r=!1,n={}){o=g(o);const c=new a({...n}),s=c.splitTextToSize(l,180),u=s.length<=1?20:10*s.length;c.text(s,14,10);const p={startY:u,head:[e[e.length-1]],body:o};r&&(p.tableWidth="wrap",p.horizontalPageBreak=!0,p.horizontalPageBreakRepeat=0),i(c,p);const{activePlatformProfile:f}=m(),v=`${l}.pdf`;f.value.fileExport===t.WEB?c.save(v):f.value.fileExport===t.FILE_SYSTEM?S(v,c.output(),"blob"):E("Platform not supported")},e:S,t:function(e,o,l="document"){o=g(o);const r=e.concat(o).reduce((e,t)=>e+t.map(e=>`"${e}"`).join(",")+"\n",""),{activePlatformProfile:a}=m(),i=`${l}.csv`;if(a.value.fileExport===t.WEB){const e=new Blob([r],{type:"text/csv;charset=utf-8;"}),t=document.createElement("a");t.setAttribute("id","csv"),t.href=window.URL.createObjectURL(e),t.setAttribute("download",`${l}.csv`),document.body.appendChild(t),t.click(),t.remove()}else a.value.fileExport===t.FILE_SYSTEM?S(i,r,"text"):f("Platform not supported")},u:m});var t=e("F",(e=>(e.WEB="WEB",e.FILE_SYSTEM="FILE_SYSTEM",e))(t||{}));const d={Desktop:{profileName:"Desktop",fileExport:"WEB",scanner:"BARCODE_SCANNER",printer:"WEB",keyboard:"NATIVE_AND_HIS_KEYBOARD"},Mobile:{profileName:"Mobile",fileExport:"FILE_SYSTEM",scanner:"CAMERA_SCANNER",printer:"BLUETOOTH",keyboard:"HIS_KEYBOARD_ONLY"}};function m(){const e=o(d.Desktop),t=o({}),a=localStorage.getItem("active_profile"),i=localStorage.getItem("platformProfiles");return t.value="string"==typeof i?JSON.parse(i):d,"string"==typeof a&&`${a}`.match(/\{.*\}/)?e.value=JSON.parse(a):p.isEmpty(t.value)||(l("mobile")&&"Mobile"in t.value?e.value=t.value.Mobile:l("desktop")&&"Desktop"in t.value&&(e.value=t.value.Desktop)),r(()=>e.value,e=>{localStorage.setItem("active_profile",JSON.stringify(e))}),{activePlatformProfile:e,platformProfiles:t}}function S(e,t,o){let l=null;const r=`MaHIS/${e.replaceAll("/","_")}`;v(`Exporting file to "Documents/${r}"...`),l="blob"===o?n({path:r,blob:t,directory:c.Documents,recursive:!0}):s.writeFile({path:r,data:t,directory:c.Documents,encoding:u.UTF8,recursive:!0}),null!=l&&l.then(()=>v(`File exported to "Documents/${r}"!`,3e3)).catch(e=>E(e))}function g(e){return e.map(e=>e.map(e=>"string"==typeof e?e.replace(/&lt;/g,"<"):e))}}}});
