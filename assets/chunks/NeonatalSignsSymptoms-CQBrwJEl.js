import{d as y,r as _,eN as k,w as v,e as w,f as h,l as f,u as S,a3 as C,a6 as T,an as A,aV as P,bz as $,eO as B,H as g,O as z,J as D}from"./vendor-HuFSitED.js";import{l as H,aC as I,_ as b,T as O,u as E,t as R,H as U,G as j}from"../index-BkhZ5sev.js";import{N as x}from"./neonatal_service-BwKj8yDG.js";import{D as J}from"./DemographicBar-CKZrfQp2.js";import{N as Y}from"./NeonatalStepper-iABdEw4k.js";import"./lodash-NJiRuGo9.js";import"./apexcharts-H8VlRymN.js";import"./SaveProgressModal-Bdd8rYit.js";import"./images-DopJFFEq.js";const d=[{title:"Admission",subtitle:"Initial admission assessment",formData:[{componentType:"yesNoQuestion",name:"is_readmission",header:"Is this a re-admission?",validation:a=>a?null:"Please select Yes or No"}]},{title:"Signs/Symptoms",formData:[{componentType:"Alert",name:"presenting_complaints_banner",type:"warning",backgroundColor:"#FEDF89",textColor:"#B54708",message:"Reason for Admission / Presenting complaints"},{componentType:"multiSelectInputField",name:"presenting_complaints",header:"Your Selection",placeholder:"Search",icon:H.search,isMultiple:!0,closeOnSelect:!1,searchable:!0,trackBy:"value",options:[{label:"Lethargy",value:"lethargy"},{label:"Difficulty breathing",value:"difficulty_breathing"},{label:"Fever",value:"fever"},{label:"Irritability",value:"irritability"},{label:"Not tolerating feeds",value:"not_tolerating_feeds"},{label:"Vomiting",value:"vomiting"},{label:"Eye Discharge",value:"eye_discharge"},{label:"Diarrhoea",value:"diarrhoea"},{label:"Jaundice",value:"jaundice"},{label:"Convulsions",value:"convulsions"},{label:"Hypothermia",value:"hypothermia"},{label:"Poor feeding",value:"poor_feeding"},{label:"Cyanosis",value:"cyanosis"},{label:"Bleeding",value:"bleeding"},{label:"Abdominal distension",value:"abdominal_distension"},{label:"Umbilical discharge",value:"umbilical_discharge"},{label:"Skin rash",value:"skin_rash"},{label:"Pallor",value:"pallor"},{label:"Apnoea",value:"apnoea"}],validation:a=>!a||!Array.isArray(a)||a.length===0?"Please select at least one presenting complaint":null}]}],G={is_readmission:"",presenting_complaints:[],detailed_assessment_notes:"",symptom_onset_time:"",symptom_severity:""},F=Symbol("neonatalSignsSymptomsForm"),K={class:"signs-symptoms-section-wrapper"},L=y({__name:"AdmissionSection",setup(a,{expose:p}){const t=_(null),n=d[0],m=n.formData,c=n.conditionalRules||[],l=k(F),i=e=>{l&&(l.is_readmission=e.is_readmission||"")};return v(()=>{var e;return(e=t.value)==null?void 0:e.formValues},e=>{e&&i(e)},{deep:!0}),v(()=>t.value,e=>{e!=null&&e.getFormValues&&i(e.getFormValues())},{immediate:!0}),p({getFormRef:()=>t.value,validateForm:()=>{var e,s;return((s=(e=t.value)==null?void 0:e.validateForm)==null?void 0:s.call(e))||null},getFormValues:()=>{var e,s;return((s=(e=t.value)==null?void 0:e.getFormValues)==null?void 0:s.call(e))||{}}}),(e,s)=>(h(),w("div",K,[f(I,{formData:S(m),conditionalRules:S(c),ref_key:"formRef",ref:t},null,8,["formData","conditionalRules"])]))}}),N=b(L,[["__scopeId","data-v-312c3ac7"]]),M={class:"signs-symptoms-section-wrapper"},Q=y({__name:"PresentingComplaintsSection",setup(a,{expose:p}){const t=_(null),n=d[1],m=n.formData,c=n.conditionalRules||[],l=k(F),i=e=>{l&&(l.presenting_complaints=e.presenting_complaints||[])};return v(()=>{var e;return(e=t.value)==null?void 0:e.formValues},e=>{e&&i(e)},{deep:!0}),v(()=>t.value,e=>{e!=null&&e.getFormValues&&i(e.getFormValues())},{immediate:!0}),p({getFormRef:()=>t.value,validateForm:()=>{var e,s;return((s=(e=t.value)==null?void 0:e.validateForm)==null?void 0:s.call(e))||null},getFormValues:()=>{var e,s;return((s=(e=t.value)==null?void 0:e.getFormValues)==null?void 0:s.call(e))||{}}}),(e,s)=>(h(),w("div",M,[f(I,{formData:S(m),conditionalRules:S(c),ref_key:"formRef",ref:t},null,8,["formData","conditionalRules"])]))}}),V=b(Q,[["__scopeId","data-v-2ad14f66"]]),W=y({name:"NeonatalSignsSymptoms",components:{IonPage:T,IonContent:C,Toolbar:O,DemographicBar:J,NeonatalStepper:Y,AdmissionSection:N,PresentingComplaintsSection:V},setup(){const a=A(),p=E(),{patient:t}=P(p),n=$({...G});B(F,n);const m=_(d.map((r,o)=>({title:r.title,number:o+1,checked:!1,class:o===0?"open_step common_step":"common_step",last_step:o===d.length-1?"last_step":""}))),c=[{title:d[0].title,value:"1",component:N,configIndex:0},{title:d[1].title,value:"2",component:V,configIndex:1}],l="Signs & Symptoms Assessment",i=_("1");return{wizardData:m,stepperData:c,stepperTitle:l,currentOpenStepper:i,updateStatus:r=>{r&&r.value&&m.value.forEach((o,u)=>{r.value===(u+1).toString()?(o.class="open_step common_step",o.checked=!1):u<parseInt(r.value)-1?(o.class="common_step color_white",o.checked=!0):(o.class="common_step",o.checked=!1)})},getSaveFunction:r=>r===c.length-1?async()=>{var o;if(!((o=t.value)!=null&&o.patientID)){R("No patient selected");return}try{const u=U.sessionDate();await x.saveSignsSymptomsAssessment(t.value.patientID,n,u),j("Signs & symptoms assessment saved successfully"),a.push({path:"/neonatal/review-of-systems"})}catch(u){console.error("Failed to save signs/symptoms assessment",u),R("Failed to save signs/symptoms assessment")}}:null}}});function q(a,p,t,n,m,c){const l=g("Toolbar"),i=g("NeonatalStepper"),e=g("ion-content"),s=g("ion-page");return h(),z(s,{class:"neonatal-signs-symptoms-page"},{default:D(()=>[f(l),f(e,{fullscreen:!0},{default:D(()=>[f(i,{wizardData:a.wizardData,StepperData:a.stepperData,stepperTitle:a.stepperTitle,openStepper:a.currentOpenStepper,backUrl:"/NeonatalHome",getSaveFunction:a.getSaveFunction,flowType:"signsSymptoms",onUpdateStatus:a.updateStatus},null,8,["wizardData","StepperData","stepperTitle","openStepper","getSaveFunction","onUpdateStatus"])]),_:1})]),_:1})}const ie=b(W,[["render",q],["__scopeId","data-v-6b60ede0"]]);export{ie as default};
