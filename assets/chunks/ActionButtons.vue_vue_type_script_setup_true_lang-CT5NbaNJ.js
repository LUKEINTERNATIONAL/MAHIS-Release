import{a1 as H,a as N,ai as W,aj as T,S as B,t as Q,ak as X,al as Z,am as q,_ as f,w as e,z as F,U as ee,l as se,m as oe}from"../index-BOg8gPmV.js";import{D as ae,d as S,r as C,c as I,a as b,O as G,f as d,J as r,l as a,u as o,I as te,E as ne,Q as v,K as M,L as h,a2 as $,R as V,a3 as re,e as g,F as z,P as j,a4 as ce,a5 as w,bw as ie,W as le,M as ue,N as D,a6 as _e,w as k,H as L,b3 as Re,k as P,V as de,aV as x,m as U,dx as pe,dw as Y,d7 as Ae}from"./vendor-BolvhNQv.js";const me=ae("actionButtonStore",{state:()=>({show_action_button:!0}),actions:{setShowActionButton(u){this.show_action_button=u},getShowActionButton(){return this.show_action_button},resetShowActionButton(){this.show_action_button=!0}}}),ge=["onClick"],Oe={key:1,class:"no-data-container"},Pe=S({__name:"ActivitySelectionModal",setup(u){const A=H(),c=C("activities"),s=C([]),p=I(()=>s.value.filter(n=>n.isChecked)),_=I(()=>s.value.length>0&&s.value.every(n=>n.isChecked)),l=I(()=>_.value?"Deselect All":"Select All");async function i(n){switch(n.toLowerCase()){case"ncd program":s.value=T(q),c.value="NCD_activities";break;case"opd program":s.value=T(Z),c.value="OPD_activities";break;case"hiv program":s.value=T(X,"name","workflowID"),c.value="activities";break;default:s.value=[];break}}async function m(){const n=await B.getJson("user_properties",{user_id:A.getUserId(),property:c.value});n&&(s.value=s.value.map(t=>(n.property_value.search(t.value)>=0&&(t.isChecked=!0),t)))}async function R(){var n;try{return await B.postJson("user_properties",{property:c.value,property_value:p.value.map(t=>t.value).join(",")}),V.dismiss(p.value)}catch(t){console.error(t),Q((n=t.message)!=null?n:"Failed to save selected activities")}}function y(){const n=!_.value;s.value=s.value.map(t=>(t.isChecked=n,t))}return b(()=>{var n,t;console.log("USER ID",A.getUserId()),console.log("USER PROGRAM",(n=N().activeProgram)==null?void 0:n.name),i((t=N().activeProgram)==null?void 0:t.name),m()}),(n,t)=>(d(),G(o(_e),null,{default:r(()=>[a(o(te),{style:{display:"flex","justify-content":"space-between"},color:"success"},{default:r(()=>[a(o(ne),{class:"modalTitle"},{default:r(()=>[v("Select Program Activites (selected: "+M(p.value.length)+")",1)]),_:1}),a(o(h),{onClick:o(V).dismiss,style:{"padding-top":"10px","padding-right":"10px"},icon:o($)},null,8,["onClick","icon"])]),_:1}),a(o(re),{fullscreen:!0},{default:r(()=>[s.value.length?(d(),G(W,{key:0,items:s.value,numberOfColumns:2},{default:r(({entries:K})=>[(d(!0),g(z,null,j(K,(O,J)=>(d(),g("div",{class:"his-card clickable",key:J,onClick:E=>O.isChecked=!O.isChecked},[a(o(ce),null,{default:r(()=>[a(o(w),{size:"1"},{default:r(()=>[a(o(ie),{modelValue:O.isChecked,"onUpdate:modelValue":E=>O.isChecked=E,onClick:E=>O.isChecked=!O.isChecked},null,8,["modelValue","onUpdate:modelValue","onClick"])]),_:2},1024),a(o(w),{class:"ion-text-center his-md-text"},{default:r(()=>[v(M(O.label),1)]),_:2},1024)]),_:2},1024)],8,ge))),128))]),_:1},8,["items"])):(d(),g("div",Oe,[a(o(le),null,{default:r(()=>[...t[0]||(t[0]=[v("No activities available for this program",-1)])]),_:1})]))]),_:1}),a(o(ue),{class:"ion-padding ion-text-end"},{default:r(()=>[a(o(D),{fill:"outline",onClick:y},{default:r(()=>[v(M(l.value),1)]),_:1}),a(o(D),{class:"ion-margin-start",onClick:R},{default:r(()=>[...t[1]||(t[1]=[v("Save",-1)])]),_:1})]),_:1})]),_:1}))}}),ve=f(Pe,[["__scopeId","data-v-b78c7022"]]),Ie={class:"search-wrapper"},Ce={__name:"SearchField",props:{modelValue:String,placeholder:String},emits:["update:modelValue"],setup(u,{emit:A}){const c=l=>{_.value=l.target.value},s=u,p=A,_=C(s.modelValue||"");return k(_,l=>{p("update:modelValue",l)}),k(()=>s.modelValue,l=>{_.value=l}),(l,i)=>{const m=L("ion-icon"),R=L("ion-input");return d(),g("div",Ie,[a(m,{icon:o(Re),class:"search-icon","aria-hidden":"true"},null,8,["icon"]),a(R,{value:_.value,onIonInput:c,class:"search-input",type:"text",placeholder:u.placeholder},null,8,["value","placeholder"])])}}},Me=f(Ce,[["__scopeId","data-v-b69152ed"]]),Ge={class:"program-buttons-grid"},he=["onClick"],fe=["src"],Se={class:"program-name"},Ee=S({__name:"ProgramGrid",props:{programs:{},onSelect:{type:Function}},setup(u){return(A,c)=>(d(),g("div",Ge,[(d(!0),g(z,null,j(u.programs,(s,p)=>(d(),g("div",{key:p,class:"program-tile",onClick:()=>u.onSelect(s)},[P("div",{class:"program-icon-container",style:de({backgroundColor:s.color})},[P("img",{src:s.icon,alt:"",class:"program-icon"},null,8,fe)],4),P("div",Se,M(s.name.replace(/program/i,"").trim()),1)],8,he))),128))]))}}),Te=f(Ee,[["__scopeId","data-v-e565f108"]]),Ne={[e.HIV_PROGRAM]:"./assets/icon/program_icons/ribbon.png",[e.TB_PROGRAM]:"./assets/icon/program_icons/tb.png",[e.EARLY_INFANT_DIAGNOSIS_PROGRAM]:"./assets/icon/program_icons/baby-0203_alt.png",[e.MDR_TB_PROGRAM]:"./assets/icon/program_icons/tb.png",[e.KAPOSIS_SARCOMA_PROGRAM]:"./assets/icon/program_icons/lymph-nodes.png",[e.CHRONIC_CARE_PROGRAM]:"./assets/icon/program_icons/intensive-care_unit.png",[e.MATERNITY_PROGRAM]:"./assets/icon/program_icons/pregnant.png",[e.ANC_PROGRAM]:"./assets/icon/program_icons/ancv.png",[e.DIABETES_PROGRAM]:"./assets/icon/program_icons/diabetes.png",[e.OPD_PROGRAM]:"./assets/icon/program_icons/outpatient.png",[e.IPD_PROGRAM]:"./assets/icon/program_icons/observation.png",[e.UNDER_5_PROGRAM]:"./assets/icon/program_icons/boy-0105y.png",[e.CIVIL_REGISTRATION_PROGRAM]:"./assets/icon/program_icons/register-book.png",[e.HTC_PROGRAM]:"./assets/icon/program_icons/blood-pressure.png",[e.ANC_CONNECT_PROGRAM]:"./assets/icon/program_icons/ancv.png",[e.HYPERTENSION_PROGRAM]:"./assets/icon/program_icons/blood-pressure.png",[e.IPT_PROGRAM]:"./assets/icon/program_icons/observation.png",[e.LABORATORY_PROGRAM]:"./assets/icon/program_icons/biochemistry-laboratory.png",[e.CXCA_PROGRAM]:"./assets/icon/program_icons/cervical-cancer.png",[e.RADIOLOGY_PROGRAM]:"./assets/icon/program_icons/radiology.png",[e.PATIENT_REGISTRATION_PROGRAM]:"./assets/icon/program_icons/human-resoruce.png",[e.AETC_PROGRAM]:"./assets/icon/program_icons/accident-and_emergency.png",[e.SPINE_PROGRAM]:"./assets/icon/program_icons/intensive-care_unit.png",[e.NCD_PROGRAM]:"./assets/icon/program_icons/autoimmune-disease.png",[e.IMMUNIZATION_PROGRAM]:"./assets/icon/program_icons/syringe-vaccine.png",[e.LABOUR_AND_DELIVERY_PROGRAM]:"./assets/icon/program_icons/fetus.png",[e.NEONATAL_PROGRAM]:"./assets/icon/program_icons/child-care.png",[e.HTS_PROGRAM]:"./assets/icon/program_icons/blood-analysis.png",[e.MEMIS_PROGRAM]:"./assets/icon/program_icons/memis.png"},Fe=u=>{switch(u){case e.HIV_PROGRAM:return"#F4A6A6";case e.TB_PROGRAM:return"#E6B89C";case e.EARLY_INFANT_DIAGNOSIS_PROGRAM:return"#FFF2A6";case e.MDR_TB_PROGRAM:return"#D2A679";case e.KAPOSIS_SARCOMA_PROGRAM:return"#D8B4E2";case e.CHRONIC_CARE_PROGRAM:return"#C7EFCF";case e.MATERNITY_PROGRAM:return"#FFCCE5";case e.ANC_PROGRAM:return"#FFD6DD";case e.DIABETES_PROGRAM:return"#D6F5D6";case e.OPD_PROGRAM:return"#B3E5FC";case e.IPD_PROGRAM:return"#FFF9C4";case e.UNDER_5_PROGRAM:return"#FFB3B3";case e.CIVIL_REGISTRATION_PROGRAM:return"#E0E0E0";case e.HTC_PROGRAM:return"#B2DFDB";case e.ANC_CONNECT_PROGRAM:return"#FFD6DD";case e.HYPERTENSION_PROGRAM:return"#B2DFDB";case e.IPT_PROGRAM:return"#FFF9C4";case e.LABORATORY_PROGRAM:return"#E6B89C";case e.CXCA_PROGRAM:return"#FFF2A6";case e.RADIOLOGY_PROGRAM:return"#CCCCCC";case e.PATIENT_REGISTRATION_PROGRAM:return"#FFF9C4";case e.AETC_PROGRAM:return"#FFB199";case e.SPINE_PROGRAM:return"#C7EFCF";case e.NCD_PROGRAM:return"#D6F5D6";case e.IMMUNIZATION_PROGRAM:return"#FFF2A6";case e.LABOUR_AND_DELIVERY_PROGRAM:return"#E6D6F3";case e.NEONATAL_PROGRAM:return"#FFECEC";default:return"#F5F5DC"}},De=[e.VHW_PROGRAM,e.TRIAGE_PROGRAM,e.VMMC_PROGRAM,e.PNC_PROGRAM,e.KAPOSIS_SARCOMA_PROGRAM,e.CIVIL_REGISTRATION_PROGRAM,e.DIABETES_PROGRAM,e.LABOUR_AND_DELIVERY_PROGRAM],ke={id:"container"},be={class:"centered-content"},ye=S({__name:"ModulePicker",setup(u){const A=N(),c=C(""),s=I(()=>A.authorizedPrograms.filter(i=>!De.includes(i.program_id)).map(i=>({...i,icon:Ne[i.program_id]||null,color:Fe(i.program_id)}))),p=I(()=>s.value.filter(i=>i.name.toLowerCase().includes(c.value.toLowerCase())));function _(i){A.setActiveProgram(i),F.hide()}function l(){F.hide()}return b(()=>{s.value.length===1&&_(s.value[0])}),(i,m)=>(d(),g("div",ke,[m[1]||(m[1]=P("h1",null,[P("strong",null,"Services")],-1)),P("div",be,[a(o(D),{class:"close-button",fill:"clear",onClick:l},{default:r(()=>[a(o(h),{icon:o($),style:{"font-size":"4rem",color:"#dc2626"}},null,8,["icon"])]),_:1}),a(Me,{modelValue:c.value,"onUpdate:modelValue":m[0]||(m[0]=R=>c.value=R),placeholder:"Search..."},null,8,["modelValue"]),a(Te,{programs:p.value,onSelect:_},null,8,["programs"])])]))}}),Be=f(ye,[["__scopeId","data-v-d96fe9e3"]]),Le=S({__name:"ActionButtons",setup(u){const A=H(),{user_ID:c}=x(A),s=C(!1),p=me(),{show_action_button:_}=x(p);b(async()=>{try{await l()}catch(R){}}),k(()=>c.value,async()=>{await l()},{deep:!0});const l=async()=>{try{const R=await ee.getUserAssignAndUnassignProgramActivities(c.value);s.value=R!==null?R:!1}catch(R){console.error("Error fetching assign and unassign program activities:",R)}};function i(){return oe(ve,{class:"activity-modal"})}async function m(){return F.show(Be,{},"module-picker-modal")}return(R,y)=>o(_)?(d(),G(o(pe),{key:0,slot:"fixed",horizontal:"end",vertical:"bottom",class:"ion-margin-bottom",edge:""},{default:r(()=>[s.value?(d(),G(o(Y),{key:0,onClick:i},{default:r(()=>[a(o(h),{icon:o(se).exam_multiple_choice},null,8,["icon"])]),_:1})):U("",!0),a(o(Y),{color:"primary",class:"ion-margin-vertical",onClick:m},{default:r(()=>[a(o(h),{icon:o(Ae)},null,8,["icon"])]),_:1})]),_:1})):U("",!0)}});export{Be as M,Le as _,me as u};
