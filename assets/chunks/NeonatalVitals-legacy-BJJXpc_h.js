System.register(["./vendor-legacy-DjGXx6Xl.js","../index-legacy-y7loJJ8f.js","./NeonatalStepper-legacy-ByACA5K9.js","./useNeonatalVitalsStore-legacy-eC6jQa67.js","./neonatal_service-legacy-D8NAvwhT.js","./lodash-legacy-pOOc9Efu.js","./apexcharts-legacy-CnQpVQ3m.js","./SaveProgressModal-legacy-BBrMHI2r.js","./images-legacy-gTS9vAYU.js","./enrollment-legacy-BWFKsMdA.js"],function(e,a){"use strict";var t,l,n,o,r,i,u,s,c,m,d,v,p,g,f,y,_,S,V,N,h,b,T,F,A,I,w,E,x,D,O,R,M,L;return{setters:[e=>{t=e.d,l=e.r,n=e.eT,o=e.c,r=e.b,i=e.w,u=e.e,s=e.f,c=e.k,m=e.l,d=e.K,v=e.u,p=e.a3,g=e.a6,f=e.ao,y=e.aV,_=e.eU,S=e.H,V=e.O,N=e.J},e=>{h=e.aD,b=e._,T=e.T,F=e.u,A=e.b3,I=e.t,w=e.ag,E=e.ci,x=e.G},e=>{D=e.a,O=e.b,R=e.N},e=>{M=e.u},e=>{L=e.N},null,null,null,null,null],execute:function(){var a=document.createElement("style");a.textContent=".neonatal-vitals-section[data-v-19d42943]{display:flex;flex-direction:column;gap:1rem}.respiratory-timer-card[data-v-19d42943]{width:100%;border-radius:8px;overflow:hidden;cursor:pointer;box-shadow:0 1px 4px rgba(0,0,0,.08)}.respiratory-timer-header[data-v-19d42943]{padding:.75rem 1rem;font-weight:600;font-size:1.1rem}.respiratory-timer-body[data-v-19d42943]{background-color:#e7f5e7;padding:2.5rem 1rem 2.75rem;display:flex;flex-direction:column;align-items:center;justify-content:center}.respiratory-timer-time[data-v-19d42943]{font-size:4rem;font-weight:700;letter-spacing:.1em;color:#17621f}.respiratory-timer-instruction[data-v-19d42943]{margin-top:1rem;font-size:1rem;text-align:center;letter-spacing:.1em;text-transform:uppercase}.neonatal-vitals-section[data-v-7a8515ce],.neonatal-vitals-section[data-v-bfd75302],.neonatal-vitals-section[data-v-34b36eb5],.neonatal-vitals-section[data-v-a5dcc574],.neonatal-vitals-section[data-v-fbe7c51f]{display:flex;flex-direction:column;gap:1rem}.neonatal-vitals-page[data-v-5f1f2ad2]{--background: #f5f5f5}ion-content[data-v-5f1f2ad2]{--background: #f5f5f5}\n/*$vite$:1*/",document.head.appendChild(a);const k={class:"neonatal-vitals-section"},C={class:"respiratory-timer-body"},H={class:"respiratory-timer-time"},P={class:"respiratory-timer-instruction"},j=b(t({__name:"VitalSignsSection",setup(e,{expose:a}){const t=l(null),p=D.find(e=>"Vital Signs"===e.title);if(!p)throw new Error("[VitalSignsSection] Missing configuration for Vital Signs section");const g=n(O),f=l(60),y=l(!1),_=l(!1);let S=null;const V=o(()=>`${Math.floor(f.value/60).toString().padStart(2,"0")}:${(f.value%60).toString().padStart(2,"0")}`),N=o(()=>y.value?"TAP TO PAUSE COUNTDOWN":60===f.value?"TAP TO START COUNTDOWN":0===f.value?"TAP TO RESTART COUNTDOWN":"TAP TO RESUME COUNTDOWN"),b=()=>{null===S&&(y.value=!0,_.value=!1,S=window.setInterval(()=>{f.value>0?f.value-=1:(y.value=!1,_.value=!0,null!==S&&(clearInterval(S),S=null))},1e3))},T=()=>{null!==S&&(clearInterval(S),S=null),y.value=!1},F=()=>{y.value?T():0===f.value?(T(),f.value=60,_.value=!1,b()):b()};r(()=>{null!==S&&clearInterval(S)});const A=o(()=>p.formData.map(e=>{var a,t;if(!e.name||!g)return{...e};const l=g[e.name],n="switchField"===e.componentType?null!=l?l:null:null!==(a=null!==(t=null!=l?l:e.initialValue)&&void 0!==t?t:e.value)&&void 0!==a?a:"";return{...e,initialValue:n}})),I=p.conditionalRules||[],w=e=>{var a,t;g&&(g.respiratory_rate=e.respiratory_rate||"",g.heart_rate=e.heart_rate||"",g.can_measure_oxygen_saturation=null!==(a=e.can_measure_oxygen_saturation)&&void 0!==a?a:null,g.oxygen_saturation=e.oxygen_saturation||"",g.can_measure_temperature=null!==(t=e.can_measure_temperature)&&void 0!==t?t:null,g.temperature=e.temperature||"")};return i(()=>{var e;return null===(e=t.value)||void 0===e?void 0:e.formValues},e=>{e&&w(e)},{deep:!0}),i(()=>t.value,e=>{null!=e&&e.getFormValues&&w(e.getFormValues())},{immediate:!0}),a({getFormRef:()=>t.value,validateForm:()=>{var e,a;return(null===(e=t.value)||void 0===e||null===(a=e.validateForm)||void 0===a?void 0:a.call(e))||null},getFormValues:()=>{var e,a;return(null===(e=t.value)||void 0===e||null===(a=e.getFormValues)||void 0===a?void 0:a.call(e))||{}}}),(e,a)=>(s(),u("div",k,[c("div",{class:"respiratory-timer-card",onClick:F},[c("div",C,[c("div",H,d(V.value),1),c("div",P,d(N.value),1)])]),m(h,{formData:A.value,conditionalRules:v(I),ref_key:"formRef",ref:t},null,8,["formData","conditionalRules"])]))}}),[["__scopeId","data-v-19d42943"]]),U={class:"neonatal-vitals-section"},W=b(t({__name:"WeightMeasurementsSection",setup(e,{expose:a}){const t=l(null),r=D.find(e=>"Weight Measurements"===e.title);if(!r)throw new Error("[WeightMeasurementsSection] Missing configuration for Weight Measurements section");const c=n(O),d=o(()=>r.formData.map(e=>{var a,t;if(!e.name||!c)return{...e};const l=c[e.name];return{...e,initialValue:null!==(a=null!==(t=null!=l?l:e.initialValue)&&void 0!==t?t:e.value)&&void 0!==a?a:""}})),p=r.conditionalRules||[],g=e=>{c&&(c.current_weight=e.current_weight||"",c.head_circumference=e.head_circumference||"")};return i(()=>{var e;return null===(e=t.value)||void 0===e?void 0:e.formValues},e=>{e&&g(e)},{deep:!0}),i(()=>t.value,e=>{null!=e&&e.getFormValues&&g(e.getFormValues())},{immediate:!0}),a({getFormRef:()=>t.value,validateForm:()=>{var e,a;return(null===(e=t.value)||void 0===e||null===(a=e.validateForm)||void 0===a?void 0:a.call(e))||null},getFormValues:()=>{var e,a;return(null===(e=t.value)||void 0===e||null===(a=e.getFormValues)||void 0===a?void 0:a.call(e))||{}}}),(e,a)=>(s(),u("div",U,[m(h,{formData:d.value,conditionalRules:v(p),ref_key:"formRef",ref:t},null,8,["formData","conditionalRules"])]))}}),[["__scopeId","data-v-7a8515ce"]]),B={class:"neonatal-vitals-section"},Y=b(t({__name:"BloodSugarSection",setup(e,{expose:a}){const t=l(null),r=D.find(e=>"Blood Sugar"===e.title);if(!r)throw new Error("[BloodSugarSection] Missing configuration for Blood Sugar section");const c=n(O),d=o(()=>r.formData.map(e=>{var a,t;if(!e.name||!c)return{...e};const l=c[e.name];var n,o;if("blood_sugar"===e.name)return{...e,initialValue:null!==(n=null!==(o=null!=l?l:e.initialValue)&&void 0!==o?o:e.value)&&void 0!==n?n:"",initialUnit:c.blood_sugar_unit||e.initialUnit||"mg/dL"};const r="switchField"===e.componentType?null!=l?l:null:null!==(a=null!==(t=null!=l?l:e.initialValue)&&void 0!==t?t:e.value)&&void 0!==a?a:"";return{...e,initialValue:r}})),p=r.conditionalRules||[],g=e=>{var a;c&&(c.can_measure_blood_sugar=null!==(a=e.can_measure_blood_sugar)&&void 0!==a?a:null,c.blood_sugar=e.blood_sugar||"",c.blood_sugar_unit=e.blood_sugar_unit||c.blood_sugar_unit||"mg/dL")};return i(()=>{var e;return null===(e=t.value)||void 0===e?void 0:e.formValues},e=>{e&&g(e)},{deep:!0}),i(()=>t.value,e=>{null!=e&&e.getFormValues&&g(e.getFormValues())},{immediate:!0}),a({getFormRef:()=>t.value,validateForm:()=>{var e,a;return(null===(e=t.value)||void 0===e||null===(a=e.validateForm)||void 0===a?void 0:a.call(e))||null},getFormValues:()=>{var e,a;return(null===(e=t.value)||void 0===e||null===(a=e.getFormValues)||void 0===a?void 0:a.call(e))||{}}}),(e,a)=>(s(),u("div",B,[m(h,{formData:d.value,conditionalRules:v(p),ref_key:"formRef",ref:t},null,8,["formData","conditionalRules"])]))}}),[["__scopeId","data-v-bfd75302"]]),z={class:"neonatal-vitals-section"},X=b(t({__name:"HypoglycemiaSymptomaticSection",setup(e,{expose:a}){const t=l(null),r=D.find(e=>"Hypoglycemia-Symptomatic"===e.title);if(!r)throw new Error("[HypoglycemiaSymptomaticSection] Missing configuration for Hypoglycemia-Symptomatic section");const c=n(O),d=o(()=>r.formData.map(e=>{var a,t;if(!e.name||!c)return{...e};const l=c[e.name],n="switchField"===e.componentType?null!=l?l:null:null!==(a=null!==(t=null!=l?l:e.initialValue)&&void 0!==t?t:e.value)&&void 0!==a?a:"";return{...e,initialValue:n}})),p=r.conditionalRules||[],g=e=>{c&&Object.assign(c,e)};return i(()=>{var e;return null===(e=t.value)||void 0===e?void 0:e.formValues},e=>{e&&g(e)},{deep:!0}),i(()=>t.value,e=>{null!=e&&e.getFormValues&&g(e.getFormValues())},{immediate:!0}),a({getFormRef:()=>t.value,validateForm:()=>{var e,a;return(null===(e=t.value)||void 0===e||null===(a=e.validateForm)||void 0===a?void 0:a.call(e))||null},getFormValues:()=>{var e,a;return(null===(e=t.value)||void 0===e||null===(a=e.getFormValues)||void 0===a?void 0:a.call(e))||{}}}),(e,a)=>(s(),u("div",z,[m(h,{formData:d.value,conditionalRules:v(p),ref_key:"formRef",ref:t},null,8,["formData","conditionalRules"])]))}}),[["__scopeId","data-v-34b36eb5"]]),G={class:"neonatal-vitals-section"},$=b(t({__name:"HypoglycemiaAsymptomaticSection",setup(e,{expose:a}){const t=l(null),r=D.find(e=>"Hypoglycemia-Asymptomatic"===e.title);if(!r)throw new Error("[HypoglycemiaAsymptomaticSection] Missing configuration for Hypoglycemia-Asymptomatic section");const c=n(O),d=o(()=>r.formData.map(e=>{var a,t;if(!e.name||!c)return{...e};const l=c[e.name],n="switchField"===e.componentType?null!=l?l:null:null!==(a=null!==(t=null!=l?l:e.initialValue)&&void 0!==t?t:e.value)&&void 0!==a?a:"";return{...e,initialValue:n}})),p=r.conditionalRules||[],g=e=>{c&&Object.assign(c,e)};return i(()=>{var e;return null===(e=t.value)||void 0===e?void 0:e.formValues},e=>{e&&g(e)},{deep:!0}),i(()=>t.value,e=>{null!=e&&e.getFormValues&&g(e.getFormValues())},{immediate:!0}),a({getFormRef:()=>t.value,validateForm:()=>{var e,a;return(null===(e=t.value)||void 0===e||null===(a=e.validateForm)||void 0===a?void 0:a.call(e))||null},getFormValues:()=>{var e,a;return(null===(e=t.value)||void 0===e||null===(a=e.getFormValues)||void 0===a?void 0:a.call(e))||{}}}),(e,a)=>(s(),u("div",G,[m(h,{formData:d.value,conditionalRules:v(p),ref_key:"formRef",ref:t},null,8,["formData","conditionalRules"])]))}}),[["__scopeId","data-v-a5dcc574"]]),J={class:"neonatal-vitals-section"},K=b(t({__name:"VitalsSummarySection",setup(e,{expose:a}){const t=l(null),r=D.find(e=>"Vitals Summary"===e.title);if(!r)throw new Error("[VitalsSummarySection] Missing configuration for Vitals Summary section");const i=n(O),c=o(()=>r.formData.map(e=>{if("summaryField"!==e.componentType||!i)return{...e};const a=e.builder;return{...e,builder:e=>{if("function"!=typeof a)return[];const t={...i||{},...e};return a(t)}}}));return a({getFormRef:()=>t.value,validateForm:()=>null,getFormValues:()=>({...i||{}})}),(e,a)=>(s(),u("div",J,[m(h,{formData:c.value,ref_key:"formRef",ref:t},null,8,["formData"])]))}}),[["__scopeId","data-v-fbe7c51f"]]),Q=t({name:"NeonatalVitals",components:{IonPage:g,IonContent:p,Toolbar:T,NeonatalStepper:R},setup(){const e=f(),a=F(),{patient:t}=y(a),n=M(),o=()=>{var e;const a=(e=>{const a=Number(e);return Number.isFinite(a)?a:null})(null===(e=t.value)||void 0===e?void 0:e.patientID);n.initializeForPatient(a)};o(),i(()=>{var e;return null===(e=t.value)||void 0===e?void 0:e.patientID},()=>o());const r=n.formData;_(O,r),i(()=>n.formData,()=>n.saveSnapshot(),{deep:!0});const u=l(D.map((e,a)=>({title:e.title,number:a+1,checked:!1,class:0===a?"open_step common_step":"common_step",last_step:a===D.length-1?"last_step":""}))),s=e=>D.findIndex(a=>a.title===e),c=[{title:"Vital Signs",value:"1",component:j,configIndex:s("Vital Signs")},{title:"Weight Measurements",value:"2",component:W,configIndex:s("Weight Measurements")},{title:"Blood Sugar",value:"3",component:Y,configIndex:s("Blood Sugar")},{title:"Hypoglycemia-Symptomatic",value:"4",component:X,configIndex:s("Hypoglycemia-Symptomatic")},{title:"Hypoglycemia-Asymptomatic",value:"5",component:$,configIndex:s("Hypoglycemia-Asymptomatic")},{title:"Vitals Summary",value:"6",component:K,configIndex:s("Vitals Summary")}],m=l("1"),d=e=>(null!=e?e:"").trim().toUpperCase(),v=[{encounterType:A.NEONATAL_SIGNS_SYMPTOMS,route:"/neonatal/signs-symptoms",encounterNames:["NEONATAL SIGNS & SYMPTOMS"]},{encounterType:A.NEONATAL_REVIEW_OF_SYSTEMS,route:"/neonatal/review-of-systems",encounterNames:["NEONATAL REVIEW OF SYSTEMS"]},{encounterType:A.PHYSICAL_EXAMINATION_BABY,route:"/neonatal/general-examination",encounterNames:["PHYSICAL EXAMINATION BABY","NEONATAL GENERAL EXAMINATION"]},{encounterType:A.VITALS,route:"/neonatal/vitals",encounterNames:["VITALS","NEONATAL VITALS"]},{encounterType:A.NEONATAL_SYSTEMIC_EXAMINATION,route:"/neonatal/SystemicExamination",encounterNames:["NEONATAL SYSTEMIC EXAMINATION"]}],p=v[v.length-1].route,g=new Map;return v.forEach(e=>{e.encounterNames.forEach(a=>{g.set(d(a),e.encounterType)})}),{wizardData:u,stepperData:c,stepperTitle:"Neonatal Vital Signs",currentOpenStepper:m,updateStatus:e=>{e&&e.value&&u.value.forEach((a,t)=>{e.value===(t+1).toString()?(a.class="open_step common_step",a.checked=!1):t<parseInt(e.value)-1?(a.class="common_step color_white",a.checked=!0):(a.class="common_step",a.checked=!1)})},getSaveFunction:a=>a===c.length-1?async()=>{var a;if(null!==(a=t.value)&&void 0!==a&&a.patientID)try{const a=[];if(r.respiratory_rate&&a.push(await w.buildValueNumber("Respiratory rate",Number(r.respiratory_rate))),r.heart_rate&&a.push(await w.buildValueNumber("Pulse",Number(r.heart_rate))),r.oxygen_saturation&&a.push(await w.buildValueNumber("Oxygen saturation",Number(r.oxygen_saturation))),r.temperature&&a.push(await w.buildValueNumber("Temperature (C)",Number(r.temperature))),r.current_weight&&a.push(await w.buildValueNumber("Weight (kg)",Number(r.current_weight)/1e3)),r.head_circumference&&a.push(await w.buildValueNumber("Head circumference",Number(r.head_circumference))),r.blood_sugar){let e=Number(r.blood_sugar);"mmol/L"===(r.blood_sugar_unit||"mg/dL")&&(e*=18.018),a.push(await w.buildValueNumber("Blood sugar",e))}await E(t.value.patientID,A.VITALS,a),x("Vital signs recorded successfully"),n.clearPatient(t.value.patientID);try{const a=await L.getSavedEncounters(t.value.patientID),l=(e=>{const a=new Set;e.forEach(e=>{const t=d(e),l=g.get(t);void 0!==l&&a.add(l)});const t=v.find(e=>!a.has(e.encounterType));return t?t.route:p})(Array.isArray(null==a?void 0:a.encounters)?a.encounters:[]);e.push(l)}catch(l){console.error("Error determining next admission step:",l),e.push({path:"/patientProfile"})}}catch(l){console.error("Failed to save vital signs",l),I("Failed to save vital signs")}else I("No patient selected")}:null,neonatalVitalsSections:D}}});e("default",b(Q,[["render",function(e,a,t,l,n,o){const r=S("Toolbar"),i=S("NeonatalStepper"),u=S("ion-content"),c=S("ion-page");return s(),V(c,{class:"neonatal-vitals-page"},{default:N(()=>[m(r),m(u,{fullscreen:!0},{default:N(()=>[m(i,{wizardData:e.wizardData,StepperData:e.stepperData,stepperTitle:e.stepperTitle,openStepper:e.currentOpenStepper,backUrl:"/patientProfile",flowType:"vitals",getSaveFunction:e.getSaveFunction,sectionsConfig:e.neonatalVitalsSections,onUpdateStatus:e.updateStatus},null,8,["wizardData","StepperData","stepperTitle","openStepper","getSaveFunction","sectionsConfig","onUpdateStatus"])]),_:1})]),_:1})}],["__scopeId","data-v-5f1f2ad2"]]))}}});
