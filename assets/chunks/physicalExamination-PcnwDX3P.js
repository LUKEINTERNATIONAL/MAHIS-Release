import{d as C,ah as u,bh as P,W as k,_ as y,al as M,ak as B,aP as U,cw as N,aQ as F,aT as z,bp as T,N as W,G as $,E as O,a6 as H,cn as L,I as G,a3 as Q,aS as J,bL as R,H as p,O as Y,f as j,J as x,l as g}from"./vendor-BpjEhVym.js";import{b4 as I,Q as q,T as K,m as X,S as f,t as d,G as E,H as Z,s as A,aW as aa,u as ta,l as ea,_ as sa}from"../index-DxnzslDZ.js";import{D as ia}from"./DemographicBar-DZwqT_vo.js";import{S as na}from"./SaveProgressModal-DZM3gZ8-.js";import{S as ra,V as _,m as oa,n as la,o as ca}from"./Stepper-CZDkjuAb.js";import{a as s,f as n,c as i}from"./formatServerData-CQaMPv4F.js";import"./lodash-NJiRuGo9.js";import{u as V}from"./FeatusModal-CW4uev-l.js";import{B as ma}from"./BasicFooter-DOAi0bhw.js";import{b as pa}from"./NextAppointment-BDP25Lfz.js";import{_ as da}from"./SetEncounter.vue_vue_type_script_lang-DcXIIe4y.js";import"./apexcharts-DMAoEdNS.js";import"./OPDOutcome--0NluqHn.js";import"./LevelOfConsciousness.vue_vue_type_script_setup_true_lang-D8-qbRls.js";import"./previousComplaints-Cv9o3IQ2.js";import"./patient_complaints_service-B3DWHz8E.js";import"./DashBox-Bbf0sa3i.js";import"./BasicForm-DpO99lqC.js";import"./DateInputField-C0KuTwUY.js";import"./drug_prescription_service-Bh1qocOB.js";import"./nonPharmaTherapyStore-DsJOHdN-.js";import"./patient_diagnosis_service-DTyZivI8.js";import"./usePatientProfile-Djxvl4K7.js";import"./Registration-x6mXbVGo.js";import"./useLocation-Bc89BjUQ.js";import"./vaccines_service-DZAmSKah.js";import"./sms_service-D7pKXr13.js";import"./EIRreportsStore-C3K2RALB.js";import"./Export-CvrjKWDH.js";import"./useNeonatalEnrollmentStore-3kwioDpG.js";import"./enrollment-DU-PLRUa.js";import"./VitalsMixin.vue_vue_type_script_lang-B7f1w6MG.js";import"./TreatmentPlan-Bj6jOkFs.js";import"./previousDiagnosis-2oFGngBx.js";import"./group_validation-CHE0Ws3F.js";import"./OPDDiagnosis-DkcFXBUK.js";import"./BasicCard-4cV5YROA.js";import"./PastObstreticHistoryStore-NS3svh5X.js";import"./UpcomingFeature-takjtHNF.js";import"./LabOrdersList-DDeVodHw.js";import"./RadiologyStore-CUsjVSWV.js";import"./ncd_appointment_service-wCfsMXzf.js";class ha extends I{constructor(a,e){super(a,95,e)}}class ua extends I{constructor(a,e){super(a,116,e)}}class ga extends I{constructor(a,e){super(a,210,e)}}const fa=C({name:"PhysicalExam",mixins:[pa,da],components:{BasicFooter:ma,IonContent:Q,IonHeader:G,IonMenuButton:L,IonPage:H,IonTitle:O,IonToolbar:$,Toolbar:K,ToolbarSearch:q,DemographicBar:ia,IonButton:W,IonCard:T,IonCardContent:z,IonCardHeader:F,IonCardSubtitle:N,IonCardTitle:U,IonAccordion:B,IonAccordionGroup:M,IonItem:y,IonLabel:k,IonModal:P,Stepper:ra},data(){return{wizardData:[{title:"Vitals",class:"common_step",checked:!1,disabled:!1,number:1,last_step:""},{title:"Maternal exam",class:"common_step",checked:"",icon:!1,disabled:!1,number:2,last_step:""},{title:"Abdominal examination",class:"common_step",checked:"",icon:!1,disabled:!1,number:3,last_step:""},{title:"Presenting signs for IPV",class:"common_step",checked:"",icon:!1,disabled:!1,number:4,last_step:"last_step"}],StepperData:[{title:"Vitals",component:"",value:"1"},{title:"Maternal exam",component:"MaternalExam",value:"2"},{title:"Abdominal examination",component:"AbdominalExamination",value:"3"},{title:"Presenting signs or conditions for IPV ",component:"PresentingSigns",value:"4"}],isOpen:!1,iconsContent:ea}},computed:{...u(ta,["patient"]),...u(ca,["ANCVitals"]),...u(la,["respiratory","pallor","breastExam","vaginalInspection","cervicalExam","oedemaPresence"]),...u(V,["fetalAssessment","fetalDetails"]),...u(oa,["presentingSigns"])},mounted(){this.markWizard()},watch:{vitals:{handler(){this.markWizard()},deep:!0},DangerSigns:{handler(){this.markWizard()},deep:!0},investigations:{handler(){this.markWizard()},deep:!0},diagnosis:{handler(){this.markWizard()},deep:!0}},setup(){return{chevronBackOutline:R,checkmark:J,hasValidationErrors:[]}},methods:{markWizard(){},getSaveFunction(){},deleteDisplayData(t){return t.map(a=>(a==null||delete a.display,a==null?void 0:a.data))},async saveData(){if(await this.validaterowData()){A("Vitals form has errors");return}if(!await V().validate()){A("Abdominal exam section has errors");return}this.saveVitals(),this.saveMaternalExam(),this.saveAbdominalExam(),this.savePresentingSigns(),await this.$router.push("contact"),await aa()},async buildVitals(){return[...await s(this.ANCVitals),...await i(this.ANCVitals)]},async buildMaternalExam(){return[...await n(this.pallor),...await i(this.pallor),...await s(this.pallor),...await n(this.respiratory),...await i(this.respiratory),...await s(this.respiratory),...await i(this.breastExam),...await s(this.breastExam),...await n(this.breastExam),...await i(this.vaginalInspection),...await s(this.vaginalInspection),...await n(this.vaginalInspection),...await i(this.cervicalExam),...await s(this.cervicalExam),...await n(this.cervicalExam),...await i(this.oedemaPresence),...await s(this.oedemaPresence),...await n(this.oedemaPresence)]},async buildAbdominalExam(){return[...await s(this.fetalAssessment),...await n(this.fetalAssessment),...await i(this.fetalAssessment),...await s(this.fetalDetails),...await n(this.fetalDetails),...await i(this.fetalDetails)]},async buildPresentingSigns(){return[...await s(this.presentingSigns),...await n(this.presentingSigns),...await i(this.presentingSigns)]},async saveVitals(){const t=f.getUserID();await new _(this.patient.patientID,t).onFinish(this.ANCVitals)},async validaterowData(){var D,S;const t=f.getUserID(),a=new _(this.patient.patientID,t),e=Z.getAgeInYears((S=(D=this.patient)==null?void 0:D.personInformation)==null?void 0:S.birthdate);this.hasValidationErrors=[];let r=!1;return this.ANCVitals.forEach((l,c)=>{var b;(b=l==null?void 0:l.data)!=null&&b.rowData&&l.data.rowData.forEach((v,m)=>{v.colData.some((w,h)=>{const o=a.validator(w);return w.name==="Respiratory rate"&&e<=5?(o==null?void 0:o.length)>0?(r=!0,this.ANCVitals[c].data.rowData[m].colData[h].alertsErrorMassage=o.flat(1/0)[0]):this.ANCVitals[c].data.rowData[m].colData[h].alertsErrorMassage="":(o==null?void 0:o.length)>0?(r=!0,this.ANCVitals[c].data.rowData[m].colData[h].alertsErrorMassage=o.flat(1/0)[0]):this.ANCVitals[c].data.rowData[m].colData[h].alertsErrorMassage="",!1})})}),this.ANCVitals.validationStatus=!r,r},async saveMaternalExam(){if(this.pallor.length>=0||this.cervicalExam.length>=0||this.vaginalInspection.length>=0||this.breastExam.length>=0){const t=f.getUserID(),a=new ha(this.patient.patientID,t);if(!await a.createEncounter())return d("Unable to create maternal exam encounter");if(!await a.saveObservationList(await this.buildMaternalExam()))return d("Unable to create maternal exam details!");E("Maternal exam details have been created")}console.log(await this.buildMaternalExam())},async saveAbdominalExam(){if(this.fetalAssessment.length>=0||this.fetalDetails.length>=0){const t=f.getUserID(),a=new ua(this.patient.patientID,t);if(!await a.createEncounter())return d("Unable to create abdominal exam encounter");if(!await a.saveObservationList(await this.buildAbdominalExam()))return d("Unable to create abdominal exam details!");E("Abdominal exam details have been created")}console.log(await this.buildAbdominalExam())},async savePresentingSigns(){if(this.presentingSigns.length>=0){const t=f.getUserID(),a=new ga(this.patient.patientID,t);if(!await a.createEncounter())return d("Unable to create presenting signs encounter");if(!await a.saveObservationList(await this.buildPresentingSigns()))return d("Unable to create presenting signs details!");E("Presenting signs details have been created")}console.log(await this.buildPresentingSigns())},openModal(){X(na)}}});function ba(t,a,e,r,D,S){const l=p("Toolbar"),c=p("DemographicBar"),b=p("Stepper"),v=p("ion-content"),m=p("BasicFooter"),w=p("ion-page");return j(),Y(w,null,{default:x(()=>[g(l),g(v,{fullscreen:!0},{default:x(()=>[g(c),g(b,{stepperTitle:"Physical examination",wizardData:t.wizardData,onUpdateStatus:t.markWizard,StepperData:t.StepperData,backUrl:t.userRoleSettings.url,backBtn:t.userRoleSettings.btnName,getSaveFunction:t.getSaveFunction},null,8,["wizardData","onUpdateStatus","StepperData","backUrl","backBtn","getSaveFunction"])]),_:1}),g(m,{onFinishBtn:a[0]||(a[0]=h=>t.saveData())})]),_:1})}const rt=sa(fa,[["render",ba]]);export{rt as default};
