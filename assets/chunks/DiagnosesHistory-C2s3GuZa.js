import{d as y,b2 as w,cr as S,r as a,w as l,e as i,f as c,l as O,J as B,k as u,F as T,P as k,K as E,u as H,b7 as p,cY as x}from"./vendor-CAxM8KGs.js";import{u as C,F,an as N,H as V,_ as I}from"../index-eJpzASAs.js";import"./lodash-NJiRuGo9.js";import"./apexcharts-y0ZeiY9V.js";const R={class:"table-responsive"},A=y({__name:"DiagnosesHistory",setup(J){const m=C(),{patient:b}=w(m),_=S(),f=a(null),e=a([]),g=a(["Diagnosis","Date"]),v=a({responsive:!0,select:!1,layout:{topStart:"",topEnd:"search",bottomStart:"info",bottomEnd:"paging"},ordering:!1}),d=async()=>{try{e.value=[];const h=(await F.getObsByEncounterId(41)).flatMap(t=>t.obs||[]).filter(t=>t.value_coded).sort((t,r)=>{const n=new Date(t.obs_datetime).getTime();return new Date(r.obs_datetime).getTime()-n});for(const t of h){const r=await N.getConceptName(t.value_coded),n=V.toStandardHisFormat(t.obs_datetime);e.value.push([r,n])}}catch(s){console.error("Error updating diagnosis data:",s),e.value=[]}p.use(x)};return l(()=>_,async()=>{await d()},{deep:!0}),l(b,async()=>{await d()},{deep:!0,immediate:!0}),(s,D)=>(c(),i("div",R,[O(H(p),{ref_key:"dataTable",ref:f,options:v.value,data:e.value,class:"display nowrap modern-table",width:"100%"},{default:B(()=>[u("thead",null,[u("tr",null,[(c(!0),i(T,null,k(g.value,o=>(c(),i("th",{key:o},E(o),1))),128))])])]),_:1},8,["options","data"])]))}}),j=I(A,[["__scopeId","data-v-78c82edc"]]);export{j as default};
