import{d as b,b2 as $,cp as m,r,w as p,a as w,b7 as l,cW as x,e as i,f as u,l as S,J as T,k as _,F as H,P as E,K as F,u as q}from"./vendor-CzFJ4KTZ.js";import{u as M,H as o,_ as k}from"../index-CPBFcisl.js";import"./lodash-NJiRuGo9.js";import"./apexcharts-C9muk_WD.js";const B={class:"table-responsive"},V=b({__name:"MedicationsHistory",setup(C){const y=M(),{patient:c}=$(y),f=m(),D=r(null),e=r([]),h=r(["Drug Name","Quantity","Dose","Frequency","Start Date","Expire Date","Instructions"]),v=r({responsive:!0,select:!1,layout:{topStart:"",topEnd:"search",bottomStart:"info",bottomEnd:"paging"},ordering:!1}),A=(a,t)=>{try{const s=new Date(a),N=new Date(t),g=Math.abs(N.getTime()-s.getTime()),d=Math.ceil(g/(1e3*60*60*24));return"".concat(d," day").concat(d!==1?"s":"")}catch(s){return"N/A"}},n=async()=>{try{e.value=[];const a=c.value.MedicationOrder;a&&(a.saved&&Array.isArray(a.saved)&&a.saved.forEach(t=>{e.value.push([t.drug_name||"N/A",t.amountToDispense||t.quantity||"N/A","".concat(t.dose||"N/A"," ").concat(t.units||""),t.frequency||"N/A",t.start_date?o.toStandardHisDisplayFormat(t.start_date):"N/A",t.expire_date?o.toStandardHisDisplayFormat(t.expire_date):"N/A","".concat(t.drug_name,": ").concat(t.dose," ").concat(t.units," ").concat(t.frequency," for ").concat(A(t.start_date,t.expire_date))])}),a.unsaved&&Array.isArray(a.unsaved)&&a.unsaved.forEach(t=>{e.value.push([t.drug_name||"N/A",t.amountToDispense||t.quantity||"N/A","".concat(t.dose||"N/A"," ").concat(t.units||""),t.frequency||"N/A",t.start_date?o.toStandardHisDisplayFormat(t.start_date):"N/A",t.auto_expire_date?o.toStandardHisDisplayFormat(t.auto_expire_date):"N/A",t.instructions||"N/A"])}))}catch(a){console.error("Error updating medication data:",a),e.value=[]}};return p(()=>f,async()=>{await n()},{deep:!0,immediate:!0}),p(c,async()=>{await n()},{deep:!0,immediate:!0}),w(async()=>{await n(),l.use(x)}),(a,t)=>(u(),i("div",B,[S(q(l),{ref_key:"dataTable",ref:D,options:v.value,data:e.value,class:"display nowrap modern-table",width:"100%"},{default:T(()=>[_("thead",null,[_("tr",null,[(u(!0),i(H,null,E(h.value,s=>(u(),i("th",{key:s},F(s),1))),128))])])]),_:1},8,["options","data"])]))}}),K=k(V,[["__scopeId","data-v-41d077db"]]);export{K as default};
