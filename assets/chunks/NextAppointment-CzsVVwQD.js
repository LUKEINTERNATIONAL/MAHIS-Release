var Dt=Object.defineProperty;var bt=(e,t,i)=>t in e?Dt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i;var Ne=(e,t,i)=>bt(e,typeof t!="symbol"?t+"":t,i);import{O as re,bm as Ye,t as he,b3 as le,l as de,_ as ie,bn as It,bo as Ct,a_ as be,M as R,b0 as Be,ag as Z,G as Ge,S as W,J as Te,b4 as et,B as tt,bd as St,o as Pe,aT as F,aJ as Fe,H as U,u as _e,bp as At,aC as we,aB as wt,aD as Ot,b1 as Re,L as Et,bq as Lt,br as Tt,bs as Pt,bt as kt,bu as Ht,bv as Nt,bw as Bt,P as nt,bx as Me,by as Rt,bz as Mt,bA as $t,bB as Vt,s as xt,d as Ft,$ as Ut,N as Gt,aO as Wt,aQ as zt,bc as qt,m as at,V as Yt,aU as jt,bC as Qt,bD as Kt,ar as Xt,bE as ne,A as Oe,bF as Jt,aS as Zt,e as en,az as $e,y as tn,aA as nn,a as je}from"../index-vq0ibwVO.js";import{d as K,aV as me,r as w,a as pe,H,O as Q,f as y,J as r,l as n,k as _,e as P,F as ce,P as Se,m as x,u as g,w as J,ah as fe,b5 as an,b2 as ke,G as st,E as it,ai as ot,aj as We,_ as ge,I as rt,a3 as ze,bf as sn,aT as on,Q as q,c as se,bA as Qe,aU as lt,bm as Ve,a4 as Ie,a5 as oe,al as rn,ak as ln,W as Ae,K as z,bD as dn,bw as dt,Z as un,bq as ut,z as Ce,ao as ct,cp as pt,a2 as mt,R as Ke,i as Ee,v as Le,L as Ue,p as ve,aR as cn,ax as pn,N as Xe,bo as mn,bS as gn,aO as vn}from"./vendor-BolvhNQv.js";import gt from"./LabOrdersList-DP3IM6xD.js";import{v as He}from"./group_validation-CdCc72SE.js";import{u as fn}from"./RadiologyStore-BbgMYe4N.js";import{B as ae}from"./BasicForm-9ScFfK1R.js";import{c as hn,f as _n,a as yn}from"./formatServerData-B5-_Z0cd.js";import{D as vt}from"./DashBox-DazG8gOA.js";import{p as Dn}from"./previousComplaints-Odz0HsVm.js";import{P as bn}from"./patient_complaints_service-wUEwlsFR.js";import{u as In,_ as Cn,a as Sn,b as Je}from"./nonPharmaTherapyStore-BQv8Bqpw.js";import{a as Ze}from"./user_role_management-CDCL5AAx.js";import{u as An}from"./useUserActivities-CclU2PzE.js";import{A as wn}from"./ncd_appointment_service-D_2Y4Jkl.js";import{D as On}from"./DateInputField-RK9lkDyW.js";class ft extends re{constructor(){super()}async postActivities(t,i){const o=i.location_id,d=await new Ye(parseInt(t),-1,o).createEncounter();if(d){const f=await re.buildLabOrders(d,i.orders||i);if(!await re.saveOrdersArray(d.encounter_id,f))return he("Unable to save lab orders")}}async postAHDActivities(t,i){const o=i.location_id,d=await new Ye(parseInt(t),-1,o).createEncounter(le.AHD_LAB_ORDERS);if(d){const f=await re.buildLabOrders(d,i.orders||i);if(!await re.saveOrdersArray(d.encounter_id,f))return he("Unable to save lab orders")}}}const En=["innerHTML"],Ln={class:"scrollable-container"},Tn={key:0,class:"form-section"},Pn={key:1,class:"form-section"},kn={key:2,class:"form-section"},Hn={key:3,class:"form-section"},Nn={key:4,class:"form-section"},Bn={key:5,class:"form-section"},Rn={key:6,class:"form-section"},Mn={key:7,class:"form-section"},$n=K({__name:"RadiologyInvestigation",setup(e){const t=fn(),{head:i,neck:o,chest:c,abdomen:d,upper_extremity:f,spine:a,pelvis:I,lower_extremity:v}=me(t),D=w(de),E=w([]),T=(O,h,M)=>{document.querySelectorAll("#".concat(O," path")).forEach(p=>{p.classList.toggle("white-fill")}),document.querySelectorAll("#".concat(h," line")).forEach(p=>{p.classList.toggle("dark-green-stroke")}),document.querySelectorAll("#".concat(h," rect")).forEach(p=>{p.classList.toggle("bright-green-fill"),p.classList.toggle("dark-green-stroke")}),document.querySelectorAll("#".concat(h," path")).forEach(p=>{p.classList.toggle("dark-green-fill")}),document.querySelectorAll("#".concat(h," circle")).forEach(p=>{p.classList.toggle("bright-green-fill")});const G=E.value.findIndex(p=>p.id===M);G>=0?E.value.splice(G,1):E.value.unshift({id:M,active:!0})},V=()=>{const O=document.getElementById("SPINE");O.style.display==="none"||O.style.display==""?O.style.display="block":O.style.display="none",T("SPINE","SPINE_LABEL-2","spine")};return pe(()=>{const O=document.getElementById("HEAD");O&&O.addEventListener("click",()=>{T("HEAD","LABEL-6","head")});const h=document.getElementById("NECK");h&&h.addEventListener("click",()=>{T("NECK","LABEL-5","neck")});const M=document.getElementById("CHEST");M&&M.addEventListener("click",()=>{T("CHEST","LABEL-4","chest")});const G=document.getElementById("ABDOMEN_LABEL");G&&G.addEventListener("click",()=>{const N=document.getElementById("ABDOMEN-2");N.style.display==="none"||N.style.display==""?N.style.display="block":N.style.display="none",T("ABDOMEN","ABDOMEN_LABEL-2","abdomen")});const p=document.getElementById("UPPER_EXTRMITY");p&&p.addEventListener("click",()=>{T("UPPER_EXTRMITY","LABEL-3","upper_extremity")});const C=document.getElementById("SPINE"),b=document.getElementById("SPINE_LABEL"),u=document.getElementById("LOWER_SPINE_INACTIVE");C&&C.addEventListener("click",()=>{V()}),b&&b.addEventListener("click",()=>{V()}),u&&u.addEventListener("click",()=>{V()});const S=document.getElementById("PELVIS");S&&S.addEventListener("click",()=>{T("PELVIS","LABEL-2","pelvis")});const A=document.getElementById("LOWER_EXTREMITY");A&&A.addEventListener("click",()=>{T("LOWER_EXTREMITY","LABEL","lower_extremity")})}),(O,h)=>{const M=H("ion-col"),G=H("ion-row");return y(),Q(G,null,{default:r(()=>[n(M,{size:"7"},{default:r(()=>[_("div",{innerHTML:D.value.full_body_sk},null,8,En)]),_:1}),n(M,{size:"5",class:"form-column"},{default:r(()=>[_("div",Ln,[(y(!0),P(ce,null,Se(E.value,p=>(y(),P(ce,null,[p.id==="head"?(y(),P("div",Tn,[h[0]||(h[0]=_("h6",null,"Body Part: Head",-1)),n(ae,{contentData:g(i)},null,8,["contentData"])])):p.id==="neck"?(y(),P("div",Pn,[h[1]||(h[1]=_("h6",null,"Body Part: Neck",-1)),n(ae,{contentData:g(o)},null,8,["contentData"])])):p.id==="chest"?(y(),P("div",kn,[h[2]||(h[2]=_("h6",null,"Body Part: Chest",-1)),n(ae,{contentData:g(c)},null,8,["contentData"])])):p.id==="abdomen"?(y(),P("div",Hn,[h[3]||(h[3]=_("h6",null,"Body Part: Abdomen",-1)),n(ae,{contentData:g(d)},null,8,["contentData"])])):p.id==="upper_extremity"?(y(),P("div",Nn,[h[4]||(h[4]=_("h6",null,"Body Part: Upper Extremity",-1)),n(ae,{contentData:g(f)},null,8,["contentData"])])):p.id==="spine"?(y(),P("div",Bn,[h[5]||(h[5]=_("h6",null,"Body Part: Spine",-1)),n(ae,{contentData:g(a)},null,8,["contentData"])])):p.id==="pelvis"?(y(),P("div",Rn,[h[6]||(h[6]=_("h6",null,"Body Part: Pelvis",-1)),n(ae,{contentData:g(I)},null,8,["contentData"])])):p.id==="lower_extremity"?(y(),P("div",Mn,[h[7]||(h[7]=_("h6",null,"Body Part: Lower Extremity",-1)),n(ae,{contentData:g(v)},null,8,["contentData"])])):x("",!0)],64))),256))])]),_:1})]),_:1})}}}),ht=ie($n,[["__scopeId","data-v-5ab54fe8"]]),Vn={class:"modal_wrapper"},xn={class:"uniform_columns"},Fn=K({__name:"AHDPastMedicalHistory",setup(e,{expose:t}){const i=It(),{pastMedicalHistory:o}=me(i),c=w([]);pe(()=>{c.value=i.getInitial(),d()}),J(o,()=>{d()},{deep:!0});const d=()=>{var D;const v=["TB","Chronic Obstructive Pulmonary Disease (COPD)","Asthma","Epilepsy","Previous stroke","Peptic Ulcer Disease (PUD)","Mental disorder","Bleeding disorders","Hypertension","HIV Positive","Diabetes Mellitus"];(D=Ct(o.value,"None"))!=null&&D.checked?v.forEach(E=>{be(o.value,"TB treatment","displayNone",!0),R(o.value,"TB drugs","displayNone",!0),R(o.value,"TB drug start date","displayNone",!0),be(o.value,"Hypertension medication","displayNone",!0),R(o.value,"Current hypertension treatment regimen","displayNone",!0),be(o.value,"HIV status","displayNone",!0),R(o.value,"ARV start date","displayNone",!0),be(o.value,"Diabetes","displayNone",!0),be(o.value,"Controlled by","displayNone",!0),Be(o.value,E,"checked",!1),Be(o.value,E,"disabled",!0)}):v.forEach(E=>{Be(o.value,E,"disabled",!1)})},f=v=>{R(o.value,"TB drugs","popOverData",{filterData:!0,data:[{name:"Auramine 'O' (C.I. 41000) 50g"},{name:"Bedaquilline 100mg"},{name:"Clofazimine 100mg"},{name:"Clofazimine 50mg"},{name:"Cycloserine 125mg"},{name:"Cycloserine 250mg"},{name:"Delamanid 50mg"},{name:"Ethambutol 100mg"},{name:"Ethambutol 400mg"},{name:"Ethionamide 250mg"},{name:"Isoniazid 100mg "},{name:"Isoniazid 300mg"},{name:"Isoniazid / Rifapentine 300mg / 300mg"},{name:"Levofloxacin 100mg"},{name:"Levofloxacin 250mg"},{name:"Linezolid 600mg"},{name:"Moxifloxacin 400mg"},{name:"Pyrazinamide 400mg"},{name:"Rifabutin 150mg Capsules"},{name:"Rifampicin 150mg/isoniazid 75mg"},{name:"Rifampicin 75mg+INH 50mg dispersible"},{name:"Rifampicin 75mg+INH 50mg+Pyrazinamide 150mg dispersible"},{name:"Rifampicin150mg/Isoniazid75mg/Pyrazinamide 400mg/Ethambutol"}]}),R(o.value,"Current hypertension treatment regimen","popOverData",{filterData:!0,data:[{name:"Captopril 12.5mg"},{name:"Aspirin 75mg"},{name:"Hydrochlorothiazide 25mg"},{name:"Enalapril Meleate 5mg"},{name:"Enalapril Maleate 10mg"}]})},a=async()=>[...await hn(o.value),...await _n(o.value),...await yn(o.value)];return t({onSubmit:async()=>{const v=await a();if(v.length===0){he("No past medical history data to save");return}await Z.addObsToEncounterPatient(v,le.AHD_PAST_MEDICAL_HISTORY),Ge("Past medical history saved successful")}}),(v,D)=>(y(),P("div",Vn,[_("div",xn,[n(ae,{contentData:g(o),initialData:c.value,"onUpdate:inputValue":f,"onUpdate:selected":f},null,8,["contentData","initialData"])])]))}}),Un=ie(Fn,[["__scopeId","data-v-e5153372"]]),Gn=K({data:()=>({userRole:"",ready:!1,userRoleSettings:{}}),watch:{$route:{async handler(e){this.userRole=W.getUserRoles();const t=W.getProgramID(),i=W.getProgramName();this.userRole=="Lab"&&t==14&&(this.userRoleSettings={url:"home",btnName:"Back to home",stepperTitle:"Laboratory"}),t==14&&this.userRole!="Lab"&&(this.userRoleSettings={url:"home",btnName:"Go to waiting list",stepperTitle:"Consultation Plan"}),t==12&&(this.userRoleSettings={url:"contact",btnName:"Back"}),i=="LABOUR AND DELIVERY PROGRAM"&&(this.userRoleSettings={url:"labour/labourHome",btnName:"Back to home"}),i=="PNC PROGRAM"&&(this.userRoleSettings={url:"pnc/home",btnName:"Back to home"})},immediate:!0,deep:!0}}}),Wn=K({name:"Menu",mixins:[Gn],components:{IonContent:ze,IonHeader:rt,IonItem:ge,IonList:We,IonMenu:ot,IonTitle:it,IonToolbar:st,IonInput:ke,IonPopover:an,DashBox:vt,SelectionPopover:St,BasicInputField:tt,BasicForm:ae,List:et,DynamicButton:Te,LabOrdersList:gt,RadiologyInvestigation:ht},data(){return{segmentContent:"Lab Investigations",iconsContent:de,no_item:!1,search_item:!1,display_item:!1,addItemButton:!0,selectedText:"",testResult:"",test:"",labOrders:"",filteredSpecimen:"",testData:[],popoverOpen:!1,labOrderStatus:!1,event:"",specimen:"",radiologyOrdersStatus:!1,otherOrdersStatus:!1}},setup(){return{checkmark:on,pulseOutline:sn}},computed:{...fe(Fe,["investigations"]),...fe(_e,["patient"]),inputFields(){return this.investigations[0].data.rowData[0].colData}},watch:{investigations:{handler(){this.setDashedBox()},deep:!0},patient:{async handler(){var e;(e=this.patient)!=null&&e.labOrders&&(this.labOrders=[...this.patient.labOrders.saved,...this.patient.labOrders.unsaved])},deep:!0},$route:{async handler(){await this.getTests()},deep:!0}},async mounted(){await this.getTests(),this.updateInvestigationsStores(),this.setDashedBox(),this.updateInvestigationWizard()},methods:{setSegmentContent(e){this.segmentContent=e},async getTests(){let e;W.getPouchDbStatus()&&W.getLanConnectionStatus()?e=await Pe("test_types"):e=await re.getTestTypes(),R(this.investigations,"test","multiSelectData",e)},toggleLabOrderStatus(){this.labOrderStatus=!this.labOrderStatus},async updateInvestigationWizard(){var t;if(!((t=this.patient)!=null&&t.labOrders))return;this.labOrders=[...this.patient.labOrders.saved,...this.patient.labOrders.unsaved];const e=await this.labOrders.filter(i=>U.toStandardHisFormat(U.sessionDate())===U.toStandardHisFormat(i.order_date));e.length>0?this.investigations[0].selectedData=e:this.investigations[0].selectedData=""},async updateInvestigationsStores(){await this.updateInvestigationWizard(),Fe().setInvestigations(this.investigations)},displayInputFields(){this.testResult="",this.selectedText="",this.no_item=!1,this.addItemButton=!1,this.search_item=!0},async validateRowData(){return He(this.investigations)},async checkTest(){return await this.isNameInData(this.inputFields[0].value.name,await this.investigations[0].selectedData)?(R(this.investigations,"test","alertsErrorMassage","Lab order already selected"),!1):(R(this.investigations,"test","alertsErrorMassage",""),!0)},async addNewRow(){He(this.investigations)&&await this.checkTest()&&(await this.saveTest(),this.investigations[0].data.rowData[0].colData[0].value="",this.investigations[0].data.rowData[0].colData[1].value="",this.search_item=!1,this.display_item=!0,this.addItemButton=!0),this.updateInvestigationWizard()},isNameInData(e,t){for(let i of t)for(let o of i.tests)if(o.name===e)return!0;return!1},async saveTest(){await new ft().postAHDActivities(this.patient.patientID,[{concept_id:this.inputFields[0].value.concept_id,name:this.inputFields[0].value.name,specimen:this.inputFields[1].value.name,reason:"Routine",specimenConcept:await F.getConceptID(this.inputFields[1].value.name,!0)}]),R(this.investigations,"specimen","disabled",!0),this.labOrders=[...this.patient.labOrders.saved,...this.patient.labOrders.unsaved]},async handleInputData(e){if(e.inputHeader=="Test"&&this.checkTest(),R(this.investigations,"specimen","alertsErrorMassage",""),e.inputHeader=="Test"&&e.value){let t;W.getPouchDbStatus()&&W.getLanConnectionStatus()?t=await Pe("specimens"):t=await re.getSpecimens("",1e3),this.specimen=await F.getConceptSet(e.value.name,"",{names:t.map(i=>i.name)}),this.specimen.length==1?(R(this.investigations,"specimen","value",this.specimen[0]),R(this.investigations,"specimen","disabled",!0)):(R(this.investigations,"specimen","value",""),R(this.investigations,"specimen","disabled",!1)),R(this.investigations,"specimen","multiSelectData",this.specimen)}},async filterTest(e){return await this.labOrders.filter(t=>t.name.toLowerCase().includes(e.toLowerCase()))},async filterSpecimen(e){var t;return(t=this.specimen[0])!=null&&t.name&&e?await this.specimen.filter(i=>i==null?void 0:i.name.toLowerCase().includes(e.toLowerCase())):[]},setTest(e){this.selectedText=e.name,this.inputFields[1].inputHeader=="Test"?this.investigations[0].data.rowData[0].colData[0].value=e.name:this.investigations[0].data.rowData[0].colData[1].value=e.name,this.updateInvestigationsStores()},setDashedBox(){(this.inputFields[1].value||this.inputFields[0].value)&&(this.addItemButton=!1,this.search_item=!0,this.no_item=!1),this.investigations[0].selectedData.length>0?(this.display_item=!0,this.no_item=!1):this.search_item||(this.no_item=!0)}}}),zn={class:"background"},qn={key:0},Yn={key:1},jn={key:2},Qn={class:"",slot:"content",style:{"margin-bottom":"125px","margin-top":"2px"}},Kn={key:3},Xn={class:"ion-padding",slot:"content"},Jn={key:4};function Zn(e,t,i,o,c,d){const f=H("ion-label"),a=H("ion-segment-button"),I=H("ion-segment"),v=H("VisitsHistory"),D=H("LabOrdersList"),E=H("RadiologyInvestigation");return y(),P("div",zn,[n(I,{value:e.segmentContent,style:{"margin-top":"5px"}},{default:r(()=>[n(a,{value:"Lab Investigations",onClick:t[0]||(t[0]=T=>e.setSegmentContent("Lab Investigations"))},{default:r(()=>[n(f,null,{default:r(()=>[...t[3]||(t[3]=[q("Lab Investigations",-1)])]),_:1})]),_:1}),n(a,{value:"Radiology Investigation",onClick:t[1]||(t[1]=T=>e.setSegmentContent("Radiology Investigation"))},{default:r(()=>[n(f,null,{default:r(()=>[...t[4]||(t[4]=[q("Radiology Investigation",-1)])]),_:1})]),_:1}),n(a,{value:"Other Investigation",onClick:t[2]||(t[2]=T=>e.setSegmentContent("Other Investigation"))},{default:r(()=>[n(f,null,{default:r(()=>[...t[5]||(t[5]=[q("Other Investigation",-1)])]),_:1})]),_:1})]),_:1},8,["value"]),e.segmentContent=="Radiology Investigation"?(y(),P("div",qn,[n(v)])):x("",!0),e.segmentContent=="Other Investigation"?(y(),P("div",Yn)):x("",!0),e.segmentContent=="Lab Investigations"?(y(),P("div",jn,[_("div",Qn,[_("span",null,[n(D,{propOrders:e.labOrders},null,8,["propOrders"])])])])):x("",!0),e.segmentContent=="Radiology Investigation"?(y(),P("div",Kn,[_("div",Xn,[n(E)])])):x("",!0),e.segmentContent=="Other Investigation"?(y(),P("div",Jn)):x("",!0)])}const ea=ie(Wn,[["render",Zn],["__scopeId","data-v-67ff1a61"]]),ta={key:0},na={style:{"align-content":"center"}},aa={class:"ion-padding",slot:"content"},sa=K({__name:"AHDPresentingComplaints",setup(e,{expose:t}){const i=At(),{presentingComplaints:o}=me(i),c=w(de),d=w(!0),f=w(!1),a=w(!0),I=w(!1),v=w([]),D=w([]),E=w(),T=se(()=>[{componentType:"multiSelectInputField",header:"Presenting Complaints",name:"PresentingComplaints",trackBy:"concept_id",icon:de.search,hideSelected:!0,validation:u=>p(u==null?void 0:u.name,v.value)?"Presenting complaint already added":we.required(u),options:D.value,grid:{s:"6"}},{componentType:"inputField",header:"Duration",name:"duration",icon:de.time,validation:u=>we.isNotEmptyandNumber(u),grid:{s:"6"},unitOptions:[{label:"Hours",value:"Hours"},{label:"Days",value:"Days"},{label:"Weeks",value:"Weeks"},{label:"Months",value:"Months"},{label:"Years",value:"Years"}],unitValidation:u=>!u||u===""?"Please select a unit.":null},{componentType:"inputField",header:"Specify the presenting complaint(s)",name:"Other (specify)",icon:de.editPen,validation:u=>p(u,v.value)?"Presenting complaint already added":we.required(u),condition:u=>{var S;return((S=u==null?void 0:u.PresentingComplaints)==null?void 0:S.name)==="Other"}},{componentType:"Alert",condition:u=>{var S;return we.required((S=u==null?void 0:u.PresentingComplaints)==null?void 0:S.name)!=null},backgroundColor:"lightyellow",textColor:"black",value:"Please search thoroughly for the complaint. If it is not listed, search and select the 'Other' option to specify the complaint.",name:"noMatchAlert"}]),{formRef:V}=wt(),O=async()=>{D.value=await bn.getComplaintsList("Presenting complaint"),R(o.value,"PresentingComplaints","multiSelectData",D.value)},h=()=>{d.value=!1,a.value=!1,f.value=!0},M=async()=>{var A,N;const u=(A=V.value)==null?void 0:A.getFormValues();((N=V.value)==null?void 0:N.validateForm())==null&&(G(u),f.value=!1,a.value=!0)},G=u=>{var j;const S=u.duration+" "+u.duration_unit,A=u.PresentingComplaints,N=A.name==="Other"?u["Other (specify)"]:A.name;v.value.push({actionBtn:!0,btn:["delete"],name:N,concept_id:A.concept_id,duration:A.duration,durationUnits:A.duration_unit,display:[N,S],data:[{concept_id:8578,value_coded:A.concept_id,obs_datetime:W.getSessionDate(),child:[{concept_id:A.concept_id,value_text:S,obs_datetime:W.getSessionDate()}]}]}),(j=V.value)==null||j.resetForm(),I.value=!0},p=(u,S)=>S.some(A=>A.name===u),C=u=>{v.value=v.value.filter(S=>S.display[0]!==u.name)},b=async()=>{const u=v.value.flatMap(S=>S.data);if(u.length<=0)return he("Presenting complaints is required");u.length<=0||(await Z.addObsToEncounterPatient(u,le.AHD_PRESENTING_COMPLAINTS),Ge("Presenting complaints saved successful"),v.value=[])};return pe(async()=>{await O()}),t({onSubmit:b}),(u,S)=>{const A=H("ion-row"),N=H("ion-label"),j=H("ion-accordion"),L=H("ion-accordion-group");return y(),P(ce,null,[n(vt,{status:d.value,content:"No presenting complaints added"},null,8,["status"]),I.value?(y(),P("span",ta,[n(et,{listData:v.value,"onClicked:delete":C},null,8,["listData"])])):x("",!0),f.value?(y(),Q(A,{key:1},{default:r(()=>[n(Ot,{formData:T.value,ref_key:"formRef",ref:V},null,8,["formData"]),_("div",na,[n(Te,{fill:"clear",icon:c.value.plus,iconSlot:"icon-only","onClicked:btn":S[0]||(S[0]=s=>M()),name:"Save"},null,8,["icon"])])]),_:1})):x("",!0),a.value?(y(),Q(A,{key:2,style:{"margin-top":"10px"}},{default:r(()=>[n(Te,{fill:"clear",icon:c.value.plus,iconSlot:"icon-only","onClicked:btn":S[1]||(S[1]=s=>h()),name:"Add new presenting complaints"},null,8,["icon"])]),_:1})):x("",!0),n(A,null,{default:r(()=>[n(L,{ref_key:"accordionGroup",ref:E,class:"previousView"},{default:r(()=>[n(j,{value:"first","toggle-icon-slot":"start",style:{"border-radius":"10px","background-color":"#fff"}},{default:r(()=>[n(g(ge),{slot:"header",color:"light"},{default:r(()=>[n(N,{class:"previousLabel"},{default:r(()=>[...S[2]||(S[2]=[q("Previous presenting complaints",-1)])]),_:1})]),_:1}),_("div",aa,[n(Dn)])]),_:1})]),_:1},512)]),_:1})],64)}}}),ia=ie(sa,[["__scopeId","data-v-04755951"]]);class xe extends Re{constructor(i,o,c){super(i,le.AHD_HIV_STAGING,c);Ne(this,"age");Ne(this,"confirmatoryTest");this.age=o,this.confirmatoryTest=null}isAdult(){return this.age>=15}isPedaid(){return this.age<=14}setAge(i){this.age=i}getFacilities(i=""){return Et.getFacilities({name:i})}getConfirmatoryTestType(){return this.confirmatoryTest}cd4CountIsValid(i){try{return!!i.match(/^(=|<|>)([0-9]*)$/m)}catch(o){return!1}}getAlertGuidelines(){return Lt}getWhoStageGuidelines(){return this.isAdult()?Tt:Pt}getProgramEligibilityGuidelines(){return this.isAdult()?kt:Ht}getRecommendedConditionGuidelines(){return this.isAdult()?Nt:Bt}getStagingConditions(i){const o=this.getStagingCategoryByNum(i);return Re.getConceptsByCategory(o)}buildWhoStageObs(i){return this.buildValueCoded("Who stage",i)}buildWhoCriteriaObs(i){return this.buildValueCoded("Who stages criteria present",i)}buildReasonForArtObs(i){return this.buildValueCoded("Reason for ART eligibility",i)}getStagingCategoryByNum(i){switch(i){case 1:return this.isAdult()?"stage_1_conditions_adults":"stage_1_conditions_pedaids";case 2:return this.isAdult()?"stage_2_conditions_adults":"stage_2_conditions_pedaids";case 3:return this.isAdult()?"stage_3_conditions_adults":"stage_3_conditions_pedaids";case 4:return this.isAdult()?"stage_4_conditions_adults":"stage_4_conditions_pedaids";default:return""}}async loadHivConfirmatoryTestType(){const i=await Re.getFirstValueCoded(this.patientID,"Confirmatory hiv test type");i&&(this.confirmatoryTest=i)}}const oa={key:0,class:"ion-padding"},ra={class:"accordion_group ion-padding"},la={style:{"font-weight":"bold"}},da={class:"error"},ua={class:"ion-padding",slot:"content"},ca={class:"ion-padding"},pa={class:"ion-padding"},ma={key:0,class:"ion-padding"},ga={class:"ion-padding",style:{"border-bottom":"dashed #ccc"}},va=K({__name:"AHDStaging",props:{hideSubmit:{type:Boolean,default:!1},date:{default:xe.getSessionDate()}},setup(e,{expose:t}){const i=e,o=new nt,c=w({}),d=new xe(o.getID(),o.getAge(),-1);J(()=>i.date,s=>{var B;const l=(B=s==null?void 0:s.standardDate)!=null?B:xe.getSessionDate(),m=Ce(l).diff(o.getBirthdate(),"years");d.setAge(m),d.setDate(l)},{deep:!0,immediate:!0});const f=Qe({stage_4_conditions:{title:"Stage 4 Conditions",options:[]},stage_3_conditions:{title:"Stage 3 Conditions",options:[]},stage_2_conditions:{title:"Stage 2 Conditions",options:[]},stage_1_conditions:{title:"Stage 1 Conditions",options:[]}}),a=Qe({cd4:"",cd4Date:"",isChildBearing:!1,reasonForArt:"",pregnant:"",breastFeeding:"",cd4Available:"",cd4Modifier:"",cd4Location:"",whoStage:"",staging:[],confirmatoryTest:""}),I={reasonForArt:{buildObs:()=>d.buildReasonForArtObs(a.reasonForArt),suggestAvalue:()=>({"PRESUMED SEVERE HIV":{priority:1,condition:()=>o.getAgeInMonths()<12&&a.confirmatoryTest==="HIV rapid test"&&F.getConceptsByCategory("pshd_condition").some(s=>G().includes(s.name))},"WHO STAGE IV PEDS":{priority:2,condition:()=>d.isPedaid()&&D(["stage_4_conditions"])},"WHO STAGE III PEDS":{priority:3,condition:()=>d.isPedaid()&&D(["stage_3_conditions"])},"HIV DNA polymerase chain reaction":{priority:4,condition:()=>o.getAgeInMonths()<12&&a.confirmatoryTest==="HIV DNA polymerase chain reaction"},"CD4 COUNT LESS THAN OR EQUAL TO 750":{priority:5,condition:()=>h(750)&&M()&&E()&&o.ageInMonths()>=24&&o.ageInMonths()<=56},"CD4 COUNT LESS THAN OR EQUAL TO 500":{priority:6,condition:()=>d.isPedaid()&&h(500)&&M()&&E()},"HIV infected":{priority:7,condition:()=>o.getAgeInMonths()<24||o.getAge()<=5},"WHO STAGE IV ADULT":{priority:1,condition:()=>{const s=F.getConceptsByCategory("severe_hiv_wasting_syndrome");return d.isAdult()&&(D(["stage_4_conditions"])||s.filter(l=>G().includes(l.name)).length>=2)}},"WHO STAGE III ADULT":{priority:2,condition:()=>d.isAdult()&&D(["stage_3_conditions"])},"cd4 less than or equal to 350":{priority:3,condition:()=>d.isAdult()&&h(350)&&E()},"cd4 less than or equal to 250":{priority:4,condition:()=>d.isAdult()&&h(250)&&E()},"cd4 less than or equal to 500":{priority:4,condition:()=>d.isAdult()&&h(500)&&E()},BREASTFEEDING:{priority:5,condition:()=>d.isAdult()&&a.breastFeeding==="Yes"&&M()},"PATIENT PREGNANT":{priority:6,condition:()=>d.isAdult()&&a.pregnant==="Yes"&&M()},Asymptomatic:{priority:7,condition:()=>M()}})},whoStage:{buildObs:()=>d.buildWhoStageObs(a.whoStage),suggestAvalue:()=>({"WHO STAGE IV ADULT":{priority:1,condition:()=>d.isAdult()&&D(["stage_4_conditions"])},"WHO STAGE III ADULT":{priority:2,condition:()=>d.isAdult()&&D(["stage_3_conditions"])},"WHO STAGE II ADULT":{priority:3,condition:()=>d.isAdult()&&D(["stage_2_conditions"])},"WHO STAGE I ADULT":{priority:4,condition:()=>d.isAdult()&&D(["stage_1_conditions"])},"WHO STAGE IV PEDS":{priority:1,condition:()=>d.isPedaid()&&(D(["stage_4_conditions"])||a.reasonForArt==="WHO STAGE IV PEDS")},"WHO STAGE III PEDS":{priority:2,condition:()=>d.isPedaid()&&D(["stage_3_conditions"])},"WHO STAGE II PEDS":{priority:3,condition:()=>d.isPedaid()&&D(["stage_2_conditions"])},"WHO STAGE I PEDS":{priority:4,condition:()=>d.isPedaid()&&D(["stage_1_conditions"])}})},cd4Available:{required:()=>!0,dataHandler:s=>{s!="Yes"&&(a.cd4="",a.cd4Date=""),c.value.cd4="",c.value.cd4Modifier="",c.value.cd4Date="",c.value.cd4Location=""}},pregnant:{required:()=>a.isChildBearing,buildObs:()=>d.buildValueCoded("Is patient pregnant?",a.pregnant)},breastFeeding:{required:()=>a.isChildBearing,buildObs:()=>d.buildValueCoded("Is patient breast feeding?",a.breastFeeding)},cd4:{required:()=>a.cd4Available==="Yes",validation:()=>{if(!O()){c.value.cd4="A number is required";return}V()>1e4&&(c.value.cd4="CD4 value cannot exceed 10,000")},buildObs:()=>d.buildValueNumber("CD4 count",V(),T())},cd4Modifier:{required:()=>a.cd4Available==="Yes",validation:()=>{a.cd4Modifier||(c.value.cd4Modifier="Please select modifier")},dataHandler:s=>a.cd4Modifier=s,options:[{label:"=",value:"="},{label:">",value:">"},{label:"<",value:"<"}]},cd4Date:{required:()=>a.cd4Available==="Yes",dataHandler:s=>{s&&(a.cd4Date=Ce(s).format("YYYY-MM-DD"))},validation:()=>{if(isNaN(new Date(a.cd4Date).getTime())){c.value.cd4Date="Invalid CD4 date";return}const s=Ce(a.cd4Date);if(s.isAfter(Ce(d.getDate()))){c.value.cd4Date="Cd4 result date can't be greater than ".concat(d.getDate());return}s.isBefore(Ce(o.getBirthdate()))&&(c.value.cd4Date="CD4 date must not be earlier than birthdate")},buildObs:()=>d.buildValueDate("Cd4 count datetime",a.cd4Date)},cd4Location:{required:()=>a.cd4Available==="Yes",dataHandler:s=>a.cd4Location=s,buildObs:()=>d.buildValueText("Cd4 count location",a.cd4Location)},staging:{validation:()=>{if(Object.keys(f).every(B=>u(B)<=0)){c.value.staging="Please select one or more staging conditions";return}const l=["stage_4_conditions","stage_3_conditions","stage_2_conditions"].some(B=>u(B)>0);f.stage_1_conditions.options.some(B=>/asymptomatic/i.test(B.name)&&B.checked)&&l&&(c.value.staging="Asymptomatic cannot be selected with other staging conditions")},buildObs:()=>Object.keys(f).reduce((l,m)=>(f[m].options.forEach(B=>{B.checked&&l.push(B.name)}),l),[]).map(l=>d.buildWhoCriteriaObs(l))}};function v(){Object.keys(a).forEach(s=>{typeof a[s]=="boolean"?a[s]=!1:Array.isArray(a[s])?a[s]=[]:a[s]=""}),Object.keys(c.value).forEach(s=>c.value[s]=""),N()}function D(s){return s.some(l=>u(l)>0)}function E(){return new Date(a.cd4Date)<=new Date("2016-04-30")}function T(){return a.cd4Modifier}function V(){return parseInt("".concat(a.cd4))}function O(){return/^\d+$/i.test("".concat(a.cd4))}function h(s){if(!O())return!1;const l=T(),m=V();return l==="="&&s===m||l==="<"&&m<=s||l===">"&&m>=s}function M(){return D(["stage_2_conditions","stage_1_conditions"])}function G(){return Object.keys(f).reduce((s,l)=>(f[l].options.forEach(m=>m.checked&&s.push(m.name)),s),[])}function p(s){if(c.value[s]="",typeof I[s].required=="function"&&I[s].required()&&!a[s]){c.value[s]="This field is required";return}a[s]&&typeof I[s].validation=="function"&&I[s].validation()}function C(s){var l,m,B;if(I[s]&&"suggestAvalue"in I[s]){a[s]="";const Y=I[s].suggestAvalue(),ee=Object.keys(Y).reduce((te,ue)=>{const ye=Y[ue];return typeof ye.condition=="function"&&ye.condition()?[...te,{value:ue,priority:ye.priority}]:te},[]);a[s]=(B=(m=(l=ee.sort((te,ue)=>te.priority-ue.priority))==null?void 0:l[0])==null?void 0:m.value)!=null?B:""}}function b(){return Object.keys(a).reduce((s,l)=>{if(l in I&&a[l]&&typeof I[l].buildObs=="function"){const m=I[l].buildObs();return Array.isArray(m)?[...s,...m]:[...s,m]}return s},[])}function u(s){return f[s].options.filter(l=>l.checked).length}async function S(){await d.loadHivConfirmatoryTestType(),a.confirmatoryTest=d.getConfirmatoryTestType(),a.isChildBearing=o.isChildBearing()}function A(s,l){s in I&&typeof I[s].dataHandler=="function"&&I[s].dataHandler(l),p(s),Object.keys(I).forEach(m=>C(m))}function N(){Object.keys(f).forEach(s=>{var B,Y;const l=Number((Y=(B=s.match(/\d+/))==null?void 0:B[0])!=null?Y:0),m=d.getStagingConditions(l);f[s].options=m.map(ee=>({checked:!1,name:ee.name,concept_id:ee.concept_id}))})}function j(){return Object.keys(I).forEach(s=>p(s)),Object.keys(c.value).every(s=>"".concat(c.value[s]).length<=0)}async function L(){if(console.log("Submitting staging"),!j())return he("Please review form for errors"),!1;try{const s=await Promise.all(b());return await d.createEncounter(),await d.saveObservationList(s),Ge("Staging Observations saved!"),!0}catch(s){return console.error(s),xt("Error has occured while saving observations"),!1}}return J(()=>i.date,s=>{d.setDate(s),o.date=s,v()}),pe(async()=>{await S(),N()}),t({validateStagingForm:j,buildPayload:b,onSubmit:L}),(s,l)=>(y(),Q(g(ut),null,{default:r(()=>[n(g(lt),null,{default:r(()=>[a.isChildBearing?(y(),P("div",oa,[n(g(Ve),null,{default:r(()=>[n(g(Ie),null,{default:r(()=>[n(g(oe),null,{default:r(()=>[n(Me,{label:"Pregnant?",modelValue:a.pregnant,"onUpdate:modelValue":l[0]||(l[0]=m=>a.pregnant=m),onIonChange:l[1]||(l[1]=m=>A("pregnant",m)),"error-message":c.value.pregnant},null,8,["modelValue","error-message"])]),_:1}),n(g(oe),null,{default:r(()=>[n(Me,{label:"Breastfeeding?",modelValue:a.breastFeeding,"onUpdate:modelValue":l[2]||(l[2]=m=>a.breastFeeding=m),onOnChange:l[3]||(l[3]=m=>A("breastFeeding",m)),"error-message":c.value.breastFeeding},null,8,["modelValue","error-message"])]),_:1})]),_:1})]),_:1})])):x("",!0),_("div",ra,[n(g(rn),{color:"light"},{default:r(()=>[(y(!0),P(ce,null,Se(f,(m,B)=>(y(),Q(g(ln),{key:B},{default:r(()=>[n(g(ge),{color:"light",slot:"header"},{default:r(()=>[n(g(Ae),{style:{color:"grey","font-size":"17px"},class:"ion-padding"},{default:r(()=>[_("b",la,[q(z(m.title)+" ",1),n(g(dn),{color:u("".concat(B))>0?"primary":void 0},{default:r(()=>[q(" Selected: "+z(u("".concat(B))),1)]),_:2},1032,["color"])]),_("p",da,z(c.value.staging),1)]),_:2},1024)]),_:2},1024),_("div",ua,[n(g(We),null,{default:r(()=>[(y(!0),P(ce,null,Se(m.options,(Y,ee)=>(y(),Q(g(ge),{key:ee},{default:r(()=>[n(g(dt),{modelValue:Y.checked,"onUpdate:modelValue":te=>Y.checked=te,onIonChange:te=>A("staging",{stage_type:B,raw:te,option:Y})},null,8,["modelValue","onUpdate:modelValue","onIonChange"]),n(g(Ae),{style:{margin:"13px"}},{default:r(()=>[q(z(Y.name),1)]),_:2},1024),l[15]||(l[15]=_("p",null,null,-1)),Y.description?(y(),Q(g(un),{key:0,color:Y.color},{default:r(()=>[q(z(Y.text),1)]),_:2},1032,["color"])):x("",!0)]),_:2},1024))),128))]),_:2},1024)])]),_:2},1024))),128))]),_:1})]),_("div",ca,[_("div",pa,[n(Me,{label:"Recent CD4 count results available?",modelValue:a.cd4Available,"onUpdate:modelValue":l[4]||(l[4]=m=>a.cd4Available=m),onOnChange:l[5]||(l[5]=m=>A("cd4Available",m)),"error-message":c.value.cd4Available},null,8,["modelValue","error-message"])]),a.cd4Available==="Yes"?(y(),P("div",ma,[n(g(Ve),{class:"ion-padding"},{default:r(()=>[n(g(Ie),null,{default:r(()=>[n(g(oe),null,{default:r(()=>[n(Rt,{label:"CD4 Count Date",modelValue:a.cd4Date,"onUpdate:modelValue":l[6]||(l[6]=m=>a.cd4Date=m),required:a.cd4Available==="Yes","error-message":c.value.cd4Date,onOnChange:l[7]||(l[7]=m=>A("cd4Date",m))},null,8,["modelValue","required","error-message"])]),_:1})]),_:1}),n(g(Ie),null,{default:r(()=>[n(g(oe),{size:"2"},{default:r(()=>[n(Mt,{label:"CD4 Result Modifier",required:a.cd4Available==="Yes","error-message":c.value.cd4Modifier,options:I.cd4Modifier.options,onOnChange:l[8]||(l[8]=m=>A("cd4Modifier",m.value))},null,8,["required","error-message","options"])]),_:1}),n(g(oe),{size:"10"},{default:r(()=>[n($t,{label:"CD4 Count",modelValue:a.cd4,"onUpdate:modelValue":l[9]||(l[9]=m=>a.cd4=m),type:"number",onOnChange:l[10]||(l[10]=m=>A("cd4",m)),placeholder:"Enter CD4 Count","error-message":c.value.cd4},null,8,["modelValue","error-message"])]),_:1})]),_:1}),n(g(Ie),{style:{"margin-top":"15px"}},{default:r(()=>[n(g(oe),null,{default:r(()=>[n(Vt,{label:"CD4 Count Location",modelValue:a.cd4Location,"onUpdate:modelValue":l[11]||(l[11]=m=>a.cd4Location=m),required:a.cd4Available==="Yes","error-message":c.value.cd4Location,show_error:!1,selected_district_ids:[],selected_location:a.cd4Location,onOnChange:l[12]||(l[12]=m=>{A("cd4Location",m)})},null,8,["modelValue","required","error-message","selected_location"])]),_:1})]),_:1})]),_:1})])):x("",!0)]),_("div",ga,[n(g(Ve),null,{default:r(()=>[n(g(Ie),null,{default:r(()=>[n(g(oe),null,{default:r(()=>[n(g(ke),{readonly:"",placeholder:"N/A",label:"REASON FOR ART:",modelValue:a.reasonForArt,"onUpdate:modelValue":l[13]||(l[13]=m=>a.reasonForArt=m)},null,8,["modelValue"])]),_:1}),n(g(oe),null,{default:r(()=>[n(g(ke),{readonly:"",placeholder:"N/A",label:"WHO STAGE:",modelValue:a.whoStage,"onUpdate:modelValue":l[14]||(l[14]=m=>a.whoStage=m)},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})])]),_:1})]),_:1}))}}),fa=ie(va,[["__scopeId","data-v-1fe6c93a"]]),ha={style:{display:"flex","align-items":"center"}},_a={style:{width:"90vw",margin:"0 auto","margin-top":"10px"}},ya=K({__name:"AHDWorkflow",props:{closeModalOnFinish:{type:Boolean,default:!1}},setup(e,{expose:t}){const{onTabBeforeChange:i,currentTabIndex:o}=In();ct();const c=pt(),d=w(!0),f=w(!1),a=w(!1),I=w(null),v=w(null),D=w(null),E=se(()=>({text:a.value?"Saving...":"Finish",icon:a.value?"hourglass-outline":"checkmark",hideText:!1,hideIcon:!1,disabled:f.value||a.value})),T=_e(),V=Ft(),O=Ut(),{patient:h}=me(T),{sessionDate:M}=me(O);J(E,(L,s)=>{console.log("Done button options changed:",{from:s,to:L,currentStep:o.value,tabsLength:b.value.length}),L.disabled!==(s==null?void 0:s.disabled)&&console.log("Done button ".concat(L.disabled?"disabled":"enabled")),L.text!==(s==null?void 0:s.text)&&console.log('Done button text changed from "'.concat(s==null?void 0:s.text,'" to "').concat(L.text,'"'))},{deep:!0}),J(a,(L,s)=>{L!==s&&(console.log("Saving state changed: ".concat(s," -> ").concat(L)),console.log(L?"Starting save process...":"Save process completed"))});const G=L=>{console.log("Done button change received from wizard:",L),L.newOptions.disabled&&console.log("Done button has been disabled"),L.isLastStep&&console.log("User is on the last step, done button should be visible")},p=()=>{let L=!1;return u(),a.value&&(L=!0),f.value=L,!L},C=()=>[{title:"Presenting Complaints",icon:""},{title:"Past Medical History",icon:""},{title:"WHO",icon:""},{title:"Investigation",icon:""}],b=w(C());w(null),w(null);const u=()=>{var l;if(!b.value||b.value.length===0)return console.log("Tabs not yet initialized"),null;const L=o.value>=0&&o.value<b.value.length?o.value:0;switch((l=b.value[L])==null?void 0:l.title){case"Presenting Complaints":return"Presenting Complaints";case"Past Medical History":return"Past Medical History";case"WHO":return"WHO";case"Investigation":return"Investigation";default:if(V.NCDActivities.length>0)switch(V.NCDActivities[0]){case"Presenting Complaints":return"Presenting Complaints";case"Past Medical History":return"Past Medical History";case"WHO":return"WHO";case"Investigation":return"Investigation"}return null}},S=()=>{d.value=!1,setTimeout(()=>{o.value=0,d.value=!0},0)},A=async()=>{Gt(M.value,"sessionDate","value")||U.sessionDate(),Wt("vitals");for(let L=0;L<b.value.length;L++)b.value[L];p()},N=async(L,s)=>{var l;(l=b.value[s])==null||l.title,L%1===0&&(o.value=L)},j=async()=>{var L,s,l;a.value=!0;try{(L=I.value)==null||L.onSubmit(),(s=v.value)==null||s.onSubmit(),(l=D.value)==null||l.onSubmit(),await zt(h.value),Ke.dismiss()}catch(m){console.error("Error saving data:",m),he("Error occurred while saving data. Please try again.")}finally{a.value=!1}};return pe(async()=>{b.value=C(),await A(),(o.value===void 0||o.value<0)&&(o.value=0,console.log("Setting initial tab index to 0")),f.value=!1,a.value=!1,p()}),J(o,async()=>{await p()}),J(M,async()=>{await A()},{deep:!0}),J(c,async L=>{S(),b.value=C()},{deep:!0}),J(h,async(L,s)=>{await A(),L.ID!=s.ID&&S()},{deep:!0}),t({saveData:j,markWizard:A,refreshWizard:S,validateDoneButtonState:p}),(L,s)=>{const l=H("ion-icon"),m=H("ion-title"),B=H("ion-toolbar"),Y=H("ion-header");return y(),P(ce,null,[n(Y,null,{default:r(()=>[n(B,{class:"modal-title"},{default:r(()=>[n(m,null,{default:r(()=>[_("div",ha,[n(l,{icon:g(de).demographics,class:"sub-menu-icon",style:{"font-size":"1.4rem"}},null,8,["icon"]),s[2]||(s[2]=_("b",{style:{"margin-left":"6px"}},"Advance HIV Disease",-1))])]),_:1}),n(l,{slot:"end",onClick:s[0]||(s[0]=ee=>g(Ke).dismiss()),style:{"font-size":"30px","padding-right":"10px"},icon:g(mt)},null,8,["icon"])]),_:1})]),_:1}),n(g(ze),{class:"ion-padding"},{default:r(()=>[_("div",_a,[d.value?(y(),Q(Cn,{key:0,ref:"wizard",headingTitle:"AHD Screening","vertical-tabs":"","navigable-tabs":"","scrollable-tabs":"",startIndex:0,doneButton:E.value,"custom-tabs":b.value,beforeChange:g(i),onChange:N,"onComplete:wizard":s[1]||(s[1]=ee=>j()),onDoneButtonChanged:G},{default:r(()=>[Ee(_("div",null,[n(ia,{ref_key:"AHDPresentingComplaintsRef",ref:I},null,512)],512),[[Le,u()=="Presenting Complaints"]]),Ee(_("div",null,[n(Un,{ref_key:"AHDPastMedicalHistoryRef",ref:v},null,512)],512),[[Le,u()=="Past Medical History"]]),Ee(_("div",null,[n(fa,{ref_key:"AHDStagingRef",ref:D},null,512)],512),[[Le,u()=="WHO"]]),Ee(_("div",null,[n(ea,{ref:"investigationRef"},null,512)],512),[[Le,u()=="Investigation"]])]),_:1},8,["doneButton","custom-tabs","beforeChange"])):x("",!0)])]),_:1})],64)}}}),Da=async()=>{const{hasWaitingList:e}=An(),t=await Z.getObsByEncounterIdAndDate(le.PRESENTING_COMPLAINTS),i=await Z.getObsByEncounterId(le.HIV_CLINIC_REGISTRATION),o=await Z.getObsByEncounterId(le.PAST_MEDICAL_HISTORY),c=await Z.getObsByEncounterId(le.HIV_STATUS_AT_ENROLLMENT),d=await Z.getObsByEncounterId(le.PATIENT_OUTCOME),f=await F.getConceptID("Slow onset severe headache"),a=await F.getConceptID("Confusion"),I=await F.getConceptID("Fever"),v=await F.getConceptID("Neck stiffness"),D=await F.getConceptID("Persistent fever/drenching night sweats"),E=await F.getConceptID("Weight loss or failure to thrive"),T=await F.getConceptID("Anaemia<8gdl"),V=await F.getConceptID("Enlarged nodes"),O=await F.getConceptID("Meningits signs"),h=await F.getConceptID("Cough"),M=await F.getConceptID("Yes"),G=await F.getConceptID("Reactive"),p=await F.getConceptID("New Positive"),C=await F.getConceptID("HIV status"),b=await F.getConceptID("Presenting complaint"),u=Z.isValueCodedAvailable(t,[f,a,I,v,D,E,T,V,O,h],b),S=Z.isValueCodedAvailable(o,[M],C),A=Z.isValueCodedAvailable(c,[G],C),N=Z.isValueCodedAvailable(d,[M],p);return console.log("ðŸš€ ~ isQualifiedAHD ~ hasCoughComplaint:",u),console.log("ðŸš€ ~ isQualifiedAHD ~ isClinician():",Ze()),console.log('ðŸš€ ~ isQualifiedAHD ~ hasWaitingList("Waiting for Consultation")) :',e("Waiting for Consultation")),console.log("ðŸš€ ~ isQualifiedAHD ~ hasHIVHistory:",S),(Ze()||e("Waiting for Consultation"))&&u&&(S||N||A||i.length>0)},ba={class:"background"},Ia={key:0},Ca={key:1},Sa={key:2},Aa={class:"",slot:"content",style:{"margin-bottom":"125px","margin-top":"2px"}},wa={key:3},Oa={class:"ion-padding",slot:"content"},Ea={key:4},La=K({__name:"Investigations",setup(e,{expose:t}){const i=w("Lab Investigations"),o=w(!1);w(!0);const c=w(!1),d=w(!1),f=w(!0),a=w(""),I=w("");w("");const v=w("");w(""),w([]),w(!1);const D=w(!1);w("");const E=w("");w(!1),w(!1);const T=Fe(),V=_e(),{investigations:O}=me(T),{patient:h}=me(V),M=pt(),G=ct(),p=se(()=>O.value[0].data.rowData[0].colData),C=k=>{i.value=k},b=async()=>{let k;W.getPouchDbStatus()&&W.getLanConnectionStatus()?k=await Pe("test_types"):k=await re.getTestTypes(),R(O.value,"test","multiSelectData",k)},u=()=>{D.value=!D.value},S=async()=>{var $;if(!(($=h.value)!=null&&$.labOrders))return;v.value=[...h.value.labOrders.saved,...h.value.labOrders.unsaved];const k=await v.value.filter(X=>U.toStandardHisFormat(U.sessionDate())===U.toStandardHisFormat(X.order_date));k.length>0?O.value[0].selectedData=k:O.value[0].selectedData=""},A=async()=>{await S(),T.setInvestigations(O.value)},N=()=>{I.value="",a.value="",o.value=!1,f.value=!1,c.value=!0},j=async()=>He(O.value),L=async()=>await l(p.value[0].value.name,await O.value[0].selectedData)?(R(O.value,"test","alertsErrorMassage","Lab order already selected"),!1):(R(O.value,"test","alertsErrorMassage",""),!0),s=async()=>{He(O.value)&&await L()&&(await m(),O.value[0].data.rowData[0].colData[0].value="",O.value[0].data.rowData[0].colData[1].value="",c.value=!1,d.value=!0,f.value=!0),S()},l=(k,$)=>{for(let X of $)for(let De of X.tests)if(De.name===k)return!0;return!1},m=async()=>{await new ft().postActivities(h.value.patientID,[{concept_id:p.value[0].value.concept_id,name:p.value[0].value.name,specimen:p.value[1].value.name,reason:"Routine",specimenConcept:await F.getConceptID(p.value[1].value.name,!0)}]),R(O.value,"specimen","disabled",!0),v.value=[...h.value.labOrders.saved,...h.value.labOrders.unsaved]},B=async k=>{if(k.inputHeader=="Test"&&L(),R(O.value,"specimen","alertsErrorMassage",""),k.inputHeader=="Test"&&k.value){let $;W.getPouchDbStatus()&&W.getLanConnectionStatus()?$=await Pe("specimens"):$=await re.getSpecimens("",1e3),E.value=await F.getConceptSet(k.value.name,"",{names:$.map(X=>X.name)}),E.value.length==1?(R(O.value,"specimen","value",E.value[0]),R(O.value,"specimen","disabled",!0)):(R(O.value,"specimen","value",""),R(O.value,"specimen","disabled",!1)),R(O.value,"specimen","multiSelectData",E.value)}},Y=async k=>await v.value.filter($=>$.name.toLowerCase().includes(k.toLowerCase())),ee=async k=>{var $;return($=E.value[0])!=null&&$.name&&k?await E.value.filter(X=>X==null?void 0:X.name.toLowerCase().includes(k.toLowerCase())):[]},te=k=>{a.value=k.name,p.value[1].inputHeader=="Test"?O.value[0].data.rowData[0].colData[0].value=k.name:O.value[0].data.rowData[0].colData[1].value=k.name,A()},ue=()=>{(p.value[1].value||p.value[0].value)&&(f.value=!1,c.value=!0,o.value=!1),O.value[0].selectedData.length>0?(d.value=!0,o.value=!1):c.value||(o.value=!0)},ye=async()=>{await Da()&&G.currentRoute.value.name=="OPDConsultationPlan"&&await qt("Do you want to do AHD screening?")&&await at(ya,{class:"fullScreenModal"})};return J(O,()=>{ue()},{deep:!0}),J(h,async()=>{var k;(k=h.value)!=null&&k.labOrders&&(v.value=[...h.value.labOrders.saved,...h.value.labOrders.unsaved])},{deep:!0}),J(M,async()=>{await b()},{deep:!0}),pe(async()=>{await b(),A(),ue(),S()}),t({openAHDModal:ye,setSegmentContent:C,getTests:b,toggleLabOrderStatus:u,updateInvestigationWizard:S,updateInvestigationsStores:A,displayInputFields:N,validateRowData:j,checkTest:L,addNewRow:s,isNameInData:l,saveTest:m,handleInputData:B,filterTest:Y,filterSpecimen:ee,setTest:te,setDashedBox:ue}),(k,$)=>{const X=H("ion-label"),De=H("ion-segment-button"),_t=H("ion-segment"),yt=H("VisitsHistory");return y(),P("div",ba,[n(_t,{value:i.value,style:{"margin-top":"5px"}},{default:r(()=>[n(De,{value:"Lab Investigations",onClick:$[0]||($[0]=qe=>C("Lab Investigations"))},{default:r(()=>[n(X,null,{default:r(()=>[...$[3]||($[3]=[q("Lab Investigations",-1)])]),_:1})]),_:1}),n(De,{value:"Radiology Investigation",onClick:$[1]||($[1]=qe=>C("Radiology Investigation"))},{default:r(()=>[n(X,null,{default:r(()=>[...$[4]||($[4]=[q("Radiology Investigation",-1)])]),_:1})]),_:1}),n(De,{value:"Other Investigation",onClick:$[2]||($[2]=qe=>C("Other Investigation"))},{default:r(()=>[n(X,null,{default:r(()=>[...$[5]||($[5]=[q("Other Investigation",-1)])]),_:1})]),_:1})]),_:1},8,["value"]),i.value=="Radiology Investigation"?(y(),P("div",Ia,[n(yt)])):x("",!0),i.value=="Other Investigation"?(y(),P("div",Ca)):x("",!0),i.value=="Lab Investigations"?(y(),P("div",Sa,[_("div",Aa,[_("span",null,[n(gt,{propOrders:v.value},null,8,["propOrders"])])])])):x("",!0),i.value=="Radiology Investigation"?(y(),P("div",wa,[_("div",Oa,[n(ht)])])):x("",!0),i.value=="Other Investigation"?(y(),P("div",Ea)):x("",!0)])}}}),vs=ie(La,[["__scopeId","data-v-e8e6ecbb"]]),Ta=K({created(){},components:{IonItem:ge,IonCol:oe,IonLabel:Ae,IonIcon:Ue},data(){return{iconsContent:de,localMedicalDrugsList:[...this.$props._selectedMedicalDrugsList]}},props:{_selectedMedicalDrugsList:{type:Array,default:[]},show_actions_buttons:{type:Boolean,default:!0},highLightBackground:{type:String,default:"item-native"}},watch:{},methods:{highlightItem(e){const t=document.getElementById(e+"_lbl");t&&(t.style.color="#006401"),this.highlightActionBtns(e)},undoHighlightItem(e){const t=document.getElementById(e+"_lbl");t&&(t.style.color="#636363"),this.undohighlightActionBtns(e)},highlightActionBtns(e){const t=document.getElementsByClassName(e+"_spanlbl");for(let i=0;i<t.length;i++)t[i].style.display="inline-block"},undohighlightActionBtns(e){const t=document.getElementsByClassName(e+"_spanlbl");for(let i=0;i<t.length;i++)t[i].style.display="none"},asignLblID(e){return e+"_lbl"},asignSpanLblID(e){return e+"_spanlbl"},async removeItemAtIndex(e,t){await Yt("Do you want to delete it?",t)&&this.$emit("remove-item",e)},editItemAtIndex(e){this.$emit("edit-item",e)},highLightBnd(e){if(e){if(e.highlightbackground!==void 0&&e.highlightbackground==!0)return this.$props.highLightBackground}else return!1}}}),Pa=["onMousemove","onMouseout"],ka={class:"route-label"};function Ha(e,t,i,o,c,d){const f=H("ion-label"),a=H("ion-col"),I=H("ion-row"),v=H("ion-icon");return y(!0),P(ce,null,Se(e.localMedicalDrugsList,(D,E)=>(y(),P("div",{id:"df",class:"medication-item",key:E,onMousemove:T=>e.highlightItem(E),onMouseout:T=>e.undoHighlightItem(E)},[n(I,{class:"medication-header"},{default:r(()=>[n(a,{class:ve(["ion-text-wrap",e.highLightBnd(D)])},{default:r(()=>[n(f,{id:e.asignLblID(E),class:"medication-name"},{default:r(()=>[q(z(D.drugName),1)]),_:2},1032,["id"])]),_:2},1032,["class"])]),_:2},1024),n(I,{class:"medication-details"},{default:r(()=>[n(a,{size:"10",class:ve(["ion-text-wrap details-col",e.highLightBnd(D)])},{default:r(()=>[n(f,{class:"details-text"},{default:r(()=>[q(z(D.dose)+" / "+z(D.frequency)+" / daily / "+z(D.duration)+" / until "+z(D.prescription)+" ",1),_("span",ka,z(D.route_name),1)]),_:2},1024)]),_:2},1032,["class"]),e.show_actions_buttons?(y(),Q(a,{key:0,class:ve([e.highLightBnd(D),"actions-col"]),size:"2"},{default:r(()=>[n(f,{class:ve(["action-button",e.asignSpanLblID(E)]),onClick:T=>e.editItemAtIndex(E)},{default:r(()=>[n(v,{icon:e.iconsContent.edit},null,8,["icon"])]),_:1},8,["class","onClick"]),n(f,{class:ve(["action-button",e.asignSpanLblID(E)]),onClick:T=>e.removeItemAtIndex(E,T)},{default:r(()=>[n(v,{icon:e.iconsContent.delete},null,8,["icon"])]),_:1},8,["class","onClick"])]),_:2},1032,["class"])):x("",!0)]),_:2},1024)],40,Pa))),128)}const fs=ie(Ta,[["render",Ha],["__scopeId","data-v-01c693a3"]]),Na={key:0,class:"custom-allergy-container"},Ba={class:"button-group"},Ra=K({watch:{},name:"AllergiesComponent"}),Ma=K({...Ra,setup(e){const t=jt(),i=_e(),o=se(()=>t.selectedMedicalAllergiesList),c=se(()=>i.patient),d=se(()=>t.medicalAllergiesList),f=w(h(8,"item-")),a=w(""),I=w(!1),v=[{multi_Selection:!0,show_list_label:!0,unqueId:f.value,name_of_list:"Add/Remove allergies",placeHolder:"Search for an allergy",items:[],listUpdatedFN:T,listFilteredFN:()=>{},searchTextFN:V,use_internal_filter:!0,show_error:w(!1),error_message:"please select a User",disabled:w(!1)}],D=w(!1);pe(async()=>{E()});const E=()=>{t.current_patient.ID!=c.value.ID&&(t.clearSelectedMedicalAllergiesList(),t.setCurrentPatient(c.value))};function T(p){p.forEach(C=>{C.selected==!0&&C.name==="Other"&&(I.value=C.name==="Other"),C.selected==!1&&C.name==="Other"&&G()}),t.setSelectedMedicalAllergiesList(p),O()}async function V(p){const C=p,b=await F.getConceptSet("OPD Medication",C);if(!b)return;b.map(N=>({label:N.name,value:N.name,other:N}));const u=Qt(C),A=Kt(u,b).sort((N,j)=>N.name.localeCompare(j.name));t.setMedicalAllergiesList(A),O()}function O(){const p=d.value;o.value.forEach(b=>{let u=!1;p.forEach((S,A)=>{S.concept_id==b.concept_id&&b.selected===!0&&(p[A]=b,u=!0)}),!u&&b.selected===!0&&p.push(b)});const C=p.filter((b,u,S)=>u===S.findIndex(A=>(A==null?void 0:A.concept_id)===(b==null?void 0:b.concept_id)));t.setMedicalAllergiesList(C)}function h(p=8,C=""){const b="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";let u=C;for(let S=0;S<p;S++)u+=b.charAt(Math.floor(Math.random()*b.length));return u+="-".concat(Date.now()),u}async function M(p){try{const C=p.trim();if(C){const b={name:C,selected:!0,concept_id:h(8,"12"),concept_name_id:h(8,"34")};t.setMedicalAllergiesList([...d.value,b]),t.setSelectedMedicalAllergiesList(b),I.value=!1,D.value=!0,a.value="";const u=t.findSelectedAllergyByName("Other");t.unselectOther(u)}}catch(C){console.error(C)}}const G=()=>{I.value=!1,a.value="",D.value=!1;const p=t.findSelectedAllergyByName("Other");p&&t.unselectOther(p)};return(p,C)=>(y(),Q(g(ut),null,{default:r(()=>[n(g(cn),null,{default:r(()=>[n(g(Ae),{class:"header-container"},{default:r(()=>[n(g(Ue),{icon:g(pn),class:"allergy-icon"},null,8,["icon"]),C[3]||(C[3]=_("span",{style:{"font-size":"16px","font-weight":"600"}}," Allergies (Medication, Healthcare items, Environment and Food) ",-1))]),_:1})]),_:1}),n(g(lt),null,{default:r(()=>[n(Xt,{multiSelection:v[0].multi_Selection,show_label:v[0].show_list_label,uniqueId:v[0].unqueId,name_of_list:v[0].name_of_list,choose_place_holder:v[0].placeHolder,"items_-list":d.value,use_internal_filter:v[0].use_internal_filter,disabled:v[0].disabled.value,onItemListUpDated:v[0].listUpdatedFN,onItemListFiltered:v[0].listFilteredFN,onItemSearchText:v[0].searchTextFN},null,8,["multiSelection","show_label","uniqueId","name_of_list","choose_place_holder","items_-list","use_internal_filter","disabled","onItemListUpDated","onItemListFiltered","onItemSearchText"]),I.value?(y(),P("div",Na,[n(g(ke),{modelValue:a.value,"onUpdate:modelValue":C[0]||(C[0]=b=>a.value=b),placeholder:"Please specify the allergy",fill:"outline",class:"custom-input"},null,8,["modelValue"]),_("div",Ba,[n(g(Xe),{onClick:C[1]||(C[1]=b=>M(a.value)),class:"addCustomAllergyBtn"},{default:r(()=>[...C[4]||(C[4]=[q(" Add Allergy ",-1)])]),_:1}),n(g(Xe),{onClick:C[2]||(C[2]=b=>G()),fill:"clear",class:"cancelBtn"},{default:r(()=>[n(g(Ue),{icon:g(mt),slot:"icon-only"},null,8,["icon"])]),_:1})])])):x("",!0)]),_:1})]),_:1}))}}),hs=ie(Ma,[["__scopeId","data-v-3314535a"]]),$a={class:"checklist-container"},Va=K({watch:{},name:"xxxComponent"}),xa=K({...Va,setup(e){const t=_e(),i=se(()=>t.patient),o=Sn(),c=o.items;pe(async()=>{d()});const d=()=>{o.current_patient.ID!=i.value.ID&&(o.clearSelectednonPharmaTherapyStore(),o.setCurrentPatient(i.value))};return J(()=>i.value,async f=>{}),(f,a)=>(y(),P("div",$a,[(y(!0),P(ce,null,Se(g(c),I=>(y(),Q(g(ge),{key:I.id,class:"no-border"},{default:r(()=>[n(g(dt),{id:I.id,modelValue:I.checked,"onUpdate:modelValue":v=>I.checked=v,slot:"start"},null,8,["id","modelValue","onUpdate:modelValue"]),n(g(Ae),{style:{"font-size":"16px","font-weight":"600"}},{default:r(()=>[q(z(I.label),1)]),_:2},1024)]),_:2},1024))),128))]))}}),_s=ie(xa,[["__scopeId","data-v-371e920f"]]),Fa=K({components:{IonContent:ze,IonHeader:rt,IonItem:ge,IonList:We,IonMenu:ot,IonTitle:it,IonToolbar:st,BasicInputField:tt,IonDatetime:gn,IonBadge:mn,DateInputField:On,DynamicButton:Te},props:{showPeripheral:{type:Boolean,default:!0}},setup(e){const t=$e(),i=w(0),o=se(()=>t.getDisabledDates()),c=se(()=>t.getAssignedAppointments()),d=w(),f=se(()=>e.showPeripheral);return{disabledDates:o,datesCounts:c,appointment_count:i,calendarOutline:vn,inputPRDate:d,show_peripheral:f}},data(){return ne(),je(),{iconsContent:de,date:new Date(W.getSessionDate()),tomorrow:new Date(W.getSessionDate()).getDate()+1,appointment:"",drugRunoutDate:"",nextAppointmentDate:"",minDate:new Date(W.getSessionDate())}},computed:{...fe(ne,["nextAppointment","appointmentCountsCache","currentSelectedNextAppointmentDate"]),...fe($e,["maximumNumberOfDaysForEachDay","assignedAppointmentsDates"]),...fe(_e,["patient"]),...fe(je,["activeProgram"]),calendarDate(){const e=ne();return e.currentSelectedNextAppointmentDate?U.toStandardHisDisplayFormat(e.currentSelectedNextAppointmentDate):""},runOutDate(){var t;const e=ne();return((t=this.activeProgram)==null?void 0:t.program_id)===14?Je():e.getAppointmentMedicationRunOutDate()}},watch:{calendarDate:{handler(){this.updateNextAppointment()},deep:!0},"$service.sessionDate":{handler(){this.updateMinDate()},immediate:!0},"patient.ID":{async handler(e,t){e!==t&&(this.cleanCurrentNextAppointmentDate(),this.checkIfSamePatientInContext(),this.clearNextAppointment())}}},async mounted(){this.checkIfSamePatientInContext(),await this.getAppointmentMents(this.runOutDate.date),await tn().loadGlobalProperty(),this.validateAppointmentCountsCache(),await this.preloadAppointmentCounts(),nn();const e=W.getUserID(),t=new nt;this.appointment=new Oe(t.getID(),e),this.nextAppointmentDate=this.appointment.date,this.supposedRunOutDate(),window.addEventListener("storage",this.handleStorageChange),Je()},beforeUnmount(){window.removeEventListener("storage",this.handleStorageChange)},methods:{handleStorageChange(e){e.key==="sessionDate"&&this.updateMinDate()},updateMinDate(){this.date=new Date(W.getSessionDate()),this.minDate=new Date(W.getSessionDate())},updateNextAppointment(){ne().setNextAppointment(this.calendarDate)},async handleDateUpdate(e){e&&($e().setAssignedAppointmentsDates(e,!0),this.calendarDate=U.toStandardHisDisplayFormat(e),await this.save(),await this.getAppointmentMents(e),await this.updateAppointmentCache(e),ne().setCurrentSelectedNextAppointmentDate(e,this.patient.ID))},async getAppointmentMents(e){if(en().apiStatus)try{const i=await Oe.getDailyAppointments(U.toStandardHisFormat(e),U.toStandardHisFormat(e));this.appointment_count=i.length}catch(i){}},getCounter(e){const t=U.toStandardHisFormat(e);return this.appointmentCountsCache[t]||""},async save(){if(this.assignedAppointmentsDates.length>0)try{const t=await new wn().createOfflineAppointment()}catch(e){}},async openCornfirmModal(e){this.calendarDate=U.toStandardHisDisplayFormat(e),await this.getAppointmentMents(e),at(Zt,{class:"otherVitalsModal"},!0,{message:"Are you sure you want to add this Appointment?"},{cancel:c=>{},confirm:async c=>{c.detail==!0&&await this.handleDateUpdate(e)}})},async handleInput(e){this.inputPRDate=U.toStandardHisDisplayFormat(e),await this.openCornfirmModal(e)},async supposedRunOutDate(){await Jt.getLastDrugsReceived(this.patient.patientID)},async preloadAppointmentCounts(){try{const e=new Date(W.getSessionDate());e.setDate(1);const t=new Date(W.getSessionDate());t.setMonth(t.getMonth()+2),t.setDate(0);try{const i=await Oe.getDailyAppointments(U.toStandardHisFormat(e),U.toStandardHisFormat(t));if(!i)return;const o=this.filterUniqueAppointments(i),c={};o.forEach(d=>{const f=new Date(d.appointment_date),a=U.toStandardHisFormat(f);c[a]||(c[a]=0),c[a]++}),Object.keys(c).forEach(d=>{this.appointmentCountsCache[d]=c[d]})}catch(i){console.error("Error fetching appointments for date range:",i)}}catch(e){console.error("Error in preload process:",e)}},filterUniqueAppointments(e){const t=new Map;return e.forEach(i=>{const o="".concat(i.given_name,"_").concat(i.family_name,"_").concat(i.birthdate,"_").concat(i.appointment_date);t.has(o)||t.set(o,i)}),Array.from(t.values())},async updateAppointmentCache(e){try{const t=U.toStandardHisFormat(e),i=await Oe.getDailyAppointments(U.toStandardHisFormat(e),U.toStandardHisFormat(e));if(!i)return;this.appointmentCountsCache[t]=i.length}catch(t){console.error("Error updating appointment cache:",t)}},validateAppointmentCountsCache(){ne().checkCurrentLocationIfInContext()},isRunOutDate(e){return!this.runOutDate||!this.runOutDate.date?!1:U.toStandardHisFormat(e)===U.toStandardHisFormat(this.runOutDate.date)},cleanCurrentNextAppointmentDate(){ne().cleanCurrentSelectedNextAppointmentDate()},checkIfSamePatientInContext(){const e=ne();e.current_patient.ID!=this.patient.ID&&(this.cleanCurrentNextAppointmentDate(),e.setCurrentPatient(this.patient))},clearNextAppointment(){ne().clearAppointmentMedicationRunOutDate()}}}),Ua={class:"card_content"},Ga={class:"count-badge"},Wa={class:"dates_title"},za={class:"sub_data"},qa={class:"dates_title"},Ya={class:"sub_data"},ja={class:"dates_title"},Qa={class:"sub_data"},Ka={class:"dates_title"},Xa={class:"sub_data"};function Ja(e,t,i,o,c,d){const f=H("VueDatePicker"),a=H("ion-col"),I=H("DynamicButton"),v=H("ion-item"),D=H("ion-row"),E=H("DateInputField");return y(),P("div",Ua,[n(D,null,{default:r(()=>[n(a,{"size-sm":"12","size-md":"12","size-lg":"12","size-xl":"8"},{default:r(()=>[n(f,{class:"calender",onDateUpdate:e.openCornfirmModal,inline:"","auto-apply":"","enable-time-picker":!1,"disabled-dates":e.disabledDates,"min-date":e.minDate,modelValue:e.runOutDate.date,"onUpdate:modelValue":t[0]||(t[0]=T=>e.runOutDate.date=T)},{day:r(({day:T,date:V})=>[(y(),P("p",{key:0,class:ve({"run-out-date":e.isRunOutDate(V)}),style:{"font-weight":"600","font-size":"20px"}},[_("span",null,[q(z(T),1),_("sup",Ga,z(e.getCounter(V)),1)])],2))]),_:1},8,["onDateUpdate","disabled-dates","min-date","modelValue"])]),_:1}),e.show_peripheral?(y(),Q(a,{key:0},{default:r(()=>[n(v,null,{default:r(()=>[_("div",Wa,[t[3]||(t[3]=_("div",null,[q("Suggested Next Appointment Date "),_("span",{style:{"font-size":"16px"}},"(Medication run out date)")],-1)),_("div",za,[q(z(e.runOutDate.formattedDate||"No run out date available")+" ",1),e.runOutDate.formattedDate?(y(),Q(I,{key:0,onClick:t[1]||(t[1]=T=>e.handleDateUpdate(e.runOutDate.date)),name:"Set Next Appt.",fill:"solid",iconSlot:"icon-only",style:{float:"right"}})):x("",!0)])])]),_:1}),n(v,null,{default:r(()=>[_("div",qa,[t[4]||(t[4]=_("div",null,"User set appointment date",-1)),_("div",Ya,z(e.calendarDate),1)])]),_:1}),n(v,null,{default:r(()=>[_("div",ja,[t[5]||(t[5]=_("div",null,"Appointments",-1)),_("div",Qa,z(e.appointment_count),1)])]),_:1}),n(v,null,{default:r(()=>[_("div",Ka,[t[6]||(t[6]=_("div",null,"Appointment limit (per/day)",-1)),_("div",Xa,z(e.appointment_count)+"/"+z(e.maximumNumberOfDaysForEachDay),1)])]),_:1})]),_:1})):x("",!0)]),_:1}),e.show_peripheral?(y(),Q(D,{key:0},{default:r(()=>[n(a,{size:"4"},{default:r(()=>[n(E,{inputHeader:"Preferred Next Appointment Date",bold:"600",fontSize:"17px",placeholderFontSize:"17px",placeholderFontWeight:"600",unit:"",icon:e.calendarOutline,placeholder:"press to select date",iconRight:"",inputWidth:"100%",inputValue:e.inputPRDate,eventType:"",minDate:e.minDate,maxDate:"",disabled:!1,"onUpdate:rawDateValue":t[2]||(t[2]=T=>e.handleInput(T))},null,8,["icon","inputValue","minDate"])]),_:1})]),_:1})):x("",!0)])}const ys=ie(Fa,[["render",Ja],["__scopeId","data-v-4e58e0bc"]]);export{hs as A,fs as D,vs as I,ft as L,ys as N,ya as _,_s as a,Gn as b,Da as i};
