const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./LabOrdersList-C8tkIAkg.js","./vendor-CxrCa3Dl.js","./lodash-NJiRuGo9.js","../vendor.CmTprahb.css","../index-Ddb_v0ig.js","./apexcharts-aekSR0UU.js","../index.mFg-HwCD.css","./BasicForm-DMukt-pX.js","./DateInputField-DBYWiQrp.js","../DateInputField.BYUMEomf.css","../BasicForm.CS8soES6.css","./useUserActivities-USqPmnXA.js","../LabOrdersList.Ca2oTWLk.css","./DiagnosesHistory-32XBUuZN.js","../DiagnosesHistory.Bnizy8nD.css","./AllergiesHistory-24bgKhNL.js","../AllergiesHistory.CMAGsb5E.css","./MedicationsHistory-BNmhG3Ar.js","../MedicationsHistory.RvT17NiF.css","./VisitsHistory-DqZN6J62.js","../VisitsHistory.yoIlzwmY.css","./VitalsMeasurementsSummary-BcWa8EWl.js","../VitalsMeasurementsSummary.D20sajrN.css","./PatientProfile-CuSg5-Tw.js","./DemographicBar-g6B-7GcC.js","../DemographicBar.DtnnoAYr.css","./SaveProgressModal-rzYGUsQS.js","../SaveProgressModal.DLXC0SP6.css","./Stepper-Crz0Ctws.js","./NextAppointment-BG8ZD5As.js","./group_validation-TCmS0FdD.js","./RadiologyStore-DDsmXLhz.js","./formatServerData-k-Qs9FQv.js","./DashBox-UM33MDge.js","./previousComplaints-BqjoE6Gd.js","../previousComplaints.CaFy6Jya.css","./patient_complaints_service-BeDo95MW.js","./nonPharmaTherapyStore-tflvJjHA.js","./drug_prescription_service-CygwNQ0n.js","./patient_diagnosis_service-DZGLzK3i.js","./user_role_management-CeOcid74.js","./ncd_appointment_service-B2TnFuwV.js","../NextAppointment.DrwdY6dI.css","./OPDOutcome-BGjByPpd.js","./LevelOfConsciousness.vue_vue_type_script_setup_true_lang-DhCX9R2J.js","./Outcome-DFqxBKrj.js","./wardsStore-BdlevRWU.js","../Outcome.BrkOxEBI.css","../OPDOutcome.gbtXWst0.css","./VitalsMixin.vue_vue_type_script_lang-CgtMjt-q.js","./TreatmentPlan-Q-ThMchC.js","./ComplicationsStore-Bq3lXSS5.js","../TreatmentPlan.D-2-rvxn.css","./OPDDiagnosis-BetQcNdB.js","../OPDDiagnosis.BgrRNepX.css","./FeatusModal-BnyMl2Ch.js","../FeatusModal.Cfk5MYmH.css","./BasicCard-CMOv8-zU.js","../BasicCard.CLPwwedX.css","./PastObstreticHistoryStore-BHpA1oOZ.js","./UpcomingFeature-BHYV40i4.js","../UpcomingFeature.DBJv9ELz.css","../Stepper.B2n3cIUE.css","./WeightHeightChart-CHhV5bih.js","./chartjs-DaYQfWmw.js","../WeightHeightChart.-wa6rCCm.css","./weightAndHeight-Cky5I_Cj.js","./customDatePicker-CekdDm-Z.js","../customDatePicker.twJBaIU5.css","../weightAndHeight.CJuqOhq_.css","./vaccines_service-DPQZBfza.js","./sms_service-CGofI5YR.js","./EIRreportsStore-BVaUBqq8.js","./Export-CLByO2AB.js","../vaccines_service.DKZw05E0.css","./barcode-qrcode-reader-DAMeiWeV.js","./stock_service-IKG1BCV5.js","./Registration-DqUwAQAL.js","./useLocation-C_EqK_nd.js","./useNeonatalEnrollmentStore-4hgfwiP6.js","./enrollment-DU-PLRUa.js","../Registration.JP_uC9zR.css","./AdministerOtherVaccinesStore-wD-Llj3j.js","./usePatientProfile-DaFhUskI.js","../usePatientProfile.BRwk2gaY.css","../PatientProfile.xh9sFISw.css","./HTSPatientProfile-B_oEsohn.js","../HTSPatientProfile.D35WQABU.css","./NeonatalPatientProfile-DhaZ4--A.js","./neonatal_service-eo8eYTgp.js","../NeonatalPatientProfile.BD3bs8tI.css","./AETCPatientProfile-CDZ-ijoJ.js","./confirm_pregnancy_service-Cy9VVWqK.js","./CPR-DJZcWDzv.js","./useRespiratoryRateOxygenForm-BTf8S9Tj.js","../CPR.C4Sa7ms4.css","./tasks-CZnA01WZ.js","../AETCPatientProfile.C-9zQZrr.css","./BloodPressure-BEgiMODv.js","../BloodPressure.B79nW_rj.css","./AncEnrollmentModal-nQXFGZ_-.js","../AncEnrollmentModal.CLq9tGu0.css","./LabourEnrollmentModal-ButO2izE.js","../LabourEnrollmentModal.DgSOWoB_.css","./PNCEnrollmentModal-3prkiT1E.js","../PNCEnrollmentModal.BDNYT6XY.css"])))=>i.map(i=>d[i]);
import{d as Vt,r as v,w as ht,O as I,f as r,u as t,br as gt,J as n,l as a,aR as Qe,e as b,dS as vt,Q as d,L as P,aw as Xe,F as Z,aS as ta,ak as ea,P as yt,$ as S,X as N,aP as aa,k as l,K as g,cE as re,bZ as na,bW as ue,aV as Tt,z as sa,D as oa,a as de,I as la,G as ia,dT as ra,E as ua,N as da,a3 as ce,a4 as St,bn as ca,a5 as L,a6 as m,p as me,dU as Xt,m as f,b$ as ma,a7 as pe,R as pa,ap as fa,cp as va,b2 as Rt,c as _t,H as te,cL as w,dV as _a,c$ as ga,am as ya,al as Ca,W as ee,dd as ba,de as z,aG as Aa,c1 as Ia,aI as ae,d0 as Pa,cD as O}from"./vendor-CxrCa3Dl.js";import{a8 as ot,_ as Mt,P as xt,a9 as ka,a0 as Da,m as fe,aa as wa,ab as Oa,u as Ea,a as Ra,f as Na,T as ha,w as R,S as at,J as nt,ac as Nt,i as ne,ad as Ta,q as se,G as j,n as Sa,ae as oe,t as st,af as K,ag as xa,H as F,ah as le}from"../index-Ddb_v0ig.js";import{l as Va}from"./lodash-NJiRuGo9.js";import{C as Ma}from"./confirm_pregnancy_service-Cy9VVWqK.js";import{u as La}from"./useUserActivities-USqPmnXA.js";import{u as $a}from"./usePatientProfile-DaFhUskI.js";import{f as Ha}from"./formatServerData-k-Qs9FQv.js";import{D as Ua}from"./DemographicBar-g6B-7GcC.js";import{i as Ba}from"./tasks-CZnA01WZ.js";const Ga=Vt({__name:"ARTCard",props:{patient:{default:{}}},setup($){const T=$,x=v(!1),E=v({artStartDate:"",arvNumber:"",fileNumber:"",currentOutcome:""}),V=async _=>{x.value=!0;try{const i=await ot.getProgramInformation(_);E.value={artStartDate:(()=>{const[c,H,B]=i.art_start_date.split("/"),W=i.art_start_date.match(/n\/a/i)?"":"(".concat(sa(ot.getSessionDate()).diff("".concat(B,"-").concat(H,"-").concat(c),"months")," Month(s))");return"".concat(i.art_start_date," ").concat(W)})(),arvNumber:"".concat(i.arv_number," | Regimen: ").concat(i.current_regimen),fileNumber:i.filing_number.number,currentOutcome:i.current_outcome}}catch(i){console.error("Error fetching ART information:",i)}finally{x.value=!1}};return ht(()=>T.patient,_=>{_&&_.patientID?V(_.patientID):E.value={artStartDate:"--",arvNumber:"--",fileNumber:"--",currentOutcome:"--"}},{immediate:!0,deep:!0}),(_,i)=>(r(),I(t(gt),null,{default:n(()=>[a(t(ta),null,{default:n(()=>[a(t(Qe),null,{default:n(()=>[x.value?(r(),I(t(vt),{key:0,animated:"",style:{width:"200px",height:"24px"}})):(r(),b(Z,{key:1},[a(t(P),{icon:t(Xe)},null,8,["icon"]),i[0]||(i[0]=d(" ART Information ",-1))],64))]),_:1})]),_:1}),a(t(Tt),null,{default:n(()=>[a(t(ea),null,{default:n(()=>[x.value?(r(),b(Z,{key:0},yt(4,c=>a(t(S),{key:c},{default:n(()=>[a(t(vt),{slot:"start",animated:"",style:{width:"24px",height:"24px","border-radius":"50%"}}),a(t(N),null,{default:n(()=>[a(t(vt),{animated:"",style:{width:"120px",height:"16px","margin-bottom":"8px"}}),a(t(vt),{animated:"",style:{width:"180px",height:"20px"}})]),_:1})]),_:1})),64)):(r(),b(Z,{key:1},[a(t(S),null,{default:n(()=>[a(t(P),{icon:t(aa),slot:"start"},null,8,["icon"]),a(t(N),null,{default:n(()=>[i[1]||(i[1]=l("h3",null,"ART Start Date",-1)),l("p",null,g(E.value.artStartDate),1)]),_:1})]),_:1}),a(t(S),null,{default:n(()=>[a(t(P),{icon:t(re),slot:"start"},null,8,["icon"]),a(t(N),null,{default:n(()=>[i[2]||(i[2]=l("h3",null,"ARV Number",-1)),l("p",null,g(E.value.arvNumber),1)]),_:1})]),_:1}),a(t(S),null,{default:n(()=>[a(t(P),{icon:t(na),slot:"start"},null,8,["icon"]),a(t(N),null,{default:n(()=>[i[3]||(i[3]=l("h3",null,"File Number",-1)),l("p",null,g(E.value.fileNumber),1)]),_:1})]),_:1}),a(t(S),null,{default:n(()=>[a(t(P),{icon:t(ue),slot:"start"},null,8,["icon"]),a(t(N),null,{default:n(()=>[i[4]||(i[4]=l("h3",null,"Current Outcome",-1)),l("p",null,g(E.value.currentOutcome),1)]),_:1})]),_:1})],64))]),_:1})]),_:1})]),_:1}))}}),za=Mt(Ga,[["__scopeId","data-v-7ec7b45c"]]),ie=[{classDash:"dashed_bottom_border",radioBtnContent:{header:{title:"Is the pregnancy confirmed?*",class:"bold",selectedValue:"",name:"Pregnancy confirmed"},data:[{value:"Yes",name:"Yes",colSize:"2"},{value:"No",name:"No",colSize:"2"}]}},{classDash:"dashed_bottom_border",radioBtnContent:{header:{title:"Was the pregnancy planned?*",selectedValue:"",class:"bold",name:"Pregnancy planned"},data:[{value:"Yes",name:"Yes",colSize:"2"},{value:"No",name:"No",colSize:"2"}]}}],Fa=oa("ANCEnrollmentStore",{state:()=>({ConfirmPregnancy:[...ie]}),actions:{setConfirmPregnancy($){this.ConfirmPregnancy=$},getInitial(){return[...Va.cloneDeep(ie)]}}}),Wa={class:"header-content"},Ya={class:"title-section"},qa={class:"tasks-container"},ja=["onClick"],Ka={class:"task-icon-container"},Za={class:"task-content"},Ja={key:0,class:"task-status"},Qa={key:1,class:"empty-state"},Xa={class:"empty-icon"},tn=Vt({__name:"TaskView",props:{tasks:{type:Object,required:!0}},setup($){const T=v([]),x=$;de(async()=>{const _=new xt;T.value=[];const i=await new ka(_.getID()).getProgram();x.tasks.forEach(async c=>{var B,W,lt,it;const H={orderNumber:(B=c.sortOrder)!=null?B:9999,label:(W=c.displayName)!=null?W:c.name,icon:c.icon,disabled:!1,taskCompleted:!1,task:c};if(!(typeof c.workflowID=="string"&&!await Ba(c.workflowID))&&!(typeof c.condition=="function"&&!await c.condition(x.tasks))&&!(typeof c.globalProperty=="string"&&!await Da.isProp("".concat(c.globalProperty,"=true"))))return typeof c.allowTaskAfterDeath=="boolean"&&c.allowTaskAfterDeath===!1&&/died/i.test("".concat((lt=i==null?void 0:i.program)==null?void 0:lt.outcome))&&new Date(xt.getSessionDate())>=new Date((it=i==null?void 0:i.program)==null?void 0:it.startDate)&&(H.disabled=!0),typeof c.disabled=="function"&&(H.disabled=await c.disabled(x.tasks)),T.value.push(H),T.value.sort((rt,Ct)=>{var ut,dt;return((ut=rt.orderNumber)!=null?ut:9999)-((dt=Ct.orderNumber)!=null?dt:9999)}),c})});const E=_=>{if(!_.disabled){if(_.task.action)V(),_.task.action();else if(_.task.component&&_.task.isFormComponent){fe(wa,{},!1,{title:_.task.name,useComponent:_.task.component,onClose:V});return}}};function V(){pa.dismiss()}return(_,i)=>(r(),I(t(pe),null,{default:n(()=>[a(t(la),{class:"ion-no-border"},{default:n(()=>[a(t(ia),{class:"custom-header"},{default:n(()=>[l("div",Wa,[l("div",Ya,[a(t(P),{icon:t(ra),class:"header-icon"},null,8,["icon"]),a(t(ua),{class:"custom-title"},{default:n(()=>[...i[0]||(i[0]=[d("Program Activities",-1)])]),_:1})]),a(t(da),{onClick:V,fill:"clear",shape:"round"},{default:n(()=>[a(t(P),{icon:t(ce)},null,8,["icon"])]),_:1})])]),_:1})]),_:1}),a(t(St),{class:"custom-content"},{default:n(()=>[l("div",qa,[T.value&&T.value.length>0?(r(),I(t(ca),{key:0,class:"tasks-grid"},{default:n(()=>[a(t(L),{class:"ion-justify-content-center"},{default:n(()=>[(r(!0),b(Z,null,yt(T.value,(c,H)=>(r(),I(t(m),{size:"12","size-sm":"6","size-md":"4","size-lg":"3",key:H,class:"task-col"},{default:n(()=>[l("div",{class:me(["task-card",{"task-completed":c.taskCompleted,"task-disabled":c.disabled}]),onClick:B=>!c.disabled&&E(c)},[l("div",Ka,[a(t(P),{color:c.taskCompleted?"success":"primary",icon:c.taskCompleted?t(Xt):c.icon,class:"task-icon"},null,8,["color","icon"])]),l("div",Za,[a(t(N),{class:"task-label"},{default:n(()=>[d(g(c.label),1)]),_:2},1024),c.taskCompleted?(r(),b("div",Ja,[a(t(P),{icon:t(Xt),color:"success"},null,8,["icon"]),i[1]||(i[1]=l("span",null,"Completed",-1))])):f("",!0)])],10,ja)]),_:2},1024))),128))]),_:1})]),_:1})):(r(),b("div",Qa,[l("div",Xa,[a(t(P),{icon:t(ma)},null,8,["icon"])]),i[2]||(i[2]=l("h3",null,"No Activities Yet",-1)),i[3]||(i[3]=l("p",null,"Your program activities will appear here once they're available.",-1))]))])]),_:1})]),_:1}))}}),en=Mt(tn,[["__scopeId","data-v-244ec438"]]);async function an($,T="tasks"){var V,_;const E=(V={1:Oa}[$])!=null?V:{};fe(en,{},!0,{tasks:(_=E==null?void 0:E[T])!=null?_:[]})}const nn={key:5,class:"content_manager"},sn={style:{display:"flex","justify-content":"space-between"}},on={class:"p_name_image"},ln={style:{width:"100%"}},rn={class:"p_name"},un={style:{display:"flex","justify-content":"space-between"}},dn={class:"start-visit"},cn={class:"button-group"},mn={key:0,class:"send-button-container action-buttons"},pn={class:"send-button-container"},fn={class:"send-button-container"},vn={class:"send-button-container"},_n={style:{"padding-left":"10px","padding-right":"10px","margin-top":"5px"}},gn={class:"vitalsUnits"},yn={style:{width:"100%",overflow:"scroll",height:"64px"}},Cn={key:0,style:{"margin-top":"1px"}},bn={key:0,class:"patient-chart"},An={class:"patient-chart"},In={key:1,class:"patient-chart"},Pn={key:1},kn={key:2},Dn={key:3},wn={key:4},On={key:5},En={key:6},Rn={class:"rght-drpm"},Nn="NEONATAL PROGRAM",hn=Vt({__name:"PatientProfile",setup($,{expose:T}){const x=w(()=>O(()=>import("./LabOrdersList-C8tkIAkg.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12]),import.meta.url)),E=w(()=>O(()=>import("./DiagnosesHistory-32XBUuZN.js"),__vite__mapDeps([13,1,2,3,4,5,6,14]),import.meta.url)),V=w(()=>O(()=>import("./AllergiesHistory-24bgKhNL.js"),__vite__mapDeps([15,1,2,3,4,5,6,16]),import.meta.url)),_=w(()=>O(()=>import("./MedicationsHistory-BNmhG3Ar.js"),__vite__mapDeps([17,1,2,3,4,5,6,18]),import.meta.url)),i=w(()=>O(()=>import("./VisitsHistory-DqZN6J62.js"),__vite__mapDeps([19,1,2,3,4,5,6,20]),import.meta.url)),c=w(()=>O(()=>import("./VitalsMeasurementsSummary-BcWa8EWl.js"),__vite__mapDeps([21,1,2,3,4,5,6,22]),import.meta.url)),H=w(()=>O(()=>import("./PatientProfile-CuSg5-Tw.js"),__vite__mapDeps([23,1,2,3,4,5,6,24,25,26,27,28,29,0,7,8,9,10,11,12,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85]),import.meta.url)),B=w(()=>O(()=>import("./HTSPatientProfile-B_oEsohn.js"),__vite__mapDeps([86,1,2,3,4,5,6,70,71,72,73,74,83,77,78,40,79,80,81,45,46,47,84,63,64,65,66,7,8,9,10,67,68,49,32,69,87]),import.meta.url)),W=w(()=>O(()=>import("./NeonatalPatientProfile-DhaZ4--A.js"),__vite__mapDeps([88,1,2,3,4,5,6,83,77,78,70,71,72,73,74,40,79,80,81,45,46,47,84,63,64,65,89,66,7,8,9,10,67,68,49,32,69,90]),import.meta.url)),lt=w(()=>O(()=>import("./AETCPatientProfile-CDZ-ijoJ.js"),__vite__mapDeps([91,1,2,3,4,5,6,92,83,77,78,70,71,72,73,74,40,79,80,81,45,46,47,84,32,24,25,93,94,95,11,96,97]),import.meta.url)),it=w(()=>O(()=>import("./WeightHeightChart-CHhV5bih.js"),__vite__mapDeps([63,4,1,2,3,5,6,64,65]),import.meta.url)),rt=w(()=>O(()=>import("../index-Ddb_v0ig.js").then(s=>s.cK),__vite__mapDeps([4,1,2,3,5,6]),import.meta.url)),Ct=w(()=>O(()=>import("./BloodPressure-BEgiMODv.js"),__vite__mapDeps([98,1,2,3,5,4,6,99]),import.meta.url)),ut=w(()=>O(()=>import("./AncEnrollmentModal-nQXFGZ_-.js"),__vite__mapDeps([100,1,2,3,4,5,6,7,8,9,10,92,11,83,77,78,70,71,72,73,74,40,79,80,81,45,46,47,84,32,24,25,96,101]),import.meta.url)),dt=w(()=>O(()=>import("./LabourEnrollmentModal-ButO2izE.js"),__vite__mapDeps([102,1,2,3,4,5,6,77,78,70,71,72,73,74,40,79,80,81,7,8,9,10,92,11,83,45,46,47,84,32,24,25,96,103]),import.meta.url)),ve=w(()=>O(()=>import("./PNCEnrollmentModal-3prkiT1E.js"),__vite__mapDeps([104,1,2,3,4,5,6,77,78,70,71,72,73,74,40,79,80,81,7,8,9,10,92,11,83,45,46,47,84,32,24,25,96,105]),import.meta.url)),J=fa(),_e=va(),ct=Ea(),ge=Ra(),ye=Fa(),{hasWaitingList:Lt}=La(),{event:Ce,popoverOpen:$t,openPopover:Ht,openPIM:Ut,openOutCome:be,openUpdateNCDNUmbers:Ae,printVisitSummary:Ie,printID:Pe,formatCurrentAddress:ke}=$a(),{screenWidth:bt}=Na(),{patient:u}=Rt(ct),{activeProgram:k,authorizedPrograms:Bt}=Rt(ge),{ConfirmPregnancy:De}=Rt(ye),mt=v(!1),we=v(!0),Oe=v(!1),At=v(!1),Ee=v(!1),U=v("Patient Charts"),Gt=v(null),h=v({}),Y=v(!1),Q=v(!1),zt=v(!1),Ft=v(!1),M=v([]),q=v(0),pt=v(),X=v(""),It=v(!1),Re=s=>s==null?void 0:s.trim().toUpperCase(),Ne=s=>s===R.NEONATAL_PROGRAM||s===R.HTC_PROGRAM,he=s=>Re(s)===Nn,Te=s=>{var D;if(!s)return!1;const e=(D=s.id)!=null?D:s.program_id;return Ne(e)||he(s.name)},Se=_t(()=>{var e,D;const s=(D=(e=u.value)==null?void 0:e.personInformation)==null?void 0:D.gender;return s==="Male"||s==="M"?Bt.value.filter(p=>p.name!=="ANC PROGRAM"&&p.name!=="LABOUR AND DELIVERY PROGRAM"&&p.name!=="PNC PROGRAM"):Bt.value.map(p=>{if(p.name==="ANC PROGRAM"||p.name==="LABOUR AND DELIVERY PROGRAM"||p.name==="PNC PROGRAM"){if(!(M!=null&&M.value))return;const o=M==null?void 0:M.value.some(y=>y.id===p.program_id);return{...p,actionName:o?"Start ".concat(p.name):"Enroll in ".concat(p.name)}}return p})}),xe=_t(()=>!Y.value&&k.value.program_id==14),Ve=_t(()=>Y.value&&k.value.program_id==14),Wt=_t(()=>Te(k.value)),Me=()=>{var s,e;if((e=(s=u.value)==null?void 0:s.personInformation)!=null&&e.birthdate){const D=F.getAgeInYears(u.value.personInformation.birthdate);It.value=D<9}},Le=()=>{var s,e;(e=(s=u.value)==null?void 0:s.personInformation)!=null&&e.birthdate&&(we.value=F.getAgeInYears(u.value.personInformation.birthdate)>=14,Oe.value=F.ageInMonths(u.value.personInformation.birthdate)<9,At.value=F.getAgeInYears(u.value.personInformation.birthdate)<5,Ee.value=F.dateDiffInDays(F.sessionDate(),u.value.personInformation.birthdate)<42)},G=s=>{U.value=s},$e=()=>[{backgroundColor:"#B9E6FE",status:"",icon:Nt(["#B9E6FE","#026AA2","#9ADBFE"]),textColor:"#026AA2",value:"No further action is required.",name:"",index:"Blood sugar is normal"},{backgroundColor:"#FEDF89",status:"",icon:Nt(["#FEDF89","#B54708","#FED667"]),textColor:"#B54708",value:"Please call or follow up!",name:"",index:"Patient Defaulted"},{backgroundColor:"#FECDCA",status:"",icon:Nt(["#FECDCA","#B42318","#FDA19B"]),textColor:"#B42318",value:"Administer medications!",name:"",index:"Patient is hypertensive"}],He=async()=>{if(k.value.program_id==14)try{const s=await le(ct.patient.ID);if(!s)return;Y.value=!!s.length}catch(s){console.error(s)}},Pt=v(!1),Ue=async()=>{try{await ne("Are you sure you want to create the visit?")&&(Pt.value=!0,await Ta(ct.patient)&&(Y.value=!0,await se().refresh(at.getUserLocationId()),j("The patient visit is now active. Patient is on the waiting list for vitals")))}catch(s){console.error("error activating visit: ",s)}finally{Pt.value=!1}},kt=v(!1),Be=async()=>{try{await ne("Are you sure you want to close the visit?")&&(kt.value=!0,await Sa(u.value)&&(Y.value=!1,await se().refresh(at.getUserLocationId()),j("The patient visit is now closed")))}catch(s){console.error("error: ",s)}finally{kt.value=!1}},Ge=async()=>{if(k.value.program_id==14)try{const s=await le(ct.patient.ID);Y.value=s.length>0}catch(s){console.error(s)}},ze=s=>{Gt.value=s,mt.value=!mt.value},Yt=(s="tasks")=>an(k.value.program_id,s),Dt=v(!1),qt=async s=>{var e,D,p,o,y;Dt.value=!0;try{if(await tt(),(s.program_id==R.ANC_PROGRAM||s.program_id==R.PNC_PROGRAM||s.program_id==R.LABOUR_AND_DELIVERY_PROGRAM)&&!((e=M==null?void 0:M.value)==null?void 0:e.find(ft=>ft.id==s.program_id))){if(s.program_id==R.ANC_PROGRAM){Q.value=!0,q.value=s.program_id;return}else if(s.program_id==R.LABOUR_AND_DELIVERY_PROGRAM){zt.value=!0,X.value="Are you sure you want to enroll ".concat((p=(D=u.value)==null?void 0:D.personInformation)==null?void 0:p.given_name.toUpperCase()," in this program?"),q.value=s.program_id;return}else if(s.program_id==R.PNC_PROGRAM){Ft.value=!0,X.value="Are you sure you want to enroll ".concat((y=(o=u.value)==null?void 0:o.personInformation)==null?void 0:y.given_name.toUpperCase()," in this program?"),q.value=s.program_id;return}}const A=await oe.userProgramData(u.value.patientID,s);if(s.program_id===14)if(A!=null&&A.canProceed&&A.url&&A.stage){const C=Fe(A.stage);if(!C){st("Unable to determine patient stage");return}if(Lt(C))return J.push(A.url);st("You don't have access to the ".concat(C.toLowerCase()));return}else{st("The visit is not activated");return}if(A!=null&&A.url)return J.push(A.url)}catch(A){console.error("error: ",A)}finally{Dt.value=!1}},Fe=s=>{switch(s){case"VITALS":return"Waiting for Vitals";case"CONSULTATION":return"Waiting for Consultation";case"LAB":return"Waiting for Laboratory";case"DISPENSATION":return"Waiting for Dispensation";default:return null}},wt=()=>{Q.value=!1},jt=()=>{Q.value=!Q.value},We=async()=>{const s=at.getUserID(),e=new Ma(u.value.patientID,s);if(!await e.createEncounter())return st("Unable to create quick check encounter");const p=await e.saveObservationList(await Je());try{await ot.enrollProgram(u.value.patientID,q.value,new Date().toString()),j("Enrollment is successful")}catch(o){j("Already Enrolled")}return p?(await tt(),jt(),J.push("ANCHome")):st("Unable to create quick check details!")},Ye=async()=>(await ot.enrollProgram(u.value.patientID,q.value,new Date().toString()),await tt(),j("Enrollment is successful"),J.push("LabourHome")),qe=async()=>(await ot.enrollProgram(u.value.patientID,q.value,new Date().toString()),await tt(),j("Enrollment is successful"),J.push("PNCHome")),tt=async()=>{const s=u.activePrograms;M.value=s==null?void 0:s.map(e=>({name:e.program.name,id:e.program_id}))},Ot=()=>{jt()},Et=async()=>{Le(),await je(),await He(),await Ge(),await oe.userProgramData(u.value.patientID),await tt(),Me()},je=async()=>{h.value={},pt.value="";const s=await K.getConceptID("Height (cm)"),e=await K.getConceptID("Weight (kg)"),D=await K.getConceptID("Systolic blood pressure"),p=await K.getConceptID("Diastolic blood pressure"),o=await K.getConceptID("Temperature (c)"),y=await K.getConceptID("Pulse");(await xa.getLatestObsByEncounterIdAndConcepts(6,[s,e,D,p,o,y])).forEach(C=>{C.concept_id===s?h.value.height=C.value_numeric:C.concept_id===e?h.value.weight=C.value_numeric:C.concept_id===D?h.value.systolic=C.value_numeric:C.concept_id===p?h.value.diastolic=C.value_numeric:C.concept_id===o?h.value.temperature=C.value_numeric:C.concept_id===y&&(h.value.pulse=C.value_numeric)}),pt.value=new xt().getBloodGlucose(u.value)},Ke=s=>s=="Undetermined"?"Undetermined":["Male","M"].includes(s)?"Male":["Female","F"].includes(s)?"Female":"",Ze=()=>{var s,e;return F.getBirthdateAge((e=(s=u.value)==null?void 0:s.personInformation)==null?void 0:e.birthdate)},Je=async()=>await Ha(De.value);return de(async()=>{await Et()}),ht(()=>u,async()=>{await Et()},{deep:!0}),ht(_e,async s=>{await Et()},{deep:!0}),T({showUnderageWarning:It}),(s,e)=>{const D=te("ion-list"),p=te("ion-popover");return r(),I(t(pe),null,{default:n(()=>[a(ha),a(t(St),{fullscreen:!0},{default:n(()=>[t(k).program_id!==33&&t(k).program_id!=""&&t(bt)<1120?(r(),I(Ua,{key:0,onOpenPopover:e[0]||(e[0]=o=>t(Ht)(o))})):f("",!0),a(t(ut),{closeModalFunc:wt,onYes:We,onNo:Ot,isOpen:Q.value,title:X.value,showUnderageWarning:It.value},null,8,["isOpen","title","showUnderageWarning"]),a(t(dt),{closeModalFunc:wt,onYes:Ye,onNo:Ot,isOpen:zt.value,title:X.value},null,8,["isOpen","title"]),a(t(ve),{closeModalFunc:wt,onYes:qe,onNo:Ot,isOpen:Ft.value,title:X.value},null,8,["isOpen","title"]),t(k).program_id==t(R).IMMUNIZATION_PROGRAM?(r(),I(t(H),{key:1,updateData:t(u)},null,8,["updateData"])):f("",!0),t(k).program_id==t(R).HTS_PROGRAM?(r(),I(t(B),{key:2,updateData:t(u)},null,8,["updateData"])):f("",!0),t(k).program_id==t(R).AETC_PROGRAM?(r(),I(t(lt),{key:3,updateData:t(u)},null,8,["updateData"])):f("",!0),Wt.value?(r(),I(t(W),{key:4})):f("",!0),t(k).program_id!==t(R).AETC_PROGRAM&&t(k).program_id!==t(R).IMMUNIZATION_PROGRAM&&t(k).program_id!==t(R).HTS_PROGRAM&&!Wt.value&&t(k).program_id!=""?(r(),b("div",nn,[a(t(L),{class:"content_width"},{default:n(()=>[a(t(m),{size:"2.5","size-lg":"2.6","size-md":"3",class:"displayNoneLeftPanel"},{default:n(()=>[a(t(gt),{style:{"margin-bottom":"20px","background-color":"#fff"}},{default:n(()=>[a(t(Tt),null,{default:n(()=>{var o,y,A,C,ft,Kt,Zt,Jt;return[l("div",sn,[e[23]||(e[23]=l("div",null,null,-1)),l("div",{class:"name",style:{color:"var(--ion-color-primary)","margin-top":"10px"},onClick:e[1]||(e[1]=et=>t(Ht)(et))},[a(t(P),{icon:t(_a),style:{"font-size":"2.2rem"}},null,8,["icon"])])]),l("div",on,[l("div",{class:me(((y=(o=t(u))==null?void 0:o.personInformation)==null?void 0:y.gender)=="M"?"initialsBox maleColor":"initialsBox femaleColor"),onClick:e[2]||(e[2]=et=>t(Ut)())},[a(t(P),{style:{color:"#fff","font-size":"70px"},icon:t(ga)},null,8,["icon"])],2),l("div",ln,[l("div",rn,g((C=(A=t(u))==null?void 0:A.personInformation)==null?void 0:C.given_name)+" "+g((Kt=(ft=t(u))==null?void 0:ft.personInformation)==null?void 0:Kt.middle_name)+" "+g((Jt=(Zt=t(u))==null?void 0:Zt.personInformation)==null?void 0:Jt.family_name),1)])]),a(t(L),null,{default:n(()=>[a(t(m),{size:"4"},{default:n(()=>[...e[24]||(e[24]=[d("MRN:",-1)])]),_:1}),a(t(m),{class:"demoContent"},{default:n(()=>[d(g(t(u).ID),1)]),_:1})]),_:1}),t(k).program_id===32?(r(),I(t(L),{key:0},{default:n(()=>[a(t(m),{size:"4"},{default:n(()=>[...e[25]||(e[25]=[d("NCDNumber:",-1)])]),_:1}),a(t(m),{class:"demoContent"},{default:n(()=>[d(g(t(u).NcdID),1)]),_:1})]),_:1})):f("",!0),a(t(L),null,{default:n(()=>[a(t(m),{size:"4"},{default:n(()=>[...e[26]||(e[26]=[d("Gender:",-1)])]),_:1}),a(t(m),{class:"demoContent"},{default:n(()=>{var et,Qt;return[d(g(Ke((Qt=(et=t(u))==null?void 0:et.personInformation)==null?void 0:Qt.gender)),1)]}),_:1})]),_:1}),a(t(L),null,{default:n(()=>[a(t(m),{size:"4"},{default:n(()=>[...e[27]||(e[27]=[d("Age:",-1)])]),_:1}),a(t(m),{class:"demoContent"},{default:n(()=>[d(g(Ze()),1)]),_:1})]),_:1}),a(t(L),null,{default:n(()=>[a(t(m),{size:"4"},{default:n(()=>[...e[28]||(e[28]=[d("Address:",-1)])]),_:1}),a(t(m),{class:"demoContent"},{default:n(()=>[d(g(t(ke)(t(u))),1)]),_:1})]),_:1})]}),_:1})]),_:1}),t(at).getProgramID()===1?(r(),I(za,{key:0,patient:t(u)},null,8,["patient"])):f("",!0),a(t(gt),{style:{"margin-bottom":"20px","background-color":"#fff"}},{default:n(()=>[a(t(ya),{value:["first"]},{default:n(()=>[a(t(Ca),{value:"first",style:{"background-color":"#fff"},"toggle-icon-slot":"start"},{default:n(()=>[a(t(S),{slot:"header",color:"white"},{default:n(()=>[a(t(N),{class:"side_title"},{default:n(()=>[...e[29]||(e[29]=[d("Alerts & Reminders ",-1)])]),_:1})]),_:1}),a(t(Tt),{slot:"content"},{default:n(()=>[(r(!0),b(Z,null,yt($e(),(o,y)=>(r(),b("span",{key:y},[o.value?(r(),I(t(L),{key:0,style:ee("border-radius: 5px;  margin-top:10px; margin-bottom:10px;background-color:"+o.backgroundColor)},null,8,["style"])):f("",!0)]))),128))]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),a(t(m),{offset:"0.07","size-sm":"12","size-md":"12","size-lg":t(bt)>1120?"9.33":"12"},{default:n(()=>[a(t(gt),{style:{"background-color":"#fff","margin-inline":"0px",padding:"5px","margin-bottom":"5px",contain:"unset",overflow:"unset"}},{default:n(()=>[l("div",null,[l("div",un,[e[30]||(e[30]=l("div",{class:"vitalsTitle"},"Most recent Vitals & Biometrics",-1)),l("div",dn,[l("div",cn,[t(Lt)("Waiting for Laboratory")?f("",!0):(r(),b("div",mn,[xe.value?(r(),I(nt,{key:0,name:"Activate visit",onClick:e[3]||(e[3]=o=>Ue()),loading:Pt.value,icon:t(ue),fill:"solid",color:"success"},null,8,["loading","icon"])):f("",!0),Ve.value?(r(),I(nt,{key:1,name:"Deactivate Visit",onClick:e[4]||(e[4]=o=>Be()),loading:kt.value,fill:"solid",icon:t(ce),color:"danger"},null,8,["loading","icon"])):f("",!0)])),l("div",pn,[a(nt,{name:"Tasks","onClicked:btn":e[5]||(e[5]=o=>Yt()),class:"send-text",fill:"clear",color:"secondary"})]),l("div",fn,[a(nt,{name:"Printout/Other","onClicked:btn":e[6]||(e[6]=o=>Yt("other")),class:"send-text",fill:"solid",color:"secondary"})]),l("div",vn,[a(nt,{name:"Start visit","onClicked:btn":e[7]||(e[7]=o=>qt(t(k))),loading:Dt.value,textFontSize:"12px",class:"send-text"},null,8,["loading"]),l("button",{class:"send-arrow",onClick:e[8]||(e[8]=o=>ze(o))})])])])])]),l("div",_n,[a(t(L),null,{default:n(()=>[a(t(m),{class:"vitalsHeading"},{default:n(()=>[...e[31]||(e[31]=[d("Weight",-1)])]),_:1}),a(t(m),{class:"vitalsHeading"},{default:n(()=>[...e[32]||(e[32]=[d("Height",-1)])]),_:1}),a(t(m),{class:"vitalsHeading"},{default:n(()=>[...e[33]||(e[33]=[d("Temperature",-1)])]),_:1}),a(t(m),{class:"vitalsHeading"},{default:n(()=>[...e[34]||(e[34]=[d("Blood glucose",-1)])]),_:1}),a(t(m),{class:"vitalsHeading"},{default:n(()=>[...e[35]||(e[35]=[d("Pulse Rate",-1)])]),_:1}),a(t(m),{class:"vitalsHeading"},{default:n(()=>[...e[36]||(e[36]=[d("Blood pressure",-1)])]),_:1})]),_:1}),a(t(L),null,{default:n(()=>[a(t(m),{class:"vitalsValue"},{default:n(()=>{var o;return[d(g((o=h.value)==null?void 0:o.weight)+" ",1),e[37]||(e[37]=l("span",{class:"vitalsUnits"},"kg",-1))]}),_:1}),a(t(m),{class:"vitalsValue"},{default:n(()=>{var o;return[d(g((o=h.value)==null?void 0:o.height)+" ",1),e[38]||(e[38]=l("span",{class:"vitalsUnits"},"cm",-1))]}),_:1}),a(t(m),{class:"vitalsValue"},{default:n(()=>{var o;return[d(g((o=h.value)==null?void 0:o.temperature)+" ",1),e[39]||(e[39]=l("span",{class:"vitalsUnits"},"Â°C",-1))]}),_:1}),a(t(m),{class:"vitalsValue"},{default:n(()=>{var o,y;return[d(g((o=pt.value)==null?void 0:o.value)+" ",1),l("span",gn,g((y=pt.value)==null?void 0:y.unit),1)]}),_:1}),a(t(m),{class:"vitalsValue"},{default:n(()=>{var o;return[d(g((o=h.value)==null?void 0:o.pulse)+" ",1),e[40]||(e[40]=l("span",{class:"vitalsUnits"},"bpm ",-1))]}),_:1}),a(t(m),{class:"vitalsValue"},{default:n(()=>{var o,y;return[d(g((o=h.value)==null?void 0:o.systolic)+"/"+g((y=h.value)==null?void 0:y.diastolic),1),e[41]||(e[41]=l("span",{class:"vitalsUnits"},"mmhg",-1))]}),_:1})]),_:1})])]),_:1}),l("div",yn,[a(t(ba),{value:U.value,style:{"margin-top":"5px","min-width":"540px"}},{default:n(()=>[a(t(z),{value:"Patient Charts",onClick:e[9]||(e[9]=o=>G("Patient Charts"))},{default:n(()=>[a(t(N),null,{default:n(()=>[...e[42]||(e[42]=[d("Patient Charts",-1)])]),_:1})]),_:1}),a(t(z),{value:"Visits History",onClick:e[10]||(e[10]=o=>G("Visits History"))},{default:n(()=>[a(t(N),null,{default:n(()=>[...e[43]||(e[43]=[d("Visits History",-1)])]),_:1})]),_:1}),a(t(z),{value:"Vitals History",onClick:e[11]||(e[11]=o=>G("Vitals History"))},{default:n(()=>[a(t(N),null,{default:n(()=>[...e[44]||(e[44]=[d("Vitals History",-1)])]),_:1})]),_:1}),a(t(z),{value:"Lab Tests History",onClick:e[12]||(e[12]=o=>G("Lab Tests History"))},{default:n(()=>[a(t(N),null,{default:n(()=>[...e[45]||(e[45]=[d("Lab Tests History",-1)])]),_:1})]),_:1}),a(t(z),{value:"Diagnosis History",onClick:e[13]||(e[13]=o=>G("Diagnosis History"))},{default:n(()=>[a(t(N),null,{default:n(()=>[...e[46]||(e[46]=[d("Diagnosis History",-1)])]),_:1})]),_:1}),a(t(z),{value:"Allergies History",onClick:e[14]||(e[14]=o=>G("Allergies History"))},{default:n(()=>[a(t(N),null,{default:n(()=>[...e[47]||(e[47]=[d("Allergies History",-1)])]),_:1})]),_:1}),a(t(z),{value:"Medication History",onClick:e[15]||(e[15]=o=>G("Medication History"))},{default:n(()=>[a(t(N),null,{default:n(()=>[...e[48]||(e[48]=[d("Medication History",-1)])]),_:1})]),_:1})]),_:1},8,["value"])]),U.value=="Patient Charts"?(r(),b("div",Cn,[l("div",{style:ee(t(bt)>826?"display: flex;":"display: block;")},[At.value?(r(),b("div",bn,[a(t(it))])):f("",!0),l("div",An,[a(t(Ct))]),At.value?f("",!0):(r(),b("div",In,[a(t(rt))]))],4)])):f("",!0),U.value=="Visits History"?(r(),b("div",Pn,[a(t(i))])):f("",!0),U.value=="Vitals History"?(r(),b("div",kn,[a(t(c))])):f("",!0),U.value=="Lab Tests History"?(r(),b("div",Dn,[a(t(x))])):f("",!0),U.value=="Diagnosis History"?(r(),b("div",wn,[a(t(E))])):f("",!0),U.value=="Allergies History"?(r(),b("div",On,[a(t(V))])):f("",!0),U.value=="Medication History"?(r(),b("div",En,[a(t(_))])):f("",!0)]),_:1},8,["size-lg"])]),_:1})])):f("",!0)]),_:1}),a(p,{style:{"--offset-x":"-10px"},"is-open":t($t),"show-backdrop":!1,"dismiss-on-select":!0,event:t(Ce),onDidDismiss:e[21]||(e[21]=o=>$t.value=!1)},{default:n(()=>[l("div",null,[a(D,{style:{"--ion-background-color":"#fff","--offset-x":"-30px"}},{default:n(()=>[a(t(S),{button:!0,detail:!1,onClick:e[16]||(e[16]=o=>t(Ut)()),style:{cursor:"pointer"},class:"list-content"},{default:n(()=>[a(t(P),{icon:t(Aa),slot:"start",class:"sub-menu-icon"},null,8,["icon"]),e[49]||(e[49]=l("span",{class:"sub-menu-txt"},"Update demographics",-1))]),_:1}),a(t(S),{button:!0,detail:!1,onClick:e[17]||(e[17]=o=>t(be)()),style:{cursor:"pointer"},class:"list-content"},{default:n(()=>[a(t(P),{icon:t(Ia),slot:"start",class:"sub-menu-icon"},null,8,["icon"]),e[50]||(e[50]=l("span",{class:"sub-menu-txt"},"Update outcome",-1))]),_:1}),t(at).getProgramID()==32?(r(),I(t(S),{key:0,button:!0,detail:!1,onClick:e[18]||(e[18]=o=>t(Ae)()),style:{cursor:"pointer"},class:"list-content"},{default:n(()=>[a(t(P),{icon:t(re),slot:"start",class:"sub-menu-icon"},null,8,["icon"]),e[51]||(e[51]=l("span",{class:"sub-menu-txt"},"Update NCD Number",-1))]),_:1})):f("",!0),a(t(S),{button:!0,detail:!1,onClick:e[19]||(e[19]=o=>t(Ie)()),style:{cursor:"pointer"},class:"list-content"},{default:n(()=>[a(t(P),{icon:t(ae),slot:"start",class:"sub-menu-icon"},null,8,["icon"]),e[52]||(e[52]=l("span",{class:"sub-menu-txt"},"Print visit summary",-1))]),_:1}),a(t(S),{button:!0,detail:!1,onClick:e[20]||(e[20]=o=>t(Pe)()),style:{cursor:"pointer"},class:"list-content"},{default:n(()=>[a(t(P),{icon:t(ae),slot:"start",class:"sub-menu-icon"},null,8,["icon"]),e[53]||(e[53]=l("span",{class:"sub-menu-txt"},"Print client identifier",-1))]),_:1})]),_:1})])]),_:1},8,["is-open","event"]),a(p,{"is-open":mt.value,"show-backdrop":!1,"dismiss-on-select":!0,event:Gt.value,onDidDismiss:e[22]||(e[22]=o=>mt.value=!1),style:{"--width":"350px"}},{default:n(()=>[a(t(St),null,{default:n(()=>[a(D,null,{default:n(()=>[(r(!0),b(Z,null,yt(Se.value,(o,y)=>(r(),I(t(S),{button:!0,detail:!1,style:{cursor:"pointer"},key:y,onClick:A=>qt(o)},{default:n(()=>[a(t(P),{slot:"start",icon:t(Pa)},null,8,["icon"]),l("span",Rn,g(o==null?void 0:o.actionName),1)]),_:2},1032,["onClick"]))),128))]),_:1})]),_:1})]),_:1},8,["is-open","event"])]),_:1})}}}),Tn=Mt(hn,[["__scopeId","data-v-8b9f5f13"]]),Gn=Object.freeze(Object.defineProperty({__proto__:null,default:Tn},Symbol.toStringTag,{value:"Module"}));export{za as A,Gn as P,Fa as u};
