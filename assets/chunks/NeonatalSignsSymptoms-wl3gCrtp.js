import{d as F,r as S,at as w,w as d,e as k,f as D,l as _,u as v,L as b,bq as P,aF as $,bh as z,eV as A,G as g,Q as B,H as R}from"./vendor-CJ2tyHrn.js";import{C,_ as y,T as H,u as U,t as I,H as q,G as E}from"../index-CPIhguZJ.js";import{N as G}from"./neonatal_service-DKdrVzxM.js";import{D as O}from"./DemographicBar-CMCjh8ca.js";import{p as c,q as h,N as W}from"./NeonatalStepper-BvXO5k96.js";import{u as j}from"./useSignsSymptomsStore-CPCJjl8z.js";import"./lodash-NJiRuGo9.js";import"./apexcharts-BtvCa6MI.js";import"./SaveProgressModal-Bs8SOcXY.js";import"./enrollment-DU-PLRUa.js";import"./images-142qstiX.js";const K={class:"signs-symptoms-section-wrapper"},L=F({__name:"AdmissionSection",setup(r,{expose:m}){const t=S(null),n=c[0],u=n.formData,l=n.conditionalRules||[],i=w(h),p=e=>{i&&(i.is_readmission=e.is_readmission||"")};return d(()=>{var e;return(e=t.value)==null?void 0:e.formValues},e=>{e&&p(e)},{deep:!0}),d(()=>t.value,e=>{e!=null&&e.getFormValues&&p(e.getFormValues())},{immediate:!0}),m({getFormRef:()=>t.value,validateForm:()=>{var e,o;return((o=(e=t.value)==null?void 0:e.validateForm)==null?void 0:o.call(e))||null},getFormValues:()=>{var e,o;return((o=(e=t.value)==null?void 0:e.getFormValues)==null?void 0:o.call(e))||{}}}),(e,o)=>(D(),k("div",K,[_(C,{formData:v(u),conditionalRules:v(l),ref_key:"formRef",ref:t},null,8,["formData","conditionalRules"])]))}}),V=y(L,[["__scopeId","data-v-312c3ac7"]]),Q={class:"signs-symptoms-section-wrapper"},x=F({__name:"PresentingComplaintsSection",setup(r,{expose:m}){const t=S(null),n=c[1],u=n.formData,l=n.conditionalRules||[],i=w(h),p=e=>{i&&(i.presenting_complaints=e.presenting_complaints||[])};return d(()=>{var e;return(e=t.value)==null?void 0:e.formValues},e=>{e&&p(e)},{deep:!0}),d(()=>t.value,e=>{e!=null&&e.getFormValues&&p(e.getFormValues())},{immediate:!0}),m({getFormRef:()=>t.value,validateForm:()=>{var e,o;return((o=(e=t.value)==null?void 0:e.validateForm)==null?void 0:o.call(e))||null},getFormValues:()=>{var e,o;return((o=(e=t.value)==null?void 0:e.getFormValues)==null?void 0:o.call(e))||{}}}),(e,o)=>(D(),k("div",Q,[_(C,{formData:v(u),conditionalRules:v(l),ref_key:"formRef",ref:t},null,8,["formData","conditionalRules"])]))}}),N=y(x,[["__scopeId","data-v-2ad14f66"]]),J=F({name:"NeonatalSignsSymptoms",components:{IonPage:P,IonContent:b,Toolbar:H,DemographicBar:O,NeonatalStepper:W,AdmissionSection:V,PresentingComplaintsSection:N},setup(){const r=$(),m=U(),{patient:t}=z(m),n=j(),u=a=>{const s=Number(a);return Number.isFinite(s)?s:null},l=()=>{var s;const a=u((s=t.value)==null?void 0:s.patientID);n.initializeForPatient(a)};l(),d(()=>{var a;return(a=t.value)==null?void 0:a.patientID},()=>l());const i=n.formData;A(h,i),d(()=>n.formData,()=>n.saveSnapshot(),{deep:!0});const p=S(c.map((a,s)=>({title:a.title,number:s+1,checked:!1,class:s===0?"open_step common_step":"common_step",last_step:s===c.length-1?"last_step":""}))),e=[{title:c[0].title,value:"1",component:V,configIndex:0},{title:c[1].title,value:"2",component:N,configIndex:1}],o="Signs & Symptoms Assessment",T=S("1");return{wizardData:p,stepperData:e,stepperTitle:o,currentOpenStepper:T,updateStatus:a=>{a&&a.value&&p.value.forEach((s,f)=>{a.value===(f+1).toString()?(s.class="open_step common_step",s.checked=!1):f<parseInt(a.value)-1?(s.class="common_step color_white",s.checked=!0):(s.class="common_step",s.checked=!1)})},getSaveFunction:a=>a===e.length-1?async()=>{var s;if(!((s=t.value)!=null&&s.patientID)){I("No patient selected");return}try{const f=q.sessionDate();await G.saveSignsSymptomsAssessment(t.value.patientID,i,f),E("Signs & symptoms assessment saved successfully"),n.clearPatient(t.value.patientID),r.push({path:"/neonatal/checkpoint"})}catch(f){console.error("Failed to save signs/symptoms assessment",f),I("Failed to save signs/symptoms assessment")}}:null,neonatalSignsSymptomsSections:c}}});function M(r,m,t,n,u,l){const i=g("Toolbar"),p=g("NeonatalStepper"),e=g("ion-content"),o=g("ion-page");return D(),B(o,{class:"neonatal-signs-symptoms-page"},{default:R(()=>[_(i),_(e,{fullscreen:!0},{default:R(()=>[_(p,{wizardData:r.wizardData,StepperData:r.stepperData,stepperTitle:r.stepperTitle,openStepper:r.currentOpenStepper,backUrl:"/NeonatalHome",getSaveFunction:r.getSaveFunction,flowType:"signsSymptoms",sectionsConfig:r.neonatalSignsSymptomsSections,onUpdateStatus:r.updateStatus},null,8,["wizardData","StepperData","stepperTitle","openStepper","getSaveFunction","sectionsConfig","onUpdateStatus"])]),_:1})]),_:1})}const ce=y(J,[["render",M],["__scopeId","data-v-a896ff63"]]);export{ce as default};
