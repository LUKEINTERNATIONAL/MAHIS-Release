import{d as b,ah as p,bv as M,G as k,E as P,ai as F,aj as w,_ as S,I as V,a3 as B,H as i,O as y,f as o,N as tt,L as lt,a5 as ct,dl as dt,a4 as pt,dV as mt,W as et,R as ut,e as D,m as _,l as n,k as u,J as a,Q as yt,F as ht,bh as ft,al as _t,ak as Ct,aP as Dt,cw as gt,aQ as bt,aT as St,bp as Ht,a6 as It,cn as Tt,eb as vt,d5 as Nt,ec as $t,aS as kt,bL as Pt,p as E}from"./vendor-BpjEhVym.js";import{aU as $,aV as wt,M as q,g as m,m as g,l as H,_ as I,J as nt,Q as Vt,T as Bt,aP as Et,N as Mt,t as j,aC as Ft,$ as Rt,I as zt,P as Lt,aQ as At,S as K,aW as Z,d as Gt,aJ as Ot,aI as Ut,aX as Wt,u as Jt,e as Qt}from"../index-CiSAd7V7.js";import{D as jt}from"./DemographicBar-C4Mgqqyb.js";import{S as Yt}from"./SaveProgressModal-_YG1j5mR.js";import{S as Xt}from"./Stepper-Dy8Yd_tO.js";import{F as qt,S as Kt,P as Zt}from"./NCDNumber-onWffecI.js";import{D as R}from"./OutcomeModal-DYPyLFVL.js";import{B as z}from"./BasicForm-C9nvD55q.js";import{B as L,u as x}from"./BasicCard-Czdzx0z8.js";import{_ as xt}from"./RiskAssessment.vue_vue_type_script_setup_true_lang-hCKmyeXk.js";import{c as W,f as Y}from"./formatServerData-BCqKeQAD.js";import"./lodash-NJiRuGo9.js";import"./apexcharts-DMAoEdNS.js";import"./AHDWorkflow.vue_vue_type_script_setup_true_lang-DZFKEvmj.js";import"./DashBox-2kbwCKtF.js";import"./LabOrdersList-jQv2qZEX.js";import"./group_validation-CLIPvBLt.js";import"./useFormWizard-D9Bg6Vun.js";import"./drug_prescription_service-Cys2sRGr.js";import"./patient_diagnosis_service-KAZWACrc.js";import"./ncd_appointment_service-BGUQKIcP.js";import"./DateInputField-BX75OEyG.js";import"./RadiologyStore-CUsjVSWV.js";import"./previousComplaints-DCblL5-T.js";import"./patient_complaints_service-cpTEErid.js";import"./usePatientProfile-DMaQyAKm.js";import"./Registration-D6ufroL_.js";import"./useLocation-SKDBI9Os.js";import"./vaccines_service-Bdo1pte5.js";import"./sms_service-fqOmSKWf.js";import"./EIRreportsStore-C3K2RALB.js";import"./Export-qG3-oxCB.js";import"./useNeonatalEnrollmentStore-3kwioDpG.js";import"./enrollment-DU-PLRUa.js";import"./OPDOutcome-Cx99z9QZ.js";import"./LevelOfConsciousness.vue_vue_type_script_setup_true_lang-BhA9KfmV.js";import"./VitalsMixin.vue_vue_type_script_lang-BhOc-Fbg.js";import"./TreatmentPlan-C8D9ODFS.js";import"./previousDiagnosis-rpMzC3-T.js";import"./OPDDiagnosis-BYUeHeFq.js";import"./FeatusModal-D1_lcxYG.js";import"./PastObstreticHistoryStore-gyrxS5gn.js";import"./UpcomingFeature-B_ep4Lpq.js";const te=b({name:"Menu",components:{IonContent:B,IonHeader:V,IonItem:S,IonList:w,IonMenu:F,IonTitle:P,IonToolbar:k,IonCheckbox:M,BasicForm:z,BasicCard:L},data(){return{iconsContent:H,test:"",cardData:{}}},computed:{...p(m,["patientHistoryHIV"])},watch:{patientHistoryHIV:{handler(){this.controllFields(),this.buildCards()},deep:!0}},mounted(){this.updateEnrollmentStores(),this.buildCards()},methods:{buildCards(){const t=m();this.cardData={mainTitle:"Enrollment",cards:[{cardTitle:"HIV history  ",content:this.patientHistoryHIV,initialData:t.getInitialPatientHistoryHIV()}]}},openModal(){g(R)},updateEnrollmentStores(){m().setPatientHistoryHIV(this.patientHistoryHIV)},controllFields(){wt(this.patientHistoryHIV,"HIV")=="R"?q(this.patientHistoryHIV,"ART_start_date","displayNone",!1):q(this.patientHistoryHIV,"ART_start_date","displayNone",!0)},async handleInputData(t){console.log(t.al),t.al&&(t.value.detail.checked?$(this.patientHistoryHIV,t.al.name,"displayNone",!1):$(this.patientHistoryHIV,t.al.name,"displayNone",!0))}}});function ee(t,e,c,r,l,h){const s=i("basic-card");return o(),y(s,{content:t.cardData,"onUpdate:inputValue":t.handleInputData},null,8,["content","onUpdate:inputValue"])}const ne=I(te,[["render",ee],["__scopeId","data-v-965a0906"]]),ie=b({name:"Menu",components:{IonContent:B,IonHeader:V,IonItem:S,IonList:w,IonMenu:F,IonTitle:P,IonToolbar:k,IonCheckbox:M,BasicForm:z,BasicCard:L},data(){return{iconsContent:H,test:"",cardData:{}}},computed:{...p(m,["familyHistory"])},watch:{familyHistory:{handler(){this.buildCards()},deep:!0}},async mounted(){this.buildCards()},methods:{buildCards(){this.cardData={mainTitle:"Enrollment",cards:[{cardTitle:"Family history",content:this.familyHistory}]}},openModal(){g(R)},updateEnrollmentStores(){m().setFamilyHistory(this.familyHistory)},testF(t){console.log(t)}}});function oe(t,e,c,r,l,h){const s=i("basic-card");return o(),y(s,{content:t.cardData},null,8,["content"])}const ae=I(ie,[["render",oe],["__scopeId","data-v-4c6d7db7"]]),se=b({name:"Menu",components:{IonContent:B,IonHeader:V,IonItem:S,IonList:w,IonMenu:F,IonTitle:P,IonToolbar:k,IonCheckbox:M,BasicForm:z,BasicCard:L},data(){return{iconsContent:H,test:"",cardData:{}}},computed:{...p(m,["traditionalMedicine"])},watch:{traditionalMedicine:{handler(){this.buildCards()},deep:!0}},mounted(){this.updateEnrollmentStores(),this.buildCards()},methods:{buildCards(){const t=m();this.cardData={mainTitle:"Enrollment",cards:[{cardTitle:"Traditional Medicine",content:this.traditionalMedicine,initialData:t.getInitialTraditionalMedicine()}]}},openModal(){g(R)},updateEnrollmentStores(){m().setTraditionalMedicine(this.traditionalMedicine)},async handleInputData(t){console.log(t.al),t.al&&(t.value.detail.checked?$(this.traditionalMedicine,t.al.name,"displayNone",!1):$(this.traditionalMedicine,t.al.name,"displayNone",!0))}}});function re(t,e,c,r,l,h){const s=i("basic-card");return o(),y(s,{content:t.cardData,"onUpdate:inputValue":t.handleInputData},null,8,["content","onUpdate:inputValue"])}const le=I(se,[["render",re],["__scopeId","data-v-efb5c045"]]),ce=b({name:"Menu",components:{IonContent:B,IonHeader:V,IonItem:S,IonList:w,IonMenu:F,IonTitle:P,IonToolbar:k,IonCheckbox:M,BasicForm:z,BasicCard:L},data(){return{iconsContent:H,test:"",cardData:{}}},computed:{...p(m,["patientTB"])},watch:{patientTB:{handler(){this.buildCards()},deep:!0}},mounted(){this.updateEnrollmentStores(),this.buildCards()},methods:{buildCards(){const t=m();this.cardData={mainTitle:"Enrollment",cards:[{cardTitle:"TB History",content:this.patientTB,initialData:t.getInitialPatientTB()}]}},openModal(){g(R)},updateEnrollmentStores(){m().setPatientTB(this.patientTB)},async handleInputData(t){console.log(t.al),t.al&&(t.value.detail.checked?$(this.patientTB,t.al.name,"displayNone",!1):$(this.patientTB,t.al.name,"displayNone",!0))}}});function de(t,e,c,r,l,h){const s=i("basic-card");return o(),y(s,{content:t.cardData,"onUpdate:inputValue":t.handleInputData},null,8,["content","onUpdate:inputValue"])}const pe=I(ce,[["render",de],["__scopeId","data-v-b58010a4"]]),me=b({name:"Menu",components:{IonContent:B,IonHeader:V,IonItem:S,IonList:w,IonMenu:F,IonTitle:P,IonToolbar:k,IonCheckbox:M,BasicForm:z,BasicCard:L},data(){return{iconsContent:H,test:"",cardData:{}}},computed:{...p(m,["patientType"])},watch:{patientType:{handler(){this.buildCards()},deep:!0}},async mounted(){this.buildCards()},methods:{buildCards(){this.cardData={mainTitle:"Enrollment",cards:[{cardTitle:"",content:this.patientType}]}},openModal(){g(R)},testF(t){console.log(t)}}});function ue(t,e,c,r,l,h){const s=i("basic-card");return o(),y(s,{content:t.cardData},null,8,["content"])}const ye=I(me,[["render",ue],["__scopeId","data-v-b8beb3da"]]),he=b({components:{IonLabel:et,IonAvatar:mt,IonRow:pt,IonImg:dt,IonCol:ct,IonList:w,IonItem:S,IonIcon:lt,IonButton:tt,DynamicButton:nt},data:()=>({selectedResult:{},iconsContent:H,isAnyAccordionOpen:!0,isLoading:!1}),methods:{dismiss(t){ut.dismiss(t)}}}),fe={key:0,class:"spinner-overlay"};function _e(t,e,c,r,l,h){const s=i("ion-spinner"),d=i("ion-title"),f=i("ion-icon"),T=i("ion-header"),v=i("center"),A=i("ion-content"),N=i("DynamicButton"),G=i("ion-col"),J=i("ion-row"),O=i("ion-footer");return o(),D(ht,null,[t.isLoading?(o(),D("div",fe,[n(s,{name:"bubbles"}),e[3]||(e[3]=u("div",{class:"loading-text"},"Please wait...",-1))])):_("",!0),n(T,{style:{display:"flex","justify-content":"space-between"}},{default:a(()=>[n(d,{class:"modalTitle"},{default:a(()=>[...e[4]||(e[4]=[yt("Enrollment",-1)])]),_:1}),n(f,{onClick:e[0]||(e[0]=U=>t.dismiss("dismiss")),style:{"padding-top":"10px","padding-right":"10px"},icon:t.iconsContent.cancel},null,8,["icon"])]),_:1}),n(A,{fullscreen:!0,class:"ion-padding",style:{"--background":"#fff"}},{default:a(()=>[n(v,null,{default:a(()=>[...e[5]||(e[5]=[u("h3",{class:"ion-padding"},"Do you want to enroll this patient in NCD Program?",-1)])]),_:1})]),_:1}),n(O,null,{default:a(()=>[n(J,null,{default:a(()=>[n(G,null,{default:a(()=>[n(N,{color:"danger",onClick:e[1]||(e[1]=U=>t.dismiss("dismiss")),name:"No",fill:"solid",style:{float:"right","margin-right":"2%",width:"100px"}}),n(N,{onClick:e[2]||(e[2]=U=>t.dismiss("Yes")),name:"Yes",fill:"solid",style:{float:"right","margin-right":"2%",width:"100px"}})]),_:1})]),_:1})]),_:1})],64)}const Ce=I(he,[["render",_e]]),De=b({name:"Home",components:{IonContent:B,IonHeader:V,IonMenuButton:Tt,IonPage:It,IonTitle:P,IonToolbar:k,Toolbar:Bt,ToolbarSearch:Vt,DemographicBar:jt,IonButton:tt,IonCard:Ht,IonCardContent:St,IonCardHeader:bt,IonCardSubtitle:gt,IonCardTitle:Dt,IonAccordion:Ct,IonAccordionGroup:_t,IonItem:S,IonLabel:et,IonModal:ft,Stepper:Xt,PatientHistory:Zt,PatientHistoryHIV:ne,EnrollmentDiagnosis:Kt,Substance:xt,NCDNumber:qt,FamilyHistory:ae,PatientHistoryTraditionalMedicine:le,PatientHistoryTB:pe,PatientType:ye,DynamicButton:nt},data(){return{iconsContent:H,demographic:!0,currentStep:"NCD Number, Patient Type & Family History",scanner:!1,steps:"",isOpen:!1,iconListStatus:"active_icon",iconGridStatus:"inactive_icon"}},watch:{$route:{async handler(t){await Z(),t.name=="NCDEnrollment"&&await this.checkEnrollment()},deep:!0}},computed:{...p(Qt,["apiStatus"]),...p(Jt,["patient"]),...p(Wt,["vitals"]),...p(Ut,["investigations"]),...p(Ot,["diagnosis"]),...p(x,["enrollmentDisplayType"]),...p(Gt,["NCDActivities"]),...p(m,["NCDNumber","enrollmentDiagnosis","substance","patientHistoryHIV","patientHistory","patientType","familyHistory","traditionalMedicine","patientTB"])},async mounted(){await Z(),await this.checkEnrollment(),this.setDisplayType(this.enrollmentDisplayType)},setup(){return{chevronBackOutline:Pt,checkmark:kt,arrowForwardCircle:$t,grid:Nt,list:vt}},methods:{async checkEnrollment(){await g(Ce,{class:"small-confirm-modal "})!="Yes"&&this.nav("/consultationPlan")},setCurrentStep(t){this.currentStep=t},nextStep(){const t=this.steps.indexOf(this.currentStep);t<this.steps.length-1&&(this.currentStep=this.steps[t+1])},previousStep(){const t=this.steps.indexOf(this.currentStep);t>0&&(this.currentStep=this.steps[t-1])},async saveData(){await this.saveNcdNumber()},async saveNcdNumber(){const t=JSON.parse(localStorage.getItem("userRoles")),e=t||[],c=Mt(this.NCDNumber,"NCDNumber","value");if(this.apiStatus){if(!c){j("NCD number is blank",5e3);return}if(c&&Ft.isNumber(c)==null){localStorage.getItem("locationID");const l=await Rt.get("site_prefix")+"-NCD-"+c;if(await zt.ncdNumberExists(l))j("NCD number already exists",5e3);else{const s=new Lt;this.patient.NcdID=l,s.createNcdNumber(l),await this.saveEnrollment(),await At();let d="";e.some(f=>f.role==="General Registration Clerk"||e.some(T=>T.role==="Vitals Clerk"||e.some(v=>v.role==="Registration Clerk")))&&K.getProgramID()==32||this.NCDActivities.length==0?d="home":d="consultationPlan",this.$router.push(d)}}else j("Invalid NCD number",5e3)}else{this.patient.NcdID="-",await this.saveEnrollment();let r="";e.some(l=>l.role==="General Registration Clerk"||e.some(h=>h.role==="Vitals Clerk"||e.some(s=>s.role==="Registration Clerk")))&&K.getProgramID()==32||this.NCDActivities.length==0?r="home":r="consultationPlan",this.$router.push(r)}},openModal(){g(Yt)},nav(t){this.$router.push(t)},setDisplayType(t){t=="grid"?this.currentStep="Enrollment":(this.currentStep="NCD Number, Patient Type & Family History",this.steps=["NCD Number, Patient Type & Family History","Patient History","HIV & TB History & Diagnosis"]),x().setEnrollmentDisplayType(t),this.setIconClass()},setIconClass(){this.iconListStatus="inactive_icon",this.iconGridStatus="inactive_icon",this.enrollmentDisplayType=="list"?this.iconListStatus="active_icon":this.enrollmentDisplayType=="grid"&&(this.iconGridStatus="active_icon")},async saveEnrollment(){var c,r,l;const t=JSON.parse(JSON.stringify(this.patient));(l=(r=(c=t.diagnosis)!=null?c:t.diagnosis={}).unsaved)!=null||(r.unsaved=[]);const e=await W(this.enrollmentDiagnosis);t.diagnosis.unsaved.push(...e),t.NCDEnrollment={unsaved:{familyMedicalHistory:await Y(this.familyHistory),patientRegistration:await Y(this.patientType),complications:await W(this.patientHistory),hivStatusAtEnrollment:await Y(this.patientHistoryHIV),tbReception:await W(this.patientTB),medicalHistory:await W(this.traditionalMedicine)},saved:[{}]},await Et(t)}}}),ge={class:"container"},be={class:"icon_div"},Se={key:0},He={key:1},Ie={key:0},Te={key:1},ve={style:{display:"flex","justify-content":"center"}},Ne={key:2},$e={key:0,class:"footer2"},ke={class:"footer position_content"};function Pe(t,e,c,r,l,h){const s=i("Toolbar"),d=i("DynamicButton"),f=i("ion-icon"),T=i("NCDNumber"),v=i("PatientType"),A=i("FamilyHistory"),N=i("ion-col"),G=i("PatientHistory"),J=i("PatientHistoryTraditionalMedicine"),O=i("PatientHistoryHIV"),U=i("PatientHistoryTB"),X=i("EnrollmentDiagnosis"),it=i("ion-row"),ot=i("ion-content"),Q=i("ion-breadcrumb"),at=i("ion-breadcrumbs"),st=i("ion-footer"),rt=i("ion-page");return o(),y(rt,null,{default:a(()=>[n(s),n(ot,null,{default:a(()=>[u("div",ge,[u("div",{style:{display:"flex","align-items":"center"},onClick:e[0]||(e[0]=C=>t.nav("patientProfile"))},[n(d,{fill:"clear",name:"Back to profile",iconSlot:"start",icon:t.iconsContent.arrowLeft},null,8,["icon"])]),e[9]||(e[9]=u("div",{class:"title"},[u("div",{class:"demographics_title"},"Enrollment")],-1)),u("div",be,[n(f,{class:E(t.iconListStatus),icon:t.list,onClick:e[1]||(e[1]=C=>t.setDisplayType("list"))},null,8,["class","icon"]),n(f,{class:E(t.iconGridStatus),style:{"font-size":"21px","margin-top":"1.5px"},icon:t.grid,onClick:e[2]||(e[2]=C=>t.setDisplayType("grid"))},null,8,["class","icon"])])]),t.enrollmentDisplayType=="grid"?(o(),D("div",Se,[t.enrollmentDisplayType=="grid"?(o(),y(it,{key:0,class:"card_row"},{default:a(()=>[n(N,{"size-sm":"12","size-md":"12","size-lg":"6","size-xl":"4"},{default:a(()=>[n(T),n(v),n(A)]),_:1}),n(N,{"size-sm":"12","size-md":"12","size-lg":"6","size-xl":"4"},{default:a(()=>[n(G),n(J)]),_:1}),n(N,{"size-sm":"12","size-md":"12","size-lg":"6","size-xl":"4"},{default:a(()=>[n(O),n(U),n(X)]),_:1})]),_:1})):_("",!0)])):_("",!0),t.enrollmentDisplayType=="list"?(o(),D("div",He,[t.currentStep=="NCD Number, Patient Type & Family History"?(o(),D("div",Ie,[n(T),n(v),n(A)])):_("",!0),t.currentStep=="Patient History"?(o(),D("div",Te,[u("div",ve,[n(G)])])):_("",!0),t.currentStep=="HIV & TB History & Diagnosis"?(o(),D("div",Ne,[n(O),n(X)])):_("",!0)])):_("",!0)]),_:1}),t.enrollmentDisplayType=="grid"?(o(),D("div",$e,[n(d,{name:"Save",iconSlot:"end",icon:t.iconsContent.saveWhite,onClick:e[3]||(e[3]=C=>t.saveData())},null,8,["icon"])])):_("",!0),t.enrollmentDisplayType=="list"?(o(),y(st,{key:1},{default:a(()=>[u("div",ke,[t.currentStep=="NCD Number, Patient Type & Family History"?(o(),y(d,{key:0,name:"Cancel",color:"danger",onClick:e[4]||(e[4]=C=>t.nav("/patientProfile"))})):(o(),y(d,{key:1,name:"Previous",icon:t.iconsContent.arrowLeftWhite,color:"medium",onClick:t.previousStep},null,8,["icon","onClick"])),n(at,{class:"breadcrumbs displayNoneMobile"},{default:a(()=>[n(Q,{onClick:e[5]||(e[5]=C=>t.setCurrentStep("NCD Number, Patient Type & Family History")),class:E({active:t.currentStep==="NCD Number, Patient Type & Family History"})},{default:a(()=>[e[10]||(e[10]=u("span",{class:"breadcrumb-text"},"NCD Number, Patient Type & Family History",-1)),n(f,{slot:"separator",size:"large",icon:t.iconsContent.arrowRight},null,8,["icon"])]),_:1},8,["class"]),n(Q,{onClick:e[6]||(e[6]=C=>t.setCurrentStep("Patient History")),class:E({active:t.currentStep==="Patient History"})},{default:a(()=>[e[11]||(e[11]=u("span",{class:"breadcrumb-text"},"Patient History",-1)),n(f,{slot:"separator",size:"large",icon:t.iconsContent.arrowRight},null,8,["icon"])]),_:1},8,["class"]),n(Q,{onClick:e[7]||(e[7]=C=>t.setCurrentStep("HIV & TB History & Diagnosis")),class:E({active:t.currentStep==="HIV & TB History & Diagnosis"})},{default:a(()=>[e[12]||(e[12]=u("span",{class:"breadcrumb-text"},"HIV & TB History & Diagnosis",-1)),n(f,{slot:"separator",size:"large",icon:t.iconsContent.arrowRight},null,8,["icon"])]),_:1},8,["class"])]),_:1}),t.currentStep=="HIV & TB History & Diagnosis"?(o(),y(d,{key:2,name:"Save",iconSlot:"end",icon:t.iconsContent.saveWhite,onClick:e[8]||(e[8]=C=>t.saveData())},null,8,["icon"])):(o(),y(d,{key:3,name:"Next",iconSlot:"end",icon:t.iconsContent.arrowRightWhite,onClick:t.nextStep},null,8,["icon","onClick"]))])]),_:1})):_("",!0)]),_:1})}const bn=I(De,[["render",Pe],["__scopeId","data-v-1ee32262"]]);export{bn as default};
