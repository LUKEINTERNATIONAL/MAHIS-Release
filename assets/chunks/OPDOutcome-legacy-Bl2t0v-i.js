System.register(["./vendor-legacy-CdypqbXP.js","../index-legacy-CQ-7M6kd.js","./LevelOfConsciousness.vue_vue_type_script_setup_true_lang-legacy-D55OUvl1.js","./previousComplaints-legacy-rFhIy4lZ.js","./patient_complaints_service-legacy-CE7KASDZ.js","./DashBox-legacy-_gz6Wzjn.js","./NextAppointment-legacy-B7_xdaAW.js","./drug_prescription_service-legacy-CnmefQBQ.js","./nonPharmaTherapyStore-legacy-Dgf8Ss9q.js","./lodash-legacy-pOOc9Efu.js","./Outcome-legacy-CSvd9eX3.js"],function(e,a){"use strict";var t,n,o,l,i,r,s,d,c,u,m,p,v,h,b,f,g,y,_,x,w,k,C,A,D,O,P,T,S,E,N,F,V,I,Y,H,B,M,U,R,L,z,q,G,W,j,$,K,X,J,Q,Z,ee,ae,te,ne,oe,le,ie,re,se,de,ce,ue,me,pe,ve,he,be,fe,ge,ye,_e,xe,we,ke,Ce,Ae,De,Oe,Pe,Te,Se,Ee,Ne,Fe,Ve,Ie,Ye,He,Be,Me,Ue,Re,Le,ze,qe,Ge,We,je,$e,Ke,Xe,Je,Qe,Ze,ea,aa,ta,na,oa,la,ia,ra,sa,da,ca,ua,ma,pa,va;return{setters:[e=>{t=e.d,n=e.b2,o=e.r,l=e.c,i=e.a,r=e.H,s=e.e,d=e.f,c=e.l,u=e.m,m=e.O,p=e.J,v=e.k,h=e.u,b=e.a6,f=e.Q,g=e.F,y=e.w,_=e.av,x=e.c1,w=e.P,k=e.aM,C=e.K,A=e.p,D=e.bz,O=e.af,P=e.L,T=e.eA,S=e.eB,E=e.bq,N=e.bb,F=e.eC,V=e.eD,I=e.dc,Y=e.eE,H=e.eF,B=e.eG,M=e.dh,U=e.c0,R=e.at,L=e.ax,z=e.c8,q=e.n,G=e.a2,W=e.bF,j=e.aj,$=e.ai,K=e.N,X=e.by,J=e.ac,Q=e.br,Z=e.b3,ee=e.bt,ae=e.aa,te=e.c6,ne=e.bB,oe=e.ah,le=e.R,ie=e.bw,re=e.aS,se=e.aE,de=e.be,ce=e.bC,ue=e.dx,me=e.ed,pe=e.aV,ve=e.ad},e=>{he=e.u,be=e.n,fe=e.x,ge=e.y,ye=e.aY,_e=e.z,xe=e.D,we=e.a0,ke=e.t,Ce=e.S,Ae=e.F,De=e.b,Oe=e.Z,Pe=e._,Te=e.an,Se=e.H,Ee=e.be,Ne=e.P,Fe=e.b0,Ve=e.o,Ie=e.b7,Ye=e.$,He=e.B,Be=e.aG,Me=e.c,Ue=e.aw,Re=e.w,Le=e.aA,ze=e.b1,qe=e.az},e=>{Ge=e.e,We=e.a,je=e.m,$e=e.b,Ke=e.v,Xe=e.c,Je=e._},e=>{Qe=e.u,Ze=e.p},e=>{ea=e.P},e=>{aa=e.D},e=>{ta=e.A,na=e.D,oa=e.a},e=>{la=e.a,ia=e.b},e=>{ra=e.P},e=>{sa=e.l},e=>{da=e._,ca=e.D,ua=e.A,ma=e.R,pa=e.a,va=e.b}],execute:function(){var a=document.createElement("style");a.textContent=".vitals_title[data-v-482c7b52]{border-bottom:1px solid #b3b3b3;margin-bottom:50px}.input-with-icon[data-v-482c7b52]{position:relative}.input-icon[data-v-482c7b52]{position:absolute;left:10px;top:50%;transform:translateY(-50%);color:gray}ion-col[data-v-482c7b52]{padding-bottom:15px}h5[data-v-482c7b52]{margin-top:0;text-overflow:ellipsis;white-space:nowrap;overflow:hidden}.previousView[data-v-482c7b52]{margin-top:70px;margin-bottom:20px}.visit-section[data-v-b14ceaf9]{margin-bottom:1.2rem;padding:1rem;background:#fff;border-radius:12px;border:1px solid #e5e7eb}.section-header[data-v-b14ceaf9]{display:flex;align-items:center;gap:.6rem;margin-bottom:1rem}.section-icon[data-v-b14ceaf9]{font-size:20px;color:#c62828}h3[data-v-b14ceaf9]{font-size:1rem;font-weight:600;margin:0}.no-data[data-v-b14ceaf9]{text-align:center;padding:1.2rem;color:#6b7280}.no-data-icon[data-v-b14ceaf9]{font-size:2rem;color:#16a34a}.accordion-section[data-v-b14ceaf9]{border-top:1px solid #f0f0f0}.accordion-header[data-v-b14ceaf9]{display:flex;justify-content:space-between;padding:.8rem 0;cursor:pointer}.acc-left[data-v-b14ceaf9]{display:flex;align-items:center;gap:.6rem}.acc-icon[data-v-b14ceaf9]{font-size:1.1rem;color:#065f46}.acc-title[data-v-b14ceaf9]{font-weight:600}.acc-count[data-v-b14ceaf9]{font-size:.8rem;color:#6b7280}.chevron[data-v-b14ceaf9]{transition:.2s ease;color:#6b7280}.chevron.rotate[data-v-b14ceaf9]{transform:rotate(180deg)}.accordion-body[data-v-b14ceaf9]{padding:.5rem 0 .8rem .2rem}.allergy-item[data-v-b14ceaf9]{display:flex;gap:.6rem;padding:.4rem .6rem;font-size:.95rem;background:#f9fafb;border-radius:6px;margin-bottom:.3rem}.item-label[data-v-b14ceaf9]{font-weight:600;color:#059669;background:#d1fae5;padding:.2rem .6rem;border-radius:4px;font-size:.85rem;white-space:nowrap}.item-value[data-v-b14ceaf9]{color:#1f2937;font-weight:500;background:#fff;padding:.2rem .6rem;border-radius:4px;flex:1}.visit-container[data-v-382ca63a]{background:#fff;border-radius:16px;box-shadow:0 4px 12px rgba(0,0,0,.05);padding:24px;margin:16px;font-family:Segoe UI,Roboto,Helvetica Neue,sans-serif}.visit-header[data-v-382ca63a]{display:flex;justify-content:space-between;align-items:center;margin-bottom:24px;padding-bottom:16px;border-bottom:1px solid #f0f0f0}.visit-header h5[data-v-382ca63a]{margin:0;font-size:1.25rem;font-weight:600;color:#2d3748}.visit-sections[data-v-382ca63a]{display:flex;flex-direction:column;gap:20px}.visit-section[data-v-382ca63a]{background:#f8fafc;border-radius:12px;padding:16px;transition:all .2s ease}.visit-section[data-v-382ca63a]:hover{box-shadow:0 2px 8px rgba(0,0,0,.08);transform:translateY(-2px)}.section-header[data-v-382ca63a]{display:flex;align-items:center;gap:12px;margin-bottom:16px}.section-header h3[data-v-382ca63a]{margin:0;font-size:1.1rem;font-weight:500;color:#2d3748}.section-icon[data-v-382ca63a]{color:#4299e1;font-size:1.4rem}.section-content[data-v-382ca63a]{display:flex;flex-direction:column;gap:12px}.info-item[data-v-382ca63a]{display:flex;gap:8px}.info-label[data-v-382ca63a]{font-weight:500;color:#4a5568;min-width:120px}.info-value[data-v-382ca63a]{color:#2d3748}.highlight[data-v-382ca63a]{font-weight:600;color:#3182ce}.tags-container[data-v-382ca63a]{display:flex;flex-wrap:wrap;gap:8px}.complaint-tag[data-v-382ca63a],.medical-tag[data-v-382ca63a],.allergy-tag[data-v-382ca63a]{padding:6px 12px;border-radius:20px;font-size:.85rem;font-weight:500}.complaint-tag[data-v-382ca63a]{background:#ebf8ff;color:#3182ce}.medical-tag[data-v-382ca63a]{background:#f0fff4;color:#38a169}.allergy-tag[data-v-382ca63a]{background:#fff5f5;color:#e53e3e}.complaints-container[data-v-382ca63a]{display:flex;flex-direction:column;gap:12px}.complaint-item[data-v-382ca63a]{display:flex;justify-content:space-between;margin-right:70%;align-items:center;padding:8px 12px;background:#f8fafc;border-radius:8px;gap:10px}.complaint-name[data-v-382ca63a]{font-weight:500;color:#2d3748;white-space:nowrap}.complaint-duration[data-v-382ca63a]{color:#718096;font-size:.9em;white-space:nowrap}.exam-section[data-v-382ca63a]{display:flex;flex-direction:column;gap:16px}.exam-category[data-v-382ca63a]{background:#fff;border-radius:8px;padding:12px;box-shadow:0 1px 3px rgba(0,0,0,.05)}.exam-category-header[data-v-382ca63a]{display:flex;align-items:center;gap:8px;margin-bottom:8px}.exam-category-header h4[data-v-382ca63a]{margin:0;font-size:.95rem;font-weight:500;color:#4a5568}.exam-category-header ion-icon[data-v-382ca63a]{color:#718096;font-size:1.1rem}.exam-items[data-v-382ca63a]{display:flex;flex-wrap:wrap;gap:8px}.exam-item[data-v-382ca63a]{background:#f7fafc;padding:6px 10px;border-radius:6px;font-size:.85rem;color:#4a5568}.exam-item.normal[data-v-382ca63a]{background:#e6ffed;color:#38a169}@media(max-width:768px){.visit-container[data-v-382ca63a]{padding:16px;margin:8px}.visit-header[data-v-382ca63a]{flex-direction:column;align-items:flex-start;gap:8px}.tags-container[data-v-382ca63a],.complaints-container[data-v-382ca63a]{gap:6px}.complaint-tag[data-v-382ca63a],.medical-tag[data-v-382ca63a],.allergy-tag[data-v-382ca63a]{padding:4px 10px;font-size:.8rem}}._card[data-v-f7298259]{border-radius:5px;background-color:#fff;box-shadow:rgba(0,0,0,.2) 0 3px 1px -2px,rgba(0,0,0,.14) 0 2px 2px,rgba(0,0,0,.12) 0 1px 5px;margin-bottom:10px}ion-item[data-v-f7298259]::part(native){border:none}.previousView[data-v-f7298259]{margin-top:10px}.previousLabel[data-v-f7298259]{font-weight:700;font-size:1rem}.nav-buttons[data-v-f7298259]{display:flex;justify-content:flex-start;gap:10px;margin-top:10px}ion-accordion[data-v-f7298259]::part(header){padding:8px}.ion-padding[data-v-f7298259]{padding-top:0}.required-badge[data-v-f7298259]{color:#d32f2f;font-size:.75rem;font-weight:600;margin-left:8px;background-color:#ffebee;padding:2px 8px;border-radius:4px;text-transform:uppercase}#container[data-v-14c793af]{text-align:center;position:absolute;left:0;right:0;top:50%;transform:translateY(-50%)}#container strong[data-v-14c793af]{font-size:20px;line-height:26px}#container p[data-v-14c793af]{font-size:16px;line-height:22px;color:#8c8c8c;margin:0}#container a[data-v-14c793af]{text-decoration:none}ion-item.medicalAl[data-v-14c793af]{--background: #fff;--border-radius: 5px}ion-button.medicalAlBtn[data-v-14c793af]{--background: #fecdca;--color: #b42318;text-transform:none}.error-label[data-v-14c793af]{background:#fecdca;color:#b42318;text-transform:none;padding:2%;border-radius:10px;margin-top:7px;display:flex;text-align:center}ion-button.addMedicalTpBtn[data-v-14c793af]{--background: #ddeedd;--color: #006401;text-transform:none;font-weight:600;font-size:16px}ion-button.medicalAlAddBtn[data-v-14c793af]{font-size:large}ion-icon.icon-al[data-v-14c793af]{font-size:x-large;margin-bottom:-5px}.item-al[data-v-14c793af]{cursor:pointer;padding:5px;background-color:#ebebeb;margin-top:8px}.item-al[data-v-14c793af]:hover{background-color:rgba(85,81,81,.282);padding:5px;border-radius:3px}ion-popover.popover-al[data-v-14c793af]{--background: #fff}ion-content.content-al[data-v-14c793af]{--background: #fff}ion-list.list-al[data-v-14c793af]{--background: #fff;-ion-item-background:#fff}.checkLbltp[data-v-14c793af]{border-bottom:2px dotted var(--ion-color-medium);--inner-border-width: 0}.tpStndCls[data-v-14c793af]{font-size:16px;font-weight:600;line-height:24px}.action_buttons[data-v-14c793af]{color:var(--ion-color-primary);display:flex;align-items:center;float:right}.action_buttons[data-v-14c793af]:hover{cursor:pointer}.spcls[data-v-14c793af]{display:flex;align-items:center}.previousView[data-v-14c793af]{width:100%;border-radius:10px;margin-top:10px}.previousLabel[data-v-14c793af]{font-weight:600;color:#000}.previousLabelDate[data-v-14c793af]{font-weight:600;color:#000;margin:2%}.previousSecDrgs[data-v-14c793af]{margin:2%}.notes_p[data-v-14c793af]{margin:4%}.qaws[data-v-14c793af]{margin-top:-27px}.allergies-section[data-v-14c793af]{background:#fff;border-radius:8px;box-shadow:0 2px 4px rgba(0,0,0,.05);margin-bottom:10px}.section-title[data-v-14c793af]{display:flex;align-items:center;font-size:18px;font-weight:700;color:#1f2937;letter-spacing:-.01em;margin-bottom:16px}.allergies-container[data-v-14c793af]{min-height:48px}.allergies-grid[data-v-14c793af]{display:flex;flex-wrap:wrap;gap:8px}.allergy-chip[data-v-14c793af]{--background: #fee2e2;--color: #dc2626;font-size:14px;font-weight:500}.allergy-chip ion-icon[data-v-14c793af]{color:#dc2626}.no-allergies[data-v-14c793af]{display:flex;align-items:center;justify-content:center;height:48px;background:#f9fafb;border-radius:6px;font-size:15px;font-weight:500;color:#9c8011}.medication-section[data-v-14c793af]{background:#fff;border-radius:8px;padding:16px;margin:16px 0;box-shadow:0 1px 3px rgba(0,0,0,.1)}.section-header[data-v-14c793af]{margin-bottom:16px;--background: transparent}.section-icon[data-v-14c793af]{font-size:22px;margin-right:10px;color:var(--ion-color-primary)}.medication-content[data-v-14c793af]{padding:0 16px}.add-medication-form[data-v-14c793af]{background:#f9fafb;border-radius:8px;padding:20px;margin-top:16px}.form-group[data-v-14c793af]{margin-bottom:16px}.form-row[data-v-14c793af]{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:16px;margin-bottom:16px}.input-label[data-v-14c793af]{display:block;font-size:16px;font-weight:600;color:#374151;margin-bottom:10px}.error-message[data-v-14c793af]{color:#dc2626;font-size:15px;font-weight:600;margin-top:4px}.action-buttons[data-v-14c793af]{display:flex;gap:8px;justify-content:flex-end;margin-top:16px}.save-button[data-v-14c793af]{--background: var(--ion-color-primary);--color: #ffffff;font-size:16px;font-weight:600}.cancel-button[data-v-14c793af]{--background: #e5e7eb;--color: #374151;font-size:16px;font-weight:600}.add-new-button[data-v-14c793af]{width:100%;margin-top:16px;--background: var(--ion-color-primary-tint);--color: var(--ion-color-primary);font-size:16px;font-weight:600}.notes-section[data-v-14c793af]{background:#fff;border-radius:8px;padding:16px;margin:16px 0;box-shadow:0 1px 3px rgba(0,0,0,.1)}.notes-content[data-v-14c793af]{padding:0 16px}.intervention-component[data-v-14c793af],.notes-input-container[data-v-14c793af]{margin-bottom:16px}.notes-input-item[data-v-14c793af]{--background: #f9fafb;--border-radius: 8px;--padding-start: 12px;--padding-end: 12px;min-height:120px}.edit-icon[data-v-14c793af]{color:var(--ion-color-medium);font-size:20px;margin-right:8px}.notes-textarea[data-v-14c793af]{--padding-top: 12px;--padding-bottom: 12px;--placeholder-color: #9ca3af;--placeholder-opacity: 1;font-size:16px;font-weight:600;line-height:1.6}.previous-notes[data-v-14c793af]{background:#fff;border-radius:8px;overflow:hidden}.previous-notes-header[data-v-14c793af]{--background: #f9fafb;font-weight:600}.notes-timeline[data-v-14c793af]{padding:8px 0}.note-entry[data-v-14c793af]{padding:12px 16px;border-bottom:1px solid #e5e7eb}.note-entry[data-v-14c793af]:last-child{border-bottom:none}.note-date[data-v-14c793af]{font-size:14px;font-weight:600;color:#374151;margin-bottom:8px}.note-content[data-v-14c793af]{font-size:16px;font-weight:600;line-height:1.6;color:#4b5563;white-space:pre-wrap}.show-more-header[data-v-14c793af]{--background: transparent;font-size:16px;font-weight:600}[data-v-14c793af] ion-accordion{margin:0}[data-v-14c793af] ion-accordion-group{background:#fff}[data-v-14c793af] ion-accordion.accordion-expanding,[data-v-14c793af] ion-accordion.accordion-expanded{--background: #ffffff}[data-v-14c793af]{transition:font-size .2s ease,font-weight .2s ease}[data-v-14c793af] .multiselect__option{font-size:16px!important;font-weight:600!important;color:#000}.form-grid[data-v-b051bf57]{display:grid;grid-template-columns:repeat(2,1fr);gap:1rem;padding:1rem 0}.form-field[data-v-b051bf57]{display:flex;flex-direction:column;gap:.5rem}.form-field.full-width[data-v-b051bf57]{grid-column:1 / -1}.error-label[data-v-b051bf57]{background:#fecdca;color:#b42318;padding:.5rem;border-radius:8px;font-size:.875rem;margin-top:4px}.button-container[data-v-b051bf57]{grid-column:1 / -1;display:flex;justify-content:flex-end;gap:1rem}.full-width-divider[data-v-b051bf57]{grid-column:1 / -1;width:100%}@media(max-width:768px){.form-grid[data-v-b051bf57]{grid-template-columns:1fr}}.initTxt[data-v-624d1093]{text-align:center}.spc_btwn[data-v-624d1093]{margin-top:2%}.item-al[data-v-624d1093]{cursor:pointer;padding:5px;background-color:#ebebeb;margin-top:8px}.item-al[data-v-624d1093]:hover{background-color:rgba(85,81,81,.282);padding:5px;border-radius:3px}ion-popover.popover-al[data-v-624d1093]{--background: #fff}ion-list.list-al[data-v-624d1093]{--background: #fff;-ion-item-background:#fff}.saveContainer[data-v-624d1093]{display:flex;align-items:flex-end}.action_buttons[data-v-624d1093]{margin-top:5px}.error-label[data-v-624d1093]{background:#fecdca;color:#b42318;text-transform:none;padding:6%;border-radius:10px;margin-top:7px;display:flex;text-align:center}\n/*$vite$:1*/",document.head.appendChild(a);const ha={key:0},ba={style:{"align-content":"center"}},fa={class:"ion-padding",slot:"content"},ga=e("P",Pe(t({__name:"PresentingComplaints",setup(e,{expose:a}){const t=Qe(),{presentingComplaints:y}=n(t),_=he(),{patient:x}=n(_),w=o(be),k=o(!0),C=o(!1),A=o(!1),D=o(!0),O=o(!1),P=o([]),T=o([]),S=o(),E=o(null),N=o(null),F=(e,a)=>{var t;if(!e||!a)return null;const n=null===(t=x.value)||void 0===t||null===(t=t.personInformation)||void 0===t?void 0:t.birthdate;if(!n)return null;const o=Number(e);if(isNaN(o)||o<=0)return null;const l=new Date(n),i=new Date,r=i.getTime()-l.getTime();let s;switch(a){case"Hours":s=r/36e5;break;case"Days":s=r/864e5;break;case"Weeks":s=r/6048e5;break;case"Months":s=12*(i.getFullYear()-l.getFullYear())+(i.getMonth()-l.getMonth()),i.getDate()<l.getDate()&&s--;break;case"Years":s=i.getFullYear()-l.getFullYear(),(i.getMonth()<l.getMonth()||i.getMonth()===l.getMonth()&&i.getDate()<l.getDate())&&s--;break;default:return null}return o>s?"Duration cannot be before patient's birth date":null},V=l(()=>[{componentType:"multiSelectInputField",header:"Presenting Complaints",name:"PresentingComplaints",trackBy:"concept_id",icon:be.search,hideSelected:!0,validation:e=>B(null==e?void 0:e.name,P.value)?"Presenting complaint already added":fe.required(e),options:T.value,grid:{s:"6"}},{componentType:"inputField",header:"Duration",name:"duration",icon:be.time,validation:e=>{E.value=e;const a=fe.isNotEmptyandNumber(e);if(a)return a;const t=N.value;if(!t)return null;const n=F(e,t);return console.log("Birthdate validation result:",n),n},grid:{s:"6"},unitOptions:[{label:"Hours",value:"Hours"},{label:"Days",value:"Days"},{label:"Weeks",value:"Weeks"},{label:"Months",value:"Months"},{label:"Years",value:"Years"}],unitValidation:e=>(N.value=e,e&&""!==e?null:"Please select a unit.")},{componentType:"inputField",header:"Specify the presenting complaint(s)",name:"Other (specify)",icon:be.editPen,validation:e=>B(e,P.value)?"Presenting complaint already added":fe.required(e),condition:e=>{var a;return"Other"===(null==e||null===(a=e.PresentingComplaints)||void 0===a?void 0:a.name)}},{componentType:"Alert",condition:e=>{var a;return null!=fe.required(null==e||null===(a=e.PresentingComplaints)||void 0===a?void 0:a.name)},backgroundColor:"lightyellow",textColor:"black",value:"Please search thoroughly for the complaint. If it is not listed, search and select the 'Other' option to specify the complaint.",name:"noMatchAlert"}]),{formRef:I}=ge(),Y=e=>{var a;const t=e.duration+" "+e.duration_unit,n=e.PresentingComplaints,o="Other"===n.name?e["Other (specify)"]:n.name;P.value.push({actionBtn:!0,btn:["delete"],name:o,concept_id:n.concept_id,duration:n.duration,durationUnits:n.duration_unit,display:[o,t],data:[{concept_id:8578,value_coded:n.concept_id,obs_datetime:Ce.getSessionDate(),child:[{concept_id:n.concept_id,value_text:t,obs_datetime:Ce.getSessionDate()}]}]}),null===(a=I.value)||void 0===a||a.resetForm(),O.value=!0,H()},H=()=>{const e=["Cough","Convulsions"];C.value=P.value.some(a=>e.includes(a.name))},B=(e,a)=>a.some(a=>a.name===e),M=e=>{P.value=P.value.filter(a=>a.display[0]!==e.name)};return i(async()=>{await(async()=>{T.value=await ea.getComplaintsList("Presenting complaint"),we(y.value,"PresentingComplaints","multiSelectData",T.value)})()}),a({onSubmit:async()=>{const e=await Ae.getObsByEncounterIdAndDate(De.PRESENTING_COMPLAINTS),a=P.value.flatMap(e=>e.data);return a.length<=0&&e.length<=0?(ke("Presenting complaints is required"),!1):(a.length<=0||(await Ae.addObsToEncounterPatient(a,De.PRESENTING_COMPLAINTS),Oe("Presenting complaints saved successful"),P.value=[]),!0)}}),(e,a)=>{const t=r("ion-row"),n=r("ion-label"),o=r("ion-accordion"),l=r("ion-accordion-group");return d(),s(g,null,[c(aa,{status:k.value,content:"No presenting complaints added"},null,8,["status"]),O.value?(d(),s("span",ha,[c(ye,{listData:P.value,"onClicked:delete":M},null,8,["listData"])])):u("",!0),A.value?(d(),m(t,{key:1},{default:p(()=>[c(_e,{formData:V.value,ref_key:"formRef",ref:I},null,8,["formData"]),v("div",ba,[c(xe,{fill:"clear",icon:w.value.plus,iconSlot:"icon-only","onClicked:btn":a[0]||(a[0]=e=>(async()=>{var e,a;const t=null===(e=I.value)||void 0===e?void 0:e.getFormValues();if(t.duration&&t.duration_unit){console.log("Validating duration against birthdate...");const e=F(t.duration,t.duration_unit);if(console.log("Validation result:",e),e)return void ke(e)}else console.log("Skipping birthdate validation - missing duration or unit");null==(null===(a=I.value)||void 0===a?void 0:a.validateForm())&&(Y(t),A.value=!1,D.value=!0)})()),name:"Save"},null,8,["icon"])])]),_:1})):u("",!0),D.value?(d(),m(t,{key:2,style:{"margin-top":"10px"}},{default:p(()=>[c(xe,{fill:"clear",icon:w.value.plus,iconSlot:"icon-only","onClicked:btn":a[1]||(a[1]=e=>(k.value=!1,D.value=!1,void(A.value=!0))),name:"Add new presenting complaints"},null,8,["icon"])]),_:1})):u("",!0),c(t,null,{default:p(()=>[c(l,{ref_key:"accordionGroup",ref:S,class:"previousView"},{default:p(()=>[c(o,{value:"first","toggle-icon-slot":"start",style:{"border-radius":"10px","background-color":"#fff"}},{default:p(()=>[c(h(b),{slot:"header",color:"light"},{default:p(()=>[c(n,{class:"previousLabel"},{default:p(()=>[...a[2]||(a[2]=[f("Previous presenting complaints",-1)])]),_:1})]),_:1}),v("div",fa,[c(Ze)])]),_:1})]),_:1},512)]),_:1})],64)}}}),[["__scopeId","data-v-482c7b52"]])),ya={class:"visit-section"},_a={class:"section-header"},xa={key:0,class:"no-data"},wa={key:1,class:"allergy-accordion"},ka=["onClick"],Ca={class:"acc-left"},Aa={class:"acc-title"},Da={class:"acc-count"},Oa={key:0,class:"accordion-body"},Pa={class:"item-label"},Ta={class:"item-value"},Sa=Pe(t({__name:"AllergiesListing",setup(e){const a=he(),{patient:t}=n(a),m=o({}),p=o([]),b={antiviral:/abacavir|lamivudine|lopinavir|ritonavir|zidovudine|efavirenz|tenofovir/i,antibiotic:/penicillin|amoxicillin|cephalexin|azithromycin|ciprofloxacin|doxycycline/i,analgesic:/aspirin|ibuprofen|acetaminophen|morphine|codeine|tramadol/i,cardiac:/metoprolol|lisinopril|amlodipine|atorvastatin|warfarin/i,activated:/activated\s+charcoal/i},f={985:{name:"Drug Allergy",severity:"danger"},7759:{name:"Location/Environmental",severity:"info"},7579:{name:"Medical Condition",severity:"warning"},drug:{name:"Drug Allergy",severity:"danger"},food:{name:"Food Allergy",severity:"danger"},environmental:{name:"Environmental",severity:"warning"},contact:{name:"Contact Allergy",severity:"warning"},unknown:{name:"Drug Allergy",severity:"danger"}},O=async()=>{try{var e;if(null===(e=t.value)||void 0===e||!e.patientID)return;const a=await Ae.getObsByEncounterIdAndDate(De.MEDICAL_HISTORY),n=await Te.getConceptID("Allergic"),o=a.filter(e=>e.concept_id===n);p.value=await Promise.all(o.map(async e=>{var a,t;const n=(null===(a=e.value_coded)||void 0===a?void 0:a.toString())||"unknown",o=await Te.getConceptName(e.value_coded);let l=(null===(t=f[n])||void 0===t?void 0:t.name)||"Drug Allergy",i=e.value_text||o||"Unknown";return"985"===n&&e.value_text&&(l=(e=>{const a=e.toLowerCase();return b.antiviral.test(a)?"Antiviral Medication":b.antibiotic.test(a)?"Antibiotic":b.analgesic.test(a)?"Pain Medication":b.cardiac.test(a)?"Cardiac Medication":b.activated.test(a)?"Detoxification Agent":"Medication"})(e.value_text)),{name:l,displayValue:i,date:e.obs_datetime||e.encounter_datetime,conceptId:n}}));const l=Object.keys(T.value);l.length>0&&(m.value[l[0]]=!0)}catch(a){console.error("Error loading allergies:",a)}},P=l(()=>p.value.length>0),T=l(()=>{const e={};p.value.forEach(a=>{const t=a.date?S(a.date):"Unknown Date";e[t]||(e[t]=[]),e[t].push(a)});const a={};return Object.keys(e).sort((e,a)=>"Unknown Date"===e?1:"Unknown Date"===a?-1:new Date(a).getTime()-new Date(e).getTime()).forEach(t=>{a[t]=e[t]}),a}),S=e=>{if(!e)return"Unknown Date";try{return new Date(e).toISOString().split("T")[0]}catch(a){return"Unknown Date"}},E=e=>{if("Unknown Date"===e)return"Unknown Date";try{const a=new Date(e),t=Se.sessionDate(),n=new Date(t),o=new Date(n);o.setDate(o.getDate()-1);const l=a.toDateString(),i=n.toDateString(),r=o.toDateString();return l===i?"Today":l===r?"Yesterday":a.toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})}catch(a){return e}};return y(()=>{var e;return null===(e=t.value)||void 0===e?void 0:e.patientID},async e=>{e&&await O()},{immediate:!0}),y(()=>{var e;return null===(e=t.value)||void 0===e?void 0:e.observations},async(e,a)=>{e!==a&&await O()},{deep:!0}),i(async()=>{await O()}),(e,a)=>{const t=r("ion-icon");return d(),s("div",ya,[v("div",_a,[c(t,{icon:h(_),class:"section-icon"},null,8,["icon"]),a[0]||(a[0]=v("h3",null,"Allergies",-1))]),P.value?(d(),s("div",wa,[(d(!0),s(g,null,w(T.value,(e,a)=>(d(),s("div",{key:a,class:"accordion-section"},[v("div",{class:A(["accordion-header",{open:m.value[a]}]),onClick:e=>(e=>{m.value[e]=!m.value[e]})(a)},[v("div",Ca,[c(t,{icon:h(k),class:"acc-icon"},null,8,["icon"]),v("span",Aa,C(E(a)),1),v("span",Da,"("+C(e.length)+")",1)]),c(t,{icon:h(D),class:A(["chevron",{rotate:m.value[a]}])},null,8,["icon","class"])],10,ka),m.value[a]?(d(),s("div",Oa,[(d(!0),s(g,null,w(e,(e,a)=>(d(),s("div",{class:"allergy-item",key:a},[v("span",Pa,C(e.name)+":",1),v("span",Ta,C(e.displayValue),1)]))),128))])):u("",!0)]))),128))])):(d(),s("div",xa,[c(t,{icon:h(x),class:"no-data-icon"},null,8,["icon"]),a[1]||(a[1]=v("p",null,"No known allergies",-1))]))])}}}),[["__scopeId","data-v-b14ceaf9"]]),Ea=t({name:"VisitHistory",components:{AllergiesListing:Sa,IonIcon:P},setup(){const e=Ee();return{selectedAllergiesList2:l(()=>e.selectedMedicalAllergiesList),alertCircleOutline:_,documentTextOutline:z,femaleOutline:L,medicalOutline:R,warningOutline:U,bodyOutline:T,eyeOutline:M,nutritionOutline:B,fitnessOutline:V,pulseOutline:N,earOutline:H,happyOutline:Y,manOutline:I,moveOutline:F,addOutline:E,scanOutline:S}},data:()=>({presentingComplaintsWithDuration:[],pastMedicalHistory:[],levelOfConsciousness:{eyeResponse:null,verbalResponse:null,motorResponse:null},pregnancy:{patientPregnant:null,breastFeeding:null},allergyList:[],physicalExamCategories:{Eyes:{icon:M,abnormalities:[],normal:!1},Mouth:{icon:B,abnormalities:[],normal:!1},Ears:{icon:H,abnormalities:[],normal:!1},Face:{icon:Y,abnormalities:[],normal:!1},Neck:{icon:I,abnormalities:[],normal:!1},Chest:{icon:V,abnormalities:[],normal:!1},"Chest Movement":{icon:F,abnormalities:[],normal:!1},"Heart Sounds":{icon:N,abnormalities:[],normal:!1},"Breath Sounds":{icon:E,abnormalities:[],normal:!1},"Added Breath Sounds":{icon:E,abnormalities:[],normal:!1},"Abdominal Inspection":{icon:S,abnormalities:[],normal:!1},"Genital Examination":{icon:T,abnormalities:[],normal:!1}}}),computed:{...O(he,["patient"]),hasLevelOfConsciousness(){return this.levelOfConsciousness.eyeResponse||this.levelOfConsciousness.verbalResponse||this.levelOfConsciousness.motorResponse},hasPresentingComplaints(){var e;return(null===(e=this.presentingComplaintsWithDuration)||void 0===e?void 0:e.length)>0},hasPregnancyData(){return this.pregnancy.patientPregnant||this.pregnancy.breastFeeding},hasPastMedicalHistory(){var e;return(null===(e=this.uniquePastMedicalHistory)||void 0===e?void 0:e.length)>0},hasAllergies(){var e;return(null===(e=this.allergyList)||void 0===e?void 0:e.length)>0},hasPhysicalExam(){return Object.values(this.physicalExamCategories).some(e=>e.abnormalities.length>0||e.normal)},uniquePastMedicalHistory(){return[...new Set(this.pastMedicalHistory)]},uniquePresentingComplaints(){return[...new Set(this.presentingComplaintsWithDuration.map(e=>e.name))]},isMinor(){var e;return Se.getAgeInYears(null===(e=this.patient)||void 0===e||null===(e=e.personInformation)||void 0===e?void 0:e.birthdate)<18},gcsScore(){var e,a,t;if(!this.hasLevelOfConsciousness)return null;const n=this.levelOfConsciousness.eyeResponse,o=this.levelOfConsciousness.motorResponse,l=this.levelOfConsciousness.verbalResponse,i=n&&null!==(e=(this.isMinor?Ge:We)[n])&&void 0!==e?e:0,r=o&&null!==(a=(this.isMinor?je:$e)[o])&&void 0!==a?a:0,s=l&&null!==(t=(this.isMinor?Ke:Xe)[l])&&void 0!==t?t:0;return`(M ${r} V ${s} E ${i}) ${i+r+s}/${this.isMinor?5:15}`}},methods:{async updateData(){var e;null!==(e=this.patient)&&void 0!==e&&e.patientID&&(await this.loadPresentingComplaints(),await this.loadPastMedicalHistory(),await this.loadLevelOfConsciousness(),await this.loadPregnancyStatus(),await this.loadPhysicalExam(),await this.loadAllergies())},async loadPresentingComplaints(){try{const e=await Ae.getObsByEncounterIdAndDate(De.PRESENTING_COMPLAINTS);this.presentingComplaintsWithDuration=[];const a=e.filter(e=>8578===e.concept_id);for(const t of a){const e=await Te.getConceptName(t.value_coded);let a="Duration not specified";t.children&&Array.isArray(t.children)&&t.children.length>0?a=t.children[0].value_text||"Duration not specified":t.child&&Array.isArray(t.child)&&t.child.length>0&&(a=t.child[0].value_text||"Duration not specified"),this.presentingComplaintsWithDuration.push({name:e,duration:a})}console.log("Loaded complaints:",this.presentingComplaintsWithDuration)}catch(e){console.error("Error loading presenting complaints:",e)}},async loadPastMedicalHistory(){try{const e=(await Ae.getObsByEncounterIdAndDate(De.PAST_MEDICAL_HISTORY)).filter(e=>"Chronic disease"===e.concept_name);this.pastMedicalHistory=await Promise.all(e.map(async e=>await Te.getConceptName(e.value_coded)))}catch(e){console.error("Error loading past medical history:",e)}},async loadLevelOfConsciousness(){try{const e=await Ae.getObsByEncounterIdAndDate(De.ASSESSMENT);if(e&&Array.isArray(e)){const a=e.find(e=>"Eye opening response"===e.concept_name);this.levelOfConsciousness.eyeResponse=null!=a&&a.value_coded?await Te.getConceptName(a.value_coded):null;const t=e.find(e=>"Best verbal response"===e.concept_name);this.levelOfConsciousness.verbalResponse=null!=t&&t.value_coded?await Te.getConceptName(t.value_coded):null;const n=e.find(e=>"Best motor response"===e.concept_name);this.levelOfConsciousness.motorResponse=null!=n&&n.value_coded?await Te.getConceptName(n.value_coded):null}}catch(e){console.error("Error loading level of consciousness:",e)}},async loadPregnancyStatus(){try{const e=await Ae.getObsByEncounterIdAndDate(De.PREGNANCY_STATUS);if(e&&Array.isArray(e)){const a=e.find(e=>"Patient pregnant"===e.concept_name);this.pregnancy.patientPregnant=null!=a&&a.value_coded?await Te.getConceptName(a.value_coded):null;const t=e.find(e=>"Is patient breast feeding?"===e.concept_name);this.pregnancy.breastFeeding=null!=t&&t.value_coded?await Te.getConceptName(t.value_coded):null}}catch(e){console.error("Error loading pregnancy status:",e)}},async loadAllergies(){try{const e=await Ae.getObsByEncounterIdAndDate(De.MEDICAL_HISTORY),a=await Te.getConceptID("Allergic"),t=e.filter(e=>e.concept_id===a);this.allergyList=await Promise.all(t.map(async e=>e.value_text||await Te.getConceptName(e.value_coded)))}catch(e){console.error("Error loading allergies:",e)}},async loadPhysicalExam(){try{const e=await Ae.getObsByEncounterIdAndDate(De.PHYSICAL_EXAMINATION);Object.values(this.physicalExamCategories).forEach(e=>{e.abnormalities=[],e.normal=!1});for(const a of e){if(!a.concept_name)continue;const e=a.concept_name,t=a.value_text;"Eyes normal"===e&&"Yes"===t?this.physicalExamCategories.Eyes.normal=!0:("Abnormality for eyes"===e&&t||"Other eye abnormality notes"===e&&t)&&this.physicalExamCategories.Eyes.abnormalities.push(t),"Mouth normal"===e&&"Yes"===t?this.physicalExamCategories.Mouth.normal=!0:("Abnormality for  mouth"===e&&t||"Other mouth abnormality notes"===e&&t)&&this.physicalExamCategories.Mouth.abnormalities.push(t),"Ears normal"===e&&"Yes"===t?this.physicalExamCategories.Ears.normal=!0:("Abnormality for ears"===e&&t||"Other ears abnormality notes"===e&&t)&&this.physicalExamCategories.Ears.abnormalities.push(t),"Face normal"===e&&"Yes"===t?this.physicalExamCategories.Face.normal=!0:("Abnormality for face"===e&&t||"Other face abnormality notes"===e&&t)&&this.physicalExamCategories.Face.abnormalities.push(t),"Neck normal"===e&&"Yes"===t?this.physicalExamCategories.Neck.normal=!0:("Abnormality for neck"===e&&t||"Other neck abnormality notes"===e&&t)&&this.physicalExamCategories.Neck.abnormalities.push(t),"Chest inspection normal"===e&&"Yes"===t?this.physicalExamCategories.Chest.normal=!0:("Abnormality for  chest inspection"===e&&t||"Other chest abnormality notes"===e&&t)&&this.physicalExamCategories.Chest.abnormalities.push(t),"Chest movements"===e&&t&&this.physicalExamCategories["Chest Movement"].abnormalities.push(t),"Heart sounds normal"===e&&"Yes"===t?this.physicalExamCategories["Heart Sounds"].normal=!0:"Heart sounds abnormality"===e&&t&&this.physicalExamCategories["Heart Sounds"].abnormalities.push(t),"Breath sounds normal"===e&&"Yes"===t?this.physicalExamCategories["Breath Sounds"].normal=!0:"Breath sounds abnormality"===e&&t&&this.physicalExamCategories["Breath Sounds"].abnormalities.push(t),"Abnormalities when added"===e&&t&&this.physicalExamCategories["Added Breath Sounds"].abnormalities.push(t),"Abdominal inspection normal"===e&&"Yes"===t?this.physicalExamCategories["Abdominal Inspection"].normal=!0:("Abdominal inspection abnormality"===e&&t||"Other abdominal abnormality notes"===e&&t||"Abdominal auscultation abnormality"===e&&t||"Bowel sounds abnormality"===e&&t||"Abdominal palpation abnormality"===e&&t)&&this.physicalExamCategories["Abdominal Inspection"].abnormalities.push(t),"Genital examination normal"===e&&"Yes"===t?this.physicalExamCategories["Genital Examination"].normal=!0:("Genital examination abnormality"===e&&t||"Urethral meatus abnormalities"===e&&t||"Vulva inspection abnormalities"===e&&t||"Other genital abnormality notes"===e&&t)&&this.physicalExamCategories["Genital Examination"].abnormalities.push(t)}}catch(e){console.error("Error loading physicalExam:",e)}}},watch:{patient:{async handler(){await this.updateData()},deep:!0}},async mounted(){await this.updateData()}}),Na={class:"visit-container"},Fa={class:"visit-sections"},Va={key:0,class:"visit-section"},Ia={class:"section-header"},Ya={class:"section-content"},Ha={key:0,class:"info-item"},Ba={class:"info-value"},Ma={key:1,class:"info-item"},Ua={class:"info-value"},Ra={key:2,class:"info-item"},La={class:"info-value"},za={key:3,class:"info-item"},qa={class:"info-value highlight"},Ga={key:1,class:"visit-section"},Wa={class:"section-header"},ja={class:"complaints-container"},$a={class:"complaint-name"},Ka={class:"complaint-duration"},Xa={key:2,class:"visit-section"},Ja={class:"section-header"},Qa={class:"section-content"},Za={key:0,class:"info-item"},et={class:"info-value highlight"},at={key:1,class:"info-item"},tt={class:"info-value highlight"},nt={key:3,class:"visit-section"},ot={class:"section-header"},lt={class:"tags-container"},it={key:4,class:"visit-section"},rt={class:"section-header"},st={class:"tags-container"},dt={key:5,class:"visit-section"},ct={class:"section-header"},ut={class:"exam-section"},mt={key:0,class:"exam-category"},pt={class:"exam-category-header"},vt={class:"exam-items"},ht={key:1,class:"exam-item normal"},bt=Pe(Ea,[["render",function(e,a,t,n,o,l){const i=r("ion-icon");return d(),s("div",Na,[a[12]||(a[12]=v("div",{class:"visit-header"},[v("h5",null,"Patient's Clinical Assessment Summary")],-1)),v("div",Fa,[e.hasLevelOfConsciousness?(d(),s("div",Va,[v("div",Ia,[c(i,{icon:e.alertCircleOutline,class:"section-icon"},null,8,["icon"]),a[0]||(a[0]=v("h3",null,"Level of Consciousness",-1))]),v("div",Ya,[e.levelOfConsciousness.eyeResponse?(d(),s("div",Ha,[a[1]||(a[1]=v("span",{class:"info-label"},"Eye Response:",-1)),v("span",Ba,C(e.levelOfConsciousness.eyeResponse),1)])):u("",!0),e.levelOfConsciousness.verbalResponse?(d(),s("div",Ma,[a[2]||(a[2]=v("span",{class:"info-label"},"Verbal Response:",-1)),v("span",Ua,C(e.levelOfConsciousness.verbalResponse),1)])):u("",!0),e.levelOfConsciousness.motorResponse?(d(),s("div",Ra,[a[3]||(a[3]=v("span",{class:"info-label"},"Motor Response:",-1)),v("span",La,C(e.levelOfConsciousness.motorResponse),1)])):u("",!0),e.gcsScore?(d(),s("div",za,[a[4]||(a[4]=v("span",{class:"info-label"},"Score:",-1)),v("span",qa,C(e.gcsScore),1)])):u("",!0)])])):u("",!0),e.hasPresentingComplaints?(d(),s("div",Ga,[v("div",Wa,[c(i,{icon:e.documentTextOutline,class:"section-icon"},null,8,["icon"]),a[5]||(a[5]=v("h3",null,"Presenting Complaints",-1))]),v("div",ja,[(d(!0),s(g,null,w(e.presentingComplaintsWithDuration,(e,a)=>(d(),s("div",{class:"complaint-item",key:a},[v("div",$a,C(e.name),1),v("div",Ka,C(e.duration),1)]))),128))])])):u("",!0),e.hasPregnancyData?(d(),s("div",Xa,[v("div",Ja,[c(i,{icon:e.femaleOutline,class:"section-icon"},null,8,["icon"]),a[6]||(a[6]=v("h3",null,"Pregnancy Status",-1))]),v("div",Qa,[e.pregnancy.patientPregnant?(d(),s("div",Za,[a[7]||(a[7]=v("span",{class:"info-label"},"Pregnant:",-1)),v("span",et,C(e.pregnancy.patientPregnant),1)])):u("",!0),e.pregnancy.breastFeeding?(d(),s("div",at,[a[8]||(a[8]=v("span",{class:"info-label"},"Breastfeeding:",-1)),v("span",tt,C(e.pregnancy.breastFeeding),1)])):u("",!0)])])):u("",!0),e.hasPastMedicalHistory?(d(),s("div",nt,[v("div",ot,[c(i,{icon:e.medicalOutline,class:"section-icon"},null,8,["icon"]),a[9]||(a[9]=v("h3",null,"Medical History",-1))]),v("div",lt,[(d(!0),s(g,null,w(e.uniquePastMedicalHistory,(e,a)=>(d(),s("div",{class:"medical-tag",key:a},C(e),1))),128))])])):u("",!0),e.hasAllergies?(d(),s("div",it,[v("div",rt,[c(i,{icon:e.warningOutline,class:"section-icon"},null,8,["icon"]),a[10]||(a[10]=v("h3",null,"Allergies",-1))]),v("div",st,[(d(!0),s(g,null,w(e.allergyList,(e,a)=>(d(),s("div",{class:"allergy-tag",key:a},C(e),1))),128))])])):u("",!0),e.hasPhysicalExam?(d(),s("div",dt,[v("div",ct,[c(i,{icon:e.bodyOutline,class:"section-icon"},null,8,["icon"]),a[11]||(a[11]=v("h3",null,"Physical Examination",-1))]),v("div",ut,[(d(!0),s(g,null,w(e.physicalExamCategories,(e,a)=>(d(),s(g,{key:a},[e.abnormalities.length>0||e.normal?(d(),s("div",mt,[v("div",pt,[c(i,{icon:e.icon},null,8,["icon"]),v("h4",null,C(a),1)]),v("div",vt,[e.abnormalities.length>0?(d(!0),s(g,{key:0},w(e.abnormalities,(e,a)=>(d(),s("div",{class:"exam-item abnormal",key:a},C(e),1))),128)):e.normal?(d(),s("div",ht,"Normal examination")):u("",!0)])])):u("",!0)],64))),128))])])):u("",!0)])])}],["__scopeId","data-v-382ca63a"]]),ft={class:"modal_wrapper"},gt=e("_",t({__name:"PregnancyBreastfeeding",setup(e,{expose:a}){const t=o(null),n=o(0),i=l(()=>[{componentType:"radioButtonField",header:"Are you pregnant?",name:"Patient pregnant",options:[{value:"Yes",label:"Yes"},{value:"No",label:"No"}],grid:{s:"12"}},{grid:{s:"12"},componentType:"Dashes"},{componentType:"radioButtonField",header:"Breastfeeding?",name:"Is patient breast feeding?",options:[{value:"Yes",label:"Yes"},{value:"No",label:"No"}],grid:{s:"12"}}]);return a({validateForm:()=>{var e;return null===(e=t.value)||void 0===e?void 0:e.validateForm()},onSubmit:async()=>{if(!t.value)return!1;const e=t.value.validateForm();if(e)return console.log("Validation errors:",e),ke("Please fix validation errors before submitting"),!1;const a=t.value.getFormValues();console.log("Form data:",a);const o=await(async e=>{const a=[];for(const[n,o]of Object.entries(e))if(o&&!1!==o&&""!==o&&"string"==typeof o)try{const e=await Te.getConceptID(o,!0);e?a.push(await Ae.buildValueCoded(n,e)):a.push(await Ae.buildValueText(n,o))}catch(t){a.push(await Ae.buildValueText(n,o))}return a})(a);return 0===o.length?(ke("No pregnancy status data to save"),!1):(await Ae.addObsToEncounterPatient(o,De.PREGNANCY_STATUS),n.value++,await q(),Oe("Pregnancy status saved successfully"),!0)},resetForm:()=>{n.value++}}),(e,a)=>(d(),s("div",ft,[(d(),m(_e,{formData:i.value,ref_key:"formRef",ref:t,key:n.value},null,8,["formData"]))]))}})),yt=t({__name:"PastMedicalHistory",setup(e,{expose:a}){const t=(()=>{const e=he(),{patient:a}=n(e);return{resetForm:()=>{},pastMedicalHistoryFormSection:l(()=>{var e,t;return[{componentType:"Heading",name:"Existing Chronic Health Conditions",grid:{s:"12"}},{componentType:"checkboxField",name:"TB",label:"TB",type:"single",grid:{s:"12"},disabled:e=>e.None,onChange:(e,a)=>{const t={};return e||(t["TB treatment"]="",t["TB drugs"]=null,t["TB drug start date"]=""),t}},{componentType:"radioButtonField",header:"On TB medication",name:"TB treatment",options:[{value:"Yes",label:"Yes"},{value:"No",label:"No"}],grid:{s:"12"},condition:e=>!0===e.TB,onChange:(e,a)=>{const t={};return"Yes"!==e&&(t["TB drugs"]=null,t["TB drug start date"]=""),t}},{componentType:"multiSelectInputField",header:"Select medication",name:"TB drugs",isMultiple:!1,trackBy:"name",grid:{s:"6"},icon:be.search,options:[{name:"Auramine 'O' (C.I. 41000) 50g"},{name:"Bedaquilline 100mg"},{name:"Clofazimine 100mg"},{name:"Clofazimine 50mg"}],condition:e=>!0===e.TB&&"Yes"===e["TB treatment"]},{componentType:"dateInputField",header:"Start date",name:"TB drug start date",grid:{s:"6"},condition:e=>!0===e.TB&&"Yes"===e["TB treatment"],minDate:(null===(e=a.value)||void 0===e||null===(e=e.personInformation)||void 0===e?void 0:e.birthdate)||void 0,maxDate:(new Date).toISOString().split("T")[0]},{grid:{s:"12"},componentType:"Dashes"},{componentType:"checkboxField",name:"Chronic Obstructive Pulmonary Disease (COPD)",label:"Chronic Obstructive Pulmonary Disease (COPD)",type:"single",grid:{s:"12"},disabled:e=>e.None,onChange:()=>({})},{grid:{s:"12"},componentType:"Dashes"},{componentType:"checkboxField",name:"Asthma",label:"Asthma",type:"single",grid:{s:"12"},disabled:e=>e.None,onChange:()=>({})},{grid:{s:"12"},componentType:"Dashes"},{componentType:"checkboxField",name:"Epilepsy",label:"Epilepsy",type:"single",grid:{s:"12"},disabled:e=>e.None,onChange:()=>({})},{grid:{s:"12"},componentType:"Dashes"},{componentType:"checkboxField",name:"Previous stroke",label:"Previous stroke",type:"single",grid:{s:"12"},disabled:e=>e.None,onChange:()=>({})},{grid:{s:"12"},componentType:"Dashes"},{componentType:"checkboxField",name:"Peptic Ulcer Disease (PUD)",label:"Peptic Ulcer Disease (PUD)",type:"single",grid:{s:"12"},disabled:e=>e.None,onChange:()=>({})},{grid:{s:"12"},componentType:"Dashes"},{componentType:"checkboxField",name:"Mental disorder",label:"Mental disorder",type:"single",grid:{s:"12"},disabled:e=>e.None,onChange:()=>({})},{grid:{s:"12"},componentType:"Dashes"},{componentType:"checkboxField",name:"Bleeding disorders",label:"Bleeding disorders",type:"single",grid:{s:"12"},disabled:e=>e.None,onChange:()=>({})},{grid:{s:"12"},componentType:"Dashes"},{componentType:"checkboxField",name:"Hypertension",label:"Hypertension",type:"single",grid:{s:"12"},disabled:e=>e.None,onChange:(e,a)=>{const t={};return e||(t["Hypertension medication"]="",t["Current hypertension treatment regimen"]=null),t}},{componentType:"radioButtonField",header:"On medication",name:"Hypertension medication",options:[{value:"Yes",label:"Yes"},{value:"No",label:"No"}],grid:{s:"12"},condition:e=>!0===e.Hypertension,onChange:(e,a)=>{const t={};return"Yes"!==e&&(t["Current hypertension treatment regimen"]=null),t}},{componentType:"multiSelectInputField",header:"Select medication",name:"Current hypertension treatment regimen",isMultiple:!1,trackBy:"name",grid:{s:"12"},icon:be.search,options:[{name:"Captopril 12.5mg"},{name:"Aspirin 75mg"},{name:"Hydrochlorothiazide 25mg"},{name:"Enalapril Meleate 5mg"},{name:"Enalapril Maleate 10mg"}],condition:e=>!0===e.Hypertension&&"Yes"===e["Hypertension medication"]},{grid:{s:"12"},componentType:"Dashes"},{componentType:"checkboxField",name:"HIV Positive",label:"HIV Positive",type:"single",grid:{s:"12"},disabled:e=>e.None,onChange:(e,a)=>{const t={};return e||(t["HIV status"]="",t["ARV start date"]=""),t}},{componentType:"radioButtonField",header:"Is the patient on ART",name:"HIV status",options:[{value:"Yes",label:"Yes"},{value:"No",label:"No"}],grid:{s:"12"},condition:e=>!0===e["HIV Positive"],onChange:(e,a)=>{const t={};return"Yes"!==e&&(t["ARV start date"]=""),t}},{componentType:"dateInputField",header:"Enter ARV start date",name:"ARV start date",grid:{s:"12"},condition:e=>!0===e["HIV Positive"]&&"Yes"===e["HIV status"],minDate:(null===(t=a.value)||void 0===t||null===(t=t.personInformation)||void 0===t?void 0:t.birthdate)||void 0,maxDate:(new Date).toISOString().split("T")[0]},{grid:{s:"12"},componentType:"Dashes"},{componentType:"checkboxField",name:"Diabetes Mellitus",label:"Diabetes Mellitus",type:"single",grid:{s:"12"},disabled:e=>e.None,onChange:(e,a)=>{const t={};return e||(t.Diabetes="",t["Controlled by"]=""),t}},{componentType:"radioButtonField",header:"Type",name:"Diabetes",options:[{value:"Type 1 diabetes",label:"Type I"},{value:"Type 2 diabetes",label:"Type II"},{value:"Unknown",label:"Unsure"}],grid:{s:"12"},condition:e=>!0===e["Diabetes Mellitus"]},{componentType:"radioButtonField",header:"Controlled by",name:"Controlled by",options:[{value:"Diet",label:"Diet"},{value:"Tablets",label:"Tablets"},{value:"Insulin",label:"Insulin"}],grid:{s:"12"},condition:e=>!0===e["Diabetes Mellitus"]},{grid:{s:"12"},componentType:"Dashes"},{componentType:"checkboxField",name:"None",label:"None",type:"single",grid:{s:"12"},onChange:(e,a)=>{const t={};return e&&(t.TB=!1,t["Chronic Obstructive Pulmonary Disease (COPD)"]=!1,t.Asthma=!1,t.Epilepsy=!1,t["Previous stroke"]=!1,t["Peptic Ulcer Disease (PUD)"]=!1,t["Mental disorder"]=!1,t["Bleeding disorders"]=!1,t.Hypertension=!1,t["HIV Positive"]=!1,t["Diabetes Mellitus"]=!1,t["TB treatment"]="",t["TB drugs"]=null,t["TB drug start date"]="",t["Hypertension medication"]="",t["Current hypertension treatment regimen"]=null,t["HIV status"]="",t["ARV start date"]="",t.Diabetes="",t["Controlled by"]=""),t}}]})}})(),r=o(null),s=o(0),c=he(),{patient:u}=n(c);y(()=>{var e;return null===(e=u.value)||void 0===e?void 0:e.patientID},async(e,a)=>{e&&e!==a&&(console.log("Patient changed, resetting form"),s.value++,await q(),await q())}),y(()=>{var e;return null===(e=r.value)||void 0===e||null===(e=e.getFormValues())||void 0===e?void 0:e.None},e=>{e&&r.value&&q(()=>{})});const p=async e=>{const a=[];for(const[n,o]of Object.entries(e))if(o&&!1!==o&&""!==o)if("boolean"==typeof o&&!0===o)try{const e=await Te.getConceptID(n,!0);e&&a.push(await Ae.buildValueCoded("Chronic disease",e))}catch(t){a.push(await Ae.buildValueText("Chronic disease",n))}else"string"==typeof o?a.push(await Ae.buildValueText(n,o)):"object"==typeof o&&null!=o&&o.name?a.push(await Ae.buildValueText(n,o.name)):(o instanceof Date||/^\d{4}-\d{2}-\d{2}$/.test(o))&&a.push(await Ae.buildValueDate(n,o));return console.log("Processed past medical history:",a),a};i(async()=>{console.log("Past medical history form mounted"),await q(),await q()});const v=l(()=>t.pastMedicalHistoryFormSection.value);return a({validateForm:()=>{var e;return null===(e=r.value)||void 0===e?void 0:e.validateForm()},onSubmit:async()=>{if(!r.value)return console.error("Form reference is not available"),!1;const e=r.value.validateForm();if(e)return console.log("Validation errors:",e),ke("Please fix validation errors before submitting"),!1;const a=r.value.getFormValues();console.log("Form data:",a);const t=await p(a);return 0===t.length?(ke("No past medical history data to save"),!1):(await Ae.addObsToEncounterPatient(t,De.PAST_MEDICAL_HISTORY),s.value++,await q(),await q(),Oe("Past medical history saved successfully"),!0)},resetForm:()=>{s.value++}}),(e,a)=>(d(),m(_e,{formData:v.value,ref_key:"formRef",ref:r,key:s.value},null,8,["formData"]))}}),_t=e("a",t({__name:"PhysicalExamination",setup(e,{expose:a}){const t=(()=>{const e=he(),{patient:a}=n(e);return{resetForm:()=>{},physicalExaminationFormSection:l(()=>{var e;const t=null===(e=a.value)||void 0===e||null===(e=e.personInformation)||void 0===e?void 0:e.gender,n="M"===t,o="F"===t;return[{componentType:"radioButtonField",header:"Has physical examination been done?",name:"Physical examination",options:[{value:"Yes",label:"Yes"},{value:"No",label:"No"}],grid:{s:"12"},onChange:(e,a)=>{if("No"===e)return{"Eyes normal":"","Abnormality for eyes":[],"Other eye abnormality notes":"","Mouth normal":"","Abnormality for  mouth":[],"Other mouth abnormality notes":"","Ears normal":"","Abnormality for ears":[],"Other ears abnormality notes":"","Face normal":"","Abnormality for face":[],"Other face abnormality notes":"","Neck normal":"","Abnormality for neck":[],"Other neck abnormality notes":"","Chest inspection normal":"","Abnormality for  chest inspection":[],"Other chest abnormality notes":"","Chest movements":"","Heart sounds normal":"","Heart sounds abnormality":[],"Breath sounds normal":"","Breath sounds abnormality":[],"Abnormalities when added":[],"Abdominal inspection normal":"","Abdominal inspection abnormality":[],"Other abdominal abnormality notes":"","Abdominal auscultation normal":"","Abdominal auscultation abnormality":[],"Other abdominal auscultation abnormality notes":"","Bowel sounds abnormality":[],"Abdominal palpation normal":"","Abdominal palpation abnormality":[],"Other abdominal palpation abnormality notes":"","Genital examination normal":"","Genital examination abnormality":[],"Urethral meatus abnormalities":[],"Vulva inspection abnormalities":[],"Other genital abnormality notes":"","Extremities normal":"","Abnormality for extremities":[],"Other extremities abnormalities notes":""}}},{grid:{s:"12"},componentType:"Dashes"},{componentType:"radioButtonField",header:"Reason why physical examination not done?",name:"Reason why physical examination not done",options:[{value:"Condition does not necessitate assessment",label:"Condition does not necessitate assessment"},{value:"Patient refused to consent",label:"Patient refused to consent"}],grid:{s:"12"},condition:e=>"No"===e["Physical examination"]},{componentType:"radioButtonField",header:"Eyes normal?",name:"Eyes normal",options:[{value:"Yes",label:"Yes"},{value:"No",label:"No"}],grid:{s:"12"},condition:e=>"Yes"===e["Physical examination"],onChange:(e,a)=>{if("Yes"===e)return{"Abnormality for eyes":[],"Other eye abnormality notes":""}}},{componentType:"checkboxField",header:"What are the abnormalities on eyes?",name:"Abnormality for eyes",type:"multiple",options:[{value:"Pallor",label:"Pallor"},{value:"Jaundice",label:"Jaundice"},{value:"Ulcerations",label:"Ulcerations"},{value:"Other eye abnormality",label:"Other eye abnormality"}],grid:{s:"12"},condition:e=>"Yes"===e["Physical examination"]&&"No"===e["Eyes normal"],onChange:(e,a)=>{if(null==e||!e.includes("Other eye abnormality"))return{"Other eye abnormality notes":""}}},{componentType:"inputField",header:"Specify eye abnormality",name:"Other eye abnormality notes",icon:be.editPen,grid:{s:"12"},condition:e=>"Yes"===e["Physical examination"]&&"No"===e["Eyes normal"]&&Array.isArray(e["Abnormality for eyes"])&&e["Abnormality for eyes"].includes("Other eye abnormality")},{grid:{s:"12"},componentType:"Dashes"},{componentType:"radioButtonField",header:"Mouth normal?",name:"Mouth normal",options:[{value:"Yes",label:"Yes"},{value:"No",label:"No"}],grid:{s:"12"},condition:e=>"Yes"===e["Physical examination"],onChange:(e,a)=>{if("Yes"===e)return{"Abnormality for  mouth":[],"Other mouth abnormality notes":""}}},{componentType:"checkboxField",header:"What are the abnormalities in the mouth?",name:"Abnormality for  mouth",type:"multiple",options:[{value:"Oral thrush",label:"Oral thrush"},{value:"Kaposi's Sarcoma lesions",label:"Kaposi's Sarcoma lesions"},{value:"Sores",label:"Sores"},{value:"Other mouth abnormality",label:"Other mouth abnormality"}],grid:{s:"12"},condition:e=>"Yes"===e["Physical examination"]&&"No"===e["Mouth normal"],onChange:(e,a)=>{if(null==e||!e.includes("Other mouth abnormality"))return{"Other mouth abnormality notes":""}}},{componentType:"inputField",header:"Specify mouth abnormality",name:"Other mouth abnormality notes",icon:be.editPen,grid:{s:"12"},condition:e=>"Yes"===e["Physical examination"]&&"No"===e["Mouth normal"]&&Array.isArray(e["Abnormality for  mouth"])&&e["Abnormality for  mouth"].includes("Other mouth abnormality")},{grid:{s:"12"},componentType:"Dashes"},{componentType:"radioButtonField",header:"Ears normal?",name:"Ears normal",options:[{value:"Yes",label:"Yes"},{value:"No",label:"No"}],grid:{s:"12"},condition:e=>"Yes"===e["Physical examination"],onChange:(e,a)=>{if("Yes"===e)return{"Abnormality for ears":[],"Other ears abnormality notes":""}}},{componentType:"checkboxField",header:"What are the abnormalities on ears?",name:"Abnormality for ears",type:"multiple",options:[{value:"Ear discharge",label:"Ear discharge"},{value:"Bleeding",label:"Bleeding"},{value:"Other ears abnormality",label:"Other ears abnormality"}],grid:{s:"12"},condition:e=>"Yes"===e["Physical examination"]&&"No"===e["Ears normal"],onChange:(e,a)=>{if(null==e||!e.includes("Other ears abnormality"))return{"Other ears abnormality notes":""}}},{componentType:"inputField",header:"Specify ears abnormality",name:"Other ears abnormality notes",icon:be.editPen,grid:{s:"12"},condition:e=>"Yes"===e["Physical examination"]&&"No"===e["Ears normal"]&&Array.isArray(e["Abnormality for ears"])&&e["Abnormality for ears"].includes("Other ears abnormality")},{grid:{s:"12"},componentType:"Dashes"},{componentType:"radioButtonField",header:"Face normal?",name:"Face normal",options:[{value:"Yes",label:"Yes"},{value:"No",label:"No"}],grid:{s:"12"},condition:e=>"Yes"===e["Physical examination"],onChange:(e,a)=>{if("Yes"===e)return{"Abnormality for face":[],"Other face abnormality notes":""}}},{componentType:"checkboxField",header:"What are the abnormalities on face?",name:"Abnormality for face",type:"multiple",options:[{value:"Rash",label:"Rash"},{value:"Swelling",label:"Swelling"},{value:"Other face abnormality",label:"Other face abnormality"}],grid:{s:"12"},condition:e=>"Yes"===e["Physical examination"]&&"No"===e["Face normal"],onChange:(e,a)=>{if(null==e||!e.includes("Other face abnormality"))return{"Other face abnormality notes":""}}},{componentType:"inputField",header:"Specify face abnormality",name:"Other face abnormality notes",icon:be.editPen,grid:{s:"12"},condition:e=>"Yes"===e["Physical examination"]&&"No"===e["Face normal"]&&Array.isArray(e["Abnormality for face"])&&e["Abnormality for face"].includes("Other face abnormality")},{grid:{s:"12"},componentType:"Dashes"},{componentType:"radioButtonField",header:"Neck normal?",name:"Neck normal",options:[{value:"Yes",label:"Yes"},{value:"No",label:"No"}],grid:{s:"12"},condition:e=>"Yes"===e["Physical examination"],onChange:(e,a)=>{if("Yes"===e)return{"Abnormality for neck":[],"Other neck abnormality notes":""}}},{componentType:"checkboxField",header:"What are the abnormalities on the neck?",name:"Abnormality for neck",type:"multiple",options:[{value:"Neck rash",label:"Neck rash"},{value:"Swelling",label:"Swelling"},{value:"Neck mass",label:"Neck mass"},{value:"Other neck abnormality",label:"Other neck abnormality"}],grid:{s:"12"},condition:e=>"Yes"===e["Physical examination"]&&"No"===e["Neck normal"],onChange:(e,a)=>{if(null==e||!e.includes("Other neck abnormality"))return{"Other neck abnormality notes":""}}},{componentType:"inputField",header:"Specify neck abnormality",name:"Other neck abnormality notes",icon:be.editPen,grid:{s:"12"},condition:e=>"Yes"===e["Physical examination"]&&"No"===e["Neck normal"]&&Array.isArray(e["Abnormality for neck"])&&e["Abnormality for neck"].includes("Other neck abnormality")},{grid:{s:"12"},componentType:"Dashes"},{componentType:"radioButtonField",header:"Chest inspection normal?",name:"Chest inspection normal",options:[{value:"Yes",label:"Yes"},{value:"No",label:"No"}],grid:{s:"12"},condition:e=>"Yes"===e["Physical examination"],onChange:(e,a)=>{if("Yes"===e)return{"Abnormality for  chest inspection":[],"Other chest abnormality notes":""}}},{componentType:"checkboxField",header:"What are the abnormalities on the chest?",name:"Abnormality for  chest inspection",type:"multiple",options:[{value:"Chest rash",label:"Chest rash"},{value:"Chest burns",label:"Chest burns"},{value:"Chest bruises",label:"Chest bruises"},{value:"Chest wounds",label:"Chest wounds"},{value:"Other chest abnormality",label:"Other chest abnormality"}],grid:{s:"12"},condition:e=>"Yes"===e["Physical examination"]&&"No"===e["Chest inspection normal"],onChange:(e,a)=>{if(null==e||!e.includes("Other chest abnormality"))return{"Other chest abnormality notes":""}}},{componentType:"inputField",header:"Specify chest abnormality",name:"Other chest abnormality notes",icon:be.editPen,grid:{s:"12"},condition:e=>"Yes"===e["Physical examination"]&&"No"===e["Chest inspection normal"]&&Array.isArray(e["Abnormality for  chest inspection"])&&e["Abnormality for  chest inspection"].includes("Other chest abnormality")},{grid:{s:"12"},componentType:"Dashes"},{componentType:"radioButtonField",header:"Chest movement?",name:"Chest movements",options:[{value:"Symmetrical",label:"Symmetrical"},{value:"Asymmetrical",label:"Asymmetrical"}],grid:{s:"12"},condition:e=>"Yes"===e["Physical examination"]},{grid:{s:"12"},componentType:"Dashes"},{componentType:"radioButtonField",header:"Heart sounds normal?",name:"Heart sounds normal",options:[{value:"Yes",label:"Yes"},{value:"No",label:"No"}],grid:{s:"12"},condition:e=>"Yes"===e["Physical examination"],onChange:(e,a)=>{if("Yes"===e)return{"Heart sounds abnormality":[]}}},{componentType:"checkboxField",header:"What are the abnormalities on the heart sounds?",name:"Heart sounds abnormality",type:"multiple",options:[{value:"Loud P2",label:"Loud P2"},{value:"Splitting P2",label:"Splitting P2"},{value:"Gallop rhythm",label:"Gallop rhythm"},{value:"Murmur",label:"Murmur"}],grid:{s:"12"},condition:e=>"Yes"===e["Physical examination"]&&"No"===e["Heart sounds normal"]},{grid:{s:"12"},componentType:"Dashes"},{componentType:"radioButtonField",header:"Breath sounds normal?",name:"Breath sounds normal",options:[{value:"Yes",label:"Yes"},{value:"No",label:"No"}],grid:{s:"12"},condition:e=>"Yes"===e["Physical examination"],onChange:(e,a)=>{if("Yes"===e)return{"Breath sounds abnormality":[],"Abnormalities when added":[]}}},{componentType:"checkboxField",header:"What are the abnormalities on the breath sounds?",name:"Breath sounds abnormality",type:"multiple",options:[{value:"Absent",label:"Absent"},{value:"Reduced",label:"Reduced"},{value:"Added",label:"Added"}],grid:{s:"12"},condition:e=>"Yes"===e["Physical examination"]&&"No"===e["Breath sounds normal"],onChange:(e,a)=>{if(null==e||!e.includes("Added"))return{"Abnormalities when added":[]}}},{componentType:"checkboxField",header:"What are the abnormalities on the breath sounds are Added?",name:"Abnormalities when added",type:"multiple",options:[{value:"Crackles",label:"Crackles"},{value:"Wheezes",label:"Wheezes"},{value:"Bronchial",label:"Bronchial"},{value:"Crepitations",label:"Crepitations"}],grid:{s:"12"},condition:e=>"Yes"===e["Physical examination"]&&"No"===e["Breath sounds normal"]&&Array.isArray(e["Breath sounds abnormality"])&&e["Breath sounds abnormality"].includes("Added")},{grid:{s:"12"},componentType:"Dashes"},{componentType:"radioButtonField",header:"Abdominal inspection normal?",name:"Abdominal inspection normal",options:[{value:"Yes",label:"Yes"},{value:"No",label:"No"}],grid:{s:"12"},condition:e=>"Yes"===e["Physical examination"],onChange:(e,a)=>{if("Yes"===e)return{"Abdominal inspection abnormality":[],"Other abdominal abnormality notes":""}}},{componentType:"checkboxField",header:"What are the abnormalities after Abdominal inspection?",name:"Abdominal inspection abnormality",type:"multiple",options:[{value:"Abdominal distension",label:"Abdominal distension"},{value:"Abdominal rash",label:"Abdominal rash"},{value:"Abdominal wounds",label:"Abdominal wounds"},{value:"Laceration",label:"Laceration"},{value:"Abdominal bruises",label:"Abdominal bruises"},{value:"Abdominal burns",label:"Abdominal burns"},{value:"Other abdominal abnormality",label:"Other abdominal abnormality"}],grid:{s:"12"},condition:e=>"Yes"===e["Physical examination"]&&"No"===e["Abdominal inspection normal"],onChange:(e,a)=>{if(null==e||!e.includes("Other abdominal abnormality"))return{"Other abdominal abnormality notes":""}}},{componentType:"inputField",header:"Specify abdominal abnormality",name:"Other abdominal abnormality notes",icon:be.editPen,grid:{s:"12"},condition:e=>"Yes"===e["Physical examination"]&&"No"===e["Abdominal inspection normal"]&&Array.isArray(e["Abdominal inspection abnormality"])&&e["Abdominal inspection abnormality"].includes("Other abdominal abnormality")},{grid:{s:"12"},componentType:"Dashes"},{componentType:"radioButtonField",header:"Abdominal auscultation normal?",name:"Abdominal auscultation normal",options:[{value:"Yes",label:"Yes"},{value:"No",label:"No"}],grid:{s:"12"},condition:e=>"Yes"===e["Physical examination"],onChange:(e,a)=>{if("Yes"===e)return{"Abdominal auscultation abnormality":[],"Other abdominal auscultation abnormality notes":"","Bowel sounds abnormality":[]}}},{componentType:"checkboxField",header:"What are the abdominal auscultation abnormalities?",name:"Abdominal auscultation abnormality",type:"multiple",options:[{value:"Bruit",label:"Bruit"},{value:"Hyperactive",label:"Hyperactive"},{value:"Reduced bowel sounds",label:"Reduced bowel sounds"},{value:"Other",label:"Other"}],grid:{s:"12"},condition:e=>"Yes"===e["Physical examination"]&&"No"===e["Abdominal auscultation normal"],onChange:(e,a)=>{const t={};return null!=e&&e.includes("Reduced bowel sounds")||(t["Bowel sounds abnormality"]=[]),null!=e&&e.includes("Other")||(t["Other abdominal auscultation abnormality notes"]=""),t}},{componentType:"checkboxField",header:"What are the abnormalities on bowel sounds?",name:"Bowel sounds abnormality",type:"multiple",options:[{value:"Reduced bowel sounds",label:"Reduced bowel sounds"},{value:"Abdominal auscultation absent",label:"Abdominal auscultation absent"}],grid:{s:"12"},condition:e=>"Yes"===e["Physical examination"]&&"No"===e["Abdominal auscultation normal"]&&Array.isArray(e["Abdominal auscultation abnormality"])&&e["Abdominal auscultation abnormality"].includes("Reduced bowel sounds")},{componentType:"inputField",header:"Specify abdominal auscultation abnormality",name:"Other abdominal auscultation abnormality notes",icon:be.editPen,grid:{s:"12"},condition:e=>"Yes"===e["Physical examination"]&&"No"===e["Abdominal auscultation normal"]&&Array.isArray(e["Abdominal auscultation abnormality"])&&e["Abdominal auscultation abnormality"].includes("Other")},{grid:{s:"12"},componentType:"Dashes"},{componentType:"radioButtonField",header:"Abdominal palpation normal?",name:"Abdominal palpation normal",options:[{value:"Yes",label:"Yes"},{value:"No",label:"No"}],grid:{s:"12"},condition:e=>"Yes"===e["Physical examination"],onChange:(e,a)=>{if("Yes"===e)return{"Abdominal palpation abnormality":[],"Other abdominal palpation abnormality notes":""}}},{componentType:"checkboxField",header:"What are the abdominal palpation abnormalities?",name:"Abdominal palpation abnormality",type:"multiple",options:[{value:"Tenderness",label:"Tenderness"},{value:"Splenomegaly",label:"Splenomegaly"},{value:"Kidney ballotable",label:"Kidney ballotable"},{value:"Other masses",label:"Other masses"}],grid:{s:"12"},condition:e=>"Yes"===e["Physical examination"]&&"No"===e["Abdominal palpation normal"],onChange:(e,a)=>{if(null==e||!e.includes("Other masses"))return{"Other abdominal palpation abnormality notes":""}}},{componentType:"inputField",header:"Specify abdominal palpation abnormality",name:"Other abdominal palpation abnormality notes",icon:be.editPen,grid:{s:"12"},condition:e=>"Yes"===e["Physical examination"]&&"No"===e["Abdominal palpation normal"]&&Array.isArray(e["Abdominal palpation abnormality"])&&e["Abdominal palpation abnormality"].includes("Other masses")},{grid:{s:"12"},componentType:"Dashes"},{componentType:"radioButtonField",header:"Genital examination normal?",name:"Genital examination normal",options:[{value:"Yes",label:"Yes"},{value:"No",label:"No"}],grid:{s:"12"},condition:e=>"Yes"===e["Physical examination"],onChange:(e,a)=>{if("Yes"===e)return{"Genital examination abnormality":[],"Urethral meatus abnormalities":[],"Vulva inspection abnormalities":[],"Other genital abnormality notes":""}}},{componentType:"checkboxField",header:"What are the abnormalities after genital examination?",name:"Genital examination abnormality",type:"multiple",options:[{value:"Warts",label:"Warts"},{value:"Vesicles",label:"Vesicles"},{value:"Growths",label:"Growths"},{value:"Genital sores",label:"Genital sores"},{value:"Scrotal swelling",label:"Scrotal swelling",disabled:o},{value:"Tastes swelling",label:"Tastes swelling",disabled:o},{value:"Urethral meatus abnormal",label:"Urethral meatus abnormal",disabled:o},{value:"Vulva examination",label:"Vulva examination",disabled:n},{value:"Visible bleeding",label:"Visible bleeding",disabled:n},{value:"Other genital abnormalities",label:"Other genital abnormalities"}],grid:{s:"12"},condition:e=>"Yes"===e["Physical examination"]&&"No"===e["Genital examination normal"],onChange:(e,a)=>{const t={};return null!=e&&e.includes("Urethral meatus abnormal")||(t["Urethral meatus abnormalities"]=[]),null!=e&&e.includes("Vulva examination")||(t["Vulva inspection abnormalities"]=[]),null!=e&&e.includes("Other genital abnormalities")||(t["Other genital abnormality notes"]=""),t}},{componentType:"checkboxField",header:"What are the urethral meatus abnormalities for the patient?",name:"Urethral meatus abnormalities",type:"multiple",options:[{value:"Oedema",label:"Oedema"},{value:"Abnormal discharge",label:"Abnormal discharge"},{value:"Bleeding",label:"Bleeding"}],grid:{s:"12"},condition:e=>"Yes"===e["Physical examination"]&&"No"===e["Genital examination normal"]&&n&&Array.isArray(e["Genital examination abnormality"])&&e["Genital examination abnormality"].includes("Urethral meatus abnormal")},{componentType:"checkboxField",header:"What Vulva abnormalities does the patient have?",name:"Vulva inspection abnormalities",type:"multiple",options:[{value:"Oedematous cervix",label:"Oedematous cervix"},{value:"Abnormal vaginal discharge",label:"Abnormal vaginal discharge"}],grid:{s:"12"},condition:e=>"Yes"===e["Physical examination"]&&"No"===e["Genital examination normal"]&&o&&Array.isArray(e["Genital examination abnormality"])&&e["Genital examination abnormality"].includes("Vulva examination")},{componentType:"inputField",header:"Specify genital abnormality",name:"Other genital abnormality notes",icon:be.editPen,grid:{s:"12"},condition:e=>"Yes"===e["Physical examination"]&&"No"===e["Genital examination normal"]&&Array.isArray(e["Genital examination abnormality"])&&e["Genital examination abnormality"].includes("Other genital abnormalities")},{grid:{s:"12"},componentType:"Dashes"},{componentType:"radioButtonField",header:"Extremities normal?",name:"Extremities normal",options:[{value:"Yes",label:"Yes"},{value:"No",label:"No"}],grid:{s:"12"},condition:e=>"Yes"===e["Physical examination"],onChange:(e,a)=>{if("Yes"===e)return{"Abnormality for extremities":[],"Other extremities abnormalities notes":""}}},{componentType:"checkboxField",header:"What are the abnormalities for extremities?",name:"Abnormality for extremities",type:"multiple",options:[{value:"Cold and clammy",label:"Cold and clammy"},{value:"Generalized oedema",label:"Generalized oedema"},{value:"Fracture",label:"Fracture"},{value:"Extremity burns",label:"Extremity burns"},{value:"Extremity rash",label:"Extremity rash"},{value:"Deformity",label:"Deformity"},{value:"Finger clubbing",label:"Finger clubbing"},{value:"Decreased Power",label:"Decreased Power"},{value:"Decreased Sensation",label:"Decreased Sensation"},{value:"Other extremities abnormality",label:"Other extremities abnormality"}],grid:{s:"12"},condition:e=>"Yes"===e["Physical examination"]&&"No"===e["Extremities normal"],onChange:(e,a)=>{if(null==e||!e.includes("Other extremities abnormality"))return{"Other extremities abnormalities notes":""}}},{componentType:"inputField",header:"Specify extremity abnormality",name:"Other extremities abnormalities notes",icon:be.editPen,grid:{s:"12"},condition:e=>"Yes"===e["Physical examination"]&&"No"===e["Extremities normal"]&&Array.isArray(e["Abnormality for extremities"])&&e["Abnormality for extremities"].includes("Other extremities abnormality")}]})}})(),r=o(null),s=o(0),c=he(),{patient:u}=n(c);y(()=>{var e;return null===(e=u.value)||void 0===e?void 0:e.patientID},async(e,a)=>{e&&e!==a&&(s.value++,await q())});const p=async e=>{const a=[];for(const[t,n]of Object.entries(e))n&&!1!==n&&""!==n&&("boolean"==typeof n&&!0===n?a.push(await Ae.buildValueText("Physical examination finding",t)):"string"==typeof n&&a.push(await Ae.buildValueText(t,n)));return a};i(async()=>{await q()});const v=l(()=>t.physicalExaminationFormSection.value);return a({validateForm:()=>{var e;return null===(e=r.value)||void 0===e?void 0:e.validateForm()},onSubmit:async()=>{if(!r.value)return console.error("Form reference is not available"),!1;if(r.value.validateForm())return ke("Please fix validation errors before submitting"),!1;const e=r.value.getFormValues(),a=await p(e);return 0===a.length?(ke("No physical examination data to save"),!1):(await Ae.addObsToEncounterPatient(a,De.PHYSICAL_EXAMINATION),s.value++,await q(),Oe("Physical examination saved successfully"),!0)},resetForm:()=>{s.value++}}),(e,a)=>(d(),m(_e,{formData:v.value,ref_key:"formRef",ref:r,key:s.value},null,8,["formData"]))}})),xt={key:0},wt={class:"ion-padding",slot:"content"},kt={class:"nav-buttons"},Ct={class:"ion-padding",slot:"content"},At={class:"nav-buttons"},Dt={class:"ion-padding",slot:"content"},Ot={class:"nav-buttons"},Pt={class:"ion-padding",slot:"content"},Tt={class:"nav-buttons"},St={class:"ion-padding",slot:"content"},Et={class:"nav-buttons"},Nt={class:"ion-padding",slot:"content"},Ft={class:"nav-buttons"},Vt=(e("C",Pe(t({__name:"ClinicalAssessment",setup(e,{expose:a}){const t=o("loc"),n=o(0),r=o(!1),_=o(!1),x=new Ne,w=he(),k=()=>{n.value++},A=o(null),D=o(null),O=o(null),P=o(null),T=o(null),S=o(null),E=[{id:"loc",label:"Level of consciousness",show:!0},{id:"pc",label:"Presenting complaints",show:!0},{id:"pbs",label:"Pregnancy and breastfeeding status",show:()=>x.isChildBearing()},{id:"pmh",label:"Past medical history",show:!0},{id:"al",label:"Allergies",show:!0},{id:"pe",label:"Physical examination",show:!0}];async function N(){const e=Ce.getSessionDate(),a=[De.ASSESSMENT,De.PRESENTING_COMPLAINTS,De.PAST_MEDICAL_HISTORY,De.PHYSICAL_EXAMINATION,De.MEDICAL_HISTORY,De.PREGNANCY_STATUS];let t=!1;for(const o of a)try{const a=await Ae.getObsByEncounterIdAndDate(o);if(a&&a.some(a=>!!a.obs_datetime&&Se.toStandardHisFormat(a.obs_datetime)===Se.toStandardHisFormat(e))){t=!0;break}}catch(n){console.error(`Error checking observations for encounter type ${o}:`,n)}r.value=t}i(N),y(()=>w.patient,N);const F=l(()=>r.value),V=l(()=>E.filter(e=>"function"==typeof e.show?e.show():e.show)),I=e=>{const a=E.find(a=>a.id===e);return!!a&&("function"==typeof a.show?a.show():a.show)},Y=e=>V.value.findIndex(a=>a.id===e),H=e=>{const a=Y(e);a>0&&(t.value=V.value[a-1].id)},B=e=>{const a=Y(e)+1;a<V.value.length?t.value=V.value[a].id:(t.value="",k())};return a({onSubmit:async()=>{const e=[{ref:A,name:"PresentingComplaints"},{ref:D,name:"LevelOfConsciousness"},{ref:O,name:"PastMedicalHistory"},{ref:T,name:"PregnancyBreastfeeding"},{ref:S,name:"PhysicalExamination"},{ref:P,name:"Allergies"}];for(const t of e)if(t.ref.value&&"function"==typeof t.ref.value.onSubmit)try{const e=await t.ref.value.onSubmit();if("PresentingComplaints"===t.name&&!1===e)return}catch(a){if(console.error(`Error calling ${t.name} onSubmit:`,a),"PresentingComplaints"===t.name)return}else console.log(`${t.name} component ref not available or no onSubmit method`)}}),(e,a)=>(d(),s(g,null,[F.value?(d(),s("div",xt,[c(h(b),{lines:"none"},{default:p(()=>[c(h(G),null,{default:p(()=>[...a[14]||(a[14]=[f("Switch between Capture Mode and Summary Mode",-1)])]),_:1}),c(h(W),{checked:_.value,onIonChange:a[0]||(a[0]=e=>_.value=e.detail.checked),slot:"end"},null,8,["checked"])]),_:1}),_.value?u("",!0):(d(),m(bt,{key:n.value}))])):u("",!0),!F.value||_.value?(d(),m(h(J),{key:1,style:{width:"100%"}},{default:p(()=>[c(h(j),{value:t.value,"onUpdate:value":a[13]||(a[13]=e=>t.value=e),ref:"accordionGroup",class:"previousView"},{default:p(()=>[I("loc")?(d(),m(h($),{key:0,value:"loc",class:"_card"},{default:p(()=>[c(h(b),{slot:"header",color:"light"},{default:p(()=>[c(h(G),{class:"previousLabel"},{default:p(()=>[...a[15]||(a[15]=[f("Level of consciousness",-1)])]),_:1})]),_:1}),v("div",wt,[c(Je,{"is-active":"loc"===t.value,ref_key:"levelOfConsciousnessFormRef",ref:D,onDataSaved:k},null,8,["is-active"]),v("div",kt,[Y("loc")>0?(d(),m(h(K),{key:0,fill:"outline",onClick:a[1]||(a[1]=X(e=>H("loc"),["stop"]))},{default:p(()=>[...a[16]||(a[16]=[f(" Back ",-1)])]),_:1})):u("",!0),c(h(K),{fill:"outline",onClick:a[2]||(a[2]=X(e=>B("loc"),["stop"]))},{default:p(()=>[f(C(Y("loc")<V.value.length-1?"Next":"Finish"),1)]),_:1})])])]),_:1})):u("",!0),I("pc")?(d(),m(h($),{key:1,value:"pc",class:"_card"},{default:p(()=>[c(h(b),{slot:"header",color:"light"},{default:p(()=>[c(h(G),{class:"previousLabel"},{default:p(()=>[...a[17]||(a[17]=[f(" Presenting complaints - ",-1),v("span",{class:"required-badge"},"Required",-1)])]),_:1})]),_:1}),v("div",Ct,[c(ga,{"is-active":"pc"===t.value,onDataSaved:k,ref_key:"presentingComplaintsFormRef",ref:A},null,8,["is-active"]),v("div",At,[Y("pc")>0?(d(),m(h(K),{key:0,fill:"outline",onClick:a[3]||(a[3]=X(e=>H("pc"),["stop"]))},{default:p(()=>[...a[18]||(a[18]=[f(" Back ",-1)])]),_:1})):u("",!0),c(h(K),{fill:"outline",onClick:a[4]||(a[4]=X(e=>B("pc"),["stop"]))},{default:p(()=>[f(C(Y("pc")<V.value.length-1?"Next":"Finish"),1)]),_:1})])])]),_:1})):u("",!0),I("pbs")?(d(),m(h($),{key:2,value:"pbs",class:"_card"},{default:p(()=>[c(h(b),{slot:"header",color:"light"},{default:p(()=>[c(h(G),{class:"previousLabel"},{default:p(()=>[...a[19]||(a[19]=[f("Pregnancy and breastfeeding status",-1)])]),_:1})]),_:1}),v("div",Dt,[c(gt,{"is-active":"pbs"===t.value,ref_key:"pregnancyBreastfeedingFormRef",ref:T,onDataSaved:k},null,8,["is-active"]),v("div",Ot,[Y("pbs")>0?(d(),m(h(K),{key:0,fill:"outline",onClick:a[5]||(a[5]=X(e=>H("pbs"),["stop"]))},{default:p(()=>[...a[20]||(a[20]=[f(" Back ",-1)])]),_:1})):u("",!0),c(h(K),{fill:"outline",onClick:a[6]||(a[6]=X(e=>B("pbs"),["stop"]))},{default:p(()=>[f(C(Y("pbs")<V.value.length-1?"Next":"Finish"),1)]),_:1})])])]),_:1})):u("",!0),I("pmh")?(d(),m(h($),{key:3,value:"pmh",class:"_card"},{default:p(()=>[c(h(b),{slot:"header",color:"light"},{default:p(()=>[c(h(G),{class:"previousLabel"},{default:p(()=>[...a[21]||(a[21]=[f("Past medical history",-1)])]),_:1})]),_:1}),v("div",Pt,[c(yt,{"is-active":"pmh"===t.value,ref_key:"pastMedicalHistoryFormRef",ref:O,onDataSaved:k},null,8,["is-active"]),v("div",Tt,[Y("pmh")>0?(d(),m(h(K),{key:0,fill:"outline",onClick:a[7]||(a[7]=X(e=>H("pmh"),["stop"]))},{default:p(()=>[...a[22]||(a[22]=[f(" Back ",-1)])]),_:1})):u("",!0),c(h(K),{fill:"outline",onClick:a[8]||(a[8]=X(e=>B("pmh"),["stop"]))},{default:p(()=>[f(C(Y("pmh")<V.value.length-1?"Next":"Finish"),1)]),_:1})])])]),_:1})):u("",!0),I("al")?(d(),m(h($),{key:4,value:"al",class:"_card"},{default:p(()=>[c(h(b),{slot:"header",color:"light"},{default:p(()=>[c(h(G),{class:"previousLabel"},{default:p(()=>[...a[23]||(a[23]=[f("Allergies",-1)])]),_:1})]),_:1}),v("div",St,[c(ta,{"is-active":"al"===t.value,ref_key:"allergiesFormRef",ref:P,onDataSaved:k},null,8,["is-active"]),v("div",Et,[Y("al")>0?(d(),m(h(K),{key:0,fill:"outline",onClick:a[9]||(a[9]=X(e=>H("al"),["stop"]))},{default:p(()=>[...a[24]||(a[24]=[f(" Back ",-1)])]),_:1})):u("",!0),c(h(K),{fill:"outline",onClick:a[10]||(a[10]=X(e=>B("al"),["stop"]))},{default:p(()=>[f(C(Y("al")<V.value.length-1?"Next":"Finish"),1)]),_:1})])])]),_:1})):u("",!0),I("pe")?(d(),m(h($),{key:5,value:"pe",class:"_card"},{default:p(()=>[c(h(b),{slot:"header",color:"light"},{default:p(()=>[c(h(G),{class:"previousLabel"},{default:p(()=>[...a[25]||(a[25]=[f("Physical examination",-1)])]),_:1})]),_:1}),v("div",Nt,[c(_t,{"is-active":"pe"===t.value,ref_key:"physicalExaminationFormRef",ref:S,onDataSaved:k},null,8,["is-active"]),v("div",Ft,[Y("pe")>0?(d(),m(h(K),{key:0,fill:"outline",onClick:a[11]||(a[11]=X(e=>H("pe"),["stop"]))},{default:p(()=>[...a[26]||(a[26]=[f(" Back ",-1)])]),_:1})):u("",!0),c(h(K),{fill:"outline",onClick:a[12]||(a[12]=X(e=>B("pe"),["stop"]))},{default:p(()=>[f(C(Y("pe")<V.value.length-1?"Next":"Finish"),1)]),_:1})])])]),_:1})):u("",!0)]),_:1},8,["value"])]),_:1})):u("",!0)],64))}}),[["__scopeId","data-v-f7298259"]])),{class:"allergies-section"}),It={class:"allergies-container"},Yt={class:"medication-section"},Ht={class:"medication-content"},Bt={key:0,class:"add-medication-form"},Mt={class:"form-group"},Ut={class:"option-label"},Rt={key:0,class:"error-message"},Lt={class:"form-row"},zt={class:"form-group"},qt={key:0,class:"error-message"},Gt={class:"form-group"},Wt={key:0,class:"error-message"},jt={class:"form-group"},$t={key:0,class:"error-message"},Kt={class:"action-buttons"},Xt={class:"notes-section"},Jt={class:"notes-content"},Qt={class:"notes-input-container"},Zt={class:"ion-padding",slot:"content"},en={class:"notes-timeline"},an={key:0,class:"note-entry"},tn={class:"note-date"},nn={class:"note-content"},on={class:"ion-padding",slot:"content"},ln={class:"note-date"},rn={class:"note-content"},sn=t({watch:{},name:"xxxComponent"}),dn=t({...sn,setup(e){const a=be,t=la,n=o(!1),r=o(!1),_=o(!0),x=o(0),k=o(""),A=o(!1),D=o(),O=o(!1),T=o(""),S=o(""),N=o(""),F=o(""),V=o(""),I=o(""),Y=Fe(),H=Ee(),B=l(()=>H.selectedMedicalAllergiesList),M=l(()=>Y.selectedMedicalDrugsList),U=l(()=>Y.partialOPDdrugList),L=l(()=>Y.nonPharmalogicalTherapyAndOtherNotes),z=["first","second","third"],q=o(),W=o(),K=o(),X=o(!1),J=o(!1),le=o("Show more notes"),ie=o(),re=o(),se=o(),de=l(()=>Y.editingDrugItem),ce=o("Select a route"),ue=o(!1),me=o("Select frequency"),pe=o(!1),ve=o("Select drug"),he=o(!1),fe=o(),ge=o(),ye=o(),_e=o([]),we=o([{concept_id:11797,name:"Buccal",concept_name_id:null,id:1769},{concept_id:11794,name:"Intradermal",concept_name_id:null,id:6284},{concept_id:11795,name:"Intramuscular (IM)",concept_name_id:null,id:6285},{concept_id:11799,name:"Intraosseous",concept_name_id:null,id:6286},{concept_id:11793,name:"Intravenous (IV)",concept_name_id:null,id:6295},{concept_id:3327,name:"Oral",concept_name_id:null,id:8686},{concept_id:11800,name:"Other method of prescription",concept_name_id:null,id:8920},{concept_id:11792,name:"Rectally",concept_name_id:null,id:10785},{concept_id:11798,name:"Subcutaneous",concept_name_id:null,id:12342},{concept_id:11796,name:"Sublingual",concept_name_id:null,id:12344},{concept_id:11792,name:"Rectally",concept_name_id:null,id:14078},{concept_id:11793,name:"Intravenous (IV)",concept_name_id:null,id:14079},{concept_id:11794,name:"Intradermal",concept_name_id:null,id:14080},{concept_id:11795,name:"Intramuscular (IM)",concept_name_id:null,id:14081},{concept_id:11796,name:"Sublingual",concept_name_id:null,id:14082},{concept_id:11797,name:"Buccal",concept_name_id:null,id:14083},{concept_id:11798,name:"Subcutaneous",concept_name_id:null,id:14084},{concept_id:11799,name:"Intraosseous",concept_name_id:null,id:14085},{concept_id:11800,name:"Other method of prescription",concept_name_id:null,id:14086}]),Ae=l(()=>_e.value.length?_e.value:we.value);async function De(){return await ia()}function Oe(){_.value=!_.value,n.value=!0,A.value=!1,O.value=!1}async function Pe(){return Ue(N.value)?O.value=!1:(D.value="please enter a number",O.value=!0),O.value}async function Te(){const e=await Pe(),a=1==sa.isEmpty(ge.value)?(pe.value=!0,!1):0==sa.isEmpty(ge.value)?(pe.value=!1,!0):void 0,t=1==sa.isEmpty(ye.value)?(he.value=!0,!1):0==sa.isEmpty(ye.value)?(he.value=!1,!0):void 0,n=1==sa.isEmpty(fe.value)?(ue.value=!0,!1):0==sa.isEmpty(fe.value)?(ue.value=!1,!0):void 0;return!e&&1==a&&1==t&&1==n}async function Se(){try{const e=()=>null!=se.value.dose_strength&&se.value.dose_strength?Math.trunc(se.value.dose_strength):1;if(null!==de.value){if(!(await Te()))return void ke("Please enter correct data values",4e3);const a=Re(Ce.getSessionDate(),parseInt(N.value));let t=!1;1==Ne(se.value)&&(t=!0);const n={drugName:T.value,dose:e(),frequency:ge.value.label,frequency_code:ge.value.code,duration:N.value,prescription:a,drug_id:I.value,units:V.value,route_concept_id:fe.value.concept_id,route_name:fe.value.name,highlightbackground:t},o=Fe();console.log(o.setSelectedMedicalDrugsList([n])),o.editingDrugItem=null,_.value=!0}else{if(!(await Te()))return void ke("Please enter correct data values",4e3);n.value=!1,r.value=!0,_.value=!0;const a=Re(Ce.getSessionDate(),parseInt(N.value));let t=!1;1==Ne(se.value)&&(t=!0);const o={drugName:T.value,dose:e(),frequency:ge.value.label,frequency_code:ge.value.code,duration:N.value,prescription:a,drug_id:I.value,units:V.value,route_concept_id:fe.value.concept_id,route_name:fe.value.name,highlightbackground:t};Fe().setSelectedMedicalDrugsList([o])}I.value="",T.value="",S.value="",ge.value=null,N.value="",F.value="",x.value++,ye.value=null,fe.value=null}catch(e){console.error("Error saving data:",e)}}function Ne(e){const a=[];return B.value.forEach(e=>{e.selected&&a.push(e.concept_id)}),1==function(e,a){try{return e.some(e=>a.includes(e.concept_id))}catch(t){return!1}}([e],a)&&(ke("Client is allergic to the selected medication",4e6),!0)}function He(e){const a=M.value[e],t=Fe();t.removeDrugById(a.drug_id),t.editingDrugItem=a,I.value="",T.value="",S.value="",ge.value=null,N.value="",F.value="",ye.value=null,fe.value=null,I.value=a.drug_id,T.value=a.drugName,S.value=a.dose,ge.value={label:a.frequency,code:a.frequency_code},N.value=a.duration,F.value=a.prescription;const n=U.value.find(e=>e.name===a.drugName);n&&(ye.value=n),fe.value={concept_id:a.route_concept_id,name:a.route_name},_.value=!1,x.value++}function Be(e){M.value.splice(e,1),x.value++,ke("you have removed a drug from list",6e3)}function Me(e){!function(e){Fe().setNonPharmalogicalTherapyAndOtherNotes(e)}(e.target.value)}function Ue(e){return/^[0-9]+$/.test(e)}function Re(e,a){const t=new Date(e);return t.setDate(t.getDate()+a),`${t.getFullYear()}-${String(t.getMonth()+1).padStart(2,"0")}-${String(t.getDate()).padStart(2,"0")}`}function Le(e){z.filter(a=>a!==e.detail.value);const a=e.detail.value;void 0!==a?"third"==a&&(le.value="Show less notes",J.value=!X.value):(le.value="Show more notes",J.value=!X.value)}function ze(e){"Enter"!==e.key&&"ArrowDown"!==e.key||(e.preventDefault(),Se())}i(async()=>{const e=new ra,{previousDrugPrescriptions:a,previousClinicalNotes:t,previousDrugAllergies:n}=await e.getPatientEncounters();q.value=a,W.value=Object.entries(t)[0];const[,...o]=Object.entries(t);K.value=o,ie.value=Object.entries(n)[0];const[,...l]=Object.entries(n);re.value=l,await async function(e=5,a=1e3){let t=0;for(;t<e&&(_e.value=await De(),!(_e.value.length>0));)t++,await new Promise(e=>setTimeout(e,a));0===_e.value.length&&console.warn("Failed to fetch route list after maximum retries.")}()}),y(()=>S.value,async e=>{!async function(){Ue(S.value)?A.value=!1:(k.value="please enter a number",A.value=!0),A.value}()}),y(()=>N.value,async e=>{Pe()});const qe=l(()=>[{showAddItemButton:!0,addItemButton:!0,name:null!==de.value?"Update":"ADD",fn:Se},{showAddItemButton:!0,addItemButton:!0,name:"CANCEL",fn:Ge}]),Ge=async()=>{Ve(Ie,{class:"otherVitalsModal"},!0,{message:"Are you sure you want to cancel?"},{cancel:e=>{},confirm:async e=>{1==e.detail&&function(){if(null!==de.value){I.value="",T.value="",S.value="",ge.value=null,N.value="",F.value="",ye.value=null,fe.value=null;const e=Fe();e.setSelectedMedicalDrugsList([de.value]),e.editingDrugItem=null}_.value=!0,x.value++}()}})};return(e,n)=>(d(),m(h(oe),null,{default:p(()=>[v("div",Vt,[v("div",It,[c(Sa)])]),v("div",Yt,[c(h(b),{lines:"none",class:"section-header"},{default:p(()=>[c(h(P),{icon:h(R),class:"section-icon"},null,8,["icon"]),c(h(G),{class:"section-title",style:{"margin-top":"12px"}},{default:p(()=>[...n[9]||(n[9]=[f("Medication",-1)])]),_:1})]),_:1}),v("div",Ht,[(d(),m(na,{_selectedMedicalDrugsList:M.value,onEditItem:He,onRemoveItem:Be,key:x.value,class:"medication-list"},null,8,["_selectedMedicalDrugsList"])),_.value?u("",!0):(d(),s("div",Bt,[v("div",Mt,[n[10]||(n[10]=v("label",{class:"input-label"},"Medication",-1)),c(h(Q),{modelValue:ye.value,"onUpdate:modelValue":[n[0]||(n[0]=e=>ye.value=e),n[1]||(n[1]=e=>{var a;(a=e)&&(T.value=a.name,I.value=a.drug_id,V.value=a.units,se.value=a,Ne(a))})],options:U.value,searchable:!0,"close-on-select":!0,"show-labels":!1,placeholder:"Select medication",label:"name","track-by":"drug_id",onSearchChange:n[2]||(n[2]=e=>async function(e){const a=e,t=await Ye.getOfflineOPDDrugs({name:a,page:1,page_size:10});t.map(e=>({label:e.name,value:e.name,other:e})),Y.setPartialOPDdrugList(t)}(e))},{option:p(e=>[v("div",Ut,C(e.option.name),1)]),_:1},8,["modelValue","options"]),he.value?(d(),s("div",Rt,C(ve.value),1)):u("",!0)]),v("div",Lt,[v("div",zt,[n[11]||(n[11]=v("label",{class:"input-label"},"Route",-1)),c(h(Q),{modelValue:fe.value,"onUpdate:modelValue":[n[3]||(n[3]=e=>fe.value=e),n[4]||(n[4]=e=>{return a=e,void(fe.value=a);var a})],options:Ae.value,searchable:!0,"close-on-select":!0,"show-labels":!1,placeholder:"Select route",label:"name","track-by":"concept_id",disabled:!1},null,8,["modelValue","options"]),ue.value?(d(),s("div",qt,C(ce.value),1)):u("",!0)]),v("div",Gt,[n[12]||(n[12]=v("label",{class:"input-label"},"Frequency",-1)),c(h(Q),{modelValue:ge.value,"onUpdate:modelValue":[n[5]||(n[5]=e=>ge.value=e),n[6]||(n[6]=e=>{return a=e,void(ge.value=a);var a})],options:h(t),searchable:!0,"close-on-select":!0,"show-labels":!1,placeholder:"Select frequency",label:"label","track-by":"code"},null,8,["modelValue","options"]),pe.value?(d(),s("div",Wt,C(me.value),1)):u("",!0)]),v("div",jt,[n[13]||(n[13]=v("label",{class:"input-label"},"Duration (days)",-1)),c(h(Z),{modelValue:N.value,"onUpdate:modelValue":n[7]||(n[7]=e=>N.value=e),type:"number",inputmode:"numeric",pattern:"[0-9]*",fill:"outline",placeholder:"Enter duration",onKeydown:ze},null,8,["modelValue"]),O.value?(d(),s("div",$t,C(D.value),1)):u("",!0)])]),v("div",Kt,[qe.value[0].addItemButton?(d(),m(xe,{key:0,name:qe.value[0].name,icon:h(ee),"onClicked:btn":qe.value[0].fn,class:"save-button"},null,8,["name","icon","onClicked:btn"])):u("",!0),qe.value[1].addItemButton?(d(),m(xe,{key:1,name:qe.value[1].name,icon:h(ae),"onClicked:btn":qe.value[1].fn,class:"cancel-button"},null,8,["name","icon","onClicked:btn"])):u("",!0)])])),_.value?(d(),m(xe,{key:1,name:"Add new medication",icon:h(E),fontWeight:"600","onClicked:btn":Oe,class:"add-new-button"},null,8,["icon"])):u("",!0)])]),v("div",Xt,[c(h(b),{lines:"none",class:"section-header"},{default:p(()=>[c(h(P),{icon:h(te),class:"section-icon"},null,8,["icon"]),c(h(G),{class:"section-title"},{default:p(()=>[...n[14]||(n[14]=[f("Non-pharmacological therapy and other notes",-1)])]),_:1})]),_:1}),v("div",Jt,[c(oa,{class:"intervention-component"}),v("div",Qt,[c(h(b),{class:"notes-input-item"},{default:p(()=>[c(h(P),{slot:"start",icon:h(a).editPen,class:"edit-icon","aria-hidden":"true"},null,8,["icon"]),c(h(ne),{modelValue:L.value,"onUpdate:modelValue":n[8]||(n[8]=e=>L.value=e),onIonInput:Me,placeholder:"Enter notes here...","auto-grow":!0,class:"notes-textarea",fill:"outline",style:{"--padding-start":"16px"}},null,8,["modelValue"])]),_:1})]),c(h(j),{ref:"accordionGroup",class:"previous-notes"},{default:p(()=>[c(h($),{value:"fourth","toggle-icon-slot":"start"},{default:p(()=>[c(h(b),{slot:"header",color:"light",class:"previous-notes-header"},{default:p(()=>[c(h(G),null,{default:p(()=>[...n[15]||(n[15]=[f("Previous visit notes",-1)])]),_:1})]),_:1}),v("div",Zt,[v("div",en,[(d(!0),s(g,null,w(W.value,(e,a)=>(d(),s(g,{key:a},[1===a?(d(),s("div",an,[(d(!0),s(g,null,w(e,(e,a)=>(d(),s("div",{key:a},[v("div",tn,C(e.date),1),v("div",nn,C(e.notes),1)]))),128))])):u("",!0)],64))),128)),c(h(j),{onIonChange:Le},{default:p(()=>[c(h($),{value:"third","toggle-icon-slot":"start"},{default:p(()=>[c(h(b),{slot:"header",color:"light",class:"show-more-header"},{default:p(()=>[c(h(G),{color:"primary"},{default:p(()=>[f(C(le.value),1)]),_:1})]),_:1}),v("div",on,[(d(!0),s(g,null,w(K.value,(e,a)=>{return d(),s("div",{key:a,class:"note-entry"},[(d(!0),s(g,null,w((t=e,t[1]),(e,a)=>(d(),s("div",{key:a},[v("div",ln,C(e.date),1),v("div",rn,C(e.notes),1)]))),128))]);var t}),128))])]),_:1})]),_:1})])])]),_:1})]),_:1},512)])])]),_:1}))}});e("b",Pe(dn,[["__scopeId","data-v-14c793af"]]));const cn={class:"form-grid"},un={class:"form-field"},mn={class:"form-field"},pn={class:"form-field"},vn={class:"form-field"},hn={key:0,class:"form-field checkbox-field"},bn={class:"form-field"},fn={class:"form-field"},gn={class:"form-field"},yn={class:"form-field full-width"},_n={key:1,class:"form-field full-width"},xn={key:2,class:"form-field full-width"},wn={key:3,class:"form-field full-width"},kn={class:"form-field"},Cn={class:"form-field"},An={class:"form-field"},Dn={class:"form-field"},On={class:"form-field full-width"},Pn={class:"button-container"},Tn=t({name:"DeathOutcomeComponent"}),Sn=t({...Tn,emits:["dataSaved"],setup(e,{emit:a}){const t=o(),n=o("guardian phone number"),i=o(),b=o(),{showConfirm:g}={showConfirm:async e=>{const a=await le.create({component:Ie,componentProps:{message:e},cssClass:"otherVitalsModal"});return await a.present(),new Promise(e=>{const t=()=>{a.removeEventListener("confirm",t),e(!0)},n=()=>{a.removeEventListener("cancel",n),e(!1)};a.addEventListener("confirm",t),a.addEventListener("cancel",n),a.onDidDismiss().then(()=>e(!1))})}},y=l(()=>{const e=P.value.find(e=>e.selected);return"Other - specify"===(null==e?void 0:e.name)}),_=l(()=>{const e=T.value.find(e=>e.selected);return"Other - specify"===(null==e?void 0:e.name)}),x=l(()=>(new Ne).isChildBearing()),w=l(()=>{const e=P.value.find(e=>e.selected);return"Accident"===(null==e?void 0:e.name)}),k=[{placeHolder:{default:"Enter time of death if known"},property_name:"timeOfDeath",dataHandler:e=>{k[0].dataValue.value=e,k[0].show_error.value=!1},dataValue:o(),show_error:o(!1),error_message:"Time required",type:"time",skip_validation:!1},{placeHolder:{default:"Enter time arrived"},property_name:"timeArrived",dataHandler:e=>{k[1].dataValue.value=e,k[1].show_error.value=!1},dataValue:o(),show_error:o(!1),error_message:"Time required",type:"time",skip_validation:!1},{placeHolder:{default:"Enter time confirming death"},property_name:"timeOfDeathConfirmation",dataHandler:e=>{k[2].dataValue.value=e,k[2].show_error.value=!1},dataValue:o(),show_error:o(!1),error_message:"Time required",skip_validation:!1}],A=[{placeHolder:{default:"Enter date of death"},property_name:"dateOfDeath",dataHandler:e=>{A[0].dataValue.value=e.value,A[0].show_error.value=!1},dataValue:o(),show_error:o(!1),error_message:"Date required",type:"date",skip_validation:!1},{placeHolder:{default:"Enter date arrived"},property_name:"dateArrived",dataHandler:e=>{A[1].dataValue.value=e.value,A[1].show_error.value=!1},dataValue:o(),show_error:o(!1),error_message:"Date required",type:"date",skip_validation:!1},{placeHolder:{default:"Enter date confirming death"},property_name:"dateOfDeathConfirmation",dataHandler:e=>{A[2].dataValue.value=e.value,A[2].show_error.value=!1},dataValue:o(),show_error:o(!1),error_message:"Date required",type:"date",skip_validation:!1}],D=[{placeHolder:"Enter place of death",property_name:"placeOfDeath",dataHandler:e=>{D[0].dataValue.value=e.target.value,D[0].show_error.value=!1},dataValue:o(),show_error:o(!1),error_message:"Input required",type:"text",skip_validation:!1},{placeHolder:"Enter name of guardian",property_name:"nameOfGuardian",dataHandler:e=>{D[1].dataValue.value=e.target.value,D[1].show_error.value=!1},dataValue:o(),show_error:o(!1),error_message:"Input required",type:"text",skip_validation:!1},{placeHolder:"Enter name of person confirming death",property_name:"nameOfPersonConfirmindDeath",dataHandler:e=>{D[2].dataValue.value=e.target.value,D[2].show_error.value=!1},dataValue:o(),show_error:o(!1),error_message:"Input required",type:"text",skip_validation:!1},{placeHolder:"Enter position of the person confirming death",property_name:"positionOfthePersonConfirmingDeath",dataHandler:e=>{D[3].dataValue.value=e.target.value,D[3].show_error.value=!1},dataValue:o(),show_error:o(!1),error_message:"Input required",type:"text",skip_validation:!1},{placeHolder:"Enter medical council registration number",property_name:"medicalConcilRegistrationNumberOfThePersonConfirmingDeath",dataHandler:e=>{D[4].dataValue.value=e.target.value,D[4].show_error.value=!1},dataValue:o(),show_error:o(!1),error_message:"Input required",type:"alphanumeric",skip_validation:!1},{placeHolder:"Specify other cause of death",property_name:"otherMannerNotes",dataHandler:e=>{D[5].dataValue.value=e.target.value,D[5].show_error.value=!1},dataValue:o(),show_error:o(!1),error_message:"Input required",type:"text",skip_validation:!0},{placeHolder:"Specify other accident cause",property_name:"otherCauseNotes",dataHandler:e=>{D[6].dataValue.value=e.target.value,D[6].show_error.value=!1},dataValue:o(),show_error:o(!1),error_message:"Input required",type:"text",skip_validation:!0}],O=[{lblTxt:"Was the individual pregnant at the time of death?",value:o(!1),show_error:o(!1),error_message:"Please indicate pregnancy status",skip_validation:!1}],P=o([{id:1,name:"Natural",selected:!1},{id:2,name:"Accident",selected:!1},{id:3,name:"Homicide",selected:!1},{id:4,name:"Suicide",selected:!1},{id:5,name:"Pending investigation",selected:!1},{id:6,name:"Could not be determined",selected:!1},{id:7,name:"Other - specify",selected:!1}]),T=o([{id:1,name:"Motor vehicle (passenger)",selected:!1},{id:2,name:"Motor vehicle (pedestrian)",selected:!1},{id:3,name:"Drowning",selected:!1},{id:4,name:"Other - specify",selected:!1}]),S=[{property_name:"mannerOfDeath",show_error:o(!1),items:P.value},{property_name:"howDiditOccur",show_error:o(!1),items:T.value}],E=async()=>{const e=Ue(D),a=Ue(A),t=Ue(k),n=function(){let e=!0;const a=P.value.find(e=>e.selected);return a||(S[0].show_error.value=!0,e=!1),"Accident"===(null==a?void 0:a.name)&&(T.value.find(e=>e.selected)||(S[1].show_error.value=!0,e=!1)),e}();if(e&&a&&t&&n)try{const e=sa.merge(Le(D),Le(A),Le(k),F(S[0]),F(S[1])),a=[{concept_id:11520,value_coded:11520,child:N(e),obs_datetime:Se.sessionDate()}];await Ae.addObsToEncounterPatient(a,De.PATIENT_OUTCOME),Oe("Patient outcome saved successfully"),Y("dataSaved",{dataSaved:!0})}catch(o){Re("Failed to save patient outcome")}else Re("Please fill in all required fields correctly.")},N=e=>{var a,t,n,o;const l=Se.sessionDate(),i=[];return null!==(a=e.dateOfDeath)&&void 0!==a&&a.formattedDate&&i.push({concept_id:1815,value_text:e.dateOfDeath.formattedDate,obs_datetime:l}),null!==(t=e.dateArrived)&&void 0!==t&&t.formattedDate&&i.push({concept_id:7398,value_text:e.dateArrived.formattedDate,obs_datetime:l}),null!==(n=e.timeOfDeath)&&void 0!==n&&n.time&&i.push({concept_id:9161,value_text:e.timeOfDeath.time,obs_datetime:l}),null!==(o=e.timeArrived)&&void 0!==o&&o.time&&i.push({concept_id:5605,value_text:e.timeArrived.time,obs_datetime:l}),e.mannerOfDeath&&i.push({concept_id:5002,value_text:e.mannerOfDeath,obs_datetime:l}),i};function F(e){const a=e.items.find(e=>e.selected);return a?{[e.property_name]:a.name}:{}}const V=async(e,a)=>{await g(a)&&e()},I=[{addItemButton:!0,name:"save",btnFill:"clear",fn:()=>V(E,"Do you want to save the death outcome?")},{addItemButton:!0,name:"cancel",btnFill:"clear",fn:()=>Y("dataSaved",{dataSaved:!0})}],Y=a;return(e,a)=>{const o=r("ion-card-title");return d(),m(h(ie),null,{default:p(()=>[c(h(re),null,{default:p(()=>[c(o,null,{default:p(()=>[...a[7]||(a[7]=[f("Death Outcome",-1)])]),_:1})]),_:1}),c(h(pe),null,{default:p(()=>[v("div",cn,[v("div",un,[c(He,{placeholder:D[0].placeHolder,icon:h(se),inputValue:D[0].dataValue.value,"onUpdate:inputValue":D[0].dataHandler},null,8,["placeholder","icon","inputValue","onUpdate:inputValue"]),D[0].show_error.value?(d(),m(h(G),{key:0,class:"error-label"},{default:p(()=>[f(C(D[0].error_message),1)]),_:1})):u("",!0)]),v("div",mn,[c(Be,{place_holder:A[0].placeHolder,onDateUpDated:A[0].dataHandler,date_prop:""},null,8,["place_holder","onDateUpDated"]),A[0].show_error.value?(d(),m(h(G),{key:0,class:"error-label"},{default:p(()=>[f(C(A[0].error_message),1)]),_:1})):u("",!0)]),v("div",pn,[c(da,{place_holder:k[0].placeHolder,onTimeUpDated:k[0].dataHandler,time_prop:""},null,8,["place_holder","onTimeUpDated"]),k[0].show_error.value?(d(),m(h(G),{key:0,class:"error-label"},{default:p(()=>[f(C(k[0].error_message),1)]),_:1})):u("",!0)]),v("div",vn,[c(He,{placeholder:D[1].placeHolder,icon:h(de),inputValue:D[1].dataValue.value,"onUpdate:inputValue":D[1].dataHandler},null,8,["placeholder","icon","inputValue","onUpdate:inputValue"]),D[1].show_error.value?(d(),m(h(G),{key:0,class:"error-label"},{default:p(()=>[f(C(D[1].error_message),1)]),_:1})):u("",!0)]),x.value?(d(),s("div",hn,[c(h(ce),{modelValue:O[0].value.value,"onUpdate:modelValue":a[0]||(a[0]=e=>O[0].value.value=e),alignment:"start",class:"ion-lblCls",onIonChange:a[1]||(a[1]=e=>O[0].show_error.value=!1)},{default:p(()=>[f(C(O[0].lblTxt),1)]),_:1},8,["modelValue"]),O[0].show_error.value?(d(),m(h(G),{key:0,class:"error-label"},{default:p(()=>[f(C(O[0].error_message),1)]),_:1})):u("",!0)])):u("",!0),v("div",bn,[c(He,{placeholder:n.value,icon:h(ue),modelValue:t.value,"onUpdate:modelValue":a[2]||(a[2]=e=>t.value=e)},null,8,["placeholder","icon","modelValue"])]),v("div",fn,[c(Be,{place_holder:A[1].placeHolder,onDateUpDated:A[1].dataHandler,date_prop:""},null,8,["place_holder","onDateUpDated"]),A[1].show_error.value?(d(),m(h(G),{key:0,class:"error-label"},{default:p(()=>[f(C(A[1].error_message),1)]),_:1})):u("",!0)]),v("div",gn,[c(da,{place_holder:k[1].placeHolder,onTimeUpDated:k[1].dataHandler,time_prop:""},null,8,["place_holder","onTimeUpDated"]),k[1].show_error.value?(d(),m(h(G),{key:0,class:"error-label"},{default:p(()=>[f(C(k[1].error_message),1)]),_:1})):u("",!0)]),v("div",yn,[c(h(Q),{modelValue:i.value,"onUpdate:modelValue":[a[3]||(a[3]=e=>i.value=e),a[4]||(a[4]=e=>{return a=e,S[0].show_error.value=!1,P.value.forEach(e=>e.selected=e.id===a.id),void("Accident"!==a.name&&(b.value=null,T.value.forEach(e=>e.selected=!1),S[1].show_error.value=!1));var a})],multiple:!1,taggable:!1,"hide-selected":!0,"close-on-select":!0,openDirection:"bottom",placeholder:"Manner of death",selectLabel:"",label:"name",searchable:!0,"track-by":"id",options:P.value},null,8,["modelValue","options"]),S[0].show_error.value?(d(),m(h(G),{key:0,class:"error-label"},{default:p(()=>[f(C(S[0].error_message),1)]),_:1})):u("",!0)]),y.value?(d(),s("div",_n,[c(He,{placeholder:D[5].placeHolder,icon:h(me),inputValue:D[5].dataValue.value,"onUpdate:inputValue":D[5].dataHandler},null,8,["placeholder","icon","inputValue","onUpdate:inputValue"]),D[5].show_error.value?(d(),m(h(G),{key:0,class:"error-label"},{default:p(()=>[f(C(D[5].error_message),1)]),_:1})):u("",!0)])):u("",!0),w.value?(d(),s("div",xn,[c(h(Q),{modelValue:b.value,"onUpdate:modelValue":[a[5]||(a[5]=e=>b.value=e),a[6]||(a[6]=e=>{return a=e,S[1].show_error.value=!1,void T.value.forEach(e=>e.selected=e.id===a.id);var a})],multiple:!1,taggable:!1,"hide-selected":!0,"close-on-select":!0,openDirection:"bottom",placeholder:"How did it occur?",selectLabel:"",label:"name",searchable:!0,"track-by":"id",options:T.value},null,8,["modelValue","options"]),S[1].show_error.value?(d(),m(h(G),{key:0,class:"error-label"},{default:p(()=>[f(C(S[1].error_message),1)]),_:1})):u("",!0)])):u("",!0),_.value?(d(),s("div",wn,[c(He,{placeholder:D[6].placeHolder,icon:h(me),inputValue:D[6].dataValue.value,"onUpdate:inputValue":D[6].dataHandler},null,8,["placeholder","icon","inputValue","onUpdate:inputValue"]),D[6].show_error.value?(d(),m(h(G),{key:0,class:"error-label"},{default:p(()=>[f(C(D[6].error_message),1)]),_:1})):u("",!0)])):u("",!0),v("div",kn,[c(Be,{place_holder:A[2].placeHolder,onDateUpDated:A[2].dataHandler,date_prop:""},null,8,["place_holder","onDateUpDated"]),A[2].show_error.value?(d(),m(h(G),{key:0,class:"error-label"},{default:p(()=>[f(C(A[2].error_message),1)]),_:1})):u("",!0)]),v("div",Cn,[c(da,{place_holder:k[2].placeHolder,onTimeUpDated:k[2].dataHandler,time_prop:""},null,8,["place_holder","onTimeUpDated"]),k[2].show_error.value?(d(),m(h(G),{key:0,class:"error-label"},{default:p(()=>[f(C(k[2].error_message),1)]),_:1})):u("",!0)]),v("div",An,[c(He,{placeholder:D[2].placeHolder,icon:h(de),inputValue:D[2].dataValue.value,"onUpdate:inputValue":D[2].dataHandler},null,8,["placeholder","icon","inputValue","onUpdate:inputValue"]),D[2].show_error.value?(d(),m(h(G),{key:0,class:"error-label"},{default:p(()=>[f(C(D[2].error_message),1)]),_:1})):u("",!0)]),v("div",Dn,[c(He,{placeholder:D[3].placeHolder,icon:h(R),inputValue:D[3].dataValue.value,"onUpdate:inputValue":D[3].dataHandler},null,8,["placeholder","icon","inputValue","onUpdate:inputValue"]),D[3].show_error.value?(d(),m(h(G),{key:0,class:"error-label"},{default:p(()=>[f(C(D[3].error_message),1)]),_:1})):u("",!0)]),v("div",On,[c(He,{placeholder:D[4].placeHolder,icon:h(me),inputValue:D[4].dataValue.value,"onUpdate:inputValue":D[4].dataHandler},null,8,["placeholder","icon","inputValue","onUpdate:inputValue"]),D[4].show_error.value?(d(),m(h(G),{key:0,class:"error-label"},{default:p(()=>[f(C(D[4].error_message),1)]),_:1})):u("",!0)]),c(Me,{color:"#006401",animated:!0,thickness:1,class:"full-width-divider"}),v("div",Pn,[I[0].addItemButton?(d(),m(xe,{key:0,name:I[0].name,fill:I[0].btnFill,icon:h(ee),"onClicked:btn":I[0].fn},null,8,["name","fill","icon","onClicked:btn"])):u("",!0),I[1].addItemButton?(d(),m(xe,{key:1,name:I[1].name,fill:I[1].btnFill,icon:h(ae),"onClicked:btn":I[1].fn},null,8,["name","fill","icon","onClicked:btn"])):u("",!0)])])]),_:1})]),_:1})}}}),En=Pe(Sn,[["__scopeId","data-v-b051bf57"]]),Nn={class:"dash_box"},Fn={key:1},Vn=t({name:"xxxComponent"}),In=t({...Vn,setup(e){const a=o("No outcome created yet"),t=o(!1),n=o("please select a type"),b=o(!0),g=o(""),_=o(!0),x=o(!1),w=ze(),k=l(()=>w.outcomes),A=o(!1),D=o(!1),O=o(!1),P=o(!1),T=o(!1),S=o(!1);o();const E=o(null),N=o(null),F=o(null),V=o(null),I=o(null),Y=o(null),H=o([{name:"Admitted for short stay",selected:!1},{name:"Referred out",selected:!1},{name:"Discharged Home",selected:!1},{name:"Send to Another Clinic",selected:!1},{name:"Death",selected:!1}]),B=[{multi_Selection:!1,show_list_label:!0,unqueId:"qwerty2",name_of_list:"Add new outcome",placeHolder:"Choose one",items:H.value,listUpdatedFN:function(e){H.value=e,H.value.forEach(e=>{1==e.selected&&(g.value=e.name)})},listFilteredFN:()=>{},use_internal_filter:!0,disabled:o(!1)}];function M(){k.value.length>0?_.value=!1:0==k.value.length&&0==x.value&&(_.value=!0)}function U(e){k.value.splice(e,1)}i(async()=>{M()}),y(()=>g.value,async e=>{1==A.value?A.value=!1:async function(){const e=g.value;console.log(e),g.value=e;const a=g.value;a==H.value[0].name?O.value=!0:O.value=!1,a==H.value[1].name?(P.value=!0,console.log("show_discharged_options is set to true")):P.value=!1,a==H.value[2].name?(T.value=!0,console.log("show_discharged_options is set to true")):T.value=!1,a==H.value[3].name?S.value=!0:S.value=!1,a==H.value[4].name?D.value=!0:D.value=!1}()}),y(()=>k.value.length,async e=>{M()});const R=e=>{U(e.index),function(e){H.value.forEach(a=>{1!=e.selected||e.name!=a.name&&e.type!=a.name||(g.value=a.name)})}(e.item),E.value=e.item.other.location_data,N.value={reason:e.item.reason,date:e.item.date,time:e.item.time},F.value=e.item.other,V.value=e.item,"Discharged Home"===e.item.type&&(I.value=e.item,Y.value={reason:e.item.reason,date:e.item.date})};function L(){D.value=!1,O.value=!1,P.value=!1,T.value=!1,H.value.forEach(e=>{e.selected=!1}),g.value=""}return(e,o)=>{const l=r("ion-row");return d(),m(h(oe),null,{default:p(()=>[c(l,null,{default:p(()=>[c(h(ve),null,{default:p(()=>[(d(),m(ca,{key:0,"onUpdate:removeItem":U,"onUpdate:editItem":R,displayData:k.value},null,8,["displayData"]))]),_:1})]),_:1}),_.value?(d(),m(l,{key:0},{default:p(()=>[v("span",Nn,C(a.value),1)]),_:1})):u("",!0),b.value?(d(),s("div",Fn,[c(l,null,{default:p(()=>[c(h(ve),null,{default:p(()=>[c(qe,{multiSelection:B[0].multi_Selection,show_label:B[0].show_list_label,uniqueId:B[0].unqueId,name_of_list:B[0].name_of_list,choose_place_holder:B[0].placeHolder,"items_-list":B[0].items,use_internal_filter:B[0].use_internal_filter,disabled:B[0].disabled.value,onItemListUpDated:B[0].listUpdatedFN,onItemListFiltered:B[0].listFilteredFN},null,8,["multiSelection","show_label","uniqueId","name_of_list","choose_place_holder","items_-list","use_internal_filter","disabled","onItemListUpDated","onItemListFiltered"]),v("div",null,[t.value?(d(),m(h(G),{key:0,class:"error-label"},{default:p(()=>[f(C(n.value),1)]),_:1})):u("",!0)])]),_:1})]),_:1})])):u("",!0),O.value?(d(),m(ua,{key:2,onDataSaved:L,selected_ward_prop:F.value,admitted_other_props:V.value},null,8,["selected_ward_prop","admitted_other_props"])):u("",!0),P.value?(d(),m(ma,{key:3,onDataSaved:L,selected_referral_data:E.value,selected_other_referral_data:N.value},null,8,["selected_referral_data","selected_other_referral_data"])):u("",!0),T.value?(d(),m(pa,{key:4,onDataSaved:L,selected_discharged_prop:I.value,selected_discharged_data:Y.value},null,8,["selected_discharged_prop","selected_discharged_data"])):u("",!0),D.value?(d(),m(En,{key:5,onDataSaved:L})):u("",!0),S.value?(d(),m(va,{key:6,onDataSaved:L})):u("",!0)]),_:1})}}});e("O",Pe(In,[["__scopeId","data-v-624d1093"]]))}}});
