import{d as F,e as I,f as y,k as s,l,Q as _,m as W,u as c,N as B,cl as G,I as P,p as z,r as S,bh as q,G as J,H as f,a3 as K,E as N,M,c as V,aF as L,c7 as Q,eB as j,ca as X,cg as Z,eS as ee,a as te,L as ae,bU as oe,dq as ne,eT as ie,eU as re,F as le,T as se,bq as ce}from"./vendor-CJ2tyHrn.js";import{_ as x,S as ue,u as E,F as h,q as O,K as C,H as de,b as k,G as R,J as pe,y as o,n as r,z as $,C as H,t as Y,T as me,o as D}from"../index-CPIhguZJ.js";import{D as ve}from"./DemographicBar-CVlkGgKM.js";import{u as fe}from"./useLocation-BxHWO3Ky.js";import{P as ye}from"./patient_diagnosis_service-DTN-hwjk.js";import"./lodash-NJiRuGo9.js";import"./apexcharts-BtvCa6MI.js";const he={class:"icon-container"},be={class:"card-title"},ge=F({__name:"ANCCard",props:{icon:{},title:{},isSaved:{type:Boolean,default:!1}},emits:["click"],setup(u,{emit:n}){const a=n;return(d,e)=>(y(),I("div",{class:z(["card",{"card-saved":u.isSaved}]),onClick:e[0]||(e[0]=i=>a("click"))},[s("div",he,[l(c(B),{icon:u.icon,class:"card-icon"},null,8,["icon"]),u.isSaved?(y(),_(c(B),{key:0,icon:c(G),class:"check-icon"},null,8,["icon"])):W("",!0)]),s("div",be,P(u.title),1)],2))}}),_e=x(ge,[["__scopeId","data-v-2f6e2295"]]),Te={class:"calendar-container"},Ce={class:"calendar-selector"},Fe={class:"calendar-day"},Se={class:"day-wrapper"},Ae={class:"count-badge"},De=F({__name:"NextAppointment",setup(u){const n=S(null),a=S(new Date(ue.getSessionDate())),d=E(),{patient:e}=q(d),i=async()=>{if(!n.value)return;const m=await C.buildValueDate("Appointment date",de.toStandardHisFormat(n.value));await C.addObsToEncounterPatient([m],k.APPOINTMENT)&&R("next Appointment Set Successfully"),await pe(e.value),M.dismiss()},t=m=>"",p=async m=>{m&&(n.value=m)};return(m,b)=>{const A=J("VueDatePicker");return y(),_(O,{title:"Next Appointment ",subtitle:"ANC Next Appointment",headerIcon:c(N)},{"top-buttons":f(()=>[l(h,{name:"Save Appointment",onClick:i,fill:"solid",class:"save-button"})]),content:f(()=>[s("div",Te,[b[1]||(b[1]=s("h2",{class:"calendar-title"},"Set Appointments",-1)),s("div",Ce,[l(A,{class:"calendar",onDateUpdate:p,inline:"","auto-apply":"","enable-time-picker":!1,"min-date":a.value,modelValue:n.value,"onUpdate:modelValue":b[0]||(b[0]=T=>n.value=T)},{day:f(({day:T,date:v})=>[s("p",Fe,[s("span",Se,[K(P(T)+" ",1),s("sup",Ae,P(t(v)),1)])])]),_:1},8,["min-date","modelValue"])])])]),_:1},8,["headerIcon"])}}}),Pe=x(De,[["__scopeId","data-v-3ca86ed3"]]),Ne=()=>{const{facilityList:u,getFacilities:n}=fe(),a=S([]),d=async t=>{const p=t.trim().toLowerCase()||"";return a.value=await ye.getDiagnosis(p,1,15),a.value};d(""),n();const e=["Walking","Ambulance","Public transport","Private transport","Police vehicle","Other public or company vehicle","Motorcycle","Taxi (car/motorcycle)","Bicycle"].map(t=>({label:t,value:t}));return{ANCReferralForm:V(()=>[{componentType:"radioButtonField",header:"Referral for urgent care",name:"Referral for urgent care",obsValueType:"value_text",validation:o.required,type:"inline",options:[{label:"Yes",value:"Yes"},{label:"No",value:"No"}]},{componentType:"radioButtonField",header:"Reason for referral",name:"Reason for referral",obsValueType:"value_text",type:"inline",options:[{label:"Referral for screening including diagnostics",value:"Referral for screening including diagnostics"},{label:"Referral for other general services",value:"Referral for other general services"}]},{componentType:"textAreaField",header:"Other reasons for referral",name:"_Reason for referral",obsValueType:"value_text",icon:r.editPen,condition:t=>(t==null?void 0:t["Reason for referral"])==="Referral for other general services"},{componentType:"radioButtonField",header:"Any treatment given before referral?",name:"Any treatment given before referral",obsValueType:"value_text",validation:o.required,type:"inline",options:[{label:"Yes",value:"Yes"},{label:"No",value:"No"}]},{componentType:"textAreaField",header:"Summary of current condition and treatment provided on referral?",name:"Summary of current condition and treatment provided on referral?",obsValueType:"value_text",icon:r.editPen,condition:t=>(t==null?void 0:t["Any treatment given before referral"])==="Yes"},{componentType:"Dashes"},{name:"Provisional Diagnosis",header:"Provisional Diagnosis",componentType:"multiSelectInputField",isMultiple:!0,trackBy:"name",obsValueType:"value_coded",options:a.value,icon:r.search,onSearchChange:d,validation:o.required},{componentType:"Dashes"},{componentType:"multiSelectInputField",header:"Facility",name:"Referral facility",trackBy:"code",openDirection:"auto",icon:r.search,obsValueType:"value_text",validation:t=>o.required(t),options:u.value.facilities||u.value},{componentType:"inputField",header:"Department",name:"Department",obsValueType:"value_text",grid:{s:"6"},icon:r.editPen},{componentType:"inputField",header:"Contact Person",name:"Contact Person",obsValueType:"value_text",icon:r.editPen,grid:{s:"6"}},{componentType:"Dashes"},{componentType:"switchField",label:"Accompanying Staff",name:"Accompanying Staff",obsValueType:"value_text",trueValue:"Yes",falseValue:"No"},{componentType:"multiSelectInputField",header:"Transport Type",name:"Mode of transport",obsValueType:"value_text",isMultiple:!1,label:"label",trackBy:"value",options:e,grid:{s:"6"}},{componentType:"inputField",header:"Provider’s phone number",name:"Provider’s phone number",obsValueType:"value_text",grid:{s:"6"},icon:r.phone,validation:o.isMWPhoneNumber},{componentType:"dateInputField",header:"Referral Appointment Date",name:"Date referral was made",showTodayButton:!0,validation:o.required,obsValueType:"value_date",icon:r.calendar,grid:{s:"6"}},{componentType:"inputField",header:"Referral Appointment Time",name:"Time referral made",type:"time",validation:o.required,obsValueType:"value_text",icon:r.time,grid:{s:"6"}},{componentType:"Dashes"},{componentType:"textAreaField",header:"Referral notes",name:"Referral notes",obsValueType:"value_text",icon:r.editPen,validation:o.required}])}},Ve={class:"content-wrapper"},xe=F({__name:"ANCreferral",setup(u){const{ANCReferralForm:n}=Ne(),{formRef:a}=$(),d=async()=>{var i,t,p;const e=(i=a.value)==null?void 0:i.getFormValues();if(((t=a.value)==null?void 0:t.validateForm())!==null)return Y("Please fill all the required fields");await C.buildSaveObs(e,k.REFERRAL)&&R("ANC referral details have been created"),(p=a.value)==null||p.resetForm(),M.dismiss()};return(e,i)=>(y(),_(O,{title:"Referral Form",subtitle:"ANC Patient Referral",headerIcon:c(N)},{"top-buttons":f(()=>[l(h,{name:"Save Referral",onClick:d,fill:"solid",class:"save-button"})]),content:f(()=>[s("div",Ve,[l(H,{formData:c(n),ref_key:"formRef",ref:a},null,8,["formData"])])]),_:1},8,["headerIcon"]))}}),Oe=()=>{const u=[{label:"In labour",value:"In labour"},{label:"Live birth",value:"Live birth"},{label:"Stillbirth",value:"Stillbirth"},{label:"Pregnancy, miscarriage",value:"Pregnancy, miscarriage"},{label:"Abortion",value:"Abortion"},{label:"Death",value:"Death"},{label:"Lost to follow up",value:"Lost to follow up"},{label:"Moved away",value:"Moved away"},{label:"Other outcome",value:"Other outcome"}],n=[{label:"Home",value:"Home or TBA"},{label:"Health-care facility",value:"Health-care facility"},{label:"Other",value:"Other"}],a=[{label:"Normal",value:"Normal"},{label:"Forceps",value:"Forceps"},{label:"Vacuum",value:"Vacuum"},{label:"Caesarean section",value:"Caesarean section"}];return{pregnantOutComeForm:V(()=>[{componentType:"radioButtonField",header:"What is the outcome of the pregnancy?",name:"ANC pregnancy outcome",obsValueType:"value_coded",type:"inline",validation:o.required,options:u},{grid:{s:"1"}},{componentType:"textAreaField",header:"Specify",name:"Pregnancy outcome notes",obsValueType:"value_text",icon:r.editPen,grid:{s:"11"},validation:o.required,condition:e=>(e==null?void 0:e["ANC pregnancy outcome"])==="Other outcome"},{grid:{s:"1"}},{componentType:"dateInputField",header:"Date of death",name:"Date of death",showTodayButton:!0,grid:{s:"11"},validation:o.required,obsValueType:"value_date",icon:r.calendar,condition:e=>(e==null?void 0:e["ANC pregnancy outcome"])==="Death"},{grid:{s:"1"}},{componentType:"textAreaField",header:"Cause of Death",name:"Cause of death",obsValueType:"value_text",icon:r.editPen,grid:{s:"11"},validation:o.required,condition:e=>(e==null?void 0:e["ANC pregnancy outcome"])==="Death"},{grid:{s:"1"}},{componentType:"dateInputField",header:"Estimated date of delivery",name:"Estimated date of delivery",showTodayButton:!0,grid:{s:"11"},validation:o.required,obsValueType:"value_date",icon:r.calendar,condition:e=>(e==null?void 0:e["ANC pregnancy outcome"])==="Live birth"},{grid:{s:"1"}},{componentType:"radioButtonField",header:"Place of delivery",name:"Place of Delivery",obsValueType:"value_coded",grid:{s:"11"},validation:o.required,type:"inline",options:n,condition:e=>(e==null?void 0:e["ANC pregnancy outcome"])==="Live birth"},{grid:{s:"1"}},{componentType:"inputField",header:"Specify",name:"_Place of delivery",obsValueType:"value_text",icon:r.editPen,grid:{s:"11"},validation:o.required,condition:e=>(e==null?void 0:e["Place of Delivery"])==="Other"},{grid:{s:"1"}},{componentType:"radioButtonField",header:"Preterm birth",name:"Preterm birth",obsValueType:"value_coded",grid:{s:"11"},validation:o.required,type:"inline",options:[{label:"Yes",value:"Yes"},{label:"No",value:"No"}],condition:e=>(e==null?void 0:e["ANC pregnancy outcome"])==="Live birth"},{grid:{s:"1"}},{componentType:"radioButtonField",header:"Mode of delivery",name:"Mode of delivery",obsValueType:"value_coded",type:"inline",grid:{s:"11"},validation:o.required,options:a,condition:e=>(e==null?void 0:e["ANC pregnancy outcome"])==="Live birth"},{grid:{s:"1"}},{componentType:"inputField",header:"Birth weight (grams)",name:"Weight",obsValueType:"value_numeric",type:"number",icon:r.weight,grid:{s:"11"},validation:e=>{const i=o.required(e);if(i!==!0)return i;const t=Number(e);return isNaN(t)?"Value should be a number":t<0?"Weight must be positive":t>6e3?"Weight must be less than 6000g":!0},condition:e=>(e==null?void 0:e["ANC pregnancy outcome"])==="Live birth"}])}},ke={class:"content-wrapper"},Re=F({__name:"PregnantOutcome",setup(u){const{pregnantOutComeForm:n}=Oe(),{formRef:a}=$(),d=L(),e=async()=>{var t,p,m;const i=(t=a.value)==null?void 0:t.getFormValues();if(((p=a.value)==null?void 0:p.validateForm())!==null)return Y("Please fill all the required fields");await C.buildSaveObs(i,k.PREGNANT_OUTCOME)&&R("ANC referral details have been created"),(m=a.value)==null||m.resetForm(),d.push("patientProfile")};return(i,t)=>(y(),_(O,{title:"Pregnancy Outcome",subtitle:"ANC Pregnancy Outcome",headerIcon:c(N)},{"top-buttons":f(()=>[l(h,{name:"Save Outcome",onClick:e,fill:"solid",class:"submit-button"})]),content:f(()=>[s("div",ke,[l(H,{formData:c(n),ref_key:"formRef",ref:a},null,8,["formData"])])]),_:1},8,["headerIcon"]))}}),we={class:"dashboard-container"},Be={class:"back-profile"},Ie={class:"dashboard-grid"},qe=F({__name:"Contacts",setup(u){const n=L(),a=E(),{patient:d}=q(a),e=S(""),i=[{title:"Symptoms and Follow Up",path:"/symptomsFollowUp",icon:Q,isSaved:!1},{title:"Physical Examination",path:"/physicalExamination",icon:j,isSaved:!1},{title:"Lab Tests and Imaging",path:"/labTests",icon:X,isSaved:!1},{title:"Diagnosis and Treatment",path:"/ANCDiagnosisTreatment",icon:Z,isSaved:!1},{title:"Counselling",path:"/counselling",icon:ee,isSaved:!1}],t=V(()=>e.value?i.filter(v=>v.title!=="Profile"):i),p=v=>{n.push({path:v})},m=async()=>{await D(Pe,{class:"medium-modal"})},b=async()=>{await D(xe,{class:"medium-modal"})},A=async()=>{await D(Re,{class:"medium-modal"})},T=async()=>{try{const v=await C.getFirstObsValue(d.value.patientID,"Gravida","value_text");e.value=v}catch(v){console.error("Error fetching gravida:",v)}};return te(()=>{T()}),(v,w)=>(y(),_(c(ce),null,{default:f(()=>[l(me),l(c(ae),{fullscreen:!0},{default:f(()=>[l(ve),s("div",we,[s("div",Be,[l(h,{name:"Back to profile",iconSlot:"start",fill:"clear",icon:c(oe),onClick:w[0]||(w[0]=g=>p("/patientProfile"))},null,8,["icon"]),s("div",null,[l(h,{name:"Schedule appointment",iconSlot:"start",fill:"outline",icon:c(ne),onClick:m,class:"sub-button"},null,8,["icon"]),l(h,{name:"Referral",iconSlot:"start",fill:"outline",icon:c(ie),onClick:b,class:"sub-button"},null,8,["icon"]),l(h,{name:"Pregnancy outcome",iconSlot:"start",fill:"outline",icon:c(re),onClick:A,class:"sub-button"},null,8,["icon"])])]),s("div",Ie,[(y(!0),I(le,null,se(t.value,(g,U)=>(y(),_(_e,{key:U,icon:g.icon,title:g.title,isSaved:g.isSaved,onClick:Me=>!g.isSaved&&p(g.path)},null,8,["icon","title","isSaved","onClick"]))),128))])])]),_:1})]),_:1}))}}),Ge=x(qe,[["__scopeId","data-v-96bfe89a"]]);export{Ge as default};
