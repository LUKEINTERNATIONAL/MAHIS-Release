import{d as j,b2 as q,cp as z,r as i,w as _,e as I,f as h,l as G,J as Q,k as C,F as U,P as X,K as Y,u as Z,b7 as S,cW as $}from"./vendor-CzFJ4KTZ.js";import{u as tt,ag as et,af as o,H as b,bb as at,_ as st}from"../index-DnsBo8A8.js";import"./lodash-NJiRuGo9.js";import"./apexcharts-C9muk_WD.js";const ot={class:"table-responsive"},nt=j({__name:"VitalsMeasurementsSummary",setup(rt){const B=tt(),{patient:c}=q(B),M=z(),T=i(null),l=i([]),v=i(""),E=i(["Date","Weight","Height (cm)","Temperature","Pulse","SAO2","Systolic","Respiration rate","Diastolic","BMI"]),V=i({responsive:!0,select:!1,layout:{topStart:"",topEnd:"search",bottomStart:"info",bottomEnd:"paging"},ordering:!1}),w=async()=>{try{l.value=[];const r=(await et.getObsByEncounterId(6)).flatMap(e=>e.obs||[]),t=new Map;r.forEach(e=>{var a;if(e.obs_datetime){const s=e.obs_datetime.split(" ")[0];t.has(s)||t.set(s,[]),(a=t.get(s))==null||a.push(e)}});for(const[e,a]of t.entries())await k(e,a);l.value.sort((e,a)=>new Date(a[0]).getTime()-new Date(e[0]).getTime())}catch(n){console.error("Error updating vitals data:",n)}S.use($)},k=async(n,r)=>{const t=K=>{var D;const f=r.find(L=>L.concept_id===K);return(D=f==null?void 0:f.value_numeric)!=null?D:""},e=await o.getConceptID("Height (cm)"),a=await o.getConceptID("Weight (kg)"),s=await o.getConceptID("Systolic blood pressure"),p=await o.getConceptID("Diastolic blood pressure"),u=await o.getConceptID("Temperature (c)"),d=await o.getConceptID("Pulse"),O=await o.getConceptID("Blood oxygen saturation"),R=await o.getConceptID("Respiratory rate"),m=t(a),g=t(e),H=t(u),F=t(d),P=t(O),W=t(s),A=t(R),N=t(p);let y="";m&&g&&(y=await x(m,g));const J=[b.toStandardHisDisplayFormat(n),m,g,H,F,P,W,A,N,y];l.value.push(J)},x=async(n,r)=>{var t,e,a,s,p,u;if((e=(t=c.value)==null?void 0:t.personInformation)!=null&&e.gender&&((s=(a=c.value)==null?void 0:a.personInformation)!=null&&s.birthdate))try{return v.value=await at.getBMI(parseInt(String(n)),parseInt(String(r)),c.value.personInformation.gender,b.calculateAge(c.value.personInformation.birthdate,b.sessionDate())),(u=(p=v.value)==null?void 0:p.index)!=null?u:""}catch(d){return console.error("Error calculating BMI:",d),""}return""};return _(()=>M,async()=>{await w()},{deep:!0}),_(c,async()=>{await w()},{deep:!0,immediate:!0}),(n,r)=>(h(),I("div",ot,[G(Z(S),{ref_key:"dataTable",ref:T,options:V.value,data:l.value,class:"display nowrap modern-table",width:"100%"},{default:Q(()=>[C("thead",null,[C("tr",null,[(h(!0),I(U,null,X(E.value,t=>(h(),I("th",{key:t},Y(t),1))),128))])])]),_:1},8,["options","data"])]))}}),ut=st(nt,[["__scopeId","data-v-7d280081"]]);export{ut as default};
