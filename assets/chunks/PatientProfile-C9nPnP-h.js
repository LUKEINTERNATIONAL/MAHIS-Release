const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./LabOrdersList-Ck1vB-6t.js","./vendor-CAxM8KGs.js","./lodash-NJiRuGo9.js","../vendor.Dm4sm59p.css","../index-CSiBRz_H.js","./apexcharts-y0ZeiY9V.js","../index.D1cCvFet.css","./EnterLabResultsModal-DiPr-J1J.js","../EnterLabResultsModal.CFABaZbT.css","./BasicForm-B0bC2Yzg.js","./DateInputField-BQ767VxD.js","../DateInputField.YUpPNB6n.css","../BasicForm.CS8soES6.css","./useUserActivities-BgAhGVID.js","../LabOrdersList.TfoJFXpV.css","./DiagnosesHistory-BTIiwXbe.js","../DiagnosesHistory.BEA7zPYa.css","./AllergiesHistory-BFUMPUj2.js","../AllergiesHistory.BdLtFHIK.css","./MedicationsHistory-Cx_HIJrV.js","../MedicationsHistory.DAk17UPz.css","./VisitsHistory-BhqCeLgD.js","../VisitsHistory.BWB3hFTK.css","./VitalsMeasurementsSummary-C6ODUjiX.js","../VitalsMeasurementsSummary.Bb3yaWqr.css","./PatientProfile-CFfIaxRf.js","./DemographicBar-Bk6HKvtx.js","../DemographicBar.DtnnoAYr.css","./SaveProgressModal-BP95xqUB.js","../SaveProgressModal.DLXC0SP6.css","./Stepper-BHnznjcG.js","./NextAppointment-BeXC72UE.js","./group_validation-BX0sevkQ.js","./RadiologyStore-BBgQl-JO.js","./formatServerData-CZ0pe3c6.js","./DashBox-G-5QVoMj.js","./previousComplaints-DfalDQJ5.js","../previousComplaints.Clw4EhHt.css","./patient_complaints_service-Cnsj_Wla.js","./useFormWizard-C1Sj9LRM.js","./user_role_management-yQPm8pMt.js","./nonPharmaTherapyStore-6O0q0--b.js","./drug_prescription_service-BpOUSuyE.js","./patient_diagnosis_service-Dowtzk-J.js","./ncd_appointment_service-zhkUg9vM.js","../NextAppointment.DrwdY6dI.css","./OPDOutcome-O62S411E.js","./LevelOfConsciousness.vue_vue_type_script_setup_true_lang-BUbzJJIJ.js","./Outcome-CZvR2Jgw.js","./wardsStore-DDFY9PR2.js","../Outcome.DJopL97u.css","../OPDOutcome.BXaO1Wk3.css","./VitalsMixin.vue_vue_type_script_lang-BECQwAi-.js","./TreatmentPlan-XTElrH4u.js","./ComplicationsStore-D7KGR3rm.js","../TreatmentPlan.5e113TPs.css","./OPDDiagnosis-TgfGKz-0.js","../OPDDiagnosis.BeRzIzxW.css","./MedicalHistory-BqabkgtF.js","../MedicalHistory.CU6JrgGK.css","./ReasonForVisit.vue_vue_type_script_setup_true_lang-CNVmWpOM.js","./UpcomingFeature-BqVagGgv.js","../UpcomingFeature.D0KC7Oer.css","./AbdominalExamination.vue_vue_type_script_setup_true_lang-BBEWUnoU.js","../AbdominalExamination.Cqsrucwx.css","./ClinicalCounselling-DkQdgXcB.js","../ClinicalCounselling.BQYYT_4L.css","./useLocation-D_307qAD.js","./BasicCard-DA1I-ICQ.js","../BasicCard.CLPwwedX.css","./PastObstreticHistoryStore-DTwZ7Gty.js","../Stepper.CGMjzCu8.css","./WeightHeightChart-ClYea-Zz.js","./chartjs-CM10eXjM.js","../WeightHeightChart.C9ItLuK7.css","./weightAndHeight-JVBZYF_O.js","./customDatePicker-DF2w4Hpa.js","../customDatePicker.twJBaIU5.css","../weightAndHeight.CJuqOhq_.css","./vaccines_service-DyZF96zW.js","./sms_service-BvInbP--.js","./EIRreportsStore-Cbu3hXyV.js","./Export-Lk5QPSux.js","../vaccines_service.DKZw05E0.css","./barcode-qrcode-reader-BJaG7qZz.js","./stock_service-cJ9ZRh8d.js","./Registration-A3alq7rv.js","./useSetRegistrationValues-BNfjRcAu.js","../useSetRegistrationValues.DXv8qQH4.css","./useNeonatalEnrollmentStore-Dr5mQm84.js","./enrollment-DU-PLRUa.js","../Registration.BCZDNUjQ.css","./AdministerOtherVaccinesStore-C6BNz-Y7.js","./usePatientProfile-BXsxACiG.js","../usePatientProfile.BRwk2gaY.css","../PatientProfile.xh9sFISw.css","./HTSPatientProfile-DdJylF2z.js","../HTSPatientProfile.D35WQABU.css","./NeonatalPatientProfile-uw7_-F8M.js","./neonatal_service-CM1yLg5R.js","./admissionWorkflow-C1e4oic-.js","../NeonatalPatientProfile.DYI6NX7_.css","./AETCPatientProfile-Cf07bRzc.js","./CPR-BXf7uyBE.js","./useRespiratoryRateOxygenForm-7KHpXSol.js","../CPR.C4Sa7ms4.css","./tasks-DxsQWhZV.js","../AETCPatientProfile.CVAhPfon.css","./BloodPressure-DMrT2ea6.js","../BloodPressure.B79nW_rj.css","./AncEnrollmentModal-D9nFpybM.js","../AncEnrollmentModal.BS2dd2F_.css","./LabourEnrollmentModal-BX-1rJab.js","../LabourEnrollmentModal.DgSOWoB_.css","./PNCEnrollmentModal-DN8dxSjh.js","../PNCEnrollmentModal.BDNYT6XY.css"])))=>i.map(i=>d[i]);
import{d as Mt,r as p,w as Nt,O as k,f as r,u as t,bw as _t,J as n,l as a,aR as aa,e as b,dW as pt,Q as d,L as D,at as na,F as Z,aS as sa,ah as oa,P as gt,a6 as x,a2 as N,aM as la,k as l,K as _,cG as pe,c4 as ia,c1 as fe,aV as ht,z as ra,D as ua,a as ve,I as da,G as ca,dX as ma,E as pa,N as fa,aa as _e,ab as Tt,bs as va,ac as L,ad as m,p as ge,dY as ae,m as f,c6 as _a,ae as ye,R as ga,am as ya,cr as Ca,b2 as Ot,c as X,H as ne,cN as w,dZ as ba,d1 as Aa,aj as Ia,ai as Pa,a1 as se,df as ka,dg as F,aD as Da,c8 as wa,aF as oe,d2 as Oa,cF as O}from"./vendor-CAxM8KGs.js";import{ag as yt,_ as St,P as xt,ah as Ea,a8 as Ra,o as Vt,ai as Na,aj as ha,u as Ta,a as xa,h as Ma,H as G,T as Sa,K as R,S as ft,D as tt,ak as Et,k as le,al as Va,s as ie,Z as vt,q as La,t as et,F as Rt,b as re,am as ue,an as K,ao as de}from"../index-CSiBRz_H.js";import{l as $a}from"./lodash-NJiRuGo9.js";import{u as Ha}from"./useUserActivities-BgAhGVID.js";import{u as Ba}from"./usePatientProfile-BXsxACiG.js";import{D as Ga}from"./DemographicBar-Bk6HKvtx.js";import{i as Ua}from"./tasks-DxsQWhZV.js";const za=Mt({__name:"ARTCard",props:{patient:{default:{}}},setup($){const T=$,M=p(!1),E=p({artStartDate:"",arvNumber:"",fileNumber:"",currentOutcome:""}),S=async v=>{M.value=!0;try{const i=await yt.getProgramInformation(v);E.value={artStartDate:(()=>{const[c,H,U]=i.art_start_date.split("/"),Y=i.art_start_date.match(/n\/a/i)?"":"(".concat(ra(yt.getSessionDate()).diff("".concat(U,"-").concat(H,"-").concat(c),"months")," Month(s))");return"".concat(i.art_start_date," ").concat(Y)})(),arvNumber:"".concat(i.arv_number," | Regimen: ").concat(i.current_regimen),fileNumber:i.filing_number.number,currentOutcome:i.current_outcome}}catch(i){console.error("Error fetching ART information:",i)}finally{M.value=!1}};return Nt(()=>T.patient,v=>{v&&v.patientID?S(v.patientID):E.value={artStartDate:"--",arvNumber:"--",fileNumber:"--",currentOutcome:"--"}},{immediate:!0,deep:!0}),(v,i)=>(r(),k(t(_t),null,{default:n(()=>[a(t(sa),null,{default:n(()=>[a(t(aa),null,{default:n(()=>[M.value?(r(),k(t(pt),{key:0,animated:"",style:{width:"200px",height:"24px"}})):(r(),b(Z,{key:1},[a(t(D),{icon:t(na)},null,8,["icon"]),i[0]||(i[0]=d(" ART Information ",-1))],64))]),_:1})]),_:1}),a(t(ht),null,{default:n(()=>[a(t(oa),null,{default:n(()=>[M.value?(r(),b(Z,{key:0},gt(4,c=>a(t(x),{key:c},{default:n(()=>[a(t(pt),{slot:"start",animated:"",style:{width:"24px",height:"24px","border-radius":"50%"}}),a(t(N),null,{default:n(()=>[a(t(pt),{animated:"",style:{width:"120px",height:"16px","margin-bottom":"8px"}}),a(t(pt),{animated:"",style:{width:"180px",height:"20px"}})]),_:1})]),_:1})),64)):(r(),b(Z,{key:1},[a(t(x),null,{default:n(()=>[a(t(D),{icon:t(la),slot:"start"},null,8,["icon"]),a(t(N),null,{default:n(()=>[i[1]||(i[1]=l("h3",null,"ART Start Date",-1)),l("p",null,_(E.value.artStartDate),1)]),_:1})]),_:1}),a(t(x),null,{default:n(()=>[a(t(D),{icon:t(pe),slot:"start"},null,8,["icon"]),a(t(N),null,{default:n(()=>[i[2]||(i[2]=l("h3",null,"ARV Number",-1)),l("p",null,_(E.value.arvNumber),1)]),_:1})]),_:1}),a(t(x),null,{default:n(()=>[a(t(D),{icon:t(ia),slot:"start"},null,8,["icon"]),a(t(N),null,{default:n(()=>[i[3]||(i[3]=l("h3",null,"File Number",-1)),l("p",null,_(E.value.fileNumber),1)]),_:1})]),_:1}),a(t(x),null,{default:n(()=>[a(t(D),{icon:t(fe),slot:"start"},null,8,["icon"]),a(t(N),null,{default:n(()=>[i[4]||(i[4]=l("h3",null,"Current Outcome",-1)),l("p",null,_(E.value.currentOutcome),1)]),_:1})]),_:1})],64))]),_:1})]),_:1})]),_:1}))}}),Fa=St(za,[["__scopeId","data-v-7ec7b45c"]]),ce=[{classDash:"dashed_bottom_border",radioBtnContent:{header:{title:"Is the pregnancy confirmed?*",class:"bold",selectedValue:"",name:"Pregnancy confirmed"},data:[{value:"Yes",name:"Yes",colSize:"2"},{value:"No",name:"No",colSize:"2"}]}},{classDash:"dashed_bottom_border",radioBtnContent:{header:{title:"Was the pregnancy planned?*",selectedValue:"",class:"bold",name:"Pregnancy planned"},data:[{value:"Yes",name:"Yes",colSize:"2"},{value:"No",name:"No",colSize:"2"}]}}],Ya=ua("ANCEnrollmentStore",{state:()=>({ConfirmPregnancy:[...ce]}),actions:{setConfirmPregnancy($){this.ConfirmPregnancy=$},getInitial(){return[...$a.cloneDeep(ce)]}}}),Wa={class:"header-content"},ja={class:"title-section"},qa={class:"tasks-container"},Ka=["onClick"],Za={class:"task-icon-container"},Qa={class:"task-content"},Ja={key:0,class:"task-status"},Xa={key:1,class:"empty-state"},tn={class:"empty-icon"},en=Mt({__name:"TaskView",props:{tasks:{type:Object,required:!0}},setup($){const T=p([]),M=$;ve(async()=>{const v=new xt;T.value=[];const i=await new Ea(v.getID()).getProgram();M.tasks.forEach(async c=>{var U,Y,at,nt;const H={orderNumber:(U=c.sortOrder)!=null?U:9999,label:(Y=c.displayName)!=null?Y:c.name,icon:c.icon,disabled:!1,taskCompleted:!1,task:c};if(!(typeof c.workflowID=="string"&&!await Ua(c.workflowID))&&!(typeof c.condition=="function"&&!await c.condition(M.tasks))&&!(typeof c.globalProperty=="string"&&!await Ra.isProp("".concat(c.globalProperty,"=true"))))return typeof c.allowTaskAfterDeath=="boolean"&&c.allowTaskAfterDeath===!1&&/died/i.test("".concat((at=i==null?void 0:i.program)==null?void 0:at.outcome))&&new Date(xt.getSessionDate())>=new Date((nt=i==null?void 0:i.program)==null?void 0:nt.startDate)&&(H.disabled=!0),typeof c.disabled=="function"&&(H.disabled=await c.disabled(M.tasks)),T.value.push(H),T.value.sort((st,Ct)=>{var ot,lt;return((ot=st.orderNumber)!=null?ot:9999)-((lt=Ct.orderNumber)!=null?lt:9999)}),c})});const E=v=>{if(!v.disabled){if(v.task.action)S(),v.task.action();else if(v.task.component&&v.task.isFormComponent){Vt(Na,{},!1,{title:v.task.name,useComponent:v.task.component,onClose:S});return}}};function S(){ga.dismiss()}return(v,i)=>(r(),k(t(ye),null,{default:n(()=>[a(t(da),{class:"ion-no-border"},{default:n(()=>[a(t(ca),{class:"custom-header"},{default:n(()=>[l("div",Wa,[l("div",ja,[a(t(D),{icon:t(ma),class:"header-icon"},null,8,["icon"]),a(t(pa),{class:"custom-title"},{default:n(()=>[...i[0]||(i[0]=[d("Program Activities",-1)])]),_:1})]),a(t(fa),{onClick:S,fill:"clear",shape:"round"},{default:n(()=>[a(t(D),{icon:t(_e)},null,8,["icon"])]),_:1})])]),_:1})]),_:1}),a(t(Tt),{class:"custom-content"},{default:n(()=>[l("div",qa,[T.value&&T.value.length>0?(r(),k(t(va),{key:0,class:"tasks-grid"},{default:n(()=>[a(t(L),{class:"ion-justify-content-center"},{default:n(()=>[(r(!0),b(Z,null,gt(T.value,(c,H)=>(r(),k(t(m),{size:"12","size-sm":"6","size-md":"4","size-lg":"3",key:H,class:"task-col"},{default:n(()=>[l("div",{class:ge(["task-card",{"task-completed":c.taskCompleted,"task-disabled":c.disabled}]),onClick:U=>!c.disabled&&E(c)},[l("div",Za,[a(t(D),{color:c.taskCompleted?"success":"primary",icon:c.taskCompleted?t(ae):c.icon,class:"task-icon"},null,8,["color","icon"])]),l("div",Qa,[a(t(N),{class:"task-label"},{default:n(()=>[d(_(c.label),1)]),_:2},1024),c.taskCompleted?(r(),b("div",Ja,[a(t(D),{icon:t(ae),color:"success"},null,8,["icon"]),i[1]||(i[1]=l("span",null,"Completed",-1))])):f("",!0)])],10,Ka)]),_:2},1024))),128))]),_:1})]),_:1})):(r(),b("div",Xa,[l("div",tn,[a(t(D),{icon:t(_a)},null,8,["icon"])]),i[2]||(i[2]=l("h3",null,"No Activities Yet",-1)),i[3]||(i[3]=l("p",null,"Your program activities will appear here once they're available.",-1))]))])]),_:1})]),_:1}))}}),an=St(en,[["__scopeId","data-v-244ec438"]]);async function nn($,T="tasks"){var S,v;const E=(S={1:ha}[$])!=null?S:{};Vt(an,{},!0,{tasks:(v=E==null?void 0:E[T])!=null?v:[]})}const sn={key:5,class:"content_manager"},on={style:{display:"flex","justify-content":"space-between"}},ln={class:"p_name_image"},rn={style:{width:"100%"}},un={class:"p_name"},dn={style:{display:"flex","justify-content":"space-between"}},cn={class:"start-visit"},mn={class:"button-group"},pn={key:0,class:"send-button-container action-buttons"},fn={class:"send-button-container"},vn={class:"send-button-container"},_n={class:"send-button-container"},gn={style:{"padding-left":"10px","padding-right":"10px","margin-top":"5px"}},yn={class:"vitalsUnits"},Cn={style:{width:"100%",overflow:"scroll",height:"64px"}},bn={key:0,style:{"margin-top":"1px"}},An={key:0,class:"patient-chart"},In={class:"patient-chart"},Pn={key:1,class:"patient-chart"},kn={key:1},Dn={key:2},wn={key:3},On={key:4},En={key:5},Rn={key:6},Nn={class:"rght-drpm"},hn="NEONATAL PROGRAM",me=10,Tn=Mt({__name:"PatientProfile",setup($,{expose:T}){var Qt,Jt;const M=w(()=>O(()=>import("./LabOrdersList-Ck1vB-6t.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14]),import.meta.url)),E=w(()=>O(()=>import("./DiagnosesHistory-BTIiwXbe.js"),__vite__mapDeps([15,1,2,3,4,5,6,16]),import.meta.url)),S=w(()=>O(()=>import("./AllergiesHistory-BFUMPUj2.js"),__vite__mapDeps([17,1,2,3,4,5,6,18]),import.meta.url)),v=w(()=>O(()=>import("./MedicationsHistory-Cx_HIJrV.js"),__vite__mapDeps([19,1,2,3,4,5,6,20]),import.meta.url)),i=w(()=>O(()=>import("./VisitsHistory-BhqCeLgD.js"),__vite__mapDeps([21,1,2,3,4,5,6,22]),import.meta.url)),c=w(()=>O(()=>import("./VitalsMeasurementsSummary-C6ODUjiX.js"),__vite__mapDeps([23,1,2,3,4,5,6,24]),import.meta.url)),H=w(()=>O(()=>import("./PatientProfile-CFfIaxRf.js"),__vite__mapDeps([25,1,2,3,4,5,6,26,27,28,29,30,31,0,7,8,9,10,11,12,13,14,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95]),import.meta.url)),U=w(()=>O(()=>import("./HTSPatientProfile-DdJylF2z.js"),__vite__mapDeps([96,1,2,3,4,5,6,79,80,81,82,83,93,86,87,67,88,40,89,90,91,48,49,50,94,72,73,74,75,9,10,11,12,76,77,52,34,78,97]),import.meta.url)),Y=w(()=>O(()=>import("./NeonatalPatientProfile-uw7_-F8M.js"),__vite__mapDeps([98,1,2,3,93,4,5,6,86,87,67,79,80,81,82,83,88,40,89,90,91,48,49,50,94,72,73,74,99,100,101]),import.meta.url)),at=w(()=>O(()=>import("./AETCPatientProfile-Cf07bRzc.js"),__vite__mapDeps([102,1,2,3,4,5,6,93,86,87,67,79,80,81,82,83,88,40,89,90,91,48,49,50,94,34,26,27,103,104,105,13,106,107]),import.meta.url)),nt=w(()=>O(()=>import("./WeightHeightChart-ClYea-Zz.js"),__vite__mapDeps([72,4,1,2,3,5,6,73,74]),import.meta.url)),st=w(()=>O(()=>import("../index-CSiBRz_H.js").then(s=>s.cM),__vite__mapDeps([4,1,2,3,5,6]),import.meta.url)),Ct=w(()=>O(()=>import("./BloodPressure-DMrT2ea6.js"),__vite__mapDeps([108,1,2,3,5,4,6,109]),import.meta.url)),ot=w(()=>O(()=>import("./AncEnrollmentModal-D9nFpybM.js"),__vite__mapDeps([110,1,2,3,4,5,6,111]),import.meta.url)),lt=w(()=>O(()=>import("./LabourEnrollmentModal-BX-1rJab.js"),__vite__mapDeps([112,1,2,3,4,5,6,87,67,79,80,81,82,83,88,86,40,89,90,91,9,10,11,12,13,93,48,49,50,94,26,27,106,113]),import.meta.url)),Ce=w(()=>O(()=>import("./PNCEnrollmentModal-DN8dxSjh.js"),__vite__mapDeps([114,1,2,3,4,5,6,87,67,79,80,81,82,83,88,86,40,89,90,91,9,10,11,12,13,93,48,49,50,94,26,27,106,115]),import.meta.url)),W=ya(),be=Ca(),it=Ta(),Ae=xa(),Ie=Ya(),{hasWaitingList:Lt}=Ha(),{event:Pe,popoverOpen:$t,openPopover:Ht,openPIM:Bt,openOutCome:ke,openUpdateNCDNUmbers:De,printVisitSummary:we,printID:Oe,formatCurrentAddress:Ee}=Ba(),{screenWidth:bt}=Ma(),{patient:u}=Ot(it),{activeProgram:I,authorizedPrograms:Gt}=Ot(Ae),{ConfirmPregnancy:Mn}=Ot(Ie),rt=p(!1),Re=p(!0),Ne=p(!1),At=p(!1),he=p(!1),B=p("Patient Charts"),Ut=p(null),h=p({}),j=p(!1),It=p(!1),zt=p(!1),Ft=p(!1),V=p([]),Q=p(0),ut=p(),dt=p(""),Yt=p(!1),Te=p(G.getAgeInYears((Jt=(Qt=u.value)==null?void 0:Qt.personInformation)==null?void 0:Jt.birthdate)),xe=X(()=>{var e,A;const s=(A=(e=u.value)==null?void 0:e.personInformation)==null?void 0:A.gender;return s==="Female"||s==="F"}),Me=s=>s==null?void 0:s.trim().toUpperCase(),Se=s=>s===R.NEONATAL_PROGRAM||s===R.HTC_PROGRAM,Ve=s=>Me(s)===hn,Le=s=>{var A;if(!s)return!1;const e=(A=s.id)!=null?A:s.program_id;return Se(e)||Ve(s.name)},$e=X(()=>{var e,A;const s=(A=(e=u.value)==null?void 0:e.personInformation)==null?void 0:A.gender;return s==="Male"||s==="M"?Gt.value.filter(g=>g.name!=="ANC PROGRAM"&&g.name!=="LABOUR AND DELIVERY PROGRAM"&&g.name!=="PNC PROGRAM"):Gt.value.map(g=>{if(g.name==="ANC PROGRAM"||g.name==="LABOUR AND DELIVERY PROGRAM"||g.name==="PNC PROGRAM"){if(!(V!=null&&V.value))return;const o=V==null?void 0:V.value.some(y=>y.id===g.program_id);return{...g,actionName:o?"Start ".concat(g.name):"Enroll in ".concat(g.name)}}return g})}),He=X(()=>!j.value&&I.value.program_id==14),Be=X(()=>j.value&&I.value.program_id==14),Wt=X(()=>Le(I.value)),Ge=()=>{var s,e;if((e=(s=u.value)==null?void 0:s.personInformation)!=null&&e.birthdate){const A=G.getAgeInYears(u.value.personInformation.birthdate);Yt.value=A<9}},Ue=()=>{var s,e;(e=(s=u.value)==null?void 0:s.personInformation)!=null&&e.birthdate&&(Re.value=G.getAgeInYears(u.value.personInformation.birthdate)>=14,Ne.value=G.ageInMonths(u.value.personInformation.birthdate)<9,At.value=G.getAgeInYears(u.value.personInformation.birthdate)<5,he.value=G.dateDiffInDays(G.sessionDate(),u.value.personInformation.birthdate)<42)},z=s=>{B.value=s},ze=()=>[{backgroundColor:"#B9E6FE",status:"",icon:Et(["#B9E6FE","#026AA2","#9ADBFE"]),textColor:"#026AA2",value:"No further action is required.",name:"",index:"Blood sugar is normal"},{backgroundColor:"#FEDF89",status:"",icon:Et(["#FEDF89","#B54708","#FED667"]),textColor:"#B54708",value:"Please call or follow up!",name:"",index:"Patient Defaulted"},{backgroundColor:"#FECDCA",status:"",icon:Et(["#FECDCA","#B42318","#FDA19B"]),textColor:"#B42318",value:"Administer medications!",name:"",index:"Patient is hypertensive"}],Fe=async()=>{if(I.value.program_id==14)try{const s=await de(it.patient.ID);if(!s)return;j.value=!!s.length}catch(s){console.error(s)}},Pt=p(!1),Ye=async()=>{try{await le("Are you sure you want to create the visit?")&&(Pt.value=!0,await Va(it.patient)&&(j.value=!0,await ie().refresh(ft.getUserLocationId()),vt("The patient visit is now active. Patient is on the waiting list for vitals")))}catch(s){console.error("error activating visit: ",s)}finally{Pt.value=!1}},kt=p(!1),We=async()=>{try{await le("Are you sure you want to close the visit?")&&(kt.value=!0,await La(u.value)&&(j.value=!1,await ie().refresh(ft.getUserLocationId()),vt("The patient visit is now closed")))}catch(s){console.error("error: ",s)}finally{kt.value=!1}},je=async()=>{if(I.value.program_id==14)try{const s=await de(it.patient.ID);j.value=s.length>0}catch(s){console.error(s)}},qe=s=>{Ut.value=s,rt.value=!rt.value},jt=(s="tasks")=>nn(I.value.program_id,s),Dt=p(!1),qt=async s=>{var e,A,g,o,y;Dt.value=!0;try{if(await ct(),s.program_id==R.ANC_PROGRAM||s.program_id==R.PNC_PROGRAM||s.program_id==R.LABOUR_AND_DELIVERY_PROGRAM){if(!xe.value){et("Only female patients can be enrolled in this program.");return}if(Te.value<me){et("Patient must be at least ".concat(me," years old to enroll in this program."));return}if(!((e=V==null?void 0:V.value)==null?void 0:e.find(q=>q.id==s.program_id))){if(s.program_id==R.ANC_PROGRAM){const q=await Rt.getObsByEncounterId(re.ANC_VISIT),mt=await Rt.getObsByEncounterIdAndDate(re.QUICK_CHECK);q.length<=0?await Vt(ot,{class:"small-confirm-modal "}):mt.length<=0?W.push("quickCheck"):W.push("contact"),Q.value=s.program_id;return}else if(s.program_id==R.LABOUR_AND_DELIVERY_PROGRAM){zt.value=!0,dt.value="Are you sure you want to enroll ".concat((g=(A=u.value)==null?void 0:A.personInformation)==null?void 0:g.given_name.toUpperCase()," in this program?"),Q.value=s.program_id;return}else if(s.program_id==R.PNC_PROGRAM){Ft.value=!0,dt.value="Are you sure you want to enroll ".concat((y=(o=u.value)==null?void 0:o.personInformation)==null?void 0:y.given_name.toUpperCase()," in this program?"),Q.value=s.program_id;return}}}const P=await ue.userProgramData(u.value.patientID,s);if(s.program_id===14)if(P!=null&&P.canProceed&&P.url&&P.stage){const C=Ke(P.stage);if(!C){et("Unable to determine patient stage");return}if(Lt(C))return W.push(P.url);et("You don't have access to the ".concat(C.toLowerCase()));return}else{et("The visit is not activated");return}if(P!=null&&P.url)return W.push(P.url)}catch(P){console.error("error: ",P)}finally{Dt.value=!1}},Ke=s=>{switch(s){case"VITALS":return"Waiting for Vitals";case"CONSULTATION":return"Waiting for Consultation";case"LAB":return"Waiting for Laboratory";case"DISPENSATION":return"Waiting for Dispensation";default:return null}},Kt=()=>{It.value=!1},Ze=()=>{It.value=!It.value},Qe=async()=>(await yt.enrollProgram(u.value.patientID,Q.value,new Date().toString()),await ct(),vt("Enrollment is successful"),W.push("LabourHome")),Je=async()=>(await yt.enrollProgram(u.value.patientID,Q.value,new Date().toString()),await ct(),vt("Enrollment is successful"),W.push("PNCHome")),ct=async()=>{const s=u.activePrograms;V.value=s==null?void 0:s.map(e=>({name:e.program.name,id:e.program_id}))},Zt=()=>{Ze()},wt=async()=>{Ue(),await Xe(),await Fe(),await je(),await ue.userProgramData(u.value.patientID),await ct(),Ge()},Xe=async()=>{h.value={},ut.value="";const s=await K.getConceptID("Height (cm)"),e=await K.getConceptID("Weight (kg)"),A=await K.getConceptID("Systolic blood pressure"),g=await K.getConceptID("Diastolic blood pressure"),o=await K.getConceptID("Temperature (c)"),y=await K.getConceptID("Pulse");(await Rt.getLatestObsByEncounterIdAndConcepts(6,[s,e,A,g,o,y])).forEach(C=>{C.concept_id===s?h.value.height=C.value_numeric:C.concept_id===e?h.value.weight=C.value_numeric:C.concept_id===A?h.value.systolic=C.value_numeric:C.concept_id===g?h.value.diastolic=C.value_numeric:C.concept_id===o?h.value.temperature=C.value_numeric:C.concept_id===y&&(h.value.pulse=C.value_numeric)}),ut.value=new xt().getBloodGlucose(u.value)},ta=s=>s=="Undetermined"?"Undetermined":["Male","M"].includes(s)?"Male":["Female","F"].includes(s)?"Female":"",ea=()=>{var s,e;return G.getBirthdateAge((e=(s=u.value)==null?void 0:s.personInformation)==null?void 0:e.birthdate)};return ve(async()=>{await wt()}),Nt(()=>u,async()=>{await wt()},{deep:!0}),Nt(be,async s=>{await wt()},{deep:!0}),T({showUnderageWarning:Yt}),(s,e)=>{const A=ne("ion-list"),g=ne("ion-popover");return r(),k(t(ye),null,{default:n(()=>[a(Sa),a(t(Tt),{fullscreen:!0},{default:n(()=>[t(I).program_id!==33&&t(I).program_id!==38&&t(I).program_id!=""&&t(bt)<1120?(r(),k(Ga,{key:0,onOpenPopover:e[0]||(e[0]=o=>t(Ht)(o))})):f("",!0),a(t(lt),{closeModalFunc:Kt,onYes:Qe,onNo:Zt,isOpen:zt.value,title:dt.value},null,8,["isOpen","title"]),a(t(Ce),{closeModalFunc:Kt,onYes:Je,onNo:Zt,isOpen:Ft.value,title:dt.value},null,8,["isOpen","title"]),t(I).program_id==t(R).IMMUNIZATION_PROGRAM?(r(),k(t(H),{key:1,updateData:t(u)},null,8,["updateData"])):f("",!0),t(I).program_id==t(R).HTS_PROGRAM?(r(),k(t(U),{key:2,updateData:t(u)},null,8,["updateData"])):f("",!0),t(I).program_id==t(R).AETC_PROGRAM?(r(),k(t(at),{key:3,updateData:t(u)},null,8,["updateData"])):f("",!0),Wt.value?(r(),k(t(Y),{key:4})):f("",!0),t(I).program_id!==t(R).AETC_PROGRAM&&t(I).program_id!==t(R).IMMUNIZATION_PROGRAM&&t(I).program_id!==t(R).HTS_PROGRAM&&!Wt.value&&t(I).program_id!=""?(r(),b("div",sn,[a(t(L),{class:"content_width"},{default:n(()=>[a(t(m),{size:"2.5","size-lg":"2.6","size-md":"3",class:"displayNoneLeftPanel"},{default:n(()=>[a(t(_t),{style:{"margin-bottom":"20px","background-color":"#fff"}},{default:n(()=>[a(t(ht),null,{default:n(()=>{var o,y,P,C,q,mt,Xt,te;return[l("div",on,[e[23]||(e[23]=l("div",null,null,-1)),l("div",{class:"name",style:{color:"var(--ion-color-primary)","margin-top":"10px"},onClick:e[1]||(e[1]=J=>t(Ht)(J))},[a(t(D),{icon:t(ba),style:{"font-size":"2.2rem"}},null,8,["icon"])])]),l("div",ln,[l("div",{class:ge(((y=(o=t(u))==null?void 0:o.personInformation)==null?void 0:y.gender)=="M"?"initialsBox maleColor":"initialsBox femaleColor"),onClick:e[2]||(e[2]=J=>t(Bt)())},[a(t(D),{style:{color:"#fff","font-size":"70px"},icon:t(Aa)},null,8,["icon"])],2),l("div",rn,[l("div",un,_((C=(P=t(u))==null?void 0:P.personInformation)==null?void 0:C.given_name)+" "+_((mt=(q=t(u))==null?void 0:q.personInformation)==null?void 0:mt.middle_name)+" "+_((te=(Xt=t(u))==null?void 0:Xt.personInformation)==null?void 0:te.family_name),1)])]),a(t(L),null,{default:n(()=>[a(t(m),{size:"4"},{default:n(()=>[...e[24]||(e[24]=[d("MRN:",-1)])]),_:1}),a(t(m),{class:"demoContent"},{default:n(()=>[d(_(t(u).ID),1)]),_:1})]),_:1}),t(I).program_id===32?(r(),k(t(L),{key:0},{default:n(()=>[a(t(m),{size:"4"},{default:n(()=>[...e[25]||(e[25]=[d("NCDNumber:",-1)])]),_:1}),a(t(m),{class:"demoContent"},{default:n(()=>[d(_(t(u).NcdID),1)]),_:1})]),_:1})):f("",!0),a(t(L),null,{default:n(()=>[a(t(m),{size:"4"},{default:n(()=>[...e[26]||(e[26]=[d("Gender:",-1)])]),_:1}),a(t(m),{class:"demoContent"},{default:n(()=>{var J,ee;return[d(_(ta((ee=(J=t(u))==null?void 0:J.personInformation)==null?void 0:ee.gender)),1)]}),_:1})]),_:1}),a(t(L),null,{default:n(()=>[a(t(m),{size:"4"},{default:n(()=>[...e[27]||(e[27]=[d("Age:",-1)])]),_:1}),a(t(m),{class:"demoContent"},{default:n(()=>[d(_(ea()),1)]),_:1})]),_:1}),a(t(L),null,{default:n(()=>[a(t(m),{size:"4"},{default:n(()=>[...e[28]||(e[28]=[d("Address:",-1)])]),_:1}),a(t(m),{class:"demoContent"},{default:n(()=>[d(_(t(Ee)(t(u))),1)]),_:1})]),_:1})]}),_:1})]),_:1}),t(ft).getProgramID()===1?(r(),k(Fa,{key:0,patient:t(u)},null,8,["patient"])):f("",!0),a(t(_t),{style:{"margin-bottom":"20px","background-color":"#fff"}},{default:n(()=>[a(t(Ia),{value:["first"]},{default:n(()=>[a(t(Pa),{value:"first",style:{"background-color":"#fff"},"toggle-icon-slot":"start"},{default:n(()=>[a(t(x),{slot:"header",color:"white"},{default:n(()=>[a(t(N),{class:"side_title"},{default:n(()=>[...e[29]||(e[29]=[d("Alerts & Reminders ",-1)])]),_:1})]),_:1}),a(t(ht),{slot:"content"},{default:n(()=>[(r(!0),b(Z,null,gt(ze(),(o,y)=>(r(),b("span",{key:y},[o.value?(r(),k(t(L),{key:0,style:se("border-radius: 5px;  margin-top:10px; margin-bottom:10px;background-color:"+o.backgroundColor)},null,8,["style"])):f("",!0)]))),128))]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),a(t(m),{offset:"0.07","size-sm":"12","size-md":"12","size-lg":t(bt)>1120?"9.33":"12"},{default:n(()=>[a(t(_t),{style:{"background-color":"#fff","margin-inline":"0px",padding:"5px","margin-bottom":"5px",contain:"unset",overflow:"unset"}},{default:n(()=>[l("div",null,[l("div",dn,[e[30]||(e[30]=l("div",{class:"vitalsTitle"},"Most recent Vitals & Biometrics",-1)),l("div",cn,[l("div",mn,[t(Lt)("Waiting for Laboratory")?f("",!0):(r(),b("div",pn,[He.value?(r(),k(tt,{key:0,name:"Activate visit",onClick:e[3]||(e[3]=o=>Ye()),loading:Pt.value,icon:t(fe),fill:"solid",color:"success"},null,8,["loading","icon"])):f("",!0),Be.value?(r(),k(tt,{key:1,name:"Deactivate Visit",onClick:e[4]||(e[4]=o=>We()),loading:kt.value,fill:"solid",icon:t(_e),color:"danger"},null,8,["loading","icon"])):f("",!0)])),l("div",fn,[a(tt,{name:"Tasks","onClicked:btn":e[5]||(e[5]=o=>jt()),class:"send-text",fill:"clear",color:"secondary"})]),l("div",vn,[a(tt,{name:"Printout/Other","onClicked:btn":e[6]||(e[6]=o=>jt("other")),class:"send-text",fill:"solid",color:"secondary"})]),l("div",_n,[a(tt,{name:"Start visit","onClicked:btn":e[7]||(e[7]=o=>qt(t(I))),loading:Dt.value,textFontSize:"12px",class:"send-text"},null,8,["loading"]),l("button",{class:"send-arrow",onClick:e[8]||(e[8]=o=>qe(o))})])])])])]),l("div",gn,[a(t(L),null,{default:n(()=>[a(t(m),{class:"vitalsHeading"},{default:n(()=>[...e[31]||(e[31]=[d("Weight",-1)])]),_:1}),a(t(m),{class:"vitalsHeading"},{default:n(()=>[...e[32]||(e[32]=[d("Height",-1)])]),_:1}),a(t(m),{class:"vitalsHeading"},{default:n(()=>[...e[33]||(e[33]=[d("Temperature",-1)])]),_:1}),a(t(m),{class:"vitalsHeading"},{default:n(()=>[...e[34]||(e[34]=[d("Blood glucose",-1)])]),_:1}),a(t(m),{class:"vitalsHeading"},{default:n(()=>[...e[35]||(e[35]=[d("Pulse Rate",-1)])]),_:1}),a(t(m),{class:"vitalsHeading"},{default:n(()=>[...e[36]||(e[36]=[d("Blood pressure",-1)])]),_:1})]),_:1}),a(t(L),null,{default:n(()=>[a(t(m),{class:"vitalsValue"},{default:n(()=>{var o;return[d(_((o=h.value)==null?void 0:o.weight)+" ",1),e[37]||(e[37]=l("span",{class:"vitalsUnits"},"kg",-1))]}),_:1}),a(t(m),{class:"vitalsValue"},{default:n(()=>{var o;return[d(_((o=h.value)==null?void 0:o.height)+" ",1),e[38]||(e[38]=l("span",{class:"vitalsUnits"},"cm",-1))]}),_:1}),a(t(m),{class:"vitalsValue"},{default:n(()=>{var o;return[d(_((o=h.value)==null?void 0:o.temperature)+" ",1),e[39]||(e[39]=l("span",{class:"vitalsUnits"},"Â°C",-1))]}),_:1}),a(t(m),{class:"vitalsValue"},{default:n(()=>{var o,y;return[d(_((o=ut.value)==null?void 0:o.value)+" ",1),l("span",yn,_((y=ut.value)==null?void 0:y.unit),1)]}),_:1}),a(t(m),{class:"vitalsValue"},{default:n(()=>{var o;return[d(_((o=h.value)==null?void 0:o.pulse)+" ",1),e[40]||(e[40]=l("span",{class:"vitalsUnits"},"bpm ",-1))]}),_:1}),a(t(m),{class:"vitalsValue"},{default:n(()=>{var o,y;return[d(_((o=h.value)==null?void 0:o.systolic)+"/"+_((y=h.value)==null?void 0:y.diastolic),1),e[41]||(e[41]=l("span",{class:"vitalsUnits"},"mmhg",-1))]}),_:1})]),_:1})])]),_:1}),l("div",Cn,[a(t(ka),{value:B.value,style:{"margin-top":"5px","min-width":"540px"}},{default:n(()=>[a(t(F),{value:"Patient Charts",onClick:e[9]||(e[9]=o=>z("Patient Charts"))},{default:n(()=>[a(t(N),null,{default:n(()=>[...e[42]||(e[42]=[d("Patient Charts",-1)])]),_:1})]),_:1}),a(t(F),{value:"Visits History",onClick:e[10]||(e[10]=o=>z("Visits History"))},{default:n(()=>[a(t(N),null,{default:n(()=>[...e[43]||(e[43]=[d("Visits History",-1)])]),_:1})]),_:1}),a(t(F),{value:"Vitals History",onClick:e[11]||(e[11]=o=>z("Vitals History"))},{default:n(()=>[a(t(N),null,{default:n(()=>[...e[44]||(e[44]=[d("Vitals History",-1)])]),_:1})]),_:1}),a(t(F),{value:"Lab Tests History",onClick:e[12]||(e[12]=o=>z("Lab Tests History"))},{default:n(()=>[a(t(N),null,{default:n(()=>[...e[45]||(e[45]=[d("Lab Tests History",-1)])]),_:1})]),_:1}),a(t(F),{value:"Diagnosis History",onClick:e[13]||(e[13]=o=>z("Diagnosis History"))},{default:n(()=>[a(t(N),null,{default:n(()=>[...e[46]||(e[46]=[d("Diagnosis History",-1)])]),_:1})]),_:1}),a(t(F),{value:"Allergies History",onClick:e[14]||(e[14]=o=>z("Allergies History"))},{default:n(()=>[a(t(N),null,{default:n(()=>[...e[47]||(e[47]=[d("Allergies History",-1)])]),_:1})]),_:1}),a(t(F),{value:"Medication History",onClick:e[15]||(e[15]=o=>z("Medication History"))},{default:n(()=>[a(t(N),null,{default:n(()=>[...e[48]||(e[48]=[d("Medication History",-1)])]),_:1})]),_:1})]),_:1},8,["value"])]),B.value=="Patient Charts"?(r(),b("div",bn,[l("div",{style:se(t(bt)>826?"display: flex;":"display: block;")},[At.value?(r(),b("div",An,[a(t(nt))])):f("",!0),l("div",In,[a(t(Ct))]),At.value?f("",!0):(r(),b("div",Pn,[a(t(st))]))],4)])):f("",!0),B.value=="Visits History"?(r(),b("div",kn,[a(t(i))])):f("",!0),B.value=="Vitals History"?(r(),b("div",Dn,[a(t(c))])):f("",!0),B.value=="Lab Tests History"?(r(),b("div",wn,[a(t(M),{showAddTestButton:!1,showSendToLabButton:!1})])):f("",!0),B.value=="Diagnosis History"?(r(),b("div",On,[a(t(E))])):f("",!0),B.value=="Allergies History"?(r(),b("div",En,[a(t(S))])):f("",!0),B.value=="Medication History"?(r(),b("div",Rn,[a(t(v))])):f("",!0)]),_:1},8,["size-lg"])]),_:1})])):f("",!0)]),_:1}),a(g,{style:{"--offset-x":"-10px"},"is-open":t($t),"show-backdrop":!1,"dismiss-on-select":!0,event:t(Pe),onDidDismiss:e[21]||(e[21]=o=>$t.value=!1)},{default:n(()=>[l("div",null,[a(A,{style:{"--ion-background-color":"#fff","--offset-x":"-30px"}},{default:n(()=>[a(t(x),{button:!0,detail:!1,onClick:e[16]||(e[16]=o=>t(Bt)()),style:{cursor:"pointer"},class:"list-content"},{default:n(()=>[a(t(D),{icon:t(Da),slot:"start",class:"sub-menu-icon"},null,8,["icon"]),e[49]||(e[49]=l("span",{class:"sub-menu-txt"},"Update demographics",-1))]),_:1}),a(t(x),{button:!0,detail:!1,onClick:e[17]||(e[17]=o=>t(ke)()),style:{cursor:"pointer"},class:"list-content"},{default:n(()=>[a(t(D),{icon:t(wa),slot:"start",class:"sub-menu-icon"},null,8,["icon"]),e[50]||(e[50]=l("span",{class:"sub-menu-txt"},"Update outcome",-1))]),_:1}),t(ft).getProgramID()==32?(r(),k(t(x),{key:0,button:!0,detail:!1,onClick:e[18]||(e[18]=o=>t(De)()),style:{cursor:"pointer"},class:"list-content"},{default:n(()=>[a(t(D),{icon:t(pe),slot:"start",class:"sub-menu-icon"},null,8,["icon"]),e[51]||(e[51]=l("span",{class:"sub-menu-txt"},"Update NCD Number",-1))]),_:1})):f("",!0),a(t(x),{button:!0,detail:!1,onClick:e[19]||(e[19]=o=>t(we)()),style:{cursor:"pointer"},class:"list-content"},{default:n(()=>[a(t(D),{icon:t(oe),slot:"start",class:"sub-menu-icon"},null,8,["icon"]),e[52]||(e[52]=l("span",{class:"sub-menu-txt"},"Print visit summary",-1))]),_:1}),a(t(x),{button:!0,detail:!1,onClick:e[20]||(e[20]=o=>t(Oe)()),style:{cursor:"pointer"},class:"list-content"},{default:n(()=>[a(t(D),{icon:t(oe),slot:"start",class:"sub-menu-icon"},null,8,["icon"]),e[53]||(e[53]=l("span",{class:"sub-menu-txt"},"Print client identifier",-1))]),_:1})]),_:1})])]),_:1},8,["is-open","event"]),a(g,{"is-open":rt.value,"show-backdrop":!1,"dismiss-on-select":!0,event:Ut.value,onDidDismiss:e[22]||(e[22]=o=>rt.value=!1),style:{"--width":"350px"}},{default:n(()=>[a(t(Tt),null,{default:n(()=>[a(A,null,{default:n(()=>[(r(!0),b(Z,null,gt($e.value,(o,y)=>(r(),k(t(x),{button:!0,detail:!1,style:{cursor:"pointer"},key:y,onClick:P=>qt(o)},{default:n(()=>[a(t(D),{slot:"start",icon:t(Oa)},null,8,["icon"]),l("span",Nn,_(o==null?void 0:o.actionName),1)]),_:2},1032,["onClick"]))),128))]),_:1})]),_:1})]),_:1},8,["is-open","event"])]),_:1})}}}),xn=St(Tn,[["__scopeId","data-v-aa7d775b"]]),Un=Object.freeze(Object.defineProperty({__proto__:null,default:xn},Symbol.toStringTag,{value:"Module"}));export{Fa as A,Un as P,Ya as u};
