import{D as r,d as D,ai as n,bo as _,X as I,$ as b,am as S,al as w,aR as B,cB as N,aS as y,aV as k,bw as $,N as T,G as F,E as P,a7 as U,cs as z,I as W,a4 as H,aU as O,bT as R,H as t,O as A,f as E,J as u,l as i}from"./vendor-BataJFSH.js";import{aT as G,W as J,T as L,S as M,t as p,K as V,bJ as K,u as X,n as j,_ as q}from"../index-BPAV0PIM.js";import{D as x}from"./DemographicBar-moo3cMAH.js";import{S as Q,n as Y}from"./Stepper-Luo_6e0P.js";import{c as s,f as a,a as l}from"./formatServerData-CbmK6vhK.js";import{B as Z}from"./BasicFooter-DAEy5GYM.js";import{b as ee}from"./NextAppointment-BwqU7a7w.js";import{_ as oe}from"./SetEncounter.vue_vue_type_script_lang-50396cFQ.js";import"./lodash-NJiRuGo9.js";import"./apexcharts-BVd6_RNM.js";import"./OPDOutcome-DxZEvhf0.js";import"./LevelOfConsciousness.vue_vue_type_script_setup_true_lang-BCk1GpwV.js";import"./previousComplaints-B2GGAXCM.js";import"./patient_complaints_service-DotCA86K.js";import"./DashBox-Ch5rWcpa.js";import"./drug_prescription_service-BAhzFmOz.js";import"./nonPharmaTherapyStore-3IJdi0FN.js";import"./patient_diagnosis_service-DYgFUTEi.js";import"./Outcome-YCiaWoXd.js";import"./wardsStore-DR-px5YM.js";import"./BasicForm-Bj4R40wg.js";import"./DateInputField-CJNWe7Qf.js";import"./VitalsMixin.vue_vue_type_script_lang-D_Gpr69M.js";import"./TreatmentPlan-B_oEgLVO.js";import"./group_validation-DUdeStNT.js";import"./ComplicationsStore-BbalwQUK.js";import"./OPDDiagnosis-CIqPzWwn.js";import"./MedicalHistory-CpWOsws9.js";import"./FeatusModal-1yQycxwZ.js";import"./AbdominalExamination-DSIKyumq.js";import"./dewormingStore-CoWFPfVR.js";import"./SaveProgressModal-BodNTIHT.js";import"./BasicCard-DUVI7ECQ.js";import"./UpcomingFeature-CIAHsyQ0.js";import"./PastObstreticHistoryStore-hBqHSOTu.js";import"./LabOrdersList-3pkr6m2W.js";import"./EnterLabResultsModal-Czb9qXVA.js";import"./useUserActivities-CcslbutR.js";import"./RadiologyStore-BEC0RqeJ.js";import"./useFormWizard-WA0BdVFf.js";import"./user_role_management-BvjpEsZZ.js";import"./ncd_appointment_service-DJJoXXkS.js";const ne=r("behaviourCousellingStore",{state:()=>({behaviourCounsellingDone:[],reasonNotConducted:[],reason_other_note:""}),actions:{setBehaviourInfo(e){this.$patch(e)},getInitial(){return{...this.$state}},reset(){this.$patch({behaviourCounsellingDone:[],reasonNotConducted:[],reason_other_note:""})}}}),te=r("physiologicalCounselingStore",{state:()=>({physiologicalCounsellingDone:[],reasonNotConducted:[],reason_other_note:""}),actions:{setPhysiologicalInfo(e){this.physiologicalCounsellingDone=e.physiologicalCounsellingDone||[],this.reasonNotConducted=e.reasonNotConducted||[],this.reason_other_note=e.reason_other_note||""},getInitial(){return{physiologicalCounsellingDone:[...this.physiologicalCounsellingDone],reasonNotConducted:[...this.reasonNotConducted],reason_other_note:this.reason_other_note}},reset(){this.physiologicalCounsellingDone=[],this.reasonNotConducted=[],this.reason_other_note=""}}}),ie=r("dietCounsellingStore",{state:()=>({dietCounsellingDone:[],reasonNotConducted:[]}),actions:{setDietInfo(e){this.dietCounsellingDone=e.dietCounsellingDone||[],this.reasonNotConducted=e.reasonNotConducted||[]},getInitial(){return{dietCounsellingDone:[...this.dietCounsellingDone],reasonNotConducted:[...this.reasonNotConducted]}},reset(){this.dietCounsellingDone=[],this.reasonNotConducted=[]}}}),se=r("clinicalCounsellingStore",{state:()=>({clinicalCounsellingDone:[],reasonNotConducted:[]}),actions:{setClinicalInfo(e){this.clinicalCounsellingDone=e.clinicalCounsellingDone||[],this.reasonNotConducted=e.reasonNotConducted||[]},getInitial(){return{clinicalCounsellingDone:[...this.clinicalCounsellingDone],reasonNotConducted:[...this.reasonNotConducted]}},reset(){this.clinicalCounsellingDone=[],this.reasonNotConducted=[]}}});class ae extends G{constructor(o,c){super(o,149,c)}}const le=D({name:"Home",mixins:[ee,oe],components:{BasicFooter:Z,IonContent:H,IonHeader:W,IonMenuButton:z,IonPage:U,IonTitle:P,IonToolbar:F,Toolbar:L,ToolbarSearch:J,DemographicBar:x,IonButton:T,IonCard:$,IonCardContent:k,IonCardHeader:y,IonCardSubtitle:N,IonCardTitle:B,IonAccordion:w,IonAccordionGroup:S,IonItem:b,IonLabel:I,IonModal:_,Stepper:Q},data(){return{wizardData:[{title:"Behavior counselling",class:"common_step",checked:"",icon:!1,disabled:!1,number:1,last_step:""},{title:"Physiological counselling",class:"common_step",checked:"",icon:!1,disabled:!1,number:2,last_step:""},{title:"Diet counselling",class:"common_step",checked:"",icon:!1,disabled:!1,number:3,last_step:""},{title:"Clinical counselling",class:"common_step",checked:"",icon:!1,disabled:!1,number:4,last_step:""},{title:"Preventative counselling",class:"common_step",checked:"",icon:!1,disabled:!1,number:5,last_step:"last_step"}],StepperData:[{title:"Behavior counselling",component:"BehaviourCounselling",value:"1"},{title:"Physiological counselling",component:"PhysiologicalCounseling",value:"2"},{title:"Diet counselling",component:"DietCounselling",value:"3"},{title:"Clinical counselling",component:"ClinicalCounselling",value:"4"},{title:"Preventative counselling",component:"DiagnosisCounselling",value:"5"}],isOpen:!1,iconsContent:j}},mounted(){this.markWizard()},computed:{...n(X,["patient"]),...n(ne,["behaviourInfo"]),...n(te,["physiologicalCounselingInfo"]),...n(ie,["dietCounsellingInfo"]),...n(se,["clinicalCounselling"]),...n(Y,["preventativeCounselling"])},setup(){return{chevronBackOutline:R,checkmark:O}},methods:{markWizard(){},getSaveFunction(){},getFormatedData(e){return e.map(o=>o==null?void 0:o.data)},async saveData(){this.saveCounselling(),await K(),this.$router.push("contact")},async saveCounselling(){if(this.physiologicalCounselingInfo.length>=0||this.dietCounsellingInfo>=0||this.behaviourInfo>=0||this.clinicalCounselling>=0||this.preventativeCounselling>=0){const e=M.getUserID(),o=new ae(this.patient.patientID,e);if(!await o.createEncounter())return p("Unable to create patient counselling encounter");if(!await o.saveObservationList(await this.buildCounselling()))return p("Unable to create counselling details!");V("Counselling details have been saved")}console.log(await this.buildCounselling())},async buildCounselling(){return[...await s(this.dietCounsellingInfo),...await a(this.dietCounsellingInfo),...await l(this.dietCounsellingInfo),...await s(this.behaviourInfo),...await a(this.behaviourInfo),...await l(this.behaviourInfo),...await s(this.physiologicalCounselingInfo),...await a(this.physiologicalCounselingInfo),...await l(this.physiologicalCounselingInfo),...await s(this.clinicalCounselling),...await a(this.clinicalCounselling),...await l(this.clinicalCounselling),...await s(this.preventativeCounselling),...await a(this.preventativeCounselling),...await l(this.preventativeCounselling)]}}});function re(e,o,c,g,ce,ue){const h=t("Toolbar"),d=t("DemographicBar"),m=t("Stepper"),C=t("ion-content"),f=t("BasicFooter"),v=t("ion-page");return E(),A(v,null,{default:u(()=>[i(h),i(C,{fullscreen:!0},{default:u(()=>[i(d),i(m,{stepperTitle:"Counselling",wizardData:e.wizardData,onUpdateStatus:e.markWizard,StepperData:e.StepperData,backUrl:e.userRoleSettings.url,backBtn:e.userRoleSettings.btnName,getSaveFunction:e.getSaveFunction},null,8,["wizardData","onUpdateStatus","StepperData","backUrl","backBtn","getSaveFunction"])]),_:1}),i(f,{onFinishBtn:o[0]||(o[0]=pe=>e.saveData())})]),_:1})}const eo=q(le,[["render",re]]);export{eo as default};
