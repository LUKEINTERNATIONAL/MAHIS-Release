import{d as oe,b2 as we,r as o,c as J,a as _e,H as ge,e as k,f as c,l as t,m as h,O,J as l,k as r,u as s,$ as ne,Q as H,F as Q,w as fe,ay as ya,bW as ja,P as ue,aP as za,K as x,p as ta,bu as Ka,ai as Ja,L as Me,ez as na,eA as oa,bl as Ve,bg as sa,eB as ia,eC as la,da as ra,eD as ca,eE as da,eF as ua,df as ma,bV as Xa,aw as Ke,aA as Qa,c1 as Za,n as me,X as re,bz as et,am as ze,al as be,N as ie,bt as le,a5 as de,bm as Ie,b3 as at,bo as va,a3 as ba,b$ as tt,bw as nt,ak as ga,a6 as j,aH as ot,c7 as pa,bx as st,dt as it,ea as ha}from"./vendor-CxrCa3Dl.js";import{bp as lt,l as K,aD as Be,aC as rt,b4 as ct,aE as Je,J as ke,M as dt,S as Ee,ag as W,aU as X,t as pe,G as $e,_ as Ae,u as Oe,af as te,H as Ye,aV as _a,bU as ut,P as Ca,aM as Te,m as mt,aT as pt,K as ht,B as Ce,ay as fa,ap as Ge,at as We,aO as ft,as as yt}from"../index-Bez2ogcw.js";import{e as vt,a as bt,m as gt,b as _t,v as Ct,c as Dt,_ as kt}from"./LevelOfConsciousness.vue_vue_type_script_setup_true_lang-5UAQagKT.js";import{p as wt}from"./previousComplaints-CZmtMJyN.js";import{P as At}from"./patient_complaints_service-DBGf5l9H.js";import{D as Ot}from"./DashBox-1PlkPxWE.js";import{B as xt}from"./BasicForm-DIbjKF_k.js";import{f as Pt}from"./formatServerData-Bj-799A_.js";import{A as St,D as Tt,a as Nt}from"./NextAppointment-DBhO04_h.js";import{a as It,b as Et}from"./drug_prescription_service-Bm8gXUB6.js";import{P as Ft}from"./nonPharmaTherapyStore-DiWlBQ-J.js";import{l as De}from"./lodash-NJiRuGo9.js";import{_ as je,D as Ht,A as Bt,R as Mt,a as Vt,b as Yt}from"./Outcome-BZW1NVn9.js";const $t={key:0},Rt={style:{"align-content":"center"}},Ut={class:"ion-padding",slot:"content"},Lt=oe({__name:"PresentingComplaints",setup(d,{expose:u}){const m=lt(),{presentingComplaints:v}=we(m),P=o(K),A=o(!0),N=o(!1),g=o(!1),n=o(!0),e=o(!1),a=o([]),f=o([]),F=o(),C=J(()=>[{componentType:"multiSelectInputField",header:"Presenting Complaints",name:"PresentingComplaints",trackBy:"concept_id",icon:K.search,hideSelected:!0,validation:T=>Y(T==null?void 0:T.name,a.value)?"Presenting complaint already added":Be.required(T),options:f.value,grid:{s:"6"}},{componentType:"inputField",header:"Duration",name:"duration",icon:K.time,validation:T=>Be.isNotEmptyandNumber(T),grid:{s:"6"},unitOptions:[{label:"Hours",value:"Hours"},{label:"Days",value:"Days"},{label:"Weeks",value:"Weeks"},{label:"Months",value:"Months"},{label:"Years",value:"Years"}],unitValidation:T=>!T||T===""?"Please select a unit.":null},{componentType:"inputField",header:"Specify the presenting complaint(s)",name:"Other (specify)",icon:K.editPen,validation:T=>Y(T,a.value)?"Presenting complaint already added":Be.required(T),condition:T=>{var _;return((_=T==null?void 0:T.PresentingComplaints)==null?void 0:_.name)==="Other"}},{componentType:"Alert",condition:T=>{var _;return Be.required((_=T==null?void 0:T.PresentingComplaints)==null?void 0:_.name)!=null},backgroundColor:"lightyellow",textColor:"black",value:"Please search thoroughly for the complaint. If it is not listed, search and select the 'Other' option to specify the complaint.",name:"noMatchAlert"}]),{formRef:y}=rt(),B=async()=>{f.value=await At.getComplaintsList("Presenting complaint"),dt(v.value,"PresentingComplaints","multiSelectData",f.value)},V=()=>{A.value=!1,n.value=!1,g.value=!0},M=async()=>{var i,S;const T=(i=y.value)==null?void 0:i.getFormValues();((S=y.value)==null?void 0:S.validateForm())==null&&(E(T),g.value=!1,n.value=!0)},E=T=>{var L;const _=T.duration+" "+T.duration_unit,i=T.PresentingComplaints,S=i.name==="Other"?T["Other (specify)"]:i.name;a.value.push({actionBtn:!0,btn:["delete"],name:S,concept_id:i.concept_id,duration:i.duration,durationUnits:i.duration_unit,display:[S,_],data:[{concept_id:8578,value_coded:i.concept_id,obs_datetime:Ee.getSessionDate(),child:[{concept_id:i.concept_id,value_text:_,obs_datetime:Ee.getSessionDate()}]}]}),(L=y.value)==null||L.resetForm(),e.value=!0,$()},$=()=>{const T=["Cough","Convulsions"];N.value=a.value.some(_=>T.includes(_.name))},Y=(T,_)=>_.some(i=>i.name===T),q=T=>{a.value=a.value.filter(_=>_.display[0]!==T.name)},z=async()=>{const T=await W.getObsByEncounterIdAndDate(X.PRESENTING_COMPLAINTS),_=a.value.flatMap(i=>i.data);return _.length<=0&&T.length<=0?(pe("Presenting complaints is required"),!1):(_.length<=0||(await W.addObsToEncounterPatient(_,X.PRESENTING_COMPLAINTS),$e("Presenting complaints saved successful"),a.value=[]),!0)};return _e(async()=>{await B()}),u({onSubmit:z}),(T,_)=>{const i=ge("ion-row"),S=ge("ion-label"),L=ge("ion-accordion"),ce=ge("ion-accordion-group");return c(),k(Q,null,[t(Ot,{status:A.value,content:"No presenting complaints added"},null,8,["status"]),e.value?(c(),k("span",$t,[t(ct,{listData:a.value,"onClicked:delete":q},null,8,["listData"])])):h("",!0),g.value?(c(),O(i,{key:1},{default:l(()=>[t(Je,{formData:C.value,ref_key:"formRef",ref:y},null,8,["formData"]),r("div",Rt,[t(ke,{fill:"clear",icon:P.value.plus,iconSlot:"icon-only","onClicked:btn":_[0]||(_[0]=he=>M()),name:"Save"},null,8,["icon"])])]),_:1})):h("",!0),n.value?(c(),O(i,{key:2,style:{"margin-top":"10px"}},{default:l(()=>[t(ke,{fill:"clear",icon:P.value.plus,iconSlot:"icon-only","onClicked:btn":_[1]||(_[1]=he=>V()),name:"Add new presenting complaints"},null,8,["icon"])]),_:1})):h("",!0),t(i,null,{default:l(()=>[t(ce,{ref_key:"accordionGroup",ref:F,class:"previousView"},{default:l(()=>[t(L,{value:"first","toggle-icon-slot":"start",style:{"border-radius":"10px","background-color":"#fff"}},{default:l(()=>[t(s(ne),{slot:"header",color:"light"},{default:l(()=>[t(S,{class:"previousLabel"},{default:l(()=>[..._[2]||(_[2]=[H("Previous presenting complaints",-1)])]),_:1})]),_:1}),r("div",Ut,[t(wt)])]),_:1})]),_:1},512)]),_:1})],64)}}}),qt=Ae(Lt,[["__scopeId","data-v-44affb13"]]),Gt={class:"visit-section"},Wt={class:"section-header"},jt={key:0,class:"no-data"},zt={key:1,class:"allergy-accordion"},Kt=["onClick"],Jt={class:"acc-left"},Xt={class:"acc-title"},Qt={class:"acc-count"},Zt={key:0,class:"accordion-body"},en={class:"item-label"},an={class:"item-value"},tn=oe({__name:"AllergiesListing",setup(d){const u=Oe(),{patient:m}=we(u),v=o({}),P=o([]),A={antiviral:/abacavir|lamivudine|lopinavir|ritonavir|zidovudine|efavirenz|tenofovir/i,antibiotic:/penicillin|amoxicillin|cephalexin|azithromycin|ciprofloxacin|doxycycline/i,analgesic:/aspirin|ibuprofen|acetaminophen|morphine|codeine|tramadol/i,cardiac:/metoprolol|lisinopril|amlodipine|atorvastatin|warfarin/i,activated:/activated\s+charcoal/i},N={985:{name:"Drug Allergy",severity:"danger"},7759:{name:"Location/Environmental",severity:"info"},7579:{name:"Medical Condition",severity:"warning"},drug:{name:"Drug Allergy",severity:"danger"},food:{name:"Food Allergy",severity:"danger"},environmental:{name:"Environmental",severity:"warning"},contact:{name:"Contact Allergy",severity:"warning"},unknown:{name:"Drug Allergy",severity:"danger"}},g=y=>{const B=y.toLowerCase();return A.antiviral.test(B)?"Antiviral Medication":A.antibiotic.test(B)?"Antibiotic":A.analgesic.test(B)?"Pain Medication":A.cardiac.test(B)?"Cardiac Medication":A.activated.test(B)?"Detoxification Agent":"Medication"},n=async()=>{var y;try{if(!((y=m.value)!=null&&y.patientID))return;const B=await W.getObsByEncounterIdAndDate(X.MEDICAL_HISTORY),V=await te.getConceptID("Allergic"),M=B.filter($=>$.concept_id===V);P.value=await Promise.all(M.map(async $=>{var _,i;const Y=((_=$.value_coded)==null?void 0:_.toString())||"unknown",q=await te.getConceptName($.value_coded);let z=((i=N[Y])==null?void 0:i.name)||"Drug Allergy",T=$.value_text||q||"Unknown";return Y==="985"&&$.value_text&&(z=g($.value_text)),{name:z,displayValue:T,date:$.obs_datetime||$.encounter_datetime,conceptId:Y}}));const E=Object.keys(a.value);E.length>0&&(v.value[E[0]]=!0)}catch(B){console.error("Error loading allergies:",B)}},e=J(()=>P.value.length>0),a=J(()=>{const y={};P.value.forEach(M=>{const E=M.date?F(M.date):"Unknown Date";y[E]||(y[E]=[]),y[E].push(M)});const B={};return Object.keys(y).sort((M,E)=>M==="Unknown Date"?1:E==="Unknown Date"?-1:new Date(E).getTime()-new Date(M).getTime()).forEach(M=>{B[M]=y[M]}),B}),f=y=>{v.value[y]=!v.value[y]},F=y=>{if(!y)return"Unknown Date";try{return new Date(y).toISOString().split("T")[0]}catch(B){return"Unknown Date"}},C=y=>{if(y==="Unknown Date")return"Unknown Date";try{const B=new Date(y),V=Ye.sessionDate(),M=new Date(V),E=new Date(M);E.setDate(E.getDate()-1);const $=B.toDateString(),Y=M.toDateString(),q=E.toDateString();return $===Y?"Today":$===q?"Yesterday":B.toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})}catch(B){return y}};return fe(()=>{var y;return(y=m.value)==null?void 0:y.patientID},async y=>{y&&await n()},{immediate:!0}),_e(async()=>{await n()}),(y,B)=>{const V=ge("ion-icon");return c(),k("div",Gt,[r("div",Wt,[t(V,{icon:s(ya),class:"section-icon"},null,8,["icon"]),B[0]||(B[0]=r("h3",null,"Allergies",-1))]),e.value?(c(),k("div",zt,[(c(!0),k(Q,null,ue(a.value,(M,E)=>(c(),k("div",{key:E,class:"accordion-section"},[r("div",{class:ta(["accordion-header",{open:v.value[E]}]),onClick:$=>f(E)},[r("div",Jt,[t(V,{icon:s(za),class:"acc-icon"},null,8,["icon"]),r("span",Xt,x(C(E)),1),r("span",Qt,"("+x(M.length)+")",1)]),t(V,{icon:s(Ka),class:ta(["chevron",{rotate:v.value[E]}])},null,8,["icon","class"])],10,Kt),v.value[E]?(c(),k("div",Zt,[(c(!0),k(Q,null,ue(M,($,Y)=>(c(),k("div",{class:"allergy-item",key:Y},[r("span",en,x($.name)+":",1),r("span",an,x($.displayValue),1)]))),128))])):h("",!0)]))),128))])):(c(),k("div",jt,[t(V,{icon:s(ja),class:"no-data-icon"},null,8,["icon"]),B[1]||(B[1]=r("p",null,"No known allergies",-1))]))])}}}),Da=Ae(tn,[["__scopeId","data-v-f7cd569d"]]),nn=oe({name:"VisitHistory",components:{AllergiesListing:Da,IonIcon:Me},setup(){const d=_a();return{selectedAllergiesList2:J(()=>d.selectedMedicalAllergiesList),alertCircleOutline:ya,documentTextOutline:Za,femaleOutline:Qa,medicalOutline:Ke,warningOutline:Xa,bodyOutline:na,eyeOutline:ma,nutritionOutline:ua,fitnessOutline:la,pulseOutline:sa,earOutline:da,happyOutline:ca,manOutline:ra,moveOutline:ia,addOutline:Ve,scanOutline:oa}},data(){return{presentingComplaintsWithDuration:[],pastMedicalHistory:[],levelOfConsciousness:{eyeResponse:null,verbalResponse:null,motorResponse:null},pregnancy:{patientPregnant:null,breastFeeding:null},allergyList:[],physicalExamCategories:{Eyes:{icon:ma,abnormalities:[],normal:!1},Mouth:{icon:ua,abnormalities:[],normal:!1},Ears:{icon:da,abnormalities:[],normal:!1},Face:{icon:ca,abnormalities:[],normal:!1},Neck:{icon:ra,abnormalities:[],normal:!1},Chest:{icon:la,abnormalities:[],normal:!1},"Chest Movement":{icon:ia,abnormalities:[],normal:!1},"Heart Sounds":{icon:sa,abnormalities:[],normal:!1},"Breath Sounds":{icon:Ve,abnormalities:[],normal:!1},"Added Breath Sounds":{icon:Ve,abnormalities:[],normal:!1},"Abdominal Inspection":{icon:oa,abnormalities:[],normal:!1},"Genital Examination":{icon:na,abnormalities:[],normal:!1}}}},computed:{...Ja(Oe,["patient"]),hasLevelOfConsciousness(){return this.levelOfConsciousness.eyeResponse||this.levelOfConsciousness.verbalResponse||this.levelOfConsciousness.motorResponse},hasPresentingComplaints(){var d;return((d=this.presentingComplaintsWithDuration)==null?void 0:d.length)>0},hasPregnancyData(){return this.pregnancy.patientPregnant||this.pregnancy.breastFeeding},hasPastMedicalHistory(){var d;return((d=this.uniquePastMedicalHistory)==null?void 0:d.length)>0},hasAllergies(){var d;return((d=this.allergyList)==null?void 0:d.length)>0},hasPhysicalExam(){return Object.values(this.physicalExamCategories).some(d=>d.abnormalities.length>0||d.normal)},uniquePastMedicalHistory(){return[...new Set(this.pastMedicalHistory)]},uniquePresentingComplaints(){return[...new Set(this.presentingComplaintsWithDuration.map(d=>d.name))]},isMinor(){var d,u;return Ye.getAgeInYears((u=(d=this.patient)==null?void 0:d.personInformation)==null?void 0:u.birthdate)<18},gcsScore(){var g,n,e;if(!this.hasLevelOfConsciousness)return null;const d=this.levelOfConsciousness.eyeResponse,u=this.levelOfConsciousness.motorResponse,m=this.levelOfConsciousness.verbalResponse,v=d&&(g=(this.isMinor?vt:bt)[d])!=null?g:0,P=u&&(n=(this.isMinor?gt:_t)[u])!=null?n:0,A=m&&(e=(this.isMinor?Ct:Dt)[m])!=null?e:0,N=v+P+A;return"(M ".concat(P," V ").concat(A," E ").concat(v,") ").concat(N,"/").concat(this.isMinor?5:15)}},methods:{async updateData(){var d;(d=this.patient)!=null&&d.patientID&&(await this.loadPresentingComplaints(),await this.loadPastMedicalHistory(),await this.loadLevelOfConsciousness(),await this.loadPregnancyStatus(),await this.loadPhysicalExam(),await this.loadAllergies())},async loadPresentingComplaints(){try{const d=await W.getObsByEncounterIdAndDate(X.PRESENTING_COMPLAINTS);this.presentingComplaintsWithDuration=[];const u=d.filter(m=>m.concept_id===8578);for(const m of u){const v=await te.getConceptName(m.value_coded);let P="Duration not specified";m.child&&m.child.length>0&&(P=m.child[0].value_text||"Duration not specified"),this.presentingComplaintsWithDuration.push({name:v,duration:P})}}catch(d){console.error("Error loading presenting complaints:",d)}},async loadPastMedicalHistory(){try{const u=(await W.getObsByEncounterIdAndDate(X.PAST_MEDICAL_HISTORY)).filter(m=>m.concept_name==="Chronic disease");this.pastMedicalHistory=await Promise.all(u.map(async m=>await te.getConceptName(m.value_coded)))}catch(d){console.error("Error loading past medical history:",d)}},async loadLevelOfConsciousness(){try{const d=await W.getObsByEncounterIdAndDate(X.ASSESSMENT);if(d&&Array.isArray(d)){const u=d.find(P=>P.concept_name==="Eye opening response");this.levelOfConsciousness.eyeResponse=u!=null&&u.value_coded?await te.getConceptName(u.value_coded):null;const m=d.find(P=>P.concept_name==="Best verbal response");this.levelOfConsciousness.verbalResponse=m!=null&&m.value_coded?await te.getConceptName(m.value_coded):null;const v=d.find(P=>P.concept_name==="Best motor response");this.levelOfConsciousness.motorResponse=v!=null&&v.value_coded?await te.getConceptName(v.value_coded):null}}catch(d){console.error("Error loading level of consciousness:",d)}},async loadPregnancyStatus(){try{const d=await W.getObsByEncounterIdAndDate(X.PREGNANCY_STATUS);if(d&&Array.isArray(d)){const u=d.find(v=>v.concept_name==="Patient pregnant");this.pregnancy.patientPregnant=u!=null&&u.value_coded?await te.getConceptName(u.value_coded):null;const m=d.find(v=>v.concept_name==="Is patient breast feeding?");this.pregnancy.breastFeeding=m!=null&&m.value_coded?await te.getConceptName(m.value_coded):null}}catch(d){console.error("Error loading pregnancy status:",d)}},async loadAllergies(){try{const d=await W.getObsByEncounterIdAndDate(X.MEDICAL_HISTORY),u=await te.getConceptID("Allergic"),m=d.filter(v=>v.concept_id===u);this.allergyList=await Promise.all(m.map(async v=>v.value_text||await te.getConceptName(v.value_coded)))}catch(d){console.error("Error loading allergies:",d)}},async loadPhysicalExam(){try{const d=await W.getObsByEncounterIdAndDate(X.PHYSICAL_EXAMINATION);Object.values(this.physicalExamCategories).forEach(u=>{u.abnormalities=[],u.normal=!1});for(const u of d)if(u.concept_id){if(u.value_coded===1065)switch(u.concept_id){case 10837:this.physicalExamCategories.Eyes.normal=!0;break;case 10842:this.physicalExamCategories.Mouth.normal=!0;break;case 11028:this.physicalExamCategories.Ears.normal=!0;break;case 10854:this.physicalExamCategories.Face.normal=!0;break;case 10858:this.physicalExamCategories.Neck.normal=!0;break;case 10894:this.physicalExamCategories.Chest.normal=!0;break;case 10903:this.physicalExamCategories["Heart Sounds"].normal=!0;break;case 10909:this.physicalExamCategories["Breath Sounds"].normal=!0;break;case 10919:case 10928:case 10939:this.physicalExamCategories["Abdominal Inspection"].normal=!0;break;case 10803:case 10946:this.physicalExamCategories["Genital Examination"].normal=!0;break}if(u.value_coded){const m=await te.getConceptName(u.value_coded);switch(u.concept_id){case 10838:this.physicalExamCategories.Eyes.abnormalities.push(m);break;case 10843:this.physicalExamCategories.Mouth.abnormalities.push(m);break;case 10852:this.physicalExamCategories.Ears.abnormalities.push(m);break;case 10855:this.physicalExamCategories.Face.abnormalities.push(m);break;case 10859:this.physicalExamCategories.Neck.abnormalities.push(m);break;case 10897:this.physicalExamCategories.Chest.abnormalities.push(m);break;case 10904:this.physicalExamCategories["Heart Sounds"].abnormalities.push(m);break;case 10910:this.physicalExamCategories["Breath Sounds"].abnormalities.push(m);break;case 10920:case 10929:case 10939:this.physicalExamCategories["Abdominal Inspection"].abnormalities.push(m);break;case 10797:case 10804:case 10947:this.physicalExamCategories["Genital Examination"].abnormalities.push(m);break}}}}catch(d){console.error("Error loading physical exam:",d)}}},watch:{patient:{async handler(){await this.updateData()},deep:!0}},async mounted(){await this.updateData()}}),on={class:"visit-container"},sn={class:"visit-sections"},ln={key:0,class:"visit-section"},rn={class:"section-header"},cn={class:"section-content"},dn={key:0,class:"info-item"},un={class:"info-value"},mn={key:1,class:"info-item"},pn={class:"info-value"},hn={key:2,class:"info-item"},fn={class:"info-value"},yn={key:3,class:"info-item"},vn={class:"info-value highlight"},bn={key:1,class:"visit-section"},gn={class:"section-header"},_n={class:"complaints-container"},Cn={class:"complaint-name"},Dn={class:"complaint-duration"},kn={key:2,class:"visit-section"},wn={class:"section-header"},An={class:"section-content"},On={key:0,class:"info-item"},xn={class:"info-value highlight"},Pn={key:1,class:"info-item"},Sn={class:"info-value highlight"},Tn={key:3,class:"visit-section"},Nn={class:"section-header"},In={class:"tags-container"},En={key:4,class:"visit-section"},Fn={class:"section-header"},Hn={class:"tags-container"},Bn={key:5,class:"visit-section"},Mn={class:"section-header"},Vn={class:"exam-section"},Yn={key:0,class:"exam-category"},$n={class:"exam-category-header"},Rn={class:"exam-items"},Un={key:1,class:"exam-item normal"};function Ln(d,u,m,v,P,A){const N=ge("ion-icon");return c(),k("div",on,[u[12]||(u[12]=r("div",{class:"visit-header"},[r("h5",null,"Patient's Clinical Assessment Summary")],-1)),r("div",sn,[d.hasLevelOfConsciousness?(c(),k("div",ln,[r("div",rn,[t(N,{icon:d.alertCircleOutline,class:"section-icon"},null,8,["icon"]),u[0]||(u[0]=r("h3",null,"Level of Consciousness",-1))]),r("div",cn,[d.levelOfConsciousness.eyeResponse?(c(),k("div",dn,[u[1]||(u[1]=r("span",{class:"info-label"},"Eye Response:",-1)),r("span",un,x(d.levelOfConsciousness.eyeResponse),1)])):h("",!0),d.levelOfConsciousness.verbalResponse?(c(),k("div",mn,[u[2]||(u[2]=r("span",{class:"info-label"},"Verbal Response:",-1)),r("span",pn,x(d.levelOfConsciousness.verbalResponse),1)])):h("",!0),d.levelOfConsciousness.motorResponse?(c(),k("div",hn,[u[3]||(u[3]=r("span",{class:"info-label"},"Motor Response:",-1)),r("span",fn,x(d.levelOfConsciousness.motorResponse),1)])):h("",!0),d.gcsScore?(c(),k("div",yn,[u[4]||(u[4]=r("span",{class:"info-label"},"Score:",-1)),r("span",vn,x(d.gcsScore),1)])):h("",!0)])])):h("",!0),d.hasPresentingComplaints?(c(),k("div",bn,[r("div",gn,[t(N,{icon:d.documentTextOutline,class:"section-icon"},null,8,["icon"]),u[5]||(u[5]=r("h3",null,"Presenting Complaints",-1))]),r("div",_n,[(c(!0),k(Q,null,ue(d.presentingComplaintsWithDuration,(g,n)=>(c(),k("div",{class:"complaint-item",key:n},[r("div",Cn,x(g.name),1),r("div",Dn,x(g.duration),1)]))),128))])])):h("",!0),d.hasPregnancyData?(c(),k("div",kn,[r("div",wn,[t(N,{icon:d.femaleOutline,class:"section-icon"},null,8,["icon"]),u[6]||(u[6]=r("h3",null,"Pregnancy Status",-1))]),r("div",An,[d.pregnancy.patientPregnant?(c(),k("div",On,[u[7]||(u[7]=r("span",{class:"info-label"},"Pregnant:",-1)),r("span",xn,x(d.pregnancy.patientPregnant),1)])):h("",!0),d.pregnancy.breastFeeding?(c(),k("div",Pn,[u[8]||(u[8]=r("span",{class:"info-label"},"Breastfeeding:",-1)),r("span",Sn,x(d.pregnancy.breastFeeding),1)])):h("",!0)])])):h("",!0),d.hasPastMedicalHistory?(c(),k("div",Tn,[r("div",Nn,[t(N,{icon:d.medicalOutline,class:"section-icon"},null,8,["icon"]),u[9]||(u[9]=r("h3",null,"Medical History",-1))]),r("div",In,[(c(!0),k(Q,null,ue(d.uniquePastMedicalHistory,(g,n)=>(c(),k("div",{class:"medical-tag",key:n},x(g),1))),128))])])):h("",!0),d.hasAllergies?(c(),k("div",En,[r("div",Fn,[t(N,{icon:d.warningOutline,class:"section-icon"},null,8,["icon"]),u[10]||(u[10]=r("h3",null,"Allergies",-1))]),r("div",Hn,[(c(!0),k(Q,null,ue(d.allergyList,(g,n)=>(c(),k("div",{class:"allergy-tag",key:n},x(g),1))),128))])])):h("",!0),d.hasPhysicalExam?(c(),k("div",Bn,[r("div",Mn,[t(N,{icon:d.bodyOutline,class:"section-icon"},null,8,["icon"]),u[11]||(u[11]=r("h3",null,"Physical Examination",-1))]),r("div",Vn,[(c(!0),k(Q,null,ue(d.physicalExamCategories,(g,n)=>(c(),k(Q,{key:n},[g.abnormalities.length>0||g.normal?(c(),k("div",Yn,[r("div",$n,[t(N,{icon:g.icon},null,8,["icon"]),r("h4",null,x(n),1)]),r("div",Rn,[g.abnormalities.length>0?(c(!0),k(Q,{key:0},ue(g.abnormalities,(e,a)=>(c(),k("div",{class:"exam-item abnormal",key:a},x(e),1))),128)):g.normal?(c(),k("div",Un,"Normal examination")):h("",!0)])])):h("",!0)],64))),128))])])):h("",!0)])])}const qn=Ae(nn,[["render",Ln],["__scopeId","data-v-49bf6f48"]]),Gn={class:"modal_wrapper"},Wn=oe({__name:"PregnancyBreastfeeding",setup(d,{expose:u}){const m=ut(),{pregnancy:v}=we(m),P=()=>{};return u({onSubmit:async()=>{const N=await Pt(v.value);N.length>0?(await W.addObsToEncounterPatient(N,X.PREGNANCY_STATUS),$e("Pregnancy status saved successfully")):pe("No pregnancy status data to save ")}}),(N,g)=>(c(),k("div",Gn,[t(xt,{contentData:s(v),"onUpdate:inputValue":P},null,8,["contentData"])]))}}),jn=()=>{const d=Oe(),{patient:u}=we(d),m=()=>{},v=J(()=>{var P,A,N,g;return[{componentType:"Heading",name:"Existing Chronic Health Conditions",grid:{s:"12"}},{componentType:"checkboxField",name:"TB",label:"TB",type:"single",grid:{s:"12"},disabled:n=>n.None,onChange:(n,e)=>{const a={};return n||(a["TB treatment"]="",a["TB drugs"]=null,a["TB drug start date"]=""),a}},{componentType:"radioButtonField",header:"On TB medication",name:"TB treatment",options:[{value:"Yes",label:"Yes"},{value:"No",label:"No"}],grid:{s:"12"},condition:n=>n.TB===!0,onChange:(n,e)=>{const a={};return n!=="Yes"&&(a["TB drugs"]=null,a["TB drug start date"]=""),a}},{componentType:"multiSelectInputField",header:"Select medication",name:"TB drugs",isMultiple:!1,trackBy:"name",grid:{s:"6"},icon:K.search,options:[{name:"Auramine 'O' (C.I. 41000) 50g"},{name:"Bedaquilline 100mg"},{name:"Clofazimine 100mg"},{name:"Clofazimine 50mg"}],condition:n=>n.TB===!0&&n["TB treatment"]==="Yes"},{componentType:"dateInputField",header:"Start date",name:"TB drug start date",grid:{s:"6"},condition:n=>n.TB===!0&&n["TB treatment"]==="Yes",minDate:((A=(P=u.value)==null?void 0:P.personInformation)==null?void 0:A.birthdate)||void 0,maxDate:new Date().toISOString().split("T")[0]},{grid:{s:"12"},componentType:"Dashes"},{componentType:"checkboxField",name:"Chronic Obstructive Pulmonary Disease (COPD)",label:"Chronic Obstructive Pulmonary Disease (COPD)",type:"single",grid:{s:"12"},disabled:n=>n.None,onChange:()=>({})},{grid:{s:"12"},componentType:"Dashes"},{componentType:"checkboxField",name:"Asthma",label:"Asthma",type:"single",grid:{s:"12"},disabled:n=>n.None,onChange:()=>({})},{grid:{s:"12"},componentType:"Dashes"},{componentType:"checkboxField",name:"Epilepsy",label:"Epilepsy",type:"single",grid:{s:"12"},disabled:n=>n.None,onChange:()=>({})},{grid:{s:"12"},componentType:"Dashes"},{componentType:"checkboxField",name:"Previous stroke",label:"Previous stroke",type:"single",grid:{s:"12"},disabled:n=>n.None,onChange:()=>({})},{grid:{s:"12"},componentType:"Dashes"},{componentType:"checkboxField",name:"Peptic Ulcer Disease (PUD)",label:"Peptic Ulcer Disease (PUD)",type:"single",grid:{s:"12"},disabled:n=>n.None,onChange:()=>({})},{grid:{s:"12"},componentType:"Dashes"},{componentType:"checkboxField",name:"Mental disorder",label:"Mental disorder",type:"single",grid:{s:"12"},disabled:n=>n.None,onChange:()=>({})},{grid:{s:"12"},componentType:"Dashes"},{componentType:"checkboxField",name:"Bleeding disorders",label:"Bleeding disorders",type:"single",grid:{s:"12"},disabled:n=>n.None,onChange:()=>({})},{grid:{s:"12"},componentType:"Dashes"},{componentType:"checkboxField",name:"Hypertension",label:"Hypertension",type:"single",grid:{s:"12"},disabled:n=>n.None,onChange:(n,e)=>{const a={};return n||(a["Hypertension medication"]="",a["Current hypertension treatment regimen"]=null),a}},{componentType:"radioButtonField",header:"On medication",name:"Hypertension medication",options:[{value:"Yes",label:"Yes"},{value:"No",label:"No"}],grid:{s:"12"},condition:n=>n.Hypertension===!0,onChange:(n,e)=>{const a={};return n!=="Yes"&&(a["Current hypertension treatment regimen"]=null),a}},{componentType:"multiSelectInputField",header:"Select medication",name:"Current hypertension treatment regimen",isMultiple:!1,trackBy:"name",grid:{s:"12"},icon:K.search,options:[{name:"Captopril 12.5mg"},{name:"Aspirin 75mg"},{name:"Hydrochlorothiazide 25mg"},{name:"Enalapril Meleate 5mg"},{name:"Enalapril Maleate 10mg"}],condition:n=>n.Hypertension===!0&&n["Hypertension medication"]==="Yes"},{grid:{s:"12"},componentType:"Dashes"},{componentType:"checkboxField",name:"HIV Positive",label:"HIV Positive",type:"single",grid:{s:"12"},disabled:n=>n.None,onChange:(n,e)=>{const a={};return n||(a["HIV status"]="",a["ARV start date"]=""),a}},{componentType:"radioButtonField",header:"Is the patient on ART",name:"HIV status",options:[{value:"Yes",label:"Yes"},{value:"No",label:"No"}],grid:{s:"12"},condition:n=>n["HIV Positive"]===!0,onChange:(n,e)=>{const a={};return n!=="Yes"&&(a["ARV start date"]=""),a}},{componentType:"dateInputField",header:"Enter ARV start date",name:"ARV start date",grid:{s:"12"},condition:n=>n["HIV Positive"]===!0&&n["HIV status"]==="Yes",minDate:((g=(N=u.value)==null?void 0:N.personInformation)==null?void 0:g.birthdate)||void 0,maxDate:new Date().toISOString().split("T")[0]},{grid:{s:"12"},componentType:"Dashes"},{componentType:"checkboxField",name:"Diabetes Mellitus",label:"Diabetes Mellitus",type:"single",grid:{s:"12"},disabled:n=>n.None,onChange:(n,e)=>{const a={};return n||(a.Diabetes="",a["Controlled by"]=""),a}},{componentType:"radioButtonField",header:"Type",name:"Diabetes",options:[{value:"Type 1 diabetes",label:"Type I"},{value:"Type 2 diabetes",label:"Type II"},{value:"Unknown",label:"Unsure"}],grid:{s:"12"},condition:n=>n["Diabetes Mellitus"]===!0},{componentType:"radioButtonField",header:"Controlled by",name:"Controlled by",options:[{value:"Diet",label:"Diet"},{value:"Tablets",label:"Tablets"},{value:"Insulin",label:"Insulin"}],grid:{s:"12"},condition:n=>n["Diabetes Mellitus"]===!0},{grid:{s:"12"},componentType:"Dashes"},{componentType:"checkboxField",name:"None",label:"None",type:"single",grid:{s:"12"},onChange:(n,e)=>{const a={};return n&&(a.TB=!1,a["Chronic Obstructive Pulmonary Disease (COPD)"]=!1,a.Asthma=!1,a.Epilepsy=!1,a["Previous stroke"]=!1,a["Peptic Ulcer Disease (PUD)"]=!1,a["Mental disorder"]=!1,a["Bleeding disorders"]=!1,a.Hypertension=!1,a["HIV Positive"]=!1,a["Diabetes Mellitus"]=!1,a["TB treatment"]="",a["TB drugs"]=null,a["TB drug start date"]="",a["Hypertension medication"]="",a["Current hypertension treatment regimen"]=null,a["HIV status"]="",a["ARV start date"]="",a.Diabetes="",a["Controlled by"]=""),a}}]});return{resetForm:m,pastMedicalHistoryFormSection:v}},zn=oe({__name:"PastMedicalHistory",setup(d,{expose:u}){const m=jn(),v=o(null),P=o(0),A=Oe(),{patient:N}=we(A);fe(()=>{var a;return(a=N.value)==null?void 0:a.patientID},async(a,f)=>{a&&a!==f&&(console.log("Patient changed, resetting form"),P.value++,await me(),await me())}),fe(()=>{var a,f;return(f=(a=v.value)==null?void 0:a.getFormValues())==null?void 0:f.None},a=>{a&&v.value&&me(()=>{})});const g=async()=>{if(!v.value)return console.error("Form reference is not available"),!1;const a=v.value.validateForm();if(a)return console.log("Validation errors:",a),pe("Please fix validation errors before submitting"),!1;const f=v.value.getFormValues();console.log("Form data:",f);const F=await n(f);return F.length===0?(pe("No past medical history data to save"),!1):(await W.addObsToEncounterPatient(F,X.PAST_MEDICAL_HISTORY),P.value++,await me(),await me(),$e("Past medical history saved successfully"),!0)},n=async a=>{const f=[];for(const[F,C]of Object.entries(a))if(!(!C||C===!1||C===""))if(typeof C=="boolean"&&C===!0)try{const y=await te.getConceptID(F,!0);y&&f.push(await W.buildValueCoded("Chronic disease",y))}catch(y){f.push(await W.buildValueText("Chronic disease",F))}else typeof C=="string"?f.push(await W.buildValueText(F,C)):typeof C=="object"&&(C!=null&&C.name)?f.push(await W.buildValueText(F,C.name)):(C instanceof Date||/^\d{4}-\d{2}-\d{2}$/.test(C))&&f.push(await W.buildValueDate(F,C));return console.log("Processed past medical history:",f),f};_e(async()=>{console.log("Past medical history form mounted"),await me(),await me()});const e=J(()=>m.pastMedicalHistoryFormSection.value);return u({validateForm:()=>{var a;return(a=v.value)==null?void 0:a.validateForm()},onSubmit:g,resetForm:()=>{P.value++}}),(a,f)=>(c(),O(Je,{formData:e.value,ref_key:"formRef",ref:v,key:P.value},null,8,["formData"]))}}),Kn=()=>{const d=Oe(),{patient:u}=we(d),m=()=>{},v=J(()=>{var g,n;const P=(n=(g=u.value)==null?void 0:g.personInformation)==null?void 0:n.gender,A=P==="M",N=P==="F";return[{componentType:"radioButtonField",header:"Has physical examination been done?",name:"Physical examination",options:[{value:"Yes",label:"Yes"},{value:"No",label:"No"}],grid:{s:"12"},onChange:(e,a)=>{if(e==="No")return{"Eyes normal":"","Abnormality for eyes":[],"Other eye abnormality notes":"","Mouth normal":"","Abnormality for  mouth":[],"Other mouth abnormality notes":"","Ears normal":"","Abnormality for ears":[],"Other ears abnormality notes":"","Face normal":"","Abnormality for face":[],"Other face abnormality notes":"","Neck normal":"","Abnormality for neck":[],"Other neck abnormality notes":"","Chest inspection normal":"","Abnormality for  chest inspection":[],"Other chest abnormality notes":"","Chest movements":"","Heart sounds normal":"","Heart sounds abnormality":[],"Breath sounds normal":"","Breath sounds abnormality":[],"Abnormalities when added":[],"Abdominal inspection normal":"","Abdominal inspection abnormality":[],"Other abdominal abnormality notes":"","Abdominal auscultation normal":"","Abdominal auscultation abnormality":[],"Other abdominal auscultation abnormality notes":"","Bowel sounds abnormality":[],"Abdominal palpation normal":"","Abdominal palpation abnormality":[],"Other abdominal palpation abnormality notes":"","Genital examination normal":"","Genital examination abnormality":[],"Urethral meatus abnormalities":[],"Vulva inspection abnormalities":[],"Other genital abnormality notes":"","Extremities normal":"","Abnormality for extremities":[],"Other extremities abnormalities notes":""}}},{grid:{s:"12"},componentType:"Dashes"},{componentType:"radioButtonField",header:"Reason why physical examination not done?",name:"Reason why physical examination not done",options:[{value:"Condition does not necessitate assessment",label:"Condition does not necessitate assessment"},{value:"Patient refused to consent",label:"Patient refused to consent"}],grid:{s:"12"},condition:e=>e["Physical examination"]==="No"},{componentType:"radioButtonField",header:"Eyes normal?",name:"Eyes normal",options:[{value:"Yes",label:"Yes"},{value:"No",label:"No"}],grid:{s:"12"},condition:e=>e["Physical examination"]==="Yes",onChange:(e,a)=>{if(e==="Yes")return{"Abnormality for eyes":[],"Other eye abnormality notes":""}}},{componentType:"checkboxField",header:"What are the abnormalities on eyes?",name:"Abnormality for eyes",type:"multiple",options:[{value:"Pallor",label:"Pallor"},{value:"Jaundice",label:"Jaundice"},{value:"Ulcerations",label:"Ulcerations"},{value:"Other eye abnormality",label:"Other eye abnormality"}],grid:{s:"12"},condition:e=>e["Physical examination"]==="Yes"&&e["Eyes normal"]==="No",onChange:(e,a)=>{if(!(e!=null&&e.includes("Other eye abnormality")))return{"Other eye abnormality notes":""}}},{componentType:"inputField",header:"Specify eye abnormality",name:"Other eye abnormality notes",icon:K.editPen,grid:{s:"12"},condition:e=>e["Physical examination"]==="Yes"&&e["Eyes normal"]==="No"&&Array.isArray(e["Abnormality for eyes"])&&e["Abnormality for eyes"].includes("Other eye abnormality")},{grid:{s:"12"},componentType:"Dashes"},{componentType:"radioButtonField",header:"Mouth normal?",name:"Mouth normal",options:[{value:"Yes",label:"Yes"},{value:"No",label:"No"}],grid:{s:"12"},condition:e=>e["Physical examination"]==="Yes",onChange:(e,a)=>{if(e==="Yes")return{"Abnormality for  mouth":[],"Other mouth abnormality notes":""}}},{componentType:"checkboxField",header:"What are the abnormalities in the mouth?",name:"Abnormality for  mouth",type:"multiple",options:[{value:"Oral thrush",label:"Oral thrush"},{value:"Kaposi's Sarcoma lesions",label:"Kaposi's Sarcoma lesions"},{value:"Sores",label:"Sores"},{value:"Other mouth abnormality",label:"Other mouth abnormality"}],grid:{s:"12"},condition:e=>e["Physical examination"]==="Yes"&&e["Mouth normal"]==="No",onChange:(e,a)=>{if(!(e!=null&&e.includes("Other mouth abnormality")))return{"Other mouth abnormality notes":""}}},{componentType:"inputField",header:"Specify mouth abnormality",name:"Other mouth abnormality notes",icon:K.editPen,grid:{s:"12"},condition:e=>e["Physical examination"]==="Yes"&&e["Mouth normal"]==="No"&&Array.isArray(e["Abnormality for  mouth"])&&e["Abnormality for  mouth"].includes("Other mouth abnormality")},{grid:{s:"12"},componentType:"Dashes"},{componentType:"radioButtonField",header:"Ears normal?",name:"Ears normal",options:[{value:"Yes",label:"Yes"},{value:"No",label:"No"}],grid:{s:"12"},condition:e=>e["Physical examination"]==="Yes",onChange:(e,a)=>{if(e==="Yes")return{"Abnormality for ears":[],"Other ears abnormality notes":""}}},{componentType:"checkboxField",header:"What are the abnormalities on ears?",name:"Abnormality for ears",type:"multiple",options:[{value:"Ear discharge",label:"Ear discharge"},{value:"Bleeding",label:"Bleeding"},{value:"Other ears abnormality",label:"Other ears abnormality"}],grid:{s:"12"},condition:e=>e["Physical examination"]==="Yes"&&e["Ears normal"]==="No",onChange:(e,a)=>{if(!(e!=null&&e.includes("Other ears abnormality")))return{"Other ears abnormality notes":""}}},{componentType:"inputField",header:"Specify ears abnormality",name:"Other ears abnormality notes",icon:K.editPen,grid:{s:"12"},condition:e=>e["Physical examination"]==="Yes"&&e["Ears normal"]==="No"&&Array.isArray(e["Abnormality for ears"])&&e["Abnormality for ears"].includes("Other ears abnormality")},{grid:{s:"12"},componentType:"Dashes"},{componentType:"radioButtonField",header:"Face normal?",name:"Face normal",options:[{value:"Yes",label:"Yes"},{value:"No",label:"No"}],grid:{s:"12"},condition:e=>e["Physical examination"]==="Yes",onChange:(e,a)=>{if(e==="Yes")return{"Abnormality for face":[],"Other face abnormality notes":""}}},{componentType:"checkboxField",header:"What are the abnormalities on face?",name:"Abnormality for face",type:"multiple",options:[{value:"Rash",label:"Rash"},{value:"Swelling",label:"Swelling"},{value:"Other face abnormality",label:"Other face abnormality"}],grid:{s:"12"},condition:e=>e["Physical examination"]==="Yes"&&e["Face normal"]==="No",onChange:(e,a)=>{if(!(e!=null&&e.includes("Other face abnormality")))return{"Other face abnormality notes":""}}},{componentType:"inputField",header:"Specify face abnormality",name:"Other face abnormality notes",icon:K.editPen,grid:{s:"12"},condition:e=>e["Physical examination"]==="Yes"&&e["Face normal"]==="No"&&Array.isArray(e["Abnormality for face"])&&e["Abnormality for face"].includes("Other face abnormality")},{grid:{s:"12"},componentType:"Dashes"},{componentType:"radioButtonField",header:"Neck normal?",name:"Neck normal",options:[{value:"Yes",label:"Yes"},{value:"No",label:"No"}],grid:{s:"12"},condition:e=>e["Physical examination"]==="Yes",onChange:(e,a)=>{if(e==="Yes")return{"Abnormality for neck":[],"Other neck abnormality notes":""}}},{componentType:"checkboxField",header:"What are the abnormalities on the neck?",name:"Abnormality for neck",type:"multiple",options:[{value:"Neck rash",label:"Neck rash"},{value:"Swelling",label:"Swelling"},{value:"Neck mass",label:"Neck mass"},{value:"Other neck abnormality",label:"Other neck abnormality"}],grid:{s:"12"},condition:e=>e["Physical examination"]==="Yes"&&e["Neck normal"]==="No",onChange:(e,a)=>{if(!(e!=null&&e.includes("Other neck abnormality")))return{"Other neck abnormality notes":""}}},{componentType:"inputField",header:"Specify neck abnormality",name:"Other neck abnormality notes",icon:K.editPen,grid:{s:"12"},condition:e=>e["Physical examination"]==="Yes"&&e["Neck normal"]==="No"&&Array.isArray(e["Abnormality for neck"])&&e["Abnormality for neck"].includes("Other neck abnormality")},{grid:{s:"12"},componentType:"Dashes"},{componentType:"radioButtonField",header:"Chest inspection normal?",name:"Chest inspection normal",options:[{value:"Yes",label:"Yes"},{value:"No",label:"No"}],grid:{s:"12"},condition:e=>e["Physical examination"]==="Yes",onChange:(e,a)=>{if(e==="Yes")return{"Abnormality for  chest inspection":[],"Other chest abnormality notes":""}}},{componentType:"checkboxField",header:"What are the abnormalities on the chest?",name:"Abnormality for  chest inspection",type:"multiple",options:[{value:"Chest rash",label:"Chest rash"},{value:"Chest burns",label:"Chest burns"},{value:"Chest bruises",label:"Chest bruises"},{value:"Chest wounds",label:"Chest wounds"},{value:"Other chest abnormality",label:"Other chest abnormality"}],grid:{s:"12"},condition:e=>e["Physical examination"]==="Yes"&&e["Chest inspection normal"]==="No",onChange:(e,a)=>{if(!(e!=null&&e.includes("Other chest abnormality")))return{"Other chest abnormality notes":""}}},{componentType:"inputField",header:"Specify chest abnormality",name:"Other chest abnormality notes",icon:K.editPen,grid:{s:"12"},condition:e=>e["Physical examination"]==="Yes"&&e["Chest inspection normal"]==="No"&&Array.isArray(e["Abnormality for  chest inspection"])&&e["Abnormality for  chest inspection"].includes("Other chest abnormality")},{grid:{s:"12"},componentType:"Dashes"},{componentType:"radioButtonField",header:"Chest movement?",name:"Chest movements",options:[{value:"Symmetrical",label:"Symmetrical"},{value:"Asymmetrical",label:"Asymmetrical"}],grid:{s:"12"},condition:e=>e["Physical examination"]==="Yes"},{grid:{s:"12"},componentType:"Dashes"},{componentType:"radioButtonField",header:"Heart sounds normal?",name:"Heart sounds normal",options:[{value:"Yes",label:"Yes"},{value:"No",label:"No"}],grid:{s:"12"},condition:e=>e["Physical examination"]==="Yes",onChange:(e,a)=>{if(e==="Yes")return{"Heart sounds abnormality":[]}}},{componentType:"checkboxField",header:"What are the abnormalities on the heart sounds?",name:"Heart sounds abnormality",type:"multiple",options:[{value:"Loud P2",label:"Loud P2"},{value:"Splitting P2",label:"Splitting P2"},{value:"Gallop rhythm",label:"Gallop rhythm"},{value:"Murmur",label:"Murmur"}],grid:{s:"12"},condition:e=>e["Physical examination"]==="Yes"&&e["Heart sounds normal"]==="No"},{grid:{s:"12"},componentType:"Dashes"},{componentType:"radioButtonField",header:"Breath sounds normal?",name:"Breath sounds normal",options:[{value:"Yes",label:"Yes"},{value:"No",label:"No"}],grid:{s:"12"},condition:e=>e["Physical examination"]==="Yes",onChange:(e,a)=>{if(e==="Yes")return{"Breath sounds abnormality":[],"Abnormalities when added":[]}}},{componentType:"checkboxField",header:"What are the abnormalities on the breath sounds?",name:"Breath sounds abnormality",type:"multiple",options:[{value:"Absent",label:"Absent"},{value:"Reduced",label:"Reduced"},{value:"Added",label:"Added"}],grid:{s:"12"},condition:e=>e["Physical examination"]==="Yes"&&e["Breath sounds normal"]==="No",onChange:(e,a)=>{if(!(e!=null&&e.includes("Added")))return{"Abnormalities when added":[]}}},{componentType:"checkboxField",header:"What are the abnormalities on the breath sounds are Added?",name:"Abnormalities when added",type:"multiple",options:[{value:"Crackles",label:"Crackles"},{value:"Wheezes",label:"Wheezes"},{value:"Bronchial",label:"Bronchial"},{value:"Crepitations",label:"Crepitations"}],grid:{s:"12"},condition:e=>e["Physical examination"]==="Yes"&&e["Breath sounds normal"]==="No"&&Array.isArray(e["Breath sounds abnormality"])&&e["Breath sounds abnormality"].includes("Added")},{grid:{s:"12"},componentType:"Dashes"},{componentType:"radioButtonField",header:"Abdominal inspection normal?",name:"Abdominal inspection normal",options:[{value:"Yes",label:"Yes"},{value:"No",label:"No"}],grid:{s:"12"},condition:e=>e["Physical examination"]==="Yes",onChange:(e,a)=>{if(e==="Yes")return{"Abdominal inspection abnormality":[],"Other abdominal abnormality notes":""}}},{componentType:"checkboxField",header:"What are the abnormalities after Abdominal inspection?",name:"Abdominal inspection abnormality",type:"multiple",options:[{value:"Abdominal distension",label:"Abdominal distension"},{value:"Abdominal rash",label:"Abdominal rash"},{value:"Abdominal wounds",label:"Abdominal wounds"},{value:"Laceration",label:"Laceration"},{value:"Abdominal bruises",label:"Abdominal bruises"},{value:"Abdominal burns",label:"Abdominal burns"},{value:"Other abdominal abnormality",label:"Other abdominal abnormality"}],grid:{s:"12"},condition:e=>e["Physical examination"]==="Yes"&&e["Abdominal inspection normal"]==="No",onChange:(e,a)=>{if(!(e!=null&&e.includes("Other abdominal abnormality")))return{"Other abdominal abnormality notes":""}}},{componentType:"inputField",header:"Specify abdominal abnormality",name:"Other abdominal abnormality notes",icon:K.editPen,grid:{s:"12"},condition:e=>e["Physical examination"]==="Yes"&&e["Abdominal inspection normal"]==="No"&&Array.isArray(e["Abdominal inspection abnormality"])&&e["Abdominal inspection abnormality"].includes("Other abdominal abnormality")},{grid:{s:"12"},componentType:"Dashes"},{componentType:"radioButtonField",header:"Abdominal auscultation normal?",name:"Abdominal auscultation normal",options:[{value:"Yes",label:"Yes"},{value:"No",label:"No"}],grid:{s:"12"},condition:e=>e["Physical examination"]==="Yes",onChange:(e,a)=>{if(e==="Yes")return{"Abdominal auscultation abnormality":[],"Other abdominal auscultation abnormality notes":"","Bowel sounds abnormality":[]}}},{componentType:"checkboxField",header:"What are the abdominal auscultation abnormalities?",name:"Abdominal auscultation abnormality",type:"multiple",options:[{value:"Bruit",label:"Bruit"},{value:"Hyperactive",label:"Hyperactive"},{value:"Reduced bowel sounds",label:"Reduced bowel sounds"},{value:"Other",label:"Other"}],grid:{s:"12"},condition:e=>e["Physical examination"]==="Yes"&&e["Abdominal auscultation normal"]==="No",onChange:(e,a)=>{const f={};return e!=null&&e.includes("Reduced bowel sounds")||(f["Bowel sounds abnormality"]=[]),e!=null&&e.includes("Other")||(f["Other abdominal auscultation abnormality notes"]=""),f}},{componentType:"checkboxField",header:"What are the abnormalities on bowel sounds?",name:"Bowel sounds abnormality",type:"multiple",options:[{value:"Reduced bowel sounds",label:"Reduced bowel sounds"},{value:"Abdominal auscultation absent",label:"Abdominal auscultation absent"}],grid:{s:"12"},condition:e=>e["Physical examination"]==="Yes"&&e["Abdominal auscultation normal"]==="No"&&Array.isArray(e["Abdominal auscultation abnormality"])&&e["Abdominal auscultation abnormality"].includes("Reduced bowel sounds")},{componentType:"inputField",header:"Specify abdominal auscultation abnormality",name:"Other abdominal auscultation abnormality notes",icon:K.editPen,grid:{s:"12"},condition:e=>e["Physical examination"]==="Yes"&&e["Abdominal auscultation normal"]==="No"&&Array.isArray(e["Abdominal auscultation abnormality"])&&e["Abdominal auscultation abnormality"].includes("Other")},{grid:{s:"12"},componentType:"Dashes"},{componentType:"radioButtonField",header:"Abdominal palpation normal?",name:"Abdominal palpation normal",options:[{value:"Yes",label:"Yes"},{value:"No",label:"No"}],grid:{s:"12"},condition:e=>e["Physical examination"]==="Yes",onChange:(e,a)=>{if(e==="Yes")return{"Abdominal palpation abnormality":[],"Other abdominal palpation abnormality notes":""}}},{componentType:"checkboxField",header:"What are the abdominal palpation abnormalities?",name:"Abdominal palpation abnormality",type:"multiple",options:[{value:"Tenderness",label:"Tenderness"},{value:"Splenomegaly",label:"Splenomegaly"},{value:"Kidney ballotable",label:"Kidney ballotable"},{value:"Other masses",label:"Other masses"}],grid:{s:"12"},condition:e=>e["Physical examination"]==="Yes"&&e["Abdominal palpation normal"]==="No",onChange:(e,a)=>{if(!(e!=null&&e.includes("Other masses")))return{"Other abdominal palpation abnormality notes":""}}},{componentType:"inputField",header:"Specify abdominal palpation abnormality",name:"Other abdominal palpation abnormality notes",icon:K.editPen,grid:{s:"12"},condition:e=>e["Physical examination"]==="Yes"&&e["Abdominal palpation normal"]==="No"&&Array.isArray(e["Abdominal palpation abnormality"])&&e["Abdominal palpation abnormality"].includes("Other masses")},{grid:{s:"12"},componentType:"Dashes"},{componentType:"radioButtonField",header:"Genital examination normal?",name:"Genital examination normal",options:[{value:"Yes",label:"Yes"},{value:"No",label:"No"}],grid:{s:"12"},condition:e=>e["Physical examination"]==="Yes",onChange:(e,a)=>{if(e==="Yes")return{"Genital examination abnormality":[],"Urethral meatus abnormalities":[],"Vulva inspection abnormalities":[],"Other genital abnormality notes":""}}},{componentType:"checkboxField",header:"What are the abnormalities after genital examination?",name:"Genital examination abnormality",type:"multiple",options:[{value:"Warts",label:"Warts"},{value:"Vesicles",label:"Vesicles"},{value:"Growths",label:"Growths"},{value:"Genital sores",label:"Genital sores"},{value:"Scrotal swelling",label:"Scrotal swelling",disabled:N},{value:"Tastes swelling",label:"Tastes swelling",disabled:N},{value:"Urethral meatus abnormal",label:"Urethral meatus abnormal",disabled:N},{value:"Vulva examination",label:"Vulva examination",disabled:A},{value:"Visible bleeding",label:"Visible bleeding",disabled:A},{value:"Other genital abnormalities",label:"Other genital abnormalities"}],grid:{s:"12"},condition:e=>e["Physical examination"]==="Yes"&&e["Genital examination normal"]==="No",onChange:(e,a)=>{const f={};return e!=null&&e.includes("Urethral meatus abnormal")||(f["Urethral meatus abnormalities"]=[]),e!=null&&e.includes("Vulva examination")||(f["Vulva inspection abnormalities"]=[]),e!=null&&e.includes("Other genital abnormalities")||(f["Other genital abnormality notes"]=""),f}},{componentType:"checkboxField",header:"What are the urethral meatus abnormalities for the patient?",name:"Urethral meatus abnormalities",type:"multiple",options:[{value:"Oedema",label:"Oedema"},{value:"Abnormal discharge",label:"Abnormal discharge"},{value:"Bleeding",label:"Bleeding"}],grid:{s:"12"},condition:e=>e["Physical examination"]==="Yes"&&e["Genital examination normal"]==="No"&&A&&Array.isArray(e["Genital examination abnormality"])&&e["Genital examination abnormality"].includes("Urethral meatus abnormal")},{componentType:"checkboxField",header:"What Vulva abnormalities does the patient have?",name:"Vulva inspection abnormalities",type:"multiple",options:[{value:"Oedematous cervix",label:"Oedematous cervix"},{value:"Abnormal vaginal discharge",label:"Abnormal vaginal discharge"}],grid:{s:"12"},condition:e=>e["Physical examination"]==="Yes"&&e["Genital examination normal"]==="No"&&N&&Array.isArray(e["Genital examination abnormality"])&&e["Genital examination abnormality"].includes("Vulva examination")},{componentType:"inputField",header:"Specify genital abnormality",name:"Other genital abnormality notes",icon:K.editPen,grid:{s:"12"},condition:e=>e["Physical examination"]==="Yes"&&e["Genital examination normal"]==="No"&&Array.isArray(e["Genital examination abnormality"])&&e["Genital examination abnormality"].includes("Other genital abnormalities")},{grid:{s:"12"},componentType:"Dashes"},{componentType:"radioButtonField",header:"Extremities normal?",name:"Extremities normal",options:[{value:"Yes",label:"Yes"},{value:"No",label:"No"}],grid:{s:"12"},condition:e=>e["Physical examination"]==="Yes",onChange:(e,a)=>{if(e==="Yes")return{"Abnormality for extremities":[],"Other extremities abnormalities notes":""}}},{componentType:"checkboxField",header:"What are the abnormalities for extremities?",name:"Abnormality for extremities",type:"multiple",options:[{value:"Cold and clammy",label:"Cold and clammy"},{value:"Generalized oedema",label:"Generalized oedema"},{value:"Fracture",label:"Fracture"},{value:"Extremity burns",label:"Extremity burns"},{value:"Extremity rash",label:"Extremity rash"},{value:"Deformity",label:"Deformity"},{value:"Finger clubbing",label:"Finger clubbing"},{value:"Decreased Power",label:"Decreased Power"},{value:"Decreased Sensation",label:"Decreased Sensation"},{value:"Other extremities abnormality",label:"Other extremities abnormality"}],grid:{s:"12"},condition:e=>e["Physical examination"]==="Yes"&&e["Extremities normal"]==="No",onChange:(e,a)=>{if(!(e!=null&&e.includes("Other extremities abnormality")))return{"Other extremities abnormalities notes":""}}},{componentType:"inputField",header:"Specify extremity abnormality",name:"Other extremities abnormalities notes",icon:K.editPen,grid:{s:"12"},condition:e=>e["Physical examination"]==="Yes"&&e["Extremities normal"]==="No"&&Array.isArray(e["Abnormality for extremities"])&&e["Abnormality for extremities"].includes("Other extremities abnormality")}]});return{resetForm:m,physicalExaminationFormSection:v}},Jn=oe({__name:"PhysicalExamination",setup(d,{expose:u}){const m=Kn(),v=o(null),P=o(0),A=Oe(),{patient:N}=we(A);fe(()=>{var a;return(a=N.value)==null?void 0:a.patientID},async(a,f)=>{a&&a!==f&&(P.value++,await me())});const g=async()=>{if(!v.value)return console.error("Form reference is not available"),!1;if(v.value.validateForm())return pe("Please fix validation errors before submitting"),!1;const f=v.value.getFormValues(),F=await n(f);return F.length===0?(pe("No physical examination data to save"),!1):(await W.addObsToEncounterPatient(F,X.PHYSICAL_EXAMINATION),P.value++,await me(),$e("Physical examination saved successfully"),!0)},n=async a=>{const f=[];for(const[F,C]of Object.entries(a))!C||C===!1||C===""||(typeof C=="boolean"&&C===!0?f.push(await W.buildValueText("Physical examination finding",F)):typeof C=="string"&&f.push(await W.buildValueText(F,C)));return f};_e(async()=>{await me()});const e=J(()=>m.physicalExaminationFormSection.value);return u({validateForm:()=>{var a;return(a=v.value)==null?void 0:a.validateForm()},onSubmit:g,resetForm:()=>{P.value++}}),(a,f)=>(c(),O(Je,{formData:e.value,ref_key:"formRef",ref:v,key:P.value},null,8,["formData"]))}}),Xn={key:0},Qn={class:"ion-padding",slot:"content"},Zn={class:"nav-buttons"},eo={class:"ion-padding",slot:"content"},ao={class:"nav-buttons"},to={class:"ion-padding",slot:"content"},no={class:"nav-buttons"},oo={class:"ion-padding",slot:"content"},so={class:"nav-buttons"},io={class:"ion-padding",slot:"content"},lo={class:"nav-buttons"},ro={class:"ion-padding",slot:"content"},co={class:"nav-buttons"},uo=oe({__name:"ClinicalAssessment",setup(d,{expose:u}){const m=o("loc"),v=o(0),P=o(!1),A=o(!1),N=new Ca,g=Oe(),n=()=>{v.value++},e=o(null),a=o(null),f=o(null),F=o(null),C=o(null),y=o(null),B=[{id:"loc",label:"Level of consciousness",show:!0},{id:"pc",label:"Presenting complaints",show:!0},{id:"pbs",label:"Pregnancy and breastfeeding status",show:()=>N.isChildBearing()},{id:"pmh",label:"Past medical history",show:!0},{id:"al",label:"Allergies",show:!0},{id:"pe",label:"Physical examination",show:!0}];async function V(){const _=Ee.getSessionDate(),i=[X.ASSESSMENT,X.PRESENTING_COMPLAINTS,X.PAST_MEDICAL_HISTORY,X.PHYSICAL_EXAMINATION,X.MEDICAL_HISTORY,X.PREGNANCY_STATUS];let S=!1;for(const L of i)try{const ce=await W.getObsByEncounterIdAndDate(L);if(ce&&ce.some(he=>he.obs_datetime?Ye.toStandardHisFormat(he.obs_datetime)===Ye.toStandardHisFormat(_):!1)){S=!0;break}}catch(ce){console.error("Error checking observations for encounter type ".concat(L,":"),ce)}P.value=S}_e(V),fe(()=>g.patient,V);const M=J(()=>P.value),E=J(()=>B.filter(_=>typeof _.show=="function"?_.show():_.show)),$=_=>{const i=B.find(S=>S.id===_);return i?typeof i.show=="function"?i.show():i.show:!1},Y=_=>E.value.findIndex(i=>i.id===_),q=_=>{const i=Y(_);i>0&&(m.value=E.value[i-1].id)},z=_=>{const S=Y(_)+1;S<E.value.length?m.value=E.value[S].id:(m.value="",n())};return u({onSubmit:async()=>{const _=[{ref:e,name:"PresentingComplaints"},{ref:a,name:"LevelOfConsciousness"},{ref:f,name:"PastMedicalHistory"},{ref:C,name:"PregnancyBreastfeeding"},{ref:y,name:"PhysicalExamination"},{ref:F,name:"Allergies"}];for(const i of _)if(i.ref.value&&typeof i.ref.value.onSubmit=="function")try{const S=await i.ref.value.onSubmit();if(i.name==="PresentingComplaints"&&S===!1)return}catch(S){if(console.error("Error calling ".concat(i.name," onSubmit:"),S),i.name==="PresentingComplaints")return}else console.log("".concat(i.name," component ref not available or no onSubmit method"))}}),(_,i)=>(c(),k(Q,null,[M.value?(c(),k("div",Xn,[t(s(ne),{lines:"none"},{default:l(()=>[t(s(re),null,{default:l(()=>[...i[14]||(i[14]=[H("Switch between Capture Mode and Summary Mode",-1)])]),_:1}),t(s(et),{checked:A.value,onIonChange:i[0]||(i[0]=S=>A.value=S.detail.checked),slot:"end"},null,8,["checked"])]),_:1}),A.value?h("",!0):(c(),O(qn,{key:v.value}))])):h("",!0),!M.value||A.value?(c(),O(s(de),{key:1,style:{width:"100%"}},{default:l(()=>[t(s(ze),{value:m.value,"onUpdate:value":i[13]||(i[13]=S=>m.value=S),ref:"accordionGroup",class:"previousView"},{default:l(()=>[$("loc")?(c(),O(s(be),{key:0,value:"loc",class:"_card"},{default:l(()=>[t(s(ne),{slot:"header",color:"light"},{default:l(()=>[t(s(re),{class:"previousLabel"},{default:l(()=>[...i[15]||(i[15]=[H("Level of consciousness",-1)])]),_:1})]),_:1}),r("div",Qn,[t(kt,{"is-active":m.value==="loc",ref_key:"levelOfConsciousnessFormRef",ref:a,onDataSaved:n},null,8,["is-active"]),r("div",Zn,[Y("loc")>0?(c(),O(s(ie),{key:0,fill:"outline",onClick:i[1]||(i[1]=le(S=>q("loc"),["stop"]))},{default:l(()=>[...i[16]||(i[16]=[H(" Back ",-1)])]),_:1})):h("",!0),t(s(ie),{fill:"outline",onClick:i[2]||(i[2]=le(S=>z("loc"),["stop"]))},{default:l(()=>[H(x(Y("loc")<E.value.length-1?"Next":"Finish"),1)]),_:1})])])]),_:1})):h("",!0),$("pc")?(c(),O(s(be),{key:1,value:"pc",class:"_card"},{default:l(()=>[t(s(ne),{slot:"header",color:"light"},{default:l(()=>[t(s(re),{class:"previousLabel"},{default:l(()=>[...i[17]||(i[17]=[H(" Presenting complaints - ",-1),r("span",{class:"required-badge"},"Required",-1)])]),_:1})]),_:1}),r("div",eo,[t(qt,{"is-active":m.value==="pc",onDataSaved:n,ref_key:"presentingComplaintsFormRef",ref:e},null,8,["is-active"]),r("div",ao,[Y("pc")>0?(c(),O(s(ie),{key:0,fill:"outline",onClick:i[3]||(i[3]=le(S=>q("pc"),["stop"]))},{default:l(()=>[...i[18]||(i[18]=[H(" Back ",-1)])]),_:1})):h("",!0),t(s(ie),{fill:"outline",onClick:i[4]||(i[4]=le(S=>z("pc"),["stop"]))},{default:l(()=>[H(x(Y("pc")<E.value.length-1?"Next":"Finish"),1)]),_:1})])])]),_:1})):h("",!0),$("pbs")?(c(),O(s(be),{key:2,value:"pbs",class:"_card"},{default:l(()=>[t(s(ne),{slot:"header",color:"light"},{default:l(()=>[t(s(re),{class:"previousLabel"},{default:l(()=>[...i[19]||(i[19]=[H("Pregnancy and breastfeeding status",-1)])]),_:1})]),_:1}),r("div",to,[t(Wn,{"is-active":m.value==="pbs",ref_key:"pregnancyBreastfeedingFormRef",ref:C,onDataSaved:n},null,8,["is-active"]),r("div",no,[Y("pbs")>0?(c(),O(s(ie),{key:0,fill:"outline",onClick:i[5]||(i[5]=le(S=>q("pbs"),["stop"]))},{default:l(()=>[...i[20]||(i[20]=[H(" Back ",-1)])]),_:1})):h("",!0),t(s(ie),{fill:"outline",onClick:i[6]||(i[6]=le(S=>z("pbs"),["stop"]))},{default:l(()=>[H(x(Y("pbs")<E.value.length-1?"Next":"Finish"),1)]),_:1})])])]),_:1})):h("",!0),$("pmh")?(c(),O(s(be),{key:3,value:"pmh",class:"_card"},{default:l(()=>[t(s(ne),{slot:"header",color:"light"},{default:l(()=>[t(s(re),{class:"previousLabel"},{default:l(()=>[...i[21]||(i[21]=[H("Past medical history",-1)])]),_:1})]),_:1}),r("div",oo,[t(zn,{"is-active":m.value==="pmh",ref_key:"pastMedicalHistoryFormRef",ref:f,onDataSaved:n},null,8,["is-active"]),r("div",so,[Y("pmh")>0?(c(),O(s(ie),{key:0,fill:"outline",onClick:i[7]||(i[7]=le(S=>q("pmh"),["stop"]))},{default:l(()=>[...i[22]||(i[22]=[H(" Back ",-1)])]),_:1})):h("",!0),t(s(ie),{fill:"outline",onClick:i[8]||(i[8]=le(S=>z("pmh"),["stop"]))},{default:l(()=>[H(x(Y("pmh")<E.value.length-1?"Next":"Finish"),1)]),_:1})])])]),_:1})):h("",!0),$("al")?(c(),O(s(be),{key:4,value:"al",class:"_card"},{default:l(()=>[t(s(ne),{slot:"header",color:"light"},{default:l(()=>[t(s(re),{class:"previousLabel"},{default:l(()=>[...i[23]||(i[23]=[H("Allergies",-1)])]),_:1})]),_:1}),r("div",io,[t(St,{"is-active":m.value==="al",ref_key:"allergiesFormRef",ref:F,onDataSaved:n},null,8,["is-active"]),r("div",lo,[Y("al")>0?(c(),O(s(ie),{key:0,fill:"outline",onClick:i[9]||(i[9]=le(S=>q("al"),["stop"]))},{default:l(()=>[...i[24]||(i[24]=[H(" Back ",-1)])]),_:1})):h("",!0),t(s(ie),{fill:"outline",onClick:i[10]||(i[10]=le(S=>z("al"),["stop"]))},{default:l(()=>[H(x(Y("al")<E.value.length-1?"Next":"Finish"),1)]),_:1})])])]),_:1})):h("",!0),$("pe")?(c(),O(s(be),{key:5,value:"pe",class:"_card"},{default:l(()=>[t(s(ne),{slot:"header",color:"light"},{default:l(()=>[t(s(re),{class:"previousLabel"},{default:l(()=>[...i[25]||(i[25]=[H("Physical examination",-1)])]),_:1})]),_:1}),r("div",ro,[t(Jn,{"is-active":m.value==="pe",ref_key:"physicalExaminationFormRef",ref:y,onDataSaved:n},null,8,["is-active"]),r("div",co,[Y("pe")>0?(c(),O(s(ie),{key:0,fill:"outline",onClick:i[11]||(i[11]=le(S=>q("pe"),["stop"]))},{default:l(()=>[...i[26]||(i[26]=[H(" Back ",-1)])]),_:1})):h("",!0),t(s(ie),{fill:"outline",onClick:i[12]||(i[12]=le(S=>z("pe"),["stop"]))},{default:l(()=>[H(x(Y("pe")<E.value.length-1?"Next":"Finish"),1)]),_:1})])])]),_:1})):h("",!0)]),_:1},8,["value"])]),_:1})):h("",!0)],64))}}),ls=Ae(uo,[["__scopeId","data-v-f7298259"]]),mo={class:"allergies-section"},po={class:"allergies-container"},ho={class:"medication-section"},fo={class:"medication-content"},yo={key:0,class:"add-medication-form"},vo={class:"form-group"},bo={class:"option-label"},go={key:0,class:"error-message"},_o={class:"form-row"},Co={class:"form-group"},Do={key:0,class:"error-message"},ko={class:"form-group"},wo={key:0,class:"error-message"},Ao={class:"form-group"},Oo={key:0,class:"error-message"},xo={class:"action-buttons"},Po={class:"notes-section"},So={class:"notes-content"},To={class:"notes-input-container"},No={class:"ion-padding",slot:"content"},Io={class:"notes-timeline"},Eo={key:0,class:"note-entry"},Fo={class:"note-date"},Ho={class:"note-content"},Bo={class:"ion-padding",slot:"content"},Mo={class:"note-date"},Vo={class:"note-content"},Yo=oe({watch:{},name:"xxxComponent"}),$o=oe({...Yo,setup(d){const u=K,m=It,v=o(!1),P=o(!1),A=o(!0),N=o(0),g=o(""),n=o(!1),e=o(),a=o(!1),f=o(""),F=o(""),C=o(""),y=o(""),B=o(""),V=o(""),M="Add new medication",E=Te(),$=_a(),Y=J(()=>$.selectedMedicalAllergiesList),q=J(()=>E.selectedMedicalDrugsList),z=J(()=>E.partialOPDdrugList),T=J(()=>E.nonPharmalogicalTherapyAndOtherNotes),_=["first","second","third"],i=o(),S=o(),L=o(),ce=o(!1),he=o(!1),xe=o("Show more notes"),Fe=o(),Re=o(),ye=o(),Pe=J(()=>E.editingDrugItem),He=o("Select a route"),D=o(!1),I=o("Select frequency"),R=o(!1),se=o("Select drug"),Ue=o(!1),ee=o(),ae=o(),ve=o(),Ne=o([]),ka=o([{concept_id:11797,name:"Buccal",concept_name_id:null,id:1769},{concept_id:11794,name:"Intradermal",concept_name_id:null,id:6284},{concept_id:11795,name:"Intramuscular (IM)",concept_name_id:null,id:6285},{concept_id:11799,name:"Intraosseous",concept_name_id:null,id:6286},{concept_id:11793,name:"Intravenous (IV)",concept_name_id:null,id:6295},{concept_id:3327,name:"Oral",concept_name_id:null,id:8686},{concept_id:11800,name:"Other method of prescription",concept_name_id:null,id:8920},{concept_id:11792,name:"Rectally",concept_name_id:null,id:10785},{concept_id:11798,name:"Subcutaneous",concept_name_id:null,id:12342},{concept_id:11796,name:"Sublingual",concept_name_id:null,id:12344},{concept_id:11792,name:"Rectally",concept_name_id:null,id:14078},{concept_id:11793,name:"Intravenous (IV)",concept_name_id:null,id:14079},{concept_id:11794,name:"Intradermal",concept_name_id:null,id:14080},{concept_id:11795,name:"Intramuscular (IM)",concept_name_id:null,id:14081},{concept_id:11796,name:"Sublingual",concept_name_id:null,id:14082},{concept_id:11797,name:"Buccal",concept_name_id:null,id:14083},{concept_id:11798,name:"Subcutaneous",concept_name_id:null,id:14084},{concept_id:11799,name:"Intraosseous",concept_name_id:null,id:14085},{concept_id:11800,name:"Other method of prescription",concept_name_id:null,id:14086}]),wa=J(()=>Ne.value.length?Ne.value:ka.value);function Aa(b){ee.value=b}async function Oa(){return await Et()}async function xa(b=5,p=1e3){let w=0;for(;w<b&&(Ne.value=await Oa(),!(Ne.value.length>0));)w++,await new Promise(U=>setTimeout(U,p));Ne.value.length===0&&console.warn("Failed to fetch route list after maximum retries.")}_e(async()=>{const b=new Ft,{previousDrugPrescriptions:p,previousClinicalNotes:w,previousDrugAllergies:U}=await b.getPatientEncounters();i.value=p,S.value=Object.entries(w)[0];const[,...G]=Object.entries(w);L.value=G,Fe.value=Object.entries(U)[0];const[,...Z]=Object.entries(U);Re.value=Z,await xa()}),fe(()=>F.value,async b=>{Ia()}),fe(()=>C.value,async b=>{Xe()});function Pa(){if(De.isEmpty(ee.value)==!0)return D.value=!0,!1;if(De.isEmpty(ee.value)==!1)return D.value=!1,!0}function Sa(){if(De.isEmpty(ae.value)==!0)return R.value=!0,!1;if(De.isEmpty(ae.value)==!1)return R.value=!1,!0}function Ta(){if(De.isEmpty(ve.value)==!0)return Ue.value=!0,!1;if(De.isEmpty(ve.value)==!1)return Ue.value=!1,!0}function Na(){A.value=!A.value,v.value=!0,n.value=!1,a.value=!1}async function Ia(){return ea(F.value)?n.value=!1:(g.value="please enter a number",n.value=!0),n.value}async function Xe(){return ea(C.value)?a.value=!1:(e.value="please enter a number",a.value=!0),a.value}async function Qe(){const b=await Xe(),p=Sa(),w=Ta(),U=Pa();return!b&&p==!0&&w==!0&&U==!0}function Ea(b){ae.value=b}async function Ze(){try{const b=()=>ye.value.dose_strength!=null&&ye.value.dose_strength?Math.trunc(ye.value.dose_strength):1;if(Pe.value!==null){if(!await Qe()){pe("Please enter correct data values",4e3);return}const w=Ee.getSessionDate(),U=aa(w,parseInt(C.value));let G=!1;Le(ye.value)==!0&&(G=!0);const Z={drugName:f.value,dose:b(),frequency:ae.value.label,frequency_code:ae.value.code,duration:C.value,prescription:U,drug_id:V.value,units:B.value,route_concept_id:ee.value.concept_id,route_name:ee.value.name,highlightbackground:G},qe=Te();console.log(qe.setSelectedMedicalDrugsList([Z])),qe.editingDrugItem=null,A.value=!0}else{if(!await Qe()){pe("Please enter correct data values",4e3);return}Ua();const w=Ee.getSessionDate(),U=aa(w,parseInt(C.value));let G=!1;Le(ye.value)==!0&&(G=!0);const Z={drugName:f.value,dose:b(),frequency:ae.value.label,frequency_code:ae.value.code,duration:C.value,prescription:U,drug_id:V.value,units:B.value,route_concept_id:ee.value.concept_id,route_name:ee.value.name,highlightbackground:G};Te().setSelectedMedicalDrugsList([Z])}V.value="",f.value="",F.value="",ae.value=null,C.value="",y.value="",N.value++,ve.value=null,ee.value=null}catch(b){console.error("Error saving data:",b)}}async function Fa(b){const p=b,G=await ht.getOfflineOPDDrugs({name:p,page:1,page_size:10});G.map(Z=>({label:Z.name,value:Z.name,other:Z})),E.setPartialOPDdrugList(G)}function Le(b){const p=[];return Y.value.forEach(U=>{U.selected&&p.push(U.concept_id)}),Ha([b],p)==!0?(pe("Client is allergic to the selected medication",4e6),!0):!1}function Ha(b,p){try{return b.some(w=>p.includes(w.concept_id))}catch(w){return!1}}function Ba(b){b&&(f.value=b.name,V.value=b.drug_id,B.value=b.units,ye.value=b,Le(b))}function Ma(b){const p=q.value[b],w=Te();w.removeDrugById(p.drug_id),w.editingDrugItem=p,V.value="",f.value="",F.value="",ae.value=null,C.value="",y.value="",ve.value=null,ee.value=null,V.value=p.drug_id,f.value=p.drugName,F.value=p.dose,ae.value={label:p.frequency,code:p.frequency_code},C.value=p.duration,y.value=p.prescription;const U=z.value.find(G=>G.name===p.drugName);U&&(ve.value=U),ee.value={concept_id:p.route_concept_id,name:p.route_name},A.value=!1,N.value++}function Va(){if(Pe.value!==null){V.value="",f.value="",F.value="",ae.value=null,C.value="",y.value="",ve.value=null,ee.value=null;const b=Te();b.setSelectedMedicalDrugsList([Pe.value]),b.editingDrugItem=null}A.value=!0,N.value++}function Ya(b){q.value.splice(b,1),N.value++,pe("you have removed a drug from list",6e3)}function $a(b){let p=b.target.value;Ra(p)}function Ra(b){Te().setNonPharmalogicalTherapyAndOtherNotes(b)}function ea(b){return/^[0-9]+$/.test(b)}function aa(b,p){const w=new Date(b);w.setDate(w.getDate()+p);const U=w.getFullYear(),G=String(w.getMonth()+1).padStart(2,"0"),Z=String(w.getDate()).padStart(2,"0");return"".concat(U,"-").concat(G,"-").concat(Z)}function Ua(){v.value=!1,P.value=!0,A.value=!0}function La(b){_.filter(w=>w!==b.detail.value);const p=b.detail.value;p!==void 0?p=="third"&&(xe.value="Show less notes",he.value=!ce.value):(xe.value="Show more notes",he.value=!ce.value)}function qa(b){return b[1]}function Ga(b){(b.key==="Enter"||b.key==="ArrowDown")&&(b.preventDefault(),Ze())}const Se=J(()=>[{showAddItemButton:!0,addItemButton:!0,name:Pe.value!==null?"Update":"ADD",fn:Ze},{showAddItemButton:!0,addItemButton:!0,name:"CANCEL",fn:Wa}]),Wa=async()=>{mt(pt,{class:"otherVitalsModal"},!0,{message:"Are you sure you want to cancel?"},{cancel:U=>{},confirm:async U=>{U.detail==!0&&Va()}})};return(b,p)=>(c(),O(s(ga),null,{default:l(()=>[r("div",mo,[r("div",po,[t(Da)])]),r("div",ho,[t(s(ne),{lines:"none",class:"section-header"},{default:l(()=>[t(s(Me),{icon:s(Ke),class:"section-icon"},null,8,["icon"]),t(s(re),{class:"section-title",style:{"margin-top":"12px"}},{default:l(()=>[...p[9]||(p[9]=[H("Medication",-1)])]),_:1})]),_:1}),r("div",fo,[(c(),O(Tt,{_selectedMedicalDrugsList:q.value,onEditItem:Ma,onRemoveItem:Ya,key:N.value,class:"medication-list"},null,8,["_selectedMedicalDrugsList"])),A.value?h("",!0):(c(),k("div",yo,[r("div",vo,[p[10]||(p[10]=r("label",{class:"input-label"},"Medication",-1)),t(s(Ie),{modelValue:ve.value,"onUpdate:modelValue":[p[0]||(p[0]=w=>ve.value=w),p[1]||(p[1]=w=>Ba(w))],options:z.value,searchable:!0,"close-on-select":!0,"show-labels":!1,placeholder:"Select medication",label:"name","track-by":"drug_id",onSearchChange:p[2]||(p[2]=w=>Fa(w))},{option:l(w=>[r("div",bo,x(w.option.name),1)]),_:1},8,["modelValue","options"]),Ue.value?(c(),k("div",go,x(se.value),1)):h("",!0)]),r("div",_o,[r("div",Co,[p[11]||(p[11]=r("label",{class:"input-label"},"Route",-1)),t(s(Ie),{modelValue:ee.value,"onUpdate:modelValue":[p[3]||(p[3]=w=>ee.value=w),p[4]||(p[4]=w=>Aa(w))],options:wa.value,searchable:!0,"close-on-select":!0,"show-labels":!1,placeholder:"Select route",label:"name","track-by":"concept_id",disabled:!1},null,8,["modelValue","options"]),D.value?(c(),k("div",Do,x(He.value),1)):h("",!0)]),r("div",ko,[p[12]||(p[12]=r("label",{class:"input-label"},"Frequency",-1)),t(s(Ie),{modelValue:ae.value,"onUpdate:modelValue":[p[5]||(p[5]=w=>ae.value=w),p[6]||(p[6]=w=>Ea(w))],options:s(m),searchable:!0,"close-on-select":!0,"show-labels":!1,placeholder:"Select frequency",label:"label","track-by":"code"},null,8,["modelValue","options"]),R.value?(c(),k("div",wo,x(I.value),1)):h("",!0)]),r("div",Ao,[p[13]||(p[13]=r("label",{class:"input-label"},"Duration (days)",-1)),t(s(at),{modelValue:C.value,"onUpdate:modelValue":p[7]||(p[7]=w=>C.value=w),type:"number",inputmode:"numeric",pattern:"[0-9]*",fill:"outline",placeholder:"Enter duration",onKeydown:Ga},null,8,["modelValue"]),a.value?(c(),k("div",Oo,x(e.value),1)):h("",!0)])]),r("div",xo,[Se.value[0].addItemButton?(c(),O(ke,{key:0,name:Se.value[0].name,icon:s(va),"onClicked:btn":Se.value[0].fn,class:"save-button"},null,8,["name","icon","onClicked:btn"])):h("",!0),Se.value[1].addItemButton?(c(),O(ke,{key:1,name:Se.value[1].name,icon:s(ba),"onClicked:btn":Se.value[1].fn,class:"cancel-button"},null,8,["name","icon","onClicked:btn"])):h("",!0)])])),A.value?(c(),O(ke,{key:1,name:M,icon:s(Ve),fontWeight:"600","onClicked:btn":Na,class:"add-new-button"},null,8,["icon"])):h("",!0)])]),r("div",Po,[t(s(ne),{lines:"none",class:"section-header"},{default:l(()=>[t(s(Me),{icon:s(tt),class:"section-icon"},null,8,["icon"]),t(s(re),{class:"section-title"},{default:l(()=>[...p[14]||(p[14]=[H("Non-pharmacological therapy and other notes",-1)])]),_:1})]),_:1}),r("div",So,[t(Nt,{class:"intervention-component"}),r("div",To,[t(s(ne),{class:"notes-input-item"},{default:l(()=>[t(s(Me),{slot:"start",icon:s(u).editPen,class:"edit-icon","aria-hidden":"true"},null,8,["icon"]),t(s(nt),{modelValue:T.value,"onUpdate:modelValue":p[8]||(p[8]=w=>T.value=w),onIonInput:$a,placeholder:"Enter notes here...","auto-grow":!0,class:"notes-textarea",fill:"outline",style:{"--padding-start":"16px"}},null,8,["modelValue"])]),_:1})]),t(s(ze),{ref:"accordionGroup",class:"previous-notes"},{default:l(()=>[t(s(be),{value:"fourth","toggle-icon-slot":"start"},{default:l(()=>[t(s(ne),{slot:"header",color:"light",class:"previous-notes-header"},{default:l(()=>[t(s(re),null,{default:l(()=>[...p[15]||(p[15]=[H("Previous visit notes",-1)])]),_:1})]),_:1}),r("div",No,[r("div",Io,[(c(!0),k(Q,null,ue(S.value,(w,U)=>(c(),k(Q,{key:U},[U===1?(c(),k("div",Eo,[(c(!0),k(Q,null,ue(w,(G,Z)=>(c(),k("div",{key:Z},[r("div",Fo,x(G.date),1),r("div",Ho,x(G.notes),1)]))),128))])):h("",!0)],64))),128)),t(s(ze),{onIonChange:La},{default:l(()=>[t(s(be),{value:"third","toggle-icon-slot":"start"},{default:l(()=>[t(s(ne),{slot:"header",color:"light",class:"show-more-header"},{default:l(()=>[t(s(re),{color:"primary"},{default:l(()=>[H(x(xe.value),1)]),_:1})]),_:1}),r("div",Bo,[(c(!0),k(Q,null,ue(L.value,(w,U)=>(c(),k("div",{key:U,class:"note-entry"},[(c(!0),k(Q,null,ue(qa(w),(G,Z)=>(c(),k("div",{key:Z},[r("div",Mo,x(G.date),1),r("div",Vo,x(G.notes),1)]))),128))]))),128))])]),_:1})]),_:1})])])]),_:1})]),_:1},512)])])]),_:1}))}}),rs=Ae($o,[["__scopeId","data-v-14c793af"]]),Ro=oe({name:"xxxComponent"}),Uo=oe({...Ro,emits:["dataSaved"],setup(d,{emit:u}){const m=o(),v=o("gurdian phone number");o(!0),o(!0);const P=o(!0),A=o(),N=o();_e(async()=>{Re()});const g=[{placeHolder:{default:"Enter time of death if known"},property_name:"timeOfDeath",dataHandler:E,dataValue:o(),show_error:o(!1),error_message:"Time required",type:"time",skip_validation:!1},{placeHolder:{default:"Enter time arrived"},property_name:"timeArrived",dataHandler:$,dataValue:o(),show_error:o(!1),error_message:"Time required",type:"time",skip_validation:!1},{placeHolder:{default:"Enter time confirming death"},property_name:"timeOfDeathConfirmation",dataHandler:Y,dataValue:o(),show_error:o(!1),error_message:"Time required",skip_validation:!1}],n=[{placeHolder:{default:"Enter date of death"},property_name:"dateOfDeath",dataHandler:q,dataValue:o(),show_error:o(!1),error_message:"Date required",type:"date",skip_validation:!1},{placeHolder:{default:"Enter date arrived"},property_name:"dateArrived",dataHandler:z,dataValue:o(),show_error:o(!1),error_message:"Date required",type:"date",skip_validation:!1},{placeHolder:{default:"Enter date confirming death"},property_name:"dateOfDeathConfirmation",dataHandler:T,dataValue:o(),show_error:o(!1),error_message:"Date required",type:"date",skip_validation:!1}],e=[{lblTxt:"Was the individual pregnant at the time of death?",value:o(!1),disable_checkbox:o(!0)}],a=[{placeHolder:"Enter place of death",property_name:"placeOfDeath",dataHandler:_,dataValue:o(),show_error:o(!1),error_message:"Input required, Only letters allowed",type:"text",skip_validation:!1},{placeHolder:"Enter name of guardian",property_name:"nameOfGuardian",dataHandler:i,dataValue:o(),show_error:o(!1),error_message:"Input required, Only letters allowed",type:"text",skip_validation:!1},{placeHolder:"Enter name of person confirming death",property_name:"nameOfPersonConfirmindDeath",dataHandler:S,dataValue:o(),show_error:o(!1),error_message:"Input required, Only letters allowed",type:"text",skip_validation:!1},{placeHolder:"Enter position of the person confirming death",property_name:"positionOfthePersonConfirmingDeath",dataHandler:L,dataValue:o(),show_error:o(!1),error_message:"Input required, Only letters allowed",type:"text",skip_validation:!1},{placeHolder:"Enter medical council registration number of the person confirming death",property_name:"medicalConcilRegistrationNumberOfThePersonConfirmingDeath",dataHandler:ce,dataValue:o(),show_error:o(!1),error_message:"Input required, Only letters and numbers are allowed",type:"alphanumeric",skip_validation:!1},{placeHolder:"Other (specify)",property_name:"otherNotes",dataHandler:he,dataValue:o(),show_error:o(!1),error_message:"Input required, Only letters allowed",dissabled:P.value,type:"text",skip_validation:!0}],f=[{showAddItemButton:!0,addItemButton:!0,name:"save",btnFill:"clear",fn:ye},{showAddItemButton:!0,addItemButton:!0,name:"cancel",btnFill:"clear",fn:B}],F=o([{id:1,name:"Natural",selected:!1},{id:2,name:"Accident",selected:!1},{id:3,name:"Homicide",selected:!1},{id:4,name:"Suicide",selected:!1},{id:5,name:"Pending investigation",selected:!1},{id:6,name:"Could not be determined",selected:!1},{id:7,name:"Other - specify",selected:!1}]),C=o([{id:1,name:"Motor vehicle (passenger)",selected:!1},{id:2,name:"Motor vehicle (pedestrian)",selected:!1},{id:3,name:"Drowning",selected:!1},{id:4,name:"Other - specify",selected:!1}]),y=[{multi_Selection:!1,manner_of_death_Selection_value:o(),show_list_label:!0,unqueId:"qwerty",name_of_list:"Manner of death ",property_name:"mannerOfDeath",placeHolder:"Choose one",items:F.value,listUpdatedFN:xe,listFilteredFN:()=>{},use_internal_filter:!0,disabled:o(!1),show_error:o(!1),error_message:"selection required"},{multi_Selection:!1,show_list_label:!0,unqueId:"qwerty1hjkn",name_of_list:"How did it occur?",property_name:"howDiditOccur",placeHolder:"Choose one",items:C.value,listUpdatedFN:Fe,listFilteredFN:()=>{},use_internal_filter:!0,disabled:o(!0),show_error:o(!1),error_message:"selection required"}];function B(){M()}const V=u;function M(D={dataSaved:!0}){V("dataSaved",D)}function E(D){g[0].dataValue.value=D}function $(D){g[1].dataValue.value=D}function Y(D){g[2].dataValue.value=D}function q(D){const I={day:D.value.day,month:D.value.month,year:D.value.year,formattedDate:D.value.formattedDate};n[0].dataValue.value=I}function z(D){const I={day:D.value.day,month:D.value.month,year:D.value.year,formattedDate:D.value.formattedDate};n[1].dataValue.value=I,console.log(n[2].dataValue.value)}function T(D){const I={day:D.value.day,month:D.value.month,year:D.value.year,formattedDate:D.value.formattedDate};n[2].dataValue.value=I,console.log(n[2].dataValue.value)}function _(D){const I=D.target.value;a[0].dataValue.value=I}function i(D){const I=D.target.value;a[1].dataValue.value=I}function S(D){const I=D.target.value;a[2].dataValue.value=I}function L(D){const I=D.target.value;a[3].dataValue.value=I}function ce(D){const I=D.target.value;a[4].dataValue.value=I}function he(D){const I=D.target.value;a[5].dataValue.value=I}function xe(D){F.value.forEach(R=>R.selected=!1);const I=F.value.find(R=>R.id==D.id);y[1].disabled.value=D.name!="Accident",I.selected=!0}function Fe(D){console.log("listUpdated",D),C.value.forEach(R=>R.selected=!1);const I=C.value.find(R=>R.id==D.id);I.selected=!0}function Re(){const I=new Ca().isChildBearing;I==!0&&(e[0].disable_checkbox.value=!1),I==!1&&(e[0].disable_checkbox.value=!0)}function ye(){Ge(a),Ge(n),Ge(g),Pe();const D=De.merge(We(a),We(n),We(g),He(y[0]),He(y[1]));console.log(D)}function Pe(){const D=F.value.filter(I=>I.selected);if(D.length==0)y[0].show_error.value=!0;else if(y[0].show_error.value=!1,D[0].name=="Accident"){const I=C.value.filter(R=>R.selected);y[1].show_error.value=I.length==0}}function He(D){const I=[];let R={};return D.items.forEach(se=>{se.selected==!0&&I.push({property_name:D.property_name,name:se.name})}),I.length>0&&(R[I[0].property_name]=I[0].name),R}return(D,I)=>{const R=ge("ion-label");return c(),k(Q,null,[t(s(de),{class:"checkbox_content md"},{default:l(()=>[t(s(j),null,{default:l(()=>[t(Ce,{placeholder:a[0].placeHolder,icon:s(ot),inputValue:a[0].dataValue.value,"onUpdate:inputValue":a[0].dataHandler},null,8,["placeholder","icon","inputValue","onUpdate:inputValue"]),r("div",null,[a[0].show_error.value?(c(),O(R,{key:0,class:"error-label"},{default:l(()=>[H(x(a[0].error_message),1)]),_:1})):h("",!0)])]),_:1}),t(s(j),null,{default:l(()=>[t(fa,{place_holder:n[0].placeHolder,onDateUpDated:n[0].dataHandler,date_prop:""},null,8,["place_holder","onDateUpDated"]),r("div",null,[n[0].show_error.value?(c(),O(R,{key:0,class:"error-label"},{default:l(()=>[H(x(n[0].error_message),1)]),_:1})):h("",!0)])]),_:1})]),_:1}),t(s(de),null,{default:l(()=>[t(s(j),null,{default:l(()=>[t(je,{place_holder:g[0].placeHolder,onTimeUpDated:g[0].dataHandler,time_prop:""},null,8,["place_holder","onTimeUpDated"]),r("div",null,[g[0].show_error.value?(c(),O(R,{key:0,class:"error-label"},{default:l(()=>[H(x(g[0].error_message),1)]),_:1})):h("",!0)])]),_:1}),t(s(j))]),_:1}),t(s(de),{class:"checkbox_content md"},{default:l(()=>[t(s(j),null,{default:l(()=>[t(Ce,{placeholder:a[1].placeHolder,icon:s(pa),inputValue:a[1].dataValue.value,"onUpdate:inputValue":a[1].dataHandler},null,8,["placeholder","icon","inputValue","onUpdate:inputValue"]),r("div",null,[a[1].show_error.value?(c(),O(R,{key:0,class:"error-label"},{default:l(()=>[H(x(a[1].error_message),1)]),_:1})):h("",!0)])]),_:1}),t(s(j),null,{default:l(()=>[t(s(st),{value:e[0].value,alignment:"start",class:"ion-lblCls",disabled:e[0].disable_checkbox.value},{default:l(()=>[H(x(e[0].lblTxt),1)]),_:1},8,["value","disabled"])]),_:1})]),_:1}),t(s(de),null,{default:l(()=>[t(s(j),null,{default:l(()=>[t(Ce,{placeholder:v.value,icon:s(it),inputValue:m.value},null,8,["placeholder","icon","inputValue"])]),_:1}),t(s(j))]),_:1}),t(s(de),null,{default:l(()=>[t(s(j),null,{default:l(()=>[t(fa,{place_holder:n[1].placeHolder,onDateUpDated:n[1].dataHandler,date_prop:""},null,8,["place_holder","onDateUpDated"]),r("div",null,[n[1].show_error.value?(c(),O(R,{key:0,class:"error-label"},{default:l(()=>[H(x(n[1].error_message),1)]),_:1})):h("",!0)])]),_:1}),t(s(j),null,{default:l(()=>[t(je,{place_holder:g[1].placeHolder,onTimeUpDated:g[1].dataHandler,time_prop:""},null,8,["place_holder","onTimeUpDated"]),r("div",null,[g[1].show_error.value?(c(),O(R,{key:0,class:"error-label"},{default:l(()=>[H(x(g[1].error_message),1)]),_:1})):h("",!0)])]),_:1})]),_:1}),t(s(de),null,{default:l(()=>[t(s(j),null,{default:l(()=>[t(s(Ie),{modelValue:A.value,"onUpdate:modelValue":[I[0]||(I[0]=se=>A.value=se),I[1]||(I[1]=se=>xe(se))],multiple:!1,taggable:!1,"hide-selected":!0,"close-on-select":!0,openDirection:"bottom","tag-placeholder":"Manner of death",placeholder:"Manner of death",selectLabel:"",label:"name",searchable:!0,"track-by":"id",options:F.value},null,8,["modelValue","options"]),r("div",null,[y[0].show_error.value?(c(),O(R,{key:0,class:"error-label"},{default:l(()=>[H(x(y[0].error_message),1)]),_:1})):h("",!0)])]),_:1}),t(s(j),null,{default:l(()=>[t(s(Ie),{modelValue:N.value,"onUpdate:modelValue":[I[2]||(I[2]=se=>N.value=se),I[3]||(I[3]=se=>Fe(se))],multiple:!1,taggable:!1,"hide-selected":!0,"close-on-select":!0,openDirection:"bottom","tag-placeholder":"How did it occur?",placeholder:"How did it occur?",selectLabel:"",label:"name",disabled:y[1].disabled.value,searchable:!0,"track-by":"id",options:C.value},null,8,["modelValue","disabled","options"]),r("div",null,[y[1].show_error.value?(c(),O(R,{key:0,class:"error-label"},{default:l(()=>[H(x(y[1].error_message),1)]),_:1})):h("",!0)])]),_:1})]),_:1}),t(s(de),null,{default:l(()=>[t(s(j),null,{default:l(()=>[t(Ce,{placeholder:a[5].placeHolder,icon:s(ha),inputValue:a[5].dataValue.value,disabled:P.value,"onUpdate:inputValue":a[5].dataHandler},null,8,["placeholder","icon","inputValue","disabled","onUpdate:inputValue"]),r("div",null,[a[5].show_error.value?(c(),O(R,{key:0,class:"error-label"},{default:l(()=>[H(x(a[5].error_message),1)]),_:1})):h("",!0)])]),_:1})]),_:1}),t(s(de),null,{default:l(()=>[t(s(j),null,{default:l(()=>[t(je,{place_holder:g[2].placeHolder,onTimeUpDated:g[2].dataHandler,time_prop:""},null,8,["place_holder","onTimeUpDated"]),r("div",null,[g[2].show_error.value?(c(),O(R,{key:0,class:"error-label"},{default:l(()=>[H(x(g[2].error_message),1)]),_:1})):h("",!0)])]),_:1}),t(s(j),null,{default:l(()=>[t(Ce,{placeholder:a[2].placeHolder,icon:s(pa),inputValue:a[2].dataValue.value,"onUpdate:inputValue":a[2].dataHandler},null,8,["placeholder","icon","inputValue","onUpdate:inputValue"]),r("div",null,[a[2].show_error.value?(c(),O(R,{key:0,class:"error-label"},{default:l(()=>[H(x(a[2].error_message),1)]),_:1})):h("",!0)])]),_:1})]),_:1}),t(s(de),null,{default:l(()=>[t(s(j),null,{default:l(()=>[t(Ce,{placeholder:a[3].placeHolder,icon:s(Ke),inputValue:a[3].dataValue.value,"onUpdate:inputValue":a[3].dataHandler},null,8,["placeholder","icon","inputValue","onUpdate:inputValue"]),r("div",null,[a[3].show_error.value?(c(),O(R,{key:0,class:"error-label"},{default:l(()=>[H(x(a[3].error_message),1)]),_:1})):h("",!0)])]),_:1}),t(s(j),null,{default:l(()=>[t(Ce,{placeholder:a[4].placeHolder,icon:s(ha),inputValue:a[4].dataValue.value,"onUpdate:inputValue":a[4].dataHandler},null,8,["placeholder","icon","inputValue","onUpdate:inputValue"]),r("div",null,[a[4].show_error.value?(c(),O(R,{key:0,class:"error-label"},{default:l(()=>[H(x(a[4].error_message),1)]),_:1})):h("",!0)])]),_:1})]),_:1}),(c(),O(s(de),{key:0,class:"spc_btwn"},{default:l(()=>[f[0].addItemButton?(c(),O(ke,{key:0,name:f[0].name,fill:f[0].btnFill,icon:s(va),"onClicked:btn":f[0].fn},null,8,["name","fill","icon","onClicked:btn"])):h("",!0),f[1].addItemButton?(c(),O(ke,{key:1,name:f[1].name,fill:f[1].btnFill,icon:s(ba),"onClicked:btn":f[1].fn},null,8,["name","fill","icon","onClicked:btn"])):h("",!0)]),_:1}))],64)}}}),Lo=Ae(Uo,[["__scopeId","data-v-0aad2f08"]]),qo={class:"dash_box"},Go={key:1},Wo=oe({name:"xxxComponent"}),jo=oe({...Wo,setup(d){const u=o("No outcome created yet"),m=o(!1),v=o("please select a type"),P=o(!0),A=o(""),N=o(!0),g=o(!1),n=ft(),e=J(()=>n.outcomes),a=o(!1),f=o(!1),F=o(!1),C=o(!1),y=o(!1),B=o(!1),V=o([{name:"Admitted for short stay",selected:!1},{name:"Referred out",selected:!1},{name:"Discharged Home",selected:!1},{name:"Send to Another Clinic",selected:!1}]),M=[{multi_Selection:!1,show_list_label:!0,unqueId:"qwerty2",name_of_list:"Add new outcome",placeHolder:"Choose one",items:V.value,listUpdatedFN:E,listFilteredFN:()=>{},use_internal_filter:!0,disabled:o(!1)}];function E(i){V.value=i,V.value.forEach(S=>{S.selected==!0&&(A.value=S.name)})}_e(async()=>{Y()}),fe(()=>A.value,async i=>{a.value==!0?a.value=!1:T()}),fe(()=>e.value.length,async i=>{Y()});function $(){V.value.forEach(i=>{i.selected=!1}),A.value=""}function Y(){e.value.length>0?N.value=!1:e.value.length==0&&g.value==!1&&(N.value=!0)}function q(i){e.value.splice(i,1)}const z=i=>{};async function T(i=!0){const S=A.value;console.log(S),A.value=S;const L=A.value;L==V.value[0].name?F.value=!0:F.value=!1,L==V.value[1].name?(C.value=!0,console.log("show_discharged_options is set to true")):C.value=!1,L==V.value[2].name?(y.value=!0,console.log("show_discharged_options is set to true")):y.value=!1,L==V.value[3].name?B.value=!0:B.value=!1}function _(){f.value=!1,F.value=!1,C.value=!1,y.value=!1,$()}return(i,S)=>{const L=ge("ion-row");return c(),O(s(ga),null,{default:l(()=>[t(L,null,{default:l(()=>[t(s(j),null,{default:l(()=>[(c(),O(Ht,{key:0,"onUpdate:removeItem":q,"onUpdate:editItem":z,displayData:e.value},null,8,["displayData"]))]),_:1})]),_:1}),N.value?(c(),O(L,{key:0},{default:l(()=>[r("span",qo,x(u.value),1)]),_:1})):h("",!0),P.value?(c(),k("div",Go,[t(L,null,{default:l(()=>[t(s(j),null,{default:l(()=>[t(yt,{multiSelection:M[0].multi_Selection,show_label:M[0].show_list_label,uniqueId:M[0].unqueId,name_of_list:M[0].name_of_list,choose_place_holder:M[0].placeHolder,"items_-list":M[0].items,use_internal_filter:M[0].use_internal_filter,disabled:M[0].disabled.value,onItemListUpDated:M[0].listUpdatedFN,onItemListFiltered:M[0].listFilteredFN},null,8,["multiSelection","show_label","uniqueId","name_of_list","choose_place_holder","items_-list","use_internal_filter","disabled","onItemListUpDated","onItemListFiltered"]),r("div",null,[m.value?(c(),O(s(re),{key:0,class:"error-label"},{default:l(()=>[H(x(v.value),1)]),_:1})):h("",!0)])]),_:1})]),_:1})])):h("",!0),F.value?(c(),O(Bt,{key:2,onDataSaved:_,selected_ward_prop:"",admitted_other_props:""})):h("",!0),C.value?(c(),O(Mt,{key:3,onDataSaved:_,selected_referral_data:"",selected_other_referral_data:""})):h("",!0),y.value?(c(),O(Vt,{key:4,onDataSaved:_,selected_discharged_prop:"",selected_discharged_data:""})):h("",!0),f.value?(c(),O(Lo,{key:5,onDataSaved:_})):h("",!0),B.value?(c(),O(Yt,{key:6,onDataSaved:_})):h("",!0)]),_:1})}}}),cs=Ae(jo,[["__scopeId","data-v-fc637de7"]]);export{ls as C,cs as O,qt as P,Wn as _,Jn as a,rs as b};
