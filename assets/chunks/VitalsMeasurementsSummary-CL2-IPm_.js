import{d as Y,b2 as j,cr as q,r as i,w as _,e as f,f as h,l as z,J as G,k as C,F as Q,P as U,K as X,u as Z,b7 as S,cY as $}from"./vendor-Do41i3tR.js";import{u as tt,J as et,ap as o,H as v,b7 as at,_ as st}from"../index-MoYXGJcQ.js";import"./lodash-NJiRuGo9.js";import"./apexcharts-DB4uOJSt.js";const ot={class:"table-responsive"},nt=Y({__name:"VitalsMeasurementsSummary",setup(rt){const B=tt(),{patient:c}=j(B),M=q(),T=i(null),l=i([]),w=i(""),E=i(["Date","Weight","Height (cm)","Temperature","Pulse","SAO2","Systolic","Respiration rate","Diastolic","BMI"]),V=i({responsive:!0,select:!1,layout:{topStart:"",topEnd:"search",bottomStart:"info",bottomEnd:"paging"},ordering:!1}),y=async()=>{try{l.value=[];const r=(await et.getObsByEncounterId(6)).flatMap(e=>e.obs||[]),t=new Map;r.forEach(e=>{var a;if(e.obs_datetime){const s=e.obs_datetime.split(" ")[0];t.has(s)||t.set(s,[]),(a=t.get(s))==null||a.push(e)}});for(const[e,a]of t.entries())await k(e,a);l.value.sort((e,a)=>new Date(a[0]).getTime()-new Date(e[0]).getTime())}catch(n){console.error("Error updating vitals data:",n)}S.use($)},k=async(n,r)=>{const t=K=>{var D;const I=r.find(L=>L.concept_id===K);return(D=I==null?void 0:I.value_numeric)!=null?D:""},e=await o.getConceptID("Height (cm)"),a=await o.getConceptID("Weight (kg)"),s=await o.getConceptID("Systolic blood pressure"),p=await o.getConceptID("Diastolic blood pressure"),u=await o.getConceptID("Temperature (c)"),d=await o.getConceptID("Pulse"),O=await o.getConceptID("Blood oxygen saturation"),R=await o.getConceptID("Respiratory rate"),m=t(a),g=t(e),H=t(u),F=t(d),P=t(O),A=t(s),J=t(R),N=t(p);let b="";m&&g&&(b=await x(m,g));const W=[v.toStandardHisDisplayFormat(n),m,g,H,F,P,A,J,N,b];l.value.push(W)},x=async(n,r)=>{var t,e,a,s,p,u;if((e=(t=c.value)==null?void 0:t.personInformation)!=null&&e.gender&&((s=(a=c.value)==null?void 0:a.personInformation)!=null&&s.birthdate))try{return w.value=await at.getBMI(parseInt(String(n)),parseInt(String(r)),c.value.personInformation.gender,v.calculateAge(c.value.personInformation.birthdate,v.sessionDate())),(u=(p=w.value)==null?void 0:p.index)!=null?u:""}catch(d){return console.error("Error calculating BMI:",d),""}return""};return _(()=>M,async()=>{await y()},{deep:!0}),_(c,async()=>{await y()},{deep:!0,immediate:!0}),(n,r)=>(h(),f("div",ot,[z(Z(S),{ref_key:"dataTable",ref:T,options:V.value,data:l.value,class:"display nowrap modern-table",width:"100%"},{default:G(()=>[C("thead",null,[C("tr",null,[(h(!0),f(Q,null,U(E.value,t=>(h(),f("th",{key:t},X(t),1))),128))])])]),_:1},8,["options","data"])]))}}),ut=st(nt,[["__scopeId","data-v-7d280081"]]);export{ut as default};
