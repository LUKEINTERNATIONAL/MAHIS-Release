import{D as Ue,d as V,ah as j,G as X,E as ie,ai as ye,aj as U,_ as R,I as Y,a3 as Q,R as $e,bf as Te,aT as Ce,H as l,e as h,f as u,k as a,l as e,b6 as _e,b5 as Ae,b2 as le,J as o,Q as k,F,aV as ge,r as S,cp as Fe,w as Ne,a as re,n as Ve,P as B,K as E,u as d,cW as We,ao as ze,L as W,W as O,bD as Qe,a5 as ce,a4 as Z,a6 as ve,cq as Ke,aE as qe,m as H,O as G,p as K,bq as ee,bj as Xe,bw as Ee,aU as we,aQ as xe,N as Se,aR as Me,c as oe,aM as Ye,a2 as Ze,ax as et,d8 as tt,em as nt,en as ot,eo as st,ce as Ie,bl as at,M as it,al as se,ak as ae,b$ as lt,bv as rt,de as he,dd as ct}from"./vendor-BolvhNQv.js";import{l as te,b4 as Be,H as q,ag as ne,b6 as dt,b5 as ut,u as z,_ as x,J as pt,B as He,bd as _t,M as ue,o as gt,aQ as Re,G as mt,s as Ge,aK as ft,m as Je,V as vt,aT as ht,be as bt,bf as Dt,bg as Pe,bh as Oe,bi as be,aM as me,bj as De,bk as yt,aL as fe,K as $t,c as Ct,bl as wt,T as St}from"../index-BOg8gPmV.js";import{P as Mt}from"./patient_diagnosis_service-CN3oxQGJ.js";import{D as It}from"./DashBox-B7tnh1ym.js";import{B as pe}from"./BasicForm-BLaJvKrs.js";import{l as kt}from"./lodash-NJiRuGo9.js";import{a as Nt}from"./formatServerData-CNbKo3Xr.js";import{v as Pt}from"./group_validation-Dn3SkhAP.js";import{u as Ot}from"./ComplicationsStore-CNie8nQr.js";import{g as Lt,P as ke}from"./nonPharmaTherapyStore-Ca5ihT7Z.js";import{D as Tt,a as At,A as Ft}from"./NextAppointment-BKBZEq2F.js";const Le=Ue("NCDDiagnosisStore",{state:()=>({diagnosis:[{selectedData:[],isFinishBtn:!1,data:{rowData:[{colData:[{inputHeader:"Diagnosis",icon:te.search,value:"",name:"diagnosis",eventType:"input",required:!0,alertsErrorMassage:"",isSingleSelect:!0,trackBy:"concept_id",valueType:"coded",multiSelectData:[],id:"",validationFunctionName:"required"}]}]}}]}),actions:{setDiagnosis(t){this.diagnosis=t}}}),Vt=V({name:"Menu",components:{IonContent:Q,IonHeader:Y,IonItem:R,IonList:U,IonMenu:ye,IonTitle:ie,IonToolbar:X,List:Be},computed:{...j(z,["patient"])},data(){return{valueNumericArray:[],obsDatetime:[],graphIcon:ut(["#006401"]),listIcon:dt(["#636363"]),displayGraph:!0,orders:[],height:[],BMI:[],iconBg:{},activeWeight:[],activeHeight:[],activeBMI:[],list:[],series:[{name:"",data:[]}]}},setup(){return{checkmark:Ce,pulseOutline:Te}},async mounted(){const t=await ne.getAll(this.patient.patientID,"Primary diagnosis"),n=await ne.getAll(this.patient.patientID,"Secondary diagnosis"),g=await ne.getAll(this.patient.patientID,"Attempted/ Differential diagnosis"),f=[...t||[],...n||[],...g||[]],b=kt.isEmpty(f)?[]:Promise.all(f.map(async s=>({name:await ne.getConceptName(s.value_coded),obs_date:s.obs_datetime})));this.setListData(await b)},methods:{dismiss(){$e.dismiss()},handleIcon(){},setActivClass(t){this.activeHeight="",this.activeBMI="",this.activeWeight="",t=="height"?this.activeHeight="_active":t=="weight"?this.activeWeight="_active":t=="BMI"&&(this.activeBMI="_active")},setListData(t){this.list=[],this.list.push({actionBtn:!1,class:"col_background",header:!0,minHeight:"--min-height: 25px;",display:["Date","Diagnosis","Notes"]}),t.forEach(n=>{this.list.push({actionBtn:!1,minHeight:"--min-height: 25px;",class:"col_background",display:[q.toStandardHisFormat(n.obs_date),n.name,""]})})}}}),Et={class:"modal_wrapper"};function xt(t,n,g,f,b,s){const i=l("list");return u(),h("div",Et,[a("div",null,[e(i,{listData:t.list},null,8,["listData"])])])}const Bt=x(Vt,[["render",xt],["__scopeId","data-v-5665ae64"]]),Ht=V({name:"Menu",components:{IonContent:Q,IonHeader:Y,IonItem:R,IonList:U,IonMenu:ye,IonTitle:ie,IonToolbar:X,IonInput:le,IonPopover:Ae,DashBox:It,SelectionPopover:_t,BasicInputField:He,List:Be,BasicForm:pe,DynamicButton:pt,previousDiagnosis:Bt,DataTable:_e},data(){return{iconsContent:te,no_item:!1,search_item:!1,display_item:!1,addItemButton:!0,selectedText:"",conditionStatus:"",data:[],diagnosisData:[],popoverOpen:!1,event:"",selectedCondition:""}},setup(){return{checkmark:Ce,pulseOutline:Te}},computed:{...j(Le,["diagnosis"]),...j(z,["patient"])},async mounted(){await this.getDiagnosis("")},methods:{async getDiagnosis(t){let n=await Mt.getDiagnosis(t,1,15);ue(this.diagnosis,"diagnosis","multiSelectData",n)},dismiss(){$e.dismiss()},async addNewRow(){var t,n,g,f,b,s,i,r;if(await Pt(this.diagnosis)){ue(this.diagnosis,"diagnosis","alertsErrorMassage","");const c=await Nt(this.diagnosis);let m="";if(this.diagnosis&&this.diagnosis.length>0){const p=this.diagnosis[0];(b=(f=(g=(n=(t=p==null?void 0:p.data)==null?void 0:t.rowData)==null?void 0:n[0])==null?void 0:g.colData)==null?void 0:f[0])!=null&&b.value&&(m=p.data.rowData[0].colData[0].value.name||"")}if(!m&&c.length>0&&c[0].value_coded)try{const v=(await gt("concept_names")).find(D=>D.concept_id===c[0].value_coded);v&&(m=v.name)}catch(p){console.error("Could not fetch from PouchDB:",p)}const _=c.map(p=>({...p,diagnosis_name:m||"Unknown Diagnosis",obs_datetime:p.obs_datetime||q.sessionDate()})),C=z(),w=JSON.parse(JSON.stringify(C.patient));(r=(i=(s=w.diagnosis)!=null?s:w.diagnosis={}).unsaved)!=null||(i.unsaved=[]),w.diagnosis.unsaved.push(..._);try{await Re(w),await new Promise(p=>setTimeout(p,500)),mt("Diagnosis successfully saved"),this.dismiss()}catch(p){console.error(" Error saving diagnosis:",p),Ge("Failed to save diagnosis. Please try again.")}}else ue(this.diagnosis,"diagnosis","alertsErrorMassage","Please select diagnosis from the list")},updateDiagnosisStores(){Le().setDiagnosis(this.diagnosis)},async handleInputData(t){ue(this.diagnosis,"diagnosis","alertsErrorMassage","")}}}),Rt={class:"modal_wrapper"},Gt={class:""};function Jt(t,n,g,f,b,s){const i=l("ion-title"),r=l("ion-icon"),c=l("ion-header"),m=l("basic-form"),_=l("ion-content"),C=l("DynamicButton"),w=l("ion-col"),p=l("ion-row"),v=l("ion-footer");return u(),h(F,null,[e(c,{style:{display:"flex","justify-content":"space-between"}},{default:o(()=>[e(i,{class:"modalTitle"},{default:o(()=>[...n[2]||(n[2]=[k("Add Diagnosis",-1)])]),_:1}),e(r,{onClick:n[0]||(n[0]=D=>t.dismiss()),style:{"padding-top":"10px","padding-right":"10px"},icon:t.iconsContent.cancel},null,8,["icon"])]),_:1}),e(_,{fullscreen:!0,style:{"--background":"#fff"}},{default:o(()=>[a("div",Rt,[a("div",Gt,[e(m,{contentData:t.diagnosis,onSearchChange:t.getDiagnosis,"onUpdate:inputValue":t.handleInputData},null,8,["contentData","onSearchChange","onUpdate:inputValue"])])])]),_:1}),e(v,{collapse:"fade",class:"ion-no-border"},{default:o(()=>[e(p,null,{default:o(()=>[e(w,null,{default:o(()=>[e(C,{onClick:n[1]||(n[1]=D=>t.addNewRow()),name:"Save",fill:"solid",style:{float:"right",margin:"2%",width:"130px"}})]),_:1})]),_:1})]),_:1})],64)}const jt=x(Ht,[["render",Jt],["__scopeId","data-v-644a3526"]]),Ut={class:"table-responsive"},Wt=V({__name:"Diagnosis",setup(t){const n=ft(),g=z(),{diagnosis:f}=ge(n),{patient:b}=ge(g),s=S(null),i=S([]),r=S(te),c=["Diagnosis","Date","Action"],m={responsive:!0,select:!1,layout:{topStart:"buttons",topEnd:"search",bottomStart:"info",bottomEnd:"paging"},ordering:!1,buttons:[{text:" <b>+ Add diagnosis </b>",className:"add-test text-white",action:async()=>{await _()}}]},_=async()=>{await Je(jt,{class:"lab-results-modal"},!0),await p()},C=async D=>D.length>0?await Promise.all(D.map(async M=>{let P=M.diagnosis_name||M.name;!P&&M.value_coded&&(P=await ne.getConceptName(M.value_coded));const N=M.obs_datetime;return[P||"",q.toStandardHisFormat(N),'<button class="btn btn-outline-danger btn-sm delete-btn" data-id=\''.concat(JSON.stringify({id:M.obs_id,value_coded:M.value_coded,name:P,obs_date:N}),"'>").concat(r.value.delete2,"</button>")]})):[],w=async(D,M)=>{var N;if(await vt("Do you want to delete ".concat(D.name," ?"),M)){const y=JSON.parse(JSON.stringify(b.value)),$=y.diagnosis;D!=null&&D.id?($.saved=$.saved.filter(I=>!(I.value_coded===D.value_coded&&I.obs_datetime===D.obs_date)),(N=$.voided)!=null||($.voided=[]),$.voided.push(D)):$.unsaved=$.unsaved.filter(I=>!(I.value_coded===D.value_coded&&I.obs_datetime===D.obs_date)),await Re(y)}},p=async()=>{var P,N;const D=JSON.parse(JSON.stringify(b.value)),M=[...((P=D==null?void 0:D.diagnosis)==null?void 0:P.unsaved)||[],...((N=D==null?void 0:D.diagnosis)==null?void 0:N.saved)||[]];i.value=await C(M),_e.use(We)},v=Fe();return Ne(()=>v,async()=>{await p()},{deep:!0}),Ne(()=>b,async()=>{await p()},{deep:!0}),re(async()=>{await p(),Ve(()=>{const D=s.value.dt;D.columns.adjust().draw(),D.on("click",".delete-btn",M=>{const P=M.target.getAttribute("data-id");w(JSON.parse(P),M)})})}),(D,M)=>(u(),h("div",Ut,[e(d(_e),{ref_key:"dataTableRef",ref:s,options:m,data:i.value,class:"display nowrap modern-table",width:"100%"},{default:o(()=>[a("thead",null,[a("tr",null,[(u(),h(F,null,B(c,P=>a("th",{key:P},E(P),1)),64))])])]),_:1},8,["data"])]))}}),So=x(Wt,[["__scopeId","data-v-13544ebc"]]),zt={class:"sub_item_body"},Qt={class:"ion-padding",slot:"content"},Kt={class:"table-responsive"},qt=V({__name:"ComplicationsScreening",setup(t){ze();const n=Ot(),{FootScreening:g,visualScreening:f,cvScreening:b}=ge(n),s=z(),{patient:i}=ge(s);Fe();const r=S(null),c=S([]);S(!1),S(!1),S("");const m=S("");S({btnColor:"secondary",btnName:"No risk"});const _=S(te),C=["Condition","Result","Date","Action"],w={responsive:!0,select:!1,layout:{topEnd:"search",bottomStart:"info",bottomEnd:"paging"},ordering:!1},p=async()=>{var N,y;const M=JSON.parse(JSON.stringify(i.value)),P=[...((N=M==null?void 0:M.screening)==null?void 0:N.unsaved)||[],...((y=M==null?void 0:M.screening)==null?void 0:y.saved)||[]];c.value=await v(P)},v=async M=>M.length===0?[]:(await Promise.all(M.map(async N=>N.concept_name==="Visual acuity"?N.children.map(y=>[y.concept_name,y.value_text,q.toStandardHisFormat(y.obs_datetime),'<button class="btn btn-outline-danger btn-sm delete-btn" data-id=\''.concat(JSON.stringify(y),"'>\n                        ").concat(_.value.delete2,"</button>")]):N.concept_name==="Foot check"?Promise.all(N.children.map(async y=>[y.concept_name,await ht.getConceptName(y.value_coded),q.toStandardHisFormat(y.obs_datetime),'<button class="btn btn-outline-danger btn-sm delete-btn" data-id=\''.concat(JSON.stringify(y),"'>\n                            ").concat(_.value.delete2,"</button>")])):N.concept_name==="Cardiovascular disease"?[["CVD %",N.value_text,q.toStandardHisFormat(N.obs_datetime),'<button class="btn btn-outline-danger btn-sm delete-btn" data-id=\''.concat(JSON.stringify(N),"'>\n                            ").concat(_.value.delete2,"</button>")]]:[]))).flat(),D=M=>{};return re(async()=>{await p(),Ve(()=>{const M=r.value.dt;M.columns.adjust().draw(),M.on("click",".delete-btn",P=>{const N=P.target.getAttribute("data-id");D(JSON.parse(N))})})}),(M,P)=>{const N=l("ion-label"),y=l("ion-accordion"),$=l("ion-accordion-group"),I=l("ion-row");return u(),h(F,null,[e(pe,{contentData:d(f)},null,8,["contentData"]),e(d(U),null,{default:o(()=>[e(d(R),{lines:m.value,class:"dashed_bottom_border textSectionFormat"},{default:o(()=>[...P[0]||(P[0]=[a("span",{style:{display:"flex","align-items":"center",gap:"10px"}}," Foot screening ",-1)])]),_:1},8,["lines"]),a("div",zt,[e(pe,{contentData:d(g)},null,8,["contentData"])])]),_:1}),e(pe,{contentData:d(b)},null,8,["contentData"]),e(I,null,{default:o(()=>[e($,{ref:"accordionGroup",class:"previousView"},{default:o(()=>[e(y,{value:"first","toggle-icon-slot":"start",style:{"border-radius":"10px","background-color":"#fff"}},{default:o(()=>[e(d(R),{slot:"header",color:"light"},{default:o(()=>[e(N,{class:"previousLabel"},{default:o(()=>[...P[1]||(P[1]=[k("Previous Visits",-1)])]),_:1})]),_:1}),a("div",Qt,[a("div",Kt,[e(d(_e),{ref_key:"dataTableRef",ref:r,options:w,data:c.value,class:"display nowrap",width:"100%"},{default:o(()=>[a("thead",null,[a("tr",null,[(u(),h(F,null,B(C,T=>a("th",{key:T},E(T),1)),64))])])]),_:1},8,["data"])])])]),_:1})]),_:1},512)]),_:1})],64)}}}),Mo=x(qt,[["__scopeId","data-v-f3420ad0"]]),Xt=V({name:"Home",components:{IonContent:Q,IonHeader:Y,IonMenuButton:Ke,IonPage:ve,IonTitle:ie,IonToolbar:X,IonRow:Z,IonCol:ce,IonChip:Qe,IonLabel:O,IonIcon:W},computed:{...j(z,["patient"])},data(){const t=S([]),n=S([]),g=async()=>{try{const s=this.patient;Dt(s.ID);const i=S(!1),r=_=>{i.value=_};t.value=await Lt();const c=t.value.some(_=>_.toLowerCase().includes("hypertension")),m=t.value.some(_=>_.toLowerCase().includes("diabetes"));c&&(r(!0),Pe()),m&&(r(!0),Oe()),i.value==!1}catch(s){}},f=async()=>{const s=n.value.some(r=>r.toLowerCase().includes("hypertension")),i=n.value.some(r=>r.toLowerCase().includes("diabetes"));s&&await Pe(),i&&await Oe()};return{diagnoses:t,selectedDiagnoses:n,medkitOutline:qe,initC:g,toggleDiagnosisSelection:s=>{const i=n.value.indexOf(s);i===-1?(n.value.push(s),be(),f()):(n.value.splice(i,1),be(),f()),n.value.length===0&&(be(),g())}}},async mounted(){this.initC()},watch:{patient:{handler(){bt(this.patient.ID),this.initC()},deep:!0}}}),Yt={key:0,class:"diagnosis-container"},Zt={class:"heading"},en={class:"diagnosis-list"};function tn(t,n,g,f,b,s){const i=l("ion-icon"),r=l("ion-label"),c=l("ion-chip"),m=l("ion-col"),_=l("ion-row");return t.diagnoses.length>0?(u(),h("div",Yt,[a("div",Zt,[e(i,{icon:t.medkitOutline,class:"diagnosis-icon"},null,8,["icon"]),n[0]||(n[0]=a("h2",null,"Diagnosis",-1))]),e(_,null,{default:o(()=>[e(m,null,{default:o(()=>[a("div",en,[(u(!0),h(F,null,B(t.diagnoses,(C,w)=>(u(),G(c,{key:w,class:K({"diagnosis-chip-selected":t.selectedDiagnoses.includes(C)}),onClick:p=>t.toggleDiagnosisSelection(C)},{default:o(()=>[e(r,null,{default:o(()=>[k(E(C),1)]),_:2},1024)]),_:2},1032,["class","onClick"]))),128))])]),_:1})]),_:1})])):H("",!0)}const nn=x(Xt,[["render",tn],["__scopeId","data-v-2bd0f8ca"]]),on=V({name:"MedicationSearch",components:{IonContent:Q,IonPage:ve,IonItem:R,IonLabel:O,IonInput:le,IonIcon:W,BasicInputField:He,IonCard:ee},setup(){const t=S(""),n=me();return{searchText:t,searchTextUpdated:f=>{const b=f.target;t.value=b.value;const s=n.medications.filter(i=>i.name.toLowerCase().includes(t.value.toLowerCase()));n.setFilteredMedications(s)},searchOutline:Xe}}});function sn(t,n,g,f,b,s){const i=l("BasicInputField"),r=l("ion-card");return u(),h("div",null,[a("div",null,[e(r,null,{default:o(()=>[e(i,{placeholder:"Filter medication list by name",icon:t.searchOutline,inputValue:t.searchText,"onUpdate:inputValue":t.searchTextUpdated,minHeight:50},null,8,["icon","inputValue","onUpdate:inputValue"])]),_:1})])])}const an=x(on,[["render",sn]]),ln=V({name:"medication",components:{IonCard:ee,IonCardHeader:Me,IonButton:Se,IonCardTitle:xe,IonCardContent:we,IonInput:le,IonIcon:W,IonCol:ce,IonRow:Z,IonCheckbox:Ee,PreviousNCDDiagnosis:nn,MedicationSearchInput:an},computed:{...j(me,["medications","filteredMedications"]),...j(De,["otherNCDMedications"]),activeMedications(){return this.useDefaultStores?this.filteredMedications:this.otherNCDMedications}},props:{useDefaultStores:{type:Boolean,default:!0}},setup(t){const n=me();n.initMedications();const g=oe(()=>n.selectedNCDMedicationList),f=De(),b=oe(()=>f.selectedOtherNCDMedicationList),s=oe(()=>t.useDefaultStores?g.value:b.value),i=S(!1),r=S({});let c=null;const m=()=>{i.value=!1,c&&(clearTimeout(c),c=null)},_=y=>{r.value={...r.value,[y]:!0},i.value=!0,c&&clearTimeout(c),c=window.setTimeout(()=>{i.value=!1,c=null},3e3),window.setTimeout(()=>{const $={...r.value};delete $[y],r.value=$},3e3)},C=y=>/^\d*$/.test(y),w=(y,$,I)=>{let T=I.target.value;const J="".concat(y,"-").concat($);if(T!==""&&!C(T)){_(J);const L=s.value.find(de=>de.drug_id===y);T=(L==null?void 0:L.dosage[$])||"",setTimeout(()=>{const de=I.target;de&&(de.value=T)},0);return}if(T!==""){const L=parseInt(T);isNaN(L)||L<0?T="0":T=Math.floor(L).toString()}const A=s.value.findIndex(L=>L.drug_id===y);if(A>-1){const L={...s.value[A]};L.dosage={...L.dosage,[$]:T},s.value[A]=L}},p=(y,$)=>{let I=$.target.value;const T="".concat(y,"-duration");if(I!==""&&!C(I)){_(T);const A=s.value.find(L=>L.drug_id===y);I=(A==null?void 0:A.duration)||"",setTimeout(()=>{const L=$.target;L&&(L.value=I)},0);return}if(I!==""){const A=parseInt(I);isNaN(A)||A<1?I="1":I=Math.floor(A).toString()}const J=s.value.findIndex(A=>A.drug_id===y);if(J>-1){const A={...s.value[J]};A.duration=I,s.value[J]=A}},v=y=>s.value.some($=>$.drug_id===y);return{medkit:Ie,sunny:st,partlySunny:ot,moon:nt,timeOutline:tt,alertCircleOutline:et,closeCircleOutline:Ze,updateDosage:w,updateDuration:p,getDosage:(y,$)=>{const I=s.value.find(T=>T.drug_id===y);return(I==null?void 0:I.dosage[$])||""},getDuration:y=>{const $=s.value.find(I=>I.drug_id===y);return($==null?void 0:$.duration)||""},calculateQuantity:y=>{const $=s.value.find(J=>J.drug_id===y);if(!$||!$.dosage||!$.duration)return"";const I=["morning","afternoon","evening"].reduce((J,A)=>{const L=parseInt($.dosage[A])||0;return J+L},0),T=parseInt($.duration)||0;return(I*T).toString()},isActive:v,toggleMedication:async y=>{try{if(v(y)){const $=s.value.findIndex(I=>I.drug_id===y);$>-1&&s.value.splice($,1)}else{const $=await yt(y);t.useDefaultStores==!1?f.setSelectedNCDMedicationList($):n.setSelectedNCDMedicationList($)}}catch($){Ge("Error toggling medication: "+$)}},cubeOutline:Ye,showErrorMessage:i,errorFields:r,hideErrorMessage:m}}}),rn={key:0},cn={key:0,class:"error-message"},dn={class:"table-container"},un={class:"prescription-table"},pn=["onClick"],_n=["onClick"],gn={class:"med-kit-font"};function mn(t,n,g,f,b,s){const i=l("PreviousNCDDiagnosis"),r=l("ion-col"),c=l("MedicationSearchInput"),m=l("ion-row"),_=l("ion-icon"),C=l("ion-button"),w=l("ion-checkbox"),p=l("ion-input");return u(),h(F,null,[e(m,null,{default:o(()=>[e(r,{size:"5"},{default:o(()=>[t.useDefaultStores?(u(),G(i,{key:0})):H("",!0)]),_:1}),e(r,null,{default:o(()=>[t.useDefaultStores&&t.medications.length>0?(u(),G(c,{key:0,style:{"margin-top":"0px","font-weight":"600","font-size":"16px"}})):H("",!0)]),_:1})]),_:1}),t.activeMedications.length>0?(u(),h("div",rn,[t.showErrorMessage?(u(),h("div",cn,[e(_,{icon:t.alertCircleOutline,color:"danger"},null,8,["icon"]),n[0]||(n[0]=a("span",{style:{"font-size":"16px","font-weight":"600px",color:"red"}},"Only numbers are allowed",-1)),e(C,{fill:"clear",size:"small",onClick:t.hideErrorMessage},{default:o(()=>[e(_,{icon:t.closeCircleOutline},null,8,["icon"])]),_:1},8,["onClick"])])):H("",!0),a("div",dn,[a("table",un,[a("thead",null,[a("tr",null,[n[6]||(n[6]=a("th",{class:"checkbox-col"},"Select",-1)),n[7]||(n[7]=a("th",null,"Medication",-1)),a("th",null,[e(_,{icon:t.partlySunny},null,8,["icon"]),n[1]||(n[1]=k(" Morning",-1))]),a("th",null,[e(_,{icon:t.sunny},null,8,["icon"]),n[2]||(n[2]=k(" Noon",-1))]),a("th",null,[e(_,{icon:t.moon},null,8,["icon"]),n[3]||(n[3]=k(" Night",-1))]),a("th",null,[e(_,{icon:t.timeOutline},null,8,["icon"]),n[4]||(n[4]=k(" Duration",-1))]),a("th",null,[e(_,{icon:t.cubeOutline},null,8,["icon"]),n[5]||(n[5]=k(" Quantity",-1))])])]),a("tbody",null,[(u(!0),h(F,null,B(t.activeMedications,v=>(u(),h("tr",{key:v.id,class:K({"active-row":t.isActive(v.drug_id)})},[a("td",{class:"checkbox-col",onClick:D=>t.toggleMedication(v.drug_id)},[e(w,{checked:t.isActive(v.drug_id),style:{"--size":"26px"}},null,8,["checked"])],8,pn),a("td",{style:{cursor:"pointer"},onClick:D=>t.toggleMedication(v.drug_id)},[a("span",gn,E(v.name),1)],8,_n),a("td",null,[e(p,{type:"text",class:K(["dose-input bordered-input med-kit-font",{"error-input":t.errorFields["".concat(v.drug_id,"-morning")]}]),disabled:!t.isActive(v.drug_id),value:t.getDosage(v.drug_id,"morning"),onIonInput:D=>t.updateDosage(v.drug_id,"morning",D),placeholder:"0",inputmode:"numeric"},null,8,["class","disabled","value","onIonInput"])]),a("td",null,[e(p,{type:"text",class:K(["dose-input bordered-input med-kit-font",{"error-input":t.errorFields["".concat(v.drug_id,"-afternoon")]}]),disabled:!t.isActive(v.drug_id),value:t.getDosage(v.drug_id,"afternoon"),onIonInput:D=>t.updateDosage(v.drug_id,"afternoon",D),placeholder:"0",inputmode:"numeric"},null,8,["class","disabled","value","onIonInput"])]),a("td",null,[e(p,{type:"text",class:K(["dose-input bordered-input med-kit-font",{"error-input":t.errorFields["".concat(v.drug_id,"-evening")]}]),disabled:!t.isActive(v.drug_id),value:t.getDosage(v.drug_id,"evening"),onIonInput:D=>t.updateDosage(v.drug_id,"evening",D),placeholder:"0",inputmode:"numeric"},null,8,["class","disabled","value","onIonInput"])]),a("td",null,[e(p,{type:"text",class:K(["dose-input bordered-input med-kit-font",{"error-input":t.errorFields["".concat(v.drug_id,"-duration")]}]),disabled:!t.isActive(v.drug_id),value:t.getDuration(v.drug_id),onIonInput:D=>t.updateDuration(v.drug_id,D),placeholder:"0",inputmode:"numeric"},null,8,["class","disabled","value","onIonInput"])]),a("td",null,[e(p,{type:"text",class:"dose-input bordered-input med-kit-font",readonly:"",value:t.calculateQuantity(v.drug_id),placeholder:"0"},null,8,["value"])])],2))),128))])])])])):H("",!0)],64)}const je=x(ln,[["render",mn],["__scopeId","data-v-c9584f56"]]),fn=V({name:"DrugSelector",components:{IonContent:Q,IonHeader:Y,IonItem:R,IonList:U,IonMenu:ye,IonTitle:ie,IonToolbar:X,IonInput:le,IonPopover:Ae,VueMultiselect:at,IonLabel:O,IonCol:ce,IonRow:Z},emits:["drug-selected"],data(){const t=b=>{this.$emit("drug-selected",b)},n=async b=>{const s=fe(),i=b,_=(await $t.getOfflineOPDDrugs({name:i,page:1,page_size:20})).map(C=>({label:C.name,value:C.name,other:C,...C}));s.setPartialOPDdrugList(_)},g=oe(()=>this.partialOPDdrugList);return{selected_drug:S(null),selectedDrugName:t,FindDrugName:n,OPDDrugList:g}},computed:{...j(fe,["partialOPDdrugList"])}});function vn(t,n,g,f,b,s){const i=l("VueMultiselect"),r=l("ion-col"),c=l("ion-row");return u(),h("div",null,[e(c,null,{default:o(()=>[e(r,null,{default:o(()=>[e(i,{modelValue:t.selected_drug,"onUpdate:modelValue":[n[0]||(n[0]=m=>t.selected_drug=m),t.selectedDrugName],multiple:!1,taggable:!1,"hide-selected":!1,"close-on-select":!0,openDirection:"bottom","tag-placeholder":"Select medication",placeholder:"Select medication",selectLabel:"",label:"name",searchable:!0,onSearchChange:t.FindDrugName,"track-by":"uuid",options:t.OPDDrugList},null,8,["modelValue","onUpdate:modelValue","onSearchChange","options"])]),_:1})]),_:1})])}const hn=x(fn,[["render",vn],["__scopeId","data-v-e33f5b73"]]),bn=V({name:"Home",mixins:[Ct],components:{IonContent:Q,IonHeader:Y,IonPage:ve,IonToolbar:X,IonRow:Z,IonTitle:ie,IonIcon:W,IonFooter:it,OPDMedications:hn,Medication:je,IonCol:ce,IonButton:Se},data(){const t=De(),n=()=>{$e.dismiss()};return{iconsContent:te,dismiss:n,addSearchedDrug:b=>{t.addSearchedDrug(b)},medkit:Ie,checkmark:Ce,onAdd:()=>{wt(),t.clearOtherNCDMedications(),n()}}},computed:{},$route:{async handler(){},deep:!0},watch:{},async mounted(){},methods:{}}),Dn={class:"medication-list"},yn={class:"modal_wrapper"},$n={class:""};function Cn(t,n,g,f,b,s){const i=l("ion-icon"),r=l("ion-title"),c=l("ion-header"),m=l("OPDMedications"),_=l("Medication"),C=l("ion-content"),w=l("ion-button"),p=l("ion-col"),v=l("ion-row"),D=l("ion-footer");return u(),h(F,null,[e(c,{style:{display:"flex","justify-content":"space-between"}},{default:o(()=>[e(r,{class:"modalTitle"},{default:o(()=>[a("div",Dn,[e(i,{icon:t.medkit,class:"ion-margin-end"},null,8,["icon"]),n[1]||(n[1]=a("span",null,"Add Other Medication",-1))])]),_:1}),e(i,{onClick:n[0]||(n[0]=M=>t.dismiss()),style:{"padding-top":"10px","padding-right":"10px"},icon:t.iconsContent.cancel},null,8,["icon"])]),_:1}),e(C,{fullscreen:!0,class:"ion-padding",style:{"--background":"#fff"}},{default:o(()=>[a("div",yn,[a("div",$n,[e(m,{onDrugSelected:t.addSearchedDrug},null,8,["onDrugSelected"]),e(_,{"use-default-stores":!1})])])]),_:1}),e(D,{collapse:"fade",class:"ion-no-border"},{default:o(()=>[e(v,null,{default:o(()=>[e(p,null,{default:o(()=>[e(w,{onClick:t.onAdd,color:"primary",style:{float:"right","margin-bottom":"20px","margin-right":"20px"}},{default:o(()=>[e(i,{icon:t.checkmark,slot:"start"},null,8,["icon"]),n[2]||(n[2]=k(" Add ",-1))]),_:1},8,["onClick"])]),_:1})]),_:1})]),_:1})],64)}const wn=x(bn,[["render",Cn],["__scopeId","data-v-dee50533"]]),Sn=V({name:"Home",components:{IonContent:Q,IonHeader:Y,IonPage:ve,IonToolbar:X,Toolbar:St,IonRow:Z,IonAccordion:ae,IonAccordionGroup:se,IonItem:R,IonLabel:O,DynamicList:Tt,IonCard:ee},data(){const t=S(0),n=S("Show more medications"),g=S(!1),f=S();return{componentKey:t,accordionGroupChange:r=>{const c=r.detail.value;c!==void 0?c=="second"&&(n.value="Show less medications",g.value=!g.value):(n.value="Show more medications",g.value=!g.value)},showMoreMedicationsMsg:n,itemWasExpanded:g,accordionGroupChangeFn1:r=>{},PreviuosSelectedMedicalDrugsList:f,loadPreviousMedications:async()=>{const r=new ke,{previousDrugPrescriptions:c}=await r.getPatientEncounters();f.value=c}}},computed:{...j(z,["patient"]),...j(me,["selectedNCDMedicationList"])},$route:{async handler(){},deep:!0},watch:{patient:{handler(){this.loadPreviousMedications()},deep:!0},selectedNCDMedicationList:{handler(){this.loadPreviousMedications()},deep:!0}},async mounted(){this.loadPreviousMedications()}}),Mn={style:{}},In={class:"ion-padding",slot:"content"},kn={key:0},Nn={class:"previousSecDrgs"},Pn={class:"ion-padding",slot:"content"},On={key:0},Ln={class:"previousSecDrgs"};function Tn(t,n,g,f,b,s){const i=l("ion-label"),r=l("ion-item"),c=l("dynamic-list"),m=l("ion-accordion"),_=l("ion-accordion-group"),C=l("ion-card");return u(),G(C,null,{default:o(()=>[a("div",Mn,[e(_,{ref:"accordionGroup",class:"previousView",onIonChange:t.accordionGroupChangeFn1},{default:o(()=>[e(m,{value:"first","toggle-icon-slot":"start",style:{"border-radius":"10px","background-color":"#fff"}},{default:o(()=>[e(r,{slot:"header",color:"light"},{default:o(()=>[e(i,{class:"previousLabel"},{default:o(()=>[...n[0]||(n[0]=[k("Documented medications timeline",-1)])]),_:1})]),_:1}),a("div",In,[(u(!0),h(F,null,B(t.PreviuosSelectedMedicalDrugsList,(w,p)=>(u(),h("div",{class:"ionLbltp",key:p},[p==0?(u(),h("div",kn,[a("div",null,[e(i,{class:"previousLabelDate"},{default:o(()=>[k(E(w.prescriptionDate),1)]),_:2},1024)]),a("div",Nn,[(u(),G(c,{_selectedMedicalDrugsList:w.previousPrescriptions,show_actions_buttons:!1,key:t.componentKey},null,8,["_selectedMedicalDrugsList"]))])])):H("",!0)]))),128)),e(_,{onIonChange:t.accordionGroupChange},{default:o(()=>[e(m,{value:"second","toggle-icon-slot":"start",style:{"border-radius":"10px","background-color":"#fff"}},{default:o(()=>[e(r,{slot:"header",color:"light"},{default:o(()=>[e(i,{class:"",color:"primary"},{default:o(()=>[k(E(t.showMoreMedicationsMsg),1)]),_:1})]),_:1}),a("div",Pn,[(u(!0),h(F,null,B(t.PreviuosSelectedMedicalDrugsList,(w,p)=>(u(),h("div",{class:"ionLbltp",key:p},[t.itemWasExpanded&&p>0?(u(),h("div",On,[a("div",null,[e(i,{class:"previousLabelDate"},{default:o(()=>[k(E(w.prescriptionDate),1)]),_:2},1024)]),a("div",Ln,[(u(),G(c,{_selectedMedicalDrugsList:w.previousPrescriptions,show_actions_buttons:!1,key:t.componentKey},null,8,["_selectedMedicalDrugsList"]))])])):H("",!0)]))),128))])]),_:1})]),_:1},8,["onIonChange"])])]),_:1})]),_:1},8,["onIonChange"])])]),_:1})}const An=x(Sn,[["render",Tn],["__scopeId","data-v-1db96250"]]),Fn=V({name:"PrescriptionTable",components:{IonCard:ee,IonCardHeader:Me,IonButton:Se,IonCardTitle:xe,IonCardContent:we,IonInput:le,IonIcon:W,IonCol:ce,IonRow:Z,IonCheckbox:Ee,Medication:je,MedicationHistory:An},setup(){return{openAddOtherOPDMedicationModal:async()=>{await Je(wn,{class:"large-modal"},!0,{})},medkit:Ie}}});function Vn(t,n,g,f,b,s){const i=l("Medication"),r=l("ion-icon"),c=l("ion-button"),m=l("ion-col"),_=l("ion-row"),C=l("MedicationHistory"),w=l("IonCol"),p=l("ion-card-content"),v=l("ion-card");return u(),G(v,null,{default:o(()=>[e(p,null,{default:o(()=>[e(i),e(_,null,{default:o(()=>[e(m,null,{default:o(()=>[e(c,{onClick:t.openAddOtherOPDMedicationModal,color:"primary",style:{float:"right"}},{default:o(()=>[e(r,{icon:t.medkit,slot:"start"},null,8,["icon"]),n[0]||(n[0]=a("span",{style:{"margin-left":"10px","font-size":"16px","font-weight":"600"}}," ADD Other Medication",-1))]),_:1},8,["onClick"])]),_:1})]),_:1}),e(_,null,{default:o(()=>[e(w,null,{default:o(()=>[e(C)]),_:1})]),_:1})]),_:1})]),_:1})}const En=x(Fn,[["render",Vn],["__scopeId","data-v-a4ad7088"]]),xn={style:{"margin-top":"14px","margin-left":"10px"}},Bn={class:"ion-padding",slot:"content"},Hn={key:0},Rn={class:"previousSecDrgs"},Gn={class:"ion-padding",slot:"content"},Jn={class:"previousSecDrgs"},jn=V({watch:{},name:"xxxComponent"}),Un=V({...jn,setup(t){const n=S(),g=S(),f=S(!1),b=S(!1),s=S("Show more notes");re(async()=>{const c=new ke,{previousClinicalNotes:m}=await c.getPatientEncounters();n.value=Object.entries(m)[0];const[,..._]=Object.entries(m);g.value=_});function i(c){const m=c.detail.value;m!==void 0?m=="third"&&(s.value="Show less notes",b.value=!f.value):(s.value="Show more notes",b.value=!f.value)}function r(c){return c[1]}return(c,m)=>(u(),G(d(ee),null,{default:o(()=>[a("div",xn,[e(d(se),{ref:"accordionGroup",class:"previousView"},{default:o(()=>[e(d(ae),{value:"fourth","toggle-icon-slot":"start",style:{"border-radius":"10px","background-color":"#fff"}},{default:o(()=>[e(d(R),{slot:"header",color:"light"},{default:o(()=>[e(d(O),{class:"previousLabel"},{default:o(()=>[...m[0]||(m[0]=[k("Previous visits notes",-1)])]),_:1})]),_:1}),a("div",Bn,[(u(!0),h(F,null,B(n.value,(_,C)=>(u(),h("div",{class:"ionLbltp",key:C},[C==1?(u(),h("div",Hn,[(u(!0),h(F,null,B(_,(w,p)=>(u(),h("div",{key:p},[a("div",null,[e(d(O),{class:"previousLabelDate"},{default:o(()=>[k(E(w.date),1)]),_:2},1024)]),a("div",Rn,[e(d(U),null,{default:o(()=>[e(d(O),{class:"notes_p"},{default:o(()=>[k(E(w.notes),1)]),_:2},1024)]),_:2},1024)])]))),128))])):H("",!0)]))),128)),e(d(se),{onIonChange:i},{default:o(()=>[e(d(ae),{value:"third","toggle-icon-slot":"start",style:{"border-radius":"10px","background-color":"#fff"}},{default:o(()=>[e(d(R),{slot:"header",color:"light"},{default:o(()=>[e(d(O),{class:"",color:"primary"},{default:o(()=>[k(E(s.value),1)]),_:1})]),_:1}),a("div",Gn,[(u(!0),h(F,null,B(g.value,(_,C)=>(u(),h("div",{class:"ionLbltp",key:C},[(u(!0),h(F,null,B(r(_),(w,p)=>(u(),h("div",{key:p},[a("div",null,[e(d(O),{class:"previousLabelDate"},{default:o(()=>[k(E(w.date),1)]),_:2},1024)]),a("div",Jn,[e(d(U),null,{default:o(()=>[e(d(O),{class:"notes_p"},{default:o(()=>[k(E(w.notes),1)]),_:2},1024)]),_:2},1024)])]))),128))]))),128))])]),_:1})]),_:1})])]),_:1})]),_:1},512)])]),_:1}))}}),Wn=x(Un,[["__scopeId","data-v-994df42d"]]),zn={style:{"margin-top":"14px","margin-left":"10px"}},Qn=V({watch:{},name:"xxxComponent"}),Kn=V({...Qn,setup(t){const n=fe(),g=te,f=oe(()=>n.nonPharmalogicalTherapyAndOtherNotes);function b(i){let r=i.target.value;s(r)}function s(i){fe().setNonPharmalogicalTherapyAndOtherNotes(i)}return(i,r)=>(u(),G(d(ee),null,{default:o(()=>[e(d(Me),null,{default:o(()=>[e(d(O),{class:"tpStndCls"},{default:o(()=>[e(d(W),{icon:d(lt),class:"header-icon","aria-hidden":"true"},null,8,["icon"]),r[1]||(r[1]=k(" Non-pharmalogical therapy and other notes ",-1))]),_:1})]),_:1}),e(d(we),null,{default:o(()=>[a("div",null,[e(At),e(d(R),{class:"input_item",style:{"min-height":"120px","margin-top":"14px"}},{default:o(()=>[e(d(O),null,{default:o(()=>[e(d(W),{slot:"start",icon:d(g).editPen,"aria-hidden":"true"},null,8,["icon"])]),_:1}),e(d(rt),{onIonInput:b,modelValue:f.value,"onUpdate:modelValue":r[0]||(r[0]=c=>f.value=c),style:{"min-height":"120px"},class:"inputTpln","auto-grow":!0,fill:"outline"},null,8,["modelValue"])]),_:1})]),a("div",zn,[e(Wn)])]),_:1})]),_:1}))}}),qn=x(Kn,[["__scopeId","data-v-fd19ec21"]]),Xn={class:"ion-padding",slot:"content"},Yn={key:0},Zn={class:"previousSecDrgs"},eo={class:"ion-padding",slot:"content"},to={class:"previousSecDrgs"},no=V({watch:{},name:"xxxComponent"}),oo=V({...no,setup(t){const n=S(!1),g=S(!1),f=S("Show more allergies"),b=S(),s=S();re(async()=>{const c=new ke,{previousDrugAllergies:m}=await c.getPatientEncounters();b.value=Object.entries(m)[0];const[,..._]=Object.entries(m);s.value=_});function i(c){const m=c.detail.value;m!==void 0?m=="fith"&&(f.value="Show less allegies",g.value=!n.value):(f.value="Show more allegies",g.value=!n.value)}function r(c){return c[1]}return(c,m)=>{const _=l("ion-card");return u(),G(_,null,{default:o(()=>[e(d(se),{ref:"accordionGroup",class:"previousView"},{default:o(()=>[e(d(ae),{value:"fourth","toggle-icon-slot":"start",style:{"border-radius":"10px","background-color":"#fff"}},{default:o(()=>[e(d(R),{slot:"header",color:"light"},{default:o(()=>[e(d(O),{class:"previousLabel"},{default:o(()=>[...m[0]||(m[0]=[k("Documented allergies timeline",-1)])]),_:1})]),_:1}),a("div",Xn,[(u(!0),h(F,null,B(b.value,(C,w)=>(u(),h("div",{class:"ionLbltp",key:w},[w==1?(u(),h("div",Yn,[a("div",null,[e(d(O),{class:"previousLabelDate"},{default:o(()=>[k(E(C[0].date),1)]),_:2},1024)]),(u(!0),h(F,null,B(C,(p,v)=>(u(),h("div",{key:v},[a("div",Zn,[e(d(U),null,{default:o(()=>[e(d(O),{class:"notes_p"},{default:o(()=>[k(E(p.value),1)]),_:2},1024)]),_:2},1024)])]))),128))])):H("",!0)]))),128)),e(d(se),{onIonChange:i},{default:o(()=>[e(d(ae),{value:"fith","toggle-icon-slot":"start",style:{"border-radius":"10px","background-color":"#fff"}},{default:o(()=>[e(d(R),{slot:"header",color:"light"},{default:o(()=>[e(d(O),{class:"",color:"primary"},{default:o(()=>[k(E(f.value),1)]),_:1})]),_:1}),a("div",eo,[(u(!0),h(F,null,B(s.value,(C,w)=>(u(),h("div",{class:"ionLbltp",key:w},[a("div",null,[e(d(O),{class:"previousLabelDate"},{default:o(()=>[k(E(C[0]),1)]),_:2},1024)]),(u(!0),h(F,null,B(r(C),(p,v)=>(u(),h("div",{key:v},[a("div",to,[e(d(U),null,{default:o(()=>[e(d(O),{class:"notes_p"},{default:o(()=>[k(E(p.value),1)]),_:2},1024)]),_:2},1024)])]))),128))]))),128))])]),_:1})]),_:1})])]),_:1})]),_:1},512)]),_:1})}}}),so=x(oo,[["__scopeId","data-v-358c5959"]]),ao={class:"background"},io={key:0},lo={style:{margin:"10px"}},ro={key:1},co={style:{margin:"10px"}},uo={key:2},po={style:{margin:"10px"}},_o=V({__name:"TreatmentPlan",setup(t){const n=S(["medications","allergies","other_notes"]),g=S(n.value[0]);re(()=>{f(n.value[0])});function f(b){g.value=b}return(b,s)=>(u(),h("div",ao,[e(d(ct),{value:g.value,style:{"margin-top":"5px"}},{default:o(()=>[e(d(he),{value:"medications",onClick:s[0]||(s[0]=i=>f(n.value[0]))},{default:o(()=>[e(d(O),null,{default:o(()=>[...s[3]||(s[3]=[k("Medications",-1)])]),_:1})]),_:1}),e(d(he),{value:"allergies",onClick:s[1]||(s[1]=i=>f(n.value[1]))},{default:o(()=>[e(d(O),null,{default:o(()=>[...s[4]||(s[4]=[k("Allergies",-1)])]),_:1})]),_:1}),e(d(he),{value:"other_notes",onClick:s[2]||(s[2]=i=>f(n.value[2]))},{default:o(()=>[e(d(O),null,{default:o(()=>[...s[5]||(s[5]=[k("Non-pharmalogical therapy and other notes",-1)])]),_:1})]),_:1})]),_:1},8,["value"]),g.value===n.value[0]?(u(),h("div",io,[a("div",lo,[e(En)])])):H("",!0),g.value===n.value[1]?(u(),h("div",ro,[a("div",co,[e(Ft),e(so,{style:{"margin-top":"10px"}})])])):H("",!0),g.value===n.value[2]?(u(),h("div",uo,[a("div",po,[e(qn)])])):H("",!0)]))}}),Io=x(_o,[["__scopeId","data-v-d844be41"]]);export{Mo as C,So as D,Io as T,Bt as p};
