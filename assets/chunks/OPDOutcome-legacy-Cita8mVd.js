System.register(["./vendor-legacy-ChYl72f1.js","../index-legacy-DXjwWsCs.js","./LevelOfConsciousness.vue_vue_type_script_setup_true_lang-legacy-Cq82jXSL.js","./previousComplaints-legacy-BuutgQ04.js","./patient_complaints_service-legacy-DbLvPbqi.js","./DashBox-legacy-DkVFNIie.js","./BasicForm-legacy-DsS5h4nd.js","./formatServerData-legacy-DxtUR2uk.js","./NextAppointment-legacy-TcyYCkbS.js","./drug_prescription_service-legacy-CKcYmTrD.js","./nonPharmaTherapyStore-legacy-BR4D1ZTk.js","./lodash-legacy-pOOc9Efu.js","./Outcome-legacy-DHyc-nH5.js"],function(e,a){"use strict";var n,t,o,l,i,r,s,d,c,u,m,p,v,h,f,b,g,y,_,x,w,k,C,A,D,O,P,T,S,N,E,F,I,V,H,B,Y,M,U,R,L,z,q,G,W,j,$,K,X,J,Q,Z,ee,ae,ne,te,oe,le,ie,re,se,de,ce,ue,me,pe,ve,he,fe,be,ge,ye,_e,xe,we,ke,Ce,Ae,De,Oe,Pe,Te,Se,Ne,Ee,Fe,Ie,Ve,He,Be,Ye,Me,Ue,Re,Le,ze,qe,Ge,We,je,$e,Ke,Xe,Je,Qe,Ze,ea,aa,na,ta,oa,la,ia,ra,sa,da,ca,ua;return{setters:[e=>{n=e.d,t=e.b2,o=e.r,l=e.c,i=e.a,r=e.H,s=e.e,d=e.f,c=e.l,u=e.m,m=e.O,p=e.J,v=e.k,h=e.u,f=e.$,b=e.Q,g=e.F,y=e.w,_=e.ay,x=e.bW,w=e.P,k=e.aP,C=e.K,A=e.p,D=e.bu,O=e.ai,P=e.L,T=e.ez,S=e.eA,N=e.bl,E=e.bg,F=e.eB,I=e.eC,V=e.da,H=e.eD,B=e.eE,Y=e.eF,M=e.df,U=e.bV,R=e.aw,L=e.aA,z=e.c1,q=e.n,G=e.X,W=e.bz,j=e.am,$=e.al,K=e.N,X=e.bt,J=e.a5,Q=e.bm,Z=e.b3,ee=e.bo,ae=e.a3,ne=e.b$,te=e.bw,oe=e.ak,le=e.a6,ie=e.aH,re=e.c7,se=e.bx,de=e.dt,ce=e.ea},e=>{ue=e.bp,me=e.l,pe=e.aD,ve=e.aC,he=e.b4,fe=e.aE,be=e.J,ge=e.M,ye=e.S,_e=e.ag,xe=e.aU,we=e.t,ke=e.G,Ce=e._,Ae=e.u,De=e.af,Oe=e.H,Pe=e.aV,Te=e.bU,Se=e.P,Ne=e.aM,Ee=e.m,Fe=e.aT,Ie=e.K,Ve=e.B,He=e.ay,Be=e.ap,Ye=e.at,Me=e.aO,Ue=e.as},e=>{Re=e.e,Le=e.a,ze=e.m,qe=e.b,Ge=e.v,We=e.c,je=e._},e=>{$e=e.p},e=>{Ke=e.P},e=>{Xe=e.D},e=>{Je=e.B},e=>{Qe=e.f},e=>{Ze=e.A,ea=e.D,aa=e.a},e=>{na=e.a,ta=e.b},e=>{oa=e.P},e=>{la=e.l},e=>{ia=e._,ra=e.D,sa=e.A,da=e.R,ca=e.a,ua=e.b}],execute:function(){var a=document.createElement("style");a.textContent=".vitals_title[data-v-44affb13]{border-bottom:1px solid #b3b3b3;margin-bottom:50px}.input-with-icon[data-v-44affb13]{position:relative}.input-icon[data-v-44affb13]{position:absolute;left:10px;top:50%;transform:translateY(-50%);color:gray}ion-col[data-v-44affb13]{padding-bottom:15px}h5[data-v-44affb13]{margin-top:0;text-overflow:ellipsis;white-space:nowrap;overflow:hidden}.previousView[data-v-44affb13]{margin-top:70px;margin-bottom:20px}.visit-section[data-v-f7cd569d]{margin-bottom:1.2rem;padding:1rem;background:#fff;border-radius:12px;border:1px solid #e5e7eb}.section-header[data-v-f7cd569d]{display:flex;align-items:center;gap:.6rem;margin-bottom:1rem}.section-icon[data-v-f7cd569d]{font-size:20px;color:#c62828}h3[data-v-f7cd569d]{font-size:1rem;font-weight:600;margin:0}.no-data[data-v-f7cd569d]{text-align:center;padding:1.2rem;color:#6b7280}.no-data-icon[data-v-f7cd569d]{font-size:2rem;color:#16a34a}.accordion-section[data-v-f7cd569d]{border-top:1px solid #f0f0f0}.accordion-header[data-v-f7cd569d]{display:flex;justify-content:space-between;padding:.8rem 0;cursor:pointer}.acc-left[data-v-f7cd569d]{display:flex;align-items:center;gap:.6rem}.acc-icon[data-v-f7cd569d]{font-size:1.1rem;color:#065f46}.acc-title[data-v-f7cd569d]{font-weight:600}.acc-count[data-v-f7cd569d]{font-size:.8rem;color:#6b7280}.chevron[data-v-f7cd569d]{transition:.2s ease;color:#6b7280}.chevron.rotate[data-v-f7cd569d]{transform:rotate(180deg)}.accordion-body[data-v-f7cd569d]{padding:.5rem 0 .8rem .2rem}.allergy-item[data-v-f7cd569d]{display:flex;gap:.6rem;padding:.4rem .6rem;font-size:.95rem;background:#f9fafb;border-radius:6px;margin-bottom:.3rem}.item-label[data-v-f7cd569d]{font-weight:600;color:#059669;background:#d1fae5;padding:.2rem .6rem;border-radius:4px;font-size:.85rem;white-space:nowrap}.item-value[data-v-f7cd569d]{color:#1f2937;font-weight:500;background:#fff;padding:.2rem .6rem;border-radius:4px;flex:1}.visit-container[data-v-49bf6f48]{background:#fff;border-radius:16px;box-shadow:0 4px 12px rgba(0,0,0,.05);padding:24px;margin:16px;font-family:Segoe UI,Roboto,Helvetica Neue,sans-serif}.visit-header[data-v-49bf6f48]{display:flex;justify-content:space-between;align-items:center;margin-bottom:24px;padding-bottom:16px;border-bottom:1px solid #f0f0f0}.visit-header h5[data-v-49bf6f48]{margin:0;font-size:1.25rem;font-weight:600;color:#2d3748}.visit-sections[data-v-49bf6f48]{display:flex;flex-direction:column;gap:20px}.visit-section[data-v-49bf6f48]{background:#f8fafc;border-radius:12px;padding:16px;transition:all .2s ease}.visit-section[data-v-49bf6f48]:hover{box-shadow:0 2px 8px rgba(0,0,0,.08);transform:translateY(-2px)}.section-header[data-v-49bf6f48]{display:flex;align-items:center;gap:12px;margin-bottom:16px}.section-header h3[data-v-49bf6f48]{margin:0;font-size:1.1rem;font-weight:500;color:#2d3748}.section-icon[data-v-49bf6f48]{color:#4299e1;font-size:1.4rem}.section-content[data-v-49bf6f48]{display:flex;flex-direction:column;gap:12px}.info-item[data-v-49bf6f48]{display:flex;gap:8px}.info-label[data-v-49bf6f48]{font-weight:500;color:#4a5568;min-width:120px}.info-value[data-v-49bf6f48]{color:#2d3748}.highlight[data-v-49bf6f48]{font-weight:600;color:#3182ce}.tags-container[data-v-49bf6f48]{display:flex;flex-wrap:wrap;gap:8px}.complaint-tag[data-v-49bf6f48],.medical-tag[data-v-49bf6f48],.allergy-tag[data-v-49bf6f48]{padding:6px 12px;border-radius:20px;font-size:.85rem;font-weight:500}.complaint-tag[data-v-49bf6f48]{background:#ebf8ff;color:#3182ce}.medical-tag[data-v-49bf6f48]{background:#f0fff4;color:#38a169}.allergy-tag[data-v-49bf6f48]{background:#fff5f5;color:#e53e3e}.complaints-container[data-v-49bf6f48]{display:flex;flex-direction:column;gap:12px}.complaint-item[data-v-49bf6f48]{display:flex;justify-content:space-between;margin-right:70%;align-items:center;padding:8px 12px;background:#f8fafc;border-radius:8px;gap:10px}.complaint-name[data-v-49bf6f48]{font-weight:500;color:#2d3748;white-space:nowrap}.complaint-duration[data-v-49bf6f48]{color:#718096;font-size:.9em;white-space:nowrap}.exam-section[data-v-49bf6f48]{display:flex;flex-direction:column;gap:16px}.exam-category[data-v-49bf6f48]{background:#fff;border-radius:8px;padding:12px;box-shadow:0 1px 3px rgba(0,0,0,.05)}.exam-category-header[data-v-49bf6f48]{display:flex;align-items:center;gap:8px;margin-bottom:8px}.exam-category-header h4[data-v-49bf6f48]{margin:0;font-size:.95rem;font-weight:500;color:#4a5568}.exam-category-header ion-icon[data-v-49bf6f48]{color:#718096;font-size:1.1rem}.exam-items[data-v-49bf6f48]{display:flex;flex-wrap:wrap;gap:8px}.exam-item[data-v-49bf6f48]{background:#f7fafc;padding:6px 10px;border-radius:6px;font-size:.85rem;color:#4a5568}.exam-item.normal[data-v-49bf6f48]{background:#e6ffed;color:#38a169}@media(max-width:768px){.visit-container[data-v-49bf6f48]{padding:16px;margin:8px}.visit-header[data-v-49bf6f48]{flex-direction:column;align-items:flex-start;gap:8px}.tags-container[data-v-49bf6f48],.complaints-container[data-v-49bf6f48]{gap:6px}.complaint-tag[data-v-49bf6f48],.medical-tag[data-v-49bf6f48],.allergy-tag[data-v-49bf6f48]{padding:4px 10px;font-size:.8rem}}._card[data-v-f7298259]{border-radius:5px;background-color:#fff;box-shadow:rgba(0,0,0,.2) 0 3px 1px -2px,rgba(0,0,0,.14) 0 2px 2px,rgba(0,0,0,.12) 0 1px 5px;margin-bottom:10px}ion-item[data-v-f7298259]::part(native){border:none}.previousView[data-v-f7298259]{margin-top:10px}.previousLabel[data-v-f7298259]{font-weight:700;font-size:1rem}.nav-buttons[data-v-f7298259]{display:flex;justify-content:flex-start;gap:10px;margin-top:10px}ion-accordion[data-v-f7298259]::part(header){padding:8px}.ion-padding[data-v-f7298259]{padding-top:0}.required-badge[data-v-f7298259]{color:#d32f2f;font-size:.75rem;font-weight:600;margin-left:8px;background-color:#ffebee;padding:2px 8px;border-radius:4px;text-transform:uppercase}#container[data-v-14c793af]{text-align:center;position:absolute;left:0;right:0;top:50%;transform:translateY(-50%)}#container strong[data-v-14c793af]{font-size:20px;line-height:26px}#container p[data-v-14c793af]{font-size:16px;line-height:22px;color:#8c8c8c;margin:0}#container a[data-v-14c793af]{text-decoration:none}ion-item.medicalAl[data-v-14c793af]{--background: #fff;--border-radius: 5px}ion-button.medicalAlBtn[data-v-14c793af]{--background: #fecdca;--color: #b42318;text-transform:none}.error-label[data-v-14c793af]{background:#fecdca;color:#b42318;text-transform:none;padding:2%;border-radius:10px;margin-top:7px;display:flex;text-align:center}ion-button.addMedicalTpBtn[data-v-14c793af]{--background: #ddeedd;--color: #006401;text-transform:none;font-weight:600;font-size:16px}ion-button.medicalAlAddBtn[data-v-14c793af]{font-size:large}ion-icon.icon-al[data-v-14c793af]{font-size:x-large;margin-bottom:-5px}.item-al[data-v-14c793af]{cursor:pointer;padding:5px;background-color:#ebebeb;margin-top:8px}.item-al[data-v-14c793af]:hover{background-color:rgba(85,81,81,.282);padding:5px;border-radius:3px}ion-popover.popover-al[data-v-14c793af]{--background: #fff}ion-content.content-al[data-v-14c793af]{--background: #fff}ion-list.list-al[data-v-14c793af]{--background: #fff;-ion-item-background:#fff}.checkLbltp[data-v-14c793af]{border-bottom:2px dotted var(--ion-color-medium);--inner-border-width: 0}.tpStndCls[data-v-14c793af]{font-size:16px;font-weight:600;line-height:24px}.action_buttons[data-v-14c793af]{color:var(--ion-color-primary);display:flex;align-items:center;float:right}.action_buttons[data-v-14c793af]:hover{cursor:pointer}.spcls[data-v-14c793af]{display:flex;align-items:center}.previousView[data-v-14c793af]{width:100%;border-radius:10px;margin-top:10px}.previousLabel[data-v-14c793af]{font-weight:600;color:#000}.previousLabelDate[data-v-14c793af]{font-weight:600;color:#000;margin:2%}.previousSecDrgs[data-v-14c793af]{margin:2%}.notes_p[data-v-14c793af]{margin:4%}.qaws[data-v-14c793af]{margin-top:-27px}.allergies-section[data-v-14c793af]{background:#fff;border-radius:8px;box-shadow:0 2px 4px rgba(0,0,0,.05);margin-bottom:10px}.section-title[data-v-14c793af]{display:flex;align-items:center;font-size:18px;font-weight:700;color:#1f2937;letter-spacing:-.01em;margin-bottom:16px}.allergies-container[data-v-14c793af]{min-height:48px}.allergies-grid[data-v-14c793af]{display:flex;flex-wrap:wrap;gap:8px}.allergy-chip[data-v-14c793af]{--background: #fee2e2;--color: #dc2626;font-size:14px;font-weight:500}.allergy-chip ion-icon[data-v-14c793af]{color:#dc2626}.no-allergies[data-v-14c793af]{display:flex;align-items:center;justify-content:center;height:48px;background:#f9fafb;border-radius:6px;font-size:15px;font-weight:500;color:#9c8011}.medication-section[data-v-14c793af]{background:#fff;border-radius:8px;padding:16px;margin:16px 0;box-shadow:0 1px 3px rgba(0,0,0,.1)}.section-header[data-v-14c793af]{margin-bottom:16px;--background: transparent}.section-icon[data-v-14c793af]{font-size:22px;margin-right:10px;color:var(--ion-color-primary)}.medication-content[data-v-14c793af]{padding:0 16px}.add-medication-form[data-v-14c793af]{background:#f9fafb;border-radius:8px;padding:20px;margin-top:16px}.form-group[data-v-14c793af]{margin-bottom:16px}.form-row[data-v-14c793af]{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:16px;margin-bottom:16px}.input-label[data-v-14c793af]{display:block;font-size:16px;font-weight:600;color:#374151;margin-bottom:10px}.error-message[data-v-14c793af]{color:#dc2626;font-size:15px;font-weight:600;margin-top:4px}.action-buttons[data-v-14c793af]{display:flex;gap:8px;justify-content:flex-end;margin-top:16px}.save-button[data-v-14c793af]{--background: var(--ion-color-primary);--color: #ffffff;font-size:16px;font-weight:600}.cancel-button[data-v-14c793af]{--background: #e5e7eb;--color: #374151;font-size:16px;font-weight:600}.add-new-button[data-v-14c793af]{width:100%;margin-top:16px;--background: var(--ion-color-primary-tint);--color: var(--ion-color-primary);font-size:16px;font-weight:600}.notes-section[data-v-14c793af]{background:#fff;border-radius:8px;padding:16px;margin:16px 0;box-shadow:0 1px 3px rgba(0,0,0,.1)}.notes-content[data-v-14c793af]{padding:0 16px}.intervention-component[data-v-14c793af],.notes-input-container[data-v-14c793af]{margin-bottom:16px}.notes-input-item[data-v-14c793af]{--background: #f9fafb;--border-radius: 8px;--padding-start: 12px;--padding-end: 12px;min-height:120px}.edit-icon[data-v-14c793af]{color:var(--ion-color-medium);font-size:20px;margin-right:8px}.notes-textarea[data-v-14c793af]{--padding-top: 12px;--padding-bottom: 12px;--placeholder-color: #9ca3af;--placeholder-opacity: 1;font-size:16px;font-weight:600;line-height:1.6}.previous-notes[data-v-14c793af]{background:#fff;border-radius:8px;overflow:hidden}.previous-notes-header[data-v-14c793af]{--background: #f9fafb;font-weight:600}.notes-timeline[data-v-14c793af]{padding:8px 0}.note-entry[data-v-14c793af]{padding:12px 16px;border-bottom:1px solid #e5e7eb}.note-entry[data-v-14c793af]:last-child{border-bottom:none}.note-date[data-v-14c793af]{font-size:14px;font-weight:600;color:#374151;margin-bottom:8px}.note-content[data-v-14c793af]{font-size:16px;font-weight:600;line-height:1.6;color:#4b5563;white-space:pre-wrap}.show-more-header[data-v-14c793af]{--background: transparent;font-size:16px;font-weight:600}[data-v-14c793af] ion-accordion{margin:0}[data-v-14c793af] ion-accordion-group{background:#fff}[data-v-14c793af] ion-accordion.accordion-expanding,[data-v-14c793af] ion-accordion.accordion-expanded{--background: #ffffff}[data-v-14c793af]{transition:font-size .2s ease,font-weight .2s ease}[data-v-14c793af] .multiselect__option{font-size:16px!important;font-weight:600!important;color:#000}.initTxt[data-v-0aad2f08]{text-align:center}.item-al[data-v-0aad2f08]{cursor:pointer;padding:5px;background-color:#ebebeb;margin-top:8px}.item-al[data-v-0aad2f08]:hover{background-color:rgba(85,81,81,.282);padding:5px;border-radius:3px}ion-popover.popover-al[data-v-0aad2f08]{--background: #fff}ion-list.list-al[data-v-0aad2f08]{--background: #fff;-ion-item-background:#fff}.saveContainer[data-v-0aad2f08]{display:flex;align-items:flex-end}.action_buttons[data-v-0aad2f08]{margin-top:5px}.error-label[data-v-0aad2f08]{background:#fecdca;color:#b42318;text-transform:none;padding:6%;border-radius:10px;margin-top:7px;display:flex;text-align:center}.spc_btwn[data-v-0aad2f08]{margin-top:2%}.ion-lblCls[data-v-0aad2f08]{font-weight:700}.initTxt[data-v-fc637de7]{text-align:center}.spc_btwn[data-v-fc637de7]{margin-top:2%}.item-al[data-v-fc637de7]{cursor:pointer;padding:5px;background-color:#ebebeb;margin-top:8px}.item-al[data-v-fc637de7]:hover{background-color:rgba(85,81,81,.282);padding:5px;border-radius:3px}ion-popover.popover-al[data-v-fc637de7]{--background: #fff}ion-list.list-al[data-v-fc637de7]{--background: #fff;-ion-item-background:#fff}.saveContainer[data-v-fc637de7]{display:flex;align-items:flex-end}.action_buttons[data-v-fc637de7]{margin-top:5px}.error-label[data-v-fc637de7]{background:#fecdca;color:#b42318;text-transform:none;padding:6%;border-radius:10px;margin-top:7px;display:flex;text-align:center}\n/*$vite$:1*/",document.head.appendChild(a);const ma={key:0},pa={style:{"align-content":"center"}},va={class:"ion-padding",slot:"content"},ha=e("P",Ce(n({__name:"PresentingComplaints",setup(e,{expose:a}){const n=ue(),{presentingComplaints:y}=t(n),_=o(me),x=o(!0),w=o(!1),k=o(!1),C=o(!0),A=o(!1),D=o([]),O=o([]),P=o(),T=l(()=>[{componentType:"multiSelectInputField",header:"Presenting Complaints",name:"PresentingComplaints",trackBy:"concept_id",icon:me.search,hideSelected:!0,validation:e=>F(null==e?void 0:e.name,D.value)?"Presenting complaint already added":pe.required(e),options:O.value,grid:{s:"6"}},{componentType:"inputField",header:"Duration",name:"duration",icon:me.time,validation:e=>pe.isNotEmptyandNumber(e),grid:{s:"6"},unitOptions:[{label:"Hours",value:"Hours"},{label:"Days",value:"Days"},{label:"Weeks",value:"Weeks"},{label:"Months",value:"Months"},{label:"Years",value:"Years"}],unitValidation:e=>e&&""!==e?null:"Please select a unit."},{componentType:"inputField",header:"Specify the presenting complaint(s)",name:"Other (specify)",icon:me.editPen,validation:e=>F(e,D.value)?"Presenting complaint already added":pe.required(e),condition:e=>{var a;return"Other"===(null==e||null===(a=e.PresentingComplaints)||void 0===a?void 0:a.name)}},{componentType:"Alert",condition:e=>{var a;return null!=pe.required(null==e||null===(a=e.PresentingComplaints)||void 0===a?void 0:a.name)},backgroundColor:"lightyellow",textColor:"black",value:"Please search thoroughly for the complaint. If it is not listed, search and select the 'Other' option to specify the complaint.",name:"noMatchAlert"}]),{formRef:S}=ve(),N=e=>{var a;const n=e.duration+" "+e.duration_unit,t=e.PresentingComplaints,o="Other"===t.name?e["Other (specify)"]:t.name;D.value.push({actionBtn:!0,btn:["delete"],name:o,concept_id:t.concept_id,duration:t.duration,durationUnits:t.duration_unit,display:[o,n],data:[{concept_id:8578,value_coded:t.concept_id,obs_datetime:ye.getSessionDate(),child:[{concept_id:t.concept_id,value_text:n,obs_datetime:ye.getSessionDate()}]}]}),null===(a=S.value)||void 0===a||a.resetForm(),A.value=!0,E()},E=()=>{const e=["Cough","Convulsions"];w.value=D.value.some(a=>e.includes(a.name))},F=(e,a)=>a.some(a=>a.name===e),I=e=>{D.value=D.value.filter(a=>a.display[0]!==e.name)};return i(async()=>{await(async()=>{O.value=await Ke.getComplaintsList("Presenting complaint"),ge(y.value,"PresentingComplaints","multiSelectData",O.value)})()}),a({onSubmit:async()=>{const e=await _e.getObsByEncounterIdAndDate(xe.PRESENTING_COMPLAINTS),a=D.value.flatMap(e=>e.data);return a.length<=0&&e.length<=0?(we("Presenting complaints is required"),!1):(a.length<=0||(await _e.addObsToEncounterPatient(a,xe.PRESENTING_COMPLAINTS),ke("Presenting complaints saved successful"),D.value=[]),!0)}}),(e,a)=>{const n=r("ion-row"),t=r("ion-label"),o=r("ion-accordion"),l=r("ion-accordion-group");return d(),s(g,null,[c(Xe,{status:x.value,content:"No presenting complaints added"},null,8,["status"]),A.value?(d(),s("span",ma,[c(he,{listData:D.value,"onClicked:delete":I},null,8,["listData"])])):u("",!0),k.value?(d(),m(n,{key:1},{default:p(()=>[c(fe,{formData:T.value,ref_key:"formRef",ref:S},null,8,["formData"]),v("div",pa,[c(be,{fill:"clear",icon:_.value.plus,iconSlot:"icon-only","onClicked:btn":a[0]||(a[0]=e=>(async()=>{var e,a;const n=null===(e=S.value)||void 0===e?void 0:e.getFormValues();null==(null===(a=S.value)||void 0===a?void 0:a.validateForm())&&(N(n),k.value=!1,C.value=!0)})()),name:"Save"},null,8,["icon"])])]),_:1})):u("",!0),C.value?(d(),m(n,{key:2,style:{"margin-top":"10px"}},{default:p(()=>[c(be,{fill:"clear",icon:_.value.plus,iconSlot:"icon-only","onClicked:btn":a[1]||(a[1]=e=>(x.value=!1,C.value=!1,void(k.value=!0))),name:"Add new presenting complaints"},null,8,["icon"])]),_:1})):u("",!0),c(n,null,{default:p(()=>[c(l,{ref_key:"accordionGroup",ref:P,class:"previousView"},{default:p(()=>[c(o,{value:"first","toggle-icon-slot":"start",style:{"border-radius":"10px","background-color":"#fff"}},{default:p(()=>[c(h(f),{slot:"header",color:"light"},{default:p(()=>[c(t,{class:"previousLabel"},{default:p(()=>[...a[2]||(a[2]=[b("Previous presenting complaints",-1)])]),_:1})]),_:1}),v("div",va,[c($e)])]),_:1})]),_:1},512)]),_:1})],64)}}}),[["__scopeId","data-v-44affb13"]])),fa={class:"visit-section"},ba={class:"section-header"},ga={key:0,class:"no-data"},ya={key:1,class:"allergy-accordion"},_a=["onClick"],xa={class:"acc-left"},wa={class:"acc-title"},ka={class:"acc-count"},Ca={key:0,class:"accordion-body"},Aa={class:"item-label"},Da={class:"item-value"},Oa=Ce(n({__name:"AllergiesListing",setup(e){const a=Ae(),{patient:n}=t(a),m=o({}),p=o([]),f={antiviral:/abacavir|lamivudine|lopinavir|ritonavir|zidovudine|efavirenz|tenofovir/i,antibiotic:/penicillin|amoxicillin|cephalexin|azithromycin|ciprofloxacin|doxycycline/i,analgesic:/aspirin|ibuprofen|acetaminophen|morphine|codeine|tramadol/i,cardiac:/metoprolol|lisinopril|amlodipine|atorvastatin|warfarin/i,activated:/activated\s+charcoal/i},b={985:{name:"Drug Allergy",severity:"danger"},7759:{name:"Location/Environmental",severity:"info"},7579:{name:"Medical Condition",severity:"warning"},drug:{name:"Drug Allergy",severity:"danger"},food:{name:"Food Allergy",severity:"danger"},environmental:{name:"Environmental",severity:"warning"},contact:{name:"Contact Allergy",severity:"warning"},unknown:{name:"Drug Allergy",severity:"danger"}},O=async()=>{try{var e;if(null===(e=n.value)||void 0===e||!e.patientID)return;const a=await _e.getObsByEncounterIdAndDate(xe.MEDICAL_HISTORY),t=await De.getConceptID("Allergic"),o=a.filter(e=>e.concept_id===t);p.value=await Promise.all(o.map(async e=>{var a,n;const t=(null===(a=e.value_coded)||void 0===a?void 0:a.toString())||"unknown",o=await De.getConceptName(e.value_coded);let l=(null===(n=b[t])||void 0===n?void 0:n.name)||"Drug Allergy",i=e.value_text||o||"Unknown";return"985"===t&&e.value_text&&(l=(e=>{const a=e.toLowerCase();return f.antiviral.test(a)?"Antiviral Medication":f.antibiotic.test(a)?"Antibiotic":f.analgesic.test(a)?"Pain Medication":f.cardiac.test(a)?"Cardiac Medication":f.activated.test(a)?"Detoxification Agent":"Medication"})(e.value_text)),{name:l,displayValue:i,date:e.obs_datetime||e.encounter_datetime,conceptId:t}}));const l=Object.keys(T.value);l.length>0&&(m.value[l[0]]=!0)}catch(a){console.error("Error loading allergies:",a)}},P=l(()=>p.value.length>0),T=l(()=>{const e={};p.value.forEach(a=>{const n=a.date?S(a.date):"Unknown Date";e[n]||(e[n]=[]),e[n].push(a)});const a={};return Object.keys(e).sort((e,a)=>"Unknown Date"===e?1:"Unknown Date"===a?-1:new Date(a).getTime()-new Date(e).getTime()).forEach(n=>{a[n]=e[n]}),a}),S=e=>{if(!e)return"Unknown Date";try{return new Date(e).toISOString().split("T")[0]}catch(a){return"Unknown Date"}},N=e=>{if("Unknown Date"===e)return"Unknown Date";try{const a=new Date(e),n=Oe.sessionDate(),t=new Date(n),o=new Date(t);o.setDate(o.getDate()-1);const l=a.toDateString(),i=t.toDateString(),r=o.toDateString();return l===i?"Today":l===r?"Yesterday":a.toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})}catch(a){return e}};return y(()=>{var e;return null===(e=n.value)||void 0===e?void 0:e.patientID},async e=>{e&&await O()},{immediate:!0}),i(async()=>{await O()}),(e,a)=>{const n=r("ion-icon");return d(),s("div",fa,[v("div",ba,[c(n,{icon:h(_),class:"section-icon"},null,8,["icon"]),a[0]||(a[0]=v("h3",null,"Allergies",-1))]),P.value?(d(),s("div",ya,[(d(!0),s(g,null,w(T.value,(e,a)=>(d(),s("div",{key:a,class:"accordion-section"},[v("div",{class:A(["accordion-header",{open:m.value[a]}]),onClick:e=>(e=>{m.value[e]=!m.value[e]})(a)},[v("div",xa,[c(n,{icon:h(k),class:"acc-icon"},null,8,["icon"]),v("span",wa,C(N(a)),1),v("span",ka,"("+C(e.length)+")",1)]),c(n,{icon:h(D),class:A(["chevron",{rotate:m.value[a]}])},null,8,["icon","class"])],10,_a),m.value[a]?(d(),s("div",Ca,[(d(!0),s(g,null,w(e,(e,a)=>(d(),s("div",{class:"allergy-item",key:a},[v("span",Aa,C(e.name)+":",1),v("span",Da,C(e.displayValue),1)]))),128))])):u("",!0)]))),128))])):(d(),s("div",ga,[c(n,{icon:h(x),class:"no-data-icon"},null,8,["icon"]),a[1]||(a[1]=v("p",null,"No known allergies",-1))]))])}}}),[["__scopeId","data-v-f7cd569d"]]),Pa=n({name:"VisitHistory",components:{AllergiesListing:Oa,IonIcon:P},setup(){const e=Pe();return{selectedAllergiesList2:l(()=>e.selectedMedicalAllergiesList),alertCircleOutline:_,documentTextOutline:z,femaleOutline:L,medicalOutline:R,warningOutline:U,bodyOutline:T,eyeOutline:M,nutritionOutline:Y,fitnessOutline:I,pulseOutline:E,earOutline:B,happyOutline:H,manOutline:V,moveOutline:F,addOutline:N,scanOutline:S}},data:()=>({presentingComplaintsWithDuration:[],pastMedicalHistory:[],levelOfConsciousness:{eyeResponse:null,verbalResponse:null,motorResponse:null},pregnancy:{patientPregnant:null,breastFeeding:null},allergyList:[],physicalExamCategories:{Eyes:{icon:M,abnormalities:[],normal:!1},Mouth:{icon:Y,abnormalities:[],normal:!1},Ears:{icon:B,abnormalities:[],normal:!1},Face:{icon:H,abnormalities:[],normal:!1},Neck:{icon:V,abnormalities:[],normal:!1},Chest:{icon:I,abnormalities:[],normal:!1},"Chest Movement":{icon:F,abnormalities:[],normal:!1},"Heart Sounds":{icon:E,abnormalities:[],normal:!1},"Breath Sounds":{icon:N,abnormalities:[],normal:!1},"Added Breath Sounds":{icon:N,abnormalities:[],normal:!1},"Abdominal Inspection":{icon:S,abnormalities:[],normal:!1},"Genital Examination":{icon:T,abnormalities:[],normal:!1}}}),computed:{...O(Ae,["patient"]),hasLevelOfConsciousness(){return this.levelOfConsciousness.eyeResponse||this.levelOfConsciousness.verbalResponse||this.levelOfConsciousness.motorResponse},hasPresentingComplaints(){var e;return(null===(e=this.presentingComplaintsWithDuration)||void 0===e?void 0:e.length)>0},hasPregnancyData(){return this.pregnancy.patientPregnant||this.pregnancy.breastFeeding},hasPastMedicalHistory(){var e;return(null===(e=this.uniquePastMedicalHistory)||void 0===e?void 0:e.length)>0},hasAllergies(){var e;return(null===(e=this.allergyList)||void 0===e?void 0:e.length)>0},hasPhysicalExam(){return Object.values(this.physicalExamCategories).some(e=>e.abnormalities.length>0||e.normal)},uniquePastMedicalHistory(){return[...new Set(this.pastMedicalHistory)]},uniquePresentingComplaints(){return[...new Set(this.presentingComplaintsWithDuration.map(e=>e.name))]},isMinor(){var e;return Oe.getAgeInYears(null===(e=this.patient)||void 0===e||null===(e=e.personInformation)||void 0===e?void 0:e.birthdate)<18},gcsScore(){var e,a,n;if(!this.hasLevelOfConsciousness)return null;const t=this.levelOfConsciousness.eyeResponse,o=this.levelOfConsciousness.motorResponse,l=this.levelOfConsciousness.verbalResponse,i=t&&null!==(e=(this.isMinor?Re:Le)[t])&&void 0!==e?e:0,r=o&&null!==(a=(this.isMinor?ze:qe)[o])&&void 0!==a?a:0,s=l&&null!==(n=(this.isMinor?Ge:We)[l])&&void 0!==n?n:0;return`(M ${r} V ${s} E ${i}) ${i+r+s}/${this.isMinor?5:15}`}},methods:{async updateData(){var e;null!==(e=this.patient)&&void 0!==e&&e.patientID&&(await this.loadPresentingComplaints(),await this.loadPastMedicalHistory(),await this.loadLevelOfConsciousness(),await this.loadPregnancyStatus(),await this.loadPhysicalExam(),await this.loadAllergies())},async loadPresentingComplaints(){try{const e=await _e.getObsByEncounterIdAndDate(xe.PRESENTING_COMPLAINTS);this.presentingComplaintsWithDuration=[];const a=e.filter(e=>8578===e.concept_id);for(const n of a){const e=await De.getConceptName(n.value_coded);let a="Duration not specified";n.child&&n.child.length>0&&(a=n.child[0].value_text||"Duration not specified"),this.presentingComplaintsWithDuration.push({name:e,duration:a})}}catch(e){console.error("Error loading presenting complaints:",e)}},async loadPastMedicalHistory(){try{const e=(await _e.getObsByEncounterIdAndDate(xe.PAST_MEDICAL_HISTORY)).filter(e=>"Chronic disease"===e.concept_name);this.pastMedicalHistory=await Promise.all(e.map(async e=>await De.getConceptName(e.value_coded)))}catch(e){console.error("Error loading past medical history:",e)}},async loadLevelOfConsciousness(){try{const e=await _e.getObsByEncounterIdAndDate(xe.ASSESSMENT);if(e&&Array.isArray(e)){const a=e.find(e=>"Eye opening response"===e.concept_name);this.levelOfConsciousness.eyeResponse=null!=a&&a.value_coded?await De.getConceptName(a.value_coded):null;const n=e.find(e=>"Best verbal response"===e.concept_name);this.levelOfConsciousness.verbalResponse=null!=n&&n.value_coded?await De.getConceptName(n.value_coded):null;const t=e.find(e=>"Best motor response"===e.concept_name);this.levelOfConsciousness.motorResponse=null!=t&&t.value_coded?await De.getConceptName(t.value_coded):null}}catch(e){console.error("Error loading level of consciousness:",e)}},async loadPregnancyStatus(){try{const e=await _e.getObsByEncounterIdAndDate(xe.PREGNANCY_STATUS);if(e&&Array.isArray(e)){const a=e.find(e=>"Patient pregnant"===e.concept_name);this.pregnancy.patientPregnant=null!=a&&a.value_coded?await De.getConceptName(a.value_coded):null;const n=e.find(e=>"Is patient breast feeding?"===e.concept_name);this.pregnancy.breastFeeding=null!=n&&n.value_coded?await De.getConceptName(n.value_coded):null}}catch(e){console.error("Error loading pregnancy status:",e)}},async loadAllergies(){try{const e=await _e.getObsByEncounterIdAndDate(xe.MEDICAL_HISTORY),a=await De.getConceptID("Allergic"),n=e.filter(e=>e.concept_id===a);this.allergyList=await Promise.all(n.map(async e=>e.value_text||await De.getConceptName(e.value_coded)))}catch(e){console.error("Error loading allergies:",e)}},async loadPhysicalExam(){try{const e=await _e.getObsByEncounterIdAndDate(xe.PHYSICAL_EXAMINATION);Object.values(this.physicalExamCategories).forEach(e=>{e.abnormalities=[],e.normal=!1});for(const a of e)if(a.concept_id){if(1065===a.value_coded)switch(a.concept_id){case 10837:this.physicalExamCategories.Eyes.normal=!0;break;case 10842:this.physicalExamCategories.Mouth.normal=!0;break;case 11028:this.physicalExamCategories.Ears.normal=!0;break;case 10854:this.physicalExamCategories.Face.normal=!0;break;case 10858:this.physicalExamCategories.Neck.normal=!0;break;case 10894:this.physicalExamCategories.Chest.normal=!0;break;case 10903:this.physicalExamCategories["Heart Sounds"].normal=!0;break;case 10909:this.physicalExamCategories["Breath Sounds"].normal=!0;break;case 10919:case 10928:case 10939:this.physicalExamCategories["Abdominal Inspection"].normal=!0;break;case 10803:case 10946:this.physicalExamCategories["Genital Examination"].normal=!0}if(a.value_coded){const e=await De.getConceptName(a.value_coded);switch(a.concept_id){case 10838:this.physicalExamCategories.Eyes.abnormalities.push(e);break;case 10843:this.physicalExamCategories.Mouth.abnormalities.push(e);break;case 10852:this.physicalExamCategories.Ears.abnormalities.push(e);break;case 10855:this.physicalExamCategories.Face.abnormalities.push(e);break;case 10859:this.physicalExamCategories.Neck.abnormalities.push(e);break;case 10897:this.physicalExamCategories.Chest.abnormalities.push(e);break;case 10904:this.physicalExamCategories["Heart Sounds"].abnormalities.push(e);break;case 10910:this.physicalExamCategories["Breath Sounds"].abnormalities.push(e);break;case 10920:case 10929:case 10939:this.physicalExamCategories["Abdominal Inspection"].abnormalities.push(e);break;case 10797:case 10804:case 10947:this.physicalExamCategories["Genital Examination"].abnormalities.push(e)}}}}catch(e){console.error("Error loading physical exam:",e)}}},watch:{patient:{async handler(){await this.updateData()},deep:!0}},async mounted(){await this.updateData()}}),Ta={class:"visit-container"},Sa={class:"visit-sections"},Na={key:0,class:"visit-section"},Ea={class:"section-header"},Fa={class:"section-content"},Ia={key:0,class:"info-item"},Va={class:"info-value"},Ha={key:1,class:"info-item"},Ba={class:"info-value"},Ya={key:2,class:"info-item"},Ma={class:"info-value"},Ua={key:3,class:"info-item"},Ra={class:"info-value highlight"},La={key:1,class:"visit-section"},za={class:"section-header"},qa={class:"complaints-container"},Ga={class:"complaint-name"},Wa={class:"complaint-duration"},ja={key:2,class:"visit-section"},$a={class:"section-header"},Ka={class:"section-content"},Xa={key:0,class:"info-item"},Ja={class:"info-value highlight"},Qa={key:1,class:"info-item"},Za={class:"info-value highlight"},en={key:3,class:"visit-section"},an={class:"section-header"},nn={class:"tags-container"},tn={key:4,class:"visit-section"},on={class:"section-header"},ln={class:"tags-container"},rn={key:5,class:"visit-section"},sn={class:"section-header"},dn={class:"exam-section"},cn={key:0,class:"exam-category"},un={class:"exam-category-header"},mn={class:"exam-items"},pn={key:1,class:"exam-item normal"},vn=Ce(Pa,[["render",function(e,a,n,t,o,l){const i=r("ion-icon");return d(),s("div",Ta,[a[12]||(a[12]=v("div",{class:"visit-header"},[v("h5",null,"Patient's Clinical Assessment Summary")],-1)),v("div",Sa,[e.hasLevelOfConsciousness?(d(),s("div",Na,[v("div",Ea,[c(i,{icon:e.alertCircleOutline,class:"section-icon"},null,8,["icon"]),a[0]||(a[0]=v("h3",null,"Level of Consciousness",-1))]),v("div",Fa,[e.levelOfConsciousness.eyeResponse?(d(),s("div",Ia,[a[1]||(a[1]=v("span",{class:"info-label"},"Eye Response:",-1)),v("span",Va,C(e.levelOfConsciousness.eyeResponse),1)])):u("",!0),e.levelOfConsciousness.verbalResponse?(d(),s("div",Ha,[a[2]||(a[2]=v("span",{class:"info-label"},"Verbal Response:",-1)),v("span",Ba,C(e.levelOfConsciousness.verbalResponse),1)])):u("",!0),e.levelOfConsciousness.motorResponse?(d(),s("div",Ya,[a[3]||(a[3]=v("span",{class:"info-label"},"Motor Response:",-1)),v("span",Ma,C(e.levelOfConsciousness.motorResponse),1)])):u("",!0),e.gcsScore?(d(),s("div",Ua,[a[4]||(a[4]=v("span",{class:"info-label"},"Score:",-1)),v("span",Ra,C(e.gcsScore),1)])):u("",!0)])])):u("",!0),e.hasPresentingComplaints?(d(),s("div",La,[v("div",za,[c(i,{icon:e.documentTextOutline,class:"section-icon"},null,8,["icon"]),a[5]||(a[5]=v("h3",null,"Presenting Complaints",-1))]),v("div",qa,[(d(!0),s(g,null,w(e.presentingComplaintsWithDuration,(e,a)=>(d(),s("div",{class:"complaint-item",key:a},[v("div",Ga,C(e.name),1),v("div",Wa,C(e.duration),1)]))),128))])])):u("",!0),e.hasPregnancyData?(d(),s("div",ja,[v("div",$a,[c(i,{icon:e.femaleOutline,class:"section-icon"},null,8,["icon"]),a[6]||(a[6]=v("h3",null,"Pregnancy Status",-1))]),v("div",Ka,[e.pregnancy.patientPregnant?(d(),s("div",Xa,[a[7]||(a[7]=v("span",{class:"info-label"},"Pregnant:",-1)),v("span",Ja,C(e.pregnancy.patientPregnant),1)])):u("",!0),e.pregnancy.breastFeeding?(d(),s("div",Qa,[a[8]||(a[8]=v("span",{class:"info-label"},"Breastfeeding:",-1)),v("span",Za,C(e.pregnancy.breastFeeding),1)])):u("",!0)])])):u("",!0),e.hasPastMedicalHistory?(d(),s("div",en,[v("div",an,[c(i,{icon:e.medicalOutline,class:"section-icon"},null,8,["icon"]),a[9]||(a[9]=v("h3",null,"Medical History",-1))]),v("div",nn,[(d(!0),s(g,null,w(e.uniquePastMedicalHistory,(e,a)=>(d(),s("div",{class:"medical-tag",key:a},C(e),1))),128))])])):u("",!0),e.hasAllergies?(d(),s("div",tn,[v("div",on,[c(i,{icon:e.warningOutline,class:"section-icon"},null,8,["icon"]),a[10]||(a[10]=v("h3",null,"Allergies",-1))]),v("div",ln,[(d(!0),s(g,null,w(e.allergyList,(e,a)=>(d(),s("div",{class:"allergy-tag",key:a},C(e),1))),128))])])):u("",!0),e.hasPhysicalExam?(d(),s("div",rn,[v("div",sn,[c(i,{icon:e.bodyOutline,class:"section-icon"},null,8,["icon"]),a[11]||(a[11]=v("h3",null,"Physical Examination",-1))]),v("div",dn,[(d(!0),s(g,null,w(e.physicalExamCategories,(e,a)=>(d(),s(g,{key:a},[e.abnormalities.length>0||e.normal?(d(),s("div",cn,[v("div",un,[c(i,{icon:e.icon},null,8,["icon"]),v("h4",null,C(a),1)]),v("div",mn,[e.abnormalities.length>0?(d(!0),s(g,{key:0},w(e.abnormalities,(e,a)=>(d(),s("div",{class:"exam-item abnormal",key:a},C(e),1))),128)):e.normal?(d(),s("div",pn,"Normal examination")):u("",!0)])])):u("",!0)],64))),128))])])):u("",!0)])])}],["__scopeId","data-v-49bf6f48"]]),hn={class:"modal_wrapper"},fn=e("_",n({__name:"PregnancyBreastfeeding",setup(e,{expose:a}){const n=Te(),{pregnancy:o}=t(n),l=()=>{};return a({onSubmit:async()=>{const e=await Qe(o.value);e.length>0?(await _e.addObsToEncounterPatient(e,xe.PREGNANCY_STATUS),ke("Pregnancy status saved successfully")):we("No pregnancy status data to save ")}}),(e,a)=>(d(),s("div",hn,[c(Je,{contentData:h(o),"onUpdate:inputValue":l},null,8,["contentData"])]))}})),bn=n({__name:"PastMedicalHistory",setup(e,{expose:a}){const n=(()=>{const e=Ae(),{patient:a}=t(e);return{resetForm:()=>{},pastMedicalHistoryFormSection:l(()=>{var e,n;return[{componentType:"Heading",name:"Existing Chronic Health Conditions",grid:{s:"12"}},{componentType:"checkboxField",name:"TB",label:"TB",type:"single",grid:{s:"12"},disabled:e=>e.None,onChange:(e,a)=>{const n={};return e||(n["TB treatment"]="",n["TB drugs"]=null,n["TB drug start date"]=""),n}},{componentType:"radioButtonField",header:"On TB medication",name:"TB treatment",options:[{value:"Yes",label:"Yes"},{value:"No",label:"No"}],grid:{s:"12"},condition:e=>!0===e.TB,onChange:(e,a)=>{const n={};return"Yes"!==e&&(n["TB drugs"]=null,n["TB drug start date"]=""),n}},{componentType:"multiSelectInputField",header:"Select medication",name:"TB drugs",isMultiple:!1,trackBy:"name",grid:{s:"6"},icon:me.search,options:[{name:"Auramine 'O' (C.I. 41000) 50g"},{name:"Bedaquilline 100mg"},{name:"Clofazimine 100mg"},{name:"Clofazimine 50mg"}],condition:e=>!0===e.TB&&"Yes"===e["TB treatment"]},{componentType:"dateInputField",header:"Start date",name:"TB drug start date",grid:{s:"6"},condition:e=>!0===e.TB&&"Yes"===e["TB treatment"],minDate:(null===(e=a.value)||void 0===e||null===(e=e.personInformation)||void 0===e?void 0:e.birthdate)||void 0,maxDate:(new Date).toISOString().split("T")[0]},{grid:{s:"12"},componentType:"Dashes"},{componentType:"checkboxField",name:"Chronic Obstructive Pulmonary Disease (COPD)",label:"Chronic Obstructive Pulmonary Disease (COPD)",type:"single",grid:{s:"12"},disabled:e=>e.None,onChange:()=>({})},{grid:{s:"12"},componentType:"Dashes"},{componentType:"checkboxField",name:"Asthma",label:"Asthma",type:"single",grid:{s:"12"},disabled:e=>e.None,onChange:()=>({})},{grid:{s:"12"},componentType:"Dashes"},{componentType:"checkboxField",name:"Epilepsy",label:"Epilepsy",type:"single",grid:{s:"12"},disabled:e=>e.None,onChange:()=>({})},{grid:{s:"12"},componentType:"Dashes"},{componentType:"checkboxField",name:"Previous stroke",label:"Previous stroke",type:"single",grid:{s:"12"},disabled:e=>e.None,onChange:()=>({})},{grid:{s:"12"},componentType:"Dashes"},{componentType:"checkboxField",name:"Peptic Ulcer Disease (PUD)",label:"Peptic Ulcer Disease (PUD)",type:"single",grid:{s:"12"},disabled:e=>e.None,onChange:()=>({})},{grid:{s:"12"},componentType:"Dashes"},{componentType:"checkboxField",name:"Mental disorder",label:"Mental disorder",type:"single",grid:{s:"12"},disabled:e=>e.None,onChange:()=>({})},{grid:{s:"12"},componentType:"Dashes"},{componentType:"checkboxField",name:"Bleeding disorders",label:"Bleeding disorders",type:"single",grid:{s:"12"},disabled:e=>e.None,onChange:()=>({})},{grid:{s:"12"},componentType:"Dashes"},{componentType:"checkboxField",name:"Hypertension",label:"Hypertension",type:"single",grid:{s:"12"},disabled:e=>e.None,onChange:(e,a)=>{const n={};return e||(n["Hypertension medication"]="",n["Current hypertension treatment regimen"]=null),n}},{componentType:"radioButtonField",header:"On medication",name:"Hypertension medication",options:[{value:"Yes",label:"Yes"},{value:"No",label:"No"}],grid:{s:"12"},condition:e=>!0===e.Hypertension,onChange:(e,a)=>{const n={};return"Yes"!==e&&(n["Current hypertension treatment regimen"]=null),n}},{componentType:"multiSelectInputField",header:"Select medication",name:"Current hypertension treatment regimen",isMultiple:!1,trackBy:"name",grid:{s:"12"},icon:me.search,options:[{name:"Captopril 12.5mg"},{name:"Aspirin 75mg"},{name:"Hydrochlorothiazide 25mg"},{name:"Enalapril Meleate 5mg"},{name:"Enalapril Maleate 10mg"}],condition:e=>!0===e.Hypertension&&"Yes"===e["Hypertension medication"]},{grid:{s:"12"},componentType:"Dashes"},{componentType:"checkboxField",name:"HIV Positive",label:"HIV Positive",type:"single",grid:{s:"12"},disabled:e=>e.None,onChange:(e,a)=>{const n={};return e||(n["HIV status"]="",n["ARV start date"]=""),n}},{componentType:"radioButtonField",header:"Is the patient on ART",name:"HIV status",options:[{value:"Yes",label:"Yes"},{value:"No",label:"No"}],grid:{s:"12"},condition:e=>!0===e["HIV Positive"],onChange:(e,a)=>{const n={};return"Yes"!==e&&(n["ARV start date"]=""),n}},{componentType:"dateInputField",header:"Enter ARV start date",name:"ARV start date",grid:{s:"12"},condition:e=>!0===e["HIV Positive"]&&"Yes"===e["HIV status"],minDate:(null===(n=a.value)||void 0===n||null===(n=n.personInformation)||void 0===n?void 0:n.birthdate)||void 0,maxDate:(new Date).toISOString().split("T")[0]},{grid:{s:"12"},componentType:"Dashes"},{componentType:"checkboxField",name:"Diabetes Mellitus",label:"Diabetes Mellitus",type:"single",grid:{s:"12"},disabled:e=>e.None,onChange:(e,a)=>{const n={};return e||(n.Diabetes="",n["Controlled by"]=""),n}},{componentType:"radioButtonField",header:"Type",name:"Diabetes",options:[{value:"Type 1 diabetes",label:"Type I"},{value:"Type 2 diabetes",label:"Type II"},{value:"Unknown",label:"Unsure"}],grid:{s:"12"},condition:e=>!0===e["Diabetes Mellitus"]},{componentType:"radioButtonField",header:"Controlled by",name:"Controlled by",options:[{value:"Diet",label:"Diet"},{value:"Tablets",label:"Tablets"},{value:"Insulin",label:"Insulin"}],grid:{s:"12"},condition:e=>!0===e["Diabetes Mellitus"]},{grid:{s:"12"},componentType:"Dashes"},{componentType:"checkboxField",name:"None",label:"None",type:"single",grid:{s:"12"},onChange:(e,a)=>{const n={};return e&&(n.TB=!1,n["Chronic Obstructive Pulmonary Disease (COPD)"]=!1,n.Asthma=!1,n.Epilepsy=!1,n["Previous stroke"]=!1,n["Peptic Ulcer Disease (PUD)"]=!1,n["Mental disorder"]=!1,n["Bleeding disorders"]=!1,n.Hypertension=!1,n["HIV Positive"]=!1,n["Diabetes Mellitus"]=!1,n["TB treatment"]="",n["TB drugs"]=null,n["TB drug start date"]="",n["Hypertension medication"]="",n["Current hypertension treatment regimen"]=null,n["HIV status"]="",n["ARV start date"]="",n.Diabetes="",n["Controlled by"]=""),n}}]})}})(),r=o(null),s=o(0),c=Ae(),{patient:u}=t(c);y(()=>{var e;return null===(e=u.value)||void 0===e?void 0:e.patientID},async(e,a)=>{e&&e!==a&&(console.log("Patient changed, resetting form"),s.value++,await q(),await q())}),y(()=>{var e;return null===(e=r.value)||void 0===e||null===(e=e.getFormValues())||void 0===e?void 0:e.None},e=>{e&&r.value&&q(()=>{})});const p=async e=>{const a=[];for(const[t,o]of Object.entries(e))if(o&&!1!==o&&""!==o)if("boolean"==typeof o&&!0===o)try{const e=await De.getConceptID(t,!0);e&&a.push(await _e.buildValueCoded("Chronic disease",e))}catch(n){a.push(await _e.buildValueText("Chronic disease",t))}else"string"==typeof o?a.push(await _e.buildValueText(t,o)):"object"==typeof o&&null!=o&&o.name?a.push(await _e.buildValueText(t,o.name)):(o instanceof Date||/^\d{4}-\d{2}-\d{2}$/.test(o))&&a.push(await _e.buildValueDate(t,o));return console.log("Processed past medical history:",a),a};i(async()=>{console.log("Past medical history form mounted"),await q(),await q()});const v=l(()=>n.pastMedicalHistoryFormSection.value);return a({validateForm:()=>{var e;return null===(e=r.value)||void 0===e?void 0:e.validateForm()},onSubmit:async()=>{if(!r.value)return console.error("Form reference is not available"),!1;const e=r.value.validateForm();if(e)return console.log("Validation errors:",e),we("Please fix validation errors before submitting"),!1;const a=r.value.getFormValues();console.log("Form data:",a);const n=await p(a);return 0===n.length?(we("No past medical history data to save"),!1):(await _e.addObsToEncounterPatient(n,xe.PAST_MEDICAL_HISTORY),s.value++,await q(),await q(),ke("Past medical history saved successfully"),!0)},resetForm:()=>{s.value++}}),(e,a)=>(d(),m(fe,{formData:v.value,ref_key:"formRef",ref:r,key:s.value},null,8,["formData"]))}}),gn=e("a",n({__name:"PhysicalExamination",setup(e,{expose:a}){const n=(()=>{const e=Ae(),{patient:a}=t(e);return{resetForm:()=>{},physicalExaminationFormSection:l(()=>{var e;const n=null===(e=a.value)||void 0===e||null===(e=e.personInformation)||void 0===e?void 0:e.gender,t="M"===n,o="F"===n;return[{componentType:"radioButtonField",header:"Has physical examination been done?",name:"Physical examination",options:[{value:"Yes",label:"Yes"},{value:"No",label:"No"}],grid:{s:"12"},onChange:(e,a)=>{if("No"===e)return{"Eyes normal":"","Abnormality for eyes":[],"Other eye abnormality notes":"","Mouth normal":"","Abnormality for  mouth":[],"Other mouth abnormality notes":"","Ears normal":"","Abnormality for ears":[],"Other ears abnormality notes":"","Face normal":"","Abnormality for face":[],"Other face abnormality notes":"","Neck normal":"","Abnormality for neck":[],"Other neck abnormality notes":"","Chest inspection normal":"","Abnormality for  chest inspection":[],"Other chest abnormality notes":"","Chest movements":"","Heart sounds normal":"","Heart sounds abnormality":[],"Breath sounds normal":"","Breath sounds abnormality":[],"Abnormalities when added":[],"Abdominal inspection normal":"","Abdominal inspection abnormality":[],"Other abdominal abnormality notes":"","Abdominal auscultation normal":"","Abdominal auscultation abnormality":[],"Other abdominal auscultation abnormality notes":"","Bowel sounds abnormality":[],"Abdominal palpation normal":"","Abdominal palpation abnormality":[],"Other abdominal palpation abnormality notes":"","Genital examination normal":"","Genital examination abnormality":[],"Urethral meatus abnormalities":[],"Vulva inspection abnormalities":[],"Other genital abnormality notes":"","Extremities normal":"","Abnormality for extremities":[],"Other extremities abnormalities notes":""}}},{grid:{s:"12"},componentType:"Dashes"},{componentType:"radioButtonField",header:"Reason why physical examination not done?",name:"Reason why physical examination not done",options:[{value:"Condition does not necessitate assessment",label:"Condition does not necessitate assessment"},{value:"Patient refused to consent",label:"Patient refused to consent"}],grid:{s:"12"},condition:e=>"No"===e["Physical examination"]},{componentType:"radioButtonField",header:"Eyes normal?",name:"Eyes normal",options:[{value:"Yes",label:"Yes"},{value:"No",label:"No"}],grid:{s:"12"},condition:e=>"Yes"===e["Physical examination"],onChange:(e,a)=>{if("Yes"===e)return{"Abnormality for eyes":[],"Other eye abnormality notes":""}}},{componentType:"checkboxField",header:"What are the abnormalities on eyes?",name:"Abnormality for eyes",type:"multiple",options:[{value:"Pallor",label:"Pallor"},{value:"Jaundice",label:"Jaundice"},{value:"Ulcerations",label:"Ulcerations"},{value:"Other eye abnormality",label:"Other eye abnormality"}],grid:{s:"12"},condition:e=>"Yes"===e["Physical examination"]&&"No"===e["Eyes normal"],onChange:(e,a)=>{if(null==e||!e.includes("Other eye abnormality"))return{"Other eye abnormality notes":""}}},{componentType:"inputField",header:"Specify eye abnormality",name:"Other eye abnormality notes",icon:me.editPen,grid:{s:"12"},condition:e=>"Yes"===e["Physical examination"]&&"No"===e["Eyes normal"]&&Array.isArray(e["Abnormality for eyes"])&&e["Abnormality for eyes"].includes("Other eye abnormality")},{grid:{s:"12"},componentType:"Dashes"},{componentType:"radioButtonField",header:"Mouth normal?",name:"Mouth normal",options:[{value:"Yes",label:"Yes"},{value:"No",label:"No"}],grid:{s:"12"},condition:e=>"Yes"===e["Physical examination"],onChange:(e,a)=>{if("Yes"===e)return{"Abnormality for  mouth":[],"Other mouth abnormality notes":""}}},{componentType:"checkboxField",header:"What are the abnormalities in the mouth?",name:"Abnormality for  mouth",type:"multiple",options:[{value:"Oral thrush",label:"Oral thrush"},{value:"Kaposi's Sarcoma lesions",label:"Kaposi's Sarcoma lesions"},{value:"Sores",label:"Sores"},{value:"Other mouth abnormality",label:"Other mouth abnormality"}],grid:{s:"12"},condition:e=>"Yes"===e["Physical examination"]&&"No"===e["Mouth normal"],onChange:(e,a)=>{if(null==e||!e.includes("Other mouth abnormality"))return{"Other mouth abnormality notes":""}}},{componentType:"inputField",header:"Specify mouth abnormality",name:"Other mouth abnormality notes",icon:me.editPen,grid:{s:"12"},condition:e=>"Yes"===e["Physical examination"]&&"No"===e["Mouth normal"]&&Array.isArray(e["Abnormality for  mouth"])&&e["Abnormality for  mouth"].includes("Other mouth abnormality")},{grid:{s:"12"},componentType:"Dashes"},{componentType:"radioButtonField",header:"Ears normal?",name:"Ears normal",options:[{value:"Yes",label:"Yes"},{value:"No",label:"No"}],grid:{s:"12"},condition:e=>"Yes"===e["Physical examination"],onChange:(e,a)=>{if("Yes"===e)return{"Abnormality for ears":[],"Other ears abnormality notes":""}}},{componentType:"checkboxField",header:"What are the abnormalities on ears?",name:"Abnormality for ears",type:"multiple",options:[{value:"Ear discharge",label:"Ear discharge"},{value:"Bleeding",label:"Bleeding"},{value:"Other ears abnormality",label:"Other ears abnormality"}],grid:{s:"12"},condition:e=>"Yes"===e["Physical examination"]&&"No"===e["Ears normal"],onChange:(e,a)=>{if(null==e||!e.includes("Other ears abnormality"))return{"Other ears abnormality notes":""}}},{componentType:"inputField",header:"Specify ears abnormality",name:"Other ears abnormality notes",icon:me.editPen,grid:{s:"12"},condition:e=>"Yes"===e["Physical examination"]&&"No"===e["Ears normal"]&&Array.isArray(e["Abnormality for ears"])&&e["Abnormality for ears"].includes("Other ears abnormality")},{grid:{s:"12"},componentType:"Dashes"},{componentType:"radioButtonField",header:"Face normal?",name:"Face normal",options:[{value:"Yes",label:"Yes"},{value:"No",label:"No"}],grid:{s:"12"},condition:e=>"Yes"===e["Physical examination"],onChange:(e,a)=>{if("Yes"===e)return{"Abnormality for face":[],"Other face abnormality notes":""}}},{componentType:"checkboxField",header:"What are the abnormalities on face?",name:"Abnormality for face",type:"multiple",options:[{value:"Rash",label:"Rash"},{value:"Swelling",label:"Swelling"},{value:"Other face abnormality",label:"Other face abnormality"}],grid:{s:"12"},condition:e=>"Yes"===e["Physical examination"]&&"No"===e["Face normal"],onChange:(e,a)=>{if(null==e||!e.includes("Other face abnormality"))return{"Other face abnormality notes":""}}},{componentType:"inputField",header:"Specify face abnormality",name:"Other face abnormality notes",icon:me.editPen,grid:{s:"12"},condition:e=>"Yes"===e["Physical examination"]&&"No"===e["Face normal"]&&Array.isArray(e["Abnormality for face"])&&e["Abnormality for face"].includes("Other face abnormality")},{grid:{s:"12"},componentType:"Dashes"},{componentType:"radioButtonField",header:"Neck normal?",name:"Neck normal",options:[{value:"Yes",label:"Yes"},{value:"No",label:"No"}],grid:{s:"12"},condition:e=>"Yes"===e["Physical examination"],onChange:(e,a)=>{if("Yes"===e)return{"Abnormality for neck":[],"Other neck abnormality notes":""}}},{componentType:"checkboxField",header:"What are the abnormalities on the neck?",name:"Abnormality for neck",type:"multiple",options:[{value:"Neck rash",label:"Neck rash"},{value:"Swelling",label:"Swelling"},{value:"Neck mass",label:"Neck mass"},{value:"Other neck abnormality",label:"Other neck abnormality"}],grid:{s:"12"},condition:e=>"Yes"===e["Physical examination"]&&"No"===e["Neck normal"],onChange:(e,a)=>{if(null==e||!e.includes("Other neck abnormality"))return{"Other neck abnormality notes":""}}},{componentType:"inputField",header:"Specify neck abnormality",name:"Other neck abnormality notes",icon:me.editPen,grid:{s:"12"},condition:e=>"Yes"===e["Physical examination"]&&"No"===e["Neck normal"]&&Array.isArray(e["Abnormality for neck"])&&e["Abnormality for neck"].includes("Other neck abnormality")},{grid:{s:"12"},componentType:"Dashes"},{componentType:"radioButtonField",header:"Chest inspection normal?",name:"Chest inspection normal",options:[{value:"Yes",label:"Yes"},{value:"No",label:"No"}],grid:{s:"12"},condition:e=>"Yes"===e["Physical examination"],onChange:(e,a)=>{if("Yes"===e)return{"Abnormality for  chest inspection":[],"Other chest abnormality notes":""}}},{componentType:"checkboxField",header:"What are the abnormalities on the chest?",name:"Abnormality for  chest inspection",type:"multiple",options:[{value:"Chest rash",label:"Chest rash"},{value:"Chest burns",label:"Chest burns"},{value:"Chest bruises",label:"Chest bruises"},{value:"Chest wounds",label:"Chest wounds"},{value:"Other chest abnormality",label:"Other chest abnormality"}],grid:{s:"12"},condition:e=>"Yes"===e["Physical examination"]&&"No"===e["Chest inspection normal"],onChange:(e,a)=>{if(null==e||!e.includes("Other chest abnormality"))return{"Other chest abnormality notes":""}}},{componentType:"inputField",header:"Specify chest abnormality",name:"Other chest abnormality notes",icon:me.editPen,grid:{s:"12"},condition:e=>"Yes"===e["Physical examination"]&&"No"===e["Chest inspection normal"]&&Array.isArray(e["Abnormality for  chest inspection"])&&e["Abnormality for  chest inspection"].includes("Other chest abnormality")},{grid:{s:"12"},componentType:"Dashes"},{componentType:"radioButtonField",header:"Chest movement?",name:"Chest movements",options:[{value:"Symmetrical",label:"Symmetrical"},{value:"Asymmetrical",label:"Asymmetrical"}],grid:{s:"12"},condition:e=>"Yes"===e["Physical examination"]},{grid:{s:"12"},componentType:"Dashes"},{componentType:"radioButtonField",header:"Heart sounds normal?",name:"Heart sounds normal",options:[{value:"Yes",label:"Yes"},{value:"No",label:"No"}],grid:{s:"12"},condition:e=>"Yes"===e["Physical examination"],onChange:(e,a)=>{if("Yes"===e)return{"Heart sounds abnormality":[]}}},{componentType:"checkboxField",header:"What are the abnormalities on the heart sounds?",name:"Heart sounds abnormality",type:"multiple",options:[{value:"Loud P2",label:"Loud P2"},{value:"Splitting P2",label:"Splitting P2"},{value:"Gallop rhythm",label:"Gallop rhythm"},{value:"Murmur",label:"Murmur"}],grid:{s:"12"},condition:e=>"Yes"===e["Physical examination"]&&"No"===e["Heart sounds normal"]},{grid:{s:"12"},componentType:"Dashes"},{componentType:"radioButtonField",header:"Breath sounds normal?",name:"Breath sounds normal",options:[{value:"Yes",label:"Yes"},{value:"No",label:"No"}],grid:{s:"12"},condition:e=>"Yes"===e["Physical examination"],onChange:(e,a)=>{if("Yes"===e)return{"Breath sounds abnormality":[],"Abnormalities when added":[]}}},{componentType:"checkboxField",header:"What are the abnormalities on the breath sounds?",name:"Breath sounds abnormality",type:"multiple",options:[{value:"Absent",label:"Absent"},{value:"Reduced",label:"Reduced"},{value:"Added",label:"Added"}],grid:{s:"12"},condition:e=>"Yes"===e["Physical examination"]&&"No"===e["Breath sounds normal"],onChange:(e,a)=>{if(null==e||!e.includes("Added"))return{"Abnormalities when added":[]}}},{componentType:"checkboxField",header:"What are the abnormalities on the breath sounds are Added?",name:"Abnormalities when added",type:"multiple",options:[{value:"Crackles",label:"Crackles"},{value:"Wheezes",label:"Wheezes"},{value:"Bronchial",label:"Bronchial"},{value:"Crepitations",label:"Crepitations"}],grid:{s:"12"},condition:e=>"Yes"===e["Physical examination"]&&"No"===e["Breath sounds normal"]&&Array.isArray(e["Breath sounds abnormality"])&&e["Breath sounds abnormality"].includes("Added")},{grid:{s:"12"},componentType:"Dashes"},{componentType:"radioButtonField",header:"Abdominal inspection normal?",name:"Abdominal inspection normal",options:[{value:"Yes",label:"Yes"},{value:"No",label:"No"}],grid:{s:"12"},condition:e=>"Yes"===e["Physical examination"],onChange:(e,a)=>{if("Yes"===e)return{"Abdominal inspection abnormality":[],"Other abdominal abnormality notes":""}}},{componentType:"checkboxField",header:"What are the abnormalities after Abdominal inspection?",name:"Abdominal inspection abnormality",type:"multiple",options:[{value:"Abdominal distension",label:"Abdominal distension"},{value:"Abdominal rash",label:"Abdominal rash"},{value:"Abdominal wounds",label:"Abdominal wounds"},{value:"Laceration",label:"Laceration"},{value:"Abdominal bruises",label:"Abdominal bruises"},{value:"Abdominal burns",label:"Abdominal burns"},{value:"Other abdominal abnormality",label:"Other abdominal abnormality"}],grid:{s:"12"},condition:e=>"Yes"===e["Physical examination"]&&"No"===e["Abdominal inspection normal"],onChange:(e,a)=>{if(null==e||!e.includes("Other abdominal abnormality"))return{"Other abdominal abnormality notes":""}}},{componentType:"inputField",header:"Specify abdominal abnormality",name:"Other abdominal abnormality notes",icon:me.editPen,grid:{s:"12"},condition:e=>"Yes"===e["Physical examination"]&&"No"===e["Abdominal inspection normal"]&&Array.isArray(e["Abdominal inspection abnormality"])&&e["Abdominal inspection abnormality"].includes("Other abdominal abnormality")},{grid:{s:"12"},componentType:"Dashes"},{componentType:"radioButtonField",header:"Abdominal auscultation normal?",name:"Abdominal auscultation normal",options:[{value:"Yes",label:"Yes"},{value:"No",label:"No"}],grid:{s:"12"},condition:e=>"Yes"===e["Physical examination"],onChange:(e,a)=>{if("Yes"===e)return{"Abdominal auscultation abnormality":[],"Other abdominal auscultation abnormality notes":"","Bowel sounds abnormality":[]}}},{componentType:"checkboxField",header:"What are the abdominal auscultation abnormalities?",name:"Abdominal auscultation abnormality",type:"multiple",options:[{value:"Bruit",label:"Bruit"},{value:"Hyperactive",label:"Hyperactive"},{value:"Reduced bowel sounds",label:"Reduced bowel sounds"},{value:"Other",label:"Other"}],grid:{s:"12"},condition:e=>"Yes"===e["Physical examination"]&&"No"===e["Abdominal auscultation normal"],onChange:(e,a)=>{const n={};return null!=e&&e.includes("Reduced bowel sounds")||(n["Bowel sounds abnormality"]=[]),null!=e&&e.includes("Other")||(n["Other abdominal auscultation abnormality notes"]=""),n}},{componentType:"checkboxField",header:"What are the abnormalities on bowel sounds?",name:"Bowel sounds abnormality",type:"multiple",options:[{value:"Reduced bowel sounds",label:"Reduced bowel sounds"},{value:"Abdominal auscultation absent",label:"Abdominal auscultation absent"}],grid:{s:"12"},condition:e=>"Yes"===e["Physical examination"]&&"No"===e["Abdominal auscultation normal"]&&Array.isArray(e["Abdominal auscultation abnormality"])&&e["Abdominal auscultation abnormality"].includes("Reduced bowel sounds")},{componentType:"inputField",header:"Specify abdominal auscultation abnormality",name:"Other abdominal auscultation abnormality notes",icon:me.editPen,grid:{s:"12"},condition:e=>"Yes"===e["Physical examination"]&&"No"===e["Abdominal auscultation normal"]&&Array.isArray(e["Abdominal auscultation abnormality"])&&e["Abdominal auscultation abnormality"].includes("Other")},{grid:{s:"12"},componentType:"Dashes"},{componentType:"radioButtonField",header:"Abdominal palpation normal?",name:"Abdominal palpation normal",options:[{value:"Yes",label:"Yes"},{value:"No",label:"No"}],grid:{s:"12"},condition:e=>"Yes"===e["Physical examination"],onChange:(e,a)=>{if("Yes"===e)return{"Abdominal palpation abnormality":[],"Other abdominal palpation abnormality notes":""}}},{componentType:"checkboxField",header:"What are the abdominal palpation abnormalities?",name:"Abdominal palpation abnormality",type:"multiple",options:[{value:"Tenderness",label:"Tenderness"},{value:"Splenomegaly",label:"Splenomegaly"},{value:"Kidney ballotable",label:"Kidney ballotable"},{value:"Other masses",label:"Other masses"}],grid:{s:"12"},condition:e=>"Yes"===e["Physical examination"]&&"No"===e["Abdominal palpation normal"],onChange:(e,a)=>{if(null==e||!e.includes("Other masses"))return{"Other abdominal palpation abnormality notes":""}}},{componentType:"inputField",header:"Specify abdominal palpation abnormality",name:"Other abdominal palpation abnormality notes",icon:me.editPen,grid:{s:"12"},condition:e=>"Yes"===e["Physical examination"]&&"No"===e["Abdominal palpation normal"]&&Array.isArray(e["Abdominal palpation abnormality"])&&e["Abdominal palpation abnormality"].includes("Other masses")},{grid:{s:"12"},componentType:"Dashes"},{componentType:"radioButtonField",header:"Genital examination normal?",name:"Genital examination normal",options:[{value:"Yes",label:"Yes"},{value:"No",label:"No"}],grid:{s:"12"},condition:e=>"Yes"===e["Physical examination"],onChange:(e,a)=>{if("Yes"===e)return{"Genital examination abnormality":[],"Urethral meatus abnormalities":[],"Vulva inspection abnormalities":[],"Other genital abnormality notes":""}}},{componentType:"checkboxField",header:"What are the abnormalities after genital examination?",name:"Genital examination abnormality",type:"multiple",options:[{value:"Warts",label:"Warts"},{value:"Vesicles",label:"Vesicles"},{value:"Growths",label:"Growths"},{value:"Genital sores",label:"Genital sores"},{value:"Scrotal swelling",label:"Scrotal swelling",disabled:o},{value:"Tastes swelling",label:"Tastes swelling",disabled:o},{value:"Urethral meatus abnormal",label:"Urethral meatus abnormal",disabled:o},{value:"Vulva examination",label:"Vulva examination",disabled:t},{value:"Visible bleeding",label:"Visible bleeding",disabled:t},{value:"Other genital abnormalities",label:"Other genital abnormalities"}],grid:{s:"12"},condition:e=>"Yes"===e["Physical examination"]&&"No"===e["Genital examination normal"],onChange:(e,a)=>{const n={};return null!=e&&e.includes("Urethral meatus abnormal")||(n["Urethral meatus abnormalities"]=[]),null!=e&&e.includes("Vulva examination")||(n["Vulva inspection abnormalities"]=[]),null!=e&&e.includes("Other genital abnormalities")||(n["Other genital abnormality notes"]=""),n}},{componentType:"checkboxField",header:"What are the urethral meatus abnormalities for the patient?",name:"Urethral meatus abnormalities",type:"multiple",options:[{value:"Oedema",label:"Oedema"},{value:"Abnormal discharge",label:"Abnormal discharge"},{value:"Bleeding",label:"Bleeding"}],grid:{s:"12"},condition:e=>"Yes"===e["Physical examination"]&&"No"===e["Genital examination normal"]&&t&&Array.isArray(e["Genital examination abnormality"])&&e["Genital examination abnormality"].includes("Urethral meatus abnormal")},{componentType:"checkboxField",header:"What Vulva abnormalities does the patient have?",name:"Vulva inspection abnormalities",type:"multiple",options:[{value:"Oedematous cervix",label:"Oedematous cervix"},{value:"Abnormal vaginal discharge",label:"Abnormal vaginal discharge"}],grid:{s:"12"},condition:e=>"Yes"===e["Physical examination"]&&"No"===e["Genital examination normal"]&&o&&Array.isArray(e["Genital examination abnormality"])&&e["Genital examination abnormality"].includes("Vulva examination")},{componentType:"inputField",header:"Specify genital abnormality",name:"Other genital abnormality notes",icon:me.editPen,grid:{s:"12"},condition:e=>"Yes"===e["Physical examination"]&&"No"===e["Genital examination normal"]&&Array.isArray(e["Genital examination abnormality"])&&e["Genital examination abnormality"].includes("Other genital abnormalities")},{grid:{s:"12"},componentType:"Dashes"},{componentType:"radioButtonField",header:"Extremities normal?",name:"Extremities normal",options:[{value:"Yes",label:"Yes"},{value:"No",label:"No"}],grid:{s:"12"},condition:e=>"Yes"===e["Physical examination"],onChange:(e,a)=>{if("Yes"===e)return{"Abnormality for extremities":[],"Other extremities abnormalities notes":""}}},{componentType:"checkboxField",header:"What are the abnormalities for extremities?",name:"Abnormality for extremities",type:"multiple",options:[{value:"Cold and clammy",label:"Cold and clammy"},{value:"Generalized oedema",label:"Generalized oedema"},{value:"Fracture",label:"Fracture"},{value:"Extremity burns",label:"Extremity burns"},{value:"Extremity rash",label:"Extremity rash"},{value:"Deformity",label:"Deformity"},{value:"Finger clubbing",label:"Finger clubbing"},{value:"Decreased Power",label:"Decreased Power"},{value:"Decreased Sensation",label:"Decreased Sensation"},{value:"Other extremities abnormality",label:"Other extremities abnormality"}],grid:{s:"12"},condition:e=>"Yes"===e["Physical examination"]&&"No"===e["Extremities normal"],onChange:(e,a)=>{if(null==e||!e.includes("Other extremities abnormality"))return{"Other extremities abnormalities notes":""}}},{componentType:"inputField",header:"Specify extremity abnormality",name:"Other extremities abnormalities notes",icon:me.editPen,grid:{s:"12"},condition:e=>"Yes"===e["Physical examination"]&&"No"===e["Extremities normal"]&&Array.isArray(e["Abnormality for extremities"])&&e["Abnormality for extremities"].includes("Other extremities abnormality")}]})}})(),r=o(null),s=o(0),c=Ae(),{patient:u}=t(c);y(()=>{var e;return null===(e=u.value)||void 0===e?void 0:e.patientID},async(e,a)=>{e&&e!==a&&(s.value++,await q())});const p=async e=>{const a=[];for(const[n,t]of Object.entries(e))t&&!1!==t&&""!==t&&("boolean"==typeof t&&!0===t?a.push(await _e.buildValueText("Physical examination finding",n)):"string"==typeof t&&a.push(await _e.buildValueText(n,t)));return a};i(async()=>{await q()});const v=l(()=>n.physicalExaminationFormSection.value);return a({validateForm:()=>{var e;return null===(e=r.value)||void 0===e?void 0:e.validateForm()},onSubmit:async()=>{if(!r.value)return console.error("Form reference is not available"),!1;if(r.value.validateForm())return we("Please fix validation errors before submitting"),!1;const e=r.value.getFormValues(),a=await p(e);return 0===a.length?(we("No physical examination data to save"),!1):(await _e.addObsToEncounterPatient(a,xe.PHYSICAL_EXAMINATION),s.value++,await q(),ke("Physical examination saved successfully"),!0)},resetForm:()=>{s.value++}}),(e,a)=>(d(),m(fe,{formData:v.value,ref_key:"formRef",ref:r,key:s.value},null,8,["formData"]))}})),yn={key:0},_n={class:"ion-padding",slot:"content"},xn={class:"nav-buttons"},wn={class:"ion-padding",slot:"content"},kn={class:"nav-buttons"},Cn={class:"ion-padding",slot:"content"},An={class:"nav-buttons"},Dn={class:"ion-padding",slot:"content"},On={class:"nav-buttons"},Pn={class:"ion-padding",slot:"content"},Tn={class:"nav-buttons"},Sn={class:"ion-padding",slot:"content"},Nn={class:"nav-buttons"},En=(e("C",Ce(n({__name:"ClinicalAssessment",setup(e,{expose:a}){const n=o("loc"),t=o(0),r=o(!1),_=o(!1),x=new Se,w=Ae(),k=()=>{t.value++},A=o(null),D=o(null),O=o(null),P=o(null),T=o(null),S=o(null),N=[{id:"loc",label:"Level of consciousness",show:!0},{id:"pc",label:"Presenting complaints",show:!0},{id:"pbs",label:"Pregnancy and breastfeeding status",show:()=>x.isChildBearing()},{id:"pmh",label:"Past medical history",show:!0},{id:"al",label:"Allergies",show:!0},{id:"pe",label:"Physical examination",show:!0}];async function E(){const e=ye.getSessionDate(),a=[xe.ASSESSMENT,xe.PRESENTING_COMPLAINTS,xe.PAST_MEDICAL_HISTORY,xe.PHYSICAL_EXAMINATION,xe.MEDICAL_HISTORY,xe.PREGNANCY_STATUS];let n=!1;for(const o of a)try{const a=await _e.getObsByEncounterIdAndDate(o);if(a&&a.some(a=>!!a.obs_datetime&&Oe.toStandardHisFormat(a.obs_datetime)===Oe.toStandardHisFormat(e))){n=!0;break}}catch(t){console.error(`Error checking observations for encounter type ${o}:`,t)}r.value=n}i(E),y(()=>w.patient,E);const F=l(()=>r.value),I=l(()=>N.filter(e=>"function"==typeof e.show?e.show():e.show)),V=e=>{const a=N.find(a=>a.id===e);return!!a&&("function"==typeof a.show?a.show():a.show)},H=e=>I.value.findIndex(a=>a.id===e),B=e=>{const a=H(e);a>0&&(n.value=I.value[a-1].id)},Y=e=>{const a=H(e)+1;a<I.value.length?n.value=I.value[a].id:(n.value="",k())};return a({onSubmit:async()=>{const e=[{ref:A,name:"PresentingComplaints"},{ref:D,name:"LevelOfConsciousness"},{ref:O,name:"PastMedicalHistory"},{ref:T,name:"PregnancyBreastfeeding"},{ref:S,name:"PhysicalExamination"},{ref:P,name:"Allergies"}];for(const n of e)if(n.ref.value&&"function"==typeof n.ref.value.onSubmit)try{const e=await n.ref.value.onSubmit();if("PresentingComplaints"===n.name&&!1===e)return}catch(a){if(console.error(`Error calling ${n.name} onSubmit:`,a),"PresentingComplaints"===n.name)return}else console.log(`${n.name} component ref not available or no onSubmit method`)}}),(e,a)=>(d(),s(g,null,[F.value?(d(),s("div",yn,[c(h(f),{lines:"none"},{default:p(()=>[c(h(G),null,{default:p(()=>[...a[14]||(a[14]=[b("Switch between Capture Mode and Summary Mode",-1)])]),_:1}),c(h(W),{checked:_.value,onIonChange:a[0]||(a[0]=e=>_.value=e.detail.checked),slot:"end"},null,8,["checked"])]),_:1}),_.value?u("",!0):(d(),m(vn,{key:t.value}))])):u("",!0),!F.value||_.value?(d(),m(h(J),{key:1,style:{width:"100%"}},{default:p(()=>[c(h(j),{value:n.value,"onUpdate:value":a[13]||(a[13]=e=>n.value=e),ref:"accordionGroup",class:"previousView"},{default:p(()=>[V("loc")?(d(),m(h($),{key:0,value:"loc",class:"_card"},{default:p(()=>[c(h(f),{slot:"header",color:"light"},{default:p(()=>[c(h(G),{class:"previousLabel"},{default:p(()=>[...a[15]||(a[15]=[b("Level of consciousness",-1)])]),_:1})]),_:1}),v("div",_n,[c(je,{"is-active":"loc"===n.value,ref_key:"levelOfConsciousnessFormRef",ref:D,onDataSaved:k},null,8,["is-active"]),v("div",xn,[H("loc")>0?(d(),m(h(K),{key:0,fill:"outline",onClick:a[1]||(a[1]=X(e=>B("loc"),["stop"]))},{default:p(()=>[...a[16]||(a[16]=[b(" Back ",-1)])]),_:1})):u("",!0),c(h(K),{fill:"outline",onClick:a[2]||(a[2]=X(e=>Y("loc"),["stop"]))},{default:p(()=>[b(C(H("loc")<I.value.length-1?"Next":"Finish"),1)]),_:1})])])]),_:1})):u("",!0),V("pc")?(d(),m(h($),{key:1,value:"pc",class:"_card"},{default:p(()=>[c(h(f),{slot:"header",color:"light"},{default:p(()=>[c(h(G),{class:"previousLabel"},{default:p(()=>[...a[17]||(a[17]=[b(" Presenting complaints - ",-1),v("span",{class:"required-badge"},"Required",-1)])]),_:1})]),_:1}),v("div",wn,[c(ha,{"is-active":"pc"===n.value,onDataSaved:k,ref_key:"presentingComplaintsFormRef",ref:A},null,8,["is-active"]),v("div",kn,[H("pc")>0?(d(),m(h(K),{key:0,fill:"outline",onClick:a[3]||(a[3]=X(e=>B("pc"),["stop"]))},{default:p(()=>[...a[18]||(a[18]=[b(" Back ",-1)])]),_:1})):u("",!0),c(h(K),{fill:"outline",onClick:a[4]||(a[4]=X(e=>Y("pc"),["stop"]))},{default:p(()=>[b(C(H("pc")<I.value.length-1?"Next":"Finish"),1)]),_:1})])])]),_:1})):u("",!0),V("pbs")?(d(),m(h($),{key:2,value:"pbs",class:"_card"},{default:p(()=>[c(h(f),{slot:"header",color:"light"},{default:p(()=>[c(h(G),{class:"previousLabel"},{default:p(()=>[...a[19]||(a[19]=[b("Pregnancy and breastfeeding status",-1)])]),_:1})]),_:1}),v("div",Cn,[c(fn,{"is-active":"pbs"===n.value,ref_key:"pregnancyBreastfeedingFormRef",ref:T,onDataSaved:k},null,8,["is-active"]),v("div",An,[H("pbs")>0?(d(),m(h(K),{key:0,fill:"outline",onClick:a[5]||(a[5]=X(e=>B("pbs"),["stop"]))},{default:p(()=>[...a[20]||(a[20]=[b(" Back ",-1)])]),_:1})):u("",!0),c(h(K),{fill:"outline",onClick:a[6]||(a[6]=X(e=>Y("pbs"),["stop"]))},{default:p(()=>[b(C(H("pbs")<I.value.length-1?"Next":"Finish"),1)]),_:1})])])]),_:1})):u("",!0),V("pmh")?(d(),m(h($),{key:3,value:"pmh",class:"_card"},{default:p(()=>[c(h(f),{slot:"header",color:"light"},{default:p(()=>[c(h(G),{class:"previousLabel"},{default:p(()=>[...a[21]||(a[21]=[b("Past medical history",-1)])]),_:1})]),_:1}),v("div",Dn,[c(bn,{"is-active":"pmh"===n.value,ref_key:"pastMedicalHistoryFormRef",ref:O,onDataSaved:k},null,8,["is-active"]),v("div",On,[H("pmh")>0?(d(),m(h(K),{key:0,fill:"outline",onClick:a[7]||(a[7]=X(e=>B("pmh"),["stop"]))},{default:p(()=>[...a[22]||(a[22]=[b(" Back ",-1)])]),_:1})):u("",!0),c(h(K),{fill:"outline",onClick:a[8]||(a[8]=X(e=>Y("pmh"),["stop"]))},{default:p(()=>[b(C(H("pmh")<I.value.length-1?"Next":"Finish"),1)]),_:1})])])]),_:1})):u("",!0),V("al")?(d(),m(h($),{key:4,value:"al",class:"_card"},{default:p(()=>[c(h(f),{slot:"header",color:"light"},{default:p(()=>[c(h(G),{class:"previousLabel"},{default:p(()=>[...a[23]||(a[23]=[b("Allergies",-1)])]),_:1})]),_:1}),v("div",Pn,[c(Ze,{"is-active":"al"===n.value,ref_key:"allergiesFormRef",ref:P,onDataSaved:k},null,8,["is-active"]),v("div",Tn,[H("al")>0?(d(),m(h(K),{key:0,fill:"outline",onClick:a[9]||(a[9]=X(e=>B("al"),["stop"]))},{default:p(()=>[...a[24]||(a[24]=[b(" Back ",-1)])]),_:1})):u("",!0),c(h(K),{fill:"outline",onClick:a[10]||(a[10]=X(e=>Y("al"),["stop"]))},{default:p(()=>[b(C(H("al")<I.value.length-1?"Next":"Finish"),1)]),_:1})])])]),_:1})):u("",!0),V("pe")?(d(),m(h($),{key:5,value:"pe",class:"_card"},{default:p(()=>[c(h(f),{slot:"header",color:"light"},{default:p(()=>[c(h(G),{class:"previousLabel"},{default:p(()=>[...a[25]||(a[25]=[b("Physical examination",-1)])]),_:1})]),_:1}),v("div",Sn,[c(gn,{"is-active":"pe"===n.value,ref_key:"physicalExaminationFormRef",ref:S,onDataSaved:k},null,8,["is-active"]),v("div",Nn,[H("pe")>0?(d(),m(h(K),{key:0,fill:"outline",onClick:a[11]||(a[11]=X(e=>B("pe"),["stop"]))},{default:p(()=>[...a[26]||(a[26]=[b(" Back ",-1)])]),_:1})):u("",!0),c(h(K),{fill:"outline",onClick:a[12]||(a[12]=X(e=>Y("pe"),["stop"]))},{default:p(()=>[b(C(H("pe")<I.value.length-1?"Next":"Finish"),1)]),_:1})])])]),_:1})):u("",!0)]),_:1},8,["value"])]),_:1})):u("",!0)],64))}}),[["__scopeId","data-v-f7298259"]])),{class:"allergies-section"}),Fn={class:"allergies-container"},In={class:"medication-section"},Vn={class:"medication-content"},Hn={key:0,class:"add-medication-form"},Bn={class:"form-group"},Yn={class:"option-label"},Mn={key:0,class:"error-message"},Un={class:"form-row"},Rn={class:"form-group"},Ln={key:0,class:"error-message"},zn={class:"form-group"},qn={key:0,class:"error-message"},Gn={class:"form-group"},Wn={key:0,class:"error-message"},jn={class:"action-buttons"},$n={class:"notes-section"},Kn={class:"notes-content"},Xn={class:"notes-input-container"},Jn={class:"ion-padding",slot:"content"},Qn={class:"notes-timeline"},Zn={key:0,class:"note-entry"},et={class:"note-date"},at={class:"note-content"},nt={class:"ion-padding",slot:"content"},tt={class:"note-date"},ot={class:"note-content"},lt=n({watch:{},name:"xxxComponent"}),it=n({...lt,setup(e){const a=me,n=na,t=o(!1),r=o(!1),_=o(!0),x=o(0),k=o(""),A=o(!1),D=o(),O=o(!1),T=o(""),S=o(""),E=o(""),F=o(""),I=o(""),V=o(""),H=Ne(),B=Pe(),Y=l(()=>B.selectedMedicalAllergiesList),M=l(()=>H.selectedMedicalDrugsList),U=l(()=>H.partialOPDdrugList),L=l(()=>H.nonPharmalogicalTherapyAndOtherNotes),z=["first","second","third"],q=o(),W=o(),K=o(),X=o(!1),J=o(!1),le=o("Show more notes"),ie=o(),re=o(),se=o(),de=l(()=>H.editingDrugItem),ce=o("Select a route"),ue=o(!1),pe=o("Select frequency"),ve=o(!1),he=o("Select drug"),fe=o(!1),ge=o(),_e=o(),xe=o(),ke=o([]),Ce=o([{concept_id:11797,name:"Buccal",concept_name_id:null,id:1769},{concept_id:11794,name:"Intradermal",concept_name_id:null,id:6284},{concept_id:11795,name:"Intramuscular (IM)",concept_name_id:null,id:6285},{concept_id:11799,name:"Intraosseous",concept_name_id:null,id:6286},{concept_id:11793,name:"Intravenous (IV)",concept_name_id:null,id:6295},{concept_id:3327,name:"Oral",concept_name_id:null,id:8686},{concept_id:11800,name:"Other method of prescription",concept_name_id:null,id:8920},{concept_id:11792,name:"Rectally",concept_name_id:null,id:10785},{concept_id:11798,name:"Subcutaneous",concept_name_id:null,id:12342},{concept_id:11796,name:"Sublingual",concept_name_id:null,id:12344},{concept_id:11792,name:"Rectally",concept_name_id:null,id:14078},{concept_id:11793,name:"Intravenous (IV)",concept_name_id:null,id:14079},{concept_id:11794,name:"Intradermal",concept_name_id:null,id:14080},{concept_id:11795,name:"Intramuscular (IM)",concept_name_id:null,id:14081},{concept_id:11796,name:"Sublingual",concept_name_id:null,id:14082},{concept_id:11797,name:"Buccal",concept_name_id:null,id:14083},{concept_id:11798,name:"Subcutaneous",concept_name_id:null,id:14084},{concept_id:11799,name:"Intraosseous",concept_name_id:null,id:14085},{concept_id:11800,name:"Other method of prescription",concept_name_id:null,id:14086}]),Ae=l(()=>ke.value.length?ke.value:Ce.value);async function De(){return await ta()}function Oe(){_.value=!_.value,t.value=!0,A.value=!1,O.value=!1}async function Te(){return Ue(E.value)?O.value=!1:(D.value="please enter a number",O.value=!0),O.value}async function Se(){const e=await Te(),a=1==la.isEmpty(_e.value)?(ve.value=!0,!1):0==la.isEmpty(_e.value)?(ve.value=!1,!0):void 0,n=1==la.isEmpty(xe.value)?(fe.value=!0,!1):0==la.isEmpty(xe.value)?(fe.value=!1,!0):void 0,t=1==la.isEmpty(ge.value)?(ue.value=!0,!1):0==la.isEmpty(ge.value)?(ue.value=!1,!0):void 0;return!e&&1==a&&1==n&&1==t}async function Ve(){try{const e=()=>null!=se.value.dose_strength&&se.value.dose_strength?Math.trunc(se.value.dose_strength):1;if(null!==de.value){if(!(await Se()))return void we("Please enter correct data values",4e3);const a=Re(ye.getSessionDate(),parseInt(E.value));let n=!1;1==He(se.value)&&(n=!0);const t={drugName:T.value,dose:e(),frequency:_e.value.label,frequency_code:_e.value.code,duration:E.value,prescription:a,drug_id:V.value,units:I.value,route_concept_id:ge.value.concept_id,route_name:ge.value.name,highlightbackground:n},o=Ne();console.log(o.setSelectedMedicalDrugsList([t])),o.editingDrugItem=null,_.value=!0}else{if(!(await Se()))return void we("Please enter correct data values",4e3);t.value=!1,r.value=!0,_.value=!0;const a=Re(ye.getSessionDate(),parseInt(E.value));let n=!1;1==He(se.value)&&(n=!0);const o={drugName:T.value,dose:e(),frequency:_e.value.label,frequency_code:_e.value.code,duration:E.value,prescription:a,drug_id:V.value,units:I.value,route_concept_id:ge.value.concept_id,route_name:ge.value.name,highlightbackground:n};Ne().setSelectedMedicalDrugsList([o])}V.value="",T.value="",S.value="",_e.value=null,E.value="",F.value="",x.value++,xe.value=null,ge.value=null}catch(e){console.error("Error saving data:",e)}}function He(e){const a=[];return Y.value.forEach(e=>{e.selected&&a.push(e.concept_id)}),1==function(e,a){try{return e.some(e=>a.includes(e.concept_id))}catch(n){return!1}}([e],a)&&(we("Client is allergic to the selected medication",4e6),!0)}function Be(e){const a=M.value[e],n=Ne();n.removeDrugById(a.drug_id),n.editingDrugItem=a,V.value="",T.value="",S.value="",_e.value=null,E.value="",F.value="",xe.value=null,ge.value=null,V.value=a.drug_id,T.value=a.drugName,S.value=a.dose,_e.value={label:a.frequency,code:a.frequency_code},E.value=a.duration,F.value=a.prescription;const t=U.value.find(e=>e.name===a.drugName);t&&(xe.value=t),ge.value={concept_id:a.route_concept_id,name:a.route_name},_.value=!1,x.value++}function Ye(e){M.value.splice(e,1),x.value++,we("you have removed a drug from list",6e3)}function Me(e){!function(e){Ne().setNonPharmalogicalTherapyAndOtherNotes(e)}(e.target.value)}function Ue(e){return/^[0-9]+$/.test(e)}function Re(e,a){const n=new Date(e);return n.setDate(n.getDate()+a),`${n.getFullYear()}-${String(n.getMonth()+1).padStart(2,"0")}-${String(n.getDate()).padStart(2,"0")}`}function Le(e){z.filter(a=>a!==e.detail.value);const a=e.detail.value;void 0!==a?"third"==a&&(le.value="Show less notes",J.value=!X.value):(le.value="Show more notes",J.value=!X.value)}function ze(e){"Enter"!==e.key&&"ArrowDown"!==e.key||(e.preventDefault(),Ve())}i(async()=>{const e=new oa,{previousDrugPrescriptions:a,previousClinicalNotes:n,previousDrugAllergies:t}=await e.getPatientEncounters();q.value=a,W.value=Object.entries(n)[0];const[,...o]=Object.entries(n);K.value=o,ie.value=Object.entries(t)[0];const[,...l]=Object.entries(t);re.value=l,await async function(e=5,a=1e3){let n=0;for(;n<e&&(ke.value=await De(),!(ke.value.length>0));)n++,await new Promise(e=>setTimeout(e,a));0===ke.value.length&&console.warn("Failed to fetch route list after maximum retries.")}()}),y(()=>S.value,async e=>{!async function(){Ue(S.value)?A.value=!1:(k.value="please enter a number",A.value=!0),A.value}()}),y(()=>E.value,async e=>{Te()});const qe=l(()=>[{showAddItemButton:!0,addItemButton:!0,name:null!==de.value?"Update":"ADD",fn:Ve},{showAddItemButton:!0,addItemButton:!0,name:"CANCEL",fn:Ge}]),Ge=async()=>{Ee(Fe,{class:"otherVitalsModal"},!0,{message:"Are you sure you want to cancel?"},{cancel:e=>{},confirm:async e=>{1==e.detail&&function(){if(null!==de.value){V.value="",T.value="",S.value="",_e.value=null,E.value="",F.value="",xe.value=null,ge.value=null;const e=Ne();e.setSelectedMedicalDrugsList([de.value]),e.editingDrugItem=null}_.value=!0,x.value++}()}})};return(e,t)=>(d(),m(h(oe),null,{default:p(()=>[v("div",En,[v("div",Fn,[c(Oa)])]),v("div",In,[c(h(f),{lines:"none",class:"section-header"},{default:p(()=>[c(h(P),{icon:h(R),class:"section-icon"},null,8,["icon"]),c(h(G),{class:"section-title",style:{"margin-top":"12px"}},{default:p(()=>[...t[9]||(t[9]=[b("Medication",-1)])]),_:1})]),_:1}),v("div",Vn,[(d(),m(ea,{_selectedMedicalDrugsList:M.value,onEditItem:Be,onRemoveItem:Ye,key:x.value,class:"medication-list"},null,8,["_selectedMedicalDrugsList"])),_.value?u("",!0):(d(),s("div",Hn,[v("div",Bn,[t[10]||(t[10]=v("label",{class:"input-label"},"Medication",-1)),c(h(Q),{modelValue:xe.value,"onUpdate:modelValue":[t[0]||(t[0]=e=>xe.value=e),t[1]||(t[1]=e=>{var a;(a=e)&&(T.value=a.name,V.value=a.drug_id,I.value=a.units,se.value=a,He(a))})],options:U.value,searchable:!0,"close-on-select":!0,"show-labels":!1,placeholder:"Select medication",label:"name","track-by":"drug_id",onSearchChange:t[2]||(t[2]=e=>async function(e){const a=e,n=await Ie.getOfflineOPDDrugs({name:a,page:1,page_size:10});n.map(e=>({label:e.name,value:e.name,other:e})),H.setPartialOPDdrugList(n)}(e))},{option:p(e=>[v("div",Yn,C(e.option.name),1)]),_:1},8,["modelValue","options"]),fe.value?(d(),s("div",Mn,C(he.value),1)):u("",!0)]),v("div",Un,[v("div",Rn,[t[11]||(t[11]=v("label",{class:"input-label"},"Route",-1)),c(h(Q),{modelValue:ge.value,"onUpdate:modelValue":[t[3]||(t[3]=e=>ge.value=e),t[4]||(t[4]=e=>{return a=e,void(ge.value=a);var a})],options:Ae.value,searchable:!0,"close-on-select":!0,"show-labels":!1,placeholder:"Select route",label:"name","track-by":"concept_id",disabled:!1},null,8,["modelValue","options"]),ue.value?(d(),s("div",Ln,C(ce.value),1)):u("",!0)]),v("div",zn,[t[12]||(t[12]=v("label",{class:"input-label"},"Frequency",-1)),c(h(Q),{modelValue:_e.value,"onUpdate:modelValue":[t[5]||(t[5]=e=>_e.value=e),t[6]||(t[6]=e=>{return a=e,void(_e.value=a);var a})],options:h(n),searchable:!0,"close-on-select":!0,"show-labels":!1,placeholder:"Select frequency",label:"label","track-by":"code"},null,8,["modelValue","options"]),ve.value?(d(),s("div",qn,C(pe.value),1)):u("",!0)]),v("div",Gn,[t[13]||(t[13]=v("label",{class:"input-label"},"Duration (days)",-1)),c(h(Z),{modelValue:E.value,"onUpdate:modelValue":t[7]||(t[7]=e=>E.value=e),type:"number",inputmode:"numeric",pattern:"[0-9]*",fill:"outline",placeholder:"Enter duration",onKeydown:ze},null,8,["modelValue"]),O.value?(d(),s("div",Wn,C(D.value),1)):u("",!0)])]),v("div",jn,[qe.value[0].addItemButton?(d(),m(be,{key:0,name:qe.value[0].name,icon:h(ee),"onClicked:btn":qe.value[0].fn,class:"save-button"},null,8,["name","icon","onClicked:btn"])):u("",!0),qe.value[1].addItemButton?(d(),m(be,{key:1,name:qe.value[1].name,icon:h(ae),"onClicked:btn":qe.value[1].fn,class:"cancel-button"},null,8,["name","icon","onClicked:btn"])):u("",!0)])])),_.value?(d(),m(be,{key:1,name:"Add new medication",icon:h(N),fontWeight:"600","onClicked:btn":Oe,class:"add-new-button"},null,8,["icon"])):u("",!0)])]),v("div",$n,[c(h(f),{lines:"none",class:"section-header"},{default:p(()=>[c(h(P),{icon:h(ne),class:"section-icon"},null,8,["icon"]),c(h(G),{class:"section-title"},{default:p(()=>[...t[14]||(t[14]=[b("Non-pharmacological therapy and other notes",-1)])]),_:1})]),_:1}),v("div",Kn,[c(aa,{class:"intervention-component"}),v("div",Xn,[c(h(f),{class:"notes-input-item"},{default:p(()=>[c(h(P),{slot:"start",icon:h(a).editPen,class:"edit-icon","aria-hidden":"true"},null,8,["icon"]),c(h(te),{modelValue:L.value,"onUpdate:modelValue":t[8]||(t[8]=e=>L.value=e),onIonInput:Me,placeholder:"Enter notes here...","auto-grow":!0,class:"notes-textarea",fill:"outline",style:{"--padding-start":"16px"}},null,8,["modelValue"])]),_:1})]),c(h(j),{ref:"accordionGroup",class:"previous-notes"},{default:p(()=>[c(h($),{value:"fourth","toggle-icon-slot":"start"},{default:p(()=>[c(h(f),{slot:"header",color:"light",class:"previous-notes-header"},{default:p(()=>[c(h(G),null,{default:p(()=>[...t[15]||(t[15]=[b("Previous visit notes",-1)])]),_:1})]),_:1}),v("div",Jn,[v("div",Qn,[(d(!0),s(g,null,w(W.value,(e,a)=>(d(),s(g,{key:a},[1===a?(d(),s("div",Zn,[(d(!0),s(g,null,w(e,(e,a)=>(d(),s("div",{key:a},[v("div",et,C(e.date),1),v("div",at,C(e.notes),1)]))),128))])):u("",!0)],64))),128)),c(h(j),{onIonChange:Le},{default:p(()=>[c(h($),{value:"third","toggle-icon-slot":"start"},{default:p(()=>[c(h(f),{slot:"header",color:"light",class:"show-more-header"},{default:p(()=>[c(h(G),{color:"primary"},{default:p(()=>[b(C(le.value),1)]),_:1})]),_:1}),v("div",nt,[(d(!0),s(g,null,w(K.value,(e,a)=>{return d(),s("div",{key:a,class:"note-entry"},[(d(!0),s(g,null,w((n=e,n[1]),(e,a)=>(d(),s("div",{key:a},[v("div",tt,C(e.date),1),v("div",ot,C(e.notes),1)]))),128))]);var n}),128))])]),_:1})]),_:1})])])]),_:1})]),_:1},512)])])]),_:1}))}}),rt=(e("b",Ce(it,[["__scopeId","data-v-14c793af"]])),n({name:"xxxComponent"})),st=n({...rt,emits:["dataSaved"],setup(e,{emit:a}){const n=o(),t=o("gurdian phone number");o(!0),o(!0);const l=o(!0),f=o(),y=o();i(async()=>{!function(){const e=(new Se).isChildBearing;1==e&&(w[0].disable_checkbox.value=!1),0==e&&(w[0].disable_checkbox.value=!0)}()});const _=[{placeHolder:{default:"Enter time of death if known"},property_name:"timeOfDeath",dataHandler:function(e){_[0].dataValue.value=e},dataValue:o(),show_error:o(!1),error_message:"Time required",type:"time",skip_validation:!1},{placeHolder:{default:"Enter time arrived"},property_name:"timeArrived",dataHandler:function(e){_[1].dataValue.value=e},dataValue:o(),show_error:o(!1),error_message:"Time required",type:"time",skip_validation:!1},{placeHolder:{default:"Enter time confirming death"},property_name:"timeOfDeathConfirmation",dataHandler:function(e){_[2].dataValue.value=e},dataValue:o(),show_error:o(!1),error_message:"Time required",skip_validation:!1}],x=[{placeHolder:{default:"Enter date of death"},property_name:"dateOfDeath",dataHandler:function(e){const a={day:e.value.day,month:e.value.month,year:e.value.year,formattedDate:e.value.formattedDate};x[0].dataValue.value=a},dataValue:o(),show_error:o(!1),error_message:"Date required",type:"date",skip_validation:!1},{placeHolder:{default:"Enter date arrived"},property_name:"dateArrived",dataHandler:function(e){const a={day:e.value.day,month:e.value.month,year:e.value.year,formattedDate:e.value.formattedDate};x[1].dataValue.value=a,console.log(x[2].dataValue.value)},dataValue:o(),show_error:o(!1),error_message:"Date required",type:"date",skip_validation:!1},{placeHolder:{default:"Enter date confirming death"},property_name:"dateOfDeathConfirmation",dataHandler:function(e){const a={day:e.value.day,month:e.value.month,year:e.value.year,formattedDate:e.value.formattedDate};x[2].dataValue.value=a,console.log(x[2].dataValue.value)},dataValue:o(),show_error:o(!1),error_message:"Date required",type:"date",skip_validation:!1}],w=[{lblTxt:"Was the individual pregnant at the time of death?",value:o(!1),disable_checkbox:o(!0)}],k=[{placeHolder:"Enter place of death",property_name:"placeOfDeath",dataHandler:function(e){const a=e.target.value;k[0].dataValue.value=a},dataValue:o(),show_error:o(!1),error_message:"Input required, Only letters allowed",type:"text",skip_validation:!1},{placeHolder:"Enter name of guardian",property_name:"nameOfGuardian",dataHandler:function(e){const a=e.target.value;k[1].dataValue.value=a},dataValue:o(),show_error:o(!1),error_message:"Input required, Only letters allowed",type:"text",skip_validation:!1},{placeHolder:"Enter name of person confirming death",property_name:"nameOfPersonConfirmindDeath",dataHandler:function(e){const a=e.target.value;k[2].dataValue.value=a},dataValue:o(),show_error:o(!1),error_message:"Input required, Only letters allowed",type:"text",skip_validation:!1},{placeHolder:"Enter position of the person confirming death",property_name:"positionOfthePersonConfirmingDeath",dataHandler:function(e){const a=e.target.value;k[3].dataValue.value=a},dataValue:o(),show_error:o(!1),error_message:"Input required, Only letters allowed",type:"text",skip_validation:!1},{placeHolder:"Enter medical council registration number of the person confirming death",property_name:"medicalConcilRegistrationNumberOfThePersonConfirmingDeath",dataHandler:function(e){const a=e.target.value;k[4].dataValue.value=a},dataValue:o(),show_error:o(!1),error_message:"Input required, Only letters and numbers are allowed",type:"alphanumeric",skip_validation:!1},{placeHolder:"Other (specify)",property_name:"otherNotes",dataHandler:function(e){const a=e.target.value;k[5].dataValue.value=a},dataValue:o(),show_error:o(!1),error_message:"Input required, Only letters allowed",dissabled:l.value,type:"text",skip_validation:!0}],A=[{showAddItemButton:!0,addItemButton:!0,name:"save",btnFill:"clear",fn:function(){Be(k),Be(x),Be(_),function(){const e=D.value.filter(e=>e.selected);if(0==e.length)P[0].show_error.value=!0;else if(P[0].show_error.value=!1,"Accident"==e[0].name){const e=O.value.filter(e=>e.selected);P[1].show_error.value=0==e.length}}();const e=la.merge(Ye(k),Ye(x),Ye(_),E(P[0]),E(P[1]));console.log(e)}},{showAddItemButton:!0,addItemButton:!0,name:"cancel",btnFill:"clear",fn:function(){!function(e={dataSaved:!0}){T("dataSaved",e)}()}}],D=o([{id:1,name:"Natural",selected:!1},{id:2,name:"Accident",selected:!1},{id:3,name:"Homicide",selected:!1},{id:4,name:"Suicide",selected:!1},{id:5,name:"Pending investigation",selected:!1},{id:6,name:"Could not be determined",selected:!1},{id:7,name:"Other - specify",selected:!1}]),O=o([{id:1,name:"Motor vehicle (passenger)",selected:!1},{id:2,name:"Motor vehicle (pedestrian)",selected:!1},{id:3,name:"Drowning",selected:!1},{id:4,name:"Other - specify",selected:!1}]),P=[{multi_Selection:!1,manner_of_death_Selection_value:o(),show_list_label:!0,unqueId:"qwerty",name_of_list:"Manner of death ",property_name:"mannerOfDeath",placeHolder:"Choose one",items:D.value,listUpdatedFN:S,listFilteredFN:()=>{},use_internal_filter:!0,disabled:o(!1),show_error:o(!1),error_message:"selection required"},{multi_Selection:!1,show_list_label:!0,unqueId:"qwerty1hjkn",name_of_list:"How did it occur?",property_name:"howDiditOccur",placeHolder:"Choose one",items:O.value,listUpdatedFN:N,listFilteredFN:()=>{},use_internal_filter:!0,disabled:o(!0),show_error:o(!1),error_message:"selection required"}],T=a;function S(e){D.value.forEach(e=>e.selected=!1);const a=D.value.find(a=>a.id==e.id);P[1].disabled.value="Accident"!=e.name,a.selected=!0}function N(e){console.log("listUpdated",e),O.value.forEach(e=>e.selected=!1),O.value.find(a=>a.id==e.id).selected=!0}function E(e){const a=[];let n={};return e.items.forEach(n=>{1==n.selected&&a.push({property_name:e.property_name,name:n.name})}),a.length>0?(n[a[0].property_name]=a[0].name,n):n}return(e,a)=>{const o=r("ion-label");return d(),s(g,null,[c(h(J),{class:"checkbox_content md"},{default:p(()=>[c(h(le),null,{default:p(()=>[c(Ve,{placeholder:k[0].placeHolder,icon:h(ie),inputValue:k[0].dataValue.value,"onUpdate:inputValue":k[0].dataHandler},null,8,["placeholder","icon","inputValue","onUpdate:inputValue"]),v("div",null,[k[0].show_error.value?(d(),m(o,{key:0,class:"error-label"},{default:p(()=>[b(C(k[0].error_message),1)]),_:1})):u("",!0)])]),_:1}),c(h(le),null,{default:p(()=>[c(He,{place_holder:x[0].placeHolder,onDateUpDated:x[0].dataHandler,date_prop:""},null,8,["place_holder","onDateUpDated"]),v("div",null,[x[0].show_error.value?(d(),m(o,{key:0,class:"error-label"},{default:p(()=>[b(C(x[0].error_message),1)]),_:1})):u("",!0)])]),_:1})]),_:1}),c(h(J),null,{default:p(()=>[c(h(le),null,{default:p(()=>[c(ia,{place_holder:_[0].placeHolder,onTimeUpDated:_[0].dataHandler,time_prop:""},null,8,["place_holder","onTimeUpDated"]),v("div",null,[_[0].show_error.value?(d(),m(o,{key:0,class:"error-label"},{default:p(()=>[b(C(_[0].error_message),1)]),_:1})):u("",!0)])]),_:1}),c(h(le))]),_:1}),c(h(J),{class:"checkbox_content md"},{default:p(()=>[c(h(le),null,{default:p(()=>[c(Ve,{placeholder:k[1].placeHolder,icon:h(re),inputValue:k[1].dataValue.value,"onUpdate:inputValue":k[1].dataHandler},null,8,["placeholder","icon","inputValue","onUpdate:inputValue"]),v("div",null,[k[1].show_error.value?(d(),m(o,{key:0,class:"error-label"},{default:p(()=>[b(C(k[1].error_message),1)]),_:1})):u("",!0)])]),_:1}),c(h(le),null,{default:p(()=>[c(h(se),{value:w[0].value,alignment:"start",class:"ion-lblCls",disabled:w[0].disable_checkbox.value},{default:p(()=>[b(C(w[0].lblTxt),1)]),_:1},8,["value","disabled"])]),_:1})]),_:1}),c(h(J),null,{default:p(()=>[c(h(le),null,{default:p(()=>[c(Ve,{placeholder:t.value,icon:h(de),inputValue:n.value},null,8,["placeholder","icon","inputValue"])]),_:1}),c(h(le))]),_:1}),c(h(J),null,{default:p(()=>[c(h(le),null,{default:p(()=>[c(He,{place_holder:x[1].placeHolder,onDateUpDated:x[1].dataHandler,date_prop:""},null,8,["place_holder","onDateUpDated"]),v("div",null,[x[1].show_error.value?(d(),m(o,{key:0,class:"error-label"},{default:p(()=>[b(C(x[1].error_message),1)]),_:1})):u("",!0)])]),_:1}),c(h(le),null,{default:p(()=>[c(ia,{place_holder:_[1].placeHolder,onTimeUpDated:_[1].dataHandler,time_prop:""},null,8,["place_holder","onTimeUpDated"]),v("div",null,[_[1].show_error.value?(d(),m(o,{key:0,class:"error-label"},{default:p(()=>[b(C(_[1].error_message),1)]),_:1})):u("",!0)])]),_:1})]),_:1}),c(h(J),null,{default:p(()=>[c(h(le),null,{default:p(()=>[c(h(Q),{modelValue:f.value,"onUpdate:modelValue":[a[0]||(a[0]=e=>f.value=e),a[1]||(a[1]=e=>S(e))],multiple:!1,taggable:!1,"hide-selected":!0,"close-on-select":!0,openDirection:"bottom","tag-placeholder":"Manner of death",placeholder:"Manner of death",selectLabel:"",label:"name",searchable:!0,"track-by":"id",options:D.value},null,8,["modelValue","options"]),v("div",null,[P[0].show_error.value?(d(),m(o,{key:0,class:"error-label"},{default:p(()=>[b(C(P[0].error_message),1)]),_:1})):u("",!0)])]),_:1}),c(h(le),null,{default:p(()=>[c(h(Q),{modelValue:y.value,"onUpdate:modelValue":[a[2]||(a[2]=e=>y.value=e),a[3]||(a[3]=e=>N(e))],multiple:!1,taggable:!1,"hide-selected":!0,"close-on-select":!0,openDirection:"bottom","tag-placeholder":"How did it occur?",placeholder:"How did it occur?",selectLabel:"",label:"name",disabled:P[1].disabled.value,searchable:!0,"track-by":"id",options:O.value},null,8,["modelValue","disabled","options"]),v("div",null,[P[1].show_error.value?(d(),m(o,{key:0,class:"error-label"},{default:p(()=>[b(C(P[1].error_message),1)]),_:1})):u("",!0)])]),_:1})]),_:1}),c(h(J),null,{default:p(()=>[c(h(le),null,{default:p(()=>[c(Ve,{placeholder:k[5].placeHolder,icon:h(ce),inputValue:k[5].dataValue.value,disabled:l.value,"onUpdate:inputValue":k[5].dataHandler},null,8,["placeholder","icon","inputValue","disabled","onUpdate:inputValue"]),v("div",null,[k[5].show_error.value?(d(),m(o,{key:0,class:"error-label"},{default:p(()=>[b(C(k[5].error_message),1)]),_:1})):u("",!0)])]),_:1})]),_:1}),c(h(J),null,{default:p(()=>[c(h(le),null,{default:p(()=>[c(ia,{place_holder:_[2].placeHolder,onTimeUpDated:_[2].dataHandler,time_prop:""},null,8,["place_holder","onTimeUpDated"]),v("div",null,[_[2].show_error.value?(d(),m(o,{key:0,class:"error-label"},{default:p(()=>[b(C(_[2].error_message),1)]),_:1})):u("",!0)])]),_:1}),c(h(le),null,{default:p(()=>[c(Ve,{placeholder:k[2].placeHolder,icon:h(re),inputValue:k[2].dataValue.value,"onUpdate:inputValue":k[2].dataHandler},null,8,["placeholder","icon","inputValue","onUpdate:inputValue"]),v("div",null,[k[2].show_error.value?(d(),m(o,{key:0,class:"error-label"},{default:p(()=>[b(C(k[2].error_message),1)]),_:1})):u("",!0)])]),_:1})]),_:1}),c(h(J),null,{default:p(()=>[c(h(le),null,{default:p(()=>[c(Ve,{placeholder:k[3].placeHolder,icon:h(R),inputValue:k[3].dataValue.value,"onUpdate:inputValue":k[3].dataHandler},null,8,["placeholder","icon","inputValue","onUpdate:inputValue"]),v("div",null,[k[3].show_error.value?(d(),m(o,{key:0,class:"error-label"},{default:p(()=>[b(C(k[3].error_message),1)]),_:1})):u("",!0)])]),_:1}),c(h(le),null,{default:p(()=>[c(Ve,{placeholder:k[4].placeHolder,icon:h(ce),inputValue:k[4].dataValue.value,"onUpdate:inputValue":k[4].dataHandler},null,8,["placeholder","icon","inputValue","onUpdate:inputValue"]),v("div",null,[k[4].show_error.value?(d(),m(o,{key:0,class:"error-label"},{default:p(()=>[b(C(k[4].error_message),1)]),_:1})):u("",!0)])]),_:1})]),_:1}),(d(),m(h(J),{key:0,class:"spc_btwn"},{default:p(()=>[A[0].addItemButton?(d(),m(be,{key:0,name:A[0].name,fill:A[0].btnFill,icon:h(ee),"onClicked:btn":A[0].fn},null,8,["name","fill","icon","onClicked:btn"])):u("",!0),A[1].addItemButton?(d(),m(be,{key:1,name:A[1].name,fill:A[1].btnFill,icon:h(ae),"onClicked:btn":A[1].fn},null,8,["name","fill","icon","onClicked:btn"])):u("",!0)]),_:1}))],64)}}}),dt=Ce(st,[["__scopeId","data-v-0aad2f08"]]),ct={class:"dash_box"},ut={key:1},mt=n({name:"xxxComponent"}),pt=n({...mt,setup(e){const a=o("No outcome created yet"),n=o(!1),t=o("please select a type"),f=o(!0),g=o(""),_=o(!0),x=o(!1),w=Me(),k=l(()=>w.outcomes),A=o(!1),D=o(!1),O=o(!1),P=o(!1),T=o(!1),S=o(!1),N=o([{name:"Admitted for short stay",selected:!1},{name:"Referred out",selected:!1},{name:"Discharged Home",selected:!1},{name:"Send to Another Clinic",selected:!1}]),E=[{multi_Selection:!1,show_list_label:!0,unqueId:"qwerty2",name_of_list:"Add new outcome",placeHolder:"Choose one",items:N.value,listUpdatedFN:function(e){N.value=e,N.value.forEach(e=>{1==e.selected&&(g.value=e.name)})},listFilteredFN:()=>{},use_internal_filter:!0,disabled:o(!1)}];function F(){k.value.length>0?_.value=!1:0==k.value.length&&0==x.value&&(_.value=!0)}function I(e){k.value.splice(e,1)}i(async()=>{F()}),y(()=>g.value,async e=>{1==A.value?A.value=!1:async function(){const e=g.value;console.log(e),g.value=e;const a=g.value;a==N.value[0].name?O.value=!0:O.value=!1,a==N.value[1].name?(P.value=!0,console.log("show_discharged_options is set to true")):P.value=!1,a==N.value[2].name?(T.value=!0,console.log("show_discharged_options is set to true")):T.value=!1,a==N.value[3].name?S.value=!0:S.value=!1}()}),y(()=>k.value.length,async e=>{F()});const V=e=>{};function H(){D.value=!1,O.value=!1,P.value=!1,T.value=!1,N.value.forEach(e=>{e.selected=!1}),g.value=""}return(e,o)=>{const l=r("ion-row");return d(),m(h(oe),null,{default:p(()=>[c(l,null,{default:p(()=>[c(h(le),null,{default:p(()=>[(d(),m(ra,{key:0,"onUpdate:removeItem":I,"onUpdate:editItem":V,displayData:k.value},null,8,["displayData"]))]),_:1})]),_:1}),_.value?(d(),m(l,{key:0},{default:p(()=>[v("span",ct,C(a.value),1)]),_:1})):u("",!0),f.value?(d(),s("div",ut,[c(l,null,{default:p(()=>[c(h(le),null,{default:p(()=>[c(Ue,{multiSelection:E[0].multi_Selection,show_label:E[0].show_list_label,uniqueId:E[0].unqueId,name_of_list:E[0].name_of_list,choose_place_holder:E[0].placeHolder,"items_-list":E[0].items,use_internal_filter:E[0].use_internal_filter,disabled:E[0].disabled.value,onItemListUpDated:E[0].listUpdatedFN,onItemListFiltered:E[0].listFilteredFN},null,8,["multiSelection","show_label","uniqueId","name_of_list","choose_place_holder","items_-list","use_internal_filter","disabled","onItemListUpDated","onItemListFiltered"]),v("div",null,[n.value?(d(),m(h(G),{key:0,class:"error-label"},{default:p(()=>[b(C(t.value),1)]),_:1})):u("",!0)])]),_:1})]),_:1})])):u("",!0),O.value?(d(),m(sa,{key:2,onDataSaved:H,selected_ward_prop:"",admitted_other_props:""})):u("",!0),P.value?(d(),m(da,{key:3,onDataSaved:H,selected_referral_data:"",selected_other_referral_data:""})):u("",!0),T.value?(d(),m(ca,{key:4,onDataSaved:H,selected_discharged_prop:"",selected_discharged_data:""})):u("",!0),D.value?(d(),m(dt,{key:5,onDataSaved:H})):u("",!0),S.value?(d(),m(ua,{key:6,onDataSaved:H})):u("",!0)]),_:1})}}});e("O",Ce(pt,[["__scopeId","data-v-fc637de7"]]))}}});
