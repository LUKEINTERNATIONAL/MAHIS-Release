var Pt=Object.defineProperty;var zt=(n,d,m)=>d in n?Pt(n,d,{enumerable:!0,configurable:!0,writable:!0,value:m}):n[d]=m;var O=(n,d,m)=>zt(n,typeof d!="symbol"?d+"":d,m);import{d as B,O as C,f as r,u as a,aS as Q,p as H,J as u,l as o,aP as W,k as i,e as g,m as ht,K as v,c as K,Q as L,bo as Rt,an as Ft,r as A,a as Ht,a4 as mt,F as x,P as D,a5 as gt,bm as ft,dN as M,I as Et,G as jt,E as Gt,a_ as Ot,N as Kt,a3 as vt,bi as Ut,a6 as Qt}from"./vendor-v_5UaDDk.js";import{_ as P,u as Wt,T as Jt}from"../index-C8cssZLO.js";import{N as qt}from"./neonatal_service-BmbxUdPS.js";import{I as b}from"./images-CiU2O8T9.js";import"./lodash-NJiRuGo9.js";import"./apexcharts-Cw3il1Pz.js";const $=class ${constructor(){O(this,"statusColorMap",{admitted:"danger",discharged:"success",critical:"warning"})}getStatusColor(d){var m;return(m=this.statusColorMap[d.toLowerCase()])!=null?m:"medium"}formatWeight(d){return"".concat((d/1e3).toFixed(2)," kg")}static getInstance(){return $.instance||($.instance=new $),$.instance}};O($,"instance");let U=$;const Xt=U.getInstance(),F=[{label:"Triaged without Registration",key:"enrolled",iconSrc:b.icons.triaged},{label:"Admitted Today",key:"admitted",iconSrc:b.icons.newborn},{label:"Discharged Today",key:"discharged",iconSrc:b.icons.babyCarriage},{label:"Critical",key:"critical",iconSrc:b.icons.warningSign,isCritical:!0}],Yt=[{label:"Start Emergency Triage",iconSrc:b.icons.electrocardiogram,iconClass:"emergency-icon",route:"/neonatal/triage"},{label:"Instruction Guides",iconSrc:b.icons.info,route:"/neonatal/guides"}],Zt={class:"stat-icon-wrapper"},pt=["innerHTML"],Vt=["src","alt"],yt={class:"stat-label"},te=B({__name:"card",props:{label:{},value:{},iconSrc:{},svgIcon:{},isCritical:{type:Boolean},clickable:{type:Boolean}},emits:["click"],setup(n,{emit:d}){const m=n,S=d,_=()=>{m.clickable&&S("click")};return(h,N)=>(r(),C(a(Q),{class:H(["stat-card",{"is-clickable":n.clickable}]),onClick:_},{default:u(()=>[o(a(W),{class:"stat-content"},{default:u(()=>[i("div",Zt,[n.svgIcon?(r(),g("div",{key:0,innerHTML:n.svgIcon,class:"stat-icon"},null,8,pt)):n.iconSrc?(r(),g("img",{key:1,src:n.iconSrc,class:"stat-icon critical-icon",alt:n.label},null,8,Vt)):ht("",!0)]),i("div",yt,v(n.label),1),i("div",{class:H(["stat-value",{"critical-value":n.isCritical}])},v(n.value),3)]),_:1})]),_:1},8,["class"]))}}),ee=P(te,[["__scopeId","data-v-cc8c780a"]]),se={class:"action-icon-wrapper"},ne=["innerHTML"],ae=["src","alt"],oe={class:"action-label"},ie=B({__name:"action-card",props:{label:{},svgIcon:{},iconSrc:{},iconClass:{}},emits:["click"],setup(n,{emit:d}){const m=d,S=()=>{m("click")};return(_,h)=>(r(),C(a(Q),{class:"action-card",onClick:S},{default:u(()=>[o(a(W),{class:"action-content"},{default:u(()=>[i("div",se,[n.svgIcon?(r(),g("div",{key:0,innerHTML:n.svgIcon,class:H(["action-icon",n.iconClass])},null,10,ne)):n.iconSrc?(r(),g("img",{key:1,src:n.iconSrc,class:H(["action-icon",n.iconClass]),alt:n.label},null,10,ae)):ht("",!0)]),i("div",oe,v(n.label),1)]),_:1})]),_:1}))}}),ce=P(ie,[["__scopeId","data-v-fc22b927"]]),le={class:"neonate-info"},re={class:"neonate-name"},ue={class:"neonate-mrn"},de={class:"neonate-details"},me={class:"detail-item"},ge=["src"],fe={class:"detail-item"},_e=["src"],he={class:"neonate-status"},ve=B({__name:"neonate-card",props:{neonate:{},getStatusColor:{type:Function}},emits:["click"],setup(n,{emit:d}){const m=n,S=d,_=K(()=>m.getStatusColor(m.neonate.status)),h=()=>{S("click",m.neonate.id)};return(N,z)=>(r(),C(a(Q),{class:"neonate-card",onClick:h},{default:u(()=>[o(a(W),{class:"neonate-content"},{default:u(()=>[i("div",le,[i("div",re,v(n.neonate.name),1),i("div",ue,v(n.neonate.mrn),1),i("div",de,[i("span",me,[i("img",{src:a(b).icons.deliveryTime,class:"detail-icon"},null,8,ge),L(" "+v(n.neonate.age),1)]),i("span",fe,[i("img",{src:a(b).icons.babyWeight,class:"detail-icon"},null,8,_e),L(" "+v(n.neonate.weight),1)])])]),i("div",he,[o(a(Rt),{color:_.value,class:"status-badge"},{default:u(()=>[L(v(n.neonate.status),1)]),_:1},8,["color"])])]),_:1})]),_:1}))}}),_t=P(ve,[["__scopeId","data-v-a76e5897"]]),be={class:"neonatal-dashboard"},ke={class:"header-image"},Ce=["src"],Se={class:"section-container"},$e={class:"section-container"},Ie={class:"section-container"},we={key:0,class:"neonates-list"},Ne={class:"skeleton-content"},Te={key:1,class:"neonates-list"},Ae={key:2,class:"empty-neonates"},xe={class:"drilldown-content"},De={key:0,class:"empty-drilldown"},Me={key:1,class:"drilldown-list"},Le=B({__name:"LandingPage",setup(n){const d={enrolled:"In patient",admitted:"Admitted",discharged:"Discharged",critical:"Critical"},m=()=>F.reduce((t,e)=>(t[e.key]={count:0,neonates:[]},t),{}),S=Ft(),_=A(m()),h=A([]),N=A(!0),z=A(!1),I=A(null),R=K(()=>{var t,e;return I.value?(e=(t=_.value[I.value])==null?void 0:t.neonates)!=null?e:[]:[]}),bt=t=>{var e,s;return t&&(s=(e=F.find(c=>c.key===t))==null?void 0:e.label)!=null?s:"Neonates"},kt=K(()=>{const t=bt(I.value);return R.value.length?"".concat(t," (").concat(R.value.length,")"):t}),Ct=t=>{var e,s;return(s=(e=_.value[t])==null?void 0:e.count)!=null?s:0},J=t=>{var e,s;return((s=(e=_.value[t])==null?void 0:e.neonates.length)!=null?s:0)>0},St=t=>{J(t)&&(I.value=t,z.value=!0)},q=()=>{z.value=!1,I.value=null},E=t=>{S.push({path:t})},X=async t=>{try{await Wt().setPatientRecord({patientID:Number(t)}),E("/patientProfile?id=".concat(t))}catch(e){console.error("[NeonatalLanding] Failed to load patient:",e),E("/patientProfile?id=".concat(t))}},Y=t=>Xt.getStatusColor(t),$t=async()=>{try{N.value=!0;const t=await qt.getStatistics();_.value=It(t),t.recent_neonates&&Array.isArray(t.recent_neonates)?h.value=t.recent_neonates.map(e=>({id:String(e.id||e.patient_id||""),name:e.name||"Unknown Neonate",mrn:e.mrn||"N/A",age:e.age||"—",weight:e.weight||"—",status:e.status||"In patient"})):xt()}catch(t){console.error("[NeonatalLanding] Failed to load statistics",t),_.value=m(),h.value=[]}finally{N.value=!1}},It=t=>{const e=m();return F.forEach(s=>{var k,w;const c=s.key,f=(w=t==null?void 0:t[c])!=null?w:(k=t==null?void 0:t.stats)==null?void 0:k[c],l=wt(t,c);e[c]=Nt(f,l,c)}),e},wt=(t,e)=>{var c,f,l,k,w;return t?(w=[(c=t==null?void 0:t.neonates)==null?void 0:c[e],(f=t==null?void 0:t.details)==null?void 0:f[e],t==null?void 0:t["".concat(e,"_neonates")],t==null?void 0:t["".concat(e,"_patients")],t==null?void 0:t["".concat(e,"_records")],(l=t==null?void 0:t[e])==null?void 0:l.neonates,(k=t==null?void 0:t[e])==null?void 0:k.patients].find(G=>Array.isArray(G)))!=null?w:[]:[]},Nt=(t,e,s)=>{if(typeof t=="number")return{count:t,neonates:j(e,s)};if(t&&typeof t=="object"){const f=Array.isArray(t.neonates)?t.neonates:Array.isArray(t.patients)?t.patients:e,l=j(f,s);return{count:typeof t.count=="number"?t.count:typeof t.total=="number"?t.total:typeof t.value=="number"?t.value:l.length,neonates:l}}const c=j(e,s);return{count:c.length,neonates:c}},j=(t,e)=>Array.isArray(t)?t.map((s,c)=>Tt(s,e,c)):[],Tt=(t,e,s)=>{var Z,p,V,y,tt,et,st,nt,at,ot,it,ct,lt,rt,ut,dt;const c=d[e],f="".concat(e,"-").concat(s);if(t!=null&&t.name&&(t!=null&&t.mrn))return{id:String((Z=t.id)!=null?Z:f),name:t.name,mrn:t.mrn,age:(p=t.age)!=null?p:"—",weight:(V=t.weight)!=null?V:"—",status:(y=t.status)!=null?y:c};const l=(tt=t==null?void 0:t.patient)!=null?tt:t,k=(nt=(st=(et=t==null?void 0:t.id)!=null?et:t==null?void 0:t.patient_id)!=null?st:l==null?void 0:l.patient_id)!=null?nt:f,G=[t==null?void 0:t.name,l==null?void 0:l.given_name,l==null?void 0:l.family_name].filter(Boolean).join(" ").trim()||"Unknown Neonate",Dt=(it=(ot=(at=t==null?void 0:t.mrn)!=null?at:t==null?void 0:t.identifier)!=null?ot:l==null?void 0:l.identifier)!=null?it:"N/A",Mt=(lt=(ct=t==null?void 0:t.age)!=null?ct:At(l==null?void 0:l.birthdate))!=null?lt:"—",T=(ut=(rt=t==null?void 0:t.weight)!=null?rt:t==null?void 0:t.latest_weight)!=null?ut:t==null?void 0:t.weight_kg,Lt=typeof T=="number"?"".concat(T.toFixed(2)," Kg"):T!=null?T:"—",Bt=(dt=t==null?void 0:t.status)!=null?dt:c;return{id:String(k),name:G,mrn:Dt,age:Mt,weight:Lt,status:Bt}},At=t=>{if(!t)return null;const e=new Date(t);if(Number.isNaN(e.getTime()))return null;const s=Date.now()-e.getTime(),c=Math.floor(s/(1e3*60*60));if(c<24)return"".concat(c," hrs old");const f=Math.floor(c/24);return f<1?"Today":"".concat(f," day").concat(f===1?"":"s"," old")},xt=()=>{const t=Object.values(_.value).flatMap(e=>e.neonates).slice(0,5);h.value=t};return Ht(()=>{$t()}),(t,e)=>(r(),g("div",be,[i("div",ke,[i("img",{src:a(b).banners.babyHand,alt:"baby-hand-banner",style:{"object-fit":"cover"}},null,8,Ce)]),i("div",Se,[e[0]||(e[0]=i("h2",{class:"section-title"},"Today's Stats",-1)),o(a(ft),{class:"stats-grid"},{default:u(()=>[o(a(mt),null,{default:u(()=>[(r(!0),g(x,null,D(a(F),s=>(r(),C(a(gt),{key:s.key,size:"6","size-md":"3"},{default:u(()=>[o(ee,{label:s.label,value:Ct(s.key),"icon-src":s.iconSrc,"svg-icon":s.svgIcon,"is-critical":s.isCritical,clickable:J(s.key),onClick:c=>St(s.key)},null,8,["label","value","icon-src","svg-icon","is-critical","clickable","onClick"])]),_:2},1024))),128))]),_:1})]),_:1})]),i("div",$e,[e[1]||(e[1]=i("h2",{class:"section-title"},"Quick Actions",-1)),o(a(ft),{class:"actions-grid"},{default:u(()=>[o(a(mt),null,{default:u(()=>[(r(!0),g(x,null,D(a(Yt),s=>(r(),C(a(gt),{key:s.route,size:"6","size-md":"6"},{default:u(()=>[o(ce,{label:s.label,"svg-icon":s.svgIcon,"icon-src":s.iconSrc,"icon-class":s.iconClass,onClick:c=>E(s.route)},null,8,["label","svg-icon","icon-src","icon-class","onClick"])]),_:2},1024))),128))]),_:1})]),_:1})]),i("div",Ie,[e[2]||(e[2]=i("h2",{class:"section-title"},"Recent Neonates",-1)),N.value?(r(),g("div",we,[(r(),g(x,null,D(5,s=>i("div",{key:"skeleton-".concat(s),class:"neonate-skeleton"},[o(a(M),{animated:!0,style:{width:"60px",height:"60px","border-radius":"50%"}}),i("div",Ne,[o(a(M),{animated:!0,style:{width:"70%",height:"20px","margin-bottom":"8px"}}),o(a(M),{animated:!0,style:{width:"50%",height:"16px","margin-bottom":"4px"}}),o(a(M),{animated:!0,style:{width:"40%",height:"16px"}})]),o(a(M),{animated:!0,style:{width:"80px",height:"24px","border-radius":"12px"}})])),64))])):h.value.length?(r(),g("div",Te,[(r(!0),g(x,null,D(h.value,s=>(r(),C(_t,{key:s.id,neonate:s,"get-status-color":Y,onClick:X},null,8,["neonate"]))),128))])):(r(),g("div",Ae," No recent neonates to display. "))]),o(a(Ut),{"is-open":z.value,onDidDismiss:q,class:"drilldown-modal"},{default:u(()=>[o(a(Et),null,{default:u(()=>[o(a(jt),null,{default:u(()=>[o(a(Gt),null,{default:u(()=>[L(v(kt.value),1)]),_:1}),o(a(Ot),{slot:"end"},{default:u(()=>[o(a(Kt),{fill:"clear",onClick:q},{default:u(()=>[...e[3]||(e[3]=[L("Close",-1)])]),_:1})]),_:1})]),_:1})]),_:1}),o(a(vt),null,{default:u(()=>[i("div",xe,[R.value.length?(r(),g("div",Me,[(r(!0),g(x,null,D(R.value,s=>(r(),C(_t,{key:"".concat(I.value,"-").concat(s.id),neonate:s,"get-status-color":Y,onClick:X},null,8,["neonate"]))),128))])):(r(),g("div",De," No neonates available for this statistic. "))])]),_:1})]),_:1},8,["is-open"])]))}}),Be=P(Le,[["__scopeId","data-v-d9096e23"]]),Pe=B({__name:"NeonatalHome",setup(n){return(d,m)=>(r(),C(a(Qt),null,{default:u(()=>[o(Jt),o(a(vt),{fullscreen:!0},{default:u(()=>[o(Be)]),_:1})]),_:1}))}}),Oe=P(Pe,[["__scopeId","data-v-052dae1c"]]);export{Oe as default};
