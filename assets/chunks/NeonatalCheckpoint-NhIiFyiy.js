import{d as y,aF as M,bh as h,r,c as E,a as x,w as f,Q as R,f as P,H as T,l,u as i,L as D,k as I,P as B,a3 as Y,N as k,f9 as w,I as G,bq as b}from"./vendor-CJ2tyHrn.js";import{u as V,b as o,T as F,t as O,_ as U}from"../index-CPIhguZJ.js";import{N as X}from"./neonatal_service-DKdrVzxM.js";import{g as q}from"./admissionWorkflow-C1e4oic-.js";import{A as H}from"./AdmissionProgressBar-iDenwSxV.js";import"./lodash-NJiRuGo9.js";import"./apexcharts-BtvCa6MI.js";const W={class:"checkpoint-container"},z={class:"control-buttons"},Q=y({__name:"NeonatalCheckpoint",setup($){const n=M(),v=V(),{patient:N}=h(v),m=r(!1),u=r([]),p=r(!1),A=r(!1),a=r([{encounterType:o.NEONATAL_SIGNS_SYMPTOMS,title:"Signs & Symptoms",route:"/neonatal/signs-symptoms",encounterNames:["NEONATAL SIGNS & SYMPTOMS","NEONATAL SIGNS SYMPTOMS"],isCompleted:!1},{encounterType:o.NEONATAL_REVIEW_OF_SYSTEMS,title:"Review of Systems",route:"/neonatal/review-of-systems",encounterNames:["NEONATAL REVIEW OF SYSTEMS"],isCompleted:!1},{encounterType:o.PHYSICAL_EXAMINATION_BABY,title:"General Examination",route:"/neonatal/general-examination",encounterNames:["PHYSICAL EXAMINATION BABY","NEONATAL GENERAL EXAMINATION"],isCompleted:!1},{encounterType:o.VITALS,title:"Vitals",route:"/neonatal/vitals",encounterNames:["VITALS","NEONATAL VITALS"],isCompleted:!1},{encounterType:o.NEONATAL_SYSTEMIC_EXAMINATION,title:"Systemic Examination",route:"/neonatal/SystemicExamination",encounterNames:["NEONATAL SYSTEMIC EXAMINATION"],isCompleted:!1},{encounterType:o.DIAGNOSIS,title:"Diagnosis",route:"/neonatal/diagnosis",encounterNames:["DIAGNOSIS","NEONATAL DIAGNOSIS"],isCompleted:!1},{title:"Investigations",route:"/neonatal/investigation",encounterNames:["LAB ORDERS","LAB RESULTS"],isCompleted:!1},{encounterType:o.TREATMENT,title:"Treatment Plan",route:"/neonatal/treatment-plan",encounterNames:["TREATMENT","NEONATAL TREATMENT PLAN"],isCompleted:!1},{encounterType:o.NEONATAL_ADMISSION_OUTCOMES,title:"Admission Outcomes",route:"/neonatal/admission-outcomes",encounterNames:["NEONATAL ADMISSION OUTCOMES","ADMISSION OUTCOMES"],isCompleted:!1},{title:"Sign Off",route:"/neonatal/admission-signoff",encounterNames:["NEONATAL SIGNOFF"],isCompleted:!1}]),S=e=>(e!=null?e:"").trim().toUpperCase(),C=E(()=>{if(!A.value)return"Next: Triage";if(!p.value)return"Next: Profiling";const e=a.value.find(t=>!t.isCompleted);return e?"Next: ".concat(e.title):"Print Summary"}),L=E(()=>a.value.every(e=>e.isCompleted)),d=async()=>{var e;if(!((e=N.value)!=null&&e.patientID)){O("No patient selected"),n.push("/patientProfile");return}m.value=!0;try{const t=await X.getSavedEncounters(N.value.patientID);u.value=Array.isArray(t==null?void 0:t.encounters)?t.encounters:[],p.value=u.value.some(s=>{const c=S(s);return c==="NEONATAL ENROLLMENT"||c==="NEONATAL ENROLMENT"}),A.value=u.value.some(s=>S(s)==="NEONATAL TRIAGE");const g=q(u.value,a.value);a.value.forEach((s,c)=>{s.isCompleted=c<g})}catch(t){console.error("Error loading progress:",t),O("Unable to load progress")}finally{m.value=!1}},_=()=>{if(!A.value){n.push("/neonatal/triage");return}if(!p.value){n.push("/neonatal/enrollment");return}const e=a.value.find(t=>!t.isCompleted);e?n.push({path:e.route,query:e.query||{}}):L.value&&n.push("/neonatal/admission-outcomes")};return x(()=>{d()}),f(()=>{var e;return(e=N.value)==null?void 0:e.patientID},e=>{e&&d()}),f(()=>n.currentRoute.value.fullPath,e=>{e==="/neonatal/checkpoint"&&d()}),(e,t)=>(P(),R(i(b),null,{default:T(()=>[l(F),l(i(D),{class:"ion-padding"},{default:T(()=>[I("div",W,[l(H),I("div",z,[l(i(B),{expand:"block",fill:"solid",color:"primary",onClick:_,disabled:m.value},{default:T(()=>[l(i(k),{slot:"start",icon:i(w)},null,8,["icon"]),Y(" "+G(C.value),1)]),_:1},8,["disabled"])])])]),_:1})]),_:1}))}}),ne=U(Q,[["__scopeId","data-v-162d27fd"]]);export{ne as default};
