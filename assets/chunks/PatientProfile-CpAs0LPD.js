import{d as P,a as ut,r as q,e as v,f as c,k as i,l as n,J as s,Q as u,K as y,u as pe,W as Z,ba as mt,N as H,F as B,R as U,fh as pt,H as a,O as k,aj as ie,_ as W,$ as Je,a0 as Ye,P as X,ah as $,a4 as R,a5 as K,b2 as _e,G as ee,E as x,ai as ge,I as J,a3 as Y,i as oe,m as w,v as ae,bi as ve,al as le,ak as ce,aQ as be,cz as ye,aR as De,aU as Se,bq as Ce,a6 as we,cq as Ve,M as ke,L as Ze,b9 as ht,a2 as Xe,fi as ft,bf as _t,aT as et,bl as gt,dg as vt,dh as bt,di as yt,dj as Dt,b$ as St,c$ as Ct,dV as wt,bM as Vt,p as kt}from"./vendor-Cp5kB0Ag.js";import{k as b,_ as T,t as Q,j as de,B as Ie,a0 as It,S as M,H as N,u as te,l as z,m as V,G as $e,o as $t,aS as j,J as tt,N as F,cj as Nt,b3 as At,M as L,c6 as Mt,s as Bt,cH as Ke,P as nt,Q as Pt,T as Ot,bT as Tt,bF as Et,a8 as Ft,aM as Gt,aK as Ut,b7 as Lt}from"../index-2r7jBG9X.js";import{D as Rt}from"./DemographicBar-CXfbjMuZ.js";import{S as Ht}from"./SaveProgressModal-CECVro8a.js";import{S as Wt}from"./Stepper-BF-Rh4y_.js";import{T as zt}from"./nonPharmaTherapyStore-DyLZjdLS.js";import{l as G}from"./lodash-NJiRuGo9.js";import{D as xe,a as jt}from"./drug_prescription_service-DQmFht-1.js";import qt from"./WeightHeightChart-D8xJ6fKm.js";import{w as Qt,O as Kt}from"./weightAndHeight-jl3PNxCJ.js";import{c as Ne}from"./customDatePicker-MqtkLmV0.js";import{i as se,s as st,j as xt,A as Jt,N as Yt}from"./vaccines_service-B1PFyIg0.js";import{I as Zt}from"./barcode-qrcode-reader-D8UMlJOQ.js";import{S as it}from"./stock_service-C5Ec7c9-.js";import{_ as Xt,u as he}from"./SetRelationship.vue_vue_type_script_lang-BBYEGJad.js";import{B as ot}from"./BasicForm-BSje4Gzt.js";import{v as en}from"./group_validation-CxZUqyTS.js";import{u as tn}from"./AdministerOtherVaccinesStore-Cz66iI_a.js";import{O as nn,c as sn}from"./usePatientProfile-B1mmaUcd.js";import"./apexcharts-Dspn07Ot.js";import"./NextAppointment-CWWE1nCt.js";import"./LabOrdersList-CfDq_Dls.js";import"./DateInputField-CjprfEyO.js";import"./RadiologyStore-M2NwtYqj.js";import"./formatServerData-BBViA18h.js";import"./DashBox-DUrTTAbO.js";import"./previousComplaints-DRhas4DU.js";import"./patient_complaints_service-DJ5VAE4S.js";import"./useUserActivities-D_U6Jhc0.js";import"./ncd_appointment_service-Drcj63Ki.js";import"./OPDOutcome-CMYwBBh7.js";import"./LevelOfConsciousness.vue_vue_type_script_setup_true_lang-DfjcaoP3.js";import"./VitalsMixin.vue_vue_type_script_lang-BKrApJq_.js";import"./TreatmentPlan-DEQz5rCC.js";import"./patient_diagnosis_service-i55TNq1B.js";import"./previousDiagnosis-Bb1705Gv.js";import"./OPDDiagnosis-DV72wYVM.js";import"./FeatusModal-n575FTlL.js";import"./BasicCard-JXxlOqKo.js";import"./PastObstreticHistoryStore-CGr5zWMs.js";import"./UpcomingFeature-B5Fv6k2H.js";import"./chartjs-C_3gsg3N.js";import"./sms_service-BJDCrgCZ.js";import"./EIRreportsStore-m1969x84.js";import"./Export-CivbQ2eA.js";import"./Registration-DRDS907B.js";import"./useLocation-RkNVMdsN.js";import"./useNeonatalEnrollmentStore-BHoT09_i.js";import"./enrollment-DU-PLRUa.js";const on={class:"flex flex-col items-center justify-center mt-6"},an={class:"phone mt-6"},rn={class:"content"},ln={class:"overlay"},cn={style:{"margin-top":"20px"}},dn=P({__name:"QRCodeReader",emits:["scanresult"],setup(e,{emit:t}){ut(async()=>{_()});const o=q(void 0),r=q(!1);function d(f){o.value=f,o.value!=null&&(b().setTempScannedBatchNumber(o.value),g(o.value))}function D(f){r.value=f}const l=q(null);function _(){var f;(f=l.value)==null||f.onCanPlay()}function p(){U.dismiss()}const h=t;function g(f){h("scanresult",f),p()}return(f,m)=>(c(),v(B,null,[i("div",on,[i("div",an,[n(pe(Z),null,{default:s(()=>[u(y(o.value),1)]),_:1}),i("div",rn,[i("div",ln,[n(pe(Zt),{ref_key:"refCamera",ref:l,capture:"shoot","show-on-stream":"",onOnloading:D,onResult:d},null,512),m[0]||(m[0]=mt('<div class="focus-frame" data-v-e0d52d85></div><div class="dark-overlay top" data-v-e0d52d85></div><div class="dark-overlay bottom" data-v-e0d52d85></div><div class="dark-overlay left" data-v-e0d52d85></div><div class="dark-overlay right" data-v-e0d52d85></div>',5))])])])]),i("div",cn,[n(pe(H),{onClick:p,id:"cbtn",class:"btnText cbtn",fill:"solid",style:{width:"99%"}},{default:s(()=>[...m[1]||(m[1]=[u(" Cancel ",-1)])]),_:1})])],64))}}),at=T(dn,[["__scopeId","data-v-e0d52d85"]]),un=P({name:"MyComponent",components:{IonAlert:pt},data(){return{isOpen:!1,alertButtons:[{text:"Close",role:"cancel",cssClass:"alert-danger-button"}],messageContent:"No available batches/lot numbers"}},methods:{setOpen(e){this.isOpen=e},handleDismiss(){this.setOpen(!1),this.$emit("alertClosed"),this.dismiss()},dismiss(){U.dismiss()}},mounted(){this.setOpen(!0)}});function mn(e,t,o,r,d,D){const l=a("ion-alert");return c(),k(l,{"is-open":e.isOpen,header:"Please update stock","sub-header":"",message:e.messageContent,buttons:e.alertButtons,"css-class":"my-custom-alert",onDidDismiss:e.handleDismiss},null,8,["is-open","message","buttons","onDidDismiss"])}const re=T(un,[["render",mn],["__scopeId","data-v-cf655518"]]),pn=P({components:{IonRadioGroup:Ye,IonRadio:Je,IonItem:W,IonList:ie},props:{action:{type:Function,required:!0},retro:{type:Boolean,required:!0}},async mounted(){this.loadCurrentSelectedDrug()},watch:{retro:{handler(){this.checkToShow()},deep:!0}},data(){return{lotNumbers:[],selectedOption:{}}},methods:{compareWith(e,t){return e.id===t.id},handleChange(e){this.selectedOption=e.detail.value},checkIfSelected(){return G.has(this.selectedOption,"lotNumber")||this.checkDrugNameInt()==!0?!0:(Q("Select a batch number!"),!1)},performAction(){this.checkIfSelected()==!0&&this.$emit("actionTriggered",this.selectedOption)},async loadCurrentSelectedDrug(){try{const t=b().getCurrentSelectedDrug();await this.formBatchList(t.drug.drug_id)}catch(e){}},async formBatchList(e){try{const o=b().getLotNumberData();o.length==0&&this.$emit("emptyList",""),o.forEach(r=>{const d={id:r.id,lotNumber:r.batch_number};this.lotNumbers.push(d)}),this.checkToShow()}catch(t){}},addUnkownLotNumberOption(){const t=b().getCurrentSelectedDrug();this.lotNumbers.push({id:t.drug.drug_id,lotNumber:"Unknown"})},checkToShow(){this.$props.retro==!0&&this.addUnkownLotNumberOption(),this.checkDrugNameInt()},checkDrugNameInt(){const t=b().getCurrentSelectedDrug();return se(t.drug)==!0?(this.lotNumbers=[],this.lotNumbers.push({id:t.drug.drug_id,lotNumber:"Unknown"}),!0):!1}}});function hn(e,t,o,r,d,D){const l=a("ion-radio"),_=a("ion-item"),p=a("ion-radio-group"),h=a("ion-list"),g=a("ion-card"),f=a("ion-row");return c(),k(f,null,{default:s(()=>[n(g,{class:"shadowless-card",style:{width:"100%",padding:"0"}},{default:s(()=>[n(h,null,{default:s(()=>[n(p,{compareWith:e.compareWith,onIonChange:t[0]||(t[0]=m=>e.handleChange(m)),value:"start"},{default:s(()=>[(c(!0),v(B,null,X(e.lotNumbers,m=>(c(),k(_,{key:m.id},{default:s(()=>[n(l,{value:m},{default:s(()=>[u(y(m.lotNumber),1)]),_:2},1032,["value"])]),_:2},1024))),128))]),_:1},8,["compareWith"])]),_:1})]),_:1})]),_:1})}const rt=T(pn,[["render",hn],["__scopeId","data-v-039b66ba"]]),fn=P({components:{IonContent:Y,IonHeader:J,IonItem:W,IonList:ie,IonMenu:ge,IonTitle:x,IonToolbar:ee,IonInput:_e,BasicInputField:Ie,PreviousVitals:de,customDatePicker:Ne,lotNumberList:rt,alert:re,IonCol:K,IonButton:H,IonRow:R},data(){return{iconsContent:z,showPD:!1,showDateBtns:!0,vaccineDate:"",batchNumber:"",drugName:"",currentDrug:"",is_batch_number_valid:!1,batch_number_error_message:"Enter a valid batch number",full_name:"",sessionDate:N.toStandardHisDisplayFormat(M.getSessionDate()),InnerActionBtnPropeties:{name:"Scan",show:!0,fn:()=>{V(at,{class:"otherVitalsModal qr_code_modal"},!1)},icon:"",show_icon:!1},selected_date_:"",is_a_vaccine:!0}},computed:{...$(b,["tempScannedBatchNumber"]),...$(te,["patient"])},setup(){const e=q(null);return{childComponentRef:e,triggerChildAction:()=>{e.value&&e.value.performAction()}}},async mounted(){this.loadCurrentSelectedDrug(),this.displayUserNames();const e=b();this.showPD=e.isVaccinePassed(),this.showDateBtns=!this.showPD},props:{customSchedule:{type:[],default:[]}},watch:{batchNumber:{handler(){this.validateBatchNumber()},deep:!0},tempScannedBatchNumber:{handler(){this.tempScannedBatchNumber!=null&&(this.batchNumber=this.tempScannedBatchNumber.text,this.validateBatchNumber())}}},methods:{loadCurrentSelectedDrug(){const e=b();this.currentDrug=e.getCurrentSelectedDrug(),this.drugName=this.currentDrug.drug.drug_name,this.batchNumber=this.currentDrug.drug.vaccine_batch_number?this.currentDrug.drug.vaccine_batch_number:"",se(this.currentDrug.drug)==!0&&(this.is_a_vaccine=!1,this.batchNumber="unknown")},showCPD(){this.showPD=!0,this.showDateBtns=!1},dismiss(){U.dismiss()},updateDate(e){this.vaccineDate=N.toStandardHisFormat(e)},saveBatchWithTodayDate(){let e=M.getSessionDate();this.saveDta(e)},saveBatch(){let e;G.isEmpty(this.vaccineDate)==!0?e=M.getSessionDate():e=this.vaccineDate,this.saveDta(e)},updateBatchNumber(e){var o;const t=e.target.value;this.batchNumber=t||((o=this.tempScannedBatchNumber)==null?void 0:o.text)||""},async ActionTriggered(e){const t={batch_number:e.lotNumber,date_administered:this.selected_date_,drug_id:this.currentDrug.drug.drug_id,drug_:this.currentDrug},o=b();o.setAdministeredVaccine(t),await st(this.patient),o.setTempScannedBatchNumber(null),this.dismiss()},saveDta(e){this.selected_date_=e,this.triggerChildAction()},isAlphaNumeric(e){return/^[a-zA-Z0-9!@#$%^&*()_+\-=[\]{};':"\\|,.<>/?]+$/.test(e)},validateBatchNumber(){this.isAlphaNumeric(this.batchNumber)==!0&&(this.is_batch_number_valid=!1),this.isAlphaNumeric(this.batchNumber)==!1&&(this.is_batch_number_valid=!0)},updateBatchNumberByPassValue(e){this.batchNumber=e},displayUserNames(){const t=It().getUser(),o=t.person.names[0].given_name,r=t.person.names[0].family_name;this.full_name=o+" "+r},childAction(){},ShowAlert(){}}}),_n={class:"modal_wrapper"},gn={class:"lbl-ct"},vn={class:"client_admi"},bn={class:"client_admin_sub_x"},yn={class:"btnContent"},Dn={key:0,class:"saveBtn"},Sn={key:1,class:"saveBtn"};function Cn(e,t,o,r,d,D){const l=a("ion-col"),_=a("ion-label"),p=a("ion-row"),h=a("lotNumberList"),g=a("customDatePicker"),f=a("ion-icon"),m=a("ion-button");return c(),v("div",_n,[n(p,{style:{"margin-top":"10px"}},{default:s(()=>[n(l,{style:{"margin-left":"-3px"}},{default:s(()=>[...t[0]||(t[0]=[i("div",{class:"om"},"Administer Vaccine",-1)])]),_:1}),n(l,{size:"6",style:{"text-align":"right"}},{default:s(()=>[n(_,{class:"lbl-tl",style:{"font-size":"13"}},{default:s(()=>[t[1]||(t[1]=u(" Todays Date: ",-1)),i("span",gn,y(e.sessionDate),1)]),_:1})]),_:1})]),_:1}),n(p,null,{default:s(()=>[n(_,{style:{"font-weight":"600px","font-size":"20px",margin:"10px","margin-left":"0px"}},{default:s(()=>[u(y(e.drugName),1)]),_:1})]),_:1}),oe(n(p,null,{default:s(()=>[n(_,{style:{margin:"10px","margin-left":"0px","margin-top":"0px",color:"grey"}},{default:s(()=>[...t[2]||(t[2]=[u("Select Batch number",-1),i("span",{style:{color:"#b42318"}},"*",-1)])]),_:1})]),_:1},512),[[ae,e.is_a_vaccine]]),oe(i("div",null,[n(h,{action:e.childAction,retro:e.showPD,ref:"childComponentRef",onActionTriggered:e.ActionTriggered,onEmptyList:e.ShowAlert},null,8,["action","retro","onActionTriggered","onEmptyList"])],512),[[ae,e.is_a_vaccine]]),i("div",vn,[t[3]||(t[3]=i("span",{class:"client_admi_sub"},"Vaccination done by: ",-1)),i("span",bn,y(e.full_name),1)]),e.showPD?(c(),k(g,{key:0,onDateChange:e.updateDate},null,8,["onDateChange"])):w("",!0),i("div",yn,[e.showDateBtns?(c(),v("div",Dn,[i("div",null,[n(m,{onClick:e.saveBatchWithTodayDate,class:"btnText",fill:"solid"},{default:s(()=>[t[4]||(t[4]=u(" Done today ",-1)),n(f,{slot:"end",size:"small",icon:e.iconsContent.calenderwithPlus},null,8,["icon"])]),_:1},8,["onClick"])]),t[6]||(t[6]=i("div",{style:{"margin-bottom":"20px"}},null,-1)),i("div",null,[n(m,{class:"btnText",fill:"solid",onClick:e.showCPD},{default:s(()=>[t[5]||(t[5]=u(" Done earlier ",-1)),n(f,{slot:"end",size:"small",icon:e.iconsContent.calenderWithPenEdit},null,8,["icon"])]),_:1},8,["onClick"])])])):w("",!0),e.showDateBtns?w("",!0):(c(),v("div",Sn,[n(p,{class:"ion-justify-content-between",style:{width:"100%"}},{default:s(()=>[n(l,{size:"auto"},{default:s(()=>[n(m,{onClick:e.dismiss,id:"cbtn",class:"btnText cbtn",fill:"solid",style:{width:"130px"}},{default:s(()=>[...t[7]||(t[7]=[u(" Cancel ",-1)])]),_:1},8,["onClick"])]),_:1}),n(l,{size:"auto"},{default:s(()=>[n(m,{onClick:e.saveBatch,class:"btnText",fill:"solid",style:{width:"130px"}},{default:s(()=>[...t[8]||(t[8]=[u(" Save ",-1)])]),_:1},8,["onClick"])]),_:1})]),_:1})]))])])}const fe=T(fn,[["render",Cn],["__scopeId","data-v-6b431d87"]]),wn=P({components:{IonRow:R,IonItem:W,IonList:ie,IonRadio:Je,IonRadioGroup:Ye,IonButton:H,IonCol:K},data(){return{reasons:[{id:1,name:"Mistake/ Wrong Entry",type:"Mistake/ Wrong Entry"},{id:2,name:"Duplicate",type:"Duplicate"},{id:3,name:"System Error",type:"System Error"}],selectedOption:{}}},computed:{...$(te,["patient"])},async mounted(){},props:{},methods:{compareWith(e,t){return e.id===t.id},handleChange(e){this.selectedOption=e.detail.value},dismiss(){try{U.dismiss()}catch(e){}},checkIfSelected(){return G.has(this.selectedOption,"name")==!0?!0:(Q("Select a reason!"),!1)},async voidVaccine1(){if(this.checkIfSelected()==!0)try{const e=b(),t=e.getVaccineToBeVoided();await xt(this.patient,t,this.selectedOption.name),$e("Vaccine was successfully voided!"),e.setVaccineReload(!e.getVaccineReload()),U.dismiss({voided:!0})}catch(e){}}}}),Vn={class:"saveBtn"};function kn(e,t,o,r,d,D){const l=a("ion-row"),_=a("ion-radio"),p=a("ion-item"),h=a("ion-radio-group"),g=a("ion-list"),f=a("ion-button"),m=a("ion-col");return c(),v(B,null,[n(l,{class:"centered-content"},{default:s(()=>[...t[1]||(t[1]=[i("div",{class:"text-container"},[i("div",null,"Do you want to void this vaccine?"),i("div",null,"Please specify reason for voiding this administered vaccine?")],-1)])]),_:1}),n(l,null,{default:s(()=>[n(g,{style:{width:"100%"}},{default:s(()=>[n(h,{compareWith:e.compareWith,onIonChange:t[0]||(t[0]=C=>e.handleChange(C)),value:"start"},{default:s(()=>[(c(!0),v(B,null,X(e.reasons,C=>(c(),k(p,null,{default:s(()=>[n(_,{value:C},{default:s(()=>[u(y(C.name),1)]),_:2},1032,["value"])]),_:2},1024))),256))]),_:1},8,["compareWith"])]),_:1})]),_:1}),i("div",Vn,[n(l,{class:"ion-justify-content-between",style:{width:"100%"}},{default:s(()=>[n(m,{size:"auto"},{default:s(()=>[n(f,{onClick:e.dismiss,id:"cbtn",class:"btnText cbtn",fill:"solid",style:{width:"130px"}},{default:s(()=>[...t[2]||(t[2]=[u(" Cancel ",-1)])]),_:1},8,["onClick"])]),_:1}),n(m,{size:"auto"},{default:s(()=>[n(f,{onClick:e.voidVaccine1,class:"btnText",fill:"solid",style:{width:"130px"}},{default:s(()=>[...t[3]||(t[3]=[u(" Void ",-1)])]),_:1},8,["onClick"])]),_:1})]),_:1})])],64)}const In=T(wn,[["render",kn],["__scopeId","data-v-6bfc32c8"]]),$n=P({name:"Home",components:{IonContent:Y,IonHeader:J,IonMenuButton:Ve,IonPage:we,IonTitle:x,IonToolbar:ee,IonButton:H,IonCard:Ce,IonCardContent:Se,IonCardHeader:De,IonCardSubtitle:ye,IonCardTitle:be,IonAccordion:ce,IonAccordionGroup:le,IonItem:W,IonLabel:Z,IonModal:ve,IonCol:K,IonRow:R,alert:re},data(){return{iconsContent:z,fowardData:{}}},computed:{},created(){},mounted(){},props:{vaccines:{type:{},default:{}},milestone_status:{type:String,default:0}},watch:{},setup(){let e=!1;return{isModalOpening:e,cleanupModal:()=>{e=!1;const o=document.querySelector(".pr_o");o&&o.remove()}}},methods:{covertToDate(e){return N.toStandardHisDisplayFormat(e)},getColorForVaccine(e){if(e.status=="administered")return"success";if(e.status!="administered")return this.milestone_status=="upcoming"?"medium":this.milestone_status=="current"?"success":"danger"},getInjectSignForVaccine(e){if(e.status=="administered")return this.iconsContent.greenInjection;if(e.status!="administered")return this.milestone_status=="upcoming"?"":this.iconsContent.fadedGreenIjection},getCheckBoxForVaccine(e){if(e.status=="administered")return this.iconsContent.improvedGreenTick;if(e.status!="administered")return this.milestone_status=="upcoming"?"":this.iconsContent.whiteCheckbox},async openAdministerVaccineModal(e){const t=document.querySelector(".pr_o");if(this.isModalOpening||t){console.log("Modal already open or opening, current state:",{isModalOpening:this.isModalOpening,modalExists:!!t});return}try{this.isModalOpening=!0;const o=b();o.setCurrentSelectedDrug(e);const r=new it;let d;M.getPouchDbStatus()||M.getLanConnectionStatus()?d=await $t("stock",{selector:{drug_id:e.drug_id}}):d=await r.getDrugBatches(e.drug_id),o.setLotNumberData(d),this.checkIfAdminstredAndAskToVoid()||(d.length===0?se(e)?V(fe,{class:"otherVitalsModal pr_o"}):V(re,{class:"otherVitalsModal pr_o"}):V(fe,{class:"otherVitalsModal pr_o"}))}catch(o){throw console.error("Error opening modal:",o),o}finally{this.isModalOpening=!1,console.log("Modal open process completed")}},disableVaccine(e){if(e.status!=null&&e.status=="administered")return!1;if(e.can_administer!=null&&e.can_administer==!1)return!0;if(e.can_administer!=null&&e.can_administer==!0)return!1},checkVaccineName(e){return e.replace(/Pentavalent/g,"Penta")},checkIfAdminstredAndAskToVoid(){const e=b(),t=e.getCurrentSelectedDrug();return t.drug.status=="administered"?(e.setVaccineToBeVoided(t),V(In,{class:"otherVitalsModal"},!1),!0):!1}}}),Nn={class:"vaccinesList"},An={class:"button-content"},Mn={style:{"margin-top":"20px"}};function Bn(e,t,o,r,d,D){const l=a("ion-icon"),_=a("ion-button"),p=a("ion-col"),h=a("ion-row");return c(),v("div",Nn,[n(h,null,{default:s(()=>[n(p,null,{default:s(()=>[(c(!0),v(B,null,X(e.vaccines,g=>(c(),k(_,{disabled:e.disableVaccine(g),class:"administerVac",key:g,onClick:f=>e.openAdministerVaccineModal(g),fill:"solid",color:e.getColorForVaccine(g),style:{background:"#ddeedd","border-radius":"8px",color:"#636363"}},{default:s(()=>[n(l,{slot:"start",icon:e.getInjectSignForVaccine(g)},null,8,["icon"]),i("div",An,[i("div",Mn,y(e.checkVaccineName(g.drug_name)),1),i("div",null,y(e.covertToDate(g.date_administered)),1)]),n(l,{slot:"end",icon:e.getCheckBoxForVaccine(g)},null,8,["icon"])]),_:2},1032,["disabled","onClick","color"]))),128))]),_:1})]),_:1})])}const ue=T($n,[["render",Bn],["__scopeId","data-v-a72ee172"]]),Pn=P({name:"Home",components:{IonIcon:Ze,IonButton:H,customVaccine:ue,IonHeader:J,IonTitle:x,IonFooter:ke,IonCol:K,IonRow:R,IonContent:Y},data(){return{iconsContent:z,vaccineHistory:[]}},setup(){return{closeCircleOutline:Xe,checkmarkOutline:ht}},computed:{...$(b,["vaccineReload","vaccineSchedule"])},methods:{vaccinesGivenCount(e){const t=[];return e.antigens.forEach(o=>{o.status=="administered"&&t.push(o)}),t.length},dismiss(){U.dismiss()}}}),On={style:{color:"#016302"}},Tn={style:{color:"#316CBA","margin-left":"10%"}};function En(e,t,o,r,d,D){const l=a("ion-title"),_=a("ion-header"),p=a("ion-icon"),h=a("row"),g=a("customVaccine"),f=a("ion-content"),m=a("ion-button"),C=a("ion-col"),I=a("ion-row"),A=a("ion-footer");return c(),v(B,null,[n(_,null,{default:s(()=>[n(l,{style:{"margin-bottom":"20px"},class:"modalTitle OtherVitalsTitle"},{default:s(()=>[...t[1]||(t[1]=[u("Vaccination History",-1)])]),_:1})]),_:1}),n(f,{fullscreen:!0,class:"ion-padding"},{default:s(()=>[(c(!0),v(B,null,X(e.vaccineSchedule.vaccine_schedule,(S,E)=>(c(),v("div",{class:"mod-ls",key:E},[n(h,null,{default:s(()=>[n(p,{size:"medium",style:{"margin-bottom":"-6px"},icon:e.iconsContent.calendar},null,8,["icon"]),i("span",null,[t[2]||(t[2]=u(" at ",-1)),i("span",On,y(S.age),1)]),i("span",Tn,y(e.vaccinesGivenCount(S))+"/"+y(S.antigens.length)+" vaccine(s) given",1)]),_:2},1024),n(h,null,{default:s(()=>[n(g,{vaccines:S.antigens,milestone_status:S.milestone_status},null,8,["vaccines","milestone_status"])]),_:2},1024)]))),128))]),_:1}),n(A,{collapse:"fade",class:"ion-no-border"},{default:s(()=>[n(I,null,{default:s(()=>[n(C,null,{default:s(()=>[n(m,{id:"cbtn",class:"btnText cbtn",fill:"solid",style:{width:"130px"},onClick:t[0]||(t[0]=S=>e.dismiss())},{default:s(()=>[...t[3]||(t[3]=[u(" Cancel ",-1)])]),_:1})]),_:1})]),_:1})]),_:1})],64)}const Fn=T(Pn,[["render",En],["__scopeId","data-v-59edb4e4"]]),Gn=P({mixins:[Xt],components:{IonContent:Y,IonHeader:J,IonItem:W,IonList:ie,IonMenu:ge,IonTitle:x,IonToolbar:ee,IonInput:_e,BasicInputField:Ie,BasicForm:ot,PreviousVitals:de,customDatePicker:Ne,DynamicButton:tt,IonFooter:ke,IonIcon:Ze,IonRow:R,IonAccordionGroup:le,IonAccordion:ce},data(){return{iconsContent:z,BMI:{},BPStatus:{},vValidations:"",hasValidationErrors:[],vitalsInstance:{},validationStatus:{heightWeight:!1,bloodPressure:!1},showPD:!1,initialSeriousData:[],initialFirstDecisionData:[],initialOutcomeData:[]}},props:{protectedStatus:String,lastVaccinesGiven:Array},watch:{personInformation:{async handler(){await this.setRelationShip()},deep:!0}},computed:{...$(te,["patient"]),...$(he,["changeGuardianInfo","vaccineAdverseEffects","protectedAtBirth","serious","outcome","firstDecision"]),guardianFirstname(){return F(this.changeGuardianInfo,"guardianFirstname","value")},guardianLastname(){return F(this.changeGuardianInfo,"guardianLastname","value")},guardianMiddleName(){return F(this.changeGuardianInfo,"guardianMiddleName","value")},guardianPhoneNumber(){return F(this.changeGuardianInfo,"guardianPhoneNumber","value")},relationship(){return F(this.changeGuardianInfo,"relationship","value")}},async mounted(){await this.setupData()},setup(){return{checkmark:et,pulseOutline:_t,closeCircleOutline:Xe,folderOpenOutline:ft}},methods:{async setupData(){var o,r,d,D,l,_,p,h,g,f;const e=he();this.initialSeriousData=e.getInitialSerious(),this.initialFirstDecisionData=e.getInitialFirstDecision(),this.initialOutcomeData=e.getInitialOutcome();const t=await Mt.getRelationships(this.patient.patientID);(t==null?void 0:t.length)>0&&(L(this.changeGuardianInfo,"guardianNationalID","value",this.setAttribute("Regiment ID",(o=t[0])==null?void 0:o.relation)),L(this.changeGuardianInfo,"guardianFirstname","value",(d=(r=t[0])==null?void 0:r.relation.names[0])==null?void 0:d.given_name),L(this.changeGuardianInfo,"guardianLastname","value",(l=(D=t[0])==null?void 0:D.relation.names[0])==null?void 0:l.family_name),L(this.changeGuardianInfo,"guardianMiddleName","value",(p=(_=t[0])==null?void 0:_.relation.names[0])==null?void 0:p.middle_name),L(this.changeGuardianInfo,"guardianPhoneNumber","value",this.setAttribute("Cell Phone Number",(h=t[0])==null?void 0:h.relation)),L(this.changeGuardianInfo,"relationship","value",{id:(g=t[0])==null?void 0:g.type.relationship_type_id,name:(f=t[0])==null?void 0:f.type.b_is_to_a}),await this.setRelationShip()),this.resetData()},async setRelationShip(){this.gender?(await this.getRelationships(),L(this.changeGuardianInfo,"relationship","displayNone",!1),L(this.changeGuardianInfo,"relationship","multiSelectData",this.relationships)):L(this.changeGuardianInfo,"relationship","displayNone",!0)},setAttribute(e,t){if(!t||Object.keys(t).length===0)return;let o=t.person_attributes.find(r=>r.type.name==e);if(o!=null)return o.value},resetData(){const e=he();e.setProtectedAtBirth(e.getInitialProtectedAtBirth()),e.setVaccineAdverseEffects(e.getInitialVaccineAdverseEffects())},async createGuardian(){const e=await this.guardianData();if(en(this.changeGuardianInfo)){const t=new Nt;await t.registerGuardian(e);const o=t.getPersonID(),r=F(this.changeGuardianInfo,"relationship","value").id;return r&&await At.createRelation(this.patient.patientID,o,r),$e("Guarding information save successfully",3e3),!0}else return Q("Guarding Information not save",3e3),!1},async saveData(){const e=await this.createGuardian(),t=await this.saveVaccineAdverseEffects();e&&t&&U.dismiss()},async saveVaccineAdverseEffects(){if(this.patient.patientID){const e=F(this.outcome,"Date of death","value")||N.sessionDate(),t=await this.formatCheckBoxData(this.serious,N.sessionDate(),this.lastVaccinesGiven),o=await this.formatRadioButtonData(this.outcome,e,this.lastVaccinesGiven),r=await this.formatCheckBoxData(this.vaccineAdverseEffects,N.sessionDate(),this.lastVaccinesGiven),d=F(this.firstDecision,"Investigation needed","value");let D=[];return d&&(D=[{concept_id:11887,value_text:d,obs_datetime:N.sessionDate()}]),[...t,...o,...r,...D].filter(l=>l!==void 0),M.getUserID(),r.length>0?!0:(Q("Vaccine adverse effects not saved",1500),!1)}},async formatCheckBoxData(e,t=j.getSessionDate(),o){return Array.isArray(e)?(await Promise.all(e.map(async d=>{var l,_;if(!((_=(l=d==null?void 0:d.checkboxBtnContent)==null?void 0:l.data)!=null&&_.length))return[];const D=d.checkboxBtnContent.data.map(async p=>{if(!(p!=null&&p.checked)||p!=null&&p.buildConceptIgnore)return null;try{const h=await j.getConceptID(p.value,!0),g=await j.getConceptID(d.checkboxBtnContent.header.name,!0);if(t=F(e,p.name+" date","value")||t,!h||!g)return null;const m={concept_id:g,value_coded:h,obs_datetime:t};if(o.length>0){const C=o.map(I=>({concept_id:h,value_coded:I.drug_id,obs_datetime:t}));return{...m,child:C}}return m}catch(h){return console.error("Error processing checkbox data:",h),null}});return(await Promise.all(D)).filter(Boolean)}))).flat().filter(Boolean):[]},async formatRadioButtonData(e,t=j.getSessionDate(),o){const r=e.map(async d=>{if(d&&d.radioBtnContent&&d.radioBtnContent.header&&d.radioBtnContent.header.selectedValue){const D=await j.getConceptID(d.radioBtnContent.header.selectedValue,!0),l=await j.getConceptID(d.radioBtnContent.header.name,!0),_=t||j.getSessionDate(),p=o.map(h=>({concept_id:D,value_coded:h.drug_id,obs_datetime:_}));return o?{concept_id:l,value_coded:D,obs_datetime:_,child:p}:{concept_id:l,value_coded:D,obs_datetime:_}}else return null});return(await Promise.all(r)).filter(d=>d!==null)},async guardianData(){return{person_id:this.patient.patientID,given_name:this.guardianFirstname,family_name:this.guardianLastname,middle_name:this.guardianMiddleName,gender:"",birthdate:"",cell_phone_number:this.guardianPhoneNumber,birthdate_estimated:!1,home_district:"",home_traditional_authority:"",home_village:"",current_district:"",current_traditional_authority:"",current_village:"",landmark:"",occupation:"",facility_name:"",patient_type:"",national_id:F(this.changeGuardianInfo,"guardianNationalID","value")}},async handleInputData(e){},dismiss(){U.dismiss()}}}),Un={style:{display:"flex","align-items":"center",gap:"10px"}},Ln={class:""},Rn={class:"ion-padding",slot:"content",style:{"padding-bottom":"200px"}},Hn={class:""},Wn={class:"ion-padding",slot:"content"},zn={slot:"content"},jn={slot:"content"},qn={slot:"content"},Qn={slot:"content"},Kn={class:"ion-padding",slot:"content",style:{"padding-bottom":"120px"}};function xn(e,t,o,r,d,D){const l=a("ion-icon"),_=a("ion-title"),p=a("ion-header"),h=a("ion-label"),g=a("ion-item"),f=a("basic-form"),m=a("ion-accordion"),C=a("ion-accordion-group"),I=a("ion-content"),A=a("DynamicButton"),S=a("ion-col"),E=a("ion-row"),ne=a("ion-footer");return c(),v(B,null,[n(p,{style:{display:"flex","justify-content":"space-between","align-items":"center"}},{default:s(()=>[i("div",Un,[n(l,{icon:e.folderOpenOutline,style:{"font-size":"1.5rem",color:"#08475e","padding-left":"10px"}},null,8,["icon"]),n(_,{class:"modalTitle"},{default:s(()=>[...t[2]||(t[2]=[u("Follow up visits",-1)])]),_:1})]),n(l,{onClick:t[0]||(t[0]=me=>e.dismiss()),style:{"padding-top":"10px","padding-right":"10px","font-size":"2rem",color:"#dc2626",cursor:"pointer"},icon:e.closeCircleOutline},null,8,["icon"])]),_:1}),n(I,{fullscreen:!0,class:"ion-padding",style:{"--background":"#fff"}},{default:s(()=>[i("div",Ln,[n(C,{ref:"accordionGroup",class:""},{default:s(()=>[n(m,{value:"first","toggle-icon-slot":"start",class:"custom_card"},{default:s(()=>[n(g,{slot:"header",color:"light"},{default:s(()=>[n(h,{class:"previousLabel"},{default:s(()=>[...t[3]||(t[3]=[u("Change Guardian",-1)])]),_:1})]),_:1}),i("div",Rn,[i("div",Hn,[n(f,{contentData:e.changeGuardianInfo,"onUpdate:inputValue":e.handleInputData},null,8,["contentData","onUpdate:inputValue"])])])]),_:1}),n(m,{value:"second","toggle-icon-slot":"start",class:"custom_card"},{default:s(()=>[n(g,{slot:"header",color:"light"},{default:s(()=>[n(h,{class:"previousLabel"},{default:s(()=>[...t[4]||(t[4]=[u("Vaccine adverse effects",-1)])]),_:1})]),_:1}),i("div",Wn,[i("div",null,[i("div",zn,[n(f,{contentData:e.vaccineAdverseEffects,"onUpdate:inputValue":e.handleInputData},null,8,["contentData","onUpdate:inputValue"])])]),i("div",null,[i("div",jn,[n(f,{contentData:e.serious,initialData:e.initialSeriousData,"onUpdate:inputValue":e.handleInputData},null,8,["contentData","initialData","onUpdate:inputValue"])])]),i("div",null,[i("div",qn,[n(f,{contentData:e.outcome,initialData:e.initialOutcomeData,"onUpdate:inputValue":e.handleInputData},null,8,["contentData","initialData","onUpdate:inputValue"])])]),i("div",null,[i("div",Qn,[n(f,{contentData:e.firstDecision,initialData:e.initialFirstDecisionData,"onUpdate:inputValue":e.handleInputData},null,8,["contentData","initialData","onUpdate:inputValue"])])])])]),_:1}),e.protectedStatus!="Yes"?(c(),k(m,{key:0,value:"third","toggle-icon-slot":"start",class:"custom_card"},{default:s(()=>[n(g,{slot:"header",color:"light"},{default:s(()=>[n(h,{class:"previousLabel"},{default:s(()=>[...t[5]||(t[5]=[u("Child protected at birth",-1)])]),_:1})]),_:1}),i("div",Kn,[n(f,{contentData:e.protectedAtBirth,"onUpdate:inputValue":e.handleInputData},null,8,["contentData","onUpdate:inputValue"])])]),_:1})):w("",!0)]),_:1},512)])]),_:1}),n(ne,{collapse:"fade",class:"ion-no-border"},{default:s(()=>[n(E,null,{default:s(()=>[n(S,null,{default:s(()=>[n(A,{onClick:t[1]||(t[1]=me=>e.saveData()),name:"Save",fill:"solid",style:{float:"right",margin:"2%",width:"130px"}})]),_:1})]),_:1})]),_:1})],64)}const Jn=T(Gn,[["render",xn],["__scopeId","data-v-14384616"]]),Yn=P({components:{IonContent:Y,IonHeader:J,IonItem:W,IonList:ie,IonMenu:ge,IonTitle:x,IonToolbar:ee,IonInput:_e,BasicInputField:Ie,BasicForm:ot,PreviousVitals:de,customDatePicker:Ne,IonCol:K,IonRow:R,VueMultiselect:gt,IonLabel:Z,lotNumberList:rt},data(){const e=q(0),t=q([]);return{iconsContent:z,showPD:!1,batchNumber:"",vaccineName:"",currentDrugOb:{},comp_key:e,otherVaccinesList:t,is_batch_number_valid:!1,vaccineDate:"",is_vaccine_name_valid:!1,drugErrMsg:"",batch_number_error_message:"Enter a valid batch number",vaccine_name_error_message:"Enter a valid valid vaccine name",sessionDate:N.toStandardHisDisplayFormat(M.getSessionDate()),InnerActionBtnPropeties:{name:"Scan",show:!0,fn:()=>{V(at,{class:"otherVitalsModal qr_code_modal"},!1)},icon:"",show_icon:!1},showDateBtns:!0,selected_date_:"",show_select_batch:!1,skip_validation:!1,antigens:t}},computed:{...$(tn,["administerOtherVaccine"]),...$(b,["tempScannedBatchNumber","vaccineSchedule"]),...$(te,["patient"])},async mounted(){this.vaccineSchedule.vaccine_schedule.forEach(e=>{this.antigens.push(...e.antigens)})},watch:{batchNumber:{handler(){this.validateBatchNumber()},deep:!0},tempScannedBatchNumber:{handler(){this.tempScannedBatchNumber!=null&&(this.batchNumber=this.tempScannedBatchNumber.text,this.validateBatchNumber())}},vaccineName:{handler(){this.validateVaccineName()}}},setup(){const e=q(null);return{childComponentRef:e,triggerChildAction:()=>{e.value&&e.value.performAction()}}},methods:{showCPD(){this.showPD=!0,this.showDateBtns=!1},updateBatchNumber(e){var o;const t=e.target.value;this.batchNumber=t||((o=this.tempScannedBatchNumber)==null?void 0:o.text)||""},saveBatchWithTodayDate(){let e=M.getSessionDate();this.saveDta(e)},dismiss(){U.dismiss()},saveBatch(){let e;G.isEmpty(this.vaccineDate)==!0?e=M.getSessionDate():e=this.vaccineDate,this.saveDta(e)},validateVaccineName(){if(G.isEmpty(this.vaccineName)==!0)return this.is_vaccine_name_valid=!0,!1;if(G.isEmpty(this.vaccineName)==!1)return this.is_vaccine_name_valid=!1,!0},updateVaccineName(e){this.currentDrugOb=e,console.log(this.currentDrugOb),b().setCurrentSelectedDrug(e),this.pullLotNumbersForVaccine(this.currentDrugOb)},async pullLotNumbersForVaccine(e){this.show_select_batch=!1;const t=b(),r=await new it().getDrugBatches(e.drug_id);t.setLotNumberData(r),r.length==0&&(se(e)==!1&&V(re,{class:"otherVitalsModal"}),se(e)==!0&&(this.show_select_batch=!1,this.skip_validation=!0)),r.length>0&&(this.comp_key=this.comp_key+1,this.show_select_batch=!0)},isAlphaNumeric(e){return/^[a-zA-Z0-9!@#$%^&*()_+\-=[\]{};':"\\|,.<>/?]+$/.test(e)},validateBatchNumber(){this.isAlphaNumeric(this.batchNumber)==!0&&(this.is_batch_number_valid=!1),this.isAlphaNumeric(this.batchNumber)==!1&&(this.is_batch_number_valid=!0)},updateBatchNumberByPassValue(e){this.batchNumber=e},ActionTriggered(e){const t={batch_number:e.lotNumber,date_administered:this.selected_date_,drug_id:this.currentDrugOb.drug_id,drug_:this.currentDrugOb},o=b();o.setAdministeredVaccine(t),st(this.patient),o.setTempScannedBatchNumber(null),this.dismiss()},saveDta(e){this.validateVaccineName()==!0&&(this.selected_date_=e,this.triggerChildAction(),this.show_select_batch==!1&&this.skip_validation==!1&&Bt("Please Update Stock for Selected Vaccine"))},childAction(){}}}),Zn={class:"modal_wrapper"},Xn={class:"lbl-ct"},es={style:{"margin-top":"30px"}},ts={class:"btnContent"},ns={key:0,class:"saveBtn"},ss={key:1,class:"saveBtn"};function is(e,t,o,r,d,D){const l=a("ion-col"),_=a("ion-label"),p=a("ion-row"),h=a("VueMultiselect"),g=a("lotNumberList"),f=a("customDatePicker"),m=a("ion-icon"),C=a("ion-button");return c(),v("div",Zn,[n(p,{style:{"margin-top":"10px"}},{default:s(()=>[n(l,{style:{"margin-left":"-3px"}},{default:s(()=>[...t[3]||(t[3]=[i("div",{class:"om"},"Add Other Vaccine",-1)])]),_:1}),n(l,{size:"6",style:{"text-align":"right"}},{default:s(()=>[n(_,{class:"lbl-tl",style:{"font-size":"13"}},{default:s(()=>[t[4]||(t[4]=u(" Todays Date: ",-1)),i("span",Xn,y(e.sessionDate),1)]),_:1})]),_:1})]),_:1}),i("div",es,[n(p,null,{default:s(()=>[n(_,{style:{margin:"10px","margin-left":"0px","margin-top":"0px",color:"grey"}},{default:s(()=>[...t[5]||(t[5]=[u("Vaccine name",-1),i("span",{style:{color:"#b42318"}},"*",-1)])]),_:1})]),_:1}),n(h,{modelValue:e.vaccineName,"onUpdate:modelValue":[t[0]||(t[0]=I=>e.vaccineName=I),t[1]||(t[1]=I=>e.updateVaccineName(I))],multiple:!1,taggable:!1,"hide-selected":!1,"close-on-select":!0,openDirection:"bottom","tag-placeholder":"select vaccine",placeholder:"select vaccine",selectLabel:"",label:"drug_name",searchable:!0,onSearchChange:t[2]||(t[2]=I=>e.$emit("search-change",I)),"track-by":"drug_id",options:e.otherVaccinesList},null,8,["modelValue","options"]),i("div",null,[e.is_vaccine_name_valid?(c(),k(_,{key:0,style:{padding:"3%"},class:"error-label"},{default:s(()=>[u(y(e.vaccine_name_error_message),1)]),_:1})):w("",!0)])]),oe(n(p,null,{default:s(()=>[n(_,{style:{margin:"10px","margin-left":"0px","margin-top":"0px",color:"grey"}},{default:s(()=>[...t[6]||(t[6]=[u("Batch numbers",-1),i("span",{style:{color:"#b42318"}},"*",-1)])]),_:1})]),_:1},512),[[ae,e.show_select_batch]]),oe(i("div",null,[(c(),k(g,{action:e.childAction,retro:e.showPD,ref:"childComponentRef",onActionTriggered:e.ActionTriggered,key:e.comp_key},null,8,["action","retro","onActionTriggered"]))],512),[[ae,e.show_select_batch]]),e.showPD?(c(),k(f,{key:0})):w("",!0),i("div",ts,[e.showDateBtns?(c(),v("div",ns,[i("div",null,[n(C,{onClick:e.saveBatchWithTodayDate,class:"btnText",fill:"solid"},{default:s(()=>[t[7]||(t[7]=u(" Done today ",-1)),n(m,{slot:"end",size:"small",icon:e.iconsContent.calenderwithPlus},null,8,["icon"])]),_:1},8,["onClick"])]),t[9]||(t[9]=i("div",{style:{"margin-bottom":"20px"}},null,-1)),i("div",null,[n(C,{class:"btnText",fill:"solid",onClick:e.showCPD},{default:s(()=>[t[8]||(t[8]=u(" Done earlier ",-1)),n(m,{slot:"end",size:"small",icon:e.iconsContent.calenderWithPenEdit},null,8,["icon"])]),_:1},8,["onClick"])])])):w("",!0),e.showDateBtns?w("",!0):(c(),v("div",ss,[n(p,{class:"ion-justify-content-between"},{default:s(()=>[n(l,{size:"auto"},{default:s(()=>[n(C,{onClick:e.dismiss,id:"cbtn",class:"btnText cbtn",fill:"solid",style:{width:"130px"}},{default:s(()=>[...t[10]||(t[10]=[u(" Cancel ",-1)])]),_:1},8,["onClick"])]),_:1}),n(l,{size:"auto"},{default:s(()=>[n(C,{onClick:e.saveBatch,class:"btnText",fill:"solid",style:{width:"130px"}},{default:s(()=>[...t[11]||(t[11]=[u(" Save ",-1)])]),_:1},8,["onClick"])]),_:1})]),_:1})]))])])}const lt=T(Yn,[["render",is],["__scopeId","data-v-eb04f444"]]),os=P({name:"xxxComponent",components:{Carousel:Dt,Slide:yt,Pagination:bt,Navigation:vt,customVaccine:ue,IonButton:H,IonCol:K,IonRow:R,IonLabel:Z},data(){return{vaccine_schArray:[],vaccineSchudulesCount:0,milestones:[],iconsContent:z,showCurrentMilestoneAlert:!1,landingSlide:0,msg:"Upcoming Vaccines",current_milestone:"",componentKey:0}},computed:{...$(b,["vaccineReload"]),...$(te,["patient"])},async mounted(){await this.loadVaccineSchedule()},watch:{vaccineReload:{async handler(){await this.loadVaccineSchedule()},deep:!0},patient:{async handler(){await this.loadVaccineSchedule()},deep:!0},vaccine_schArray:{handler(){this.reloadVaccines()}}},methods:{openAdministerOtherVaccineModal(){V(lt,{class:"otherVitalsModal"})},async loadVaccineSchedule(){var r,d,D,l,_,p,h,g,f;await this.setAppointmentDate();const e=this.patient.vaccineSchedule,t=b();t.setVaccineSchedule(e),t.setLastVaccinesGiven([]),this.vaccineSchudulesCount=(d=(r=t.getVaccineSchedule())==null?void 0:r.vaccine_schedule)==null?void 0:d.length,t.resetMissedVaccineSchedules(),this.vaccine_schArray=[],this.vaccine_schArray.push((D=t.getVaccineSchedule())==null?void 0:D.vaccine_schedule),(_=(l=t.getVaccineSchedule())==null?void 0:l.vaccine_schedule)==null||_.forEach(m=>{this.findMissingVaccines(m),this.findPreviouslyAdministeredVaccineSchedule(m),this.handleSchedule(m);const C={visit:m.visit,age:m.age};this.milestones=this.appendUniqueObject(this.milestones,C)});let o=!1;(h=(p=t.getVaccineSchedule())==null?void 0:p.vaccine_schedule)==null||h.forEach(m=>{if(!o&&this.findSingleUpcomingMilestone(m)==!0){o=!0;return}}),(f=(g=t.getVaccineSchedule())==null?void 0:g.vaccine_schedule)==null||f.forEach(m=>{this.findCurrentMilestone(m)})},setSB(e){const t=b();t.setCurrentMilestoneToAdminister({currentMilestone:e.age}),this.landingSlide=e.visit-1,this.current_milestone=e.age,t.setCurrentMilestone(e.age)},handleSchedule(e){e.milestone_status=="upcoming"?(b().setCurrentSchedFound(!1),this.msg="Upcoming Vaccines",this.showCurrentMilestoneAlert=!0,this.setSB(e)):(this.setSB(e),b().setCurrentSchedFound(!1))},findSingleUpcomingMilestone(e){return e.milestone_status=="upcoming"?(this.setSB(e),!0):!1},findCurrentMilestone(e){e.milestone_status=="current"&&(this.msg="Vaccines due today",b().setCurrentSchedFound(!0),this.showCurrentMilestoneAlert=!0,this.setSB(e))},slideEvent(e){const t=b(),o=t.getCurrentMilestoneToAdminister();this.milestones.forEach(d=>{d.visit-1==e.currentSlideIndex&&(t.setCurrentMilestone(d.age),this.current_milestone=d.age)});const r=t.getCurrentMilestone();if(r==o.currentMilestone){t.getCurrentSchedFound()==!1&&(this.msg="Upcoming Vaccines"),t.getCurrentSchedFound()==!0&&(this.msg="Vaccines due today"),this.showCurrentMilestoneAlert=!0;return}r.age!=o.currentMilestone&&(this.showCurrentMilestoneAlert=!1)},appendUniqueObject(e,t){return e.some(r=>r.visit===t.visit&&r.age===t.age)||e.push(t),e},isListEmpty(e){if(e.length>0)return!0;if(e.length==0)return!1},findMissingVaccines(e){const t={age:e.age,antigens:[]};e.milestone_status=="passed"&&e.antigens.forEach(r=>{r.status=="pending"&&t.antigens.push(r)});const o=b();t.antigens.length>0&&o.setMissedVaccineSchedules(t)},findPreviouslyAdministeredVaccineSchedule(e){const t=[];e.antigens.forEach(o=>{o.status=="administered"&&t.push(o)}),t.length>0&&b().setLastVaccinesGiven(t)},reloadVaccines(){this.componentKey+=1},openNextVaccineAppoinment(){V(Yt,{class:"otherVitalsModal"},!1)},async setAppointmentDate(){const e=b(),o=await new Jt().getNextAppointment();o!=null&&o.next_appointment_date&&e.setNextAppointMentDate(o.next_appointment_date)}}}),as={key:0,class:"alert_banner"},rs={key:1,class:"alert_banner",style:{background:"inherit"}},ls={class:"container"},cs={class:"center-content"},ds={class:"centerBtns"},us={class:"otherVaccine center-content"},ms={class:"centerBtns"};function ps(e,t,o,r,d,D){const l=a("apan"),_=a("customVaccine"),p=a("ion-button"),h=a("ion-row"),g=a("slide"),f=a("navigation"),m=a("pagination"),C=a("carousel");return c(),v(B,null,[e.showCurrentMilestoneAlert?(c(),v("div",as,[n(l,null,{default:s(()=>[u(y(e.msg),1)]),_:1})])):w("",!0),e.showCurrentMilestoneAlert?w("",!0):(c(),v("div",rs)),e.vaccineSchudulesCount>0?(c(),k(C,{key:2,"items-to-show":1,modelValue:e.landingSlide,onSlideEnd:e.slideEvent},{addons:s(()=>[n(f),n(m)]),default:s(()=>[(c(!0),v(B,null,X(e.vaccineSchudulesCount,(I,A)=>(c(),k(g,{key:I},{default:s(()=>[n(h,{class:""},{default:s(()=>[i("div",ls,[(c(),k(_,{vaccines:e.vaccine_schArray[0][A].antigens,milestone_status:e.vaccine_schArray[0][A].milestone_status,key:e.componentKey},null,8,["vaccines","milestone_status"]))]),n(h,{class:"bottom-row"},{default:s(()=>[i("div",cs,[i("div",ds,[n(p,{onClick:t[0]||(t[0]=S=>e.openNextVaccineAppoinment()),class:"btnText",fill:"solid"},{default:s(()=>[...t[1]||(t[1]=[u("Set Next Appointment Date",-1)])]),_:1})])])]),_:1})]),_:2},1024)]),_:2},1024))),128))]),_:1},8,["modelValue","onSlideEnd"])):w("",!0),n(h,{class:"bottom-row"},{default:s(()=>[i("div",us,[i("div",ms,[n(p,{onClick:e.openAdministerOtherVaccineModal,class:"btnText",fill:"solid"},{default:s(()=>[...t[2]||(t[2]=[u(" Add Other Vaccines ",-1)])]),_:1},8,["onClick"])])])]),_:1})],64)}const hs=T(os,[["render",ps],["__scopeId","data-v-2fd0d538"]]),fs=P({name:"Home",components:{IonHeader:J,IonMenuButton:Ve,IonPage:we,IonTitle:x,IonToolbar:ee,IonButton:H,IonCard:Ce,IonCardContent:Se,IonCardHeader:De,IonCardSubtitle:ye,IonCardTitle:be,IonAccordion:ce,IonAccordionGroup:le,IonItem:W,IonLabel:Z,IonModal:ve,IonRow:R,customVaccine:ue,IonCol:K,IonFooter:ke,IonContent:Y},data(){return{iconsContent:z}},computed:{...$(b,["currentMilestone","missedVaccineSchedules"])},methods:{vaccinesGivenCount(e){const t=[];return e.antigens.forEach(o=>{o.status=="administered"&&t.push(o)}),t.length},dismiss(){U.dismiss()}}}),_s={style:{color:"#016302"}},gs={style:{color:"#316CBA","margin-left":"10%"}};function vs(e,t,o,r,d,D){const l=a("ion-title"),_=a("ion-header"),p=a("ion-icon"),h=a("row"),g=a("customVaccine"),f=a("ion-content"),m=a("ion-button"),C=a("ion-col"),I=a("ion-row"),A=a("ion-footer");return c(),v(B,null,[n(_,null,{default:s(()=>[n(l,{style:{"margin-bottom":"20px"},class:"modalTitle"},{default:s(()=>[...t[1]||(t[1]=[u("Missed Vaccines",-1)])]),_:1})]),_:1}),n(f,{fullscreen:!0,class:"ion-padding"},{default:s(()=>[(c(!0),v(B,null,X(e.missedVaccineSchedules,(S,E)=>(c(),v("div",{key:E},[n(h,{style:{width:"90%"}},{default:s(()=>[n(p,{size:"medium",style:{"margin-bottom":"-6px"},icon:e.iconsContent.calendar},null,8,["icon"]),i("span",null,[t[2]||(t[2]=u(" at ",-1)),i("span",_s,y(S.age),1)]),i("span",gs,y(e.vaccinesGivenCount(S))+"/"+y(S.antigens.length)+" vaccine(s) given",1)]),_:2},1024),n(h,{style:{"text-align":"center"},class:"mod-ls"},{default:s(()=>[n(g,{vaccines:S.antigens,milestone_status:S.milestone_status},null,8,["vaccines","milestone_status"])]),_:2},1024)]))),128))]),_:1}),n(A,{collapse:"fade",class:"ion-no-border"},{default:s(()=>[n(I,null,{default:s(()=>[n(C,null,{default:s(()=>[n(m,{id:"cbtn",class:"btnText cbtn",fill:"solid",style:{width:"130px"},onClick:t[0]||(t[0]=S=>e.dismiss())},{default:s(()=>[...t[3]||(t[3]=[u(" Cancel ",-1)])]),_:1})]),_:1})]),_:1})]),_:1})],64)}const bs=T(fs,[["render",vs],["__scopeId","data-v-3ba5e9df"]]),ys=P({name:"Menu",data(){return{isMobile:!1,visits:[],event:null,popoverOpen:!1,program:null}},mounted(){},computed:{...$(te,["patient"])},methods:{openPopover(e){this.event=e,this.popoverOpen=!0},openPIM(){V(sn,{class:"otherVitalsModal largeModal"})},openOutCome(){V(nn,{class:"otherVitalsModal largeModal"})},async printVisitSummary(){if(this.visits=await nt.getPatientVisits(this.patient.patientID,!1),this.visits.length)return new Ke(this.patient.patientID).printVisitSummaryLbl(this.visits[0]);Q("No visits available")},printID(){new Ke(this.patient.patientID).printNidLbl()},formatCurrentAddress(e){var o,r,d;return[(o=e==null?void 0:e.personInformation)==null?void 0:o.current_district,(r=e==null?void 0:e.personInformation)==null?void 0:r.current_traditional_authority,(d=e==null?void 0:e.personInformation)==null?void 0:d.current_village].filter(Boolean).join(",")}}}),Ds=P({mixins:[ys],name:"Home",components:{IonContent:Y,IonHeader:J,IonMenuButton:Ve,IonPage:we,IonTitle:x,IonToolbar:ee,Toolbar:Ot,ToolbarSearch:Pt,DemographicBar:Rt,IonButton:H,IonCard:Ce,IonCardContent:Se,IonCardHeader:De,IonCardSubtitle:ye,IonCardTitle:be,IonAccordion:ce,IonAccordionGroup:le,IonItem:W,IonLabel:Z,IonModal:ve,Stepper:Wt,DynamicButton:tt,WeightHeightChart:qt,PreviousVitals:de,customSlider:hs,IonRow:R,customVaccine:ue},data(){return{wizardData:[],StepperData:[],isOpen:!1,iconsContent:z,current_milestone:"",checkUnderSixWeeks:!1,unprotected_at_birth:"",protectedStatus:"",todays_date:N.toStandardHisDisplayFormat(M.getSessionDate()),lastVaccine:[],visits:[],selectedStatus:7}},computed:{...$(Lt,["vitals"]),...$(Ut,["selectedMedicalDrugsList","nonPharmalogicalTherapyAndOtherNotes","selectedMedicalAllergiesList"]),...$(Gt,["outcomes"]),...$(b,["currentMilestone","missedVaccineSchedules","overDueVaccinesCount","lastVaccinesGiven","lastVaccineGievenDate","nextAppointMentDate"])},async mounted(){this.loadCurrentMilestone(),this.checkAge(),await this.checkProtectedStatus(),await this.openFollowModal(),await this.programEnrollment()},watch:{currentMilestone:{handler(){this.loadCurrentMilestone()}},$route:{async handler(e){e.name=="patientProfile"&&this.patient.patientID&&(await this.checkProtectedStatus(),await this.programEnrollment())}},patient:{async handler(){this.patient&&(await this.checkProtectedStatus(),await this.programEnrollment(),this.checkAge(),this.setMilestoneReload())}}},setup(){return{chevronBackOutline:Vt,checkmark:et,ellipsisVerticalSharp:wt,person:Ct,clipboardOutline:St}},methods:{handleChange(e){this.selectedStatus=e},async programEnrollment(){if(this.patient.patientID){this.program=new Ft(this.patient.patientID);const e=await this.program.getProgramCurrentStates();if(e)this.selectedStatus=e.state;else{try{await this.program.enrollProgram(),await this.program.setStateId(7)}catch(t){await this.program.setStateId(7)}await this.program.updateState(),this.selectedStatus=7}}},async updateState(e){this.selectedStatus=e,await this.program.setStateId(e),await this.program.updateState()},getAge(e){return N.calculateDisplayAge(N.toStandardHisFormat(e))},async checkProtectedStatus(){this.protectedStatus=this.getData(this.patient.birthRegistration,11759)[0]},getData(e,t){try{return e?e.filter(o=>o.concept_id==t).map(o=>o.value_text):""}catch(o){return console.error("Error in getData:",o),""}},checkAge(){var e,t,o,r;G.isEmpty((t=(e=this.patient)==null?void 0:e.personInformation)==null?void 0:t.birthdate)||(this.checkUnderSixWeeks=N.dateDiffInDays(N.sessionDate(),(r=(o=this.patient)==null?void 0:o.personInformation)==null?void 0:r.birthdate)<42)},openVitalsModal(){V(Kt,{class:"otherVitalsModal"})},openWH(){V(Qt,{class:"otherVitalsModal"})},openVH(){V(Fn,{class:"otherVitalsModal vaccineHistoryModal"})},async openFollowModal(){var e;if((e=this.patient)!=null&&e.patientID){this.lastVaccine=await Et.getLastDrugsReceived(this.patient.patientID);const t={protectedStatus:this.protectedStatus,lastVaccinesGiven:this.lastVaccinesGiven};this.lastVaccinesGiven.length>0&&V(Jn,{class:"fullScreenModal"},!0,t)}},openAdministerVaccineModal(){V(fe,{class:"otherVitalsModal"})},openAdministerOtherVaccineModal(){V(lt,{class:"otherVitalsModal"})},isChild(){return!!new nt().isUnderFive()},getFormatedData(e){return e.map(t=>t==null?void 0:t.data)},async saveVitals(){if(this.vitals.validationStatus){const e=M.getUserID();new Tt(this.patient.patientID,e).onFinish(this.vitals)}},async saveTreatmentPlan(){const e=M.getUserID(),t=this.patient.patientID,o=new zt;if(!G.isEmpty(this.selectedMedicalAllergiesList)){const r=this.mapToAllergies();o.onSubmitAllergies(t,e,r)}if(!G.isEmpty(this.nonPharmalogicalTherapyAndOtherNotes)){const r=[{concept_id:2688,obs_datetime:M.getSessionDate(),value_text:this.nonPharmalogicalTherapyAndOtherNotes}];o.onSubmitNotes(t,e,r)}if(!G.isEmpty(this.selectedMedicalDrugsList)){const r=this.mapToOrders(),d=new xe(t,e);if(!await d.createEncounter())return Q("Unable to create treatment encounter");if(!await d.createDrugOrder(r))return Q("Unable to create drug orders!");$e("Drug order has been created")}},openModal(){V(Ht)},mapToOrders(){return this.selectedMedicalDrugsList.map(e=>{const t=xe.getSessionDate(),o=jt.find(r=>r.label===e.frequency)||{};return{drug_inventory_id:e.drug_id,equivalent_daily_dose:e.dose=="Unknown"?0:e.dose*(o==null?void 0:o.value)||0,start_date:t,auto_expire_date:this.calculateExpireDate(t,e.duration),units:e.units,instructions:"".concat(e.drugName,": ").concat(e.dose," ").concat(e.units," ").concat((o==null?void 0:o.code)||""," for ").concat(e.duration," days"),dose:e.dose,frequency:(o==null?void 0:o.code)||""}})},formatBirthdate(){var e,t;return N.toStandardHisDisplayFormat((t=(e=this.patient)==null?void 0:e.personInformation)==null?void 0:t.birthdate)},calculateExpireDate(e,t){const o=new Date(e);return o.setDate(o.getDate()+parseInt(t)),N.toStandardHisFormat(o)},mapToAllergies(){return this.selectedMedicalAllergiesList.map(e=>({concept_id:985,obs_datetime:M.getSessionDate(),value_coded:e.concept_id}))},loadCurrentMilestone(){const e=b();this.current_milestone=e.getCurrentMilestone()},showMissedVaccines(){this.missedVaccineSchedules.length>0&&V(bs,{class:"otherVitalsModal vaccineHistoryModal"})},setMilestoneReload(){const e=b();e.setVaccineReload(!e.getVaccineReload())},getLastVaccinesGivenDisplayDate(){return N.toStandardHisDisplayFormat(this.lastVaccineGievenDate)}}}),Ss={fullscreen:!0,style:{"--background":"#fff"}},Cs={class:"demographics"},ws={style:{overflow:"hidden","text-overflow":"ellipsis","white-space":"nowrap"}},Vs={style:{display:"flex","justify-content":"space-between","align-content":"center","padding-bottom":"5px","padding-top":"5px","padding-left":"5px"}},ks={style:{"margin-right":"5px"}},Is={class:"demographicsFirstRow"},$s={class:"name"},Ns={class:"demographicsOtherRow",style:{"margin-top":"10px"}},As={class:"demographicsText"},Ms={key:0,class:"demographicsOtherRow"},Bs={class:"demographicsText mediumFontColor"},Ps={key:1,class:"demographicsOtherRow"},Os={class:"demographicsText mediumFontColor"},Ts={class:"demographicsOtherRow"},Es={class:"demographicsText smallFont"},Fs={class:"mediumFontColor"},Gs={class:"demographicsOtherRow"},Us={key:0,class:"demographicsText smallFont"},Ls={key:1,class:"demographicsText smallFont"},Rs={key:2,class:"demographicsText smallFont"},Hs={class:"demographicsOtherRow",style:{"margin-bottom":"10px"}},Ws={class:"demographicsText smallFont"},zs={key:0,style:{background:"#fedf89",color:"#b54708"},class:"protectedStatus"},js={key:1,style:{background:"#ddeedd"},class:"protectedStatus"},qs={key:2,class:"protectedStatus",style:{background:"#fecdca",color:"#b42318"}},Qs={class:"graphSection"},Ks={class:"graphBtn",style:{"margin-bottom":"5px"}},xs={class:"weightHeightGraphBtns"},Js={key:0},Ys={key:1},Zs={key:0,class:"graphBtn"},Xs={class:"dueAlert"},ei={class:"missed_vaccine_alert"},ti={style:{"margin-right":"5px"}},ni={class:"vaccinesTitle"},si={style:{width:"100%",display:"flex","justify-content":"space-between","align-content":"center"}},ii={class:"vaccinesTitleDate"},oi={class:"milestone"},ai={style:{display:"flex","justify-content":"space-between","align-content":"center"}},ri={style:{color:"#636363","margin-left":"5px","margin-top":"-4px"}},li={style:{color:"#636363","font-weight":"bold","font-size":"14px"}},ci={class:"lastVaccine"},di={class:"lastVaccineTitle"},ui={key:0,class:"lastVaccineText"},mi={class:"seeFullList"},pi={style:{color:"#316cba","margin-left":"1%"}},hi={class:"ion-padding",slot:"content"};function fi(e,t,o,r,d,D){var Ae,Me,Be,Pe,Oe,Te,Ee,Fe,Ge,Ue,Le,Re,He,We,ze,je,qe,Qe;const l=a("ion-icon"),_=a("WeightHeightChart"),p=a("PreviousVitals"),h=a("ion-button"),g=a("ion-col"),f=a("ion-row"),m=a("customSlider"),C=a("row"),I=a("customVaccine"),A=a("ion-label"),S=a("ion-item"),E=a("ion-accordion"),ne=a("ion-toggle"),me=a("ion-list"),ct=a("ion-accordion-group"),dt=a("ion-popover");return c(),v(B,null,[i("div",Ss,[i("div",Cs,[i("div",ws,[i("div",Vs,[i("div",ks,[i("div",{class:kt(((Me=(Ae=e.patient)==null?void 0:Ae.personInformation)==null?void 0:Me.gender)=="M"?"initialsBox maleColor":"initialsBox femaleColor")},[n(l,{style:{color:"#fff","font-size":"100px"},icon:e.person},null,8,["icon"])],2)]),i("div",null,[i("div",Is,[i("div",$s,y((Pe=(Be=e.patient)==null?void 0:Be.personInformation)==null?void 0:Pe.given_name)+" "+y((Te=(Oe=e.patient)==null?void 0:Oe.personInformation)==null?void 0:Te.middle_name)+" "+y((Fe=(Ee=e.patient)==null?void 0:Ee.personInformation)==null?void 0:Fe.family_name),1)]),i("div",Ns,[i("div",As,[u(y(((Ue=(Ge=e.patient)==null?void 0:Ge.personInformation)==null?void 0:Ue.gender)=="M"?"Male":"Female")+" ",1),t[12]||(t[12]=i("span",{class:"dot"},".",-1)),u(" "+y(e.getAge((Re=(Le=e.patient)==null?void 0:Le.personInformation)==null?void 0:Re.birthdate))+" ("+y(e.formatBirthdate())+") ",1)])]),(We=(He=e.patient)==null?void 0:He.personInformation)!=null&&We.current_district?(c(),v("div",Ms,[t[13]||(t[13]=i("div",{class:"demographicsText"},"Current Address:",-1)),i("div",Bs,y(e.formatCurrentAddress(e.patient)),1)])):w("",!0),(je=(ze=e.patient)==null?void 0:ze.personInformation)!=null&&je.country?(c(),v("div",Ps,[t[14]||(t[14]=i("div",{class:"demographicsText"},"Country:",-1)),i("div",Os,y((Qe=(qe=e.patient)==null?void 0:qe.personInformation)==null?void 0:Qe.country),1)])):w("",!0),i("div",Ts,[i("div",Es,[t[15]||(t[15]=u(" MRN: ",-1)),i("span",Fs,y(e.patient.ID),1)])]),i("div",Gs,[e.selectedStatus==7?(c(),v("div",Us,[...t[16]||(t[16]=[u(" Outcome: ",-1),i("span",{class:"outcomeStatus"}," Active",-1)])])):w("",!0),e.selectedStatus==6?(c(),v("div",Ls,[...t[17]||(t[17]=[u(" Outcome: ",-1),i("span",{class:"outcomeStatus",style:{background:"#fecdca",color:"#b42318"}}," Inactive",-1)])])):w("",!0),e.selectedStatus==3?(c(),v("div",Rs,[...t[18]||(t[18]=[u(" Outcome: ",-1),i("span",{class:"outcomeStatus",style:{background:"#fecdca",color:"#b42318"}}," Died",-1)])])):w("",!0)]),i("div",Hs,[i("div",Ws,[t[19]||(t[19]=u(" Status: ",-1)),e.protectedStatus=="No"?(c(),v("span",zs,"Unprotected at birth")):e.protectedStatus=="Yes"?(c(),v("span",js,"Protected at birth")):(c(),v("span",qs,"Unknown protection at birth"))])])])])]),i("div",{class:"name",style:{color:"var(--ion-color-primary)","margin-top":"10px"},onClick:t[0]||(t[0]=O=>e.openPopover(O))},[n(l,{icon:e.ellipsisVerticalSharp},null,8,["icon"])])]),i("div",Qs,[i("div",null,[e.isChild()?(c(),k(_,{key:0,checkUnderSixWeeks:e.checkUnderSixWeeks,showHeightWeight:!0},null,8,["checkUnderSixWeeks"])):w("",!0),e.isChild()?w("",!0):(c(),k(p,{key:1}))]),i("div",Ks,[i("div",xs,[i("div",null,[n(h,{class:"btnText",fill:"solid",onClick:t[1]||(t[1]=O=>e.openWH())},{default:s(()=>[e.checkUnderSixWeeks?(c(),v("span",Ys," Enter Weight")):(c(),v("span",Js," Enter Weight/Height")),n(l,{slot:"end",size:"small",icon:e.iconsContent.whiteHeightWeight},null,8,["icon"])]),_:1})]),i("div",null,[n(h,{class:"btnText",fill:"solid",onClick:t[2]||(t[2]=O=>e.openVitalsModal())},{default:s(()=>[t[20]||(t[20]=u(" Enter Other Vitals ",-1)),n(l,{slot:"end",size:"small",icon:e.iconsContent.whiteVitals},null,8,["icon"])]),_:1})])])])]),i("div",null,[e.overDueVaccinesCount>0?(c(),v("div",Zs,[i("div",Xs,[n(f,null,{default:s(()=>[e.overDueVaccinesCount>0?(c(),k(g,{key:0,style:{display:"flex","justify-content":"center",cursor:"pointer"},onClick:e.showMissedVaccines},{default:s(()=>[i("div",ei,[n(l,{slot:"start",icon:e.iconsContent.alertDangerRed},null,8,["icon"]),i("span",ti,y(e.overDueVaccinesCount)+" vaccine(s) overdue",1)])]),_:1},8,["onClick"])):w("",!0)]),_:1})])])):w("",!0),i("div",ni,[i("div",si,[t[22]||(t[22]=i("div",{class:"vaccinesTitleText"},"Administer Vaccines",-1)),i("div",ii,[t[21]||(t[21]=i("span",{style:{"font-size":"13px"}},"Next Appt. Date: ",-1)),i("b",null,y(e.nextAppointMentDate),1)])])]),i("div",oi,[i("div",ai,[n(l,{size:"small",icon:e.iconsContent.greenCalender},null,8,["icon"]),i("div",ri,[t[23]||(t[23]=u(" at ",-1)),i("span",li,y(e.current_milestone),1)])]),t[24]||(t[24]=i("div",{class:"vaccinesTitleDate"},"(Swipe left or right for other milestones)",-1))]),n(m),i("div",ci,[i("div",di,[e.lastVaccinesGiven.length>0?(c(),v("div",ui,"Last vaccines given")):w("",!0),i("div",mi,[n(h,{onClick:t[3]||(t[3]=O=>e.openVH()),style:{color:"#016302","margin-bottom":"10px"},class:"btnText btnTextWeight",size:"small",fill:"outline"},{default:s(()=>[t[25]||(t[25]=i("span",null,"See full History",-1)),n(l,{slot:"end",size:"medium",icon:e.clipboardOutline},null,8,["icon"])]),_:1})])]),e.lastVaccinesGiven.length>0?(c(),k(C,{key:0},{default:s(()=>[n(l,{size:"medium",style:{"margin-bottom":"-6px"},icon:e.iconsContent.calendar},null,8,["icon"]),i("span",pi,y(e.getLastVaccinesGivenDisplayDate()),1)]),_:1})):w("",!0),e.lastVaccinesGiven.length>0?(c(),k(C,{key:1},{default:s(()=>[n(I,{vaccines:e.lastVaccinesGiven,milestone_status:""},null,8,["vaccines"])]),_:1})):w("",!0)])])]),n(dt,{style:{"--offset-x":"-10px"},"is-open":e.popoverOpen,"show-backdrop":!1,event:e.event,onDidDismiss:t[11]||(t[11]=O=>e.popoverOpen=!1)},{default:s(()=>[i("div",null,[n(ct,{multiple:!0},{default:s(()=>[n(E,{value:"first","toggle-icon":"",onClick:t[4]||(t[4]=O=>e.openPIM())},{default:s(()=>[n(S,{slot:"header",color:"light"},{default:s(()=>[n(A,null,{default:s(()=>[...t[26]||(t[26]=[u("Update demographics",-1)])]),_:1})]),_:1})]),_:1}),n(E,{value:"first","toggle-icon":"",onClick:t[5]||(t[5]=O=>e.openFollowModal())},{default:s(()=>[n(S,{slot:"header",color:"light"},{default:s(()=>[n(A,null,{default:s(()=>[...t[27]||(t[27]=[u("Follow up visits",-1)])]),_:1})]),_:1})]),_:1}),n(E,{value:"second","toggle-icon":"",onClick:t[6]||(t[6]=O=>e.printVisitSummary())},{default:s(()=>[n(S,{slot:"header",color:"light"},{default:s(()=>[n(A,null,{default:s(()=>[...t[28]||(t[28]=[u("Print visit summary",-1)])]),_:1})]),_:1})]),_:1}),n(E,{value:"third","toggle-icon":"",onClick:t[7]||(t[7]=O=>e.printID())},{default:s(()=>[n(S,{slot:"header",color:"light"},{default:s(()=>[n(A,null,{default:s(()=>[...t[29]||(t[29]=[u("Print client identifier",-1)])]),_:1})]),_:1})]),_:1}),n(E,{value:"fourth"},{default:s(()=>[n(S,{slot:"header",color:"light"},{default:s(()=>[n(A,null,{default:s(()=>[...t[30]||(t[30]=[u("Update outcome",-1)])]),_:1})]),_:1}),i("div",hi,[n(me,null,{default:s(()=>[n(S,null,{default:s(()=>[n(ne,{checked:e.selectedStatus==7,value:"active",onIonChange:t[8]||(t[8]=O=>e.updateState(7))},{default:s(()=>[...t[31]||(t[31]=[u(" Active ",-1)])]),_:1},8,["checked"])]),_:1}),n(S,null,{default:s(()=>[n(ne,{checked:e.selectedStatus==6,value:"inactive",onIonChange:t[9]||(t[9]=O=>e.updateState(6))},{default:s(()=>[...t[32]||(t[32]=[u(" Inactive ",-1)])]),_:1},8,["checked"])]),_:1}),n(S,null,{default:s(()=>[n(ne,{checked:e.selectedStatus==3,value:"died",onIonChange:t[10]||(t[10]=O=>e.updateState(3))},{default:s(()=>[...t[33]||(t[33]=[u(" Died ",-1)])]),_:1},8,["checked"])]),_:1})]),_:1})])]),_:1})]),_:1})])]),_:1},8,["is-open","event"])],64)}const mo=T(Ds,[["render",fi],["__scopeId","data-v-114b0ef5"]]);export{mo as default};
