var ue=Object.defineProperty;var se=(b,h,s)=>h in b?ue(b,h,{enumerable:!0,configurable:!0,writable:!0,value:s}):b[h]=s;var V=(b,h,s)=>se(b,typeof h!="symbol"?h+"":h,s);import{A as x}from"./app_encounter_service-DVUvyrB0.js";import{J as _e,Q as B,S as de,P as J,i as ve,cm as fe,e as H,cp as ce,aF as me,u as pe,a1 as be,k as Q,m as E,t as ge,_ as he}from"./index-53w8xEQj.js";import{g as X}from"./LocationFieldOptions-BA2AJQHE.js";import{_ as W}from"./DatePicker.vue_vue_type_script_setup_true_lang-Bkb_lGFd.js";import{S as Z,V as ye}from"./vitals_service-C7QuEl26.js";import{d as ke,r as F,y as v,f as _,z as l,l as o,u as a,ad as we,bq as De,m,ac as C,ab as g,D as p,A as d,k,aw as T,G as N,ax as A,d7 as w,B as c,e as R,F as S,L as O,ag as Ve,O as z}from"./vendor-DowD5zKn.js";import Ce from"./Staging-Cc4HZY2c.js";import{P as Ie}from"./patient_registration_service-Ow0gyk8q.js";import"./lodash-Dt8AsbQm.js";class Ne extends x{constructor(h,s){super(h,9,s)}}class Ae extends x{constructor(s,f){super(s,9,f);V(this,"registration");V(this,"computeFollowupAgreements",async s=>({tag:"reg",obs:await this.registration.buildValueCoded("Agrees to followup",s.value)}));V(this,"computeHTCSerialNumber",async s=>({tag:"reg",obs:await this.registration.buildValueText("HTC Serial number",s.value)}));V(this,"computeEverReceivedART",async({value:s})=>({tag:"reg",obs:await this.registration.buildValueCoded("Ever received ART",s)}));V(this,"computeARTLastTakenDate",async(s,f)=>({date:s,tag:"reg",isEstimate:f,obs:await this.buildDateObs("Date ART last taken",s,f)}));V(this,"computeARTInitiationLocation",async({label:s})=>({tag:"reg",obs:await this.registration.buildValueText("Location of ART initiation",s)}));V(this,"computeARTNumberAtPreviousLocation",async s=>({tag:"reg",obs:await this.registration.buildValueText("ART number at previous location",s.value)}));V(this,"computeHasTransferLetter",async({value:s})=>({tag:"reg",obs:await this.registration.buildValueCoded("Has transfer letter",s)}));V(this,"computeConfirmatoryHIVTestType",async({value:s})=>({tag:"reg",obs:await this.registration.buildValueCoded("Confirmatory hiv test type",s)}));V(this,"computeConfirmatoryHIVTestLocation",async s=>({tag:"reg",obs:await this.registration.buildValueText("Confirmatory HIV test location",s.label)}));V(this,"computeConfirmatoryHIVTestDate",async(s,f)=>({date:s,tag:"reg",isEstimate:f,obs:await this.buildDateObs("Confirmatory HIV test date",s,f)}));V(this,"computeARTRegistrationDate",async(s,f)=>({date:s,tag:"reg",isEstimate:f,obs:await this.buildDateObs("ART initiation date",s,f)}));V(this,"computeARTStartDate",async(s,f)=>({date:s,tag:"reg",isEstimate:f,obs:await this.buildDateObs("Contact date ART started",s,f)}));V(this,"computeInitialWeight",async s=>({tag:"reg",obs:await ee(await this.registration.buildValueNumber("weight",s,null,null))}));V(this,"computeInitialHeight",async s=>({tag:"reg",obs:await ee(await this.registration.buildValueNumber("height",s,null,null))}));V(this,"computeTBStatus",async s=>{const f=_e();return{tag:"reg",obs:{concept_id:await x.getConceptID("TB treatment start date"),value_datetime:B.getSessionDate(),obs_datetime:B.getSessionDate(),providerID:de.getUserID(),programID:B.getProgramID(),location_id:f.facilityLocation.code,value_coded:await x.getConceptID(s)}}});V(this,"buildDateObs",async(s,f,q)=>/unknown/i.test(f)?this.buildValueText(s,"Unknown"):q?this.buildValueDateEstimated(s,f):await this.buildValueDate(s,f));this.registration=new Ne(s,f)}async onSubmit(s){const f=await this.registration.createEncounter();if(!f)throw new Error("Failed to create encounter");this.encounterID=f.encounter_id,this.saveObservationList(s)}}function ee(b){return console.log("fixValueNumericStructureInPlace",b),b.value_numeric.value&&(b.value_numeric=b.value_numeric.value),b}const Te={B:0,F:1,G:2,H:3,J:4,P:5,V:6,W:7,X:8,Z:9},qe=[[0,3,1,7,5,9,8,6,4,2],[7,0,9,2,1,5,4,8,6,3],[4,2,0,6,8,7,1,3,5,9],[1,7,5,0,9,8,3,4,2,6],[6,1,2,3,0,4,5,9,7,8],[3,6,7,4,2,0,9,5,8,1],[5,8,6,9,7,2,0,1,3,4],[8,9,4,5,3,6,2,0,1,7],[9,4,3,8,6,1,7,2,0,5],[2,5,8,1,4,3,6,7,9,0]];function te(b,h){const s=h-"".concat(b).length;return s<=0?"".concat(b):"".concat(Array.from({length:s}).map(()=>0).join("")).concat(b)}function Re(b){b.match(/^\d+$/)||(b=b.replace(/\D/g,""));let h=0;for(let s=0;s<b.length;s++){let f=b.charAt(s);h=qe[h][f]}return"".concat(h)}function Se(b){const[h,s,f,q]=b.split("-");if(!(h&&s&&f&&q))return!1;const t=te(parseInt(s),3),Y=te(parseInt(f),2),n=Te[q.toUpperCase()],P="".concat(h,"-").concat(t,"-").concat(Y);return Re(P)==="".concat(n)}const Oe=ke({__name:"ArtClinicRegistration",setup(b,{expose:h}){const s=new J,f=new Ae(s.getID(),-1),q=F(),t=F({phone_followup:"",phone_number:"",home_visit_followup:"",has_linkage:"",linkage_number:"",received_arvs:"",date_last_taken_arvs:"",taken_last_two_months:"",taken_last_two_weeks:"",ever_registered_at_art_clinic:"",location_of_art_initialization:"",art_number_at_previous_location:"",confirmatory_hiv_test_type:"",confirmatory_hiv_test_location:"",confirmatory_hiv_test_date:"",has_transfer_letter:"",art_start_date:"",initial_weight:"",initial_height:"",cd4_available:"",cd4_percent:""}),Y=F([]),n=F({}),P=F([{dialCode:"265",iso2:"MW",name:"Malawi"}]),$=F({inputHeader:"Phone number *",icon:ve.phone,value:"",name:"phoneNumber",InnerBtn:"",popOverData:{filterData:!1,data:[]}}),u={phone_followup:{label:"Phone followup",required:()=>!0,buildObs:()=>[f.buildValueCoded("Phone",t.value.phone_followup),f.buildValueCoded("Agrees to followup","Phone")],options:()=>["Yes","No"],validation:()=>D("phone_followup")},phone_number:{required:()=>t.value.phone_followup==="Yes"&&(!s.getPhoneNumber()||/unknown|n\/a/i.test("".concat(s.getPhoneNumber()))),label:"Phone number",onSubmit:async()=>{try{const r="+".concat(P.value[0].dialCode).concat(t.value.phone_number),e=new Ie;e.setPersonID(s.getID()),await e.updatePerson({cell_phone_number:r});const I=pe().getPatient();I&&I.personInformation&&(I.personInformation.cell_phone_number=r,await be(I)),Q("Phone number updated successfully")}catch(r){console.error("Error updating phone number:",r),E("Failed to update phone number")}},formatValue:()=>"+".concat(P.value[0].dialCode).concat(t.value.phone_number),onFormUpdate:(r,e)=>{r==="phone_followup"&&e==="No"&&(t.value.phone_number="",n.value.phone_number="")},validation:()=>{n.value.phone_number="";const r=u.phone_number.required();if(r&&!t.value.phone_number){n.value.phone_number="Phone number is required";return}const e=me.isMWPhoneNumber(u.phone_number.formatValue());r&&typeof e=="string"&&e.length>0&&(n.value.phone_number="Not a valid Malawi phone number")}},home_visit_followup:{label:"Home visit followup",required:()=>!0,options:()=>["Yes","No"],buildObs:()=>[f.buildValueCoded("Home visit",t.value.home_visit_followup),f.buildValueCoded("Agrees to followup","Home visit")],validation:()=>D("home_visit_followup")},has_linkage:{label:"Has linkage number",required:()=>!0,options:()=>["Yes","No"],validation:()=>D("has_linkage")},linkage_number:{label:"Linkage number",required:()=>t.value.has_linkage==="Yes",onFormUpdate:(r,e)=>{r==="has_linkage"&&e==="Yes"&&(t.value.linkage_number="",n.value.linkage_number="")},buildObs:()=>f.buildValueText("HTC Serial number",t.value.linkage_number),validation:()=>{if(n.value.linkage_number="",D("linkage_number"))try{Se(t.value.linkage_number)||(n.value.linkage_number="Invalid linkage number")}catch(r){n.value.linkage_number='Invalid linkage number. please follow format "1234-002-01-A" '}}},received_arvs:{label:"Received ARVs",required:()=>!0,options:()=>["Yes","No"],buildObs:()=>f.buildValueCoded("Ever received ART",t.value.received_arvs),validation:()=>D("received_arvs")},date_last_taken_arvs:{label:"Date last taken ARVs",required:()=>t.value.received_arvs==="Yes",onFormUpdate:(r,e)=>{r==="received_arvs"&&e==="No"&&(t.value.date_last_taken_arvs="",n.value.date_last_taken_arvs="")},validation:()=>{n.value.date_last_taken_arvs="",D("date_last_taken_arvs")&&L("date_last_taken_arvs")},buildObs:()=>f.buildValueDate("Date ART last taken",t.value.date_last_taken_arvs.standardDate)},taken_last_two_months:{label:"Taken last two months",required:()=>t.value.received_arvs==="Unknown",onFormUpdate:(r,e)=>{r==="received_arvs"&&e=="No"&&(t.value.taken_last_two_months="",n.value.taken_last_two_months="")},options:()=>["Yes","No","Unknown"],buildObs:()=>f.buildValueCoded("Has the patient taken ART in the last two months",t.value.taken_last_two_months),validation:()=>D("taken_last_two_months")},taken_last_two_weeks:{label:"Taken last two weeks",required:()=>t.value.taken_last_two_months==="Yes",onFormUpdate:(r,e)=>{r==="taken_last_two_months"&&e==="No"&&(t.value.taken_last_two_weeks="",n.value.taken_last_two_weeks="")},options:()=>["Yes","No","Unknown"],validation:()=>D("taken_last_two_weeks"),buildObs:()=>f.buildValueCoded("Has the patient taken ART in the last two weeks",t.value.taken_last_two_weeks)},ever_registered_at_art_clinic:{label:"Ever registered at ART clinic",required:()=>t.value.received_arvs==="Yes",onFormUpdate:(r,e)=>{r==="received_arvs"&&e==="No"&&(t.value.ever_registered_at_art_clinic="",n.value.ever_registered_at_art_clinic="")},options:()=>["Yes","No"],validation:()=>D("ever_registered_at_art_clinic"),buildObs:()=>f.buildValueCoded("Ever registered at ART clinic",t.value.ever_registered_at_art_clinic)},location_of_art_initialization:{label:"Location of ART initialization",required:()=>t.value.ever_registered_at_art_clinic==="Yes",onFormUpdate:(r,e)=>{(r==="received_arvs"&&e==="No"||r==="ever_registered_at_art_clinic"&&e==="No")&&(t.value.location_of_art_initialization="",n.value.location_of_art_initialization="")},buildObs:()=>{var r,e;return f.buildValueText("Location of ART initialization",(e=(r=t.value.location_of_art_initialization)==null?void 0:r.name)!=null?e:t.value.location_of_art_initialization)},validation:()=>D("location_of_art_initialization"),searchFacilities:r=>X(r).then(e=>Y.value=e)},art_start_date:{label:"ART start date",required:()=>t.value.ever_registered_at_art_clinic==="Yes",onFormUpdate:(r,e)=>{(r==="received_arvs"&&e==="No"||r==="ever_registered_at_art_clinic"&&e==="No")&&(t.value.art_start_date="",n.value.art_start_date="")},buildObs:()=>M("Date ART started",t.value.art_start_date.standardDate),validation:()=>{n.value.art_start_date="",D("art_start_date")&&L("art_start_date")}},art_number_at_previous_location:{label:"ART number at previous location",required:()=>t.value.ever_registered_at_art_clinic==="Yes",onFormUpdate:(r,e)=>{(r==="received_arvs"&&e==="No"||r==="ever_registered_at_art_clinic"&&e==="No")&&(t.value.art_number_at_previous_location="",n.value.art_number_at_previous_location="")},validation:()=>D("art_number_at_previous_location"),buildObs:()=>{var r,e;return f.buildValueText("ART number at previous location",(e=(r=t.value.art_number_at_previous_location)==null?void 0:r.name)!=null?e:t.value.art_number_at_previous_location)}},has_transfer_letter:{required:()=>t.value.ever_registered_at_art_clinic==="Yes",onFormUpdate:(r,e)=>{(r==="received_arvs"&&e==="No"||r==="ever_registered_at_art_clinic"&&e==="No")&&(t.value.has_transfer_letter="",n.value.has_transfer_letter="")},label:"Has stage information?",options:()=>["Yes","No"],validation:()=>D("has_transfer_letter"),buildObs:()=>f.buildValueCoded("Has transfer letter",t.value.has_transfer_letter)},initial_height:{label:"Initial height",required:()=>t.value.has_transfer_letter==="Yes",onFormUpdate:(r,e)=>{(r==="received_arvs"&&e==="No"||r==="has_transfer_letter"&&e==="No")&&(t.value.initial_height="",n.value.initial_height="")},buildVitalsObs:r=>r.buildValueNumber("Height",t.value.initial_height),validation:()=>{n.value.initial_height="",D("initial_height")&&(/^\d+$/i.test("".concat(t.value.initial_height))||(n.value.initial_height="Initial height must be a number"),parseInt(t.value.initial_height)<40&&(n.value.initial_height="Initial height cannot be less than 40"),parseInt(t.value.initial_height)>220&&(n.value.initial_height="Initial height cannot be greater than 220"))}},initial_weight:{label:"Initial weight",required:()=>t.value.has_transfer_letter==="Yes",onFormUpdate:(r,e)=>{(r==="received_arvs"&&e==="No"||r==="has_transfer_letter"&&e==="No")&&(t.value.initial_weight="",n.value.initial_weight="")},buildVitalsObs:r=>r.buildValueNumber("Weight",t.value.initial_weight),validation:()=>{n.value.initial_weight="",D("initial_weight")&&(/^\d{1,3}\.\d{1}$/i.test("".concat(t.value.initial_weight))||(n.value.initial_weight="Initial weight must be a valid decimal number.. i.e. 40.0"),parseInt(t.value.initial_weight)<.5&&(n.value.initial_weight="Initial weight cannot be less than 0.5"),parseInt(t.value.initial_weight)>250&&(n.value.initial_weight="Initial weight cannot be greater than 250"))}},vitals:{onSubmit:async()=>{if(u.initial_height.required()&&u.initial_weight.required()){const r=new ye(s.getID(),-1);r.setDate(t.value.art_start_date.standardDate);const e=[u.initial_height.buildVitalsObs(r),u.initial_weight.buildVitalsObs(r)];await r.createEncounter(),await r.saveObservationList(await Promise.all(e))}}},cd4_available:{required:()=>t.value.has_transfer_letter==="Yes",onFormUpdate:(r,e)=>{(r==="received_arvs"&&e==="No"||r==="has_transfer_letter"&&e==="No")&&(t.value.cd4_available="",n.value.cd4_available="")},label:"CD4 available",options:()=>["Yes","No"],validation:()=>D("cd4_available")},cd4_percent:{required:()=>t.value.cd4_available==="Yes",onFormUpdate:(r,e)=>{(r==="received_arvs"&&e==="No"||r==="cd4_available"&&e==="No")&&(t.value.cd4_percent="",n.value.cd4_percent="")},label:"CD4 percent",buildObs:()=>f.buildValueNumber("CD4 percent",parseInt(t.value.cd4_percent.substring(1)),"%"),validation:()=>{n.value.cd4_percent="",D("cd4_percent")&&(/^\d+$/i.test("".concat(t.value.cd4_percent))||(n.value.cd4_percent="CD4 percent must be a number"),parseInt(t.value.cd4_percent)<0&&(n.value.cd4_percent="CD4 percent cannot be less than 0"),parseInt(t.value.cd4_percent)>100&&(n.value.cd4_percent="CD4 percent cannot be greater than 100"))}},confirmatory_hiv_test_type:{label:"Confirmatory hiv test type",required:()=>!0,options:()=>[{label:"Rapid antibody test",value:"HIV rapid test"},{label:"DNA PCR",value:"HIV DNA polymerase chain reaction"},{label:"Not done",value:"Not done",disabled:()=>t.value.has_linkage==="Yes"}],buildObs:()=>f.buildValueCoded("Confirmatory hiv test type",t.value.confirmatory_hiv_test_type),validation:()=>{n.value.confirmatory_hiv_test_type="",D("confirmatory_hiv_test_type")&&t.value.confirmatory_hiv_test_type==="Not done"&&t.value.has_linkage==="Yes"&&(n.value.confirmatory_hiv_test_type="Linkage number detected, please select a confirmatory hiv test type")}},confirmatory_hiv_test_location:{label:"Confirmatory hiv test location",required:()=>t.value.confirmatory_hiv_test_type&&t.value.confirmatory_hiv_test_type!=="Not done",onFormUpdate:(r,e)=>{r==="confirmatory_hiv_test_type"&&e==="Not done"&&(t.value.confirmatory_hiv_test_location="",n.value.confirmatory_hiv_test_location="")},validation:()=>D("confirmatory_hiv_test_location"),searchFacilities:r=>X(r).then(e=>Y.value=e),buildObs:()=>{var r,e;return f.buildValueText("Confirmatory hiv test location",(e=(r=t.value.confirmatory_hiv_test_location)==null?void 0:r.name)!=null?e:t.value.confirmatory_hiv_test_location)}},confirmatory_hiv_test_date:{label:"Confirmatory hiv test date",required:()=>t.value.confirmatory_hiv_test_type&&t.value.confirmatory_hiv_test_type!=="Not done",confirmFirmWithArtStartDateValue:()=>{var r;return n.value.confirmatory_hiv_test_date="",u.art_start_date.required()&&(r=t.value.confirmatory_hiv_test_date)!=null&&r.standardDate&&z(t.value.confirmatory_hiv_test_date.standardDate).isAfter(z(t.value.art_start_date.standardDate))?(n.value.confirmatory_hiv_test_date="Confirmatory hiv test date cannot be after ART start date",!1):!0},onFormUpdate:(r,e)=>{var i,I,U;if(r==="confirmatory_hiv_test_type"&&e==="Not done"&&(t.value.confirmatory_hiv_test_date="",n.value.confirmatory_hiv_test_date=""),r==="confirmatory_hiv_test_date"){const j=(i=e==null?void 0:e.value)==null?void 0:i.standardDate;if(j){const ne=(U=(I=t.value.art_start_date)==null?void 0:I.standardDate)!=null?U:f.getDate(),K=z(ne).diff(j,"days");K>=20&&ce("Data inconsistency warning","Confirmatory Date for newly initiated ART patient is ".concat(K," days ago"),"Are you sure this is accurate?",[{name:"No, Re-enter date",slot:"start",color:"success"},{name:"Yes, its accurate",slot:"end",color:"danger"}]).then(oe=>{oe==="No, Re-enter date"&&(t.value.confirmatory_hiv_test_date={},n.value.confirmatory_hiv_test_date="Re-enter a valid confirmatory date")})}}(r==="art_start_date"||r==="ever_registered_at_art_clinic")&&u.confirmatory_hiv_test_date.confirmFirmWithArtStartDateValue()},buildObs:()=>M("Confirmatory hiv test date",t.value.confirmatory_hiv_test_date.standardDate),validation:()=>{n.value.confirmatory_hiv_test_date="",D("confirmatory_hiv_test_date")&&(!L("confirmatory_hiv_test_date")||u.confirmatory_hiv_test_date.confirmFirmWithArtStartDateValue())}}};function ae(){return Object.keys(u).reduce((r,e)=>{if(e in u&&typeof u[e].required=="function"&&u[e].required()&&typeof u[e].buildObs=="function"){const i=u[e].buildObs();return Array.isArray(i)?[...r,...i]:[...r,i]}return r},[])}function y(r,e){G(r),Object.keys(u).forEach(i=>{var I;return((I=u[i])==null?void 0:I.onFormUpdate)&&u[i].onFormUpdate(r,e)})}function D(r){n.value[r]="";const e=u[r],i=e!=null&&e.required?e.required():!1;return i&&!t.value[r]?(n.value[r]="This field is required",!1):i}function L(r){var U;n.value[r]="";const e=typeof t.value[r]=="string"?t.value[r]:(U=t.value[r])==null?void 0:U.standardDate,i=z(e),I=z(J.getSessionDate());return i.isAfter(I)?(n.value[r]="".concat(u[r].label," cannot be in the future"),!1):i.isBefore(z(s.getBirthdate()))?(n.value[r]="".concat(u[r].label," cannot be before birthdate"),!1):!0}function M(r,e,i){let I={};return e.match(/unknown/i)?I=f.buildValueText(r,"Unknown"):I=f.buildValueDate(r,e),I}function G(r){if(n.value[r]="",typeof u[r].required=="function"&&u[r].required()&&r in t.value&&!t.value[r]){n.value[r]="This field is required";return}typeof u[r].validation=="function"&&u[r].validation()}function le(){return Object.keys(u).forEach(r=>G(r)),Object.keys(n.value).every(r=>"".concat(n.value[r]).length<=0)}function re(){const r=Object.keys(u).filter(e=>typeof u[e].onSubmit=="function").map(e=>u[e].onSubmit&&u[e].onSubmit());return Promise.all(r)}async function ie(){const r=t.value.has_transfer_letter==="Yes"?q.value.validateStagingForm():!0,e=le();if(!r||!e)return ge("Please review form for errors"),!1;try{await f.createEncounter();const i=await Promise.all(ae());return await f.onSubmit(i),await re(),t.value.has_transfer_letter==="Yes"&&!await q.value.onSubmit()?(E("Unable to save Staging information!"),!1):(Q("ART Clinic Registration saved successfully"),!0)}catch(i){return console.error(i),E("Error has occured while saving observations"),!1}}return h({onSubmit:ie}),(r,e)=>(_(),v(a(Ve),{style:{margin:"0px auto",width:"80%"}},{default:l(()=>[o(a(we),null,{default:l(()=>[o(a(De),null,{default:l(()=>[o(a(C),null,{default:l(()=>[o(a(g),{size:"12","size-md":"6"},{default:l(()=>[o(a(p),{class:"form-label"},{default:l(()=>e[22]||(e[22]=[d("Phone Followup "),k("span",{style:{color:"red"}},"*",-1)])),_:1,__:[22]}),o(a(T),{value:t.value.phone_followup,onIonChange:e[0]||(e[0]=i=>{t.value.phone_followup=i.detail.value,y("phone_followup",i.detail.value)})},{default:l(()=>[o(a(N),{lines:"none"},{default:l(()=>[o(a(A),{slot:"start",value:"Yes"}),o(a(p),null,{default:l(()=>e[23]||(e[23]=[d("Yes")])),_:1,__:[23]})]),_:1}),o(a(N),{lines:"none"},{default:l(()=>[o(a(A),{slot:"start",value:"No"}),o(a(p),null,{default:l(()=>e[24]||(e[24]=[d("No")])),_:1,__:[24]})]),_:1})]),_:1},8,["value"]),n.value.phone_followup?(_(),v(a(w),{key:0,color:"danger"},{default:l(()=>[d(c(n.value.phone_followup),1)]),_:1})):m("",!0)]),_:1}),o(a(g),{size:"12","size-md":"6"},{default:l(()=>[o(a(p),{class:"form-label"},{default:l(()=>e[25]||(e[25]=[d("Home Visit Followup "),k("span",{style:{color:"red"}},"*",-1)])),_:1,__:[25]}),o(a(T),{value:t.value.home_visit_followup,onIonChange:e[1]||(e[1]=i=>{t.value.home_visit_followup=i.detail.value,y("home_visit_followup",i.detail.value)})},{default:l(()=>[o(a(N),{lines:"none"},{default:l(()=>[o(a(A),{slot:"start",value:"Yes"}),o(a(p),null,{default:l(()=>e[26]||(e[26]=[d("Yes")])),_:1,__:[26]})]),_:1}),o(a(N),{lines:"none"},{default:l(()=>[o(a(A),{slot:"start",value:"No"}),o(a(p),null,{default:l(()=>e[27]||(e[27]=[d("No")])),_:1,__:[27]})]),_:1})]),_:1},8,["value"]),n.value.home_visit_followup?(_(),v(a(w),{key:0,color:"danger"},{default:l(()=>[d(c(n.value.home_visit_followup),1)]),_:1})):m("",!0)]),_:1})]),_:1}),u.phone_number.required()?(_(),v(a(C),{key:0},{default:l(()=>[o(a(g),null,{default:l(()=>[o(a(p),{class:"form-label"},{default:l(()=>[d(c(u.phone_number.label)+" ",1),e[28]||(e[28]=k("span",{style:{color:"red"}},"*",-1))]),_:1,__:[28]}),o(fe,{inputHeader:"",sectionHeaderFontWeight:"20",bold:"",unit:"",input:"input",disabled:!1,icon:$.value.icon,placeholder:"Enter phone",iconRight:"",leftText:"",inputWidth:"100%",inputValue:t.value.phone_number,eventType:"input",p_country:P.value,"onUpdate:phone":e[2]||(e[2]=i=>{t.value.phone_number=i,y("phone_number",i)}),onCountryChanged:()=>null,popOverData:$.value.popOverData,onHandleInnerActionBtnPropetiesFn:e[3]||(e[3]=i=>r.$emit("click:innerBtn",$.value)),InnerActionBtnPropeties:$.value.InnerBtn},null,8,["icon","inputValue","p_country","popOverData","InnerActionBtnPropeties"]),n.value.phone_number?(_(),v(a(w),{key:0,color:"danger"},{default:l(()=>[d(c(n.value.phone_number),1)]),_:1})):m("",!0)]),_:1})]),_:1})):m("",!0),u.has_linkage.required()?(_(),v(a(C),{key:1},{default:l(()=>[o(a(g),null,{default:l(()=>[o(a(p),{class:"form-label"},{default:l(()=>[d(c(u.has_linkage.label)+" ",1),e[29]||(e[29]=k("span",{style:{color:"red"}},"*",-1))]),_:1,__:[29]}),o(a(T),{value:t.value.has_linkage,onIonChange:e[4]||(e[4]=i=>{t.value.has_linkage=i.detail.value,y("has_linkage",i.detail.value)})},{default:l(()=>[(_(!0),R(S,null,O(u.has_linkage.options(),i=>(_(),v(a(N),{lines:"none",key:i},{default:l(()=>[o(a(A),{slot:"start",value:i},null,8,["value"]),o(a(p),null,{default:l(()=>[d(c(i),1)]),_:2},1024)]),_:2},1024))),128))]),_:1},8,["value"]),n.value.has_linkage?(_(),v(a(w),{key:0,color:"danger"},{default:l(()=>[d(c(n.value.has_linkage),1)]),_:1})):m("",!0)]),_:1})]),_:1})):m("",!0),u.linkage_number.required()?(_(),v(a(C),{key:2},{default:l(()=>[o(a(g),null,{default:l(()=>[o(a(p),{class:"form-label"},{default:l(()=>[d(c(u.linkage_number.label)+" ",1),e[30]||(e[30]=k("span",{style:{color:"red"}},"*",-1))]),_:1,__:[30]}),o(H,{inputHeader:"",placeholder:"e.g 1234-002-01-A",inputValue:t.value.linkage_number,"onUpdate:inputValue":e[5]||(e[5]=i=>{t.value.linkage_number=i.target.value,y("linkage_number",i.target.value)}),error:!!n.value.linkage_number},{end:l(()=>[o(a(p),null,{default:l(()=>e[31]||(e[31]=[d("set_site_prefix")])),_:1,__:[31]})]),_:1},8,["inputValue","error"]),n.value.linkage_number?(_(),v(a(w),{key:0,color:"danger"},{default:l(()=>[d(c(n.value.linkage_number),1)]),_:1})):m("",!0)]),_:1})]),_:1})):m("",!0),u.received_arvs.required()?(_(),v(a(C),{key:3},{default:l(()=>[o(a(g),null,{default:l(()=>[o(a(p),{class:"form-label"},{default:l(()=>[d(c(u.received_arvs.label)+" ",1),e[32]||(e[32]=k("span",{style:{color:"red"}},"*",-1))]),_:1,__:[32]}),o(a(T),{value:t.value.received_arvs,onIonChange:e[6]||(e[6]=i=>{t.value.received_arvs=i.detail.value,y("received_arvs",i.detail.value)})},{default:l(()=>[(_(!0),R(S,null,O(u.received_arvs.options(),i=>(_(),v(a(N),{lines:"none",key:i},{default:l(()=>[o(a(A),{slot:"start",value:i},null,8,["value"]),o(a(p),null,{default:l(()=>[d(c(i),1)]),_:2},1024)]),_:2},1024))),128))]),_:1},8,["value"]),n.value.received_arvs?(_(),v(a(w),{key:0,color:"danger"},{default:l(()=>[d(c(n.value.received_arvs),1)]),_:1})):m("",!0)]),_:1})]),_:1})):m("",!0),u.date_last_taken_arvs.required()?(_(),v(a(C),{key:4},{default:l(()=>[o(a(g),{size:"12","size-md":"6"},{default:l(()=>[o(a(p),{class:"form-label"},{default:l(()=>[d(c(u.date_last_taken_arvs.label)+" ",1),e[33]||(e[33]=k("span",{style:{color:"red"}},"*",-1))]),_:1,__:[33]}),o(W,{place_holder:"",date_prop:t.value.date_last_taken_arvs,onDateUpDated:e[7]||(e[7]=i=>{t.value.date_last_taken_arvs=i,y("date_last_taken_arvs",i)}),error:!!n.value.date_last_taken_arvs},null,8,["date_prop","error"]),n.value.date_last_taken_arvs?(_(),v(a(w),{key:0,color:"danger"},{default:l(()=>[d(c(n.value.date_last_taken_arvs),1)]),_:1})):m("",!0)]),_:1})]),_:1})):m("",!0),u.taken_last_two_months.required()?(_(),v(a(C),{key:5},{default:l(()=>[o(a(g),null,{default:l(()=>[o(a(p),{class:"form-label"},{default:l(()=>[d(c(u.taken_last_two_months.label)+" ",1),e[34]||(e[34]=k("span",{style:{color:"red"}},"*",-1))]),_:1,__:[34]}),o(a(T),{value:t.value.taken_last_two_months,onIonChange:e[8]||(e[8]=i=>{t.value.taken_last_two_months=i.detail.value,y("taken_last_two_months",i.detail.value)})},{default:l(()=>[(_(!0),R(S,null,O(u.taken_last_two_months.options(),i=>(_(),v(a(N),{lines:"none",key:i},{default:l(()=>[o(a(A),{slot:"start",value:i},null,8,["value"]),o(a(p),null,{default:l(()=>[d(c(i),1)]),_:2},1024)]),_:2},1024))),128))]),_:1},8,["value"]),n.value.taken_last_two_months?(_(),v(a(w),{key:0,color:"danger"},{default:l(()=>[d(c(n.value.taken_last_two_months),1)]),_:1})):m("",!0)]),_:1})]),_:1})):m("",!0),u.taken_last_two_weeks.required()?(_(),v(a(C),{key:6},{default:l(()=>[o(a(g),null,{default:l(()=>[o(a(p),{class:"form-label"},{default:l(()=>[d(c(u.taken_last_two_weeks.label)+" ",1),e[35]||(e[35]=k("span",{style:{color:"red"}},"*",-1))]),_:1,__:[35]}),o(a(T),{value:t.value.taken_last_two_weeks,onIonChange:e[9]||(e[9]=i=>{t.value.taken_last_two_weeks=i.detail.value,y("taken_last_two_weeks",i.detail.value)})},{default:l(()=>[(_(!0),R(S,null,O(u.taken_last_two_weeks.options(),i=>(_(),v(a(N),{lines:"none",key:i},{default:l(()=>[o(a(A),{slot:"start",value:i},null,8,["value"]),o(a(p),null,{default:l(()=>[d(c(i),1)]),_:2},1024)]),_:2},1024))),128))]),_:1},8,["value"]),n.value.taken_last_two_weeks?(_(),v(a(w),{key:0,color:"danger"},{default:l(()=>[d(c(n.value.taken_last_two_weeks),1)]),_:1})):m("",!0)]),_:1})]),_:1})):m("",!0),u.ever_registered_at_art_clinic.required()?(_(),v(a(C),{key:7},{default:l(()=>[o(a(g),null,{default:l(()=>[o(a(p),{class:"form-label"},{default:l(()=>[d(c(u.ever_registered_at_art_clinic.label)+" ",1),e[36]||(e[36]=k("span",{style:{color:"red"}},"*",-1))]),_:1,__:[36]}),o(a(T),{value:t.value.ever_registered_at_art_clinic,onIonChange:e[10]||(e[10]=i=>{t.value.ever_registered_at_art_clinic=i.detail.value,y("ever_registered_at_art_clinic",i.detail.value)})},{default:l(()=>[(_(!0),R(S,null,O(u.ever_registered_at_art_clinic.options(),i=>(_(),v(a(N),{lines:"none",key:i},{default:l(()=>[o(a(A),{slot:"start",value:i},null,8,["value"]),o(a(p),null,{default:l(()=>[d(c(i),1)]),_:2},1024)]),_:2},1024))),128))]),_:1},8,["value"]),n.value.ever_registered_at_art_clinic?(_(),v(a(w),{key:0,color:"danger"},{default:l(()=>[d(c(n.value.ever_registered_at_art_clinic),1)]),_:1})):m("",!0)]),_:1})]),_:1})):m("",!0),u.location_of_art_initialization.required()?(_(),v(a(C),{key:8},{default:l(()=>[o(a(g),{size:"12","size-md":"6"},{default:l(()=>[o(a(p),{class:"form-label"},{default:l(()=>[d(c(u.location_of_art_initialization.label)+" ",1),e[37]||(e[37]=k("span",{style:{color:"red"}},"*",-1))]),_:1,__:[37]}),o(Z,{show_error:!!n.value.location_of_art_initialization,selected_district_ids:[],selected_location:t.value.location_of_art_initialization,onFacilitySelected:e[11]||(e[11]=i=>{t.value.location_of_art_initialization=i.selected_location,y("location_of_art_initialization",i.selected_location)})},null,8,["show_error","selected_location"]),n.value.location_of_art_initialization?(_(),v(a(w),{key:0,color:"danger"},{default:l(()=>[d(c(n.value.location_of_art_initialization),1)]),_:1})):m("",!0)]),_:1}),u.art_number_at_previous_location.required()?(_(),v(a(g),{key:0,size:"12","size-md":"6"},{default:l(()=>[o(a(p),{class:"form-label"},{default:l(()=>[d(c(u.art_number_at_previous_location.label)+" ",1),e[38]||(e[38]=k("span",{style:{color:"red"}},"*",-1))]),_:1,__:[38]}),o(H,{inputHeader:"",placeholder:"Enter previous ART number",inputValue:t.value.art_number_at_previous_location,"onUpdate:inputValue":e[12]||(e[12]=i=>{t.value.art_number_at_previous_location=i.target.value,y("art_number_at_previous_location",i.target.value)}),error:!!n.value.art_number_at_previous_location},null,8,["inputValue","error"]),n.value.art_number_at_previous_location?(_(),v(a(w),{key:0,color:"danger"},{default:l(()=>[d(c(n.value.art_number_at_previous_location),1)]),_:1})):m("",!0)]),_:1})):m("",!0)]),_:1})):m("",!0),u.art_start_date.required()?(_(),v(a(C),{key:9},{default:l(()=>[o(a(g),{size:"12","size-md":"6"},{default:l(()=>[o(a(p),{class:"form-label"},{default:l(()=>[d(c(u.art_start_date.label)+" ",1),e[39]||(e[39]=k("span",{style:{color:"red"}},"*",-1))]),_:1,__:[39]}),o(W,{place_holder:u.art_start_date.label+(u.art_start_date.required()?"*":""),date_prop:t.value.art_start_date,onDateUpDated:e[13]||(e[13]=i=>{t.value.art_start_date=i,y("art_start_date",i)}),error:!!n.value.art_start_date},null,8,["place_holder","date_prop","error"]),n.value.art_start_date?(_(),v(a(w),{key:0,color:"danger"},{default:l(()=>[d(c(n.value.art_start_date),1)]),_:1})):m("",!0)]),_:1})]),_:1})):m("",!0),u.has_transfer_letter.required()?(_(),v(a(C),{key:10},{default:l(()=>[o(a(g),null,{default:l(()=>[o(a(p),{class:"form-label"},{default:l(()=>[d(c(u.has_transfer_letter.label)+" ",1),e[40]||(e[40]=k("span",{style:{color:"red"}},"*",-1))]),_:1,__:[40]}),o(a(T),{value:t.value.has_transfer_letter,onIonChange:e[14]||(e[14]=i=>{t.value.has_transfer_letter=i.detail.value,y("has_transfer_letter",i.detail.value)})},{default:l(()=>[(_(!0),R(S,null,O(u.has_transfer_letter.options(),i=>(_(),v(a(N),{lines:"none",key:i},{default:l(()=>[o(a(A),{slot:"start",value:i},null,8,["value"]),o(a(p),null,{default:l(()=>[d(c(i),1)]),_:2},1024)]),_:2},1024))),128))]),_:1},8,["value"]),n.value.has_transfer_letter?(_(),v(a(w),{key:0,color:"danger"},{default:l(()=>[d(c(n.value.has_transfer_letter),1)]),_:1})):m("",!0)]),_:1})]),_:1})):m("",!0),o(a(C),null,{default:l(()=>[u.initial_weight.required()?(_(),v(a(g),{key:0,size:"12","size-md":"6"},{default:l(()=>[o(a(p),{class:"form-label"},{default:l(()=>[d(c(u.initial_weight.label)+" ",1),e[41]||(e[41]=k("span",{style:{color:"red"}},"*",-1))]),_:1,__:[41]}),o(H,{inputHeader:"",placeholder:"1",inputType:"number",inputValue:t.value.initial_weight,"onUpdate:inputValue":e[15]||(e[15]=i=>{t.value.initial_weight=i.target.value,y("initial_weight",i.target.value)}),error:!!n.value.initial_weight,unit:"KG"},null,8,["inputValue","error"]),n.value.initial_weight?(_(),v(a(w),{key:0,color:"danger"},{default:l(()=>[d(c(n.value.initial_weight),1)]),_:1})):m("",!0)]),_:1})):m("",!0),u.initial_height.required()?(_(),v(a(g),{key:1,size:"12","size-md":"6"},{default:l(()=>[o(a(p),{class:"form-label"},{default:l(()=>[d(c(u.initial_height.label)+" ",1),e[42]||(e[42]=k("span",{style:{color:"red"}},"*",-1))]),_:1,__:[42]}),o(H,{inputHeader:"",placeholder:"1",inputType:"number",inputValue:t.value.initial_height,"onUpdate:inputValue":e[16]||(e[16]=i=>{t.value.initial_height=i.target.value,y("initial_height",i.target.value)}),error:!!n.value.initial_height,unit:"CM"},null,8,["inputValue","error"]),n.value.initial_height?(_(),v(a(w),{key:0,color:"danger"},{default:l(()=>[d(c(n.value.initial_height),1)]),_:1})):m("",!0)]),_:1})):m("",!0)]),_:1}),t.value.has_transfer_letter==="Yes"?(_(),v(a(C),{key:11},{default:l(()=>[o(a(g),null,{default:l(()=>[(_(),v(Ce,{key:t.value.art_start_date,date:t.value.art_start_date,ref_key:"stagingRef",ref:q},null,8,["date"]))]),_:1})]),_:1})):m("",!0),u.cd4_available.required()?(_(),v(a(C),{key:12},{default:l(()=>[o(a(g),null,{default:l(()=>[o(a(p),{class:"form-label"},{default:l(()=>[d(c(u.cd4_available.label)+" ",1),e[43]||(e[43]=k("span",{style:{color:"red"}},"*",-1))]),_:1,__:[43]}),o(a(T),{value:t.value.cd4_available,onIonChange:e[17]||(e[17]=i=>{t.value.cd4_available=i.detail.value,y("cd4_available",i.detail.value)})},{default:l(()=>[(_(!0),R(S,null,O(u.cd4_available.options(),i=>(_(),v(a(N),{lines:"none",key:i},{default:l(()=>[o(a(A),{slot:"start",value:i},null,8,["value"]),o(a(p),null,{default:l(()=>[d(c(i),1)]),_:2},1024)]),_:2},1024))),128))]),_:1},8,["value"]),n.value.cd4_available?(_(),v(a(w),{key:0,color:"danger"},{default:l(()=>[d(c(n.value.cd4_available),1)]),_:1})):m("",!0)]),_:1})]),_:1})):m("",!0),u.cd4_percent.required()?(_(),v(a(C),{key:13},{default:l(()=>[o(a(g),null,{default:l(()=>[o(a(p),{class:"form-label"},{default:l(()=>[d(c(u.cd4_percent.label)+" ",1),e[44]||(e[44]=k("span",{style:{color:"red"}},"*",-1))]),_:1,__:[44]}),o(H,{inputHeader:"",placeholder:"Enter CD4 percent",inputType:"number",inputValue:t.value.cd4_percent,"onUpdate:inputValue":e[18]||(e[18]=i=>{t.value.cd4_percent=i.target.value,y("cd4_percent",i.target.value)}),error:!!n.value.cd4_percent,unit:"%"},null,8,["inputValue","error"]),n.value.cd4_percent?(_(),v(a(w),{key:0,color:"danger"},{default:l(()=>[d(c(n.value.cd4_percent),1)]),_:1})):m("",!0)]),_:1})]),_:1})):m("",!0),u.confirmatory_hiv_test_type.required()?(_(),v(a(C),{key:14},{default:l(()=>[o(a(g),null,{default:l(()=>[o(a(p),{class:"form-label"},{default:l(()=>[d(c(u.confirmatory_hiv_test_type.label)+" ",1),e[45]||(e[45]=k("span",{style:{color:"red"}},"*",-1))]),_:1,__:[45]}),o(a(T),{value:t.value.confirmatory_hiv_test_type,onIonChange:e[19]||(e[19]=i=>{t.value.confirmatory_hiv_test_type=i.detail.value,y("confirmatory_hiv_test_type",i.detail.value)})},{default:l(()=>[(_(!0),R(S,null,O(u.confirmatory_hiv_test_type.options(),i=>(_(),v(a(N),{lines:"none",key:i.value},{default:l(()=>[o(a(A),{disabled:i.disabled?i.disabled():!1,slot:"start",value:i.value},null,8,["disabled","value"]),o(a(p),null,{default:l(()=>[d(c(i.label),1)]),_:2},1024)]),_:2},1024))),128))]),_:1},8,["value"]),n.value.confirmatory_hiv_test_type?(_(),v(a(w),{key:0,color:"danger"},{default:l(()=>[d(c(n.value.confirmatory_hiv_test_type),1)]),_:1})):m("",!0)]),_:1})]),_:1})):m("",!0),u.confirmatory_hiv_test_location.required()?(_(),v(a(C),{key:15},{default:l(()=>[o(a(g),{size:"12","size-md":"6"},{default:l(()=>[o(a(p),{class:"form-label"},{default:l(()=>[d(c(u.confirmatory_hiv_test_location.label)+" ",1),e[46]||(e[46]=k("span",{style:{color:"red"}},"*",-1))]),_:1,__:[46]}),o(Z,{show_error:!!n.value.confirmatory_hiv_test_location,selected_district_ids:[],selected_location:t.value.confirmatory_hiv_test_location,onFacilitySelected:e[20]||(e[20]=i=>{t.value.confirmatory_hiv_test_location=i.selected_location,y("confirmatory_hiv_test_location",i.selected_location)})},null,8,["show_error","selected_location"]),n.value.confirmatory_hiv_test_location?(_(),v(a(w),{key:0,color:"danger"},{default:l(()=>[d(c(n.value.confirmatory_hiv_test_location),1)]),_:1})):m("",!0)]),_:1}),u.confirmatory_hiv_test_date.required()?(_(),v(a(g),{key:0,size:"12","size-md":"6"},{default:l(()=>[o(a(p),{class:"form-label"},{default:l(()=>[d(c(u.confirmatory_hiv_test_date.label)+" ",1),e[47]||(e[47]=k("span",{style:{color:"red"}},"*",-1))]),_:1,__:[47]}),o(W,{place_holder:u.confirmatory_hiv_test_date.label+(u.confirmatory_hiv_test_date.required()?"*":""),date_prop:t.value.confirmatory_hiv_test_date,onDateUpDated:e[21]||(e[21]=i=>{t.value.confirmatory_hiv_test_date=i,y("confirmatory_hiv_test_date",i)}),error:!!n.value.confirmatory_hiv_test_date},null,8,["place_holder","date_prop","error"]),n.value.confirmatory_hiv_test_date?(_(),v(a(w),{key:0,color:"danger"},{default:l(()=>[d(c(n.value.confirmatory_hiv_test_date),1)]),_:1})):m("",!0)]),_:1})):m("",!0)]),_:1})):m("",!0)]),_:1})]),_:1})]),_:1}))}}),Ee=he(Oe,[["__scopeId","data-v-d1b2ab26"]]);export{Ee as default};
