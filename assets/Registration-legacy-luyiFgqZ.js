System.register(["./vendor-legacy-Wjk6MKAM.js","./BirthRegistration.vue_vue_type_script_setup_true_lang-legacy-BN2Csctq.js","./StandardForm.vue_vue_type_script_setup_true_lang-legacy-8fZguQIm.js","./index-legacy-BXpyZFmT.js","./useExposeFromStandardForm-legacy-CDtnBsX3.js","./lodash-legacy-pOOc9Efu.js","./vaccines_service-legacy-B5tTHsNg.js","./app_encounter_service-legacy-CiMyLuXO.js","./sms_service-legacy-Ce0YUveX.js","./appointment_service-legacy-Bvcqo9h1.js","./EIRreportsStore-legacy-DEWoBgjp.js","./Export-legacy-Cnpex1OT.js","./relations_service-legacy-D2T8YBKg.js"],function(e,a){"use strict";var t,n,r,o,l,i,u,s,d,c,v,p,m,f,g,y,x,_,h,b,w,k,F,P,R,C,T,j,V,E,I,B,L,D,S,N,z,M,q,H,G,W;return{setters:[e=>{t=e.c,n=e.d,r=e.a,o=e.y,l=e.f,i=e.u,u=e.r,s=e.bW,d=e.au,c=e.z,v=e.e,p=e.m,m=e.l,f=e.k,g=e.bP,y=e.S,x=e.a9,_=e.i,h=e.v,b=e.V,w=e.W,k=e.A,F=e.F,P=e.L,R=e.p,C=e.af},e=>{T=e.u,j=e.R,V=e.c,E=e.e,I=e.d,B=e.a,L=e._,D=e.b},e=>{S=e._},e=>{N=e.i,z=e.ao,M=e.S,q=e.t,H=e.A,G=e._},e=>{W=e.u},null,null,null,null,null,null,null,null],execute:function(){var a=document.createElement("style");a.textContent=".spinner-overlay[data-v-e6be7808]{position:fixed;top:0;left:0;width:100%;height:100%;background-color:rgba(0,0,0,.5);display:flex;flex-direction:column;justify-content:center;align-items:center;z-index:1000}.spinner-overlay ion-spinner[data-v-e6be7808]{width:50px;height:50px;color:#fff}.spinner-overlay .loading-text[data-v-e6be7808]{color:#fff;margin-top:10px;font-size:1.1em}.header-title[data-v-e6be7808]{text-align:center;font-weight:700;font-size:18px;width:100%;padding:14px;background-color:#f8f8f8;color:#333;box-shadow:0 2px 4px rgba(0,0,0,.1)}.masonry-grid[data-v-e6be7808]{display:grid;grid-template-columns:repeat(auto-fit,minmax(250px,1fr));gap:16px;padding:16px}@media (max-width: 575px){.masonry-grid[data-v-e6be7808]{grid-template-columns:1fr}}@media (min-width: 576px) and (max-width: 767px){.masonry-grid[data-v-e6be7808]{grid-template-columns:repeat(2,1fr)}}@media (min-width: 768px) and (max-width: 991px){.masonry-grid[data-v-e6be7808]{grid-template-columns:repeat(3,1fr)}}@media (min-width: 992px){.masonry-grid[data-v-e6be7808]{grid-template-columns:repeat(4,1fr)}}@media (min-width: 1500px){.masonry-grid[data-v-e6be7808]{margin-left:100px;margin-right:100px}}.custom-card[data-v-e6be7808]{background:#fff;border-radius:5px;padding:5px 15px 15px;transition:transform .2s ease-in-out}.card-margin-top[data-v-e6be7808]{margin-top:16px}.footer-content[data-v-e6be7808]{display:flex;justify-content:space-between;width:100%;padding:10px;align-items:center;background-color:#f8f8f8;box-shadow:0 -2px 4px rgba(0,0,0,.1)}.footer-buttons-left[data-v-e6be7808],.footer-buttons-right[data-v-e6be7808]{display:flex;gap:10px}.pagination-dots[data-v-e6be7808]{display:flex;gap:8px;justify-content:center;align-items:center}.dot[data-v-e6be7808]{width:10px;height:10px;background-color:#ccc;border-radius:50%;cursor:pointer;transition:background-color .3s ease,transform .3s ease}.dot.active[data-v-e6be7808]{background-color:#28a745;transform:scale(1.2)}.dot[data-v-e6be7808]:hover{background-color:#218838}\n/*$vite$:1*/",document.head.appendChild(a);const $=n({__name:"Country",setup(e,{expose:a}){const{country:n}=(()=>{const{countriesList:e}=T();return{country:t(()=>[{componentType:"Heading",name:"Country",position:"center"},{componentType:"multiSelectInputField",header:"Country",name:"country",trackBy:"district_id",openDirection:"auto",icon:N.search,validation:e=>z.required(e),options:e.value}])}})(),{formRef:u,exposeFormMethods:s}=W();return r(()=>{var e;null===(e=u.value)||void 0===e||e.setFormValue("country",{district_id:292,name:"Malawi",region_id:4})}),a(s()),(e,a)=>(l(),o(S,{formData:i(n),ref_key:"formRef",ref:u},null,8,["formData"]))}}),A=n({__name:"PatientType",setup(e,{expose:a}){const{patientType:n}=(()=>{const{facilityList:e,getFacilities:a}=T();return a(),{patientType:t(()=>[{componentType:"Heading",name:"Patient Type",position:"center"},{componentType:"radioButtonField",header:"Patient Type",name:"patient_type",type:"inline",validation:z.required,options:[{label:"New patient",value:"New patient"},{label:"Emergency supply",value:"Emergency supply"},{label:"External consultation",value:"External consultation"}]},{componentType:"multiSelectInputField",header:"Facility",name:"facility",trackBy:"facility_id",openDirection:"auto",icon:N.search,validation:e=>z.required(e),options:e.value.facilities,condition:e=>"Emergency supply"==(null==e?void 0:e.patient_type)||"External consultation"==(null==e?void 0:e.patient_type)}])}})(),{formRef:r,exposeFormMethods:u}=W();return a(u()),(e,a)=>(l(),o(S,{formData:i(n),ref_key:"formRef",ref:r},null,8,["formData"]))}});function Y(){const e=u(1),a=u(4),n=t(()=>0===a.value?4:Math.ceil(4/a.value)),o=t(()=>n.value>1),l=t(()=>o.value&&e.value>1),i=t(()=>o.value&&e.value<n.value),d=()=>{a.value=(()=>{const e=window.innerWidth;return e>=992?4:e>=768?3:e>=576?2:1})(),e.value>n.value&&(e.value=n.value),0===e.value&&n.value>0&&(e.value=1)};return r(()=>{window.addEventListener("resize",d),d()}),s(()=>{window.removeEventListener("resize",d)}),{currentPage:e,columnsPerRow:a,totalPages:n,showPaginationButtons:o,showPreviousButton:l,showNextButton:i,nextPage:()=>{e.value<n.value&&e.value++},prevPage:()=>{e.value>1&&e.value--},goToPage:a=>{a>=1&&a<=n.value&&(e.value=a)},handleResize:d,isCardVisible:t=>{if(1===n.value)return!0;const r=(e.value-1)*a.value,o=r+a.value-1;return t>=r&&t<=o}}}const J={key:0,class:"spinner-overlay"},K={class:"masonry-grid"},O={class:"card-container"},Q={class:"custom-card"},U={class:"card-container"},X={key:0,class:"custom-card"},Z={key:1,class:"custom-card"},ee={class:"custom-card card-margin-top"},ae={key:0,class:"card-container"},te={class:"custom-card"},ne={class:"custom-card card-margin-top"},re={class:"card-container"},oe={class:"custom-card"},le={key:0,class:"custom-card card-margin-top"},ie={class:"footer-content"},ue={class:"footer-buttons-left"},se={key:0,class:"pagination-dots"},de=["onClick","aria-label"],ce={class:"footer-buttons-right"};e("default",G(n({__name:"Registration",setup(e){const a=u(!1),n=d(),r=u(null),s=u(null),T=u(null),S=u(null),N=u(null),z=u(null),G=u(null),W=u(null),ve=t(()=>{var e;return(null===(e=r.value)||void 0===e?void 0:e.currentFormValues)||{}}),pe=t(()=>{var e;return(null===(e=s.value)||void 0===e?void 0:e.currentFormValues)||{}}),me=t(()=>{var e;return(null===(e=T.value)||void 0===e?void 0:e.currentFormValues)||{}}),fe=t(()=>{var e;return(null===(e=S.value)||void 0===e?void 0:e.currentFormValues)||{}}),ge=t(()=>{var e;return(null===(e=N.value)||void 0===e?void 0:e.currentFormValues)||{}}),ye=t(()=>{var e;return(null===(e=z.value)||void 0===e?void 0:e.currentFormValues)||{}}),xe=t(()=>{var e;return(null===(e=G.value)||void 0===e?void 0:e.currentFormValues)||{}}),_e=t(()=>{var e;return(null===(e=W.value)||void 0===e?void 0:e.currentFormValues)||{}}),he=t(()=>({personalInformation:ve.value,birthRegistration:pe.value,socialHistory:me.value,country:fe.value,currentLocation:ge.value,homeLocation:ye.value,guardianInformation:xe.value,patientType:_e.value})),be=t(()=>(new j).checkIfChild(ve.value)),{nextPage:we,prevPage:ke,goToPage:Fe,isCardVisible:Pe,showPreviousButton:Re,showPaginationButtons:Ce,totalPages:Te,currentPage:je,showNextButton:Ve}=Y(),Ee=async()=>{(()=>{const e=[r,s,T,S,N,z,G,W];return e.forEach(e=>{var a;return null===(a=e.value)||void 0===a?void 0:a.validateForm()}),e.every(e=>{var a;return null==(null===(a=e.value)||void 0===a?void 0:a.validateForm())})})()?await(new j).saveRegistrationData(he.value)&&([r,s,T,N,z,G,W].forEach(e=>{var a;return null===(a=e.value)||void 0===a?void 0:a.resetForm()}),32==M.getProgramID()?Ie("/NCDEnrollment"):Ie("/patientProfile")):q("Please fill in all required fields")},Ie=e=>{n.push({path:e})};return(e,t)=>(l(),o(i(C),{class:R({loading:a.value})},{default:c(()=>[a.value?(l(),v("div",J,[m(i(g),{name:"bubbles"}),t[3]||(t[3]=f("div",{class:"loading-text"},"Please wait...",-1))])):p("",!0),m(i(y),null,{default:c(()=>t[4]||(t[4]=[f("div",{class:"header-title"},"New Patient Registration",-1)])),_:1,__:[4]}),m(i(x),null,{default:c(()=>{var e;return[f("div",K,[_(f("div",O,[f("div",Q,[m(V,{ref_key:"personalInformationRef",ref:r},null,512)])],512),[[h,i(Pe)(0)]]),_(f("div",U,[be.value.underNineMonths?(l(),v("div",X,[be.value.underNineMonths?(l(),o(E,{key:0,ref_key:"birthRegistrationRef",ref:s},null,512)):p("",!0)])):p("",!0),be.value.moreThanThirteenYears?(l(),v("div",Z,[m(I,{ref_key:"socialHistoryRef",ref:T},null,512)])):p("",!0),f("div",ee,[m($,{ref_key:"countryRef",ref:S},null,512)])],512),[[h,i(Pe)(1)]]),"Malawi"===(null===(e=fe.value)||void 0===e||null===(e=e.country)||void 0===e?void 0:e.name)?_((l(),v("div",ae,[f("div",te,[m(B,{ref_key:"currentLocationRef",ref:N},null,512)]),f("div",ne,[m(L,{currentLocationFormValues:ge.value,ref_key:"homeLocationRef",ref:z},null,8,["currentLocationFormValues"])])],512)),[[h,i(Pe)(2)]]):p("",!0),_(f("div",re,[f("div",oe,[m(D,{personalInformationFormValues:ve.value,ref_key:"guardianInformationRef",ref:G},null,8,["personalInformationFormValues"])]),1==i(M).getProgramID()?(l(),v("div",le,[m(A,{ref_key:"patientTypeRef",ref:W},null,512)])):p("",!0)],512),[[h,i(Pe)(3)]])])]}),_:1}),m(i(b),null,{default:c(()=>[f("div",ie,[f("div",ue,[m(i(w),{color:"danger","aria-label":"Cancel registration",onClick:t[0]||(t[0]=e=>(async()=>{await H("Do you want to cancel registration?","",{confirmBtnLabel:"Yes",icon:"",showBackdrop:!0})&&Ie("/home")})())},{default:c(()=>t[5]||(t[5]=[k("Cancel")])),_:1,__:[5]}),_(m(i(w),{onClick:t[1]||(t[1]=e=>i(ke)()),"aria-label":"Go to previous page"},{default:c(()=>t[6]||(t[6]=[k("Previous")])),_:1,__:[6]},512),[[h,i(Re)]])]),i(Ce)?(l(),v("div",se,[(l(!0),v(F,null,P(i(Te),e=>(l(),v("span",{key:e,class:R({dot:!0,active:e===i(je)}),onClick:a=>i(Fe)(e),"aria-label":`Go to page ${e}`,role:"button"},null,10,de))),128))])):p("",!0),f("div",ce,[_(m(i(w),{name:"Save",onClick:Ee,"aria-label":"Save patient data"},{default:c(()=>t[7]||(t[7]=[k("Save")])),_:1,__:[7]},512),[[h,i(je)===i(Te)]]),_(m(i(w),{onClick:t[2]||(t[2]=e=>i(we)()),"aria-label":"Go to next page"},{default:c(()=>t[8]||(t[8]=[k("Next")])),_:1,__:[8]},512),[[h,i(Ve)]])])])]),_:1})]),_:1},8,["class"]))}}),[["__scopeId","data-v-e6be7808"]]))}}});
