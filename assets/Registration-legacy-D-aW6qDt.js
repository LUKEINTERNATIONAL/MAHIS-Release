!function(){function e(e,t,a){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var n=a.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}System.register(["./vendor-legacy-BXa8kD6l.js","./index-legacy-BM3w2e78.js","./useLocation-legacy-C-Cgnwp_.js","./vaccines_service-legacy-DAeYoIDJ.js"],(function(t,a){"use strict";var n,i,o,l,r,d,u,s,c,m,v,p,h,f,_,g,y,b,I,w,D,F,x,k,T,R,P,S,V,N,C,B,L,M,H,E,A,O,Y,G,j,q,W,z,U,J,$,K,Z,Q,X,ee,te,ae,ne,ie,oe,le,re,de,ue,se,ce,me,ve,pe,he,fe;return{setters:[e=>{n=e.d,i=e.N,o=e.L,l=e.$,r=e.aj,d=e.a6,u=e.dH,s=e.a5,c=e.dN,m=e.X,v=e.R,p=e.H,h=e.e,f=e.f,_=e.m,g=e.l,y=e.k,b=e.J,I=e.Q,w=e.F,D=e.r,F=e.c,x=e.O,k=e.u,T=e.K,R=e.P,P=e.z,S=e.cC,V=e.w,N=e.aV,C=e.a,B=e.cD,L=e.an,M=e.a7,H=e.p,E=e.bP,A=e.I,O=e.a4,Y=e.i,G=e.v,j=e.M},e=>{q=e.l,W=e.K,z=e._,U=e.aB,J=e.aA,$=e.aC,K=e.H,Z=e.S,Q=e.o,X=e.w,ee=e.Z,te=e.m,ae=e.P,ne=e.u,ie=e.ag,oe=e.aW,le=e.v,re=e.bf,de=e.J,ue=e.aD,se=e.e,ce=e.b7,me=e.a0,ve=e.t,pe=e.W},e=>{he=e.u},e=>{fe=e.g}],execute:function(){var a=document.createElement("style");a.textContent=".large-card[data-v-ffb46cdd]{padding:5%;border-radius:15px;border:1px solid #ccc;height:82vh;background-color:#fff;overflow-y:auto;-webkit-box-shadow:0px -2px 19px -2px rgba(196,190,196,1);-moz-box-shadow:0px -2px 19px -2px rgba(196,190,196,1);box-shadow:0 -2px 19px -2px #c4bec4}.header[data-v-ffb46cdd]{display:flex;gap:20px;padding:10px 20px}.position_content[data-v-ffb46cdd]{max-width:100vw}.accordion-expanded[data-v-ffb46cdd]{background-color:#ded}button[aria-expanded=false][data-v-ffb46cdd]{background:rgba(var(--ion-color-rose-rgb),.25)}ion-accordion.accordion-expanding ion-item[slot=header][data-v-ffb46cdd],ion-accordion.accordion-expanded ion-item[slot=header][data-v-ffb46cdd]{--background: #ddeedd}.spinner-overlay[data-v-b2594615]{position:fixed;top:0;left:0;width:100%;height:100%;background-color:rgba(0,0,0,.5);display:flex;flex-direction:column;justify-content:center;align-items:center;z-index:1000}.spinner-overlay ion-spinner[data-v-b2594615]{width:50px;height:50px;color:#fff}.spinner-overlay .loading-text[data-v-b2594615]{color:#fff;margin-top:10px;font-size:1.1em}.header-title[data-v-b2594615]{text-align:center;font-weight:700;font-size:18px;width:100%;padding:14px;background-color:#f8f8f8;color:#333;box-shadow:0 2px 4px rgba(0,0,0,.1)}.masonry-grid[data-v-b2594615]{display:grid;grid-template-columns:repeat(auto-fit,minmax(250px,1fr));gap:16px;padding:16px}@media (max-width: 575px){.masonry-grid[data-v-b2594615]{grid-template-columns:1fr}}@media (min-width: 576px) and (max-width: 767px){.masonry-grid[data-v-b2594615]{grid-template-columns:repeat(2,1fr)}}@media (min-width: 768px) and (max-width: 991px){.masonry-grid[data-v-b2594615]{grid-template-columns:repeat(3,1fr)}}@media (min-width: 992px){.masonry-grid[data-v-b2594615]{grid-template-columns:repeat(4,1fr)}}@media (min-width: 1500px){.masonry-grid[data-v-b2594615]{margin-left:100px;margin-right:100px}}.custom-card[data-v-b2594615]{background:#fff;border-radius:5px;padding:5px 15px 15px;transition:transform .2s ease-in-out}.footer-content[data-v-b2594615]{display:flex;justify-content:space-between;width:100%;padding:10px;align-items:center;background-color:#f8f8f8;box-shadow:0 -2px 4px rgba(0,0,0,.1)}.footer-buttons-left[data-v-b2594615],.footer-buttons-right[data-v-b2594615]{display:flex;gap:10px}.pagination-dots[data-v-b2594615]{display:flex;gap:8px;justify-content:center;align-items:center}.dot[data-v-b2594615]{width:10px;height:10px;background-color:#ccc;border-radius:50%;cursor:pointer;transition:background-color .3s ease,transform .3s ease}.dot.active[data-v-b2594615]{background-color:#28a745;transform:scale(1.2)}.dot[data-v-b2594615]:hover{background-color:#218838}\n/*$vite$:1*/",document.head.appendChild(a);const _e=n({components:{IonLabel:m,IonAvatar:c,IonRow:s,IonImg:u,IonCol:d,IonList:r,IonItem:l,IonIcon:o,IonButton:i,DynamicButton:W},data:()=>({selectedResult:{},iconsContent:q,isAnyAccordionOpen:!0,isLoading:!1}),methods:{dismiss(e){v.dismiss(e)}}}),ge={key:0,class:"spinner-overlay"};const ye=t("C",z(_e,[["render",function(e,t,a,n,i,o){const l=p("ion-spinner"),r=p("ion-title"),d=p("ion-icon"),u=p("ion-header"),s=p("center"),c=p("ion-content"),m=p("DynamicButton"),v=p("ion-col"),D=p("ion-row"),F=p("ion-footer");return f(),h(w,null,[e.isLoading?(f(),h("div",ge,[g(l,{name:"bubbles"}),t[3]||(t[3]=y("div",{class:"loading-text"},"Please wait...",-1))])):_("",!0),g(u,{style:{display:"flex","justify-content":"space-between"}},{default:b((()=>[g(r,{class:"modalTitle"},{default:b((()=>t[4]||(t[4]=[I("Printer")]))),_:1,__:[4]}),g(d,{onClick:t[0]||(t[0]=t=>e.dismiss("dismiss")),style:{"padding-top":"10px","padding-right":"10px"},icon:e.iconsContent.cancel},null,8,["icon"])])),_:1}),g(c,{fullscreen:!0,class:"ion-padding",style:{"--background":"#fff"}},{default:b((()=>[g(s,null,{default:b((()=>t[5]||(t[5]=[y("h3",{class:"ion-padding"},"Do you want to print a barcode?",-1)]))),_:1,__:[5]})])),_:1}),g(F,null,{default:b((()=>[g(D,null,{default:b((()=>[g(v,null,{default:b((()=>[g(m,{color:"danger",onClick:t[1]||(t[1]=t=>e.dismiss("dismiss")),name:"No",fill:"solid",style:{float:"right","margin-right":"2%",width:"100px"}}),g(m,{onClick:t[2]||(t[2]=t=>e.dismiss("Yes")),name:"Yes",fill:"solid",style:{float:"right","margin-right":"2%",width:"100px"}})])),_:1})])),_:1})])),_:1})],64)}]])),be=t("a",n({__name:"CurrentLocation",setup(e,{expose:t}){const{formRef:a,exposeFormMethods:n}=J(),{currentLocation:i}=(e=>{const t=D(!1),{getDistricts:a,districtList:n,selectedTraditionalAuthorityId:i,villages:o,selectedDistrictId:l,TAs:r}=he();return a(),{currentLocation:F((()=>[{componentType:"Heading",name:"Current Location",position:"center"},{componentType:"multiSelectInputField",header:"Current district",name:"current_district",trackBy:"district_id",validation:e=>U.required(e),icon:q.search,options:n.value,onChange:(t,a)=>{null!=e&&e.value&&(e.value.setFormValue("current_traditional_authority",[]),e.value.setFormValue("current_village",[])),l.value=(null==t?void 0:t.district_id)||null}},{componentType:"multiSelectInputField",header:"Current traditional authority",name:"current_traditional_authority",trackBy:"traditional_authority_id",validation:e=>U.required(e),icon:q.search,options:r.value,disabled:e=>{var t;return!(null!=r&&null!==(t=r.value)&&void 0!==t&&t.length)},onChange:(t,a)=>{var n;null!=e&&e.value&&(null==e||null===(n=e.value)||void 0===n||n.setFormValue("current_village",[])),i.value=(null==t?void 0:t.traditional_authority_id)||null}},{componentType:"multiSelectInputField",header:"Current village",name:"current_village",trackBy:"village_id",icon:q.search,validation:e=>U.required(e),options:o.value,disabled:e=>{var t;return!(null!=o&&null!==(t=o.value)&&void 0!==t&&t.length)}},{componentType:"multiSelectInputField",header:"Closest landmark/Plot number",name:"closestLandmark",trackBy:"id",icon:q.search,options:[{id:1,name:"Church"},{id:2,name:"Mosque"},{id:3,name:"Primary School"},{id:4,name:"Borehole"},{id:5,name:"Secondary School"},{id:6,name:"College"},{id:7,name:"Market"},{id:8,name:"Football Ground"},{id:9,name:"Other"}]}])),TAs:r,isLoadingTAs:t,selectedDistrictId:l}})(a);return t(n()),(e,t)=>(f(),x($,{formData:k(i),ref_key:"formRef",ref:a},null,8,["formData"]))}})),Ie=(e,t)=>(null==e||!e.same_as_current)&&!(null!=t&&t.length),we=(e,t)=>a=>{setTimeout((()=>{a?((e,t)=>{if(null==e||!e.value||null==t||!t.value)return;const{current_district:a,current_traditional_authority:n,current_village:i}=e.value;t.value.setFormValue("home_district",a),t.value.setFormValue("home_traditional_authority",n),t.value.setFormValue("home_village",i)})(e,t):(e=>{null!=e&&e.value&&(e.value.setFormValue("home_district",[]),e.value.setFormValue("home_traditional_authority",[]),e.value.setFormValue("home_village",[]))})(t)}),0)},De=t("_",n({__name:"HomeLocation",props:{currentLocationFormValues:{}},setup(e,{expose:t}){const a=e,{formRef:n,exposeFormMethods:i}=J(),o=F((()=>a.currentLocationFormValues)),{homeLocation:l}=((e,t)=>{const{getDistricts:a,districtList:n,selectedTraditionalAuthorityId:i,villages:o,selectedDistrictId:l,TAs:r}=he();a();const d=F((()=>[{componentType:"Heading",name:"Home Location",position:"center"},{componentType:"checkboxField",type:"single",name:"same_as_current",label:"Same as current",onChange:we(e,t)},{componentType:"multiSelectInputField",header:"Home district",name:"home_district",trackBy:"district_id",icon:q.search,validation:U.required,options:n.value,onChange:e=>((e,t,a)=>{t.value=(null==e?void 0:e.district_id)||null,null!=a&&a.value&&(a.value.setFormValue("home_traditional_authority",[]),a.value.setFormValue("home_village",[]))})(e,l,t)},{componentType:"multiSelectInputField",header:"Home traditional authority",name:"home_traditional_authority",trackBy:"traditional_authority_id",validation:U.required,icon:q.search,options:r.value,disabled:e=>Ie(e,r.value),onChange:e=>((e,t,a)=>{var n;t.value=(null==e?void 0:e.traditional_authority_id)||null,null==a||null===(n=a.value)||void 0===n||n.setFormValue("home_village",[])})(e,i,t),openDirection:"auto"},{componentType:"multiSelectInputField",header:"Home village",name:"home_village",trackBy:"village_id",icon:q.search,validation:U.required,options:o.value,disabled:e=>Ie(e,o.value),openDirection:"auto"}]));return{homeLocation:d}})(o,n);return t(i()),(e,t)=>(f(),x($,{formData:k(l),ref_key:"formRef",ref:n},null,8,["formData"]))}})),Fe=n({__name:"Country",setup(e,{expose:t}){const{country:a}=(()=>{const{countriesList:e,getCountries:t}=he();return t(),{country:F((()=>[{componentType:"Heading",name:"Country",position:"center"},{componentType:"multiSelectInputField",header:"Country",name:"country",trackBy:"district_id",openDirection:"auto",icon:q.search,validation:e=>U.required(e),options:e.value}]))}})(),{formRef:n,exposeFormMethods:i}=J();return t(i()),(e,t)=>(f(),x($,{formData:k(a),ref_key:"formRef",ref:n},null,8,["formData"]))}}),xe=t("c",n({__name:"PersonalInformation",setup(e,{expose:t}){const{personalInformation:a}=(()=>{function e(e,t){const a=new Date(e);return a.setFullYear(a.getFullYear()-t),a.toISOString().split("T")[0]}return{personalInformation:F((()=>[{componentType:"Heading",name:"Personal Information",position:"center"},{componentType:"inputField",header:"National ID",name:"nationalID",placeholder:"__-__-__-__",icon:q.nationalID,validation:e=>U.isMWNationalID(e)},{componentType:"inputField",header:"First name",name:"firstname",icon:q.fullName,validation:e=>U.isName(e)},{componentType:"inputField",header:"Middle name",name:"middleName",icon:q.fullName,validation:e=>U.isNamesEmpty(e)},{componentType:"inputField",header:"Last name",name:"lastname",icon:q.fullName,validation:e=>U.isName(e)},{componentType:"radioButtonField",header:"Gender",name:"gender",type:"inline",validation:e=>U.required(e),options:[{label:"Male",value:"M"},{label:"Female",value:"F"}]},{componentType:"dateInputField",header:"Date of birth",name:"birthdate",icon:q.calenderPrimary,minDate:e(K.sessionDate(),110),validation:e=>U.required(e),condition:e=>!e.Estimate,disabled:e=>e.Estimate},{componentType:"inputField",header:"Estimated age",name:"estimation",icon:q.time,validation:e=>U.isEstimationDate(e),initialUnit:"Years",unitOptions:[{label:"Days",value:"Days"},{label:"Weeks",value:"Weeks"},{label:"Months",value:"Months"},{label:"Years",value:"Years"}],unitValidation:e=>e&&""!==e?null:"Please select a unit.",condition:e=>e.Estimate},{componentType:"checkboxField",name:"Estimate",type:"single",label:"Estimate age"},{componentType:"phoneInputField",name:"Phone Number",header:"Phone Number",validation:e=>U.isMWPhoneNumber(e.phoneNumber)}]))}})(),{formRef:n,exposeFormMethods:i}=J();return t(i()),(e,t)=>(f(),x($,{formData:k(a),ref_key:"formRef",ref:n},null,8,["formData"]))}})),ke=n({components:{IonLabel:m,IonAvatar:c,IonRow:s,IonImg:u,IonCol:d,IonList:r,IonItem:l,IonIcon:o,IonButton:i},data:()=>({selectedResult:{},iconsContent:q,isAnyAccordionOpen:!0,isLoading:!1}),methods:{updateAccordionState(e){const t=this.$refs.accordionGroup;this.isAnyAccordionOpen=void 0!==t.value},dismiss(e){v.dismiss(e)},async init(){this.setData(this.deduplicationData[0]||{})},async onSelect(){v.dismiss(this.selectedResult)},setData(e){this.selectedResult=e},dateFormat:e=>K.toStandardHisDisplayFormat(e),probabilityToPercentage:e=>(100*e).toFixed(2)+"%"},props:{deduplicationData:{default:[]},to_be_registered:{default:[]}},mounted(){this.init()},activated(){this.init()}}),Te={key:0,class:"spinner-overlay"},Re={class:"header position_content"},Pe={style:{"font-size":"1.2em","font-weight":"700"}},Se={class:"due_date"},Ve={class:"ion-padding",slot:"content"},Ne={style:{display:"flex","justify-content":"end",gap:"10px"}};const Ce=z(ke,[["render",function(e,t,a,n,i,o){const l=p("ion-spinner"),r=p("ion-icon"),d=p("ion-header"),u=p("ion-label"),s=p("ion-item"),c=p("ion-col"),m=p("ion-row"),v=p("ion-accordion"),D=p("ion-accordion-group"),F=p("ion-content"),k=p("ion-button"),P=p("ion-footer");return f(),h(w,null,[e.isLoading?(f(),h("div",Te,[g(l,{name:"bubbles"}),t[3]||(t[3]=y("div",{class:"loading-text"},"Please wait...",-1))])):_("",!0),g(d,null,{default:b((()=>[y("div",Re,[y("div",{style:{display:"flex","align-items":"center"},onClick:t[0]||(t[0]=t=>e.dismiss("back"))},[g(r,{slot:"separator",size:"large",icon:e.iconsContent.arrowLeft},null,8,["icon"])]),y("div",Pe,"Matches found: ("+T(e.deduplicationData.length)+")",1)])])),_:1}),g(F,{fullscreen:!0,class:"ion-padding",style:{"--background":"#fff"}},{default:b((()=>[g(D,{ref:"accordionGroup",class:"previousView",value:"0",onIonChange:e.updateAccordionState},{default:b((()=>[(f(!0),h(w,null,R(e.deduplicationData,((a,n)=>(f(),x(v,{style:{"margin-bottom":"15px"},value:n,"toggle-icon-slot":"start",class:"custom_card",button:"",key:n,detail:!0,color:a.value===e.selectedResult.value?"light":"",onClick:t=>e.setData(a)},{default:b((()=>[g(s,{slot:"header"},{default:b((()=>[g(u,{class:"previousLabel"},{default:b((()=>{var e,t;return[I(T(null==a||null===(e=a.person)||void 0===e?void 0:e.given_name)+" "+T(null==a||null===(t=a.person)||void 0===t?void 0:t.family_name),1)]})),_:2},1024),y("div",Se,[t[4]||(t[4]=I(" Score: ")),y("b",null,T(e.probabilityToPercentage(null==a?void 0:a.score)||"-"),1)])])),_:2},1024),y("div",Ve,[g(m,null,{default:b((()=>[g(c,null,{default:b((()=>t[5]||(t[5]=[y("b",null,"To be Registered",-1)]))),_:1,__:[5]}),g(c,null,{default:b((()=>t[6]||(t[6]=[y("b",null,"Already Registered",-1)]))),_:1,__:[6]})])),_:1}),g(m,null,{default:b((()=>[g(c,null,{default:b((()=>[g(m,null,{default:b((()=>{var a,n;return[t[7]||(t[7]=I(" Name: ")),y("b",null,T(null===(a=e.to_be_registered)||void 0===a?void 0:a.given_name)+" "+T(null===(n=e.to_be_registered)||void 0===n?void 0:n.family_name),1)]})),_:1,__:[7]}),g(m,null,{default:b((()=>{var a;return[t[8]||(t[8]=I("Gender: ")),y("b",null,T(null===(a=e.to_be_registered)||void 0===a?void 0:a.gender),1)]})),_:1,__:[8]}),g(m,null,{default:b((()=>{var a;return[t[9]||(t[9]=I("Birthdate: ")),y("b",null,T(null===(a=e.to_be_registered)||void 0===a?void 0:a.birthdate),1)]})),_:1,__:[9]}),g(m,null,{default:b((()=>{var a;return[t[10]||(t[10]=I("Home District: ")),y("b",null,T(null===(a=e.to_be_registered)||void 0===a?void 0:a.home_district),1)]})),_:1,__:[10]}),g(m,null,{default:b((()=>{var a;return[t[11]||(t[11]=I("Home TA: ")),y("b",null,T(null===(a=e.to_be_registered)||void 0===a?void 0:a.home_traditional_authority),1)]})),_:1,__:[11]})])),_:1}),g(c,null,{default:b((()=>[g(m,null,{default:b((()=>{var e,n;return[t[12]||(t[12]=I(" Name: ")),y("b",null,T(null==a||null===(e=a.person)||void 0===e?void 0:e.given_name)+" "+T(null==a||null===(n=a.person)||void 0===n?void 0:n.family_name),1)]})),_:2,__:[12]},1024),g(m,null,{default:b((()=>{var e;return[t[13]||(t[13]=I("Gender: ")),y("b",null,T(null==a||null===(e=a.person)||void 0===e?void 0:e.gender),1)]})),_:2,__:[13]},1024),g(m,null,{default:b((()=>{var n;return[t[14]||(t[14]=I("Birthdate: ")),y("b",null,T(e.dateFormat(null==a||null===(n=a.person)||void 0===n?void 0:n.birthdate)),1)]})),_:2,__:[14]},1024),g(m,null,{default:b((()=>{var e;return[t[15]||(t[15]=I("Home District: ")),y("b",null,T(null==a||null===(e=a.person)||void 0===e?void 0:e.home_district),1)]})),_:2,__:[15]},1024),g(m,null,{default:b((()=>{var e;return[t[16]||(t[16]=I("Home TA: ")),y("b",null,T(null==a||null===(e=a.person)||void 0===e?void 0:e.home_traditional_authority),1)]})),_:2,__:[16]},1024)])),_:2},1024)])),_:2},1024)])])),_:2},1032,["value","color","onClick"])))),128))])),_:1},8,["onIonChange"])])),_:1}),g(P,{collapse:"fade",class:"ion-no-border"},{default:b((()=>[y("div",Ne,[g(k,{fill:"solid",color:"secondary",onClick:t[1]||(t[1]=t=>e.dismiss("dismiss"))},{default:b((()=>t[17]||(t[17]=[I(" Not Duplicate ")]))),_:1,__:[17]}),g(k,{onClick:t[2]||(t[2]=t=>e.onSelect()),fill:"solid",disabled:!e.isAnyAccordionOpen},{default:b((()=>t[18]||(t[18]=[I("Select ")]))),_:1,__:[18]},8,["disabled"])])])),_:1})],64)}],["__scopeId","data-v-ffb46cdd"]]),Be=X();class Le{async getDDEIds(){const e=Z.getPouchDbStatus(),t=Z.getLanConnectionStatus(),a=Z.getAPIStatus();if(e||t){var n,i;const e=await Q("dde");if(null!==(n=e[0])&&void 0!==n&&n.npid)return(null===(i=e[0])||void 0===i?void 0:i.npid)||""}if(a)try{var o;const e=await Z.getJson("/dde/patients/sync_npids",{count:1,program_id:Z.getProgramID()});return(null==e||null===(o=e.npids[0])||void 0===o?void 0:o.npid)||""}catch(l){return""}return""}async deleteDDEId(e){Be.postData({command:"deleteData",storeName:"dde",data:{npid:e}})}async possibleDuplicates(e){if(Z.getAPIStatus())try{const a=new ee,n=await a.checkPotentialDuplicates(e);if(n.length>0){const i=await te(Ce,{class:"fullScreenModal"},!0,{to_be_registered:e,deduplicationData:n});if("dismiss"!=i&&"back"!=i){var t;const e=await a.importPatient(null==i||null===(t=i.person)||void 0===t?void 0:t.id),n=await ae.findByID(e.patient_id);return await ne().setPatientRecord(n),!0}return"back"==i}return!1}catch(a){return!1}return!1}}class Me{getRegion(e){return{1:"Central Region",2:"Northern Region",3:"Southern Region",4:"Foreign"}[e]}hasValidData(e,t=[]){return!(!e||"object"!=typeof e)&&(0===t.length?Object.values(e).some((e=>null!=e&&""!==e)):t.every((t=>null!==e[t]&&void 0!==e[t]&&""!==e[t])))}async buildObservation(e,t){if(!t)return null;const a="object"==typeof t&&t.name?t.name:t;return await ie.buildValueText(e,a)}buildGuardianInfo(e){const t={};return t.given_name=(null==e?void 0:e.guardianFirstname)||"",t.middle_name=(null==e?void 0:e.guardianMiddleName)||"",t.family_name=(null==e?void 0:e.guardianLastname)||"",t.cell_phone_number=(null==e?void 0:e.guardianPhoneNumber.phoneNumber)||"",t.national_id=(null==e?void 0:e.guardianNationalID)||"",t.gender="",t.birthdate="",t.birthdate_estimated="false",t.home_region="",t.home_district="",t.home_traditional_authority="",t.home_village="",t.current_region="",t.current_district="",t.current_traditional_authority="",t.current_village="",t.landmark="",{saved:[],unsaved:[t]}}async buildVitals(e){return null!=e&&e.Weight?{saved:[],unsaved:[await this.buildObservation("Weight",e.Weight)]}:null}async buildARTPatientType(e,t){const a=[];let n=[];return e&&a.push(await ie.buildValueText("Art clinic location",e)),t&&a.push(await ie.buildValueCoded("Type of patient",t)),0===a.length?[]:(n=[{encounter_type:oe.REGISTRATION,status:"unsaved",obs:a}],n)}async buildBirthRegistrationObservations(e){if(!this.hasValidData(e))return null;const t=(await Promise.all([this.buildObservation("How many doses of Tdv did the mother receive?",e["How many doses of Tdv did the mother receive?"]),this.buildObservation("Protected at birth",e["Protected at birth"]),this.buildObservation("HIV status",e["HIV status"])])).filter((e=>null!==e));return t.length>0?t:null}async buildPatientRecord(e,t,a=""){var n,i,o,l,r,d,u,s,c,m,v,p,h;const{personalInformation:f,currentLocation:_,homeLocation:g,birthRegistration:y,guardianInformation:b,socialHistory:I,patientType:w}=e;return{patientID:a||t||"",ID:t||"",NcdID:"",personInformation:{given_name:(null==f?void 0:f.firstname)||"",middle_name:(null==f?void 0:f.middleName)||"",family_name:(null==f?void 0:f.lastname)||"",gender:(null==f?void 0:f.gender)||"",birthdate:null!=f&&f.Estimate?(new He).calculateDoB(null==f?void 0:f.estimation,(null==f?void 0:f.estimation_unit)||"Years"):(null==f?void 0:f.birthdate)||"",birthdate_estimated:null!=f&&f.Estimate?"true":"false",home_region:this.getRegion(null==g||null===(n=g.home_district)||void 0===n?void 0:n.region_id)||"",home_district:(null==g||null===(i=g.home_district)||void 0===i?void 0:i.name)||"",home_traditional_authority:(null==g||null===(o=g.home_traditional_authority)||void 0===o?void 0:o.name)||"",home_village:(null==g||null===(l=g.home_village)||void 0===l?void 0:l.name)||"",current_region:this.getRegion(null==_||null===(r=_.current_district)||void 0===r?void 0:r.region_id)||"",current_district:(null==_||null===(d=_.current_district)||void 0===d?void 0:d.name)||"",current_traditional_authority:(null==_||null===(u=_.current_traditional_authority)||void 0===u?void 0:u.name)||"",current_village:(null==_||null===(s=_.current_village)||void 0===s?void 0:s.name)||"",country:(null==e?void 0:e.country.country.name)||"",landmark:(null==_||null===(c=_.closestLandmark)||void 0===c?void 0:c.name)||"",cell_phone_number:(null===(m=f["Phone Number"])||void 0===m?void 0:m.phoneNumber)||"",occupation:(null==I?void 0:I.occupation)||"",marital_status:(null==I?void 0:I.maritalStatus)||"",religion:(null==I||null===(v=I.religion)||void 0===v?void 0:v.name)||"",education_level:(null==I?void 0:I.highestLevelOfEducation)||""},guardianInformation:this.buildGuardianInfo(b),birthRegistration:await this.buildBirthRegistrationObservations(y),otherPersonInformation:{nationalID:(null==f?void 0:f.nationalID)||"",ichisID:Z.getIchisId()||"",TEI:Z.getTEI()||"",birthID:y["Serial Number"]||"",relationshipID:(null==b||null===(p=b.relationship)||void 0===p?void 0:p.id)||""},vitals:await this.buildVitals(y),vaccineSchedule:await fe(null==f?void 0:f.gender,null==f?void 0:f.birthdate),vaccineAdministration:{orders:[],obs:[],voided:[]},observations:await this.buildARTPatientType(null==w||null===(h=w.facility)||void 0===h?void 0:h.name,null==w?void 0:w.patient_type),appointments:{saved:[],unsaved:[]},saveStatusPersonInformation:"pending",saveStatusGuardianInformation:"pending",saveStatusBirthRegistration:"pending",saveStatusVitals:"pending",date_created:"",creator:"",sync_status:"unsynced"}}}class He extends Z{constructor(){super(),e(this,"patientRecordBuilder",void 0),this.patientRecordBuilder=new Me}async saveRegistrationData(e){const t=await(new Le).getDDEIds();if(!t&&(le("DDE IDs are not available."),Z.getLanConnectionStatus()||Z.getPouchDbStatus()))return!1;let a=await this.patientRecordBuilder.buildPatientRecord(e,t);return 32==Z.getProgramID()&&(a=await(async e=>{const t=Z.getIchisDiagnosis();if(t.length<=0)return e;const a=await Promise.all(t.map((async e=>{var t;const a=(null==e||null===(t=e.value)||void 0===t||null===(t=t.match(/[\d.]+/))||void 0===t?void 0:t[0])||"",n=null==e?void 0:e.date;if("NCD_CV_D_Likelihood of Diabetes"==e.display){var i;const t=null==e||null===(i=e.id)||void 0===i?void 0:i.split("-");return await ie.buildValueNumber("Unspecified Diabetes",a,null,null,n,t[1])}return"NCD_SHD_CV_Client waist circumference"==e.display?await ie.buildValueNumber("Waist circumference",a,null,null,n):"NCD_SHD_CV_Client systolic blood pressure"==e.display?await ie.buildValueNumber("Systolic",a,null,null,n):"NCD_SHD_CV_Client diastolic blood pressure"==e.display?await ie.buildValueNumber("Diastolic",a,null,null,n):void 0})));return e.observations.push({encounter_type:"VITALS",status:"unsaved",obs:a}),e})(a)),!!(await(new Le).possibleDuplicates(a.personInformation))||!!(await re(a))&&(de("Registration successful"),sessionStorage.setItem("ichis_diagnosis",JSON.stringify([])),Z.getPouchDbStatus()&&await(new Le).deleteDDEId(t),await this.printBarcode(),!0)}async updateDemographics(e){let t=await this.patientRecordBuilder.buildPatientRecord(e,Z.getNationalID(),Z.getPatientID());return t.saveStatusPersonInformation="edit",t.saveStatusGuardianInformation="edit",t.saveStatusBirthRegistration="edit",t.saveStatusVitals="edit",!!(await re(t))&&(de("Updated successful"),!0)}checkIfChild(e){if(!(null!=e&&e.estimation||null!=e&&e.birthdate))return{moreThanThirteenYears:!0,underNineMonths:!1,underFiveYears:!1};let t="";return t=e.estimation?this.calculateDoB(e.estimation,e.estimation_unit||"Years")||"":e.birthdate,{moreThanThirteenYears:K.getAgeInYears(t)>13,underNineMonths:K.ageInMonths(t)<9,underFiveYears:K.getAgeInYears(t)<5}}async printBarcode(){"dismiss"!==await te(ye,{class:"small-confirm-modal "})&&(new ue).printData("barcode")}calculateDoB(e,t){try{let a=P(Z.getSessionDate());if("Years"===t&&e<0)a=a.add(Math.abs(e),"years");else switch(t){case"Days":a=a.subtract(e,"days");break;case"Months":a=a.subtract(e,"months");break;case"Years":a=a.subtract(e,"years");break;default:return null}return K.toStandardHisDisplayFormat(a.format("YYYY-MM-DD"))||""}catch(a){return console.error("Error calculating date:",a),null}}}const Ee=(e,t)=>{const a=F((()=>(new He).checkIfChild(e.value).moreThanThirteenYears)),{getRelationships:n}=function(){const e=D([]),t=D([]),a=D([]),n=se();S();const i=F((()=>n.apiStatus)),o=e=>{var n;const i=["Brother","Father","Son","Grandfather","Grandson","Boyfriend","Stepfather","Stepson"],o=["Sister","Mother","Daughter","Grandmother","Granddaughter","Girlfriend","Stepmother","Stepdaughter"],l=["Spouse/Partner","Aunt/Uncle","Niece/Nephew","Doctor","Other","Patient","TB Contact Person","TB Patient","treatment suporter"];(null===(n=t.value)||void 0===n?void 0:n.length)>0&&(a.value=t.value.filter((t=>"M"===e?i.includes(t.a_is_to_b)||l.includes(t.a_is_to_b):"F"===e&&o.includes(t.a_is_to_b)||l.includes(t.a_is_to_b))))};return{relationships:e,relationshipsData:t,filteredRelationships:a,apiStatus:i,getRelationships:async n=>n?(Z.getPouchDbStatus()&&Z.getLanConnectionStatus()?t.value=await Q("relationship"):t.value=await ce.getRelations(),o(n),e.value=e.value=a.value.map((e=>[{name:e.b_is_to_a,id:e.relationship_type_id,trackByID:e.relationship_type_id+e.b_is_to_a}])).reduce(((e,t)=>e.concat(t)),[]),e.value):(o(n),e.value=a.value.map((e=>[{name:e.b_is_to_a,id:e.relationship_type_id,trackByID:e.relationship_type_id+e.b_is_to_a}])).reduce(((e,t)=>e.concat(t)),[]),e.value),filterRelationships:o}}(),i=D();V(e,(async e=>{e&&(i.value=await n(e.gender))}));return{guardianInformation:F((()=>[{componentType:"Heading",name:"Guardian Information",position:"center"},{componentType:"inputField",header:"Guardian National ID",name:"guardianNationalID",placeholder:"__-__-__-__",icon:q.nationalID,validation:e=>U.isMWNationalID(e)},{componentType:"inputField",header:"First name",name:"guardianFirstname",icon:q.fullName,validation:e=>a.value?U.isNameEmpty(e):U.isName(e)},{componentType:"inputField",header:"Middle name",name:"guardianMiddleName",icon:q.fullName,validation:e=>U.isNameEmpty(e)},{componentType:"inputField",header:"Last name",name:"guardianLastname",icon:q.fullName,validation:e=>a.value?U.isNameEmpty(e):U.isName(e)},{componentType:"phoneInputField",name:"guardianPhoneNumber",header:"Phone Number",validation:e=>U.isMWPhoneNumber(e.phoneNumber)},{componentType:"multiSelectInputField",header:"Relationship to patient",name:"relationship",trackBy:"trackByID",icon:q.search,validation:e=>a.value?null:U.required(null==e?void 0:e.name),options:()=>i.value,disabled:()=>!i.value}]))}},Ae=t("b",n({__name:"GuardianInformation",props:{personalInformationFormValues:{}},setup(e,{expose:t}){const{formRef:a,exposeFormMethods:n}=J(),i=e,o=F((()=>i.personalInformationFormValues)),{guardianInformation:l}=Ee(o);return t(n()),(e,t)=>(f(),x($,{formData:k(l),ref_key:"formRef",ref:a},null,8,["formData"]))}})),Oe=t("d",n({__name:"SocialHistory",setup(e,{expose:t}){const{socialHistory:a}=(()=>{const e=D();return me.isProp("military_site=true").then((t=>{e.value=t})),{socialHistory:F((()=>[{componentType:"Heading",name:"Social History",position:"center"},{componentType:"multiSelectInputField",header:"Religion",name:"religion",icon:q.search,trackBy:"id",options:[{id:1,name:"Christianity"},{id:2,name:"Islam"},{id:3,name:"Judaism"},{id:4,name:"Hinduism"},{id:5,name:"Buddhism"},{id:6,name:"Sikhism"},{id:7,name:"Jainism"},{id:8,name:"Bahá'í Faith"},{id:9,name:"Zoroastrianism"},{id:10,name:"Confucianism"},{id:11,name:"Taoism"},{id:12,name:"Shinto"},{id:13,name:"Baha'i Faith"},{id:14,name:"Juche"},{id:15,name:"Rastafari"}]},{componentType:"radioButtonField",header:"Occupation status",name:"occupation",type:"inline",validation:U.required,condition:()=>1==Z.getProgramID()&&e.value,options:[{label:"Military",value:"Military"},{label:"Civilian",value:"Civilian"}]},{componentType:"radioButtonField",header:"Occupation status",name:"occupation",type:"inline",condition:t=>!e,options:[{label:"Employed",value:"employed"},{label:"Student",value:"Student"},{label:"Unemployed",value:"unemployed"},{label:"Other",value:"Other"}]},{componentType:"radioButtonField",header:"Marital status",name:"maritalStatus",type:"inline",options:[{label:"Single",value:"single"},{label:"Married",value:"married"},{label:"Widow",value:"widow"},{label:"Widower",value:"widower"},{label:"Divorced",value:"divorced"}]},{componentType:"radioButtonField",header:"Highest level of education",name:"highestLevelOfEducation",type:"inline",options:[{label:"No education",value:"No education"},{label:"Primary school",value:"primary school"},{label:"Secondary school",value:"secondary school"},{label:"Tertiary education",value:"tertiary education"}]}]))}})(),{formRef:n,exposeFormMethods:i}=J();return t(i()),(e,t)=>(f(),x($,{formData:k(a),ref_key:"formRef",ref:n},null,8,["formData"]))}})),Ye=n({__name:"PatientType",setup(e,{expose:t}){const{patientType:a}=(()=>{const{facilityList:e,getFacilities:t}=he();return t(),{patientType:F((()=>[{componentType:"Heading",name:"Patient Type",position:"center"},{componentType:"radioButtonField",header:"Patient Type",name:"patient_type",type:"inline",validation:U.required,options:[{label:"New patient",value:"New patient"},{label:"Emergency supply",value:"Emergency supply"},{label:"External consultation",value:"External consultation"}]},{componentType:"multiSelectInputField",header:"Facility",name:"facility",trackBy:"facility_id",openDirection:"auto",icon:q.search,validation:e=>U.required(e),options:e.value.facilities||e.value,condition:e=>"Emergency supply"==(null==e?void 0:e.patient_type)||"External consultation"==(null==e?void 0:e.patient_type)}]))}})(),{formRef:n,exposeFormMethods:i}=J();return t(i()),(e,t)=>(f(),x($,{formData:k(a),ref_key:"formRef",ref:n},null,8,["formData"]))}}),Ge=n({__name:"BirthRegistration",setup(e,{expose:t}){const{formRef:a,exposeFormMethods:n}=J(),{birthRegistration:i}=(e=>({birthRegistration:F((()=>[{componentType:"Heading",name:"Birth Registration",position:"center"},{componentType:"inputField",header:"Birth certificate number",name:"Serial Number",icon:q.nationalID,placeholder:"__-__-__-__"},{componentType:"inputField",header:"Birth Weight/First weight (kg)",name:"Weight",icon:q.weight,validation:e=>U.validateWeight(e)},{componentType:"multiSelectInputField",header:"How many doses of Tdv did the mother receive?",name:"How many doses of Tdv did the mother receive?",icon:q.search,options:[{concept_id:11997,name:"0-2 doses, less than two weeks before delivery"},{concept_id:11998,name:"2-5 doses more than two weeks of delivery"},{concept_id:1067,name:"Unknown"}],trackBy:"concept_id",validation:e=>U.required(e),onChange:t=>{const a=null==t?void 0:t.name;"Unknown"==a?e.value.setFormValue("Protected at birth",{concept_id:1067,name:"Don't know"}):"0-2 doses, less than two weeks before delivery"==a?e.value.setFormValue("Protected at birth",{concept_id:1066,name:"No"}):"2-5 doses more than two weeks of delivery"==a&&e.value.setFormValue("Protected at birth",{concept_id:1065,name:"Yes"})}},{componentType:"multiSelectInputField",header:"Protected at birth (PAB)",name:"Protected at birth",icon:q.search,trackBy:"concept_id",validation:e=>U.required(e),disabled:e=>!e["How many doses of Tdv did the mother receive?"]},{componentType:"multiSelectInputField",header:"HIV status of the Child's Mother",name:"HIV status",icon:q.search,options:[{id:703,name:"Positive"},{id:664,name:"Negative"},{id:1067,name:"Unknown"}],trackBy:"id",validation:e=>U.required(e)}]))}))(a);return t(n()),(e,t)=>(f(),x($,{formData:k(i),ref_key:"formRef",ref:a},null,8,["formData"]))}});function je(){const e=D(1),t=D(4),a=ne(),{patient:n}=N(a),i=F((()=>0===t.value?4:Math.ceil(4/t.value))),o=F((()=>i.value>1)),l=F((()=>o.value&&e.value>1)),r=F((()=>o.value&&e.value<i.value)),d=()=>{t.value=(()=>{const e=window.innerWidth;return e>=992?4:e>=768?3:e>=576?2:1})(),e.value>i.value&&(e.value=i.value),0===e.value&&i.value>0&&(e.value=1)};return C((()=>{window.addEventListener("resize",d),d()})),B((()=>{window.removeEventListener("resize",d)})),{currentPage:e,columnsPerRow:t,totalPages:i,showPaginationButtons:o,showPreviousButton:l,showNextButton:r,nextPage:()=>{e.value<i.value&&e.value++},prevPage:()=>{e.value>1&&e.value--},goToPage:t=>{t>=1&&t<=i.value&&(e.value=t)},handleResize:d,isCardVisible:a=>{if(1===i.value)return!0;const n=(e.value-1)*t.value,o=n+t.value-1;return a>=n&&a<=o}}}const qe={key:0,class:"spinner-overlay"},We={class:"header-title"},ze={class:"masonry-grid"},Ue={class:"card-container"},Je={class:"custom-card"},$e={class:"card-container"},Ke={key:0,class:"custom-card"},Ze={key:1,class:"custom-card"},Qe={class:"custom-card card-margin-top"},Xe={key:0,class:"card-container"},et={class:"custom-card"},tt={class:"custom-card card-margin-top"},at={class:"card-container"},nt={class:"custom-card"},it={key:0,class:"custom-card card-margin-top"},ot={class:"footer-content"},lt={class:"footer-buttons-left"},rt={key:0,class:"pagination-dots"},dt=["onClick","aria-label"],ut={class:"footer-buttons-right"},st=n({__name:"Registration",props:{editMode:{type:Boolean,default:!1}},setup(e){const t=D(!1),a=L(),n=D(null),o=D(null),l=D(null),r=D(null),d=D(null),u=D(null),s=D(null),c=D(null),m=D({personalInformationRef:n,birthRegistrationRef:o,socialHistoryRef:l,countryRef:r,currentLocationRef:d,homeLocationRef:u,guardianInformationRef:s,patientTypeRef:c}),p=F((()=>{var e;return(null===(e=n.value)||void 0===e?void 0:e.currentFormValues)||{}})),P=F((()=>{var e;return(null===(e=o.value)||void 0===e?void 0:e.currentFormValues)||{}})),S=F((()=>{var e;return(null===(e=l.value)||void 0===e?void 0:e.currentFormValues)||{}})),V=F((()=>{var e;return(null===(e=r.value)||void 0===e?void 0:e.currentFormValues)||{}})),B=F((()=>{var e;return(null===(e=d.value)||void 0===e?void 0:e.currentFormValues)||{}})),q=F((()=>{var e;return(null===(e=u.value)||void 0===e?void 0:e.currentFormValues)||{}})),W=F((()=>{var e;return(null===(e=s.value)||void 0===e?void 0:e.currentFormValues)||{}})),z=F((()=>{var e;return(null===(e=c.value)||void 0===e?void 0:e.currentFormValues)||{}})),U=F((()=>({personalInformation:p.value,birthRegistration:P.value,socialHistory:S.value,country:V.value,currentLocation:B.value,homeLocation:q.value,guardianInformation:W.value,patientType:z.value}))),J=()=>{const e=Object.values(m.value);return e.forEach((e=>null==e?void 0:e.validateForm())),e.every((e=>null==(null==e?void 0:e.validateForm())))},$=F((()=>(new He).checkIfChild(p.value))),{nextPage:Q,prevPage:X,goToPage:ee,isCardVisible:te,showPreviousButton:ae,showPaginationButtons:ie,totalPages:oe,currentPage:le,showNextButton:re}=je(),{setFormValues:de}=function(){const e=ne(),{patient:t}=N(e),a=e=>{var a,n;const i=null==t||null===(a=t.value)||void 0===a||null===(a=a.guardianInformation)||void 0===a?void 0:a.saved[0],o=null!=i&&null!==(n=i.relationship_type)&&void 0!==n&&n.b_is_to_a?{name:i.relationship_type.b_is_to_a,id:i.relationship_type.relationship_type_id,trackByID:i.relationship_type.relationship_type_id+i.relationship_type.b_is_to_a}:"";null==e||e.setFormValue("guardianNationalID",(null==i?void 0:i.national_id)||""),null==e||e.setFormValue("guardianFirstname",(null==i?void 0:i.given_name)||""),null==e||e.setFormValue("guardianMiddleName",(null==i?void 0:i.middle_name)||""),null==e||e.setFormValue("guardianLastname",(null==i?void 0:i.family_name)||""),null==e||e.setFormValue("guardianPhoneNumber",null!=i&&i.cell_phone_number?null==i?void 0:i.cell_phone_number:""),null==e||e.setFormValue("relationship",o||"")};return{setFormValues:e=>{var n,i;const{personalInformationRef:o,socialHistoryRef:l,countryRef:r,currentLocationRef:d,homeLocationRef:u,guardianInformationRef:s}=e.value,c=null==t||null===(n=t.value)||void 0===n?void 0:n.personInformation;null==o||o.setFormValue("nationalID",null==t||null===(i=t.value)||void 0===i||null===(i=i.otherPersonInformation)||void 0===i?void 0:i.nationalID),null==o||o.setFormValue("firstname",null==c?void 0:c.given_name),null==o||o.setFormValue("middleName",null==c?void 0:c.middle_name),null==o||o.setFormValue("lastname",null==c?void 0:c.family_name),null==o||o.setFormValue("gender",null==c?void 0:c.gender),null==o||o.setFormValue("birthdate",null!=c&&c.birthdate?K.toStandardHisDisplayFormat(null==c?void 0:c.birthdate):""),null==o||o.setFormValue("Phone Number",null!=c&&c.cell_phone_number?null==c?void 0:c.cell_phone_number:""),null==u||u.setFormValue("home_district",{name:null==c?void 0:c.home_district}),null==u||u.setFormValue("home_traditional_authority",{name:null==c?void 0:c.home_traditional_authority}),null==u||u.setFormValue("home_village",{name:null==c?void 0:c.home_village}),null==d||d.setFormValue("current_district",{name:null==c?void 0:c.current_district}),null==d||d.setFormValue("current_traditional_authority",{name:null==c?void 0:c.current_traditional_authority}),null==d||d.setFormValue("current_village",{name:null==c?void 0:c.current_village}),null==d||d.setFormValue("closestLandmark",{name:null==c?void 0:c.landmark}),null==r||r.setFormValue("country",null!=c&&c.country?{name:null==c?void 0:c.country}:{name:"Malawi"}),null==l||l.setFormValue("religion",{name:null==c?void 0:c.religion}),null==l||l.setFormValue("occupation",null==c?void 0:c.occupation),null==l||l.setFormValue("maritalStatus",null==c?void 0:c.marital_status),null==l||l.setFormValue("highestLevelOfEducation",null==c?void 0:c.education_level),a(s)}}}(),ue=async()=>{J()?await(new He).saveRegistrationData(U.value)&&(Object.values(m.value).forEach((e=>null==e?void 0:e.resetForm())),32==Z.getProgramID()?!function(){const e=JSON.parse(localStorage.getItem("userRoles"))||[];return!(!e.some((t=>"General Registration Clerk"===t.role||e.some((t=>"Vitals Clerk"===t.role||e.some((e=>"Registration Clerk"===e.role))))))||32!=Z.getProgramID())}()?se("/NCDEnrollment"):se("/home"):se("/patientProfile")):ve("Please fill in all required fields")},se=e=>{a.push({path:e})};return C((async()=>{de(m)})),(a,m)=>(f(),x(k(M),{class:H({loading:t.value})},{default:b((()=>[t.value?(f(),h("div",qe,[g(k(E),{name:"bubbles"}),m[4]||(m[4]=y("div",{class:"loading-text"},"Please wait...",-1))])):_("",!0),g(k(A),null,{default:b((()=>[y("div",We,T(e.editMode?"Edit Patient Demographic":"New Patient Registration"),1)])),_:1}),g(k(O),null,{default:b((()=>{var t,a;return[y("div",ze,[Y(y("div",Ue,[y("div",Je,[g(xe,{ref_key:"personalInformationRef",ref:n},null,512)])],512),[[G,k(te)(0)]]),Y(y("div",$e,[$.value.underNineMonths&&!e.editMode?(f(),h("div",Ke,[$.value.underNineMonths?(f(),x(Ge,{key:0,ref_key:"birthRegistrationRef",ref:o},null,512)):_("",!0)])):_("",!0),$.value.moreThanThirteenYears?(f(),h("div",Ze,[g(Oe,{ref_key:"socialHistoryRef",ref:l},null,512)])):_("",!0),y("div",Qe,[g(Fe,{ref_key:"countryRef",ref:r},null,512)])],512),[[G,k(te)(1)]]),null!==(t=V.value)&&void 0!==t&&null!==(t=t.country)&&void 0!==t&&t.name&&"Malawi"!==(null===(a=V.value)||void 0===a||null===(a=a.country)||void 0===a?void 0:a.name)?_("",!0):Y((f(),h("div",Xe,[y("div",et,[g(be,{ref_key:"currentLocationRef",ref:d},null,512)]),y("div",tt,[g(De,{currentLocationFormValues:B.value,ref_key:"homeLocationRef",ref:u},null,8,["currentLocationFormValues"])])],512)),[[G,k(te)(2)]]),Y(y("div",at,[y("div",nt,[g(Ae,{personalInformationFormValues:p.value,ref_key:"guardianInformationRef",ref:s},null,8,["personalInformationFormValues"])]),1==k(Z).getProgramID()?(f(),h("div",it,[g(Ye,{ref_key:"patientTypeRef",ref:c},null,512)])):_("",!0)],512),[[G,k(te)(3)]])])]})),_:1}),g(k(j),null,{default:b((()=>[y("div",ot,[y("div",lt,[g(k(i),{color:"danger","aria-label":"Cancel registration",onClick:m[0]||(m[0]=t=>e.editMode?(async()=>{await pe("Do you want to cancel editing of demographics?","",{confirmBtnLabel:"Yes",icon:"",showBackdrop:!0})&&v.dismiss()})():(async()=>{await pe("Do you want to cancel registration?","",{confirmBtnLabel:"Yes",icon:"",showBackdrop:!0})&&se("/home")})())},{default:b((()=>m[5]||(m[5]=[I("Cancel")]))),_:1,__:[5]}),Y(g(k(i),{onClick:m[1]||(m[1]=e=>k(X)()),"aria-label":"Go to previous page"},{default:b((()=>m[6]||(m[6]=[I("Previous")]))),_:1,__:[6]},512),[[G,k(ae)]])]),k(ie)?(f(),h("div",rt,[(f(!0),h(w,null,R(k(oe),(e=>(f(),h("span",{key:e,class:H({dot:!0,active:e===k(le)}),onClick:t=>k(ee)(e),"aria-label":`Go to page ${e}`,role:"button"},null,10,dt)))),128))])):_("",!0),y("div",ut,[Y(g(k(i),{name:"Save",onClick:m[2]||(m[2]=t=>e.editMode?(async()=>{J()?await(new He).updateDemographics(U.value)&&v.dismiss():ve("Please fill in all required fields")})():ue()),"aria-label":"Save patient data"},{default:b((()=>[I(T(e.editMode?"Update":"Save"),1)])),_:1},512),[[G,k(le)===k(oe)]]),Y(g(k(i),{onClick:m[3]||(m[3]=e=>k(Q)()),"aria-label":"Go to next page"},{default:b((()=>m[7]||(m[7]=[I("Next")]))),_:1,__:[7]},512),[[G,k(re)]])])])])),_:1})])),_:1},8,["class"]))}}),ct=t("R",z(st,[["__scopeId","data-v-b2594615"]])),mt=Object.freeze(Object.defineProperty({__proto__:null,default:ct},Symbol.toStringTag,{value:"Module"}));t("e",mt)}}}))}();
