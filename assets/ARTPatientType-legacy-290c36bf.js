System.register(["./vendor-legacy-1abea43d.js","./index-legacy-e977a0fb.js","./patient_type_service-legacy-8b8713f3.js","./lodash-legacy-78c9f2a0.js","./apexcharts-legacy-f287956f.js","./chartjs-legacy-ea69acb1.js","./barcode-qrcode-reader-legacy-b01db620.js"],(function(e,t){"use strict";var a,l,n,i,s,p,r,c,y,o,d,u,g,v,f,T,h,m,b,_,F,x,j,P,w,V,k,L,q,D,S;return{setters:[e=>{a=e.d,l=e.r,n=e.cG,i=e.a,s=e.e,p=e.y,r=e.z,c=e.l,y=e.x,o=e.aJ,d=e.aK,u=e.j,g=e.aL,v=e.A,f=e.bs,T=e.f,h=e.F,m=e.J,b=e.G,_=e.br,F=e.D,x=e.B,j=e.bk,P=e.m,w=e.V,V=e.aI},e=>{k=e.a,L=e.L,q=e.t,D=e.b},e=>{S=e.P},null,null,null,null],execute:function(){const t={key:0,class:"ion-padding"},A={class:"ion-padding"};e("default",a({__name:"ARTPatientType",setup(e){const a=l(!1),C=l([]),G=l([]),I=new k,J=new S(I.getID(),-1),U=n({patientType:null,prevType:null,transerFacility:null});async function z(e=""){try{const t=await L.getFacilities({name:e});G.value=t}catch(t){console.error("Error fetching facilities:",t)}}function B(){var e;if(U.patientType!==U.prevType){if(!U.patientType)return q("Patient type is required");if(!/new patient/i.test(U.patientType)&&U.patientType!==U.prevType&&!U.transerFacility)return q("Facility is required");J.setPatientType(U.patientType),J.setLocationName((null===(e=U.transerFacility)||void 0===e?void 0:e.name)||""),J.save().then((e=>{e?D("Patient type saved successfully"):q("Failed to save patient type")})).catch((e=>q(`Failed to save patient type: ${e}`)))}}return i((()=>{a.value=!0,C.value=S.getPatientTypes(),J.loadPatientType().then((()=>{const e=J.getType();e&&!/n\/a/i.test(e)&&(U.prevType=J.getType(),U.patientType=J.getType())})).finally((()=>{a.value=!1}))})),(e,l)=>(s(),p(y(V),{style:{height:"65vh"}},{default:r((()=>[c(y(o),null,{default:r((()=>[c(y(d),null,{default:r((()=>l[2]||(l[2]=[u("span",{class:"ion-text-center"},[u("h3",null," Patient type")],-1),u("hr",{style:{"border-top":"1px dashed #0c0c0c","margin-top":"10px"}},null,-1)]))),_:1,__:[2]})])),_:1}),c(y(g),null,{default:r((()=>[u("div",null,[l[3]||(l[3]=u("h2",{style:{"font-weight":"bold",margin:"12px"}},[v("Patient Type "),u("span",{style:{color:"red"}},"*")],-1)),c(y(f),{modelValue:U.patientType,"onUpdate:modelValue":l[0]||(l[0]=e=>U.patientType=e)},{default:r((()=>[(s(!0),T(h,null,m(C.value,((e,t)=>(s(),p(y(b),{key:t},{default:r((()=>[c(y(_),{slot:"start",value:e.value},null,8,["value"]),c(y(F),{style:{margin:"10px"}},{default:r((()=>[v(x(e.label),1)])),_:2},1024)])),_:2},1024)))),128))])),_:1},8,["modelValue"])]),U.prevType===U.patientType||/new patient/i.test(U.patientType)?P("",!0):(s(),T("div",t,[l[4]||(l[4]=u("h2",{style:{"font-weight":"bold",margin:"12px"}},[v("Facility "),u("span",{style:{color:"red"}},"*")],-1)),c(y(j),{modelValue:U.transerFacility,"onUpdate:modelValue":l[1]||(l[1]=e=>U.transerFacility=e),multiple:!1,taggable:!1,"hide-selected":!0,"close-on-select":!0,openDirection:"bottom",onSearchChange:z,"tag-placeholder":"Find and select facility",placeholder:"Find and select facility",selectLabel:"",label:"name",searchable:!0,"track-by":"code",options:G.value},null,8,["modelValue","options"])])),u("div",A,[c(y(w),{disabled:a.value,onClick:B},{default:r((()=>l[5]||(l[5]=[v("Submit")]))),_:1,__:[5]},8,["disabled"])])])),_:1})])),_:1}))}}))}}}));
