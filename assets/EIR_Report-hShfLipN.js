import{d as w,al as F,ab as D,ac as E,cx as L,cy as z,au as k,ao as M,er as A,es as U,E as l,e as T,f as u,l as s,k as o,z as d,p as r,F as b,L as O,B as _,A as v,i as I,bo as P,y as J}from"./vendor-DowD5zKn.js";import{N}from"./NavigationMenu-Dks32ZGL.js";import{P as R,A as j}from"./AEFIReportTemplate-4eIw8cbB.js";import{e as q,f as G,h as H}from"./vaccines_service-6yOEotAP.js";import{E as S}from"./EIRreportsStore-CKI_NPUw.js";import{P as $,u as K,g as Q,_ as x}from"./index-Cu2JEMub.js";import"./lodash-Dt8AsbQm.js";import"./bottomNavBar-XsEvZAX1.js";import"./app_encounter_service-DUFQOcer.js";import"./sms_service-BTPCQOSz.js";import"./appointment_service-gS0OmJln.js";import"./Export-C32oJASq.js";const W=w({name:"TableComponent",components:{IonContent:M,IonPage:k,IonFab:z,IonFabButton:L,NavigationMenu:N,IonRow:E,IonCol:D,PersonCardComponent:R},data(){return{selectedSection:"",selectedColumn:"",tableData:[],fileTray:U,downloadOutline:A,exportReportToCSV:H,peopleArray:[{id:1,firstName:"John",lastName:"Doe",age:30,dob:"1993-05-15",sex:"Male"},{id:2,firstName:"Jane",lastName:"Smith",age:28,dob:"1995-09-22",sex:"Female"}]}},watch:{$route:{async handler(e){e.name=="EIRReport"&&await this.getDrugs(),await this.initReport()},deep:!0}},computed:{...F(S,["start_date","end_date","navigationPayload"])},async mounted(){await this.getDrugs(),await this.initReport()},methods:{selectSection(e){this.selectedSection=e,this.selectedColumn=""},selectColumn(e){this.selectedColumn=e,this.selectedSection=""},async initReport(){const e=await G(this.start_date,this.end_date);e.less_than_one_year.forEach(t=>{this.fillCells(t,"lessThan1y")}),e.greater_than_one_year.forEach(t=>{this.fillCells(t,"moreThan1y")})},fillCells(e,t){this.tableData.forEach(a=>{if(a.drug.name==e.value_text&&t in a.fixed){let i=t+"Persons",c=a.fixed[t];a.fixed[t]=c+1,a.fixed[i].push(e)}})},async getDrugs(){const e=await q(),t=[];e.forEach(i=>{const c={label:i.name,fixed:{lessThan1y:0,moreThan1y:0,lessThan1yPersons:[],moreThan1yPersons:[]},outreach:{lessThan1y:0,moreThan1y:0},drug:i};t.push(c)}),this.tableData=t,S().setImmunizationMonthlyRepoartData(this.tableData)},openPersonCardComponent(e){console.log(e);const t=i=>{this.openPatientProfile(i.detail.client_id)},a={people:e,headingText:"Immunization (Client Drill Down | ".concat(this.navigationPayload.subTxt,")")};Q(R,{class:"large-modal"},!0,a,{"view-client":t})},async openPatientProfile(e){(await $.findByID(e)).patient_identifiers.forEach(async a=>{if(a.identifier_type==3){const i=await $.findByNpid(a.identifier);await K().setPatientRecord(i[0]),this.$router.push("patientProfile")}})}}}),X={class:"custom-table"},Y=["onUpdate:modelValue"],Z=["onUpdate:modelValue"];function ee(e,t,a,i,c,V){const m=l("ion-col"),h=l("ion-row"),f=l("ion-icon"),y=l("ion-fab-button"),C=l("ion-fab"),g=l("pan");return u(),T(b,null,[s(h,null,{default:d(()=>[s(m,null,{default:d(()=>t[6]||(t[6]=[o("h1",{style:{width:"100%","text-align":"left","font-weight":"400"}},"Immunization",-1)])),_:1,__:[6]})]),_:1}),s(C,{slot:"fixed",horizontal:"end",vertical:"top",onClick:e.exportReportToCSV},{default:d(()=>[s(y,null,{default:d(()=>[s(f,{icon:e.downloadOutline},null,8,["icon"])]),_:1})]),_:1},8,["onClick"]),o("table",X,[t[9]||(t[9]=o("colgroup",null,[o("col",{style:{width:"20%"}}),o("col",{style:{width:"20%"}}),o("col",{style:{width:"20%"}}),o("col",{style:{width:"20%"}}),o("col",{style:{width:"20%"}})],-1)),o("thead",null,[o("tr",null,[t[7]||(t[7]=o("th",null,null,-1)),o("th",{colspan:"2",onClick:t[0]||(t[0]=n=>e.selectSection("fixed")),class:r({selected:e.selectedSection==="fixed"})},"Static",2),o("th",{colspan:"2",onClick:t[1]||(t[1]=n=>e.selectSection("outreach")),class:r({selected:e.selectedSection==="outreach"})},"Outreach",2)]),o("tr",null,[t[8]||(t[8]=o("th",null,null,-1)),o("th",{onClick:t[2]||(t[2]=n=>e.selectColumn("fixedLessThan1y")),class:r({selected:e.selectedColumn==="fixedLessThan1y"})},"<1y",2),o("th",{onClick:t[3]||(t[3]=n=>e.selectColumn("fixedMoreThan1y")),class:r({selected:e.selectedColumn==="fixedMoreThan1y"})},">1y",2),o("th",{onClick:t[4]||(t[4]=n=>e.selectColumn("outreachLessThan1y")),class:r({selected:e.selectedColumn==="outreachLessThan1y"})},"<1y",2),o("th",{onClick:t[5]||(t[5]=n=>e.selectColumn("outreachMoreThan1y")),class:r({selected:e.selectedColumn==="outreachMoreThan1y"})},">1y",2)])]),o("tbody",null,[(u(!0),T(b,null,O(e.tableData,(n,B)=>(u(),T("tr",{key:B},[o("td",null,_(n.label),1),o("td",{class:r({selected:e.selectedSection==="fixed"||e.selectedColumn==="fixedLessThan1y"})},[s(g,{onClick:p=>e.openPersonCardComponent(n.fixed.lessThan1yPersons)},{default:d(()=>[v(_(n.fixed.lessThan1y),1)]),_:2},1032,["onClick"])],2),o("td",{class:r({selected:e.selectedSection==="fixed"||e.selectedColumn==="fixedMoreThan1y"})},[s(g,{onClick:p=>e.openPersonCardComponent(n.fixed.moreThan1yPersons)},{default:d(()=>[v(_(n.fixed.moreThan1y),1)]),_:2},1032,["onClick"])],2),o("td",{class:r({selected:e.selectedSection==="outreach"||e.selectedColumn==="outreachLessThan1y"})},[I(o("input",{"onUpdate:modelValue":p=>n.outreach.lessThan1y=p,class:"editable-input"},null,8,Y),[[P,n.outreach.lessThan1y]])],2),o("td",{class:r({selected:e.selectedSection==="outreach"||e.selectedColumn==="outreachMoreThan1y"})},[I(o("input",{"onUpdate:modelValue":p=>n.outreach.moreThan1y=p,class:"editable-input"},null,8,Z),[[P,n.outreach.moreThan1y]])],2)]))),128))])])],64)}const te=x(W,[["render",ee],["__scopeId","data-v-5b5a0e38"]]),oe=w({name:"TableComponent",components:{IonContent:M,IonPage:k,NavigationMenu:N,AEFIReportTemplate:j,EIR_Report_Template:te,IonRow:E,IonCol:D},data(){return{}},watch:{},computed:{},async mounted(){},methods:{}});function ne(e,t,a,i,c,V){const m=l("NavigationMenu"),h=l("EIR_Report_Template"),f=l("AEFIReportTemplate"),y=l("ion-content"),C=l("ion-page");return u(),J(C,null,{default:d(()=>[s(m),s(y,{class:"ion-padding"},{default:d(()=>[s(h),s(f)]),_:1})]),_:1})}const ye=x(oe,[["render",ne],["__scopeId","data-v-caf79033"]]);export{ye as default};
