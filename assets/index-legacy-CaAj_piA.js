System.register(["./index-legacy-CAqY44sk.js","./vendor-legacy-PwJwfeg2.js","./lodash-legacy-C-x9g9Na.js"],(function(t,e){"use strict";var l,a,i,n,d,o,s,r,u,c,v,p,g,b,m,_,h,f,y,w,x,S,I,T,C,D,P,L,k,O,A,z,E,N,U,j;return{setters:[t=>{l=t.a4,a=t.ah,i=t.ai,n=t.aj,d=t.S,o=t.ak,s=t.al,r=t.t,u=t._,c=t.am,v=t.P},t=>{p=t.aG,g=t.r,b=t.bA,m=t.X,_=t.d,h=t.c,f=t.a,y=t.e,w=t.f,x=t.k,S=t.j,I=t.m,T=t.d1,C=t.ds,D=t.dt,P=t.y,L=t.z,k=t.B,O=t.A,A=t.u,z=t.F,E=t.L,N=t.du,U=t.dv},t=>{j=t.l}],execute:function(){var e=document.createElement("style");e.textContent=".label-canvas[data-v-d8afb20c]{position:absolute;left:-9999px;top:-9999px;font-family:Verdana,Geneva,Tahoma,sans-serif!important;overflow:hidden;max-width:4496px}#img-canvas[data-v-d8afb20c]{padding:0;margin:0 auto;overflow:hidden}svg[data-v-d8afb20c]{width:50%}#container[data-v-34a856c3]{width:1078px;font-size:58px;overflow:hidden}ul[data-v-34a856c3],ol[data-v-34a856c3]{list-style-type:none;padding-left:0;margin:0}#container[data-v-56ecfb68]{font-size:44px;overflow:hidden}.label[data-v-56ecfb68]{overflow:hidden}.row[data-v-56ecfb68]{display:flex;justify-content:space-between}#container[data-v-2829f777]{max-width:578px;max-height:316px;font-size:30px;font-weight:700;overflow:hidden}\n/*$vite$:1*/",document.head.appendChild(e),t({a:function(t){H(ct,{lblUrl:`programs/${v.getProgramID()}/patients/${t}/labels/patient_history`})},b:function(t,e=v.getSessionDate()){H(tt,{copies:2,lblUrl:`programs/${v.getProgramID()}/patients/${t}/labels/visits?date=${e}`})},p:async function(t,e=!1){return H(_t,{scaleHeight:280,useImage:!1,lblUrl:`patients/${t}/labels/national_health_id?qr_code=${e}`})}});const B=g(!1);function $(){b.getTop().then((t=>t?b.dismiss():null))}async function H(t,e){const u=await async function(){const t=new l;let e=await t.getDefaultPrinter();if(j.isEmpty(e)&&(e=await t.selectDefaultPrinter()),j.isEmpty(e))throw new Error("No printer device found");return e}();return/Browser/i.test(u.address)||"BT"===u.port?async function(t,e){const r=a.updateUrlParamString(e,{raw:!0});i.emit(n.SHOW_MODAL,"zebra-modal");const u=await d.getText(r);if(!u)throw"Unable to print Label. Try again later";if("BT"===(null==t?void 0:t.port))return(new l).printToBluetoothDevice(t,u);p.printLabel({eplCommands:u,name:t.name,address:t.address,url:await o.expandPath(r)}),await s(2e3)}(u,e.lblUrl):async function(t,e,i){if(B.value)return;B.value=!0;let n={};const d=await b.create({message:"Processing label...",backdropDismiss:!1});await d.present();try{var o,s,u;if("function"==typeof i.onGenerateProps)n=await i.onGenerateProps();else{if("string"!=typeof i.lblUrl)return B.value=!1,console.error("No generation parameters provided"),r("No label generation parameters specified!"),void $();n=await l.getJson(a.removeParams(i.lblUrl),a.extractParams(i.lblUrl))}$();const d=await m.create({id:"printout",component:e,backdropDismiss:!1,cssClass:"small-modal",componentProps:{...null!==(o=null===(s=n)||void 0===s?void 0:s.data)&&void 0!==o?o:n}});await d.present();const{data:b}=await d.onWillDismiss(),_=null!==(u=i.copies)&&void 0!==u?u:1;for(let e=0;e<_;++e){var c,v,g;await p.printLabel({address:t.address,name:t.name,eplCommands:null!==(c=n.zpl)&&void 0!==c?c:"",height:null!==(v=i.scaleHeight)&&void 0!==v?v:0,width:null!==(g=i.scaleWidth)&&void 0!==g?g:562,image:b.generatedLabelImage&&!1!==i.useImage?b.generatedLabelImage:void 0})}B.value=!1}catch(_){B.value=!1,console.error(_),$(),m.getTop().then((t=>t?m.dismiss():null)),r("An error occurred while generating label")}}(u,t,e)}const G=["id"],M={id:"img-canvas"},q={key:0,class:"print-section ion-text-center vertically-align"},R=["id"],V=u(_({__name:"PrintLabel",props:{id:String,width:Number,height:Number},emits:["labelOutput"],setup(t,{emit:e}){const l=e,a=t,i=g(!1),n=h((()=>`${a.id}${(new Date).toISOString()}`));return f((()=>setTimeout((()=>function(){const t=document.getElementById(n.value);t&&C(t,{scale:7,backgroundColor:"#ffffff"}).then((function(t){try{const e=t.toDataURL("image/png");document.getElementById(`${[n.value]}-image`).src=e,i.value=!0,l("labelOutput",e),s(50).then((()=>D.dismiss({generatedLabelImage:e},void 0,"printout")))}catch(e){console.error(e)}}))}()),80))),(t,e)=>(w(),y("div",null,[x("div",{id:n.value,class:"label-canvas"},[S(t.$slots,"default",{},void 0,!0)],8,G),x("div",M,[i.value?I("",!0):(w(),y("div",q,e[0]||(e[0]=[T('<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 1000 1000" enable-background="new 0 0 1000 1000" xml:space="preserve" data-v-d8afb20c><metadata data-v-d8afb20c> Svg Vector Icons : http://www.onlinewebfonts.com/icon </metadata><g data-v-d8afb20c><g transform="translate(0.000000,511.000000) scale(0.100000,-0.100000)" data-v-d8afb20c><path d="M2918.3,4119.3c-303-51.3-610.8-284.4-753-568.8c-102.6-212.1-125.9-359-125.9-822.9v-380h-533.8c-575.8,0-720.3-16.3-899.8-104.9c-237.8-116.6-454.6-410.3-491.9-669l-14-109.6l258.8-128.2l258.8-130.5H5000h4382.5l258.7,130.5l258.8,128.2l-14,109.6c-37.3,261.1-247.1,550.1-487.2,666.7c-184.2,90.9-324,107.2-904.5,107.2h-533.8v380c0,463.9-23.3,610.8-125.9,822.9c-142.2,286.7-435.9,508.2-757.6,568.8C6927.8,4147.2,3088.5,4147.2,2918.3,4119.3z M7158.6,3776.6c79.3-25.6,156.2-81.6,256.4-179.5c216.8-216.8,219.1-230.8,219.1-1102.6v-729.6H5000H2365.8v729.6c0,871.8,2.3,885.8,219.1,1102.6c233.1,230.8,51.3,214.5,2405.7,216.8C6850.9,3816.2,7053.7,3811.5,7158.6,3776.6z" data-v-d8afb20c></path><path d="M109.3-267.9l7-1382.3l74.6-153.8c90.9-184.2,258.7-349.7,445.2-435.9c130.5-60.6,146.9-62.9,692.3-74.6l559.5-11.7l14-338c11.7-275.1,23.3-361.3,65.3-466.2c163.2-401,484.9-671.4,909.1-757.6c146.9-32.6,452.2-35,2202.9-30.3c2030.4,7,2030.4,7,2184.3,58.3c363.7,123.5,643.4,396.3,773.9,752.9c37.3,95.6,51.3,209.8,60.6,454.6l14,326.4l559.5,11.7l561.8,11.7l153.9,76.9c191.2,93.2,366,277.4,442.9,466.2l53.6,132.9l7,1370.7l7,1370.7l-209.8-107.2l-212.1-104.9H5000H524.3l-212.1,104.9l-209.8,107.2L109.3-267.9z M1107,121.4c207.5-107.2,167.8-435.9-60.6-498.9c-104.9-28-186.5-7-263.4,69.9C701.4-225.9,678.1-121,720.1-20.8C785.4,137.7,955.5,200.7,1107,121.4z M7487.3-368.1c139.9-42,223.8-128.2,268.1-275.1c23.3-72.3,30.3-370.7,30.3-1181.9c0-1079.3,0-1084-53.6-1216.8c-76.9-188.8-251.8-373-442.9-466.2l-156.2-76.9H5000H2867l-156.2,76.9c-191.1,93.2-366,277.4-442.9,466.2c-53.6,130.6-53.6,149.2-60.6,1135.3c-7,1046.7,4.7,1244.8,88.6,1382.3c51.3,86.3,135.2,144.5,240.1,167.8c39.6,11.7,1144.6,18.7,2454.7,21C7053.7-333.2,7384.7-337.8,7487.3-368.1z M1125.7-766.7c65.3-44.3,121.2-151.5,121.2-230.8c0-79.3-55.9-186.5-121.2-230.8c-67.6-48.9-216.8-46.6-298.4,2.4c-172.5,100.2-167.8,368.3,4.7,466.2C906.6-720.1,1062.8-722.5,1125.7-766.7z" data-v-d8afb20c></path><path d="M3149.1-927.6c-60.6-62.9-67.6-130.5-18.7-195.8l44.3-60.6h1708.7h1708.7l44.3,60.6c48.9,65.3,42,132.9-18.7,195.8c-32.6,30.3-251.8,35-1734.4,35C3400.9-892.6,3181.7-897.3,3149.1-927.6z" data-v-d8afb20c></path><path d="M3149.1-1860c-60.6-62.9-67.6-130.5-18.7-195.8l44.3-60.6h1708.7h1708.7l44.3,60.6c48.9,65.3,42,132.9-18.7,195.8c-32.6,30.3-251.8,35-1734.4,35C3400.9-1825.1,3181.7-1829.7,3149.1-1860z" data-v-d8afb20c></path><path d="M3149.1-2792.5c-60.6-62.9-67.6-130.5-18.7-195.8l44.3-60.6h1708.7h1708.7l44.3,60.6c48.9,65.3,42,132.9-18.7,195.8c-32.6,30.3-251.8,35-1734.4,35C3400.9-2757.5,3181.7-2762.2,3149.1-2792.5z" data-v-d8afb20c></path></g></g></svg>',1)]))),x("img",{src:"",id:`${n.value}-image`},null,8,R)])]))}}),[["__scopeId","data-v-d8afb20c"]]),F={id:"container"},Q={style:{display:"flex","justify-content":"space-between",width:"100%"}},W={style:{background:"black","font-weight":"bold",color:"white",padding:"1.7px"}},J={style:{width:"100%"}},K={style:{display:"flex","justify-content":"space-between",width:"100%"}},X={style:{display:"flex","justify-content":"space-between","border-bottom":"3px solid black",width:"100%"}},Y={style:{width:"100%","text-align":"center"}},Z={style:{"text-align":"right"}},tt=u(_({__name:"ArtVisitLbl",props:{visit_by:{type:String},date:{type:String},arv_number:{type:String},patient_details:{type:String},height:{type:String},weight:{type:String},bmi:{type:String},viral_load:{type:String},outcome_date:{type:String},outcome:{type:String},next_appointment_date:{type:String},seen_by:{type:String},se:{type:String},tb_status:{type:String},adherence:{type:String},drugs:{type:Object}},emits:["label-out"],setup(t,{emit:e}){const l=e;return(e,a)=>(w(),P(V,{id:"visit-summary",onLabelOutput:a[0]||(a[0]=t=>l("label-out",t))},{default:L((()=>{var e,l;return[x("div",F,[x("div",Q,[x("span",null,[x("b",null,k(t.date),1)]),x("span",null,"("+k(null!==(e=t.visit_by)&&void 0!==e?e:"??")+")",1),x("span",W,k(t.arv_number),1)]),x("div",J,[x("span",null,[x("b",null,k(t.patient_details),1)]),a[1]||(a[1]=x("span",null,[x("b",null," :Patient visit")],-1))]),x("div",K,[x("span",null,k(t.weight)+"kg",1),x("span",null,k(t.height)+"cm",1),x("span",null,[a[2]||(a[2]=x("b",null,"BMI:",-1)),O(k(t.bmi),1)]),x("span",null,[a[3]||(a[3]=x("b",null,"VL:",-1)),O(k(t.viral_load),1)])]),x("div",X,[x("span",null,[a[4]||(a[4]=x("b",null,"OUTC:",-1)),O(k(t.outcome)+" ",1)]),x("span",null,k(A(c)(null!==(l=t.outcome_date)&&void 0!==l?l:"")),1)]),x("table",Y,[a[6]||(a[6]=x("thead",null,[x("tr",null,[x("th",null,"SE"),x("th",null,"TB"),x("th",null,"Adh"),x("th",null,"DRUG(S) Given")])],-1)),x("tbody",null,[x("tr",null,[a[5]||(a[5]=x("td",null,null,-1)),x("td",null,k(t.tb_status),1),x("td",null,k(t.adherence),1),x("td",null,[x("ul",null,[(w(!0),y(z,null,E(t.drugs,((t,e)=>(w(),y("li",{key:e},k(t),1)))),128))])])])])]),a[7]||(a[7]=x("p",null,null,-1)),x("div",Z,[x("div",null,[x("div",null,"Next: "+k(t.next_appointment_date),1),x("div",null,k(t.seen_by),1)])])])]})),_:1}))}}),[["__scopeId","data-v-34a856c3"]]),et={id:"container"},lt={class:"label"},at={style:{"font-weight":"600"},class:"row"},it={style:{"margin-top":"2%"}},nt={style:{"max-height":"316px",overflow:"hidden"}},dt={class:"row"},ot={class:"row"},st={class:"row"},rt={class:"row"},ut={style:{"margin-top":"14px"}},ct=u(_({__name:"PatientDemographicLbl",props:{arv_number:{type:String},patient_details:{type:Object},art_initiation_status:{type:Object}},emits:["label-out"],setup(t,{emit:e}){const l=e;return(e,a)=>(w(),P(V,{id:"art_demographics",onLabelOutput:a[0]||(a[0]=t=>l("label-out",t))},{default:L((()=>{var e,l,i,n,d,o,s,r,u,c,v,p,g,b,m,_,h,f,y,w,S,I;return[x("div",et,[x("div",lt,[x("div",at,[a[1]||(a[1]=x("div",null,"PATIENT DETAILS",-1)),x("div",null,k(t.arv_number),1)]),x("div",null,[x("div",null,"Name: "+k(null===(e=t.patient_details)||void 0===e?void 0:e.name),1),x("div",null,"DOB: "+k(null===(l=t.patient_details)||void 0===l?void 0:l.dob),1),x("div",null,"Phone: "+k(null===(i=t.patient_details)||void 0===i?void 0:i.phone),1),x("div",null,"Addr: "+k(null===(n=t.patient_details)||void 0===n?void 0:n.address),1),x("div",null,"Guard: "+k(null===(d=t.patient_details)||void 0===d?void 0:d.guardian),1),x("div",it,[x("div",null,"TI: "+k(null===(o=t.patient_details)||void 0===o?void 0:o.transfer_in),1),x("div",null,"FUP: "+k(null===(s=t.patient_details)||void 0===s?void 0:s.agrees_to_followup),1)])])]),a[13]||(a[13]=x("div",{style:{margin:"150px"}},null,-1)),x("div",nt,[x("div",dt,[a[2]||(a[2]=x("div",null,[x("b",null,"STATUS AT ART INITIATION")],-1)),x("div",null,"(DSA: "+k(null===(r=t.art_initiation_status)||void 0===r?void 0:r.art_start_date)+")",1),x("div",null,[x("b",null,k(t.arv_number),1)])]),x("div",ot,[x("div",null,[a[3]||(a[3]=x("b",null,"RFS: ",-1)),O(k(null===(u=t.art_initiation_status)||void 0===u?void 0:u.reason_for_art_eligibility),1)]),x("div",null,[a[4]||(a[4]=x("b",null,"TB: ",-1)),O(k(null===(c=t.art_initiation_status)||void 0===c?void 0:c.tb_status),1)]),x("div",null,[a[5]||(a[5]=x("b",null,"HEIGHT: ",-1)),O(k(null===(v=t.art_initiation_status)||void 0===v?void 0:v.initial_height),1)])]),x("div",st,[x("div",null,[a[6]||(a[6]=x("b",null,"KS: ",-1)),O(k(null===(p=t.art_initiation_status)||void 0===p?void 0:p.ks_status),1)]),x("div",null,[a[7]||(a[7]=x("b",null,"WEIGHT: ",-1)),O(k(null===(g=t.art_initiation_status)||void 0===g?void 0:g.initial_weight),1)])]),x("div",rt,[x("div",null,[a[8]||(a[8]=x("b",null,"1st + Test:",-1)),O(" "+k(null===(b=t.art_initiation_status)||void 0===b?void 0:b.hiv_test_date),1)]),x("div",null,[a[9]||(a[9]=x("b",null,"Preg: ",-1)),O(k(null===(m=t.art_initiation_status)||void 0===m?void 0:m.pregnant),1)]),x("div",null,[a[10]||(a[10]=x("b",null,"Init Age: ",-1)),O(k(null===(_=t.art_initiation_status)||void 0===_?void 0:_.age_at_initiation),1)])]),a[11]||(a[11]=x("div",{style:{"border-top":"3px solid black",width:"100%"}},null,-1)),a[12]||(a[12]=x("div",{style:{"font-weight":"bold",display:"flex","justify-content":"right"}}," STAGE DEFINING CONDITIONS ",-1)),x("div",ut,k([...null!==(h=null===(f=t.art_initiation_status)||void 0===f?void 0:f.first_line_drugs)&&void 0!==h?h:[],...null!==(y=null===(w=t.art_initiation_status)||void 0===w?void 0:w.alt_first_line_drugs)&&void 0!==y?y:[],...null!==(S=null===(I=t.art_initiation_status)||void 0===I?void 0:I.second_line_drugs)&&void 0!==S?S:[]].join(",")),1)])])]})),_:1}))}}),[["__scopeId","data-v-56ecfb68"]]),vt={id:"container"},pt={key:0},gt={key:1},bt={style:{display:"flex","align-items":"center"}},mt=_({__name:"NpidLbl",props:{name:{type:String,default:"??"},national_id:{type:String,required:!0,default:"??"},birthdate:{type:String,default:"??"},sex:{type:String,gender:"??"},address:{type:String,default:"??"},useQrCode:{type:Boolean},qr:{type:String}},emits:["label-out"],setup(t,{emit:e}){const l=e,a=t;return f((()=>{if(a.useQrCode){const t=document.getElementById("patient-qrcode");t&&a.qr&&U.toCanvas(t,a.qr,{width:160},(t=>{t&&(console.log(t),r("Unable to generate QR code"))}))}else N("#patient-barcode",a.national_id,{height:56,width:2,displayValue:!1,format:"CODE128"})})),(e,a)=>(w(),P(V,{id:"npid-label",onLabelOutput:a[0]||(a[0]=t=>l("label-out",t))},{default:L((()=>[x("div",vt,[t.useQrCode?(w(),y("div",gt,[x("div",null,[x("div",bt,[a[2]||(a[2]=x("div",null,[x("canvas",{id:"patient-qrcode"})],-1)),x("div",null,[x("div",null,k(t.name),1),x("div",null,k(t.national_id),1),x("div",null,k(t.birthdate),1),x("div",null,k(t.sex),1),x("div",null,k(t.address),1)])])])])):(w(),y("div",pt,[x("div",null,[x("div",null,[x("div",null,k(t.name),1),x("div",null,k(t.national_id)+" "+k(t.birthdate)+" "+k(t.sex),1),x("div",null,k(t.address),1)]),a[1]||(a[1]=x("svg",{id:"patient-barcode"},null,-1))])]))])])),_:1}))}}),_t=u(mt,[["__scopeId","data-v-2829f777"]])}}}));
