System.register(["./vendor-legacy-COMGl7lq.js","./index-legacy-D8VDxbcK.js","./patient_type_service-legacy-dQstRKH5.js"],(function(e,t){"use strict";var a,l,n,i,p,r,s,y,o,c,u,d,v,T,g,f,m,h,F,_,b,w,P,x,V,k,L,j;return{setters:[e=>{a=e.d,l=e.r,n=e.c_,i=e.a,p=e.y,r=e.f,s=e.z,y=e.l,o=e.u,c=e.ad,u=e.k,d=e.e,v=e.m,T=e.A,g=e.aw,f=e.F,m=e.L,h=e.G,F=e.ax,_=e.D,b=e.B,w=e.av,P=e.ag},e=>{x=e.P,V=e.L,k=e.t,L=e.k},e=>{j=e.P}],execute:function(){const t={key:0,class:"ion-padding"};e("_",a({__name:"ARTPatientType",setup(e,{expose:a}){const D=l(!1),S=l([]),q=l([]),A=new x,U=new j(A.getID(),-1),z=n({patientType:null,prevType:null,transerFacility:null});async function B(e=""){try{const t=await V.getFacilities({name:e});q.value=t}catch(t){console.error("Error fetching facilities:",t)}}return i((()=>{D.value=!0,S.value=j.getPatientTypes(),U.loadPatientType().then((()=>{const e=U.getType();e&&!/n\/a/i.test(e)&&(z.prevType=U.getType(),z.patientType=U.getType())})).finally((()=>{D.value=!1}))})),a({onSubmit:async function(){var e;if(z.patientType===z.prevType)return!0;if(!z.patientType)return k("Patient type is required"),!1;if(!/new patient/i.test(z.patientType)&&z.patientType!==z.prevType&&!z.transerFacility)return k("Facility is required"),!1;U.setPatientType(z.patientType),U.setLocationName((null===(e=z.transerFacility)||void 0===e?void 0:e.name)||"");try{return await U.save()?(L("Patient type saved successfully"),!0):(k("Failed to save patient type"),!1)}catch(t){return k(`Failed to save patient type: ${t}`),!1}}}),(e,a)=>(r(),p(o(P),{style:{height:"65vh"}},{default:s((()=>[y(o(c),null,{default:s((()=>[u("div",null,[a[2]||(a[2]=u("h2",{style:{"font-weight":"bold",margin:"12px"}},[T("Patient Type "),u("span",{style:{color:"red"}},"*")],-1)),y(o(g),{modelValue:z.patientType,"onUpdate:modelValue":a[0]||(a[0]=e=>z.patientType=e)},{default:s((()=>[(r(!0),d(f,null,m(S.value,((e,t)=>(r(),p(o(h),{key:t},{default:s((()=>[y(o(F),{slot:"start",value:e.value},null,8,["value"]),y(o(_),{style:{margin:"10px"}},{default:s((()=>[T(b(e.label),1)])),_:2},1024)])),_:2},1024)))),128))])),_:1},8,["modelValue"])]),z.prevType===z.patientType||/new patient/i.test(z.patientType)?v("",!0):(r(),d("div",t,[a[3]||(a[3]=u("h2",{style:{"font-weight":"bold",margin:"12px"}},[T("Facility "),u("span",{style:{color:"red"}},"*")],-1)),y(o(w),{modelValue:z.transerFacility,"onUpdate:modelValue":a[1]||(a[1]=e=>z.transerFacility=e),multiple:!1,taggable:!1,"hide-selected":!0,"close-on-select":!0,openDirection:"bottom",onSearchChange:B,"tag-placeholder":"Find and select facility",placeholder:"Find and select facility",selectLabel:"",label:"name",searchable:!0,"track-by":"code",options:q.value},null,8,["modelValue","options"])]))])),_:1})])),_:1}))}}))}}}));
