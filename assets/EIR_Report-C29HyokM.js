import{d as $,ar as F,ab as D,aa as k,cw as L,cx as z,af as E,a9 as M,ek as A,el as U,E as l,e as T,f as m,l as s,k as n,z as d,p as r,F as b,L as O,B as _,A as v,i as I,bk as P,y as J}from"./vendor--FxeD1z3.js";import{N}from"./NavigationMenu-DPo7mfI3.js";import{P as R,A as j}from"./AEFIReportTemplate-CEQ9rfmW.js";import{e as q,f as G,h as H}from"./vaccines_service-m9mjNCeL.js";import{E as w}from"./EIRreportsStore-B7hgyKPS.js";import{P as S,u as K,f as Q,_ as x}from"./index-HMs23-uU.js";import"./lodash-Dt8AsbQm.js";import"./bottomNavBar-BThMQ4vs.js";import"./app_encounter_service-DRel8Czk.js";import"./sms_service-Bijc29-F.js";import"./appointment_service-C548keHF.js";import"./Export-BWyW92ci.js";const W=$({name:"TableComponent",components:{IonContent:M,IonPage:E,IonFab:z,IonFabButton:L,NavigationMenu:N,IonRow:k,IonCol:D,PersonCardComponent:R},data(){return{selectedSection:"",selectedColumn:"",tableData:[],fileTray:U,downloadOutline:A,exportReportToCSV:H,peopleArray:[{id:1,firstName:"John",lastName:"Doe",age:30,dob:"1993-05-15",sex:"Male"},{id:2,firstName:"Jane",lastName:"Smith",age:28,dob:"1995-09-22",sex:"Female"}]}},watch:{$route:{async handler(e){e.name=="EIRReport"&&await this.getDrugs(),await this.initReport()},deep:!0}},computed:{...F(w,["start_date","end_date","navigationPayload"])},async mounted(){await this.getDrugs(),await this.initReport()},methods:{selectSection(e){this.selectedSection=e,this.selectedColumn=""},selectColumn(e){this.selectedColumn=e,this.selectedSection=""},async initReport(){const e=await G(this.start_date,this.end_date);e.less_than_one_year.forEach(t=>{this.fillCells(t,"lessThan1y")}),e.greater_than_one_year.forEach(t=>{this.fillCells(t,"moreThan1y")})},fillCells(e,t){this.tableData.forEach(a=>{if(a.drug.name==e.value_text&&t in a.fixed){let i=t+"Persons",c=a.fixed[t];a.fixed[t]=c+1,a.fixed[i].push(e)}})},async getDrugs(){const e=await q(),t=[];e.forEach(i=>{const c={label:i.name,fixed:{lessThan1y:0,moreThan1y:0,lessThan1yPersons:[],moreThan1yPersons:[]},outreach:{lessThan1y:0,moreThan1y:0},drug:i};t.push(c)}),this.tableData=t,w().setImmunizationMonthlyRepoartData(this.tableData)},openPersonCardComponent(e){console.log(e);const t=i=>{this.openPatientProfile(i.detail.client_id)},a={people:e,headingText:"Immunization (Client Drill Down | ".concat(this.navigationPayload.subTxt,")")};Q(R,{class:"large-modal"},!0,a,{"view-client":t})},async openPatientProfile(e){(await S.findByID(e)).patient_identifiers.forEach(async a=>{if(a.identifier_type==3){const i=await S.findByNpid(a.identifier);await K().setPatientRecord(i[0]),this.$router.push("patientProfile")}})}}}),X={class:"custom-table"},Y=["onUpdate:modelValue"],Z=["onUpdate:modelValue"];function ee(e,t,a,i,c,V){const u=l("ion-col"),h=l("ion-row"),f=l("ion-icon"),y=l("ion-fab-button"),C=l("ion-fab"),g=l("pan");return m(),T(b,null,[s(h,null,{default:d(()=>[s(u,null,{default:d(()=>t[6]||(t[6]=[n("h1",{style:{width:"100%","text-align":"left","font-weight":"400"}},"Immunization",-1)])),_:1,__:[6]})]),_:1}),s(C,{slot:"fixed",horizontal:"end",vertical:"top",onClick:e.exportReportToCSV},{default:d(()=>[s(y,null,{default:d(()=>[s(f,{icon:e.downloadOutline},null,8,["icon"])]),_:1})]),_:1},8,["onClick"]),n("table",X,[t[9]||(t[9]=n("colgroup",null,[n("col",{style:{width:"20%"}}),n("col",{style:{width:"20%"}}),n("col",{style:{width:"20%"}}),n("col",{style:{width:"20%"}}),n("col",{style:{width:"20%"}})],-1)),n("thead",null,[n("tr",null,[t[7]||(t[7]=n("th",null,null,-1)),n("th",{colspan:"2",onClick:t[0]||(t[0]=o=>e.selectSection("fixed")),class:r({selected:e.selectedSection==="fixed"})},"Static",2),n("th",{colspan:"2",onClick:t[1]||(t[1]=o=>e.selectSection("outreach")),class:r({selected:e.selectedSection==="outreach"})},"Outreach",2)]),n("tr",null,[t[8]||(t[8]=n("th",null,null,-1)),n("th",{onClick:t[2]||(t[2]=o=>e.selectColumn("fixedLessThan1y")),class:r({selected:e.selectedColumn==="fixedLessThan1y"})},"<1y",2),n("th",{onClick:t[3]||(t[3]=o=>e.selectColumn("fixedMoreThan1y")),class:r({selected:e.selectedColumn==="fixedMoreThan1y"})},">1y",2),n("th",{onClick:t[4]||(t[4]=o=>e.selectColumn("outreachLessThan1y")),class:r({selected:e.selectedColumn==="outreachLessThan1y"})},"<1y",2),n("th",{onClick:t[5]||(t[5]=o=>e.selectColumn("outreachMoreThan1y")),class:r({selected:e.selectedColumn==="outreachMoreThan1y"})},">1y",2)])]),n("tbody",null,[(m(!0),T(b,null,O(e.tableData,(o,B)=>(m(),T("tr",{key:B},[n("td",null,_(o.label),1),n("td",{class:r({selected:e.selectedSection==="fixed"||e.selectedColumn==="fixedLessThan1y"})},[s(g,{onClick:p=>e.openPersonCardComponent(o.fixed.lessThan1yPersons)},{default:d(()=>[v(_(o.fixed.lessThan1y),1)]),_:2},1032,["onClick"])],2),n("td",{class:r({selected:e.selectedSection==="fixed"||e.selectedColumn==="fixedMoreThan1y"})},[s(g,{onClick:p=>e.openPersonCardComponent(o.fixed.moreThan1yPersons)},{default:d(()=>[v(_(o.fixed.moreThan1y),1)]),_:2},1032,["onClick"])],2),n("td",{class:r({selected:e.selectedSection==="outreach"||e.selectedColumn==="outreachLessThan1y"})},[I(n("input",{"onUpdate:modelValue":p=>o.outreach.lessThan1y=p,class:"editable-input"},null,8,Y),[[P,o.outreach.lessThan1y]])],2),n("td",{class:r({selected:e.selectedSection==="outreach"||e.selectedColumn==="outreachMoreThan1y"})},[I(n("input",{"onUpdate:modelValue":p=>o.outreach.moreThan1y=p,class:"editable-input"},null,8,Z),[[P,o.outreach.moreThan1y]])],2)]))),128))])])],64)}const te=x(W,[["render",ee],["__scopeId","data-v-5b5a0e38"]]),ne=$({name:"TableComponent",components:{IonContent:M,IonPage:E,NavigationMenu:N,AEFIReportTemplate:j,EIR_Report_Template:te,IonRow:k,IonCol:D},data(){return{}},watch:{},computed:{},async mounted(){},methods:{}});function oe(e,t,a,i,c,V){const u=l("NavigationMenu"),h=l("EIR_Report_Template"),f=l("AEFIReportTemplate"),y=l("ion-content"),C=l("ion-page");return m(),J(C,null,{default:d(()=>[s(u),s(y,{class:"ion-padding"},{default:d(()=>[s(h),s(f)]),_:1})]),_:1})}const ye=x(ne,[["render",oe],["__scopeId","data-v-caf79033"]]);export{ye as default};
