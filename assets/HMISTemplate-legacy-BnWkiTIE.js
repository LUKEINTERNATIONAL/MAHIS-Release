!function(){function t(t,e,n){return(e=function(t){var e=function(t,e){if("object"!=typeof t||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:e+""}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}System.register(["./ReportMixin.vue_vue_type_script_lang-legacy-D-WHZmRz.js","./index-legacy-Bg_JNZrN.js","./vendor-legacy-CtJIyFGJ.js"],function(e,n){"use strict";var r,o,s,i,a,l,u,c,d,m,h;return{setters:[t=>{r=t.O,o=t.H,s=t.t},t=>{i=t.S,a=t._},t=>{l=t.d,u=t.z,c=t.H,d=t.e,m=t.f,h=t.l}],execute:function(){class n extends r{constructor(){super(),t(this,"regenerate",void 0),this.regenerate=!1}setRegenerate(t){this.regenerate=t}requestHMIS15(){return this.getReport("generate_hmis_15_report",{request:"true"})}requestHMIS17(){return this.getReport("generate_hmis_17_report",{request:"true"})}renderResults(t){const e=[];let n=1;for(const[r,o]of Object.entries(t)){const t=[],s=o,i={id:0,name:"",total:0,totalPatientIds:""};i.name=r;let a=0;i.id=n,n+=1;for(const[e,n]of Object.entries(s)){const e=n;null!=e&&(a+=e.length,i.total=a,e.length&&(t.push(...e),i.totalPatientIds=t))}e.push(i)}return e}getCSVString(t){let e="Diseases/Events/Conditions, #,\n";for(const n of t){e+=`${n.name},${n.total},\n`}return{CSVString:e}}}e("H",n);const g=l({components:{ReportTable:o},data:function(){return{conditions:[],tableCssTheme:"opd-report-theme",total:" Total ",rows:[],columns:[[s.thTxt(""),s.thTxt("Diseases/Events/Conditions"),s.thTxt("UNVERIFIED"),s.thTxt("VERIFIED")]]}},props:["params","periodDates","quarter","onDrillDown","reportName"],methods:{renderResults(){const t=(new n).renderResults(this.params);t.length&&(this.conditions=t,this.rows=this.buildRows(t))},onDownload(t=""){const e=new n;let{CSVString:r}=e.getCSVString(this.conditions);r+=`\n          Date Created: ${u().format("DD/MMM/YYYY HH:MM:ss")}\n          MaHIS Version: ${i.getCoreVersion()}\n          API Version: ${i.getApiVersion()}\n          Report Period: ${this.periodDates}\n          Site: ${i.getLocationName()}\n          Site UUID: ${i.getSiteUUID()}`;const o=new Blob([r],{type:"text/csv;charset=utf-8;"}),s=navigator;if(s.msSaveBlob)s.msSaveBlob(o,"exportFilename");else{const e=document.createElement("a");e.href=window.URL.createObjectURL(o),e.setAttribute("download",`${t}.csv`),document.body.appendChild(e),e.click(),document.body.removeChild(e)}},buildRows(t){const e=[];return t.forEach(t=>{e.push([s.td(t.id,{style:{textAlign:"left"}}),s.td(t.name,{style:{textAlign:"left"}}),this.buildRow(this.total+"("+t.name+")",t.total,t.totalPatientIds),s.td("")])}),e},buildRow(t,e,n){return e>0?s.tdLink(e,async()=>this.onDrillDown(t,n)):s.td(0)}},watch:{params:{immediate:!0,handler(){this.renderResults()}}}}),p={class:"my-table",style:{margin:"auto",width:"95%","margin-top":"3%","margin-bottom":"3%"}};e("a",a(g,[["render",function(t,e,n,r,o,s){const i=c("report-table");return m(),d("div",p,[h(i,{columns:t.columns,rows:t.rows,config:{tableCssTheme:t.tableCssTheme}},null,8,["columns","rows","config"])])}]]))}}})}();
