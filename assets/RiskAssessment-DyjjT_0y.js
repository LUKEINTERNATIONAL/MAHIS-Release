import{d as B,b2 as _,r,w as N,a as R,E as n,e as m,f,l as e,z as o,k as s,u as I,G as F,A as H,F as b,L,B as G}from"./vendor-Oa4k5SKv.js";import{d as O,u as P,aK as U,ay as v,H as $,i as z,_ as J}from"./index-Cx1mYdif.js";import"./OutcomeModal.vue_vue_type_style_index_0_scoped_ffb9b64e_lang-BF6pdWpq.js";import{B as K}from"./ncd_appointment_service-CRLKPnSq.js";const M={class:"ion-padding",slot:"content"},j={class:"table-responsive"},q=B({__name:"RiskAssessment",setup(Q){const c=O(),g=P(),{substance:l}=_(c),{patient:W}=_(g);r("");const i=r({}),d=r([]),S=r(z),h=["Substance","Answer","Date","Action"],w={responsive:!0,select:!1,layout:{topEnd:"search",bottomStart:"info",bottomEnd:"paging"},ordering:!1},u=()=>{i.value={mainTitle:"Enrollment",cards:[{cardTitle:"Substance use / Consumption",content:l.value}]}},C=a=>{c.resetSubstanceValue(a.title)},y=()=>{c.setSubstance(l.value)},D=async()=>{const a=U("substanceAbuse");if(a.length===0)return[];d.value=await Promise.all(a.map(async t=>[await v.getConceptName(t.concept_id)||"",await v.getConceptName(t.value_coded),$.toStandardHisFormat(t.obs_datetime),'<button class="btn btn-outline-danger btn-sm delete-btn" data-id=\''.concat(JSON.stringify(t),"'>\n                            ").concat(S.value.delete2,"</button>")]))},k=async a=>{};return N(()=>l.value,()=>{u()},{deep:!0}),R(async()=>{y(),u(),await D()}),(a,t)=>{const E=n("ion-label"),T=n("DataTable"),V=n("ion-accordion"),x=n("ion-accordion-group"),A=n("ion-row");return f(),m(b,null,[e(K,{content:i.value,"onUpdate:inputValue":k,"onClear:radio":C},null,8,["content"]),e(A,null,{default:o(()=>[e(x,{ref:"accordionGroup",class:"previousView"},{default:o(()=>[e(V,{value:"first","toggle-icon-slot":"start",style:{"border-radius":"10px","background-color":"#fff"}},{default:o(()=>[e(I(F),{slot:"header",color:"light"},{default:o(()=>[e(E,{class:"previousLabel"},{default:o(()=>t[0]||(t[0]=[H("Previous Visits")])),_:1,__:[0]})]),_:1}),s("div",M,[s("div",j,[e(T,{ref:"dataTableRef",options:w,data:d.value,class:"display nowrap",width:"100%"},{default:o(()=>[s("thead",null,[s("tr",null,[(f(),m(b,null,L(h,p=>s("th",{key:p},G(p),1)),64))])])]),_:1},8,["data"])])])]),_:1})]),_:1},512)]),_:1})],64)}}}),et=J(q,[["__scopeId","data-v-fa6536c3"]]);export{et as S};
