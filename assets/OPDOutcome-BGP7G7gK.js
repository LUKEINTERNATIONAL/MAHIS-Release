import{d as J,ah as Be,G as mt,E as vt,ai as ft,aj as Ve,$ as Q,I as gt,a4 as _t,bf as Fe,aU as ht,H as j,e as g,f as o,k as a,l as n,aV as Ce,r,c as z,a as ye,m as C,O as L,J as d,u as c,Q as V,F as Z,at as $e,el as rn,em as cn,en as un,ay as dn,aE as pn,w as de,av as yt,bR as mn,P as ue,aM as vn,K as $,p as Ne,bE as fn,L as Te,eo as nt,ep as at,b7 as Le,eq as st,er as ot,c_ as it,es as lt,et as rt,eu as ct,d3 as ut,bQ as gn,ax as _n,bY as hn,X as le,al as je,ak as ve,N as oe,bs as ie,a5 as yn,R as bn,bk as Ye,b2 as Dn,bm as Cn,a3 as wn,bW as Sn,bH as In,a6 as dt}from"./vendor-Cfm9Q6_F.js";import{be as He,H as we,ag as W,bg as bt,bf as Dt,b2 as Ct,u as Se,_ as ce,k as Ee,aA as Ae,aB as Re,M as De,Q as be,S as he,aV as Y,t as re,K as xe,aP as pe,aQ as wt,bO as kn,bP as Pn,bF as En,b9 as ge,bb as _e,bQ as xn,aS as On,P as Nn,aW as pt,b0 as An,s as $n,aI as Pe,n as Mn,bB as Tn,N as Ln,aK as Bn,ar as Fn}from"./index-PKf2_LxD.js";import{l as fe}from"./lodash-NJiRuGo9.js";import{P as Rn}from"./patient_complaints_service-DcdzRLDf.js";import{D as St}from"./DashBox-Bzx6-2Tt.js";import{u as Vn}from"./useExposeFromStandardForm-C_V-yimd.js";import{B as Ke}from"./BasicForm-DeqBFBaj.js";import{f as Qe,c as It,a as kt}from"./formatServerData-iO1O9-Bd.js";import{A as Hn,P as Un,D as Wn,b as qn}from"./NextAppointment-DLq066Ly.js";import{D as Gn,b as zn}from"./drug_prescription_service-Db8udpz4.js";import{D as Yn,A as jn,R as Kn,a as Qn}from"./Outcome-CMqcMeTG.js";const Xn=J({name:"Menu",components:{IonContent:_t,IonHeader:gt,IonItem:Q,IonList:Ve,IonMenu:ft,IonTitle:vt,IonToolbar:mt,List:He},computed:{...Be(Se,["patient"]),...Be(Ct,["presentingComplaints"])},data(){return{valueNumericArray:[],obsDatetime:[],graphIcon:Dt(["#006401"]),listIcon:bt(["#636363"]),displayGraph:!0,orders:[],height:[],BMI:[],iconBg:{},activeWeight:[],activeHeight:[],activeBMI:[],list:[],series:[{name:"",data:[]}]}},setup(){return{checkmark:ht,pulseOutline:Fe}},watch:{$router:{async handler(){await this.updateList()},immediate:!0,deep:!0},patient:{async handler(){await this.updateList()},deep:!0}},async mounted(){await this.updateList()},methods:{async updateList(){const t=await W.getAll(this.patient.patientID,"Presenting complaint"),s=fe.isEmpty(t)?[]:Promise.all(t.map(async i=>i.value_coded?{name:await W.getConceptName(i.value_coded),obs_date:i.obs_datetime,duration:i.children[0].value_text}:[]));this.setListData(await s)},setListData(t){this.list=[],this.list.push({actionBtn:!1,class:"col_background",header:!0,minHeight:"--min-height: 20px;",containSize:4,display:["Date","Presenting Complains","Duration"]}),t.forEach(s=>{this.list.push({actionBtn:!1,minHeight:"--min-height:20px;",class:"col_background",containSize:4,display:[we.toStandardHisFormat(s.obs_date),s.name,s.duration]})})}}}),Jn={class:"modal_wrapper"};function Zn(t,s,i,u,v,h){const I=j("list");return o(),g("div",Jn,[a("div",null,[n(I,{listData:t.list},null,8,["listData"])])])}const ea=ce(Xn,[["render",Zn],["__scopeId","data-v-30434e22"]]),ta={key:0},na={style:{"align-content":"center"}},aa={class:"ion-padding",slot:"content"},sa=J({__name:"PresentingComplaints",setup(t,{expose:s}){const i=Ct(),{presentingComplaints:u}=Ce(i),v=r(Ee),h=r(!0),I=r(!1),F=r(!0),k=r(!1),S=r([]),x=r([]),D=r(),U=z(()=>[{componentType:"multiSelectInputField",header:"Presenting Complaints",name:"PresentingComplaints",trackBy:"concept_id",icon:Ee.search,hideSelected:!0,validation:y=>A(y==null?void 0:y.name,S.value)?"Presenting complaint already added":Ae.required(y),options:x.value,grid:{s:"6"}},{componentType:"inputField",header:"Duration",name:"duration",icon:Ee.time,validation:y=>Ae.isNotEmptyandNumber(y),grid:{s:"6"},unitOptions:[{label:"Hours",value:"Hours"},{label:"Days",value:"Days"},{label:"Weeks",value:"Weeks"},{label:"Months",value:"Months"},{label:"Years",value:"Years"}],unitValidation:y=>!y||y===""?"Please select a unit.":null},{componentType:"inputField",header:"Specify the presenting complaint(s)",name:"Other (specify)",icon:Ee.editPen,validation:y=>A(y,S.value)?"Presenting complaint already added":Ae.required(y),condition:y=>{var P;return((P=y==null?void 0:y.PresentingComplaints)==null?void 0:P.name)==="Other"}},{componentType:"Alert",condition:y=>{var P;return Ae.required((P=y==null?void 0:y.PresentingComplaints)==null?void 0:P.name)!=null},backgroundColor:"lightyellow",textColor:"black",value:"Please search thoroughly for the complaint. If it is not listed, search and select the 'Other' option to specify the complaint.",name:"noMatchAlert"}]),{formRef:l}=Vn(),_=async()=>{x.value=await Rn.getComplaintsList("Presenting complaint"),be(u.value,"PresentingComplaints","multiSelectData",x.value)},N=()=>{h.value=!1,F.value=!1,I.value=!0},w=async()=>{var R,p;const y=(R=l.value)==null?void 0:R.getFormValues();((p=l.value)==null?void 0:p.validateForm())==null&&(M(y),I.value=!1,F.value=!0)},M=y=>{var e;const P=y.duration+" "+y.duration_unit,R=y.PresentingComplaints,p=R.name==="Other"?y["Other (specify)"]:R.name;S.value.push({actionBtn:!0,btn:["delete"],name:p,concept_id:R.concept_id,duration:R.duration,durationUnits:R.duration_unit,display:[p,P],data:[{concept_id:8578,value_coded:R.concept_id,obs_datetime:he.getSessionDate(),child:[{concept_id:R.concept_id,value_text:P,obs_datetime:he.getSessionDate()}]}]}),(e=l.value)==null||e.resetForm(),k.value=!0},A=(y,P)=>P.some(R=>R.name===y),B=y=>{S.value=S.value.filter(P=>P.display[0]!==y.name)},T=async()=>{const y=await W.getObsByEncounterIdAndDate(Y.PRESENTING_COMPLAINTS),P=S.value.flatMap(R=>R.data);if(P.length<=0&&y.length<=0)return re("Presenting complaints is required");P.length<=0||(await W.addObsToEncounterPatient(P,Y.PRESENTING_COMPLAINTS),xe("Presenting complaints saved successful"),S.value=[])};return ye(async()=>{await _()}),s({onSubmit:T}),(y,P)=>{const R=j("ion-row"),p=j("ion-label"),e=j("ion-accordion"),E=j("ion-accordion-group");return o(),g(Z,null,[n(St,{status:h.value,content:"No presenting complaints added"},null,8,["status"]),k.value?(o(),g("span",ta,[n(He,{listData:S.value,"onClicked:delete":B},null,8,["listData"])])):C("",!0),I.value?(o(),L(R,{key:1},{default:d(()=>[n(Re,{formData:U.value,ref_key:"formRef",ref:l},null,8,["formData"]),a("div",na,[n(De,{fill:"clear",icon:v.value.plus,iconSlot:"icon-only","onClicked:btn":P[0]||(P[0]=O=>w()),name:"Save"},null,8,["icon"])])]),_:1})):C("",!0),F.value?(o(),L(R,{key:2,style:{"margin-top":"10px"}},{default:d(()=>[n(De,{fill:"clear",icon:v.value.plus,iconSlot:"icon-only","onClicked:btn":P[1]||(P[1]=O=>N()),name:"Add new presenting complaints"},null,8,["icon"])]),_:1})):C("",!0),n(R,null,{default:d(()=>[n(E,{ref_key:"accordionGroup",ref:D,class:"previousView"},{default:d(()=>[n(e,{value:"first","toggle-icon-slot":"start",style:{"border-radius":"10px","background-color":"#fff"}},{default:d(()=>[n(c(Q),{slot:"header",color:"light"},{default:d(()=>[n(p,{class:"previousLabel"},{default:d(()=>[...P[2]||(P[2]=[V("Previous presenting complaints",-1)])]),_:1})]),_:1}),a("div",aa,[n(ea)])]),_:1})]),_:1},512)]),_:1})],64)}}}),oa=ce(sa,[["__scopeId","data-v-0f7271d6"]]),ia=z(()=>[{componentType:"radioButtonField",header:"Eye opening response",name:"Eye opening response",obsValueType:"value_coded",type:"inline",options:[{label:"Spontaneously",value:"Spontaneously"},{label:"To speech",value:"To speech"},{label:"To pain",value:"To pain"},{label:"No response",value:"No response"}]},{componentType:"Dashes"},{componentType:"radioButtonField",header:"Best verbal response",name:"Best verbal response",obsValueType:"value_coded",type:"inline",options:[{label:"Oriented to time, place and person",value:"Oriented to time, place and person"},{label:"Confused",value:"Confused"},{label:"Inappropriate words",value:"Inappropriate words"},{label:"Incomprehensible sounds",value:"Incomprehensible sounds"},{label:"No response",value:"No response"}]},{componentType:"Dashes"},{componentType:"radioButtonField",header:"Best motor response",name:"Best motor response",obsValueType:"value_coded",type:"inline",options:[{label:"Obeys commands",value:"Obeys commands"},{label:"Moves to localised pain",value:"Moves to localised pain"},{label:"Flexion withdrawal from pain",value:"Flexion withdrawal from pain"},{label:"Abnormal flexion (decorticate)",value:"Abnormal flexion (decorticate)"},{label:"Abnormal extension (decerebrate)",value:"Abnormal extension (decerebrate)"},{label:"No response",value:"No response"}]}]),la=z(()=>[{componentType:"radioButtonField",header:"Eye opening response",name:"Eye opening response",obsValueType:"value_coded",type:"inline",options:[{label:"Directed eye movements",value:"Directed eye movements"},{label:"Not directed",value:"Not directed"}]},{componentType:"Dashes"},{componentType:"radioButtonField",header:"Best verbal response",name:"Best verbal response",obsValueType:"value_coded",type:"inline",options:[{label:"Appropriate cry",value:"Appropriate cry"},{label:"Inappropriate cry or moan",value:"Inappropriate cry or moan"},{label:"No cry",value:"No cry"}]},{componentType:"Dashes"},{componentType:"radioButtonField",header:"Best motor response",name:"Best motor response",obsValueType:"value_coded",type:"inline",options:[{label:"Localizes pain",value:"Localizes pain"},{label:"Withdraws from pain",value:"Withdraws from pain"},{label:"Non specific or no response",value:"Non specific or no response"}]}]),Pt={Spontaneously:4,"To speech":3,"To pain":2,"No response":1},Et={"Oriented to time, place and person":5,Confused:4,"Inappropriate words":3,"Incomprehensible sounds":2,"No response":1},xt={"Obeys commands":6,"Moves to localised pain":5,"Flexion withdrawal from pain":4,"Abnormal flexion (decorticate)":3,"Abnormal extension (decerebrate)":2,"No response":1},Ot={"Not directed":0,"Directed eye movements":1},Nt={"Non specific or no response":0,"Withdraws from pain":1,"Localizes pain":2},At={"No cry":0,"Inappropriate cry or moan":1,"Appropriate cry":2},ra={class:"allergies-container"},ca={key:0,class:"no-allergies"},ua={key:1,class:"date-groups"},da=["onClick"],pa={class:"date-info"},ma={class:"date-text"},va={class:"allergy-count"},fa={class:"card-header"},ga={class:"allergy-type"},_a={class:"card-content"},ha=J({__name:"AllergiesListing",setup(t){const s=Se(),{patient:i}=Ce(s),u=r({}),v={antiviral:/abacavir|lamivudine|lopinavir|ritonavir|zidovudine|efavirenz|tenofovir/i,antibiotic:/penicillin|amoxicillin|cephalexin|azithromycin|ciprofloxacin|doxycycline/i,analgesic:/aspirin|ibuprofen|acetaminophen|morphine|codeine|tramadol/i,cardiac:/metoprolol|lisinopril|amlodipine|atorvastatin|warfarin/i,activated:/activated\s+charcoal/i},h={985:{name:"Other",icon:$e,severity:"danger"},7759:{name:"Location/Environmental",icon:pn,severity:"info"},7579:{name:"Medical Condition",icon:dn,severity:"warning"},drug:{name:"Drug Allergy",icon:$e,severity:"danger"},food:{name:"Food Allergy",icon:un,severity:"danger"},environmental:{name:"Environmental",icon:cn,severity:"warning"},contact:{name:"Contact Allergy",icon:rn,severity:"warning"},unknown:{name:"Drug Allergy",icon:$e,severity:"danger"}},I=l=>{const _=l.toLowerCase();return v.antiviral.test(_)?{type:"Antiviral Medication",icon:"shield-outline"}:v.antibiotic.test(_)?{type:"Antibiotic",icon:"bandage-outline"}:v.analgesic.test(_)?{type:"Pain Medication",icon:"fitness-outline"}:v.cardiac.test(_)?{type:"Cardiac Medication",icon:"heart-outline"}:v.activated.test(_)?{type:"Detoxification Agent",icon:"flask-outline"}:{type:"Medication",icon:"medical-outline"}},F=z(()=>{var l,_,N;return((N=(_=(l=i.value)==null?void 0:l.allergies)==null?void 0:_.saved)==null?void 0:N.length)>0}),k=z(()=>F.value?i.value.allergies.saved.map(l=>{var B;const _=((B=l.concept_id)==null?void 0:B.toString())||"unknown";console.log("###########: ",l);const N=h[_]||h.unknown;let w="Unknown",M=null;return l.value_text&&l.value_text!=="Unknown"&&l.value_text!==""?(w=l.value_text,_==="985###"&&(M=I(l.value_text))):l.concept_name&&(w=l.concept_name),{...M?{...N,name:M.type,icon:M.icon}:N,displayValue:w,conceptId:l.concept_id,date:l.obs_datetime||l.encounter_datetime,providerId:l.provider_id,locationId:l.location_id,encounterId:l.encounter_id,isDrug:_==="985",raw:l}}):[]),S=z(()=>{const l={};k.value.forEach(w=>{const M=w.date?D(w.date):"Unknown Date";l[M]||(l[M]=[]),l[M].push(w)});const _={};return Object.keys(l).sort((w,M)=>w==="Unknown Date"?1:M==="Unknown Date"?-1:new Date(M).getTime()-new Date(w).getTime()).forEach(w=>{_[w]=l[w]}),_}),x=l=>{u.value[l]=!u.value[l]},D=l=>{if(!l)return"Unknown Date";try{return new Date(l).toISOString().split("T")[0]}catch(_){return"Unknown Date"}},U=l=>{if(l==="Unknown Date")return"Unknown Date";try{const _=new Date(l),N=we.sessionDate(),w=new Date(N),M=new Date(w);M.setDate(M.getDate()-1);const A=_.toDateString(),B=w.toDateString(),T=M.toDateString();return A===B?"Today":A===T?"Yesterday":_.toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})}catch(_){return l}};return de(()=>S.value,l=>{const _=Object.keys(l);_.length>0&&(u.value[_[0]]=!0)},{immediate:!0}),de(()=>{var l;return(l=i.value)==null?void 0:l.allergies},l=>{console.log("Allergies updated:",l)},{deep:!0}),ye(()=>{var l;console.log("Allergies component mounted",(l=i.value)==null?void 0:l.allergies)}),(l,_)=>{const N=j("ion-icon"),w=j("ion-label");return o(),g("div",ra,[n(w,{class:"section-title"},{default:d(()=>[n(N,{icon:c(yt),class:"alert-icon"},null,8,["icon"]),n(w,null,{default:d(()=>[..._[0]||(_[0]=[V("Allergies (Medication, Healthcare items, Environment and Food)",-1)])]),_:1})]),_:1}),F.value?(o(),g("div",ua,[(o(!0),g(Z,null,ue(S.value,(M,A)=>(o(),g("div",{key:A,class:"date-group"},[a("div",{class:Ne(["date-header",{expanded:u.value[A]}]),onClick:B=>x(A)},[a("div",pa,[n(N,{icon:c(vn),class:"date-icon"},null,8,["icon"]),a("span",ma,$(U(A)),1),a("span",va,"("+$(M.length)+" "+$(M.length===1?"allergy":"allergies")+")",1)]),n(N,{icon:c(fn),class:Ne(["expand-icon",{rotated:u.value[A]}])},null,8,["icon","class"])],10,da),a("div",{class:Ne(["allergies-grid",{collapsed:!u.value[A]}])},[(o(!0),g(Z,null,ue(M,(B,T)=>(o(),g("div",{key:T,class:Ne(["allergy-card",B.severity])},[a("div",fa,[n(N,{icon:B.icon,class:"allergy-icon"},null,8,["icon"]),a("span",ga,$(B.name),1)]),a("div",_a,[a("div",{class:Ne(["allergy-value",{"drug-name":B.isDrug}])},$(B.displayValue),3)])],2))),128))],2)]))),128))])):(o(),g("div",ca,[n(N,{icon:c(mn),class:"no-allergies-icon"},null,8,["icon"]),_[1]||(_[1]=a("p",null,"No known allergies",-1))]))])}}}),$t=ce(ha,[["__scopeId","data-v-1302dd03"]]),ya=J({name:"VisitHistory",components:{AllergiesListing:$t,IonIcon:Te},setup(){const t=wt();return{selectedAllergiesList2:z(()=>t.selectedMedicalAllergiesList),alertCircleOutline:yt,documentTextOutline:hn,femaleOutline:_n,medicalOutline:$e,warningOutline:gn,bodyOutline:nt,eyeOutline:ut,nutritionOutline:ct,fitnessOutline:ot,pulseOutline:Fe,earOutline:rt,happyOutline:lt,manOutline:it,moveOutline:st,addOutline:Le,scanOutline:at}},data(){return{presentingComplaintsWithDuration:[],pastMedicalHistory:[],levelOfConsciousness:{eyeResponse:null,verbalResponse:null,motorResponse:null},pregnancy:{patientPregnant:null,breastFeeding:null},physicalExamCategories:{Eyes:{icon:ut,abnormalities:[],normal:!1},Mouth:{icon:ct,abnormalities:[],normal:!1},Ears:{icon:rt,abnormalities:[],normal:!1},Face:{icon:lt,abnormalities:[],normal:!1},Neck:{icon:it,abnormalities:[],normal:!1},Chest:{icon:ot,abnormalities:[],normal:!1},"Chest Movement":{icon:st,abnormalities:[],normal:!1},"Heart Sounds":{icon:Fe,abnormalities:[],normal:!1},"Breath Sounds":{icon:Le,abnormalities:[],normal:!1},"Added Breath Sounds":{icon:Le,abnormalities:[],normal:!1},"Abdominal Inspection":{icon:at,abnormalities:[],normal:!1},"Genital Examination":{icon:nt,abnormalities:[],normal:!1}}}},computed:{...Be(Se,["patient"]),hasLevelOfConsciousness(){return this.levelOfConsciousness.eyeResponse||this.levelOfConsciousness.verbalResponse||this.levelOfConsciousness.motorResponse},hasPresentingComplaints(){var t;return((t=this.presentingComplaintsWithDuration)==null?void 0:t.length)>0},hasPregnancyData(){return this.pregnancy.patientPregnant||this.pregnancy.breastFeeding},hasPastMedicalHistory(){var t;return((t=this.uniquePastMedicalHistory)==null?void 0:t.length)>0},hasAllergies(){var t,s;return((s=(t=this.selectedAllergiesList2)==null?void 0:t.filter(i=>i.selected))==null?void 0:s.length)>0},hasPhysicalExam(){return Object.values(this.physicalExamCategories).some(t=>t.abnormalities.length>0||t.normal)},uniquePastMedicalHistory(){return[...new Set(this.pastMedicalHistory)]},uniquePresentingComplaints(){return[...new Set(this.presentingComplaintsWithDuration.map(t=>t.name))]},isMinor(){var t,s;return we.getAgeInYears((s=(t=this.patient)==null?void 0:t.personInformation)==null?void 0:s.birthdate)<18},gcsScore(){var F,k,S;if(!this.hasLevelOfConsciousness)return null;const t=this.levelOfConsciousness.eyeResponse,s=this.levelOfConsciousness.motorResponse,i=this.levelOfConsciousness.verbalResponse,u=t&&(F=(this.isMinor?Ot:Pt)[t])!=null?F:0,v=s&&(k=(this.isMinor?Nt:xt)[s])!=null?k:0,h=i&&(S=(this.isMinor?At:Et)[i])!=null?S:0,I=u+v+h;return"(M ".concat(v," V ").concat(h," E ").concat(u,") ").concat(I,"/").concat(this.isMinor?5:15)}},methods:{async updateData(){var t;(t=this.patient)!=null&&t.patientID&&(await this.loadPresentingComplaints(),await this.loadPastMedicalHistory(),await this.loadLevelOfConsciousness(),await this.loadPregnancyStatus(),await this.loadPhysicalExam())},async loadPresentingComplaints(){try{const t=await W.getObsByEncounterIdAndDate(Y.PRESENTING_COMPLAINTS);this.presentingComplaintsWithDuration=[];const s=t.filter(i=>i.concept_name==="Presenting complaint");for(const i of s){const u=t.find(h=>h.concept_id===i.value_coded&&h.concept_name!=="Presenting complaint"),v=await pe.getConceptName(i.value_coded);this.presentingComplaintsWithDuration.push({name:v,duration:(u==null?void 0:u.value_text)||"Duration not specified"})}}catch(t){console.error("Error loading presenting complaints:",t)}},async loadPastMedicalHistory(){try{const s=(await W.getObsByEncounterIdAndDate(Y.PAST_MEDICAL_HISTORY)).filter(i=>i.concept_name==="Chronic disease");this.pastMedicalHistory=await Promise.all(s.map(async i=>await pe.getConceptName(i.value_coded)))}catch(t){console.error("Error loading past medical history:",t)}},async loadLevelOfConsciousness(){try{const t=await W.getObsByEncounterIdAndDate(Y.ASSESSMENT);if(t&&Array.isArray(t)){const s=t.find(v=>v.concept_name==="Eye opening response");this.levelOfConsciousness.eyeResponse=s!=null&&s.value_coded?await pe.getConceptName(s.value_coded):null;const i=t.find(v=>v.concept_name==="Best verbal response");this.levelOfConsciousness.verbalResponse=i!=null&&i.value_coded?await pe.getConceptName(i.value_coded):null;const u=t.find(v=>v.concept_name==="Best motor response");this.levelOfConsciousness.motorResponse=u!=null&&u.value_coded?await pe.getConceptName(u.value_coded):null}}catch(t){console.error("Error loading level of consciousness:",t)}},async loadPregnancyStatus(){try{const t=await W.getObsByEncounterIdAndDate(Y.PREGNANCY_STATUS);if(t&&Array.isArray(t)){const s=t.find(u=>u.concept_name==="Patient pregnant");this.pregnancy.patientPregnant=s!=null&&s.value_coded?await pe.getConceptName(s.value_coded):null;const i=t.find(u=>u.concept_name==="Is patient breast feeding?");this.pregnancy.breastFeeding=i!=null&&i.value_coded?await pe.getConceptName(i.value_coded):null}}catch(t){console.error("Error loading pregnancy status:",t)}},async loadPhysicalExam(){try{const t=await W.getObsByEncounterIdAndDate(Y.PHYSICAL_EXAMINATION);Object.values(this.physicalExamCategories).forEach(s=>{s.abnormalities=[],s.normal=!1});for(const s of t)if(s.concept_id){if(s.value_coded===1065)switch(s.concept_id){case 10837:this.physicalExamCategories.Eyes.normal=!0;break;case 10842:this.physicalExamCategories.Mouth.normal=!0;break;case 11028:this.physicalExamCategories.Ears.normal=!0;break;case 10854:this.physicalExamCategories.Face.normal=!0;break;case 10858:this.physicalExamCategories.Neck.normal=!0;break;case 10894:this.physicalExamCategories.Chest.normal=!0;break;case 10903:this.physicalExamCategories["Heart Sounds"].normal=!0;break;case 10909:this.physicalExamCategories["Breath Sounds"].normal=!0;break;case 10919:case 10928:case 10939:this.physicalExamCategories["Abdominal Inspection"].normal=!0;break;case 10803:case 10946:this.physicalExamCategories["Genital Examination"].normal=!0;break}if(s.value_coded){const i=await pe.getConceptName(s.value_coded);switch(s.concept_id){case 10838:this.physicalExamCategories.Eyes.abnormalities.push(i);break;case 10843:this.physicalExamCategories.Mouth.abnormalities.push(i);break;case 10852:this.physicalExamCategories.Ears.abnormalities.push(i);break;case 10855:this.physicalExamCategories.Face.abnormalities.push(i);break;case 10859:this.physicalExamCategories.Neck.abnormalities.push(i);break;case 10897:this.physicalExamCategories.Chest.abnormalities.push(i);break;case 10904:this.physicalExamCategories["Heart Sounds"].abnormalities.push(i);break;case 10910:this.physicalExamCategories["Breath Sounds"].abnormalities.push(i);break;case 10920:case 10929:case 10939:this.physicalExamCategories["Abdominal Inspection"].abnormalities.push(i);break;case 10797:case 10804:case 10947:this.physicalExamCategories["Genital Examination"].abnormalities.push(i);break}}}}catch(t){console.error("Error loading physical exam:",t)}}},watch:{patient:{async handler(){await this.updateData()},deep:!0}},async mounted(){await this.updateData()}}),ba={class:"visit-container"},Da={class:"visit-sections"},Ca={key:0,class:"visit-section"},wa={class:"section-header"},Sa={class:"section-content"},Ia={key:0,class:"info-item"},ka={class:"info-value"},Pa={key:1,class:"info-item"},Ea={class:"info-value"},xa={key:2,class:"info-item"},Oa={class:"info-value"},Na={key:3,class:"info-item"},Aa={class:"info-value highlight"},$a={key:1,class:"visit-section"},Ma={class:"section-header"},Ta={class:"complaints-container"},La={class:"complaint-name"},Ba={class:"complaint-duration"},Fa={key:2,class:"visit-section"},Ra={class:"section-header"},Va={class:"section-content"},Ha={key:0,class:"info-item"},Ua={class:"info-value highlight"},Wa={key:1,class:"info-item"},qa={class:"info-value highlight"},Ga={key:3,class:"visit-section"},za={class:"section-header"},Ya={class:"tags-container"},ja={class:"allergies-section"},Ka={class:"allergies-container"},Qa={key:4,class:"visit-section"},Xa={class:"section-header"},Ja={class:"exam-section"},Za={key:0,class:"exam-category"},es={class:"exam-category-header"},ts={class:"exam-items"},ns={key:1,class:"exam-item normal"};function as(t,s,i,u,v,h){const I=j("ion-icon"),F=j("AllergiesListing");return o(),g("div",ba,[s[11]||(s[11]=a("div",{class:"visit-header"},[a("h5",null,"Patient's Clinical Assessment Summary")],-1)),a("div",Da,[t.hasLevelOfConsciousness?(o(),g("div",Ca,[a("div",wa,[n(I,{icon:t.alertCircleOutline,class:"section-icon"},null,8,["icon"]),s[0]||(s[0]=a("h3",null,"Level of Consciousness",-1))]),a("div",Sa,[t.levelOfConsciousness.eyeResponse?(o(),g("div",Ia,[s[1]||(s[1]=a("span",{class:"info-label"},"Eye Response:",-1)),a("span",ka,$(t.levelOfConsciousness.eyeResponse),1)])):C("",!0),t.levelOfConsciousness.verbalResponse?(o(),g("div",Pa,[s[2]||(s[2]=a("span",{class:"info-label"},"Verbal Response:",-1)),a("span",Ea,$(t.levelOfConsciousness.verbalResponse),1)])):C("",!0),t.levelOfConsciousness.motorResponse?(o(),g("div",xa,[s[3]||(s[3]=a("span",{class:"info-label"},"Motor Response:",-1)),a("span",Oa,$(t.levelOfConsciousness.motorResponse),1)])):C("",!0),t.gcsScore?(o(),g("div",Na,[s[4]||(s[4]=a("span",{class:"info-label"},"Score:",-1)),a("span",Aa,$(t.gcsScore),1)])):C("",!0)])])):C("",!0),t.hasPresentingComplaints?(o(),g("div",$a,[a("div",Ma,[n(I,{icon:t.documentTextOutline,class:"section-icon"},null,8,["icon"]),s[5]||(s[5]=a("h3",null,"Presenting Complaints",-1))]),a("div",Ta,[(o(!0),g(Z,null,ue(t.presentingComplaintsWithDuration,(k,S)=>(o(),g("div",{class:"complaint-item",key:S},[a("div",La,$(k.name),1),a("div",Ba,$(k.duration),1)]))),128))])])):C("",!0),t.hasPregnancyData?(o(),g("div",Fa,[a("div",Ra,[n(I,{icon:t.femaleOutline,class:"section-icon"},null,8,["icon"]),s[6]||(s[6]=a("h3",null,"Pregnancy Status",-1))]),a("div",Va,[t.pregnancy.patientPregnant?(o(),g("div",Ha,[s[7]||(s[7]=a("span",{class:"info-label"},"Pregnant:",-1)),a("span",Ua,$(t.pregnancy.patientPregnant),1)])):C("",!0),t.pregnancy.breastFeeding?(o(),g("div",Wa,[s[8]||(s[8]=a("span",{class:"info-label"},"Breastfeeding:",-1)),a("span",qa,$(t.pregnancy.breastFeeding),1)])):C("",!0)])])):C("",!0),t.hasPastMedicalHistory?(o(),g("div",Ga,[a("div",za,[n(I,{icon:t.medicalOutline,class:"section-icon"},null,8,["icon"]),s[9]||(s[9]=a("h3",null,"Medical History",-1))]),a("div",Ya,[(o(!0),g(Z,null,ue(t.uniquePastMedicalHistory,(k,S)=>(o(),g("div",{class:"medical-tag",key:S},$(k),1))),128))])])):C("",!0),a("div",ja,[a("div",Ka,[n(F)])]),t.hasPhysicalExam?(o(),g("div",Qa,[a("div",Xa,[n(I,{icon:t.bodyOutline,class:"section-icon"},null,8,["icon"]),s[10]||(s[10]=a("h3",null,"Physical Examination",-1))]),a("div",Ja,[(o(!0),g(Z,null,ue(t.physicalExamCategories,(k,S)=>(o(),g(Z,{key:S},[k.abnormalities.length>0||k.normal?(o(),g("div",Za,[a("div",es,[n(I,{icon:k.icon},null,8,["icon"]),a("h4",null,$(S),1)]),a("div",ts,[k.abnormalities.length>0?(o(!0),g(Z,{key:0},ue(k.abnormalities,(x,D)=>(o(),g("div",{class:"exam-item abnormal",key:D},$(x),1))),128)):k.normal?(o(),g("div",ns," Normal examination ")):C("",!0)])])):C("",!0)],64))),128))])])):C("",!0)])])}const ss=ce(ya,[["render",as],["__scopeId","data-v-795e1865"]]),os={class:"modal_wrapper"},is=J({__name:"LevelOfConsciousness",setup(t,{expose:s}){var k,S;const i=Se(),{patient:u}=Ce(i),v=r(we.getAgeInYears((S=(k=u==null?void 0:u.value)==null?void 0:k.personInformation)==null?void 0:S.birthdate)),h=r(null),I=z(()=>{var B,T,y,P;const x=((B=h.value)==null?void 0:B.getFormValues())||{},D=x["Eye opening response"]||"",U=x["Best motor response"]||"",l=x["Best verbal response"]||"",_=v.value<18,N=(T=(_?Ot:Pt)[D])!=null?T:0,w=(y=(_?Nt:xt)[U])!=null?y:0,M=(P=(_?At:Et)[l])!=null?P:0,A=N+w+M;return"(M ".concat(w," V ").concat(M," E ").concat(N,") ").concat(A,"/").concat(_?5:15)});return s({onSubmit:async()=>{var D;if(!h.value){console.error("Form reference is not available");return}const x=((D=h.value)==null?void 0:D.getFormValues())||{};x["Eye opening response"]||x["Best motor response"]||x["Best verbal response"]?(await W.buildAddObsToEncounterPatient(x,Y.ASSESSMENT),h.value.resetForm(),xe("Level of Consciousness saved successfully")):re(" No level of consciousness data to save ")}}),(x,D)=>(o(),g("div",os,[v.value<18?(o(),L(Re,{key:0,formData:c(la),ref_key:"formRef",ref:h},null,8,["formData"])):(o(),L(Re,{key:1,formData:c(ia),ref_key:"formRef",ref:h},null,8,["formData"])),a("h5",null,$(I.value),1)]))}}),ls={class:"modal_wrapper"},rs=J({__name:"PregnancyBreastfeeding",setup(t,{expose:s}){const i=kn(),{pregnancy:u}=Ce(i),v=()=>{};return s({onSubmit:async()=>{const I=await Qe(u.value);I.length>0?(await W.addObsToEncounterPatient(I,Y.PREGNANCY_STATUS),xe("Pregnancy status saved successfully")):re("No pregnancy status data to save ")}}),(I,F)=>(o(),g("div",ls,[n(Ke,{contentData:c(u),"onUpdate:inputValue":v},null,8,["contentData"])]))}}),cs={class:"modal_wrapper"},us={class:"uniform_columns"},ds=J({__name:"PastMedicalHistory",setup(t,{expose:s}){const i=Pn(),{pastMedicalHistory:u}=Ce(i),v=r([]);ye(()=>{v.value=i.getInitial(),h()}),de(u,()=>{h()},{deep:!0});const h=()=>{var x;const S=["TB","Chronic Obstructive Pulmonary Disease (COPD)","Asthma","Epilepsy","Previous stroke","Peptic Ulcer Disease (PUD)","Mental disorder","Bleeding disorders","Hypertension","HIV Positive","Diabetes Mellitus"];(x=En(u.value,"None"))!=null&&x.checked?S.forEach(D=>{ge(u.value,"TB treatment","displayNone",!0),be(u.value,"TB drugs","displayNone",!0),be(u.value,"TB drug start date","displayNone",!0),ge(u.value,"Hypertension medication","displayNone",!0),be(u.value,"Current hypertension treatment regimen","displayNone",!0),ge(u.value,"HIV status","displayNone",!0),be(u.value,"ARV start date","displayNone",!0),ge(u.value,"Diabetes","displayNone",!0),ge(u.value,"Controlled by","displayNone",!0),_e(u.value,D,"checked",!1),_e(u.value,D,"disabled",!0)}):S.forEach(D=>{_e(u.value,D,"disabled",!1)})},I=S=>{be(u.value,"TB drugs","popOverData",{filterData:!0,data:[{name:"Auramine 'O' (C.I. 41000) 50g"},{name:"Bedaquilline 100mg"},{name:"Clofazimine 100mg"},{name:"Clofazimine 50mg"},{name:"Cycloserine 125mg"},{name:"Cycloserine 250mg"},{name:"Delamanid 50mg"},{name:"Ethambutol 100mg"},{name:"Ethambutol 400mg"},{name:"Ethionamide 250mg"},{name:"Isoniazid 100mg "},{name:"Isoniazid 300mg"},{name:"Isoniazid / Rifapentine 300mg / 300mg"},{name:"Levofloxacin 100mg"},{name:"Levofloxacin 250mg"},{name:"Linezolid 600mg"},{name:"Moxifloxacin 400mg"},{name:"Pyrazinamide 400mg"},{name:"Rifabutin 150mg Capsules"},{name:"Rifampicin 150mg/isoniazid 75mg"},{name:"Rifampicin 75mg+INH 50mg dispersible"},{name:"Rifampicin 75mg+INH 50mg+Pyrazinamide 150mg dispersible"},{name:"Rifampicin150mg/Isoniazid75mg/Pyrazinamide 400mg/Ethambutol"}]}),be(u.value,"Current hypertension treatment regimen","popOverData",{filterData:!0,data:[{name:"Captopril 12.5mg"},{name:"Aspirin 75mg"},{name:"Hydrochlorothiazide 25mg"},{name:"Enalapril Meleate 5mg"},{name:"Enalapril Maleate 10mg"}]})},F=async()=>[...await It(u.value),...await Qe(u.value),...await kt(u.value)];return s({onSubmit:async()=>{const S=await F();if(S.length===0){re("No past medical history data to save");return}await W.addObsToEncounterPatient(S,Y.PAST_MEDICAL_HISTORY),xe("Past medical history saved successful")}}),(S,x)=>(o(),g("div",cs,[a("div",us,[n(Ke,{contentData:c(u),initialData:v.value,"onUpdate:inputValue":I,"onUpdate:selected":I},null,8,["contentData","initialData"])])]))}}),ps=ce(ds,[["__scopeId","data-v-49fdce72"]]),ms={class:"container"},vs=J({__name:"PhysicalExamination",setup(t,{expose:s}){const i=xn(),u=Se(),{physicalExam:v}=Ce(i),{patient:h}=Ce(u),I=r([]);ye(()=>{I.value=i.getInitial(),F(),k()}),de(v,()=>{F(),k()},{deep:!0});const F=()=>{On(v.value,"Physical examination")=="No"?ge(v.value,"Reason why physical examination not done","displayNone",!1):(ge(v.value,"Reason why physical examination not done","displayNone",!0),ge(v.value,"Reason why physical examination not done","selectedValue",""))},k=()=>{var U,l;const D=(l=(U=h.value)==null?void 0:U.personInformation)==null?void 0:l.gender;D=="M"&&(_e(v.value,"Vulva examination","disabled",!0),_e(v.value,"Visible bleeding","disabled",!0)),D=="F"&&(_e(v.value,"Urethral meatus abnormal","disabled",!0),_e(v.value,"Scrotal swelling","disabled",!0),_e(v.value,"Tastes swelling","disabled",!0))},S=async()=>[...await It(v.value),...await Qe(v.value),...await kt(v.value)];return s({onSubmit:async()=>{const D=await S();if(console.log("Selected physical data is",D),D.length===0){re("No physical examination data to save");return}await W.addObsToEncounterPatient(D,Y.PHYSICAL_EXAMINATION),console.log(W.getObsByEncounterIdAndDate(Y.PHYSICAL_EXAMINATION)),xe("Physical examination saved successful")}}),(D,U)=>{const l=j("ion-card-content"),_=j("ion-card");return o(),g("div",ms,[n(_,{class:"section"},{default:d(()=>[n(l,null,{default:d(()=>[n(Ke,{contentData:c(v),initialData:I.value},null,8,["contentData","initialData"])]),_:1})]),_:1})])}}}),fs=ce(vs,[["__scopeId","data-v-0d34c6dd"]]),gs={key:0},_s={class:"ion-padding",slot:"content"},hs={class:"nav-buttons"},ys={class:"ion-padding",slot:"content"},bs={class:"nav-buttons"},Ds={class:"ion-padding",slot:"content"},Cs={class:"nav-buttons"},ws={class:"ion-padding",slot:"content"},Ss={class:"nav-buttons"},Is={class:"ion-padding",slot:"content"},ks={class:"nav-buttons"},Ps={class:"ion-padding",slot:"content"},Es={class:"nav-buttons"},xs=J({__name:"ClinicalAssessment",setup(t,{expose:s}){const i=r("loc"),u=r(0),v=r(!1),h=r(!1),I=new Nn,F=Se(),k=()=>{u.value++},S=r(null),x=r(null),D=r(null),U=r(null),l=r(null),_=r(null),N=[{id:"loc",label:"Level of consciousness",show:!0},{id:"pc",label:"Presenting complaints",show:!0},{id:"pbs",label:"Pregnancy and breastfeeding status",show:()=>I.isChildBearing()},{id:"pmh",label:"Past medical history",show:!0},{id:"al",label:"Allergies",show:!0},{id:"pe",label:"Physical examination",show:!0}];async function w(){const p=he.getSessionDate(),e=[Y.ASSESSMENT,Y.PRESENTING_COMPLAINTS,Y.PAST_MEDICAL_HISTORY,Y.PHYSICAL_EXAMINATION,Y.PREGNANCY_STATUS];let E=!1;for(const O of e)try{const K=await W.getObsByEncounterIdAndDate(O);if(K&&K.some(ee=>ee.obs_datetime?we.toStandardHisFormat(ee.obs_datetime)===we.toStandardHisFormat(p):!1)){E=!0;break}}catch(K){console.error("Error checking observations for encounter type ".concat(O,":"),K)}v.value=E}ye(w),de(()=>F.patient,w);const M=z(()=>v.value),A=z(()=>N.filter(p=>typeof p.show=="function"?p.show():p.show)),B=p=>{const e=N.find(E=>E.id===p);return e?typeof e.show=="function"?e.show():e.show:!1},T=p=>A.value.findIndex(e=>e.id===p),y=p=>{const e=T(p);e>0&&(i.value=A.value[e-1].id)},P=p=>{const E=T(p)+1;E<A.value.length?i.value=A.value[E].id:(i.value="",k())};return s({onSubmit:async()=>{const p=[{ref:S,name:"PresentingComplaints"},{ref:x,name:"LevelOfConsciousness"},{ref:D,name:"PastMedicalHistory"},{ref:l,name:"PregnancyBreastfeeding"},{ref:_,name:"PhysicalExamination"}];for(const e of p)if(e.ref.value&&typeof e.ref.value.onSubmit=="function")try{await e.ref.value.onSubmit()}catch(E){console.error("Error calling ".concat(e.name," onSubmit:"),E)}else console.log("".concat(e.name," component ref not available or no onSubmit method"))}}),(p,e)=>{const E=j("ion-toggle");return o(),g(Z,null,[M.value?(o(),g("div",gs,[n(c(Q),{lines:"none"},{default:d(()=>[n(c(le),null,{default:d(()=>[...e[14]||(e[14]=[V("Switch between Capture Mode and Summary Mode",-1)])]),_:1}),n(E,{checked:h.value,onIonChange:e[0]||(e[0]=O=>h.value=O.detail.checked),slot:"end"},null,8,["checked"])]),_:1}),h.value?C("",!0):(o(),L(ss,{key:u.value}))])):C("",!0),!M.value||h.value?(o(),L(c(yn),{key:1,style:{width:"100%"}},{default:d(()=>[n(c(je),{value:i.value,"onUpdate:value":e[13]||(e[13]=O=>i.value=O),ref:"accordionGroup",class:"previousView"},{default:d(()=>[B("loc")?(o(),L(c(ve),{key:0,value:"loc",class:"_card"},{default:d(()=>[n(c(Q),{slot:"header",color:"light"},{default:d(()=>[n(c(le),{class:"previousLabel"},{default:d(()=>[...e[15]||(e[15]=[V("Level of consciousness",-1)])]),_:1})]),_:1}),a("div",_s,[n(is,{"is-active":i.value==="loc",ref_key:"levelOfConsciousnessFormRef",ref:x,onDataSaved:k},null,8,["is-active"]),a("div",hs,[T("loc")>0?(o(),L(c(oe),{key:0,fill:"outline",onClick:e[1]||(e[1]=ie(O=>y("loc"),["stop"]))},{default:d(()=>[...e[16]||(e[16]=[V(" Back ",-1)])]),_:1})):C("",!0),n(c(oe),{fill:"outline",onClick:e[2]||(e[2]=ie(O=>P("loc"),["stop"]))},{default:d(()=>[V($(T("loc")<A.value.length-1?"Next":"Finish"),1)]),_:1})])])]),_:1})):C("",!0),B("pc")?(o(),L(c(ve),{key:1,value:"pc",class:"_card"},{default:d(()=>[n(c(Q),{slot:"header",color:"light"},{default:d(()=>[n(c(le),{class:"previousLabel"},{default:d(()=>[...e[17]||(e[17]=[V("Presenting complaints",-1)])]),_:1})]),_:1}),a("div",ys,[n(oa,{"is-active":i.value==="pc",onDataSaved:k,ref_key:"presentingComplaintsFormRef",ref:S},null,8,["is-active"]),a("div",bs,[T("pc")>0?(o(),L(c(oe),{key:0,fill:"outline",onClick:e[3]||(e[3]=ie(O=>y("pc"),["stop"]))},{default:d(()=>[...e[18]||(e[18]=[V(" Back ",-1)])]),_:1})):C("",!0),n(c(oe),{fill:"outline",onClick:e[4]||(e[4]=ie(O=>P("pc"),["stop"]))},{default:d(()=>[V($(T("pc")<A.value.length-1?"Next":"Finish"),1)]),_:1})])])]),_:1})):C("",!0),B("pbs")?(o(),L(c(ve),{key:2,value:"pbs",class:"_card"},{default:d(()=>[n(c(Q),{slot:"header",color:"light"},{default:d(()=>[n(c(le),{class:"previousLabel"},{default:d(()=>[...e[19]||(e[19]=[V("Pregnancy and breastfeeding status",-1)])]),_:1})]),_:1}),a("div",Ds,[n(rs,{"is-active":i.value==="pbs",ref_key:"pregnancyBreastfeedingFormRef",ref:l,onDataSaved:k},null,8,["is-active"]),a("div",Cs,[T("pbs")>0?(o(),L(c(oe),{key:0,fill:"outline",onClick:e[5]||(e[5]=ie(O=>y("pbs"),["stop"]))},{default:d(()=>[...e[20]||(e[20]=[V(" Back ",-1)])]),_:1})):C("",!0),n(c(oe),{fill:"outline",onClick:e[6]||(e[6]=ie(O=>P("pbs"),["stop"]))},{default:d(()=>[V($(T("pbs")<A.value.length-1?"Next":"Finish"),1)]),_:1})])])]),_:1})):C("",!0),B("pmh")?(o(),L(c(ve),{key:3,value:"pmh",class:"_card"},{default:d(()=>[n(c(Q),{slot:"header",color:"light"},{default:d(()=>[n(c(le),{class:"previousLabel"},{default:d(()=>[...e[21]||(e[21]=[V("Past medical history",-1)])]),_:1})]),_:1}),a("div",ws,[n(ps,{"is-active":i.value==="pmh",ref_key:"pastMedicalHistoryFormRef",ref:D,onDataSaved:k},null,8,["is-active"]),a("div",Ss,[T("pmh")>0?(o(),L(c(oe),{key:0,fill:"outline",onClick:e[7]||(e[7]=ie(O=>y("pmh"),["stop"]))},{default:d(()=>[...e[22]||(e[22]=[V(" Back ",-1)])]),_:1})):C("",!0),n(c(oe),{fill:"outline",onClick:e[8]||(e[8]=ie(O=>P("pmh"),["stop"]))},{default:d(()=>[V($(T("pmh")<A.value.length-1?"Next":"Finish"),1)]),_:1})])])]),_:1})):C("",!0),B("al")?(o(),L(c(ve),{key:4,value:"al",class:"_card"},{default:d(()=>[n(c(Q),{slot:"header",color:"light"},{default:d(()=>[n(c(le),{class:"previousLabel"},{default:d(()=>[...e[23]||(e[23]=[V("Allergies",-1)])]),_:1})]),_:1}),a("div",Is,[n(Hn,{"is-active":i.value==="al",ref_key:"allergiesFormRef",ref:U,onDataSaved:k},null,8,["is-active"]),a("div",ks,[T("al")>0?(o(),L(c(oe),{key:0,fill:"outline",onClick:e[9]||(e[9]=ie(O=>y("al"),["stop"]))},{default:d(()=>[...e[24]||(e[24]=[V(" Back ",-1)])]),_:1})):C("",!0),n(c(oe),{fill:"outline",onClick:e[10]||(e[10]=ie(O=>P("al"),["stop"]))},{default:d(()=>[V($(T("al")<A.value.length-1?"Next":"Finish"),1)]),_:1})])])]),_:1})):C("",!0),B("pe")?(o(),L(c(ve),{key:5,value:"pe",class:"_card"},{default:d(()=>[n(c(Q),{slot:"header",color:"light"},{default:d(()=>[n(c(le),{class:"previousLabel"},{default:d(()=>[...e[25]||(e[25]=[V("Physical examination",-1)])]),_:1})]),_:1}),a("div",Ps,[n(fs,{"is-active":i.value==="pe",ref_key:"physicalExaminationFormRef",ref:_,onDataSaved:k},null,8,["is-active"]),a("div",Es,[T("pe")>0?(o(),L(c(oe),{key:0,fill:"outline",onClick:e[11]||(e[11]=ie(O=>y("pe"),["stop"]))},{default:d(()=>[...e[26]||(e[26]=[V(" Back ",-1)])]),_:1})):C("",!0),n(c(oe),{fill:"outline",onClick:e[12]||(e[12]=ie(O=>P("pe"),["stop"]))},{default:d(()=>[V($(T("pe")<A.value.length-1?"Next":"Finish"),1)]),_:1})])])]),_:1})):C("",!0)]),_:1},8,["value"])]),_:1})):C("",!0)],64)}}}),Oo=ce(xs,[["__scopeId","data-v-597092a6"]]);class Os extends pt{constructor(s,i){super(s,8,i)}static async getDiagnosis(s="",i=1,u=10){const v=await pe.getConceptID("Qech outpatient diagnosis list");return pt.getJson("diagnosis",{id:v,name:s,page:i,page_size:u})}}const Ns=J({name:"Menu",components:{IonContent:_t,IonHeader:gt,IonItem:Q,IonList:Ve,IonMenu:ft,IonTitle:vt,IonToolbar:mt,List:He},computed:{...Be(Se,["patient"])},data(){return{valueNumericArray:[],obsDatetime:[],graphIcon:Dt(["#006401"]),listIcon:bt(["#636363"]),displayGraph:!0,orders:[],height:[],BMI:[],iconBg:{},activeWeight:[],activeHeight:[],activeBMI:[],list:[],series:[{name:"",data:[]}]}},setup(){return{checkmark:ht,pulseOutline:Fe}},async mounted(){const t=await W.getAll(this.patient.patientID,"Primary diagnosis"),s=await W.getAll(this.patient.patientID,"Secondary diagnosis"),i=await W.getAll(this.patient.patientID,"Attempted/ Differential diagnosis"),u=[...t||[],...s||[],...i||[]],v=fe.isEmpty(u)?[]:Promise.all(u.map(async h=>({name:await W.getConceptName(h.value_coded),obs_date:h.obs_datetime})));this.setListData(await v)},methods:{dismiss(){bn.dismiss()},handleIcon(){},setActivClass(t){this.activeHeight="",this.activeBMI="",this.activeWeight="",t=="height"?this.activeHeight="_active":t=="weight"?this.activeWeight="_active":t=="BMI"&&(this.activeBMI="_active")},setListData(t){this.list=[],this.list.push({actionBtn:!1,class:"col_background",header:!0,minHeight:"--min-height: 25px;",display:["Date","Diagnosis","Notes"]}),t.forEach(s=>{this.list.push({actionBtn:!1,minHeight:"--min-height: 25px;",class:"col_background",display:[we.toStandardHisFormat(s.obs_date),s.name,""]})})}}}),As={class:"modal_wrapper"};function $s(t,s,i,u,v,h){const I=j("list");return o(),g("div",As,[a("div",null,[n(I,{listData:t.list},null,8,["listData"])])])}const Ms=ce(Ns,[["render",$s],["__scopeId","data-v-88580898"]]),Ts={class:"custom_card",style:{padding:"10px"}},Ls={key:0},Bs={key:0,style:{color:"red","margin-top":"10px",background:"lightgoldenrodyellow"}},Fs={class:"ion-padding",slot:"content"},Rs=J({__name:"OPDDiagnosis",setup(t,{expose:s}){const i=Ee,u=r(!0),v=r(!1),h=r(!0),I=r(!1),F=r(!0),k=r(""),S=r(""),x=r([]),D=r([]),U=r(),l=r(null);An();const _=z(()=>D.value.some(p=>p.data.concept_id===6542));de(D,()=>{P()},{deep:!0});const N=z(()=>[{name:"primaryDiagnosis",header:"Primary Diagnosis",componentType:"multiSelectInputField",options:x.value,icon:i.search,onSearchChange:T,validation:Ae.required},{componentType:"checkboxField",label:"Secondary Diagnosis",type:"single",grid:{s:"6"},name:"secondaryDiagnosisCheckbox"},{componentType:"checkboxField",label:"Differential Diagnosis",type:"single",grid:{s:"6"},name:"differentialDiagnosisCheckbox"},{componentType:"Dashes"},{name:"secondaryDiagnosis",header:"Secondary Diagnosis",componentType:"multiSelectInputField",isMultiple:!0,options:x.value,icon:i.search,condition:p=>p==null?void 0:p.secondaryDiagnosisCheckbox,onSearchChange:T,validation:(p,e)=>w(e,"secondaryDiagnosis")},{name:"differentialDiagnosis",header:"Differential Diagnosis",componentType:"multiSelectInputField",options:x.value,icon:i.search,isMultiple:!0,condition:p=>p==null?void 0:p.differentialDiagnosisCheckbox,onSearchChange:T,validation:(p,e)=>w(e,"differentialDiagnosis")}]),w=(p,e)=>{var te,q,Ie;if(!p)return null;const E=(te=p.primaryDiagnosis)==null?void 0:te.name,O=((q=p.secondaryDiagnosis)==null?void 0:q.map(se=>se.name))||[],K=((Ie=p.differentialDiagnosis)==null?void 0:Ie.map(se=>se.name))||[];if(e==="secondaryDiagnosis"&&O.includes(E)||e==="differentialDiagnosis"&&K.includes(E))return"".concat(E," is already the primary diagnosis");const ee=O.find(se=>K.includes(se));return ee?"".concat(ee," cannot be both secondary and differential"):null},M=()=>{S.value="",k.value="",u.value=!1,F.value=!1,v.value=!0},A=async()=>{var p;((p=l.value)==null?void 0:p.validateForm())==null&&(B(),v.value=!1,I.value=!0,F.value=!0,h.value=!1)},B=()=>{var te;const p=[],e=D.value.map(q=>q.name),E=((te=l.value)==null?void 0:te.getFormValues())||{},O=E.primaryDiagnosis||[],K=E.secondaryDiagnosis||[],ee=E.differentialDiagnosis||[];if(O.name&&!e.includes(O.name))if(!D.value.some(Ie=>Ie.data.concept_id===6542))p.push({actionBtn:!0,btn:["delete"],name:O.name,id:O.concept_id,display:[O.name,"Primary diagnosis"],data:{concept_id:6542,value_coded:O.concept_id,obs_datetime:he.getSessionDate()}});else return $n("Only one primary diagnosis is allowed"),!1;return K&&K.forEach(q=>{e.includes(q.name)||p.push({actionBtn:!0,btn:["delete"],name:q.name,id:q.concept_id,display:[q.name,"Secondary diagnosis"],data:{concept_id:6543,value_coded:q.concept_id,obs_datetime:he.getSessionDate()}})}),ee&&ee.forEach(q=>{e.includes(q.name)||p.push({actionBtn:!0,btn:["delete"],name:q.name,id:q.concept_id,display:[q.name,"Differential diagnosis"],data:{concept_id:10201,value_coded:q.concept_id,obs_datetime:he.getSessionDate()}})}),p.length>0&&(D.value=[...D.value,...p]),!0},T=async p=>{const e=p.trim().toLowerCase()||"";return x.value=await Os.getDiagnosis(e,1,15),x.value},y=p=>{const e=D.value,E=p.name,O=e.filter(K=>K.display[0]!==E);D.value=O},P=()=>{D.value.length>0?(I.value=!0,u.value=!1):v.value||(u.value=!0),F.value=!_.value},R=async()=>{if(D.value.length<=0){re("Diagnosis not saved");return}const p=D.value.flatMap(E=>E.data);if(p.length<=0)return re("Diagnosis not saved");const e=await W.addObsToEncounter(p,Y.DIAGNOSIS);await W.mergeObsToPatient(e),xe("Diagnosis saved successful"),D.value=[]};return ye(async()=>{P(),await T("")}),s({onSubmit:R}),(p,e)=>{const E=j("ion-row"),O=j("ion-label"),K=j("ion-accordion"),ee=j("ion-accordion-group");return o(),g(Z,null,[a("div",Ts,[n(St,{status:u.value,content:"No Diagnosis added"},null,8,["status"]),I.value?(o(),g("span",Ls,[n(He,{listData:D.value,"onClicked:delete":y},null,8,["listData"]),_.value?(o(),g("div",Bs," In order to update the diagnosis list, please remove/delete the primary diagnosis only and then re-add or change it along with the secondary and differential diagnoses. ")):C("",!0)])):C("",!0),v.value?(o(),L(E,{key:1},{default:d(()=>{var te;return[a("div",null,[n(Re,{formData:N.value,ref_key:"formRef",ref:l},null,8,["formData"])]),a("div",null,[n(De,{fill:"clear",icon:c(i).plus,iconSlot:"icon-only","onClicked:btn":e[0]||(e[0]=q=>A()),name:"Save",disabled:(te=l.value)==null?void 0:te.validateForm(),class:"ion-margin-top"},null,8,["icon","disabled"])])]}),_:1})):C("",!0),F.value?(o(),L(E,{key:2,style:{"margin-top":"10px"}},{default:d(()=>[n(De,{fill:"clear",icon:c(i).plus,iconSlot:"icon-only","onClicked:btn":e[1]||(e[1]=te=>M()),name:"Add new Diagnosis"},null,8,["icon"])]),_:1})):C("",!0)]),n(E,null,{default:d(()=>[n(ee,{ref_key:"accordionGroup",ref:U,class:"previousView"},{default:d(()=>[n(K,{value:"first","toggle-icon-slot":"start",class:"custom_card"},{default:d(()=>[n(c(Q),{slot:"header",color:"light"},{default:d(()=>[n(O,{class:"previousLabel"},{default:d(()=>[...e[2]||(e[2]=[V("Previous Diagnosis",-1)])]),_:1})]),_:1}),a("div",Fs,[n(Ms)])]),_:1})]),_:1},512)]),_:1})],64)}}}),No=ce(Rs,[["__scopeId","data-v-a440f286"]]),Vs={class:"allergies-section"},Hs={class:"allergies-container"},Us={class:"medication-section"},Ws={class:"medication-content"},qs={key:0,class:"add-medication-form"},Gs={class:"form-group"},zs={class:"option-label"},Ys={key:0,class:"error-message"},js={class:"form-row"},Ks={class:"form-group"},Qs={key:0,class:"error-message"},Xs={class:"form-group"},Js={key:0,class:"error-message"},Zs={class:"form-group"},eo={key:0,class:"error-message"},to={class:"action-buttons"},no={class:"notes-section"},ao={class:"notes-content"},so={class:"notes-input-container"},oo={class:"ion-padding",slot:"content"},io={class:"notes-timeline"},lo={class:"note-date"},ro={class:"note-content"},co={class:"ion-padding",slot:"content"},uo={class:"note-date"},po={class:"note-content"},mo=J({watch:{},name:"xxxComponent"}),vo=J({...mo,setup(t){const s=Ee,i=Gn,u=r(!1),v=r(!1),h=r(!0),I=r(0),F=r(""),k=r(!1),S=r(),x=r(!1),D=r(""),U=r(""),l=r(""),_=r(""),N=r(""),w=r(""),M="Add new medication",A=Pe(),B=wt(),T=z(()=>B.selectedMedicalAllergiesList),y=z(()=>A.selectedMedicalDrugsList),P=z(()=>A.partialOPDdrugList),R=z(()=>A.nonPharmalogicalTherapyAndOtherNotes),p=["first","second","third"],e=r(),E=r(),O=r(),K=r(!1),ee=r(!1),te=r("Show more notes"),q=r(),Ie=r(),se=r(),Me=z(()=>A.editingDrugItem),Mt=r("Select a route"),Ue=r(!1),Tt=r("Select frequency"),We=r(!1),Lt=r("Select drug"),qe=r(!1),ne=r(),ae=r(),me=r(),Oe=r([]),Bt=r([{concept_id:11797,name:"Buccal",concept_name_id:null,id:1769},{concept_id:11794,name:"Intradermal",concept_name_id:null,id:6284},{concept_id:11795,name:"Intramuscular (IM)",concept_name_id:null,id:6285},{concept_id:11799,name:"Intraosseous",concept_name_id:null,id:6286},{concept_id:11793,name:"Intravenous (IV)",concept_name_id:null,id:6295},{concept_id:3327,name:"Oral",concept_name_id:null,id:8686},{concept_id:11800,name:"Other method of prescription",concept_name_id:null,id:8920},{concept_id:11792,name:"Rectally",concept_name_id:null,id:10785},{concept_id:11798,name:"Subcutaneous",concept_name_id:null,id:12342},{concept_id:11796,name:"Sublingual",concept_name_id:null,id:12344},{concept_id:11792,name:"Rectally",concept_name_id:null,id:14078},{concept_id:11793,name:"Intravenous (IV)",concept_name_id:null,id:14079},{concept_id:11794,name:"Intradermal",concept_name_id:null,id:14080},{concept_id:11795,name:"Intramuscular (IM)",concept_name_id:null,id:14081},{concept_id:11796,name:"Sublingual",concept_name_id:null,id:14082},{concept_id:11797,name:"Buccal",concept_name_id:null,id:14083},{concept_id:11798,name:"Subcutaneous",concept_name_id:null,id:14084},{concept_id:11799,name:"Intraosseous",concept_name_id:null,id:14085},{concept_id:11800,name:"Other method of prescription",concept_name_id:null,id:14086}]),Ft=z(()=>Oe.value.length?Oe.value:Bt.value);function Rt(f){ne.value=f}async function Vt(){return await zn()}async function Ht(f=5,m=1e3){let b=0;for(;b<f&&(Oe.value=await Vt(),!(Oe.value.length>0));)b++,await new Promise(H=>setTimeout(H,m));Oe.value.length===0&&console.warn("Failed to fetch route list after maximum retries.")}ye(async()=>{const f=new Un,{previousDrugPrescriptions:m,previousClinicalNotes:b,previousDrugAllergies:H}=await f.getPatientEncounters();e.value=m,E.value=Object.entries(b)[0];const[,...G]=Object.entries(b);O.value=G,q.value=Object.entries(H)[0];const[,...X]=Object.entries(H);Ie.value=X,await Ht()}),de(()=>U.value,async f=>{zt()}),de(()=>l.value,async f=>{Xe()});function Ut(){if(fe.isEmpty(ne.value)==!0)return Ue.value=!0,!1;if(fe.isEmpty(ne.value)==!1)return Ue.value=!1,!0}function Wt(){if(fe.isEmpty(ae.value)==!0)return We.value=!0,!1;if(fe.isEmpty(ae.value)==!1)return We.value=!1,!0}function qt(){if(fe.isEmpty(me.value)==!0)return qe.value=!0,!1;if(fe.isEmpty(me.value)==!1)return qe.value=!1,!0}function Gt(){h.value=!h.value,u.value=!0,k.value=!1,x.value=!1}async function zt(){return et(U.value)?k.value=!1:(F.value="please enter a number",k.value=!0),k.value}async function Xe(){return et(l.value)?x.value=!1:(S.value="please enter a number",x.value=!0),x.value}async function Je(){const f=await Xe(),m=Wt(),b=qt(),H=Ut();return!f&&m==!0&&b==!0&&H==!0}function Yt(f){ae.value=f}async function Ze(){try{const f=()=>se.value.dose_strength!=null&&se.value.dose_strength?Math.trunc(se.value.dose_strength):1;if(Me.value!==null){if(!await Je()){re("Please enter correct data values",4e3);return}const b=he.getSessionDate(),H=tt(b,parseInt(l.value));let G=!1;Ge(se.value)==!0&&(G=!0);const X={drugName:D.value,dose:f(),frequency:ae.value.label,frequency_code:ae.value.code,duration:l.value,prescription:H,drug_id:w.value,units:N.value,route_concept_id:ne.value.concept_id,route_name:ne.value.name,highlightbackground:G},ze=Pe();console.log(ze.setSelectedMedicalDrugsList([X])),ze.editingDrugItem=null,h.value=!0}else{if(!await Je()){re("Please enter correct data values",4e3);return}nn();const b=he.getSessionDate(),H=tt(b,parseInt(l.value));let G=!1;Ge(se.value)==!0&&(G=!0);const X={drugName:D.value,dose:f(),frequency:ae.value.label,frequency_code:ae.value.code,duration:l.value,prescription:H,drug_id:w.value,units:N.value,route_concept_id:ne.value.concept_id,route_name:ne.value.name,highlightbackground:G};Pe().setSelectedMedicalDrugsList([X])}w.value="",D.value="",U.value="",ae.value=null,l.value="",_.value="",I.value++,me.value=null,ne.value=null}catch(f){console.error("Error saving data:",f)}}async function jt(f){const m=f,G=await Ln.getOfflineOPDDrugs({name:m,page:1,page_size:10});G.map(X=>({label:X.name,value:X.name,other:X})),A.setPartialOPDdrugList(G)}function Ge(f){const m=[];return T.value.forEach(H=>{H.selected&&m.push(H.concept_id)}),Kt([f],m)==!0?(re("Client is allergic to the selected medication",4e6),!0):!1}function Kt(f,m){try{return f.some(b=>m.includes(b.concept_id))}catch(b){return!1}}function Qt(f){f&&(D.value=f.name,w.value=f.drug_id,N.value=f.units,se.value=f,Ge(f))}function Xt(f){const m=y.value[f],b=Pe();b.removeDrugById(m.drug_id),b.editingDrugItem=m,w.value="",D.value="",U.value="",ae.value=null,l.value="",_.value="",me.value=null,ne.value=null,w.value=m.drug_id,D.value=m.drugName,U.value=m.dose,ae.value={label:m.frequency,code:m.frequency_code},l.value=m.duration,_.value=m.prescription;const H=P.value.find(G=>G.name===m.drugName);H&&(me.value=H),ne.value={concept_id:m.route_concept_id,name:m.route_name},h.value=!1,I.value++}function Jt(){if(Me.value!==null){w.value="",D.value="",U.value="",ae.value=null,l.value="",_.value="",me.value=null,ne.value=null;const f=Pe();f.setSelectedMedicalDrugsList([Me.value]),f.editingDrugItem=null}h.value=!0,I.value++}function Zt(f){y.value.splice(f,1),I.value++,re("you have removed a drug from list",6e3)}function en(f){let m=f.target.value;tn(m)}function tn(f){Pe().setNonPharmalogicalTherapyAndOtherNotes(f)}function et(f){return/^[0-9]+$/.test(f)}function tt(f,m){const b=new Date(f);b.setDate(b.getDate()+m);const H=b.getFullYear(),G=String(b.getMonth()+1).padStart(2,"0"),X=String(b.getDate()).padStart(2,"0");return"".concat(H,"-").concat(G,"-").concat(X)}function nn(){u.value=!1,v.value=!0,h.value=!0}function an(f){p.filter(b=>b!==f.detail.value);const m=f.detail.value;m!==void 0?m=="third"&&(te.value="Show less notes",ee.value=!K.value):(te.value="Show more notes",ee.value=!K.value)}function sn(f){return f[1]}function on(f){(f.key==="Enter"||f.key==="ArrowDown")&&(f.preventDefault(),Ze())}const ke=z(()=>[{showAddItemButton:!0,addItemButton:!0,name:Me.value!==null?"Update":"ADD",fn:Ze},{showAddItemButton:!0,addItemButton:!0,name:"CANCEL",fn:ln}]),ln=async()=>{Mn(Tn,{class:"otherVitalsModal"},!0,{message:"Are you sure you want to cancle?"},{cancel:H=>{},confirm:async H=>{H.detail==!0&&Jt()}})};return(f,m)=>(o(),L(c(Ve),null,{default:d(()=>[a("div",Vs,[a("div",Hs,[n($t)])]),a("div",Us,[n(c(Q),{lines:"none",class:"section-header"},{default:d(()=>[n(c(Te),{icon:c($e),class:"section-icon"},null,8,["icon"]),n(c(le),{class:"section-title",style:{"margin-top":"12px"}},{default:d(()=>[...m[9]||(m[9]=[V("Medication",-1)])]),_:1})]),_:1}),a("div",Ws,[(o(),L(Wn,{_selectedMedicalDrugsList:y.value,onEditItem:Xt,onRemoveItem:Zt,key:I.value,class:"medication-list"},null,8,["_selectedMedicalDrugsList"])),h.value?C("",!0):(o(),g("div",qs,[a("div",Gs,[m[10]||(m[10]=a("label",{class:"input-label"},"Medication",-1)),n(c(Ye),{modelValue:me.value,"onUpdate:modelValue":[m[0]||(m[0]=b=>me.value=b),m[1]||(m[1]=b=>Qt(b))],options:P.value,searchable:!0,"close-on-select":!0,"show-labels":!1,placeholder:"Select medication",label:"name","track-by":"drug_id",onSearchChange:m[2]||(m[2]=b=>jt(b))},{option:d(b=>[a("div",zs,$(b.option.name),1)]),_:1},8,["modelValue","options"]),qe.value?(o(),g("div",Ys,$(Lt.value),1)):C("",!0)]),a("div",js,[a("div",Ks,[m[11]||(m[11]=a("label",{class:"input-label"},"Route",-1)),n(c(Ye),{modelValue:ne.value,"onUpdate:modelValue":[m[3]||(m[3]=b=>ne.value=b),m[4]||(m[4]=b=>Rt(b))],options:Ft.value,searchable:!0,"close-on-select":!0,"show-labels":!1,placeholder:"Select route",label:"name","track-by":"concept_id",disabled:!1},null,8,["modelValue","options"]),Ue.value?(o(),g("div",Qs,$(Mt.value),1)):C("",!0)]),a("div",Xs,[m[12]||(m[12]=a("label",{class:"input-label"},"Frequency",-1)),n(c(Ye),{modelValue:ae.value,"onUpdate:modelValue":[m[5]||(m[5]=b=>ae.value=b),m[6]||(m[6]=b=>Yt(b))],options:c(i),searchable:!0,"close-on-select":!0,"show-labels":!1,placeholder:"Select frequency",label:"label","track-by":"code"},null,8,["modelValue","options"]),We.value?(o(),g("div",Js,$(Tt.value),1)):C("",!0)]),a("div",Zs,[m[13]||(m[13]=a("label",{class:"input-label"},"Duration (days)",-1)),n(c(Dn),{modelValue:l.value,"onUpdate:modelValue":m[7]||(m[7]=b=>l.value=b),type:"number",inputmode:"numeric",pattern:"[0-9]*",fill:"outline",placeholder:"Enter duration",onKeydown:on},null,8,["modelValue"]),x.value?(o(),g("div",eo,$(S.value),1)):C("",!0)])]),a("div",to,[ke.value[0].addItemButton?(o(),L(De,{key:0,name:ke.value[0].name,icon:c(Cn),"onClicked:btn":ke.value[0].fn,class:"save-button"},null,8,["name","icon","onClicked:btn"])):C("",!0),ke.value[1].addItemButton?(o(),L(De,{key:1,name:ke.value[1].name,icon:c(wn),"onClicked:btn":ke.value[1].fn,class:"cancel-button"},null,8,["name","icon","onClicked:btn"])):C("",!0)])])),h.value?(o(),L(De,{key:1,name:M,icon:c(Le),fontWeight:"600","onClicked:btn":Gt,class:"add-new-button"},null,8,["icon"])):C("",!0)])]),a("div",no,[n(c(Q),{lines:"none",class:"section-header"},{default:d(()=>[n(c(Te),{icon:c(Sn),class:"section-icon"},null,8,["icon"]),n(c(le),{class:"section-title"},{default:d(()=>[...m[14]||(m[14]=[V("Non-pharmacological therapy and other notes",-1)])]),_:1})]),_:1}),a("div",ao,[n(qn,{class:"intervention-component"}),a("div",so,[n(c(Q),{class:"notes-input-item"},{default:d(()=>[n(c(Te),{slot:"start",icon:c(s).editPen,class:"edit-icon","aria-hidden":"true"},null,8,["icon"]),n(c(In),{modelValue:R.value,"onUpdate:modelValue":m[8]||(m[8]=b=>R.value=b),onIonInput:en,placeholder:"Enter notes here...","auto-grow":!0,class:"notes-textarea",fill:"outline",style:{"--padding-start":"16px"}},null,8,["modelValue"])]),_:1})]),n(c(je),{ref:"accordionGroup",class:"previous-notes"},{default:d(()=>[n(c(ve),{value:"fourth","toggle-icon-slot":"start"},{default:d(()=>[n(c(Q),{slot:"header",color:"light",class:"previous-notes-header"},{default:d(()=>[n(c(le),null,{default:d(()=>[...m[15]||(m[15]=[V("Previous visit notes",-1)])]),_:1})]),_:1}),a("div",oo,[a("div",io,[f.index===1?(o(!0),g(Z,{key:0},ue(E.value,(b,H)=>(o(),g("div",{key:H,class:"note-entry"},[(o(!0),g(Z,null,ue(b,(G,X)=>(o(),g("div",{key:X},[a("div",lo,$(G.date),1),a("div",ro,$(G.notes),1)]))),128))]))),128)):C("",!0),n(c(je),{onIonChange:an},{default:d(()=>[n(c(ve),{value:"third","toggle-icon-slot":"start"},{default:d(()=>[n(c(Q),{slot:"header",color:"light",class:"show-more-header"},{default:d(()=>[n(c(le),{color:"primary"},{default:d(()=>[V($(te.value),1)]),_:1})]),_:1}),a("div",co,[(o(!0),g(Z,null,ue(O.value,(b,H)=>(o(),g("div",{key:H,class:"note-entry"},[(o(!0),g(Z,null,ue(sn(b),(G,X)=>(o(),g("div",{key:X},[a("div",uo,$(G.date),1),a("div",po,$(G.notes),1)]))),128))]))),128))])]),_:1})]),_:1})])])]),_:1})]),_:1},512)])])]),_:1}))}}),Ao=ce(vo,[["__scopeId","data-v-928c62f1"]]),fo={class:"dash_box"},go={key:1},_o=J({name:"xxxComponent"}),ho=J({..._o,setup(t){const s=r("No outcome created yet"),i=r(!1),u=r("please select a type");r("Add new outcome"),r(!0);const v=r(!0),h=r(""),I=r(!0),F=r(!1),k=Bn(),S=z(()=>k.outcomes),x=r(!1),D=r(!1),U=r(!1),l=r(!1),_=r(!1);r(null),r(null);const N=r([{name:"Admitted for short stay",selected:!1},{name:"Referred out",selected:!1},{name:"Discharged Home",selected:!1}]),w=[{multi_Selection:!1,show_list_label:!0,unqueId:"qwerty2",name_of_list:"Add new outcome",placeHolder:"Choose one",items:N.value,listUpdatedFN:M,listFilteredFN:()=>{},use_internal_filter:!0,disabled:r(!1)}];function M(p){N.value=p,N.value.forEach(e=>{e.selected==!0&&(h.value=e.name)})}ye(async()=>{B()}),de(()=>h.value,async p=>{x.value==!0?x.value=!1:P()}),de(()=>S.value.length,async p=>{B()});function A(){N.value.forEach(p=>{p.selected=!1}),h.value=""}function B(){S.value.length>0?I.value=!1:S.value.length==0&&F.value==!1&&(I.value=!0)}function T(p){S.value.splice(p,1)}const y=p=>{};async function P(p=!0){const e=h.value;console.log(e),h.value=e;const E=h.value;E==N.value[0].name?U.value=!0:U.value=!1,E==N.value[1].name?(l.value=!0,console.log("show_discharged_options is set to true")):l.value=!1,E==N.value[2].name?(_.value=!0,console.log("show_discharged_options is set to true")):_.value=!1}function R(){D.value=!1,U.value=!1,l.value=!1,_.value=!1,A()}return(p,e)=>{const E=j("ion-row");return o(),L(c(Ve),null,{default:d(()=>[n(E,null,{default:d(()=>[n(c(dt),null,{default:d(()=>[(o(),L(Yn,{key:0,"onUpdate:removeItem":T,"onUpdate:editItem":y,displayData:S.value},null,8,["displayData"]))]),_:1})]),_:1}),I.value?(o(),L(E,{key:0},{default:d(()=>[a("span",fo,$(s.value),1)]),_:1})):C("",!0),v.value?(o(),g("div",go,[n(E,null,{default:d(()=>[n(c(dt),null,{default:d(()=>[n(Fn,{multiSelection:w[0].multi_Selection,show_label:w[0].show_list_label,uniqueId:w[0].unqueId,name_of_list:w[0].name_of_list,choose_place_holder:w[0].placeHolder,"items_-list":w[0].items,use_internal_filter:w[0].use_internal_filter,disabled:w[0].disabled.value,onItemListUpDated:w[0].listUpdatedFN,onItemListFiltered:w[0].listFilteredFN},null,8,["multiSelection","show_label","uniqueId","name_of_list","choose_place_holder","items_-list","use_internal_filter","disabled","onItemListUpDated","onItemListFiltered"]),a("div",null,[i.value?(o(),L(c(le),{key:0,class:"error-label"},{default:d(()=>[V($(u.value),1)]),_:1})):C("",!0)])]),_:1})]),_:1})])):C("",!0),U.value?(o(),L(jn,{key:2,onDataSaved:R,selected_ward_prop:"",admitted_other_props:""})):C("",!0),l.value?(o(),L(Kn,{key:3,onDataSaved:R,selected_referral_data:"",selected_other_referral_data:""})):C("",!0),_.value?(o(),L(Qn,{key:4,onDataSaved:R,selected_discharged_prop:"",selected_discharged_data:""})):C("",!0)]),_:1})}}}),$o=ce(ho,[["__scopeId","data-v-b6576c18"]]);export{Oo as C,No as O,oa as P,rs as _,Ao as a,$o as b,fs as c,is as d,Os as e};
