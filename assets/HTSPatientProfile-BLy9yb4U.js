import{ap as ge,r as S,c as ce,e as w,f,k as o,l as s,F as ve,O as ye,Y as xe,J as n,u as e,aa as m,a0 as ke,p as j,b1 as v,K as g,a9 as y,bu as pe,bp as we,d as Ie,ak as be,aT as Ce,w as fe,a as Se,H as me,cM as Re,m as b,N as V,P as i,M as C,dA as Te,a1 as _,ai as De,ah as $,ab as Pe,d9 as Y,Z as Me}from"./vendor-BTD4y0_l.js";import{l as He}from"./lodash-Dt8AsbQm.js";import{_ as he,u as Ee,l as Oe,H as B,o as _e,P as Ve,j as $e}from"./index-B-oVUrjU.js";import{u as Be}from"./usePatientProfile-cNY9rbn_.js";import Ae from"./WeightHeightChart-B1fwL6rl.js";import{O as Fe,w as Ne}from"./weightAndHeight-qdeYa8M0.js";import"./apexcharts-DR6FmxCR.js";import"./Registration-BaTnaPyt.js";import"./useLocation-DnOJitf_.js";import"./useExposeFromStandardForm-C6-IUGrn.js";import"./vaccines_service-CYVjN0Ib.js";import"./sms_service-k7_2dsLU.js";import"./EIRreportsStore-BQ6HmNCJ.js";import"./Export-B4R5oVWG.js";import"./Outcome-C_tDAAcv.js";import"./chartjs-nzlBkdg_.js";import"./BasicForm-i3AKR9HE.js";import"./DateInputField-BgPy1bai.js";import"./customDatePicker.vue_vue_type_style_index_0_lang-CuV8NKGS.js";import"./VitalsMixin.vue_vue_type_script_lang-C4aUAqoW.js";import"./formatServerData-DWtumL0l.js";import"./barcode-qrcode-reader-CrlC_VHh.js";import"./stock_service-BWAG4FkR.js";const We=["onKeydown"],ze={class:"ripple-container"},Ue=["onAnimationend"],Le={class:"status-badge"},Ke={class:"ion-text-wrap"},Ye={__name:"ReferralCard",props:{icon:{type:String,default:ge},status:{type:String,default:"Referred OPD"},title:{type:String,required:!0},type:{type:String,default:"default"},disabled:{type:Boolean,default:!1}},emits:["pressed","click"],setup(M,{emit:W}){const c=M,A=W,k=S(!1),H=S(null),R=S([]);let z=0;const U=ce(()=>{if(c.disabled)return"timeline-item-disabled";switch(c.type){case"hiv":return"timeline-item-hiv";case"hepatitis":return"timeline-item-hepatitis";default:return"timeline-item-default"}}),F=ce(()=>{if(c.disabled)return"icon-container-disabled";switch(c.type){case"hiv":return"icon-container-hiv";case"hepatitis":return"icon-container-hepatitis";default:return"icon-container-default"}}),I=r=>{if(c.disabled||!H.value)return;const p=H.value.getBoundingClientRect(),u=Math.max(p.width,p.height)*2;let D,d;if(r.type==="keydown")D=p.width/2-u/2,d=p.height/2-u/2;else{const x=r.type.includes("touch")?r.touches[0].clientX:r.clientX,P=r.type.includes("touch")?r.touches[0].clientY:r.clientY;D=x-p.left-u/2,d=P-p.top-u/2}const t={id:z++,x:D,y:d,size:u,duration:600};R.value.push(t)},T=r=>{const p=R.value.findIndex(u=>u.id===r);p>-1&&R.value.splice(p,1)},E=r=>{c.disabled||(I(r),A("pressed",{type:c.type,title:c.title,status:c.status,event:r}),A("click",r))},a=r=>{c.disabled||(k.value=!0,I(r))},O=()=>{k.value=!1},L=()=>{k.value=!1},N=r=>{c.disabled||(k.value=!0,I(r))},K=()=>{k.value=!1};return(r,p)=>(f(),w("div",{class:j(["timeline-item",U.value,{"timeline-item-pressed":k.value}]),onClick:E,onMousedown:a,onMouseup:O,onMouseleave:L,onTouchstart:N,onTouchend:K,role:"button",tabindex:"0",onKeydown:[pe(E,["enter"]),pe(we(E,["prevent"]),["space"])],ref_key:"timelineElement",ref:H},[o("div",ze,[(f(!0),w(ve,null,ye(R.value,u=>(f(),w("div",{key:u.id,class:"ripple",style:xe({left:u.x+"px",top:u.y+"px",width:u.size+"px",height:u.size+"px",animationDuration:u.duration+"ms"}),onAnimationend:D=>T(u.id)},null,44,Ue))),128))]),s(e(y),null,{default:n(()=>[s(e(m),{class:"ion-text-center"},{default:n(()=>[o("div",null,[s(e(ke),{class:j(["icon-container",F.value]),icon:M.icon,"aria-hidden":"true"},null,8,["class","icon"])])]),_:1}),s(e(m),{class:"ion-text-center"},{default:n(()=>[s(e(v),null,{default:n(()=>[o("span",Le,g(M.status),1)]),_:1})]),_:1}),s(e(m),{class:"ion-text-center"},{default:n(()=>[s(e(v),null,{default:n(()=>[o("h2",Ke,g(M.title),1)]),_:1})]),_:1})]),_:1})],42,We))}},X=he(Ye,[["__scopeId","data-v-de64752c"]]),Xe={fullscreen:!0,style:{"--background":"#fff"}},je={class:"demographics"},Ge={style:{"text-overflow":"ellipsis"}},qe={style:{display:"flex","justify-content":"space-between","align-content":"center","padding-bottom":"5px","padding-top":"5px","padding-left":"5px"}},Je={style:{"margin-right":"5px"}},Ze={style:{"margin-top":"5px"}},Qe={class:"demographicsFirstRow"},et={class:"name custom-name-container"},tt={class:"demographicsOtherRow",style:{"margin-top":"10px"}},st={class:"demographicsText",style:{display:"flex","flex-wrap":"wrap"}},nt={style:{"flex-shrink":"0"}},ot={style:{"flex-shrink":"0"}},lt={key:0,class:"demographicsOtherRow"},it={class:"demographicsText mediumFontColor"},at={key:1,class:"demographicsOtherRow"},rt={class:"demographicsText mediumFontColor"},dt={class:"demographicsOtherRow"},ut={class:"demographicsText smallFont"},ct={class:"mediumFontColor"},pt={style:{background:"transparent"}},ft={class:"graphSection"},mt={class:"graphBtn",style:{"margin-bottom":"5px"}},_t={class:"weightHeightGraphBtns"},vt={key:0},ht={key:1},gt={class:"test-results-container"},yt={class:"test-buttons-container"},xt={style:{"margin-left":"10px","margin-right":"10px","margin-top":"10px"}},kt={class:"ion-padding",slot:"content"},wt=Ie({__name:"HTSPatientProfile",setup(M){const{event:W,popoverOpen:c,openPopover:A,openPIM:k,printVisitSummary:H,printID:R,formatCurrentAddress:z}=Be(),U=be(),F=Oe;S("");const I=S(!1),T=S(7);S(null);const E=Ee(),{patient:a}=Ce(E),O=async d=>{T.value=d},L=d=>B.calculateDisplayAge(B.toStandardHisFormat(d)),N=()=>{var d,t,x,P;He.isEmpty((t=(d=a.value)==null?void 0:d.personInformation)==null?void 0:t.birthdate)||(I.value=B.dateDiffInDays(B.sessionDate(),(P=(x=a.value)==null?void 0:x.personInformation)==null?void 0:P.birthdate)<42)},K=()=>{_e(Fe,{class:"otherVitalsModal"})},r=()=>{_e(Ne,{class:"otherVitalsModal"})},p=()=>!!new Ve().isUnderFive(),u=()=>{var d,t;return B.toStandardHisDisplayFormat((t=(d=a.value)==null?void 0:d.personInformation)==null?void 0:t.birthdate)};fe(()=>U.currentRoute.value,async d=>{d.name=="patientProfile"&&a.value.patientID});const D=d=>{console.log(d)};return fe(a,async()=>{a&&N()}),Se(async()=>{N()}),(d,t)=>{var G,q,J,Z,Q,ee,te,se,ne,oe,le,ie,ae,re,de,ue;const x=me("ion-icon"),P=me("ion-chip");return f(),w(ve,null,[o("div",Xe,[o("div",je,[o("div",Ge,[o("div",qe,[o("div",Je,[s(e(y),null,{default:n(()=>[s(e(m),null,{default:n(()=>{var l,h;return[o("div",{class:j(((h=(l=e(a))==null?void 0:l.personInformation)==null?void 0:h.gender)=="M"?"initialsBox maleColor":"initialsBox femaleColor"),style:{display:"flex","flex-direction":"column","align-items":"center"}},[s(x,{style:{color:"#fff","font-size":"100px"},icon:e(Re)},null,8,["icon"])],2)]}),_:1})]),_:1}),s(e(y),null,{default:n(()=>[s(e(m),null,{default:n(()=>t[12]||(t[12]=[o("span",{class:"pill-text"},"Returning Client",-1)])),_:1,__:[12]})]),_:1})]),o("div",Ze,[o("div",Qe,[o("div",et,[(q=(G=e(a))==null?void 0:G.personInformation)!=null&&q.given_name?(f(),V(e(y),{key:0,class:"custom-name-row"},{default:n(()=>[s(e(m),{class:"custom-name-col"},{default:n(()=>{var l,h;return[i(g((h=(l=e(a))==null?void 0:l.personInformation)==null?void 0:h.given_name),1)]}),_:1})]),_:1})):b("",!0),(Z=(J=e(a))==null?void 0:J.personInformation)!=null&&Z.middle_name?(f(),V(e(y),{key:1,class:"custom-name-row"},{default:n(()=>[s(e(m),{class:"custom-name-col"},{default:n(()=>{var l,h;return[i(g((h=(l=e(a))==null?void 0:l.personInformation)==null?void 0:h.middle_name),1)]}),_:1})]),_:1})):b("",!0),(ee=(Q=e(a))==null?void 0:Q.personInformation)!=null&&ee.family_name?(f(),V(e(y),{key:2,class:"custom-name-row"},{default:n(()=>[s(e(m),{class:"custom-name-col"},{default:n(()=>{var l,h;return[i(g((h=(l=e(a))==null?void 0:l.personInformation)==null?void 0:h.family_name),1)]}),_:1})]),_:1})):b("",!0)])]),o("div",tt,[o("div",st,[o("span",nt,g(((se=(te=e(a))==null?void 0:te.personInformation)==null?void 0:se.gender)=="M"?"Male":"Female"),1),t[13]||(t[13]=o("span",{style:{"flex-shrink":"0"}},".",-1)),o("span",ot,g(L((oe=(ne=e(a))==null?void 0:ne.personInformation)==null?void 0:oe.birthdate))+" ("+g(u())+")",1)])]),(ie=(le=e(a))==null?void 0:le.personInformation)!=null&&ie.current_district?(f(),w("div",lt,[t[14]||(t[14]=o("div",{class:"demographicsText"},"Current Address:",-1)),o("div",it,g(e(z)(e(a))),1)])):b("",!0),(re=(ae=e(a))==null?void 0:ae.personInformation)!=null&&re.country?(f(),w("div",at,[t[15]||(t[15]=o("div",{class:"demographicsText"},"Country:",-1)),o("div",rt,g((ue=(de=e(a))==null?void 0:de.personInformation)==null?void 0:ue.country),1)])):b("",!0),o("div",dt,[o("div",ut,[t[16]||(t[16]=i(" MRN: ",-1)),o("span",ct,g(e(a).ID),1)])])])])]),o("div",pt,[s(e(y),{class:"no-wrap-row",style:{"align-items":"center"}},{default:n(()=>[s(e(m),{style:{flex:"1","min-width":"0"}},{default:n(()=>[s(e(C),{class:"deactivate-button",fill:"solid",shape:"round"},{default:n(()=>t[17]||(t[17]=[i(" Deactivate Visit ",-1)])),_:1,__:[17]})]),_:1}),s(e(m),{size:"auto",style:{"flex-shrink":"0"}},{default:n(()=>[o("div",{class:"name",style:{color:"var(--ion-color-primary)","margin-top":"10px"},onClick:t[0]||(t[0]=l=>e(A)(l))},[s(x,{icon:e(Te)},null,8,["icon"])])]),_:1})]),_:1})])]),o("div",ft,[o("div",null,[p()?(f(),V(Ae,{key:0,checkUnderSixWeeks:I.value,showHeightWeight:!0},null,8,["checkUnderSixWeeks"])):b("",!0),p()?b("",!0):(f(),V($e,{key:1}))]),o("div",mt,[o("div",_t,[o("div",null,[s(e(C),{class:"btnText",fill:"solid",onClick:t[1]||(t[1]=l=>r())},{default:n(()=>[I.value?(f(),w("span",ht," Enter Weight")):(f(),w("span",vt," Enter Weight/Height")),s(x,{slot:"end",size:"small",icon:e(F).whiteHeightWeight},null,8,["icon"])]),_:1})]),o("div",null,[s(e(C),{class:"btnText",fill:"solid",onClick:t[2]||(t[2]=l=>K())},{default:n(()=>[t[18]||(t[18]=i(" Enter Other Vitals ",-1)),s(x,{slot:"end",size:"small",icon:e(F).whiteVitals},null,8,["icon"])]),_:1,__:[18]})])])])]),o("div",null,[s(e(_),{class:"new-orders-header"},{default:n(()=>[s(e(v),{class:"new-orders-label"},{default:n(()=>t[19]||(t[19]=[i(" NEW ORDERS ",-1)])),_:1,__:[19]})]),_:1}),o("div",gt,[o("div",yt,[s(e(C),{class:"test-button",fill:"outline",shape:"round"},{default:n(()=>t[20]||(t[20]=[i(" HIV ",-1)])),_:1,__:[20]}),s(e(C),{class:"test-button",fill:"outline",shape:"round"},{default:n(()=>t[21]||(t[21]=[i(" Hepatitis B ",-1)])),_:1,__:[21]}),s(e(C),{class:"test-button",fill:"outline",shape:"round"},{default:n(()=>t[22]||(t[22]=[i(" Syphilis ",-1)])),_:1,__:[22]})]),s(e(_),{class:"past-results-header"},{default:n(()=>[s(e(v),{class:"past-results-label"},{default:n(()=>t[23]||(t[23]=[i("PAST TEST RESULTS",-1)])),_:1,__:[23]}),s(e(C),{slot:"end",fill:"clear",class:"history-button"},{default:n(()=>t[24]||(t[24]=[i(" See full History... ",-1)])),_:1,__:[24]})]),_:1}),s(e(_),{class:"test-result-item"},{default:n(()=>[s(e(v),{class:"test-name"},{default:n(()=>t[25]||(t[25]=[i("Bioline",-1)])),_:1,__:[25]}),s(P,{slot:"end",class:"result-chip non-reactive"},{default:n(()=>[s(e(v),null,{default:n(()=>t[26]||(t[26]=[i("Non Reactive",-1)])),_:1,__:[26]})]),_:1})]),_:1}),t[27]||(t[27]=o("div",{class:"enter-results-container"},[o("a",{class:"enter-results-link"},"Enter Known Past Results")],-1))]),s(e(_),{class:"new-orders-header",style:{"margin-top":"10px"}},{default:n(()=>[s(e(v),{class:"new-orders-label"},{default:n(()=>t[28]||(t[28]=[i(" ORDERS FROM OTHER CLINICS ",-1)])),_:1,__:[28]})]),_:1}),o("div",xt,[s(e(y),null,{default:n(()=>[s(e(m),null,{default:n(()=>[s(X,{title:"HIV Test",status:"Referred OPD",type:"hiv",onPressed:t[3]||(t[3]=l=>D(l))})]),_:1})]),_:1}),s(e(y),null,{default:n(()=>[s(e(m),null,{default:n(()=>[s(X,{title:"hepatitis B",status:"Referred NCD",type:"hiv"})]),_:1})]),_:1}),s(e(y),null,{default:n(()=>[s(e(m),null,{default:n(()=>[s(X,{title:"Syphilis",status:"Referred ART",type:"hiv"})]),_:1})]),_:1})])])]),s(e(Me),{style:{"--offset-x":"-10px"},"is-open":e(c),"show-backdrop":!1,event:e(W),onDidDismiss:t[11]||(t[11]=l=>c.value=!1)},{default:n(()=>[o("div",null,[s(e(De),{multiple:!0},{default:n(()=>[s(e($),{value:"first","toggle-icon":"",onClick:t[4]||(t[4]=l=>e(k)())},{default:n(()=>[s(e(_),{slot:"header",color:"light"},{default:n(()=>[s(e(v),null,{default:n(()=>t[29]||(t[29]=[i("Update demographics",-1)])),_:1,__:[29]})]),_:1})]),_:1}),s(e($),{value:"first","toggle-icon":"",onClick:t[5]||(t[5]=()=>{})},{default:n(()=>[s(e(_),{slot:"header",color:"light"},{default:n(()=>[s(e(v),null,{default:n(()=>t[30]||(t[30]=[i("Follow up visits",-1)])),_:1,__:[30]})]),_:1})]),_:1}),s(e($),{value:"second","toggle-icon":"",onClick:t[6]||(t[6]=l=>e(H)())},{default:n(()=>[s(e(_),{slot:"header",color:"light"},{default:n(()=>[s(e(v),null,{default:n(()=>t[31]||(t[31]=[i("Print visit summary",-1)])),_:1,__:[31]})]),_:1})]),_:1}),s(e($),{value:"third","toggle-icon":"",onClick:t[7]||(t[7]=l=>e(R)())},{default:n(()=>[s(e(_),{slot:"header",color:"light"},{default:n(()=>[s(e(v),null,{default:n(()=>t[32]||(t[32]=[i("Print client identifier",-1)])),_:1,__:[32]})]),_:1})]),_:1}),s(e($),{value:"fourth"},{default:n(()=>[s(e(_),{slot:"header",color:"light"},{default:n(()=>[s(e(v),null,{default:n(()=>t[33]||(t[33]=[i("Update outcome",-1)])),_:1,__:[33]})]),_:1}),o("div",kt,[s(e(Pe),null,{default:n(()=>[s(e(_),null,{default:n(()=>[s(e(Y),{checked:T.value==7,value:"active",onIonChange:t[8]||(t[8]=l=>O(7))},{default:n(()=>t[34]||(t[34]=[i(" Active ",-1)])),_:1,__:[34]},8,["checked"])]),_:1}),s(e(_),null,{default:n(()=>[s(e(Y),{checked:T.value==6,value:"inactive",onIonChange:t[9]||(t[9]=l=>O(6))},{default:n(()=>t[35]||(t[35]=[i(" Inactive ",-1)])),_:1,__:[35]},8,["checked"])]),_:1}),s(e(_),null,{default:n(()=>[s(e(Y),{checked:T.value==3,value:"died",onIonChange:t[10]||(t[10]=l=>O(3))},{default:n(()=>t[36]||(t[36]=[i(" Died ",-1)])),_:1,__:[36]},8,["checked"])]),_:1})]),_:1})])]),_:1})]),_:1})])]),_:1},8,["is-open","event"])],64)}}}),Yt=he(wt,[["__scopeId","data-v-bbc20bd7"]]);export{Yt as default};
