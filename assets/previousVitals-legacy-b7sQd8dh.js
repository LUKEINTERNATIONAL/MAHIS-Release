System.register(["./vendor-legacy-CFX0KWSj.js","./apexcharts-legacy-DcOfzw73.js","./SvgDynamicColor-legacy-C92HKfAB.js","./index-legacy-DhOsa4Y5.js"],function(t,i){"use strict";var e,s,a,o,n,h,d,r,p,l,c,g,u,v,m,y,b,w,f,x,C,I,_,k,D,B,H,W,G,A;return{setters:[t=>{e=t.d,s=t.ar,a=t.U,o=t.T,n=t.as,h=t.ac,d=t.G,r=t.S,p=t.a9,l=t.X,c=t.a1,g=t.a2,u=t.E,v=t.e,m=t.f,y=t.k,b=t.m,w=t.p,f=t.y,x=t.l,C=t.F},t=>{I=t.m},t=>{_=t.L,k=t.a,D=t.i},t=>{B=t.H,H=t.Q,W=t.$,G=t.u,A=t._}],execute:function(){var i=document.createElement("style");i.textContent=".bmi_blood[data-v-0133bf5b]{font-size:14px;font-weight:500;border:1px solid #ddeedd;border-radius:4px;padding:4px;min-width:150px}.graphBtn[data-v-0133bf5b]{font-size:14px;font-weight:500;border:1px solid #ddeedd;border-radius:4px;padding:4px;min-width:60px}._active[data-v-0133bf5b]{background-color:#ded;color:#006401;padding:5px;border-radius:4px}.iconBg[data-v-0133bf5b]{background:#ded;padding:2px;border-radius:5px}.bmi_blood[data-v-7f069df7]{font-size:14px;font-weight:500;border:1px solid #ddeedd;border-radius:4px;padding:4px;min-width:150px}.graphBtn[data-v-7f069df7]{font-size:14px;font-weight:500;border:1px solid #ddeedd;border-radius:4px;padding:4px;min-width:60px}._active[data-v-7f069df7]{background-color:#ded;color:#006401;padding:5px;border-radius:4px}.iconBg[data-v-7f069df7]{background:#ded;padding:2px;border-radius:5px}\n/*$vite$:1*/",document.head.appendChild(i);const $=e({name:"Menu",components:{IonContent:p,IonHeader:r,IonItem:d,IonList:h,IonMenu:n,IonTitle:o,IonToolbar:a,List:_},computed:{...s(G,["patient"]),...s(W,["vitalsWeightHeight"])},data:()=>({valueNumericArray:[],obsDatetime:[],graphIcon:k(["#006401"]),listIcon:D(["#636363"]),displayGraph:!0,weight:[],height:[],BMI:[],iconBg:{},activeWeight:[],activeHeight:[],activeBMI:[],list:[]}),props:{propsContent:{default:{}}},setup:()=>({checkmark:g,pulseOutline:c}),methods:{async openVoidPopover(t){await H.voidObs(t.id.weightObsId),await H.voidObs(t.id.heightObsId),await this.updateData()},processObservations(){var t,i;if(!this.weight&&!this.height)return[];const e=new Set([...(null===(t=this.weight)||void 0===t?void 0:t.map(t=>t.obs_datetime))||[],...(null===(i=this.height)||void 0===i?void 0:i.map(t=>t.obs_datetime))||[]]);return Array.from(e).map(t=>{var i,e,s,a,o,n;return{ids:{weightObsId:null===(i=this.weight)||void 0===i||null===(i=i.find(i=>i.obs_datetime===t))||void 0===i?void 0:i.obs_id,heightObsId:null===(e=this.height)||void 0===e||null===(e=e.find(i=>i.obs_datetime===t))||void 0===e?void 0:e.obs_id},obs_datetime:t,weight:null!==(s=null===(a=this.weight)||void 0===a||null===(a=a.find(i=>i.obs_datetime===t))||void 0===a?void 0:a.value_numeric)&&void 0!==s?s:null,height:null!==(o=null===(n=this.height)||void 0===n||null===(n=n.find(i=>i.obs_datetime===t))||void 0===n?void 0:n.value_numeric)&&void 0!==o?o:null}})},async updateData(){try{if(!this.patient)throw"No offline record found";{var t,i;const e=[...null===(t=this.patient)||void 0===t||null===(t=t.vitals)||void 0===t?void 0:t.saved,...null===(i=this.patient)||void 0===i||null===(i=i.vitals)||void 0===i?void 0:i.unsaved];this.weight=this.formatData(e,5089),this.height=this.formatData(e,5090)}}catch(e){try{const t=await H.getAll(this.patient.patientID,"Height"),i=await H.getAll(this.patient.patientID,"weight");this.weight=this.formatData(i,5089),this.height=this.formatData(t,5090)}catch(s){}}this.setListData(this.processObservations()),this.$emit("click:weight","")},formatData:(t,i)=>t.filter(t=>t.concept_id==i).map(t=>({concept_id:i,obs_datetime:t.obs_datetime,value_numeric:t.value_numeric,obs_id:t.obs_id})),dismiss(){l.dismiss()},toggleDisplay(){this.displayGraph=!this.displayGraph,this.displayGraph?(this.graphIcon=k(["#006401"]),this.listIcon=D(["#636363"]),this.iconBg.graph="iconBg",this.iconBg.list=""):(this.graphIcon=k(["#636363"]),this.listIcon=D(["#006401"]),this.iconBg.graph="",this.iconBg.list="iconBg")},setActiveClass(t){this.activeHeight="",this.activeBMI="",this.activeWeight="","height"==t?this.activeHeight="_active":"weight"==t?this.activeWeight="_active":"BMI"==t&&(this.activeBMI="_active")},setListData(t){try{this.list=[],this.list.push({containSize:2.6,actionBtn:!1,class:"col_background display_center",header:!0,minHeight:"--min-height: 25px;",display:["Date","Height(cm)","Weight(kg)","Action"]}),t.forEach(t=>{this.list.push({id:t.ids,actionBtn:!0,minHeight:"--min-height: 25px;",class:"col_background",display:[B.toStandardHisDisplayFormat(t.obs_datetime),t.height,t.weight],btn:["void"],name:`height: ${t.height} and weight: ${t.weight} captured on ${B.toStandardHisDisplayFormat(t.obs_datetime)} `})})}catch(i){}}}}),L={style:{width:"100%",display:"flex","justify-content":"space-between",padding:"10px"}},O={key:0,class:"diplay_space_between bmi_blood"},z={class:"diplay_space_between"},S={key:0},M=t("L",A($,[["render",function(t,i,e,s,a,o){const n=u("ion-icon"),h=u("list");return m(),v(C,null,[y("div",L,[y("div",null,[t.propsContent.displayGraph&&t.propsContent.weight.length>0?(m(),v("div",O,[y("div",{style:{cursor:"pointer"},class:w(t.propsContent.activeWeight),onClick:i[0]||(i[0]=i=>t.$emit("click:weight",i))},"Weight",2),y("div",{style:{cursor:"pointer"},class:w(t.propsContent.activeHeight),onClick:i[1]||(i[1]=i=>t.$emit("click:height",i))},"Height",2)])):b("",!0)]),y("div",null,[y("div",z,[t.propsContent.displayGraph?(m(),f(n,{key:0,style:{"font-size":"x-large",cursor:"pointer"},class:w(t.propsContent.iconBg.graph),icon:t.propsContent.graphIcon,onClick:i[2]||(i[2]=i=>t.$emit("click:toggleDisplay",i))},null,8,["class","icon"])):(m(),f(n,{key:1,style:{"font-size":"x-large",cursor:"pointer"},class:w(t.propsContent.iconBg.list),icon:t.propsContent.listIcon,onClick:i[3]||(i[3]=i=>t.$emit("click:toggleDisplay",i))},null,8,["class","icon"]))])])]),t.propsContent.displayGraph?b("",!0):(m(),v("div",S,[x(h,{listData:t.propsContent.list,"onClicked:void":i[4]||(i[4]=i=>t.$emit("click:void",i))},null,8,["listData"])]))],64)}],["__scopeId","data-v-0133bf5b"]])),N=e({mixins:[M],name:"Menu",components:{IonContent:p,IonHeader:r,IonItem:d,IonList:h,IonMenu:n,IonTitle:o,IonToolbar:a,ApexChart:I,List:_,ListHeightWeight:M},computed:{...s(G,["patient"])},data:()=>({valueNumericArray:[],propsContent:{activeWeight:[],activeHeight:[],graphIcon:k(["#006401"]),listIcon:D(["#636363"]),displayGraph:!0,iconBg:{},weight:[],height:[],list:[]},obsDatetime:[],options:{chart:{id:"vuechart-example"},fill:{colors:["#006401"],type:"gradient",gradient:{shadeIntensity:1,opacityFrom:.7,opacityTo:.9,stops:[0,90,100]}},stroke:{curve:"straight",colors:["#006401"],width:2},markers:{size:3,colors:["#006401"],strokeColors:["#006401"],hover:{size:5,sizeOffset:3}},dataLabels:{enabled:!1},grid:{show:!0,borderColor:"#B3B3B3",strokeDashArray:4,position:"front",xaxis:{lines:{show:!0}},yaxis:{lines:{show:!0}},row:{colors:"",opacity:.5},column:{colors:"",opacity:.5},padding:{top:0,right:0,bottom:0,left:0}},yaxis:{min:0,forceNiceScale:!0}},series:[{name:"",data:[]}]}),async mounted(){await this.updateGraphData()},watch:{patient:{async handler(){await this.updateGraphData()},deep:!0},vitalsWeightHeight:{async handler(){"success"==this.vitalsWeightHeight[0].validationStatus&&await this.updateGraphData()},deep:!0},list:{async handler(){this.propsContent.list=this.list},deep:!0}},setup:()=>({checkmark:g,pulseOutline:c}),methods:{async updateGraphData(){await this.updateData(),this.setWeight(),this.iconBg.graph="iconBg"},dismiss(){l.dismiss()},handleIcon(){},toggleDisplays(){this.toggleDisplay(),this.propsContent.displayGraph=this.displayGraph,this.propsContent.graphIcon=this.graphIcon,this.propsContent.listIcon=this.listIcon,this.propsContent.iconBg.graph=this.iconBg.graph,this.propsContent.iconBg.graph=this.iconBg.graph},async setWeight(){this.propsContent.list=this.list,this.weight&&await this.setData(this.weight,"weight")},async setHeight(){this.height&&await this.setData(this.height,"height")},setActive(t){this.setActiveClass(t),this.propsContent.activeWeight=this.activeWeight,this.propsContent.activeHeight=this.activeHeight},async setData(t,i){this.setActive(i),this.propsContent.weight=this.weight,this.propsContent.height=this.height,this.valueNumericArray=t.map(t=>t.value_numeric),this.obsDatetime=t.map(t=>B.toStandardHisFormat(t.obs_datetime)),this.series[0].data=this.valueNumericArray,this.series[0].name=i,this.options={...this.options,xaxis:{categories:this.obsDatetime}}}}}),T={class:"modal_wrapper"},j={key:0};t("P",A(N,[["render",function(t,i,e,s,a,o){const n=u("ListHeightWeight"),h=u("ApexChart");return m(),v("div",T,[x(n,{"onClick:height":i[0]||(i[0]=i=>t.setHeight()),"onClick:weight":i[1]||(i[1]=i=>t.setWeight()),"onClick:toggleDisplay":i[2]||(i[2]=i=>t.toggleDisplays()),"onClick:void":i[3]||(i[3]=i=>t.openVoidPopover(i)),propsContent:t.propsContent},null,8,["propsContent"]),t.displayGraph?(m(),v("div",j,[x(h,{width:"100%",height:"390px",type:"area",options:t.options,series:t.series},null,8,["options","series"])])):b("",!0)])}],["__scopeId","data-v-7f069df7"]]))}}});
