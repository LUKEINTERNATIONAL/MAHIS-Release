const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./EmergencyRefill-Tmzm5AmX.js","./vendor-DowD5zKn.js","./lodash-Dt8AsbQm.js","./vendor-BIXhR_94.css","./DatePicker.vue_vue_type_script_setup_true_lang-B8H-baea.js","./index-Cu2JEMub.js","./index-BdwCF9RK.css","./app_encounter_service-DUFQOcer.js","./adherence_service-D7lyAoZp.js","./LocationFieldOptions-vBiJgJhC.js","./EmergencyRefill-v5tyLdov.css","./ARTPatientType-D8pJ9pDS.js","./ARTPatientType.vue_vue_type_script_setup_true_lang-Kft1bMg5.js","./patient_type_service-CB5w1CzK.js","./FilingNumberManagement-LF3sO4ii.js","./FilingNumberManagement-UU0AGTHA.css","./ArtClinicRegistration-BDzQ1_4L.js","./vitals_service-CyGV0bwE.js","./vitals_service-DSRLpBbj.css","./Staging-CKdGvqsp.js","./Staging-CSZ92-p3.css","./patient_registration_service-DrEyPCbm.js","./ArtClinicRegistration-CEJmmsCu.css","./Reception-u8jgMYMc.js","./relations_service-D3QJZ3Yb.js","./identifier_service-DsBe3yS5.js","./Reception-BcLv0bOt.css","./Vitals-C_eL57mO.js","./previousVitals-B5m9RS-E.js","./apexcharts-DlRg9dVi.js","./SvgDynamicColor-SqjviohE.js","./SvgDynamicColor-B6V07T2v.css","./previousVitals-BGyZoFyl.css","./encounter_type-C32ucM9u.js","./group_validation-BJZE-M8D.js","./VitalsStore-BCNt-R5j.js","./formatServerData-BkXd7Ika.js","./Vitals-y0V02drw.css","./Consultation-BHZnv0xd.js","./lab_order-CrBDUar0.js","./chartjs-Cs1JiRsG.js","./consultation_service-C2wiPcfu.js","./Consultation-BXgq3kNd.css","./ARTAdherence-CGFzzOTF.js","./ARTAdherence-B8uvff9k.css","./Prescription-DxNgix6I.js","./Arrays-CfBll-2n.js","./Prescription-Dj1Vn5MZ.css","./ArtDispensation-BNaC6TCN.js","./ArtDispensation--hbKxJXu.css","./ARTAppointment-CvhWaKSY.js","./appointment_service-gS0OmJln.js","./clinicalDaysStore-CfBpg_-z.js","./ARTAppointment-BIwX_dyU.css"])))=>i.map(i=>d[i]);
import{d as U,b1 as $,r as p,a as Y,y as d,f as i,z as r,l as a,u as n,eB as G,k as g,am as J,ao as K,e as y,an as X,F as j,L as q,G as Q,I as _,eC as Z,eD as ee,ex as ne,B as R,cn as oe,V as F,U as S,W as E,A as P,dU as te,bP as ae,ag as le,ad as re,ef as ie,ct as se,dt as ue,eE as ce,m as pe,eF as de,au as me,bV as u,a6 as c}from"./vendor-DowD5zKn.js";import{P as L,T as _e,S as ge,m as fe,X as ve,_ as be}from"./index-Cu2JEMub.js";import{W as ye}from"./workflow_service-DIlQbQNV.js";import"./lodash-Dt8AsbQm.js";const Ie={key:1,style:{"margin-top":"10%"},class:"ion-padding ion-text-center"},De={class:"ion-page",id:"main"},Te={key:0,class:"placeholder-content"},ke={style:{margin:"0px auto"},class:"ion-text-center"},Ee={key:1},Pe={key:2,class:"ion-padding ion-text-center",style:{"margin-top":"15%"}},we=U({__name:"ARTVisit",setup(xe){const w=[{label:"Emergency Refill",enableForDebugging:!1,component:u(()=>c(()=>import("./EmergencyRefill-Tmzm5AmX.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10]),import.meta.url))},{encounterTypeID:5,userProp:"patient type",label:"Patient Type",enableForDebugging:!1,component:u(()=>c(()=>import("./ARTPatientType-D8pJ9pDS.js"),__vite__mapDeps([11,12,1,2,3,5,6,13,7]),import.meta.url))},{label:"Filing Number Management",enableForDebugging:!1,component:u(()=>c(()=>import("./FilingNumberManagement-LF3sO4ii.js"),__vite__mapDeps([14,1,2,3,5,6,15]),import.meta.url))},{encounterTypeID:9,userProp:"HIV first visits",enableForDebugging:!1,label:"HIV Clinic Registration",component:u(()=>c(()=>import("./ArtClinicRegistration-BDzQ1_4L.js"),__vite__mapDeps([16,7,5,1,2,3,6,9,4,17,18,19,20,21,22]),import.meta.url))},{encounterTypeID:51,userProp:"HIV reception visits",label:"Reception",enableForDebugging:!1,component:u(()=>c(()=>import("./Reception-u8jgMYMc.js"),__vite__mapDeps([23,1,2,3,5,6,7,24,21,25,26]),import.meta.url))},{encounterTypeID:6,otherWorkflowNames:["htn_vitals"],userProp:"vitals",label:"Vitals",enableForDebugging:!1,component:u(()=>c(()=>import("./Vitals-C_eL57mO.js"),__vite__mapDeps([27,1,2,3,5,6,28,29,30,31,32,33,7,34,35,36,37]),import.meta.url))},{encounterTypeID:52,userProp:"HIV staging visits",label:"Staging",enableForDebugging:!1,component:u(()=>c(()=>import("./Staging-CKdGvqsp.js"),__vite__mapDeps([19,1,2,3,7,5,6,4,9,20]),import.meta.url))},{encounterTypeID:53,userProp:"HIV clinic consultations",label:"Consultation",enableForDebugging:!1,component:u(()=>c(()=>import("./Consultation-BHZnv0xd.js"),__vite__mapDeps([38,1,2,3,5,6,39,7,40,41,4,42]),import.meta.url))},{encounterTypeID:68,userProp:"ART adherence",label:"ART Adherence",enableForDebugging:!1,component:u(()=>c(()=>import("./ARTAdherence-CGFzzOTF.js"),__vite__mapDeps([43,1,2,3,5,6,8,7,44]),import.meta.url))},{encounterTypeID:25,userProp:"Prescriptions",label:"Prescription",enableForDebugging:!1,component:u(()=>c(()=>import("./Prescription-DxNgix6I.js"),__vite__mapDeps([45,1,2,3,5,6,41,7,46,13,47]),import.meta.url))},{encounterTypeID:54,userProp:"Drug Dispensations",label:"Dispense drugs",enableForDebugging:!1,component:u(()=>c(()=>import("./ArtDispensation-BNaC6TCN.js"),__vite__mapDeps([48,1,2,3,7,5,6,49]),import.meta.url))},{encounterTypeID:7,userProp:"Manage Appointments",label:"Appointment",enableForDebugging:!1,component:u(()=>c(()=>import("./ARTAppointment-CvhWaKSY.js"),__vite__mapDeps([50,5,1,2,3,6,51,7,52,53]),import.meta.url))}],x=new L,V=$(),m=p(-1),I=p(null),l=p([]),h=p([]),f=p(!1),k=p(-1),D=p(""),v=p(""),A=p("");function O(o){var e;return h.value.includes((e=o==null?void 0:o.encounterTypeID)!=null?e:0)}function T(o){var e;return o.enableForDebugging?!0:o?!f.value&&k.value===(o==null?void 0:o.encounterTypeID)||((e=o==null?void 0:o.otherWorkflowNames)!=null?e:[]).includes(D.value):!1}function N(){if(l.value.length===0||m.value===l.value.length-1)return!1;const o=l.value[m.value];return o&&T(o)}async function W(){const o=await ve.getEncounters(x.getID(),{date:L.getSessionDate()});h.value=o.map(e=>e.encounter_type)}async function C(){var o;A.value="",f.value=!0,v.value="",D.value="";try{const e=await ye.nextTask(x.getID());if(!e){v.value="No workflows found. You may exit this page or refresh",f.value=!1,m.value=-1;return}D.value=e.name,k.value=(o=e==null?void 0:e.encounter_type_id)!=null?o:-1;const s=l.value.findIndex(t=>{var b;return(t==null?void 0:t.encounterTypeID)===k.value||((b=t.otherWorkflowNames)!=null?b:[]).includes(D.value)});if(s!==-1){A.value=e.description;const t=[...l.value.slice(s),...l.value.slice(0,s)];l.value=t,m.value=0}else v.value="Error loading workflow task",m.value=s}catch(e){v.value="An error has occured while loading next task: "+e,console.error(e)}finally{await W(),f.value=!1}}async function B(){const o=await ge.getJson("user_properties",{property:"activities"});try{if(!o.property_value){l.value=w;return}const e=o.property_value.split(",").map(s=>s.toLowerCase());l.value=w.filter(s=>{var t;return s.enableForDebugging||e.includes((t=s.userProp)==null?void 0:t.toLowerCase())})}catch(e){fe("Unable to load activities"),console.error(e)}}function H(){return I.value&&typeof I.value.onSubmit=="function"?I.value.onSubmit():Promise.resolve(!0)}function z(){H().then(o=>o&&C())}function M(o){if(o<0||o>=l.value.length)return;const e=l.value[o];e&&T(e)&&(m.value=o)}return Y(()=>B().then(C)),(o,e)=>(i(),d(n(me),null,{default:r(()=>[a(_e),a(n(G),{style:{"margin-top":"70px"},when:"xs",contentId:"main"},{default:r(()=>{var s;return[a(n(J),{contentId:"main"},{default:r(()=>[a(n(K),null,{default:r(()=>[l.value.length>0?(i(),d(n(X),{key:0},{default:r(()=>[(i(!0),y(j,null,q(l.value,(t,b)=>(i(),d(n(Q),{onClick:Ve=>M(b),lines:"none",key:b,disabled:!T(t),button:""},{default:r(()=>[O(t)?(i(),d(n(_),{key:0,icon:n(Z),style:{padding:"10px",color:"green"},slot:"start"},null,8,["icon"])):T(t)?(i(),d(n(_),{key:2,icon:n(ne),style:{padding:"10px",color:"green"},slot:"start"},null,8,["icon"])):(i(),d(n(_),{key:1,icon:n(ee),style:{padding:"10px"},slot:"start"},null,8,["icon"])),g("b",null,R(t.label),1)]),_:2},1032,["onClick","disabled"]))),128))]),_:1})):(i(),y("div",Ie,[a(n(_),{style:{"font-size":"2rem"},icon:n(oe)},null,8,["icon"]),e[2]||(e[2]=g("h4",null,"You are not assigned to any activities",-1))]))]),_:1}),a(n(F),null,{default:r(()=>[a(n(S),{color:"light"},{default:r(()=>[a(n(E),{onClick:e[0]||(e[0]=t=>n(V).back())},{default:r(()=>[a(n(_),{icon:n(te),slot:"start"},null,8,["icon"]),e[3]||(e[3]=P(" Back to dashboard "))]),_:1,__:[3]})]),_:1})]),_:1})]),_:1}),g("div",De,[f.value?(i(),y("div",Te,[g("div",ke,[a(n(ae),{name:"bubbles"}),e[4]||(e[4]=g("p",null,[g("h1",null,"Please wait...")],-1))])])):(s=l.value[m.value])!=null&&s.component?(i(),y("div",Ee,[a(n(le),null,{default:r(()=>[a(n(re),null,{default:r(()=>{var t;return[(i(),d(ie,null,[(i(),d(se((t=l.value[m.value])==null?void 0:t.component),{ref_key:"formRef",ref:I},null,512))],1024))]}),_:1})]),_:1})])):(i(),y("div",Pe,[a(n(_),{style:{color:"green","font-size":"80px"},icon:n(ue)},null,8,["icon"]),g("h2",null,R(v.value),1),a(n(E),{size:"large",fill:"clear",onClick:e[1]||(e[1]=t=>n(V).back())},{default:r(()=>[a(n(_),{slot:"start",icon:n(ce)},null,8,["icon"]),e[5]||(e[5]=P(" Exit page "))]),_:1,__:[5]})])),a(n(F),null,{default:r(()=>[a(n(S),{color:"light"},{default:r(()=>[N()?(i(),d(n(E),{key:0,onClick:z,color:"primary",style:{padding:"4px"},slot:"end"},{default:r(()=>[e[6]||(e[6]=P(" Save and continue ")),a(n(_),{style:{padding:"4px"},icon:n(de),slot:"end"},null,8,["icon"])]),_:1,__:[6]})):pe("",!0)]),_:1})]),_:1})])]}),_:1})]),_:1}))}}),Fe=be(we,[["__scopeId","data-v-cc7124d0"]]);export{Fe as default};
