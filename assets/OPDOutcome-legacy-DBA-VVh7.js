System.register(["./vendor-legacy-B0ctPPIE.js","./index-legacy-Dh5F7buA.js","./lodash-legacy-pOOc9Efu.js","./patient_complaints_service-legacy-Bmlv5UOT.js","./DashBox-legacy-D_cVNjxA.js","./useExposeFromStandardForm-legacy-Bmrh-G6J.js","./BasicForm-legacy-BV8RXH2M.js","./formatServerData-legacy-DN4Srgxi.js","./NextAppointment-legacy-Cq25QNzg.js","./drug_prescription_service-legacy-9zCAmh-M.js","./drug_service-legacy-D0bF1mnG.js","./Outcome-legacy-8jYvTTwH.js"],function(e,a){"use strict";var n,t,i,o,l,s,d,r,c,u,m,p,v,h,g,f,y,b,x,_,w,k,D,C,A,S,E,I,O,N,P,B,L,M,F,T,z,H,R,V,q,U,j,$,Y,G,W,J,Q,X,K,Z,ee,ae,ne,te,ie,oe,le,se,de,re,ce,ue,me,pe,ve,he,ge,fe,ye,be,xe,_e,we,ke,De,Ce,Ae,Se,Ee,Ie,Oe,Ne,Pe,Be,Le,Me,Fe,Te,ze,He,Re,Ve,qe,Ue,je,$e,Ye,Ge,We,Je,Qe,Xe,Ke,Ze,ea,aa,na,ta,ia,oa,la,sa,da,ra,ca,ua;return{setters:[e=>{n=e.d,t=e.ao,i=e.U,o=e.T,l=e.ap,s=e.ak,d=e.G,r=e.S,c=e.ah,u=e.a9,m=e.aa,p=e.E,v=e.e,h=e.f,g=e.k,f=e.l,y=e.a$,b=e.r,x=e.c,_=e.a,w=e.m,k=e.y,D=e.z,C=e.u,A=e.A,S=e.F,E=e.W,I=e.I,O=e.e1,N=e.be,P=e.e2,B=e.cQ,L=e.e3,M=e.e4,F=e.e5,T=e.e6,z=e.c$,H=e.e7,R=e.e8,V=e.aw,q=e.aA,U=e.bU,j=e.ay,$=e.aP,Y=e.B,G=e.L,W=e.w,J=e.M,Q=e.J,X=e.D,K=e.bx,Z=e.ai,ee=e.X,ae=e.i,ne=e.e9,te=e.v,ie=e.bo,oe=e.ab,le=e.bq,se=e.ag,de=e.bS,re=e.bI,ce=e.aj},e=>{ue=e.b3,me=e.H,pe=e.a8,ve=e.b5,he=e.b4,ge=e.aO,fe=e.u,ye=e._,be=e.i,xe=e.ar,_e=e.as,we=e.D,ke=e.x,De=e.S,Ce=e.E,Ae=e.t,Se=e.z,Ee=e.aE,Ie=e.aC,Oe=e.b6,Ne=e.bt,Pe=e.aF,Be=e.bu,Le=e.bv,Me=e.aR,Fe=e.b1,Te=e.aS,ze=e.bw,He=e.a3,Re=e.P,Ve=e.aI,qe=e.aM,Ue=e.n,je=e.a1,$e=e.aB,Ye=e.ak},e=>{Ge=e.l},e=>{We=e.P},e=>{Je=e.D},e=>{Qe=e.u},e=>{Xe=e.B},e=>{Ke=e.f,Ze=e.c,ea=e.a},e=>{aa=e.A,na=e.P,ta=e.D,ia=e.n},e=>{oa=e.D,la=e.b},e=>{sa=e.D},e=>{da=e.D,ra=e.A,ca=e.R,ua=e.a}],execute:function(){var a=document.createElement("style");a.textContent=".bmi_blood[data-v-30434e22]{font-size:14px;font-weight:500;border:1px solid #ddeedd;border-radius:4px;padding:4px;min-width:190px}.graphBtn[data-v-30434e22]{font-size:14px;font-weight:500;border:1px solid #ddeedd;border-radius:4px;padding:4px;min-width:90px}._active[data-v-30434e22]{background-color:#ded;color:#006401;padding:5px;border-radius:4px}.iconBg[data-v-30434e22]{background:#ded;padding:2px;border-radius:5px}.vitals_title[data-v-7ca4ad60]{border-bottom:1px solid #b3b3b3;margin-bottom:50px}.input-with-icon[data-v-7ca4ad60]{position:relative}.input-icon[data-v-7ca4ad60]{position:absolute;left:10px;top:50%;transform:translateY(-50%);color:gray}ion-col[data-v-7ca4ad60]{padding-bottom:15px}h5[data-v-7ca4ad60]{margin-top:0;text-overflow:ellipsis;white-space:nowrap;overflow:hidden}.previousView[data-v-7ca4ad60]{margin-top:70px;margin-bottom:20px}.visit-container[data-v-8f0a8a33]{background:#fff;border-radius:16px;box-shadow:0 4px 12px rgba(0,0,0,.05);padding:24px;margin:16px;font-family:Segoe UI,Roboto,Helvetica Neue,sans-serif}.visit-header[data-v-8f0a8a33]{display:flex;justify-content:space-between;align-items:center;margin-bottom:24px;padding-bottom:16px;border-bottom:1px solid #f0f0f0}.visit-header h2[data-v-8f0a8a33]{margin:0;font-size:1.5rem;font-weight:600;color:#2d3748}.visit-date[data-v-8f0a8a33]{display:flex;align-items:center;gap:8px;color:#4a5568;font-size:.9rem}.visit-sections[data-v-8f0a8a33]{display:flex;flex-direction:column;gap:20px}.visit-section[data-v-8f0a8a33]{background:#f8fafc;border-radius:12px;padding:16px;transition:all .2s ease}.visit-section[data-v-8f0a8a33]:hover{box-shadow:0 2px 8px rgba(0,0,0,.08);transform:translateY(-2px)}.section-header[data-v-8f0a8a33]{display:flex;align-items:center;gap:12px;margin-bottom:16px}.section-header h3[data-v-8f0a8a33]{margin:0;font-size:1.1rem;font-weight:500;color:#2d3748}.section-icon[data-v-8f0a8a33]{color:#4299e1;font-size:1.4rem}.section-content[data-v-8f0a8a33]{display:flex;flex-direction:column;gap:12px}.info-item[data-v-8f0a8a33]{display:flex;gap:8px}.info-label[data-v-8f0a8a33]{font-weight:500;color:#4a5568}.info-value[data-v-8f0a8a33]{color:#2d3748}.highlight[data-v-8f0a8a33]{font-weight:600;color:#3182ce}.tags-container[data-v-8f0a8a33]{display:flex;flex-wrap:wrap;gap:8px}.complaint-tag[data-v-8f0a8a33]{background:#ebf8ff;color:#3182ce;padding:6px 12px;border-radius:20px;font-size:.85rem;font-weight:500}.medical-tag[data-v-8f0a8a33]{background:#f0fff4;color:#38a169;padding:6px 12px;border-radius:20px;font-size:.85rem;font-weight:500}.allergy-tag[data-v-8f0a8a33]{background:#fff5f5;color:#e53e3e;padding:6px 12px;border-radius:20px;font-size:.85rem;font-weight:500}.exam-section[data-v-8f0a8a33]{display:flex;flex-direction:column;gap:16px}.exam-category[data-v-8f0a8a33]{background:#fff;border-radius:8px;padding:12px;box-shadow:0 1px 3px rgba(0,0,0,.05)}.exam-category.normal[data-v-8f0a8a33]{background:#f0fff4}.exam-category-header[data-v-8f0a8a33]{display:flex;align-items:center;gap:8px;margin-bottom:8px}.exam-category-header h4[data-v-8f0a8a33]{margin:0;font-size:.95rem;font-weight:500;color:#4a5568}.exam-category-header ion-icon[data-v-8f0a8a33]{color:#718096;font-size:1.1rem}.exam-items[data-v-8f0a8a33]{display:flex;flex-wrap:wrap;gap:8px}.exam-item[data-v-8f0a8a33]{background:#f7fafc;padding:6px 10px;border-radius:6px;font-size:.85rem;color:#4a5568}.exam-item.normal[data-v-8f0a8a33]{background:#e6ffed;color:#38a169}.empty-section[data-v-8f0a8a33]{display:flex;flex-direction:column;align-items:center;justify-content:center;gap:12px;padding:24px;background:#f8fafc;border-radius:12px;color:#a0aec0;text-align:center}.empty-section ion-icon[data-v-8f0a8a33]{font-size:2rem;opacity:.5}.empty-section p[data-v-8f0a8a33]{margin:0;font-size:.9rem}@media (max-width: 768px){.visit-container[data-v-8f0a8a33]{padding:16px;margin:8px}.visit-header[data-v-8f0a8a33]{flex-direction:column;align-items:flex-start;gap:8px}.tags-container[data-v-8f0a8a33]{gap:6px}.complaint-tag[data-v-8f0a8a33],.medical-tag[data-v-8f0a8a33],.allergy-tag[data-v-8f0a8a33]{padding:4px 10px;font-size:.8rem}}.modal_wrapper[data-v-49fdce72]{display:flex;flex-direction:column;width:100%;max-width:1200px;margin:0 auto}@media (max-width: 768px){.modal_wrapper[data-v-49fdce72]{max-width:100%}}@media (max-width: 480px){.modal_wrapper[data-v-49fdce72]{flex-direction:column}}.container[data-v-3818e796]{display:flex;flex-direction:column;align-items:center}.section[data-v-3818e796]{width:100%;max-width:1300px;margin-bottom:20px}ion-card[data-v-3818e796]{box-shadow:none;background-color:inherit;width:100%;color:#000}.navigation-buttons[data-v-3818e796]{display:flex;justify-content:space-between;width:100%;max-width:500px}@media (max-width: 1500px){.container[data-v-3818e796]{padding:10px}}.sub_item_header[data-v-3818e796]{font-weight:700;font-size:14px}._card[data-v-a8c21622]{border-radius:5px;background-color:#fff;box-shadow:rgba(0,0,0,.2) 0 3px 1px -2px,rgba(0,0,0,.14) 0 2px 2px,rgba(0,0,0,.12) 0 1px 5px;margin-bottom:10px}ion-item[data-v-a8c21622]::part(native){border:none}.previousView[data-v-a8c21622]{margin-top:10px}.previousLabel[data-v-a8c21622]{font-weight:700;font-size:1rem}.nav-buttons[data-v-a8c21622]{display:flex;justify-content:flex-start;gap:10px;margin-top:10px}ion-accordion[data-v-a8c21622]::part(header){padding:8px}.ion-padding[data-v-a8c21622]{padding-top:0}.bmi_blood[data-v-88580898]{font-size:14px;font-weight:500;border:1px solid #ddeedd;border-radius:4px;padding:4px;min-width:190px}.graphBtn[data-v-88580898]{font-size:14px;font-weight:500;border:1px solid #ddeedd;border-radius:4px;padding:4px;min-width:90px}._active[data-v-88580898]{background-color:#ded;color:#006401;padding:5px;border-radius:4px}.iconBg[data-v-88580898]{background:#ded;padding:2px;border-radius:5px}#container[data-v-cdf4ce7e]{text-align:center;position:absolute;left:0;right:0;top:50%;transform:translateY(-50%)}#container strong[data-v-cdf4ce7e]{font-size:20px;line-height:26px}#container p[data-v-cdf4ce7e]{font-size:16px;line-height:22px;color:#8c8c8c;margin:0}#container a[data-v-cdf4ce7e]{text-decoration:none}.action_buttons[data-v-cdf4ce7e]{color:var(--ion-color-primary);display:flex;align-items:center;float:right;max-width:70px}.modify_buttons[data-v-cdf4ce7e]{padding-left:20px}.item_no_border[data-v-cdf4ce7e]{--border-color: transparent}.search_result[data-v-cdf4ce7e]{padding:10px}.previousView[data-v-cdf4ce7e]{margin-top:70px;margin-bottom:20px}#container[data-v-e5aea6dd]{text-align:center;position:absolute;left:0;right:0;top:50%;transform:translateY(-50%)}#container strong[data-v-e5aea6dd]{font-size:20px;line-height:26px}#container p[data-v-e5aea6dd]{font-size:16px;line-height:22px;color:#8c8c8c;margin:0}#container a[data-v-e5aea6dd]{text-decoration:none}ion-item.medicalAl[data-v-e5aea6dd]{--background: #fff;--border-radius: 5px}ion-button.medicalAlBtn[data-v-e5aea6dd]{--background: #fecdca;--color: #b42318;text-transform:none}.error-label[data-v-e5aea6dd]{background:#fecdca;color:#b42318;text-transform:none;padding:2%;border-radius:10px;margin-top:7px;display:flex;text-align:center}ion-button.addMedicalTpBtn[data-v-e5aea6dd]{--background: #ddeedd;--color: #006401;text-transform:none;font-weight:600;font-size:16px}ion-button.medicalAlAddBtn[data-v-e5aea6dd]{font-size:large}ion-icon.icon-al[data-v-e5aea6dd]{font-size:x-large;margin-bottom:-5px}.item-al[data-v-e5aea6dd]{cursor:pointer;padding:5px;background-color:#ebebeb;margin-top:8px}.item-al[data-v-e5aea6dd]:hover{background-color:rgba(85,81,81,.282);padding:5px;border-radius:3px}ion-popover.popover-al[data-v-e5aea6dd]{--background: #fff}ion-content.content-al[data-v-e5aea6dd]{--background: #fff}ion-list.list-al[data-v-e5aea6dd]{--background: #fff;-ion-item-background:#fff}.checkLbltp[data-v-e5aea6dd]{border-bottom:2px dotted var(--ion-color-medium);--inner-border-width: 0}.tpStndCls[data-v-e5aea6dd]{font-size:16px;font-weight:600;line-height:24px}.action_buttons[data-v-e5aea6dd]{color:var(--ion-color-primary);display:flex;align-items:center;float:right}.action_buttons[data-v-e5aea6dd]:hover{cursor:pointer}.spcls[data-v-e5aea6dd]{display:flex;align-items:center}.previousView[data-v-e5aea6dd]{width:100%;border-radius:10px;margin-top:10px}.previousLabel[data-v-e5aea6dd]{font-weight:600;color:#000}.previousLabelDate[data-v-e5aea6dd]{font-weight:600;color:#000;margin:2%}.previousSecDrgs[data-v-e5aea6dd]{margin:2%}.notes_p[data-v-e5aea6dd]{margin:4%}.qaws[data-v-e5aea6dd]{margin-top:-27px}.allergies-section[data-v-e5aea6dd]{padding:16px;background:#fff;border-radius:8px;box-shadow:0 2px 4px rgba(0,0,0,.05);margin-bottom:16px}.section-title[data-v-e5aea6dd]{display:flex;align-items:center;font-size:18px;font-weight:700;color:#1f2937;letter-spacing:-.01em;margin-bottom:16px}.alert-icon[data-v-e5aea6dd]{font-size:20px;color:#dc2626;margin-right:8px}.allergies-container[data-v-e5aea6dd]{min-height:48px}.allergies-grid[data-v-e5aea6dd]{display:flex;flex-wrap:wrap;gap:8px}.allergy-chip[data-v-e5aea6dd]{--background: #fee2e2;--color: #dc2626;font-size:14px;font-weight:500}.allergy-chip ion-icon[data-v-e5aea6dd]{color:#dc2626}.no-allergies[data-v-e5aea6dd]{display:flex;align-items:center;justify-content:center;height:48px;background:#f9fafb;border-radius:6px;font-size:15px;font-weight:500;color:#9c8011}.medication-section[data-v-e5aea6dd]{background:#fff;border-radius:8px;padding:16px;margin:16px 0;box-shadow:0 1px 3px rgba(0,0,0,.1)}.section-header[data-v-e5aea6dd]{margin-bottom:16px;--background: transparent}.section-icon[data-v-e5aea6dd]{font-size:22px;margin-right:10px;color:var(--ion-color-primary)}.medication-content[data-v-e5aea6dd]{padding:0 16px}.add-medication-form[data-v-e5aea6dd]{background:#f9fafb;border-radius:8px;padding:20px;margin-top:16px}.form-group[data-v-e5aea6dd]{margin-bottom:16px}.form-row[data-v-e5aea6dd]{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:16px;margin-bottom:16px}.input-label[data-v-e5aea6dd]{display:block;font-size:16px;font-weight:600;color:#374151;margin-bottom:10px}.error-message[data-v-e5aea6dd]{color:#dc2626;font-size:15px;font-weight:600;margin-top:4px}.action-buttons[data-v-e5aea6dd]{display:flex;gap:8px;justify-content:flex-end;margin-top:16px}.save-button[data-v-e5aea6dd]{--background: var(--ion-color-primary);--color: #ffffff;font-size:16px;font-weight:600}.cancel-button[data-v-e5aea6dd]{--background: #e5e7eb;--color: #374151;font-size:16px;font-weight:600}.add-new-button[data-v-e5aea6dd]{width:100%;margin-top:16px;--background: var(--ion-color-primary-tint);--color: var(--ion-color-primary);font-size:16px;font-weight:600}.notes-section[data-v-e5aea6dd]{background:#fff;border-radius:8px;padding:16px;margin:16px 0;box-shadow:0 1px 3px rgba(0,0,0,.1)}.notes-content[data-v-e5aea6dd]{padding:0 16px}.intervention-component[data-v-e5aea6dd],.notes-input-container[data-v-e5aea6dd]{margin-bottom:16px}.notes-input-item[data-v-e5aea6dd]{--background: #f9fafb;--border-radius: 8px;--padding-start: 12px;--padding-end: 12px;min-height:120px}.edit-icon[data-v-e5aea6dd]{color:var(--ion-color-medium);font-size:20px;margin-right:8px}.notes-textarea[data-v-e5aea6dd]{--padding-top: 12px;--padding-bottom: 12px;--placeholder-color: #9ca3af;--placeholder-opacity: 1;font-size:16px;font-weight:600;line-height:1.6}.previous-notes[data-v-e5aea6dd]{background:#fff;border-radius:8px;overflow:hidden}.previous-notes-header[data-v-e5aea6dd]{--background: #f9fafb;font-weight:600}.notes-timeline[data-v-e5aea6dd]{padding:8px 0}.note-entry[data-v-e5aea6dd]{padding:12px 16px;border-bottom:1px solid #e5e7eb}.note-entry[data-v-e5aea6dd]:last-child{border-bottom:none}.note-date[data-v-e5aea6dd]{font-size:14px;font-weight:600;color:#374151;margin-bottom:8px}.note-content[data-v-e5aea6dd]{font-size:16px;font-weight:600;line-height:1.6;color:#4b5563;white-space:pre-wrap}.show-more-header[data-v-e5aea6dd]{--background: transparent;font-size:16px;font-weight:600}[data-v-e5aea6dd] ion-accordion{margin:0}[data-v-e5aea6dd] ion-accordion-group{background:#fff}[data-v-e5aea6dd] ion-accordion.accordion-expanding,[data-v-e5aea6dd] ion-accordion.accordion-expanded{--background: #ffffff}[data-v-e5aea6dd]{transition:font-size .2s ease,font-weight .2s ease}.initTxt[data-v-b6576c18]{text-align:center}.spc_btwn[data-v-b6576c18]{margin-top:2%}.item-al[data-v-b6576c18]{cursor:pointer;padding:5px;background-color:#ebebeb;margin-top:8px}.item-al[data-v-b6576c18]:hover{background-color:rgba(85,81,81,.282);padding:5px;border-radius:3px}ion-popover.popover-al[data-v-b6576c18]{--background: #fff}ion-list.list-al[data-v-b6576c18]{--background: #fff;-ion-item-background:#fff}.saveContainer[data-v-b6576c18]{display:flex;align-items:flex-end}.action_buttons[data-v-b6576c18]{margin-top:5px}.error-label[data-v-b6576c18]{background:#fecdca;color:#b42318;text-transform:none;padding:6%;border-radius:10px;margin-top:7px;display:flex;text-align:center}\n/*$vite$:1*/",document.head.appendChild(a);const ma=n({name:"Menu",components:{IonContent:c,IonHeader:r,IonItem:d,IonList:s,IonMenu:l,IonTitle:o,IonToolbar:i,List:ue},computed:{...t(fe,["patient"]),...t(ge,["presentingComplaints"])},data:()=>({valueNumericArray:[],obsDatetime:[],graphIcon:he(["#006401"]),listIcon:ve(["#636363"]),displayGraph:!0,orders:[],height:[],BMI:[],iconBg:{},activeWeight:[],activeHeight:[],activeBMI:[],list:[],series:[{name:"",data:[]}]}),setup:()=>({checkmark:m,pulseOutline:u}),watch:{$router:{async handler(){await this.updateList()},immediate:!0,deep:!0},patient:{async handler(){await this.updateList()},deep:!0}},async mounted(){await this.updateList()},methods:{async updateList(){const e=await pe.getAll(this.patient.patientID,"Presenting complaint"),a=Ge.isEmpty(e)?[]:Promise.all(e.map(async e=>e.value_coded?{name:await pe.getConceptName(e.value_coded),obs_date:e.obs_datetime,duration:e.children[0].value_text}:[]));this.setListData(await a)},setListData(e){this.list=[],this.list.push({actionBtn:!1,class:"col_background",header:!0,minHeight:"--min-height: 20px;",containSize:4,display:["Date","Presenting Complains","Duration"]}),e.forEach(e=>{this.list.push({actionBtn:!1,minHeight:"--min-height:20px;",class:"col_background",containSize:4,display:[me.toStandardHisFormat(e.obs_date),e.name,e.duration]})})}}}),pa={class:"modal_wrapper"},va=ye(ma,[["render",function(e,a,n,t,i,o){const l=p("list");return h(),v("div",pa,[g("div",null,[f(l,{listData:e.list},null,8,["listData"])])])}],["__scopeId","data-v-30434e22"]]),ha={key:0},ga={style:{"align-content":"center"}},fa={class:"ion-padding",slot:"content"},ya=e("c",ye(n({__name:"PresentingComplaints",setup(e,{expose:a}){const n=ge(),{presentingComplaints:t}=y(n),i=b(be),o=b(!0),l=b(!1),s=b(!0),r=b(!1),c=b([]),u=b([]),m=b(),E=x(()=>[{componentType:"multiSelectInputField",header:"Presenting Complaints",name:"PresentingComplaints",trackBy:"concept_id",icon:be.search,hideSelected:!0,validation:e=>N(null==e?void 0:e.name,c.value)?"Presenting complaint already added":xe.required(e),options:u.value,grid:{s:"6"}},{componentType:"inputField",header:"Duration",name:"duration",icon:be.time,validation:e=>xe.isNotEmptyandNumber(e),grid:{s:"6"},unitOptions:[{label:"Hours",value:"Hours"},{label:"Days",value:"Days"},{label:"Months",value:"Months"},{label:"Years",value:"Years"}],unitValidation:e=>e&&""!==e?null:"Please select a unit."},{componentType:"inputField",header:"Specify the presenting complaint(s)",name:"Other (specify)",icon:be.editPen,validation:e=>N(e,c.value)?"Presenting complaint already added":xe.required(e),condition:e=>{var a;return"Other"===(null==e||null===(a=e.PresentingComplaints)||void 0===a?void 0:a.name)}},{componentType:"Alert",condition:e=>{var a;return!(null==xe.required(null==e||null===(a=e.PresentingComplaints)||void 0===a?void 0:a.name))},backgroundColor:"lightyellow",textColor:"black",value:"Please search thoroughly for the complaint. If it is not listed, search and select the 'Other' option to specify the complaint.",name:"noMatchAlert"}]),{formRef:I}=Qe(),O=e=>{var a;const n=e.duration+" "+e.duration_unit,t=e.PresentingComplaints,i="Other"===t.name?e["Other (specify)"]:t.name;c.value.push({actionBtn:!0,btn:["delete"],name:i,concept_id:t.concept_id,duration:t.duration,durationUnits:t.duration_unit,display:[i,n],data:[{concept_id:8578,value_coded:t.concept_id,obs_datetime:De.getSessionDate(),child:[{concept_id:t.concept_id,value_text:n,obs_datetime:De.getSessionDate()}]}]}),null===(a=I.value)||void 0===a||a.resetForm(),r.value=!0},N=(e,a)=>a.some(a=>a.name===e),P=e=>{c.value=c.value.filter(a=>a.display[0]!==e.name)};return _(async()=>{await(async()=>{u.value=await We.getComplaintsList("Presenting complaint"),ke(t.value,"PresentingComplaints","multiSelectData",u.value)})()}),a({onSubmit:async()=>{const e=await pe.getObsByEncounterIdAndDate(Ce.PRESENTING_COMPLAINTS),a=c.value.flatMap(e=>e.data);if(a.length<=0&&e.length<=0)return Ae("Presenting complaints is required");a.length<=0||(await pe.addObsToEncounterPatient(a,Ce.PRESENTING_COMPLAINTS),Se("Presenting complaints saved successful"),c.value=[])}}),(e,a)=>{const n=p("ion-row"),t=p("ion-label"),u=p("ion-accordion"),y=p("ion-accordion-group");return h(),v(S,null,[f(Je,{status:o.value,content:"No presenting complaints added"},null,8,["status"]),r.value?(h(),v("span",ha,[f(ue,{listData:c.value,"onClicked:delete":P},null,8,["listData"])])):w("",!0),l.value?(h(),k(n,{key:1},{default:D(()=>[f(_e,{formData:E.value,ref_key:"formRef",ref:I},null,8,["formData"]),g("div",ga,[f(we,{fill:"clear",icon:i.value.plus,iconSlot:"icon-only","onClicked:btn":a[0]||(a[0]=e=>(async()=>{var e,a;const n=null===(e=I.value)||void 0===e?void 0:e.getFormValues();null==(null===(a=I.value)||void 0===a?void 0:a.validateForm())&&(O(n),l.value=!1,s.value=!0)})()),name:"Save"},null,8,["icon"])])]),_:1})):w("",!0),s.value?(h(),k(n,{key:2,style:{"margin-top":"10px"}},{default:D(()=>[f(we,{fill:"clear",icon:i.value.plus,iconSlot:"icon-only","onClicked:btn":a[1]||(a[1]=e=>(o.value=!1,s.value=!1,void(l.value=!0))),name:"Add new presenting complaints"},null,8,["icon"])]),_:1})):w("",!0),f(n,null,{default:D(()=>[f(y,{ref_key:"accordionGroup",ref:m,class:"previousView"},{default:D(()=>[f(u,{value:"first","toggle-icon-slot":"start",style:{"border-radius":"10px","background-color":"#fff"}},{default:D(()=>[f(C(d),{slot:"header",color:"light"},{default:D(()=>[f(t,{class:"previousLabel"},{default:D(()=>a[2]||(a[2]=[A("Previous presenting complaints")])),_:1,__:[2]})]),_:1}),g("div",fa,[f(va)])]),_:1})]),_:1},512)]),_:1})],64)}}}),[["__scopeId","data-v-7ca4ad60"]])),ba=n({name:"VisitHistory",components:{IonIcon:I,IonButton:E},setup(){const e=Pe();return{selectedAllergiesList2:x(()=>e.selectedMedicalAllergiesList),calendarOutline:$,alertCircleOutline:j,documentTextOutline:U,femaleOutline:q,medicalOutline:V,warningOutline:R,bodyOutline:H,eyeOutline:z,nutritionOutline:T,fitnessOutline:F,pulseOutline:u,earOutline:M,happyOutline:L,manOutline:B,moveOutline:P,addOutline:N,scanOutline:O}},data:()=>({visits:[],visitDate:null,presentingComplaint:[],pastMedicalHistory:[],levelOfConsciousness:{eyeResponse:null,verbalResponse:null,motorResponse:null},pregnancy:{patientPregnant:null,breastFeeding:null},eyesAbnormal:[],mouthAbnormal:[],earsAbnormal:[],faceAbnormal:[],neckAbnormal:[],chestAbnormal:[],chestMovementAbnormal:[],heartSoundsAbnormal:[],breathSoundsAbnormal:[],addedBreathSoundsAbnormal:[],abdominalInspectionAbnormal:[],eyesExamined:!1,mouthExamined:!1,earsExamined:!1,faceExamined:!1,neckExamined:!1,chestExamined:!1,chestMovementExamined:!1,heartSoundsExamined:!1,breathSoundsExamined:!1,addedBreathSoundsExamined:!1,abdominalInspectionExamined:!1}),computed:{...t(fe,["patient"]),hasLevelOfConsciousness(){return this.levelOfConsciousness.eyeResponse||this.levelOfConsciousness.verbalResponse||this.levelOfConsciousness.motorResponse},hasPresentingComplaints(){var e;return(null===(e=this.uniquePresentingComplaints)||void 0===e?void 0:e.length)>0},hasPregnancyData(){return this.pregnancy.patientPregnant||this.pregnancy.breastFeeding},hasPastMedicalHistory(){var e;return(null===(e=this.uniquePastMedicalHistory)||void 0===e?void 0:e.length)>0},hasAllergies(){var e;return(null===(e=this.selectedAllergiesList2)||void 0===e||null===(e=e.filter(e=>e.selected))||void 0===e?void 0:e.length)>0},hasPhysicalExam(){var e,a,n,t,i,o,l,s,d,r,c;return(null===(e=this.eyesAbnormal)||void 0===e?void 0:e.length)>0||this.eyesExamined||(null===(a=this.mouthAbnormal)||void 0===a?void 0:a.length)>0||this.mouthExamined||(null===(n=this.earsAbnormal)||void 0===n?void 0:n.length)>0||this.earsExamined||(null===(t=this.faceAbnormal)||void 0===t?void 0:t.length)>0||this.faceExamined||(null===(i=this.neckAbnormal)||void 0===i?void 0:i.length)>0||this.neckExamined||(null===(o=this.chestAbnormal)||void 0===o?void 0:o.length)>0||this.chestExamined||(null===(l=this.chestMovementAbnormal)||void 0===l?void 0:l.length)>0||this.chestMovementExamined||(null===(s=this.heartSoundsAbnormal)||void 0===s?void 0:s.length)>0||this.heartSoundsExamined||(null===(d=this.breathSoundsAbnormal)||void 0===d?void 0:d.length)>0||this.breathSoundsExamined||(null===(r=this.addedBreathSoundsAbnormal)||void 0===r?void 0:r.length)>0||this.addedBreathSoundsExamined||(null===(c=this.abdominalInspectionAbnormal)||void 0===c?void 0:c.length)>0||this.abdominalInspectionExamined},uniquePastMedicalHistory(){return[...new Map(this.pastMedicalHistory.map(e=>[e,e])).values()]},uniquePresentingComplaints(){return[...new Map(this.presentingComplaint.map(e=>[e,e])).values()]}},methods:{formatVisitDate:e=>e?me.toStandardHisDisplayFormat(e):"No visit date",async updateData(){var e;if(null===(e=this.patient)||void 0===e||!e.patientID)return;const a=await Ne(this.patient.patientID);var n;a&&(this.visits=(null===(n=a.visits)||void 0===n?void 0:n.visitsDates)||[],this.visits.length>0&&await this.loadSavedEncounters(this.visits[0]))},async loadSavedEncounters(e){this.visitDate=e;const a=Ie("presentingComplaints"),n=Ie("pastMedicalHistory"),t=Ie("levelOfConsciousness"),i=Ie("pregnancy"),o=Ie("physicalExam"),l=Oe(a),s=Oe(n),d=Oe(t),r=Oe(i),c=Oe(o);await this.setPresentingComplainsEncounters(l),await this.setPastMedicalHistoryEncounters(s),await this.setLevelOfConsciousnessEncounters(d),await this.setPregnancyStatusEncounters(r),await this.setPhysicalExamEncounters(c)},filterObs:(e,a)=>e?e.filter(e=>{var n;return(null===(n=e.concept)||void 0===n||null===(n=n.concept_names)||void 0===n?void 0:n.some(e=>e.name===a))||e.concept_name===a}):[],getConceptValues:async(e,a)=>e?await Promise.all(e.map(async e=>e.value_coded?await Ee.getConceptName(e.value_coded):e.concept_name||e.name)):[],async setPresentingComplainsEncounters(e){this.presentingComplaint=await this.getConceptValues(this.filterObs(e,"Presenting complaint"),"coded")},async setLevelOfConsciousnessEncounters(e){if(e&&Array.isArray(e)){const a=this.filterObs(e,"Eye opening response");this.levelOfConsciousness.eyeResponse=a.length>0?await Ee.getConceptName(a[0].value_coded):null;const n=this.filterObs(e,"Best verbal response");this.levelOfConsciousness.verbalResponse=n.length>0?await Ee.getConceptName(n[0].value_coded):null;const t=this.filterObs(e,"Best motor response");this.levelOfConsciousness.motorResponse=t.length>0?await Ee.getConceptName(t[0].value_coded):null}},async setPregnancyStatusEncounters(e){if(e&&Array.isArray(e)){const a=this.filterObs(e,"Patient pregnant");this.pregnancy.patientPregnant=a.length>0?await Ee.getConceptName(a[0].value_coded):null;const n=this.filterObs(e,"Is patient breast feeding?");this.pregnancy.breastFeeding=n.length>0?await Ee.getConceptName(n[0].value_coded):null}},async setPhysicalExamEncounters(e){if(e&&Array.isArray(e)){this.eyesAbnormal=[],this.mouthAbnormal=[],this.earsAbnormal=[],this.faceAbnormal=[],this.neckAbnormal=[],this.chestAbnormal=[],this.chestMovementAbnormal=[],this.heartSoundsAbnormal=[],this.breathSoundsAbnormal=[],this.addedBreathSoundsAbnormal=[],this.abdominalInspectionAbnormal=[],this.eyesExamined=!1,this.mouthExamined=!1,this.earsExamined=!1,this.faceExamined=!1,this.neckExamined=!1,this.chestExamined=!1,this.chestMovementExamined=!1,this.heartSoundsExamined=!1,this.breathSoundsExamined=!1,this.addedBreathSoundsExamined=!1,this.abdominalInspectionExamined=!1;for(const t of e){var a,n;if(!(t.concept_name||null!==(a=t.concept)&&void 0!==a&&a.concept_names))continue;const e=t.concept_name||(null===(n=t.concept)||void 0===n||null===(n=n.concept_names)||void 0===n||null===(n=n.find(e=>"FULLY_SPECIFIED"===e.concept_name_type))||void 0===n?void 0:n.name);e&&(e.includes("normal")||e.includes("Normal"))&&1065===t.value_coded&&(e.includes("Eyes normal")?this.eyesExamined=!0:e.includes("Mouth normal")?this.mouthExamined=!0:e.includes("Ears normal")?this.earsExamined=!0:e.includes("Face normal")?this.faceExamined=!0:e.includes("Neck normal")?this.neckExamined=!0:e.includes("Chest inspection normal")?this.chestExamined=!0:e.includes("Heart sounds normal")?this.heartSoundsExamined=!0:e.includes("Breath sounds normal")?this.breathSoundsExamined=!0:e.includes("Abdominal inspection normal")&&(this.abdominalInspectionExamined=!0))}for(const a of e){var t,i;if(!(a.concept_name||null!==(t=a.concept)&&void 0!==t&&t.concept_names))continue;const e=a.concept_name||(null===(i=a.concept)||void 0===i||null===(i=i.concept_names)||void 0===i||null===(i=i.find(e=>"FULLY_SPECIFIED"===e.concept_name_type))||void 0===i?void 0:i.name);if(e&&!e.includes("normal")&&!e.includes("Normal"))if(e.includes("Abnormality for eyes"))if(this.eyesExamined=!0,a.value_coded){const e=await Ee.getConceptName(a.value_coded);e&&"no"!==e.toLowerCase()&&"normal"!==e.toLowerCase()&&this.eyesAbnormal.push(e)}else a.value_text&&this.eyesAbnormal.push(a.value_text);else if(e.includes("Abnormality for mouth"))if(this.mouthExamined=!0,a.value_coded){const e=await Ee.getConceptName(a.value_coded);e&&"no"!==e.toLowerCase()&&"normal"!==e.toLowerCase()&&this.mouthAbnormal.push(e)}else a.value_text&&this.mouthAbnormal.push(a.value_text);else if(e.includes("Abnormality for ears"))if(this.earsExamined=!0,a.value_coded){const e=await Ee.getConceptName(a.value_coded);e&&"no"!==e.toLowerCase()&&"normal"!==e.toLowerCase()&&this.earsAbnormal.push(e)}else a.value_text&&this.earsAbnormal.push(a.value_text);else if(e.includes("Abnormality for face"))if(this.faceExamined=!0,a.value_coded){const e=await Ee.getConceptName(a.value_coded);e&&"no"!==e.toLowerCase()&&"normal"!==e.toLowerCase()&&this.faceAbnormal.push(e)}else a.value_text&&this.faceAbnormal.push(a.value_text);else if(e.includes("Abnormality for neck"))if(this.neckExamined=!0,a.value_coded){const e=await Ee.getConceptName(a.value_coded);e&&"no"!==e.toLowerCase()&&"normal"!==e.toLowerCase()&&this.neckAbnormal.push(e)}else a.value_text&&this.neckAbnormal.push(a.value_text);else if(e.includes("Abnormality for chest inspection"))if(this.chestExamined=!0,a.value_coded){const e=await Ee.getConceptName(a.value_coded);e&&"no"!==e.toLowerCase()&&"normal"!==e.toLowerCase()&&this.chestAbnormal.push(e)}else a.value_text&&this.chestAbnormal.push(a.value_text);else if(e.includes("Chest movements"))if(this.chestMovementExamined=!0,a.value_coded){const e=await Ee.getConceptName(a.value_coded);e&&"no"!==e.toLowerCase()&&"normal"!==e.toLowerCase()&&this.chestMovementAbnormal.push(e)}else a.value_text&&this.chestMovementAbnormal.push(a.value_text);else if(e.includes("Heart sounds abnormality"))if(this.heartSoundsExamined=!0,a.value_coded){const e=await Ee.getConceptName(a.value_coded);e&&"no"!==e.toLowerCase()&&"normal"!==e.toLowerCase()&&this.heartSoundsAbnormal.push(e)}else a.value_text&&this.heartSoundsAbnormal.push(a.value_text);else if(e.includes("Breath sounds abnormality"))if(this.breathSoundsExamined=!0,a.value_coded){const e=await Ee.getConceptName(a.value_coded);e&&"no"!==e.toLowerCase()&&"normal"!==e.toLowerCase()&&this.breathSoundsAbnormal.push(e)}else a.value_text&&this.breathSoundsAbnormal.push(a.value_text);else if(e.includes("Abnormalities when added"))if(this.addedBreathSoundsExamined=!0,a.value_coded){const e=await Ee.getConceptName(a.value_coded);e&&"no"!==e.toLowerCase()&&"normal"!==e.toLowerCase()&&this.addedBreathSoundsAbnormal.push(e)}else a.value_text&&this.addedBreathSoundsAbnormal.push(a.value_text);else if(e.includes("Abdominal inspection abnormality"))if(this.abdominalInspectionExamined=!0,a.value_coded){const e=await Ee.getConceptName(a.value_coded);e&&"no"!==e.toLowerCase()&&"normal"!==e.toLowerCase()&&this.abdominalInspectionAbnormal.push(e)}else a.value_text&&this.abdominalInspectionAbnormal.push(a.value_text)}}},async setPastMedicalHistoryEncounters(e){this.pastMedicalHistory=await this.getConceptValues(this.filterObs(e,"Chronic disease"),"coded")}},watch:{patient:{async handler(){await this.updateData()},deep:!0}},async mounted(){await this.updateData()}}),xa={class:"visit-container"},_a={class:"visit-header"},wa={class:"visit-date"},ka={class:"visit-sections"},Da={key:0,class:"visit-section"},Ca={class:"section-header"},Aa={class:"section-content"},Sa={key:0,class:"info-item"},Ea={class:"info-value"},Ia={key:1,class:"info-item"},Oa={class:"info-value"},Na={key:2,class:"info-item"},Pa={class:"info-value"},Ba={key:1,class:"empty-section"},La={key:2,class:"visit-section"},Ma={class:"section-header"},Fa={class:"tags-container"},Ta={key:3,class:"empty-section"},za={key:4,class:"visit-section"},Ha={class:"section-header"},Ra={class:"section-content"},Va={key:0,class:"info-item"},qa={class:"info-value highlight"},Ua={key:1,class:"info-item"},ja={class:"info-value highlight"},$a={key:5,class:"empty-section"},Ya={key:6,class:"visit-section"},Ga={class:"section-header"},Wa={class:"tags-container"},Ja={key:7,class:"empty-section"},Qa={key:8,class:"visit-section"},Xa={class:"section-header"},Ka={class:"tags-container"},Za={key:9,class:"empty-section"},en={key:10,class:"visit-section"},an={class:"section-header"},nn={class:"exam-section"},tn={key:0,class:"exam-category"},on={class:"exam-category-header"},ln={class:"exam-items"},sn={key:1,class:"exam-category normal"},dn={class:"exam-category-header"},rn={key:2,class:"exam-category"},cn={class:"exam-category-header"},un={class:"exam-items"},mn={key:3,class:"exam-category normal"},pn={class:"exam-category-header"},vn={key:4,class:"exam-category"},hn={class:"exam-category-header"},gn={class:"exam-items"},fn={key:5,class:"exam-category normal"},yn={class:"exam-category-header"},bn={key:6,class:"exam-category"},xn={class:"exam-category-header"},_n={class:"exam-items"},wn={key:7,class:"exam-category normal"},kn={class:"exam-category-header"},Dn={key:8,class:"exam-category"},Cn={class:"exam-category-header"},An={class:"exam-items"},Sn={key:9,class:"exam-category normal"},En={class:"exam-category-header"},In={key:10,class:"exam-category"},On={class:"exam-category-header"},Nn={class:"exam-items"},Pn={key:11,class:"exam-category normal"},Bn={class:"exam-category-header"},Ln={key:12,class:"exam-category"},Mn={class:"exam-category-header"},Fn={class:"exam-items"},Tn={key:13,class:"exam-category normal"},zn={class:"exam-category-header"},Hn={key:14,class:"exam-category"},Rn={class:"exam-category-header"},Vn={class:"exam-items"},qn={key:15,class:"exam-category normal"},Un={class:"exam-category-header"},jn={key:16,class:"exam-category"},$n={class:"exam-items"},Yn={key:17,class:"exam-category normal"},Gn={key:18,class:"exam-category"},Wn={class:"exam-category-header"},Jn={class:"exam-items"},Qn={key:19,class:"exam-category normal"},Xn={class:"exam-category-header"},Kn={key:20,class:"exam-category"},Zn={class:"exam-category-header"},et={class:"exam-items"},at={key:21,class:"exam-category normal"},nt={class:"exam-category-header"},tt={key:11,class:"empty-section"},it=ye(ba,[["render",function(e,a,n,t,i,o){const l=p("ion-icon");return h(),v("div",xa,[g("div",_a,[a[0]||(a[0]=g("h5",null,"Patient's Clinical Assessment Summary",-1)),g("div",wa,[f(l,{icon:e.calendarOutline},null,8,["icon"]),g("span",null,Y(e.formatVisitDate(e.visitDate)),1)])]),g("div",ka,[e.hasLevelOfConsciousness?(h(),v("div",Da,[g("div",Ca,[f(l,{icon:e.alertCircleOutline,class:"section-icon"},null,8,["icon"]),a[1]||(a[1]=g("h3",null,"Level of Consciousness",-1))]),g("div",Aa,[e.levelOfConsciousness.eyeResponse?(h(),v("div",Sa,[a[2]||(a[2]=g("span",{class:"info-label"},"Eye Response:",-1)),g("span",Ea,Y(e.levelOfConsciousness.eyeResponse),1)])):w("",!0),e.levelOfConsciousness.verbalResponse?(h(),v("div",Ia,[a[3]||(a[3]=g("span",{class:"info-label"},"Verbal Response:",-1)),g("span",Oa,Y(e.levelOfConsciousness.verbalResponse),1)])):w("",!0),e.levelOfConsciousness.motorResponse?(h(),v("div",Na,[a[4]||(a[4]=g("span",{class:"info-label"},"Motor Response:",-1)),g("span",Pa,Y(e.levelOfConsciousness.motorResponse),1)])):w("",!0)])])):(h(),v("div",Ba,[f(l,{icon:e.alertCircleOutline},null,8,["icon"]),a[5]||(a[5]=g("p",null,"No level of consciousness recorded",-1))])),e.hasPresentingComplaints?(h(),v("div",La,[g("div",Ma,[f(l,{icon:e.documentTextOutline,class:"section-icon"},null,8,["icon"]),a[6]||(a[6]=g("h3",null,"Presenting Complaints",-1))]),g("div",Fa,[(h(!0),v(S,null,G(e.uniquePresentingComplaints,(e,a)=>(h(),v("div",{class:"complaint-tag",key:a},Y(e),1))),128))])])):(h(),v("div",Ta,[f(l,{icon:e.documentTextOutline},null,8,["icon"]),a[7]||(a[7]=g("p",null,"No presenting complaints recorded",-1))])),e.hasPregnancyData?(h(),v("div",za,[g("div",Ha,[f(l,{icon:e.femaleOutline,class:"section-icon"},null,8,["icon"]),a[8]||(a[8]=g("h3",null,"Pregnancy Status",-1))]),g("div",Ra,[e.pregnancy.patientPregnant?(h(),v("div",Va,[a[9]||(a[9]=g("span",{class:"info-label"},"Pregnant:",-1)),g("span",qa,Y(e.pregnancy.patientPregnant),1)])):w("",!0),e.pregnancy.breastFeeding?(h(),v("div",Ua,[a[10]||(a[10]=g("span",{class:"info-label"},"Breastfeeding:",-1)),g("span",ja,Y(e.pregnancy.breastFeeding),1)])):w("",!0)])])):(h(),v("div",$a,[f(l,{icon:e.femaleOutline},null,8,["icon"]),a[11]||(a[11]=g("p",null,"No pregnancy status recorded",-1))])),e.hasPastMedicalHistory?(h(),v("div",Ya,[g("div",Ga,[f(l,{icon:e.medicalOutline,class:"section-icon"},null,8,["icon"]),a[12]||(a[12]=g("h3",null,"Medical History",-1))]),g("div",Wa,[(h(!0),v(S,null,G(e.uniquePastMedicalHistory,(e,a)=>(h(),v("div",{class:"medical-tag",key:a},Y(e),1))),128))])])):(h(),v("div",Ja,[f(l,{icon:e.medicalOutline},null,8,["icon"]),a[13]||(a[13]=g("p",null,"No medical history recorded",-1))])),e.hasAllergies?(h(),v("div",Qa,[g("div",Xa,[f(l,{icon:e.warningOutline,class:"section-icon"},null,8,["icon"]),a[14]||(a[14]=g("h3",null,"Allergies",-1))]),g("div",Ka,[e.item.selected?(h(!0),v(S,{key:0},G(e.selectedAllergiesList2,(e,a)=>(h(),v("div",{class:"allergy-tag",key:a},Y(e.name),1))),128)):w("",!0)])])):(h(),v("div",Za,[f(l,{icon:e.warningOutline},null,8,["icon"]),a[15]||(a[15]=g("p",null,"No allergies recorded",-1))])),e.hasPhysicalExam?(h(),v("div",en,[g("div",an,[f(l,{icon:e.bodyOutline,class:"section-icon"},null,8,["icon"]),a[16]||(a[16]=g("h3",null,"Physical Examination",-1))]),g("div",nn,[e.eyesAbnormal.length?(h(),v("div",tn,[g("div",on,[f(l,{icon:e.eyeOutline},null,8,["icon"]),a[17]||(a[17]=g("h4",null,"Eyes",-1))]),g("div",ln,[(h(!0),v(S,null,G(e.eyesAbnormal,(e,a)=>(h(),v("div",{class:"exam-item",key:"eyes-"+a},Y(e),1))),128))])])):e.eyesExamined?(h(),v("div",sn,[g("div",dn,[f(l,{icon:e.eyeOutline},null,8,["icon"]),a[18]||(a[18]=g("h4",null,"Eyes",-1))]),a[19]||(a[19]=g("div",{class:"exam-items"},[g("div",{class:"exam-item normal"}," Normal examination ")],-1))])):w("",!0),e.mouthAbnormal.length?(h(),v("div",rn,[g("div",cn,[f(l,{icon:e.nutritionOutline},null,8,["icon"]),a[20]||(a[20]=g("h4",null,"Mouth",-1))]),g("div",un,[(h(!0),v(S,null,G(e.mouthAbnormal,(e,a)=>(h(),v("div",{class:"exam-item",key:"mouth-"+a},Y(e),1))),128))])])):e.mouthExamined?(h(),v("div",mn,[g("div",pn,[f(l,{icon:e.nutritionOutline},null,8,["icon"]),a[21]||(a[21]=g("h4",null,"Mouth",-1))]),a[22]||(a[22]=g("div",{class:"exam-items"},[g("div",{class:"exam-item normal"}," Normal examination ")],-1))])):w("",!0),e.earsAbnormal.length?(h(),v("div",vn,[g("div",hn,[f(l,{icon:e.earOutline},null,8,["icon"]),a[23]||(a[23]=g("h4",null,"Ears",-1))]),g("div",gn,[(h(!0),v(S,null,G(e.earsAbnormal,(e,a)=>(h(),v("div",{class:"exam-item",key:"ears-"+a},Y(e),1))),128))])])):e.earsExamined?(h(),v("div",fn,[g("div",yn,[f(l,{icon:e.earOutline},null,8,["icon"]),a[24]||(a[24]=g("h4",null,"Ears",-1))]),a[25]||(a[25]=g("div",{class:"exam-items"},[g("div",{class:"exam-item normal"}," Normal examination ")],-1))])):w("",!0),e.faceAbnormal.length?(h(),v("div",bn,[g("div",xn,[f(l,{icon:e.happyOutline},null,8,["icon"]),a[26]||(a[26]=g("h4",null,"Face",-1))]),g("div",_n,[(h(!0),v(S,null,G(e.faceAbnormal,(e,a)=>(h(),v("div",{class:"exam-item",key:"face-"+a},Y(e),1))),128))])])):e.faceExamined?(h(),v("div",wn,[g("div",kn,[f(l,{icon:e.happyOutline},null,8,["icon"]),a[27]||(a[27]=g("h4",null,"Face",-1))]),a[28]||(a[28]=g("div",{class:"exam-items"},[g("div",{class:"exam-item normal"}," Normal examination ")],-1))])):w("",!0),e.neckAbnormal.length?(h(),v("div",Dn,[g("div",Cn,[f(l,{icon:e.manOutline},null,8,["icon"]),a[29]||(a[29]=g("h4",null,"Neck",-1))]),g("div",An,[(h(!0),v(S,null,G(e.neckAbnormal,(e,a)=>(h(),v("div",{class:"exam-item",key:"neck-"+a},Y(e),1))),128))])])):e.neckExamined?(h(),v("div",Sn,[g("div",En,[f(l,{icon:e.manOutline},null,8,["icon"]),a[30]||(a[30]=g("h4",null,"Neck",-1))]),a[31]||(a[31]=g("div",{class:"exam-items"},[g("div",{class:"exam-item normal"}," Normal examination ")],-1))])):w("",!0),e.chestAbnormal.length?(h(),v("div",In,[g("div",On,[f(l,{icon:e.fitnessOutline},null,8,["icon"]),a[32]||(a[32]=g("h4",null,"Chest",-1))]),g("div",Nn,[(h(!0),v(S,null,G(e.chestAbnormal,(e,a)=>(h(),v("div",{class:"exam-item",key:"chest-"+a},Y(e),1))),128))])])):e.chestExamined?(h(),v("div",Pn,[g("div",Bn,[f(l,{icon:e.fitnessOutline},null,8,["icon"]),a[33]||(a[33]=g("h4",null,"Chest",-1))]),a[34]||(a[34]=g("div",{class:"exam-items"},[g("div",{class:"exam-item normal"}," Normal examination ")],-1))])):w("",!0),e.chestMovementAbnormal.length?(h(),v("div",Ln,[g("div",Mn,[f(l,{icon:e.moveOutline},null,8,["icon"]),a[35]||(a[35]=g("h4",null,"Chest Movement",-1))]),g("div",Fn,[(h(!0),v(S,null,G(e.chestMovementAbnormal,(e,a)=>(h(),v("div",{class:"exam-item",key:"chest-move-"+a},Y(e),1))),128))])])):e.chestMovementExamined?(h(),v("div",Tn,[g("div",zn,[f(l,{icon:e.moveOutline},null,8,["icon"]),a[36]||(a[36]=g("h4",null,"Chest Movement",-1))]),a[37]||(a[37]=g("div",{class:"exam-items"},[g("div",{class:"exam-item normal"}," Normal movement ")],-1))])):w("",!0),e.heartSoundsAbnormal.length?(h(),v("div",Hn,[g("div",Rn,[f(l,{icon:e.pulseOutline},null,8,["icon"]),a[38]||(a[38]=g("h4",null,"Heart Sounds",-1))]),g("div",Vn,[(h(!0),v(S,null,G(e.heartSoundsAbnormal,(e,a)=>(h(),v("div",{class:"exam-item",key:"heart-"+a},Y(e),1))),128))])])):e.heartSoundsExamined?(h(),v("div",qn,[g("div",Un,[f(l,{icon:e.pulseOutline},null,8,["icon"]),a[39]||(a[39]=g("h4",null,"Heart Sounds",-1))]),a[40]||(a[40]=g("div",{class:"exam-items"},[g("div",{class:"exam-item normal"}," Normal heart sounds ")],-1))])):w("",!0),e.breathSoundsAbnormal.length?(h(),v("div",jn,[a[41]||(a[41]=g("div",{class:"exam-category-header"},[g("h4",null,"Breath Sounds")],-1)),g("div",$n,[(h(!0),v(S,null,G(e.breathSoundsAbnormal,(e,a)=>(h(),v("div",{class:"exam-item",key:"breath-"+a},Y(e),1))),128))])])):e.breathSoundsExamined?(h(),v("div",Yn,a[42]||(a[42]=[g("div",{class:"exam-category-header"},[g("h4",null,"Breath Sounds")],-1),g("div",{class:"exam-items"},[g("div",{class:"exam-item normal"}," Normal breath sounds ")],-1)]))):w("",!0),e.addedBreathSoundsAbnormal.length?(h(),v("div",Gn,[g("div",Wn,[f(l,{icon:e.addOutline},null,8,["icon"]),a[43]||(a[43]=g("h4",null,"Added Breath Sounds",-1))]),g("div",Jn,[(h(!0),v(S,null,G(e.addedBreathSoundsAbnormal,(e,a)=>(h(),v("div",{class:"exam-item",key:"added-breath-"+a},Y(e),1))),128))])])):e.addedBreathSoundsExamined?(h(),v("div",Qn,[g("div",Xn,[f(l,{icon:e.addOutline},null,8,["icon"]),a[44]||(a[44]=g("h4",null,"Added Breath Sounds",-1))]),a[45]||(a[45]=g("div",{class:"exam-items"},[g("div",{class:"exam-item normal"}," No abnormal added sounds ")],-1))])):w("",!0),e.abdominalInspectionAbnormal.length?(h(),v("div",Kn,[g("div",Zn,[f(l,{icon:e.scanOutline},null,8,["icon"]),a[46]||(a[46]=g("h4",null,"Abdominal Inspection",-1))]),g("div",et,[(h(!0),v(S,null,G(e.abdominalInspectionAbnormal,(e,a)=>(h(),v("div",{class:"exam-item",key:"abdomen-"+a},Y(e),1))),128))])])):e.abdominalInspectionExamined?(h(),v("div",at,[g("div",nt,[f(l,{icon:e.scanOutline},null,8,["icon"]),a[47]||(a[47]=g("h4",null,"Abdominal Inspection",-1))]),a[48]||(a[48]=g("div",{class:"exam-items"},[g("div",{class:"exam-item normal"}," Normal abdominal inspection ")],-1))])):w("",!0)])])):(h(),v("div",tt,[f(l,{icon:e.bodyOutline},null,8,["icon"]),a[49]||(a[49]=g("p",null,"No physical exam recorded",-1))]))])])}],["__scopeId","data-v-8f0a8a33"]]),ot=x(()=>[{componentType:"radioButtonField",header:"Eye opening response",name:"Eye opening response",obsValueType:"value_coded",type:"inline",options:[{label:"Spontaneously",value:"Spontaneously"},{label:"To speech",value:"To speech"},{label:"To pain",value:"To pain"},{label:"No response",value:"No response"}]},{componentType:"Dashes"},{componentType:"radioButtonField",header:"Best verbal response",name:"Best verbal response",obsValueType:"value_coded",type:"inline",options:[{label:"Oriented to time, place and person",value:"Oriented to time, place and person"},{label:"Confused",value:"Confused"},{label:"Inappropriate words",value:"Inappropriate words"},{label:"Incomprehensible sounds",value:"Incomprehensible sounds"},{label:"No response",value:"No response"}]},{componentType:"Dashes"},{componentType:"radioButtonField",header:"Best motor response",name:"Best motor response",obsValueType:"value_coded",type:"inline",options:[{label:"Obeys commands",value:"Obeys commands"},{label:"Moves to localised pain",value:"Moves to localised pain"},{label:"Flexion withdrawal from pain",value:"Flexion withdrawal from pain"},{label:"Abnormal flexion (decorticate)",value:"Abnormal flexion (decorticate)"},{label:"Abnormal extension (decerebrate)",value:"Abnormal extension (decerebrate)"},{label:"No response",value:"No response"}]}]),lt=x(()=>[{componentType:"radioButtonField",header:"Eye opening response",name:"Eye opening response",obsValueType:"value_coded",type:"inline",options:[{label:"Directed eye movements",value:"Directed eye movements"},{label:"Not directed",value:"Not directed"}]},{componentType:"Dashes"},{componentType:"radioButtonField",header:"Best verbal response",name:"Best verbal response",obsValueType:"value_coded",type:"inline",options:[{label:"Appropriate cry",value:"Appropriate cry"},{label:"Inappropriate cry or moan",value:"Inappropriate cry or moan"},{label:"No cry",value:"No cry"}]},{componentType:"Dashes"},{componentType:"radioButtonField",header:"Best motor response",name:"Best motor response",obsValueType:"value_coded",type:"inline",options:[{label:"Localizes pain",value:"Localizes pain"},{label:"Withdraws from pain",value:"Withdraws from pain"},{label:"Non specific or no response",value:"Non specific or no response"}]}]),st={Spontaneously:4,"To speech":3,"To pain":2,"No response":1},dt={"Oriented to time, place and person":5,Confused:4,"Inappropriate words":3,"Incomprehensible sounds":2,"No response":1},rt={"Obeys commands":6,"Moves to localised pain":5,"Flexion withdrawal from pain":4,"Abnormal flexion (decorticate)":3,"Abnormal extension (decerebrate)":2,"No response":1},ct={"Not directed":0,"Directed eye movements":1},ut={"Non specific or no response":0,"Withdraws from pain":1,"Localizes pain":2},mt={"No cry":0,"Inappropriate cry or moan":1,"Appropriate cry":2},pt={class:"modal_wrapper"},vt=e("e",n({__name:"LevelOfConsciousness",setup(e,{expose:a}){var n;const t=fe(),{patient:i}=y(t),o=b(me.getAgeInYears(null==i||null===(n=i.value)||void 0===n||null===(n=n.personInformation)||void 0===n?void 0:n.birthdate)),l=b(null),s=x(()=>{var e,a,n,t;const i=(null===(e=l.value)||void 0===e?void 0:e.getFormValues())||{},s=i["Eye opening response"]||"",d=i["Best motor response"]||"",r=i["Best verbal response"]||"",c=o.value<18,u=null!==(a=(c?ct:st)[s])&&void 0!==a?a:0,m=null!==(n=(c?ut:rt)[d])&&void 0!==n?n:0,p=null!==(t=(c?mt:dt)[r])&&void 0!==t?t:0;return`(M ${m} V ${p} E ${u}) ${u+m+p}/${c?5:15}`});return a({onSubmit:async()=>{var e;if(!l.value)return void console.error("Form reference is not available");const a=(null===(e=l.value)||void 0===e?void 0:e.getFormValues())||{};a["Eye opening response"]||a["Best motor response"]||a["Best verbal response"]?(await pe.buildAddObsToEncounterPatient(a,Ce.ASSESSMENT),l.value.resetForm(),Se("Level of Consciousness saved successfully")):Ae(" No level of consciousness data to save ")}}),(e,a)=>(h(),v("div",pt,[o.value<18?(h(),k(_e,{key:0,formData:C(lt),ref_key:"formRef",ref:l},null,8,["formData"])):(h(),k(_e,{key:1,formData:C(ot),ref_key:"formRef",ref:l},null,8,["formData"])),g("h5",null,Y(s.value),1)]))}})),ht={class:"modal_wrapper"},gt=e("_",n({__name:"PregnancyBreastfeeding",setup(e,{expose:a}){const n=Be(),{pregnancy:t}=y(n),i=()=>{};return a({onSubmit:async()=>{const e=await Ke(t.value);e.length>0?(await pe.addObsToEncounterPatient(e,Ce.PREGNANCY_STATUS),Se("Pregnancy status saved successfully")):Ae("No pregnancy status data to save ")}}),(e,a)=>(h(),v("div",ht,[f(Xe,{contentData:C(t),"onUpdate:inputValue":i},null,8,["contentData"])]))}})),ft={class:"modal_wrapper"},yt={class:"uniform_columns"},bt=ye(n({__name:"PastMedicalHistory",setup(e,{expose:a}){const n=Le(),{pastMedicalHistory:t}=y(n),i=b([]);_(()=>{i.value=n.getInitial(),o()}),W(t,()=>{o()},{deep:!0});const o=()=>{var e;const a=["TB","Chronic Obstructive Pulmonary Disease (COPD)","Asthma","Epilepsy","Previous stroke","Peptic Ulcer Disease (PUD)","Mental disorder","Bleeding disorders","Hypertension","HIV Positive","Diabetes Mellitus"];null!==(e=Me(t.value,"None"))&&void 0!==e&&e.checked?a.forEach(e=>{Fe(t.value,"TB treatment","displayNone",!0),ke(t.value,"TB drugs","displayNone",!0),ke(t.value,"TB drug start date","displayNone",!0),Fe(t.value,"Hypertension medication","displayNone",!0),ke(t.value,"Current hypertension treatment regimen","displayNone",!0),Fe(t.value,"HIV status","displayNone",!0),ke(t.value,"ARV start date","displayNone",!0),Fe(t.value,"Diabetes","displayNone",!0),Fe(t.value,"Controlled by","displayNone",!0),Te(t.value,e,"checked",!1),Te(t.value,e,"disabled",!0)}):a.forEach(e=>{Te(t.value,e,"disabled",!1)})},l=e=>{ke(t.value,"TB drugs","popOverData",{filterData:!0,data:[{name:"Auramine 'O' (C.I. 41000) 50g"},{name:"Bedaquilline 100mg"},{name:"Clofazimine 100mg"},{name:"Clofazimine 50mg"},{name:"Cycloserine 125mg"},{name:"Cycloserine 250mg"},{name:"Delamanid 50mg"},{name:"Ethambutol 100mg"},{name:"Ethambutol 400mg"},{name:"Ethionamide 250mg"},{name:"Isoniazid 100mg "},{name:"Isoniazid 300mg"},{name:"Isoniazid / Rifapentine 300mg / 300mg"},{name:"Levofloxacin 100mg"},{name:"Levofloxacin 250mg"},{name:"Linezolid 600mg"},{name:"Moxifloxacin 400mg"},{name:"Pyrazinamide 400mg"},{name:"Rifabutin 150mg Capsules"},{name:"Rifampicin 150mg/isoniazid 75mg"},{name:"Rifampicin 75mg+INH 50mg dispersible"},{name:"Rifampicin 75mg+INH 50mg+Pyrazinamide 150mg dispersible"},{name:"Rifampicin150mg/Isoniazid75mg/Pyrazinamide 400mg/Ethambutol"}]}),ke(t.value,"Current hypertension treatment regimen","popOverData",{filterData:!0,data:[{name:"Captopril 12.5mg"},{name:"Aspirin 75mg"},{name:"Hydrochlorothiazide 25mg"},{name:"Enalapril Meleate 5mg"},{name:"Enalapril Maleate 10mg"}]})};return a({onSubmit:async()=>{const e=await(async()=>[...await Ze(t.value),...await Ke(t.value),...await ea(t.value)])();0!==e.length?(await pe.addObsToEncounterPatient(e,Ce.PAST_MEDICAL_HISTORY),Se("Past medical history saved successful")):Ae("No past medical history data to save")}}),(e,a)=>(h(),v("div",ft,[g("div",yt,[f(Xe,{contentData:C(t),initialData:i.value,"onUpdate:inputValue":l,"onUpdate:selected":l},null,8,["contentData","initialData"])])]))}}),[["__scopeId","data-v-49fdce72"]]),xt={class:"container"},_t=e("d",ye(n({__name:"PhysicalExamination",setup(e,{expose:a}){const n=ze(),t=fe(),{physicalExam:i}=y(n),{patient:o}=y(t),l=b([]);_(()=>{l.value=n.getInitial(),s(),d()}),W(i,()=>{s(),d()},{deep:!0});const s=()=>{"No"==He(i.value,"Physical examination")?Fe(i.value,"Reason why physical examination not done","displayNone",!1):(Fe(i.value,"Reason why physical examination not done","displayNone",!0),Fe(i.value,"Reason why physical examination not done","selectedValue",""))},d=()=>{var e;const a=null===(e=o.value)||void 0===e||null===(e=e.personInformation)||void 0===e?void 0:e.gender;"M"==a&&(Te(i.value,"Vulva examination","disabled",!0),Te(i.value,"Visible bleeding","disabled",!0)),"F"==a&&(Te(i.value,"Urethral meatus abnormal","disabled",!0),Te(i.value,"Scrotal swelling","disabled",!0),Te(i.value,"Tastes swelling","disabled",!0))};return a({onSubmit:async()=>{const e=await(async()=>[...await Ze(i.value),...await Ke(i.value),...await ea(i.value)])();0!==e.length?(await pe.addObsToEncounterPatient(e,Ce.PHYSICAL_EXAMINATION),Se("Diagnosis saved successful")):Ae("No physical examination data to save")}}),(e,a)=>{const n=p("ion-card-content"),t=p("ion-card");return h(),v("div",xt,[f(t,{class:"section"},{default:D(()=>[f(n,null,{default:D(()=>[f(Xe,{contentData:C(i),initialData:l.value},null,8,["contentData","initialData"])]),_:1})]),_:1})])}}}),[["__scopeId","data-v-3818e796"]])),wt={key:0},kt={class:"ion-padding",slot:"content"},Dt={class:"nav-buttons"},Ct={class:"ion-padding",slot:"content"},At={class:"nav-buttons"},St={class:"ion-padding",slot:"content"},Et={class:"nav-buttons"},It={class:"ion-padding",slot:"content"},Ot={class:"nav-buttons"},Nt={class:"ion-padding",slot:"content"},Pt={class:"nav-buttons"},Bt={class:"ion-padding",slot:"content"},Lt={class:"nav-buttons"};e("C",ye(n({__name:"ClinicalAssessment",setup(e,{expose:a}){const n=b("loc"),t=b(0),i=new Re,o=fe(),l=()=>{t.value++},s=b(null),r=b(null),c=b(null),u=b(null),m=b(null),p=b(null),y=[{id:"loc",label:"Level of consciousness",show:!0},{id:"pc",label:"Presenting complaints",show:!0},{id:"pbs",label:"Pregnancy and breastfeeding status",show:()=>i.isChildBearing()},{id:"pmh",label:"Past medical history",show:!0},{id:"al",label:"Allergies",show:!0},{id:"pe",label:"Physical examination",show:!0}],_=x(()=>{const e=o.patient;if(!e)return!1;const a=(new Date).toISOString().split("T")[0];return["levelOfConsciousness","presentingComplaints","pastMedicalHistory","physicalExam","allergies","pregnancy"].some(n=>{var t,i;return[...(null===(t=e[n])||void 0===t?void 0:t.saved)||[],...(null===(i=e[n])||void 0===i?void 0:i.unsaved)||[]].some(e=>!!e.obs_datetime&&new Date(e.obs_datetime).toISOString().split("T")[0]===a)})}),S=x(()=>y.filter(e=>"function"==typeof e.show?e.show():e.show)),I=e=>{const a=y.find(a=>a.id===e);return!!a&&("function"==typeof a.show?a.show():a.show)},O=e=>S.value.findIndex(a=>a.id===e),N=e=>{const a=O(e);a>0&&(n.value=S.value[a-1].id)},P=e=>{const a=O(e)+1;a<S.value.length?n.value=S.value[a].id:(n.value="",l())};return a({onSubmit:async()=>{const e=[{ref:s,name:"PresentingComplaints"},{ref:r,name:"LevelOfConsciousness"},{ref:c,name:"PastMedicalHistory"},{ref:m,name:"PregnancyBreastfeeding"},{ref:p,name:"PhysicalExamination"}];for(const n of e)if(n.ref.value&&"function"==typeof n.ref.value.onSubmit)try{await n.ref.value.onSubmit()}catch(a){console.error(`Error calling ${n.name} onSubmit:`,a)}else console.log(`${n.name} component ref not available or no onSubmit method`)}}),(e,a)=>_.value?(h(),v("div",wt,[(h(),k(it,{key:t.value}))])):(h(),k(C(Z),{key:1,style:{width:"100%"}},{default:D(()=>[f(C(J),{value:n.value,"onUpdate:value":a[12]||(a[12]=e=>n.value=e),ref:"accordionGroup",class:"previousView"},{default:D(()=>[I("loc")?(h(),k(C(Q),{key:0,value:"loc",class:"_card"},{default:D(()=>[f(C(d),{slot:"header",color:"light"},{default:D(()=>[f(C(X),{class:"previousLabel"},{default:D(()=>a[13]||(a[13]=[A("Level of consciousness")])),_:1,__:[13]})]),_:1}),g("div",kt,[f(vt,{"is-active":"loc"===n.value,ref_key:"levelOfConsciousnessFormRef",ref:r,onDataSaved:l},null,8,["is-active"]),g("div",Dt,[O("loc")>0?(h(),k(C(E),{key:0,fill:"outline",onClick:a[0]||(a[0]=K(e=>N("loc"),["stop"]))},{default:D(()=>a[14]||(a[14]=[A(" Back ")])),_:1,__:[14]})):w("",!0),f(C(E),{fill:"outline",onClick:a[1]||(a[1]=K(e=>P("loc"),["stop"]))},{default:D(()=>[A(Y(O("loc")<S.value.length-1?"Next":"Finish"),1)]),_:1})])])]),_:1})):w("",!0),I("pc")?(h(),k(C(Q),{key:1,value:"pc",class:"_card"},{default:D(()=>[f(C(d),{slot:"header",color:"light"},{default:D(()=>[f(C(X),{class:"previousLabel"},{default:D(()=>a[15]||(a[15]=[A("Presenting complaints")])),_:1,__:[15]})]),_:1}),g("div",Ct,[f(ya,{"is-active":"pc"===n.value,onDataSaved:l,ref_key:"presentingComplaintsFormRef",ref:s},null,8,["is-active"]),g("div",At,[O("pc")>0?(h(),k(C(E),{key:0,fill:"outline",onClick:a[2]||(a[2]=K(e=>N("pc"),["stop"]))},{default:D(()=>a[16]||(a[16]=[A(" Back ")])),_:1,__:[16]})):w("",!0),f(C(E),{fill:"outline",onClick:a[3]||(a[3]=K(e=>P("pc"),["stop"]))},{default:D(()=>[A(Y(O("pc")<S.value.length-1?"Next":"Finish"),1)]),_:1})])])]),_:1})):w("",!0),I("pbs")?(h(),k(C(Q),{key:2,value:"pbs",class:"_card"},{default:D(()=>[f(C(d),{slot:"header",color:"light"},{default:D(()=>[f(C(X),{class:"previousLabel"},{default:D(()=>a[17]||(a[17]=[A("Pregnancy and breastfeeding status")])),_:1,__:[17]})]),_:1}),g("div",St,[f(gt,{"is-active":"pbs"===n.value,ref_key:"pregnancyBreastfeedingFormRef",ref:m,onDataSaved:l},null,8,["is-active"]),g("div",Et,[O("pbs")>0?(h(),k(C(E),{key:0,fill:"outline",onClick:a[4]||(a[4]=K(e=>N("pbs"),["stop"]))},{default:D(()=>a[18]||(a[18]=[A(" Back ")])),_:1,__:[18]})):w("",!0),f(C(E),{fill:"outline",onClick:a[5]||(a[5]=K(e=>P("pbs"),["stop"]))},{default:D(()=>[A(Y(O("pbs")<S.value.length-1?"Next":"Finish"),1)]),_:1})])])]),_:1})):w("",!0),I("pmh")?(h(),k(C(Q),{key:3,value:"pmh",class:"_card"},{default:D(()=>[f(C(d),{slot:"header",color:"light"},{default:D(()=>[f(C(X),{class:"previousLabel"},{default:D(()=>a[19]||(a[19]=[A("Past medical history")])),_:1,__:[19]})]),_:1}),g("div",It,[f(bt,{"is-active":"pmh"===n.value,ref_key:"pastMedicalHistoryFormRef",ref:c,onDataSaved:l},null,8,["is-active"]),g("div",Ot,[O("pmh")>0?(h(),k(C(E),{key:0,fill:"outline",onClick:a[6]||(a[6]=K(e=>N("pmh"),["stop"]))},{default:D(()=>a[20]||(a[20]=[A(" Back ")])),_:1,__:[20]})):w("",!0),f(C(E),{fill:"outline",onClick:a[7]||(a[7]=K(e=>P("pmh"),["stop"]))},{default:D(()=>[A(Y(O("pmh")<S.value.length-1?"Next":"Finish"),1)]),_:1})])])]),_:1})):w("",!0),I("al")?(h(),k(C(Q),{key:4,value:"al",class:"_card"},{default:D(()=>[f(C(d),{slot:"header",color:"light"},{default:D(()=>[f(C(X),{class:"previousLabel"},{default:D(()=>a[21]||(a[21]=[A("Allergies")])),_:1,__:[21]})]),_:1}),g("div",Nt,[f(aa,{"is-active":"al"===n.value,ref_key:"allergiesFormRef",ref:u,onDataSaved:l},null,8,["is-active"]),g("div",Pt,[O("al")>0?(h(),k(C(E),{key:0,fill:"outline",onClick:a[8]||(a[8]=K(e=>N("al"),["stop"]))},{default:D(()=>a[22]||(a[22]=[A(" Back ")])),_:1,__:[22]})):w("",!0),f(C(E),{fill:"outline",onClick:a[9]||(a[9]=K(e=>P("al"),["stop"]))},{default:D(()=>[A(Y(O("al")<S.value.length-1?"Next":"Finish"),1)]),_:1})])])]),_:1})):w("",!0),I("pe")?(h(),k(C(Q),{key:5,value:"pe",class:"_card"},{default:D(()=>[f(C(d),{slot:"header",color:"light"},{default:D(()=>[f(C(X),{class:"previousLabel"},{default:D(()=>a[23]||(a[23]=[A("Physical examination")])),_:1,__:[23]})]),_:1}),g("div",Bt,[f(_t,{"is-active":"pe"===n.value,ref_key:"physicalExaminationFormRef",ref:p,onDataSaved:l},null,8,["is-active"]),g("div",Lt,[O("pe")>0?(h(),k(C(E),{key:0,fill:"outline",onClick:a[10]||(a[10]=K(e=>N("pe"),["stop"]))},{default:D(()=>a[24]||(a[24]=[A(" Back ")])),_:1,__:[24]})):w("",!0),f(C(E),{fill:"outline",onClick:a[11]||(a[11]=K(e=>P("pe"),["stop"]))},{default:D(()=>[A(Y(O("pe")<S.value.length-1?"Next":"Finish"),1)]),_:1})])])]),_:1})):w("",!0)]),_:1},8,["value"])]),_:1}))}}),[["__scopeId","data-v-a8c21622"]]));class Mt extends Ve{constructor(e,a){super(e,8,a)}static async getDiagnosis(e="",a=1,n=10){const t=await Ee.getConceptID("Qech outpatient diagnosis list");return Ve.getJson("diagnosis",{id:t,name:e,page:a,page_size:n})}}e("P",Mt);const Ft=n({name:"Menu",components:{IonContent:c,IonHeader:r,IonItem:d,IonList:s,IonMenu:l,IonTitle:o,IonToolbar:i,List:ue},computed:{...t(fe,["patient"])},data:()=>({valueNumericArray:[],obsDatetime:[],graphIcon:he(["#006401"]),listIcon:ve(["#636363"]),displayGraph:!0,orders:[],height:[],BMI:[],iconBg:{},activeWeight:[],activeHeight:[],activeBMI:[],list:[],series:[{name:"",data:[]}]}),setup:()=>({checkmark:m,pulseOutline:u}),async mounted(){const e=[...await pe.getAll(this.patient.patientID,"Primary diagnosis")||[],...await pe.getAll(this.patient.patientID,"Secondary diagnosis")||[],...await pe.getAll(this.patient.patientID,"Attempted/ Differential diagnosis")||[]],a=Ge.isEmpty(e)?[]:Promise.all(e.map(async e=>({name:await pe.getConceptName(e.value_coded),obs_date:e.obs_datetime})));this.setListData(await a)},methods:{dismiss(){ee.dismiss()},handleIcon(){},setActivClass(e){this.activeHeight="",this.activeBMI="",this.activeWeight="","height"==e?this.activeHeight="_active":"weight"==e?this.activeWeight="_active":"BMI"==e&&(this.activeBMI="_active")},setListData(e){this.list=[],this.list.push({actionBtn:!1,class:"col_background",header:!0,minHeight:"--min-height: 25px;",display:["Date","Diagnosis","Notes"]}),e.forEach(e=>{this.list.push({actionBtn:!1,minHeight:"--min-height: 25px;",class:"col_background",display:[me.toStandardHisFormat(e.obs_date),e.name,""]})})}}}),Tt={class:"modal_wrapper"},zt=ye(Ft,[["render",function(e,a,n,t,i,o){const l=p("list");return h(),v("div",Tt,[g("div",null,[f(l,{listData:e.list},null,8,["listData"])])])}],["__scopeId","data-v-88580898"]]),Ht={class:"custom_card",style:{padding:"10px"}},Rt={key:0},Vt={key:0,style:{color:"red","margin-top":"10px",background:"lightgoldenrodyellow"}},qt={class:"ion-padding",slot:"content"},Ut=(e("O",ye(n({__name:"OPDDiagnosis",setup(e,{expose:a}){const n=be,t=b(!0),i=b(!1),o=b(!0),l=b(!1),s=b(!0),r=b(""),c=b(""),u=b([]),m=b([]),y=b(),E=b(null);qe();const I=x(()=>m.value.some(e=>6542===e.data.concept_id));W(m,()=>{M()},{deep:!0});const O=x(()=>[{name:"primaryDiagnosis",header:"Primary Diagnosis",componentType:"multiSelectInputField",options:u.value,icon:n.search,onSearchChange:B,validation:xe.required},{componentType:"checkboxField",label:"Secondary Diagnosis",type:"single",grid:{s:"6"},name:"secondaryDiagnosisCheckbox"},{componentType:"checkboxField",label:"Differential Diagnosis",type:"single",grid:{s:"6"},name:"differentialDiagnosisCheckbox"},{componentType:"Dashes"},{name:"secondaryDiagnosis",header:"Secondary Diagnosis",componentType:"multiSelectInputField",isMultiple:!0,options:u.value,icon:n.search,condition:e=>null==e?void 0:e.secondaryDiagnosisCheckbox,onSearchChange:B,validation:(e,a)=>N(a,"secondaryDiagnosis")},{name:"differentialDiagnosis",header:"Differential Diagnosis",componentType:"multiSelectInputField",options:u.value,icon:n.search,isMultiple:!0,condition:e=>null==e?void 0:e.differentialDiagnosisCheckbox,onSearchChange:B,validation:(e,a)=>N(a,"differentialDiagnosis")}]),N=(e,a)=>{var n,t,i;if(!e)return null;const o=null===(n=e.primaryDiagnosis)||void 0===n?void 0:n.name,l=(null===(t=e.secondaryDiagnosis)||void 0===t?void 0:t.map(e=>e.name))||[],s=(null===(i=e.differentialDiagnosis)||void 0===i?void 0:i.map(e=>e.name))||[];if("secondaryDiagnosis"===a&&l.includes(o))return`${o} is already the primary diagnosis`;if("differentialDiagnosis"===a&&s.includes(o))return`${o} is already the primary diagnosis`;const d=l.find(e=>s.includes(e));return d?`${d} cannot be both secondary and differential`:null},P=()=>{var e;const a=[],n=m.value.map(e=>e.name),t=(null===(e=E.value)||void 0===e?void 0:e.getFormValues())||{},i=t.primaryDiagnosis||[],o=t.secondaryDiagnosis||[],l=t.differentialDiagnosis||[];if(i.name&&!n.includes(i.name)){if(m.value.some(e=>6542===e.data.concept_id))return Ue("Only one primary diagnosis is allowed"),!1;a.push({actionBtn:!0,btn:["delete"],name:i.name,id:i.concept_id,display:[i.name,"Primary diagnosis"],data:{concept_id:6542,value_coded:i.concept_id,obs_datetime:De.getSessionDate()}})}return o&&o.forEach(e=>{n.includes(e.name)||a.push({actionBtn:!0,btn:["delete"],name:e.name,id:e.concept_id,display:[e.name,"Secondary diagnosis"],data:{concept_id:6543,value_coded:e.concept_id,obs_datetime:De.getSessionDate()}})}),l&&l.forEach(e=>{n.includes(e.name)||a.push({actionBtn:!0,btn:["delete"],name:e.name,id:e.concept_id,display:[e.name,"Differential diagnosis"],data:{concept_id:10201,value_coded:e.concept_id,obs_datetime:De.getSessionDate()}})}),a.length>0&&(m.value=[...m.value,...a]),!0},B=async e=>{const a=e.trim().toLowerCase()||"";return u.value=await Mt.getDiagnosis(a,1,15),u.value},L=e=>{const a=m.value,n=e.name,t=a.filter(e=>e.display[0]!==n);m.value=t},M=()=>{m.value.length>0?(l.value=!0,t.value=!1):i.value||(t.value=!0),s.value=!I.value};return _(async()=>{M(),await B("")}),a({onSubmit:async()=>{if(m.value.length<=0)return void Ae("Diagnosis not saved");const e=m.value.flatMap(e=>e.data);if(e.length<=0)return Ae("Diagnosis not saved");const a=await pe.addObsToEncounter(e,Ce.DIAGNOSIS);await pe.mergeObsToPatient(a),Se("Diagnosis saved successful"),m.value=[]}}),(e,a)=>{const u=p("ion-row"),b=p("ion-label"),x=p("ion-accordion"),_=p("ion-accordion-group");return h(),v(S,null,[g("div",Ht,[f(Je,{status:t.value,content:"No Diagnosis added"},null,8,["status"]),l.value?(h(),v("span",Rt,[f(ue,{listData:m.value,"onClicked:delete":L},null,8,["listData"]),I.value?(h(),v("div",Vt," In order to update the diagnosis list, please remove/delete the primary diagnosis only and then re-add or change it along with the secondary and differential diagnoses. ")):w("",!0)])):w("",!0),i.value?(h(),k(u,{key:1},{default:D(()=>{var e;return[g("div",null,[f(_e,{formData:O.value,ref_key:"formRef",ref:E},null,8,["formData"])]),g("div",null,[f(we,{fill:"clear",icon:C(n).plus,iconSlot:"icon-only","onClicked:btn":a[0]||(a[0]=e=>(async()=>{var e;null==(null===(e=E.value)||void 0===e?void 0:e.validateForm())&&(P(),i.value=!1,l.value=!0,s.value=!0,o.value=!1)})()),name:"Save",disabled:null===(e=E.value)||void 0===e?void 0:e.validateForm(),class:"ion-margin-top"},null,8,["icon","disabled"])])]}),_:1})):w("",!0),s.value?(h(),k(u,{key:2,style:{"margin-top":"10px"}},{default:D(()=>[f(we,{fill:"clear",icon:C(n).plus,iconSlot:"icon-only","onClicked:btn":a[1]||(a[1]=e=>(c.value="",r.value="",t.value=!1,s.value=!1,void(i.value=!0))),name:"Add new Diagnosis"},null,8,["icon"])]),_:1})):w("",!0)]),f(u,null,{default:D(()=>[f(_,{ref_key:"accordionGroup",ref:y,class:"previousView"},{default:D(()=>[f(x,{value:"first","toggle-icon-slot":"start",class:"custom_card"},{default:D(()=>[f(C(d),{slot:"header",color:"light"},{default:D(()=>[f(b,{class:"previousLabel"},{default:D(()=>a[2]||(a[2]=[A("Previous Diagnosis")])),_:1,__:[2]})]),_:1}),g("div",qt,[f(zt)])]),_:1})]),_:1},512)]),_:1})],64)}}}),[["__scopeId","data-v-cdf4ce7e"]])),{class:"allergies-section"}),jt={class:"allergies-container"},$t={key:0,class:"allergies-grid"},Yt={key:1,class:"no-allergies"},Gt={class:"ion-padding",slot:"content"},Wt={key:0},Jt={class:"previousSecDrgs"},Qt={class:"ion-padding",slot:"content"},Xt={class:"previousSecDrgs"},Kt={class:"medication-section"},Zt={class:"medication-content"},ei={key:0,class:"add-medication-form"},ai={class:"form-group"},ni={class:"option-label"},ti={key:0,class:"error-message"},ii={class:"form-row"},oi={class:"form-group"},li={key:0,class:"error-message"},si={class:"form-group"},di={key:0,class:"error-message"},ri={class:"form-group"},ci={key:0,class:"error-message"},ui={class:"action-buttons"},mi={class:"notes-section"},pi={class:"notes-content"},vi={class:"notes-input-container"},hi={class:"ion-padding",slot:"content"},gi={class:"notes-timeline"},fi={class:"note-date"},yi={class:"note-content"},bi={class:"ion-padding",slot:"content"},xi={class:"note-date"},_i={class:"note-content"},wi=n({watch:{},name:"xxxComponent"}),ki=n({...wi,setup(e){const a=be,n=oa,t=b(!1),i=b(!1),o=b(!0),l=b(0),r=b(""),c=b(!1),u=b(""),m=b(!1),y=b(),E=b(!1),O=b(""),P=b(""),B=b(""),L=b(""),M=b(""),F=b("");b(!1),b("Show more medications");const T=je(),z=Pe(),H=x(()=>z.selectedMedicalAllergiesList),R=x(()=>T.selectedMedicalDrugsList),q=x(()=>T.partialOPDdrugList),U=x(()=>T.nonPharmalogicalTherapyAndOtherNotes),$=["first","second","third"],K=b(),Z=b(),ee=b(),ce=b(!1),ue=b(!1),me=b(!1),pe=b("Show more notes"),ve=b("Show more allergies"),he=b(),ge=b(),fe=b(),ye=x(()=>T.editingDrugItem),xe=b("Select a route"),_e=b(!1),ke=b("Select frequency"),Ce=b(!1),Se=b("Select drug"),Ee=b(!1),Ie=b(),Oe=b(),Ne=b(),Be=b([]),Le=b([{concept_id:11797,name:"Buccal",concept_name_id:null,id:1769},{concept_id:11794,name:"Intradermal",concept_name_id:null,id:6284},{concept_id:11795,name:"Intramuscular (IM)",concept_name_id:null,id:6285},{concept_id:11799,name:"Intraosseous",concept_name_id:null,id:6286},{concept_id:11793,name:"Intravenous (IV)",concept_name_id:null,id:6295},{concept_id:3327,name:"Oral",concept_name_id:null,id:8686},{concept_id:11800,name:"Other method of prescription",concept_name_id:null,id:8920},{concept_id:11792,name:"Rectally",concept_name_id:null,id:10785},{concept_id:11798,name:"Subcutaneous",concept_name_id:null,id:12342},{concept_id:11796,name:"Sublingual",concept_name_id:null,id:12344},{concept_id:11792,name:"Rectally",concept_name_id:null,id:14078},{concept_id:11793,name:"Intravenous (IV)",concept_name_id:null,id:14079},{concept_id:11794,name:"Intradermal",concept_name_id:null,id:14080},{concept_id:11795,name:"Intramuscular (IM)",concept_name_id:null,id:14081},{concept_id:11796,name:"Sublingual",concept_name_id:null,id:14082},{concept_id:11797,name:"Buccal",concept_name_id:null,id:14083},{concept_id:11798,name:"Subcutaneous",concept_name_id:null,id:14084},{concept_id:11799,name:"Intraosseous",concept_name_id:null,id:14085},{concept_id:11800,name:"Other method of prescription",concept_name_id:null,id:14086}]),Me=x(()=>Be.value.length?Be.value:Le.value);async function Fe(){return await la()}function Te(){o.value=!o.value,t.value=!0,m.value=!1,E.value=!1}async function ze(){const e=await async function(){return(await async function(e){let a;a=void 0===e.target?e:e.target.value;const n=1,t=10,i=await sa.getOPDDrugs({name:encodeURIComponent(a),page:n,page_size:t});return i.map(e=>({label:e.name,value:e.name,other:e})),i}(O.value)).length>0&&0!=O.value.length}();return console.log({drugNameExists:e}),e?c.value=!1:(r.value="please select a valid drug name",c.value=!0),c.value}async function He(){return Je(B.value)?E.value=!1:(y.value="please enter a number",E.value=!0),E.value}async function Re(){const e=await ze(),a=await He(),n=1==Ge.isEmpty(Oe.value)?(Ce.value=!0,!1):0==Ge.isEmpty(Oe.value)?(Ce.value=!1,!0):void 0,t=1==Ge.isEmpty(Ne.value)?(Ee.value=!0,!1):0==Ge.isEmpty(Ne.value)?(Ee.value=!1,!0):void 0,i=1==Ge.isEmpty(Ie.value)?(_e.value=!0,!1):0==Ge.isEmpty(Ie.value)?(_e.value=!1,!0):void 0;return!e&&!a&&1==n&&1==t&&1==i}async function Ve(){const e=()=>null!=fe.value.dose_strength&&fe.value.dose_strength?Math.trunc(fe.value.dose_strength):1;if(null!==ye.value){if(!(await Re()))return void Ae("Please enter correct data values",4e3);const a=Qe(De.getSessionDate(),parseInt(B.value));let n=!1;1==qe(fe.value)&&(n=!0);const t={drugName:O.value,dose:e(),frequency:Oe.value.label,frequency_code:Oe.value.code,duration:B.value,prescription:a,drug_id:F.value,units:M.value,route_concept_id:Ie.value.concept_id,route_name:Ie.value.name,highlightbackground:n},i=je();console.log(i.setSelectedMedicalDrugsList([t])),i.editingDrugItem=null,o.value=!0}else{if(!(await Re()))return void Ae("Please enter correct data values",4e3);t.value=!1,i.value=!0,o.value=!0;const a=Qe(De.getSessionDate(),parseInt(B.value));let n=!1;1==qe(fe.value)&&(n=!0);const l={drugName:O.value,dose:e(),frequency:Oe.value.label,frequency_code:Oe.value.code,duration:B.value,prescription:a,drug_id:F.value,units:M.value,route_concept_id:Ie.value.concept_id,route_name:Ie.value.name,highlightbackground:n};je().setSelectedMedicalDrugsList([l])}F.value="",O.value="",P.value="",Oe.value=null,B.value="",L.value="",l.value++,Ne.value=null,Ie.value=null}function qe(e){const a=[];return H.value.forEach(e=>{e.selected&&a.push(e.concept_id)}),1==function(e,a){try{return e.some(e=>a.includes(e.concept_id))}catch(n){return!1}}([e],a)&&(Ae("Client is allergic to the selected medication",4e6),!0)}function Ue(e){const a=R.value[e],n=je();n.removeDrugById(a.drug_id),n.editingDrugItem=a,F.value="",O.value="",P.value="",Oe.value=null,B.value="",L.value="",Ne.value=null,Ie.value=null,F.value=a.drug_id,O.value=a.drugName,P.value=a.dose,Oe.value={label:a.frequency,code:a.frequency_code},B.value=a.duration,L.value=a.prescription;const t=q.value.find(e=>e.name===a.drugName);t&&(Ne.value=t),Ie.value={concept_id:a.route_concept_id,name:a.route_name},o.value=!1,l.value++}function $e(){if(null!==ye.value){F.value="",O.value="",P.value="",Oe.value=null,B.value="",L.value="",Ne.value=null,Ie.value=null;const e=je();e.setSelectedMedicalDrugsList([ye.value]),e.editingDrugItem=null}o.value=!0,l.value++}function Ye(e){R.value.splice(e,1),l.value++,Ae("you have removed a drug from list",6e3)}function We(e){!function(e){je().setNonPharmalogicalTherapyAndOtherNotes(e)}(e.target.value)}function Je(e){return/^[0-9]+$/.test(e)}function Qe(e,a){const n=new Date(e);return n.setDate(n.getDate()+a),`${n.getFullYear()}-${String(n.getMonth()+1).padStart(2,"0")}-${String(n.getDate()).padStart(2,"0")}`}function Xe(e){$.filter(a=>a!==e.detail.value);const a=e.detail.value;void 0!==a?"third"==a&&(pe.value="Show less notes",ue.value=!ce.value):(pe.value="Show more notes",ue.value=!ce.value)}function Ke(e){$.filter(a=>a!==e.detail.value);const a=e.detail.value;void 0!==a?"fith"==a&&(ve.value="Show less allegies",me.value=!ce.value):(ve.value="Show more allegies",me.value=!ce.value)}function Ze(e){return e[1]}function ea(e){"Enter"!==e.key&&"ArrowDown"!==e.key||(e.preventDefault(),Ve())}_(async()=>{const e=new na,{previousDrugPrescriptions:a,previousClinicalNotes:n,previousDrugAllergies:t}=await e.getPatientEncounters();K.value=a,Z.value=Object.entries(n)[0];const[,...i]=Object.entries(n);ee.value=i,he.value=Object.entries(t)[0];const[,...o]=Object.entries(t);ge.value=o,await async function(e=5,a=1e3){let n=0;for(;n<e&&(Be.value=await Fe(),!(Be.value.length>0));)n++,await new Promise(e=>setTimeout(e,a));0===Be.value.length&&console.warn("Failed to fetch route list after maximum retries.")}()}),W(()=>O.value,async e=>{ze()}),W(()=>P.value,async e=>{!async function(){Je(P.value)?m.value=!1:(u.value="please enter a number",m.value=!0),m.value}()}),W(()=>B.value,async e=>{He()});const aa=x(()=>[{showAddItemButton:!0,addItemButton:!0,name:null!==ye.value?"Update":"ADD",btnFill:"clear",fn:Ve},{showAddItemButton:!0,addItemButton:!0,name:"CANCEL",btnFill:"clear",fn:$e}]);return(e,t)=>{const i=p("ion-chip"),r=p("ion-text");return h(),k(C(s),null,{default:D(()=>[g("div",Ut,[f(C(X),{class:"section-title"},{default:D(()=>[f(C(I),{icon:C(j),class:"alert-icon"},null,8,["icon"]),f(C(X),null,{default:D(()=>t[9]||(t[9]=[A("Allergies (Medication, Healthcare items, Environment and Food)")])),_:1,__:[9]})]),_:1}),g("div",jt,[H.value.some(e=>e.selected)?(h(),v("div",$t,[(h(!0),v(S,null,G(H.value,(e,a)=>ae((h(),v("div",{key:a,class:"allergy-item"},[f(i,{class:"allergy-chip",color:"danger"},{default:D(()=>[f(C(X),null,{default:D(()=>[A(Y(e.name),1)]),_:2},1024),f(C(I),{icon:C(ne)},null,8,["icon"])]),_:2},1024)])),[[te,e.selected]])),128))])):(h(),v("div",Yt,[f(r,{style:{"font-size":"16px","font-weight":"600",color:"#9c8011"}},{default:D(()=>t[10]||(t[10]=[A("No allergies recorded")])),_:1,__:[10]})])),f(C(J),{ref:"accordionGroup",class:"previousView"},{default:D(()=>[f(C(Q),{value:"fourth","toggle-icon-slot":"start",style:{"border-radius":"10px","background-color":"#fff"}},{default:D(()=>[f(C(d),{slot:"header",color:"light"},{default:D(()=>[f(C(X),{class:"previousLabel"},{default:D(()=>t[11]||(t[11]=[A("Documented allergies timeline")])),_:1,__:[11]})]),_:1}),g("div",Gt,[(h(!0),v(S,null,G(he.value,(e,a)=>(h(),v("div",{class:"ionLbltp",key:a},[1==a?(h(),v("div",Wt,[g("div",null,[f(C(X),{class:"previousLabelDate"},{default:D(()=>[A(Y(e[0].date),1)]),_:2},1024)]),(h(!0),v(S,null,G(e,(e,a)=>(h(),v("div",{key:a},[g("div",Jt,[f(C(s),null,{default:D(()=>[f(C(X),{class:"notes_p"},{default:D(()=>[A(Y(e.value),1)]),_:2},1024)]),_:2},1024)])]))),128))])):w("",!0)]))),128)),f(C(J),{onIonChange:Ke},{default:D(()=>[f(C(Q),{value:"fith","toggle-icon-slot":"start",style:{"border-radius":"10px","background-color":"#fff"}},{default:D(()=>[f(C(d),{slot:"header",color:"light"},{default:D(()=>[f(C(X),{class:"",color:"primary"},{default:D(()=>[A(Y(ve.value),1)]),_:1})]),_:1}),g("div",Qt,[(h(!0),v(S,null,G(ge.value,(e,a)=>(h(),v("div",{class:"ionLbltp",key:a},[g("div",null,[f(C(X),{class:"previousLabelDate"},{default:D(()=>[A(Y(e[0]),1)]),_:2},1024)]),(h(!0),v(S,null,G(Ze(e),(e,a)=>(h(),v("div",{key:a},[g("div",Xt,[f(C(s),null,{default:D(()=>[f(C(X),{class:"notes_p"},{default:D(()=>[A(Y(e.value),1)]),_:2},1024)]),_:2},1024)])]))),128))]))),128))])]),_:1})]),_:1})])]),_:1})]),_:1},512)])]),g("div",Kt,[f(C(d),{lines:"none",class:"section-header"},{default:D(()=>[f(C(I),{icon:C(V),class:"section-icon"},null,8,["icon"]),f(C(X),{class:"section-title",style:{"margin-top":"12px"}},{default:D(()=>t[12]||(t[12]=[A("Medication")])),_:1,__:[12]})]),_:1}),g("div",Zt,[(h(),k(ta,{_selectedMedicalDrugsList:R.value,onEditItem:Ue,onRemoveItem:Ye,key:l.value,class:"medication-list"},null,8,["_selectedMedicalDrugsList"])),o.value?w("",!0):(h(),v("div",ei,[g("div",ai,[t[13]||(t[13]=g("label",{class:"input-label"},"Medication",-1)),f(C(ie),{modelValue:Ne.value,"onUpdate:modelValue":[t[0]||(t[0]=e=>Ne.value=e),t[1]||(t[1]=e=>{var a;(a=e)&&(O.value=a.name,F.value=a.drug_id,M.value=a.units,fe.value=a,qe(a))})],options:q.value,searchable:!0,"close-on-select":!0,"show-labels":!1,placeholder:"Select medication",label:"name","track-by":"drug_id",onSearchChange:t[2]||(t[2]=e=>async function(e){const a=e,n=await sa.getOfflineOPDDrugs({name:a,page:1,page_size:10});n.map(e=>({label:e.name,value:e.name,other:e})),T.setPartialOPDdrugList(n)}(e))},{option:D(e=>[g("div",ni,Y(e.option.name),1)]),_:1},8,["modelValue","options"]),Ee.value?(h(),v("div",ti,Y(Se.value),1)):w("",!0)]),g("div",ii,[g("div",oi,[t[14]||(t[14]=g("label",{class:"input-label"},"Route",-1)),f(C(ie),{modelValue:Ie.value,"onUpdate:modelValue":[t[3]||(t[3]=e=>Ie.value=e),t[4]||(t[4]=e=>{return a=e,void(Ie.value=a);var a})],options:Me.value,searchable:!0,"close-on-select":!0,"show-labels":!1,placeholder:"Select route",label:"name","track-by":"concept_id"},null,8,["modelValue","options"]),_e.value?(h(),v("div",li,Y(xe.value),1)):w("",!0)]),g("div",si,[t[15]||(t[15]=g("label",{class:"input-label"},"Frequency",-1)),f(C(ie),{modelValue:Oe.value,"onUpdate:modelValue":[t[5]||(t[5]=e=>Oe.value=e),t[6]||(t[6]=e=>{return a=e,void(Oe.value=a);var a})],options:C(n),searchable:!0,"close-on-select":!0,"show-labels":!1,placeholder:"Select frequency",label:"label","track-by":"code"},null,8,["modelValue","options"]),Ce.value?(h(),v("div",di,Y(ke.value),1)):w("",!0)]),g("div",ri,[t[16]||(t[16]=g("label",{class:"input-label"},"Duration (days)",-1)),f(C(oe),{modelValue:B.value,"onUpdate:modelValue":t[7]||(t[7]=e=>B.value=e),type:"number",inputmode:"numeric",pattern:"[0-9]*",fill:"outline",placeholder:"Enter duration",onKeydown:ea},null,8,["modelValue"]),E.value?(h(),v("div",ci,Y(y.value),1)):w("",!0)])]),g("div",ui,[aa.value[0].addItemButton?(h(),k(we,{key:0,name:aa.value[0].name,fill:aa.value[0].btnFill,icon:C(le),"onClicked:btn":aa.value[0].fn,class:"save-button"},null,8,["name","fill","icon","onClicked:btn"])):w("",!0),aa.value[1].addItemButton?(h(),k(we,{key:1,name:aa.value[1].name,fill:aa.value[1].btnFill,icon:C(se),"onClicked:btn":aa.value[1].fn,class:"cancel-button"},null,8,["name","fill","icon","onClicked:btn"])):w("",!0)])])),o.value?(h(),k(we,{key:1,name:"Add new medication",fill:"clear",icon:C(N),"onClicked:btn":Te,class:"add-new-button"},null,8,["icon"])):w("",!0)])]),g("div",mi,[f(C(d),{lines:"none",class:"section-header"},{default:D(()=>[f(C(I),{icon:C(de),class:"section-icon"},null,8,["icon"]),f(C(X),{class:"section-title"},{default:D(()=>t[17]||(t[17]=[A("Non-pharmacological therapy and other notes")])),_:1,__:[17]})]),_:1}),g("div",pi,[f(ia,{class:"intervention-component"}),g("div",vi,[f(C(d),{class:"notes-input-item"},{default:D(()=>[f(C(I),{slot:"start",icon:C(a).editPen,class:"edit-icon","aria-hidden":"true"},null,8,["icon"]),f(C(re),{modelValue:U.value,"onUpdate:modelValue":t[8]||(t[8]=e=>U.value=e),onIonInput:We,placeholder:"Enter notes here...","auto-grow":!0,class:"notes-textarea",fill:"outline",style:{"--padding-start":"16px"}},null,8,["modelValue"])]),_:1})]),f(C(J),{ref:"accordionGroup",class:"previous-notes"},{default:D(()=>[f(C(Q),{value:"fourth","toggle-icon-slot":"start"},{default:D(()=>[f(C(d),{slot:"header",color:"light",class:"previous-notes-header"},{default:D(()=>[f(C(X),null,{default:D(()=>t[18]||(t[18]=[A("Previous visit notes")])),_:1,__:[18]})]),_:1}),g("div",hi,[g("div",gi,[1===e.index?(h(!0),v(S,{key:0},G(Z.value,(e,a)=>(h(),v("div",{key:a,class:"note-entry"},[(h(!0),v(S,null,G(e,(e,a)=>(h(),v("div",{key:a},[g("div",fi,Y(e.date),1),g("div",yi,Y(e.notes),1)]))),128))]))),128)):w("",!0),f(C(J),{onIonChange:Xe},{default:D(()=>[f(C(Q),{value:"third","toggle-icon-slot":"start"},{default:D(()=>[f(C(d),{slot:"header",color:"light",class:"show-more-header"},{default:D(()=>[f(C(X),{color:"primary"},{default:D(()=>[A(Y(pe.value),1)]),_:1})]),_:1}),g("div",bi,[(h(!0),v(S,null,G(ee.value,(e,a)=>(h(),v("div",{key:a,class:"note-entry"},[(h(!0),v(S,null,G(Ze(e),(e,a)=>(h(),v("div",{key:a},[g("div",xi,Y(e.date),1),g("div",_i,Y(e.notes),1)]))),128))]))),128))])]),_:1})]),_:1})])])]),_:1})]),_:1},512)])])]),_:1})}}}),Di=(e("a",ye(ki,[["__scopeId","data-v-e5aea6dd"]])),{class:"dash_box"}),Ci={key:1},Ai=n({name:"xxxComponent"}),Si=n({...Ai,setup(e){const a=b("No outcome created yet"),n=b(!1),t=b("please select a type");b("Add new outcome"),b(!0);const i=b(!0),o=b(""),l=b(!0),d=b(!1),r=$e(),c=x(()=>r.outcomes),u=b(!1),m=b(!1),y=b(!1),S=b(!1),E=b(!1);b(null),b(null);const I=b([{name:"Admitted for short stay",selected:!1},{name:"Referred out",selected:!1},{name:"Discharged Home",selected:!1}]),O=[{multi_Selection:!1,show_list_label:!0,unqueId:"qwerty2",name_of_list:"Add new outcome",placeHolder:"Choose one",items:I.value,listUpdatedFN:function(e){I.value=e,I.value.forEach(e=>{1==e.selected&&(o.value=e.name)})},listFilteredFN:()=>{},use_internal_filter:!0,disabled:b(!1)}];function N(){c.value.length>0?l.value=!1:0==c.value.length&&0==d.value&&(l.value=!0)}function P(e){c.value.splice(e,1)}_(async()=>{N()}),W(()=>o.value,async e=>{1==u.value?u.value=!1:async function(){const e=o.value;console.log(e),o.value=e;const a=o.value;a==I.value[0].name?y.value=!0:y.value=!1,a==I.value[1].name?(S.value=!0,console.log("show_discharged_options is set to true")):S.value=!1,a==I.value[2].name?(E.value=!0,console.log("show_discharged_options is set to true")):E.value=!1}()}),W(()=>c.value.length,async e=>{N()});const B=e=>{};function L(){m.value=!1,y.value=!1,S.value=!1,E.value=!1,I.value.forEach(e=>{e.selected=!1}),o.value=""}return(e,o)=>{const d=p("ion-row");return h(),k(C(s),null,{default:D(()=>[f(d,null,{default:D(()=>[f(C(ce),null,{default:D(()=>[(h(),k(da,{key:0,"onUpdate:removeItem":P,"onUpdate:editItem":B,displayData:c.value},null,8,["displayData"]))]),_:1})]),_:1}),l.value?(h(),k(d,{key:0},{default:D(()=>[g("span",Di,Y(a.value),1)]),_:1})):w("",!0),i.value?(h(),v("div",Ci,[f(d,null,{default:D(()=>[f(C(ce),null,{default:D(()=>[f(Ye,{multiSelection:O[0].multi_Selection,show_label:O[0].show_list_label,uniqueId:O[0].unqueId,name_of_list:O[0].name_of_list,choose_place_holder:O[0].placeHolder,"items_-list":O[0].items,use_internal_filter:O[0].use_internal_filter,disabled:O[0].disabled.value,onItemListUpDated:O[0].listUpdatedFN,onItemListFiltered:O[0].listFilteredFN},null,8,["multiSelection","show_label","uniqueId","name_of_list","choose_place_holder","items_-list","use_internal_filter","disabled","onItemListUpDated","onItemListFiltered"]),g("div",null,[n.value?(h(),k(C(X),{key:0,class:"error-label"},{default:D(()=>[A(Y(t.value),1)]),_:1})):w("",!0)])]),_:1})]),_:1})])):w("",!0),y.value?(h(),k(ra,{key:2,onDataSaved:L,selected_ward_prop:"",admitted_other_props:""})):w("",!0),S.value?(h(),k(ca,{key:3,onDataSaved:L,selected_referral_data:"",selected_other_referral_data:""})):w("",!0),E.value?(h(),k(ua,{key:4,onDataSaved:L,selected_discharged_prop:"",selected_discharged_data:""})):w("",!0)]),_:1})}}});e("b",ye(Si,[["__scopeId","data-v-b6576c18"]]))}}});
