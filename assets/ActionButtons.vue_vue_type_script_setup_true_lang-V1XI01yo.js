import{$,z as F,ag as Q,ah as T,S as B,t as W,ai as X,aj as Z,ak as q,_ as f,C as e,F as D,U as ee,o as se}from"./index-x5m2Gizm.js";import{D as oe,d as S,r as C,c as I,a as k,N as h,f as d,J as r,l as a,u as o,I as ae,E as te,P as O,K as M,a0 as G,a7 as H,Q as V,a8 as ne,e as g,F as z,O as j,a9 as re,aa as w,bo as ce,b1 as ie,L as le,M as N,ae as ue,w as b,H as L,b2 as _e,k as v,Y as Re,aT as U,m as x,d9 as de,d8 as Y,cV as pe}from"./vendor-f_p5GZUu.js";const Ae=oe("actionButtonStore",{state:()=>({show_action_button:!0}),actions:{setShowActionButton(A){this.show_action_button=A},getShowActionButton(){return this.show_action_button},resetShowActionButton(){this.show_action_button=!0}}}),me=["onClick"],ge={key:1,class:"no-data-container"},Pe=S({__name:"ActivitySelectionModal",setup(A){const u=$(),c=C("activities"),s=C([]),p=I(()=>s.value.filter(n=>n.isChecked)),_=I(()=>s.value.length>0&&s.value.every(n=>n.isChecked)),l=I(()=>_.value?"Deselect All":"Select All");async function i(n){switch(n.toLowerCase()){case"ncd program":s.value=T(q),c.value="NCD_activities";break;case"opd program":s.value=T(Z),c.value="OPD_activities";break;case"hiv program":s.value=T(X,"name","workflowID"),c.value="activities";break;default:s.value=[];break}}async function m(){const n=await B.getJson("user_properties",{user_id:u.getUserId(),property:c.value});n&&(s.value=s.value.map(t=>(n.property_value.search(t.value)>=0&&(t.isChecked=!0),t)))}async function R(){var n;try{return await B.postJson("user_properties",{property:c.value,property_value:p.value.map(t=>t.value).join(",")}),V.dismiss(p.value)}catch(t){console.error(t),W((n=t.message)!=null?n:"Failed to save selected activities")}}function y(){const n=!_.value;s.value=s.value.map(t=>(t.isChecked=n,t))}return k(()=>{var n,t;console.log("USER ID",u.getUserId()),console.log("USER PROGRAM",(n=F().activeProgram)==null?void 0:n.name),i((t=F().activeProgram)==null?void 0:t.name),m()}),(n,t)=>(d(),h(o(ue),null,{default:r(()=>[a(o(ae),{style:{display:"flex","justify-content":"space-between"},color:"success"},{default:r(()=>[a(o(te),{class:"modalTitle"},{default:r(()=>[O("Select Program Activites (selected: "+M(p.value.length)+")",1)]),_:1}),a(o(G),{onClick:o(V).dismiss,style:{"padding-top":"10px","padding-right":"10px"},icon:o(H)},null,8,["onClick","icon"])]),_:1}),a(o(ne),{fullscreen:!0},{default:r(()=>[s.value.length?(d(),h(Q,{key:0,items:s.value,numberOfColumns:2},{default:r(({entries:K})=>[(d(!0),g(z,null,j(K,(P,J)=>(d(),g("div",{class:"his-card clickable",key:J,onClick:E=>P.isChecked=!P.isChecked},[a(o(re),null,{default:r(()=>[a(o(w),{size:"1"},{default:r(()=>[a(o(ce),{modelValue:P.isChecked,"onUpdate:modelValue":E=>P.isChecked=E,onClick:E=>P.isChecked=!P.isChecked},null,8,["modelValue","onUpdate:modelValue","onClick"])]),_:2},1024),a(o(w),{class:"ion-text-center his-md-text"},{default:r(()=>[O(M(P.label),1)]),_:2},1024)]),_:2},1024)],8,me))),128))]),_:1},8,["items"])):(d(),g("div",ge,[a(o(ie),null,{default:r(()=>t[0]||(t[0]=[O("No activities available for this program",-1)])),_:1,__:[0]})]))]),_:1}),a(o(le),{class:"ion-padding ion-text-end"},{default:r(()=>[a(o(N),{fill:"outline",onClick:y},{default:r(()=>[O(M(l.value),1)]),_:1}),a(o(N),{class:"ion-margin-start",onClick:R},{default:r(()=>t[1]||(t[1]=[O("Save",-1)])),_:1,__:[1]})]),_:1})]),_:1}))}}),ve=f(Pe,[["__scopeId","data-v-b78c7022"]]),Oe={class:"search-wrapper"},Ie={__name:"SearchField",props:{modelValue:String,placeholder:String},emits:["update:modelValue"],setup(A,{emit:u}){const c=l=>{_.value=l.target.value},s=A,p=u,_=C(s.modelValue||"");return b(_,l=>{p("update:modelValue",l)}),b(()=>s.modelValue,l=>{_.value=l}),(l,i)=>{const m=L("ion-icon"),R=L("ion-input");return d(),g("div",Oe,[a(m,{icon:o(_e),class:"search-icon","aria-hidden":"true"},null,8,["icon"]),a(R,{value:_.value,onIonInput:c,class:"search-input",type:"text",placeholder:A.placeholder},null,8,["value","placeholder"])])}}},Ce=f(Ie,[["__scopeId","data-v-b69152ed"]]),Me={class:"program-buttons-grid"},he=["onClick"],Ge=["src"],fe={class:"program-name"},Se=S({__name:"ProgramGrid",props:{programs:{},onSelect:{type:Function}},setup(A){return(u,c)=>(d(),g("div",Me,[(d(!0),g(z,null,j(u.programs,(s,p)=>(d(),g("div",{key:p,class:"program-tile",onClick:()=>u.onSelect(s)},[v("div",{class:"program-icon-container",style:Re({backgroundColor:s.color})},[v("img",{src:s.icon,alt:"",class:"program-icon"},null,8,Ge)],4),v("div",fe,M(s.name.replace(/program/i,"").trim()),1)],8,he))),128))]))}}),Ee=f(Se,[["__scopeId","data-v-d36db6ec"]]),Te={[e.HIV_PROGRAM]:"/assets/icon/program_icons/ribbon.png",[e.TB_PROGRAM]:"/assets/icon/program_icons/tb.png",[e.EARLY_INFANT_DIAGNOSIS_PROGRAM]:"/assets/icon/program_icons/baby-0203_alt.png",[e.MDR_TB_PROGRAM]:"/assets/icon/program_icons/tb.png",[e.KAPOSIS_SARCOMA_PROGRAM]:"/assets/icon/program_icons/lymph-nodes.png",[e.CHRONIC_CARE_PROGRAM]:"/assets/icon/program_icons/intensive-care_unit.png",[e.MATERNITY_PROGRAM]:"/assets/icon/program_icons/pregnant.png",[e.ANC_PROGRAM]:"/assets/icon/program_icons/ancv.png",[e.DIABETES_PROGRAM]:"/assets/icon/program_icons/diabetes.png",[e.OPD_PROGRAM]:"/assets/icon/program_icons/outpatient.png",[e.IPD_PROGRAM]:"/assets/icon/program_icons/observation.png",[e.UNDER_5_PROGRAM]:"/assets/icon/program_icons/boy-0105y.png",[e.CIVIL_REGISTRATION_PROGRAM]:"/assets/icon/program_icons/register-book.png",[e.HTC_PROGRAM]:"/assets/icon/program_icons/blood-pressure.png",[e.ANC_CONNECT_PROGRAM]:"/assets/icon/program_icons/ancv.png",[e.HYPERTENSION_PROGRAM]:"/assets/icon/program_icons/blood-pressure.png",[e.IPT_PROGRAM]:"/assets/icon/program_icons/observation.png",[e.LABORATORY_PROGRAM]:"/assets/icon/program_icons/biochemistry-laboratory.png",[e.CXCA_PROGRAM]:"/assets/icon/program_icons/cervical-cancer.png",[e.RADIOLOGY_PROGRAM]:"/assets/icon/program_icons/radiology.png",[e.PATIENT_REGISTRATION_PROGRAM]:"/assets/icon/program_icons/human-resoruce.png",[e.AETC_PROGRAM]:"/assets/icon/program_icons/accident-and_emergency.png",[e.SPINE_PROGRAM]:"/assets/icon/program_icons/intensive-care_unit.png",[e.NCD_PROGRAM]:"/assets/icon/program_icons/autoimmune-disease.png",[e.IMMUNIZATION_PROGRAM]:"/assets/icon/program_icons/syringe-vaccine.png",[e.LABOUR_AND_DELIVERY_PROGRAM]:"/assets/icon/program_icons/fetus.png"},Fe=A=>{switch(A){case e.HIV_PROGRAM:return"#F4A6A6";case e.TB_PROGRAM:return"#E6B89C";case e.EARLY_INFANT_DIAGNOSIS_PROGRAM:return"#FFF2A6";case e.MDR_TB_PROGRAM:return"#D2A679";case e.KAPOSIS_SARCOMA_PROGRAM:return"#D8B4E2";case e.CHRONIC_CARE_PROGRAM:return"#C7EFCF";case e.MATERNITY_PROGRAM:return"#FFCCE5";case e.ANC_PROGRAM:return"#FFD6DD";case e.DIABETES_PROGRAM:return"#D6F5D6";case e.OPD_PROGRAM:return"#B3E5FC";case e.IPD_PROGRAM:return"#FFF9C4";case e.UNDER_5_PROGRAM:return"#FFB3B3";case e.CIVIL_REGISTRATION_PROGRAM:return"#E0E0E0";case e.HTC_PROGRAM:return"#B2DFDB";case e.ANC_CONNECT_PROGRAM:return"#FFD6DD";case e.HYPERTENSION_PROGRAM:return"#B2DFDB";case e.IPT_PROGRAM:return"#FFF9C4";case e.LABORATORY_PROGRAM:return"#E6B89C";case e.CXCA_PROGRAM:return"#FFF2A6";case e.RADIOLOGY_PROGRAM:return"#CCCCCC";case e.PATIENT_REGISTRATION_PROGRAM:return"#FFF9C4";case e.AETC_PROGRAM:return"#FFB199";case e.SPINE_PROGRAM:return"#C7EFCF";case e.NCD_PROGRAM:return"#D6F5D6";case e.IMMUNIZATION_PROGRAM:return"#FFF2A6";case e.LABOUR_AND_DELIVERY_PROGRAM:return"#E6D6F3";default:return"#F5F5DC"}},De=[e.VHW_PROGRAM,e.TRIAGE_PROGRAM,e.VMMC_PROGRAM,e.PNC_PROGRAM,e.KAPOSIS_SARCOMA_PROGRAM,e.CIVIL_REGISTRATION_PROGRAM,e.DIABETES_PROGRAM,e.LABOUR_AND_DELIVERY_PROGRAM],Ne={id:"container"},be={class:"centered-content"},ke=S({__name:"ModulePicker",setup(A){const u=F(),c=C(""),s=I(()=>u.authorizedPrograms.filter(i=>!De.includes(i.program_id)).map(i=>({...i,icon:Te[i.program_id]||null,color:Fe(i.program_id)}))),p=I(()=>s.value.filter(i=>i.name.toLowerCase().includes(c.value.toLowerCase())));function _(i){u.setActiveProgram(i),D.hide()}function l(){D.hide()}return k(()=>{s.value.length===1&&_(s.value[0])}),(i,m)=>(d(),g("div",Ne,[m[1]||(m[1]=v("h1",null,[v("strong",null,"Services")],-1)),v("div",be,[a(o(N),{class:"close-button",fill:"clear",onClick:l},{default:r(()=>[a(o(G),{icon:o(H),size:"large",color:"warning"},null,8,["icon"])]),_:1}),a(Ce,{modelValue:c.value,"onUpdate:modelValue":m[0]||(m[0]=R=>c.value=R),placeholder:"Search..."},null,8,["modelValue"]),a(Ee,{programs:p.value,onSelect:_},null,8,["programs"])])]))}}),ye=f(ke,[["__scopeId","data-v-edbb67ff"]]),we=S({__name:"ActionButtons",setup(A){const u=$(),{user_ID:c}=U(u),s=C(!1),p=Ae(),{show_action_button:_}=U(p);k(async()=>{try{await l()}catch(R){}}),b(()=>c.value,async()=>{await l()},{deep:!0});const l=async()=>{try{const R=await ee.getUserAssignAndUnassignProgramActivities(c.value);s.value=R!==null?R:!1}catch(R){console.error("Error fetching assign and unassign program activities:",R)}};function i(){return se(ve,{class:"activity-modal"})}async function m(){return D.show(ye,{},"module-picker-modal")}return(R,y)=>o(_)?(d(),h(o(de),{key:0,slot:"fixed",horizontal:"end",vertical:"bottom",class:"ion-margin-bottom",edge:""},{default:r(()=>[s.value?(d(),h(o(Y),{key:0,onClick:i},{default:r(()=>[a(o(G),{src:"/public/svg/exam_multiple_choice.svg"})]),_:1})):x("",!0),a(o(Y),{color:"primary",class:"ion-margin-vertical",onClick:m},{default:r(()=>[a(o(G),{icon:o(pe)},null,8,["icon"])]),_:1})]),_:1})):x("",!0)}});export{ye as M,we as _,Ae as u};
