System.register(["./vendor-legacy-CJLpW7UD.js","./lodash-legacy-pOOc9Efu.js","./index-legacy-BONogv3q.js"],function(e,t){"use strict";var o,r,l,a,n,i,c,s,p,u,f,d,E;return{setters:[e=>{o=e.r,r=e.dR,l=e.w,a=e.c5,n=e.c6,i=e.dS,c=e.dT,s=e.dU,p=e.dV},e=>{u=e.l},e=>{f=e.t,d=e.v,E=e.N}],execute:function(){e({a:function(e,o,r="document",l=!1,i={}){o=g(o);const c=new a({...i}),s=c.splitTextToSize(r,180),p=s.length<=1?20:10*s.length;c.text(s,14,10);const u={startY:p,head:[e[e.length-1]],body:o};l&&(u.tableWidth="wrap",u.horizontalPageBreak=!0,u.horizontalPageBreakRepeat=0),n(c,u);const{activePlatformProfile:f}=m(),E=`${r}.pdf`;f.value.fileExport===t.WEB?c.save(E):f.value.fileExport===t.FILE_SYSTEM?S(E,c.output(),"blob"):d("Platform not supported")},e:S,t:function(e,o,r="document"){o=g(o);const l=e.concat(o).reduce((e,t)=>e+t.map(e=>`"${e}"`).join(",")+"\n",""),{activePlatformProfile:a}=m(),n=`${r}.csv`;if(a.value.fileExport===t.WEB){const e=new Blob([l],{type:"text/csv;charset=utf-8;"}),t=document.createElement("a");t.setAttribute("id","csv"),t.href=window.URL.createObjectURL(e),t.setAttribute("download",`${r}.csv`),document.body.appendChild(t),t.click(),t.remove()}else a.value.fileExport===t.FILE_SYSTEM?S(n,l,"text"):f("Platform not supported")},u:m});var t=e("F",(e=>(e.WEB="WEB",e.FILE_SYSTEM="FILE_SYSTEM",e))(t||{}));const v={Desktop:{profileName:"Desktop",fileExport:"WEB",scanner:"BARCODE_SCANNER",printer:"WEB",keyboard:"NATIVE_AND_HIS_KEYBOARD"},Mobile:{profileName:"Mobile",fileExport:"FILE_SYSTEM",scanner:"CAMERA_SCANNER",printer:"BLUETOOTH",keyboard:"HIS_KEYBOARD_ONLY"}};function m(){const e=o(v.Desktop),t=o({}),a=localStorage.getItem("active_profile"),n=localStorage.getItem("platformProfiles");return t.value="string"==typeof n?JSON.parse(n):v,"string"==typeof a&&`${a}`.match(/\{.*\}/)?e.value=JSON.parse(a):u.isEmpty(t.value)||(r("mobile")&&"Mobile"in t.value?e.value=t.value.Mobile:r("desktop")&&"Desktop"in t.value&&(e.value=t.value.Desktop)),l(()=>e.value,e=>{localStorage.setItem("active_profile",JSON.stringify(e))}),{activePlatformProfile:e,platformProfiles:t}}function S(e,t,o){let r=null;const l=`MaHIS/${e.replaceAll("/","_")}`;E(`Exporting file to "Documents/${l}"...`),r="blob"===o?i({path:l,blob:t,directory:c.Documents,recursive:!0}):s.writeFile({path:l,data:t,directory:c.Documents,encoding:p.UTF8,recursive:!0}),null!=r&&r.then(()=>E(`File exported to "Documents/${l}"!`,3e3)).catch(e=>d(e))}function g(e){return e.map(e=>e.map(e=>"string"==typeof e?e.replace(/&lt;/g,"<"):e))}}}});
