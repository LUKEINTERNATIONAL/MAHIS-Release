import{d as B,aj as _,r,w as N,a as R,E as n,e as m,f,l as t,z as o,k as s,u as I,G as F,A as H,F as b,L,B as G}from"./vendor-DowD5zKn.js";import{d as O,u as P,aC as U,Z as v,H as $,i as j,_ as z}from"./index-Cd6xOYoL.js";import{B as J}from"./ncd_appointment_service-CaWyKpJh.js";const M={class:"ion-padding",slot:"content"},Z={class:"table-responsive"},q=B({__name:"RiskAssessment",setup(K){const c=O(),g=P(),{substance:l}=_(c),{patient:Q}=_(g);r("");const i=r({}),d=r([]),S=r(j),h=["Substance","Answer","Date","Action"],w={responsive:!0,select:!1,layout:{topEnd:"search",bottomStart:"info",bottomEnd:"paging"},ordering:!1},u=()=>{i.value={mainTitle:"Enrollment",cards:[{cardTitle:"Substance use / Consumption",content:l.value}]}},C=a=>{c.resetSubstanceValue(a.title)},y=()=>{c.setSubstance(l.value)},D=async()=>{const a=U("substanceAbuse");if(a.length===0)return[];d.value=await Promise.all(a.map(async e=>[await v.getConceptName(e.concept_id)||"",await v.getConceptName(e.value_coded),$.toStandardHisFormat(e.obs_datetime),'<button class="btn btn-outline-danger btn-sm delete-btn" data-id=\''.concat(JSON.stringify(e),"'>\n                            ").concat(S.value.delete2,"</button>")]))},k=async a=>{};return N(()=>l.value,()=>{u()},{deep:!0}),R(async()=>{y(),u(),await D()}),(a,e)=>{const E=n("ion-label"),T=n("DataTable"),V=n("ion-accordion"),x=n("ion-accordion-group"),A=n("ion-row");return f(),m(b,null,[t(J,{content:i.value,"onUpdate:inputValue":k,"onClear:radio":C},null,8,["content"]),t(A,null,{default:o(()=>[t(x,{ref:"accordionGroup",class:"previousView"},{default:o(()=>[t(V,{value:"first","toggle-icon-slot":"start",style:{"border-radius":"10px","background-color":"#fff"}},{default:o(()=>[t(I(F),{slot:"header",color:"light"},{default:o(()=>[t(E,{class:"previousLabel"},{default:o(()=>e[0]||(e[0]=[H("Previous Visits")])),_:1,__:[0]})]),_:1}),s("div",M,[s("div",Z,[t(T,{ref:"dataTableRef",options:w,data:d.value,class:"display nowrap",width:"100%"},{default:o(()=>[s("thead",null,[s("tr",null,[(f(),m(b,null,L(h,p=>s("th",{key:p},G(p),1)),64))])])]),_:1},8,["data"])])])]),_:1})]),_:1},512)]),_:1})],64)}}}),ee=z(q,[["__scopeId","data-v-fa6536c3"]]);export{ee as S};
