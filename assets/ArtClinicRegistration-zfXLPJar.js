var ue=Object.defineProperty;var se=(b,h,s)=>h in b?ue(b,h,{enumerable:!0,configurable:!0,writable:!0,value:s}):b[h]=s;var V=(b,h,s)=>se(b,typeof h!="symbol"?h+"":h,s);import{A as x}from"./app_encounter_service-CL70yiSF.js";import{J as _e,Q as E,S as de,P as J,i as ve,cm as fe,e as H,cp as ce,aF as me,u as pe,a1 as be,k as Q,m as B,t as ge,_ as he}from"./index-C_B4etN5.js";import{g as X}from"./LocationFieldOptions-BFiUH3ik.js";import{_ as W}from"./DatePicker.vue_vue_type_script_setup_true_lang-rvVES3QB.js";import{S as Z,V as ye}from"./vitals_service-DChhh3dw.js";import{d as ke,r as F,y as f,f as _,z as l,l as o,u as a,aN as we,bh as De,m,aM as C,aL as g,D as p,A as d,k,aE as T,G as N,aF as A,d5 as w,B as c,e as R,F as S,L as O,aQ as Ve,O as z}from"./vendor-Bx_IVmwz.js";import Ce from"./Staging-DDnHvmnL.js";import{P as Ie}from"./patient_registration_service-DMEL_EgH.js";import"./lodash-Dt8AsbQm.js";class Ne extends x{constructor(h,s){super(h,9,s)}}class Ae extends x{constructor(s,v){super(s,9,v);V(this,"registration");V(this,"computeFollowupAgreements",async s=>({tag:"reg",obs:await this.registration.buildValueCoded("Agrees to followup",s.value)}));V(this,"computeHTCSerialNumber",async s=>({tag:"reg",obs:await this.registration.buildValueText("HTC Serial number",s.value)}));V(this,"computeEverReceivedART",async({value:s})=>({tag:"reg",obs:await this.registration.buildValueCoded("Ever received ART",s)}));V(this,"computeARTLastTakenDate",async(s,v)=>({date:s,tag:"reg",isEstimate:v,obs:await this.buildDateObs("Date ART last taken",s,v)}));V(this,"computeARTInitiationLocation",async({label:s})=>({tag:"reg",obs:await this.registration.buildValueText("Location of ART initiation",s)}));V(this,"computeARTNumberAtPreviousLocation",async s=>({tag:"reg",obs:await this.registration.buildValueText("ART number at previous location",s.value)}));V(this,"computeHasTransferLetter",async({value:s})=>({tag:"reg",obs:await this.registration.buildValueCoded("Has transfer letter",s)}));V(this,"computeConfirmatoryHIVTestType",async({value:s})=>({tag:"reg",obs:await this.registration.buildValueCoded("Confirmatory hiv test type",s)}));V(this,"computeConfirmatoryHIVTestLocation",async s=>({tag:"reg",obs:await this.registration.buildValueText("Confirmatory HIV test location",s.label)}));V(this,"computeConfirmatoryHIVTestDate",async(s,v)=>({date:s,tag:"reg",isEstimate:v,obs:await this.buildDateObs("Confirmatory HIV test date",s,v)}));V(this,"computeARTRegistrationDate",async(s,v)=>({date:s,tag:"reg",isEstimate:v,obs:await this.buildDateObs("ART initiation date",s,v)}));V(this,"computeARTStartDate",async(s,v)=>({date:s,tag:"reg",isEstimate:v,obs:await this.buildDateObs("Contact date ART started",s,v)}));V(this,"computeInitialWeight",async s=>({tag:"reg",obs:await ee(await this.registration.buildValueNumber("weight",s,null,null))}));V(this,"computeInitialHeight",async s=>({tag:"reg",obs:await ee(await this.registration.buildValueNumber("height",s,null,null))}));V(this,"computeTBStatus",async s=>{const v=_e();return{tag:"reg",obs:{concept_id:await x.getConceptID("TB treatment start date"),value_datetime:E.getSessionDate(),obs_datetime:E.getSessionDate(),providerID:de.getUserID(),programID:E.getProgramID(),location_id:v.facilityLocation.code,value_coded:await x.getConceptID(s)}}});V(this,"buildDateObs",async(s,v,q)=>/unknown/i.test(v)?this.buildValueText(s,"Unknown"):q?this.buildValueDateEstimated(s,v):await this.buildValueDate(s,v));this.registration=new Ne(s,v)}async onSubmit(s){const v=await this.registration.createEncounter();if(!v)throw new Error("Failed to create encounter");this.encounterID=v.encounter_id,this.saveObservationList(s)}}function ee(b){return console.log("fixValueNumericStructureInPlace",b),b.value_numeric.value&&(b.value_numeric=b.value_numeric.value),b}const Te={B:0,F:1,G:2,H:3,J:4,P:5,V:6,W:7,X:8,Z:9},qe=[[0,3,1,7,5,9,8,6,4,2],[7,0,9,2,1,5,4,8,6,3],[4,2,0,6,8,7,1,3,5,9],[1,7,5,0,9,8,3,4,2,6],[6,1,2,3,0,4,5,9,7,8],[3,6,7,4,2,0,9,5,8,1],[5,8,6,9,7,2,0,1,3,4],[8,9,4,5,3,6,2,0,1,7],[9,4,3,8,6,1,7,2,0,5],[2,5,8,1,4,3,6,7,9,0]];function te(b,h){const s=h-"".concat(b).length;return s<=0?"".concat(b):"".concat(Array.from({length:s}).map(()=>0).join("")).concat(b)}function Re(b){b.match(/^\d+$/)||(b=b.replace(/\D/g,""));let h=0;for(let s=0;s<b.length;s++){let v=b.charAt(s);h=qe[h][v]}return"".concat(h)}function Se(b){const[h,s,v,q]=b.split("-");if(!(h&&s&&v&&q))return!1;const t=te(parseInt(s),3),Y=te(parseInt(v),2),n=Te[q.toUpperCase()],P="".concat(h,"-").concat(t,"-").concat(Y);return Re(P)==="".concat(n)}const Oe=ke({__name:"ArtClinicRegistration",setup(b,{expose:h}){const s=new J,v=new Ae(s.getID(),-1),q=F(),t=F({phone_followup:"",phone_number:"",home_visit_followup:"",has_linkage:"",linkage_number:"",received_arvs:"",date_last_taken_arvs:"",taken_last_two_months:"",taken_last_two_weeks:"",ever_registered_at_art_clinic:"",location_of_art_initialization:"",art_number_at_previous_location:"",confirmatory_hiv_test_type:"",confirmatory_hiv_test_location:"",confirmatory_hiv_test_date:"",has_transfer_letter:"",art_start_date:"",initial_weight:"",initial_height:"",cd4_available:"",cd4_percent:""}),Y=F([]),n=F({}),P=F([{dialCode:"265",iso2:"MW",name:"Malawi"}]),$=F({inputHeader:"Phone number *",icon:ve.phone,value:"",name:"phoneNumber",InnerBtn:"",popOverData:{filterData:!1,data:[]}}),u={phone_followup:{label:"Phone followup",required:()=>!0,buildObs:()=>[v.buildValueCoded("Phone",t.value.phone_followup),v.buildValueCoded("Agrees to followup","Phone")],options:()=>["Yes","No"],validation:()=>D("phone_followup")},phone_number:{required:()=>t.value.phone_followup==="Yes"&&(!s.getPhoneNumber()||/unknown|n\/a/i.test("".concat(s.getPhoneNumber()))),label:"Phone number",onSubmit:async()=>{try{const i="+".concat(P.value[0].dialCode).concat(t.value.phone_number),e=new Ie;e.setPersonID(s.getID()),await e.updatePerson({cell_phone_number:i});const I=pe().getPatient();I&&I.personInformation&&(I.personInformation.cell_phone_number=i,await be(I)),Q("Phone number updated successfully")}catch(i){console.error("Error updating phone number:",i),B("Failed to update phone number")}},formatValue:()=>"+".concat(P.value[0].dialCode).concat(t.value.phone_number),onFormUpdate:(i,e)=>{i==="phone_followup"&&e==="No"&&(t.value.phone_number="",n.value.phone_number="")},validation:()=>{n.value.phone_number="";const i=u.phone_number.required();if(i&&!t.value.phone_number){n.value.phone_number="Phone number is required";return}const e=me.isMWPhoneNumber(u.phone_number.formatValue());i&&typeof e=="string"&&e.length>0&&(n.value.phone_number="Not a valid Malawi phone number")}},home_visit_followup:{label:"Home visit followup",required:()=>!0,options:()=>["Yes","No"],buildObs:()=>[v.buildValueCoded("Home visit",t.value.home_visit_followup),v.buildValueCoded("Agrees to followup","Home visit")],validation:()=>D("home_visit_followup")},has_linkage:{label:"Has linkage number",required:()=>!0,options:()=>["Yes","No"],validation:()=>D("has_linkage")},linkage_number:{label:"Linkage number",required:()=>t.value.has_linkage==="Yes",onFormUpdate:(i,e)=>{i==="has_linkage"&&e==="Yes"&&(t.value.linkage_number="",n.value.linkage_number="")},buildObs:()=>v.buildValueText("HTC Serial number",t.value.linkage_number),validation:()=>{if(n.value.linkage_number="",D("linkage_number"))try{Se(t.value.linkage_number)||(n.value.linkage_number="Invalid linkage number")}catch(i){n.value.linkage_number='Invalid linkage number. please follow format "1234-002-01-A" '}}},received_arvs:{label:"Received ARVs",required:()=>!0,options:()=>["Yes","No"],buildObs:()=>v.buildValueCoded("Ever received ART",t.value.received_arvs),validation:()=>D("received_arvs")},date_last_taken_arvs:{label:"Date last taken ARVs",required:()=>t.value.received_arvs==="Yes",onFormUpdate:(i,e)=>{i==="received_arvs"&&e==="No"&&(t.value.date_last_taken_arvs="",n.value.date_last_taken_arvs="")},validation:()=>{n.value.date_last_taken_arvs="",D("date_last_taken_arvs")&&L("date_last_taken_arvs")},buildObs:()=>v.buildValueDate("Date ART last taken",t.value.date_last_taken_arvs.standardDate)},taken_last_two_months:{label:"Taken last two months",required:()=>t.value.received_arvs==="Unknown",onFormUpdate:(i,e)=>{i==="received_arvs"&&e=="No"&&(t.value.taken_last_two_months="",n.value.taken_last_two_months="")},options:()=>["Yes","No","Unknown"],buildObs:()=>v.buildValueCoded("Has the patient taken ART in the last two months",t.value.taken_last_two_months),validation:()=>D("taken_last_two_months")},taken_last_two_weeks:{label:"Taken last two weeks",required:()=>t.value.taken_last_two_months==="Yes",onFormUpdate:(i,e)=>{i==="taken_last_two_months"&&e==="No"&&(t.value.taken_last_two_weeks="",n.value.taken_last_two_weeks="")},options:()=>["Yes","No","Unknown"],validation:()=>D("taken_last_two_weeks"),buildObs:()=>v.buildValueCoded("Has the patient taken ART in the last two weeks",t.value.taken_last_two_weeks)},ever_registered_at_art_clinic:{label:"Ever registered at ART clinic",required:()=>t.value.received_arvs==="Yes",onFormUpdate:(i,e)=>{i==="received_arvs"&&e==="No"&&(t.value.ever_registered_at_art_clinic="",n.value.ever_registered_at_art_clinic="")},options:()=>["Yes","No"],validation:()=>D("ever_registered_at_art_clinic"),buildObs:()=>v.buildValueCoded("Ever registered at ART clinic",t.value.ever_registered_at_art_clinic)},location_of_art_initialization:{label:"Location of ART initialization",required:()=>t.value.ever_registered_at_art_clinic==="Yes",onFormUpdate:(i,e)=>{(i==="received_arvs"&&e==="No"||i==="ever_registered_at_art_clinic"&&e==="No")&&(t.value.location_of_art_initialization="",n.value.location_of_art_initialization="")},buildObs:()=>{var i,e;return v.buildValueText("Location of ART initialization",(e=(i=t.value.location_of_art_initialization)==null?void 0:i.name)!=null?e:t.value.location_of_art_initialization)},validation:()=>D("location_of_art_initialization"),searchFacilities:i=>X(i).then(e=>Y.value=e)},art_start_date:{label:"ART start date",required:()=>t.value.ever_registered_at_art_clinic==="Yes",onFormUpdate:(i,e)=>{(i==="received_arvs"&&e==="No"||i==="ever_registered_at_art_clinic"&&e==="No")&&(t.value.art_start_date="",n.value.art_start_date="")},buildObs:()=>M("Date ART started",t.value.art_start_date.standardDate),validation:()=>{n.value.art_start_date="",D("art_start_date")&&L("art_start_date")}},art_number_at_previous_location:{label:"ART number at previous location",required:()=>t.value.ever_registered_at_art_clinic==="Yes",onFormUpdate:(i,e)=>{(i==="received_arvs"&&e==="No"||i==="ever_registered_at_art_clinic"&&e==="No")&&(t.value.art_number_at_previous_location="",n.value.art_number_at_previous_location="")},validation:()=>D("art_number_at_previous_location"),buildObs:()=>{var i,e;return v.buildValueText("ART number at previous location",(e=(i=t.value.art_number_at_previous_location)==null?void 0:i.name)!=null?e:t.value.art_number_at_previous_location)}},has_transfer_letter:{required:()=>t.value.ever_registered_at_art_clinic==="Yes",onFormUpdate:(i,e)=>{(i==="received_arvs"&&e==="No"||i==="ever_registered_at_art_clinic"&&e==="No")&&(t.value.has_transfer_letter="",n.value.has_transfer_letter="")},label:"Has stage information?",options:()=>["Yes","No"],validation:()=>D("has_transfer_letter"),buildObs:()=>v.buildValueCoded("Has transfer letter",t.value.has_transfer_letter)},initial_height:{label:"Initial height",required:()=>t.value.has_transfer_letter==="Yes",onFormUpdate:(i,e)=>{(i==="received_arvs"&&e==="No"||i==="has_transfer_letter"&&e==="No")&&(t.value.initial_height="",n.value.initial_height="")},buildVitalsObs:()=>v.buildValueNumber("Height",t.value.initial_height),validation:()=>{n.value.initial_height="",D("initial_height")&&(/^\d+$/i.test("".concat(t.value.initial_height))||(n.value.initial_height="Initial height must be a number"),parseInt(t.value.initial_height)<40&&(n.value.initial_height="Initial height cannot be less than 40"),parseInt(t.value.initial_height)>220&&(n.value.initial_height="Initial height cannot be greater than 220"))}},initial_weight:{label:"Initial weight",required:()=>t.value.has_transfer_letter==="Yes",onFormUpdate:(i,e)=>{(i==="received_arvs"&&e==="No"||i==="has_transfer_letter"&&e==="No")&&(t.value.initial_weight="",n.value.initial_weight="")},buildVitalsObs:()=>v.buildValueNumber("Weight",t.value.initial_weight),validation:()=>{n.value.initial_weight="",D("initial_weight")&&(/^\d{1,3}\.\d{1}$/i.test("".concat(t.value.initial_weight))||(n.value.initial_weight="Initial weight must be a valid decimal number.. i.e. 40.0"),parseInt(t.value.initial_weight)<.5&&(n.value.initial_weight="Initial weight cannot be less than 0.5"),parseInt(t.value.initial_weight)>250&&(n.value.initial_weight="Initial weight cannot be greater than 250"))}},vitals:{onSubmit:async()=>{if(u.initial_height.required()&&u.initial_weight.required()){const i=[u.initial_height.buildVitalsObs(),u.initial_weight.buildVitalsObs()],e=new ye(s.getID(),-1);e.setDate(t.value.art_start_date.standardDate),await e.createEncounter(),await e.saveObservationList(await Promise.all(i))}}},cd4_available:{required:()=>t.value.has_transfer_letter==="Yes",onFormUpdate:(i,e)=>{(i==="received_arvs"&&e==="No"||i==="has_transfer_letter"&&e==="No")&&(t.value.cd4_available="",n.value.cd4_available="")},label:"CD4 available",options:()=>["Yes","No"],validation:()=>D("cd4_available")},cd4_percent:{required:()=>t.value.cd4_available==="Yes",onFormUpdate:(i,e)=>{(i==="received_arvs"&&e==="No"||i==="cd4_available"&&e==="No")&&(t.value.cd4_percent="",n.value.cd4_percent="")},label:"CD4 percent",buildObs:()=>v.buildValueNumber("CD4 percent",parseInt(t.value.cd4_percent.substring(1)),"%"),validation:()=>{n.value.cd4_percent="",D("cd4_percent")&&(/^\d+$/i.test("".concat(t.value.cd4_percent))||(n.value.cd4_percent="CD4 percent must be a number"),parseInt(t.value.cd4_percent)<0&&(n.value.cd4_percent="CD4 percent cannot be less than 0"),parseInt(t.value.cd4_percent)>100&&(n.value.cd4_percent="CD4 percent cannot be greater than 100"))}},confirmatory_hiv_test_type:{label:"Confirmatory hiv test type",required:()=>!0,options:()=>[{label:"Rapid antibody test",value:"HIV rapid test"},{label:"DNA PCR",value:"HIV DNA polymerase chain reaction"},{label:"Not done",value:"Not done",disabled:()=>t.value.has_linkage==="Yes"}],buildObs:()=>v.buildValueCoded("Confirmatory hiv test type",t.value.confirmatory_hiv_test_type),validation:()=>{n.value.confirmatory_hiv_test_type="",D("confirmatory_hiv_test_type")&&t.value.confirmatory_hiv_test_type==="Not done"&&t.value.has_linkage==="Yes"&&(n.value.confirmatory_hiv_test_type="Linkage number detected, please select a confirmatory hiv test type")}},confirmatory_hiv_test_location:{label:"Confirmatory hiv test location",required:()=>t.value.confirmatory_hiv_test_type&&t.value.confirmatory_hiv_test_type!=="Not done",onFormUpdate:(i,e)=>{i==="confirmatory_hiv_test_type"&&e==="Not done"&&(t.value.confirmatory_hiv_test_location="",n.value.confirmatory_hiv_test_location="")},validation:()=>D("confirmatory_hiv_test_location"),searchFacilities:i=>X(i).then(e=>Y.value=e),buildObs:()=>{var i,e;return v.buildValueText("Confirmatory hiv test location",(e=(i=t.value.confirmatory_hiv_test_location)==null?void 0:i.name)!=null?e:t.value.confirmatory_hiv_test_location)}},confirmatory_hiv_test_date:{label:"Confirmatory hiv test date",required:()=>t.value.confirmatory_hiv_test_type&&t.value.confirmatory_hiv_test_type!=="Not done",confirmFirmWithArtStartDateValue:()=>{var i;return n.value.confirmatory_hiv_test_date="",u.art_start_date.required()&&(i=t.value.confirmatory_hiv_test_date)!=null&&i.standardDate&&z(t.value.confirmatory_hiv_test_date.standardDate).isAfter(z(t.value.art_start_date.standardDate))?(n.value.confirmatory_hiv_test_date="Confirmatory hiv test date cannot be after ART start date",!1):!0},onFormUpdate:(i,e)=>{var r,I,U;if(i==="confirmatory_hiv_test_type"&&e==="Not done"&&(t.value.confirmatory_hiv_test_date="",n.value.confirmatory_hiv_test_date=""),i==="confirmatory_hiv_test_date"){const j=(r=e==null?void 0:e.value)==null?void 0:r.standardDate;if(j){const ne=(U=(I=t.value.art_start_date)==null?void 0:I.standardDate)!=null?U:v.getDate(),K=z(ne).diff(j,"days");K>=20&&ce("Data inconsistency warning","Confirmatory Date for newly initiated ART patient is ".concat(K," days ago"),"Are you sure this is accurate?",[{name:"No, Re-enter date",slot:"start",color:"success"},{name:"Yes, its accurate",slot:"end",color:"danger"}]).then(oe=>{oe==="No, Re-enter date"&&(t.value.confirmatory_hiv_test_date={},n.value.confirmatory_hiv_test_date="Re-enter a valid confirmatory date")})}}(i==="art_start_date"||i==="ever_registered_at_art_clinic")&&u.confirmatory_hiv_test_date.confirmFirmWithArtStartDateValue()},buildObs:()=>M("Confirmatory hiv test date",t.value.confirmatory_hiv_test_date.standardDate),validation:()=>{n.value.confirmatory_hiv_test_date="",D("confirmatory_hiv_test_date")&&(!L("confirmatory_hiv_test_date")||u.confirmatory_hiv_test_date.confirmFirmWithArtStartDateValue())}}};function ae(){return Object.keys(u).reduce((i,e)=>{if(e in u&&typeof u[e].required=="function"&&u[e].required()&&typeof u[e].buildObs=="function"){const r=u[e].buildObs();return Array.isArray(r)?[...i,...r]:[...i,r]}return i},[])}function y(i,e){G(i),Object.keys(u).forEach(r=>{var I;return((I=u[r])==null?void 0:I.onFormUpdate)&&u[r].onFormUpdate(i,e)})}function D(i){n.value[i]="";const e=u[i],r=e!=null&&e.required?e.required():!1;return r&&!t.value[i]?(n.value[i]="This field is required",!1):r}function L(i){var U;n.value[i]="";const e=typeof t.value[i]=="string"?t.value[i]:(U=t.value[i])==null?void 0:U.standardDate,r=z(e),I=z(J.getSessionDate());return r.isAfter(I)?(n.value[i]="".concat(u[i].label," cannot be in the future"),!1):r.isBefore(z(s.getBirthdate()))?(n.value[i]="".concat(u[i].label," cannot be before birthdate"),!1):!0}function M(i,e,r){let I={};return e.match(/unknown/i)?I=v.buildValueText(i,"Unknown"):I=v.buildValueDate(i,e),I}function G(i){if(n.value[i]="",typeof u[i].required=="function"&&u[i].required()&&i in t.value&&!t.value[i]){n.value[i]="This field is required";return}typeof u[i].validation=="function"&&u[i].validation()}function le(){return Object.keys(u).forEach(i=>G(i)),Object.keys(n.value).every(i=>"".concat(n.value[i]).length<=0)}function re(){const i=Object.keys(u).filter(e=>typeof u[e].onSubmit=="function").map(e=>u[e].onSubmit&&u[e].onSubmit());return Promise.all(i)}async function ie(){const i=t.value.has_transfer_letter==="Yes"?q.value.validateStagingForm():!0,e=le();if(!i||!e)return ge("Please review form for errors"),!1;try{await v.createEncounter();const r=await Promise.all(ae());return await v.onSubmit(r),await re(),t.value.has_transfer_letter==="Yes"&&!await q.value.onSubmit()?(B("Unable to save Staging information!"),!1):(Q("ART Clinic Registration saved successfully"),!0)}catch(r){return console.error(r),B("Error has occured while saving observations"),!1}}return h({onSubmit:ie}),(i,e)=>(_(),f(a(Ve),{style:{margin:"0px auto",width:"80%"}},{default:l(()=>[o(a(we),null,{default:l(()=>[o(a(De),null,{default:l(()=>[o(a(C),null,{default:l(()=>[o(a(g),{size:"12","size-md":"6"},{default:l(()=>[o(a(p),{class:"form-label"},{default:l(()=>e[22]||(e[22]=[d("Phone Followup "),k("span",{style:{color:"red"}},"*",-1)])),_:1,__:[22]}),o(a(T),{value:t.value.phone_followup,onIonChange:e[0]||(e[0]=r=>{t.value.phone_followup=r.detail.value,y("phone_followup",r.detail.value)})},{default:l(()=>[o(a(N),{lines:"none"},{default:l(()=>[o(a(A),{slot:"start",value:"Yes"}),o(a(p),null,{default:l(()=>e[23]||(e[23]=[d("Yes")])),_:1,__:[23]})]),_:1}),o(a(N),{lines:"none"},{default:l(()=>[o(a(A),{slot:"start",value:"No"}),o(a(p),null,{default:l(()=>e[24]||(e[24]=[d("No")])),_:1,__:[24]})]),_:1})]),_:1},8,["value"]),n.value.phone_followup?(_(),f(a(w),{key:0,color:"danger"},{default:l(()=>[d(c(n.value.phone_followup),1)]),_:1})):m("",!0)]),_:1}),o(a(g),{size:"12","size-md":"6"},{default:l(()=>[o(a(p),{class:"form-label"},{default:l(()=>e[25]||(e[25]=[d("Home Visit Followup "),k("span",{style:{color:"red"}},"*",-1)])),_:1,__:[25]}),o(a(T),{value:t.value.home_visit_followup,onIonChange:e[1]||(e[1]=r=>{t.value.home_visit_followup=r.detail.value,y("home_visit_followup",r.detail.value)})},{default:l(()=>[o(a(N),{lines:"none"},{default:l(()=>[o(a(A),{slot:"start",value:"Yes"}),o(a(p),null,{default:l(()=>e[26]||(e[26]=[d("Yes")])),_:1,__:[26]})]),_:1}),o(a(N),{lines:"none"},{default:l(()=>[o(a(A),{slot:"start",value:"No"}),o(a(p),null,{default:l(()=>e[27]||(e[27]=[d("No")])),_:1,__:[27]})]),_:1})]),_:1},8,["value"]),n.value.home_visit_followup?(_(),f(a(w),{key:0,color:"danger"},{default:l(()=>[d(c(n.value.home_visit_followup),1)]),_:1})):m("",!0)]),_:1})]),_:1}),u.phone_number.required()?(_(),f(a(C),{key:0},{default:l(()=>[o(a(g),null,{default:l(()=>[o(a(p),{class:"form-label"},{default:l(()=>[d(c(u.phone_number.label)+" ",1),e[28]||(e[28]=k("span",{style:{color:"red"}},"*",-1))]),_:1,__:[28]}),o(fe,{inputHeader:"",sectionHeaderFontWeight:"20",bold:"",unit:"",input:"input",disabled:!1,icon:$.value.icon,placeholder:"Enter phone",iconRight:"",leftText:"",inputWidth:"100%",inputValue:t.value.phone_number,eventType:"input",p_country:P.value,"onUpdate:phone":e[2]||(e[2]=r=>{t.value.phone_number=r,y("phone_number",r)}),onCountryChanged:()=>null,popOverData:$.value.popOverData,onHandleInnerActionBtnPropetiesFn:e[3]||(e[3]=r=>i.$emit("click:innerBtn",$.value)),InnerActionBtnPropeties:$.value.InnerBtn},null,8,["icon","inputValue","p_country","popOverData","InnerActionBtnPropeties"]),n.value.phone_number?(_(),f(a(w),{key:0,color:"danger"},{default:l(()=>[d(c(n.value.phone_number),1)]),_:1})):m("",!0)]),_:1})]),_:1})):m("",!0),u.has_linkage.required()?(_(),f(a(C),{key:1},{default:l(()=>[o(a(g),null,{default:l(()=>[o(a(p),{class:"form-label"},{default:l(()=>[d(c(u.has_linkage.label)+" ",1),e[29]||(e[29]=k("span",{style:{color:"red"}},"*",-1))]),_:1,__:[29]}),o(a(T),{value:t.value.has_linkage,onIonChange:e[4]||(e[4]=r=>{t.value.has_linkage=r.detail.value,y("has_linkage",r.detail.value)})},{default:l(()=>[(_(!0),R(S,null,O(u.has_linkage.options(),r=>(_(),f(a(N),{lines:"none",key:r},{default:l(()=>[o(a(A),{slot:"start",value:r},null,8,["value"]),o(a(p),null,{default:l(()=>[d(c(r),1)]),_:2},1024)]),_:2},1024))),128))]),_:1},8,["value"]),n.value.has_linkage?(_(),f(a(w),{key:0,color:"danger"},{default:l(()=>[d(c(n.value.has_linkage),1)]),_:1})):m("",!0)]),_:1})]),_:1})):m("",!0),u.linkage_number.required()?(_(),f(a(C),{key:2},{default:l(()=>[o(a(g),null,{default:l(()=>[o(a(p),{class:"form-label"},{default:l(()=>[d(c(u.linkage_number.label)+" ",1),e[30]||(e[30]=k("span",{style:{color:"red"}},"*",-1))]),_:1,__:[30]}),o(H,{inputHeader:"",placeholder:"e.g 1234-002-01-A",inputValue:t.value.linkage_number,"onUpdate:inputValue":e[5]||(e[5]=r=>{t.value.linkage_number=r.target.value,y("linkage_number",r.target.value)}),error:!!n.value.linkage_number},{end:l(()=>[o(a(p),null,{default:l(()=>e[31]||(e[31]=[d("set_site_prefix")])),_:1,__:[31]})]),_:1},8,["inputValue","error"]),n.value.linkage_number?(_(),f(a(w),{key:0,color:"danger"},{default:l(()=>[d(c(n.value.linkage_number),1)]),_:1})):m("",!0)]),_:1})]),_:1})):m("",!0),u.received_arvs.required()?(_(),f(a(C),{key:3},{default:l(()=>[o(a(g),null,{default:l(()=>[o(a(p),{class:"form-label"},{default:l(()=>[d(c(u.received_arvs.label)+" ",1),e[32]||(e[32]=k("span",{style:{color:"red"}},"*",-1))]),_:1,__:[32]}),o(a(T),{value:t.value.received_arvs,onIonChange:e[6]||(e[6]=r=>{t.value.received_arvs=r.detail.value,y("received_arvs",r.detail.value)})},{default:l(()=>[(_(!0),R(S,null,O(u.received_arvs.options(),r=>(_(),f(a(N),{lines:"none",key:r},{default:l(()=>[o(a(A),{slot:"start",value:r},null,8,["value"]),o(a(p),null,{default:l(()=>[d(c(r),1)]),_:2},1024)]),_:2},1024))),128))]),_:1},8,["value"]),n.value.received_arvs?(_(),f(a(w),{key:0,color:"danger"},{default:l(()=>[d(c(n.value.received_arvs),1)]),_:1})):m("",!0)]),_:1})]),_:1})):m("",!0),u.date_last_taken_arvs.required()?(_(),f(a(C),{key:4},{default:l(()=>[o(a(g),{size:"12","size-md":"6"},{default:l(()=>[o(a(p),{class:"form-label"},{default:l(()=>[d(c(u.date_last_taken_arvs.label)+" ",1),e[33]||(e[33]=k("span",{style:{color:"red"}},"*",-1))]),_:1,__:[33]}),o(W,{place_holder:"",date_prop:t.value.date_last_taken_arvs,onDateUpDated:e[7]||(e[7]=r=>{t.value.date_last_taken_arvs=r,y("date_last_taken_arvs",r)}),error:!!n.value.date_last_taken_arvs},null,8,["date_prop","error"]),n.value.date_last_taken_arvs?(_(),f(a(w),{key:0,color:"danger"},{default:l(()=>[d(c(n.value.date_last_taken_arvs),1)]),_:1})):m("",!0)]),_:1})]),_:1})):m("",!0),u.taken_last_two_months.required()?(_(),f(a(C),{key:5},{default:l(()=>[o(a(g),null,{default:l(()=>[o(a(p),{class:"form-label"},{default:l(()=>[d(c(u.taken_last_two_months.label)+" ",1),e[34]||(e[34]=k("span",{style:{color:"red"}},"*",-1))]),_:1,__:[34]}),o(a(T),{value:t.value.taken_last_two_months,onIonChange:e[8]||(e[8]=r=>{t.value.taken_last_two_months=r.detail.value,y("taken_last_two_months",r.detail.value)})},{default:l(()=>[(_(!0),R(S,null,O(u.taken_last_two_months.options(),r=>(_(),f(a(N),{lines:"none",key:r},{default:l(()=>[o(a(A),{slot:"start",value:r},null,8,["value"]),o(a(p),null,{default:l(()=>[d(c(r),1)]),_:2},1024)]),_:2},1024))),128))]),_:1},8,["value"]),n.value.taken_last_two_months?(_(),f(a(w),{key:0,color:"danger"},{default:l(()=>[d(c(n.value.taken_last_two_months),1)]),_:1})):m("",!0)]),_:1})]),_:1})):m("",!0),u.taken_last_two_weeks.required()?(_(),f(a(C),{key:6},{default:l(()=>[o(a(g),null,{default:l(()=>[o(a(p),{class:"form-label"},{default:l(()=>[d(c(u.taken_last_two_weeks.label)+" ",1),e[35]||(e[35]=k("span",{style:{color:"red"}},"*",-1))]),_:1,__:[35]}),o(a(T),{value:t.value.taken_last_two_weeks,onIonChange:e[9]||(e[9]=r=>{t.value.taken_last_two_weeks=r.detail.value,y("taken_last_two_weeks",r.detail.value)})},{default:l(()=>[(_(!0),R(S,null,O(u.taken_last_two_weeks.options(),r=>(_(),f(a(N),{lines:"none",key:r},{default:l(()=>[o(a(A),{slot:"start",value:r},null,8,["value"]),o(a(p),null,{default:l(()=>[d(c(r),1)]),_:2},1024)]),_:2},1024))),128))]),_:1},8,["value"]),n.value.taken_last_two_weeks?(_(),f(a(w),{key:0,color:"danger"},{default:l(()=>[d(c(n.value.taken_last_two_weeks),1)]),_:1})):m("",!0)]),_:1})]),_:1})):m("",!0),u.ever_registered_at_art_clinic.required()?(_(),f(a(C),{key:7},{default:l(()=>[o(a(g),null,{default:l(()=>[o(a(p),{class:"form-label"},{default:l(()=>[d(c(u.ever_registered_at_art_clinic.label)+" ",1),e[36]||(e[36]=k("span",{style:{color:"red"}},"*",-1))]),_:1,__:[36]}),o(a(T),{value:t.value.ever_registered_at_art_clinic,onIonChange:e[10]||(e[10]=r=>{t.value.ever_registered_at_art_clinic=r.detail.value,y("ever_registered_at_art_clinic",r.detail.value)})},{default:l(()=>[(_(!0),R(S,null,O(u.ever_registered_at_art_clinic.options(),r=>(_(),f(a(N),{lines:"none",key:r},{default:l(()=>[o(a(A),{slot:"start",value:r},null,8,["value"]),o(a(p),null,{default:l(()=>[d(c(r),1)]),_:2},1024)]),_:2},1024))),128))]),_:1},8,["value"]),n.value.ever_registered_at_art_clinic?(_(),f(a(w),{key:0,color:"danger"},{default:l(()=>[d(c(n.value.ever_registered_at_art_clinic),1)]),_:1})):m("",!0)]),_:1})]),_:1})):m("",!0),u.location_of_art_initialization.required()?(_(),f(a(C),{key:8},{default:l(()=>[o(a(g),{size:"12","size-md":"6"},{default:l(()=>[o(a(p),{class:"form-label"},{default:l(()=>[d(c(u.location_of_art_initialization.label)+" ",1),e[37]||(e[37]=k("span",{style:{color:"red"}},"*",-1))]),_:1,__:[37]}),o(Z,{show_error:!!n.value.location_of_art_initialization,selected_district_ids:[],selected_location:t.value.location_of_art_initialization,onFacilitySelected:e[11]||(e[11]=r=>{t.value.location_of_art_initialization=r.selected_location,y("location_of_art_initialization",r.selected_location)})},null,8,["show_error","selected_location"]),n.value.location_of_art_initialization?(_(),f(a(w),{key:0,color:"danger"},{default:l(()=>[d(c(n.value.location_of_art_initialization),1)]),_:1})):m("",!0)]),_:1}),u.art_number_at_previous_location.required()?(_(),f(a(g),{key:0,size:"12","size-md":"6"},{default:l(()=>[o(a(p),{class:"form-label"},{default:l(()=>[d(c(u.art_number_at_previous_location.label)+" ",1),e[38]||(e[38]=k("span",{style:{color:"red"}},"*",-1))]),_:1,__:[38]}),o(H,{inputHeader:"",placeholder:"Enter previous ART number",inputValue:t.value.art_number_at_previous_location,"onUpdate:inputValue":e[12]||(e[12]=r=>{t.value.art_number_at_previous_location=r.target.value,y("art_number_at_previous_location",r.target.value)}),error:!!n.value.art_number_at_previous_location},null,8,["inputValue","error"]),n.value.art_number_at_previous_location?(_(),f(a(w),{key:0,color:"danger"},{default:l(()=>[d(c(n.value.art_number_at_previous_location),1)]),_:1})):m("",!0)]),_:1})):m("",!0)]),_:1})):m("",!0),u.art_start_date.required()?(_(),f(a(C),{key:9},{default:l(()=>[o(a(g),{size:"12","size-md":"6"},{default:l(()=>[o(a(p),{class:"form-label"},{default:l(()=>[d(c(u.art_start_date.label)+" ",1),e[39]||(e[39]=k("span",{style:{color:"red"}},"*",-1))]),_:1,__:[39]}),o(W,{place_holder:u.art_start_date.label+(u.art_start_date.required()?"*":""),date_prop:t.value.art_start_date,onDateUpDated:e[13]||(e[13]=r=>{t.value.art_start_date=r,y("art_start_date",r)}),error:!!n.value.art_start_date},null,8,["place_holder","date_prop","error"]),n.value.art_start_date?(_(),f(a(w),{key:0,color:"danger"},{default:l(()=>[d(c(n.value.art_start_date),1)]),_:1})):m("",!0)]),_:1})]),_:1})):m("",!0),u.has_transfer_letter.required()?(_(),f(a(C),{key:10},{default:l(()=>[o(a(g),null,{default:l(()=>[o(a(p),{class:"form-label"},{default:l(()=>[d(c(u.has_transfer_letter.label)+" ",1),e[40]||(e[40]=k("span",{style:{color:"red"}},"*",-1))]),_:1,__:[40]}),o(a(T),{value:t.value.has_transfer_letter,onIonChange:e[14]||(e[14]=r=>{t.value.has_transfer_letter=r.detail.value,y("has_transfer_letter",r.detail.value)})},{default:l(()=>[(_(!0),R(S,null,O(u.has_transfer_letter.options(),r=>(_(),f(a(N),{lines:"none",key:r},{default:l(()=>[o(a(A),{slot:"start",value:r},null,8,["value"]),o(a(p),null,{default:l(()=>[d(c(r),1)]),_:2},1024)]),_:2},1024))),128))]),_:1},8,["value"]),n.value.has_transfer_letter?(_(),f(a(w),{key:0,color:"danger"},{default:l(()=>[d(c(n.value.has_transfer_letter),1)]),_:1})):m("",!0)]),_:1})]),_:1})):m("",!0),o(a(C),null,{default:l(()=>[u.initial_weight.required()?(_(),f(a(g),{key:0,size:"12","size-md":"6"},{default:l(()=>[o(a(p),{class:"form-label"},{default:l(()=>[d(c(u.initial_weight.label)+" ",1),e[41]||(e[41]=k("span",{style:{color:"red"}},"*",-1))]),_:1,__:[41]}),o(H,{inputHeader:"",placeholder:"1",inputType:"number",inputValue:t.value.initial_weight,"onUpdate:inputValue":e[15]||(e[15]=r=>{t.value.initial_weight=r.target.value,y("initial_weight",r.target.value)}),error:!!n.value.initial_weight,unit:"KG"},null,8,["inputValue","error"]),n.value.initial_weight?(_(),f(a(w),{key:0,color:"danger"},{default:l(()=>[d(c(n.value.initial_weight),1)]),_:1})):m("",!0)]),_:1})):m("",!0),u.initial_height.required()?(_(),f(a(g),{key:1,size:"12","size-md":"6"},{default:l(()=>[o(a(p),{class:"form-label"},{default:l(()=>[d(c(u.initial_height.label)+" ",1),e[42]||(e[42]=k("span",{style:{color:"red"}},"*",-1))]),_:1,__:[42]}),o(H,{inputHeader:"",placeholder:"1",inputType:"number",inputValue:t.value.initial_height,"onUpdate:inputValue":e[16]||(e[16]=r=>{t.value.initial_height=r.target.value,y("initial_height",r.target.value)}),error:!!n.value.initial_height,unit:"CM"},null,8,["inputValue","error"]),n.value.initial_height?(_(),f(a(w),{key:0,color:"danger"},{default:l(()=>[d(c(n.value.initial_height),1)]),_:1})):m("",!0)]),_:1})):m("",!0)]),_:1}),t.value.has_transfer_letter==="Yes"?(_(),f(a(C),{key:11},{default:l(()=>[o(a(g),null,{default:l(()=>[(_(),f(Ce,{key:t.value.art_start_date,date:t.value.art_start_date,ref_key:"stagingRef",ref:q},null,8,["date"]))]),_:1})]),_:1})):m("",!0),u.cd4_available.required()?(_(),f(a(C),{key:12},{default:l(()=>[o(a(g),null,{default:l(()=>[o(a(p),{class:"form-label"},{default:l(()=>[d(c(u.cd4_available.label)+" ",1),e[43]||(e[43]=k("span",{style:{color:"red"}},"*",-1))]),_:1,__:[43]}),o(a(T),{value:t.value.cd4_available,onIonChange:e[17]||(e[17]=r=>{t.value.cd4_available=r.detail.value,y("cd4_available",r.detail.value)})},{default:l(()=>[(_(!0),R(S,null,O(u.cd4_available.options(),r=>(_(),f(a(N),{lines:"none",key:r},{default:l(()=>[o(a(A),{slot:"start",value:r},null,8,["value"]),o(a(p),null,{default:l(()=>[d(c(r),1)]),_:2},1024)]),_:2},1024))),128))]),_:1},8,["value"]),n.value.cd4_available?(_(),f(a(w),{key:0,color:"danger"},{default:l(()=>[d(c(n.value.cd4_available),1)]),_:1})):m("",!0)]),_:1})]),_:1})):m("",!0),u.cd4_percent.required()?(_(),f(a(C),{key:13},{default:l(()=>[o(a(g),null,{default:l(()=>[o(a(p),{class:"form-label"},{default:l(()=>[d(c(u.cd4_percent.label)+" ",1),e[44]||(e[44]=k("span",{style:{color:"red"}},"*",-1))]),_:1,__:[44]}),o(H,{inputHeader:"",placeholder:"Enter CD4 percent",inputType:"number",inputValue:t.value.cd4_percent,"onUpdate:inputValue":e[18]||(e[18]=r=>{t.value.cd4_percent=r.target.value,y("cd4_percent",r.target.value)}),error:!!n.value.cd4_percent,unit:"%"},null,8,["inputValue","error"]),n.value.cd4_percent?(_(),f(a(w),{key:0,color:"danger"},{default:l(()=>[d(c(n.value.cd4_percent),1)]),_:1})):m("",!0)]),_:1})]),_:1})):m("",!0),u.confirmatory_hiv_test_type.required()?(_(),f(a(C),{key:14},{default:l(()=>[o(a(g),null,{default:l(()=>[o(a(p),{class:"form-label"},{default:l(()=>[d(c(u.confirmatory_hiv_test_type.label)+" ",1),e[45]||(e[45]=k("span",{style:{color:"red"}},"*",-1))]),_:1,__:[45]}),o(a(T),{value:t.value.confirmatory_hiv_test_type,onIonChange:e[19]||(e[19]=r=>{t.value.confirmatory_hiv_test_type=r.detail.value,y("confirmatory_hiv_test_type",r.detail.value)})},{default:l(()=>[(_(!0),R(S,null,O(u.confirmatory_hiv_test_type.options(),r=>(_(),f(a(N),{lines:"none",key:r.value},{default:l(()=>[o(a(A),{disabled:r.disabled?r.disabled():!1,slot:"start",value:r.value},null,8,["disabled","value"]),o(a(p),null,{default:l(()=>[d(c(r.label),1)]),_:2},1024)]),_:2},1024))),128))]),_:1},8,["value"]),n.value.confirmatory_hiv_test_type?(_(),f(a(w),{key:0,color:"danger"},{default:l(()=>[d(c(n.value.confirmatory_hiv_test_type),1)]),_:1})):m("",!0)]),_:1})]),_:1})):m("",!0),u.confirmatory_hiv_test_location.required()?(_(),f(a(C),{key:15},{default:l(()=>[o(a(g),{size:"12","size-md":"6"},{default:l(()=>[o(a(p),{class:"form-label"},{default:l(()=>[d(c(u.confirmatory_hiv_test_location.label)+" ",1),e[46]||(e[46]=k("span",{style:{color:"red"}},"*",-1))]),_:1,__:[46]}),o(Z,{show_error:!!n.value.confirmatory_hiv_test_location,selected_district_ids:[],selected_location:t.value.confirmatory_hiv_test_location,onFacilitySelected:e[20]||(e[20]=r=>{t.value.confirmatory_hiv_test_location=r.selected_location,y("confirmatory_hiv_test_location",r.selected_location)})},null,8,["show_error","selected_location"]),n.value.confirmatory_hiv_test_location?(_(),f(a(w),{key:0,color:"danger"},{default:l(()=>[d(c(n.value.confirmatory_hiv_test_location),1)]),_:1})):m("",!0)]),_:1}),u.confirmatory_hiv_test_date.required()?(_(),f(a(g),{key:0,size:"12","size-md":"6"},{default:l(()=>[o(a(p),{class:"form-label"},{default:l(()=>[d(c(u.confirmatory_hiv_test_date.label)+" ",1),e[47]||(e[47]=k("span",{style:{color:"red"}},"*",-1))]),_:1,__:[47]}),o(W,{place_holder:u.confirmatory_hiv_test_date.label+(u.confirmatory_hiv_test_date.required()?"*":""),date_prop:t.value.confirmatory_hiv_test_date,onDateUpDated:e[21]||(e[21]=r=>{t.value.confirmatory_hiv_test_date=r,y("confirmatory_hiv_test_date",r)}),error:!!n.value.confirmatory_hiv_test_date},null,8,["place_holder","date_prop","error"]),n.value.confirmatory_hiv_test_date?(_(),f(a(w),{key:0,color:"danger"},{default:l(()=>[d(c(n.value.confirmatory_hiv_test_date),1)]),_:1})):m("",!0)]),_:1})):m("",!0)]),_:1})):m("",!0)]),_:1})]),_:1})]),_:1}))}}),Be=he(Oe,[["__scopeId","data-v-5864251e"]]);export{Be as default};
