var Te=Object.defineProperty;var Fe=(e,t,a)=>t in e?Te(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a;var U=(e,t,a)=>Fe(e,typeof t!="symbol"?t+"":t,a);import{d as q,D as Ce,aV as X,r as F,a as pe,H as A,O as G,f as D,J as p,l,k as f,e as k,P as he,F as ne,m as M,u as b,ah as Q,b5 as Re,b2 as be,G as ke,E as Ie,ai as Ae,aj as Oe,_ as ie,I as we,a3 as Me,bf as He,aU as Ue,Q as R,L as ue,W as me,a5 as Ve,p as K,K as w,c as W,aS as ze,aR as qe,aw as Je,aP as Ge,N as ge,a2 as We,w as Ke,bs as Qe,bo as Ye,bN as Xe,aN as je}from"./vendor-BeyhA3v1.js";import{aX as se,S as C,aQ as Y,O as ee,bp as Ze,t as z,l as oe,_ as j,K as Ne,b8 as et,B as Le,bg as tt,N as $,o as fe,aH as ve,H as _,u as H,ag as ce,E as at,aZ as Ee,P as Be,a8 as nt,J as te,W as st,aR as it,bq as ot,br as rt,ar as lt,aJ as re,aK as le,a1 as ct,bs as T,A as ae,m as dt,bf as ut,e as pt,ay as de,z as ht,az as mt,a as De}from"./index-Dckyo3xn.js";import{D as gt}from"./DashBox-gJDHpy27.js";import{B as V}from"./BasicForm-B34q-C-A.js";import ft from"./LabOrdersList-ih4X_Qaz.js";import{v as ye}from"./group_validation-Bn0C80EX.js";import{l as Z}from"./lodash-Dt8AsbQm.js";import{g as vt,a as Pe,D as J}from"./drug_prescription_service-CQReze18.js";import{A as Dt}from"./ncd_appointment_service-D7dzU6Kj.js";import{D as yt}from"./DateInputField-D-HJOWLx.js";class _t extends se{constructor(t,a){super(t,8,a)}static async getDiagnosis(t="",a=1,s=10){if(C.getLanConnectionStatus()||C.getPouchDbStatus())return await Y.getConceptSet("Qech outpatient diagnosis list");{const n=await Y.getConceptID("Qech outpatient diagnosis list");return se.getJson("diagnosis",{id:n,name:t,page:a,page_size:s})}}}class St extends ee{constructor(){super()}async postActivities(t,a){const s=a.location_id,r=await new Ze(parseInt(t),-1,s).createEncounter();if(r){const i=await ee.buildLabOrders(r,a.orders||a);if(!await ee.saveOrdersArray(r.encounter_id,i))return z("Unable to save lab orders")}}}const Ct=q({data:()=>({userRole:"",ready:!1,userRoleSettings:{}}),watch:{$route:{async handler(e){this.userRole=C.getUserRoles();const t=C.getProgramID(),a=C.getProgramName();this.userRole=="Lab"&&t==14&&(this.userRoleSettings={url:"home",btnName:"Back to home",stepperTitle:"Laboratory"}),t==14&&this.userRole!="Lab"&&(this.userRoleSettings={url:"home",btnName:"Go to waiting list",stepperTitle:"Consultation Plan"}),t==12&&(this.userRoleSettings={url:"contact",btnName:"Back"}),a=="LABOUR AND DELIVERY PROGRAM"&&(this.userRoleSettings={url:"labour/labourHome",btnName:"Back to home"}),a=="PNC PROGRAM"&&(this.userRoleSettings={url:"pnc/home",btnName:"Back to home"})},immediate:!0,deep:!0}}}),_e=[{checkboxBtnContent:{header:{name:"Medical history"},data:[{name:"Skull",value:"Skull",checked:!1}]}},{checkboxBtnContent:{header:{name:"Medical history"},data:[{name:"Mastoid",value:"Mastoid",checked:!1}]}},{checkboxBtnContent:{header:{name:"Medical history"},data:[{name:"ParaSinuses",value:"ParaSinuses",checked:!1}]}},{checkboxBtnContent:{header:{name:"Medical history"},data:[{name:"Optic Foramen",value:"PVD",checked:!1}]}},{checkboxBtnContent:{header:{name:"Medical history"},data:[{name:"Orbits",value:"Orbits",checked:!1}]}},{checkboxBtnContent:{header:{name:"Medical history"},data:[{name:"Nasal Bone",value:"Nasal Bone",checked:!1}]}},{checkboxBtnContent:{header:{name:"Medical history"},data:[{name:"Mandible",value:"Mandible",checked:!1}]}},{checkboxBtnContent:{header:{name:"Medical history"},data:[{name:"TMJs",value:"TMJs",checked:!1}]}},{checkboxBtnContent:{header:{name:"Medical history"},data:[{name:"Zygomatic",value:"Zygomatic",checked:!1}]}}],bt=[{checkboxBtnContent:{header:{name:"Medical history"},data:[{name:"Neck",value:"Neck",checked:!1}]}}],kt=[{checkboxBtnContent:{header:{name:"Medical history"},data:[{name:"Chest",value:"Chest",checked:!1}]}},{checkboxBtnContent:{header:{name:"Medical history"},data:[{name:"Heart",value:"Heart",checked:!1}]}},{checkboxBtnContent:{header:{name:"Medical history"},data:[{name:"Sternum",value:"Sternum",checked:!1}]}},{checkboxBtnContent:{header:{name:"Medical history"},data:[{name:"Ribs",value:"Ribs",checked:!1}]}},{checkboxBtnContent:{header:{name:"Medical history"},data:[{name:"SCJ",value:"SCJ",checked:!1}]}}],It=[{checkboxBtnContent:{header:{name:"Medical history"},data:[{name:"Abdomen",value:"Abdomen",checked:!1}]}},{checkboxBtnContent:{header:{name:"Medical history"},data:[{name:"IVP",value:"IVP",checked:!1}]}}],At=[{checkboxBtnContent:{header:{name:"Medical history"},data:[{name:"Clavicle",value:"Clavicle",checked:!1}]}},{checkboxBtnContent:{header:{name:"Medical history"},data:[{name:"Shoulder",value:"Shoulder",checked:!1}]}},{checkboxBtnContent:{header:{name:"Medical history"},data:[{name:"Scapula",value:"Scapula",checked:!1}]}},{checkboxBtnContent:{header:{name:"Medical history"},data:[{name:"Humerus",value:"Humerus",checked:!1}]}},{checkboxBtnContent:{header:{name:"Medical history"},data:[{name:"Elbow",value:"Elbow",checked:!1}]}},{checkboxBtnContent:{header:{name:"Medical history"},data:[{name:"Forearm",value:"Forearm",checked:!1}]}},{checkboxBtnContent:{header:{name:"Medical history"},data:[{name:"Wrist",value:"Wrist",checked:!1}]}},{checkboxBtnContent:{header:{name:"Medical history"},data:[{name:"Hand",value:"Hand",checked:!1}]}},{checkboxBtnContent:{header:{name:"Medical history"},data:[{name:"Phalanges",value:"Phalanges",checked:!1}]}}],Ot=[{checkboxBtnContent:{header:{name:"Medical history"},data:[{name:"CSpine",value:"CSpine",checked:!1}]}},{checkboxBtnContent:{header:{name:"Medical history"},data:[{name:"TSpine",value:"TSpine",checked:!1}]}},{checkboxBtnContent:{header:{name:"Medical history"},data:[{name:"LSpine",value:"LSpine",checked:!1}]}},{checkboxBtnContent:{header:{name:"Medical history"},data:[{name:"SSpine",value:"SSpine",checked:!1}]}},{checkboxBtnContent:{header:{name:"Medical history"},data:[{name:"Coccyx",value:"Coccyx",checked:!1}]}}],wt=[{checkboxBtnContent:{header:{name:"Medical history"},data:[{name:"Pelvis",value:"Pelvis",checked:!1}]}},{checkboxBtnContent:{header:{name:"Medical history"},data:[{name:"Sacroillac Joints",value:"Sacroillac Joints",checked:!1}]}},{checkboxBtnContent:{header:{name:"Medical history"},data:[{name:"Hip",value:"Hip",checked:!1}]}}],Mt=[{checkboxBtnContent:{header:{name:"Medical history"},data:[{name:"Femur",value:"Femur",checked:!1}]}},{checkboxBtnContent:{header:{name:"Medical history"},data:[{name:"Knee",value:"Knee",checked:!1}]}},{checkboxBtnContent:{header:{name:"Medical history"},data:[{name:"Patella",value:"Patella",checked:!1}]}},{checkboxBtnContent:{header:{name:"Medical history"},data:[{name:"Leg",value:"Leg",checked:!1}]}},{checkboxBtnContent:{header:{name:"Medical history"},data:[{name:"Ankle",value:"Ankle",checked:!1}]}},{checkboxBtnContent:{header:{name:"Medical history"},data:[{name:"Calcaneus",value:"Calcaneus",checked:!1}]}},{checkboxBtnContent:{header:{name:"Medical history"},data:[{name:"Foot",value:"Foot",checked:!1}]}},{checkboxBtnContent:{header:{name:"Medical history"},data:[{name:"Toe",value:"Toe",checked:!1}]}}],Nt=Ce("RadiologyStore",{state:()=>({head:[..._e],neck:[...bt],chest:[...kt],abdomen:[...It],upper_extremity:[...At],spine:[...Ot],pelvis:[...wt],lower_extremity:[...Mt]}),actions:{setOPDDiagnosis(e){this.head=e},getInitial(){return[...Z.cloneDeep(_e)]}}}),Lt=["innerHTML"],Et={class:"scrollable-container"},Bt={key:0,class:"form-section"},Pt={key:1,class:"form-section"},xt={key:2,class:"form-section"},$t={key:3,class:"form-section"},Tt={key:4,class:"form-section"},Ft={key:5,class:"form-section"},Rt={key:6,class:"form-section"},Ht={key:7,class:"form-section"},Ut=q({__name:"RadiologyInvestigation",setup(e){const t=Nt(),{head:a,neck:s,chest:n,abdomen:r,upper_extremity:i,spine:o,pelvis:m,lower_extremity:c}=X(t),h=F(oe),y=F([]),d=(I,v,L)=>{document.querySelectorAll("#".concat(I," path")).forEach(u=>{u.classList.toggle("white-fill")}),document.querySelectorAll("#".concat(v," line")).forEach(u=>{u.classList.toggle("dark-green-stroke")}),document.querySelectorAll("#".concat(v," rect")).forEach(u=>{u.classList.toggle("bright-green-fill"),u.classList.toggle("dark-green-stroke")}),document.querySelectorAll("#".concat(v," path")).forEach(u=>{u.classList.toggle("dark-green-fill")}),document.querySelectorAll("#".concat(v," circle")).forEach(u=>{u.classList.toggle("bright-green-fill")});const E=y.value.findIndex(u=>u.id===L);E>=0?y.value.splice(E,1):y.value.unshift({id:L,active:!0})},N=()=>{const I=document.getElementById("SPINE");I.style.display==="none"||I.style.display==""?I.style.display="block":I.style.display="none",d("SPINE","SPINE_LABEL-2","spine")};return pe(()=>{const I=document.getElementById("HEAD");I&&I.addEventListener("click",()=>{d("HEAD","LABEL-6","head")});const v=document.getElementById("NECK");v&&v.addEventListener("click",()=>{d("NECK","LABEL-5","neck")});const L=document.getElementById("CHEST");L&&L.addEventListener("click",()=>{d("CHEST","LABEL-4","chest")});const E=document.getElementById("ABDOMEN_LABEL");E&&E.addEventListener("click",()=>{const x=document.getElementById("ABDOMEN-2");x.style.display==="none"||x.style.display==""?x.style.display="block":x.style.display="none",d("ABDOMEN","ABDOMEN_LABEL-2","abdomen")});const u=document.getElementById("UPPER_EXTRMITY");u&&u.addEventListener("click",()=>{d("UPPER_EXTRMITY","LABEL-3","upper_extremity")});const g=document.getElementById("SPINE"),S=document.getElementById("SPINE_LABEL"),O=document.getElementById("LOWER_SPINE_INACTIVE");g&&g.addEventListener("click",()=>{N()}),S&&S.addEventListener("click",()=>{N()}),O&&O.addEventListener("click",()=>{N()});const B=document.getElementById("PELVIS");B&&B.addEventListener("click",()=>{d("PELVIS","LABEL-2","pelvis")});const P=document.getElementById("LOWER_EXTREMITY");P&&P.addEventListener("click",()=>{d("LOWER_EXTREMITY","LABEL","lower_extremity")})}),(I,v)=>{const L=A("ion-col"),E=A("ion-row");return D(),G(E,null,{default:p(()=>[l(L,{size:"7"},{default:p(()=>[f("div",{innerHTML:h.value.full_body_sk},null,8,Lt)]),_:1}),l(L,{size:"5",class:"form-column"},{default:p(()=>[f("div",Et,[(D(!0),k(ne,null,he(y.value,u=>(D(),k(ne,null,[u.id==="head"?(D(),k("div",Bt,[v[0]||(v[0]=f("h6",null,"Body Part: Head",-1)),l(V,{contentData:b(a)},null,8,["contentData"])])):u.id==="neck"?(D(),k("div",Pt,[v[1]||(v[1]=f("h6",null,"Body Part: Neck",-1)),l(V,{contentData:b(s)},null,8,["contentData"])])):u.id==="chest"?(D(),k("div",xt,[v[2]||(v[2]=f("h6",null,"Body Part: Chest",-1)),l(V,{contentData:b(n)},null,8,["contentData"])])):u.id==="abdomen"?(D(),k("div",$t,[v[3]||(v[3]=f("h6",null,"Body Part: Abdomen",-1)),l(V,{contentData:b(r)},null,8,["contentData"])])):u.id==="upper_extremity"?(D(),k("div",Tt,[v[4]||(v[4]=f("h6",null,"Body Part: Upper Extremity",-1)),l(V,{contentData:b(i)},null,8,["contentData"])])):u.id==="spine"?(D(),k("div",Ft,[v[5]||(v[5]=f("h6",null,"Body Part: Spine",-1)),l(V,{contentData:b(o)},null,8,["contentData"])])):u.id==="pelvis"?(D(),k("div",Rt,[v[6]||(v[6]=f("h6",null,"Body Part: Pelvis",-1)),l(V,{contentData:b(m)},null,8,["contentData"])])):u.id==="lower_extremity"?(D(),k("div",Ht,[v[7]||(v[7]=f("h6",null,"Body Part: Lower Extremity",-1)),l(V,{contentData:b(c)},null,8,["contentData"])])):M("",!0)],64))),256))])]),_:1})]),_:1})}}}),Vt=j(Ut,[["__scopeId","data-v-5ab54fe8"]]),zt=q({name:"Menu",mixins:[Ct],components:{IonContent:Me,IonHeader:we,IonItem:ie,IonList:Oe,IonMenu:Ae,IonTitle:Ie,IonToolbar:ke,IonInput:be,IonPopover:Re,DashBox:gt,SelectionPopover:tt,BasicInputField:Le,BasicForm:V,List:et,DynamicButton:Ne,LabOrdersList:ft,RadiologyInvestigation:Vt},data(){return{segmentContent:"Lab Investigations",iconsContent:oe,no_item:!1,search_item:!1,display_item:!1,addItemButton:!0,selectedText:"",testResult:"",test:"",labOrders:"",filteredSpecimen:"",testData:[],popoverOpen:!1,labOrderStatus:!1,event:"",specimen:"",radiologyOrdersStatus:!1,otherOrdersStatus:!1}},setup(){return{checkmark:Ue,pulseOutline:He}},computed:{...Q(ve,["investigations"]),...Q(H,["patient"]),inputFields(){return this.investigations[0].data.rowData[0].colData}},watch:{investigations:{handler(){this.setDashedBox()},deep:!0},patient:{async handler(){var e;(e=this.patient)!=null&&e.labOrders&&(this.labOrders=[...this.patient.labOrders.saved,...this.patient.labOrders.unsaved])},deep:!0},$route:{async handler(){await this.getTests()},deep:!0}},async mounted(){await this.getTests(),this.updateInvestigationsStores(),this.setDashedBox(),this.updateInvestigationWizard()},methods:{setSegmentContent(e){this.segmentContent=e},async getTests(){let e;C.getPouchDbStatus()&&C.getLanConnectionStatus()?e=await fe("test_types"):e=await ee.getTestTypes(),$(this.investigations,"test","multiSelectData",e)},toggleLabOrderStatus(){this.labOrderStatus=!this.labOrderStatus},async updateInvestigationWizard(){var t;if(!((t=this.patient)!=null&&t.labOrders))return;this.labOrders=[...this.patient.labOrders.saved,...this.patient.labOrders.unsaved];const e=await this.labOrders.filter(a=>_.toStandardHisFormat(_.sessionDate())===_.toStandardHisFormat(a.order_date));e.length>0?this.investigations[0].selectedData=e:this.investigations[0].selectedData=""},async updateInvestigationsStores(){await this.updateInvestigationWizard(),ve().setInvestigations(this.investigations)},displayInputFields(){this.testResult="",this.selectedText="",this.no_item=!1,this.addItemButton=!1,this.search_item=!0},async validateRowData(){return ye(this.investigations)},async checkTest(){return await this.isNameInData(this.inputFields[0].value.name,await this.investigations[0].selectedData)?($(this.investigations,"test","alertsErrorMassage","Lab order already selected"),!1):($(this.investigations,"test","alertsErrorMassage",""),!0)},async addNewRow(){ye(this.investigations)&&await this.checkTest()&&(await this.saveTest(),this.investigations[0].data.rowData[0].colData[0].value="",this.investigations[0].data.rowData[0].colData[1].value="",this.search_item=!1,this.display_item=!0,this.addItemButton=!0),this.updateInvestigationWizard()},isNameInData(e,t){for(let a of t)for(let s of a.tests)if(s.name===e)return!0;return!1},async saveTest(){await new St().postActivities(this.patient.patientID,[{concept_id:this.inputFields[0].value.concept_id,name:this.inputFields[0].value.name,specimen:this.inputFields[1].value.name,reason:"Routine",specimenConcept:await Y.getConceptID(this.inputFields[1].value.name,!0)}]),$(this.investigations,"specimen","disabled",!0),this.labOrders=[...this.patient.labOrders.saved,...this.patient.labOrders.unsaved]},async handleInputData(e){if(e.inputHeader=="Test"&&this.checkTest(),$(this.investigations,"specimen","alertsErrorMassage",""),e.inputHeader=="Test"&&e.value){let t;C.getPouchDbStatus()&&C.getLanConnectionStatus()?t=await fe("specimens"):t=await ee.getSpecimens("",1e3),this.specimen=await Y.getConceptSet(e.value.name,"",{names:t.map(a=>a.name)}),this.specimen.length==1?($(this.investigations,"specimen","value",this.specimen[0]),$(this.investigations,"specimen","disabled",!0)):($(this.investigations,"specimen","value",""),$(this.investigations,"specimen","disabled",!1)),$(this.investigations,"specimen","multiSelectData",this.specimen)}},async filterTest(e){return await this.labOrders.filter(t=>t.name.toLowerCase().includes(e.toLowerCase()))},async filterSpecimen(e){var t;return(t=this.specimen[0])!=null&&t.name&&e?await this.specimen.filter(a=>a==null?void 0:a.name.toLowerCase().includes(e.toLowerCase())):[]},setTest(e){this.selectedText=e.name,this.inputFields[1].inputHeader=="Test"?this.investigations[0].data.rowData[0].colData[0].value=e.name:this.investigations[0].data.rowData[0].colData[1].value=e.name,this.updateInvestigationsStores()},setDashedBox(){(this.inputFields[1].value||this.inputFields[0].value)&&(this.addItemButton=!1,this.search_item=!0,this.no_item=!1),this.investigations[0].selectedData.length>0?(this.display_item=!0,this.no_item=!1):this.search_item||(this.no_item=!0)}}}),qt={class:"background"},Jt={key:0},Gt={key:1},Wt={key:2},Kt={class:"",slot:"content",style:{"margin-bottom":"125px","margin-top":"2px"}},Qt={key:3},Yt={class:"ion-padding",slot:"content"},Xt={key:4};function jt(e,t,a,s,n,r){const i=A("ion-label"),o=A("ion-segment-button"),m=A("ion-segment"),c=A("VisitsHistory"),h=A("LabOrdersList"),y=A("RadiologyInvestigation");return D(),k("div",qt,[l(m,{value:e.segmentContent,style:{"margin-top":"5px"}},{default:p(()=>[l(o,{value:"Lab Investigations",onClick:t[0]||(t[0]=d=>e.setSegmentContent("Lab Investigations"))},{default:p(()=>[l(i,null,{default:p(()=>t[3]||(t[3]=[R("Lab Investigations")])),_:1,__:[3]})]),_:1}),l(o,{value:"Radiology Investigation",onClick:t[1]||(t[1]=d=>e.setSegmentContent("Radiology Investigation"))},{default:p(()=>[l(i,null,{default:p(()=>t[4]||(t[4]=[R("Radiology Investigation")])),_:1,__:[4]})]),_:1}),l(o,{value:"Other Investigation",onClick:t[2]||(t[2]=d=>e.setSegmentContent("Other Investigation"))},{default:p(()=>[l(i,null,{default:p(()=>t[5]||(t[5]=[R("Other Investigation")])),_:1,__:[5]})]),_:1})]),_:1},8,["value"]),e.segmentContent=="Radiology Investigation"?(D(),k("div",Jt,[l(c)])):M("",!0),e.segmentContent=="Other Investigation"?(D(),k("div",Gt)):M("",!0),e.segmentContent=="Lab Investigations"?(D(),k("div",Wt,[f("div",Kt,[f("span",null,[l(h,{propOrders:e.labOrders},null,8,["propOrders"])])])])):M("",!0),e.segmentContent=="Radiology Investigation"?(D(),k("div",Qt,[f("div",Yt,[l(y)])])):M("",!0),e.segmentContent=="Other Investigation"?(D(),k("div",Xt)):M("",!0)])}const qa=j(zt,[["render",jt],["__scopeId","data-v-0803dcda"]]);class Zt extends se{constructor(t,a){super(t,105,a)}}class ea extends se{constructor(t,a){super(t,25,a)}static async get_____(t="",a=1,s=10){}}async function Ja(e){var t,a,s;try{const n=H(),{patient:r}=X(n),i=JSON.parse(JSON.stringify(r.value));return(s=(a=(t=i.allergies)!=null?t:i.allergies={}).unsaved)!=null||(a.unsaved=[]),i.allergies.unsaved.push(...e),te("Allergies appended to patient record successfully"),i}catch(n){z("Unable to save Allegies!")}}class Ga{async onSubmitNotes(t,a,s){const n=new Zt(t,a);await n.createEncounter(),await n.saveObservationList(s)}async onSubmitAllergies(t,a,s){try{const n=new ea(t,a);await n.createEncounter(),await n.saveObservationList(s),te("Allergies saved successfully")}catch(n){console.error("Error saving allergies:",n),z("Failed to save allergies")}}}class Wa{constructor(){U(this,"programID");U(this,"providerID");U(this,"patientID");U(this,"date");U(this,"demographics");U(this,"previousDrugPrescriptions",[]);U(this,"previousClinicalNotes");U(this,"previousDrugAllergies");const t=H();this.demographics=t.patient,this.patientID=this.demographics.patientID,this.date=ce.getSessionDate(),this.providerID=C.getUserID(),this.programID=ce.getProgramID(),this.previousClinicalNotes={},this.previousDrugAllergies={}}async getPatientEncounters(){const t=await this.getPatientVisitDates(),a=t.map(async n=>{const r=n.value,i=await at.getEncounters(this.patientID,{date:r});await Promise.all(i.map(async o=>{var m;if(o.type.name=="NOTES"){const{observations:c}=o;Z.isEmpty(c)||c.forEach(h=>{if(h.concept_id=="2688"){const y=_.toStandardHisDisplayFormat(h.obs_datetime);Z.isEmpty(this.previousClinicalNotes.hasOwnProperty(y))&&(this.previousClinicalNotes[y]=[]),this.previousClinicalNotes[y].push({date:y,notes:h.value_text})}})}if(o.type.name=="TREATMENT"){const{observations:c}=o;if(!Z.isEmpty(c))for(const h in c){let y="<UNKNOWN CONCEPT>";const d=c[h];try{(m=d==null?void 0:d.concept)!=null&&m.concept_names?y=d.concept.concept_names[0].name:y=await Y.getConceptName(d.concept_id)}catch(v){console.error(d,v)}const N=await ce.resolvePrimaryValue(d),I=_.toStandardHisDisplayFormat(d.date_created);y=="Allergic"&&(this.previousDrugAllergies.hasOwnProperty(I)||(this.previousDrugAllergies[I]=[]),this.previousDrugAllergies[I].push({date:I,value:N}))}}}))});await Promise.all(a);const s=t.map(async n=>{const r=await Ee.getOrderByPatient(this.patientID,{start_date:n.value});if(!Z.isEmpty(r)){const i=r.map(o=>({drugName:o.drug.name,value:_.toStandardHisTimeFormat(o.order.start_date),dose:o.dose,frequency:vt(o.frequency),prescription:_.toStandardHisFormat(o.order.auto_expire_date),duration:ta(o.order.instructions),other:o}));this.previousDrugPrescriptions.push({prescriptionDate:_.toStandardHisDisplayFormat(n.value),previousPrescriptions:i})}});return await Promise.all(s),{previousDrugPrescriptions:this.previousDrugPrescriptions,previousClinicalNotes:this.previousClinicalNotes,previousDrugAllergies:this.previousDrugAllergies}}async getPatientVisitDates(){return(await Be.getPatientVisits(this.patientID,!1)).map(t=>({label:_.toStandardHisDisplayFormat(t),value:t,other:{isActive:t===nt.getSessionDate()}}))}}function ta(e){const t=/(\d+)\s+days/i,a=e.match(t);return a&&a.length>1?parseInt(a[1]):null}async function Ka(){const e=H(),{patient:t}=X(e),a=t.value,s=[8809,903,6410,6409],n="";let r;C.getLanConnectionStatus()||C.getPouchDbStatus()?r=await _t.getDiagnosis(n,1,15):r=await C.getJson("diagnosis",{id:7409,page_size:2e3});const i=r.filter(d=>s.includes(d.concept_id));i.push({concept_id:8809,concept_name_id:926,concept_name_type:"FULLY_SPECIFIED",creator:1,date_created:"2004-06-25T00:00:00.000+02:00",date_voided:null,id:72,locale:"en",locale_preferred:0,name:"Hypertension",uuid:"b99faa1e-8d80-11d8-abbb-0024217bb78e",void_reason:null,voided:0,voided_by:null});const o=a.diagnosis.saved.map(d=>d.value_coded),m=a.diagnosis.unsaved.map(d=>d.value_coded),c=[...o,...m];return i.filter(d=>c.includes(d.concept_id)).map(d=>d.name)}const aa=q({created(){},components:{IonItem:ie,IonCol:Ve,IonLabel:me,IonIcon:ue},data(){return{iconsContent:oe,localMedicalDrugsList:[...this.$props._selectedMedicalDrugsList]}},props:{_selectedMedicalDrugsList:{type:Array,default:[]},show_actions_buttons:{type:Boolean,default:!0},highLightBackground:{type:String,default:"item-native"}},watch:{},methods:{highlightItem(e){const t=document.getElementById(e+"_lbl");t&&(t.style.color="#006401"),this.highlightActionBtns(e)},undoHighlightItem(e){const t=document.getElementById(e+"_lbl");t&&(t.style.color="#636363"),this.undohighlightActionBtns(e)},highlightActionBtns(e){const t=document.getElementsByClassName(e+"_spanlbl");for(let a=0;a<t.length;a++)t[a].style.display="inline-block"},undohighlightActionBtns(e){const t=document.getElementsByClassName(e+"_spanlbl");for(let a=0;a<t.length;a++)t[a].style.display="none"},asignLblID(e){return e+"_lbl"},asignSpanLblID(e){return e+"_spanlbl"},async removeItemAtIndex(e,t){await st("Do you want to delete it?",t)&&this.$emit("remove-item",e)},editItemAtIndex(e){this.$emit("edit-item",e)},highLightBnd(e){if(e){if(e.highlightbackground!==void 0&&e.highlightbackground==!0)return this.$props.highLightBackground}else return!1}}}),na=["onMousemove","onMouseout"],sa={class:"route-label"};function ia(e,t,a,s,n,r){const i=A("ion-label"),o=A("ion-col"),m=A("ion-row"),c=A("ion-icon");return D(!0),k(ne,null,he(e.localMedicalDrugsList,(h,y)=>(D(),k("div",{id:"df",class:"medication-item",key:y,onMousemove:d=>e.highlightItem(y),onMouseout:d=>e.undoHighlightItem(y)},[l(m,{class:"medication-header"},{default:p(()=>[l(o,{class:K(["ion-text-wrap",e.highLightBnd(h)])},{default:p(()=>[l(i,{id:e.asignLblID(y),class:"medication-name"},{default:p(()=>[R(w(h.drugName),1)]),_:2},1032,["id"])]),_:2},1032,["class"])]),_:2},1024),l(m,{class:"medication-details"},{default:p(()=>[l(o,{size:"10",class:K(["ion-text-wrap details-col",e.highLightBnd(h)])},{default:p(()=>[l(i,{class:"details-text"},{default:p(()=>[R(w(h.dose)+" / "+w(h.frequency)+" / daily / "+w(h.duration)+" / until "+w(h.prescription)+" ",1),f("span",sa,w(h.route_name),1)]),_:2},1024)]),_:2},1032,["class"]),e.show_actions_buttons?(D(),G(o,{key:0,class:K([e.highLightBnd(h),"actions-col"]),size:"2"},{default:p(()=>[l(i,{class:K(["action-button",e.asignSpanLblID(y)]),onClick:d=>e.editItemAtIndex(y)},{default:p(()=>[l(c,{icon:e.iconsContent.edit},null,8,["icon"])]),_:2},1032,["class","onClick"]),l(i,{class:K(["action-button",e.asignSpanLblID(y)]),onClick:d=>e.removeItemAtIndex(y,d)},{default:p(()=>[l(c,{icon:e.iconsContent.delete},null,8,["icon"])]),_:2},1032,["class","onClick"])]),_:2},1032,["class"])):M("",!0)]),_:2},1024)],40,na))),128)}const Qa=j(aa,[["render",ia],["__scopeId","data-v-01c693a3"]]),oa={key:0,class:"custom-allergy-container"},ra={class:"button-group"},la=q({watch:{},name:"AllergiesComponent"}),ca=q({...la,setup(e){const t=it(),a=H(),s=W(()=>t.selectedMedicalAllergiesList),n=W(()=>a.patient),r=W(()=>t.medicalAllergiesList),i=F(v(8,"item-")),o=F(""),m=F(!1),c=[{multi_Selection:!0,show_list_label:!0,unqueId:i.value,name_of_list:"Add/Remove allergies",placeHolder:"Search for an allergy",items:[],listUpdatedFN:d,listFilteredFN:()=>{},searchTextFN:N,use_internal_filter:!0,show_error:F(!1),error_message:"please select a User",disabled:F(!1)}],h=F(!1);pe(async()=>{y()});const y=()=>{t.current_patient.ID!=n.value.ID&&(t.clearSelectedMedicalAllergiesList(),t.setCurrentPatient(n.value))};function d(u){u.forEach(g=>{g.selected==!0&&g.name==="Other"&&(m.value=g.name==="Other"),g.selected==!1&&g.name==="Other"&&E()}),t.setSelectedMedicalAllergiesList(u),I()}async function N(u){const g=u,S=await Y.getConceptSet("OPD Medication",g);S.map(x=>({label:x.name,value:x.name,other:x}));const O=ot(g),P=rt(O,S).sort((x,$e)=>x.name.localeCompare($e.name));t.setMedicalAllergiesList(P),I()}function I(){const u=r.value;s.value.forEach(S=>{let O=!1;u.forEach((B,P)=>{B.concept_id==S.concept_id&&S.selected===!0&&(u[P]=S,O=!0)}),!O&&S.selected===!0&&u.push(S)});const g=u.filter((S,O,B)=>O===B.findIndex(P=>(P==null?void 0:P.concept_id)===(S==null?void 0:S.concept_id)));t.setMedicalAllergiesList(g)}function v(u=8,g=""){const S="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";let O=g;for(let B=0;B<u;B++)O+=S.charAt(Math.floor(Math.random()*S.length));return O+="-".concat(Date.now()),O}async function L(u){try{const g=u.trim();if(g){const S={name:g,selected:!0,concept_id:v(8,"12"),concept_name_id:v(8,"34")};t.setMedicalAllergiesList([...r.value,S]),t.setSelectedMedicalAllergiesList(S),m.value=!1,h.value=!0,o.value="";const O=t.findSelectedAllergyByName("Other");t.unselectOther(O)}}catch(g){console.error(g)}}const E=()=>{m.value=!1,o.value="",h.value=!1;const u=t.findSelectedAllergyByName("Other");u&&t.unselectOther(u)};return(u,g)=>(D(),G(b(ze),null,{default:p(()=>[l(b(qe),null,{default:p(()=>[l(b(me),{class:"header-container"},{default:p(()=>[l(b(ue),{icon:b(Je),class:"allergy-icon"},null,8,["icon"]),g[3]||(g[3]=f("span",{style:{"font-size":"16px","font-weight":"600"}}," Allergies (Medication, Healthcare items, Environment and Food) ",-1))]),_:1,__:[3]})]),_:1}),l(b(Ge),null,{default:p(()=>[l(lt,{multiSelection:c[0].multi_Selection,show_label:c[0].show_list_label,uniqueId:c[0].unqueId,name_of_list:c[0].name_of_list,choose_place_holder:c[0].placeHolder,"items_-list":r.value,use_internal_filter:c[0].use_internal_filter,disabled:c[0].disabled.value,onItemListUpDated:c[0].listUpdatedFN,onItemListFiltered:c[0].listFilteredFN,onItemSearchText:c[0].searchTextFN},null,8,["multiSelection","show_label","uniqueId","name_of_list","choose_place_holder","items_-list","use_internal_filter","disabled","onItemListUpDated","onItemListFiltered","onItemSearchText"]),m.value?(D(),k("div",oa,[l(b(be),{modelValue:o.value,"onUpdate:modelValue":g[0]||(g[0]=S=>o.value=S),placeholder:"Please specify the allergy",fill:"outline",class:"custom-input"},null,8,["modelValue"]),f("div",ra,[l(b(ge),{onClick:g[1]||(g[1]=S=>L(o.value)),class:"addCustomAllergyBtn"},{default:p(()=>g[4]||(g[4]=[R(" Add Allergy ")])),_:1,__:[4]}),l(b(ge),{onClick:g[2]||(g[2]=S=>E()),fill:"clear",class:"cancelBtn"},{default:p(()=>[l(b(ue),{icon:b(We),slot:"icon-only"},null,8,["icon"])]),_:1})])])):M("",!0)]),_:1})]),_:1}))}}),Ya=j(ca,[["__scopeId","data-v-4de36202"]]);async function Xa(){var e,t,a;try{const s=H(),{patient:n}=X(s),r=ua(),i=JSON.parse(JSON.stringify(n.value));if(r.length>0){(a=(t=(e=i.MedicationOrder)!=null?e:i.MedicationOrder={}).unsaved)!=null||(t.unsaved=[]);const o=i.MedicationOrder.unsaved.findIndex(c=>c.NCD_Drug_Orders);if(o>=0)i.MedicationOrder.unsaved[o].NCD_Drug_Orders=[...i.MedicationOrder.unsaved[o].NCD_Drug_Orders,...r];else{const c={NCD_Drug_Orders:r};i.MedicationOrder.unsaved.push(c)}const m=le();return m.setMedicationRunOutDate(da()),m.clearMedicationDataStores(),te("Drug order(s) has been created"),i}else z("Unable to create drug orders!")}catch(s){z("Unable to create drug orders!")}}function Se(){try{const e=new Date(C.getSessionDate()),a=re().selectedMedicalDrugsList;let s=0;if(a.forEach(c=>{const h=parseInt(c.duration,10);!isNaN(h)&&h>s&&(s=h)}),s<=0)return{date:null,formattedDate:null};const n=new Date(e);n.setDate(e.getDate()+s);const r=String(n.getDate()).padStart(2,"0"),i=String(n.getMonth()+1).padStart(2,"0"),o=n.getFullYear(),m="".concat(r,"/").concat(i,"/").concat(o);return{date:n,formattedDate:m}}catch(e){return console.error("Error calculating OPD medication run out date:",e),{date:null,formattedDate:null}}}function da(){try{const e=new Date(C.getSessionDate()),a=le().selectedNCDMedicationList;let s=0;if(a.forEach(c=>{const h=parseInt(c.duration,10);!isNaN(h)&&h>s&&(s=h)}),s<=0)return{date:null,formattedDate:null};const n=new Date(e);n.setDate(e.getDate()+s);const r=String(n.getDate()).padStart(2,"0"),i=String(n.getMonth()+1).padStart(2,"0"),o=n.getFullYear(),m="".concat(r,"/").concat(i,"/").concat(o);return{date:n,formattedDate:m}}catch(e){return console.error("Error calculating medication run out date:",e),{date:null,formattedDate:null}}}const ua=()=>{const e=le();return e.selectedNCDMedicationList.map(t=>{t.frequency=e.frequency_selections[t.drug_id]||"",t.totalDosage=Object.values(t.dosage).reduce((n,r)=>n+Number(r),0);const a=Pe.getSessionDate(),s=ma(t.drug_id);return{drug_inventory_id:t.drug_id,equivalent_daily_dose:t.totalDosage=="Unknown"?0:t.totalDosage*(s==null?void 0:s.value)||0,start_date:a,auto_expire_date:xe(a,t.duration),units:t.units,instructions:"".concat(t.name," ").concat(t.totalDosage," ").concat(t.units," ").concat((s==null?void 0:s.code)||""," for ").concat(t.duration," days"),dose:pa(t),frequency:(s==null?void 0:s.code)||""}})},pa=e=>e.dose_strength!=null&&e.dose_strength?Math.trunc(e.dose_strength):1;async function ja(){var e,t,a;try{const s=H(),{patient:n}=X(s),r=ha(),i=JSON.parse(JSON.stringify(n.value));if(r.length>0){(a=(t=(e=i.MedicationOrder)!=null?e:i.MedicationOrder={}).unsaved)!=null||(t.unsaved=[]);const o=i.MedicationOrder.unsaved.findIndex(c=>c.NCD_Drug_Orders);if(o>=0)i.MedicationOrder.unsaved[o].NCD_Drug_Orders=[...i.MedicationOrder.unsaved[o].NCD_Drug_Orders,...r];else{const c={NCD_Drug_Orders:r};i.MedicationOrder.unsaved.push(c)}return re().clearSelectedMedicalDrugsList(),te("Drug order(s) has been created"),i}else z("Unable to create drug orders!")}catch(s){z("Unable to create drug orders!")}}const ha=()=>re().selectedMedicalDrugsList.map(t=>{const a=Pe.getSessionDate(),s=J.find(n=>n.label===t.frequency)||{};return{drug_inventory_id:t.drug_id,equivalent_daily_dose:t.dose=="Unknown"?0:t.dose*(s==null?void 0:s.value)||0,start_date:a,auto_expire_date:xe(a,t.duration),units:t.units,instructions:"".concat(t.drugName,": ").concat(t.dose," ").concat(t.units," ").concat((s==null?void 0:s.code)||""," for ").concat(t.duration," days"),dose:t.dose,frequency:(s==null?void 0:s.code)||""}}),ma=e=>{const a=le().selectedNCDMedicationList.find(n=>n.drug_id===e);if(!a||!a.dosage)return null;switch(["morning","afternoon","evening"].reduce((n,r)=>n+(a.dosage[r]?1:0),0)){case 1:return a.dosage.morning?J.find(n=>n.code==="QAM"):a.dosage.afternoon?J.find(n=>n.code==="QNOON"):a.dosage.evening?J.find(n=>n.code==="QPM"):J.find(n=>n.code==="OD");case 2:return J.find(n=>n.code==="BD");case 3:return J.find(n=>n.code==="TDS");default:return J.find(n=>n.code==="Unknown")}},xe=(e,t)=>{const a=new Date(e);return a.setDate(a.getDate()+parseInt(t)),_.toStandardHisFormat(a)},ga=()=>re().nonPharmalogicalTherapyAndOtherNotes,fa=Ce("nonPharmaTherapyStore",{state:()=>({items:[{id:"wound-dressing",label:"Wound dressing",checked:!1},{id:"patient-education",label:"Patient education",checked:!1},{id:"counseling",label:"Counseling",checked:!1},{id:"minor-surgery",label:"Minor Surgery",checked:!1}],current_patient:{}}),actions:{async saveNonPharmaTherapyPatientData(){const e=ct(),t=[];this.items.forEach(s=>{s.checked==!0&&t.push({concept_id:11023,value_text:s.label,obs_datetime:_.toStandardHisFormat(C.getSessionDate()),location_id:e.facilityLocation.code})});const a=ga();a&&t.push({concept_id:2592,obs_datetime:C.getSessionDate(),value_text:a,location_id:e.facilityLocation.code});try{if(t.length>0)return this.clearSelectednonPharmaTherapyStore(),te("Non Pharma Therapy staged successfully!"),await va(t)}catch(s){z("Unable to update Non Pharma Therapy!")}},clearSelectednonPharmaTherapyStore(){this.items.forEach(e=>{e.checked=!1})},setCurrentPatient(e){this.current_patient=e}},persist:!0});async function va(e){var t,a,s;try{const n=H(),{patient:r}=X(n),i=JSON.parse(JSON.stringify(r.value));return(s=(a=(t=i.notes)!=null?t:i.notes={}).unsaved)!=null||(a.unsaved=[]),i.notes.unsaved.push(...e),i}catch(n){z("Unable to create non pharmalogical notes!")}}const Da={class:"checklist-container"},ya=q({watch:{},name:"xxxComponent"}),_a=q({...ya,setup(e){const t=H(),a=W(()=>t.patient),s=fa(),n=s.items;pe(async()=>{r()});const r=()=>{s.current_patient.ID!=a.value.ID&&(s.clearSelectednonPharmaTherapyStore(),s.setCurrentPatient(a.value))};return Ke(()=>a.value,async i=>{}),(i,o)=>(D(),k("div",Da,[(D(!0),k(ne,null,he(b(n),m=>(D(),G(b(ie),{key:m.id,class:"no-border"},{default:p(()=>[l(b(Qe),{id:m.id,modelValue:m.checked,"onUpdate:modelValue":c=>m.checked=c,slot:"start"},null,8,["id","modelValue","onUpdate:modelValue"]),l(b(me),{style:{"font-size":"16px","font-weight":"600"}},{default:p(()=>[R(w(m.label),1)]),_:2},1024)]),_:2},1024))),128))]))}}),Za=j(_a,[["__scopeId","data-v-371e920f"]]),Sa=q({components:{IonContent:Me,IonHeader:we,IonItem:ie,IonList:Oe,IonMenu:Ae,IonTitle:Ie,IonToolbar:ke,BasicInputField:Le,IonDatetime:Xe,IonBadge:Ye,DateInputField:yt,DynamicButton:Ne},props:{showPeripheral:{type:Boolean,default:!0}},setup(e){const t=de(),a=F(0),s=W(()=>t.getDisabledDates()),n=W(()=>t.getAssignedAppointments()),r=F(),i=W(()=>e.showPeripheral);return{disabledDates:s,datesCounts:n,appointment_count:a,calendarOutline:je,inputPRDate:r,show_peripheral:i}},data(){return T(),De(),{iconsContent:oe,date:new Date(C.getSessionDate()),tomorrow:new Date(C.getSessionDate()).getDate()+1,appointment:"",drugRunoutDate:"",nextAppointmentDate:"",minDate:new Date(C.getSessionDate())}},computed:{...Q(T,["nextAppointment","appointmentCountsCache","currentSelectedNextAppointmentDate"]),...Q(de,["maximumNumberOfDaysForEachDay","assignedAppointmentsDates"]),...Q(H,["patient"]),...Q(De,["activeProgram"]),calendarDate(){const e=T();return e.currentSelectedNextAppointmentDate?_.toStandardHisDisplayFormat(e.currentSelectedNextAppointmentDate):""},runOutDate(){var t;const e=T();return((t=this.activeProgram)==null?void 0:t.program_id)===14?Se():e.getAppointmentMedicationRunOutDate()}},watch:{calendarDate:{handler(){this.updateNextAppointment()},deep:!0},"$service.sessionDate":{handler(){this.updateMinDate()},immediate:!0},"patient.ID":{async handler(e,t){e!==t&&(this.cleanCurrentNextAppointmentDate(),this.checkIfSamePatientInContext(),this.clearNextAppointment())}}},async mounted(){this.checkIfSamePatientInContext(),await this.getAppointmentMents(this.runOutDate.date),await ht().loadGlobalProperty(),this.validateAppointmentCountsCache(),await this.preloadAppointmentCounts(),mt();const e=C.getUserID(),t=new Be;this.appointment=new ae(t.getID(),e),this.nextAppointmentDate=this.appointment.date,this.supposedRunOutDate(),window.addEventListener("storage",this.handleStorageChange),Se()},beforeUnmount(){window.removeEventListener("storage",this.handleStorageChange)},methods:{handleStorageChange(e){e.key==="sessionDate"&&this.updateMinDate()},updateMinDate(){this.date=new Date(C.getSessionDate()),this.minDate=new Date(C.getSessionDate())},updateNextAppointment(){T().setNextAppointment(this.calendarDate)},async handleDateUpdate(e){e&&(de().setAssignedAppointmentsDates(e,!0),this.calendarDate=_.toStandardHisDisplayFormat(e),await this.save(),await this.getAppointmentMents(e),await this.updateAppointmentCache(e),T().setCurrentSelectedNextAppointmentDate(e,this.patient.ID))},async getAppointmentMents(e){if(pt().apiStatus)try{const a=await ae.getDailyAppointments(_.toStandardHisFormat(e),_.toStandardHisFormat(e));this.appointment_count=a.length}catch(a){}},getCounter(e){const t=_.toStandardHisFormat(e);return this.appointmentCountsCache[t]||""},async save(){if(this.assignedAppointmentsDates.length>0)try{const t=await new Dt().createOfflineAppointment()}catch(e){}},async openCornfirmModal(e){this.calendarDate=_.toStandardHisDisplayFormat(e),await this.getAppointmentMents(e),dt(ut,{class:"otherVitalsModal"},!0,{message:"Are you sure you want to add this Appointment?"},{cancel:n=>{},confirm:async n=>{n.detail==!0&&await this.handleDateUpdate(e)}})},async handleInput(e){this.inputPRDate=_.toStandardHisDisplayFormat(e),await this.openCornfirmModal(e)},async supposedRunOutDate(){await Ee.getLastDrugsReceived(this.patient.patientID)},async preloadAppointmentCounts(){try{const e=new Date(C.getSessionDate());e.setDate(1);const t=new Date(C.getSessionDate());t.setMonth(t.getMonth()+2),t.setDate(0);try{const a=await ae.getDailyAppointments(_.toStandardHisFormat(e),_.toStandardHisFormat(t)),s=this.filterUniqueAppointments(a),n={};s.forEach(r=>{const i=new Date(r.appointment_date),o=_.toStandardHisFormat(i);n[o]||(n[o]=0),n[o]++}),Object.keys(n).forEach(r=>{this.appointmentCountsCache[r]=n[r]})}catch(a){console.error("Error fetching appointments for date range:",a)}}catch(e){console.error("Error in preload process:",e)}},filterUniqueAppointments(e){const t=new Map;return e.forEach(a=>{const s="".concat(a.given_name,"_").concat(a.family_name,"_").concat(a.birthdate,"_").concat(a.appointment_date);t.has(s)||t.set(s,a)}),Array.from(t.values())},async updateAppointmentCache(e){try{const t=_.toStandardHisFormat(e),a=await ae.getDailyAppointments(_.toStandardHisFormat(e),_.toStandardHisFormat(e));this.appointmentCountsCache[t]=a.length}catch(t){console.error("Error updating appointment cache:",t)}},validateAppointmentCountsCache(){T().checkCurrentLocationIfInContext()},isRunOutDate(e){return!this.runOutDate||!this.runOutDate.date?!1:_.toStandardHisFormat(e)===_.toStandardHisFormat(this.runOutDate.date)},cleanCurrentNextAppointmentDate(){T().cleanCurrentSelectedNextAppointmentDate()},checkIfSamePatientInContext(){const e=T();e.current_patient.ID!=this.patient.ID&&(this.cleanCurrentNextAppointmentDate(),e.setCurrentPatient(this.patient))},clearNextAppointment(){T().clearAppointmentMedicationRunOutDate()}}}),Ca={class:"card_content"},ba={class:"count-badge"},ka={class:"dates_title"},Ia={class:"sub_data"},Aa={class:"dates_title"},Oa={class:"sub_data"},wa={class:"dates_title"},Ma={class:"sub_data"},Na={class:"dates_title"},La={class:"sub_data"};function Ea(e,t,a,s,n,r){const i=A("VueDatePicker"),o=A("ion-col"),m=A("DynamicButton"),c=A("ion-item"),h=A("ion-row"),y=A("DateInputField");return D(),k("div",Ca,[l(h,null,{default:p(()=>[l(o,{"size-sm":"12","size-md":"12","size-lg":"12","size-xl":"8"},{default:p(()=>[l(i,{class:"calender",onDateUpdate:e.openCornfirmModal,inline:"","auto-apply":"","enable-time-picker":!1,"disabled-dates":e.disabledDates,"min-date":e.minDate,modelValue:e.runOutDate.date,"onUpdate:modelValue":t[0]||(t[0]=d=>e.runOutDate.date=d)},{day:p(({day:d,date:N})=>[(D(),k("p",{key:0,class:K({"run-out-date":e.isRunOutDate(N)}),style:{"font-weight":"600","font-size":"20px"}},[f("span",null,[R(w(d),1),f("sup",ba,w(e.getCounter(N)),1)])],2))]),_:1},8,["onDateUpdate","disabled-dates","min-date","modelValue"])]),_:1}),e.show_peripheral?(D(),G(o,{key:0},{default:p(()=>[l(c,null,{default:p(()=>[f("div",ka,[t[3]||(t[3]=f("div",null,[R("Suggested Next Appointment Date "),f("span",{style:{"font-size":"16px"}},"(Medication run out date)")],-1)),f("div",Ia,[R(w(e.runOutDate.formattedDate||"No run out date available")+" ",1),e.runOutDate.formattedDate?(D(),G(m,{key:0,onClick:t[1]||(t[1]=d=>e.handleDateUpdate(e.runOutDate.date)),name:"Set Next Appt.",fill:"solid",iconSlot:"icon-only",style:{float:"right"}})):M("",!0)])])]),_:1}),l(c,null,{default:p(()=>[f("div",Aa,[t[4]||(t[4]=f("div",null,"User set appointment date",-1)),f("div",Oa,w(e.calendarDate),1)])]),_:1}),l(c,null,{default:p(()=>[f("div",wa,[t[5]||(t[5]=f("div",null,"Appointments",-1)),f("div",Ma,w(e.appointment_count),1)])]),_:1}),l(c,null,{default:p(()=>[f("div",Na,[t[6]||(t[6]=f("div",null,"Appointment limit (per/day)",-1)),f("div",La,w(e.appointment_count)+"/"+w(e.maximumNumberOfDaysForEachDay),1)])]),_:1})]),_:1})):M("",!0)]),_:1}),e.show_peripheral?(D(),G(h,{key:0},{default:p(()=>[l(o,{size:"4"},{default:p(()=>[l(y,{inputHeader:"Preferred Next Appointment Date",bold:"600",fontSize:"17px",placeholderFontSize:"17px",placeholderFontWeight:"600",unit:"",icon:e.calendarOutline,placeholder:"press to select date",iconRight:"",inputWidth:"100%",inputValue:e.inputPRDate,eventType:"",minDate:e.minDate,maxDate:"",disabled:!1,"onUpdate:rawDateValue":t[2]||(t[2]=d=>e.handleInput(d))},null,8,["icon","inputValue","minDate"])]),_:1})]),_:1})):M("",!0)])}const en=j(Sa,[["render",Ea],["__scopeId","data-v-5d96ce77"]]);export{Ya as A,Qa as D,qa as I,St as L,en as N,_t as P,Ga as T,Ct as _,Wa as a,Za as b,Xa as c,ja as d,Ka as g,Ja as s,fa as u};
