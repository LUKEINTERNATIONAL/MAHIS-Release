import{t as p,l as u,a as D}from"./report_service-7ed26d68.js";import{t as R,_ as b}from"./ReportTable.vue_vue_type_style_index_0_lang-496979b1.js";import{a as E,c as F}from"./tx_report_service-56ef355b.js";import{d as v,r as d,e as y,y as A}from"./vendor-9eb23926.js";import"./index-7f220538.js";import"./lodash-7be49fbd.js";import"./apexcharts-3439491a.js";import"./chartjs-dbb1895b.js";import"./barcode-qrcode-reader-48918f31.js";import"./age_groups-8203d13f.js";const S=v({__name:"TxTB",setup(B){const s=d("-"),i=d([]),o=new E,m=[{path:"ageGroup",label:"Age group"},{path:"gender",label:"Gender",formatter:p},...R(F)];function w(e){const t={M:{rows:[],aggregate:{}},F:{rows:[],aggregate:{}}};return Object.entries(e).forEach(([r,a])=>{r!=="Unknown"&&Object.entries(a).forEach(([h,l])=>{const n=h;t[n].rows.push({ageGroup:r,gender:n,...l}),Object.entries(l).forEach(([g,T])=>{var c;t[n].aggregate[g]=[...(c=t[n].aggregate[g])!=null?c:[],...T]})})}),t}async function f({dateRange:e},t){try{await u.show(),o.setStartDate(e.startDate),o.setEndDate(e.endDate),s.value=o.getDateIntervalPeriod();const r=await o.getTxTbReport(t),a=w(r);i.value=[...a.F.rows,...a.M.rows,{ageGroup:"All",gender:"Male",...a.M.aggregate},...await o.buildMaternityAgreggateRows(a.F.aggregate)]}catch(r){D("ERROR! Unable to load report data"),console.error(r)}await u.hide()}function _(e){return"".concat(e.column.label," | ").concat(e.row.ageGroup," | ").concat(p(e.row.gender),"s")}return(e,t)=>(y(),A(b,{title:"PEPFAR TX TB Report","report-type":"PEPFAR",columns:m,rows:i.value,period:s.value,"drill-title":_,useDateRangeFilter:"",showIndices:"",onGenerate:f},null,8,["rows","period"]))}});export{S as default};
