System.register(["./index-legacy-D_aS-AxN.js","./vendor-legacy-IknIjA4f.js","./lodash-legacy-pOOc9Efu.js"],function(e,l){"use strict";var a,n,o,r,t,i,d,s,u,c,v,p,m,_,g,y,f,h,b,k,w,S,C,$,x,P,D,U,L,j,E,B,F,I,A,J,V;return{setters:[e=>{a=e.S,n=e.H,o=e.U,r=e.t,t=e._},e=>{i=e.d,d=e.r,s=e.c,u=e.a,c=e.e,v=e.f,p=e.k,m=e.l,_=e.A,g=e.B,y=e.u,f=e.z,h=e.W,b=e.I,k=e.be,w=e.D,S=e.G,C=e.S,$=e.U,x=e.T,P=e.aU,D=e.a8,U=e.b9,L=e.a9,j=e.ac,E=e.F,B=e.L,F=e.y,I=e.p,A=e.m,J=e.bg,V=e.b8},null],execute:function(){var l=document.createElement("style");l.textContent=".selected-provider[data-v-1c797ade]{--background: rgba(var(--ion-color-primary-rgb), .1);--border-color: var(--ion-color-primary)}.selected-provider ion-label[data-v-1c797ade]{color:var(--ion-color-primary)}.full-modal[data-v-1c797ade]{--height: 80vh;--min-height: 500px;--max-height: 90vh;--width: 80%;--border-radius: 8px}.full-modal ion-content[data-v-1c797ade]{--padding-top: 0;--padding-bottom: 0}\n/*$vite$:1*/",document.head.appendChild(l),e("i",async e=>{const l=await H();return!l.length||l.some(l=>l.toLowerCase()===`${e}`.toLowerCase())}),e("a",async e=>{const l=await M();return!l.length||l.some(l=>l.toLowerCase()===`${e}`.toLowerCase())});const H=async()=>{try{return(await a.getJson("user_properties",{property:"ART_Admin_assigned_activities"})).property_value.split(",")}catch(e){return[]}},M=async()=>{try{return(await a.getJson("user_properties",{property:"activities"})).property_value.split(",")}catch(e){return[]}},O={style:{border:"1px dashed #ccc"}},R={class:"ion-padding"},T={key:0},z={key:1};e("P",t(i({__name:"ProviderFormOption",setup(e,{expose:l}){const a=d(""),t=d(null),i=d([]),H=d(!1),M=s(()=>{if(""===a.value.trim())return i.value;const e=a.value.trim().replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),l=new RegExp(e.split("\\s+").join(".*"),"i");return i.value.filter(e=>{const a=`${e.name} ${e.role}`.toLowerCase();return l.test(a)})}),G=()=>{H.value=!0,0===i.value.length&&o.getUsers().then(e=>{i.value=e.results.map(e=>{var l,a,n,o;return{id:e.person_id,name:`${null!==(l=null==e||null===(a=e.person)||void 0===a||null===(a=a.names)||void 0===a||null===(a=a[0])||void 0===a?void 0:a.given_name)&&void 0!==l?l:"Unknown"} ${null!==(n=null==e||null===(o=e.person)||void 0===o||null===(o=o.names)||void 0===o||null===(o=o[0])||void 0===o?void 0:o.family_name)&&void 0!==n?n:"Unknown"} (${e.username})`,role:e.roles.map(e=>e.role).join(", ")}})}).catch(e=>{r("Failed to fetch providers. Please try again later."),console.error("Error fetching providers:",e)})},N=()=>{H.value=!1};return l({selectedProvider:t,isProviderSelected:()=>null!==t.value,openModal:G,closeModal:N}),u(()=>{sessionStorage.removeItem("selectedBDEProvider")}),(e,l)=>(v(),c(E,null,[p("div",O,[p("span",R,[l[1]||(l[1]=_("Backdata date: ")),p("b",null,g(y(n).toStandardHisDisplayFormat(y(o).getSessionDate())),1)]),m(y(S),{lines:"none"},{default:f(()=>[m(y(h),{onClick:G},{default:f(()=>[m(y(b),{icon:y(k)},null,8,["icon"]),l[2]||(l[2]=p("b",null,"Select provider",-1))]),_:1,__:[2]}),m(y(w),{slot:"end"},{default:f(()=>[t.value?(v(),c("b",z,g(t.value.name),1)):(v(),c("b",T,"Provider not selected"))]),_:1})]),_:1})]),m(y(V),{class:"full-modal","is-open":H.value,onDidDismiss:N},{default:f(()=>[m(y(C),null,{default:f(()=>[m(y($),null,{default:f(()=>[m(y(x),null,{default:f(()=>l[3]||(l[3]=[_("Select Provider")])),_:1,__:[3]}),m(y(P),{slot:"end"},{default:f(()=>[m(y(h),{onClick:N},{default:f(()=>[m(y(b),{icon:y(D)},null,8,["icon"])]),_:1})]),_:1})]),_:1}),m(y($),{color:"light"},{default:f(()=>[m(y(U),{modelValue:a.value,"onUpdate:modelValue":l[0]||(l[0]=e=>a.value=e),placeholder:"Search providers...",debounce:300},null,8,["modelValue"])]),_:1})]),_:1}),m(y(L),{class:"ion-padding"},{default:f(()=>[m(y(j),null,{default:f(()=>[(v(!0),c(E,null,B(M.value,e=>{var l;return v(),F(y(S),{key:e.id,button:"",onClick:l=>(e=>{t.value=e,a.value="",sessionStorage.setItem("selectedBDEProvider",JSON.stringify(e)),N()})(e),class:I({"selected-provider":(null===(l=t.value)||void 0===l?void 0:l.name)===e.name})},{default:f(()=>{var l;return[m(y(w),null,{default:f(()=>[p("h3",null,g(e.name),1),p("p",null,g(e.role),1)]),_:2},1024),(null===(l=t.value)||void 0===l?void 0:l.name)===e.name?(v(),F(y(b),{key:0,icon:y(J),slot:"end",color:"primary"},null,8,["icon"])):A("",!0)]}),_:2},1032,["onClick","class"])}),128))]),_:1})]),_:1})]),_:1},8,["is-open"])],64))}}),[["__scopeId","data-v-1c797ade"]]))}}});
