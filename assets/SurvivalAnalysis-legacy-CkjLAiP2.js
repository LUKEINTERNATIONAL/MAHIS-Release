!function(){function e(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var a=r.call(e,t||"default");if("object"!=typeof a)return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}System.register(["./index-legacy-CqYulF5U.js","./lodash-legacy-pOOc9Efu.js","./vendor-legacy-aFxqAHge.js","./apexcharts-legacy-Drh6JTfI.js"],function(t,r){"use strict";var a,l,n,u,o,i,s,p,v,c;return{setters:[e=>{a=e.bT,l=e.bR,n=e.av,u=e.au},e=>{o=e.l},e=>{i=e.d,s=e.r,p=e.c,v=e.y,c=e.f},null],execute:function(){var r=(e=>(e.GENERAL="General",e.CHILDREN="Children",e.WOMEN="Women",e))(r||{});class d extends a{constructor(){super(),e(this,"ageGroup",void 0),e(this,"quarter",void 0),e(this,"regenerate",void 0),this.quarter="",this.regenerate=!1,this.ageGroup="General"}setRegenerate(e){this.regenerate=e}getAgeGroup(){return this.ageGroup}setQuarter(e){this.quarter=e}setAgeGroup(e){this.ageGroup=e}async generateReport(){return this.reportBuilder(await this.getReport("cohort_survival_analysis",{quarter:this.quarter,regenerate:this.regenerate,age_group:this.ageGroup}))}getOutcomeInterval(e){const t=Object.values(e)[0];if(!t)return null;const r=Object.keys(t)[0];return parseInt(r,10)}reportBuilder(e){return Object.entries(null!=e?e:{}).reduce((e,[t,r])=>{if(!o.isEmpty(r)){const a=this.getOutcomeInterval(r),l=o.get(r,`On antiretrovirals.${a}`,0),n=o.get(r,`Patient died.${a}`,0),u=o.get(r,`Defaulted.${a}`,0),i=o.get(r,`Treatment stopped.${a}`,0),s=o.get(r,`Patient transferred out.${a}`,0),p=o.get(r,`N/A.${a}`,0),v=l+n+u+i+s+p;e.push({totalConfirmed:"",subGroup:this.ageGroup,quarter:t,interval:a,alive:l,died:n,defaulted:u,stopped:i,transferred:s,unknown:p,total:v})}return e},[])}}t("default",i({__name:"SurvivalAnalysis",setup(e){const t=s(),a=s(),o=s([]),i=s("MoH Survival Analysis Report"),g=[{path:"quarter",label:"Reg Cohort",initialSort:!0,initialSortOrder:"asc",preSort:e=>parseInt(e.split(" ")[1])},{path:"interval",label:"Interval (Months)"},{path:"subGroup",label:"Sub group"},{path:"total",label:"Total Reg (database)"},{path:"totalConfirmed",label:"Total Reg (Confirmed)"},{path:"alive",label:"Alive"},{path:"died",label:"Died"},{path:"defaulted",label:"Defaulted"},{path:"stopped",label:"Stopped"},{path:"transferred",label:"Transferred out"},{path:"unknown",label:"Unknown"}],h=p(()=>[{id:"ageGroup",type:"select",label:"Sub Group:",value:a.value,options:Object.values(r).map(e=>({label:e.match(/Women/i)?"Option B+":e,value:e}))}]);async function f({quarter:e,ageGroup:t},r=!1){await n.show();try{const a=new d;a.setRegenerate(r),a.setQuarter(e.value),a.setAgeGroup(t.value),o.value=await a.generateReport(),i.value=`MoH Survival Analysis (${t.value}) Report`}catch(a){u("Unable to load report data"),console.error(a)}await n.hide()}return(e,r)=>(c(),v(l,{title:"MoH Survival Analysis Report","report-type":"MoH",columns:g,rows:o.value,quarter:t.value,useQuarterFilter:"","use-secure-export":"","custom-filters":h.value,filename:i.value,onGenerate:f},null,8,["rows","quarter","custom-filters","filename"]))}}))}}})}();
