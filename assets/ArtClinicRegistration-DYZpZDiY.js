var re=Object.defineProperty;var ie=(m,b,l)=>b in m?re(m,b,{enumerable:!0,configurable:!0,writable:!0,value:l}):m[b]=l;var w=(m,b,l)=>ie(m,typeof b!="symbol"?b+"":b,l);import{A as P}from"./app_encounter_service-Btkwsnyb.js";import{I as le,Q as H,S as ne,P as W,i as oe,aV as ue,B as S,a8 as $,cp as se,aj as _e,u as de,a0 as ve,j as M,l as B,t as ce,_ as me}from"./index-BwanHY4k.js";import{g as j}from"./LocationFieldOptions-DuMgXBFL.js";import{S as G}from"./SelectFacility-gB_sVgc9.js";import{d as fe,r as T,y as d,f as v,z as o,l as s,u,aY as pe,bm as be,m as c,aa as V,ab as g,D,A as f,k as C,B as p,d6 as A,a$ as ge,O as N}from"./vendor--FxeD1z3.js";import he from"./Staging-CCHuKu5Z.js";import{P as ye}from"./patient_registration_service-CWQz2N5U.js";import{V as we}from"./vitals_service-DNONUhQB.js";import{B as I}from"./BasicYesNoSelect-C_-ABarn.js";import{B as ke}from"./BasicRadioSelect-Lo-PfOaU.js";import"./lodash-Dt8AsbQm.js";class Ve extends P{constructor(b,l){super(b,9,l)}}class De extends P{constructor(l,_){super(l,9,_);w(this,"registration");w(this,"computeFollowupAgreements",async l=>({tag:"reg",obs:await this.registration.buildValueCoded("Agrees to followup",l.value)}));w(this,"computeHTCSerialNumber",async l=>({tag:"reg",obs:await this.registration.buildValueText("HTC Serial number",l.value)}));w(this,"computeEverReceivedART",async({value:l})=>({tag:"reg",obs:await this.registration.buildValueCoded("Ever received ART",l)}));w(this,"computeARTLastTakenDate",async(l,_)=>({date:l,tag:"reg",isEstimate:_,obs:await this.buildDateObs("Date ART last taken",l,_)}));w(this,"computeARTInitiationLocation",async({label:l})=>({tag:"reg",obs:await this.registration.buildValueText("Location of ART initiation",l)}));w(this,"computeARTNumberAtPreviousLocation",async l=>({tag:"reg",obs:await this.registration.buildValueText("ART number at previous location",l.value)}));w(this,"computeHasTransferLetter",async({value:l})=>({tag:"reg",obs:await this.registration.buildValueCoded("Has transfer letter",l)}));w(this,"computeConfirmatoryHIVTestType",async({value:l})=>({tag:"reg",obs:await this.registration.buildValueCoded("Confirmatory hiv test type",l)}));w(this,"computeConfirmatoryHIVTestLocation",async l=>({tag:"reg",obs:await this.registration.buildValueText("Confirmatory HIV test location",l.label)}));w(this,"computeConfirmatoryHIVTestDate",async(l,_)=>({date:l,tag:"reg",isEstimate:_,obs:await this.buildDateObs("Confirmatory HIV test date",l,_)}));w(this,"computeARTRegistrationDate",async(l,_)=>({date:l,tag:"reg",isEstimate:_,obs:await this.buildDateObs("ART initiation date",l,_)}));w(this,"computeARTStartDate",async(l,_)=>({date:l,tag:"reg",isEstimate:_,obs:await this.buildDateObs("Contact date ART started",l,_)}));w(this,"computeInitialWeight",async l=>({tag:"reg",obs:await K(await this.registration.buildValueNumber("weight",l,null,null))}));w(this,"computeInitialHeight",async l=>({tag:"reg",obs:await K(await this.registration.buildValueNumber("height",l,null,null))}));w(this,"computeTBStatus",async l=>{const _=le();return{tag:"reg",obs:{concept_id:await P.getConceptID("TB treatment start date"),value_datetime:H.getSessionDate(),obs_datetime:H.getSessionDate(),providerID:ne.getUserID(),programID:H.getProgramID(),location_id:_.facilityLocation.code,value_coded:await P.getConceptID(l)}}});w(this,"buildDateObs",async(l,_,q)=>/unknown/i.test(_)?this.buildValueText(l,"Unknown"):q?this.buildValueDateEstimated(l,_):await this.buildValueDate(l,_));this.registration=new Ve(l,_)}async onSubmit(l){const _=await this.registration.createEncounter();if(!_)throw new Error("Failed to create encounter");this.encounterID=_.encounter_id,this.saveObservationList(l)}}function K(m){return console.log("fixValueNumericStructureInPlace",m),m.value_numeric.value&&(m.value_numeric=m.value_numeric.value),m}const Ce={B:0,F:1,G:2,H:3,J:4,P:5,V:6,W:7,X:8,Z:9},Ae=[[0,3,1,7,5,9,8,6,4,2],[7,0,9,2,1,5,4,8,6,3],[4,2,0,6,8,7,1,3,5,9],[1,7,5,0,9,8,3,4,2,6],[6,1,2,3,0,4,5,9,7,8],[3,6,7,4,2,0,9,5,8,1],[5,8,6,9,7,2,0,1,3,4],[8,9,4,5,3,6,2,0,1,7],[9,4,3,8,6,1,7,2,0,5],[2,5,8,1,4,3,6,7,9,0]];function J(m,b){const l=b-"".concat(m).length;return l<=0?"".concat(m):"".concat(Array.from({length:l}).map(()=>0).join("")).concat(m)}function qe(m){m.match(/^\d+$/)||(m=m.replace(/\D/g,""));let b=0;for(let l=0;l<m.length;l++){let _=m.charAt(l);b=Ae[b][_]}return"".concat(b)}function Ie(m){const[b,l,_,q]=m.split("-");if(!(b&&l&&_&&q))return!1;const t=J(parseInt(l),3),U=J(parseInt(_),2),r=Ce[q.toUpperCase()],O="".concat(b,"-").concat(t,"-").concat(U);return qe(O)==="".concat(r)}const Te=fe({__name:"ArtClinicRegistration",setup(m,{expose:b}){const l=new W,_=new De(l.getID(),-1),q=T(),t=T({phone_followup:"",phone_number:"",home_visit_followup:"",has_linkage:"",linkage_number:"",received_arvs:"",date_last_taken_arvs:"",taken_last_two_months:"",taken_last_two_weeks:"",ever_registered_at_art_clinic:"",location_of_art_initialization:"",art_number_at_previous_location:"",confirmatory_hiv_test_type:"",confirmatory_hiv_test_location:"",confirmatory_hiv_test_date:"",has_transfer_letter:"",art_start_date:"",initial_weight:"",initial_height:"",cd4_available:"",cd4_percent:""}),U=T([]),r=T({}),O=T([{dialCode:"265",iso2:"MW",name:"Malawi"}]),z=T({inputHeader:"Phone number *",icon:oe.phone,value:"",name:"phoneNumber",InnerBtn:"",popOverData:{filterData:!1,data:[]}}),n={phone_followup:{label:"Phone followup",required:()=>!0,buildObs:()=>[_.buildValueCoded("Phone",t.value.phone_followup),_.buildValueCoded("Agrees to followup","Phone")],validation:()=>y("phone_followup")},phone_number:{required:()=>t.value.phone_followup==="Yes"&&(!l.getPhoneNumber()||/unknown|n\/a/i.test("".concat(l.getPhoneNumber()))),label:"Phone number",onSubmit:async()=>{try{const a="+".concat(O.value[0].dialCode).concat(t.value.phone_number),e=new ye;e.setPersonID(l.getID()),await e.updatePerson({cell_phone_number:a});const k=de().getPatient();k&&k.personInformation&&(k.personInformation.cell_phone_number=a,await ve(k)),M("Phone number updated successfully")}catch(a){console.error("Error updating phone number:",a),B("Failed to update phone number")}},formatValue:()=>"+".concat(O.value[0].dialCode).concat(t.value.phone_number),onFormUpdate:(a,e)=>{a==="phone_followup"&&e==="No"&&(t.value.phone_number="",r.value.phone_number="")},validation:()=>{r.value.phone_number="";const a=n.phone_number.required();if(a&&!t.value.phone_number){r.value.phone_number="Phone number is required";return}const e=_e.isMWPhoneNumber(n.phone_number.formatValue());a&&typeof e=="string"&&e.length>0&&(r.value.phone_number="Not a valid Malawi phone number")}},home_visit_followup:{label:"Home visit followup",required:()=>!0,buildObs:()=>[_.buildValueCoded("Home visit",t.value.home_visit_followup),_.buildValueCoded("Agrees to followup","Home visit")],validation:()=>y("home_visit_followup")},has_linkage:{label:"Has linkage number",required:()=>!0,validation:()=>y("has_linkage")},linkage_number:{label:"Linkage number",required:()=>t.value.has_linkage==="Yes",onFormUpdate:(a,e)=>{a==="has_linkage"&&e==="Yes"&&(t.value.linkage_number="",r.value.linkage_number="")},buildObs:()=>_.buildValueText("HTC Serial number",t.value.linkage_number),validation:()=>{if(r.value.linkage_number="",y("linkage_number"))try{Ie(t.value.linkage_number)||(r.value.linkage_number="Invalid linkage number")}catch(a){r.value.linkage_number='Invalid linkage number. please follow format "1234-002-01-A" '}}},received_arvs:{label:"Received ARVs",required:()=>!0,buildObs:()=>_.buildValueCoded("Ever received ART",t.value.received_arvs),validation:()=>y("received_arvs")},date_last_taken_arvs:{label:"Date last taken ARVs",required:()=>t.value.received_arvs==="Yes",onFormUpdate:(a,e)=>{a==="received_arvs"&&e==="No"&&(t.value.date_last_taken_arvs="",r.value.date_last_taken_arvs="")},validation:()=>{r.value.date_last_taken_arvs="",y("date_last_taken_arvs")&&F("date_last_taken_arvs")},buildObs:()=>_.buildValueDate("Date ART last taken",t.value.date_last_taken_arvs.standardDate)},ever_registered_at_art_clinic:{label:"Ever registered at ART clinic",required:()=>t.value.received_arvs==="Yes",onFormUpdate:(a,e)=>{a==="received_arvs"&&e==="No"&&(t.value.ever_registered_at_art_clinic="",r.value.ever_registered_at_art_clinic="")},validation:()=>y("ever_registered_at_art_clinic"),buildObs:()=>_.buildValueCoded("Ever registered at ART clinic",t.value.ever_registered_at_art_clinic)},location_of_art_initialization:{label:"Location of ART initialization",required:()=>t.value.ever_registered_at_art_clinic==="Yes",onFormUpdate:(a,e)=>{(a==="received_arvs"&&e==="No"||a==="ever_registered_at_art_clinic"&&e==="No")&&(t.value.location_of_art_initialization="",r.value.location_of_art_initialization="")},buildObs:()=>{var a,e;return _.buildValueText("Location of ART initialization",(e=(a=t.value.location_of_art_initialization)==null?void 0:a.name)!=null?e:t.value.location_of_art_initialization)},validation:()=>y("location_of_art_initialization"),searchFacilities:a=>j(a).then(e=>U.value=e)},art_start_date:{label:"ART start date",required:()=>t.value.ever_registered_at_art_clinic==="Yes",onFormUpdate:(a,e)=>{(a==="received_arvs"&&e==="No"||a==="ever_registered_at_art_clinic"&&e==="No")&&(t.value.art_start_date="",r.value.art_start_date="")},buildObs:()=>x("Date ART started",t.value.art_start_date.standardDate),validation:()=>{r.value.art_start_date="",y("art_start_date")&&F("art_start_date")}},art_number_at_previous_location:{label:"ART number at previous location",required:()=>t.value.ever_registered_at_art_clinic==="Yes",onFormUpdate:(a,e)=>{(a==="received_arvs"&&e==="No"||a==="ever_registered_at_art_clinic"&&e==="No")&&(t.value.art_number_at_previous_location="",r.value.art_number_at_previous_location="")},validation:()=>y("art_number_at_previous_location"),buildObs:()=>{var a,e;return _.buildValueText("ART number at previous location",(e=(a=t.value.art_number_at_previous_location)==null?void 0:a.name)!=null?e:t.value.art_number_at_previous_location)}},has_transfer_letter:{required:()=>t.value.ever_registered_at_art_clinic==="Yes",onFormUpdate:(a,e)=>{(a==="received_arvs"&&e==="No"||a==="ever_registered_at_art_clinic"&&e==="No")&&(t.value.has_transfer_letter="",r.value.has_transfer_letter="")},label:"Has stage information?",validation:()=>y("has_transfer_letter"),buildObs:()=>_.buildValueCoded("Has transfer letter",t.value.has_transfer_letter)},initial_height:{label:"Initial height",required:()=>t.value.has_transfer_letter==="Yes",onFormUpdate:(a,e)=>{(a==="received_arvs"&&e==="No"||a==="has_transfer_letter"&&e==="No")&&(t.value.initial_height="",r.value.initial_height="")},buildVitalsObs:a=>a.buildValueNumber("Height",t.value.initial_height),validation:()=>{r.value.initial_height="",y("initial_height")&&(/^\d+$/i.test("".concat(t.value.initial_height))||(r.value.initial_height="Initial height must be a number"),parseInt(t.value.initial_height)<40&&(r.value.initial_height="Initial height cannot be less than 40"),parseInt(t.value.initial_height)>220&&(r.value.initial_height="Initial height cannot be greater than 220"))}},initial_weight:{label:"Initial weight",required:()=>t.value.has_transfer_letter==="Yes",onFormUpdate:(a,e)=>{(a==="received_arvs"&&e==="No"||a==="has_transfer_letter"&&e==="No")&&(t.value.initial_weight="",r.value.initial_weight="")},buildVitalsObs:a=>a.buildValueNumber("Weight",t.value.initial_weight),validation:()=>{r.value.initial_weight="",y("initial_weight")&&(/^\d{1,3}\.\d{1}$/i.test("".concat(t.value.initial_weight))||(r.value.initial_weight="Initial weight must be a valid decimal number.. i.e. 40.0"),parseInt(t.value.initial_weight)<.5&&(r.value.initial_weight="Initial weight cannot be less than 0.5"),parseInt(t.value.initial_weight)>250&&(r.value.initial_weight="Initial weight cannot be greater than 250"))}},vitals:{onSubmit:async()=>{if(n.initial_height.required()&&n.initial_weight.required()){const a=new we(l.getID(),-1);a.setDate(t.value.art_start_date.standardDate);const e=[n.initial_height.buildVitalsObs(a),n.initial_weight.buildVitalsObs(a)];await a.createEncounter(),await a.saveObservationList(await Promise.all(e))}}},cd4_available:{required:()=>t.value.has_transfer_letter==="Yes",onFormUpdate:(a,e)=>{(a==="received_arvs"&&e==="No"||a==="has_transfer_letter"&&e==="No")&&(t.value.cd4_available="",r.value.cd4_available="")},label:"CD4 available",validation:()=>y("cd4_available")},cd4_percent:{required:()=>t.value.cd4_available==="Yes",onFormUpdate:(a,e)=>{(a==="received_arvs"&&e==="No"||a==="cd4_available"&&e==="No")&&(t.value.cd4_percent="",r.value.cd4_percent="")},label:"CD4 percent",buildObs:()=>_.buildValueNumber("CD4 percent",parseInt(t.value.cd4_percent.substring(1)),"%"),validation:()=>{r.value.cd4_percent="",y("cd4_percent")&&(/^\d+$/i.test("".concat(t.value.cd4_percent))||(r.value.cd4_percent="CD4 percent must be a number"),parseInt(t.value.cd4_percent)<0&&(r.value.cd4_percent="CD4 percent cannot be less than 0"),parseInt(t.value.cd4_percent)>100&&(r.value.cd4_percent="CD4 percent cannot be greater than 100"))}},confirmatory_hiv_test_type:{label:"Confirmatory hiv test type",required:()=>!0,options:()=>[{label:"Rapid antibody test",value:"HIV rapid test"},{label:"DNA PCR",value:"HIV DNA polymerase chain reaction"},{label:"Not done",value:"Not done"}],disableOption:()=>t.value.has_linkage==="Yes"?"Not done":"",buildObs:()=>_.buildValueCoded("Confirmatory hiv test type",t.value.confirmatory_hiv_test_type),validation:()=>{r.value.confirmatory_hiv_test_type="",y("confirmatory_hiv_test_type")&&t.value.confirmatory_hiv_test_type==="Not done"&&t.value.has_linkage==="Yes"&&(r.value.confirmatory_hiv_test_type="Linkage number detected, please select a confirmatory hiv test type")}},confirmatory_hiv_test_location:{label:"Confirmatory hiv test location",required:()=>t.value.confirmatory_hiv_test_type&&t.value.confirmatory_hiv_test_type!=="Not done",onFormUpdate:(a,e)=>{a==="confirmatory_hiv_test_type"&&e==="Not done"&&(t.value.confirmatory_hiv_test_location="",r.value.confirmatory_hiv_test_location="")},validation:()=>y("confirmatory_hiv_test_location"),searchFacilities:a=>j(a).then(e=>U.value=e),buildObs:()=>{var a,e;return _.buildValueText("Confirmatory hiv test location",(e=(a=t.value.confirmatory_hiv_test_location)==null?void 0:a.name)!=null?e:t.value.confirmatory_hiv_test_location)}},confirmatory_hiv_test_date:{label:"Confirmatory hiv test date",required:()=>t.value.confirmatory_hiv_test_type&&t.value.confirmatory_hiv_test_type!=="Not done",confirmFirmWithArtStartDateValue:()=>{var a;return r.value.confirmatory_hiv_test_date="",n.art_start_date.required()&&(a=t.value.confirmatory_hiv_test_date)!=null&&a.standardDate&&N(t.value.confirmatory_hiv_test_date.standardDate).isAfter(N(t.value.art_start_date.standardDate))?(r.value.confirmatory_hiv_test_date="Confirmatory hiv test date cannot be after ART start date",!1):!0},onFormUpdate:(a,e)=>{var i,k,R;if(a==="confirmatory_hiv_test_type"&&e==="Not done"&&(t.value.confirmatory_hiv_test_date="",r.value.confirmatory_hiv_test_date=""),a==="confirmatory_hiv_test_date"){const E=(i=e==null?void 0:e.value)==null?void 0:i.standardDate;if(E){const te=(R=(k=t.value.art_start_date)==null?void 0:k.standardDate)!=null?R:_.getDate(),L=N(te).diff(E,"days");L>=20&&se("Data inconsistency warning","Confirmatory Date for newly initiated ART patient is ".concat(L," days ago"),"Are you sure this is accurate?",[{name:"No, Re-enter date",slot:"start",color:"success"},{name:"Yes, its accurate",slot:"end",color:"danger"}]).then(ae=>{ae==="No, Re-enter date"&&(t.value.confirmatory_hiv_test_date={},r.value.confirmatory_hiv_test_date="Re-enter a valid confirmatory date")})}}(a==="art_start_date"||a==="ever_registered_at_art_clinic")&&n.confirmatory_hiv_test_date.confirmFirmWithArtStartDateValue()},buildObs:()=>x("Confirmatory hiv test date",t.value.confirmatory_hiv_test_date.standardDate),validation:()=>{r.value.confirmatory_hiv_test_date="",y("confirmatory_hiv_test_date")&&(!F("confirmatory_hiv_test_date")||n.confirmatory_hiv_test_date.confirmFirmWithArtStartDateValue())}}};function Q(){return Object.keys(n).reduce((a,e)=>{if(e in n&&typeof n[e].required=="function"&&n[e].required()&&typeof n[e].buildObs=="function"){const i=n[e].buildObs();return Array.isArray(i)?[...a,...i]:[...a,i]}return a},[])}function h(a,e){Y(a),Object.keys(n).forEach(i=>{var k;return((k=n[i])==null?void 0:k.onFormUpdate)&&n[i].onFormUpdate(a,e)})}function y(a){r.value[a]="";const e=n[a],i=e!=null&&e.required?e.required():!1;return i&&!t.value[a]?(r.value[a]="This field is required",!1):i}function F(a){var R;r.value[a]="";const e=typeof t.value[a]=="string"?t.value[a]:(R=t.value[a])==null?void 0:R.standardDate,i=N(e),k=N(W.getSessionDate());return i.isAfter(k)?(r.value[a]="".concat(n[a].label," cannot be in the future"),!1):i.isBefore(N(l.getBirthdate()))?(r.value[a]="".concat(n[a].label," cannot be before birthdate"),!1):!0}function x(a,e,i){let k={};return e.match(/unknown/i)?k=_.buildValueText(a,"Unknown"):k=_.buildValueDate(a,e),k}function Y(a){if(r.value[a]="",typeof n[a].required=="function"&&n[a].required()&&a in t.value&&!t.value[a]){r.value[a]="This field is required";return}typeof n[a].validation=="function"&&n[a].validation()}function X(){return Object.keys(n).forEach(a=>Y(a)),Object.keys(r.value).every(a=>"".concat(r.value[a]).length<=0)}function Z(){const a=Object.keys(n).filter(e=>typeof n[e].onSubmit=="function").map(e=>n[e].onSubmit&&n[e].onSubmit());return Promise.all(a)}async function ee(){const a=t.value.has_transfer_letter==="Yes"?q.value.validateStagingForm():!0,e=X();if(!a||!e)return ce("Please review form for errors"),!1;try{await _.createEncounter();const i=await Promise.all(Q());return await _.onSubmit(i),await Z(),t.value.has_transfer_letter==="Yes"&&!await q.value.onSubmit()?(B("Unable to save Staging information!"),!1):(M("ART Clinic Registration saved successfully"),!0)}catch(i){return console.error(i),B("Error has occured while saving observations"),!1}}return b({onSubmit:ee}),(a,e)=>(v(),d(u(ge),{style:{margin:"0px auto",width:"80%"}},{default:o(()=>[s(u(pe),null,{default:o(()=>[s(u(be),null,{default:o(()=>[s(u(V),null,{default:o(()=>[s(u(g),{size:"12","size-md":"6"},{default:o(()=>[s(I,{required:"",label:"Phone followup?",modelValue:t.value.phone_followup,"onUpdate:modelValue":e[0]||(e[0]=i=>t.value.phone_followup=i),onOnChange:e[1]||(e[1]=i=>h("phone_followup",i)),"error-message":r.value.phone_followup},null,8,["modelValue","error-message"])]),_:1}),s(u(g),{size:"12","size-md":"6"},{default:o(()=>[s(I,{required:"",label:"Home visit followup?",modelValue:t.value.home_visit_followup,"onUpdate:modelValue":e[2]||(e[2]=i=>t.value.home_visit_followup=i),onOnChange:e[3]||(e[3]=i=>h("home_visit_followup",i)),"error-message":r.value.home_visit_followup},null,8,["modelValue","error-message"])]),_:1})]),_:1}),n.phone_number.required()?(v(),d(u(V),{key:0},{default:o(()=>[s(u(g),null,{default:o(()=>[s(u(D),{class:"form-label"},{default:o(()=>[f(p(n.phone_number.label)+" ",1),e[28]||(e[28]=C("span",{style:{color:"red"}},"*",-1))]),_:1,__:[28]}),s(ue,{inputHeader:"",sectionHeaderFontWeight:"20",bold:"",unit:"",input:"input",disabled:!1,icon:z.value.icon,placeholder:"Enter phone",iconRight:"",leftText:"",inputWidth:"100%",inputValue:t.value.phone_number,eventType:"input",p_country:O.value,"onUpdate:phone":e[4]||(e[4]=i=>{t.value.phone_number=i,h("phone_number",i)}),onCountryChanged:()=>null,popOverData:z.value.popOverData,onHandleInnerActionBtnPropetiesFn:e[5]||(e[5]=i=>a.$emit("click:innerBtn",z.value)),InnerActionBtnPropeties:z.value.InnerBtn},null,8,["icon","inputValue","p_country","popOverData","InnerActionBtnPropeties"]),r.value.phone_number?(v(),d(u(A),{key:0,color:"danger"},{default:o(()=>[f(p(r.value.phone_number),1)]),_:1})):c("",!0)]),_:1})]),_:1})):c("",!0),n.has_linkage.required()?(v(),d(u(V),{key:1},{default:o(()=>[s(u(g),null,{default:o(()=>[s(I,{required:"",label:"Has linkage number?",modelValue:t.value.has_linkage,"onUpdate:modelValue":e[6]||(e[6]=i=>t.value.has_linkage=i),onOnChange:e[7]||(e[7]=i=>h("has_linkage",i)),"error-message":r.value.has_linkage},null,8,["modelValue","error-message"])]),_:1})]),_:1})):c("",!0),n.linkage_number.required()?(v(),d(u(V),{key:2},{default:o(()=>[s(u(g),null,{default:o(()=>[s(u(D),{class:"form-label"},{default:o(()=>[f(p(n.linkage_number.label)+" ",1),e[29]||(e[29]=C("span",{style:{color:"red"}},"*",-1))]),_:1,__:[29]}),s(S,{inputHeader:"",placeholder:"e.g 1234-002-01-A",inputValue:t.value.linkage_number,"onUpdate:inputValue":e[8]||(e[8]=i=>{t.value.linkage_number=i.target.value,h("linkage_number",i.target.value)}),error:!!r.value.linkage_number},{end:o(()=>[s(u(D),null,{default:o(()=>e[30]||(e[30]=[f("set_site_prefix")])),_:1,__:[30]})]),_:1},8,["inputValue","error"]),r.value.linkage_number?(v(),d(u(A),{key:0,color:"danger"},{default:o(()=>[f(p(r.value.linkage_number),1)]),_:1})):c("",!0)]),_:1})]),_:1})):c("",!0),n.received_arvs.required()?(v(),d(u(V),{key:3},{default:o(()=>[s(u(g),null,{default:o(()=>[s(I,{required:"",label:"Received ARVs?",modelValue:t.value.received_arvs,"onUpdate:modelValue":e[9]||(e[9]=i=>t.value.received_arvs=i),onOnChange:e[10]||(e[10]=i=>h("received_arvs",i)),"error-message":r.value.received_arvs},null,8,["modelValue","error-message"])]),_:1})]),_:1})):c("",!0),n.date_last_taken_arvs.required()?(v(),d(u(V),{key:4},{default:o(()=>[s(u(g),{size:"12","size-md":"6"},{default:o(()=>[s(u(D),{class:"form-label"},{default:o(()=>[f(p(n.date_last_taken_arvs.label)+" ",1),e[31]||(e[31]=C("span",{style:{color:"red"}},"*",-1))]),_:1,__:[31]}),s($,{place_holder:"",date_prop:t.value.date_last_taken_arvs,onDateUpDated:e[11]||(e[11]=i=>{t.value.date_last_taken_arvs=i,h("date_last_taken_arvs",i)}),error:!!r.value.date_last_taken_arvs},null,8,["date_prop","error"]),r.value.date_last_taken_arvs?(v(),d(u(A),{key:0,color:"danger"},{default:o(()=>[f(p(r.value.date_last_taken_arvs),1)]),_:1})):c("",!0)]),_:1})]),_:1})):c("",!0),n.ever_registered_at_art_clinic.required()?(v(),d(u(V),{key:5},{default:o(()=>[s(u(g),null,{default:o(()=>[s(I,{required:"",label:"Ever registered at ART clinic?",modelValue:t.value.ever_registered_at_art_clinic,"onUpdate:modelValue":e[12]||(e[12]=i=>t.value.ever_registered_at_art_clinic=i),onOnChange:e[13]||(e[13]=i=>h("ever_registered_at_art_clinic",i)),"error-message":r.value.ever_registered_at_art_clinic},null,8,["modelValue","error-message"])]),_:1})]),_:1})):c("",!0),n.location_of_art_initialization.required()?(v(),d(u(V),{key:6},{default:o(()=>[s(u(g),{size:"12","size-md":"6"},{default:o(()=>[s(u(D),{class:"form-label"},{default:o(()=>[f(p(n.location_of_art_initialization.label)+" ",1),e[32]||(e[32]=C("span",{style:{color:"red"}},"*",-1))]),_:1,__:[32]}),s(G,{show_error:!!r.value.location_of_art_initialization,selected_district_ids:[],selected_location:t.value.location_of_art_initialization,onFacilitySelected:e[14]||(e[14]=i=>{t.value.location_of_art_initialization=i.selected_location,h("location_of_art_initialization",i.selected_location)})},null,8,["show_error","selected_location"]),r.value.location_of_art_initialization?(v(),d(u(A),{key:0,color:"danger"},{default:o(()=>[f(p(r.value.location_of_art_initialization),1)]),_:1})):c("",!0)]),_:1}),n.art_number_at_previous_location.required()?(v(),d(u(g),{key:0,size:"12","size-md":"6"},{default:o(()=>[s(u(D),{class:"form-label"},{default:o(()=>[f(p(n.art_number_at_previous_location.label)+" ",1),e[33]||(e[33]=C("span",{style:{color:"red"}},"*",-1))]),_:1,__:[33]}),s(S,{inputHeader:"",placeholder:"Enter previous ART number",inputValue:t.value.art_number_at_previous_location,"onUpdate:inputValue":e[15]||(e[15]=i=>{t.value.art_number_at_previous_location=i.target.value,h("art_number_at_previous_location",i.target.value)}),error:!!r.value.art_number_at_previous_location},null,8,["inputValue","error"]),r.value.art_number_at_previous_location?(v(),d(u(A),{key:0,color:"danger"},{default:o(()=>[f(p(r.value.art_number_at_previous_location),1)]),_:1})):c("",!0)]),_:1})):c("",!0)]),_:1})):c("",!0),n.art_start_date.required()?(v(),d(u(V),{key:7},{default:o(()=>[s(u(g),{size:"12","size-md":"6"},{default:o(()=>[s(u(D),{class:"form-label"},{default:o(()=>[f(p(n.art_start_date.label)+" ",1),e[34]||(e[34]=C("span",{style:{color:"red"}},"*",-1))]),_:1,__:[34]}),s($,{place_holder:n.art_start_date.label+(n.art_start_date.required()?"*":""),date_prop:t.value.art_start_date,onDateUpDated:e[16]||(e[16]=i=>{t.value.art_start_date=i,h("art_start_date",i)}),error:!!r.value.art_start_date},null,8,["place_holder","date_prop","error"]),r.value.art_start_date?(v(),d(u(A),{key:0,color:"danger"},{default:o(()=>[f(p(r.value.art_start_date),1)]),_:1})):c("",!0)]),_:1})]),_:1})):c("",!0),n.has_transfer_letter.required()?(v(),d(u(V),{key:8},{default:o(()=>[s(u(g),null,{default:o(()=>[s(I,{required:"",label:"Has transfer letter?",modelValue:t.value.has_transfer_letter,"onUpdate:modelValue":e[17]||(e[17]=i=>t.value.has_transfer_letter=i),onOnChange:e[18]||(e[18]=i=>h("has_transfer_letter",i)),"error-message":r.value.has_transfer_letter},null,8,["modelValue","error-message"])]),_:1})]),_:1})):c("",!0),s(u(V),null,{default:o(()=>[n.initial_weight.required()?(v(),d(u(g),{key:0,size:"12","size-md":"6"},{default:o(()=>[s(u(D),{class:"form-label"},{default:o(()=>[f(p(n.initial_weight.label)+" ",1),e[35]||(e[35]=C("span",{style:{color:"red"}},"*",-1))]),_:1,__:[35]}),s(S,{inputHeader:"",placeholder:"1",inputType:"number",inputValue:t.value.initial_weight,"onUpdate:inputValue":e[19]||(e[19]=i=>{t.value.initial_weight=i.target.value,h("initial_weight",i.target.value)}),error:!!r.value.initial_weight,unit:"KG"},null,8,["inputValue","error"]),r.value.initial_weight?(v(),d(u(A),{key:0,color:"danger"},{default:o(()=>[f(p(r.value.initial_weight),1)]),_:1})):c("",!0)]),_:1})):c("",!0),n.initial_height.required()?(v(),d(u(g),{key:1,size:"12","size-md":"6"},{default:o(()=>[s(u(D),{class:"form-label"},{default:o(()=>[f(p(n.initial_height.label)+" ",1),e[36]||(e[36]=C("span",{style:{color:"red"}},"*",-1))]),_:1,__:[36]}),s(S,{inputHeader:"",placeholder:"1",inputType:"number",inputValue:t.value.initial_height,"onUpdate:inputValue":e[20]||(e[20]=i=>{t.value.initial_height=i.target.value,h("initial_height",i.target.value)}),error:!!r.value.initial_height,unit:"CM"},null,8,["inputValue","error"]),r.value.initial_height?(v(),d(u(A),{key:0,color:"danger"},{default:o(()=>[f(p(r.value.initial_height),1)]),_:1})):c("",!0)]),_:1})):c("",!0)]),_:1}),t.value.has_transfer_letter==="Yes"?(v(),d(u(V),{key:9},{default:o(()=>[s(u(g),null,{default:o(()=>[(v(),d(he,{key:t.value.art_start_date,date:t.value.art_start_date,ref_key:"stagingRef",ref:q},null,8,["date"]))]),_:1})]),_:1})):c("",!0),n.cd4_available.required()?(v(),d(u(V),{key:10},{default:o(()=>[s(u(g),null,{default:o(()=>[s(I,{required:"",label:"CD4 available?",modelValue:t.value.cd4_available,"onUpdate:modelValue":e[21]||(e[21]=i=>t.value.cd4_available=i),onOnChange:e[22]||(e[22]=i=>h("cd4_available",i)),"error-message":r.value.cd4_available},null,8,["modelValue","error-message"])]),_:1})]),_:1})):c("",!0),n.cd4_percent.required()?(v(),d(u(V),{key:11},{default:o(()=>[s(u(g),null,{default:o(()=>[s(u(D),{class:"form-label"},{default:o(()=>[f(p(n.cd4_percent.label)+" ",1),e[37]||(e[37]=C("span",{style:{color:"red"}},"*",-1))]),_:1,__:[37]}),s(S,{inputHeader:"",placeholder:"Enter CD4 percent",inputType:"number",inputValue:t.value.cd4_percent,"onUpdate:inputValue":e[23]||(e[23]=i=>{t.value.cd4_percent=i.target.value,h("cd4_percent",i.target.value)}),error:!!r.value.cd4_percent,unit:"%"},null,8,["inputValue","error"]),r.value.cd4_percent?(v(),d(u(A),{key:0,color:"danger"},{default:o(()=>[f(p(r.value.cd4_percent),1)]),_:1})):c("",!0)]),_:1})]),_:1})):c("",!0),n.confirmatory_hiv_test_type.required()?(v(),d(u(V),{key:12},{default:o(()=>[s(u(g),null,{default:o(()=>[s(ke,{required:"",label:"Confirmatory hiv test type",modelValue:t.value.confirmatory_hiv_test_type,"onUpdate:modelValue":[e[24]||(e[24]=i=>t.value.confirmatory_hiv_test_type=i),e[25]||(e[25]=i=>h("confirmatory_hiv_test_type",i))],options:n.confirmatory_hiv_test_type.options(),"disable-value":n.confirmatory_hiv_test_type.disableOption(),"error-message":r.value.confirmatory_hiv_test_type},null,8,["modelValue","options","disable-value","error-message"])]),_:1})]),_:1})):c("",!0),n.confirmatory_hiv_test_location.required()?(v(),d(u(V),{key:13},{default:o(()=>[s(u(g),{size:"12","size-md":"6"},{default:o(()=>[s(u(D),{class:"form-label"},{default:o(()=>[f(p(n.confirmatory_hiv_test_location.label)+" ",1),e[38]||(e[38]=C("span",{style:{color:"red"}},"*",-1))]),_:1,__:[38]}),s(G,{show_error:!!r.value.confirmatory_hiv_test_location,selected_district_ids:[],selected_location:t.value.confirmatory_hiv_test_location,onFacilitySelected:e[26]||(e[26]=i=>{t.value.confirmatory_hiv_test_location=i.selected_location,h("confirmatory_hiv_test_location",i.selected_location)})},null,8,["show_error","selected_location"]),r.value.confirmatory_hiv_test_location?(v(),d(u(A),{key:0,color:"danger"},{default:o(()=>[f(p(r.value.confirmatory_hiv_test_location),1)]),_:1})):c("",!0)]),_:1}),n.confirmatory_hiv_test_date.required()?(v(),d(u(g),{key:0,size:"12","size-md":"6"},{default:o(()=>[s(u(D),{class:"form-label"},{default:o(()=>[f(p(n.confirmatory_hiv_test_date.label)+" ",1),e[39]||(e[39]=C("span",{style:{color:"red"}},"*",-1))]),_:1,__:[39]}),s($,{place_holder:n.confirmatory_hiv_test_date.label+(n.confirmatory_hiv_test_date.required()?"*":""),date_prop:t.value.confirmatory_hiv_test_date,onDateUpDated:e[27]||(e[27]=i=>{t.value.confirmatory_hiv_test_date=i,h("confirmatory_hiv_test_date",i)}),error:!!r.value.confirmatory_hiv_test_date},null,8,["place_holder","date_prop","error"]),r.value.confirmatory_hiv_test_date?(v(),d(u(A),{key:0,color:"danger"},{default:o(()=>[f(p(r.value.confirmatory_hiv_test_date),1)]),_:1})):c("",!0)]),_:1})):c("",!0)]),_:1})):c("",!0)]),_:1})]),_:1})]),_:1}))}}),Ye=me(Te,[["__scopeId","data-v-50d0f63e"]]);export{Ye as default};
