System.register(["./index-legacy-dac12cad.js","./vendor-legacy-b155b5ab.js","./lodash-legacy-78c9f2a0.js","./apexcharts-legacy-d546c9db.js","./chartjs-legacy-11371d29.js","./barcode-qrcode-reader-legacy-b9a6bf31.js"],(function(e,t){"use strict";var a,i,n,o,s,d,l,c,r,m,g,u,p,v,h,b,f,x,y,k;return{setters:[e=>{a=e.S,i=e._},e=>{n=e.d,o=e.e6,s=e.K,d=e.E,l=e.e,c=e.f,r=e.j,m=e.l,g=e.i,u=e.v,p=e.z,v=e.F,h=e.J,b=e.y,f=e.A,x=e.B,y=e.p,k=e.cL},null,null,null,null],execute:function(){var t=document.createElement("style");t.textContent=".prescription-container[data-v-10a64b84]{font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,Open Sans,Helvetica Neue,sans-serif;max-width:800px;margin:0 auto;padding:1rem;border-radius:4px;background-color:#fff}.header[data-v-10a64b84]{display:flex;align-items:center;padding-bottom:1rem;border-bottom:1px solid #e0e0e0;margin-bottom:1.5rem;position:relative}h2[data-v-10a64b84]{margin:0;flex-grow:1;font-size:1.3rem;font-weight:600}.accordion-section[data-v-10a64b84]{margin-bottom:1rem;border:1px solid #e0e0e0;border-radius:4px;overflow:hidden}.accordion-header[data-v-10a64b84]{display:flex;justify-content:space-between;align-items:center;padding:.75rem 1rem;background-color:#f5f5f5;cursor:pointer;user-select:none}.accordion-header h3[data-v-10a64b84]{margin:0;font-size:1rem;font-weight:500}.expand-btn[data-v-10a64b84]{background:none;border:none;cursor:pointer;font-size:1rem}.accordion-content[data-v-10a64b84]{padding:1rem;border-top:1px solid #e0e0e0}.horizontal-options[data-v-10a64b84]{display:flex;flex-direction:row;gap:1rem}.horizontal-item[data-v-10a64b84]{--inner-padding-end: 0px;--padding-start: 0px;flex-shrink:0}.allergy-section[data-v-10a64b84]{display:flex;align-items:center}.allergy-label[data-v-10a64b84]{font-weight:500;margin-right:2rem;min-width:180px}.option-grid[data-v-10a64b84]{display:grid;grid-template-columns:repeat(3,1fr);gap:1rem}.checkbox-option[data-v-10a64b84]{display:flex;align-items:center;cursor:pointer}.checkbox-text[data-v-10a64b84]{margin-left:.5rem}.patient-info[data-v-10a64b84]{display:flex;flex-wrap:wrap;gap:1rem;margin-bottom:1rem;font-size:.9rem}.info-item[data-v-10a64b84]{display:flex;align-items:center}.info-label[data-v-10a64b84]{font-weight:500;margin-right:.3rem}.regimen-grid[data-v-10a64b84]{display:grid;grid-template-columns:repeat(2,1fr);gap:.5rem;margin-bottom:1rem}.regimen-item[data-v-10a64b84]{display:flex;align-items:center;padding:.5rem 1rem;background-color:#e6f7f9;border-radius:4px;cursor:pointer;transition:background-color .2s}.regimen-item.selected[data-v-10a64b84]{background-color:#81d4fa;border:1px solid #4fc3f7}.regimen-id[data-v-10a64b84]{font-weight:500;margin-right:1rem;min-width:30px}.custom-regimen[data-v-10a64b84]{display:flex;align-items:center;justify-content:space-between;margin-top:1rem;padding-top:1rem;border-top:1px solid #e0e0e0}.selected-medication-section[data-v-10a64b84]{margin-top:1.5rem}.medication-table[data-v-10a64b84]{width:100%;border-collapse:collapse}.table-header[data-v-10a64b84]{display:flex;font-weight:500;border-bottom:1px solid #e0e0e0;padding-bottom:.5rem}.table-row[data-v-10a64b84]{display:flex;padding:.5rem 0;border-bottom:1px solid #f0f0f0}.highlighted[data-v-10a64b84]{background-color:#fffde7}.header-cell[data-v-10a64b84],.row-cell[data-v-10a64b84]{padding:.5rem}.drug-name[data-v-10a64b84]{flex:2}.units[data-v-10a64b84],.am[data-v-10a64b84],.noon[data-v-10a64b84],.pm[data-v-10a64b84],.frequency[data-v-10a64b84],.action[data-v-10a64b84]{flex:1;text-align:center}.remove-btn[data-v-10a64b84]{background-color:#f44336;color:#fff;border:none;border-radius:4px;padding:.25rem .5rem;cursor:pointer;font-size:.8rem}.remove-btn[data-v-10a64b84]:hover{background-color:#d32f2f}.next-visit-interval[data-v-10a64b84]{margin-bottom:1rem}.pack-quantity[data-v-10a64b84]{background-color:#e8f5e9;color:#2e7d32;font-weight:500;width:30px;height:30px;display:flex;align-items:center;justify-content:center;border-radius:4px}@media (max-width: 768px){.allergic-row[data-v-10a64b84]{flex-direction:column;align-items:flex-start}.radio-group[data-v-10a64b84]{margin-top:10px}}.required[data-v-10a64b84]{color:red}.medication-run-out[data-v-10a64b84]{margin-bottom:1rem}.estimated-packs[data-v-10a64b84]{margin-top:1rem}h4[data-v-10a64b84]{font-size:.9rem;font-weight:500;margin-bottom:.5rem}.pack-item[data-v-10a64b84]{display:flex;align-items:center;justify-content:space-between;margin-bottom:.5rem}.pack-quantity[data-v-10a64b84]{width:30px;height:30px;display:flex;align-items:center;justify-content:center;background-color:#e8f5e9;border-radius:4px}.save-section[data-v-10a64b84]{display:flex;justify-content:flex-start;margin-top:1.5rem}.save-btn[data-v-10a64b84]{padding:.5rem 1.5rem;background-color:#1b5e20;color:#fff;border:none;border-radius:4px;cursor:pointer;font-weight:500}.save-btn[data-v-10a64b84]:hover{background-color:#2e7d32}\n",document.head.appendChild(t);class R extends a{constructor(){super()}static getAllArvRegimens(){return this.getJson(`programs/${this.getProgramID()}/all_arv_regimens`)}static getRegimens(e){return this.getJson(`programs/${this.getProgramID()}/regimens`,{patient_id:e})}static getCustomIngridients(){return this.getJson(`programs/${this.getProgramID()}/custom_regimen_ingredients`)}static getCurrentRegimen(e,t=this.getSessionDate()){return this.getJson(`programs/${this.getProgramID()}/${e}`,{date:t})}}const _=n({name:"Prescription",setup:()=>({arvRegimens:[]}),data:()=>({accordionState:{allergySection:!1,medicationSection:!0,arvRegimensSection:!1,nextVisitSection:!1},chevronUp:o,chevronDown:s,route:"",patientInfo:{age:"34 Years",gender:"F",currentRegimen:"N/A",currentWeight:"60 Kg(s)",reasonForChange:"N/A",patientId:1},arvRegimens:[],medicationOptions:[{id:"arvs",label:"ARVs",selected:!1},{id:"cpt",label:"CPT",selected:!1},{id:"3hp",label:"3HP (RFP + INH)",selected:!1},{id:"inh300",label:"INH 300 / RFP 300 (3HP)",selected:!1},{id:"ipt",label:"IPT",selected:!1},{id:"none",label:"None",selected:!1}],selectedRegimens:[],customRegimen:!1,allergyOption:"",Intervaloptions:[{label:"1 month",value:"1"},{label:"2 months",value:"2"},{label:"3 months",value:"3"}],allergyOptions:[{label:"Yes",value:"Yes"},{label:"No",value:"No"},{label:"Unknown",value:"Unknown"}],months:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],selectedMedications:[{drugName:"AZT 300 / 3TC 150",units:"tabs",am:1,noon:0,pm:1,frequency:"Daily (QOD)"}],nextVisitInterval:"1",medicationRunOutDate:"",estimatedPacks:[{name:"AZT 300 / 3TC 150",quantity:1},{name:"EFV 400",quantity:1}],formData:{selectedRegimen:""}}),methods:{toggleAccordion(e){this.accordionState[e]=!this.accordionState[e]},formatLabel:e=>e.split(/(?=[A-Z])/).join(" "),toggleRegimen(e){const t=this.selectedRegimens.indexOf(e);-1===t?(this.selectedRegimens.push(e),this.addMedicationForRegimen(e)):(this.selectedRegimens.splice(t,1),this.removeMedicationByDrugId(e))},allergyChange(e){this.allergyOption=e.detail.value},nextVisitIntervalChange(e){const t=new Date,a=new Date(t.setMonth(t.getMonth()+parseInt(e.detail.value)));this.nextVisitInterval=e.detail.value;const i=String(a.getDate()).padStart(2,"0"),n=this.months[a.getMonth()],o=a.getFullYear();this.medicationRunOutDate=`${i}-${n}-${o}`,this.updateEstimatedPacks()},async savePrescription(){try{console.log("Saving prescription data:",{allergyOption:this.allergyOption,selectedRegimens:this.selectedRegimens,selectedMedications:this.selectedMedications,nextVisitInterval:this.nextVisitInterval}),alert("Prescription saved successfully")}catch(e){console.error("Error saving prescription:",e),alert("Failed to save prescription")}},updateSelectedMedications(){this.selectedMedications=[],this.medicationOptions.find((e=>"arvs"===e.id&&e.selected))&&this.selectedRegimens.forEach((e=>{this.addMedicationForRegimen(e)})),this.medicationOptions.find((e=>"cpt"===e.id&&e.selected))&&this.selectedMedications.push({drugName:"Cotrimoxazole 960mg",units:"tabs",am:1,noon:0,pm:0,frequency:"Daily"}),this.medicationOptions.find((e=>"3hp"===e.id&&e.selected))&&this.selectedMedications.push({drugName:"3HP (RFP + INH)",units:"tabs",am:1,noon:0,pm:0,frequency:"Weekly"}),this.medicationOptions.find((e=>"inh300"===e.id&&e.selected))&&this.selectedMedications.push({drugName:"INH 300 / RFP 300 (3HP)",units:"tabs",am:1,noon:0,pm:0,frequency:"Weekly"}),this.medicationOptions.find((e=>"ipt"===e.id&&e.selected))&&this.selectedMedications.push({drugName:"Isoniazid Preventive Therapy",units:"tabs",am:1,noon:0,pm:0,frequency:"Daily"}),this.updateEstimatedPacks()},addMedicationForRegimen(e){const t=this.arvRegimens.find((t=>t.drug_id===e));t&&-1===this.selectedMedications.findIndex((e=>e.drugName===t.drug_name.drug_name))&&(this.selectedMedications.push({drugName:t.drug_name.drug_name,units:t.drug_name.units,am:t.drug_name.am,noon:t.drug_name.noon,pm:t.drug_name.pm,frequency:t.drug_name.frequency}),this.updateEstimatedPacks())},removeMedication(e){const t=this.selectedMedications[e].drugName,a=this.arvRegimens.find((e=>e.drug_name.drug_name===t));if(a){const e=this.selectedRegimens.indexOf(a.drug_id);-1!==e&&this.selectedRegimens.splice(e,1)}this.selectedMedications.splice(e,1),this.updateEstimatedPacks()},removeMedicationByDrugId(e){const t=this.arvRegimens.find((t=>t.drug_id===e));if(!t)return;const a=this.selectedMedications.findIndex((e=>e.drugName===t.drug_name.drug_name));-1!==a&&(this.selectedMedications.splice(a,1),this.updateEstimatedPacks())},toggleMedication(e){if(this.medicationOptions[e].selected=!this.medicationOptions[e].selected,"none"===this.medicationOptions[e].id&&this.medicationOptions[e].selected)this.medicationOptions.forEach(((t,a)=>{a!==e&&(this.medicationOptions[a].selected=!1)})),this.selectedRegimens=[],this.selectedMedications=[];else if("none"!==this.medicationOptions[e].id&&this.medicationOptions[e].selected){const e=this.medicationOptions.findIndex((e=>"none"===e.id));e>=0&&(this.medicationOptions[e].selected=!1)}this.updateSelectedMedications()},updateEstimatedPacks(){const e=parseInt(this.nextVisitInterval);this.estimatedPacks=this.selectedMedications.map((t=>({name:t.drugName,quantity:Math.ceil(30*(t.am+t.noon+t.pm)*e/60)})))}},watch:{nextVisitInterval:{handler(){this.updateEstimatedPacks()}},medicationOptions:{handler(){this.updateSelectedMedications()},deep:!0}},async mounted(){const e=await R.getRegimens(this.patientInfo.patientId);for(const[o,s]of Object.entries(e))this.arvRegimens.push({drug_id:o,drug_name:s[0]});const t=new Date,a=String(t.getDate()).padStart(2,"0"),i=this.months[t.getMonth()],n=t.getFullYear();this.medicationRunOutDate=`${a}-${i}-${n}`}}),I={class:"prescription-container"},w={class:"accordion-section"},S={class:"expand-btn"},M={class:"accordion-content"},O={class:"allergy-section"},V={class:"accordion-section"},C={class:"expand-btn"},P={class:"accordion-content"},D={class:"medication-options"},N={class:"option-grid"},q={class:"checkbox-option"},A={class:"checkbox-text"},F={class:"checkbox-option"},U={class:"checkbox-text"},j={class:"accordion-section"},z={class:"expand-btn"},E={class:"accordion-content"},$={class:"patient-info"},H={class:"info-item"},J={class:"info-value"},T={class:"info-item"},W={class:"info-value"},Y={class:"info-item"},B={class:"info-value"},Z={class:"info-item"},K={class:"info-value"},L={class:"info-item"},G={class:"info-value"},Q={class:"regimen-grid"},X=["onClick"],ee={class:"regimen-id"},te={class:"regimen-name"},ae=["onClick"],ie={class:"regimen-id"},ne={class:"regimen-name"},oe={class:"custom-regimen"},se={class:"selected-medication-section"},de={class:"medication-table"},le={class:"row-cell drug-name"},ce={class:"row-cell units"},re={class:"row-cell am"},me={class:"row-cell noon"},ge={class:"row-cell pm"},ue={class:"row-cell frequency"},pe={class:"row-cell action"},ve=["onClick"],he={class:"accordion-section"},be={class:"expand-btn"},fe={class:"accordion-content"},xe={class:"next-visit-interval"},ye={class:"medication-run-out"},ke={class:"estimated-packs"},Re={class:"pack-name"},_e={class:"pack-quantity"},Ie={class:"save-section"};e("default",i(_,[["render",function(e,t,a,i,n,o){const s=d("ion-icon"),R=d("ion-label"),_=d("ion-radio"),we=d("ion-item"),Se=d("ion-radio-group"),Me=d("ion-checkbox"),Oe=d("ion-select-option"),Ve=d("ion-select");return l(),c("div",I,[t[25]||(t[25]=r("div",{class:"header"},[r("h2",null,"Prescription")],-1)),r("div",w,[r("div",{class:"accordion-header",onClick:t[0]||(t[0]=t=>e.toggleAccordion("allergySection"))},[t[8]||(t[8]=r("h3",null,"Allergy Information",-1)),r("button",S,[m(s,{icon:e.accordionState.allergySection?e.chevronUp:e.chevronDown},null,8,["icon"])])]),g(r("div",M,[r("div",O,[t[10]||(t[10]=r("div",{class:"allergy-label"},"Allergic to cotrimoxazole",-1)),m(Se,{modelValue:e.allergyOption,"onUpdate:modelValue":t[1]||(t[1]=t=>e.allergyOption=t),onIonChange:e.allergyChange,class:"horizontal-options"},{default:p((()=>[(l(!0),c(v,null,h(e.allergyOptions,(e=>(l(),b(we,{key:e.value,class:"horizontal-item"},{default:p((()=>[m(R,null,{default:p((()=>[f(x(e.label),1)])),_:2},1024),t[9]||(t[9]=f("  ")),m(_,{slot:"end",value:e.value},null,8,["value"])])),_:2,__:[9]},1024)))),128))])),_:1},8,["modelValue","onIonChange"])])],512),[[u,e.accordionState.allergySection]])]),r("div",V,[r("div",{class:"accordion-header",onClick:t[2]||(t[2]=t=>e.toggleAccordion("medicationSection"))},[t[11]||(t[11]=r("h3",null,"Medication to prescribe during this visit",-1)),r("button",C,[m(s,{icon:e.accordionState.medicationSection?e.chevronUp:e.chevronDown},null,8,["icon"])])]),g(r("div",P,[r("div",D,[r("div",N,[(l(!0),c(v,null,h(e.medicationOptions.slice(0,3),(e=>(l(),c("div",{key:e.id,class:"option-item"},[r("label",q,[m(Me,{modelValue:e.selected,"onUpdate:modelValue":t=>e.selected=t},null,8,["modelValue","onUpdate:modelValue"]),r("span",A,x(e.label),1)])])))),128)),(l(!0),c(v,null,h(e.medicationOptions.slice(3),(e=>(l(),c("div",{key:e.id,class:"option-item"},[r("label",F,[m(Me,{modelValue:e.selected,"onUpdate:modelValue":t=>e.selected=t},null,8,["modelValue","onUpdate:modelValue"]),r("span",U,x(e.label),1)])])))),128))])])],512),[[u,e.accordionState.medicationSection]])]),r("div",j,[r("div",{class:"accordion-header",onClick:t[3]||(t[3]=t=>e.toggleAccordion("arvRegimensSection"))},[t[12]||(t[12]=r("h3",null,"ARV Regimens",-1)),r("button",z,[m(s,{icon:e.accordionState.arvRegimensSection?e.chevronUp:e.chevronDown},null,8,["icon"])])]),g(r("div",E,[r("div",$,[r("div",H,[t[13]||(t[13]=r("span",{class:"info-label"},"Age:",-1)),r("span",J,x(e.patientInfo.age),1)]),r("div",T,[t[14]||(t[14]=r("span",{class:"info-label"},"Gender:",-1)),r("span",W,x(e.patientInfo.gender),1)]),r("div",Y,[t[15]||(t[15]=r("span",{class:"info-label"},"Current Regimen:",-1)),r("span",B,x(e.patientInfo.currentRegimen),1)]),r("div",Z,[t[16]||(t[16]=r("span",{class:"info-label"},"Current Weight:",-1)),r("span",K,x(e.patientInfo.currentWeight),1)]),r("div",L,[t[17]||(t[17]=r("span",{class:"info-label"},"Reason for change:",-1)),r("span",G,x(e.patientInfo.reasonForChange),1)])]),r("div",Q,[(l(!0),c(v,null,h(e.arvRegimens.slice(0,5),(t=>(l(),c("div",{key:t.drug_id,class:y(["regimen-item",{selected:e.selectedRegimens.includes(t.drug_id)}]),onClick:a=>e.toggleRegimen(t.drug_id)},[r("span",ee,x(t.drug_id),1),r("span",te,x(t.drug_name.drug_name),1)],10,X)))),128)),(l(!0),c(v,null,h(e.arvRegimens.slice(5),(t=>(l(),c("div",{key:t.drug_id,class:y(["regimen-item",{selected:e.selectedRegimens.includes(t.drug_id)}]),onClick:a=>e.toggleRegimen(t.drug_id)},[r("span",ie,x(t.drug_id),1),r("span",ne,x(t.drug_name.drug_name),1)],10,ae)))),128))]),r("div",oe,[t[18]||(t[18]=r("span",null,"Set custom regimen",-1)),m(Me,{modelValue:e.customRegimen,"onUpdate:modelValue":t[4]||(t[4]=t=>e.customRegimen=t)},null,8,["modelValue"])]),r("div",se,[t[20]||(t[20]=r("h3",null,"Selected medication",-1)),r("div",de,[t[19]||(t[19]=k('<div class="table-header" data-v-10a64b84><div class="header-cell drug-name" data-v-10a64b84>Drug name</div><div class="header-cell units" data-v-10a64b84>Units</div><div class="header-cell am" data-v-10a64b84>AM</div><div class="header-cell noon" data-v-10a64b84>Noon</div><div class="header-cell pm" data-v-10a64b84>PM</div><div class="header-cell frequency" data-v-10a64b84>Frequency</div><div class="header-cell action" data-v-10a64b84>Action</div></div>',1)),(l(!0),c(v,null,h(e.selectedMedications,((t,a)=>(l(),c("div",{key:a,class:y(["table-row",{highlighted:0===a}])},[r("div",le,x(t.drugName),1),r("div",ce,x(t.units),1),r("div",re,x(t.am),1),r("div",me,x(t.noon),1),r("div",ge,x(t.pm),1),r("div",ue,x(t.frequency),1),r("div",pe,[r("button",{onClick:t=>e.removeMedication(a),class:"remove-btn"},"Remove",8,ve)])],2)))),128))])])],512),[[u,e.accordionState.arvRegimensSection]])]),r("div",he,[r("div",{class:"accordion-header",onClick:t[5]||(t[5]=t=>e.toggleAccordion("nextVisitSection"))},[t[21]||(t[21]=r("h3",null,"Next Visit Information",-1)),r("button",be,[m(s,{icon:e.accordionState.nextVisitSection?e.chevronUp:e.chevronDown},null,8,["icon"])])]),g(r("div",fe,[r("div",xe,[m(we,null,{default:p((()=>[m(R,{position:"stacked"},{default:p((()=>t[22]||(t[22]=[f("Interval to next visit "),r("span",{class:"required"},"*",-1)]))),_:1,__:[22]}),m(Ve,{modelValue:e.nextVisitInterval,"onUpdate:modelValue":t[6]||(t[6]=t=>e.nextVisitInterval=t),interface:"popover",onIonChange:e.nextVisitIntervalChange},{default:p((()=>[(l(!0),c(v,null,h(e.Intervaloptions,(e=>(l(),b(Oe,{key:e.value,value:e.value},{default:p((()=>[f(x(e.label),1)])),_:2},1032,["value"])))),128))])),_:1},8,["modelValue","onIonChange"])])),_:1})]),r("div",ye,[t[23]||(t[23]=r("label",null,"Medication run out date:",-1)),r("span",null,x(e.medicationRunOutDate),1)]),r("div",ke,[t[24]||(t[24]=r("h4",null,"Estimated packs/tins:",-1)),(l(!0),c(v,null,h(e.estimatedPacks,((e,t)=>(l(),c("div",{key:t,class:"pack-item"},[r("span",Re,x(e.name),1),r("div",_e,x(e.quantity),1)])))),128))])],512),[[u,e.accordionState.nextVisitSection]])]),r("div",Ie,[r("button",{class:"save-btn",onClick:t[7]||(t[7]=(...t)=>e.savePrescription&&e.savePrescription(...t))},"Save")])])}],["__scopeId","data-v-10a64b84"]]))}}}));
