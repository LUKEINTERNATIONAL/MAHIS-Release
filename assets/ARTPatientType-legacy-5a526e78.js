System.register(["./vendor-legacy-b155b5ab.js","./index-legacy-dcdeb215.js","./patient_type_service-legacy-4b4bea3c.js","./lodash-legacy-78c9f2a0.js","./apexcharts-legacy-d546c9db.js","./chartjs-legacy-11371d29.js","./barcode-qrcode-reader-legacy-b9a6bf31.js"],(function(e,t){"use strict";var a,l,n,i,s,p,r,c,y,o,d,u,g,v,f,T,h,m,b,_,F,j,x,P,w,V,k,q,D,L,S;return{setters:[e=>{a=e.d,l=e.r,n=e.cF,i=e.a,s=e.e,p=e.y,r=e.z,c=e.l,y=e.x,o=e.aI,d=e.aJ,u=e.j,g=e.aK,v=e.A,f=e.br,T=e.f,h=e.F,m=e.J,b=e.G,_=e.bq,F=e.D,j=e.B,x=e.bj,P=e.m,w=e.V,V=e.aH},e=>{k=e.a,q=e.L,D=e.t,L=e.b},e=>{S=e.P},null,null,null,null],execute:function(){const t={key:0,class:"ion-padding"},A={class:"ion-padding"};e("default",a({__name:"ARTPatientType",setup(e){const a=l(!1),C=l([]),I=l([]),J=new k,U=new S(J.getID(),-1),z=n({patientType:null,prevType:null,transerFacility:null});async function B(e=""){try{const t=await q.getFacilities({name:e});I.value=t}catch(t){console.error("Error fetching facilities:",t)}}function E(){var e;if(z.patientType!==z.prevType){if(!z.patientType)return D("Patient type is required");if(!/new patient/i.test(z.patientType)&&z.patientType!==z.prevType&&!z.transerFacility)return D("Facility is required");U.setPatientType(z.patientType),U.setLocationName((null===(e=z.transerFacility)||void 0===e?void 0:e.name)||""),U.save().then((e=>{e?L("Patient type saved successfully"):D("Failed to save patient type")})).catch((e=>D(`Failed to save patient type: ${e}`)))}}return i((()=>{a.value=!0,C.value=S.getPatientTypes(),U.loadPatientType().then((()=>{const e=U.getType();e&&!/n\/a/i.test(e)&&(z.prevType=U.getType(),z.patientType=U.getType())})).finally((()=>{a.value=!1}))})),(e,l)=>(s(),p(y(V),{style:{height:"65vh"}},{default:r((()=>[c(y(o),null,{default:r((()=>[c(y(d),null,{default:r((()=>l[2]||(l[2]=[u("span",{class:"ion-text-center"},[u("h3",null," Patient type")],-1),u("hr",{style:{"border-top":"1px dashed #0c0c0c","margin-top":"10px"}},null,-1)]))),_:1,__:[2]})])),_:1}),c(y(g),null,{default:r((()=>[u("div",null,[l[3]||(l[3]=u("h2",{style:{"font-weight":"bold",margin:"12px"}},[v("Patient Type "),u("span",{style:{color:"red"}},"*")],-1)),c(y(f),{modelValue:z.patientType,"onUpdate:modelValue":l[0]||(l[0]=e=>z.patientType=e)},{default:r((()=>[(s(!0),T(h,null,m(C.value,((e,t)=>(s(),p(y(b),{key:t},{default:r((()=>[c(y(_),{slot:"start",value:e.value},null,8,["value"]),c(y(F),{style:{margin:"10px"}},{default:r((()=>[v(j(e.label),1)])),_:2},1024)])),_:2},1024)))),128))])),_:1},8,["modelValue"])]),z.prevType===z.patientType||/new patient/i.test(z.patientType)?P("",!0):(s(),T("div",t,[l[4]||(l[4]=u("h2",{style:{"font-weight":"bold",margin:"12px"}},[v("Facility "),u("span",{style:{color:"red"}},"*")],-1)),c(y(x),{modelValue:z.transerFacility,"onUpdate:modelValue":l[1]||(l[1]=e=>z.transerFacility=e),multiple:!1,taggable:!1,"hide-selected":!0,"close-on-select":!0,openDirection:"bottom",onSearchChange:B,"tag-placeholder":"Find and select facility",placeholder:"Find and select facility",selectLabel:"",label:"name",searchable:!0,"track-by":"code",options:I.value},null,8,["modelValue","options"])])),u("div",A,[c(y(w),{disabled:a.value,onClick:E},{default:r((()=>l[5]||(l[5]=[v("Submit")]))),_:1,__:[5]},8,["disabled"])])])),_:1})])),_:1}))}}))}}}));
