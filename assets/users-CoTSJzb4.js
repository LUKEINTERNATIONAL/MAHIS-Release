import{d as G,L as Be,a1 as Fa,bM as Aa,M as qe,_ as h,a2 as Ea,ad as Da,aM as Ha,aN as Na,cc as $a,aO as Ta,aP as Ma,a9 as w,a8 as L,bj as Oa,aa as je,a7 as xe,r as o,br as Ra,a as Se,w as fe,c as Ge,bX as za,dB as Ba,c0 as Ke,H as V,e as j,f,l as a,J as t,O as x,k as n,K as U,F as Z,P as Ie,Q as g,u as s,ax as qa,m as R,aC as ja,bi as ce,dD as Ne,bg as Ga,I as Ka,G as $e,E as we,c2 as We,aY as Te,N as Me,a6 as Wa,bk as Ja,R as Qa,bh as Xa,b8 as Ya,bD as Za}from"./vendor-DfayhWEV.js";import{am as Je,U as re,_ as ee,a0 as et,a7 as at,an as Ve,L as ne,B as Y,ao as tt,ap as lt,aq as Oe,a1 as st,ar as Re,as as ze,s as ot,at as nt,K as rt,T as it,r as ut}from"./index-3VO6Sqm_.js";import{B as dt}from"./bottomNavBar-iTQgIeO5.js";import{l as pe}from"./lodash-NJiRuGo9.js";import{N as ct}from"./NavigationMenu-CFy0S1Qp.js";import{E as pt}from"./EIRreportsStore-CNYtfFQW.js";import"./apexcharts-CMSjZAwK.js";const ft=G({name:"UserCardList",components:{IonContent:xe,IonPage:je,IonGrid:Oa,IonRow:L,IonCol:w,IonCard:Ma,IonCardHeader:Ta,IonCardSubtitle:$a,IonCardTitle:Na,IonCardContent:Ha,IonList:Da,IonItem:Ea,IonLabel:h,bottomNavBar:dt,IonFooter:qe,IonSpinner:Aa,IonText:Fa,IonIcon:Be,editUserModal:Je},props:{users:{type:Array,required:!0},filterValue:{type:String,required:!0},search:{type:String,required:!0}},setup(u,{emit:c}){const k=o(!1),P=Ra({page:1,itemsPerPage:10}),D=o(!0),F=o(""),d=o(""),_=o([]),y=o(0);Se(()=>{I()}),fe(()=>u.search,(i,m)=>{i!==m&&(P.page=1,I())}),fe(()=>u.filterValue,()=>{});const I=async()=>{try{D.value=!0,F.value="";const i=await re.getAllUsers(P.page,P.itemsPerPage,u.search);y.value=i.count||0,_.value=i.results.map(m=>({userId:m.user_id,username:m.username,roles:T(m.roles),programs:B(m.programs),gender:m.person.gender,status:m.deactivated_on,firstName:ae(m.person.names),lastName:K(m.person.names)}))}catch(i){F.value="Failed to fetch users. Please try again later.",console.error("Error fetching users:",i),_.value=[],y.value=0}finally{D.value=!1}},N=({page:i,itemsPerPage:m})=>{P.page=i,P.itemsPerPage=m,I()},C=Ge(()=>{if(!u.filterValue)return _.value;const i=u.filterValue.toLowerCase();return _.value.filter(m=>m.username.toLowerCase().includes(i)||m.firstName.toLowerCase().includes(i)||m.lastName.toLowerCase().includes(i)||m.userId.toLowerCase().includes(i)||m.roles.some(W=>W.toLowerCase().includes(i))||m.programs.some(W=>W.toLowerCase().includes(i)))}),p=i=>{k.value=!0,d.value=i},$=()=>{k.value=!1,c("reload",k.value),I()},S=()=>{k.value=!1},T=i=>!i||!Array.isArray(i)?[]:i.map(m=>m.role||""),ae=i=>!i||!Array.isArray(i)||i.length===0?"":i[i.length-1].given_name||"",K=i=>!i||!Array.isArray(i)||i.length===0?"":i[i.length-1].family_name||"",B=i=>!i||!Array.isArray(i)?[]:i.map(m=>m.name||"");return{filteredUsers:C,pagination:P,handlePaginationUpdate:N,isLoading:D,error:F,personCircleOutline:Ke,createOutline:Ba,appsOutline:za,openUserProfile:p,user_id:d,isPopooverOpen:k,modalClosed:$,softModalClosed:S,_items_:_,totalCount:y}}}),_t={class:"container"},mt={class:"user-lbl"},vt={class:"user-lbl"},gt={class:"user-lbl"},ht={class:"user-lbl"};function yt(u,c,k,P,D,F){const d=V("ion-text"),_=V("ion-col"),y=V("ion-row"),I=V("ion-spinner"),N=V("ion-icon"),C=V("ion-card-subtitle"),p=V("ion-card-title"),$=V("ion-card-header"),S=V("ion-label"),T=V("ion-item"),ae=V("ion-list"),K=V("ion-card-content"),B=V("ion-card"),i=V("ion-grid"),m=V("editUserModal"),W=V("bottomNavBar"),te=V("ion-footer");return f(),j("div",_t,[a(i,{class:"dynamic-grid"},{default:t(()=>[u.error?(f(),x(y,{key:0},{default:t(()=>[a(_,{size:"12",class:"ion-text-center"},{default:t(()=>[a(d,{color:"danger"},{default:t(()=>[n("p",null,U(u.error),1)]),_:1})]),_:1})]),_:1})):u.isLoading?(f(),x(y,{key:1},{default:t(()=>[a(_,{size:"12",class:"ion-text-center"},{default:t(()=>[a(I,{name:"circular"}),c[0]||(c[0]=n("p",null,"Loading users...",-1))]),_:1})]),_:1})):u._items_.length===0?(f(),x(y,{key:2},{default:t(()=>[a(_,{size:"12",class:"ion-text-center"},{default:t(()=>[...c[1]||(c[1]=[n("p",null,"No users found.",-1)])]),_:1})]),_:1})):(f(),x(y,{key:3,class:"user-cards-row"},{default:t(()=>[(f(!0),j(Z,null,Ie(u._items_,z=>(f(),x(_,{"size-xs":"12","size-sm":"6","size-md":"4","size-lg":"3",key:z.userId},{default:t(()=>[a(B,{class:"user-card"},{default:t(()=>[a($,null,{default:t(()=>[a(C,null,{default:t(()=>[a(N,{icon:u.personCircleOutline,size:"small",style:{"margin-bottom":"-3px"}},null,8,["icon"]),g(" "+U(z.roles.join(", ")),1)]),_:2},1024),a(p,null,{default:t(()=>[g(U(z.firstName)+" "+U(z.lastName)+" ",1),a(N,{onClick:le=>u.openUserProfile(z.userId),icon:u.createOutline,class:"edit-icon"},null,8,["onClick","icon"])]),_:2},1024)]),_:2},1024),a(K,null,{default:t(()=>[a(ae,null,{default:t(()=>[a(T,null,{default:t(()=>[a(S,null,{default:t(()=>[c[2]||(c[2]=n("h3",null,"User ID",-1)),n("p",mt,U(z.userId),1)]),_:2},1024)]),_:2},1024),a(T,null,{default:t(()=>[a(S,null,{default:t(()=>[c[3]||(c[3]=n("h3",null,"Username",-1)),n("p",vt,U(z.username),1)]),_:2},1024)]),_:2},1024),a(T,null,{default:t(()=>[a(S,null,{default:t(()=>[c[4]||(c[4]=n("h3",null,"Gender",-1)),n("p",gt,U(z.gender),1)]),_:2},1024)]),_:2},1024),a(T,null,{default:t(()=>[a(S,null,{default:t(()=>[n("h3",null,[a(N,{icon:u.appsOutline,size:"small",style:{"margin-bottom":"-3px"}},null,8,["icon"]),c[5]||(c[5]=g(" Programs ",-1))]),n("p",ht,U(z.programs.join(", ")),1)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1}))]),_:1}),a(m,{is_open:u.isPopooverOpen,user_id:u.user_id,onClosePopoover:u.softModalClosed,onSave:u.modalClosed},null,8,["is_open","user_id","onClosePopoover","onSave"]),a(te,{class:"sticky-footer"},{default:t(()=>[a(y,null,{default:t(()=>[a(_,null,{default:t(()=>[a(W,{totalItems:u.totalCount,currentPage:u.pagination.page,itemsPerPage:u.pagination.itemsPerPage,"onUpdate:pagination":u.handlePaginationUpdate},null,8,["totalItems","currentPage","itemsPerPage","onUpdate:pagination"])]),_:1})]),_:1})]),_:1})])}const bt=ee(ft,[["render",yt],["__scopeId","data-v-cf97a1fe"]]),wt=G({watch:{},name:"xxxComponent"}),Vt=G({...wt,props:{action:{}},emits:["saveEvent"],setup(u,{emit:c}){const k=o(),P=o(),D=o(),F=o(),d=o([]),_=o([]),y=[],I=[],N=[],C=[],p=[],$=["Password must be at least 8 characters long and include at least one uppercase letter, one number, and one special character (@#$%^&+=*!-), without spaces","Password does not match"],S=o(),T=o([]),ae=o("Select location"),K=o(!1),B=o(!1),i=o("Select village(s)"),m=o(!1),W=o("Select district(s)"),te=o(!1),z=o("Select TA(s)"),le=o([]),Ue=o([]),se=o([]),ie=o([]),_e=o(),Pe=o(),me=o(),ue=o(!0),de=o(!0),ve=et(),Ce=Ge(()=>ve.facilityLocation),ge=o(!0),Qe=u;Se(async()=>{await ua(),await da(),Ue.value=await Sa(),le.value=await Ua(),le.value.length>0&&await ta()}),fe(()=>Qe.action,async l=>{await ra()}),fe(()=>ue.value,async l=>{ue.value==!1&&q(d.value)});async function Xe(l){const r={cell_phone_number:Re(b).phone_number,gender:ze(O[0].dataValue.value)};return await new nt(r).update(l)}function Le(l){const e=T.value.find(A=>A.code===l.code),r=e?le.value.filter(A=>A.name===e.district):[];me.value=r,S.value=l}function Ye(l){N.length=0,l.forEach(e=>{N.push(e.village_id)})}function Ze(l){C.length=0,l.forEach(e=>{C.push(e.traditional_authority_id)}),l.forEach(e=>{Ca(e.district_id)})}function ea(l){p.length=0;const e=[];Ue.value.forEach(r=>{l.name.toLowerCase()===r.name.toLowerCase()&&e.push(r)}),e.forEach(r=>{p.push(r.district_id)}),e.forEach(r=>{He(r.district_id)}),aa(l)}async function aa(l){T.value=[];try{const e=await ne.getDistrictFacilities(l.name.toLowerCase());T.value.push(...e.facilities)}catch(e){console.error("Error fetching facilities for district ".concat(l.name,":"),e)}S.value=null}async function ta(){try{T.value.push(Ce.value),Le(Ce.value)}catch(l){console.error(l)}}async function la(){try{const l=await re.getCurrentUser();if(l){const e=l.roles.map(r=>r.role);ve.setUserRoles(e),ke("Superuser,Superuser,")==!0&&(ge.value=!1),ke("Superuser,Superuser,")==!1&&(d.value=sa(d.value))}}catch(l){}}function ke(l){return ve.getUserRoles().some(r=>r.toLowerCase()===l.toLowerCase())}function sa(l){const e=l.findIndex(r=>typeof r.name=="string"&&r.name.toLowerCase()==="Superuser,Superuser,".toLowerCase());return e!==-1&&l.splice(e,1),l}async function oa(l){l.is_valid==!1&&(M[0].show_error.value=!0,F.value=l.phone,M[0].dataValue.value=l.phone,M[0].is_phone_valid.value=!1),l.is_valid==!0&&(M[0].show_error.value=!1,F.value=l.phone,M[0].dataValue.value=l.phone,M[0].is_phone_valid.value=!0)}async function na(l){pe.isEmpty(l)==!0,pe.isEmpty(l)==!1}async function ra(){const l=Ae(),e=Ee(),r=Ve(b),A=De(),J=he(),X=ca(),E=fa(),ye=_a(),Q=pa(),La=ma();if(r==!0&&J==!0&&A==!0&&l==!0&&e==!0&&X==!0&&E==!0&&ye==!0&&Q==!0&&La==!0){const be=Re(b),ka={family_name:be.last_name,given_name:be.firstname,username:be.username,must_append_roles:!1,password:H[0].dataValue.value,programs:I,villages:N,roles:y,gender:ze(O[0].dataValue.value),location_id:S.value.code,phone:M[0].dataValue.value};try{const{user:oe}=await re.createUser(ka);oe&&(await Xe(oe.person.person_id),Fe(oe.user_id))}catch(oe){Fe(""),ot(oe,2e3)}}}const ia=c;function Fe(l){ia("saveEvent",l)}async function ua(){d.value=await re.getAllRoles();const l=[];d.value.forEach(e=>{l.push({name:e.role,other:e})}),d.value=l,await la()}function Ae(){const l=[];if(y.length=0,d.value.forEach(e=>{e.selected==!0&&l.push(e)}),l.forEach(e=>{y.push(e.other.role)}),y.length>0)return v[0].show_error.value=!1,!0;if(y.length==0)return v[0].show_error.value=!0,!1}function Ee(){const l=[];if(I.length=0,_.value.forEach(e=>{e.selected==!0&&l.push(e)}),l.forEach(e=>{I.push(e.other.program_id)}),I.length>0)return v[1].show_error.value=!1,!0;if(I.length==0)return v[1].show_error.value=!0,!1}async function da(){_.value=await at.getAllPrograms();const l=[];_.value.forEach(e=>{l.push({name:e.name,other:e,selected:!1})}),_.value=l}function De(){let l=!1;return O[0].dataValue.value==null&&(O[0].show_error.value=!0),O[0].dataValue.value!=null&&(O[0].show_error.value=!1,l=!0),l}function ca(){if(pe.isEmpty(S.value)==!0)return K.value=!0,!1;if(pe.isEmpty(S.value)==!1)return K.value=!1,!0}function pa(){if(q(d.value)==!1)return!0;if(q(d.value)==!0){if(N.length==0)return B.value=!0,!1;if(N.length>0)return B.value=!1,!0}}function fa(){if(q(d.value)==!1)return!0;if(q(d.value)==!0){if(p.length==0)return m.value=!0,!1;if(p.length>0)return m.value=!1,!0}}function _a(){if(q(d.value)==!1)return!0;if(q(d.value)==!0){if(C.length==0)return te.value=!0,!1;if(C.length>0)return te.value=!1,!0}}function he(){const[l,e]=H.map(E=>E.dataValue.value),r=$[0],A=$[1];return H.forEach(E=>{E.error_message=r,E.show_error.value=!1}),H.map((E,ye)=>{const Q=!E.dataValue.value;return E.show_error.value=Q,Q}).some(E=>E)||H.map((E,ye)=>{const Q=st(E.dataValue.value);return E.show_error.value=!Q,Q}).some(E=>!E)?!1:l!==e?(H.forEach(E=>{E.error_message=A,E.show_error.value=!0}),!1):!0}const b=[{placeHolder:"username",property_name:"username",dataHandler:ba,dataValue:o(),show_error:o(!1),error_message:"Input required, Only letters allowed"},{placeHolder:"firstname",property_name:"firstname",dataHandler:wa,dataValue:o(),show_error:o(!1),type:"text",error_message:"Input required, Only letters allowed"},{placeHolder:"last name",property_name:"last_name",dataHandler:Va,dataValue:o(),type:"text",show_error:o(!1),error_message:"Input required, Only letters allowed"}];function ma(){if(M[0].is_phone_valid.value==!1)return M[0].show_error.value=!0,!1;if(M[0].is_phone_valid.value==!0)return M[0].show_error.value=!1,!0}const M=[{placeHolder:"phone number",property_name:"phone_number",dataValue:o(),show_error:o(!1),error_message:"Input required, input is invalid",is_phone_valid:o(!1)}],H=[{placeHolder:"new password",dataHandler:Ia,dataValue:o(),show_error:o(!1),error_message:$[0]},{placeHolder:"repeat password",dataHandler:xa,dataValue:o(),show_error:o(!1),error_message:$[0]}],v=[{multi_Selection:!0,show_list_label:!0,unqueId:"qwerty_8_3698",name_of_list:"Roles",placeHolder:"Search for a field",items:[],listUpdatedFN:va,listFilteredFN:()=>{},searchTextFN:()=>{},use_internal_filter:!0,show_error:o(!1),error_message:"please select a Role",disabled:o(!1)},{multi_Selection:!0,show_list_label:!0,unqueId:"qwerty_8_562",name_of_list:"Programs",placeHolder:"Search for programs",items:[],listUpdatedFN:ga,listFilteredFN:()=>{},searchTextFN:()=>{},use_internal_filter:!0,show_error:o(!1),error_message:"please select a Program",disabled:o(!1)}];function va(l){d.value=l,q(d.value),Ae()}function q(l){const e=["HSA","Health Surveillance"];B.value=!1;let r=!1;return l.forEach(A=>{(A==null?void 0:A.selected)==!0&&e.includes(A==null?void 0:A.name)&&(de.value=!1,r=!0)}),r==!1&&(B.value=!1,de.value=!0),r}function ga(l){_.value=l,_.value.forEach(e=>{e.selected==!0}),Ee()}const O=[{labels:["Male","Female"],selectedOption:o(null),dataHandler:ha,dataValue:o(),show_error:o(!1),error_message:"Please make a selection"}];function ha(l){try{O[0].dataValue.value=l.label}catch(e){O[0].dataValue.value=void 0}De()}async function ya(l){try{if(l.length>0){const e=await re.doesUsernameExist(l);e.exists==!0?(b[0].show_error.value=!0,b[0].error_message="Username already exists"):e.exists==!1&&(b[0].show_error.value=!1,b[0].error_message="Input required, Only letters allowed")}}catch(e){console.error(e)}}async function ba(l){const e=l.target.value;b[0].dataValue.value=e,await ya(e)}function wa(l){const e=l.target.value;b[1].dataValue.value=e,Ve([b[1]])}function Va(l){const e=l.target.value;b[2].dataValue.value=e,Ve([b[2]])}function Ia(l){const e=l.target.value;H[0].dataValue.value=e,he()}function xa(l){const e=l.target.value;H[1].dataValue.value=e,he()}async function Sa(){const l=[];for(let e of[1,2,3]){const r=await ne.getDistricts(e);l.push(...r)}return l.forEach(e=>{p.push(e.district_id)}),l.forEach(e=>{He(e.district_id)}),l}async function Ua(){return(await ne.getFacilityDistricts()).districts}async function He(l,e){ie.value=[];var r=await ne.getTraditionalAuthorities(l,"");const A=r.map((J,X)=>({...J,assigned_id:X}));ie.value=ie.value.concat(A)}async function Pa(l,e){se.value=[];var r=await ne.getVillages(l,"");const A=r.map((J,X)=>({...J,assigned_id:X}));se.value=se.value.concat(A),se.value.length>0&&(ue.value=!1)}function Ca(l){ue.value=!0,_e.value=[],Pa(l)}return(l,e)=>(f(),j(Z,null,[a(s(L),null,{default:t(()=>[a(s(w),{size:"12","size-md":"6"},{default:t(()=>[a(s(L),null,{default:t(()=>[a(s(w),null,{default:t(()=>[a(s(h),{style:{margin:"10px","margin-left":"0px","margin-top":"0px","margin-bottom":"10px",color:"grey"}},{default:t(()=>[...e[12]||(e[12]=[g("First name",-1),n("span",{style:{color:"#b42318"}},"*",-1)])]),_:1}),a(Y,{placeholder:b[1].placeHolder,icon:s(qa),inputValue:P.value,"onUpdate:inputValue":b[1].dataHandler},null,8,["placeholder","icon","inputValue","onUpdate:inputValue"]),n("div",null,[b[1].show_error.value?(f(),x(s(h),{key:0,class:"error-label"},{default:t(()=>[g(U(b[1].error_message),1)]),_:1})):R("",!0)])]),_:1})]),_:1}),a(s(L),null,{default:t(()=>[a(s(w),null,{default:t(()=>[a(s(h),{style:{margin:"10px","margin-left":"0px","margin-top":"0px","margin-bottom":"10px",color:"grey"}},{default:t(()=>[...e[13]||(e[13]=[g("Last name",-1),n("span",{style:{color:"#b42318"}},"*",-1)])]),_:1}),a(Y,{placeholder:b[2].placeHolder,icon:s(ja),inputValue:D.value,"onUpdate:inputValue":b[2].dataHandler},null,8,["placeholder","icon","inputValue","onUpdate:inputValue"]),n("div",null,[b[2].show_error.value?(f(),x(s(h),{key:0,class:"error-label"},{default:t(()=>[g(U(b[2].error_message),1)]),_:1})):R("",!0)])]),_:1})]),_:1}),a(s(L),null,{default:t(()=>[a(s(w),null,{default:t(()=>[a(s(h),{style:{margin:"10px","margin-left":"0px","margin-top":"0px","margin-bottom":"10px",color:"grey"}},{default:t(()=>[...e[14]||(e[14]=[g("Username",-1),n("span",{style:{color:"#b42318"}},"*",-1)])]),_:1}),a(Y,{placeholder:b[0].placeHolder,icon:s(Ke),inputValue:k.value,"onUpdate:inputValue":b[0].dataHandler},null,8,["placeholder","icon","inputValue","onUpdate:inputValue"]),n("div",null,[b[0].show_error.value?(f(),x(s(h),{key:0,class:"error-label"},{default:t(()=>[g(U(b[0].error_message),1)]),_:1})):R("",!0)])]),_:1})]),_:1}),a(s(L),null,{default:t(()=>[a(s(w),null,{default:t(()=>[a(s(h),{style:{margin:"10px","margin-left":"0px","margin-top":"0px","margin-bottom":"10px",color:"grey"}},{default:t(()=>[...e[15]||(e[15]=[g("Gender",-1),n("span",{style:{color:"#b42318"}},"*",-1)])]),_:1}),a(tt,{labels:O[0].labels,"selected-opt":O[0].selectedOption.value,onSelectionEvent:O[0].dataHandler},null,8,["labels","selected-opt","onSelectionEvent"]),n("div",null,[O[0].show_error.value?(f(),x(s(h),{key:0,class:"error-label"},{default:t(()=>[g(U(O[0].error_message),1)]),_:1})):R("",!0)])]),_:1})]),_:1}),a(s(L),null,{default:t(()=>[a(s(w),null,{default:t(()=>[a(lt,{onValidateInput:oa}),n("div",null,[M[0].show_error.value?(f(),x(s(h),{key:0,class:"error-label"},{default:t(()=>[g(U(M[0].error_message),1)]),_:1})):R("",!0)])]),_:1})]),_:1})]),_:1}),a(s(w),{size:"12","size-md":"6"},{default:t(()=>[a(s(L),null,{default:t(()=>[(f(),x(s(w),{key:0},{default:t(()=>[a(s(h),{style:{margin:"10px","margin-left":"0px","margin-top":"0px","margin-bottom":"10px",color:"grey"}},{default:t(()=>[...e[16]||(e[16]=[g("District(s)",-1),n("span",{style:{color:"#b42318"}},"*",-1)])]),_:1}),a(s(ce),{modelValue:me.value,"onUpdate:modelValue":[e[0]||(e[0]=r=>me.value=r),e[1]||(e[1]=r=>ea(r))],multiple:!1,taggable:!1,"hide-selected":!0,"close-on-select":!0,openDirection:"bottom","tag-placeholder":"Find and select District(s)",placeholder:"Find and select District(s)",selectLabel:"",label:"name",searchable:!0,onSearchChange:e[2]||(e[2]=()=>{}),"track-by":"name",options:le.value,disabled:ge.value},null,8,["modelValue","options","disabled"]),n("div",null,[m.value?(f(),x(s(h),{key:0,class:"error-label"},{default:t(()=>[g(U(W.value),1)]),_:1})):R("",!0)])]),_:1}))]),_:1}),a(s(L),null,{default:t(()=>[a(s(w),null,{default:t(()=>[a(s(h),{style:{margin:"10px","margin-left":"0px","margin-top":"0px","margin-bottom":"10px",color:"grey"}},{default:t(()=>[...e[17]||(e[17]=[g("Facility name",-1),n("span",{style:{color:"#b42318"}},"*",-1)])]),_:1}),a(s(ce),{modelValue:S.value,"onUpdate:modelValue":[e[3]||(e[3]=r=>S.value=r),e[4]||(e[4]=r=>Le(r))],multiple:!1,taggable:!1,"hide-selected":!0,"close-on-select":!0,openDirection:"bottom","tag-placeholder":"Find and select facility name",placeholder:"Find and select facility name",selectLabel:"",label:"name",searchable:!0,disabled:ge.value,onSearchChange:e[5]||(e[5]=r=>na(r)),"track-by":"code",options:T.value},null,8,["modelValue","disabled","options"]),n("div",null,[K.value?(f(),x(s(h),{key:0,class:"error-label"},{default:t(()=>[g(U(ae.value),1)]),_:1})):R("",!0)])]),_:1})]),_:1}),a(s(L),null,{default:t(()=>[a(s(w),null,{default:t(()=>[a(s(h),{style:{margin:"10px","margin-left":"0px","margin-top":"0px","margin-bottom":"10px",color:"grey"}},{default:t(()=>[...e[18]||(e[18]=[g("TA(s)",-1),n("span",{style:{color:"#b42318"}},"*",-1)])]),_:1}),a(s(ce),{modelValue:Pe.value,"onUpdate:modelValue":[e[6]||(e[6]=r=>Pe.value=r),e[7]||(e[7]=r=>Ze(r))],multiple:!0,taggable:!1,"hide-selected":!0,"close-on-select":!0,openDirection:"bottom","tag-placeholder":"Find and select Traditional Authority (TA)",placeholder:"Find and select Traditional Authority (TA)",selectLabel:"",label:"name",searchable:!0,onSearchChange:e[8]||(e[8]=()=>{}),"track-by":"assigned_id",options:ie.value,disabled:de.value},null,8,["modelValue","options","disabled"]),n("div",null,[te.value?(f(),x(s(h),{key:0,class:"error-label"},{default:t(()=>[g(U(z.value),1)]),_:1})):R("",!0)])]),_:1})]),_:1}),a(s(L),null,{default:t(()=>[a(s(w),null,{default:t(()=>[a(s(h),{style:{margin:"10px","margin-left":"0px","margin-top":"0px","margin-bottom":"10px",color:"grey"}},{default:t(()=>[...e[19]||(e[19]=[g("Village(s)",-1),n("span",{style:{color:"#b42318"}},"*",-1)])]),_:1}),a(s(ce),{modelValue:_e.value,"onUpdate:modelValue":[e[9]||(e[9]=r=>_e.value=r),e[10]||(e[10]=r=>Ye(r))],multiple:!0,taggable:!1,"hide-selected":!0,"close-on-select":!0,openDirection:"bottom","tag-placeholder":"Find and select village(s)",placeholder:"Find and select village(s)",selectLabel:"",label:"name",searchable:!0,onSearchChange:e[11]||(e[11]=()=>{}),"track-by":"assigned_id",options:se.value,disabled:de.value},null,8,["modelValue","options","disabled"]),n("div",null,[B.value?(f(),x(s(h),{key:0,class:"error-label"},{default:t(()=>[g(U(i.value),1)]),_:1})):R("",!0)])]),_:1})]),_:1})]),_:1})]),_:1}),a(s(L),null,{default:t(()=>[a(s(w),{size:"12","size-md":"6"},{default:t(()=>[a(s(L),null,{default:t(()=>[a(s(w),null,{default:t(()=>[a(s(w),null,{default:t(()=>[a(s(h),{style:{margin:"10px","margin-left":"0px","margin-top":"0px",color:"grey"}},{default:t(()=>[...e[20]||(e[20]=[g("Role(s)",-1),n("span",{style:{color:"#b42318"}},"*",-1)])]),_:1}),a(Oe,{multiSelection:v[0].multi_Selection,show_label:v[0].show_list_label,uniqueId:v[0].unqueId,name_of_list:v[0].name_of_list,choose_place_holder:v[0].placeHolder,"items_-list":d.value,use_internal_filter:v[0].use_internal_filter,disabled:v[0].disabled.value,onItemListUpDated:v[0].listUpdatedFN,onItemListFiltered:v[0].listFilteredFN,onItemSearchText:v[0].searchTextFN},null,8,["multiSelection","show_label","uniqueId","name_of_list","choose_place_holder","items_-list","use_internal_filter","disabled","onItemListUpDated","onItemListFiltered","onItemSearchText"]),n("div",null,[v[0].show_error.value?(f(),x(s(h),{key:0,class:"error-label",style:{"margin-top":"-10px"}},{default:t(()=>[g(U(v[0].error_message),1)]),_:1})):R("",!0)])]),_:1})]),_:1})]),_:1}),a(s(L),null,{default:t(()=>[a(s(w),null,{default:t(()=>[a(s(h),{style:{margin:"10px","margin-left":"0px","margin-top":"0px",color:"grey"}},{default:t(()=>[...e[21]||(e[21]=[g("Program(s)",-1),n("span",{style:{color:"#b42318"}},"*",-1)])]),_:1}),a(Oe,{multiSelection:v[1].multi_Selection,show_label:v[1].show_list_label,uniqueId:v[1].unqueId,name_of_list:v[1].name_of_list,choose_place_holder:v[1].placeHolder,"items_-list":_.value,use_internal_filter:v[1].use_internal_filter,disabled:v[1].disabled.value,onItemListUpDated:v[1].listUpdatedFN,onItemListFiltered:v[1].listFilteredFN,onItemSearchText:v[1].searchTextFN},null,8,["multiSelection","show_label","uniqueId","name_of_list","choose_place_holder","items_-list","use_internal_filter","disabled","onItemListUpDated","onItemListFiltered","onItemSearchText"]),n("div",null,[v[1].show_error.value?(f(),x(s(h),{key:0,class:"error-label"},{default:t(()=>[g(U(v[1].error_message),1)]),_:1})):R("",!0)])]),_:1}),a(s(w))]),_:1}),a(s(L),null,{default:t(()=>[a(s(w),null,{default:t(()=>[a(s(h),{style:{margin:"10px","margin-left":"0px","margin-top":"0px","margin-bottom":"10px",color:"grey"}},{default:t(()=>[...e[22]||(e[22]=[g("Password",-1),n("span",{style:{color:"#b42318"}},"*",-1)])]),_:1}),a(Y,{placeholder:H[0].placeHolder,icon:s(Ne),inputValue:H[0].dataValue.value,"onUpdate:inputValue":H[0].dataHandler},null,8,["placeholder","icon","inputValue","onUpdate:inputValue"]),n("div",null,[H[0].show_error.value?(f(),x(s(h),{key:0,class:"error-label"},{default:t(()=>[g(U(H[0].error_message),1)]),_:1})):R("",!0)])]),_:1})]),_:1}),a(s(L),null,{default:t(()=>[a(s(w),null,{default:t(()=>[a(s(h),{style:{margin:"10px","margin-left":"0px","margin-top":"0px","margin-bottom":"10px",color:"grey"}},{default:t(()=>[...e[23]||(e[23]=[g("Repeat password",-1),n("span",{style:{color:"#b42318"}},"*",-1)])]),_:1}),a(Y,{placeholder:H[1].placeHolder,icon:s(Ne),inputValue:H[1].dataValue.value,"onUpdate:inputValue":H[1].dataHandler},null,8,["placeholder","icon","inputValue","onUpdate:inputValue"]),n("div",null,[H[1].show_error.value?(f(),x(s(h),{key:0,class:"error-label"},{default:t(()=>[g(U(H[1].error_message),1)]),_:1})):R("",!0)])]),_:1})]),_:1})]),_:1}),a(s(w),{size:"12","size-md":"6"})]),_:1})],64))}}),It=ee(Vt,[["__scopeId","data-v-731a8d5a"]]),xt={style:{display:"flex","align-items":"center"}},St={style:{"font-weight":"400","font-size":"19px"}},Ut={style:{display:"flex","align-items":"center"}},Pt={class:""},Ct={class:"center text_12"},Lt={style:{"font-weight":"400","font-size":"20px"}},kt={style:{display:"flex","align-items":"center"}},Ft=G({watch:{},name:"xxxComponent"}),At=G({...Ft,props:{is_open:{},user_id:{}},emits:["closePopoover","updated","reload"],setup(u,{emit:c}){const k=o(""),P=o(!1),D=o(),F=c;function d(){k.value=N(100,3)}function _(){Qa.dismiss()}function y(){F("reload","")}function I(C){D.value=C,C&&rt("User created successfully with id: "+D),F("updated",C),_()}function N(C,p){const $=S=>{const T=S==="number"?48:S==="uppercase"?65:97;return String.fromCharCode(Math.floor(Math.random()*(S==="number"?10:26))+T)};return Array.from({length:C},()=>Array.from({length:p},()=>$(["number","uppercase","lowercase"][Math.floor(Math.random()*3)])).join(""))}return(C,p)=>{const $=V("ion-icon"),S=V("ion-row");return f(),j(Z,null,[a(s(Ga),{"is-open":u.is_open,"show-backdrop":!0,onDidDismiss:p[1]||(p[1]=T=>C.$emit("closePopoover",!1)),"keyboard-close":!1},{default:t(()=>[a(s(Ka),null,{default:t(()=>[a(s($e),null,{default:t(()=>[a(s(we),null,{default:t(()=>[n("div",xt,[a($,{icon:s(We),class:"sub-menu-icon"},null,8,["icon"]),p[3]||(p[3]=n("b",{style:{"margin-left":"6px"}},"Add User",-1))])]),_:1}),a(s(Te),{slot:"end"},{default:t(()=>[a(s(we),null,{default:t(()=>[a(s(Me),{onClick:p[0]||(p[0]=T=>C.$emit("closePopoover",!1)),fill:"solid"},{default:t(()=>[n("span",St,[n("div",Ut,[a($,{icon:s(Wa),slot:"start",class:"sub-menu-icon"},null,8,["icon"]),p[4]||(p[4]=n("span",{style:{"margin-left":"6px"}},"Close",-1))])])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),a(s(xe),{class:"ion-padding"},{default:t(()=>[n("div",Pt,[n("div",Ct,[a(S,null,{default:t(()=>[a(s(w),null,{default:t(()=>[a(It,{user_id:D.value,action:k.value,onSaveEvent:I},null,8,["user_id","action"])]),_:1})]),_:1})])])]),_:1}),a(s(qe),{translucent:!0},{default:t(()=>[a(s($e),null,{default:t(()=>[a(s(Te),{slot:"end"},{default:t(()=>[a(s(we),null,{default:t(()=>[a(s(Me),{onClick:d,fill:"solid",color:"success"},{default:t(()=>[n("span",Lt,[n("div",kt,[a($,{icon:s(Ja),slot:"start",class:"sub-menu-icon"},null,8,["icon"]),p[5]||(p[5]=n("span",{style:{"margin-left":"6px"}},"Save",-1))])])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["is-open"]),a(Je,{is_open:P.value,user_id:D.value,onClosePopoover:p[2]||(p[2]=T=>P.value=!1),onUpdated:y},null,8,["is_open","user_id"])],64)}}}),Et=ee(At,[["__scopeId","data-v-79045015"]]),Dt=G({__name:"usersTemplate",props:{items:{},search_fields:{}},emits:["reload","closeModal"],setup(u,{emit:c}){const k=o(""),P=o(!1),D=o(""),F={name:"add user",show:!0,fn:_,icon:We,show_icon:!0},d=[{placeHolder:"Search for username",dataHandler:y,dataValue:o(),show_error:o(!1),error_message:"Please provide a reason"}];function _(){P.value=!0,D.value=""}function y(p){k.value=p.target.value}function I(p){C("reload",p)}function N(p){C("closeModal",p)}const C=c;return(p,$)=>(f(),j(Z,null,[a(s(L),{class:"search-container"},{default:t(()=>[a(s(L),{class:"search-row"},{default:t(()=>[a(s(w),{class:"input-col"},{default:t(()=>[a(Y,{placeholder:d[0].placeHolder,icon:s(Xa),inputValue:d[0].dataValue.value,"onUpdate:inputValue":d[0].dataHandler,minHeight:50,"-inner-action-btn-propeties":F,"onUpdate:InnerActionBtnPropetiesAction":F.fn},null,8,["placeholder","icon","inputValue","onUpdate:inputValue","onUpdate:InnerActionBtnPropetiesAction"])]),_:1})]),_:1})]),_:1}),a(s(L),null,{default:t(()=>[a(s(w),{size:"12"},{default:t(()=>[a(bt,{users:u.items,filterValue:k.value,onReload:N,search:k.value},null,8,["users","filterValue","search"])]),_:1})]),_:1}),a(Et,{is_open:P.value,user_id:D.value,onClosePopoover:$[0]||($[0]=S=>P.value=!1),onUpdated:I},null,8,["is_open","user_id"])],64))}}),Ht=ee(Dt,[["__scopeId","data-v-06560bf6"]]),Nt=G({name:"TableSkeletonLoader"}),$t={class:"skeleton-wrapper"},Tt={class:"cards-grid"},Mt={class:"card-content"};function Ot(u,c,k,P,D,F){return f(),j("div",$t,[c[2]||(c[2]=Ya('<div class="search-bar" data-v-d6f00683><div class="search-container" data-v-d6f00683><div class="search-label skeleton-text" data-v-d6f00683></div><div class="search-chip" data-v-d6f00683></div><div class="add-button" data-v-d6f00683></div></div></div>',1)),n("div",Tt,[(f(),j(Z,null,Ie(6,d=>n("div",{key:"card-".concat(d),class:"skeleton-card"},[c[1]||(c[1]=n("div",{class:"card-header"},[n("div",{class:"role-text small-skeleton"}),n("div",{class:"name-text large-skeleton"})],-1)),n("div",Mt,[(f(),j(Z,null,Ie(4,_=>n("div",{class:"info-row",key:"field-".concat(_)},[...c[0]||(c[0]=[n("div",{class:"label-skeleton"},null,-1),n("div",{class:"value-skeleton"},null,-1)])])),64))])])),64))])])}const Rt=ee(Nt,[["render",Ot],["__scopeId","data-v-d6f00683"]]),zt=G({name:"Users",components:{IonContent:xe,IonPage:je,IonRow:L,IonCol:w,IonIcon:Be,Toolbar:it,usersTemplate:Ht,NavigationMenu:ct,TableSkeletonLoader:Rt},setup(){const u=o(!1),c=o(!0),k=o([{value:"username",name:"username",selected:!0}]),P=o(""),D=o([]);Se(async()=>{y(),await F()});async function F(){c.value=!1}function d(I){I==!1&&setTimeout(()=>{F()},500)}function _(I){ut.push(I)}function y(){pt().setNavigationPayload("Manage Users",!0,!1,"/","home","")}return{isPopooverOpen:u,user_id:P,_items_:D,search_fields_:k,nav:_,chevronBackOutline:Za,initNavData:y,getUsers:F,isLoading:c,closeModal:d}},watch:{$route:{async handler(u){u.name=="users"&&this.initNavData(),await this.getUsers()},deep:!0}}});function Bt(u,c,k,P,D,F){const d=V("NavigationMenu"),_=V("TableSkeletonLoader"),y=V("usersTemplate"),I=V("ion-content"),N=V("ion-page");return f(),x(N,null,{default:t(()=>[a(d),a(I,{fullscreen:!0},{default:t(()=>[u.isLoading?(f(),x(_,{key:0})):(f(),x(y,{key:1,items:u._items_,search_fields:u.search_fields_,onReload:u.getUsers,onCloseModal:u.closeModal},null,8,["items","search_fields","onReload","onCloseModal"]))]),_:1})]),_:1})}const Xt=ee(zt,[["render",Bt],["__scopeId","data-v-15fbe288"]]);export{Xt as default};
