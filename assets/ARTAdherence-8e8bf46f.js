import{Q as B,d as O,b5 as M,aa as W,aH as G,aI as U,aJ as $,aK as L,L as N,M as z,G as F,D as j,b7 as q,bq as H,br as J,V as K,I as Q,ae as Y,a as X,bx as Z,cT as x,E as u,e as s,f as l,l as i,z as r,A as g,j as a,F as m,J as v,B as _}from"./vendor-65256339.js";import{l as C}from"./lodash-7be49fbd.js";import{u as ee,_ as oe}from"./index-e9c24b53.js";import{A as ae}from"./adherence_service-89505324.js";import"./apexcharts-583f3fdc.js";import"./chartjs-bbe0813a.js";import"./barcode-qrcode-reader-d9469be9.js";const S={lastVisitDate:"29/Apr/2023",daysElapsed:40,medications:[{name:"Cotrimoxazole (960mg)",remaining:0,tabsGiven:184,tabsPer:"1 OOD",expected:0,actual:0,dosesMissed:100,dosesConsumed:65,adherenceStatus:"Explore problem"},{name:"TDF300/3TC300/DTG50",remaining:0,tabsGiven:184,tabsPer:"1 OOD",expected:0,actual:0,dosesMissed:100,dosesConsumed:65,adherenceStatus:"Explore problem"}],agreeWithCalculation:!0},te=B("ARTAdherence",{state:()=>C.cloneDeep(S),actions:{updateMedicationRemaining(o,e){o>=0&&o<this.medications.length&&(this.medications[o].remaining=e)},updateExpected(o,e){o>=0&&o<this.medications.length&&(this.medications[o].expected=e)},updateActual(o,e){o>=0&&o<this.medications.length&&(this.medications[o].actual=e)},setAgreeWithCalculation(o){this.agreeWithCalculation=o},resetState(){Object.assign(this,C.cloneDeep(S))},calculateAdherence(){}}}),ne=O({name:"ARTAdherence",components:{IonPage:M,IonContent:W,IonCard:G,IonCardHeader:U,IonCardTitle:$,IonCardContent:L,IonAccordion:N,IonAccordionGroup:z,IonItem:F,IonLabel:j,IonInput:q,IonRadio:H,IonRadioGroup:J,IonButton:K,IonIcon:Q},setup(){const o=Y(),e=te(),w=ee();return X(async()=>{var c;try{const d=(c=w.patient)==null?void 0:c.patient_id,h=1;if(d){const f=new ae(d,h);await f.loadPreviousDrugs(),f.receivedDrugsBefore()}}catch(d){console.error("Error initializing adherence data:",d)}}),{adherenceStore:e,chevronBackOutline:Z,chevronDownOutline:x,goBackToProfile:()=>{o.push("/patientProfile")},updateRemaining:(c,d)=>{const h=d.detail.value?parseInt(d.detail.value):0;e.updateMedicationRemaining(c,h)},updateExpected:(c,d)=>{const h=d.detail.value?parseInt(d.detail.value):0;e.updateExpected(c,h)},updateActual:(c,d)=>{const h=d.detail.value?parseInt(d.detail.value):0;e.updateActual(c,h)},updateAgreeWithCalculation:c=>{e.setAgreeWithCalculation(c.detail.value==="yes")},saveAdherence:()=>{console.log("Adherence data saved:",e.$state)}}}});const se={class:"container"},le={class:"ion-padding",slot:"content"},ie={class:"medication-section"},de={class:"medication-inputs"},re={class:"medication-name"},ce={class:"ion-padding",slot:"content"},ue={class:"last-visit"},pe={class:"adherence-table"},me={class:"table-header"},ve={class:"table-row"},he={class:"table-row"},_e={class:"table-row header-row"},ge={class:"table-row"},be={class:"table-row"},fe={class:"table-row header-row"},we={class:"table-row"},Ae={class:"table-row"},Ie={class:"table-row"},Ce={class:"agree-section"},Se={class:"radio-options"},ye={class:"save-button-container"};function Ve(o,e,w,y,V,k){const A=u("ion-card-title"),I=u("ion-card-header"),b=u("ion-label"),c=u("ion-item"),d=u("ion-input"),h=u("ion-accordion"),f=u("ion-radio"),D=u("ion-radio-group"),T=u("ion-accordion-group"),R=u("ion-button"),E=u("ion-card-content"),P=u("ion-card");return s(),l("div",se,[i(P,{class:"adherence-card"},{default:r(()=>[i(I,null,{default:r(()=>[i(A,null,{default:r(()=>e[1]||(e[1]=[g("ART adherence")])),_:1,__:[1]})]),_:1}),i(E,null,{default:r(()=>[i(T,null,{default:r(()=>[i(h,{value:"pills","toggle-icon":o.chevronDownOutline},{default:r(()=>[i(c,{slot:"header",color:"light"},{default:r(()=>[i(b,null,{default:r(()=>e[2]||(e[2]=[g("Pills remaining (brought to clinic)")])),_:1,__:[2]})]),_:1}),a("div",le,[a("div",ie,[e[3]||(e[3]=a("div",{class:"medication-header"},"Medication (enter amount remaining for each drug)",-1)),a("div",de,[(s(!0),l(m,null,v(o.adherenceStore.medications,(t,n)=>(s(),l("div",{class:"medication-row",key:n},[a("div",re,_(t.name),1),i(d,{type:"number",placeholder:"0",class:"pill-input",modelValue:t.remaining,"onUpdate:modelValue":p=>t.remaining=p,onIonChange:p=>o.updateRemaining(n,p)},null,8,["modelValue","onUpdate:modelValue","onIonChange"])]))),128))])])])]),_:1},8,["toggle-icon"]),i(h,{value:"arv","toggle-icon":o.chevronDownOutline},{default:r(()=>[i(c,{slot:"header",color:"light"},{default:r(()=>[i(b,null,{default:r(()=>e[4]||(e[4]=[g("ARV adherence")])),_:1,__:[4]})]),_:1}),a("div",ce,[a("div",ue,"Last visit: "+_(o.adherenceStore.lastVisitDate)+" ("+_(o.adherenceStore.daysElapsed)+" days elapsed)",1),a("div",pe,[a("div",me,[e[5]||(e[5]=a("div",{class:"header-cell"},"Prescription",-1)),(s(!0),l(m,null,v(o.adherenceStore.medications,(t,n)=>(s(),l("div",{class:"header-cell",key:n},_(t.name),1))),128))]),a("div",ve,[e[6]||(e[6]=a("div",{class:"row-label"},"Tabs given",-1)),(s(!0),l(m,null,v(o.adherenceStore.medications,(t,n)=>(s(),l("div",{class:"row-value",key:n},_(t.tabsGiven),1))),128))]),a("div",he,[e[7]||(e[7]=a("div",{class:"row-label"},"Tabs per",-1)),(s(!0),l(m,null,v(o.adherenceStore.medications,(t,n)=>(s(),l("div",{class:"row-value",key:n},_(t.tabsPer),1))),128))]),a("div",_e,[e[8]||(e[8]=a("div",{class:"row-label"},"Tabs remaining",-1)),(s(!0),l(m,null,v(o.adherenceStore.medications,(t,n)=>(s(),l("div",{class:"row-value",key:n}))),128))]),a("div",ge,[e[9]||(e[9]=a("div",{class:"row-label"},"Expected",-1)),(s(!0),l(m,null,v(o.adherenceStore.medications,(t,n)=>(s(),l("div",{class:"row-value",key:n},[i(d,{type:"number",placeholder:"0",class:"adherence-input",modelValue:t.expected,"onUpdate:modelValue":p=>t.expected=p,onIonChange:p=>o.updateExpected(n,p)},null,8,["modelValue","onUpdate:modelValue","onIonChange"])]))),128))]),a("div",be,[e[10]||(e[10]=a("div",{class:"row-label"},"Actual (counted)",-1)),(s(!0),l(m,null,v(o.adherenceStore.medications,(t,n)=>(s(),l("div",{class:"row-value",key:n},[i(d,{type:"number",placeholder:"0",class:"adherence-input",modelValue:t.actual,"onUpdate:modelValue":p=>t.actual=p,onIonChange:p=>o.updateActual(n,p)},null,8,["modelValue","onUpdate:modelValue","onIonChange"])]))),128))]),a("div",fe,[e[11]||(e[11]=a("div",{class:"row-label"},"Adherence",-1)),(s(!0),l(m,null,v(o.adherenceStore.medications,(t,n)=>(s(),l("div",{class:"row-value",key:n}))),128))]),a("div",we,[e[12]||(e[12]=a("div",{class:"row-label"},"Doses missed / Unaccounted for",-1)),(s(!0),l(m,null,v(o.adherenceStore.medications,(t,n)=>(s(),l("div",{class:"row-value",key:n},_(t.dosesMissed)+" missed ",1))),128))]),a("div",Ae,[e[13]||(e[13]=a("div",{class:"row-label"},"Doses consumed",-1)),(s(!0),l(m,null,v(o.adherenceStore.medications,(t,n)=>(s(),l("div",{class:"row-value",key:n},_(t.dosesConsumed)+"% ",1))),128))]),a("div",Ie,[e[14]||(e[14]=a("div",{class:"row-label"},"ARTadherence",-1)),(s(!0),l(m,null,v(o.adherenceStore.medications,(t,n)=>(s(),l("div",{class:"row-value error-text",key:n},_(t.adherenceStatus),1))),128))])]),a("div",Ce,[e[17]||(e[17]=a("div",{class:"agree-label"},[g("Agree with adherence calculation "),a("span",{class:"required"},"*")],-1)),a("div",Se,[i(D,{value:o.adherenceStore.agreeWithCalculation?"yes":"no",onIonChange:e[0]||(e[0]=t=>o.updateAgreeWithCalculation(t))},{default:r(()=>[i(c,{lines:"none"},{default:r(()=>[i(b,null,{default:r(()=>e[15]||(e[15]=[g("Yes")])),_:1,__:[15]}),i(f,{slot:"start",value:"yes"})]),_:1}),i(c,{lines:"none"},{default:r(()=>[i(b,null,{default:r(()=>e[16]||(e[16]=[g("No")])),_:1,__:[16]}),i(f,{slot:"start",value:"no"})]),_:1})]),_:1},8,["value"])])])])]),_:1},8,["toggle-icon"])]),_:1}),a("div",ye,[i(R,{class:"save-button",onClick:o.saveAdherence},{default:r(()=>e[18]||(e[18]=[g("Save")])),_:1,__:[18]},8,["onClick"])])]),_:1})]),_:1})])}const Oe=oe(ne,[["render",Ve],["__scopeId","data-v-caa1807f"]]);export{Oe as default};
