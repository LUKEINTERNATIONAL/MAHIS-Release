import{d as J,ab as Fe,G as mt,E as vt,ac as ft,ad as Ve,a2 as Q,I as gt,a7 as _t,bd as Be,aR as ht,H as Y,e as h,f as o,k as a,l as n,aS as Ce,r as l,c as W,a as ye,m as S,O as L,J as p,u as r,Q as V,F as Z,an as $e,ee as rn,ef as cn,eg as un,as as dn,ay as pn,w as de,ap as yt,bP as mn,P as ue,aG as vn,K as $,p as Ae,bC as fn,L as Te,eh as nt,ei as at,b5 as Le,ej as st,ek as ot,cT as it,el as lt,em as rt,en as ct,cY as ut,bO as gn,ar as _n,bW as hn,_ as le,af as je,ae as ve,N as oe,bq as ie,a8 as yn,R as bn,bi as Ye,b0 as Dn,bk as Cn,a6 as wn,bU as Sn,bF as In,a9 as dt}from"./vendor-DpZZY0VV.js";import{bc as He,H as we,af as z,be as bt,bd as Dt,a$ as Ct,u as Se,_ as ce,k as Ee,az as Oe,aA as Re,M as De,N as be,S as he,aS as K,t as re,K as xe,aM as pe,aN as wt,bD as kn,bE as Pn,bu as En,b7 as ge,b9 as _e,bF as xn,aP as Nn,P as An,aT as pt,aZ as On,s as $n,aH as Pe,n as Mn,br as Tn,aI as Ln,aq as Fn}from"./index-CSx4mJoz.js";import{l as fe}from"./lodash-NJiRuGo9.js";import{P as Bn}from"./patient_complaints_service-BQ24ZfZX.js";import{D as St}from"./DashBox-CeOmQEzy.js";import{u as Rn}from"./useExposeFromStandardForm-BuGfFn8O.js";import{B as Ke}from"./BasicForm-FM4WogzA.js";import{f as Qe,c as It,a as kt}from"./formatServerData-Cpwl4DGI.js";import{A as Vn,P as Hn,D as Un,m as Gn}from"./NextAppointment-alIDQHIu.js";import{D as qn,b as Wn}from"./drug_prescription_service-Cz6WQa2j.js";import{D as zn}from"./drug_service-BUkKIHP5.js";import{D as Yn,A as jn,R as Kn,a as Qn}from"./Outcome-YPzsLUyV.js";const Xn=J({name:"Menu",components:{IonContent:_t,IonHeader:gt,IonItem:Q,IonList:Ve,IonMenu:ft,IonTitle:vt,IonToolbar:mt,List:He},computed:{...Fe(Se,["patient"]),...Fe(Ct,["presentingComplaints"])},data(){return{valueNumericArray:[],obsDatetime:[],graphIcon:Dt(["#006401"]),listIcon:bt(["#636363"]),displayGraph:!0,orders:[],height:[],BMI:[],iconBg:{},activeWeight:[],activeHeight:[],activeBMI:[],list:[],series:[{name:"",data:[]}]}},setup(){return{checkmark:ht,pulseOutline:Be}},watch:{$router:{async handler(){await this.updateList()},immediate:!0,deep:!0},patient:{async handler(){await this.updateList()},deep:!0}},async mounted(){await this.updateList()},methods:{async updateList(){const t=await z.getAll(this.patient.patientID,"Presenting complaint"),s=fe.isEmpty(t)?[]:Promise.all(t.map(async c=>c.value_coded?{name:await z.getConceptName(c.value_coded),obs_date:c.obs_datetime,duration:c.children[0].value_text}:[]));this.setListData(await s)},setListData(t){this.list=[],this.list.push({actionBtn:!1,class:"col_background",header:!0,minHeight:"--min-height: 20px;",containSize:4,display:["Date","Presenting Complains","Duration"]}),t.forEach(s=>{this.list.push({actionBtn:!1,minHeight:"--min-height:20px;",class:"col_background",containSize:4,display:[we.toStandardHisFormat(s.obs_date),s.name,s.duration]})})}}}),Jn={class:"modal_wrapper"};function Zn(t,s,c,u,v,d){const _=Y("list");return o(),h("div",Jn,[a("div",null,[n(_,{listData:t.list},null,8,["listData"])])])}const ea=ce(Xn,[["render",Zn],["__scopeId","data-v-30434e22"]]),ta={key:0},na={style:{"align-content":"center"}},aa={class:"ion-padding",slot:"content"},sa=J({__name:"PresentingComplaints",setup(t,{expose:s}){const c=Ct(),{presentingComplaints:u}=Ce(c),v=l(Ee),d=l(!0),_=l(!1),B=l(!0),k=l(!1),I=l([]),x=l([]),C=l(),U=W(()=>[{componentType:"multiSelectInputField",header:"Presenting Complaints",name:"PresentingComplaints",trackBy:"concept_id",icon:Ee.search,hideSelected:!0,validation:b=>O(b==null?void 0:b.name,I.value)?"Presenting complaint already added":Oe.required(b),options:x.value,grid:{s:"6"}},{componentType:"inputField",header:"Duration",name:"duration",icon:Ee.time,validation:b=>Oe.isNotEmptyandNumber(b),grid:{s:"6"},unitOptions:[{label:"Hours",value:"Hours"},{label:"Days",value:"Days"},{label:"Weeks",value:"Weeks"},{label:"Months",value:"Months"},{label:"Years",value:"Years"}],unitValidation:b=>!b||b===""?"Please select a unit.":null},{componentType:"inputField",header:"Specify the presenting complaint(s)",name:"Other (specify)",icon:Ee.editPen,validation:b=>O(b,I.value)?"Presenting complaint already added":Oe.required(b),condition:b=>{var P;return((P=b==null?void 0:b.PresentingComplaints)==null?void 0:P.name)==="Other"}},{componentType:"Alert",condition:b=>{var P;return Oe.required((P=b==null?void 0:b.PresentingComplaints)==null?void 0:P.name)!=null},backgroundColor:"lightyellow",textColor:"black",value:"Please search thoroughly for the complaint. If it is not listed, search and select the 'Other' option to specify the complaint.",name:"noMatchAlert"}]),{formRef:i}=Rn(),y=async()=>{x.value=await Bn.getComplaintsList("Presenting complaint"),be(u.value,"PresentingComplaints","multiSelectData",x.value)},A=()=>{d.value=!1,B.value=!1,_.value=!0},w=async()=>{var R,m;const b=(R=i.value)==null?void 0:R.getFormValues();((m=i.value)==null?void 0:m.validateForm())==null&&(M(b),_.value=!1,B.value=!0)},M=b=>{var e;const P=b.duration+" "+b.duration_unit,R=b.PresentingComplaints,m=R.name==="Other"?b["Other (specify)"]:R.name;I.value.push({actionBtn:!0,btn:["delete"],name:m,concept_id:R.concept_id,duration:R.duration,durationUnits:R.duration_unit,display:[m,P],data:[{concept_id:8578,value_coded:R.concept_id,obs_datetime:he.getSessionDate(),child:[{concept_id:R.concept_id,value_text:P,obs_datetime:he.getSessionDate()}]}]}),(e=i.value)==null||e.resetForm(),k.value=!0},O=(b,P)=>P.some(R=>R.name===b),F=b=>{I.value=I.value.filter(P=>P.display[0]!==b.name)},T=async()=>{const b=await z.getObsByEncounterIdAndDate(K.PRESENTING_COMPLAINTS),P=I.value.flatMap(R=>R.data);if(P.length<=0&&b.length<=0)return re("Presenting complaints is required");P.length<=0||(await z.addObsToEncounterPatient(P,K.PRESENTING_COMPLAINTS),xe("Presenting complaints saved successful"),I.value=[])};return ye(async()=>{await y()}),s({onSubmit:T}),(b,P)=>{const R=Y("ion-row"),m=Y("ion-label"),e=Y("ion-accordion"),E=Y("ion-accordion-group");return o(),h(Z,null,[n(St,{status:d.value,content:"No presenting complaints added"},null,8,["status"]),k.value?(o(),h("span",ta,[n(He,{listData:I.value,"onClicked:delete":F},null,8,["listData"])])):S("",!0),_.value?(o(),L(R,{key:1},{default:p(()=>[n(Re,{formData:U.value,ref_key:"formRef",ref:i},null,8,["formData"]),a("div",na,[n(De,{fill:"clear",icon:v.value.plus,iconSlot:"icon-only","onClicked:btn":P[0]||(P[0]=N=>w()),name:"Save"},null,8,["icon"])])]),_:1})):S("",!0),B.value?(o(),L(R,{key:2,style:{"margin-top":"10px"}},{default:p(()=>[n(De,{fill:"clear",icon:v.value.plus,iconSlot:"icon-only","onClicked:btn":P[1]||(P[1]=N=>A()),name:"Add new presenting complaints"},null,8,["icon"])]),_:1})):S("",!0),n(R,null,{default:p(()=>[n(E,{ref_key:"accordionGroup",ref:C,class:"previousView"},{default:p(()=>[n(e,{value:"first","toggle-icon-slot":"start",style:{"border-radius":"10px","background-color":"#fff"}},{default:p(()=>[n(r(Q),{slot:"header",color:"light"},{default:p(()=>[n(m,{class:"previousLabel"},{default:p(()=>[...P[2]||(P[2]=[V("Previous presenting complaints",-1)])]),_:1})]),_:1}),a("div",aa,[n(ea)])]),_:1})]),_:1},512)]),_:1})],64)}}}),oa=ce(sa,[["__scopeId","data-v-a95bcc0f"]]),ia=W(()=>[{componentType:"radioButtonField",header:"Eye opening response",name:"Eye opening response",obsValueType:"value_coded",type:"inline",options:[{label:"Spontaneously",value:"Spontaneously"},{label:"To speech",value:"To speech"},{label:"To pain",value:"To pain"},{label:"No response",value:"No response"}]},{componentType:"Dashes"},{componentType:"radioButtonField",header:"Best verbal response",name:"Best verbal response",obsValueType:"value_coded",type:"inline",options:[{label:"Oriented to time, place and person",value:"Oriented to time, place and person"},{label:"Confused",value:"Confused"},{label:"Inappropriate words",value:"Inappropriate words"},{label:"Incomprehensible sounds",value:"Incomprehensible sounds"},{label:"No response",value:"No response"}]},{componentType:"Dashes"},{componentType:"radioButtonField",header:"Best motor response",name:"Best motor response",obsValueType:"value_coded",type:"inline",options:[{label:"Obeys commands",value:"Obeys commands"},{label:"Moves to localised pain",value:"Moves to localised pain"},{label:"Flexion withdrawal from pain",value:"Flexion withdrawal from pain"},{label:"Abnormal flexion (decorticate)",value:"Abnormal flexion (decorticate)"},{label:"Abnormal extension (decerebrate)",value:"Abnormal extension (decerebrate)"},{label:"No response",value:"No response"}]}]),la=W(()=>[{componentType:"radioButtonField",header:"Eye opening response",name:"Eye opening response",obsValueType:"value_coded",type:"inline",options:[{label:"Directed eye movements",value:"Directed eye movements"},{label:"Not directed",value:"Not directed"}]},{componentType:"Dashes"},{componentType:"radioButtonField",header:"Best verbal response",name:"Best verbal response",obsValueType:"value_coded",type:"inline",options:[{label:"Appropriate cry",value:"Appropriate cry"},{label:"Inappropriate cry or moan",value:"Inappropriate cry or moan"},{label:"No cry",value:"No cry"}]},{componentType:"Dashes"},{componentType:"radioButtonField",header:"Best motor response",name:"Best motor response",obsValueType:"value_coded",type:"inline",options:[{label:"Localizes pain",value:"Localizes pain"},{label:"Withdraws from pain",value:"Withdraws from pain"},{label:"Non specific or no response",value:"Non specific or no response"}]}]),Pt={Spontaneously:4,"To speech":3,"To pain":2,"No response":1},Et={"Oriented to time, place and person":5,Confused:4,"Inappropriate words":3,"Incomprehensible sounds":2,"No response":1},xt={"Obeys commands":6,"Moves to localised pain":5,"Flexion withdrawal from pain":4,"Abnormal flexion (decorticate)":3,"Abnormal extension (decerebrate)":2,"No response":1},Nt={"Not directed":0,"Directed eye movements":1},At={"Non specific or no response":0,"Withdraws from pain":1,"Localizes pain":2},Ot={"No cry":0,"Inappropriate cry or moan":1,"Appropriate cry":2},ra={class:"allergies-container"},ca={key:0,class:"no-allergies"},ua={key:1,class:"date-groups"},da=["onClick"],pa={class:"date-info"},ma={class:"date-text"},va={class:"allergy-count"},fa={class:"card-header"},ga={class:"allergy-type"},_a={class:"card-content"},ha=J({__name:"AllergiesListing",setup(t){const s=Se(),{patient:c}=Ce(s),u=l({}),v={antiviral:/abacavir|lamivudine|lopinavir|ritonavir|zidovudine|efavirenz|tenofovir/i,antibiotic:/penicillin|amoxicillin|cephalexin|azithromycin|ciprofloxacin|doxycycline/i,analgesic:/aspirin|ibuprofen|acetaminophen|morphine|codeine|tramadol/i,cardiac:/metoprolol|lisinopril|amlodipine|atorvastatin|warfarin/i,activated:/activated\s+charcoal/i},d={985:{name:"Other",icon:$e,severity:"danger"},7759:{name:"Location/Environmental",icon:pn,severity:"info"},7579:{name:"Medical Condition",icon:dn,severity:"warning"},drug:{name:"Drug Allergy",icon:$e,severity:"danger"},food:{name:"Food Allergy",icon:un,severity:"danger"},environmental:{name:"Environmental",icon:cn,severity:"warning"},contact:{name:"Contact Allergy",icon:rn,severity:"warning"},unknown:{name:"Drug Allergy",icon:$e,severity:"danger"}},_=i=>{const y=i.toLowerCase();return v.antiviral.test(y)?{type:"Antiviral Medication",icon:"shield-outline"}:v.antibiotic.test(y)?{type:"Antibiotic",icon:"bandage-outline"}:v.analgesic.test(y)?{type:"Pain Medication",icon:"fitness-outline"}:v.cardiac.test(y)?{type:"Cardiac Medication",icon:"heart-outline"}:v.activated.test(y)?{type:"Detoxification Agent",icon:"flask-outline"}:{type:"Medication",icon:"medical-outline"}},B=W(()=>{var i,y,A;return((A=(y=(i=c.value)==null?void 0:i.allergies)==null?void 0:y.saved)==null?void 0:A.length)>0}),k=W(()=>B.value?c.value.allergies.saved.map(i=>{var F;const y=((F=i.concept_id)==null?void 0:F.toString())||"unknown";console.log("###########: ",i);const A=d[y]||d.unknown;let w="Unknown",M=null;return i.value_text&&i.value_text!=="Unknown"&&i.value_text!==""?(w=i.value_text,y==="985###"&&(M=_(i.value_text))):i.concept_name&&(w=i.concept_name),{...M?{...A,name:M.type,icon:M.icon}:A,displayValue:w,conceptId:i.concept_id,date:i.obs_datetime||i.encounter_datetime,providerId:i.provider_id,locationId:i.location_id,encounterId:i.encounter_id,isDrug:y==="985",raw:i}}):[]),I=W(()=>{const i={};k.value.forEach(w=>{const M=w.date?C(w.date):"Unknown Date";i[M]||(i[M]=[]),i[M].push(w)});const y={};return Object.keys(i).sort((w,M)=>w==="Unknown Date"?1:M==="Unknown Date"?-1:new Date(M).getTime()-new Date(w).getTime()).forEach(w=>{y[w]=i[w]}),y}),x=i=>{u.value[i]=!u.value[i]},C=i=>{if(!i)return"Unknown Date";try{return new Date(i).toISOString().split("T")[0]}catch(y){return"Unknown Date"}},U=i=>{if(i==="Unknown Date")return"Unknown Date";try{const y=new Date(i),A=we.sessionDate(),w=new Date(A),M=new Date(w);M.setDate(M.getDate()-1);const O=y.toDateString(),F=w.toDateString(),T=M.toDateString();return O===F?"Today":O===T?"Yesterday":y.toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})}catch(y){return i}};return de(()=>I.value,i=>{const y=Object.keys(i);y.length>0&&(u.value[y[0]]=!0)},{immediate:!0}),de(()=>{var i;return(i=c.value)==null?void 0:i.allergies},i=>{console.log("Allergies updated:",i)},{deep:!0}),ye(()=>{var i;console.log("Allergies component mounted",(i=c.value)==null?void 0:i.allergies)}),(i,y)=>{const A=Y("ion-icon"),w=Y("ion-label");return o(),h("div",ra,[n(w,{class:"section-title"},{default:p(()=>[n(A,{icon:r(yt),class:"alert-icon"},null,8,["icon"]),n(w,null,{default:p(()=>[...y[0]||(y[0]=[V("Allergies (Medication, Healthcare items, Environment and Food)",-1)])]),_:1})]),_:1}),B.value?(o(),h("div",ua,[(o(!0),h(Z,null,ue(I.value,(M,O)=>(o(),h("div",{key:O,class:"date-group"},[a("div",{class:Ae(["date-header",{expanded:u.value[O]}]),onClick:F=>x(O)},[a("div",pa,[n(A,{icon:r(vn),class:"date-icon"},null,8,["icon"]),a("span",ma,$(U(O)),1),a("span",va,"("+$(M.length)+" "+$(M.length===1?"allergy":"allergies")+")",1)]),n(A,{icon:r(fn),class:Ae(["expand-icon",{rotated:u.value[O]}])},null,8,["icon","class"])],10,da),a("div",{class:Ae(["allergies-grid",{collapsed:!u.value[O]}])},[(o(!0),h(Z,null,ue(M,(F,T)=>(o(),h("div",{key:T,class:Ae(["allergy-card",F.severity])},[a("div",fa,[n(A,{icon:F.icon,class:"allergy-icon"},null,8,["icon"]),a("span",ga,$(F.name),1)]),a("div",_a,[a("div",{class:Ae(["allergy-value",{"drug-name":F.isDrug}])},$(F.displayValue),3)])],2))),128))],2)]))),128))])):(o(),h("div",ca,[n(A,{icon:r(mn),class:"no-allergies-icon"},null,8,["icon"]),y[1]||(y[1]=a("p",null,"No known allergies",-1))]))])}}}),$t=ce(ha,[["__scopeId","data-v-1302dd03"]]),ya=J({name:"VisitHistory",components:{AllergiesListing:$t,IonIcon:Te},setup(){const t=wt();return{selectedAllergiesList2:W(()=>t.selectedMedicalAllergiesList),alertCircleOutline:yt,documentTextOutline:hn,femaleOutline:_n,medicalOutline:$e,warningOutline:gn,bodyOutline:nt,eyeOutline:ut,nutritionOutline:ct,fitnessOutline:ot,pulseOutline:Be,earOutline:rt,happyOutline:lt,manOutline:it,moveOutline:st,addOutline:Le,scanOutline:at}},data(){return{presentingComplaintsWithDuration:[],pastMedicalHistory:[],levelOfConsciousness:{eyeResponse:null,verbalResponse:null,motorResponse:null},pregnancy:{patientPregnant:null,breastFeeding:null},physicalExamCategories:{Eyes:{icon:ut,abnormalities:[],normal:!1},Mouth:{icon:ct,abnormalities:[],normal:!1},Ears:{icon:rt,abnormalities:[],normal:!1},Face:{icon:lt,abnormalities:[],normal:!1},Neck:{icon:it,abnormalities:[],normal:!1},Chest:{icon:ot,abnormalities:[],normal:!1},"Chest Movement":{icon:st,abnormalities:[],normal:!1},"Heart Sounds":{icon:Be,abnormalities:[],normal:!1},"Breath Sounds":{icon:Le,abnormalities:[],normal:!1},"Added Breath Sounds":{icon:Le,abnormalities:[],normal:!1},"Abdominal Inspection":{icon:at,abnormalities:[],normal:!1},"Genital Examination":{icon:nt,abnormalities:[],normal:!1}}}},computed:{...Fe(Se,["patient"]),hasLevelOfConsciousness(){return this.levelOfConsciousness.eyeResponse||this.levelOfConsciousness.verbalResponse||this.levelOfConsciousness.motorResponse},hasPresentingComplaints(){var t;return((t=this.presentingComplaintsWithDuration)==null?void 0:t.length)>0},hasPregnancyData(){return this.pregnancy.patientPregnant||this.pregnancy.breastFeeding},hasPastMedicalHistory(){var t;return((t=this.uniquePastMedicalHistory)==null?void 0:t.length)>0},hasAllergies(){var t,s;return((s=(t=this.selectedAllergiesList2)==null?void 0:t.filter(c=>c.selected))==null?void 0:s.length)>0},hasPhysicalExam(){return Object.values(this.physicalExamCategories).some(t=>t.abnormalities.length>0||t.normal)},uniquePastMedicalHistory(){return[...new Set(this.pastMedicalHistory)]},uniquePresentingComplaints(){return[...new Set(this.presentingComplaintsWithDuration.map(t=>t.name))]},isMinor(){var t,s;return we.getAgeInYears((s=(t=this.patient)==null?void 0:t.personInformation)==null?void 0:s.birthdate)<18},gcsScore(){var B,k,I;if(!this.hasLevelOfConsciousness)return null;const t=this.levelOfConsciousness.eyeResponse,s=this.levelOfConsciousness.motorResponse,c=this.levelOfConsciousness.verbalResponse,u=t&&(B=(this.isMinor?Nt:Pt)[t])!=null?B:0,v=s&&(k=(this.isMinor?At:xt)[s])!=null?k:0,d=c&&(I=(this.isMinor?Ot:Et)[c])!=null?I:0,_=u+v+d;return"(M ".concat(v," V ").concat(d," E ").concat(u,") ").concat(_,"/").concat(this.isMinor?5:15)}},methods:{async updateData(){var t;(t=this.patient)!=null&&t.patientID&&(await this.loadPresentingComplaints(),await this.loadPastMedicalHistory(),await this.loadLevelOfConsciousness(),await this.loadPregnancyStatus(),await this.loadPhysicalExam())},async loadPresentingComplaints(){try{const t=await z.getObsByEncounterIdAndDate(K.PRESENTING_COMPLAINTS);this.presentingComplaintsWithDuration=[];const s=t.filter(c=>c.concept_name==="Presenting complaint");for(const c of s){const u=t.find(d=>d.concept_id===c.value_coded&&d.concept_name!=="Presenting complaint"),v=await pe.getConceptName(c.value_coded);this.presentingComplaintsWithDuration.push({name:v,duration:(u==null?void 0:u.value_text)||"Duration not specified"})}}catch(t){console.error("Error loading presenting complaints:",t)}},async loadPastMedicalHistory(){try{const s=(await z.getObsByEncounterIdAndDate(K.PAST_MEDICAL_HISTORY)).filter(c=>c.concept_name==="Chronic disease");this.pastMedicalHistory=await Promise.all(s.map(async c=>await pe.getConceptName(c.value_coded)))}catch(t){console.error("Error loading past medical history:",t)}},async loadLevelOfConsciousness(){try{const t=await z.getObsByEncounterIdAndDate(K.ASSESSMENT);if(t&&Array.isArray(t)){const s=t.find(v=>v.concept_name==="Eye opening response");this.levelOfConsciousness.eyeResponse=s!=null&&s.value_coded?await pe.getConceptName(s.value_coded):null;const c=t.find(v=>v.concept_name==="Best verbal response");this.levelOfConsciousness.verbalResponse=c!=null&&c.value_coded?await pe.getConceptName(c.value_coded):null;const u=t.find(v=>v.concept_name==="Best motor response");this.levelOfConsciousness.motorResponse=u!=null&&u.value_coded?await pe.getConceptName(u.value_coded):null}}catch(t){console.error("Error loading level of consciousness:",t)}},async loadPregnancyStatus(){try{const t=await z.getObsByEncounterIdAndDate(K.PREGNANCY_STATUS);if(t&&Array.isArray(t)){const s=t.find(u=>u.concept_name==="Patient pregnant");this.pregnancy.patientPregnant=s!=null&&s.value_coded?await pe.getConceptName(s.value_coded):null;const c=t.find(u=>u.concept_name==="Is patient breast feeding?");this.pregnancy.breastFeeding=c!=null&&c.value_coded?await pe.getConceptName(c.value_coded):null}}catch(t){console.error("Error loading pregnancy status:",t)}},async loadPhysicalExam(){var t,s,c;try{const u=await z.getObsByEncounterIdAndDate(K.PHYSICAL_EXAMINATION);Object.values(this.physicalExamCategories).forEach(v=>{v.abnormalities=[],v.normal=!1});for(const v of u){const d=v.concept_name||((c=(s=(t=v.concept)==null?void 0:t.concept_names)==null?void 0:s.find(_=>_.concept_name_type==="FULLY_SPECIFIED"))==null?void 0:c.name);if(d){if(d.includes("normal")||d.includes("Normal")){v.value_coded===1065&&(d.includes("Eyes normal")?this.physicalExamCategories.Eyes.normal=!0:d.includes("Mouth normal")?this.physicalExamCategories.Mouth.normal=!0:d.includes("Ears normal")?this.physicalExamCategories.Ears.normal=!0:d.includes("Face normal")?this.physicalExamCategories.Face.normal=!0:d.includes("Neck normal")?this.physicalExamCategories.Neck.normal=!0:d.includes("Chest inspection normal")?this.physicalExamCategories.Chest.normal=!0:d.includes("Heart sounds normal")?this.physicalExamCategories["Heart Sounds"].normal=!0:d.includes("Breath sounds normal")?this.physicalExamCategories["Breath Sounds"].normal=!0:d.includes("Abdominal inspection normal")?this.physicalExamCategories["Abdominal Inspection"].normal=!0:d.includes("Genital examination normal")&&(this.physicalExamCategories["Genital Examination"].normal=!0));continue}if(v.value_coded){const _=await pe.getConceptName(v.value_coded);d.includes("Abnormality for mouth")?this.physicalExamCategories.Mouth.abnormalities.push(_):d.includes("Abnormality for ears")?this.physicalExamCategories.Ears.abnormalities.push(_):d.includes("Abnormality for face")?this.physicalExamCategories.Face.abnormalities.push(_):d.includes("Breath sounds abnormality")?this.physicalExamCategories["Breath Sounds"].abnormalities.push(_):d.includes("Abnormalities when added")?this.physicalExamCategories["Added Breath Sounds"].abnormalities.push(_):d.includes("Chest movements")?this.physicalExamCategories["Chest Movement"].abnormalities.push(_):d.includes("Genital examination abnormality")?this.physicalExamCategories["Genital Examination"].abnormalities.push(_):d.includes("Vulva inspection abnormalities")&&this.physicalExamCategories["Genital Examination"].abnormalities.push(_)}}}}catch(u){console.error("Error loading physical exam:",u)}}},watch:{patient:{async handler(){await this.updateData()},deep:!0}},async mounted(){await this.updateData()}}),ba={class:"visit-container"},Da={class:"visit-sections"},Ca={key:0,class:"visit-section"},wa={class:"section-header"},Sa={class:"section-content"},Ia={key:0,class:"info-item"},ka={class:"info-value"},Pa={key:1,class:"info-item"},Ea={class:"info-value"},xa={key:2,class:"info-item"},Na={class:"info-value"},Aa={key:3,class:"info-item"},Oa={class:"info-value highlight"},$a={key:1,class:"visit-section"},Ma={class:"section-header"},Ta={class:"complaints-container"},La={class:"complaint-name"},Fa={class:"complaint-duration"},Ba={key:2,class:"visit-section"},Ra={class:"section-header"},Va={class:"section-content"},Ha={key:0,class:"info-item"},Ua={class:"info-value highlight"},Ga={key:1,class:"info-item"},qa={class:"info-value highlight"},Wa={key:3,class:"visit-section"},za={class:"section-header"},Ya={class:"tags-container"},ja={class:"allergies-section"},Ka={class:"allergies-container"},Qa={key:4,class:"visit-section"},Xa={class:"section-header"},Ja={class:"exam-section"},Za={key:0,class:"exam-category"},es={class:"exam-category-header"},ts={class:"exam-items"},ns={key:1,class:"exam-item normal"};function as(t,s,c,u,v,d){const _=Y("ion-icon"),B=Y("AllergiesListing");return o(),h("div",ba,[s[11]||(s[11]=a("div",{class:"visit-header"},[a("h5",null,"Patient's Clinical Assessment Summary")],-1)),a("div",Da,[t.hasLevelOfConsciousness?(o(),h("div",Ca,[a("div",wa,[n(_,{icon:t.alertCircleOutline,class:"section-icon"},null,8,["icon"]),s[0]||(s[0]=a("h3",null,"Level of Consciousness",-1))]),a("div",Sa,[t.levelOfConsciousness.eyeResponse?(o(),h("div",Ia,[s[1]||(s[1]=a("span",{class:"info-label"},"Eye Response:",-1)),a("span",ka,$(t.levelOfConsciousness.eyeResponse),1)])):S("",!0),t.levelOfConsciousness.verbalResponse?(o(),h("div",Pa,[s[2]||(s[2]=a("span",{class:"info-label"},"Verbal Response:",-1)),a("span",Ea,$(t.levelOfConsciousness.verbalResponse),1)])):S("",!0),t.levelOfConsciousness.motorResponse?(o(),h("div",xa,[s[3]||(s[3]=a("span",{class:"info-label"},"Motor Response:",-1)),a("span",Na,$(t.levelOfConsciousness.motorResponse),1)])):S("",!0),t.gcsScore?(o(),h("div",Aa,[s[4]||(s[4]=a("span",{class:"info-label"},"Score:",-1)),a("span",Oa,$(t.gcsScore),1)])):S("",!0)])])):S("",!0),t.hasPresentingComplaints?(o(),h("div",$a,[a("div",Ma,[n(_,{icon:t.documentTextOutline,class:"section-icon"},null,8,["icon"]),s[5]||(s[5]=a("h3",null,"Presenting Complaints",-1))]),a("div",Ta,[(o(!0),h(Z,null,ue(t.presentingComplaintsWithDuration,(k,I)=>(o(),h("div",{class:"complaint-item",key:I},[a("div",La,$(k.name),1),a("div",Fa,$(k.duration),1)]))),128))])])):S("",!0),t.hasPregnancyData?(o(),h("div",Ba,[a("div",Ra,[n(_,{icon:t.femaleOutline,class:"section-icon"},null,8,["icon"]),s[6]||(s[6]=a("h3",null,"Pregnancy Status",-1))]),a("div",Va,[t.pregnancy.patientPregnant?(o(),h("div",Ha,[s[7]||(s[7]=a("span",{class:"info-label"},"Pregnant:",-1)),a("span",Ua,$(t.pregnancy.patientPregnant),1)])):S("",!0),t.pregnancy.breastFeeding?(o(),h("div",Ga,[s[8]||(s[8]=a("span",{class:"info-label"},"Breastfeeding:",-1)),a("span",qa,$(t.pregnancy.breastFeeding),1)])):S("",!0)])])):S("",!0),t.hasPastMedicalHistory?(o(),h("div",Wa,[a("div",za,[n(_,{icon:t.medicalOutline,class:"section-icon"},null,8,["icon"]),s[9]||(s[9]=a("h3",null,"Medical History",-1))]),a("div",Ya,[(o(!0),h(Z,null,ue(t.uniquePastMedicalHistory,(k,I)=>(o(),h("div",{class:"medical-tag",key:I},$(k),1))),128))])])):S("",!0),a("div",ja,[a("div",Ka,[n(B)])]),t.hasPhysicalExam?(o(),h("div",Qa,[a("div",Xa,[n(_,{icon:t.bodyOutline,class:"section-icon"},null,8,["icon"]),s[10]||(s[10]=a("h3",null,"Physical Examination",-1))]),a("div",Ja,[(o(!0),h(Z,null,ue(t.physicalExamCategories,(k,I)=>(o(),h(Z,{key:I},[k.abnormalities.length>0||k.normal?(o(),h("div",Za,[a("div",es,[n(_,{icon:k.icon},null,8,["icon"]),a("h4",null,$(I),1)]),a("div",ts,[k.abnormalities.length>0?(o(!0),h(Z,{key:0},ue(k.abnormalities,(x,C)=>(o(),h("div",{class:"exam-item",key:C},$(x),1))),128)):(o(),h("div",ns," Normal examination "))])])):S("",!0)],64))),128))])])):S("",!0)])])}const ss=ce(ya,[["render",as],["__scopeId","data-v-b2ab1221"]]),os={class:"modal_wrapper"},is=J({__name:"LevelOfConsciousness",setup(t,{expose:s}){var k,I;const c=Se(),{patient:u}=Ce(c),v=l(we.getAgeInYears((I=(k=u==null?void 0:u.value)==null?void 0:k.personInformation)==null?void 0:I.birthdate)),d=l(null),_=W(()=>{var F,T,b,P;const x=((F=d.value)==null?void 0:F.getFormValues())||{},C=x["Eye opening response"]||"",U=x["Best motor response"]||"",i=x["Best verbal response"]||"",y=v.value<18,A=(T=(y?Nt:Pt)[C])!=null?T:0,w=(b=(y?At:xt)[U])!=null?b:0,M=(P=(y?Ot:Et)[i])!=null?P:0,O=A+w+M;return"(M ".concat(w," V ").concat(M," E ").concat(A,") ").concat(O,"/").concat(y?5:15)});return s({onSubmit:async()=>{var C;if(!d.value){console.error("Form reference is not available");return}const x=((C=d.value)==null?void 0:C.getFormValues())||{};x["Eye opening response"]||x["Best motor response"]||x["Best verbal response"]?(await z.buildAddObsToEncounterPatient(x,K.ASSESSMENT),d.value.resetForm(),xe("Level of Consciousness saved successfully")):re(" No level of consciousness data to save ")}}),(x,C)=>(o(),h("div",os,[v.value<18?(o(),L(Re,{key:0,formData:r(la),ref_key:"formRef",ref:d},null,8,["formData"])):(o(),L(Re,{key:1,formData:r(ia),ref_key:"formRef",ref:d},null,8,["formData"])),a("h5",null,$(_.value),1)]))}}),ls={class:"modal_wrapper"},rs=J({__name:"PregnancyBreastfeeding",setup(t,{expose:s}){const c=kn(),{pregnancy:u}=Ce(c),v=()=>{};return s({onSubmit:async()=>{const _=await Qe(u.value);_.length>0?(await z.addObsToEncounterPatient(_,K.PREGNANCY_STATUS),xe("Pregnancy status saved successfully")):re("No pregnancy status data to save ")}}),(_,B)=>(o(),h("div",ls,[n(Ke,{contentData:r(u),"onUpdate:inputValue":v},null,8,["contentData"])]))}}),cs={class:"modal_wrapper"},us={class:"uniform_columns"},ds=J({__name:"PastMedicalHistory",setup(t,{expose:s}){const c=Pn(),{pastMedicalHistory:u}=Ce(c),v=l([]);ye(()=>{v.value=c.getInitial(),d()}),de(u,()=>{d()},{deep:!0});const d=()=>{var x;const I=["TB","Chronic Obstructive Pulmonary Disease (COPD)","Asthma","Epilepsy","Previous stroke","Peptic Ulcer Disease (PUD)","Mental disorder","Bleeding disorders","Hypertension","HIV Positive","Diabetes Mellitus"];(x=En(u.value,"None"))!=null&&x.checked?I.forEach(C=>{ge(u.value,"TB treatment","displayNone",!0),be(u.value,"TB drugs","displayNone",!0),be(u.value,"TB drug start date","displayNone",!0),ge(u.value,"Hypertension medication","displayNone",!0),be(u.value,"Current hypertension treatment regimen","displayNone",!0),ge(u.value,"HIV status","displayNone",!0),be(u.value,"ARV start date","displayNone",!0),ge(u.value,"Diabetes","displayNone",!0),ge(u.value,"Controlled by","displayNone",!0),_e(u.value,C,"checked",!1),_e(u.value,C,"disabled",!0)}):I.forEach(C=>{_e(u.value,C,"disabled",!1)})},_=I=>{be(u.value,"TB drugs","popOverData",{filterData:!0,data:[{name:"Auramine 'O' (C.I. 41000) 50g"},{name:"Bedaquilline 100mg"},{name:"Clofazimine 100mg"},{name:"Clofazimine 50mg"},{name:"Cycloserine 125mg"},{name:"Cycloserine 250mg"},{name:"Delamanid 50mg"},{name:"Ethambutol 100mg"},{name:"Ethambutol 400mg"},{name:"Ethionamide 250mg"},{name:"Isoniazid 100mg "},{name:"Isoniazid 300mg"},{name:"Isoniazid / Rifapentine 300mg / 300mg"},{name:"Levofloxacin 100mg"},{name:"Levofloxacin 250mg"},{name:"Linezolid 600mg"},{name:"Moxifloxacin 400mg"},{name:"Pyrazinamide 400mg"},{name:"Rifabutin 150mg Capsules"},{name:"Rifampicin 150mg/isoniazid 75mg"},{name:"Rifampicin 75mg+INH 50mg dispersible"},{name:"Rifampicin 75mg+INH 50mg+Pyrazinamide 150mg dispersible"},{name:"Rifampicin150mg/Isoniazid75mg/Pyrazinamide 400mg/Ethambutol"}]}),be(u.value,"Current hypertension treatment regimen","popOverData",{filterData:!0,data:[{name:"Captopril 12.5mg"},{name:"Aspirin 75mg"},{name:"Hydrochlorothiazide 25mg"},{name:"Enalapril Meleate 5mg"},{name:"Enalapril Maleate 10mg"}]})},B=async()=>[...await It(u.value),...await Qe(u.value),...await kt(u.value)];return s({onSubmit:async()=>{const I=await B();if(I.length===0){re("No past medical history data to save");return}await z.addObsToEncounterPatient(I,K.PAST_MEDICAL_HISTORY),xe("Past medical history saved successful")}}),(I,x)=>(o(),h("div",cs,[a("div",us,[n(Ke,{contentData:r(u),initialData:v.value,"onUpdate:inputValue":_,"onUpdate:selected":_},null,8,["contentData","initialData"])])]))}}),ps=ce(ds,[["__scopeId","data-v-49fdce72"]]),ms={class:"container"},vs=J({__name:"PhysicalExamination",setup(t,{expose:s}){const c=xn(),u=Se(),{physicalExam:v}=Ce(c),{patient:d}=Ce(u),_=l([]);ye(()=>{_.value=c.getInitial(),B(),k()}),de(v,()=>{B(),k()},{deep:!0});const B=()=>{Nn(v.value,"Physical examination")=="No"?ge(v.value,"Reason why physical examination not done","displayNone",!1):(ge(v.value,"Reason why physical examination not done","displayNone",!0),ge(v.value,"Reason why physical examination not done","selectedValue",""))},k=()=>{var U,i;const C=(i=(U=d.value)==null?void 0:U.personInformation)==null?void 0:i.gender;C=="M"&&(_e(v.value,"Vulva examination","disabled",!0),_e(v.value,"Visible bleeding","disabled",!0)),C=="F"&&(_e(v.value,"Urethral meatus abnormal","disabled",!0),_e(v.value,"Scrotal swelling","disabled",!0),_e(v.value,"Tastes swelling","disabled",!0))},I=async()=>[...await It(v.value),...await Qe(v.value),...await kt(v.value)];return s({onSubmit:async()=>{const C=await I();if(C.length===0){re("No physical examination data to save");return}await z.addObsToEncounterPatient(C,K.PHYSICAL_EXAMINATION),xe("Physical examination saved successful")}}),(C,U)=>{const i=Y("ion-card-content"),y=Y("ion-card");return o(),h("div",ms,[n(y,{class:"section"},{default:p(()=>[n(i,null,{default:p(()=>[n(Ke,{contentData:r(v),initialData:_.value},null,8,["contentData","initialData"])]),_:1})]),_:1})])}}}),fs=ce(vs,[["__scopeId","data-v-96d0ce9f"]]),gs={key:0},_s={class:"ion-padding",slot:"content"},hs={class:"nav-buttons"},ys={class:"ion-padding",slot:"content"},bs={class:"nav-buttons"},Ds={class:"ion-padding",slot:"content"},Cs={class:"nav-buttons"},ws={class:"ion-padding",slot:"content"},Ss={class:"nav-buttons"},Is={class:"ion-padding",slot:"content"},ks={class:"nav-buttons"},Ps={class:"ion-padding",slot:"content"},Es={class:"nav-buttons"},xs=J({__name:"ClinicalAssessment",setup(t,{expose:s}){const c=l("loc"),u=l(0),v=l(!1),d=l(!1),_=new An,B=Se(),k=()=>{u.value++},I=l(null),x=l(null),C=l(null),U=l(null),i=l(null),y=l(null),A=[{id:"loc",label:"Level of consciousness",show:!0},{id:"pc",label:"Presenting complaints",show:!0},{id:"pbs",label:"Pregnancy and breastfeeding status",show:()=>_.isChildBearing()},{id:"pmh",label:"Past medical history",show:!0},{id:"al",label:"Allergies",show:!0},{id:"pe",label:"Physical examination",show:!0}];async function w(){const m=he.getSessionDate(),e=[K.ASSESSMENT,K.PRESENTING_COMPLAINTS,K.PAST_MEDICAL_HISTORY,K.PHYSICAL_EXAMINATION,K.PREGNANCY_STATUS];let E=!1;for(const N of e)try{const j=await z.getObsByEncounterIdAndDate(N);if(j&&j.some(ee=>ee.obs_datetime?we.toStandardHisFormat(ee.obs_datetime)===we.toStandardHisFormat(m):!1)){E=!0;break}}catch(j){console.error("Error checking observations for encounter type ".concat(N,":"),j)}v.value=E}ye(w),de(()=>B.patient,w);const M=W(()=>v.value),O=W(()=>A.filter(m=>typeof m.show=="function"?m.show():m.show)),F=m=>{const e=A.find(E=>E.id===m);return e?typeof e.show=="function"?e.show():e.show:!1},T=m=>O.value.findIndex(e=>e.id===m),b=m=>{const e=T(m);e>0&&(c.value=O.value[e-1].id)},P=m=>{const E=T(m)+1;E<O.value.length?c.value=O.value[E].id:(c.value="",k())};return s({onSubmit:async()=>{const m=[{ref:I,name:"PresentingComplaints"},{ref:x,name:"LevelOfConsciousness"},{ref:C,name:"PastMedicalHistory"},{ref:i,name:"PregnancyBreastfeeding"},{ref:y,name:"PhysicalExamination"}];for(const e of m)if(e.ref.value&&typeof e.ref.value.onSubmit=="function")try{await e.ref.value.onSubmit()}catch(E){console.error("Error calling ".concat(e.name," onSubmit:"),E)}else console.log("".concat(e.name," component ref not available or no onSubmit method"))}}),(m,e)=>{const E=Y("ion-toggle");return o(),h(Z,null,[M.value?(o(),h("div",gs,[n(r(Q),{lines:"none"},{default:p(()=>[n(r(le),null,{default:p(()=>[...e[14]||(e[14]=[V("Switch between Capture Mode and Summary Mode",-1)])]),_:1}),n(E,{checked:d.value,onIonChange:e[0]||(e[0]=N=>d.value=N.detail.checked),slot:"end"},null,8,["checked"])]),_:1}),d.value?S("",!0):(o(),L(ss,{key:u.value}))])):S("",!0),!M.value||d.value?(o(),L(r(yn),{key:1,style:{width:"100%"}},{default:p(()=>[n(r(je),{value:c.value,"onUpdate:value":e[13]||(e[13]=N=>c.value=N),ref:"accordionGroup",class:"previousView"},{default:p(()=>[F("loc")?(o(),L(r(ve),{key:0,value:"loc",class:"_card"},{default:p(()=>[n(r(Q),{slot:"header",color:"light"},{default:p(()=>[n(r(le),{class:"previousLabel"},{default:p(()=>[...e[15]||(e[15]=[V("Level of consciousness",-1)])]),_:1})]),_:1}),a("div",_s,[n(is,{"is-active":c.value==="loc",ref_key:"levelOfConsciousnessFormRef",ref:x,onDataSaved:k},null,8,["is-active"]),a("div",hs,[T("loc")>0?(o(),L(r(oe),{key:0,fill:"outline",onClick:e[1]||(e[1]=ie(N=>b("loc"),["stop"]))},{default:p(()=>[...e[16]||(e[16]=[V(" Back ",-1)])]),_:1})):S("",!0),n(r(oe),{fill:"outline",onClick:e[2]||(e[2]=ie(N=>P("loc"),["stop"]))},{default:p(()=>[V($(T("loc")<O.value.length-1?"Next":"Finish"),1)]),_:1})])])]),_:1})):S("",!0),F("pc")?(o(),L(r(ve),{key:1,value:"pc",class:"_card"},{default:p(()=>[n(r(Q),{slot:"header",color:"light"},{default:p(()=>[n(r(le),{class:"previousLabel"},{default:p(()=>[...e[17]||(e[17]=[V("Presenting complaints",-1)])]),_:1})]),_:1}),a("div",ys,[n(oa,{"is-active":c.value==="pc",onDataSaved:k,ref_key:"presentingComplaintsFormRef",ref:I},null,8,["is-active"]),a("div",bs,[T("pc")>0?(o(),L(r(oe),{key:0,fill:"outline",onClick:e[3]||(e[3]=ie(N=>b("pc"),["stop"]))},{default:p(()=>[...e[18]||(e[18]=[V(" Back ",-1)])]),_:1})):S("",!0),n(r(oe),{fill:"outline",onClick:e[4]||(e[4]=ie(N=>P("pc"),["stop"]))},{default:p(()=>[V($(T("pc")<O.value.length-1?"Next":"Finish"),1)]),_:1})])])]),_:1})):S("",!0),F("pbs")?(o(),L(r(ve),{key:2,value:"pbs",class:"_card"},{default:p(()=>[n(r(Q),{slot:"header",color:"light"},{default:p(()=>[n(r(le),{class:"previousLabel"},{default:p(()=>[...e[19]||(e[19]=[V("Pregnancy and breastfeeding status",-1)])]),_:1})]),_:1}),a("div",Ds,[n(rs,{"is-active":c.value==="pbs",ref_key:"pregnancyBreastfeedingFormRef",ref:i,onDataSaved:k},null,8,["is-active"]),a("div",Cs,[T("pbs")>0?(o(),L(r(oe),{key:0,fill:"outline",onClick:e[5]||(e[5]=ie(N=>b("pbs"),["stop"]))},{default:p(()=>[...e[20]||(e[20]=[V(" Back ",-1)])]),_:1})):S("",!0),n(r(oe),{fill:"outline",onClick:e[6]||(e[6]=ie(N=>P("pbs"),["stop"]))},{default:p(()=>[V($(T("pbs")<O.value.length-1?"Next":"Finish"),1)]),_:1})])])]),_:1})):S("",!0),F("pmh")?(o(),L(r(ve),{key:3,value:"pmh",class:"_card"},{default:p(()=>[n(r(Q),{slot:"header",color:"light"},{default:p(()=>[n(r(le),{class:"previousLabel"},{default:p(()=>[...e[21]||(e[21]=[V("Past medical history",-1)])]),_:1})]),_:1}),a("div",ws,[n(ps,{"is-active":c.value==="pmh",ref_key:"pastMedicalHistoryFormRef",ref:C,onDataSaved:k},null,8,["is-active"]),a("div",Ss,[T("pmh")>0?(o(),L(r(oe),{key:0,fill:"outline",onClick:e[7]||(e[7]=ie(N=>b("pmh"),["stop"]))},{default:p(()=>[...e[22]||(e[22]=[V(" Back ",-1)])]),_:1})):S("",!0),n(r(oe),{fill:"outline",onClick:e[8]||(e[8]=ie(N=>P("pmh"),["stop"]))},{default:p(()=>[V($(T("pmh")<O.value.length-1?"Next":"Finish"),1)]),_:1})])])]),_:1})):S("",!0),F("al")?(o(),L(r(ve),{key:4,value:"al",class:"_card"},{default:p(()=>[n(r(Q),{slot:"header",color:"light"},{default:p(()=>[n(r(le),{class:"previousLabel"},{default:p(()=>[...e[23]||(e[23]=[V("Allergies",-1)])]),_:1})]),_:1}),a("div",Is,[n(Vn,{"is-active":c.value==="al",ref_key:"allergiesFormRef",ref:U,onDataSaved:k},null,8,["is-active"]),a("div",ks,[T("al")>0?(o(),L(r(oe),{key:0,fill:"outline",onClick:e[9]||(e[9]=ie(N=>b("al"),["stop"]))},{default:p(()=>[...e[24]||(e[24]=[V(" Back ",-1)])]),_:1})):S("",!0),n(r(oe),{fill:"outline",onClick:e[10]||(e[10]=ie(N=>P("al"),["stop"]))},{default:p(()=>[V($(T("al")<O.value.length-1?"Next":"Finish"),1)]),_:1})])])]),_:1})):S("",!0),F("pe")?(o(),L(r(ve),{key:5,value:"pe",class:"_card"},{default:p(()=>[n(r(Q),{slot:"header",color:"light"},{default:p(()=>[n(r(le),{class:"previousLabel"},{default:p(()=>[...e[25]||(e[25]=[V("Physical examination",-1)])]),_:1})]),_:1}),a("div",Ps,[n(fs,{"is-active":c.value==="pe",ref_key:"physicalExaminationFormRef",ref:y,onDataSaved:k},null,8,["is-active"]),a("div",Es,[T("pe")>0?(o(),L(r(oe),{key:0,fill:"outline",onClick:e[11]||(e[11]=ie(N=>b("pe"),["stop"]))},{default:p(()=>[...e[26]||(e[26]=[V(" Back ",-1)])]),_:1})):S("",!0),n(r(oe),{fill:"outline",onClick:e[12]||(e[12]=ie(N=>P("pe"),["stop"]))},{default:p(()=>[V($(T("pe")<O.value.length-1?"Next":"Finish"),1)]),_:1})])])]),_:1})):S("",!0)]),_:1},8,["value"])]),_:1})):S("",!0)],64)}}}),Ao=ce(xs,[["__scopeId","data-v-597092a6"]]);class Ns extends pt{constructor(s,c){super(s,8,c)}static async getDiagnosis(s="",c=1,u=10){const v=await pe.getConceptID("Qech outpatient diagnosis list");return pt.getJson("diagnosis",{id:v,name:s,page:c,page_size:u})}}const As=J({name:"Menu",components:{IonContent:_t,IonHeader:gt,IonItem:Q,IonList:Ve,IonMenu:ft,IonTitle:vt,IonToolbar:mt,List:He},computed:{...Fe(Se,["patient"])},data(){return{valueNumericArray:[],obsDatetime:[],graphIcon:Dt(["#006401"]),listIcon:bt(["#636363"]),displayGraph:!0,orders:[],height:[],BMI:[],iconBg:{},activeWeight:[],activeHeight:[],activeBMI:[],list:[],series:[{name:"",data:[]}]}},setup(){return{checkmark:ht,pulseOutline:Be}},async mounted(){const t=await z.getAll(this.patient.patientID,"Primary diagnosis"),s=await z.getAll(this.patient.patientID,"Secondary diagnosis"),c=await z.getAll(this.patient.patientID,"Attempted/ Differential diagnosis"),u=[...t||[],...s||[],...c||[]],v=fe.isEmpty(u)?[]:Promise.all(u.map(async d=>({name:await z.getConceptName(d.value_coded),obs_date:d.obs_datetime})));this.setListData(await v)},methods:{dismiss(){bn.dismiss()},handleIcon(){},setActivClass(t){this.activeHeight="",this.activeBMI="",this.activeWeight="",t=="height"?this.activeHeight="_active":t=="weight"?this.activeWeight="_active":t=="BMI"&&(this.activeBMI="_active")},setListData(t){this.list=[],this.list.push({actionBtn:!1,class:"col_background",header:!0,minHeight:"--min-height: 25px;",display:["Date","Diagnosis","Notes"]}),t.forEach(s=>{this.list.push({actionBtn:!1,minHeight:"--min-height: 25px;",class:"col_background",display:[we.toStandardHisFormat(s.obs_date),s.name,""]})})}}}),Os={class:"modal_wrapper"};function $s(t,s,c,u,v,d){const _=Y("list");return o(),h("div",Os,[a("div",null,[n(_,{listData:t.list},null,8,["listData"])])])}const Ms=ce(As,[["render",$s],["__scopeId","data-v-88580898"]]),Ts={class:"custom_card",style:{padding:"10px"}},Ls={key:0},Fs={key:0,style:{color:"red","margin-top":"10px",background:"lightgoldenrodyellow"}},Bs={class:"ion-padding",slot:"content"},Rs=J({__name:"OPDDiagnosis",setup(t,{expose:s}){const c=Ee,u=l(!0),v=l(!1),d=l(!0),_=l(!1),B=l(!0),k=l(""),I=l(""),x=l([]),C=l([]),U=l(),i=l(null);On();const y=W(()=>C.value.some(m=>m.data.concept_id===6542));de(C,()=>{P()},{deep:!0});const A=W(()=>[{name:"primaryDiagnosis",header:"Primary Diagnosis",componentType:"multiSelectInputField",options:x.value,icon:c.search,onSearchChange:T,validation:Oe.required},{componentType:"checkboxField",label:"Secondary Diagnosis",type:"single",grid:{s:"6"},name:"secondaryDiagnosisCheckbox"},{componentType:"checkboxField",label:"Differential Diagnosis",type:"single",grid:{s:"6"},name:"differentialDiagnosisCheckbox"},{componentType:"Dashes"},{name:"secondaryDiagnosis",header:"Secondary Diagnosis",componentType:"multiSelectInputField",isMultiple:!0,options:x.value,icon:c.search,condition:m=>m==null?void 0:m.secondaryDiagnosisCheckbox,onSearchChange:T,validation:(m,e)=>w(e,"secondaryDiagnosis")},{name:"differentialDiagnosis",header:"Differential Diagnosis",componentType:"multiSelectInputField",options:x.value,icon:c.search,isMultiple:!0,condition:m=>m==null?void 0:m.differentialDiagnosisCheckbox,onSearchChange:T,validation:(m,e)=>w(e,"differentialDiagnosis")}]),w=(m,e)=>{var te,G,Ie;if(!m)return null;const E=(te=m.primaryDiagnosis)==null?void 0:te.name,N=((G=m.secondaryDiagnosis)==null?void 0:G.map(se=>se.name))||[],j=((Ie=m.differentialDiagnosis)==null?void 0:Ie.map(se=>se.name))||[];if(e==="secondaryDiagnosis"&&N.includes(E)||e==="differentialDiagnosis"&&j.includes(E))return"".concat(E," is already the primary diagnosis");const ee=N.find(se=>j.includes(se));return ee?"".concat(ee," cannot be both secondary and differential"):null},M=()=>{I.value="",k.value="",u.value=!1,B.value=!1,v.value=!0},O=async()=>{var m;((m=i.value)==null?void 0:m.validateForm())==null&&(F(),v.value=!1,_.value=!0,B.value=!0,d.value=!1)},F=()=>{var te;const m=[],e=C.value.map(G=>G.name),E=((te=i.value)==null?void 0:te.getFormValues())||{},N=E.primaryDiagnosis||[],j=E.secondaryDiagnosis||[],ee=E.differentialDiagnosis||[];if(N.name&&!e.includes(N.name))if(!C.value.some(Ie=>Ie.data.concept_id===6542))m.push({actionBtn:!0,btn:["delete"],name:N.name,id:N.concept_id,display:[N.name,"Primary diagnosis"],data:{concept_id:6542,value_coded:N.concept_id,obs_datetime:he.getSessionDate()}});else return $n("Only one primary diagnosis is allowed"),!1;return j&&j.forEach(G=>{e.includes(G.name)||m.push({actionBtn:!0,btn:["delete"],name:G.name,id:G.concept_id,display:[G.name,"Secondary diagnosis"],data:{concept_id:6543,value_coded:G.concept_id,obs_datetime:he.getSessionDate()}})}),ee&&ee.forEach(G=>{e.includes(G.name)||m.push({actionBtn:!0,btn:["delete"],name:G.name,id:G.concept_id,display:[G.name,"Differential diagnosis"],data:{concept_id:10201,value_coded:G.concept_id,obs_datetime:he.getSessionDate()}})}),m.length>0&&(C.value=[...C.value,...m]),!0},T=async m=>{const e=m.trim().toLowerCase()||"";return x.value=await Ns.getDiagnosis(e,1,15),x.value},b=m=>{const e=C.value,E=m.name,N=e.filter(j=>j.display[0]!==E);C.value=N},P=()=>{C.value.length>0?(_.value=!0,u.value=!1):v.value||(u.value=!0),B.value=!y.value},R=async()=>{if(C.value.length<=0){re("Diagnosis not saved");return}const m=C.value.flatMap(E=>E.data);if(m.length<=0)return re("Diagnosis not saved");const e=await z.addObsToEncounter(m,K.DIAGNOSIS);await z.mergeObsToPatient(e),xe("Diagnosis saved successful"),C.value=[]};return ye(async()=>{P(),await T("")}),s({onSubmit:R}),(m,e)=>{const E=Y("ion-row"),N=Y("ion-label"),j=Y("ion-accordion"),ee=Y("ion-accordion-group");return o(),h(Z,null,[a("div",Ts,[n(St,{status:u.value,content:"No Diagnosis added"},null,8,["status"]),_.value?(o(),h("span",Ls,[n(He,{listData:C.value,"onClicked:delete":b},null,8,["listData"]),y.value?(o(),h("div",Fs," In order to update the diagnosis list, please remove/delete the primary diagnosis only and then re-add or change it along with the secondary and differential diagnoses. ")):S("",!0)])):S("",!0),v.value?(o(),L(E,{key:1},{default:p(()=>{var te;return[a("div",null,[n(Re,{formData:A.value,ref_key:"formRef",ref:i},null,8,["formData"])]),a("div",null,[n(De,{fill:"clear",icon:r(c).plus,iconSlot:"icon-only","onClicked:btn":e[0]||(e[0]=G=>O()),name:"Save",disabled:(te=i.value)==null?void 0:te.validateForm(),class:"ion-margin-top"},null,8,["icon","disabled"])])]}),_:1})):S("",!0),B.value?(o(),L(E,{key:2,style:{"margin-top":"10px"}},{default:p(()=>[n(De,{fill:"clear",icon:r(c).plus,iconSlot:"icon-only","onClicked:btn":e[1]||(e[1]=te=>M()),name:"Add new Diagnosis"},null,8,["icon"])]),_:1})):S("",!0)]),n(E,null,{default:p(()=>[n(ee,{ref_key:"accordionGroup",ref:U,class:"previousView"},{default:p(()=>[n(j,{value:"first","toggle-icon-slot":"start",class:"custom_card"},{default:p(()=>[n(r(Q),{slot:"header",color:"light"},{default:p(()=>[n(N,{class:"previousLabel"},{default:p(()=>[...e[2]||(e[2]=[V("Previous Diagnosis",-1)])]),_:1})]),_:1}),a("div",Bs,[n(Ms)])]),_:1})]),_:1},512)]),_:1})],64)}}}),Oo=ce(Rs,[["__scopeId","data-v-a440f286"]]),Vs={class:"allergies-section"},Hs={class:"allergies-container"},Us={class:"medication-section"},Gs={class:"medication-content"},qs={key:0,class:"add-medication-form"},Ws={class:"form-group"},zs={class:"option-label"},Ys={key:0,class:"error-message"},js={class:"form-row"},Ks={class:"form-group"},Qs={key:0,class:"error-message"},Xs={class:"form-group"},Js={key:0,class:"error-message"},Zs={class:"form-group"},eo={key:0,class:"error-message"},to={class:"action-buttons"},no={class:"notes-section"},ao={class:"notes-content"},so={class:"notes-input-container"},oo={class:"ion-padding",slot:"content"},io={class:"notes-timeline"},lo={class:"note-date"},ro={class:"note-content"},co={class:"ion-padding",slot:"content"},uo={class:"note-date"},po={class:"note-content"},mo=J({watch:{},name:"xxxComponent"}),vo=J({...mo,setup(t){const s=Ee,c=qn,u=l(!1),v=l(!1),d=l(!0),_=l(0),B=l(""),k=l(!1),I=l(),x=l(!1),C=l(""),U=l(""),i=l(""),y=l(""),A=l(""),w=l(""),M="Add new medication",O=Pe(),F=wt(),T=W(()=>F.selectedMedicalAllergiesList),b=W(()=>O.selectedMedicalDrugsList),P=W(()=>O.partialOPDdrugList),R=W(()=>O.nonPharmalogicalTherapyAndOtherNotes),m=["first","second","third"],e=l(),E=l(),N=l(),j=l(!1),ee=l(!1),te=l("Show more notes"),G=l(),Ie=l(),se=l(),Me=W(()=>O.editingDrugItem),Mt=l("Select a route"),Ue=l(!1),Tt=l("Select frequency"),Ge=l(!1),Lt=l("Select drug"),qe=l(!1),ne=l(),ae=l(),me=l(),Ne=l([]),Ft=l([{concept_id:11797,name:"Buccal",concept_name_id:null,id:1769},{concept_id:11794,name:"Intradermal",concept_name_id:null,id:6284},{concept_id:11795,name:"Intramuscular (IM)",concept_name_id:null,id:6285},{concept_id:11799,name:"Intraosseous",concept_name_id:null,id:6286},{concept_id:11793,name:"Intravenous (IV)",concept_name_id:null,id:6295},{concept_id:3327,name:"Oral",concept_name_id:null,id:8686},{concept_id:11800,name:"Other method of prescription",concept_name_id:null,id:8920},{concept_id:11792,name:"Rectally",concept_name_id:null,id:10785},{concept_id:11798,name:"Subcutaneous",concept_name_id:null,id:12342},{concept_id:11796,name:"Sublingual",concept_name_id:null,id:12344},{concept_id:11792,name:"Rectally",concept_name_id:null,id:14078},{concept_id:11793,name:"Intravenous (IV)",concept_name_id:null,id:14079},{concept_id:11794,name:"Intradermal",concept_name_id:null,id:14080},{concept_id:11795,name:"Intramuscular (IM)",concept_name_id:null,id:14081},{concept_id:11796,name:"Sublingual",concept_name_id:null,id:14082},{concept_id:11797,name:"Buccal",concept_name_id:null,id:14083},{concept_id:11798,name:"Subcutaneous",concept_name_id:null,id:14084},{concept_id:11799,name:"Intraosseous",concept_name_id:null,id:14085},{concept_id:11800,name:"Other method of prescription",concept_name_id:null,id:14086}]),Bt=W(()=>Ne.value.length?Ne.value:Ft.value);function Rt(g){ne.value=g}async function Vt(){return await Wn()}async function Ht(g=5,f=1e3){let D=0;for(;D<g&&(Ne.value=await Vt(),!(Ne.value.length>0));)D++,await new Promise(H=>setTimeout(H,f));Ne.value.length===0&&console.warn("Failed to fetch route list after maximum retries.")}ye(async()=>{const g=new Hn,{previousDrugPrescriptions:f,previousClinicalNotes:D,previousDrugAllergies:H}=await g.getPatientEncounters();e.value=f,E.value=Object.entries(D)[0];const[,...q]=Object.entries(D);N.value=q,G.value=Object.entries(H)[0];const[,...X]=Object.entries(H);Ie.value=X,await Ht()}),de(()=>U.value,async g=>{zt()}),de(()=>i.value,async g=>{Xe()});function Ut(){if(fe.isEmpty(ne.value)==!0)return Ue.value=!0,!1;if(fe.isEmpty(ne.value)==!1)return Ue.value=!1,!0}function Gt(){if(fe.isEmpty(ae.value)==!0)return Ge.value=!0,!1;if(fe.isEmpty(ae.value)==!1)return Ge.value=!1,!0}function qt(){if(fe.isEmpty(me.value)==!0)return qe.value=!0,!1;if(fe.isEmpty(me.value)==!1)return qe.value=!1,!0}function Wt(){d.value=!d.value,u.value=!0,k.value=!1,x.value=!1}async function zt(){return et(U.value)?k.value=!1:(B.value="please enter a number",k.value=!0),k.value}async function Xe(){return et(i.value)?x.value=!1:(I.value="please enter a number",x.value=!0),x.value}async function Je(){const g=await Xe(),f=Gt(),D=qt(),H=Ut();return!g&&f==!0&&D==!0&&H==!0}function Yt(g){ae.value=g}async function Ze(){try{const g=()=>se.value.dose_strength!=null&&se.value.dose_strength?Math.trunc(se.value.dose_strength):1;if(Me.value!==null){if(!await Je()){re("Please enter correct data values",4e3);return}const D=he.getSessionDate(),H=tt(D,parseInt(i.value));let q=!1;We(se.value)==!0&&(q=!0);const X={drugName:C.value,dose:g(),frequency:ae.value.label,frequency_code:ae.value.code,duration:i.value,prescription:H,drug_id:w.value,units:A.value,route_concept_id:ne.value.concept_id,route_name:ne.value.name,highlightbackground:q},ze=Pe();console.log(ze.setSelectedMedicalDrugsList([X])),ze.editingDrugItem=null,d.value=!0}else{if(!await Je()){re("Please enter correct data values",4e3);return}nn();const D=he.getSessionDate(),H=tt(D,parseInt(i.value));let q=!1;We(se.value)==!0&&(q=!0);const X={drugName:C.value,dose:g(),frequency:ae.value.label,frequency_code:ae.value.code,duration:i.value,prescription:H,drug_id:w.value,units:A.value,route_concept_id:ne.value.concept_id,route_name:ne.value.name,highlightbackground:q};Pe().setSelectedMedicalDrugsList([X])}w.value="",C.value="",U.value="",ae.value=null,i.value="",y.value="",_.value++,me.value=null,ne.value=null}catch(g){console.error("Error saving data:",g)}}async function jt(g){const f=g,q=await zn.getOfflineOPDDrugs({name:f,page:1,page_size:10});q.map(X=>({label:X.name,value:X.name,other:X})),O.setPartialOPDdrugList(q)}function We(g){const f=[];return T.value.forEach(H=>{H.selected&&f.push(H.concept_id)}),Kt([g],f)==!0?(re("Client is allergic to the selected medication",4e6),!0):!1}function Kt(g,f){try{return g.some(D=>f.includes(D.concept_id))}catch(D){return!1}}function Qt(g){g&&(C.value=g.name,w.value=g.drug_id,A.value=g.units,se.value=g,We(g))}function Xt(g){const f=b.value[g],D=Pe();D.removeDrugById(f.drug_id),D.editingDrugItem=f,w.value="",C.value="",U.value="",ae.value=null,i.value="",y.value="",me.value=null,ne.value=null,w.value=f.drug_id,C.value=f.drugName,U.value=f.dose,ae.value={label:f.frequency,code:f.frequency_code},i.value=f.duration,y.value=f.prescription;const H=P.value.find(q=>q.name===f.drugName);H&&(me.value=H),ne.value={concept_id:f.route_concept_id,name:f.route_name},d.value=!1,_.value++}function Jt(){if(Me.value!==null){w.value="",C.value="",U.value="",ae.value=null,i.value="",y.value="",me.value=null,ne.value=null;const g=Pe();g.setSelectedMedicalDrugsList([Me.value]),g.editingDrugItem=null}d.value=!0,_.value++}function Zt(g){b.value.splice(g,1),_.value++,re("you have removed a drug from list",6e3)}function en(g){let f=g.target.value;tn(f)}function tn(g){Pe().setNonPharmalogicalTherapyAndOtherNotes(g)}function et(g){return/^[0-9]+$/.test(g)}function tt(g,f){const D=new Date(g);D.setDate(D.getDate()+f);const H=D.getFullYear(),q=String(D.getMonth()+1).padStart(2,"0"),X=String(D.getDate()).padStart(2,"0");return"".concat(H,"-").concat(q,"-").concat(X)}function nn(){u.value=!1,v.value=!0,d.value=!0}function an(g){m.filter(D=>D!==g.detail.value);const f=g.detail.value;f!==void 0?f=="third"&&(te.value="Show less notes",ee.value=!j.value):(te.value="Show more notes",ee.value=!j.value)}function sn(g){return g[1]}function on(g){(g.key==="Enter"||g.key==="ArrowDown")&&(g.preventDefault(),Ze())}const ke=W(()=>[{showAddItemButton:!0,addItemButton:!0,name:Me.value!==null?"Update":"ADD",fn:Ze},{showAddItemButton:!0,addItemButton:!0,name:"CANCEL",fn:ln}]),ln=async()=>{Mn(Tn,{class:"otherVitalsModal"},!0,{message:"Are you sure you want to cancle?"},{cancel:H=>{},confirm:async H=>{H.detail==!0&&Jt()}})};return(g,f)=>(o(),L(r(Ve),null,{default:p(()=>[a("div",Vs,[a("div",Hs,[n($t)])]),a("div",Us,[n(r(Q),{lines:"none",class:"section-header"},{default:p(()=>[n(r(Te),{icon:r($e),class:"section-icon"},null,8,["icon"]),n(r(le),{class:"section-title",style:{"margin-top":"12px"}},{default:p(()=>[...f[9]||(f[9]=[V("Medication",-1)])]),_:1})]),_:1}),a("div",Gs,[(o(),L(Un,{_selectedMedicalDrugsList:b.value,onEditItem:Xt,onRemoveItem:Zt,key:_.value,class:"medication-list"},null,8,["_selectedMedicalDrugsList"])),d.value?S("",!0):(o(),h("div",qs,[a("div",Ws,[f[10]||(f[10]=a("label",{class:"input-label"},"Medication",-1)),n(r(Ye),{modelValue:me.value,"onUpdate:modelValue":[f[0]||(f[0]=D=>me.value=D),f[1]||(f[1]=D=>Qt(D))],options:P.value,searchable:!0,"close-on-select":!0,"show-labels":!1,placeholder:"Select medication",label:"name","track-by":"drug_id",onSearchChange:f[2]||(f[2]=D=>jt(D))},{option:p(D=>[a("div",zs,$(D.option.name),1)]),_:1},8,["modelValue","options"]),qe.value?(o(),h("div",Ys,$(Lt.value),1)):S("",!0)]),a("div",js,[a("div",Ks,[f[11]||(f[11]=a("label",{class:"input-label"},"Route",-1)),n(r(Ye),{modelValue:ne.value,"onUpdate:modelValue":[f[3]||(f[3]=D=>ne.value=D),f[4]||(f[4]=D=>Rt(D))],options:Bt.value,searchable:!0,"close-on-select":!0,"show-labels":!1,placeholder:"Select route",label:"name","track-by":"concept_id",disabled:!1},null,8,["modelValue","options"]),Ue.value?(o(),h("div",Qs,$(Mt.value),1)):S("",!0)]),a("div",Xs,[f[12]||(f[12]=a("label",{class:"input-label"},"Frequency",-1)),n(r(Ye),{modelValue:ae.value,"onUpdate:modelValue":[f[5]||(f[5]=D=>ae.value=D),f[6]||(f[6]=D=>Yt(D))],options:r(c),searchable:!0,"close-on-select":!0,"show-labels":!1,placeholder:"Select frequency",label:"label","track-by":"code"},null,8,["modelValue","options"]),Ge.value?(o(),h("div",Js,$(Tt.value),1)):S("",!0)]),a("div",Zs,[f[13]||(f[13]=a("label",{class:"input-label"},"Duration (days)",-1)),n(r(Dn),{modelValue:i.value,"onUpdate:modelValue":f[7]||(f[7]=D=>i.value=D),type:"number",inputmode:"numeric",pattern:"[0-9]*",fill:"outline",placeholder:"Enter duration",onKeydown:on},null,8,["modelValue"]),x.value?(o(),h("div",eo,$(I.value),1)):S("",!0)])]),a("div",to,[ke.value[0].addItemButton?(o(),L(De,{key:0,name:ke.value[0].name,icon:r(Cn),"onClicked:btn":ke.value[0].fn,class:"save-button"},null,8,["name","icon","onClicked:btn"])):S("",!0),ke.value[1].addItemButton?(o(),L(De,{key:1,name:ke.value[1].name,icon:r(wn),"onClicked:btn":ke.value[1].fn,class:"cancel-button"},null,8,["name","icon","onClicked:btn"])):S("",!0)])])),d.value?(o(),L(De,{key:1,name:M,icon:r(Le),fontWeight:"600","onClicked:btn":Wt,class:"add-new-button"},null,8,["icon"])):S("",!0)])]),a("div",no,[n(r(Q),{lines:"none",class:"section-header"},{default:p(()=>[n(r(Te),{icon:r(Sn),class:"section-icon"},null,8,["icon"]),n(r(le),{class:"section-title"},{default:p(()=>[...f[14]||(f[14]=[V("Non-pharmacological therapy and other notes",-1)])]),_:1})]),_:1}),a("div",ao,[n(Gn,{class:"intervention-component"}),a("div",so,[n(r(Q),{class:"notes-input-item"},{default:p(()=>[n(r(Te),{slot:"start",icon:r(s).editPen,class:"edit-icon","aria-hidden":"true"},null,8,["icon"]),n(r(In),{modelValue:R.value,"onUpdate:modelValue":f[8]||(f[8]=D=>R.value=D),onIonInput:en,placeholder:"Enter notes here...","auto-grow":!0,class:"notes-textarea",fill:"outline",style:{"--padding-start":"16px"}},null,8,["modelValue"])]),_:1})]),n(r(je),{ref:"accordionGroup",class:"previous-notes"},{default:p(()=>[n(r(ve),{value:"fourth","toggle-icon-slot":"start"},{default:p(()=>[n(r(Q),{slot:"header",color:"light",class:"previous-notes-header"},{default:p(()=>[n(r(le),null,{default:p(()=>[...f[15]||(f[15]=[V("Previous visit notes",-1)])]),_:1})]),_:1}),a("div",oo,[a("div",io,[g.index===1?(o(!0),h(Z,{key:0},ue(E.value,(D,H)=>(o(),h("div",{key:H,class:"note-entry"},[(o(!0),h(Z,null,ue(D,(q,X)=>(o(),h("div",{key:X},[a("div",lo,$(q.date),1),a("div",ro,$(q.notes),1)]))),128))]))),128)):S("",!0),n(r(je),{onIonChange:an},{default:p(()=>[n(r(ve),{value:"third","toggle-icon-slot":"start"},{default:p(()=>[n(r(Q),{slot:"header",color:"light",class:"show-more-header"},{default:p(()=>[n(r(le),{color:"primary"},{default:p(()=>[V($(te.value),1)]),_:1})]),_:1}),a("div",co,[(o(!0),h(Z,null,ue(N.value,(D,H)=>(o(),h("div",{key:H,class:"note-entry"},[(o(!0),h(Z,null,ue(sn(D),(q,X)=>(o(),h("div",{key:X},[a("div",uo,$(q.date),1),a("div",po,$(q.notes),1)]))),128))]))),128))])]),_:1})]),_:1})])])]),_:1})]),_:1},512)])])]),_:1}))}}),$o=ce(vo,[["__scopeId","data-v-928c62f1"]]),fo={class:"dash_box"},go={key:1},_o=J({name:"xxxComponent"}),ho=J({..._o,setup(t){const s=l("No outcome created yet"),c=l(!1),u=l("please select a type");l("Add new outcome"),l(!0);const v=l(!0),d=l(""),_=l(!0),B=l(!1),k=Ln(),I=W(()=>k.outcomes),x=l(!1),C=l(!1),U=l(!1),i=l(!1),y=l(!1);l(null),l(null);const A=l([{name:"Admitted for short stay",selected:!1},{name:"Referred out",selected:!1},{name:"Discharged Home",selected:!1}]),w=[{multi_Selection:!1,show_list_label:!0,unqueId:"qwerty2",name_of_list:"Add new outcome",placeHolder:"Choose one",items:A.value,listUpdatedFN:M,listFilteredFN:()=>{},use_internal_filter:!0,disabled:l(!1)}];function M(m){A.value=m,A.value.forEach(e=>{e.selected==!0&&(d.value=e.name)})}ye(async()=>{F()}),de(()=>d.value,async m=>{x.value==!0?x.value=!1:P()}),de(()=>I.value.length,async m=>{F()});function O(){A.value.forEach(m=>{m.selected=!1}),d.value=""}function F(){I.value.length>0?_.value=!1:I.value.length==0&&B.value==!1&&(_.value=!0)}function T(m){I.value.splice(m,1)}const b=m=>{};async function P(m=!0){const e=d.value;console.log(e),d.value=e;const E=d.value;E==A.value[0].name?U.value=!0:U.value=!1,E==A.value[1].name?(i.value=!0,console.log("show_discharged_options is set to true")):i.value=!1,E==A.value[2].name?(y.value=!0,console.log("show_discharged_options is set to true")):y.value=!1}function R(){C.value=!1,U.value=!1,i.value=!1,y.value=!1,O()}return(m,e)=>{const E=Y("ion-row");return o(),L(r(Ve),null,{default:p(()=>[n(E,null,{default:p(()=>[n(r(dt),null,{default:p(()=>[(o(),L(Yn,{key:0,"onUpdate:removeItem":T,"onUpdate:editItem":b,displayData:I.value},null,8,["displayData"]))]),_:1})]),_:1}),_.value?(o(),L(E,{key:0},{default:p(()=>[a("span",fo,$(s.value),1)]),_:1})):S("",!0),v.value?(o(),h("div",go,[n(E,null,{default:p(()=>[n(r(dt),null,{default:p(()=>[n(Fn,{multiSelection:w[0].multi_Selection,show_label:w[0].show_list_label,uniqueId:w[0].unqueId,name_of_list:w[0].name_of_list,choose_place_holder:w[0].placeHolder,"items_-list":w[0].items,use_internal_filter:w[0].use_internal_filter,disabled:w[0].disabled.value,onItemListUpDated:w[0].listUpdatedFN,onItemListFiltered:w[0].listFilteredFN},null,8,["multiSelection","show_label","uniqueId","name_of_list","choose_place_holder","items_-list","use_internal_filter","disabled","onItemListUpDated","onItemListFiltered"]),a("div",null,[c.value?(o(),L(r(le),{key:0,class:"error-label"},{default:p(()=>[V($(u.value),1)]),_:1})):S("",!0)])]),_:1})]),_:1})])):S("",!0),U.value?(o(),L(jn,{key:2,onDataSaved:R,selected_ward_prop:"",admitted_other_props:""})):S("",!0),i.value?(o(),L(Kn,{key:3,onDataSaved:R,selected_referral_data:"",selected_other_referral_data:""})):S("",!0),y.value?(o(),L(Qn,{key:4,onDataSaved:R,selected_discharged_prop:"",selected_discharged_data:""})):S("",!0)]),_:1})}}}),Mo=ce(ho,[["__scopeId","data-v-b6576c18"]]);export{Ao as C,Oo as O,oa as P,rs as _,$o as a,Mo as b,fs as c,is as d,Ns as e};
