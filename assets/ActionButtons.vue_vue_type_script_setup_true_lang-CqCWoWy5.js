import{N as U,p as f,ab as j,ac as h,S as b,t as K,ad as W,ae as X,af as J,_ as C,q as e,v as S,U as Z,j as q}from"./index-1YBLjhMF.js";import{R as Q,d as M,r as P,c as E,a as N,y as I,f as _,z as i,l as n,u as o,S as ee,T as se,A as O,B as T,I as v,ag as x,X as k,ah as oe,e as A,F as Y,L as $,ai as ae,aj as y,bw as te,D as ne,V as re,W as H,an as ce,w as F,E as B,bc as ie,k as g,a7 as le,a$ as V,m as w,d2 as ue,d1 as L,cN as _e}from"./vendor-BV0gyDVt.js";const Re=Q("actionButtonStore",{state:()=>({show_action_button:!0}),actions:{setShowActionButton(p){this.show_action_button=p},getShowActionButton(){return this.show_action_button},resetShowActionButton(){this.show_action_button=!0}}}),de=["onClick"],pe={key:1,class:"no-data-container"},Ae=M({__name:"ActivitySelectionModal",setup(p){const u=U(),r=P("activities"),a=P([]),R=E(()=>a.value.filter(t=>t.isChecked));async function d(t){switch(t.toLowerCase()){case"ncd program":a.value=h(J),r.value="NCD_activities";break;case"opd program":a.value=h(X),r.value="OPD_activities";break;case"hiv program":a.value=h(W,"name","workflowID"),r.value="activities";break;default:a.value=[];break}}async function l(){const t=await b.getJson("user_properties",{user_id:u.getUserId(),property:r.value});t&&(a.value=a.value.map(s=>(t.property_value.search(s.value)>=0&&(s.isChecked=!0),s)))}async function c(){var t;try{return await b.postJson("user_properties",{property:r.value,property_value:R.value.map(s=>s.value).join(",")}),k.dismiss(R.value)}catch(s){console.error(s),K((t=s.message)!=null?t:"Failed to save selected activities")}}return N(()=>{var t,s;console.log("USER ID",u.getUserId()),console.log("USER PROGRAM",(t=f().activeProgram)==null?void 0:t.name),d((s=f().activeProgram)==null?void 0:s.name),l()}),(t,s)=>(_(),I(o(ce),null,{default:i(()=>[n(o(ee),{style:{display:"flex","justify-content":"space-between"},color:"success"},{default:i(()=>[n(o(se),{class:"modalTitle"},{default:i(()=>[O("Select Program Activites (selected: "+T(R.value.length)+")",1)]),_:1}),n(o(v),{onClick:o(k).dismiss,style:{"padding-top":"10px","padding-right":"10px"},icon:o(x)},null,8,["onClick","icon"])]),_:1}),n(o(oe),{fullscreen:!0},{default:i(()=>[a.value.length?(_(),I(j,{key:0,items:a.value,numberOfColumns:2},{default:i(({entries:D})=>[(_(!0),A(Y,null,$(D,(m,z)=>(_(),A("div",{class:"his-card clickable",key:z,onClick:G=>m.isChecked=!m.isChecked},[n(o(ae),null,{default:i(()=>[n(o(y),{size:"1"},{default:i(()=>[n(o(te),{modelValue:m.isChecked,"onUpdate:modelValue":G=>m.isChecked=G,onClick:G=>m.isChecked=!m.isChecked},null,8,["modelValue","onUpdate:modelValue","onClick"])]),_:2},1024),n(o(y),{class:"ion-text-center his-md-text"},{default:i(()=>[O(T(m.label),1)]),_:2},1024)]),_:2},1024)],8,de))),128))]),_:1},8,["items"])):(_(),A("div",pe,[n(o(ne),null,{default:i(()=>s[0]||(s[0]=[O("No activities available for this program")])),_:1,__:[0]})]))]),_:1}),n(o(re),{class:"ion-padding ion-text-end"},{default:i(()=>[n(o(H),{onClick:c},{default:i(()=>s[1]||(s[1]=[O("Save")])),_:1,__:[1]})]),_:1})]),_:1}))}}),me=C(Ae,[["__scopeId","data-v-fe49a642"]]),ge={class:"search-wrapper"},Pe={__name:"SearchField",props:{modelValue:String,placeholder:String},emits:["update:modelValue"],setup(p,{emit:u}){const r=l=>{d.value=l.target.value},a=p,R=u,d=P(a.modelValue||"");return F(d,l=>{R("update:modelValue",l)}),F(()=>a.modelValue,l=>{d.value=l}),(l,c)=>{const t=B("ion-icon"),s=B("ion-input");return _(),A("div",ge,[n(t,{icon:o(ie),class:"search-icon","aria-hidden":"true"},null,8,["icon"]),n(s,{value:d.value,onIonInput:r,class:"search-input",type:"text",placeholder:p.placeholder},null,8,["value","placeholder"])])}}},Oe=C(Pe,[["__scopeId","data-v-b69152ed"]]),Ie={class:"program-buttons-grid"},ve=["onClick"],Ce=["src"],Me={class:"program-name"},Ge=M({__name:"ProgramGrid",props:{programs:{},onSelect:{type:Function}},setup(p){return(u,r)=>(_(),A("div",Ie,[(_(!0),A(Y,null,$(u.programs,(a,R)=>(_(),A("div",{key:R,class:"program-tile",onClick:()=>u.onSelect(a)},[g("div",{class:"program-icon-container",style:le({backgroundColor:a.color})},[g("img",{src:a.icon,alt:"",class:"program-icon"},null,8,Ce)],4),g("div",Me,T(a.name.replace(/program/i,"").trim()),1)],8,ve))),128))]))}}),he=C(Ge,[["__scopeId","data-v-d36db6ec"]]),fe={[e.HIV_PROGRAM]:"/assets/icon/program_icons/ribbon.png",[e.TB_PROGRAM]:"/assets/icon/program_icons/tb.png",[e.EARLY_INFANT_DIAGNOSIS_PROGRAM]:"/assets/icon/program_icons/baby-0203_alt.png",[e.MDR_TB_PROGRAM]:"/assets/icon/program_icons/tb.png",[e.KAPOSIS_SARCOMA_PROGRAM]:"/assets/icon/program_icons/lymph-nodes.png",[e.CHRONIC_CARE_PROGRAM]:"/assets/icon/program_icons/intensive-care_unit.png",[e.MATERNITY_PROGRAM]:"/assets/icon/program_icons/pregnant.png",[e.ANC_PROGRAM]:"/assets/icon/program_icons/ancv.png",[e.DIABETES_PROGRAM]:"/assets/icon/program_icons/diabetes.png",[e.OPD_PROGRAM]:"/assets/icon/program_icons/outpatient.png",[e.IPD_PROGRAM]:"/assets/icon/program_icons/observation.png",[e.UNDER_5_PROGRAM]:"/assets/icon/program_icons/boy-0105y.png",[e.CIVIL_REGISTRATION_PROGRAM]:"/assets/icon/program_icons/register-book.png",[e.HTC_PROGRAM]:"/assets/icon/program_icons/blood-pressure.png",[e.ANC_CONNECT_PROGRAM]:"/assets/icon/program_icons/ancv.png",[e.HYPERTENSION_PROGRAM]:"/assets/icon/program_icons/blood-pressure.png",[e.IPT_PROGRAM]:"/assets/icon/program_icons/observation.png",[e.LABORATORY_PROGRAM]:"/assets/icon/program_icons/biochemistry-laboratory.png",[e.CXCA_PROGRAM]:"/assets/icon/program_icons/cervical-cancer.png",[e.RADIOLOGY_PROGRAM]:"/assets/icon/program_icons/radiology.png",[e.PATIENT_REGISTRATION_PROGRAM]:"/assets/icon/program_icons/human-resoruce.png",[e.AETC_PROGRAM]:"/assets/icon/program_icons/accident-and_emergency.png",[e.SPINE_PROGRAM]:"/assets/icon/program_icons/intensive-care_unit.png",[e.NCD_PROGRAM]:"/assets/icon/program_icons/autoimmune-disease.png",[e.IMMUNIZATION_PROGRAM]:"/assets/icon/program_icons/syringe-vaccine.png",[e.LABOUR_AND_DELIVERY_PROGRAM]:"/assets/icon/program_icons/fetus.png"},Se=p=>{switch(p){case e.HIV_PROGRAM:return"#F4A6A6";case e.TB_PROGRAM:return"#E6B89C";case e.EARLY_INFANT_DIAGNOSIS_PROGRAM:return"#FFF2A6";case e.MDR_TB_PROGRAM:return"#D2A679";case e.KAPOSIS_SARCOMA_PROGRAM:return"#D8B4E2";case e.CHRONIC_CARE_PROGRAM:return"#C7EFCF";case e.MATERNITY_PROGRAM:return"#FFCCE5";case e.ANC_PROGRAM:return"#FFD6DD";case e.DIABETES_PROGRAM:return"#D6F5D6";case e.OPD_PROGRAM:return"#B3E5FC";case e.IPD_PROGRAM:return"#FFF9C4";case e.UNDER_5_PROGRAM:return"#FFB3B3";case e.CIVIL_REGISTRATION_PROGRAM:return"#E0E0E0";case e.HTC_PROGRAM:return"#B2DFDB";case e.ANC_CONNECT_PROGRAM:return"#FFD6DD";case e.HYPERTENSION_PROGRAM:return"#B2DFDB";case e.IPT_PROGRAM:return"#FFF9C4";case e.LABORATORY_PROGRAM:return"#E6B89C";case e.CXCA_PROGRAM:return"#FFF2A6";case e.RADIOLOGY_PROGRAM:return"#CCCCCC";case e.PATIENT_REGISTRATION_PROGRAM:return"#FFF9C4";case e.AETC_PROGRAM:return"#FFB199";case e.SPINE_PROGRAM:return"#C7EFCF";case e.NCD_PROGRAM:return"#D6F5D6";case e.IMMUNIZATION_PROGRAM:return"#FFF2A6";case e.LABOUR_AND_DELIVERY_PROGRAM:return"#E6D6F3";default:return"#F5F5DC"}},Ee=[e.VHW_PROGRAM,e.TRIAGE_PROGRAM,e.VMMC_PROGRAM,e.PNC_PROGRAM,e.KAPOSIS_SARCOMA_PROGRAM,e.CIVIL_REGISTRATION_PROGRAM,e.DIABETES_PROGRAM,e.LABOUR_AND_DELIVERY_PROGRAM],Te={id:"container"},Fe={class:"centered-content"},Ne=M({__name:"ModulePicker",setup(p){const u=f(),r=P(""),a=E(()=>u.authorizedPrograms.filter(c=>!Ee.includes(c.program_id)).map(c=>({...c,icon:fe[c.program_id]||null,color:Se(c.program_id)}))),R=E(()=>a.value.filter(c=>c.name.toLowerCase().includes(r.value.toLowerCase())));function d(c){u.setActiveProgram(c),S.hide()}function l(){S.hide()}return N(()=>{a.value.length===1&&d(a.value[0])}),(c,t)=>(_(),A("div",Te,[t[1]||(t[1]=g("h1",null,[g("strong",null,"Services")],-1)),g("div",Fe,[n(o(H),{class:"close-button",fill:"clear",onClick:l},{default:i(()=>[n(o(v),{icon:o(x),size:"large",color:"warning"},null,8,["icon"])]),_:1}),n(Oe,{modelValue:r.value,"onUpdate:modelValue":t[0]||(t[0]=s=>r.value=s),placeholder:"Search..."},null,8,["modelValue"]),n(he,{programs:R.value,onSelect:d},null,8,["programs"])])]))}}),De=C(Ne,[["__scopeId","data-v-edbb67ff"]]),ye=M({__name:"ActionButtons",setup(p){const u=U(),{user_ID:r}=V(u),a=P(!1),R=Re(),{show_action_button:d}=V(R);N(async()=>{try{await l()}catch(s){}}),F(()=>r.value,async()=>{await l()},{deep:!0});const l=async()=>{try{const s=await Z.getUserAssignAndUnassignProgramActivities(r.value);a.value=s!==null?s:!1}catch(s){console.error("Error fetching assign and unassign program activities:",s)}};function c(){return q(me,{class:"activity-modal"})}async function t(){return S.show(De,{},"module-picker-modal")}return(s,D)=>o(d)?(_(),I(o(ue),{key:0,slot:"fixed",horizontal:"end",vertical:"bottom",class:"ion-margin-bottom",edge:""},{default:i(()=>[a.value?(_(),I(o(L),{key:0,onClick:c},{default:i(()=>[n(o(v),{src:"/public/svg/exam_multiple_choice.svg"})]),_:1})):w("",!0),n(o(L),{color:"primary",class:"ion-margin-vertical",onClick:t},{default:i(()=>[n(o(v),{icon:o(_e)},null,8,["icon"])]),_:1})]),_:1})):w("",!0)}});export{De as M,ye as _,Re as u};
