import{c5 as o,c9 as _,c8 as f,c4 as r,c6 as h,aE as s,aD as D}from"./index-zKIUFVbm.js";import{T as b,a as T}from"./tpt_report_service-vSQwn3xo.js";import{d as R,r as p,O as I,f as A}from"./vendor-BgCOLJ26.js";import"./lodash-NJiRuGo9.js";import"./apexcharts-2AIekHyJ.js";import"./age_groups-BkW1n_F5.js";const O=R({__name:"TptNewInitiation",setup(N){const n=p("-"),i=p([]),a=new b,c=[{path:"location",label:"District"},{path:"ageGroup",label:"Age group"},{path:"gender",label:"Gender",formatter:o},..._(T)],d=[{path:"arv_number",label:"ARV Number",preSort:f,initialSort:!0},{path:"birthdate",label:"Date of Birth",formatter:r},{path:"gender",label:"Gender",formatter:o},{path:"dispensation_date",label:"Dispensation Date",formatter:r},{path:"art_start_date",label:"Art Start Date",formatter:r},{path:"tpt_start_date",label:"TPT Start Date",formatter:r}];async function u(t){try{await s.show(),a.setStartDate(t.dateRange.startDate),a.setEndDate(t.dateRange.endDate),a.setOccupation(t.occupation),n.value=a.getDateIntervalPeriod();const e=await a.getTptNewInitiations(),l=e.F.rows[0].location;i.value=[...e.F.rows,...e.M.rows,{ageGroup:"All",gender:"Male",...e.M.aggregate,location:l},...(await a.buildMaternityAgreggateRows(e.F.aggregate)).map(w=>({...w,location:l}))]}catch(e){D("ERROR! Unable to load report data"),console.error(e)}await s.hide()}function m(t){return"".concat(t.column.label," | ").concat(t.row.ageGroup," | ").concat(o(t.row.gender),"s")}function g(t){return t.row[t.column.path].map(e=>({...e,person_id:e.patient_id}))}return(t,e)=>(A(),I(h,{title:"TPT New Initiation Report","report-type":"MoH",columns:c,rows:i.value,period:n.value,"drill-title":m,"custom-drill-columns":d,"drill-row-parser":g,useDateRangeFilter:"",showIndices:"",onGenerate:u},null,8,["rows","period"]))}});export{O as default};
