import{d as te,af as Re,G as ct,E as dt,ag as mt,ab as Oe,a1 as J,I as pt,a8 as vt,_ as Ke,$ as ft,H as Z,e as i,f as s,k as t,l as a,aT as Ne,r,c as X,a as ke,m as b,N as $,J as u,u as l,P,F as T,M as oe,a0 as Ae,e6 as ln,b5 as ht,e7 as rn,cY as un,e8 as cn,e9 as dn,ea as mn,eb as pn,d1 as vn,ec as fn,bM as hn,ap as gt,at as gn,bU as _n,ar as _t,aI as yn,K as I,O as G,w as pe,ai as Fe,ah as de,b1 as j,bp as re,a9 as bn,Q as Dn,i as Sn,ct as wn,v as xn,bg as je,a2 as Cn,bi as kn,a7 as In,bS as En,bE as An,aa as lt}from"./vendor-f_p5GZUu.js";import{bd as He,H as Ce,ae as K,bf as yt,be as bt,aX as Dt,u as $e,_ as me,l as Pe,av as Be,aw as Ve,J as xe,K as we,S as be,aO as Q,t as ue,N as Me,aI as ie,aJ as St,bB as Pn,bC as On,a$ as Nn,bb as _e,b0 as ye,bD as $n,aL as Mn,P as Ln,aP as rt,aV as Fn,v as Bn,aD as Ee,aE as Tn,ap as Rn}from"./index-DkrRWN31.js";import{l as ge}from"./lodash-NJiRuGo9.js";import{P as Vn}from"./patient_complaints_service-Dv_n_-oe.js";import{D as wt}from"./DashBox--MP9gApa.js";import{u as Hn}from"./useExposeFromStandardForm-CV7Fgag-.js";import{B as Je}from"./BasicForm-CLAuySv-.js";import{f as Xe,c as xt,a as Ct}from"./formatServerData-Bg-wbZM5.js";import{A as qn,P as Un,D as Wn,m as Gn}from"./NextAppointment-Pi5hxtYP.js";import{D as zn,b as Yn}from"./drug_prescription_service-BRsvwl86.js";import{D as ut}from"./drug_service-Dwx2LWIy.js";import{D as jn,A as Kn,R as Jn,a as Xn}from"./Outcome-CnFmRt6F.js";const Qn=te({name:"Menu",components:{IonContent:vt,IonHeader:pt,IonItem:J,IonList:Oe,IonMenu:mt,IonTitle:dt,IonToolbar:ct,List:He},computed:{...Re($e,["patient"]),...Re(Dt,["presentingComplaints"])},data(){return{valueNumericArray:[],obsDatetime:[],graphIcon:bt(["#006401"]),listIcon:yt(["#636363"]),displayGraph:!0,orders:[],height:[],BMI:[],iconBg:{},activeWeight:[],activeHeight:[],activeBMI:[],list:[],series:[{name:"",data:[]}]}},setup(){return{checkmark:ft,pulseOutline:Ke}},watch:{$router:{async handler(){await this.updateList()},immediate:!0,deep:!0},patient:{async handler(){await this.updateList()},deep:!0}},async mounted(){await this.updateList()},methods:{async updateList(){const e=await K.getAll(this.patient.patientID,"Presenting complaint"),n=ge.isEmpty(e)?[]:Promise.all(e.map(async p=>p.value_coded?{name:await K.getConceptName(p.value_coded),obs_date:p.obs_datetime,duration:p.children[0].value_text}:[]));this.setListData(await n)},setListData(e){this.list=[],this.list.push({actionBtn:!1,class:"col_background",header:!0,minHeight:"--min-height: 20px;",containSize:4,display:["Date","Presenting Complains","Duration"]}),e.forEach(n=>{this.list.push({actionBtn:!1,minHeight:"--min-height:20px;",class:"col_background",containSize:4,display:[Ce.toStandardHisFormat(n.obs_date),n.name,n.duration]})})}}}),Zn={class:"modal_wrapper"};function es(e,n,p,h,S,C){const v=Z("list");return s(),i("div",Zn,[t("div",null,[a(v,{listData:e.list},null,8,["listData"])])])}const ts=me(Qn,[["render",es],["__scopeId","data-v-30434e22"]]),ns={key:0},ss={style:{"align-content":"center"}},as={class:"ion-padding",slot:"content"},os=te({__name:"PresentingComplaints",setup(e,{expose:n}){const p=Dt(),{presentingComplaints:h}=Ne(p),S=r(Pe),C=r(!0),v=r(!1),g=r(!0),D=r(!1),m=r([]),y=r([]),d=r(),V=X(()=>[{componentType:"multiSelectInputField",header:"Presenting Complaints",name:"PresentingComplaints",trackBy:"concept_id",icon:Pe.search,hideSelected:!0,validation:w=>q(w==null?void 0:w.name,m.value)?"Presenting complaint already added":Be.required(w),options:y.value,grid:{s:"6"}},{componentType:"inputField",header:"Duration",name:"duration",icon:Pe.time,validation:w=>Be.isNotEmptyandNumber(w),grid:{s:"6"},unitOptions:[{label:"Hours",value:"Hours"},{label:"Days",value:"Days"},{label:"Weeks",value:"Weeks"},{label:"Months",value:"Months"},{label:"Years",value:"Years"}],unitValidation:w=>!w||w===""?"Please select a unit.":null},{componentType:"inputField",header:"Specify the presenting complaint(s)",name:"Other (specify)",icon:Pe.editPen,validation:w=>q(w,m.value)?"Presenting complaint already added":Be.required(w),condition:w=>{var A;return((A=w==null?void 0:w.PresentingComplaints)==null?void 0:A.name)==="Other"}},{componentType:"Alert",condition:w=>{var A;return Be.required((A=w==null?void 0:w.PresentingComplaints)==null?void 0:A.name)!=null},backgroundColor:"lightyellow",textColor:"black",value:"Please search thoroughly for the complaint. If it is not listed, search and select the 'Other' option to specify the complaint.",name:"noMatchAlert"}]),{formRef:E}=Hn(),L=async()=>{y.value=await Vn.getComplaintsList("Presenting complaint"),we(h.value,"PresentingComplaints","multiSelectData",y.value)},M=()=>{C.value=!1,g.value=!1,v.value=!0},R=async()=>{var k,o;const w=(k=E.value)==null?void 0:k.getFormValues();((o=E.value)==null?void 0:o.validateForm())==null&&(H(w),v.value=!1,g.value=!0)},H=w=>{var _;const A=w.duration+" "+w.duration_unit,k=w.PresentingComplaints,o=k.name==="Other"?w["Other (specify)"]:k.name;m.value.push({actionBtn:!0,btn:["delete"],name:o,concept_id:k.concept_id,duration:k.duration,durationUnits:k.duration_unit,display:[o,A],data:[{concept_id:8578,value_coded:k.concept_id,obs_datetime:be.getSessionDate(),child:[{concept_id:k.concept_id,value_text:A,obs_datetime:be.getSessionDate()}]}]}),(_=E.value)==null||_.resetForm(),D.value=!0},q=(w,A)=>A.some(k=>k.name===w),F=w=>{m.value=m.value.filter(A=>A.display[0]!==w.name)},Y=async()=>{const w=await K.getObsByEncounterIdAndDate(Q.PRESENTING_COMPLAINTS),A=m.value.flatMap(k=>k.data);if(A.length<=0&&w.length<=0)return ue("Presenting complaints is required");A.length<=0||(await K.addObsToEncounterPatient(A,Q.PRESENTING_COMPLAINTS),Me("Presenting complaints saved successful"),m.value=[])};return ke(async()=>{await L()}),n({onSubmit:Y}),(w,A)=>{const k=Z("ion-row"),o=Z("ion-label"),_=Z("ion-accordion"),O=Z("ion-accordion-group");return s(),i(T,null,[a(wt,{status:C.value,content:"No presenting complaints added"},null,8,["status"]),D.value?(s(),i("span",ns,[a(He,{listData:m.value,"onClicked:delete":F},null,8,["listData"])])):b("",!0),v.value?(s(),$(k,{key:1},{default:u(()=>[a(Ve,{formData:V.value,ref_key:"formRef",ref:E},null,8,["formData"]),t("div",ss,[a(xe,{fill:"clear",icon:S.value.plus,iconSlot:"icon-only","onClicked:btn":A[0]||(A[0]=U=>R()),name:"Save"},null,8,["icon"])])]),_:1})):b("",!0),g.value?(s(),$(k,{key:2,style:{"margin-top":"10px"}},{default:u(()=>[a(xe,{fill:"clear",icon:S.value.plus,iconSlot:"icon-only","onClicked:btn":A[1]||(A[1]=U=>M()),name:"Add new presenting complaints"},null,8,["icon"])]),_:1})):b("",!0),a(k,null,{default:u(()=>[a(O,{ref_key:"accordionGroup",ref:d,class:"previousView"},{default:u(()=>[a(_,{value:"first","toggle-icon-slot":"start",style:{"border-radius":"10px","background-color":"#fff"}},{default:u(()=>[a(l(J),{slot:"header",color:"light"},{default:u(()=>[a(o,{class:"previousLabel"},{default:u(()=>A[2]||(A[2]=[P("Previous presenting complaints",-1)])),_:1,__:[2]})]),_:1}),t("div",as,[a(ts)])]),_:1})]),_:1},512)]),_:1})],64)}}}),is=me(os,[["__scopeId","data-v-a95bcc0f"]]),ls=X(()=>[{componentType:"radioButtonField",header:"Eye opening response",name:"Eye opening response",obsValueType:"value_coded",type:"inline",options:[{label:"Spontaneously",value:"Spontaneously"},{label:"To speech",value:"To speech"},{label:"To pain",value:"To pain"},{label:"No response",value:"No response"}]},{componentType:"Dashes"},{componentType:"radioButtonField",header:"Best verbal response",name:"Best verbal response",obsValueType:"value_coded",type:"inline",options:[{label:"Oriented to time, place and person",value:"Oriented to time, place and person"},{label:"Confused",value:"Confused"},{label:"Inappropriate words",value:"Inappropriate words"},{label:"Incomprehensible sounds",value:"Incomprehensible sounds"},{label:"No response",value:"No response"}]},{componentType:"Dashes"},{componentType:"radioButtonField",header:"Best motor response",name:"Best motor response",obsValueType:"value_coded",type:"inline",options:[{label:"Obeys commands",value:"Obeys commands"},{label:"Moves to localised pain",value:"Moves to localised pain"},{label:"Flexion withdrawal from pain",value:"Flexion withdrawal from pain"},{label:"Abnormal flexion (decorticate)",value:"Abnormal flexion (decorticate)"},{label:"Abnormal extension (decerebrate)",value:"Abnormal extension (decerebrate)"},{label:"No response",value:"No response"}]}]),rs=X(()=>[{componentType:"radioButtonField",header:"Eye opening response",name:"Eye opening response",obsValueType:"value_coded",type:"inline",options:[{label:"Directed eye movements",value:"Directed eye movements"},{label:"Not directed",value:"Not directed"}]},{componentType:"Dashes"},{componentType:"radioButtonField",header:"Best verbal response",name:"Best verbal response",obsValueType:"value_coded",type:"inline",options:[{label:"Appropriate cry",value:"Appropriate cry"},{label:"Inappropriate cry or moan",value:"Inappropriate cry or moan"},{label:"No cry",value:"No cry"}]},{componentType:"Dashes"},{componentType:"radioButtonField",header:"Best motor response",name:"Best motor response",obsValueType:"value_coded",type:"inline",options:[{label:"Localizes pain",value:"Localizes pain"},{label:"Withdraws from pain",value:"Withdraws from pain"},{label:"Non specific or no response",value:"Non specific or no response"}]}]),kt={Spontaneously:4,"To speech":3,"To pain":2,"No response":1},It={"Oriented to time, place and person":5,Confused:4,"Inappropriate words":3,"Incomprehensible sounds":2,"No response":1},Et={"Obeys commands":6,"Moves to localised pain":5,"Flexion withdrawal from pain":4,"Abnormal flexion (decorticate)":3,"Abnormal extension (decerebrate)":2,"No response":1},At={"Not directed":0,"Directed eye movements":1},Pt={"Non specific or no response":0,"Withdraws from pain":1,"Localizes pain":2},Ot={"No cry":0,"Inappropriate cry or moan":1,"Appropriate cry":2},us=te({name:"VisitHistory",components:{IonIcon:Ae,IonButton:oe},setup(){const e=St();return{selectedAllergiesList2:X(()=>e.selectedMedicalAllergiesList),calendarOutline:yn,alertCircleOutline:_t,documentTextOutline:_n,femaleOutline:gn,medicalOutline:gt,warningOutline:hn,bodyOutline:fn,eyeOutline:vn,nutritionOutline:pn,fitnessOutline:mn,pulseOutline:Ke,earOutline:dn,happyOutline:cn,manOutline:un,moveOutline:rn,addOutline:ht,scanOutline:ln}},data(){return{visits:[],visitDate:null,presentingComplaint:[],pastMedicalHistory:[],levelOfConsciousness:{eyeResponse:null,verbalResponse:null,motorResponse:null},pregnancy:{patientPregnant:null,breastFeeding:null},eyesAbnormal:[],mouthAbnormal:[],earsAbnormal:[],faceAbnormal:[],neckAbnormal:[],chestAbnormal:[],chestMovementAbnormal:[],heartSoundsAbnormal:[],breathSoundsAbnormal:[],addedBreathSoundsAbnormal:[],abdominalInspectionAbnormal:[],eyesExamined:!1,mouthExamined:!1,earsExamined:!1,faceExamined:!1,neckExamined:!1,chestExamined:!1,chestMovementExamined:!1,heartSoundsExamined:!1,breathSoundsExamined:!1,addedBreathSoundsExamined:!1,abdominalInspectionExamined:!1}},computed:{...Re($e,["patient"]),hasLevelOfConsciousness(){return this.levelOfConsciousness.eyeResponse||this.levelOfConsciousness.verbalResponse||this.levelOfConsciousness.motorResponse},hasPresentingComplaints(){var e;return((e=this.uniquePresentingComplaints)==null?void 0:e.length)>0},hasPregnancyData(){return this.pregnancy.patientPregnant||this.pregnancy.breastFeeding},hasPastMedicalHistory(){var e;return((e=this.uniquePastMedicalHistory)==null?void 0:e.length)>0},hasAllergies(){var e,n;return((n=(e=this.selectedAllergiesList2)==null?void 0:e.filter(p=>p.selected))==null?void 0:n.length)>0},hasPhysicalExam(){var e,n,p,h,S,C,v,g,D,m,y;return((e=this.eyesAbnormal)==null?void 0:e.length)>0||this.eyesExamined||((n=this.mouthAbnormal)==null?void 0:n.length)>0||this.mouthExamined||((p=this.earsAbnormal)==null?void 0:p.length)>0||this.earsExamined||((h=this.faceAbnormal)==null?void 0:h.length)>0||this.faceExamined||((S=this.neckAbnormal)==null?void 0:S.length)>0||this.neckExamined||((C=this.chestAbnormal)==null?void 0:C.length)>0||this.chestExamined||((v=this.chestMovementAbnormal)==null?void 0:v.length)>0||this.chestMovementExamined||((g=this.heartSoundsAbnormal)==null?void 0:g.length)>0||this.heartSoundsExamined||((D=this.breathSoundsAbnormal)==null?void 0:D.length)>0||this.breathSoundsExamined||((m=this.addedBreathSoundsAbnormal)==null?void 0:m.length)>0||this.addedBreathSoundsExamined||((y=this.abdominalInspectionAbnormal)==null?void 0:y.length)>0||this.abdominalInspectionExamined},uniquePastMedicalHistory(){return[...new Map(this.pastMedicalHistory.map(e=>[e,e])).values()]},uniquePresentingComplaints(){return[...new Map(this.presentingComplaint.map(e=>[e,e])).values()]},isMinor(){var e,n;return Ce.getAgeInYears((n=(e=this.patient)==null?void 0:e.personInformation)==null?void 0:n.birthdate)<18},gcsScore(){var g,D,m;if(!this.hasLevelOfConsciousness)return null;const e=this.levelOfConsciousness.eyeResponse,n=this.levelOfConsciousness.motorResponse,p=this.levelOfConsciousness.verbalResponse,h=(g=(this.isMinor?At:kt)[e])!=null?g:0,S=(D=(this.isMinor?Pt:Et)[n])!=null?D:0,C=(m=(this.isMinor?Ot:It)[p])!=null?m:0,v=h+S+C;return"(M ".concat(S," V ").concat(C," E ").concat(h,") ").concat(v,"/").concat(this.isMinor?5:15)}},methods:{formatVisitDate(e){return e?Ce.toStandardHisDisplayFormat(e):"No visit date"},async updateData(){var e;(e=this.patient)!=null&&e.patientID&&(await this.loadPresentingComplaints(),await this.loadPastMedicalHistory(),await this.loadLevelOfConsciousness(),await this.loadPregnancyStatus(),await this.loadPhysicalExam())},async loadPresentingComplaints(){try{const e=await K.getObsByEncounterIdAndDate(Q.PRESENTING_COMPLAINTS);this.presentingComplaint=await this.getConceptValues(this.filterObs(e,"Presenting complaint"),"coded")}catch(e){console.error("Error loading presenting complaints:",e)}},async loadPastMedicalHistory(){try{const e=await K.getObsByEncounterIdAndDate(Q.PAST_MEDICAL_HISTORY);this.pastMedicalHistory=await this.getConceptValues(this.filterObs(e,"Chronic disease"),"coded")}catch(e){console.error("Error loading past medical history:",e)}},async loadLevelOfConsciousness(){try{const e=await K.getObsByEncounterIdAndDate(Q.ASSESSMENT);if(e&&Array.isArray(e)){const n=this.filterObs(e,"Eye opening response");this.levelOfConsciousness.eyeResponse=n.length>0?await ie.getConceptName(n[0].value_coded):null;const p=this.filterObs(e,"Best verbal response");this.levelOfConsciousness.verbalResponse=p.length>0?await ie.getConceptName(p[0].value_coded):null;const h=this.filterObs(e,"Best motor response");this.levelOfConsciousness.motorResponse=h.length>0?await ie.getConceptName(h[0].value_coded):null}}catch(e){console.error("Error loading level of consciousness:",e)}},async loadPregnancyStatus(){try{const e=await K.getObsByEncounterIdAndDate(Q.PREGNANCY_STATUS);if(e&&Array.isArray(e)){const n=this.filterObs(e,"Patient pregnant");this.pregnancy.patientPregnant=n.length>0?await ie.getConceptName(n[0].value_coded):null;const p=this.filterObs(e,"Is patient breast feeding?");this.pregnancy.breastFeeding=p.length>0?await ie.getConceptName(p[0].value_coded):null}}catch(e){console.error("Error loading pregnancy status:",e)}},async loadPhysicalExam(){try{const e=await K.getObsByEncounterIdAndDate(Q.PHYSICAL_EXAMINATION);await this.processPhysicalExamObservations(e)}catch(e){console.error("Error loading physical exam:",e)}},filterObs(e,n){return e?e.filter(p=>{var h,S;return((S=(h=p.concept)==null?void 0:h.concept_names)==null?void 0:S.some(C=>C.name===n))||p.concept_name===n}):[]},async getConceptValues(e,n){return e?await Promise.all(e.map(async p=>p.value_coded?await ie.getConceptName(p.value_coded):p.concept_name||p.name)):[]},async processPhysicalExamObservations(e){var n,p,h,S,C,v,g,D;if(!(!e||!Array.isArray(e))){this.eyesAbnormal=[],this.mouthAbnormal=[],this.earsAbnormal=[],this.faceAbnormal=[],this.neckAbnormal=[],this.chestAbnormal=[],this.chestMovementAbnormal=[],this.heartSoundsAbnormal=[],this.breathSoundsAbnormal=[],this.addedBreathSoundsAbnormal=[],this.abdominalInspectionAbnormal=[],this.eyesExamined=!1,this.mouthExamined=!1,this.earsExamined=!1,this.faceExamined=!1,this.neckExamined=!1,this.chestExamined=!1,this.chestMovementExamined=!1,this.heartSoundsExamined=!1,this.breathSoundsExamined=!1,this.addedBreathSoundsExamined=!1,this.abdominalInspectionExamined=!1;for(const m of e){if(!m.concept_name&&!((n=m.concept)!=null&&n.concept_names))continue;const y=m.concept_name||((S=(h=(p=m.concept)==null?void 0:p.concept_names)==null?void 0:h.find(d=>d.concept_name_type==="FULLY_SPECIFIED"))==null?void 0:S.name);y&&(y.includes("normal")||y.includes("Normal"))&&m.value_coded===1065&&(y.includes("Eyes normal")?this.eyesExamined=!0:y.includes("Mouth normal")?this.mouthExamined=!0:y.includes("Ears normal")?this.earsExamined=!0:y.includes("Face normal")?this.faceExamined=!0:y.includes("Neck normal")?this.neckExamined=!0:y.includes("Chest inspection normal")?this.chestExamined=!0:y.includes("Heart sounds normal")?this.heartSoundsExamined=!0:y.includes("Breath sounds normal")?this.breathSoundsExamined=!0:y.includes("Abdominal inspection normal")&&(this.abdominalInspectionExamined=!0))}for(const m of e){if(!m.concept_name&&!((C=m.concept)!=null&&C.concept_names))continue;const y=m.concept_name||((D=(g=(v=m.concept)==null?void 0:v.concept_names)==null?void 0:g.find(d=>d.concept_name_type==="FULLY_SPECIFIED"))==null?void 0:D.name);if(y&&!(y.includes("normal")||y.includes("Normal"))){if(y.includes("Abnormality for eyes"))if(this.eyesExamined=!0,m.value_coded){const d=await ie.getConceptName(m.value_coded);d&&d.toLowerCase()!=="no"&&d.toLowerCase()!=="normal"&&this.eyesAbnormal.push(d)}else m.value_text&&this.eyesAbnormal.push(m.value_text);else if(y.includes("Abnormality for mouth"))if(this.mouthExamined=!0,m.value_coded){const d=await ie.getConceptName(m.value_coded);d&&d.toLowerCase()!=="no"&&d.toLowerCase()!=="normal"&&this.mouthAbnormal.push(d)}else m.value_text&&this.mouthAbnormal.push(m.value_text);else if(y.includes("Abnormality for ears"))if(this.earsExamined=!0,m.value_coded){const d=await ie.getConceptName(m.value_coded);d&&d.toLowerCase()!=="no"&&d.toLowerCase()!=="normal"&&this.earsAbnormal.push(d)}else m.value_text&&this.earsAbnormal.push(m.value_text);else if(y.includes("Abnormality for face"))if(this.faceExamined=!0,m.value_coded){const d=await ie.getConceptName(m.value_coded);d&&d.toLowerCase()!=="no"&&d.toLowerCase()!=="normal"&&this.faceAbnormal.push(d)}else m.value_text&&this.faceAbnormal.push(m.value_text);else if(y.includes("Abnormality for neck"))if(this.neckExamined=!0,m.value_coded){const d=await ie.getConceptName(m.value_coded);d&&d.toLowerCase()!=="no"&&d.toLowerCase()!=="normal"&&this.neckAbnormal.push(d)}else m.value_text&&this.neckAbnormal.push(m.value_text);else if(y.includes("Abnormality for chest")&&(this.chestExamined=!0,m.value_coded)){const d=await ie.getConceptName(m.value_coded);d&&d.toLowerCase()!=="no"&&d.toLowerCase()!=="normal"&&this.chestAbnormal.push(d)}}}}}},watch:{patient:{async handler(){await this.updateData()},deep:!0}},async mounted(){await this.updateData()}}),cs={class:"visit-container"},ds={class:"visit-sections"},ms={key:0,class:"visit-section"},ps={class:"section-header"},vs={class:"section-content"},fs={key:0,class:"info-item"},hs={class:"info-value"},gs={key:1,class:"info-item"},_s={class:"info-value"},ys={key:2,class:"info-item"},bs={class:"info-value"},Ds={key:3,class:"info-item"},Ss={class:"info-value highlight"},ws={key:1,class:"visit-section"},xs={class:"section-header"},Cs={class:"tags-container"},ks={key:2,class:"visit-section"},Is={class:"section-header"},Es={class:"section-content"},As={key:0,class:"info-item"},Ps={class:"info-value highlight"},Os={key:1,class:"info-item"},Ns={class:"info-value highlight"},$s={key:3,class:"visit-section"},Ms={class:"section-header"},Ls={class:"tags-container"},Fs={key:4,class:"visit-section"},Bs={class:"section-header"},Ts={class:"tags-container"},Rs={key:0,class:"allergy-tag"},Vs={key:5,class:"visit-section"},Hs={class:"section-header"},qs={class:"exam-section"},Us={key:0,class:"exam-category"},Ws={class:"exam-category-header"},Gs={class:"exam-items"},zs={key:1,class:"exam-category normal"},Ys={class:"exam-category-header"},js={key:2,class:"exam-category"},Ks={class:"exam-category-header"},Js={class:"exam-items"},Xs={key:3,class:"exam-category normal"},Qs={class:"exam-category-header"},Zs={key:4,class:"exam-category"},ea={class:"exam-category-header"},ta={class:"exam-items"},na={key:5,class:"exam-category normal"},sa={class:"exam-category-header"},aa={key:6,class:"exam-category"},oa={class:"exam-category-header"},ia={class:"exam-items"},la={key:7,class:"exam-category normal"},ra={class:"exam-category-header"},ua={key:8,class:"exam-category"},ca={class:"exam-category-header"},da={class:"exam-items"},ma={key:9,class:"exam-category normal"},pa={class:"exam-category-header"},va={key:10,class:"exam-category"},fa={class:"exam-category-header"},ha={class:"exam-items"},ga={key:11,class:"exam-category normal"},_a={class:"exam-category-header"},ya={key:12,class:"exam-category"},ba={class:"exam-category-header"},Da={class:"exam-items"},Sa={key:13,class:"exam-category normal"},wa={class:"exam-category-header"},xa={key:14,class:"exam-category"},Ca={class:"exam-category-header"},ka={class:"exam-items"},Ia={key:15,class:"exam-category normal"},Ea={class:"exam-category-header"},Aa={key:16,class:"exam-category"},Pa={class:"exam-items"},Oa={key:17,class:"exam-category normal"},Na={key:18,class:"exam-category"},$a={class:"exam-category-header"},Ma={class:"exam-items"},La={key:19,class:"exam-category normal"},Fa={class:"exam-category-header"},Ba={key:20,class:"exam-category"},Ta={class:"exam-category-header"},Ra={class:"exam-items"},Va={key:21,class:"exam-category normal"},Ha={class:"exam-category-header"};function qa(e,n,p,h,S,C){const v=Z("ion-icon");return s(),i("div",cs,[n[44]||(n[44]=t("div",{class:"visit-header"},[t("h5",null,"Patient's Clinical Assessment Summary")],-1)),t("div",ds,[e.hasLevelOfConsciousness?(s(),i("div",ms,[t("div",ps,[a(v,{icon:e.alertCircleOutline,class:"section-icon"},null,8,["icon"]),n[0]||(n[0]=t("h3",null,"Level of Consciousness",-1))]),t("div",vs,[e.levelOfConsciousness.eyeResponse?(s(),i("div",fs,[n[1]||(n[1]=t("span",{class:"info-label"},"Eye Response:",-1)),t("span",hs,I(e.levelOfConsciousness.eyeResponse),1)])):b("",!0),e.levelOfConsciousness.verbalResponse?(s(),i("div",gs,[n[2]||(n[2]=t("span",{class:"info-label"},"Verbal Response:",-1)),t("span",_s,I(e.levelOfConsciousness.verbalResponse),1)])):b("",!0),e.levelOfConsciousness.motorResponse?(s(),i("div",ys,[n[3]||(n[3]=t("span",{class:"info-label"},"Motor Response:",-1)),t("span",bs,I(e.levelOfConsciousness.motorResponse),1)])):b("",!0),e.gcsScore?(s(),i("div",Ds,[n[4]||(n[4]=t("span",{class:"info-label"},"Score:",-1)),t("span",Ss,I(e.gcsScore),1)])):b("",!0)])])):b("",!0),e.hasPresentingComplaints?(s(),i("div",ws,[t("div",xs,[a(v,{icon:e.documentTextOutline,class:"section-icon"},null,8,["icon"]),n[5]||(n[5]=t("h3",null,"Presenting Complaints",-1))]),t("div",Cs,[(s(!0),i(T,null,G(e.uniquePresentingComplaints,(g,D)=>(s(),i("div",{class:"complaint-tag",key:D},I(g),1))),128))])])):b("",!0),e.hasPregnancyData?(s(),i("div",ks,[t("div",Is,[a(v,{icon:e.femaleOutline,class:"section-icon"},null,8,["icon"]),n[6]||(n[6]=t("h3",null,"Pregnancy Status",-1))]),t("div",Es,[e.pregnancy.patientPregnant?(s(),i("div",As,[n[7]||(n[7]=t("span",{class:"info-label"},"Pregnant:",-1)),t("span",Ps,I(e.pregnancy.patientPregnant),1)])):b("",!0),e.pregnancy.breastFeeding?(s(),i("div",Os,[n[8]||(n[8]=t("span",{class:"info-label"},"Breastfeeding:",-1)),t("span",Ns,I(e.pregnancy.breastFeeding),1)])):b("",!0)])])):b("",!0),e.hasPastMedicalHistory?(s(),i("div",$s,[t("div",Ms,[a(v,{icon:e.medicalOutline,class:"section-icon"},null,8,["icon"]),n[9]||(n[9]=t("h3",null,"Medical History",-1))]),t("div",Ls,[(s(!0),i(T,null,G(e.uniquePastMedicalHistory,(g,D)=>(s(),i("div",{class:"medical-tag",key:D},I(g),1))),128))])])):b("",!0),e.hasAllergies?(s(),i("div",Fs,[t("div",Bs,[a(v,{icon:e.warningOutline,class:"section-icon"},null,8,["icon"]),n[10]||(n[10]=t("h3",null,"Allergies",-1))]),t("div",Ts,[(s(!0),i(T,null,G(e.selectedAllergiesList2,(g,D)=>(s(),i(T,{key:D},[g.selected?(s(),i("div",Rs,I(g.name),1)):b("",!0)],64))),128))])])):b("",!0),e.hasPhysicalExam?(s(),i("div",Vs,[t("div",Hs,[a(v,{icon:e.bodyOutline,class:"section-icon"},null,8,["icon"]),n[11]||(n[11]=t("h3",null,"Physical Examination",-1))]),t("div",qs,[e.eyesAbnormal.length?(s(),i("div",Us,[t("div",Ws,[a(v,{icon:e.eyeOutline},null,8,["icon"]),n[12]||(n[12]=t("h4",null,"Eyes",-1))]),t("div",Gs,[(s(!0),i(T,null,G(e.eyesAbnormal,(g,D)=>(s(),i("div",{class:"exam-item",key:"eyes-"+D},I(g),1))),128))])])):e.eyesExamined?(s(),i("div",zs,[t("div",Ys,[a(v,{icon:e.eyeOutline},null,8,["icon"]),n[13]||(n[13]=t("h4",null,"Eyes",-1))]),n[14]||(n[14]=t("div",{class:"exam-items"},[t("div",{class:"exam-item normal"}," Normal examination ")],-1))])):b("",!0),e.mouthAbnormal.length?(s(),i("div",js,[t("div",Ks,[a(v,{icon:e.nutritionOutline},null,8,["icon"]),n[15]||(n[15]=t("h4",null,"Mouth",-1))]),t("div",Js,[(s(!0),i(T,null,G(e.mouthAbnormal,(g,D)=>(s(),i("div",{class:"exam-item",key:"mouth-"+D},I(g),1))),128))])])):e.mouthExamined?(s(),i("div",Xs,[t("div",Qs,[a(v,{icon:e.nutritionOutline},null,8,["icon"]),n[16]||(n[16]=t("h4",null,"Mouth",-1))]),n[17]||(n[17]=t("div",{class:"exam-items"},[t("div",{class:"exam-item normal"}," Normal examination ")],-1))])):b("",!0),e.earsAbnormal.length?(s(),i("div",Zs,[t("div",ea,[a(v,{icon:e.earOutline},null,8,["icon"]),n[18]||(n[18]=t("h4",null,"Ears",-1))]),t("div",ta,[(s(!0),i(T,null,G(e.earsAbnormal,(g,D)=>(s(),i("div",{class:"exam-item",key:"ears-"+D},I(g),1))),128))])])):e.earsExamined?(s(),i("div",na,[t("div",sa,[a(v,{icon:e.earOutline},null,8,["icon"]),n[19]||(n[19]=t("h4",null,"Ears",-1))]),n[20]||(n[20]=t("div",{class:"exam-items"},[t("div",{class:"exam-item normal"}," Normal examination ")],-1))])):b("",!0),e.faceAbnormal.length?(s(),i("div",aa,[t("div",oa,[a(v,{icon:e.happyOutline},null,8,["icon"]),n[21]||(n[21]=t("h4",null,"Face",-1))]),t("div",ia,[(s(!0),i(T,null,G(e.faceAbnormal,(g,D)=>(s(),i("div",{class:"exam-item",key:"face-"+D},I(g),1))),128))])])):e.faceExamined?(s(),i("div",la,[t("div",ra,[a(v,{icon:e.happyOutline},null,8,["icon"]),n[22]||(n[22]=t("h4",null,"Face",-1))]),n[23]||(n[23]=t("div",{class:"exam-items"},[t("div",{class:"exam-item normal"}," Normal examination ")],-1))])):b("",!0),e.neckAbnormal.length?(s(),i("div",ua,[t("div",ca,[a(v,{icon:e.manOutline},null,8,["icon"]),n[24]||(n[24]=t("h4",null,"Neck",-1))]),t("div",da,[(s(!0),i(T,null,G(e.neckAbnormal,(g,D)=>(s(),i("div",{class:"exam-item",key:"neck-"+D},I(g),1))),128))])])):e.neckExamined?(s(),i("div",ma,[t("div",pa,[a(v,{icon:e.manOutline},null,8,["icon"]),n[25]||(n[25]=t("h4",null,"Neck",-1))]),n[26]||(n[26]=t("div",{class:"exam-items"},[t("div",{class:"exam-item normal"}," Normal examination ")],-1))])):b("",!0),e.chestAbnormal.length?(s(),i("div",va,[t("div",fa,[a(v,{icon:e.fitnessOutline},null,8,["icon"]),n[27]||(n[27]=t("h4",null,"Chest",-1))]),t("div",ha,[(s(!0),i(T,null,G(e.chestAbnormal,(g,D)=>(s(),i("div",{class:"exam-item",key:"chest-"+D},I(g),1))),128))])])):e.chestExamined?(s(),i("div",ga,[t("div",_a,[a(v,{icon:e.fitnessOutline},null,8,["icon"]),n[28]||(n[28]=t("h4",null,"Chest",-1))]),n[29]||(n[29]=t("div",{class:"exam-items"},[t("div",{class:"exam-item normal"}," Normal examination ")],-1))])):b("",!0),e.chestMovementAbnormal.length?(s(),i("div",ya,[t("div",ba,[a(v,{icon:e.moveOutline},null,8,["icon"]),n[30]||(n[30]=t("h4",null,"Chest Movement",-1))]),t("div",Da,[(s(!0),i(T,null,G(e.chestMovementAbnormal,(g,D)=>(s(),i("div",{class:"exam-item",key:"chest-move-"+D},I(g),1))),128))])])):e.chestMovementExamined?(s(),i("div",Sa,[t("div",wa,[a(v,{icon:e.moveOutline},null,8,["icon"]),n[31]||(n[31]=t("h4",null,"Chest Movement",-1))]),n[32]||(n[32]=t("div",{class:"exam-items"},[t("div",{class:"exam-item normal"}," Normal movement ")],-1))])):b("",!0),e.heartSoundsAbnormal.length?(s(),i("div",xa,[t("div",Ca,[a(v,{icon:e.pulseOutline},null,8,["icon"]),n[33]||(n[33]=t("h4",null,"Heart Sounds",-1))]),t("div",ka,[(s(!0),i(T,null,G(e.heartSoundsAbnormal,(g,D)=>(s(),i("div",{class:"exam-item",key:"heart-"+D},I(g),1))),128))])])):e.heartSoundsExamined?(s(),i("div",Ia,[t("div",Ea,[a(v,{icon:e.pulseOutline},null,8,["icon"]),n[34]||(n[34]=t("h4",null,"Heart Sounds",-1))]),n[35]||(n[35]=t("div",{class:"exam-items"},[t("div",{class:"exam-item normal"}," Normal heart sounds ")],-1))])):b("",!0),e.breathSoundsAbnormal.length?(s(),i("div",Aa,[n[36]||(n[36]=t("div",{class:"exam-category-header"},[t("h4",null,"Breath Sounds")],-1)),t("div",Pa,[(s(!0),i(T,null,G(e.breathSoundsAbnormal,(g,D)=>(s(),i("div",{class:"exam-item",key:"breath-"+D},I(g),1))),128))])])):e.breathSoundsExamined?(s(),i("div",Oa,n[37]||(n[37]=[t("div",{class:"exam-category-header"},[t("h4",null,"Breath Sounds")],-1),t("div",{class:"exam-items"},[t("div",{class:"exam-item normal"}," Normal breath sounds ")],-1)]))):b("",!0),e.addedBreathSoundsAbnormal.length?(s(),i("div",Na,[t("div",$a,[a(v,{icon:e.addOutline},null,8,["icon"]),n[38]||(n[38]=t("h4",null,"Added Breath Sounds",-1))]),t("div",Ma,[(s(!0),i(T,null,G(e.addedBreathSoundsAbnormal,(g,D)=>(s(),i("div",{class:"exam-item",key:"added-breath-"+D},I(g),1))),128))])])):e.addedBreathSoundsExamined?(s(),i("div",La,[t("div",Fa,[a(v,{icon:e.addOutline},null,8,["icon"]),n[39]||(n[39]=t("h4",null,"Added Breath Sounds",-1))]),n[40]||(n[40]=t("div",{class:"exam-items"},[t("div",{class:"exam-item normal"}," No abnormal added sounds ")],-1))])):b("",!0),e.abdominalInspectionAbnormal.length?(s(),i("div",Ba,[t("div",Ta,[a(v,{icon:e.scanOutline},null,8,["icon"]),n[41]||(n[41]=t("h4",null,"Abdominal Inspection",-1))]),t("div",Ra,[(s(!0),i(T,null,G(e.abdominalInspectionAbnormal,(g,D)=>(s(),i("div",{class:"exam-item",key:"abdomen-"+D},I(g),1))),128))])])):e.abdominalInspectionExamined?(s(),i("div",Va,[t("div",Ha,[a(v,{icon:e.scanOutline},null,8,["icon"]),n[42]||(n[42]=t("h4",null,"Abdominal Inspection",-1))]),n[43]||(n[43]=t("div",{class:"exam-items"},[t("div",{class:"exam-item normal"}," Normal abdominal inspection ")],-1))])):b("",!0)])])):b("",!0)])])}const Ua=me(us,[["render",qa],["__scopeId","data-v-374c46fb"]]),Wa={class:"modal_wrapper"},Ga=te({__name:"LevelOfConsciousness",setup(e,{expose:n}){var D,m;const p=$e(),{patient:h}=Ne(p),S=r(Ce.getAgeInYears((m=(D=h==null?void 0:h.value)==null?void 0:D.personInformation)==null?void 0:m.birthdate)),C=r(null),v=X(()=>{var F,Y,w,A;const y=((F=C.value)==null?void 0:F.getFormValues())||{},d=y["Eye opening response"]||"",V=y["Best motor response"]||"",E=y["Best verbal response"]||"",L=S.value<18,M=(Y=(L?At:kt)[d])!=null?Y:0,R=(w=(L?Pt:Et)[V])!=null?w:0,H=(A=(L?Ot:It)[E])!=null?A:0,q=M+R+H;return"(M ".concat(R," V ").concat(H," E ").concat(M,") ").concat(q,"/").concat(L?5:15)});return n({onSubmit:async()=>{var d;if(!C.value){console.error("Form reference is not available");return}const y=((d=C.value)==null?void 0:d.getFormValues())||{};y["Eye opening response"]||y["Best motor response"]||y["Best verbal response"]?(await K.buildAddObsToEncounterPatient(y,Q.ASSESSMENT),C.value.resetForm(),Me("Level of Consciousness saved successfully")):ue(" No level of consciousness data to save ")}}),(y,d)=>(s(),i("div",Wa,[S.value<18?(s(),$(Ve,{key:0,formData:l(rs),ref_key:"formRef",ref:C},null,8,["formData"])):(s(),$(Ve,{key:1,formData:l(ls),ref_key:"formRef",ref:C},null,8,["formData"])),t("h5",null,I(v.value),1)]))}}),za={class:"modal_wrapper"},Ya=te({__name:"PregnancyBreastfeeding",setup(e,{expose:n}){const p=Pn(),{pregnancy:h}=Ne(p),S=()=>{};return n({onSubmit:async()=>{const v=await Xe(h.value);v.length>0?(await K.addObsToEncounterPatient(v,Q.PREGNANCY_STATUS),Me("Pregnancy status saved successfully")):ue("No pregnancy status data to save ")}}),(v,g)=>(s(),i("div",za,[a(Je,{contentData:l(h),"onUpdate:inputValue":S},null,8,["contentData"])]))}}),ja={class:"modal_wrapper"},Ka={class:"uniform_columns"},Ja=te({__name:"PastMedicalHistory",setup(e,{expose:n}){const p=On(),{pastMedicalHistory:h}=Ne(p),S=r([]);ke(()=>{S.value=p.getInitial(),C()}),pe(h,()=>{C()},{deep:!0});const C=()=>{var y;const m=["TB","Chronic Obstructive Pulmonary Disease (COPD)","Asthma","Epilepsy","Previous stroke","Peptic Ulcer Disease (PUD)","Mental disorder","Bleeding disorders","Hypertension","HIV Positive","Diabetes Mellitus"];(y=Nn(h.value,"None"))!=null&&y.checked?m.forEach(d=>{_e(h.value,"TB treatment","displayNone",!0),we(h.value,"TB drugs","displayNone",!0),we(h.value,"TB drug start date","displayNone",!0),_e(h.value,"Hypertension medication","displayNone",!0),we(h.value,"Current hypertension treatment regimen","displayNone",!0),_e(h.value,"HIV status","displayNone",!0),we(h.value,"ARV start date","displayNone",!0),_e(h.value,"Diabetes","displayNone",!0),_e(h.value,"Controlled by","displayNone",!0),ye(h.value,d,"checked",!1),ye(h.value,d,"disabled",!0)}):m.forEach(d=>{ye(h.value,d,"disabled",!1)})},v=m=>{we(h.value,"TB drugs","popOverData",{filterData:!0,data:[{name:"Auramine 'O' (C.I. 41000) 50g"},{name:"Bedaquilline 100mg"},{name:"Clofazimine 100mg"},{name:"Clofazimine 50mg"},{name:"Cycloserine 125mg"},{name:"Cycloserine 250mg"},{name:"Delamanid 50mg"},{name:"Ethambutol 100mg"},{name:"Ethambutol 400mg"},{name:"Ethionamide 250mg"},{name:"Isoniazid 100mg "},{name:"Isoniazid 300mg"},{name:"Isoniazid / Rifapentine 300mg / 300mg"},{name:"Levofloxacin 100mg"},{name:"Levofloxacin 250mg"},{name:"Linezolid 600mg"},{name:"Moxifloxacin 400mg"},{name:"Pyrazinamide 400mg"},{name:"Rifabutin 150mg Capsules"},{name:"Rifampicin 150mg/isoniazid 75mg"},{name:"Rifampicin 75mg+INH 50mg dispersible"},{name:"Rifampicin 75mg+INH 50mg+Pyrazinamide 150mg dispersible"},{name:"Rifampicin150mg/Isoniazid75mg/Pyrazinamide 400mg/Ethambutol"}]}),we(h.value,"Current hypertension treatment regimen","popOverData",{filterData:!0,data:[{name:"Captopril 12.5mg"},{name:"Aspirin 75mg"},{name:"Hydrochlorothiazide 25mg"},{name:"Enalapril Meleate 5mg"},{name:"Enalapril Maleate 10mg"}]})},g=async()=>[...await xt(h.value),...await Xe(h.value),...await Ct(h.value)];return n({onSubmit:async()=>{const m=await g();if(m.length===0){ue("No past medical history data to save");return}await K.addObsToEncounterPatient(m,Q.PAST_MEDICAL_HISTORY),Me("Past medical history saved successful")}}),(m,y)=>(s(),i("div",ja,[t("div",Ka,[a(Je,{contentData:l(h),initialData:S.value,"onUpdate:inputValue":v,"onUpdate:selected":v},null,8,["contentData","initialData"])])]))}}),Xa=me(Ja,[["__scopeId","data-v-49fdce72"]]),Qa={class:"container"},Za=te({__name:"PhysicalExamination",setup(e,{expose:n}){const p=$n(),h=$e(),{physicalExam:S}=Ne(p),{patient:C}=Ne(h),v=r([]);ke(()=>{v.value=p.getInitial(),g(),D()}),pe(S,()=>{g(),D()},{deep:!0});const g=()=>{Mn(S.value,"Physical examination")=="No"?_e(S.value,"Reason why physical examination not done","displayNone",!1):(_e(S.value,"Reason why physical examination not done","displayNone",!0),_e(S.value,"Reason why physical examination not done","selectedValue",""))},D=()=>{var V,E;const d=(E=(V=C.value)==null?void 0:V.personInformation)==null?void 0:E.gender;d=="M"&&(ye(S.value,"Vulva examination","disabled",!0),ye(S.value,"Visible bleeding","disabled",!0)),d=="F"&&(ye(S.value,"Urethral meatus abnormal","disabled",!0),ye(S.value,"Scrotal swelling","disabled",!0),ye(S.value,"Tastes swelling","disabled",!0))},m=async()=>[...await xt(S.value),...await Xe(S.value),...await Ct(S.value)];return n({onSubmit:async()=>{const d=await m();if(d.length===0){ue("No physical examination data to save");return}await K.addObsToEncounterPatient(d,Q.PHYSICAL_EXAMINATION),Me("Physical examination saved successful")}}),(d,V)=>{const E=Z("ion-card-content"),L=Z("ion-card");return s(),i("div",Qa,[a(L,{class:"section"},{default:u(()=>[a(E,null,{default:u(()=>[a(Je,{contentData:l(S),initialData:v.value},null,8,["contentData","initialData"])]),_:1})]),_:1})])}}}),eo=me(Za,[["__scopeId","data-v-96d0ce9f"]]),to={key:0},no={class:"ion-padding",slot:"content"},so={class:"nav-buttons"},ao={class:"ion-padding",slot:"content"},oo={class:"nav-buttons"},io={class:"ion-padding",slot:"content"},lo={class:"nav-buttons"},ro={class:"ion-padding",slot:"content"},uo={class:"nav-buttons"},co={class:"ion-padding",slot:"content"},mo={class:"nav-buttons"},po={class:"ion-padding",slot:"content"},vo={class:"nav-buttons"},fo=te({__name:"ClinicalAssessment",setup(e,{expose:n}){const p=r("loc"),h=r(0),S=r(!1),C=new Ln,v=$e(),g=()=>{h.value++},D=r(null),m=r(null),y=r(null),d=r(null),V=r(null),E=r(null),L=[{id:"loc",label:"Level of consciousness",show:!0},{id:"pc",label:"Presenting complaints",show:!0},{id:"pbs",label:"Pregnancy and breastfeeding status",show:()=>C.isChildBearing()},{id:"pmh",label:"Past medical history",show:!0},{id:"al",label:"Allergies",show:!0},{id:"pe",label:"Physical examination",show:!0}];async function M(){const k=be.getSessionDate(),o=[Q.ASSESSMENT,Q.PRESENTING_COMPLAINTS,Q.PAST_MEDICAL_HISTORY,Q.PHYSICAL_EXAMINATION,Q.PREGNANCY_STATUS];let _=!1;for(const O of o)try{const U=await K.getObsByEncounterIdAndDate(O);if(U&&U.some(ee=>ee.obs_datetime?Ce.toStandardHisFormat(ee.obs_datetime)===Ce.toStandardHisFormat(k):!1)){_=!0;break}}catch(U){console.error("Error checking observations for encounter type ".concat(O,":"),U)}S.value=_}ke(M),pe(()=>v.patient,M);const R=X(()=>S.value),H=X(()=>L.filter(k=>typeof k.show=="function"?k.show():k.show)),q=k=>{const o=L.find(_=>_.id===k);return o?typeof o.show=="function"?o.show():o.show:!1},F=k=>H.value.findIndex(o=>o.id===k),Y=k=>{const o=F(k);o>0&&(p.value=H.value[o-1].id)},w=k=>{const _=F(k)+1;_<H.value.length?p.value=H.value[_].id:(p.value="",g())};return n({onSubmit:async()=>{const k=[{ref:D,name:"PresentingComplaints"},{ref:m,name:"LevelOfConsciousness"},{ref:y,name:"PastMedicalHistory"},{ref:V,name:"PregnancyBreastfeeding"},{ref:E,name:"PhysicalExamination"}];for(const o of k)if(o.ref.value&&typeof o.ref.value.onSubmit=="function")try{await o.ref.value.onSubmit()}catch(_){console.error("Error calling ".concat(o.name," onSubmit:"),_)}else console.log("".concat(o.name," component ref not available or no onSubmit method"))}}),(k,o)=>R.value?(s(),i("div",to,[(s(),$(Ua,{key:h.value}))])):(s(),$(l(bn),{key:1,style:{width:"100%"}},{default:u(()=>[a(l(Fe),{value:p.value,"onUpdate:value":o[12]||(o[12]=_=>p.value=_),ref:"accordionGroup",class:"previousView"},{default:u(()=>[q("loc")?(s(),$(l(de),{key:0,value:"loc",class:"_card"},{default:u(()=>[a(l(J),{slot:"header",color:"light"},{default:u(()=>[a(l(j),{class:"previousLabel"},{default:u(()=>o[13]||(o[13]=[P("Level of consciousness",-1)])),_:1,__:[13]})]),_:1}),t("div",no,[a(Ga,{"is-active":p.value==="loc",ref_key:"levelOfConsciousnessFormRef",ref:m,onDataSaved:g},null,8,["is-active"]),t("div",so,[F("loc")>0?(s(),$(l(oe),{key:0,fill:"outline",onClick:o[0]||(o[0]=re(_=>Y("loc"),["stop"]))},{default:u(()=>o[14]||(o[14]=[P(" Back ",-1)])),_:1,__:[14]})):b("",!0),a(l(oe),{fill:"outline",onClick:o[1]||(o[1]=re(_=>w("loc"),["stop"]))},{default:u(()=>[P(I(F("loc")<H.value.length-1?"Next":"Finish"),1)]),_:1})])])]),_:1})):b("",!0),q("pc")?(s(),$(l(de),{key:1,value:"pc",class:"_card"},{default:u(()=>[a(l(J),{slot:"header",color:"light"},{default:u(()=>[a(l(j),{class:"previousLabel"},{default:u(()=>o[15]||(o[15]=[P("Presenting complaints",-1)])),_:1,__:[15]})]),_:1}),t("div",ao,[a(is,{"is-active":p.value==="pc",onDataSaved:g,ref_key:"presentingComplaintsFormRef",ref:D},null,8,["is-active"]),t("div",oo,[F("pc")>0?(s(),$(l(oe),{key:0,fill:"outline",onClick:o[2]||(o[2]=re(_=>Y("pc"),["stop"]))},{default:u(()=>o[16]||(o[16]=[P(" Back ",-1)])),_:1,__:[16]})):b("",!0),a(l(oe),{fill:"outline",onClick:o[3]||(o[3]=re(_=>w("pc"),["stop"]))},{default:u(()=>[P(I(F("pc")<H.value.length-1?"Next":"Finish"),1)]),_:1})])])]),_:1})):b("",!0),q("pbs")?(s(),$(l(de),{key:2,value:"pbs",class:"_card"},{default:u(()=>[a(l(J),{slot:"header",color:"light"},{default:u(()=>[a(l(j),{class:"previousLabel"},{default:u(()=>o[17]||(o[17]=[P("Pregnancy and breastfeeding status",-1)])),_:1,__:[17]})]),_:1}),t("div",io,[a(Ya,{"is-active":p.value==="pbs",ref_key:"pregnancyBreastfeedingFormRef",ref:V,onDataSaved:g},null,8,["is-active"]),t("div",lo,[F("pbs")>0?(s(),$(l(oe),{key:0,fill:"outline",onClick:o[4]||(o[4]=re(_=>Y("pbs"),["stop"]))},{default:u(()=>o[18]||(o[18]=[P(" Back ",-1)])),_:1,__:[18]})):b("",!0),a(l(oe),{fill:"outline",onClick:o[5]||(o[5]=re(_=>w("pbs"),["stop"]))},{default:u(()=>[P(I(F("pbs")<H.value.length-1?"Next":"Finish"),1)]),_:1})])])]),_:1})):b("",!0),q("pmh")?(s(),$(l(de),{key:3,value:"pmh",class:"_card"},{default:u(()=>[a(l(J),{slot:"header",color:"light"},{default:u(()=>[a(l(j),{class:"previousLabel"},{default:u(()=>o[19]||(o[19]=[P("Past medical history",-1)])),_:1,__:[19]})]),_:1}),t("div",ro,[a(Xa,{"is-active":p.value==="pmh",ref_key:"pastMedicalHistoryFormRef",ref:y,onDataSaved:g},null,8,["is-active"]),t("div",uo,[F("pmh")>0?(s(),$(l(oe),{key:0,fill:"outline",onClick:o[6]||(o[6]=re(_=>Y("pmh"),["stop"]))},{default:u(()=>o[20]||(o[20]=[P(" Back ",-1)])),_:1,__:[20]})):b("",!0),a(l(oe),{fill:"outline",onClick:o[7]||(o[7]=re(_=>w("pmh"),["stop"]))},{default:u(()=>[P(I(F("pmh")<H.value.length-1?"Next":"Finish"),1)]),_:1})])])]),_:1})):b("",!0),q("al")?(s(),$(l(de),{key:4,value:"al",class:"_card"},{default:u(()=>[a(l(J),{slot:"header",color:"light"},{default:u(()=>[a(l(j),{class:"previousLabel"},{default:u(()=>o[21]||(o[21]=[P("Allergies",-1)])),_:1,__:[21]})]),_:1}),t("div",co,[a(qn,{"is-active":p.value==="al",ref_key:"allergiesFormRef",ref:d,onDataSaved:g},null,8,["is-active"]),t("div",mo,[F("al")>0?(s(),$(l(oe),{key:0,fill:"outline",onClick:o[8]||(o[8]=re(_=>Y("al"),["stop"]))},{default:u(()=>o[22]||(o[22]=[P(" Back ",-1)])),_:1,__:[22]})):b("",!0),a(l(oe),{fill:"outline",onClick:o[9]||(o[9]=re(_=>w("al"),["stop"]))},{default:u(()=>[P(I(F("al")<H.value.length-1?"Next":"Finish"),1)]),_:1})])])]),_:1})):b("",!0),q("pe")?(s(),$(l(de),{key:5,value:"pe",class:"_card"},{default:u(()=>[a(l(J),{slot:"header",color:"light"},{default:u(()=>[a(l(j),{class:"previousLabel"},{default:u(()=>o[23]||(o[23]=[P("Physical examination",-1)])),_:1,__:[23]})]),_:1}),t("div",po,[a(eo,{"is-active":p.value==="pe",ref_key:"physicalExaminationFormRef",ref:E,onDataSaved:g},null,8,["is-active"]),t("div",vo,[F("pe")>0?(s(),$(l(oe),{key:0,fill:"outline",onClick:o[10]||(o[10]=re(_=>Y("pe"),["stop"]))},{default:u(()=>o[24]||(o[24]=[P(" Back ",-1)])),_:1,__:[24]})):b("",!0),a(l(oe),{fill:"outline",onClick:o[11]||(o[11]=re(_=>w("pe"),["stop"]))},{default:u(()=>[P(I(F("pe")<H.value.length-1?"Next":"Finish"),1)]),_:1})])])]),_:1})):b("",!0)]),_:1},8,["value"])]),_:1}))}}),wi=me(fo,[["__scopeId","data-v-9966d812"]]);class ho extends rt{constructor(n,p){super(n,8,p)}static async getDiagnosis(n="",p=1,h=10){const S=await ie.getConceptID("Qech outpatient diagnosis list");return rt.getJson("diagnosis",{id:S,name:n,page:p,page_size:h})}}const go=te({name:"Menu",components:{IonContent:vt,IonHeader:pt,IonItem:J,IonList:Oe,IonMenu:mt,IonTitle:dt,IonToolbar:ct,List:He},computed:{...Re($e,["patient"])},data(){return{valueNumericArray:[],obsDatetime:[],graphIcon:bt(["#006401"]),listIcon:yt(["#636363"]),displayGraph:!0,orders:[],height:[],BMI:[],iconBg:{},activeWeight:[],activeHeight:[],activeBMI:[],list:[],series:[{name:"",data:[]}]}},setup(){return{checkmark:ft,pulseOutline:Ke}},async mounted(){const e=await K.getAll(this.patient.patientID,"Primary diagnosis"),n=await K.getAll(this.patient.patientID,"Secondary diagnosis"),p=await K.getAll(this.patient.patientID,"Attempted/ Differential diagnosis"),h=[...e||[],...n||[],...p||[]],S=ge.isEmpty(h)?[]:Promise.all(h.map(async C=>({name:await K.getConceptName(C.value_coded),obs_date:C.obs_datetime})));this.setListData(await S)},methods:{dismiss(){Dn.dismiss()},handleIcon(){},setActivClass(e){this.activeHeight="",this.activeBMI="",this.activeWeight="",e=="height"?this.activeHeight="_active":e=="weight"?this.activeWeight="_active":e=="BMI"&&(this.activeBMI="_active")},setListData(e){this.list=[],this.list.push({actionBtn:!1,class:"col_background",header:!0,minHeight:"--min-height: 25px;",display:["Date","Diagnosis","Notes"]}),e.forEach(n=>{this.list.push({actionBtn:!1,minHeight:"--min-height: 25px;",class:"col_background",display:[Ce.toStandardHisFormat(n.obs_date),n.name,""]})})}}}),_o={class:"modal_wrapper"};function yo(e,n,p,h,S,C){const v=Z("list");return s(),i("div",_o,[t("div",null,[a(v,{listData:e.list},null,8,["listData"])])])}const bo=me(go,[["render",yo],["__scopeId","data-v-88580898"]]),Do={class:"custom_card",style:{padding:"10px"}},So={key:0},wo={key:0,style:{color:"red","margin-top":"10px",background:"lightgoldenrodyellow"}},xo={class:"ion-padding",slot:"content"},Co=te({__name:"OPDDiagnosis",setup(e,{expose:n}){const p=Pe,h=r(!0),S=r(!1),C=r(!0),v=r(!1),g=r(!0),D=r(""),m=r(""),y=r([]),d=r([]),V=r(),E=r(null);Fn();const L=X(()=>d.value.some(o=>o.data.concept_id===6542));pe(d,()=>{A()},{deep:!0});const M=X(()=>[{name:"primaryDiagnosis",header:"Primary Diagnosis",componentType:"multiSelectInputField",options:y.value,icon:p.search,onSearchChange:Y,validation:Be.required},{componentType:"checkboxField",label:"Secondary Diagnosis",type:"single",grid:{s:"6"},name:"secondaryDiagnosisCheckbox"},{componentType:"checkboxField",label:"Differential Diagnosis",type:"single",grid:{s:"6"},name:"differentialDiagnosisCheckbox"},{componentType:"Dashes"},{name:"secondaryDiagnosis",header:"Secondary Diagnosis",componentType:"multiSelectInputField",isMultiple:!0,options:y.value,icon:p.search,condition:o=>o==null?void 0:o.secondaryDiagnosisCheckbox,onSearchChange:Y,validation:(o,_)=>R(_,"secondaryDiagnosis")},{name:"differentialDiagnosis",header:"Differential Diagnosis",componentType:"multiSelectInputField",options:y.value,icon:p.search,isMultiple:!0,condition:o=>o==null?void 0:o.differentialDiagnosisCheckbox,onSearchChange:Y,validation:(o,_)=>R(_,"differentialDiagnosis")}]),R=(o,_)=>{var le,W,De;if(!o)return null;const O=(le=o.primaryDiagnosis)==null?void 0:le.name,U=((W=o.secondaryDiagnosis)==null?void 0:W.map(ve=>ve.name))||[],ee=((De=o.differentialDiagnosis)==null?void 0:De.map(ve=>ve.name))||[];if(_==="secondaryDiagnosis"&&U.includes(O)||_==="differentialDiagnosis"&&ee.includes(O))return"".concat(O," is already the primary diagnosis");const ce=U.find(ve=>ee.includes(ve));return ce?"".concat(ce," cannot be both secondary and differential"):null},H=()=>{m.value="",D.value="",h.value=!1,g.value=!1,S.value=!0},q=async()=>{var o;((o=E.value)==null?void 0:o.validateForm())==null&&(F(),S.value=!1,v.value=!0,g.value=!0,C.value=!1)},F=()=>{var le;const o=[],_=d.value.map(W=>W.name),O=((le=E.value)==null?void 0:le.getFormValues())||{},U=O.primaryDiagnosis||[],ee=O.secondaryDiagnosis||[],ce=O.differentialDiagnosis||[];if(U.name&&!_.includes(U.name))if(!d.value.some(De=>De.data.concept_id===6542))o.push({actionBtn:!0,btn:["delete"],name:U.name,id:U.concept_id,display:[U.name,"Primary diagnosis"],data:{concept_id:6542,value_coded:U.concept_id,obs_datetime:be.getSessionDate()}});else return Bn("Only one primary diagnosis is allowed"),!1;return ee&&ee.forEach(W=>{_.includes(W.name)||o.push({actionBtn:!0,btn:["delete"],name:W.name,id:W.concept_id,display:[W.name,"Secondary diagnosis"],data:{concept_id:6543,value_coded:W.concept_id,obs_datetime:be.getSessionDate()}})}),ce&&ce.forEach(W=>{_.includes(W.name)||o.push({actionBtn:!0,btn:["delete"],name:W.name,id:W.concept_id,display:[W.name,"Differential diagnosis"],data:{concept_id:10201,value_coded:W.concept_id,obs_datetime:be.getSessionDate()}})}),o.length>0&&(d.value=[...d.value,...o]),!0},Y=async o=>{const _=o.trim().toLowerCase()||"";return y.value=await ho.getDiagnosis(_,1,15),y.value},w=o=>{const _=d.value,O=o.name,U=_.filter(ee=>ee.display[0]!==O);d.value=U},A=()=>{d.value.length>0?(v.value=!0,h.value=!1):S.value||(h.value=!0),g.value=!L.value},k=async()=>{if(d.value.length<=0){ue("Diagnosis not saved");return}const o=d.value.flatMap(O=>O.data);if(o.length<=0)return ue("Diagnosis not saved");const _=await K.addObsToEncounter(o,Q.DIAGNOSIS);await K.mergeObsToPatient(_),Me("Diagnosis saved successful"),d.value=[]};return ke(async()=>{A(),await Y("")}),n({onSubmit:k}),(o,_)=>{const O=Z("ion-row"),U=Z("ion-label"),ee=Z("ion-accordion"),ce=Z("ion-accordion-group");return s(),i(T,null,[t("div",Do,[a(wt,{status:h.value,content:"No Diagnosis added"},null,8,["status"]),v.value?(s(),i("span",So,[a(He,{listData:d.value,"onClicked:delete":w},null,8,["listData"]),L.value?(s(),i("div",wo," In order to update the diagnosis list, please remove/delete the primary diagnosis only and then re-add or change it along with the secondary and differential diagnoses. ")):b("",!0)])):b("",!0),S.value?(s(),$(O,{key:1},{default:u(()=>{var le;return[t("div",null,[a(Ve,{formData:M.value,ref_key:"formRef",ref:E},null,8,["formData"])]),t("div",null,[a(xe,{fill:"clear",icon:l(p).plus,iconSlot:"icon-only","onClicked:btn":_[0]||(_[0]=W=>q()),name:"Save",disabled:(le=E.value)==null?void 0:le.validateForm(),class:"ion-margin-top"},null,8,["icon","disabled"])])]}),_:1})):b("",!0),g.value?(s(),$(O,{key:2,style:{"margin-top":"10px"}},{default:u(()=>[a(xe,{fill:"clear",icon:l(p).plus,iconSlot:"icon-only","onClicked:btn":_[1]||(_[1]=le=>H()),name:"Add new Diagnosis"},null,8,["icon"])]),_:1})):b("",!0)]),a(O,null,{default:u(()=>[a(ce,{ref_key:"accordionGroup",ref:V,class:"previousView"},{default:u(()=>[a(ee,{value:"first","toggle-icon-slot":"start",class:"custom_card"},{default:u(()=>[a(l(J),{slot:"header",color:"light"},{default:u(()=>[a(U,{class:"previousLabel"},{default:u(()=>_[2]||(_[2]=[P("Previous Diagnosis",-1)])),_:1,__:[2]})]),_:1}),t("div",xo,[a(bo)])]),_:1})]),_:1},512)]),_:1})],64)}}}),xi=me(Co,[["__scopeId","data-v-a440f286"]]),ko={class:"allergies-section"},Io={class:"allergies-container"},Eo={key:0,class:"allergies-grid"},Ao={key:1,class:"no-allergies"},Po={class:"ion-padding",slot:"content"},Oo={key:0},No={class:"previousSecDrgs"},$o={class:"ion-padding",slot:"content"},Mo={class:"previousSecDrgs"},Lo={class:"medication-section"},Fo={class:"medication-content"},Bo={key:0,class:"add-medication-form"},To={class:"form-group"},Ro={class:"option-label"},Vo={key:0,class:"error-message"},Ho={class:"form-row"},qo={class:"form-group"},Uo={key:0,class:"error-message"},Wo={class:"form-group"},Go={key:0,class:"error-message"},zo={class:"form-group"},Yo={key:0,class:"error-message"},jo={class:"action-buttons"},Ko={class:"notes-section"},Jo={class:"notes-content"},Xo={class:"notes-input-container"},Qo={class:"ion-padding",slot:"content"},Zo={class:"notes-timeline"},ei={class:"note-date"},ti={class:"note-content"},ni={class:"ion-padding",slot:"content"},si={class:"note-date"},ai={class:"note-content"},oi=te({watch:{},name:"xxxComponent"}),ii=te({...oi,setup(e){const n=Pe,p=zn,h=r(!1),S=r(!1),C=r(!0),v=r(0),g=r(""),D=r(!1),m=r(""),y=r(!1),d=r(),V=r(!1),E=r(""),L=r(""),M=r(""),R=r(""),H=r(""),q=r("");r(!1);const F="Add new medication",Y="clear";r("Show more medications");const w=Ee(),A=St(),k=X(()=>A.selectedMedicalAllergiesList),o=X(()=>w.selectedMedicalDrugsList),_=X(()=>w.partialOPDdrugList),O=X(()=>w.nonPharmalogicalTherapyAndOtherNotes),U=["first","second","third"],ee=r(),ce=r(),le=r(),W=r(!1),De=r(!1),ve=r(!1),qe=r("Show more notes"),Ue=r("Show more allergies"),Qe=r(),Ze=r(),Ie=r(),Te=X(()=>w.editingDrugItem),Nt=r("Select a route"),We=r(!1),$t=r("Select frequency"),Ge=r(!1),Mt=r("Select drug"),ze=r(!1),ne=r(),se=r(),fe=r(),Le=r([]),Lt=r([{concept_id:11797,name:"Buccal",concept_name_id:null,id:1769},{concept_id:11794,name:"Intradermal",concept_name_id:null,id:6284},{concept_id:11795,name:"Intramuscular (IM)",concept_name_id:null,id:6285},{concept_id:11799,name:"Intraosseous",concept_name_id:null,id:6286},{concept_id:11793,name:"Intravenous (IV)",concept_name_id:null,id:6295},{concept_id:3327,name:"Oral",concept_name_id:null,id:8686},{concept_id:11800,name:"Other method of prescription",concept_name_id:null,id:8920},{concept_id:11792,name:"Rectally",concept_name_id:null,id:10785},{concept_id:11798,name:"Subcutaneous",concept_name_id:null,id:12342},{concept_id:11796,name:"Sublingual",concept_name_id:null,id:12344},{concept_id:11792,name:"Rectally",concept_name_id:null,id:14078},{concept_id:11793,name:"Intravenous (IV)",concept_name_id:null,id:14079},{concept_id:11794,name:"Intradermal",concept_name_id:null,id:14080},{concept_id:11795,name:"Intramuscular (IM)",concept_name_id:null,id:14081},{concept_id:11796,name:"Sublingual",concept_name_id:null,id:14082},{concept_id:11797,name:"Buccal",concept_name_id:null,id:14083},{concept_id:11798,name:"Subcutaneous",concept_name_id:null,id:14084},{concept_id:11799,name:"Intraosseous",concept_name_id:null,id:14085},{concept_id:11800,name:"Other method of prescription",concept_name_id:null,id:14086}]),Ft=X(()=>Le.value.length?Le.value:Lt.value);function Bt(f){ne.value=f}async function Tt(){return await Yn()}async function Rt(f=5,c=1e3){let N=0;for(;N<f&&(Le.value=await Tt(),!(Le.value.length>0));)N++,await new Promise(z=>setTimeout(z,c));Le.value.length===0&&console.warn("Failed to fetch route list after maximum retries.")}ke(async()=>{const f=new Un,{previousDrugPrescriptions:c,previousClinicalNotes:N,previousDrugAllergies:z}=await f.getPatientEncounters();ee.value=c,ce.value=Object.entries(N)[0];const[,...x]=Object.entries(N);le.value=x,Qe.value=Object.entries(z)[0];const[,...B]=Object.entries(z);Ze.value=B,await Rt()}),pe(()=>E.value,async f=>{et()}),pe(()=>L.value,async f=>{Wt()}),pe(()=>M.value,async f=>{tt()});function Vt(){if(ge.isEmpty(ne.value)==!0)return We.value=!0,!1;if(ge.isEmpty(ne.value)==!1)return We.value=!1,!0}function Ht(){if(ge.isEmpty(se.value)==!0)return Ge.value=!0,!1;if(ge.isEmpty(se.value)==!1)return Ge.value=!1,!0}function qt(){if(ge.isEmpty(fe.value)==!0)return ze.value=!0,!1;if(ge.isEmpty(fe.value)==!1)return ze.value=!1,!0}function Ut(){C.value=!C.value,h.value=!0,y.value=!1,V.value=!1}async function et(){const f=await jt();return console.log({drugNameExists:f}),f?D.value=!1:(g.value="please select a valid drug name",D.value=!0),D.value}async function Wt(){return at(L.value)?y.value=!1:(m.value="please enter a number",y.value=!0),y.value}async function tt(){return at(M.value)?V.value=!1:(d.value="please enter a number",V.value=!0),V.value}async function nt(){const f=await et(),c=await tt(),N=Ht(),z=qt(),x=Vt();return!f&&!c&&N==!0&&z==!0&&x==!0}function Gt(f){se.value=f}async function st(){const f=()=>Ie.value.dose_strength!=null&&Ie.value.dose_strength?Math.trunc(Ie.value.dose_strength):1;if(Te.value!==null){if(!await nt()){ue("Please enter correct data values",4e3);return}const N=be.getSessionDate(),z=ot(N,parseInt(M.value));let x=!1;Ye(Ie.value)==!0&&(x=!0);const B={drugName:E.value,dose:f(),frequency:se.value.label,frequency_code:se.value.code,duration:M.value,prescription:z,drug_id:q.value,units:H.value,route_concept_id:ne.value.concept_id,route_name:ne.value.name,highlightbackground:x},ae=Ee();console.log(ae.setSelectedMedicalDrugsList([B])),ae.editingDrugItem=null,C.value=!0}else{if(!await nt()){ue("Please enter correct data values",4e3);return}nn();const N=be.getSessionDate(),z=ot(N,parseInt(M.value));let x=!1;Ye(Ie.value)==!0&&(x=!0);const B={drugName:E.value,dose:f(),frequency:se.value.label,frequency_code:se.value.code,duration:M.value,prescription:z,drug_id:q.value,units:H.value,route_concept_id:ne.value.concept_id,route_name:ne.value.name,highlightbackground:x};Ee().setSelectedMedicalDrugsList([B])}q.value="",E.value="",L.value="",se.value=null,M.value="",R.value="",v.value++,fe.value=null,ne.value=null}async function zt(f){const c=f,x=await ut.getOfflineOPDDrugs({name:c,page:1,page_size:10});x.map(B=>({label:B.name,value:B.name,other:B})),w.setPartialOPDdrugList(x)}async function Yt(f){let c;f.target===void 0?c=f:c=f.target.value;const x=await ut.getOPDDrugs({name:encodeURIComponent(c),page:1,page_size:10});return x.map(B=>({label:B.name,value:B.name,other:B})),x}function Ye(f){const c=[];return k.value.forEach(z=>{z.selected&&c.push(z.concept_id)}),Kt([f],c)==!0?(ue("Client is allergic to the selected medication",4e6),!0):!1}async function jt(){return(await Yt(E.value)).length>0?E.value.length!=0:!1}function Kt(f,c){try{return f.some(N=>c.includes(N.concept_id))}catch(N){return!1}}function Jt(f){f&&(E.value=f.name,q.value=f.drug_id,H.value=f.units,Ie.value=f,Ye(f))}function Xt(f){const c=o.value[f],N=Ee();N.removeDrugById(c.drug_id),N.editingDrugItem=c,q.value="",E.value="",L.value="",se.value=null,M.value="",R.value="",fe.value=null,ne.value=null,q.value=c.drug_id,E.value=c.drugName,L.value=c.dose,se.value={label:c.frequency,code:c.frequency_code},M.value=c.duration,R.value=c.prescription;const z=_.value.find(x=>x.name===c.drugName);z&&(fe.value=z),ne.value={concept_id:c.route_concept_id,name:c.route_name},C.value=!1,v.value++}function Qt(){if(Te.value!==null){q.value="",E.value="",L.value="",se.value=null,M.value="",R.value="",fe.value=null,ne.value=null;const f=Ee();f.setSelectedMedicalDrugsList([Te.value]),f.editingDrugItem=null}C.value=!0,v.value++}function Zt(f){o.value.splice(f,1),v.value++,ue("you have removed a drug from list",6e3)}function en(f){let c=f.target.value;tn(c)}function tn(f){Ee().setNonPharmalogicalTherapyAndOtherNotes(f)}function at(f){return/^[0-9]+$/.test(f)}function ot(f,c){const N=new Date(f);N.setDate(N.getDate()+c);const z=N.getFullYear(),x=String(N.getMonth()+1).padStart(2,"0"),B=String(N.getDate()).padStart(2,"0");return"".concat(z,"-").concat(x,"-").concat(B)}function nn(){h.value=!1,S.value=!0,C.value=!0}function sn(f){U.filter(N=>N!==f.detail.value);const c=f.detail.value;c!==void 0?c=="third"&&(qe.value="Show less notes",De.value=!W.value):(qe.value="Show more notes",De.value=!W.value)}function an(f){U.filter(N=>N!==f.detail.value);const c=f.detail.value;c!==void 0?c=="fith"&&(Ue.value="Show less allegies",ve.value=!W.value):(Ue.value="Show more allegies",ve.value=!W.value)}function it(f){return f[1]}function on(f){(f.key==="Enter"||f.key==="ArrowDown")&&(f.preventDefault(),st())}const he=X(()=>[{showAddItemButton:!0,addItemButton:!0,name:Te.value!==null?"Update":"ADD",btnFill:"clear",fn:st},{showAddItemButton:!0,addItemButton:!0,name:"CANCEL",btnFill:"clear",fn:Qt}]);return(f,c)=>{const N=Z("ion-chip"),z=Z("ion-text");return s(),$(l(Oe),null,{default:u(()=>[t("div",ko,[a(l(j),{class:"section-title"},{default:u(()=>[a(l(Ae),{icon:l(_t),class:"alert-icon"},null,8,["icon"]),a(l(j),null,{default:u(()=>c[9]||(c[9]=[P("Allergies (Medication, Healthcare items, Environment and Food)",-1)])),_:1,__:[9]})]),_:1}),t("div",Io,[k.value.some(x=>x.selected)?(s(),i("div",Eo,[(s(!0),i(T,null,G(k.value,(x,B)=>Sn((s(),i("div",{key:B,class:"allergy-item"},[a(N,{class:"allergy-chip",color:"danger"},{default:u(()=>[a(l(j),null,{default:u(()=>[P(I(x.name),1)]),_:2},1024),a(l(Ae),{icon:l(wn)},null,8,["icon"])]),_:2},1024)])),[[xn,x.selected]])),128))])):(s(),i("div",Ao,[a(z,{style:{"font-size":"16px","font-weight":"600",color:"#9c8011"}},{default:u(()=>c[10]||(c[10]=[P("No allergies recorded",-1)])),_:1,__:[10]})])),a(l(Fe),{ref:"accordionGroup",class:"previousView"},{default:u(()=>[a(l(de),{value:"fourth","toggle-icon-slot":"start",style:{"border-radius":"10px","background-color":"#fff"}},{default:u(()=>[a(l(J),{slot:"header",color:"light"},{default:u(()=>[a(l(j),{class:"previousLabel"},{default:u(()=>c[11]||(c[11]=[P("Documented allergies timeline",-1)])),_:1,__:[11]})]),_:1}),t("div",Po,[(s(!0),i(T,null,G(Qe.value,(x,B)=>(s(),i("div",{class:"ionLbltp",key:B},[B==1?(s(),i("div",Oo,[t("div",null,[a(l(j),{class:"previousLabelDate"},{default:u(()=>[P(I(x[0].date),1)]),_:2},1024)]),(s(!0),i(T,null,G(x,(ae,Se)=>(s(),i("div",{key:Se},[t("div",No,[a(l(Oe),null,{default:u(()=>[a(l(j),{class:"notes_p"},{default:u(()=>[P(I(ae.value),1)]),_:2},1024)]),_:2},1024)])]))),128))])):b("",!0)]))),128)),a(l(Fe),{onIonChange:an},{default:u(()=>[a(l(de),{value:"fith","toggle-icon-slot":"start",style:{"border-radius":"10px","background-color":"#fff"}},{default:u(()=>[a(l(J),{slot:"header",color:"light"},{default:u(()=>[a(l(j),{class:"",color:"primary"},{default:u(()=>[P(I(Ue.value),1)]),_:1})]),_:1}),t("div",$o,[(s(!0),i(T,null,G(Ze.value,(x,B)=>(s(),i("div",{class:"ionLbltp",key:B},[t("div",null,[a(l(j),{class:"previousLabelDate"},{default:u(()=>[P(I(x[0]),1)]),_:2},1024)]),(s(!0),i(T,null,G(it(x),(ae,Se)=>(s(),i("div",{key:Se},[t("div",Mo,[a(l(Oe),null,{default:u(()=>[a(l(j),{class:"notes_p"},{default:u(()=>[P(I(ae.value),1)]),_:2},1024)]),_:2},1024)])]))),128))]))),128))])]),_:1})]),_:1})])]),_:1})]),_:1},512)])]),t("div",Lo,[a(l(J),{lines:"none",class:"section-header"},{default:u(()=>[a(l(Ae),{icon:l(gt),class:"section-icon"},null,8,["icon"]),a(l(j),{class:"section-title",style:{"margin-top":"12px"}},{default:u(()=>c[12]||(c[12]=[P("Medication",-1)])),_:1,__:[12]})]),_:1}),t("div",Fo,[(s(),$(Wn,{_selectedMedicalDrugsList:o.value,onEditItem:Xt,onRemoveItem:Zt,key:v.value,class:"medication-list"},null,8,["_selectedMedicalDrugsList"])),C.value?b("",!0):(s(),i("div",Bo,[t("div",To,[c[13]||(c[13]=t("label",{class:"input-label"},"Medication",-1)),a(l(je),{modelValue:fe.value,"onUpdate:modelValue":[c[0]||(c[0]=x=>fe.value=x),c[1]||(c[1]=x=>Jt(x))],options:_.value,searchable:!0,"close-on-select":!0,"show-labels":!1,placeholder:"Select medication",label:"name","track-by":"drug_id",onSearchChange:c[2]||(c[2]=x=>zt(x))},{option:u(x=>[t("div",Ro,I(x.option.name),1)]),_:1},8,["modelValue","options"]),ze.value?(s(),i("div",Vo,I(Mt.value),1)):b("",!0)]),t("div",Ho,[t("div",qo,[c[14]||(c[14]=t("label",{class:"input-label"},"Route",-1)),a(l(je),{modelValue:ne.value,"onUpdate:modelValue":[c[3]||(c[3]=x=>ne.value=x),c[4]||(c[4]=x=>Bt(x))],options:Ft.value,searchable:!0,"close-on-select":!0,"show-labels":!1,placeholder:"Select route",label:"name","track-by":"concept_id"},null,8,["modelValue","options"]),We.value?(s(),i("div",Uo,I(Nt.value),1)):b("",!0)]),t("div",Wo,[c[15]||(c[15]=t("label",{class:"input-label"},"Frequency",-1)),a(l(je),{modelValue:se.value,"onUpdate:modelValue":[c[5]||(c[5]=x=>se.value=x),c[6]||(c[6]=x=>Gt(x))],options:l(p),searchable:!0,"close-on-select":!0,"show-labels":!1,placeholder:"Select frequency",label:"label","track-by":"code"},null,8,["modelValue","options"]),Ge.value?(s(),i("div",Go,I($t.value),1)):b("",!0)]),t("div",zo,[c[16]||(c[16]=t("label",{class:"input-label"},"Duration (days)",-1)),a(l(Cn),{modelValue:M.value,"onUpdate:modelValue":c[7]||(c[7]=x=>M.value=x),type:"number",inputmode:"numeric",pattern:"[0-9]*",fill:"outline",placeholder:"Enter duration",onKeydown:on},null,8,["modelValue"]),V.value?(s(),i("div",Yo,I(d.value),1)):b("",!0)])]),t("div",jo,[he.value[0].addItemButton?(s(),$(xe,{key:0,name:he.value[0].name,fill:he.value[0].btnFill,icon:l(kn),"onClicked:btn":he.value[0].fn,class:"save-button"},null,8,["name","fill","icon","onClicked:btn"])):b("",!0),he.value[1].addItemButton?(s(),$(xe,{key:1,name:he.value[1].name,fill:he.value[1].btnFill,icon:l(In),"onClicked:btn":he.value[1].fn,class:"cancel-button"},null,8,["name","fill","icon","onClicked:btn"])):b("",!0)])])),C.value?(s(),$(xe,{key:1,name:F,fill:Y,icon:l(ht),"onClicked:btn":Ut,class:"add-new-button"},null,8,["icon"])):b("",!0)])]),t("div",Ko,[a(l(J),{lines:"none",class:"section-header"},{default:u(()=>[a(l(Ae),{icon:l(En),class:"section-icon"},null,8,["icon"]),a(l(j),{class:"section-title"},{default:u(()=>c[17]||(c[17]=[P("Non-pharmacological therapy and other notes",-1)])),_:1,__:[17]})]),_:1}),t("div",Jo,[a(Gn,{class:"intervention-component"}),t("div",Xo,[a(l(J),{class:"notes-input-item"},{default:u(()=>[a(l(Ae),{slot:"start",icon:l(n).editPen,class:"edit-icon","aria-hidden":"true"},null,8,["icon"]),a(l(An),{modelValue:O.value,"onUpdate:modelValue":c[8]||(c[8]=x=>O.value=x),onIonInput:en,placeholder:"Enter notes here...","auto-grow":!0,class:"notes-textarea",fill:"outline",style:{"--padding-start":"16px"}},null,8,["modelValue"])]),_:1})]),a(l(Fe),{ref:"accordionGroup",class:"previous-notes"},{default:u(()=>[a(l(de),{value:"fourth","toggle-icon-slot":"start"},{default:u(()=>[a(l(J),{slot:"header",color:"light",class:"previous-notes-header"},{default:u(()=>[a(l(j),null,{default:u(()=>c[18]||(c[18]=[P("Previous visit notes",-1)])),_:1,__:[18]})]),_:1}),t("div",Qo,[t("div",Zo,[f.index===1?(s(!0),i(T,{key:0},G(ce.value,(x,B)=>(s(),i("div",{key:B,class:"note-entry"},[(s(!0),i(T,null,G(x,(ae,Se)=>(s(),i("div",{key:Se},[t("div",ei,I(ae.date),1),t("div",ti,I(ae.notes),1)]))),128))]))),128)):b("",!0),a(l(Fe),{onIonChange:sn},{default:u(()=>[a(l(de),{value:"third","toggle-icon-slot":"start"},{default:u(()=>[a(l(J),{slot:"header",color:"light",class:"show-more-header"},{default:u(()=>[a(l(j),{color:"primary"},{default:u(()=>[P(I(qe.value),1)]),_:1})]),_:1}),t("div",ni,[(s(!0),i(T,null,G(le.value,(x,B)=>(s(),i("div",{key:B,class:"note-entry"},[(s(!0),i(T,null,G(it(x),(ae,Se)=>(s(),i("div",{key:Se},[t("div",si,I(ae.date),1),t("div",ai,I(ae.notes),1)]))),128))]))),128))])]),_:1})]),_:1})])])]),_:1})]),_:1},512)])])]),_:1})}}}),Ci=me(ii,[["__scopeId","data-v-fc08a1da"]]),li={class:"dash_box"},ri={key:1},ui=te({name:"xxxComponent"}),ci=te({...ui,setup(e){const n=r("No outcome created yet"),p=r(!1),h=r("please select a type");r("Add new outcome"),r(!0);const S=r(!0),C=r(""),v=r(!0),g=r(!1),D=Tn(),m=X(()=>D.outcomes),y=r(!1),d=r(!1),V=r(!1),E=r(!1),L=r(!1);r(null),r(null);const M=r([{name:"Admitted for short stay",selected:!1},{name:"Referred out",selected:!1},{name:"Discharged Home",selected:!1}]),R=[{multi_Selection:!1,show_list_label:!0,unqueId:"qwerty2",name_of_list:"Add new outcome",placeHolder:"Choose one",items:M.value,listUpdatedFN:H,listFilteredFN:()=>{},use_internal_filter:!0,disabled:r(!1)}];function H(o){M.value=o,M.value.forEach(_=>{_.selected==!0&&(C.value=_.name)})}ke(async()=>{F()}),pe(()=>C.value,async o=>{y.value==!0?y.value=!1:A()}),pe(()=>m.value.length,async o=>{F()});function q(){M.value.forEach(o=>{o.selected=!1}),C.value=""}function F(){m.value.length>0?v.value=!1:m.value.length==0&&g.value==!1&&(v.value=!0)}function Y(o){m.value.splice(o,1)}const w=o=>{};async function A(o=!0){const _=C.value;console.log(_),C.value=_;const O=C.value;O==M.value[0].name?V.value=!0:V.value=!1,O==M.value[1].name?(E.value=!0,console.log("show_discharged_options is set to true")):E.value=!1,O==M.value[2].name?(L.value=!0,console.log("show_discharged_options is set to true")):L.value=!1}function k(){d.value=!1,V.value=!1,E.value=!1,L.value=!1,q()}return(o,_)=>{const O=Z("ion-row");return s(),$(l(Oe),null,{default:u(()=>[a(O,null,{default:u(()=>[a(l(lt),null,{default:u(()=>[(s(),$(jn,{key:0,"onUpdate:removeItem":Y,"onUpdate:editItem":w,displayData:m.value},null,8,["displayData"]))]),_:1})]),_:1}),v.value?(s(),$(O,{key:0},{default:u(()=>[t("span",li,I(n.value),1)]),_:1})):b("",!0),S.value?(s(),i("div",ri,[a(O,null,{default:u(()=>[a(l(lt),null,{default:u(()=>[a(Rn,{multiSelection:R[0].multi_Selection,show_label:R[0].show_list_label,uniqueId:R[0].unqueId,name_of_list:R[0].name_of_list,choose_place_holder:R[0].placeHolder,"items_-list":R[0].items,use_internal_filter:R[0].use_internal_filter,disabled:R[0].disabled.value,onItemListUpDated:R[0].listUpdatedFN,onItemListFiltered:R[0].listFilteredFN},null,8,["multiSelection","show_label","uniqueId","name_of_list","choose_place_holder","items_-list","use_internal_filter","disabled","onItemListUpDated","onItemListFiltered"]),t("div",null,[p.value?(s(),$(l(j),{key:0,class:"error-label"},{default:u(()=>[P(I(h.value),1)]),_:1})):b("",!0)])]),_:1})]),_:1})])):b("",!0),V.value?(s(),$(Kn,{key:2,onDataSaved:k,selected_ward_prop:"",admitted_other_props:""})):b("",!0),E.value?(s(),$(Jn,{key:3,onDataSaved:k,selected_referral_data:"",selected_other_referral_data:""})):b("",!0),L.value?(s(),$(Xn,{key:4,onDataSaved:k,selected_discharged_prop:"",selected_discharged_data:""})):b("",!0)]),_:1})}}}),ki=me(ci,[["__scopeId","data-v-b6576c18"]]);export{wi as C,xi as O,ho as P,Ya as _,Ci as a,ki as b,is as c,eo as d,Ga as e};
