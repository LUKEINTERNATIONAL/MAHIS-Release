import{d as j,ar as ee,U as De,T as ke,as as Se,ac as le,G as z,S as we,a9 as Ce,a1 as Ne,a2 as Te,E as x,e as l,f as n,k as s,l as a,b2 as Ut,r as d,c as me,a as Qe,m as y,y as L,z as i,u as o,A as P,F as q,W as oe,I as Fe,e1 as Ia,be as qt,e2 as Oa,cQ as Ea,e3 as La,e4 as Pa,e5 as Ma,e6 as xa,c$ as Aa,e7 as Ba,e8 as $a,az as bt,aD as Na,bU as Ha,aB as Wt,aS as Ra,B as I,L as G,w as $e,ad as Va,ae as Fa,a3 as nt,bv as Ta,bu as Ua,d3 as qa,M as Ke,J as _e,D as K,bx as ce,aa as he,X as Dt,a0 as Gt,V as Wa,af as Ga,dr as za,dy as Ya,b8 as Ka,aU as ja,R as Ja,i as Xa,e9 as Qa,v as Za,bo as Je,bq as zt,a8 as Yt,bS as es,bI as ts,ab as J,aK as as,bX as Mt,bw as ss,ea as ns,dB as xt}from"./vendor-Ce6VXKpK.js";import{aE as Ue,H as pe,a8 as Oe,aB as kt,aC as St,aV as Kt,u as xe,_ as Z,i as fe,ar as at,as as is,D as ve,x as F,S as be,E as At,t as je,z as it,ay as X,aK as ze,bc as Ye,bv as os,aM as jt,aY as ls,a3 as st,bw as mt,bx as rs,by as ds,bz as us,bA as cs,bB as ms,bC as ps,aW as hs,b0 as fs,ba as Pe,b1 as Me,aX as Bt,B as ge,aZ as $t,P as Jt,aP as Nt,aF as Xt,F as vs,aT as pt,n as Xe,y as ht,aw as gs,az as Ie,k as _s,l as ft,ao as ys,aA as bs,aD as yt,p as Ds,m as ks,a1 as Ve,bf as Ht,ah as vt,al as gt,aJ as Ss,ak as ws}from"./index-jDwfIs7V.js";import{B as ie}from"./BasicForm-BohKG4F5.js";import{l as ye}from"./lodash-Dt8AsbQm.js";import{P as Cs}from"./patient_complaints_service-DeMAWttn.js";import{D as ot}from"./DashBox-Cyn7QVMO.js";import{u as Is}from"./useExposeFromStandardForm-C8nEdZ3G.js";import{A as Os,_ as Es,P as Ls,D as Ps,n as Ms}from"./NextAppointment-CtaQpPhT.js";import{B as xs}from"./BasicCard-B7Zboqwt.js";import{S as As,a as Bs,P as $s,u as Rt,b as Ns}from"./lab_order-CuyAnkcc.js";import Hs from"./LabTestsHistory-D2qdOfEC.js";import{v as Vt}from"./group_validation-B0T6QaeL.js";import{D as Rs,b as Vs}from"./drug_prescription_service-BU5f67CH.js";import{D as Ft}from"./drug_service-BXuDvxkH.js";import{_ as _t,D as Fs,A as Ts,R as Us,a as qs}from"./Outcome-DxJbPnhR.js";const Ws=j({name:"Menu",components:{IonContent:Ce,IonHeader:we,IonItem:z,IonList:le,IonMenu:Se,IonTitle:ke,IonToolbar:De,List:Ue},computed:{...ee(xe,["patient"]),...ee(Kt,["presentingComplaints"])},data(){return{valueNumericArray:[],obsDatetime:[],graphIcon:St(["#006401"]),listIcon:kt(["#636363"]),displayGraph:!0,orders:[],height:[],BMI:[],iconBg:{},activeWeight:[],activeHeight:[],activeBMI:[],list:[],series:[{name:"",data:[]}]}},setup(){return{checkmark:Te,pulseOutline:Ne}},watch:{$router:{async handler(){await this.updateList()},immediate:!0,deep:!0},patient:{async handler(){await this.updateList()},deep:!0}},async mounted(){await this.updateList()},methods:{async updateList(){const e=await Oe.getAll(this.patient.patientID,"Presenting complaint"),t=ye.isEmpty(e)?[]:Promise.all(e.map(async u=>u.value_coded?{name:await Oe.getConceptName(u.value_coded),obs_date:u.obs_datetime,duration:u.children[0].value_text}:[]));this.setListData(await t)},setListData(e){this.list=[],this.list.push({actionBtn:!1,class:"col_background",header:!0,minHeight:"--min-height: 20px;",containSize:4,display:["Date","Presenting Complains","Duration"]}),e.forEach(t=>{this.list.push({actionBtn:!1,minHeight:"--min-height:20px;",class:"col_background",containSize:4,display:[pe.toStandardHisFormat(t.obs_date),t.name,t.duration]})})}}}),Gs={class:"modal_wrapper"};function zs(e,t,u,D,m,b){const r=x("list");return n(),l("div",Gs,[s("div",null,[a(r,{listData:e.list},null,8,["listData"])])])}const Ys=Z(Ws,[["render",zs],["__scopeId","data-v-30434e22"]]),Ks={key:0},js={style:{"align-content":"center"}},Js={class:"ion-padding",slot:"content"},Xs=j({__name:"PresentingComplaints",setup(e,{expose:t}){const u=Kt(),{presentingComplaints:D}=Ut(u),m=d(fe),b=d(!0),r=d(!1),f=d(!0),v=d(!1),h=d([]),c=d([]),p=d(),S=me(()=>[{componentType:"multiSelectInputField",header:"Presenting Complaints",name:"PresentingComplaints",trackBy:"concept_id",icon:fe.search,hideSelected:!0,validation:$=>C($==null?void 0:$.name,h.value)?"Presenting complaint already added":at.required($),options:c.value,grid:{s:"6"}},{componentType:"inputField",header:"Duration",name:"duration",icon:fe.time,validation:$=>at.isNotEmptyandNumber($),grid:{s:"6"},unitOptions:[{label:"Hours",value:"Hours"},{label:"Days",value:"Days"},{label:"Months",value:"Months"},{label:"Years",value:"Years"}],unitValidation:$=>!$||$===""?"Please select a unit.":null},{componentType:"inputField",header:"Specify the presenting complaint(s)",name:"Other (specify)",icon:fe.editPen,validation:$=>C($,h.value)?"Presenting complaint already added":at.required($),condition:$=>{var H;return((H=$==null?void 0:$.PresentingComplaints)==null?void 0:H.name)==="Other"}},{componentType:"Alert",condition:$=>{var H;return at.required((H=$==null?void 0:$.PresentingComplaints)==null?void 0:H.name)!=null},backgroundColor:"lightyellow",textColor:"black",value:"Please search thoroughly for the complaint. If it is not listed, search and select the 'Other' option to specify the complaint.",name:"noMatchAlert"}]),{formRef:O}=Is(),B=async()=>{c.value=await Cs.getComplaintsList("Presenting complaint"),F(D.value,"PresentingComplaints","multiSelectData",c.value)},w=()=>{b.value=!1,f.value=!1,r.value=!0},E=async()=>{var R,V;const $=(R=O.value)==null?void 0:R.getFormValues();((V=O.value)==null?void 0:V.validateForm())==null&&(g($),r.value=!1,f.value=!0)},g=$=>{var Q;const H=$.duration+" "+$.duration_unit,R=$.PresentingComplaints,V=R.name==="Other"?$["Other (specify)"]:R.name;h.value.push({actionBtn:!0,btn:["delete"],name:V,concept_id:R.concept_id,duration:R.duration,durationUnits:R.duration_unit,display:[V,H],data:[{concept_id:8578,value_coded:R.concept_id,obs_datetime:be.getSessionDate(),child:[{concept_id:R.concept_id,value_text:H,obs_datetime:be.getSessionDate()}]}]}),(Q=O.value)==null||Q.resetForm(),v.value=!0},C=($,H)=>H.some(R=>R.name===$),te=$=>{h.value=h.value.filter(H=>H.display[0]!==$.name)},ae=async()=>{const $=await Oe.getLatestObs(At.PRESENTING_COMPLAINTS),H=h.value.flatMap(V=>V.data);if(H.length<=0&&$.length<=0)return je("Presenting complaints is required");if(H.length<=0)return;const R=await Oe.obsValuesWithEncounterType(H,At.PRESENTING_COMPLAINTS);await Oe.buildObs(R),it("Presenting complaints saved successful"),h.value=[]};return Qe(async()=>{await B()}),t({onSubmit:ae}),($,H)=>{const R=x("ion-row"),V=x("ion-label"),Q=x("ion-accordion"),se=x("ion-accordion-group");return n(),l(q,null,[a(ot,{status:b.value,content:"No presenting complaints added"},null,8,["status"]),v.value?(n(),l("span",Ks,[a(Ue,{listData:h.value,"onClicked:delete":te},null,8,["listData"])])):y("",!0),r.value?(n(),L(R,{key:1},{default:i(()=>[a(is,{formData:S.value,ref_key:"formRef",ref:O},null,8,["formData"]),s("div",js,[a(ve,{fill:"clear",icon:m.value.plus,iconSlot:"icon-only","onClicked:btn":H[0]||(H[0]=He=>E()),name:"Save"},null,8,["icon"])])]),_:1})):y("",!0),f.value?(n(),L(R,{key:2,style:{"margin-top":"10px"}},{default:i(()=>[a(ve,{fill:"clear",icon:m.value.plus,iconSlot:"icon-only","onClicked:btn":H[1]||(H[1]=He=>w()),name:"Add new presenting complaints"},null,8,["icon"])]),_:1})):y("",!0),a(R,null,{default:i(()=>[a(se,{ref_key:"accordionGroup",ref:p,class:"previousView"},{default:i(()=>[a(Q,{value:"first","toggle-icon-slot":"start",style:{"border-radius":"10px","background-color":"#fff"}},{default:i(()=>[a(o(z),{slot:"header",color:"light"},{default:i(()=>[a(V,{class:"previousLabel"},{default:i(()=>H[2]||(H[2]=[P("Previous presenting complaints")])),_:1,__:[2]})]),_:1}),s("div",Js,[a(Ys)])]),_:1})]),_:1},512)]),_:1})],64)}}}),Qs=Z(Xs,[["__scopeId","data-v-54a39f14"]]),Zs=j({name:"VisitHistory",components:{IonIcon:Fe,IonButton:oe},setup(){const e=jt();return{selectedAllergiesList2:me(()=>e.selectedMedicalAllergiesList),calendarOutline:Ra,alertCircleOutline:Wt,documentTextOutline:Ha,femaleOutline:Na,medicalOutline:bt,warningOutline:$a,bodyOutline:Ba,eyeOutline:Aa,nutritionOutline:xa,fitnessOutline:Ma,pulseOutline:Ne,earOutline:Pa,happyOutline:La,manOutline:Ea,moveOutline:Oa,addOutline:qt,scanOutline:Ia}},data(){return{visits:[],visitDate:null,presentingComplaint:[],pastMedicalHistory:[],levelOfConsciousness:{eyeResponse:null,verbalResponse:null,motorResponse:null},pregnancy:{patientPregnant:null,breastFeeding:null},eyesAbnormal:[],mouthAbnormal:[],earsAbnormal:[],faceAbnormal:[],neckAbnormal:[],chestAbnormal:[],chestMovementAbnormal:[],heartSoundsAbnormal:[],breathSoundsAbnormal:[],addedBreathSoundsAbnormal:[],abdominalInspectionAbnormal:[],eyesExamined:!1,mouthExamined:!1,earsExamined:!1,faceExamined:!1,neckExamined:!1,chestExamined:!1,chestMovementExamined:!1,heartSoundsExamined:!1,breathSoundsExamined:!1,addedBreathSoundsExamined:!1,abdominalInspectionExamined:!1}},computed:{...ee(xe,["patient"]),hasLevelOfConsciousness(){return this.levelOfConsciousness.eyeResponse||this.levelOfConsciousness.verbalResponse||this.levelOfConsciousness.motorResponse},hasPresentingComplaints(){var e;return((e=this.uniquePresentingComplaints)==null?void 0:e.length)>0},hasPregnancyData(){return this.pregnancy.patientPregnant||this.pregnancy.breastFeeding},hasPastMedicalHistory(){var e;return((e=this.uniquePastMedicalHistory)==null?void 0:e.length)>0},hasAllergies(){var e,t;return((t=(e=this.selectedAllergiesList2)==null?void 0:e.filter(u=>u.selected))==null?void 0:t.length)>0},hasPhysicalExam(){var e,t,u,D,m,b,r,f,v,h,c;return((e=this.eyesAbnormal)==null?void 0:e.length)>0||this.eyesExamined||((t=this.mouthAbnormal)==null?void 0:t.length)>0||this.mouthExamined||((u=this.earsAbnormal)==null?void 0:u.length)>0||this.earsExamined||((D=this.faceAbnormal)==null?void 0:D.length)>0||this.faceExamined||((m=this.neckAbnormal)==null?void 0:m.length)>0||this.neckExamined||((b=this.chestAbnormal)==null?void 0:b.length)>0||this.chestExamined||((r=this.chestMovementAbnormal)==null?void 0:r.length)>0||this.chestMovementExamined||((f=this.heartSoundsAbnormal)==null?void 0:f.length)>0||this.heartSoundsExamined||((v=this.breathSoundsAbnormal)==null?void 0:v.length)>0||this.breathSoundsExamined||((h=this.addedBreathSoundsAbnormal)==null?void 0:h.length)>0||this.addedBreathSoundsExamined||((c=this.abdominalInspectionAbnormal)==null?void 0:c.length)>0||this.abdominalInspectionExamined},uniquePastMedicalHistory(){return[...new Map(this.pastMedicalHistory.map(e=>[e,e])).values()]},uniquePresentingComplaints(){return[...new Map(this.presentingComplaint.map(e=>[e,e])).values()]}},methods:{formatVisitDate(e){return e?pe.toStandardHisDisplayFormat(e):"No visit date"},async updateData(){var t,u;if(!((t=this.patient)!=null&&t.patientID))return;const e=await os(this.patient.patientID);e&&(this.visits=((u=e.visits)==null?void 0:u.visitsDates)||[],this.visits.length>0&&await this.loadSavedEncounters(this.visits[0]))},async loadSavedEncounters(e){this.visitDate=e;const t=ze("presentingComplaints"),u=ze("pastMedicalHistory"),D=ze("levelOfConsciousness"),m=ze("pregnancy"),b=ze("physicalExam"),r=Ye(t),f=Ye(u),v=Ye(D),h=Ye(m),c=Ye(b);await this.setPresentingComplainsEncounters(r),await this.setPastMedicalHistoryEncounters(f),await this.setLevelOfConsciousnessEncounters(v),await this.setPregnancyStatusEncounters(h),await this.setPhysicalExamEncounters(c)},filterObs(e,t){return e?e.filter(u=>{var D,m;return((m=(D=u.concept)==null?void 0:D.concept_names)==null?void 0:m.some(b=>b.name===t))||u.concept_name===t}):[]},async getConceptValues(e,t){return e?await Promise.all(e.map(async u=>u.value_coded?await X.getConceptName(u.value_coded):u.concept_name||u.name)):[]},async setPresentingComplainsEncounters(e){this.presentingComplaint=await this.getConceptValues(this.filterObs(e,"Presenting complaint"),"coded")},async setLevelOfConsciousnessEncounters(e){if(e&&Array.isArray(e)){const t=this.filterObs(e,"Eye opening response");this.levelOfConsciousness.eyeResponse=t.length>0?await X.getConceptName(t[0].value_coded):null;const u=this.filterObs(e,"Best verbal response");this.levelOfConsciousness.verbalResponse=u.length>0?await X.getConceptName(u[0].value_coded):null;const D=this.filterObs(e,"Best motor response");this.levelOfConsciousness.motorResponse=D.length>0?await X.getConceptName(D[0].value_coded):null}},async setPregnancyStatusEncounters(e){if(e&&Array.isArray(e)){const t=this.filterObs(e,"Patient pregnant");this.pregnancy.patientPregnant=t.length>0?await X.getConceptName(t[0].value_coded):null;const u=this.filterObs(e,"Is patient breast feeding?");this.pregnancy.breastFeeding=u.length>0?await X.getConceptName(u[0].value_coded):null}},async setPhysicalExamEncounters(e){var t,u,D,m,b,r,f,v;if(!(!e||!Array.isArray(e))){this.eyesAbnormal=[],this.mouthAbnormal=[],this.earsAbnormal=[],this.faceAbnormal=[],this.neckAbnormal=[],this.chestAbnormal=[],this.chestMovementAbnormal=[],this.heartSoundsAbnormal=[],this.breathSoundsAbnormal=[],this.addedBreathSoundsAbnormal=[],this.abdominalInspectionAbnormal=[],this.eyesExamined=!1,this.mouthExamined=!1,this.earsExamined=!1,this.faceExamined=!1,this.neckExamined=!1,this.chestExamined=!1,this.chestMovementExamined=!1,this.heartSoundsExamined=!1,this.breathSoundsExamined=!1,this.addedBreathSoundsExamined=!1,this.abdominalInspectionExamined=!1;for(const h of e){if(!h.concept_name&&!((t=h.concept)!=null&&t.concept_names))continue;const c=h.concept_name||((m=(D=(u=h.concept)==null?void 0:u.concept_names)==null?void 0:D.find(p=>p.concept_name_type==="FULLY_SPECIFIED"))==null?void 0:m.name);c&&(c.includes("normal")||c.includes("Normal"))&&h.value_coded===1065&&(c.includes("Eyes normal")?this.eyesExamined=!0:c.includes("Mouth normal")?this.mouthExamined=!0:c.includes("Ears normal")?this.earsExamined=!0:c.includes("Face normal")?this.faceExamined=!0:c.includes("Neck normal")?this.neckExamined=!0:c.includes("Chest inspection normal")?this.chestExamined=!0:c.includes("Heart sounds normal")?this.heartSoundsExamined=!0:c.includes("Breath sounds normal")?this.breathSoundsExamined=!0:c.includes("Abdominal inspection normal")&&(this.abdominalInspectionExamined=!0))}for(const h of e){if(!h.concept_name&&!((b=h.concept)!=null&&b.concept_names))continue;const c=h.concept_name||((v=(f=(r=h.concept)==null?void 0:r.concept_names)==null?void 0:f.find(p=>p.concept_name_type==="FULLY_SPECIFIED"))==null?void 0:v.name);if(c&&!(c.includes("normal")||c.includes("Normal"))){if(c.includes("Abnormality for eyes"))if(this.eyesExamined=!0,h.value_coded){const p=await X.getConceptName(h.value_coded);p&&p.toLowerCase()!=="no"&&p.toLowerCase()!=="normal"&&this.eyesAbnormal.push(p)}else h.value_text&&this.eyesAbnormal.push(h.value_text);else if(c.includes("Abnormality for mouth"))if(this.mouthExamined=!0,h.value_coded){const p=await X.getConceptName(h.value_coded);p&&p.toLowerCase()!=="no"&&p.toLowerCase()!=="normal"&&this.mouthAbnormal.push(p)}else h.value_text&&this.mouthAbnormal.push(h.value_text);else if(c.includes("Abnormality for ears"))if(this.earsExamined=!0,h.value_coded){const p=await X.getConceptName(h.value_coded);p&&p.toLowerCase()!=="no"&&p.toLowerCase()!=="normal"&&this.earsAbnormal.push(p)}else h.value_text&&this.earsAbnormal.push(h.value_text);else if(c.includes("Abnormality for face"))if(this.faceExamined=!0,h.value_coded){const p=await X.getConceptName(h.value_coded);p&&p.toLowerCase()!=="no"&&p.toLowerCase()!=="normal"&&this.faceAbnormal.push(p)}else h.value_text&&this.faceAbnormal.push(h.value_text);else if(c.includes("Abnormality for neck"))if(this.neckExamined=!0,h.value_coded){const p=await X.getConceptName(h.value_coded);p&&p.toLowerCase()!=="no"&&p.toLowerCase()!=="normal"&&this.neckAbnormal.push(p)}else h.value_text&&this.neckAbnormal.push(h.value_text);else if(c.includes("Abnormality for chest inspection"))if(this.chestExamined=!0,h.value_coded){const p=await X.getConceptName(h.value_coded);p&&p.toLowerCase()!=="no"&&p.toLowerCase()!=="normal"&&this.chestAbnormal.push(p)}else h.value_text&&this.chestAbnormal.push(h.value_text);else if(c.includes("Chest movements"))if(this.chestMovementExamined=!0,h.value_coded){const p=await X.getConceptName(h.value_coded);p&&p.toLowerCase()!=="no"&&p.toLowerCase()!=="normal"&&this.chestMovementAbnormal.push(p)}else h.value_text&&this.chestMovementAbnormal.push(h.value_text);else if(c.includes("Heart sounds abnormality"))if(this.heartSoundsExamined=!0,h.value_coded){const p=await X.getConceptName(h.value_coded);p&&p.toLowerCase()!=="no"&&p.toLowerCase()!=="normal"&&this.heartSoundsAbnormal.push(p)}else h.value_text&&this.heartSoundsAbnormal.push(h.value_text);else if(c.includes("Breath sounds abnormality"))if(this.breathSoundsExamined=!0,h.value_coded){const p=await X.getConceptName(h.value_coded);p&&p.toLowerCase()!=="no"&&p.toLowerCase()!=="normal"&&this.breathSoundsAbnormal.push(p)}else h.value_text&&this.breathSoundsAbnormal.push(h.value_text);else if(c.includes("Abnormalities when added"))if(this.addedBreathSoundsExamined=!0,h.value_coded){const p=await X.getConceptName(h.value_coded);p&&p.toLowerCase()!=="no"&&p.toLowerCase()!=="normal"&&this.addedBreathSoundsAbnormal.push(p)}else h.value_text&&this.addedBreathSoundsAbnormal.push(h.value_text);else if(c.includes("Abdominal inspection abnormality"))if(this.abdominalInspectionExamined=!0,h.value_coded){const p=await X.getConceptName(h.value_coded);p&&p.toLowerCase()!=="no"&&p.toLowerCase()!=="normal"&&this.abdominalInspectionAbnormal.push(p)}else h.value_text&&this.abdominalInspectionAbnormal.push(h.value_text)}}}},async setPastMedicalHistoryEncounters(e){this.pastMedicalHistory=await this.getConceptValues(this.filterObs(e,"Chronic disease"),"coded")}},watch:{patient:{async handler(){await this.updateData()},deep:!0}},async mounted(){await this.updateData()}}),en={class:"visit-container"},tn={class:"visit-header"},an={class:"visit-date"},sn={class:"visit-sections"},nn={key:0,class:"visit-section"},on={class:"section-header"},ln={class:"section-content"},rn={key:0,class:"info-item"},dn={class:"info-value"},un={key:1,class:"info-item"},cn={class:"info-value"},mn={key:2,class:"info-item"},pn={class:"info-value"},hn={key:1,class:"empty-section"},fn={key:2,class:"visit-section"},vn={class:"section-header"},gn={class:"tags-container"},_n={key:3,class:"empty-section"},yn={key:4,class:"visit-section"},bn={class:"section-header"},Dn={class:"section-content"},kn={key:0,class:"info-item"},Sn={class:"info-value highlight"},wn={key:1,class:"info-item"},Cn={class:"info-value highlight"},In={key:5,class:"empty-section"},On={key:6,class:"visit-section"},En={class:"section-header"},Ln={class:"tags-container"},Pn={key:7,class:"empty-section"},Mn={key:8,class:"visit-section"},xn={class:"section-header"},An={class:"tags-container"},Bn={key:9,class:"empty-section"},$n={key:10,class:"visit-section"},Nn={class:"section-header"},Hn={class:"exam-section"},Rn={key:0,class:"exam-category"},Vn={class:"exam-category-header"},Fn={class:"exam-items"},Tn={key:1,class:"exam-category normal"},Un={class:"exam-category-header"},qn={key:2,class:"exam-category"},Wn={class:"exam-category-header"},Gn={class:"exam-items"},zn={key:3,class:"exam-category normal"},Yn={class:"exam-category-header"},Kn={key:4,class:"exam-category"},jn={class:"exam-category-header"},Jn={class:"exam-items"},Xn={key:5,class:"exam-category normal"},Qn={class:"exam-category-header"},Zn={key:6,class:"exam-category"},ei={class:"exam-category-header"},ti={class:"exam-items"},ai={key:7,class:"exam-category normal"},si={class:"exam-category-header"},ni={key:8,class:"exam-category"},ii={class:"exam-category-header"},oi={class:"exam-items"},li={key:9,class:"exam-category normal"},ri={class:"exam-category-header"},di={key:10,class:"exam-category"},ui={class:"exam-category-header"},ci={class:"exam-items"},mi={key:11,class:"exam-category normal"},pi={class:"exam-category-header"},hi={key:12,class:"exam-category"},fi={class:"exam-category-header"},vi={class:"exam-items"},gi={key:13,class:"exam-category normal"},_i={class:"exam-category-header"},yi={key:14,class:"exam-category"},bi={class:"exam-category-header"},Di={class:"exam-items"},ki={key:15,class:"exam-category normal"},Si={class:"exam-category-header"},wi={key:16,class:"exam-category"},Ci={class:"exam-items"},Ii={key:17,class:"exam-category normal"},Oi={key:18,class:"exam-category"},Ei={class:"exam-category-header"},Li={class:"exam-items"},Pi={key:19,class:"exam-category normal"},Mi={class:"exam-category-header"},xi={key:20,class:"exam-category"},Ai={class:"exam-category-header"},Bi={class:"exam-items"},$i={key:21,class:"exam-category normal"},Ni={class:"exam-category-header"},Hi={key:11,class:"empty-section"};function Ri(e,t,u,D,m,b){const r=x("ion-icon");return n(),l("div",en,[s("div",tn,[t[0]||(t[0]=s("h5",null,"Patient's Clinical Assessment Summary",-1)),s("div",an,[a(r,{icon:e.calendarOutline},null,8,["icon"]),s("span",null,I(e.formatVisitDate(e.visitDate)),1)])]),s("div",sn,[e.hasLevelOfConsciousness?(n(),l("div",nn,[s("div",on,[a(r,{icon:e.alertCircleOutline,class:"section-icon"},null,8,["icon"]),t[1]||(t[1]=s("h3",null,"Level of Consciousness",-1))]),s("div",ln,[e.levelOfConsciousness.eyeResponse?(n(),l("div",rn,[t[2]||(t[2]=s("span",{class:"info-label"},"Eye Response:",-1)),s("span",dn,I(e.levelOfConsciousness.eyeResponse),1)])):y("",!0),e.levelOfConsciousness.verbalResponse?(n(),l("div",un,[t[3]||(t[3]=s("span",{class:"info-label"},"Verbal Response:",-1)),s("span",cn,I(e.levelOfConsciousness.verbalResponse),1)])):y("",!0),e.levelOfConsciousness.motorResponse?(n(),l("div",mn,[t[4]||(t[4]=s("span",{class:"info-label"},"Motor Response:",-1)),s("span",pn,I(e.levelOfConsciousness.motorResponse),1)])):y("",!0)])])):(n(),l("div",hn,[a(r,{icon:e.alertCircleOutline},null,8,["icon"]),t[5]||(t[5]=s("p",null,"No level of consciousness recorded",-1))])),e.hasPresentingComplaints?(n(),l("div",fn,[s("div",vn,[a(r,{icon:e.documentTextOutline,class:"section-icon"},null,8,["icon"]),t[6]||(t[6]=s("h3",null,"Presenting Complaints",-1))]),s("div",gn,[(n(!0),l(q,null,G(e.uniquePresentingComplaints,(f,v)=>(n(),l("div",{class:"complaint-tag",key:v},I(f),1))),128))])])):(n(),l("div",_n,[a(r,{icon:e.documentTextOutline},null,8,["icon"]),t[7]||(t[7]=s("p",null,"No presenting complaints recorded",-1))])),e.hasPregnancyData?(n(),l("div",yn,[s("div",bn,[a(r,{icon:e.femaleOutline,class:"section-icon"},null,8,["icon"]),t[8]||(t[8]=s("h3",null,"Pregnancy Status",-1))]),s("div",Dn,[e.pregnancy.patientPregnant?(n(),l("div",kn,[t[9]||(t[9]=s("span",{class:"info-label"},"Pregnant:",-1)),s("span",Sn,I(e.pregnancy.patientPregnant),1)])):y("",!0),e.pregnancy.breastFeeding?(n(),l("div",wn,[t[10]||(t[10]=s("span",{class:"info-label"},"Breastfeeding:",-1)),s("span",Cn,I(e.pregnancy.breastFeeding),1)])):y("",!0)])])):(n(),l("div",In,[a(r,{icon:e.femaleOutline},null,8,["icon"]),t[11]||(t[11]=s("p",null,"No pregnancy status recorded",-1))])),e.hasPastMedicalHistory?(n(),l("div",On,[s("div",En,[a(r,{icon:e.medicalOutline,class:"section-icon"},null,8,["icon"]),t[12]||(t[12]=s("h3",null,"Medical History",-1))]),s("div",Ln,[(n(!0),l(q,null,G(e.uniquePastMedicalHistory,(f,v)=>(n(),l("div",{class:"medical-tag",key:v},I(f),1))),128))])])):(n(),l("div",Pn,[a(r,{icon:e.medicalOutline},null,8,["icon"]),t[13]||(t[13]=s("p",null,"No medical history recorded",-1))])),e.hasAllergies?(n(),l("div",Mn,[s("div",xn,[a(r,{icon:e.warningOutline,class:"section-icon"},null,8,["icon"]),t[14]||(t[14]=s("h3",null,"Allergies",-1))]),s("div",An,[e.item.selected?(n(!0),l(q,{key:0},G(e.selectedAllergiesList2,(f,v)=>(n(),l("div",{class:"allergy-tag",key:v},I(f.name),1))),128)):y("",!0)])])):(n(),l("div",Bn,[a(r,{icon:e.warningOutline},null,8,["icon"]),t[15]||(t[15]=s("p",null,"No allergies recorded",-1))])),e.hasPhysicalExam?(n(),l("div",$n,[s("div",Nn,[a(r,{icon:e.bodyOutline,class:"section-icon"},null,8,["icon"]),t[16]||(t[16]=s("h3",null,"Physical Examination",-1))]),s("div",Hn,[e.eyesAbnormal.length?(n(),l("div",Rn,[s("div",Vn,[a(r,{icon:e.eyeOutline},null,8,["icon"]),t[17]||(t[17]=s("h4",null,"Eyes",-1))]),s("div",Fn,[(n(!0),l(q,null,G(e.eyesAbnormal,(f,v)=>(n(),l("div",{class:"exam-item",key:"eyes-"+v},I(f),1))),128))])])):e.eyesExamined?(n(),l("div",Tn,[s("div",Un,[a(r,{icon:e.eyeOutline},null,8,["icon"]),t[18]||(t[18]=s("h4",null,"Eyes",-1))]),t[19]||(t[19]=s("div",{class:"exam-items"},[s("div",{class:"exam-item normal"}," Normal examination ")],-1))])):y("",!0),e.mouthAbnormal.length?(n(),l("div",qn,[s("div",Wn,[a(r,{icon:e.nutritionOutline},null,8,["icon"]),t[20]||(t[20]=s("h4",null,"Mouth",-1))]),s("div",Gn,[(n(!0),l(q,null,G(e.mouthAbnormal,(f,v)=>(n(),l("div",{class:"exam-item",key:"mouth-"+v},I(f),1))),128))])])):e.mouthExamined?(n(),l("div",zn,[s("div",Yn,[a(r,{icon:e.nutritionOutline},null,8,["icon"]),t[21]||(t[21]=s("h4",null,"Mouth",-1))]),t[22]||(t[22]=s("div",{class:"exam-items"},[s("div",{class:"exam-item normal"}," Normal examination ")],-1))])):y("",!0),e.earsAbnormal.length?(n(),l("div",Kn,[s("div",jn,[a(r,{icon:e.earOutline},null,8,["icon"]),t[23]||(t[23]=s("h4",null,"Ears",-1))]),s("div",Jn,[(n(!0),l(q,null,G(e.earsAbnormal,(f,v)=>(n(),l("div",{class:"exam-item",key:"ears-"+v},I(f),1))),128))])])):e.earsExamined?(n(),l("div",Xn,[s("div",Qn,[a(r,{icon:e.earOutline},null,8,["icon"]),t[24]||(t[24]=s("h4",null,"Ears",-1))]),t[25]||(t[25]=s("div",{class:"exam-items"},[s("div",{class:"exam-item normal"}," Normal examination ")],-1))])):y("",!0),e.faceAbnormal.length?(n(),l("div",Zn,[s("div",ei,[a(r,{icon:e.happyOutline},null,8,["icon"]),t[26]||(t[26]=s("h4",null,"Face",-1))]),s("div",ti,[(n(!0),l(q,null,G(e.faceAbnormal,(f,v)=>(n(),l("div",{class:"exam-item",key:"face-"+v},I(f),1))),128))])])):e.faceExamined?(n(),l("div",ai,[s("div",si,[a(r,{icon:e.happyOutline},null,8,["icon"]),t[27]||(t[27]=s("h4",null,"Face",-1))]),t[28]||(t[28]=s("div",{class:"exam-items"},[s("div",{class:"exam-item normal"}," Normal examination ")],-1))])):y("",!0),e.neckAbnormal.length?(n(),l("div",ni,[s("div",ii,[a(r,{icon:e.manOutline},null,8,["icon"]),t[29]||(t[29]=s("h4",null,"Neck",-1))]),s("div",oi,[(n(!0),l(q,null,G(e.neckAbnormal,(f,v)=>(n(),l("div",{class:"exam-item",key:"neck-"+v},I(f),1))),128))])])):e.neckExamined?(n(),l("div",li,[s("div",ri,[a(r,{icon:e.manOutline},null,8,["icon"]),t[30]||(t[30]=s("h4",null,"Neck",-1))]),t[31]||(t[31]=s("div",{class:"exam-items"},[s("div",{class:"exam-item normal"}," Normal examination ")],-1))])):y("",!0),e.chestAbnormal.length?(n(),l("div",di,[s("div",ui,[a(r,{icon:e.fitnessOutline},null,8,["icon"]),t[32]||(t[32]=s("h4",null,"Chest",-1))]),s("div",ci,[(n(!0),l(q,null,G(e.chestAbnormal,(f,v)=>(n(),l("div",{class:"exam-item",key:"chest-"+v},I(f),1))),128))])])):e.chestExamined?(n(),l("div",mi,[s("div",pi,[a(r,{icon:e.fitnessOutline},null,8,["icon"]),t[33]||(t[33]=s("h4",null,"Chest",-1))]),t[34]||(t[34]=s("div",{class:"exam-items"},[s("div",{class:"exam-item normal"}," Normal examination ")],-1))])):y("",!0),e.chestMovementAbnormal.length?(n(),l("div",hi,[s("div",fi,[a(r,{icon:e.moveOutline},null,8,["icon"]),t[35]||(t[35]=s("h4",null,"Chest Movement",-1))]),s("div",vi,[(n(!0),l(q,null,G(e.chestMovementAbnormal,(f,v)=>(n(),l("div",{class:"exam-item",key:"chest-move-"+v},I(f),1))),128))])])):e.chestMovementExamined?(n(),l("div",gi,[s("div",_i,[a(r,{icon:e.moveOutline},null,8,["icon"]),t[36]||(t[36]=s("h4",null,"Chest Movement",-1))]),t[37]||(t[37]=s("div",{class:"exam-items"},[s("div",{class:"exam-item normal"}," Normal movement ")],-1))])):y("",!0),e.heartSoundsAbnormal.length?(n(),l("div",yi,[s("div",bi,[a(r,{icon:e.pulseOutline},null,8,["icon"]),t[38]||(t[38]=s("h4",null,"Heart Sounds",-1))]),s("div",Di,[(n(!0),l(q,null,G(e.heartSoundsAbnormal,(f,v)=>(n(),l("div",{class:"exam-item",key:"heart-"+v},I(f),1))),128))])])):e.heartSoundsExamined?(n(),l("div",ki,[s("div",Si,[a(r,{icon:e.pulseOutline},null,8,["icon"]),t[39]||(t[39]=s("h4",null,"Heart Sounds",-1))]),t[40]||(t[40]=s("div",{class:"exam-items"},[s("div",{class:"exam-item normal"}," Normal heart sounds ")],-1))])):y("",!0),e.breathSoundsAbnormal.length?(n(),l("div",wi,[t[41]||(t[41]=s("div",{class:"exam-category-header"},[s("h4",null,"Breath Sounds")],-1)),s("div",Ci,[(n(!0),l(q,null,G(e.breathSoundsAbnormal,(f,v)=>(n(),l("div",{class:"exam-item",key:"breath-"+v},I(f),1))),128))])])):e.breathSoundsExamined?(n(),l("div",Ii,t[42]||(t[42]=[s("div",{class:"exam-category-header"},[s("h4",null,"Breath Sounds")],-1),s("div",{class:"exam-items"},[s("div",{class:"exam-item normal"}," Normal breath sounds ")],-1)]))):y("",!0),e.addedBreathSoundsAbnormal.length?(n(),l("div",Oi,[s("div",Ei,[a(r,{icon:e.addOutline},null,8,["icon"]),t[43]||(t[43]=s("h4",null,"Added Breath Sounds",-1))]),s("div",Li,[(n(!0),l(q,null,G(e.addedBreathSoundsAbnormal,(f,v)=>(n(),l("div",{class:"exam-item",key:"added-breath-"+v},I(f),1))),128))])])):e.addedBreathSoundsExamined?(n(),l("div",Pi,[s("div",Mi,[a(r,{icon:e.addOutline},null,8,["icon"]),t[44]||(t[44]=s("h4",null,"Added Breath Sounds",-1))]),t[45]||(t[45]=s("div",{class:"exam-items"},[s("div",{class:"exam-item normal"}," No abnormal added sounds ")],-1))])):y("",!0),e.abdominalInspectionAbnormal.length?(n(),l("div",xi,[s("div",Ai,[a(r,{icon:e.scanOutline},null,8,["icon"]),t[46]||(t[46]=s("h4",null,"Abdominal Inspection",-1))]),s("div",Bi,[(n(!0),l(q,null,G(e.abdominalInspectionAbnormal,(f,v)=>(n(),l("div",{class:"exam-item",key:"abdomen-"+v},I(f),1))),128))])])):e.abdominalInspectionExamined?(n(),l("div",$i,[s("div",Ni,[a(r,{icon:e.scanOutline},null,8,["icon"]),t[47]||(t[47]=s("h4",null,"Abdominal Inspection",-1))]),t[48]||(t[48]=s("div",{class:"exam-items"},[s("div",{class:"exam-item normal"}," Normal abdominal inspection ")],-1))])):y("",!0)])])):(n(),l("div",Hi,[a(r,{icon:e.bodyOutline},null,8,["icon"]),t[49]||(t[49]=s("p",null,"No physical exam recorded",-1))]))])])}const Vi=Z(Zs,[["render",Ri],["__scopeId","data-v-8f0a8a33"]]),Fi=j({name:"LevelOfConsciousness",components:{IonContent:Ce,IonHeader:we,IonItem:z,IonList:le,IonMenu:Se,IonTitle:ke,IonToolbar:De,BasicForm:ie},props:{isActive:Boolean},emits:["closeAccordion"],setup(e,{emit:t}){var p;const{adult:u,minor:D}=ls(),{patient:m}=xe(),b=d(""),r=d(pe.getAgeInYears((p=m==null?void 0:m.personInformation)==null?void 0:p.birthdate)),f=d(!1),v=(S,O)=>{var H,R,V;const B=st(S,mt.EYE_OPENING_RESPONSE),w=st(S,mt.BEST_MOTOR_RESPONSE),E=st(S,mt.BEST_VERBAL_RESPONSE),g=(H=(O?ms:ps)[B])!=null?H:0,C=(R=(O?rs:ds)[w])!=null?R:0,te=(V=(O?us:cs)[E])!=null?V:0,ae=g+C+te;b.value="(M ".concat(C," V ").concat(te," E ").concat(g,") ").concat(ae,"/").concat(O?5:15);const $=B&&w&&E;$&&!f.value?(f.value=!0,e.isActive&&setTimeout(()=>t("closeAccordion"),1e3)):$||(f.value=!1)},h=S=>v(S,!1),c=S=>v(S,!0);return $e(u,S=>v(S,!1),{deep:!0}),$e(D,S=>v(S,!0),{deep:!0}),{gcs:b,patientAge:r,adult:u,minor:D,handleAdultUpdate:h,handleMinorUpdate:c}}}),Ti={class:"modal_wrapper"};function Ui(e,t,u,D,m,b){const r=x("basic-form");return n(),l("div",Ti,[e.patientAge<18?(n(),L(r,{key:0,contentData:e.minor,"onUpdate:modelValue":e.handleMinorUpdate},null,8,["contentData","onUpdate:modelValue"])):(n(),L(r,{key:1,contentData:e.adult,"onUpdate:modelValue":e.handleAdultUpdate},null,8,["contentData","onUpdate:modelValue"])),s("h5",null,I(e.gcs),1)])}const qi=Z(Fi,[["render",Ui],["__scopeId","data-v-7182bbbd"]]),Wi=j({name:"Menu",components:{IonContent:Ce,IonHeader:we,IonItem:z,IonList:le,IonMenu:Se,IonTitle:ke,IonToolbar:De,BasicForm:ie},data(){return{}},computed:{...ee(hs,["pregnancy"])},methods:{handleInputData(){}}}),Gi={class:"modal_wrapper"};function zi(e,t,u,D,m,b){const r=x("basic-form");return n(),l("div",Gi,[a(r,{contentData:e.pregnancy,"onUpdate:inputValue":e.handleInputData},null,8,["contentData","onUpdate:inputValue"])])}const Yi=Z(Wi,[["render",zi]]),Ki=j({name:"Menu",components:{IonContent:Ce,IonHeader:we,IonItem:z,IonList:le,IonMenu:Se,IonTitle:ke,IonToolbar:De,BasicForm:ie},data(){return{initialData:[]}},computed:{...ee(Bt,["pastMedicalHistory"])},mounted(){const e=Bt();this.initialData=e.getInitial(),this.handleChronicConditions()},watch:{pastMedicalHistory:{handler(){this.handleChronicConditions()},deep:!0}},methods:{handleChronicConditions(){var t;const e=["TB","Chronic Obstructive Pulmonary Disease (COPD)","Asthma","Epilepsy","Previous stroke","Peptic Ulcer Disease (PUD)","Mental disorder","Bleeding disorders","Hypertension","HIV Positive","Diabetes Mellitus"];(t=fs(this.pastMedicalHistory,"None"))!=null&&t.checked?e.forEach(u=>{Pe(this.pastMedicalHistory,"TB treatment","displayNone",!0),F(this.pastMedicalHistory,"TB drugs","displayNone",!0),F(this.pastMedicalHistory,"TB drug start date","displayNone",!0),Pe(this.pastMedicalHistory,"Hypertension medication","displayNone",!0),F(this.pastMedicalHistory,"Current hypertension treatment regimen","displayNone",!0),Pe(this.pastMedicalHistory,"HIV status","displayNone",!0),F(this.pastMedicalHistory,"ARV start date","displayNone",!0),Pe(this.pastMedicalHistory,"Diabetes","displayNone",!0),Pe(this.pastMedicalHistory,"Controlled by","displayNone",!0),Me(this.pastMedicalHistory,u,"checked",!1),Me(this.pastMedicalHistory,u,"disabled",!0)}):e.forEach(u=>{Me(this.pastMedicalHistory,u,"disabled",!1)})},handleInputData(e){F(this.pastMedicalHistory,"TB drugs","popOverData",{filterData:!0,data:[{name:"Auramine ‘O’ (C.I. 41000) 50g"},{name:"Bedaquilline 100mg"},{name:"Clofazimine 100mg"},{name:"Clofazimine 50mg"},{name:"Cycloserine 125mg"},{name:"Cycloserine 250mg"},{name:"Delamanid 50mg"},{name:"Ethambutol 100mg"},{name:"Ethambutol 400mg"},{name:"Ethionamide 250mg"},{name:"Isoniazid 100mg "},{name:"Isoniazid 300mg"},{name:"Isoniazid / Rifapentine 300mg / 300mg"},{name:"Levofloxacin 100mg"},{name:"Levofloxacin 250mg"},{name:"Linezolid 600mg"},{name:"Moxifloxacin 400mg"},{name:"Pyrazinamide 400mg"},{name:"Rifabutin 150mg Capsules"},{name:"Rifampicin 150mg/isoniazid 75mg"},{name:"Rifampicin 75mg+INH 50mg dispersible"},{name:"Rifampicin 75mg+INH 50mg+Pyrazinamide 150mg dispersible"},{name:"Rifampicin150mg/Isoniazid75mg/Pyrazinamide 400mg/Ethambutol"}]}),F(this.pastMedicalHistory,"Current hypertension treatment regimen","popOverData",{filterData:!0,data:[{name:"Captopril 12.5mg"},{name:"Aspirin 75mg"},{name:"Hydrochlorothiazide 25mg"},{name:"Enalapril Meleate 5mg"},{name:"Enalapril Maleate 10mg"}]})}}}),ji={class:"modal_wrapper"},Ji={class:"uniform_columns"};function Xi(e,t,u,D,m,b){const r=x("basic-form");return n(),l("div",ji,[s("div",Ji,[a(r,{contentData:e.pastMedicalHistory,initialData:e.initialData,"onUpdate:inputValue":e.handleInputData,"onUpdate:selected":e.handleInputData},null,8,["contentData","initialData","onUpdate:inputValue","onUpdate:selected"])])])}const Qi=Z(Ki,[["render",Xi],["__scopeId","data-v-2b756eeb"]]),Zi=j({name:"immidiatePostnatalChecksForChild",components:{BasicCard:xs,IonContent:Ce,IonHeader:we,IonItem:z,IonList:le,IonMenu:Se,IonTitle:ke,IonToolbar:De,IonToggle:qa,IonSelect:Ua,IonSelectOption:Ta,IonInput:nt,BasicInputField:ge,BasicForm:ie,IonRadio:Fa,IonRadioGroup:Va},data(){return{initialData:[],iconsContent:fe,vValidations:"",hasValidationErrors:[],inputField:""}},computed:{...ee($t,["physicalExam"]),...ee(xe,["patient"])},mounted(){const e=$t();this.initialData=e.getInitial(),this.handlePhysicalExam(),this.handleGenitalExam()},watch:{physicalExam:{handler(){this.handlePhysicalExam(),this.handleGenitalExam()},deep:!0}},setup(){return{checkmark:Te,pulseOutline:Ne}},methods:{handlePhysicalExam(){st(this.physicalExam,"Physical examination")=="No"?Pe(this.physicalExam,"Reason why physical examination not done","displayNone",!1):(Pe(this.physicalExam,"Reason why physical examination not done","displayNone",!0),Pe(this.physicalExam,"Reason why physical examination not done","selectedValue",""))},handleGenitalExam(){var t,u;const e=(u=(t=this.patient)==null?void 0:t.personInformation)==null?void 0:u.gender;e=="M"&&(Me(this.physicalExam,"Vulva examination","disabled",!0),Me(this.physicalExam,"Visible bleeding","disabled",!0)),e=="F"&&(Me(this.physicalExam,"Urethral meatus abnormal","disabled",!0),Me(this.physicalExam,"Scrotal swelling","disabled",!0),Me(this.physicalExam,"Tastes swelling","disabled",!0))}}}),eo={class:"container"};function to(e,t,u,D,m,b){const r=x("basic-form"),f=x("ion-card-content"),v=x("ion-card");return n(),l("div",eo,[a(v,{class:"section"},{default:i(()=>[a(f,null,{default:i(()=>[a(r,{contentData:e.physicalExam,initialData:e.initialData},null,8,["contentData","initialData"])]),_:1})]),_:1})])}const ao=Z(Zi,[["render",to],["__scopeId","data-v-c1d7fdd5"]]),so={key:0},no={class:"ion-padding",slot:"content"},io={class:"nav-buttons"},oo={class:"ion-padding",slot:"content"},lo={class:"nav-buttons"},ro={class:"ion-padding",slot:"content"},uo={class:"nav-buttons"},co={class:"ion-padding",slot:"content"},mo={class:"nav-buttons"},po={class:"ion-padding",slot:"content"},ho={class:"nav-buttons"},fo={class:"ion-padding",slot:"content"},vo={class:"nav-buttons"},go=j({__name:"ClinicalAssessment",setup(e,{expose:t}){const u=d("loc"),D=d(0),m=new Jt,b=xe(),r=()=>{D.value++},f=d(null),v=[{id:"loc",label:"Level of consciousness",show:!0},{id:"pc",label:"Presenting complaints",show:!0},{id:"pbs",label:"Pregnancy and breastfeeding status",show:()=>m.isChildBearing()},{id:"pmh",label:"Past medical history",show:!0},{id:"al",label:"Allergies",show:!0},{id:"pe",label:"Physical examination",show:!0}],h=me(()=>{const E=b.patient;if(!E)return!1;const C=new Date().toISOString().split("T")[0];return["levelOfConsciousness","presentingComplaints","pastMedicalHistory","physicalExam","allergies","pregnancy"].some(ae=>{var H,R;return[...((H=E[ae])==null?void 0:H.saved)||[],...((R=E[ae])==null?void 0:R.unsaved)||[]].some(V=>V.obs_datetime?new Date(V.obs_datetime).toISOString().split("T")[0]===C:!1)})}),c=me(()=>v.filter(E=>typeof E.show=="function"?E.show():E.show)),p=E=>{const g=v.find(C=>C.id===E);return g?typeof g.show=="function"?g.show():g.show:!1},S=E=>c.value.findIndex(g=>g.id===E),O=E=>{const g=S(E);g>0&&(u.value=c.value[g-1].id)},B=E=>{const C=S(E)+1;C<c.value.length?u.value=c.value[C].id:(u.value="",r())};return t({onSubmit:()=>{var E;(E=f.value)==null||E.onSubmit()}}),(E,g)=>h.value?(n(),l("div",so,[(n(),L(Vi,{key:D.value}))])):(n(),L(o(he),{key:1,style:{width:"100%"}},{default:i(()=>[a(o(Ke),{value:u.value,"onUpdate:value":g[12]||(g[12]=C=>u.value=C),ref:"accordionGroup",class:"previousView"},{default:i(()=>[p("loc")?(n(),L(o(_e),{key:0,value:"loc",class:"_card"},{default:i(()=>[a(o(z),{slot:"header",color:"light"},{default:i(()=>[a(o(K),{class:"previousLabel"},{default:i(()=>g[13]||(g[13]=[P("Level of consciousness")])),_:1,__:[13]})]),_:1}),s("div",no,[a(qi,{"is-active":u.value==="loc",onDataSaved:r},null,8,["is-active"]),s("div",io,[S("loc")>0?(n(),L(o(oe),{key:0,fill:"outline",onClick:g[0]||(g[0]=ce(C=>O("loc"),["stop"]))},{default:i(()=>g[14]||(g[14]=[P(" Back ")])),_:1,__:[14]})):y("",!0),a(o(oe),{fill:"outline",onClick:g[1]||(g[1]=ce(C=>B("loc"),["stop"]))},{default:i(()=>[P(I(S("loc")<c.value.length-1?"Next":"Finish"),1)]),_:1})])])]),_:1})):y("",!0),p("pc")?(n(),L(o(_e),{key:1,value:"pc",class:"_card"},{default:i(()=>[a(o(z),{slot:"header",color:"light"},{default:i(()=>[a(o(K),{class:"previousLabel"},{default:i(()=>g[15]||(g[15]=[P("Presenting complaints")])),_:1,__:[15]})]),_:1}),s("div",oo,[a(Qs,{"is-active":u.value==="pc",onDataSaved:r,ref_key:"presentingComplaintsFormRef",ref:f},null,8,["is-active"]),s("div",lo,[S("pc")>0?(n(),L(o(oe),{key:0,fill:"outline",onClick:g[2]||(g[2]=ce(C=>O("pc"),["stop"]))},{default:i(()=>g[16]||(g[16]=[P(" Back ")])),_:1,__:[16]})):y("",!0),a(o(oe),{fill:"outline",onClick:g[3]||(g[3]=ce(C=>B("pc"),["stop"]))},{default:i(()=>[P(I(S("pc")<c.value.length-1?"Next":"Finish"),1)]),_:1})])])]),_:1})):y("",!0),p("pbs")?(n(),L(o(_e),{key:2,value:"pbs",class:"_card"},{default:i(()=>[a(o(z),{slot:"header",color:"light"},{default:i(()=>[a(o(K),{class:"previousLabel"},{default:i(()=>g[17]||(g[17]=[P("Pregnancy and breastfeeding status")])),_:1,__:[17]})]),_:1}),s("div",ro,[a(Yi,{"is-active":u.value==="pbs",onDataSaved:r},null,8,["is-active"]),s("div",uo,[S("pbs")>0?(n(),L(o(oe),{key:0,fill:"outline",onClick:g[4]||(g[4]=ce(C=>O("pbs"),["stop"]))},{default:i(()=>g[18]||(g[18]=[P(" Back ")])),_:1,__:[18]})):y("",!0),a(o(oe),{fill:"outline",onClick:g[5]||(g[5]=ce(C=>B("pbs"),["stop"]))},{default:i(()=>[P(I(S("pbs")<c.value.length-1?"Next":"Finish"),1)]),_:1})])])]),_:1})):y("",!0),p("pmh")?(n(),L(o(_e),{key:3,value:"pmh",class:"_card"},{default:i(()=>[a(o(z),{slot:"header",color:"light"},{default:i(()=>[a(o(K),{class:"previousLabel"},{default:i(()=>g[19]||(g[19]=[P("Past medical history")])),_:1,__:[19]})]),_:1}),s("div",co,[a(Qi,{"is-active":u.value==="pmh",onDataSaved:r},null,8,["is-active"]),s("div",mo,[S("pmh")>0?(n(),L(o(oe),{key:0,fill:"outline",onClick:g[6]||(g[6]=ce(C=>O("pmh"),["stop"]))},{default:i(()=>g[20]||(g[20]=[P(" Back ")])),_:1,__:[20]})):y("",!0),a(o(oe),{fill:"outline",onClick:g[7]||(g[7]=ce(C=>B("pmh"),["stop"]))},{default:i(()=>[P(I(S("pmh")<c.value.length-1?"Next":"Finish"),1)]),_:1})])])]),_:1})):y("",!0),p("al")?(n(),L(o(_e),{key:4,value:"al",class:"_card"},{default:i(()=>[a(o(z),{slot:"header",color:"light"},{default:i(()=>[a(o(K),{class:"previousLabel"},{default:i(()=>g[21]||(g[21]=[P("Allergies")])),_:1,__:[21]})]),_:1}),s("div",po,[a(Os,{"is-active":u.value==="al",onDataSaved:r},null,8,["is-active"]),s("div",ho,[S("al")>0?(n(),L(o(oe),{key:0,fill:"outline",onClick:g[8]||(g[8]=ce(C=>O("al"),["stop"]))},{default:i(()=>g[22]||(g[22]=[P(" Back ")])),_:1,__:[22]})):y("",!0),a(o(oe),{fill:"outline",onClick:g[9]||(g[9]=ce(C=>B("al"),["stop"]))},{default:i(()=>[P(I(S("al")<c.value.length-1?"Next":"Finish"),1)]),_:1})])])]),_:1})):y("",!0),p("pe")?(n(),L(o(_e),{key:5,value:"pe",class:"_card"},{default:i(()=>[a(o(z),{slot:"header",color:"light"},{default:i(()=>[a(o(K),{class:"previousLabel"},{default:i(()=>g[23]||(g[23]=[P("Physical examination")])),_:1,__:[23]})]),_:1}),s("div",fo,[a(ao,{"is-active":u.value==="pe",onDataSaved:r},null,8,["is-active"]),s("div",vo,[S("pe")>0?(n(),L(o(oe),{key:0,fill:"outline",onClick:g[10]||(g[10]=ce(C=>O("pe"),["stop"]))},{default:i(()=>g[24]||(g[24]=[P(" Back ")])),_:1,__:[24]})):y("",!0),a(o(oe),{fill:"outline",onClick:g[11]||(g[11]=ce(C=>B("pe"),["stop"]))},{default:i(()=>[P(I(S("pe")<c.value.length-1?"Next":"Finish"),1)]),_:1})])])]),_:1})):y("",!0)]),_:1},8,["value"])]),_:1}))}}),kr=Z(go,[["__scopeId","data-v-6ecd9cf6"]]);class _o extends Nt{constructor(t,u){super(t,8,u)}static async getDiagnosis(t="",u=1,D=10){const m=await X.getConceptID("Qech outpatient diagnosis list");return Nt.getJson("diagnosis",{id:m,name:t,page:u,page_size:D})}}const yo=j({name:"Menu",components:{IonContent:Ce,IonHeader:we,IonItem:z,IonList:le,IonMenu:Se,IonTitle:ke,IonToolbar:De,List:Ue},computed:{...ee(xe,["patient"])},data(){return{valueNumericArray:[],obsDatetime:[],graphIcon:St(["#006401"]),listIcon:kt(["#636363"]),displayGraph:!0,orders:[],height:[],BMI:[],iconBg:{},activeWeight:[],activeHeight:[],activeBMI:[],list:[],series:[{name:"",data:[]}]}},setup(){return{checkmark:Te,pulseOutline:Ne}},async mounted(){const e=await Oe.getAll(this.patient.patientID,"Primary diagnosis"),t=await Oe.getAll(this.patient.patientID,"Secondary diagnosis"),u=await Oe.getAll(this.patient.patientID,"Attempted/ Differential diagnosis"),D=[...e||[],...t||[],...u||[]],m=ye.isEmpty(D)?[]:Promise.all(D.map(async b=>({name:await Oe.getConceptName(b.value_coded),obs_date:b.obs_datetime})));this.setListData(await m)},methods:{dismiss(){Dt.dismiss()},handleIcon(){},setActivClass(e){this.activeHeight="",this.activeBMI="",this.activeWeight="",e=="height"?this.activeHeight="_active":e=="weight"?this.activeWeight="_active":e=="BMI"&&(this.activeBMI="_active")},setListData(e){this.list=[],this.list.push({actionBtn:!1,class:"col_background",header:!0,minHeight:"--min-height: 25px;",display:["Date","Diagnosis","Notes"]}),e.forEach(t=>{this.list.push({actionBtn:!1,minHeight:"--min-height: 25px;",class:"col_background",display:[pe.toStandardHisFormat(t.obs_date),t.name,""]})})}}}),bo={class:"modal_wrapper"};function Do(e,t,u,D,m,b){const r=x("list");return n(),l("div",bo,[s("div",null,[a(r,{listData:e.list},null,8,["listData"])])])}const ko=Z(yo,[["render",Do],["__scopeId","data-v-88580898"]]),So=j({name:"Menu",components:{IonContent:Ce,IonHeader:we,IonItem:z,IonList:le,IonMenu:Se,IonTitle:ke,IonToolbar:De,IonInput:nt,IonPopover:Gt,DashBox:ot,SelectionPopover:Xt,BasicInputField:ge,List:Ue,BasicForm:ie,DynamicButton:ve,previousDiagnosis:ko},data(){return{iconsContent:fe,no_item:!1,search_item:!1,display_primary:!0,display_item:!1,addItemButton:!0,selectedText:"",conditionStatus:"",data:[],diagnosisData:[],popoverOpen:!1,event:"",selectedCondition:"",selected:null,diagnoses:[],initialData:[]}},setup(){return{checkmark:Te,pulseOutline:Ne}},computed:{...ee(pt,["OPDdiagnosis"]),primaryDiagnosisExists(){return this.OPDdiagnosis[0].selectedData.some(e=>e.data.concept_id===6542)},primaryInputField(){return this.OPDdiagnosis[0].data.rowData[0].colData},secondaryInputField(){return this.OPDdiagnosis[2].data.rowData[0].colData},differentialInputField(){return this.OPDdiagnosis[3].data.rowData[0].colData}},watch:{OPDdiagnosis:{handler(){this.setDashedBox()},deep:!0},patient:{handler(e){e&&this.resetDiagnosisList()},immediate:!0,deep:!0}},async mounted(){this.updateDiagnosisStores();const e=pt();this.initialData=e.getInitial(),this.setDashedBox(),await this.getDiagnosis("")},methods:{resetDiagnosisList(){this.OPDdiagnosis[0].selectedData=[],this.updateDiagnosisStores()},displayInputFields(){this.conditionStatus="",this.selectedText="",this.no_item=!1,this.addItemButton=!1,this.search_item=!0},async validaterowData(e={name:"secondaryDiagnosis"}){F(this.OPDdiagnosis,"secondaryDiagnosis","alertsErrorMassage",""),F(this.OPDdiagnosis,"primaryDiagnosis","alertsErrorMassage",""),F(this.OPDdiagnosis,"differentialDiagnosis","alertsErrorMassage","");const t=ht(this.OPDdiagnosis,"primaryDiagnosis","value"),u=ht(this.OPDdiagnosis,"secondaryDiagnosis","value"),D=ht(this.OPDdiagnosis,"differentialDiagnosis","value");if(t.name&&this.OPDdiagnosis[0].selectedData.some(f=>f.data.concept_id===6542))return F(this.OPDdiagnosis,"primaryDiagnosis","alertsErrorMassage","Only one primary diagnosis can be added. Delete the existing one to change."),Xe("Only one primary diagnosis is allowed. Delete one added if you want to change"),!1;const m=u&&u.length>0,b=D&&D.length>0;return m&&u.some(r=>r.name===t.name)?(F(this.OPDdiagnosis,"secondaryDiagnosis","alertsErrorMassage","".concat(t.name," is already selected as primary diagnosis.")),!1):b&&D.some(r=>r.name===t.name)?(F(this.OPDdiagnosis,"differentialDiagnosis","alertsErrorMassage","".concat(t.name," is already selected as primary diagnosis.")),!1):m&&b&&u.some(f=>D.some(v=>v.name===f.name))?(F(this.OPDdiagnosis,"secondaryDiagnosis","alertsErrorMassage","Secondary and differential diagnoses cannot overlap."),!1):t!=null&&t.name?!0:(F(this.OPDdiagnosis,"primaryDiagnosis","alertsErrorMassage","Primary diagnosis is required."),!1)},async addNewRow(){await this.validaterowData()&&(this.buildDiagnosis(),this.search_item=!1,this.display_item=!0,this.addItemButton=!0,this.display_primary=!1,this.OPDdiagnosis[0].data.rowData[0].colData[0].value="",this.OPDdiagnosis[2].data.rowData[0].colData[0].value="",this.OPDdiagnosis[3].data.rowData[0].colData[0].value="",F(this.OPDdiagnosis,"primaryDiagnosis","inputFieldDisplayNone",!1),F(this.OPDdiagnosis,"primaryDiagnosis","colSize",""))},buildDiagnosis(){var u,D;const e=[],t=this.OPDdiagnosis[0].selectedData.map(m=>m.name);if((D=(u=this.primaryInputField[0])==null?void 0:u.value)!=null&&D.name&&!t.includes(this.primaryInputField[0].value.name))if(!this.OPDdiagnosis[0].selectedData.some(b=>b.data.concept_id===6542))e.push({actionBtn:!0,btn:["delete"],name:this.primaryInputField[0].value.name,id:this.primaryInputField[0].value.concept_id,display:[this.primaryInputField[0].value.name,"Primary diagnosis"],data:{concept_id:6542,value_coded:this.primaryInputField[0].value.concept_id,obs_datetime:be.getSessionDate()}});else return Xe("Only one primary diagnosis is allowed"),!1;return this.secondaryInputField[0].value&&this.secondaryInputField[0].value.forEach(m=>{t.includes(m.name)||e.push({actionBtn:!0,btn:["delete"],name:m.name,id:m.concept_id,display:[m.name,"Secondary diagnosis"],data:{concept_id:6543,value_coded:m.concept_id,obs_datetime:be.getSessionDate()}})}),this.differentialInputField[0].value&&this.differentialInputField[0].value.forEach(m=>{t.includes(m.name)||e.push({actionBtn:!0,btn:["delete"],name:m.name,id:m.concept_id,display:[m.name,"Differential diagnosis"],data:{concept_id:10201,value_coded:m.concept_id,obs_datetime:be.getSessionDate()}})}),e.length>0&&(this.OPDdiagnosis[0].selectedData=[...this.OPDdiagnosis[0].selectedData,...e]),!0},compareArrays(e,t){return e.reduce((u,D)=>{const m=t.find(b=>b.name===D.name);return m&&u.push(m.display[1]),u},[])},updateDiagnosisStores(){pt().setOPDDiagnosis(this.OPDdiagnosis)},openPopover(e){this.event=e,this.popoverOpen=!0},async handleInputData(e){F(this.OPDdiagnosis,"secondaryDiagnosis","alertsErrorMassage",""),F(this.OPDdiagnosis,"primaryDiagnosis","alertsErrorMassage",""),F(this.OPDdiagnosis,"differentialDiagnosis","alertsErrorMassage",""),await this.getDiagnosis(e.value),this.validaterowData(e)},async getDiagnosis(e){return this.diagnoses=await _o.getDiagnosis(e,1,5),F(this.OPDdiagnosis,"primaryDiagnosis","multiSelectData",this.diagnoses),F(this.OPDdiagnosis,"secondaryDiagnosis","multiSelectData",this.diagnoses),F(this.OPDdiagnosis,"differentialDiagnosis","multiSelectData",this.diagnoses),this.diagnoses},async onRefresh(e){(await this.getDiagnosis(e)).length>0&&it("Diagnoses selection list has been updated")},editDiagnosis(e){this.deleteDiagnosis(e),this.selectedText=e.name,this.OPDdiagnosis[0].data.rowData[0].colData[0].value=e.name,this.addItemButton=!1,this.search_item=!0,this.updateDiagnosisStores()},async openDeletePopover(e){await vs("Do you want to delete ".concat(e.name," ?"),e.event)&&this.deleteDiagnosis(e.name)},deleteDiagnosis(e){const t=this.OPDdiagnosis[0].selectedData,u=e.name,D=t.filter(b=>b.display[0]!==u),m=t.filter(b=>b.display[0]===u);this.OPDdiagnosis[0].selectedData=D,m[0].data.concept_id==6542&&(F(this.OPDdiagnosis,"primaryDiagnosis","inputFieldDisplayNone",!1),F(this.OPDdiagnosis,"primaryDiagnosis","colSize",""))},setDashedBox(){var e,t,u,D;((t=(e=this.primaryInputField[0])==null?void 0:e.value)!=null&&t.name||(D=(u=this.primaryInputField[1])==null?void 0:u.value)!=null&&D.name)&&(this.addItemButton=!1,this.search_item=!0,this.no_item=!1),this.OPDdiagnosis[0].selectedData.length>0?(this.display_item=!0,this.no_item=!1):this.search_item||(this.no_item=!0),this.addItemButton=!this.primaryDiagnosisExists}}}),wo={class:"custom_card",style:{padding:"10px"}},Co={key:0},Io={key:0,style:{color:"red","margin-top":"10px",background:"lightgoldenrodyellow"}},Oo={class:"ion-padding",slot:"content"};function Eo(e,t,u,D,m,b){const r=x("DashBox"),f=x("list"),v=x("basic-form"),h=x("ion-row"),c=x("DynamicButton"),p=x("ion-label"),S=x("ion-item"),O=x("previousDiagnosis"),B=x("ion-accordion"),w=x("ion-accordion-group");return n(),l(q,null,[s("div",wo,[a(r,{status:e.no_item,content:"No Diagnosis added"},null,8,["status"]),e.display_item?(n(),l("span",Co,[a(f,{listData:e.OPDdiagnosis[0].selectedData,"onClicked:edit":t[0]||(t[0]=E=>e.editDiagnosis(E)),"onClicked:delete":e.deleteDiagnosis},null,8,["listData","onClicked:delete"]),e.primaryDiagnosisExists?(n(),l("div",Io," In order to update the diagnosis list, please remove/delete the primary diagnosis only and then re-add or change it along with the secondary and differential diagnoses. ")):y("",!0)])):y("",!0),e.search_item?(n(),L(h,{key:1},{default:i(()=>[a(v,{initialData:e.initialData,contentData:e.OPDdiagnosis,"onUpdate:selected":e.handleInputData,"onUpdate:inputValue":e.handleInputData,disabled:e.primaryDiagnosisExists,"onClicked:button":e.addNewRow,onSearchChange:e.getDiagnosis,onRefresh:t[1]||(t[1]=E=>e.onRefresh("a"))},null,8,["initialData","contentData","onUpdate:selected","onUpdate:inputValue","disabled","onClicked:button","onSearchChange"])]),_:1})):y("",!0),e.addItemButton?(n(),L(h,{key:2,style:{"margin-top":"10px"}},{default:i(()=>[a(c,{fill:"clear",icon:e.iconsContent.plus,iconSlot:"icon-only","onClicked:btn":t[2]||(t[2]=E=>e.displayInputFields()),name:"Add new Diagnosis"},null,8,["icon"])]),_:1})):y("",!0)]),a(h,null,{default:i(()=>[a(w,{ref:"accordionGroup",class:"previousView"},{default:i(()=>[a(B,{value:"first","toggle-icon-slot":"start",class:"custom_card"},{default:i(()=>[a(S,{slot:"header",color:"light"},{default:i(()=>[a(p,{class:"previousLabel"},{default:i(()=>t[3]||(t[3]=[P("Previous Diagnosis")])),_:1,__:[3]})]),_:1}),s("div",Oo,[a(O)])]),_:1})]),_:1},512)]),_:1})],64)}const Sr=Z(So,[["render",Eo],["__scopeId","data-v-e7cfdc2c"]]),Lo=j({components:{IonButtons:ja,IonButton:oe,IonModal:Ka,IonHeader:we,IonContent:Ce,IonToolbar:De,IonTitle:ke,IonItem:z,IonList:le,IonAvatar:Ya,IonImg:za,IonLabel:K,IonPage:Ga,IonMenu:Se,BasicForm:ie,IonFooter:Wa,DynamicButton:ve},data(){return{popoverStatus:null}},props:{keyboardClose:{type:Boolean,default:!1},keepContentsMounted:{type:Boolean,default:!1},content:{default:[]},popoverOpen:{type:Boolean,default:!1},event:{type:Event,default:""},title:{type:String,default:""}},methods:{dismiss(){Dt.dismiss()},nav(e,t){this.dismiss(),this.$router.push(e)}}}),Po={class:"modal_wrapper"},Mo={class:"center text_12"};function xo(e,t,u,D,m,b){const r=x("ion-title"),f=x("ion-button"),v=x("ion-buttons"),h=x("ion-toolbar"),c=x("ion-header"),p=x("ion-col"),S=x("ion-row"),O=x("ion-content"),B=x("ion-modal");return n(),L(B,{"is-open":e.popoverOpen,"show-backdrop":!0,onDidDismiss:t[1]||(t[1]=w=>e.$emit("closePopoover",!1)),"keyboard-close":e.keyboardClose},{default:i(()=>[a(c,null,{default:i(()=>[a(h,null,{default:i(()=>[a(r,null,{default:i(()=>[s("b",null,"Lab results for ("+I(e.content.item.name)+") test",1)]),_:1}),a(v,{slot:"end"},{default:i(()=>[a(f,{onClick:t[0]||(t[0]=w=>e.$emit("closeModal"))},{default:i(()=>t[2]||(t[2]=[P("Close")])),_:1,__:[2]})]),_:1})]),_:1})]),_:1}),a(O,{class:"ion-padding"},{default:i(()=>[s("div",Po,[s("div",Mo,[a(S,null,{default:i(()=>[(n(!0),l(q,null,G(e.content.item.item.result,(w,E)=>(n(),L(p,{size:"4",key:E},{default:i(()=>[a(S,null,{default:i(()=>[a(p,{size:"8"},{default:i(()=>[P(I(w.indicator.name),1)]),_:2},1024),a(p,{class:"bold",size:"0.5"},{default:i(()=>t[3]||(t[3]=[P(":")])),_:1,__:[3]}),a(p,{class:"bold",size:"2"},{default:i(()=>[P(I(w.value),1)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1})])])]),_:1})]),_:1},8,["is-open","keyboard-close"])}const Ao=Z(Lo,[["render",xo],["__scopeId","data-v-c2390e89"]]),Bo=j({name:"Menu",components:{LabTestsHistory:Hs,CheckInConfirmationModal:gs,IonContent:Ce,IonHeader:we,IonItem:z,IonList:le,IonMenu:Se,IonTitle:ke,IonToolbar:De,List:Ue,DynamicButton:ve,DashBox:ot,LabModal:Bs,LabViewResultsModal:Ao,SendToLabConfirmationModal:As},computed:{...ee(xe,["patient"]),...ee(Rt,["labResults"]),...ee(Ds,["activeProgram"]),...ee(yt,["investigations"]),...ee(ft,["patientsWaitingForVitals","patientsWaitingForConsultation","patientsWaitingForLab","patientsWaitingForDispensation"]),hasEnterResults(){return this.listOrders.some(e=>e.btn&&e.btn.includes("enter_results"))},hasPatientsWaitingForLab(){return Array.isArray(this.patientsWaitingForLab)&&this.patientsWaitingForLab.length>0}},props:{propOrders:{default:[]}},data(){return{iconsContent:fe,valueNumericArray:[],obsDatetime:[],graphIcon:St(["#006401"]),listIcon:kt(["#636363"]),displayGraph:!0,sendToLabModalOpen:!1,orders:[],userRoles:[],height:[],BMI:[],iconBg:{},activeWeight:[],activeHeight:[],activeBMI:[],listOrders:[],listResults:[],hasPatientsWaitingForLab:!1,listSeeMoreOrders:[],listSeeLessOrders:[],listSeeMoreResults:[],listSeeLessResults:[],listHeaderResults:"",labResultsContent:"",listHeaderOrders:"",service:"",openModal:!1,openResultsModal:!1,series:[{name:"",data:[]}]}},setup(){return{checkmark:Te,pulseOutline:Ne}},async mounted(){this.orders=this.propOrders,this.setListData(this.orders),this.service=new bs(this.patient.patientID),this.userRoles=await be.getUserRoles()},watch:{patientsWaitingForLab(e){this.hasPatientsWaitingForLab=e.some(t=>t.patient_id===this.patient.patientID)},propOrders:{handler(){this.orders=this.propOrders,this.setListData(this.orders)},deep:!0},$route:{immediate:!0,handler(){this.updateLabList(),this.fetchPatientLabStageData()}}},methods:{toggleSendToLabModal(){this.sendToLabModalOpen=!this.sendToLabModalOpen},async fetchPatientLabStageData(){var u;const e=localStorage.getItem("locationID");if(!e){Xe("Location ID could not be found. Please check your settings.");return}const t=ft();t.patientsWaitingForLab.length>=0&&await t.refresh(e),(u=this.patient)!=null&&u.patientID&&(this.hasPatientsWaitingForLab=t.patientsWaitingForLab.some(D=>D.patient_id===this.patient.patientID))},async handleSendToLabYes(){const e=localStorage.getItem("locationID");if(!e){Xe("Location ID could not be found. Please check your settings.");return}await _s.movePatientToNextStage(this.patient.patientID,"CONSULTATION","LAB",e,this.patient.visitID||this.patient.visit_id),await ft().refresh(e),this.closeSendToLabModal(),await ys.push("home"),it("Lab orders submitted successfully. You may now attend to other patients.")},async handleSendToLabNo(){this.toggleSendToLabModal()},closeSendToLabModal(){this.sendToLabModalOpen=!1},async updateLabList(){this.openModal=!1,this.orders=await Ie.getOrders(this.patient.patientID),this.setListData(this.orders),this.updateInvestigationWizard()},async updateInvestigationWizard(){this.orders=await Ie.getOrders(this.patient.patientID);const e=await this.orders.filter(t=>pe.toStandardHisFormat(pe.sessionDate())===pe.toStandardHisFormat(t.order_date));e.length>0?this.investigations[0].selectedData=e:this.investigations[0].selectedData=""},dismiss(){Dt.dismiss()},async voidLabOrder(e){await this.service.voidOrder(e.id,"Mistake entry"),this.updateLabList()},handleIcon(){},async openResultsForm(e){console.log(e.item.concept_id);const t=await $s.getTestIndicatorsWithID(e.item.concept_id);console.log({testIndicators:t});const u=[e.item,{validationStatus:"",data:{rowData:[{colData:[]}]}}];t.forEach(m=>{let b={inputHeader:m.name,value:"",colSize:3,id:m.concept_id,name:m.name,required:!0,eventType:"input",alertsErrorMassage:""};if(m.name=="RBS"&&(b={inputHeader:m.name,value:"",colSize:3,id:m.concept_id,name:m.name,required:!0,eventType:"input",alertsErrorMassage:"",validationFunctionName:"validateRBS",unit:"mg/dL"}),m.name=="FBS"&&(b={inputHeader:m.name,value:"",colSize:3,id:m.concept_id,name:m.name,required:!0,eventType:"input",alertsErrorMassage:"",validationFunctionName:"validateFBS",unit:"mg/dL"}),m.name=="MRDT"||m.name=="Tuberculosis program"||m.name=="Vdrl"||m.name=="Hepatitis B"||m.name=="Lam"||m.name=="CrAg"||m.name=="CD4 count"||m.name=="Leukocytes"||m.name=="Protein"||m.name=="Nitrite"||m.name=="Urine Ketones"||m.name=="HIV test"){let r=[];(m.name=="MRDT"||m.name=="Vdrl"||m.name=="Hepatitis B"||m.name=="CrAg"||m.name=="Lam")&&(r=[{id:"1",name:"Positive"},{id:"2",name:"Negative"},{id:"3",name:"Invalid"}]),m.name=="Tuberculosis program"&&(r=[{id:"1",name:"Scanty"},{id:"2",name:"Negative"},{id:"3",name:"1+"},{id:"4",name:"2+"},{id:"5",name:"3+"}]),m.name=="CD4 count"&&(r=[{id:"1",name:"below reference line"},{id:"2",name:"above reference line"}]),(m.name=="Leukocytes"||m.name=="Protein"||m.name=="Nitrite"||m.name=="Ketones"||m.name=="Urine Ketones")&&(r=[{id:"2",name:"Negative"},{id:"1",name:"Trace"},{id:"3",name:"1+"},{id:"4",name:"2+"},{id:"5",name:"3+"},{id:"6",name:"4+"}]),m.name=="HIV test"&&(r=[{id:"2",name:"Positive"},{id:"1",name:"Negative"},{id:"3",name:"Invalid"}]),b={inputHeader:m.name,icon:fe.search,value:"",name:"units",eventType:"input",alertsErrorMassage:"",isSingleSelect:!0,trackBy:"id",multiSelectData:r,id:m.concept_id,idName:"district_id"}}u[1].data.rowData[0].colData.push(b)}),Rt().setLabResults(u),this.openModal=!0,this.orders=await Ie.getOrders(this.patient.patientID)},async viewLabOrder(e){console.log("🚀 ~ openResultsForm ~ labResults:",e),this.labResultsContent=e,this.openResultsModal=!0},setActivClass(e){this.activeHeight="",this.activeBMI="",this.activeWeight="",e=="height"?this.activeHeight="_active":e=="weight"?this.activeWeight="_active":e=="BMI"&&(this.activeBMI="_active")},setListData(e){const t={containSize:2.1,btnSize:1};this.listHeaderResults=this.generateListHeader(["Date","Accession Number","Lab Test","Specimen","Result"],t),this.listHeaderOrders=this.generateListHeader(["Date","Accession Number","Lab Test","Specimen"]),this.listSeeMoreResults=this.generateListItems(e,"result",!0,t),this.listSeeLessResults=this.generateListItems(e,"result",!1,t),this.listSeeMoreOrders=this.generateListItems(e,"order",!0),this.listSeeLessOrders=this.generateListItems(e,"order",!1),this.listResults=[this.listHeaderResults,...this.listSeeLessResults],this.listOrders=[this.listHeaderOrders,...this.listSeeLessOrders]},generateListHeader(e,t={}){return{containSize:t==null?void 0:t.containSize,btnSize:t==null?void 0:t.btnSize,class:"",header:!0,minHeight:"--min-height: 25px;",display:e}},generateListItems(e,t,u,D={}){let m=0;return e.length>0?e.flatMap(b=>b.tests.flatMap(r=>{var v,h,c,p;let f=null;if(((v=r==null?void 0:r.result)==null?void 0:v.length)==1?f=(r==null?void 0:r.result)!=null?((h=r==null?void 0:r.result[0])==null?void 0:h.value_modifier)+((c=r==null?void 0:r.result[0])==null?void 0:c.value):null:((p=r==null?void 0:r.result)==null?void 0:p.length)>1&&(f=r==null?void 0:r.result),f==""&&console.log("🚀 ~ returnitem.tests.flatMap ~ result:",r),t==="result"&&f!==null||t==="order"&&f===null){const S={containSize:D==null?void 0:D.containSize,btnSize:D==null?void 0:D.btnSize,btn:t==="order"?["enter_results","attach","print","delete"]:["print","delete"],minHeight:"--min-height: 25px;",class:"",id:b.order_id,name:r.name,item:r,display:t=="order"?[pe.toStandardHisFormat(b.order_date),b.accession_number,r.name,b.specimen.name]:[pe.toStandardHisFormat(b.order_date),b.accession_number,r.name,b.specimen.name,f]};if(u||m<2)return m++,[S]}return[]})):[]},seeOrderStatus(e){e=="more"?this.listResults=[this.listHeaderResults,...this.listSeeMoreResults]:e=="less"&&(this.listResults=[this.listHeaderResults,...this.listSeeLessResults])},seeResultsStatus(e){e=="more"?this.listOrders=[this.listHeaderOrders,...this.listSeeMoreOrders]:e=="less"&&(this.listOrders=[this.listHeaderOrders,...this.listSeeLessOrders])}}}),$o={key:1,class:"modal_wrapper"},No={style:{"--background":"#fff"}},Ho={key:0,style:{"margin-top":"5px"}},Ro={key:1,style:{"margin-top":"5px"}},Vo={key:2,class:"modal_wrapper"},Fo={class:"scrollable-container"},To={key:0,style:{"margin-top":"5px"}},Uo={key:1,style:{"margin-top":"5px"}},qo={key:3},Wo={key:0},Go={key:1};function zo(e,t,u,D,m,b){const r=x("SendToLabConfirmationModal"),f=x("DashBox"),v=x("LabTestsHistory"),h=x("DynamicButton"),c=x("list"),p=x("LabModal"),S=x("LabViewResultsModal");return n(),l(q,null,[a(r,{closeModalFunc:e.closeSendToLabModal,onYes:e.handleSendToLabYes,onNo:e.handleSendToLabNo,isOpen:e.sendToLabModalOpen,title:"Confirm sending patient to lab"},null,8,["closeModalFunc","onYes","onNo","isOpen"]),e.listResults.length<1&&e.listOrders.length<1?(n(),L(f,{key:0,content:"No Investigations added "})):y("",!0),e.listResults.length>1?(n(),l("div",$o,[t[7]||(t[7]=s("div",{style:{"font-weight":"1000"}},"Lab investigations history",-1)),s("div",No,[a(v)]),e.listResults.length<=4&&e.listSeeMoreResults.length>=4?(n(),l("div",Ho,[a(h,{onClick:t[0]||(t[0]=O=>e.seeOrderStatus("more")),name:"Show More Lab Results",fill:"clear",iconSlot:"icon-only"})])):e.listResults.length>=5?(n(),l("div",Ro,[a(h,{onClick:t[1]||(t[1]=O=>e.seeOrderStatus("less")),name:"Show Less Lab Results",fill:"clear",iconSlot:"icon-only"})])):y("",!0)])):y("",!0),e.listOrders.length>1?(n(),l("div",Vo,[t[8]||(t[8]=s("div",{style:{"font-weight":"700"}},"Lab Orders",-1)),s("div",Fo,[a(c,{listData:e.listOrders.map(O=>({...O,disabledEnterResults:e.hasPatientsWaitingForLab&&e.activeProgram.program_id===14&&(e.userRoles==="Clinician"||e.userRoles==="Superuser")})),"onClicked:delete":e.voidLabOrder,"onClicked:results":e.openResultsForm},null,8,["listData","onClicked:delete","onClicked:results"])]),e.listOrders.length<=4&&e.listSeeMoreOrders.length>=4?(n(),l("div",To,[a(h,{onClick:t[2]||(t[2]=O=>e.seeResultsStatus("more")),name:"Show More Lab Orders",fill:"clear",iconSlot:"icon-only"})])):y("",!0),e.listOrders.length>=5?(n(),l("div",Uo,[a(h,{onClick:t[3]||(t[3]=O=>e.seeResultsStatus("less")),name:"Show Less Lab Orders",fill:"clear",iconSlot:"icon-only"})])):y("",!0)])):y("",!0),e.activeProgram.program_id==14&&e.hasEnterResults?(n(),l("div",qo,[e.hasPatientsWaitingForLab?(n(),l("div",Wo,[a(h,{class:"no-margin-left",fill:"solid",color:"danger",icon:"notification_icon",iconSlot:"icon-only",name:"Please enter the results once done, then send the patient back to consultation by clicking Finish button below."})])):(n(),l("div",Go,[a(h,{fill:"solid",color:"success",icon:e.iconsContent.plus,iconSlot:"icon-only",onClick:t[4]||(t[4]=O=>e.toggleSendToLabModal()),name:"Send to Lab"},null,8,["icon"])]))])):y("",!0),a(p,{popoverOpen:e.openModal,onSaved:e.updateLabList,onCloseModal:t[5]||(t[5]=O=>e.openModal=!1)},null,8,["popoverOpen","onSaved"]),a(S,{popoverOpen:e.openResultsModal,content:e.labResultsContent,onCloseModal:t[6]||(t[6]=O=>e.openResultsModal=!1)},null,8,["popoverOpen","content"])],64)}const Yo=Z(Bo,[["render",zo],["__scopeId","data-v-cd58a077"]]),Tt=[{checkboxBtnContent:{header:{name:"Medical history"},data:[{name:"Skull",value:"Skull",checked:!1}]}},{checkboxBtnContent:{header:{name:"Medical history"},data:[{name:"Mastoid",value:"Mastoid",checked:!1}]}},{checkboxBtnContent:{header:{name:"Medical history"},data:[{name:"ParaSinuses",value:"ParaSinuses",checked:!1}]}},{checkboxBtnContent:{header:{name:"Medical history"},data:[{name:"Optic Foramen",value:"PVD",checked:!1}]}},{checkboxBtnContent:{header:{name:"Medical history"},data:[{name:"Orbits",value:"Orbits",checked:!1}]}},{checkboxBtnContent:{header:{name:"Medical history"},data:[{name:"Nasal Bone",value:"Nasal Bone",checked:!1}]}},{checkboxBtnContent:{header:{name:"Medical history"},data:[{name:"Mandible",value:"Mandible",checked:!1}]}},{checkboxBtnContent:{header:{name:"Medical history"},data:[{name:"TMJs",value:"TMJs",checked:!1}]}},{checkboxBtnContent:{header:{name:"Medical history"},data:[{name:"Zygomatic",value:"Zygomatic",checked:!1}]}}],Ko=[{checkboxBtnContent:{header:{name:"Medical history"},data:[{name:"Neck",value:"Neck",checked:!1}]}}],jo=[{checkboxBtnContent:{header:{name:"Medical history"},data:[{name:"Chest",value:"Chest",checked:!1}]}},{checkboxBtnContent:{header:{name:"Medical history"},data:[{name:"Heart",value:"Heart",checked:!1}]}},{checkboxBtnContent:{header:{name:"Medical history"},data:[{name:"Sternum",value:"Sternum",checked:!1}]}},{checkboxBtnContent:{header:{name:"Medical history"},data:[{name:"Ribs",value:"Ribs",checked:!1}]}},{checkboxBtnContent:{header:{name:"Medical history"},data:[{name:"SCJ",value:"SCJ",checked:!1}]}}],Jo=[{checkboxBtnContent:{header:{name:"Medical history"},data:[{name:"Abdomen",value:"Abdomen",checked:!1}]}},{checkboxBtnContent:{header:{name:"Medical history"},data:[{name:"IVP",value:"IVP",checked:!1}]}}],Xo=[{checkboxBtnContent:{header:{name:"Medical history"},data:[{name:"Clavicle",value:"Clavicle",checked:!1}]}},{checkboxBtnContent:{header:{name:"Medical history"},data:[{name:"Shoulder",value:"Shoulder",checked:!1}]}},{checkboxBtnContent:{header:{name:"Medical history"},data:[{name:"Scapula",value:"Scapula",checked:!1}]}},{checkboxBtnContent:{header:{name:"Medical history"},data:[{name:"Humerus",value:"Humerus",checked:!1}]}},{checkboxBtnContent:{header:{name:"Medical history"},data:[{name:"Elbow",value:"Elbow",checked:!1}]}},{checkboxBtnContent:{header:{name:"Medical history"},data:[{name:"Forearm",value:"Forearm",checked:!1}]}},{checkboxBtnContent:{header:{name:"Medical history"},data:[{name:"Wrist",value:"Wrist",checked:!1}]}},{checkboxBtnContent:{header:{name:"Medical history"},data:[{name:"Hand",value:"Hand",checked:!1}]}},{checkboxBtnContent:{header:{name:"Medical history"},data:[{name:"Phalanges",value:"Phalanges",checked:!1}]}}],Qo=[{checkboxBtnContent:{header:{name:"Medical history"},data:[{name:"CSpine",value:"CSpine",checked:!1}]}},{checkboxBtnContent:{header:{name:"Medical history"},data:[{name:"TSpine",value:"TSpine",checked:!1}]}},{checkboxBtnContent:{header:{name:"Medical history"},data:[{name:"LSpine",value:"LSpine",checked:!1}]}},{checkboxBtnContent:{header:{name:"Medical history"},data:[{name:"SSpine",value:"SSpine",checked:!1}]}},{checkboxBtnContent:{header:{name:"Medical history"},data:[{name:"Coccyx",value:"Coccyx",checked:!1}]}}],Zo=[{checkboxBtnContent:{header:{name:"Medical history"},data:[{name:"Pelvis",value:"Pelvis",checked:!1}]}},{checkboxBtnContent:{header:{name:"Medical history"},data:[{name:"Sacroillac Joints",value:"Sacroillac Joints",checked:!1}]}},{checkboxBtnContent:{header:{name:"Medical history"},data:[{name:"Hip",value:"Hip",checked:!1}]}}],el=[{checkboxBtnContent:{header:{name:"Medical history"},data:[{name:"Femur",value:"Femur",checked:!1}]}},{checkboxBtnContent:{header:{name:"Medical history"},data:[{name:"Knee",value:"Knee",checked:!1}]}},{checkboxBtnContent:{header:{name:"Medical history"},data:[{name:"Patella",value:"Patella",checked:!1}]}},{checkboxBtnContent:{header:{name:"Medical history"},data:[{name:"Leg",value:"Leg",checked:!1}]}},{checkboxBtnContent:{header:{name:"Medical history"},data:[{name:"Ankle",value:"Ankle",checked:!1}]}},{checkboxBtnContent:{header:{name:"Medical history"},data:[{name:"Calcaneus",value:"Calcaneus",checked:!1}]}},{checkboxBtnContent:{header:{name:"Medical history"},data:[{name:"Foot",value:"Foot",checked:!1}]}},{checkboxBtnContent:{header:{name:"Medical history"},data:[{name:"Toe",value:"Toe",checked:!1}]}}],tl=Ja("RadiologyStore",{state:()=>({head:[...Tt],neck:[...Ko],chest:[...jo],abdomen:[...Jo],upper_extremity:[...Xo],spine:[...Qo],pelvis:[...Zo],lower_extremity:[...el]}),actions:{setOPDDiagnosis(e){this.head=e},getInitial(){return[...ye.cloneDeep(Tt)]}}}),al=["innerHTML"],sl={class:"scrollable-container"},nl={key:0,class:"form-section"},il={key:1,class:"form-section"},ol={key:2,class:"form-section"},ll={key:3,class:"form-section"},rl={key:4,class:"form-section"},dl={key:5,class:"form-section"},ul={key:6,class:"form-section"},cl={key:7,class:"form-section"},ml=j({__name:"RadiologyInvestigation",setup(e){const t=tl(),{head:u,neck:D,chest:m,abdomen:b,upper_extremity:r,spine:f,pelvis:v,lower_extremity:h}=Ut(t),c=d(fe),p=d([]),S=(B,w,E)=>{document.querySelectorAll("#".concat(B," path")).forEach(C=>{C.classList.toggle("white-fill")}),document.querySelectorAll("#".concat(w," line")).forEach(C=>{C.classList.toggle("dark-green-stroke")}),document.querySelectorAll("#".concat(w," rect")).forEach(C=>{C.classList.toggle("bright-green-fill"),C.classList.toggle("dark-green-stroke")}),document.querySelectorAll("#".concat(w," path")).forEach(C=>{C.classList.toggle("dark-green-fill")}),document.querySelectorAll("#".concat(w," circle")).forEach(C=>{C.classList.toggle("bright-green-fill")});const g=p.value.findIndex(C=>C.id===E);g>=0?p.value.splice(g,1):p.value.unshift({id:E,active:!0})},O=()=>{const B=document.getElementById("SPINE");B.style.display==="none"||B.style.display==""?B.style.display="block":B.style.display="none",S("SPINE","SPINE_LABEL-2","spine")};return Qe(()=>{const B=document.getElementById("HEAD");B&&B.addEventListener("click",()=>{S("HEAD","LABEL-6","head")});const w=document.getElementById("NECK");w&&w.addEventListener("click",()=>{S("NECK","LABEL-5","neck")});const E=document.getElementById("CHEST");E&&E.addEventListener("click",()=>{S("CHEST","LABEL-4","chest")});const g=document.getElementById("ABDOMEN_LABEL");g&&g.addEventListener("click",()=>{const V=document.getElementById("ABDOMEN-2");V.style.display==="none"||V.style.display==""?V.style.display="block":V.style.display="none",S("ABDOMEN","ABDOMEN_LABEL-2","abdomen")});const C=document.getElementById("UPPER_EXTRMITY");C&&C.addEventListener("click",()=>{S("UPPER_EXTRMITY","LABEL-3","upper_extremity")});const te=document.getElementById("SPINE"),ae=document.getElementById("SPINE_LABEL"),$=document.getElementById("LOWER_SPINE_INACTIVE");te&&te.addEventListener("click",()=>{O()}),ae&&ae.addEventListener("click",()=>{O()}),$&&$.addEventListener("click",()=>{O()});const H=document.getElementById("PELVIS");H&&H.addEventListener("click",()=>{S("PELVIS","LABEL-2","pelvis")});const R=document.getElementById("LOWER_EXTREMITY");R&&R.addEventListener("click",()=>{S("LOWER_EXTREMITY","LABEL","lower_extremity")})}),(B,w)=>{const E=x("ion-col"),g=x("ion-row");return n(),L(g,null,{default:i(()=>[a(E,{size:"7"},{default:i(()=>[s("div",{innerHTML:c.value.full_body_sk},null,8,al)]),_:1}),a(E,{size:"5",class:"form-column"},{default:i(()=>[s("div",sl,[(n(!0),l(q,null,G(p.value,C=>(n(),l(q,null,[C.id==="head"?(n(),l("div",nl,[w[0]||(w[0]=s("h6",null,"Body Part: Head",-1)),a(ie,{contentData:o(u)},null,8,["contentData"])])):C.id==="neck"?(n(),l("div",il,[w[1]||(w[1]=s("h6",null,"Body Part: Neck",-1)),a(ie,{contentData:o(D)},null,8,["contentData"])])):C.id==="chest"?(n(),l("div",ol,[w[2]||(w[2]=s("h6",null,"Body Part: Chest",-1)),a(ie,{contentData:o(m)},null,8,["contentData"])])):C.id==="abdomen"?(n(),l("div",ll,[w[3]||(w[3]=s("h6",null,"Body Part: Abdomen",-1)),a(ie,{contentData:o(b)},null,8,["contentData"])])):C.id==="upper_extremity"?(n(),l("div",rl,[w[4]||(w[4]=s("h6",null,"Body Part: Upper Extremity",-1)),a(ie,{contentData:o(r)},null,8,["contentData"])])):C.id==="spine"?(n(),l("div",dl,[w[5]||(w[5]=s("h6",null,"Body Part: Spine",-1)),a(ie,{contentData:o(f)},null,8,["contentData"])])):C.id==="pelvis"?(n(),l("div",ul,[w[6]||(w[6]=s("h6",null,"Body Part: Pelvis",-1)),a(ie,{contentData:o(v)},null,8,["contentData"])])):C.id==="lower_extremity"?(n(),l("div",cl,[w[7]||(w[7]=s("h6",null,"Body Part: Lower Extremity",-1)),a(ie,{contentData:o(h)},null,8,["contentData"])])):y("",!0)],64))),256))])]),_:1})]),_:1})}}}),pl=Z(ml,[["__scopeId","data-v-4e8419f9"]]),hl=j({name:"Menu",mixins:[Es],components:{IonContent:Ce,IonHeader:we,IonItem:z,IonList:le,IonMenu:Se,IonTitle:ke,IonToolbar:De,IonInput:nt,IonPopover:Gt,DashBox:ot,SelectionPopover:Xt,BasicInputField:ge,BasicForm:ie,List:Ue,DynamicButton:ve,labOrderResults:Yo,RadiologyInvestigation:pl},data(){return{iconsContent:fe,no_item:!1,search_item:!1,display_item:!1,addItemButton:!0,selectedText:"",testResult:"",test:"",labOrders:"",filteredSpecimen:"",testData:[],popoverOpen:!1,labOrderStatus:!1,event:"",specimen:"",radiologyOrdersStatus:!1,otherOrdersStatus:!1}},setup(){return{checkmark:Te,pulseOutline:Ne}},computed:{...ee(yt,["investigations"]),...ee(xe,["patient"]),inputFields(){return this.investigations[0].data.rowData[0].colData}},watch:{investigations:{handler(){this.setDashedBox()},deep:!0},patient:{async handler(){this.labOrders=await Ie.getOrders(this.patient.patientID)},deep:!0},$route:{async handler(){await this.getTests()},deep:!0}},async mounted(){await this.getTests(),this.updateInvestigationsStores(),this.setDashedBox(),this.updateInvestigationWizard()},methods:{async getTests(){let e;be.getUseIndexDBStatus()&&be.getModsStatus()?e=await ks("testTypes"):e=await Ie.getTestTypes(),F(this.investigations,"test","multiSelectData",e)},async onRefresh(){try{const e=await Ie.getTestTypesViaDirectAPICall();F(this.investigations,"test","multiSelectData",e),it("Test Types Selection list has been updated")}catch(e){Xe("Could not fetch test types")}},toggleLabOrderStatus(){this.labOrderStatus=!this.labOrderStatus},async updateInvestigationWizard(){this.labOrders=await Ie.getOrders(this.patient.patientID);const e=await this.labOrders.filter(t=>pe.toStandardHisFormat(pe.sessionDate())===pe.toStandardHisFormat(t.order_date));e.length>0?this.investigations[0].selectedData=e:this.investigations[0].selectedData=""},async updateInvestigationsStores(){await this.updateInvestigationWizard(),yt().setInvestigations(this.investigations)},displayInputFields(e=!0){this.testResult="",this.selectedText="",this.no_item=!1,this.addItemButton=!e,this.search_item=e},async validateRowData(){return Vt(this.investigations)},async checkTest(){return await this.isNameInData(this.inputFields[0].value.name,await this.investigations[0].selectedData)?(F(this.investigations,"test","alertsErrorMassage","Lab order already selected"),!1):(F(this.investigations,"test","alertsErrorMassage",""),!0)},async addNewRow(){Vt(this.investigations)&&await this.checkTest()&&(await this.saveTest(),this.investigations[0].data.rowData[0].colData[0].value="",this.investigations[0].data.rowData[0].colData[1].value="",this.search_item=!1,this.display_item=!0,this.addItemButton=!0),this.updateInvestigationWizard()},isNameInData(e,t){for(let u of t)for(let D of u.tests)if(D.name===e)return!0;return!1},async saveTest(){await new Ns().postActivities(this.patient.patientID,[{concept_id:this.inputFields[0].value.concept_id,name:this.inputFields[0].value.name,specimen:this.inputFields[1].value.name,reason:"Routine",specimenConcept:await X.getConceptID(this.inputFields[1].value.name,!0)}]),F(this.investigations,"specimen","disabled",!0),this.labOrders=await Ie.getOrders(this.patient.patientID)},async handleInputData(e){e.inputHeader=="Test"&&this.checkTest(),F(this.investigations,"specimen","alertsErrorMassage",""),e.inputHeader=="Test"&&e.value&&(this.specimen=await Ie.getSpecimens(e.value.name),this.specimen.length==1?(F(this.investigations,"specimen","value",this.specimen[0]),F(this.investigations,"specimen","disabled",!0)):(F(this.investigations,"specimen","value",""),F(this.investigations,"specimen","disabled",!1)),F(this.investigations,"specimen","multiSelectData",this.specimen))},async filterTest(e){return await this.labOrders.filter(t=>t.name.toLowerCase().includes(e.toLowerCase()))},async filterSpecimen(e){var t;return(t=this.specimen[0])!=null&&t.name&&e?await this.specimen.filter(u=>u==null?void 0:u.name.toLowerCase().includes(e.toLowerCase())):[]},setTest(e){this.selectedText=e.name,this.inputFields[1].inputHeader=="Test"?this.investigations[0].data.rowData[0].colData[0].value=e.name:this.investigations[0].data.rowData[0].colData[1].value=e.name,this.updateInvestigationsStores()},setDashedBox(){(this.inputFields[1].value||this.inputFields[0].value)&&(this.addItemButton=!1,this.search_item=!0,this.no_item=!1),this.investigations[0].selectedData.length>0?(this.display_item=!0,this.no_item=!1):this.search_item||(this.no_item=!0)}}}),fl={class:"ion-padding",slot:"content",style:{"margin-bottom":"125px"}},vl={key:0},gl={class:"ion-padding",slot:"content"};function _l(e,t,u,D,m,b){const r=x("ion-label"),f=x("ion-item"),v=x("labOrderResults"),h=x("basic-form"),c=x("DynamicButton"),p=x("ion-row"),S=x("ion-accordion"),O=x("ion-accordion-group"),B=x("RadiologyInvestigation");return n(),l(q,null,[a(O,{ref:"accordionGroup",class:"previousView",value:"first"},{default:i(()=>[a(S,{value:"first","toggle-icon-slot":"start",class:"custom_card"},{default:i(()=>[a(f,{slot:"header",color:"light"},{default:i(()=>[a(r,{class:"previousLabel"},{default:i(()=>t[2]||(t[2]=[P("Lab Investigations")])),_:1,__:[2]})]),_:1}),s("div",fl,[s("span",null,[a(v,{propOrders:e.labOrders},null,8,["propOrders"])]),e.search_item?(n(),l("span",vl,[a(h,{contentData:e.investigations,"onUpdate:selected":e.handleInputData,"onUpdate:inputValue":e.handleInputData,"onClicked:button":e.addNewRow,onRefresh:e.onRefresh},null,8,["contentData","onUpdate:selected","onUpdate:inputValue","onClicked:button","onRefresh"])])):y("",!0),e.addItemButton&&e.userRole!="Lab"?(n(),L(p,{key:1,style:{"margin-top":"10px"}},{default:i(()=>[a(c,{fill:"clear",icon:e.iconsContent.plus,iconSlot:"icon-only","onClicked:btn":t[0]||(t[0]=w=>e.displayInputFields()),name:"Add new test"},null,8,["icon"])]),_:1})):y("",!0),e.search_item?(n(),L(p,{key:2},{default:i(()=>[a(c,{fill:"clear",icon:e.iconsContent.redXclose,iconSlot:"icon-only","onClicked:btn":t[1]||(t[1]=w=>e.displayInputFields(!1)),name:"cancel"},null,8,["icon"])]),_:1})):y("",!0)])]),_:1})]),_:1},512),e.userRole!="Lab"?(n(),L(O,{key:0,ref:"accordionGroup",class:"previousView"},{default:i(()=>[a(S,{value:"first","toggle-icon-slot":"start",class:"custom_card"},{default:i(()=>[a(f,{slot:"header",color:"light"},{default:i(()=>[a(r,{class:"previousLabel"},{default:i(()=>t[3]||(t[3]=[P("Radiology Investigation")])),_:1,__:[3]})]),_:1}),s("div",gl,[a(B)])]),_:1})]),_:1},512)):y("",!0),e.userRole!="Lab"?(n(),L(O,{key:1,ref:"accordionGroup",class:"previousView"},{default:i(()=>[a(S,{value:"first","toggle-icon-slot":"start",class:"custom_card"},{default:i(()=>[a(f,{slot:"header",color:"light"},{default:i(()=>[a(r,{class:"previousLabel"},{default:i(()=>t[4]||(t[4]=[P("Other Investigation")])),_:1,__:[4]})]),_:1}),t[5]||(t[5]=s("div",{class:"ion-padding",slot:"content"},null,-1))]),_:1,__:[5]})]),_:1},512)):y("",!0)],64)}const wr=Z(hl,[["render",_l],["__scopeId","data-v-1ea6464c"]]),yl={class:"allergies-section"},bl={class:"allergies-container"},Dl={key:0,class:"allergies-grid"},kl={key:1,class:"no-allergies"},Sl={class:"ion-padding",slot:"content"},wl={key:0},Cl={class:"previousSecDrgs"},Il={class:"ion-padding",slot:"content"},Ol={class:"previousSecDrgs"},El={class:"medication-section"},Ll={class:"medication-content"},Pl={key:0,class:"add-medication-form"},Ml={class:"form-group"},xl={class:"option-label"},Al={key:0,class:"error-message"},Bl={class:"form-row"},$l={class:"form-group"},Nl={key:0,class:"error-message"},Hl={class:"form-group"},Rl={key:0,class:"error-message"},Vl={class:"form-group"},Fl={key:0,class:"error-message"},Tl={class:"action-buttons"},Ul={class:"notes-section"},ql={class:"notes-content"},Wl={class:"notes-input-container"},Gl={class:"ion-padding",slot:"content"},zl={class:"notes-timeline"},Yl={class:"note-date"},Kl={class:"note-content"},jl={class:"ion-padding",slot:"content"},Jl={class:"note-date"},Xl={class:"note-content"},Ql=j({watch:{},name:"xxxComponent"}),Zl=j({...Ql,setup(e){const t=fe,u=Rs,D=d(!1),m=d(!1),b=d(!0),r=d(0),f=d(""),v=d(!1),h=d(""),c=d(!1),p=d(),S=d(!1),O=d(""),B=d(""),w=d(""),E=d(""),g=d(""),C=d("");d(!1);const te="Add new medication",ae="clear";d("Show more medications");const $=Ve(),H=jt(),R=me(()=>H.selectedMedicalAllergiesList),V=me(()=>$.selectedMedicalDrugsList),Q=me(()=>$.partialOPDdrugList),se=me(()=>$.nonPharmalogicalTherapyAndOtherNotes),He=["first","second","third"],lt=d(),Ze=d(),qe=d(),Ae=d(!1),et=d(!1),tt=d(!1),We=d("Show more notes"),Re=d("Show more allergies"),A=d(),N=d(),T=d(),ne=me(()=>$.editingDrugItem),Qt=d("Select a route"),rt=d(!1),Zt=d("Select frequency"),dt=d(!1),ea=d("Select drug"),ut=d(!1),re=d(),de=d(),Ee=d(),Ge=d([]),ta=d([{concept_id:11797,name:"Buccal",concept_name_id:null,id:1769},{concept_id:11794,name:"Intradermal",concept_name_id:null,id:6284},{concept_id:11795,name:"Intramuscular (IM)",concept_name_id:null,id:6285},{concept_id:11799,name:"Intraosseous",concept_name_id:null,id:6286},{concept_id:11793,name:"Intravenous (IV)",concept_name_id:null,id:6295},{concept_id:3327,name:"Oral",concept_name_id:null,id:8686},{concept_id:11800,name:"Other method of prescription",concept_name_id:null,id:8920},{concept_id:11792,name:"Rectally",concept_name_id:null,id:10785},{concept_id:11798,name:"Subcutaneous",concept_name_id:null,id:12342},{concept_id:11796,name:"Sublingual",concept_name_id:null,id:12344},{concept_id:11792,name:"Rectally",concept_name_id:null,id:14078},{concept_id:11793,name:"Intravenous (IV)",concept_name_id:null,id:14079},{concept_id:11794,name:"Intradermal",concept_name_id:null,id:14080},{concept_id:11795,name:"Intramuscular (IM)",concept_name_id:null,id:14081},{concept_id:11796,name:"Sublingual",concept_name_id:null,id:14082},{concept_id:11797,name:"Buccal",concept_name_id:null,id:14083},{concept_id:11798,name:"Subcutaneous",concept_name_id:null,id:14084},{concept_id:11799,name:"Intraosseous",concept_name_id:null,id:14085},{concept_id:11800,name:"Other method of prescription",concept_name_id:null,id:14086}]),aa=me(()=>Ge.value.length?Ge.value:ta.value);function sa(k){re.value=k}async function na(){return await Vs()}async function ia(k=5,_=1e3){let U=0;for(;U<k&&(Ge.value=await na(),!(Ge.value.length>0));)U++,await new Promise(Y=>setTimeout(Y,_));Ge.value.length===0&&console.warn("Failed to fetch route list after maximum retries.")}Qe(async()=>{const k=new Ls,{previousDrugPrescriptions:_,previousClinicalNotes:U,previousDrugAllergies:Y}=await k.getPatientEncounters();lt.value=_,Ze.value=Object.entries(U)[0];const[,...M]=Object.entries(U);qe.value=M,A.value=Object.entries(Y)[0];const[,...W]=Object.entries(Y);N.value=W,await ia()}),$e(()=>O.value,async k=>{wt()}),$e(()=>B.value,async k=>{ua()}),$e(()=>w.value,async k=>{Ct()});function oa(){if(ye.isEmpty(re.value)==!0)return rt.value=!0,!1;if(ye.isEmpty(re.value)==!1)return rt.value=!1,!0}function la(){if(ye.isEmpty(de.value)==!0)return dt.value=!0,!1;if(ye.isEmpty(de.value)==!1)return dt.value=!1,!0}function ra(){if(ye.isEmpty(Ee.value)==!0)return ut.value=!0,!1;if(ye.isEmpty(Ee.value)==!1)return ut.value=!1,!0}function da(){b.value=!b.value,D.value=!0,c.value=!1,S.value=!1}async function wt(){const k=await ha();return console.log({drugNameExists:k}),k?v.value=!1:(f.value="please select a valid drug name",v.value=!0),v.value}async function ua(){return Et(B.value)?c.value=!1:(h.value="please enter a number",c.value=!0),c.value}async function Ct(){return Et(w.value)?S.value=!1:(p.value="please enter a number",S.value=!0),S.value}async function It(){const k=await wt(),_=await Ct(),U=la(),Y=ra(),M=oa();return!k&&!_&&U==!0&&Y==!0&&M==!0}function ca(k){de.value=k}async function Ot(){const k=()=>T.value.dose_strength!=null&&T.value.dose_strength?Math.trunc(T.value.dose_strength):1;if(ne.value!==null){if(!await It()){je("Please enter correct data values",4e3);return}const U=be.getSessionDate(),Y=Lt(U,parseInt(w.value));let M=!1;ct(T.value)==!0&&(M=!0);const W={drugName:O.value,dose:k(),frequency:de.value.label,frequency_code:de.value.code,duration:w.value,prescription:Y,drug_id:C.value,units:g.value,route_concept_id:re.value.concept_id,route_name:re.value.name,highlightbackground:M},ue=Ve();console.log(ue.setSelectedMedicalDrugsList([W])),ue.editingDrugItem=null,b.value=!0}else{if(!await It()){je("Please enter correct data values",4e3);return}ka();const U=be.getSessionDate(),Y=Lt(U,parseInt(w.value));let M=!1;ct(T.value)==!0&&(M=!0);const W={drugName:O.value,dose:k(),frequency:de.value.label,frequency_code:de.value.code,duration:w.value,prescription:Y,drug_id:C.value,units:g.value,route_concept_id:re.value.concept_id,route_name:re.value.name,highlightbackground:M};Ve().setSelectedMedicalDrugsList([W])}C.value="",O.value="",B.value="",de.value=null,w.value="",E.value="",r.value++,Ee.value=null,re.value=null}async function ma(k){const _=k,M=await Ft.getOfflineOPDDrugs({name:_,page:1,page_size:10});M.map(W=>({label:W.name,value:W.name,other:W})),$.setPartialOPDdrugList(M)}async function pa(k){let _;k.target===void 0?_=k:_=k.target.value;const M=await Ft.getOPDDrugs({name:encodeURIComponent(_),page:1,page_size:10});return M.map(W=>({label:W.name,value:W.name,other:W})),M}function ct(k){const _=[];return R.value.forEach(Y=>{Y.selected&&_.push(Y.concept_id)}),fa([k],_)==!0?(je("Client is allergic to the selected medication",4e3),!0):!1}async function ha(){return(await pa(O.value)).length>0?O.value.length!=0:!1}function fa(k,_){try{return k.some(U=>_.includes(U.concept_id))}catch(U){return!1}}function va(k){k&&(O.value=k.name,C.value=k.drug_id,g.value=k.units,T.value=k,ct(k))}function ga(k){const _=V.value[k],U=Ve();U.removeDrugById(_.drug_id),U.editingDrugItem=_,C.value="",O.value="",B.value="",de.value=null,w.value="",E.value="",Ee.value=null,re.value=null,C.value=_.drug_id,O.value=_.drugName,B.value=_.dose,de.value={label:_.frequency,code:_.frequency_code},w.value=_.duration,E.value=_.prescription;const Y=Q.value.find(M=>M.name===_.drugName);Y&&(Ee.value=Y),re.value={concept_id:_.route_concept_id,name:_.route_name},b.value=!1,r.value++}function _a(){if(ne.value!==null){C.value="",O.value="",B.value="",de.value=null,w.value="",E.value="",Ee.value=null,re.value=null;const k=Ve();k.setSelectedMedicalDrugsList([ne.value]),k.editingDrugItem=null}b.value=!0,r.value++}function ya(k){V.value.splice(k,1),r.value++,je("you have removed a drug from list",6e3)}function ba(k){let _=k.target.value;Da(_)}function Da(k){Ve().setNonPharmalogicalTherapyAndOtherNotes(k)}function Et(k){return/^[0-9]+$/.test(k)}function Lt(k,_){const U=new Date(k);U.setDate(U.getDate()+_);const Y=U.getFullYear(),M=String(U.getMonth()+1).padStart(2,"0"),W=String(U.getDate()).padStart(2,"0");return"".concat(Y,"-").concat(M,"-").concat(W)}function ka(){D.value=!1,m.value=!0,b.value=!0}function Sa(k){He.filter(U=>U!==k.detail.value);const _=k.detail.value;_!==void 0?_=="third"&&(We.value="Show less notes",et.value=!Ae.value):(We.value="Show more notes",et.value=!Ae.value)}function wa(k){He.filter(U=>U!==k.detail.value);const _=k.detail.value;_!==void 0?_=="fith"&&(Re.value="Show less allegies",tt.value=!Ae.value):(Re.value="Show more allegies",tt.value=!Ae.value)}function Pt(k){return k[1]}function Ca(k){(k.key==="Enter"||k.key==="ArrowDown")&&(k.preventDefault(),Ot())}const Le=me(()=>[{showAddItemButton:!0,addItemButton:!0,name:ne.value!==null?"Update":"ADD",btnFill:"clear",fn:Ot},{showAddItemButton:!0,addItemButton:!0,name:"CANCEL",btnFill:"clear",fn:_a}]);return(k,_)=>{const U=x("ion-chip"),Y=x("ion-text");return n(),L(o(le),null,{default:i(()=>[s("div",yl,[a(o(K),{class:"section-title"},{default:i(()=>[a(o(Fe),{icon:o(Wt),class:"alert-icon"},null,8,["icon"]),a(o(K),null,{default:i(()=>_[9]||(_[9]=[P("Allergies (Medication, Healthcare items, Environment and Food)")])),_:1,__:[9]})]),_:1}),s("div",bl,[R.value.some(M=>M.selected)?(n(),l("div",Dl,[(n(!0),l(q,null,G(R.value,(M,W)=>Xa((n(),l("div",{key:W,class:"allergy-item"},[a(U,{class:"allergy-chip",color:"danger"},{default:i(()=>[a(o(K),null,{default:i(()=>[P(I(M.name),1)]),_:2},1024),a(o(Fe),{icon:o(Qa)},null,8,["icon"])]),_:2},1024)])),[[Za,M.selected]])),128))])):(n(),l("div",kl,[a(Y,{style:{"font-size":"16px","font-weight":"600",color:"#9c8011"}},{default:i(()=>_[10]||(_[10]=[P("No allergies recorded")])),_:1,__:[10]})])),a(o(Ke),{ref:"accordionGroup",class:"previousView"},{default:i(()=>[a(o(_e),{value:"fourth","toggle-icon-slot":"start",style:{"border-radius":"10px","background-color":"#fff"}},{default:i(()=>[a(o(z),{slot:"header",color:"light"},{default:i(()=>[a(o(K),{class:"previousLabel"},{default:i(()=>_[11]||(_[11]=[P("Documented allergies timeline")])),_:1,__:[11]})]),_:1}),s("div",Sl,[(n(!0),l(q,null,G(A.value,(M,W)=>(n(),l("div",{class:"ionLbltp",key:W},[W==1?(n(),l("div",wl,[s("div",null,[a(o(K),{class:"previousLabelDate"},{default:i(()=>[P(I(M[0].date),1)]),_:2},1024)]),(n(!0),l(q,null,G(M,(ue,Be)=>(n(),l("div",{key:Be},[s("div",Cl,[a(o(le),null,{default:i(()=>[a(o(K),{class:"notes_p"},{default:i(()=>[P(I(ue.value),1)]),_:2},1024)]),_:2},1024)])]))),128))])):y("",!0)]))),128)),a(o(Ke),{onIonChange:wa},{default:i(()=>[a(o(_e),{value:"fith","toggle-icon-slot":"start",style:{"border-radius":"10px","background-color":"#fff"}},{default:i(()=>[a(o(z),{slot:"header",color:"light"},{default:i(()=>[a(o(K),{class:"",color:"primary"},{default:i(()=>[P(I(Re.value),1)]),_:1})]),_:1}),s("div",Il,[(n(!0),l(q,null,G(N.value,(M,W)=>(n(),l("div",{class:"ionLbltp",key:W},[s("div",null,[a(o(K),{class:"previousLabelDate"},{default:i(()=>[P(I(M[0]),1)]),_:2},1024)]),(n(!0),l(q,null,G(Pt(M),(ue,Be)=>(n(),l("div",{key:Be},[s("div",Ol,[a(o(le),null,{default:i(()=>[a(o(K),{class:"notes_p"},{default:i(()=>[P(I(ue.value),1)]),_:2},1024)]),_:2},1024)])]))),128))]))),128))])]),_:1})]),_:1})])]),_:1})]),_:1},512)])]),s("div",El,[a(o(z),{lines:"none",class:"section-header"},{default:i(()=>[a(o(Fe),{icon:o(bt),class:"section-icon"},null,8,["icon"]),a(o(K),{class:"section-title",style:{"margin-top":"12px"}},{default:i(()=>_[12]||(_[12]=[P("Medication")])),_:1,__:[12]})]),_:1}),s("div",Ll,[(n(),L(Ps,{_selectedMedicalDrugsList:V.value,onEditItem:ga,onRemoveItem:ya,key:r.value,class:"medication-list"},null,8,["_selectedMedicalDrugsList"])),b.value?y("",!0):(n(),l("div",Pl,[s("div",Ml,[_[13]||(_[13]=s("label",{class:"input-label"},"Medication",-1)),a(o(Je),{modelValue:Ee.value,"onUpdate:modelValue":[_[0]||(_[0]=M=>Ee.value=M),_[1]||(_[1]=M=>va(M))],options:Q.value,searchable:!0,"close-on-select":!0,"show-labels":!1,placeholder:"Select medication",label:"name","track-by":"drug_id",onSearchChange:_[2]||(_[2]=M=>ma(M))},{option:i(M=>[s("div",xl,I(M.option.name),1)]),_:1},8,["modelValue","options"]),ut.value?(n(),l("div",Al,I(ea.value),1)):y("",!0)]),s("div",Bl,[s("div",$l,[_[14]||(_[14]=s("label",{class:"input-label"},"Route",-1)),a(o(Je),{modelValue:re.value,"onUpdate:modelValue":[_[3]||(_[3]=M=>re.value=M),_[4]||(_[4]=M=>sa(M))],options:aa.value,searchable:!0,"close-on-select":!0,"show-labels":!1,placeholder:"Select route",label:"name","track-by":"concept_id"},null,8,["modelValue","options"]),rt.value?(n(),l("div",Nl,I(Qt.value),1)):y("",!0)]),s("div",Hl,[_[15]||(_[15]=s("label",{class:"input-label"},"Frequency",-1)),a(o(Je),{modelValue:de.value,"onUpdate:modelValue":[_[5]||(_[5]=M=>de.value=M),_[6]||(_[6]=M=>ca(M))],options:o(u),searchable:!0,"close-on-select":!0,"show-labels":!1,placeholder:"Select frequency",label:"label","track-by":"code"},null,8,["modelValue","options"]),dt.value?(n(),l("div",Rl,I(Zt.value),1)):y("",!0)]),s("div",Vl,[_[16]||(_[16]=s("label",{class:"input-label"},"Duration (days)",-1)),a(o(nt),{modelValue:w.value,"onUpdate:modelValue":_[7]||(_[7]=M=>w.value=M),type:"number",inputmode:"numeric",pattern:"[0-9]*",fill:"outline",placeholder:"Enter duration",onKeydown:Ca},null,8,["modelValue"]),S.value?(n(),l("div",Fl,I(p.value),1)):y("",!0)])]),s("div",Tl,[Le.value[0].addItemButton?(n(),L(ve,{key:0,name:Le.value[0].name,fill:Le.value[0].btnFill,icon:o(zt),"onClicked:btn":Le.value[0].fn,class:"save-button"},null,8,["name","fill","icon","onClicked:btn"])):y("",!0),Le.value[1].addItemButton?(n(),L(ve,{key:1,name:Le.value[1].name,fill:Le.value[1].btnFill,icon:o(Yt),"onClicked:btn":Le.value[1].fn,class:"cancel-button"},null,8,["name","fill","icon","onClicked:btn"])):y("",!0)])])),b.value?(n(),L(ve,{key:1,name:te,fill:ae,icon:o(qt),"onClicked:btn":da,class:"add-new-button"},null,8,["icon"])):y("",!0)])]),s("div",Ul,[a(o(z),{lines:"none",class:"section-header"},{default:i(()=>[a(o(Fe),{icon:o(es),class:"section-icon"},null,8,["icon"]),a(o(K),{class:"section-title"},{default:i(()=>_[17]||(_[17]=[P("Non-pharmacological therapy and other notes")])),_:1,__:[17]})]),_:1}),s("div",ql,[a(Ms,{class:"intervention-component"}),s("div",Wl,[a(o(z),{class:"notes-input-item"},{default:i(()=>[a(o(Fe),{slot:"start",icon:o(t).editPen,class:"edit-icon","aria-hidden":"true"},null,8,["icon"]),a(o(ts),{modelValue:se.value,"onUpdate:modelValue":_[8]||(_[8]=M=>se.value=M),onIonInput:ba,placeholder:"Enter notes here...","auto-grow":!0,class:"notes-textarea",fill:"outline",style:{"--padding-start":"16px"}},null,8,["modelValue"])]),_:1})]),a(o(Ke),{ref:"accordionGroup",class:"previous-notes"},{default:i(()=>[a(o(_e),{value:"fourth","toggle-icon-slot":"start"},{default:i(()=>[a(o(z),{slot:"header",color:"light",class:"previous-notes-header"},{default:i(()=>[a(o(K),null,{default:i(()=>_[18]||(_[18]=[P("Previous visit notes")])),_:1,__:[18]})]),_:1}),s("div",Gl,[s("div",zl,[k.index===1?(n(!0),l(q,{key:0},G(Ze.value,(M,W)=>(n(),l("div",{key:W,class:"note-entry"},[(n(!0),l(q,null,G(M,(ue,Be)=>(n(),l("div",{key:Be},[s("div",Yl,I(ue.date),1),s("div",Kl,I(ue.notes),1)]))),128))]))),128)):y("",!0),a(o(Ke),{onIonChange:Sa},{default:i(()=>[a(o(_e),{value:"third","toggle-icon-slot":"start"},{default:i(()=>[a(o(z),{slot:"header",color:"light",class:"show-more-header"},{default:i(()=>[a(o(K),{color:"primary"},{default:i(()=>[P(I(We.value),1)]),_:1})]),_:1}),s("div",jl,[(n(!0),l(q,null,G(qe.value,(M,W)=>(n(),l("div",{key:W,class:"note-entry"},[(n(!0),l(q,null,G(Pt(M),(ue,Be)=>(n(),l("div",{key:Be},[s("div",Jl,I(ue.date),1),s("div",Xl,I(ue.notes),1)]))),128))]))),128))])]),_:1})]),_:1})])])]),_:1})]),_:1},512)])])]),_:1})}}}),Cr=Z(Zl,[["__scopeId","data-v-4ccce574"]]),er=j({name:"xxxComponent"}),tr=j({...er,emits:["dataSaved"],setup(e,{emit:t}){const u=d(),D=d("gurdian phone number");d(!0),d(!0);const m=d(!0),b=d(),r=d();Qe(async()=>{et()});const f=[{placeHolder:{default:"Enter time of death if known"},property_name:"timeOfDeath",dataHandler:C,dataValue:d(),show_error:d(!1),error_message:"Time required",type:"time",skip_validation:!1},{placeHolder:{default:"Enter time arrived"},property_name:"timeArrived",dataHandler:te,dataValue:d(),show_error:d(!1),error_message:"Time required",type:"time",skip_validation:!1},{placeHolder:{default:"Enter time confirming death"},property_name:"timeOfDeathConfirmation",dataHandler:ae,dataValue:d(),show_error:d(!1),error_message:"Time required",skip_validation:!1}],v=[{placeHolder:{default:"Enter date of death"},property_name:"dateOfDeath",dataHandler:$,dataValue:d(),show_error:d(!1),error_message:"Date required",type:"date",skip_validation:!1},{placeHolder:{default:"Enter date arrived"},property_name:"dateArrived",dataHandler:H,dataValue:d(),show_error:d(!1),error_message:"Date required",type:"date",skip_validation:!1},{placeHolder:{default:"Enter date confirming death"},property_name:"dateOfDeathConfirmation",dataHandler:R,dataValue:d(),show_error:d(!1),error_message:"Date required",type:"date",skip_validation:!1}],h=[{lblTxt:"Was the individual pregnant at the time of death?",value:d(!1),disable_checkbox:d(!0)}],c=[{placeHolder:"Enter place of death",property_name:"placeOfDeath",dataHandler:V,dataValue:d(),show_error:d(!1),error_message:"Input required, Only letters allowed",type:"text",skip_validation:!1},{placeHolder:"Enter name of guardian",property_name:"nameOfGuardian",dataHandler:Q,dataValue:d(),show_error:d(!1),error_message:"Input required, Only letters allowed",type:"text",skip_validation:!1},{placeHolder:"Enter name of person confirming death",property_name:"nameOfPersonConfirmindDeath",dataHandler:se,dataValue:d(),show_error:d(!1),error_message:"Input required, Only letters allowed",type:"text",skip_validation:!1},{placeHolder:"Enter position of the person confirming death",property_name:"positionOfthePersonConfirmingDeath",dataHandler:He,dataValue:d(),show_error:d(!1),error_message:"Input required, Only letters allowed",type:"text",skip_validation:!1},{placeHolder:"Enter medical council registration number of the person confirming death",property_name:"medicalConcilRegistrationNumberOfThePersonConfirmingDeath",dataHandler:lt,dataValue:d(),show_error:d(!1),error_message:"Input required, Only letters and numbers are allowed",type:"alphanumeric",skip_validation:!1},{placeHolder:"Other (specify)",property_name:"otherNotes",dataHandler:Ze,dataValue:d(),show_error:d(!1),error_message:"Input required, Only letters allowed",dissabled:m.value,type:"text",skip_validation:!0}],p=[{showAddItemButton:!0,addItemButton:!0,name:"save",btnFill:"clear",fn:tt},{showAddItemButton:!0,addItemButton:!0,name:"cancel",btnFill:"clear",fn:w}],S=d([{id:1,name:"Natural",selected:!1},{id:2,name:"Accident",selected:!1},{id:3,name:"Homicide",selected:!1},{id:4,name:"Suicide",selected:!1},{id:5,name:"Pending investigation",selected:!1},{id:6,name:"Could not be determined",selected:!1},{id:7,name:"Other - specify",selected:!1}]),O=d([{id:1,name:"Motor vehicle (passenger)",selected:!1},{id:2,name:"Motor vehicle (pedestrian)",selected:!1},{id:3,name:"Drowning",selected:!1},{id:4,name:"Other - specify",selected:!1}]),B=[{multi_Selection:!1,manner_of_death_Selection_value:d(),show_list_label:!0,unqueId:"qwerty",name_of_list:"Manner of death ",property_name:"mannerOfDeath",placeHolder:"Choose one",items:S.value,listUpdatedFN:qe,listFilteredFN:()=>{},use_internal_filter:!0,disabled:d(!1),show_error:d(!1),error_message:"selection required"},{multi_Selection:!1,show_list_label:!0,unqueId:"qwerty1hjkn",name_of_list:"How did it occur?",property_name:"howDiditOccur",placeHolder:"Choose one",items:O.value,listUpdatedFN:Ae,listFilteredFN:()=>{},use_internal_filter:!0,disabled:d(!0),show_error:d(!1),error_message:"selection required"}];function w(){g()}const E=t;function g(A={dataSaved:!0}){E("dataSaved",A)}function C(A){f[0].dataValue.value=A}function te(A){f[1].dataValue.value=A}function ae(A){f[2].dataValue.value=A}function $(A){const N={day:A.value.day,month:A.value.month,year:A.value.year,formattedDate:A.value.formattedDate};v[0].dataValue.value=N}function H(A){const N={day:A.value.day,month:A.value.month,year:A.value.year,formattedDate:A.value.formattedDate};v[1].dataValue.value=N,console.log(v[2].dataValue.value)}function R(A){const N={day:A.value.day,month:A.value.month,year:A.value.year,formattedDate:A.value.formattedDate};v[2].dataValue.value=N,console.log(v[2].dataValue.value)}function V(A){const N=A.target.value;c[0].dataValue.value=N}function Q(A){const N=A.target.value;c[1].dataValue.value=N}function se(A){const N=A.target.value;c[2].dataValue.value=N}function He(A){const N=A.target.value;c[3].dataValue.value=N}function lt(A){const N=A.target.value;c[4].dataValue.value=N}function Ze(A){const N=A.target.value;c[5].dataValue.value=N}function qe(A){S.value.forEach(T=>T.selected=!1);const N=S.value.find(T=>T.id==A.id);B[1].disabled.value=A.name!="Accident",N.selected=!0}function Ae(A){console.log("listUpdated",A),O.value.forEach(T=>T.selected=!1);const N=O.value.find(T=>T.id==A.id);N.selected=!0}function et(){const N=new Jt().isChildBearing;N==!0&&(h[0].disable_checkbox.value=!1),N==!1&&(h[0].disable_checkbox.value=!0)}function tt(){vt(c),vt(v),vt(f),We();const A=ye.merge(gt(c),gt(v),gt(f),Re(B[0]),Re(B[1]));console.log(A)}function We(){const A=S.value.filter(N=>N.selected);if(A.length==0)B[0].show_error.value=!0;else if(B[0].show_error.value=!1,A[0].name=="Accident"){const N=O.value.filter(T=>T.selected);B[1].show_error.value=N.length==0}}function Re(A){const N=[];let T={};return A.items.forEach(ne=>{ne.selected==!0&&N.push({property_name:A.property_name,name:ne.name})}),N.length>0&&(T[N[0].property_name]=N[0].name),T}return(A,N)=>{const T=x("ion-label");return n(),l(q,null,[a(o(he),{class:"checkbox_content md"},{default:i(()=>[a(o(J),null,{default:i(()=>[a(ge,{placeholder:c[0].placeHolder,icon:o(as),inputValue:c[0].dataValue.value,"onUpdate:inputValue":c[0].dataHandler},null,8,["placeholder","icon","inputValue","onUpdate:inputValue"]),s("div",null,[c[0].show_error.value?(n(),L(T,{key:0,class:"error-label"},{default:i(()=>[P(I(c[0].error_message),1)]),_:1})):y("",!0)])]),_:1}),a(o(J),null,{default:i(()=>[a(Ht,{place_holder:v[0].placeHolder,onDateUpDated:v[0].dataHandler,date_prop:""},null,8,["place_holder","onDateUpDated"]),s("div",null,[v[0].show_error.value?(n(),L(T,{key:0,class:"error-label"},{default:i(()=>[P(I(v[0].error_message),1)]),_:1})):y("",!0)])]),_:1})]),_:1}),a(o(he),null,{default:i(()=>[a(o(J),null,{default:i(()=>[a(_t,{place_holder:f[0].placeHolder,onTimeUpDated:f[0].dataHandler,time_prop:""},null,8,["place_holder","onTimeUpDated"]),s("div",null,[f[0].show_error.value?(n(),L(T,{key:0,class:"error-label"},{default:i(()=>[P(I(f[0].error_message),1)]),_:1})):y("",!0)])]),_:1}),a(o(J))]),_:1}),a(o(he),{class:"checkbox_content md"},{default:i(()=>[a(o(J),null,{default:i(()=>[a(ge,{placeholder:c[1].placeHolder,icon:o(Mt),inputValue:c[1].dataValue.value,"onUpdate:inputValue":c[1].dataHandler},null,8,["placeholder","icon","inputValue","onUpdate:inputValue"]),s("div",null,[c[1].show_error.value?(n(),L(T,{key:0,class:"error-label"},{default:i(()=>[P(I(c[1].error_message),1)]),_:1})):y("",!0)])]),_:1}),a(o(J),null,{default:i(()=>[a(o(ss),{value:h[0].value,alignment:"start",class:"ion-lblCls",disabled:h[0].disable_checkbox.value},{default:i(()=>[P(I(h[0].lblTxt),1)]),_:1},8,["value","disabled"])]),_:1})]),_:1}),a(o(he),null,{default:i(()=>[a(o(J),null,{default:i(()=>[a(ge,{placeholder:D.value,icon:o(ns),inputValue:u.value},null,8,["placeholder","icon","inputValue"])]),_:1}),a(o(J))]),_:1}),a(o(he),null,{default:i(()=>[a(o(J),null,{default:i(()=>[a(Ht,{place_holder:v[1].placeHolder,onDateUpDated:v[1].dataHandler,date_prop:""},null,8,["place_holder","onDateUpDated"]),s("div",null,[v[1].show_error.value?(n(),L(T,{key:0,class:"error-label"},{default:i(()=>[P(I(v[1].error_message),1)]),_:1})):y("",!0)])]),_:1}),a(o(J),null,{default:i(()=>[a(_t,{place_holder:f[1].placeHolder,onTimeUpDated:f[1].dataHandler,time_prop:""},null,8,["place_holder","onTimeUpDated"]),s("div",null,[f[1].show_error.value?(n(),L(T,{key:0,class:"error-label"},{default:i(()=>[P(I(f[1].error_message),1)]),_:1})):y("",!0)])]),_:1})]),_:1}),a(o(he),null,{default:i(()=>[a(o(J),null,{default:i(()=>[a(o(Je),{modelValue:b.value,"onUpdate:modelValue":[N[0]||(N[0]=ne=>b.value=ne),N[1]||(N[1]=ne=>qe(ne))],multiple:!1,taggable:!1,"hide-selected":!0,"close-on-select":!0,openDirection:"bottom","tag-placeholder":"Manner of death",placeholder:"Manner of death",selectLabel:"",label:"name",searchable:!0,"track-by":"id",options:S.value},null,8,["modelValue","options"]),s("div",null,[B[0].show_error.value?(n(),L(T,{key:0,class:"error-label"},{default:i(()=>[P(I(B[0].error_message),1)]),_:1})):y("",!0)])]),_:1}),a(o(J),null,{default:i(()=>[a(o(Je),{modelValue:r.value,"onUpdate:modelValue":[N[2]||(N[2]=ne=>r.value=ne),N[3]||(N[3]=ne=>Ae(ne))],multiple:!1,taggable:!1,"hide-selected":!0,"close-on-select":!0,openDirection:"bottom","tag-placeholder":"How did it occur?",placeholder:"How did it occur?",selectLabel:"",label:"name",disabled:B[1].disabled.value,searchable:!0,"track-by":"id",options:O.value},null,8,["modelValue","disabled","options"]),s("div",null,[B[1].show_error.value?(n(),L(T,{key:0,class:"error-label"},{default:i(()=>[P(I(B[1].error_message),1)]),_:1})):y("",!0)])]),_:1})]),_:1}),a(o(he),null,{default:i(()=>[a(o(J),null,{default:i(()=>[a(ge,{placeholder:c[5].placeHolder,icon:o(xt),inputValue:c[5].dataValue.value,disabled:m.value,"onUpdate:inputValue":c[5].dataHandler},null,8,["placeholder","icon","inputValue","disabled","onUpdate:inputValue"]),s("div",null,[c[5].show_error.value?(n(),L(T,{key:0,class:"error-label"},{default:i(()=>[P(I(c[5].error_message),1)]),_:1})):y("",!0)])]),_:1})]),_:1}),a(o(he),null,{default:i(()=>[a(o(J),null,{default:i(()=>[a(_t,{place_holder:f[2].placeHolder,onTimeUpDated:f[2].dataHandler,time_prop:""},null,8,["place_holder","onTimeUpDated"]),s("div",null,[f[2].show_error.value?(n(),L(T,{key:0,class:"error-label"},{default:i(()=>[P(I(f[2].error_message),1)]),_:1})):y("",!0)])]),_:1}),a(o(J),null,{default:i(()=>[a(ge,{placeholder:c[2].placeHolder,icon:o(Mt),inputValue:c[2].dataValue.value,"onUpdate:inputValue":c[2].dataHandler},null,8,["placeholder","icon","inputValue","onUpdate:inputValue"]),s("div",null,[c[2].show_error.value?(n(),L(T,{key:0,class:"error-label"},{default:i(()=>[P(I(c[2].error_message),1)]),_:1})):y("",!0)])]),_:1})]),_:1}),a(o(he),null,{default:i(()=>[a(o(J),null,{default:i(()=>[a(ge,{placeholder:c[3].placeHolder,icon:o(bt),inputValue:c[3].dataValue.value,"onUpdate:inputValue":c[3].dataHandler},null,8,["placeholder","icon","inputValue","onUpdate:inputValue"]),s("div",null,[c[3].show_error.value?(n(),L(T,{key:0,class:"error-label"},{default:i(()=>[P(I(c[3].error_message),1)]),_:1})):y("",!0)])]),_:1}),a(o(J),null,{default:i(()=>[a(ge,{placeholder:c[4].placeHolder,icon:o(xt),inputValue:c[4].dataValue.value,"onUpdate:inputValue":c[4].dataHandler},null,8,["placeholder","icon","inputValue","onUpdate:inputValue"]),s("div",null,[c[4].show_error.value?(n(),L(T,{key:0,class:"error-label"},{default:i(()=>[P(I(c[4].error_message),1)]),_:1})):y("",!0)])]),_:1})]),_:1}),(n(),L(o(he),{key:0,class:"spc_btwn"},{default:i(()=>[p[0].addItemButton?(n(),L(ve,{key:0,name:p[0].name,fill:p[0].btnFill,icon:o(zt),"onClicked:btn":p[0].fn},null,8,["name","fill","icon","onClicked:btn"])):y("",!0),p[1].addItemButton?(n(),L(ve,{key:1,name:p[1].name,fill:p[1].btnFill,icon:o(Yt),"onClicked:btn":p[1].fn},null,8,["name","fill","icon","onClicked:btn"])):y("",!0)]),_:1}))],64)}}}),ar=Z(tr,[["__scopeId","data-v-0aad2f08"]]),sr={class:"dash_box"},nr={key:1},ir=j({name:"xxxComponent"}),or=j({...ir,setup(e){const t=d("No outcome created yet"),u=d(!1),D=d("please select a type");d("Add new outcome"),d(!0);const m=d(!0),b=d(""),r=d(!0),f=d(!1),v=Ss(),h=me(()=>v.outcomes),c=d(!1),p=d(!1),S=d(!1),O=d(!1),B=d(!1);d(null),d(null);const w=d([{name:"Admitted for short stay",selected:!1},{name:"Referred out",selected:!1},{name:"Discharged Home",selected:!1},{name:"Death",selected:!1}]),E=[{multi_Selection:!1,show_list_label:!0,unqueId:"qwerty2",name_of_list:"Add new outcome",placeHolder:"Choose one",items:w.value,listUpdatedFN:g,listFilteredFN:()=>{},use_internal_filter:!0,disabled:d(!1)}];function g(V){w.value=V,w.value.forEach(Q=>{Q.selected==!0&&(b.value=Q.name)})}Qe(async()=>{te()}),$e(()=>b.value,async V=>{c.value==!0?c.value=!1:H()}),$e(()=>h.value.length,async V=>{te()});function C(){w.value.forEach(V=>{V.selected=!1}),b.value=""}function te(){h.value.length>0?r.value=!1:h.value.length==0&&f.value==!1&&(r.value=!0)}function ae(V){h.value.splice(V,1)}const $=V=>{};async function H(V=!0){const Q=b.value;console.log(Q),b.value=Q;const se=b.value;se==w.value[0].name?S.value=!0:S.value=!1,se==w.value[1].name?(O.value=!0,console.log("show_discharged_options is set to true")):O.value=!1,se==w.value[2].name?(B.value=!0,console.log("show_discharged_options is set to true")):B.value=!1,se==w.value[3].name?p.value=!0:p.value=!1}function R(){p.value=!1,S.value=!1,O.value=!1,B.value=!1,C()}return(V,Q)=>{const se=x("ion-row");return n(),L(o(le),null,{default:i(()=>[a(se,null,{default:i(()=>[a(o(J),null,{default:i(()=>[(n(),L(Fs,{key:0,"onUpdate:removeItem":ae,"onUpdate:editItem":$,displayData:h.value},null,8,["displayData"]))]),_:1})]),_:1}),r.value?(n(),L(se,{key:0},{default:i(()=>[s("span",sr,I(t.value),1)]),_:1})):y("",!0),m.value?(n(),l("div",nr,[a(se,null,{default:i(()=>[a(o(J),null,{default:i(()=>[a(ws,{multiSelection:E[0].multi_Selection,show_label:E[0].show_list_label,uniqueId:E[0].unqueId,name_of_list:E[0].name_of_list,choose_place_holder:E[0].placeHolder,"items_-list":E[0].items,use_internal_filter:E[0].use_internal_filter,disabled:E[0].disabled.value,onItemListUpDated:E[0].listUpdatedFN,onItemListFiltered:E[0].listFilteredFN},null,8,["multiSelection","show_label","uniqueId","name_of_list","choose_place_holder","items_-list","use_internal_filter","disabled","onItemListUpDated","onItemListFiltered"]),s("div",null,[u.value?(n(),L(o(K),{key:0,class:"error-label"},{default:i(()=>[P(I(D.value),1)]),_:1})):y("",!0)])]),_:1})]),_:1})])):y("",!0),S.value?(n(),L(Ts,{key:2,onDataSaved:R,selected_ward_prop:"",admitted_other_props:""})):y("",!0),O.value?(n(),L(Us,{key:3,onDataSaved:R,selected_referral_data:"",selected_other_referral_data:""})):y("",!0),B.value?(n(),L(qs,{key:4,onDataSaved:R,selected_discharged_prop:"",selected_discharged_data:""})):y("",!0),p.value?(n(),L(ar,{key:5,onDataSaved:R})):y("",!0)]),_:1})}}}),Ir=Z(or,[["__scopeId","data-v-80c43a7c"]]);export{kr as C,wr as I,qi as L,Sr as O,_o as P,Cr as a,Ir as b,Qs as c,Yi as d,ao as e,Yo as l};
