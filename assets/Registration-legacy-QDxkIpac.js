!function(){function e(e,a,t){return(a=function(e){var a=function(e,a){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,a||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===a?String:Number)(e)}(e,"string");return"symbol"==typeof a?a:a+""}(a))in e?Object.defineProperty(e,a,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[a]=t,e}System.register(["./vendor-legacy-qLaA4lfC.js","./StandardForm.vue_vue_type_script_setup_true_lang-legacy-Cphixc1Q.js","./index-legacy-D5KB3apO.js","./useLocation-legacy-U824I4Oo.js","./useExposeFromStandardForm-legacy-ZO3UEy3P.js","./vaccines_service-legacy-CdHlbNeg.js","./relations_service-legacy-C9RDXn_l.js"],function(a,t){"use strict";var n,i,o,l,r,d,u,s,c,m,v,p,h,f,_,g,y,b,I,w,D,F,x,k,T,R,S,P,V,N,B,C,L,M,E,H,A,O,Y,j,G,q,W,z,U,J,$,X,Z,K,Q,ee,ae,te,ne,ie,oe,le,re,de,ue,se,ce,me,ve,pe,he,fe;return{setters:[e=>{n=e.d,i=e.W,o=e.I,l=e.G,r=e.ac,d=e.ab,u=e.cZ,s=e.aa,c=e.dj,m=e.D,v=e.X,p=e.E,h=e.e,f=e.f,_=e.m,g=e.l,y=e.k,b=e.z,I=e.A,w=e.F,D=e.r,F=e.c,x=e.y,k=e.u,T=e.B,R=e.L,S=e.O,P=e.bQ,V=e.w,N=e.b2,B=e.a,C=e.bR,L=e.au,M=e.bK,E=e.S,H=e.a9,A=e.i,O=e.v,Y=e.V,j=e.p,G=e.af},e=>{q=e._},e=>{W=e.i,z=e.D,U=e._,J=e.ai,$=e.H,X=e.S,Z=e.z,K=e.aT,Q=e.m,ee=e.E,ae=e.f,te=e.P,ne=e.u,ie=e.a4,oe=e.l,le=e.am,re=e.j,de=e.X,ue=e.b,se=e.G,ce=e.t,me=e.A},e=>{ve=e.u},e=>{pe=e.u},e=>{he=e.g},e=>{fe=e.R}],execute:function(){var t=document.createElement("style");t.textContent=".large-card[data-v-ffb46cdd]{padding:5%;border-radius:15px;border:1px solid #ccc;height:82vh;background-color:#fff;overflow-y:auto;-webkit-box-shadow:0px -2px 19px -2px rgba(196,190,196,1);-moz-box-shadow:0px -2px 19px -2px rgba(196,190,196,1);box-shadow:0 -2px 19px -2px #c4bec4}.header[data-v-ffb46cdd]{display:flex;gap:20px;padding:10px 20px}.position_content[data-v-ffb46cdd]{max-width:100vw}.accordion-expanded[data-v-ffb46cdd]{background-color:#ded}button[aria-expanded=false][data-v-ffb46cdd]{background:rgba(var(--ion-color-rose-rgb),.25)}ion-accordion.accordion-expanding ion-item[slot=header][data-v-ffb46cdd],ion-accordion.accordion-expanded ion-item[slot=header][data-v-ffb46cdd]{--background: #ddeedd}.spinner-overlay[data-v-d5a6ac21]{position:fixed;top:0;left:0;width:100%;height:100%;background-color:rgba(0,0,0,.5);display:flex;flex-direction:column;justify-content:center;align-items:center;z-index:1000}.spinner-overlay ion-spinner[data-v-d5a6ac21]{width:50px;height:50px;color:#fff}.spinner-overlay .loading-text[data-v-d5a6ac21]{color:#fff;margin-top:10px;font-size:1.1em}.header-title[data-v-d5a6ac21]{text-align:center;font-weight:700;font-size:18px;width:100%;padding:14px;background-color:#f8f8f8;color:#333;box-shadow:0 2px 4px rgba(0,0,0,.1)}.masonry-grid[data-v-d5a6ac21]{display:grid;grid-template-columns:repeat(auto-fit,minmax(250px,1fr));gap:16px;padding:16px}@media (max-width: 575px){.masonry-grid[data-v-d5a6ac21]{grid-template-columns:1fr}}@media (min-width: 576px) and (max-width: 767px){.masonry-grid[data-v-d5a6ac21]{grid-template-columns:repeat(2,1fr)}}@media (min-width: 768px) and (max-width: 991px){.masonry-grid[data-v-d5a6ac21]{grid-template-columns:repeat(3,1fr)}}@media (min-width: 992px){.masonry-grid[data-v-d5a6ac21]{grid-template-columns:repeat(4,1fr)}}@media (min-width: 1500px){.masonry-grid[data-v-d5a6ac21]{margin-left:100px;margin-right:100px}}.custom-card[data-v-d5a6ac21]{background:#fff;border-radius:5px;padding:5px 15px 15px;transition:transform .2s ease-in-out}.card-margin-top[data-v-d5a6ac21]{margin-top:16px}.footer-content[data-v-d5a6ac21]{display:flex;justify-content:space-between;width:100%;padding:10px;align-items:center;background-color:#f8f8f8;box-shadow:0 -2px 4px rgba(0,0,0,.1)}.footer-buttons-left[data-v-d5a6ac21],.footer-buttons-right[data-v-d5a6ac21]{display:flex;gap:10px}.pagination-dots[data-v-d5a6ac21]{display:flex;gap:8px;justify-content:center;align-items:center}.dot[data-v-d5a6ac21]{width:10px;height:10px;background-color:#ccc;border-radius:50%;cursor:pointer;transition:background-color .3s ease,transform .3s ease}.dot.active[data-v-d5a6ac21]{background-color:#28a745;transform:scale(1.2)}.dot[data-v-d5a6ac21]:hover{background-color:#218838}\n/*$vite$:1*/",document.head.appendChild(t);const _e=n({components:{IonLabel:m,IonAvatar:c,IonRow:s,IonImg:u,IonCol:d,IonList:r,IonItem:l,IonIcon:o,IonButton:i,DynamicButton:z},data:()=>({selectedResult:{},iconsContent:W,isAnyAccordionOpen:!0,isLoading:!1}),methods:{dismiss(e){v.dismiss(e)}}}),ge={key:0,class:"spinner-overlay"};const ye=a("C",U(_e,[["render",function(e,a,t,n,i,o){const l=p("ion-spinner"),r=p("ion-title"),d=p("ion-icon"),u=p("ion-header"),s=p("center"),c=p("ion-content"),m=p("DynamicButton"),v=p("ion-col"),D=p("ion-row"),F=p("ion-footer");return f(),h(w,null,[e.isLoading?(f(),h("div",ge,[g(l,{name:"bubbles"}),a[3]||(a[3]=y("div",{class:"loading-text"},"Please wait...",-1))])):_("",!0),g(u,{style:{display:"flex","justify-content":"space-between"}},{default:b(()=>[g(r,{class:"modalTitle"},{default:b(()=>a[4]||(a[4]=[I("Printer")])),_:1,__:[4]}),g(d,{onClick:a[0]||(a[0]=a=>e.dismiss("dismiss")),style:{"padding-top":"10px","padding-right":"10px"},icon:e.iconsContent.cancel},null,8,["icon"])]),_:1}),g(c,{fullscreen:!0,class:"ion-padding",style:{"--background":"#fff"}},{default:b(()=>[g(s,null,{default:b(()=>a[5]||(a[5]=[y("h3",{class:"ion-padding"},"Do you want to print a barcode?",-1)])),_:1,__:[5]})]),_:1}),g(F,null,{default:b(()=>[g(D,null,{default:b(()=>[g(v,null,{default:b(()=>[g(m,{color:"danger",onClick:a[1]||(a[1]=a=>e.dismiss("dismiss")),name:"No",fill:"solid",style:{float:"right","margin-right":"2%",width:"100px"}}),g(m,{onClick:a[2]||(a[2]=a=>e.dismiss("Yes")),name:"Yes",fill:"solid",style:{float:"right","margin-right":"2%",width:"100px"}})]),_:1})]),_:1})]),_:1})],64)}]])),be=a("a",n({__name:"CurrentLocation",setup(e,{expose:a}){const{formRef:t,exposeFormMethods:n}=pe(),{currentLocation:i}=(e=>{const a=D(!1),{getDistricts:t,districtList:n,selectedTraditionalAuthorityId:i,villages:o,selectedDistrictId:l,TAs:r}=ve();return t(),{currentLocation:F(()=>[{componentType:"Heading",name:"Current Location",position:"center"},{componentType:"multiSelectInputField",header:"Current district",name:"current_district",trackBy:"district_id",validation:e=>J.required(e),icon:W.search,options:n.value,onChange:(a,t)=>{null!=e&&e.value&&(e.value.setFormValue("current_traditional_authority",[]),e.value.setFormValue("current_village",[])),l.value=(null==a?void 0:a.district_id)||null}},{componentType:"multiSelectInputField",header:"Current traditional authority",name:"current_traditional_authority",trackBy:"traditional_authority_id",validation:e=>J.required(e),icon:W.search,options:r.value,disabled:e=>{var a;return!(null!=r&&null!==(a=r.value)&&void 0!==a&&a.length)},onChange:(a,t)=>{var n;null!=e&&e.value&&(null==e||null===(n=e.value)||void 0===n||n.setFormValue("current_village",[])),i.value=(null==a?void 0:a.traditional_authority_id)||null}},{componentType:"multiSelectInputField",header:"Current village",name:"current_village",trackBy:"village_id",icon:W.search,validation:e=>J.required(e),options:o.value,disabled:e=>{var a;return console.log("ðŸš€ ~ currentLocation ~ data:",e),!(null!=o&&null!==(a=o.value)&&void 0!==a&&a.length)}},{componentType:"multiSelectInputField",header:"Closest landmark/Plot number",name:"closestLandmark",trackBy:"id",icon:W.search,options:[{id:1,name:"Church"},{id:2,name:"Mosque"},{id:3,name:"Primary School"},{id:4,name:"Borehole"},{id:5,name:"Secondary School"},{id:6,name:"College"},{id:7,name:"Market"},{id:8,name:"Football Ground"},{id:9,name:"Other"}]}]),TAs:r,isLoadingTAs:a,selectedDistrictId:l}})(t);return a(n()),(e,a)=>(f(),x(q,{formData:k(i),ref_key:"formRef",ref:t},null,8,["formData"]))}})),Ie=(e,a)=>(null==e||!e.same_as_current)&&!(null!=a&&a.length),we=(e,a)=>t=>{setTimeout(()=>{t?((e,a)=>{if(null==e||!e.value||null==a||!a.value)return;const{current_district:t,current_traditional_authority:n,current_village:i}=e.value;a.value.setFormValue("home_district",t),a.value.setFormValue("home_traditional_authority",n),a.value.setFormValue("home_village",i)})(e,a):(e=>{null!=e&&e.value&&(e.value.setFormValue("home_district",[]),e.value.setFormValue("home_traditional_authority",[]),e.value.setFormValue("home_village",[]))})(a)},0)},De=a("_",n({__name:"HomeLocation",props:{currentLocationFormValues:{}},setup(e,{expose:a}){const t=e,{formRef:n,exposeFormMethods:i}=pe(),o=F(()=>t.currentLocationFormValues),{homeLocation:l}=((e,a)=>{const{getDistricts:t,districtList:n,selectedTraditionalAuthorityId:i,villages:o,selectedDistrictId:l,TAs:r}=ve();t();const d=F(()=>[{componentType:"Heading",name:"Home Location",position:"center"},{componentType:"checkboxField",type:"single",name:"same_as_current",label:"Same as current",onChange:we(e,a)},{componentType:"multiSelectInputField",header:"Home district",name:"home_district",trackBy:"district_id",icon:W.search,validation:J.required,options:n.value,onChange:e=>((e,a,t)=>{a.value=(null==e?void 0:e.district_id)||null,null!=t&&t.value&&(t.value.setFormValue("home_traditional_authority",[]),t.value.setFormValue("home_village",[]))})(e,l,a)},{componentType:"multiSelectInputField",header:"Home traditional authority",name:"home_traditional_authority",trackBy:"traditional_authority_id",validation:J.required,icon:W.search,options:r.value,disabled:e=>Ie(e,r.value),onChange:e=>((e,a,t)=>{var n;a.value=(null==e?void 0:e.traditional_authority_id)||null,null==t||null===(n=t.value)||void 0===n||n.setFormValue("home_village",[])})(e,i,a),openDirection:"auto"},{componentType:"multiSelectInputField",header:"Home village",name:"home_village",trackBy:"village_id",icon:W.search,validation:J.required,options:o.value,disabled:e=>Ie(e,o.value),openDirection:"auto"}]);return{homeLocation:d}})(o,n);return a(i()),(e,a)=>(f(),x(q,{formData:k(l),ref_key:"formRef",ref:n},null,8,["formData"]))}})),Fe=n({__name:"Country",setup(e,{expose:a}){const{country:t}=(()=>{const{countriesList:e,getCountries:a}=ve();return a(),{country:F(()=>[{componentType:"Heading",name:"Country",position:"center"},{componentType:"multiSelectInputField",header:"Country",name:"country",trackBy:"district_id",openDirection:"auto",icon:W.search,validation:e=>J.required(e),options:e.value}])}})(),{formRef:n,exposeFormMethods:i}=pe();return a(i()),(e,a)=>(f(),x(q,{formData:k(t),ref_key:"formRef",ref:n},null,8,["formData"]))}}),xe=a("c",n({__name:"PersonalInformation",setup(e,{expose:a}){const{personalInformation:t}=(()=>{function e(e,a){const t=new Date(e);return t.setFullYear(t.getFullYear()-a),t.toISOString().split("T")[0]}return{personalInformation:F(()=>[{componentType:"Heading",name:"Personal Information",position:"center"},{componentType:"inputField",header:"National ID",name:"nationalID",placeholder:"__-__-__-__",icon:W.nationalID,validation:e=>J.isMWNationalID(e)},{componentType:"inputField",header:"First name",name:"firstname",icon:W.fullName,validation:e=>J.isName(e)},{componentType:"inputField",header:"Middle name",name:"middleName",icon:W.fullName,validation:e=>J.isNamesEmpty(e)},{componentType:"inputField",header:"Last name",name:"lastname",icon:W.fullName,validation:e=>J.isName(e)},{componentType:"radioButtonField",header:"Gender",name:"gender",type:"inline",validation:e=>J.required(e),options:[{label:"Male",value:"M"},{label:"Female",value:"F"}]},{componentType:"dateInputField",header:"Date of birth",name:"birthdate",icon:W.calenderPrimary,minDate:e($.sessionDate(),110),validation:e=>J.required(e),condition:e=>!e.Estimate,disabled:e=>e.Estimate},{componentType:"inputField",header:"Estimated age",name:"estimation",icon:W.time,validation:e=>J.isEstimationDate(e),initialUnit:"Years",unitOptions:[{label:"Days",value:"Days"},{label:"Months",value:"Months"},{label:"Years",value:"Years"}],unitValidation:e=>e&&""!==e?null:"Please select a unit.",condition:e=>e.Estimate},{componentType:"checkboxField",name:"Estimate",type:"single",label:"Estimate age"},{componentType:"phoneInputField",name:"Phone Number",header:"Phone Number",validation:e=>J.isMWPhoneNumber(e.phoneNumber)}])}})(),{formRef:n,exposeFormMethods:i}=pe();return a(i()),(e,a)=>(f(),x(q,{formData:k(t),ref_key:"formRef",ref:n},null,8,["formData"]))}})),ke=n({components:{IonLabel:m,IonAvatar:c,IonRow:s,IonImg:u,IonCol:d,IonList:r,IonItem:l,IonIcon:o,IonButton:i},data:()=>({selectedResult:{},iconsContent:W,isAnyAccordionOpen:!0,isLoading:!1}),methods:{updateAccordionState(e){const a=this.$refs.accordionGroup;this.isAnyAccordionOpen=void 0!==a.value},dismiss(e){v.dismiss(e)},async init(){this.setData(this.deduplicationData[0]||{})},async onSelect(){v.dismiss(this.selectedResult)},setData(e){this.selectedResult=e},dateFormat:e=>$.toStandardHisDisplayFormat(e),probabilityToPercentage:e=>(100*e).toFixed(2)+"%"},props:{deduplicationData:{default:[]},to_be_registered:{default:[]}},mounted(){this.init()},activated(){this.init()}}),Te={key:0,class:"spinner-overlay"},Re={class:"header position_content"},Se={style:{"font-size":"1.2em","font-weight":"700"}},Pe={class:"due_date"},Ve={class:"ion-padding",slot:"content"},Ne={style:{display:"flex","justify-content":"end",gap:"10px"}};const Be=U(ke,[["render",function(e,a,t,n,i,o){const l=p("ion-spinner"),r=p("ion-icon"),d=p("ion-header"),u=p("ion-label"),s=p("ion-item"),c=p("ion-col"),m=p("ion-row"),v=p("ion-accordion"),D=p("ion-accordion-group"),F=p("ion-content"),k=p("ion-button"),S=p("ion-footer");return f(),h(w,null,[e.isLoading?(f(),h("div",Te,[g(l,{name:"bubbles"}),a[3]||(a[3]=y("div",{class:"loading-text"},"Please wait...",-1))])):_("",!0),g(d,null,{default:b(()=>[y("div",Re,[y("div",{style:{display:"flex","align-items":"center"},onClick:a[0]||(a[0]=a=>e.dismiss("back"))},[g(r,{slot:"separator",size:"large",icon:e.iconsContent.arrowLeft},null,8,["icon"])]),y("div",Se,"Matches found: ("+T(e.deduplicationData.length)+")",1)])]),_:1}),g(F,{fullscreen:!0,class:"ion-padding",style:{"--background":"#fff"}},{default:b(()=>[g(D,{ref:"accordionGroup",class:"previousView",value:"0",onIonChange:e.updateAccordionState},{default:b(()=>[(f(!0),h(w,null,R(e.deduplicationData,(t,n)=>(f(),x(v,{style:{"margin-bottom":"15px"},value:n,"toggle-icon-slot":"start",class:"custom_card",button:"",key:n,detail:!0,color:t.value===e.selectedResult.value?"light":"",onClick:a=>e.setData(t)},{default:b(()=>[g(s,{slot:"header"},{default:b(()=>[g(u,{class:"previousLabel"},{default:b(()=>{var e,a;return[I(T(null==t||null===(e=t.person)||void 0===e?void 0:e.given_name)+" "+T(null==t||null===(a=t.person)||void 0===a?void 0:a.family_name),1)]}),_:2},1024),y("div",Pe,[a[4]||(a[4]=I(" Score: ")),y("b",null,T(e.probabilityToPercentage(null==t?void 0:t.score)||"-"),1)])]),_:2},1024),y("div",Ve,[g(m,null,{default:b(()=>[g(c,null,{default:b(()=>a[5]||(a[5]=[y("b",null,"To be Registered",-1)])),_:1,__:[5]}),g(c,null,{default:b(()=>a[6]||(a[6]=[y("b",null,"Already Registered",-1)])),_:1,__:[6]})]),_:1}),g(m,null,{default:b(()=>[g(c,null,{default:b(()=>[g(m,null,{default:b(()=>{var t,n;return[a[7]||(a[7]=I(" Name: ")),y("b",null,T(null===(t=e.to_be_registered)||void 0===t?void 0:t.given_name)+" "+T(null===(n=e.to_be_registered)||void 0===n?void 0:n.family_name),1)]}),_:1,__:[7]}),g(m,null,{default:b(()=>{var t;return[a[8]||(a[8]=I("Gender: ")),y("b",null,T(null===(t=e.to_be_registered)||void 0===t?void 0:t.gender),1)]}),_:1,__:[8]}),g(m,null,{default:b(()=>{var t;return[a[9]||(a[9]=I("Birthdate: ")),y("b",null,T(null===(t=e.to_be_registered)||void 0===t?void 0:t.birthdate),1)]}),_:1,__:[9]}),g(m,null,{default:b(()=>{var t;return[a[10]||(a[10]=I("Home District: ")),y("b",null,T(null===(t=e.to_be_registered)||void 0===t?void 0:t.home_district),1)]}),_:1,__:[10]}),g(m,null,{default:b(()=>{var t;return[a[11]||(a[11]=I("Home TA: ")),y("b",null,T(null===(t=e.to_be_registered)||void 0===t?void 0:t.home_traditional_authority),1)]}),_:1,__:[11]})]),_:1}),g(c,null,{default:b(()=>[g(m,null,{default:b(()=>{var e,n;return[a[12]||(a[12]=I(" Name: ")),y("b",null,T(null==t||null===(e=t.person)||void 0===e?void 0:e.given_name)+" "+T(null==t||null===(n=t.person)||void 0===n?void 0:n.family_name),1)]}),_:2,__:[12]},1024),g(m,null,{default:b(()=>{var e;return[a[13]||(a[13]=I("Gender: ")),y("b",null,T(null==t||null===(e=t.person)||void 0===e?void 0:e.gender),1)]}),_:2,__:[13]},1024),g(m,null,{default:b(()=>{var n;return[a[14]||(a[14]=I("Birthdate: ")),y("b",null,T(e.dateFormat(null==t||null===(n=t.person)||void 0===n?void 0:n.birthdate)),1)]}),_:2,__:[14]},1024),g(m,null,{default:b(()=>{var e;return[a[15]||(a[15]=I("Home District: ")),y("b",null,T(null==t||null===(e=t.person)||void 0===e?void 0:e.home_district),1)]}),_:2,__:[15]},1024),g(m,null,{default:b(()=>{var e;return[a[16]||(a[16]=I("Home TA: ")),y("b",null,T(null==t||null===(e=t.person)||void 0===e?void 0:e.home_traditional_authority),1)]}),_:2,__:[16]},1024)]),_:2},1024)]),_:2},1024)])]),_:2},1032,["value","color","onClick"]))),128))]),_:1},8,["onIonChange"])]),_:1}),g(S,{collapse:"fade",class:"ion-no-border"},{default:b(()=>[y("div",Ne,[g(k,{fill:"solid",color:"secondary",onClick:a[1]||(a[1]=a=>e.dismiss("dismiss"))},{default:b(()=>a[17]||(a[17]=[I(" Not Duplicate ")])),_:1,__:[17]}),g(k,{onClick:a[2]||(a[2]=a=>e.onSelect()),fill:"solid",disabled:!e.isAnyAccordionOpen},{default:b(()=>a[18]||(a[18]=[I("Select ")])),_:1,__:[18]},8,["disabled"])])]),_:1})],64)}],["__scopeId","data-v-ffb46cdd"]]),Ce=Q();class Le{async getDDEIds(){const e=X.getUseIndexDBStatus(),a=X.getModsStatus(),t=X.getAPIStatus();if(e)return await Z("dde");if(a){const e=await K();return(null==e?void 0:e.npid)||[]}if(t)try{const e=await X.getJson("/dde/patients/sync_npids",{count:1,program_id:X.getProgramID()});return(null==e?void 0:e.npids)||[]}catch(n){return[]}return[]}async updateDDEIds(e){e=e.slice(1),Ce.postData("OVERRIDE_OBJECT_STORE",{storeName:"dde",data:e})}async possibleDuplicates(e){try{const t=new ee,n=await t.checkPotentialDuplicates(e);if(n.length>0){const i=await ae(Be,{class:"fullScreenModal"},!0,{to_be_registered:e,deduplicationData:n});if("dismiss"!=i&&"back"!=i){var a;const e=await t.importPatient(null==i||null===(a=i.person)||void 0===a?void 0:a.id),n=await te.findByID(e.patient_id);return await ne().setPatientRecord(n),!0}return"back"==i}return!1}catch(t){return!1}}}class Me{getRegion(e){return{1:"Central Region",2:"Northern Region",3:"Southern Region",4:"Foreign"}[e]}hasValidData(e,a=[]){return!(!e||"object"!=typeof e)&&(0===a.length?Object.values(e).some(e=>null!=e&&""!==e):a.every(a=>null!==e[a]&&void 0!==e[a]&&""!==e[a]))}async buildObservation(e,a){if(!a)return null;const t="object"==typeof a&&a.name?a.name:a;return await ie.buildValueText(e,t)}buildGuardianInfo(e){const a={};return a.given_name=(null==e?void 0:e.guardianFirstname)||"",a.middle_name=(null==e?void 0:e.guardianMiddleName)||"",a.family_name=(null==e?void 0:e.guardianLastname)||"",a.cell_phone_number=(null==e?void 0:e.guardianPhoneNumber.phoneNumber)||"",a.national_id=(null==e?void 0:e.guardianNationalID)||"",a.gender="",a.birthdate="",a.birthdate_estimated="false",a.home_region="",a.home_district="",a.home_traditional_authority="",a.home_village="",a.current_region="",a.current_district="",a.current_traditional_authority="",a.current_village="",a.landmark="",{saved:[],unsaved:[a]}}async buildVitals(e){return null!=e&&e.Weight?{saved:[],unsaved:[await this.buildObservation("Weight",e.Weight)]}:null}async buildARTPatientType(e,a){const t=[];let n=[];return e&&t.push(await ie.buildValueText("Art clinic location",e)),a&&t.push(await ie.buildValueCoded("Type of patient",a)),0===t.length?[]:(n=[{encounter_type:"REGISTRATION",status:"unsaved",obs:t}],n)}async buildBirthRegistrationObservations(e){if(!this.hasValidData(e))return null;const a=(await Promise.all([this.buildObservation("How many doses of Tdv did the mother receive?",e["How many doses of Tdv did the mother receive?"]),this.buildObservation("Protected at birth",e["Protected at birth"]),this.buildObservation("HIV status",e["HIV status"])])).filter(e=>null!==e);return a.length>0?a:null}async buildPatientRecord(e,a,t=""){var n,i,o,l,r,d,u,s,c,m,v,p,h;const{personalInformation:f,currentLocation:_,homeLocation:g,birthRegistration:y,guardianInformation:b,socialHistory:I,patientType:w}=e;return{patientID:t||a||"",ID:a||"",NcdID:"",personInformation:{given_name:(null==f?void 0:f.firstname)||"",middle_name:(null==f?void 0:f.middleName)||"",family_name:(null==f?void 0:f.lastname)||"",gender:(null==f?void 0:f.gender)||"",birthdate:null!=f&&f.Estimate?(new Ee).calculateDoB(null==f?void 0:f.estimation,(null==f?void 0:f.estimation_unit)||"Years"):(null==f?void 0:f.birthdate)||"",birthdate_estimated:null!=f&&f.Estimate?"true":"false",home_region:this.getRegion(null==g||null===(n=g.home_district)||void 0===n?void 0:n.region_id)||"",home_district:(null==g||null===(i=g.home_district)||void 0===i?void 0:i.name)||"",home_traditional_authority:(null==g||null===(o=g.home_traditional_authority)||void 0===o?void 0:o.name)||"",home_village:(null==g||null===(l=g.home_village)||void 0===l?void 0:l.name)||"",current_region:this.getRegion(null==_||null===(r=_.current_district)||void 0===r?void 0:r.region_id)||"",current_district:(null==_||null===(d=_.current_district)||void 0===d?void 0:d.name)||"",current_traditional_authority:(null==_||null===(u=_.current_traditional_authority)||void 0===u?void 0:u.name)||"",current_village:(null==_||null===(s=_.current_village)||void 0===s?void 0:s.name)||"",country:(null==e?void 0:e.country.country.name)||"",landmark:(null==_||null===(c=_.closestLandmark)||void 0===c?void 0:c.name)||"",cell_phone_number:(null===(m=f["Phone Number"])||void 0===m?void 0:m.phoneNumber)||"",occupation:(null==I?void 0:I.occupation)||"",marital_status:(null==I?void 0:I.maritalStatus)||"",religion:(null==I||null===(v=I.religion)||void 0===v?void 0:v.name)||"",education_level:(null==I?void 0:I.highestLevelOfEducation)||""},guardianInformation:this.buildGuardianInfo(b),birthRegistration:await this.buildBirthRegistrationObservations(y),otherPersonInformation:{nationalID:(null==f?void 0:f.nationalID)||"",ichisID:X.getIchisId()||"",TEI:X.getTEI()||"",birthID:y["Serial Number"]||"",relationshipID:(null==b||null===(p=b.relationship)||void 0===p?void 0:p.id)||""},vitals:await this.buildVitals(y),vaccineSchedule:await he(null==f?void 0:f.gender,null==f?void 0:f.birthdate),vaccineAdministration:{orders:[],obs:[],voided:[]},observations:await this.buildARTPatientType(null==w||null===(h=w.facility)||void 0===h?void 0:h.name,null==w?void 0:w.patient_type),appointments:{saved:[],unsaved:[]},saveStatusPersonInformation:"pending",saveStatusGuardianInformation:"pending",saveStatusBirthRegistration:"pending",saveStatusVitals:"pending",date_created:"",creator:"",sync_status:"unsynced"}}}class Ee extends X{constructor(){super(),e(this,"patientRecordBuilder",void 0),this.patientRecordBuilder=new Me}async saveRegistrationData(e){var a;const t=await(new Le).getDDEIds();if(t.length<=0&&oe("DDE IDs are not available."),t.length<=0&&!X.getAPIStatus())return!1;let n=await this.patientRecordBuilder.buildPatientRecord(e,null===(a=t[0])||void 0===a?void 0:a.npid);return 32==X.getProgramID()&&(n=await(async e=>{const a=X.getIchisDiagnosis();if(a.length<=0)return e;const t=await Promise.all(a.map(async e=>{var a;const t=(null==e||null===(a=e.value)||void 0===a||null===(a=a.match(/[\d.]+/))||void 0===a?void 0:a[0])||"",n=null==e?void 0:e.date;if("NCD_CV_D_Likelihood of Diabetes"==e.display){var i;const a=null==e||null===(i=e.id)||void 0===i?void 0:i.split("-");return await ie.buildValueNumber("Unspecified Diabetes",t,null,null,n,a[1])}return"NCD_SHD_CV_Client waist circumference"==e.display?await ie.buildValueNumber("Waist circumference",t,null,null,n):"NCD_SHD_CV_Client systolic blood pressure"==e.display?await ie.buildValueNumber("Systolic",t,null,null,n):"NCD_SHD_CV_Client diastolic blood pressure"==e.display?await ie.buildValueNumber("Diastolic",t,null,null,n):void 0}));return e.observations.push({encounter_type:"VITALS",status:"unsaved",obs:t}),e})(n)),!(!X.getAPIStatus()||X.getModsStatus()||!(await(new Le).possibleDuplicates(n.personInformation)))||!!(await le(n))&&(re("Registration successful"),sessionStorage.setItem("ichis_diagnosis",JSON.stringify([])),X.getUseIndexDBStatus()&&await(new Le).updateDDEIds(t),await this.printBarcode(),!0)}async updateDemographics(e){let a=await this.patientRecordBuilder.buildPatientRecord(e,X.getNationalID(),X.getPatientID());return a.saveStatusPersonInformation="edit",a.saveStatusGuardianInformation="edit",a.saveStatusBirthRegistration="edit",a.saveStatusVitals="edit",!!(await le(a))&&(re("Updated successful"),!0)}checkIfChild(e){if(!(null!=e&&e.estimation||null!=e&&e.birthdate))return{moreThanThirteenYears:!0,underNineMonths:!1,underFiveYears:!1};let a="";return a=e.estimation?this.calculateDoB(e.estimation,e.estimation_unit||"Years")||"":e.birthdate,{moreThanThirteenYears:$.getAgeInYears(a)>13,underNineMonths:$.ageInMonths(a)<9,underFiveYears:$.getAgeInYears(a)<5}}async printBarcode(){"dismiss"!==await ae(ye,{class:"small-confirm-modal "})&&(new de).printData("barcode")}calculateDoB(e,a){try{let t=S(X.getSessionDate());if("Years"===a&&e<0)t=t.add(Math.abs(e),"years");else switch(a){case"Days":t=t.subtract(e,"days");break;case"Months":t=t.subtract(e,"months");break;case"Years":t=t.subtract(e,"years");break;default:return null}return $.toStandardHisDisplayFormat(t.format("YYYY-MM-DD"))||""}catch(t){return console.error("Error calculating date:",t),null}}}const He=(e,a)=>{const t=F(()=>(new Ee).checkIfChild(e.value).moreThanThirteenYears),{getRelationships:n}=function(){const e=D([]),a=D([]),t=D([]),n=ue();P();const i=F(()=>n.apiStatus),o=e=>{var n;const i=["Brother","Father","Son","Grandfather","Grandson","Boyfriend","Stepfather","Stepson"],o=["Sister","Mother","Daughter","Grandmother","Granddaughter","Girlfriend","Stepmother","Stepdaughter"],l=["Spouse/Partner","Aunt/Uncle","Niece/Nephew","Doctor","Other","Patient","TB Contact Person","TB Patient","treatment suporter"];(null===(n=a.value)||void 0===n?void 0:n.length)>0&&(t.value=a.value.filter(a=>"M"===e?i.includes(a.a_is_to_b)||l.includes(a.a_is_to_b):"F"===e&&(o.includes(a.a_is_to_b)||l.includes(a.a_is_to_b))))};return{relationships:e,relationshipsData:a,filteredRelationships:t,apiStatus:i,getRelationships:async l=>{var r;if(l)return a.value=await Z("relationship"),i.value&&a.value.length!==(null===(r=n.offlineRelationshipStatus)||void 0===r?void 0:r.total)&&(a.value=await fe.getRelations()),o(l),e.value=e.value=t.value.map(e=>[{name:e.b_is_to_a,id:e.relationship_type_id,trackByID:e.relationship_type_id+e.b_is_to_a}]).reduce((e,a)=>e.concat(a),[]),e.value},filterRelationships:o}}(),i=D();V(e,async e=>{e&&(i.value=await n(e.gender))});return{guardianInformation:F(()=>[{componentType:"Heading",name:"Guardian Information",position:"center"},{componentType:"inputField",header:"Guardian National ID",name:"guardianNationalID",placeholder:"__-__-__-__",icon:W.nationalID,validation:e=>J.isMWNationalID(e)},{componentType:"inputField",header:"First name",name:"guardianFirstname",icon:W.fullName,validation:e=>t.value?J.isNameEmpty(e):J.isName(e)},{componentType:"inputField",header:"Middle name",name:"guardianMiddleName",icon:W.fullName,validation:e=>J.isNameEmpty(e)},{componentType:"inputField",header:"Last name",name:"guardianLastname",icon:W.fullName,validation:e=>t.value?J.isNameEmpty(e):J.isName(e)},{componentType:"phoneInputField",name:"guardianPhoneNumber",header:"Phone Number",validation:e=>J.isMWPhoneNumber(e.phoneNumber)},{componentType:"multiSelectInputField",header:"Relationship to patient",name:"relationship",trackBy:"trackByID",icon:W.search,validation:e=>t.value?null:J.required(null==e?void 0:e.name),options:()=>i.value,disabled:()=>!i.value}])}},Ae=a("b",n({__name:"GuardianInformation",props:{personalInformationFormValues:{}},setup(e,{expose:a}){const{formRef:t,exposeFormMethods:n}=pe(),i=e,o=F(()=>i.personalInformationFormValues),{guardianInformation:l}=He(o);return a(n()),(e,a)=>(f(),x(q,{formData:k(l),ref_key:"formRef",ref:t},null,8,["formData"]))}})),Oe=a("d",n({__name:"SocialHistory",setup(e,{expose:a}){const{socialHistory:t}=(()=>{const e=D();return se.isProp("military_site=true").then(a=>{e.value=a}),{socialHistory:F(()=>[{componentType:"Heading",name:"Social History",position:"center"},{componentType:"multiSelectInputField",header:"Religion",name:"religion",icon:W.search,trackBy:"id",options:[{id:1,name:"Christianity"},{id:2,name:"Islam"},{id:3,name:"Judaism"},{id:4,name:"Hinduism"},{id:5,name:"Buddhism"},{id:6,name:"Sikhism"},{id:7,name:"Jainism"},{id:8,name:"BahÃ¡'Ã­ Faith"},{id:9,name:"Zoroastrianism"},{id:10,name:"Confucianism"},{id:11,name:"Taoism"},{id:12,name:"Shinto"},{id:13,name:"Baha'i Faith"},{id:14,name:"Juche"},{id:15,name:"Rastafari"}]},{componentType:"radioButtonField",header:"Occupation status",name:"occupation",type:"inline",validation:J.required,condition:()=>1==X.getProgramID()&&e.value,options:[{label:"Military",value:"Military"},{label:"Civilian",value:"Civilian"}]},{componentType:"radioButtonField",header:"Occupation status",name:"occupation",type:"inline",condition:a=>!e,options:[{label:"Employed",value:"employed"},{label:"Student",value:"Student"},{label:"Unemployed",value:"unemployed"},{label:"Other",value:"Other"}]},{componentType:"radioButtonField",header:"Marital status",name:"maritalStatus",type:"inline",options:[{label:"Single",value:"single"},{label:"Married",value:"married"},{label:"Widow",value:"widow"},{label:"Widower",value:"widower"},{label:"Divorced",value:"divorced"}]},{componentType:"radioButtonField",header:"Highest level of education",name:"highestLevelOfEducation",type:"inline",options:[{label:"No education",value:"No education"},{label:"Primary school",value:"primary school"},{label:"Secondary school",value:"secondary school"},{label:"Tertiary education",value:"tertiary education"}]}])}})(),{formRef:n,exposeFormMethods:i}=pe();return a(i()),(e,a)=>(f(),x(q,{formData:k(t),ref_key:"formRef",ref:n},null,8,["formData"]))}})),Ye=n({__name:"PatientType",setup(e,{expose:a}){const{patientType:t}=(()=>{const{facilityList:e,getFacilities:a}=ve();return a(),{patientType:F(()=>[{componentType:"Heading",name:"Patient Type",position:"center"},{componentType:"radioButtonField",header:"Patient Type",name:"patient_type",type:"inline",validation:J.required,options:[{label:"New patient",value:"New patient"},{label:"Emergency supply",value:"Emergency supply"},{label:"External consultation",value:"External consultation"}]},{componentType:"multiSelectInputField",header:"Facility",name:"facility",trackBy:"facility_id",openDirection:"auto",icon:W.search,validation:e=>J.required(e),options:e.value.facilities,condition:e=>"Emergency supply"==(null==e?void 0:e.patient_type)||"External consultation"==(null==e?void 0:e.patient_type)}])}})(),{formRef:n,exposeFormMethods:i}=pe();return a(i()),(e,a)=>(f(),x(q,{formData:k(t),ref_key:"formRef",ref:n},null,8,["formData"]))}}),je=n({__name:"BirthRegistration",setup(e,{expose:a}){const{formRef:t,exposeFormMethods:n}=pe(),{birthRegistration:i}=(e=>({birthRegistration:F(()=>[{componentType:"Heading",name:"Birth Registration",position:"center"},{componentType:"inputField",header:"Birth certificate number",name:"Serial Number",icon:W.nationalID,placeholder:"__-__-__-__"},{componentType:"inputField",header:"Birth Weight/First weight (kg)",name:"Weight",icon:W.weight,validation:e=>J.validateWeight(e)},{componentType:"multiSelectInputField",header:"How many doses of Tdv did the mother receive?",name:"How many doses of Tdv did the mother receive?",icon:W.search,options:[{concept_id:11997,name:"0-2 doses, less than two weeks before delivery"},{concept_id:11998,name:"2-5 doses more than two weeks of delivery"},{concept_id:1067,name:"Unknown"}],trackBy:"concept_id",validation:e=>J.required(e),onChange:a=>{const t=null==a?void 0:a.name;"Unknown"==t?e.value.setFormValue("Protected at birth",{concept_id:1067,name:"Don't know"}):"0-2 doses, less than two weeks before delivery"==t?e.value.setFormValue("Protected at birth",{concept_id:1066,name:"No"}):"2-5 doses more than two weeks of delivery"==t&&e.value.setFormValue("Protected at birth",{concept_id:1065,name:"Yes"})}},{componentType:"multiSelectInputField",header:"Protected at birth (PAB)",name:"Protected at birth",icon:W.search,trackBy:"concept_id",validation:e=>J.required(e),disabled:e=>!e["How many doses of Tdv did the mother receive?"]},{componentType:"multiSelectInputField",header:"HIV status of the Child's Mother",name:"HIV status",icon:W.search,options:[{id:703,name:"Positive"},{id:664,name:"Negative"},{id:1067,name:"Unknown"}],trackBy:"id",validation:e=>J.required(e)}])}))(t);return a(n()),(e,a)=>(f(),x(q,{formData:k(i),ref_key:"formRef",ref:t},null,8,["formData"]))}});function Ge(){const e=D(1),a=D(4),t=ne(),{patient:n}=N(t),i=F(()=>0===a.value?4:Math.ceil(4/a.value)),o=F(()=>i.value>1),l=F(()=>o.value&&e.value>1),r=F(()=>o.value&&e.value<i.value),d=()=>{a.value=(()=>{const e=window.innerWidth;return e>=992?4:e>=768?3:e>=576?2:1})(),e.value>i.value&&(e.value=i.value),0===e.value&&i.value>0&&(e.value=1)};return B(()=>{window.addEventListener("resize",d),d()}),C(()=>{window.removeEventListener("resize",d)}),{currentPage:e,columnsPerRow:a,totalPages:i,showPaginationButtons:o,showPreviousButton:l,showNextButton:r,nextPage:()=>{e.value<i.value&&e.value++},prevPage:()=>{e.value>1&&e.value--},goToPage:a=>{a>=1&&a<=i.value&&(e.value=a)},handleResize:d,isCardVisible:t=>{if(1===i.value)return!0;const n=(e.value-1)*a.value,o=n+a.value-1;return t>=n&&t<=o}}}const qe={key:0,class:"spinner-overlay"},We={class:"header-title"},ze={class:"masonry-grid"},Ue={class:"card-container"},Je={class:"custom-card"},$e={class:"card-container"},Xe={key:0,class:"custom-card"},Ze={key:1,class:"custom-card"},Ke={class:"custom-card card-margin-top"},Qe={key:0,class:"card-container"},ea={class:"custom-card"},aa={class:"custom-card card-margin-top"},ta={class:"card-container"},na={class:"custom-card"},ia={key:0,class:"custom-card card-margin-top"},oa={class:"footer-content"},la={class:"footer-buttons-left"},ra={key:0,class:"pagination-dots"},da=["onClick","aria-label"],ua={class:"footer-buttons-right"},sa=n({__name:"Registration",props:{editMode:{type:Boolean,default:!1}},setup(e){const a=D(!1),t=L(),n=D(null),o=D(null),l=D(null),r=D(null),d=D(null),u=D(null),s=D(null),c=D(null),m=D({personalInformationRef:n,birthRegistrationRef:o,socialHistoryRef:l,countryRef:r,currentLocationRef:d,homeLocationRef:u,guardianInformationRef:s,patientTypeRef:c}),p=F(()=>{var e;return(null===(e=n.value)||void 0===e?void 0:e.currentFormValues)||{}}),S=F(()=>{var e;return(null===(e=o.value)||void 0===e?void 0:e.currentFormValues)||{}}),P=F(()=>{var e;return(null===(e=l.value)||void 0===e?void 0:e.currentFormValues)||{}}),V=F(()=>{var e;return(null===(e=r.value)||void 0===e?void 0:e.currentFormValues)||{}}),C=F(()=>{var e;return(null===(e=d.value)||void 0===e?void 0:e.currentFormValues)||{}}),q=F(()=>{var e;return(null===(e=u.value)||void 0===e?void 0:e.currentFormValues)||{}}),W=F(()=>{var e;return(null===(e=s.value)||void 0===e?void 0:e.currentFormValues)||{}}),z=F(()=>{var e;return(null===(e=c.value)||void 0===e?void 0:e.currentFormValues)||{}}),U=F(()=>({personalInformation:p.value,birthRegistration:S.value,socialHistory:P.value,country:V.value,currentLocation:C.value,homeLocation:q.value,guardianInformation:W.value,patientType:z.value})),J=()=>{const e=Object.values(m.value);return e.forEach(e=>null==e?void 0:e.validateForm()),e.every(e=>null==(null==e?void 0:e.validateForm()))},Z=F(()=>(new Ee).checkIfChild(p.value)),{nextPage:K,prevPage:Q,goToPage:ee,isCardVisible:ae,showPreviousButton:te,showPaginationButtons:ie,totalPages:oe,currentPage:le,showNextButton:re}=Ge(),{setFormValues:de}=function(){const e=ne(),{patient:a}=N(e),t=e=>{var t,n;const i=null==a||null===(t=a.value)||void 0===t||null===(t=t.guardianInformation)||void 0===t?void 0:t.saved[0],o=null!=i&&null!==(n=i.relationship_type)&&void 0!==n&&n.b_is_to_a?{name:i.relationship_type.b_is_to_a,id:i.relationship_type.relationship_type_id,trackByID:i.relationship_type.relationship_type_id+i.relationship_type.b_is_to_a}:"";null==e||e.setFormValue("guardianNationalID",(null==i?void 0:i.national_id)||""),null==e||e.setFormValue("guardianFirstname",(null==i?void 0:i.given_name)||""),null==e||e.setFormValue("guardianMiddleName",(null==i?void 0:i.middle_name)||""),null==e||e.setFormValue("guardianLastname",(null==i?void 0:i.family_name)||""),null==e||e.setFormValue("guardianPhoneNumber",null!=i&&i.cell_phone_number?null==i?void 0:i.cell_phone_number:""),null==e||e.setFormValue("relationship",o||"")};return{setFormValues:e=>{var n,i;const{personalInformationRef:o,socialHistoryRef:l,countryRef:r,currentLocationRef:d,homeLocationRef:u,guardianInformationRef:s}=e.value,c=null==a||null===(n=a.value)||void 0===n?void 0:n.personInformation;null==o||o.setFormValue("nationalID",null==a||null===(i=a.otherPersonInformation)||void 0===i?void 0:i.nationalID),null==o||o.setFormValue("firstname",null==c?void 0:c.given_name),null==o||o.setFormValue("middleName",null==c?void 0:c.middle_name),null==o||o.setFormValue("lastname",null==c?void 0:c.family_name),null==o||o.setFormValue("gender",null==c?void 0:c.gender),null==o||o.setFormValue("birthdate",null!=c&&c.birthdate?$.toStandardHisDisplayFormat(null==c?void 0:c.birthdate):""),null==o||o.setFormValue("Phone Number",null!=c&&c.cell_phone_number?null==c?void 0:c.cell_phone_number:""),null==u||u.setFormValue("home_district",{name:null==c?void 0:c.home_district}),null==u||u.setFormValue("home_traditional_authority",{name:null==c?void 0:c.home_traditional_authority}),null==u||u.setFormValue("home_village",{name:null==c?void 0:c.home_village}),null==d||d.setFormValue("current_district",{name:null==c?void 0:c.current_district}),null==d||d.setFormValue("current_traditional_authority",{name:null==c?void 0:c.current_traditional_authority}),null==d||d.setFormValue("current_village",{name:null==c?void 0:c.current_village}),null==d||d.setFormValue("closestLandmark",{name:null==c?void 0:c.landmark}),null==r||r.setFormValue("country",null!=c&&c.country?{name:null==c?void 0:c.country}:{name:"Malawi"}),null==l||l.setFormValue("religion",{name:null==c?void 0:c.religion}),null==l||l.setFormValue("occupation",null==c?void 0:c.occupation),null==l||l.setFormValue("maritalStatus",null==c?void 0:c.marital_status),null==l||l.setFormValue("highestLevelOfEducation",null==c?void 0:c.education_level),t(s)}}}(),ue=async()=>{J()?await(new Ee).saveRegistrationData(U.value)&&(Object.values(m.value).forEach(e=>null==e?void 0:e.resetForm()),32==X.getProgramID()?se("/NCDEnrollment"):se("/patientProfile")):ce("Please fill in all required fields")},se=e=>{t.push({path:e})};return B(async()=>{de(m)}),(t,m)=>(f(),x(k(G),{class:j({loading:a.value})},{default:b(()=>[a.value?(f(),h("div",qe,[g(k(M),{name:"bubbles"}),m[4]||(m[4]=y("div",{class:"loading-text"},"Please wait...",-1))])):_("",!0),g(k(E),null,{default:b(()=>[y("div",We,T(e.editMode?"Edit Patient Demographic":"New Patient Registration"),1)]),_:1}),g(k(H),null,{default:b(()=>{var a,t;return[y("div",ze,[A(y("div",Ue,[y("div",Je,[g(xe,{ref_key:"personalInformationRef",ref:n},null,512)])],512),[[O,k(ae)(0)]]),A(y("div",$e,[Z.value.underNineMonths&&!e.editMode?(f(),h("div",Xe,[Z.value.underNineMonths?(f(),x(je,{key:0,ref_key:"birthRegistrationRef",ref:o},null,512)):_("",!0)])):_("",!0),Z.value.moreThanThirteenYears?(f(),h("div",Ze,[g(Oe,{ref_key:"socialHistoryRef",ref:l},null,512)])):_("",!0),y("div",Ke,[g(Fe,{ref_key:"countryRef",ref:r},null,512)])],512),[[O,k(ae)(1)]]),null!==(a=V.value)&&void 0!==a&&null!==(a=a.country)&&void 0!==a&&a.name&&"Malawi"!==(null===(t=V.value)||void 0===t||null===(t=t.country)||void 0===t?void 0:t.name)?_("",!0):A((f(),h("div",Qe,[y("div",ea,[g(be,{ref_key:"currentLocationRef",ref:d},null,512)]),y("div",aa,[g(De,{currentLocationFormValues:C.value,ref_key:"homeLocationRef",ref:u},null,8,["currentLocationFormValues"])])],512)),[[O,k(ae)(2)]]),A(y("div",ta,[y("div",na,[g(Ae,{personalInformationFormValues:p.value,ref_key:"guardianInformationRef",ref:s},null,8,["personalInformationFormValues"])]),1==k(X).getProgramID()?(f(),h("div",ia,[g(Ye,{ref_key:"patientTypeRef",ref:c},null,512)])):_("",!0)],512),[[O,k(ae)(3)]])])]}),_:1}),g(k(Y),null,{default:b(()=>[y("div",oa,[y("div",la,[g(k(i),{color:"danger","aria-label":"Cancel registration",onClick:m[0]||(m[0]=a=>e.editMode?(async()=>{await me("Do you want to cancel editing of demographics?","",{confirmBtnLabel:"Yes",icon:"",showBackdrop:!0})&&v.dismiss()})():(async()=>{await me("Do you want to cancel registration?","",{confirmBtnLabel:"Yes",icon:"",showBackdrop:!0})&&se("/home")})())},{default:b(()=>m[5]||(m[5]=[I("Cancel")])),_:1,__:[5]}),A(g(k(i),{onClick:m[1]||(m[1]=e=>k(Q)()),"aria-label":"Go to previous page"},{default:b(()=>m[6]||(m[6]=[I("Previous")])),_:1,__:[6]},512),[[O,k(te)]])]),k(ie)?(f(),h("div",ra,[(f(!0),h(w,null,R(k(oe),e=>(f(),h("span",{key:e,class:j({dot:!0,active:e===k(le)}),onClick:a=>k(ee)(e),"aria-label":`Go to page ${e}`,role:"button"},null,10,da))),128))])):_("",!0),y("div",ua,[A(g(k(i),{name:"Save",onClick:m[2]||(m[2]=a=>e.editMode?(async()=>{J()?await(new Ee).updateDemographics(U.value)&&v.dismiss():ce("Please fill in all required fields")})():ue()),"aria-label":"Save patient data"},{default:b(()=>[I(T(e.editMode?"Update":"Save"),1)]),_:1},512),[[O,k(le)===k(oe)]]),A(g(k(i),{onClick:m[3]||(m[3]=e=>k(K)()),"aria-label":"Go to next page"},{default:b(()=>m[7]||(m[7]=[I("Next")])),_:1,__:[7]},512),[[O,k(re)]])])])]),_:1})]),_:1},8,["class"]))}}),ca=a("R",U(sa,[["__scopeId","data-v-d5a6ac21"]])),ma=Object.freeze(Object.defineProperty({__proto__:null,default:ca},Symbol.toStringTag,{value:"Module"}));a("e",ma)}}})}();
