import{L as S,_ as j}from"./index-DuNDgd8X.js";import{d as N,r as l,w as p,a as q,E as v,e as G,f as y,l as s,z as r,k as C,u as D,av as E,p as k,y as x,m as V,A as L,B,F as H}from"./vendor-Ddb6Z0_s.js";const J=N({name:"xxxComponent"}),K=N({...J,props:{show_error:{type:Boolean,default:!1},selected_district_ids:{default:()=>[]},selected_location:{default:null}},emits:["facilitySelected"],setup(A,{emit:z}){const b=l(!1),f=l([]),o=l(null),d=l(null),i=l(!1),I=l([]),h=l(!1),n=l([]),_=l(),c=A;p(()=>c.selected_district_ids,async t=>{try{n.value=await m(),Array.isArray(t)&&t.length>0&&n.value.forEach(e=>{t.forEach(u=>{e.id==u&&(d.value=e)})})}catch(e){console.error("Error in selected_district_ids watch:",e)}},{immediate:!0,deep:!0}),p(()=>c.selected_location,async t=>{try{n.value=await m(),t&&(o.value=t)}catch(e){console.error("Error in selected_location watch:",e)}},{immediate:!0,deep:!0}),q(async()=>{n.value=await m()}),p(()=>c.show_error,()=>{O()});const O=()=>{b.value=c.show_error,i.value=c.show_error};function U(t,e=!1){t&&(e&&(o.value=null,d.value=t),_.value=t.id,I.value=[t.id],M(t),g({selected_district_ids:_.value,selected_location:null}),i.value=!1)}async function M(t){f.value=[];try{const e=await S.getOfflineDistrictFacilities(t.name.toLowerCase());f.value=e}catch(e){console.error("Error fetching facilities for district ".concat(t.name,":"),e)}}async function m(){try{return await S.getOfflineFacilityDistricts()}catch(t){return console.error("Error fetching facility districts:",t),[]}}function T(t){o.value=t,g({selected_district_ids:[_.value],selected_location:o.value})}const $=z;function g(t){$("facilitySelected",t)}return(t,e)=>{const u=v("ion-label"),w=v("ion-col"),F=v("ion-row");return y(),G(H,null,[s(F,null,{default:r(()=>[s(w,null,{default:r(()=>[s(D(E),{modelValue:d.value,"onUpdate:modelValue":[e[0]||(e[0]=a=>d.value=a),e[1]||(e[1]=a=>U(a,!0))],multiple:!1,taggable:!1,"hide-selected":!0,"close-on-select":!0,openDirection:"bottom","tag-placeholder":"Find and select District",placeholder:"Find and select District",selectLabel:"",label:"name",searchable:!0,onSearchChange:e[2]||(e[2]=()=>{}),"track-by":"id",options:n.value,disabled:h.value,class:k({"error-state":i.value})},null,8,["modelValue","options","disabled","class"]),C("div",null,[i.value?(y(),x(u,{key:0,class:"error-label"},{default:r(()=>e[5]||(e[5]=[L(B("Select district"))])),_:1,__:[5]})):V("",!0)])]),_:1})]),_:1}),s(F,null,{default:r(()=>[s(w,null,{default:r(()=>[s(D(E),{modelValue:o.value,"onUpdate:modelValue":[e[3]||(e[3]=a=>o.value=a),e[4]||(e[4]=a=>T(a))],multiple:!1,taggable:!1,"hide-selected":!0,"close-on-select":!0,openDirection:"bottom","tag-placeholder":"Find and select facility",placeholder:"Find and select facility",selectLabel:"",label:"name",searchable:!0,disabled:h.value,onSearchChange:()=>{},"track-by":"code",options:f.value,class:k({"error-state":i.value})},null,8,["modelValue","disabled","options","class"]),C("div",null,[b.value?(y(),x(u,{key:0,class:"error-label"},{default:r(()=>e[6]||(e[6]=[L(B("Select location"))])),_:1,__:[6]})):V("",!0)])]),_:1})]),_:1})],64)}}}),R=j(K,[["__scopeId","data-v-fb908692"]]);export{R as S};
