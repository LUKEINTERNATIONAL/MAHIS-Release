import{d as Y,ao as K,U as me,T as pe,ap as he,ak as Z,G as W,S as ve,ah as fe,a9 as Oe,aa as xe,E as L,e as i,f as n,k as s,l as a,a$ as At,r as g,c as le,a as Ge,m as S,y as B,z as l,u as m,A as x,F as H,W as Q,I as Me,e1 as fs,be as Bt,e2 as gs,cQ as ys,e3 as _s,e4 as bs,e5 as Ds,e6 as Ss,c$ as ks,e7 as Cs,e8 as Is,aw as $t,aA as ws,bU as Es,ay as Nt,aP as Os,B as M,L as U,w as Ee,al as Ls,am as Ps,ab as ze,bv as Ms,bu as xs,d3 as As,M as Re,J as ce,D as G,bx as oe,ai as Bs,X as lt,a8 as Rt,V as $s,an as Ns,dr as Rs,dy as Fs,b8 as Ts,aR as Hs,R as Vs,i as Us,e9 as Ws,v as qs,bo as tt,bq as Gs,ag as zs,bS as Ys,bI as Ks,aj as Ct}from"./vendor-BV0gyDVt.js";import{aE as Ae,H as re,a8 as _e,aB as rt,aC as dt,aV as Ft,u as Ie,_ as J,i as de,ar as We,as as Js,D as be,x as N,S as ue,E as It,t as Fe,z as Ye,ay as z,aK as $e,be as Ne,bx as js,aM as Tt,aY as Xs,a3 as qe,by as st,bz as Qs,bA as Zs,bB as ea,bC as ta,bD as sa,bE as aa,aW as na,b0 as ia,bc as ke,b1 as Ce,aX as wt,B as ct,aZ as Et,P as oa,aP as Ot,aF as Ht,F as la,aT as at,n as Te,y as nt,aw as ra,az as ge,k as da,l as it,ao as ca,aA as ua,aD as ot,p as ma,m as pa,a1 as Pe,aJ as ha,ak as va}from"./index-1YBLjhMF.js";import{B as X}from"./BasicForm-FP_QVSX9.js";import{l as ye}from"./lodash-Dt8AsbQm.js";import{P as fa}from"./patient_complaints_service-ClM0uHML.js";import{D as Ke}from"./DashBox-CtLmLXAv.js";import{u as ga}from"./useExposeFromStandardForm-DdMfwyUB.js";import{A as ya,_ as _a,P as ba,D as Da,n as Sa}from"./NextAppointment-rB7LsCBc.js";import{B as ka}from"./BasicCard-C5CroCd6.js";import{S as Ca,a as Ia,P as wa,u as Lt,b as Ea}from"./lab_order-CZVng7NI.js";import Oa from"./LabTestsHistory-B9yf21RY.js";import{v as Pt}from"./group_validation-BDj4UbNl.js";import{D as La,b as Pa}from"./drug_prescription_service-D6N8YCPa.js";import{D as Mt}from"./drug_service-1xjEj5vG.js";import{D as Ma,A as xa,R as Aa,a as Ba}from"./Outcome-D4talkAa.js";const $a=Y({name:"Menu",components:{IonContent:fe,IonHeader:ve,IonItem:W,IonList:Z,IonMenu:he,IonTitle:pe,IonToolbar:me,List:Ae},computed:{...K(Ie,["patient"]),...K(Ft,["presentingComplaints"])},data(){return{valueNumericArray:[],obsDatetime:[],graphIcon:dt(["#006401"]),listIcon:rt(["#636363"]),displayGraph:!0,orders:[],height:[],BMI:[],iconBg:{},activeWeight:[],activeHeight:[],activeBMI:[],list:[],series:[{name:"",data:[]}]}},setup(){return{checkmark:xe,pulseOutline:Oe}},watch:{$router:{async handler(){await this.updateList()},immediate:!0,deep:!0},patient:{async handler(){await this.updateList()},deep:!0}},async mounted(){await this.updateList()},methods:{async updateList(){const e=await _e.getAll(this.patient.patientID,"Presenting complaint"),t=ye.isEmpty(e)?[]:Promise.all(e.map(async r=>r.value_coded?{name:await _e.getConceptName(r.value_coded),obs_date:r.obs_datetime,duration:r.children[0].value_text}:[]));this.setListData(await t)},setListData(e){this.list=[],this.list.push({actionBtn:!1,class:"col_background",header:!0,minHeight:"--min-height: 20px;",containSize:4,display:["Date","Presenting Complains","Duration"]}),e.forEach(t=>{this.list.push({actionBtn:!1,minHeight:"--min-height:20px;",class:"col_background",containSize:4,display:[re.toStandardHisFormat(t.obs_date),t.name,t.duration]})})}}}),Na={class:"modal_wrapper"};function Ra(e,t,r,y,d,f){const o=L("list");return n(),i("div",Na,[s("div",null,[a(o,{listData:e.list},null,8,["listData"])])])}const Fa=J($a,[["render",Ra],["__scopeId","data-v-30434e22"]]),Ta={key:0},Ha={style:{"align-content":"center"}},Va={class:"ion-padding",slot:"content"},Ua=Y({__name:"PresentingComplaints",setup(e,{expose:t}){const r=Ft(),{presentingComplaints:y}=At(r),d=g(de),f=g(!0),o=g(!1),v=g(!0),b=g(!1),c=g([]),_=g([]),u=g(),k=le(()=>[{componentType:"multiSelectInputField",header:"Presenting Complaints",name:"PresentingComplaints",trackBy:"concept_id",icon:de.search,hideSelected:!0,validation:P=>C(P==null?void 0:P.name,c.value)?"Presenting complaint already added":We.required(P),options:_.value,grid:{s:"6"}},{componentType:"inputField",header:"Duration",name:"duration",icon:de.time,validation:P=>We.isNotEmptyandNumber(P),grid:{s:"6"},unitOptions:[{label:"Hours",value:"Hours"},{label:"Days",value:"Days"},{label:"Months",value:"Months"},{label:"Years",value:"Years"}],unitValidation:P=>!P||P===""?"Please select a unit.":null},{componentType:"inputField",header:"Specify the presenting complaint(s)",name:"Other (specify)",icon:de.editPen,validation:P=>C(P,c.value)?"Presenting complaint already added":We.required(P),condition:P=>{var $;return(($=P==null?void 0:P.PresentingComplaints)==null?void 0:$.name)==="Other"}},{componentType:"Alert",condition:P=>{var $;return We.required(($=P==null?void 0:P.PresentingComplaints)==null?void 0:$.name)!=null},backgroundColor:"lightyellow",textColor:"black",value:"Please search thoroughly for the complaint. If it is not listed, search and select the 'Other' option to specify the complaint.",name:"noMatchAlert"}]),{formRef:O}=ga(),A=async()=>{_.value=await fa.getComplaintsList("Presenting complaint"),N(y.value,"PresentingComplaints","multiSelectData",_.value)},I=()=>{f.value=!1,v.value=!1,o.value=!0},w=async()=>{var R,F;const P=(R=O.value)==null?void 0:R.getFormValues();((F=O.value)==null?void 0:F.validateForm())==null&&(p(P),o.value=!1,v.value=!0)},p=P=>{var j;const $=P.duration+" "+P.duration_unit,R=P.PresentingComplaints,F=R.name==="Other"?P["Other (specify)"]:R.name;c.value.push({actionBtn:!0,btn:["delete"],name:F,concept_id:R.concept_id,duration:R.duration,durationUnits:R.duration_unit,display:[F,$],data:[{concept_id:8578,value_coded:R.concept_id,obs_datetime:ue.getSessionDate(),child:[{concept_id:R.concept_id,value_text:$,obs_datetime:ue.getSessionDate()}]}]}),(j=O.value)==null||j.resetForm(),b.value=!0},C=(P,$)=>$.some(R=>R.name===P),ee=P=>{c.value=c.value.filter($=>$.display[0]!==P.name)},te=async()=>{const P=await _e.getLatestObs(It.PRESENTING_COMPLAINTS),$=c.value.flatMap(F=>F.data);if($.length<=0&&P.length<=0)return Fe("Presenting complaints is required");if($.length<=0)return;const R=await _e.obsValuesWithEncounterType($,It.PRESENTING_COMPLAINTS);await _e.buildObs(R),Ye("Presenting complaints saved successful"),c.value=[]};return Ge(async()=>{await A()}),t({onSubmit:te}),(P,$)=>{const R=L("ion-row"),F=L("ion-label"),j=L("ion-accordion"),ie=L("ion-accordion-group");return n(),i(H,null,[a(Ke,{status:f.value,content:"No presenting complaints added"},null,8,["status"]),b.value?(n(),i("span",Ta,[a(Ae,{listData:c.value,"onClicked:delete":ee},null,8,["listData"])])):S("",!0),o.value?(n(),B(R,{key:1},{default:l(()=>[a(Js,{formData:k.value,ref_key:"formRef",ref:O},null,8,["formData"]),s("div",Ha,[a(be,{fill:"clear",icon:d.value.plus,iconSlot:"icon-only","onClicked:btn":$[0]||($[0]=He=>w()),name:"Save"},null,8,["icon"])])]),_:1})):S("",!0),v.value?(n(),B(R,{key:2,style:{"margin-top":"10px"}},{default:l(()=>[a(be,{fill:"clear",icon:d.value.plus,iconSlot:"icon-only","onClicked:btn":$[1]||($[1]=He=>I()),name:"Add new presenting complaints"},null,8,["icon"])]),_:1})):S("",!0),a(R,null,{default:l(()=>[a(ie,{ref_key:"accordionGroup",ref:u,class:"previousView"},{default:l(()=>[a(j,{value:"first","toggle-icon-slot":"start",style:{"border-radius":"10px","background-color":"#fff"}},{default:l(()=>[a(m(W),{slot:"header",color:"light"},{default:l(()=>[a(F,{class:"previousLabel"},{default:l(()=>$[2]||($[2]=[x("Previous presenting complaints")])),_:1,__:[2]})]),_:1}),s("div",Va,[a(Fa)])]),_:1})]),_:1},512)]),_:1})],64)}}}),Wa=J(Ua,[["__scopeId","data-v-54a39f14"]]),qa=Y({name:"VisitHistory",components:{IonIcon:Me,IonButton:Q},setup(){const e=Tt();return{selectedAllergiesList2:le(()=>e.selectedMedicalAllergiesList),calendarOutline:Os,alertCircleOutline:Nt,documentTextOutline:Es,femaleOutline:ws,medicalOutline:$t,warningOutline:Is,bodyOutline:Cs,eyeOutline:ks,nutritionOutline:Ss,fitnessOutline:Ds,pulseOutline:Oe,earOutline:bs,happyOutline:_s,manOutline:ys,moveOutline:gs,addOutline:Bt,scanOutline:fs}},data(){return{visits:[],visitDate:null,presentingComplaint:[],pastMedicalHistory:[],levelOfConsciousness:{eyeResponse:null,verbalResponse:null,motorResponse:null},pregnancy:{patientPregnant:null,breastFeeding:null},eyesAbnormal:[],mouthAbnormal:[],earsAbnormal:[],faceAbnormal:[],neckAbnormal:[],chestAbnormal:[],chestMovementAbnormal:[],heartSoundsAbnormal:[],breathSoundsAbnormal:[],addedBreathSoundsAbnormal:[],abdominalInspectionAbnormal:[],eyesExamined:!1,mouthExamined:!1,earsExamined:!1,faceExamined:!1,neckExamined:!1,chestExamined:!1,chestMovementExamined:!1,heartSoundsExamined:!1,breathSoundsExamined:!1,addedBreathSoundsExamined:!1,abdominalInspectionExamined:!1}},computed:{...K(Ie,["patient"]),hasLevelOfConsciousness(){return this.levelOfConsciousness.eyeResponse||this.levelOfConsciousness.verbalResponse||this.levelOfConsciousness.motorResponse},hasPresentingComplaints(){var e;return((e=this.uniquePresentingComplaints)==null?void 0:e.length)>0},hasPregnancyData(){return this.pregnancy.patientPregnant||this.pregnancy.breastFeeding},hasPastMedicalHistory(){var e;return((e=this.uniquePastMedicalHistory)==null?void 0:e.length)>0},hasAllergies(){var e,t;return((t=(e=this.selectedAllergiesList2)==null?void 0:e.filter(r=>r.selected))==null?void 0:t.length)>0},hasPhysicalExam(){var e,t,r,y,d,f,o,v,b,c,_;return((e=this.eyesAbnormal)==null?void 0:e.length)>0||this.eyesExamined||((t=this.mouthAbnormal)==null?void 0:t.length)>0||this.mouthExamined||((r=this.earsAbnormal)==null?void 0:r.length)>0||this.earsExamined||((y=this.faceAbnormal)==null?void 0:y.length)>0||this.faceExamined||((d=this.neckAbnormal)==null?void 0:d.length)>0||this.neckExamined||((f=this.chestAbnormal)==null?void 0:f.length)>0||this.chestExamined||((o=this.chestMovementAbnormal)==null?void 0:o.length)>0||this.chestMovementExamined||((v=this.heartSoundsAbnormal)==null?void 0:v.length)>0||this.heartSoundsExamined||((b=this.breathSoundsAbnormal)==null?void 0:b.length)>0||this.breathSoundsExamined||((c=this.addedBreathSoundsAbnormal)==null?void 0:c.length)>0||this.addedBreathSoundsExamined||((_=this.abdominalInspectionAbnormal)==null?void 0:_.length)>0||this.abdominalInspectionExamined},uniquePastMedicalHistory(){return[...new Map(this.pastMedicalHistory.map(e=>[e,e])).values()]},uniquePresentingComplaints(){return[...new Map(this.presentingComplaint.map(e=>[e,e])).values()]}},methods:{formatVisitDate(e){return e?re.toStandardHisDisplayFormat(e):"No visit date"},async updateData(){var t,r;if(!((t=this.patient)!=null&&t.patientID))return;const e=await js(this.patient.patientID);e&&(this.visits=((r=e.visits)==null?void 0:r.visitsDates)||[],this.visits.length>0&&await this.loadSavedEncounters(this.visits[0]))},async loadSavedEncounters(e){this.visitDate=e;const t=$e("presentingComplaints"),r=$e("pastMedicalHistory"),y=$e("levelOfConsciousness"),d=$e("pregnancy"),f=$e("physicalExam"),o=Ne(t),v=Ne(r),b=Ne(y),c=Ne(d),_=Ne(f);await this.setPresentingComplainsEncounters(o),await this.setPastMedicalHistoryEncounters(v),await this.setLevelOfConsciousnessEncounters(b),await this.setPregnancyStatusEncounters(c),await this.setPhysicalExamEncounters(_)},filterObs(e,t){return e?e.filter(r=>{var y,d;return((d=(y=r.concept)==null?void 0:y.concept_names)==null?void 0:d.some(f=>f.name===t))||r.concept_name===t}):[]},async getConceptValues(e,t){return e?await Promise.all(e.map(async r=>r.value_coded?await z.getConceptName(r.value_coded):r.concept_name||r.name)):[]},async setPresentingComplainsEncounters(e){this.presentingComplaint=await this.getConceptValues(this.filterObs(e,"Presenting complaint"),"coded")},async setLevelOfConsciousnessEncounters(e){if(e&&Array.isArray(e)){const t=this.filterObs(e,"Eye opening response");this.levelOfConsciousness.eyeResponse=t.length>0?await z.getConceptName(t[0].value_coded):null;const r=this.filterObs(e,"Best verbal response");this.levelOfConsciousness.verbalResponse=r.length>0?await z.getConceptName(r[0].value_coded):null;const y=this.filterObs(e,"Best motor response");this.levelOfConsciousness.motorResponse=y.length>0?await z.getConceptName(y[0].value_coded):null}},async setPregnancyStatusEncounters(e){if(e&&Array.isArray(e)){const t=this.filterObs(e,"Patient pregnant");this.pregnancy.patientPregnant=t.length>0?await z.getConceptName(t[0].value_coded):null;const r=this.filterObs(e,"Is patient breast feeding?");this.pregnancy.breastFeeding=r.length>0?await z.getConceptName(r[0].value_coded):null}},async setPhysicalExamEncounters(e){var t,r,y,d,f,o,v,b;if(!(!e||!Array.isArray(e))){this.eyesAbnormal=[],this.mouthAbnormal=[],this.earsAbnormal=[],this.faceAbnormal=[],this.neckAbnormal=[],this.chestAbnormal=[],this.chestMovementAbnormal=[],this.heartSoundsAbnormal=[],this.breathSoundsAbnormal=[],this.addedBreathSoundsAbnormal=[],this.abdominalInspectionAbnormal=[],this.eyesExamined=!1,this.mouthExamined=!1,this.earsExamined=!1,this.faceExamined=!1,this.neckExamined=!1,this.chestExamined=!1,this.chestMovementExamined=!1,this.heartSoundsExamined=!1,this.breathSoundsExamined=!1,this.addedBreathSoundsExamined=!1,this.abdominalInspectionExamined=!1;for(const c of e){if(!c.concept_name&&!((t=c.concept)!=null&&t.concept_names))continue;const _=c.concept_name||((d=(y=(r=c.concept)==null?void 0:r.concept_names)==null?void 0:y.find(u=>u.concept_name_type==="FULLY_SPECIFIED"))==null?void 0:d.name);_&&(_.includes("normal")||_.includes("Normal"))&&c.value_coded===1065&&(_.includes("Eyes normal")?this.eyesExamined=!0:_.includes("Mouth normal")?this.mouthExamined=!0:_.includes("Ears normal")?this.earsExamined=!0:_.includes("Face normal")?this.faceExamined=!0:_.includes("Neck normal")?this.neckExamined=!0:_.includes("Chest inspection normal")?this.chestExamined=!0:_.includes("Heart sounds normal")?this.heartSoundsExamined=!0:_.includes("Breath sounds normal")?this.breathSoundsExamined=!0:_.includes("Abdominal inspection normal")&&(this.abdominalInspectionExamined=!0))}for(const c of e){if(!c.concept_name&&!((f=c.concept)!=null&&f.concept_names))continue;const _=c.concept_name||((b=(v=(o=c.concept)==null?void 0:o.concept_names)==null?void 0:v.find(u=>u.concept_name_type==="FULLY_SPECIFIED"))==null?void 0:b.name);if(_&&!(_.includes("normal")||_.includes("Normal"))){if(_.includes("Abnormality for eyes"))if(this.eyesExamined=!0,c.value_coded){const u=await z.getConceptName(c.value_coded);u&&u.toLowerCase()!=="no"&&u.toLowerCase()!=="normal"&&this.eyesAbnormal.push(u)}else c.value_text&&this.eyesAbnormal.push(c.value_text);else if(_.includes("Abnormality for mouth"))if(this.mouthExamined=!0,c.value_coded){const u=await z.getConceptName(c.value_coded);u&&u.toLowerCase()!=="no"&&u.toLowerCase()!=="normal"&&this.mouthAbnormal.push(u)}else c.value_text&&this.mouthAbnormal.push(c.value_text);else if(_.includes("Abnormality for ears"))if(this.earsExamined=!0,c.value_coded){const u=await z.getConceptName(c.value_coded);u&&u.toLowerCase()!=="no"&&u.toLowerCase()!=="normal"&&this.earsAbnormal.push(u)}else c.value_text&&this.earsAbnormal.push(c.value_text);else if(_.includes("Abnormality for face"))if(this.faceExamined=!0,c.value_coded){const u=await z.getConceptName(c.value_coded);u&&u.toLowerCase()!=="no"&&u.toLowerCase()!=="normal"&&this.faceAbnormal.push(u)}else c.value_text&&this.faceAbnormal.push(c.value_text);else if(_.includes("Abnormality for neck"))if(this.neckExamined=!0,c.value_coded){const u=await z.getConceptName(c.value_coded);u&&u.toLowerCase()!=="no"&&u.toLowerCase()!=="normal"&&this.neckAbnormal.push(u)}else c.value_text&&this.neckAbnormal.push(c.value_text);else if(_.includes("Abnormality for chest inspection"))if(this.chestExamined=!0,c.value_coded){const u=await z.getConceptName(c.value_coded);u&&u.toLowerCase()!=="no"&&u.toLowerCase()!=="normal"&&this.chestAbnormal.push(u)}else c.value_text&&this.chestAbnormal.push(c.value_text);else if(_.includes("Chest movements"))if(this.chestMovementExamined=!0,c.value_coded){const u=await z.getConceptName(c.value_coded);u&&u.toLowerCase()!=="no"&&u.toLowerCase()!=="normal"&&this.chestMovementAbnormal.push(u)}else c.value_text&&this.chestMovementAbnormal.push(c.value_text);else if(_.includes("Heart sounds abnormality"))if(this.heartSoundsExamined=!0,c.value_coded){const u=await z.getConceptName(c.value_coded);u&&u.toLowerCase()!=="no"&&u.toLowerCase()!=="normal"&&this.heartSoundsAbnormal.push(u)}else c.value_text&&this.heartSoundsAbnormal.push(c.value_text);else if(_.includes("Breath sounds abnormality"))if(this.breathSoundsExamined=!0,c.value_coded){const u=await z.getConceptName(c.value_coded);u&&u.toLowerCase()!=="no"&&u.toLowerCase()!=="normal"&&this.breathSoundsAbnormal.push(u)}else c.value_text&&this.breathSoundsAbnormal.push(c.value_text);else if(_.includes("Abnormalities when added"))if(this.addedBreathSoundsExamined=!0,c.value_coded){const u=await z.getConceptName(c.value_coded);u&&u.toLowerCase()!=="no"&&u.toLowerCase()!=="normal"&&this.addedBreathSoundsAbnormal.push(u)}else c.value_text&&this.addedBreathSoundsAbnormal.push(c.value_text);else if(_.includes("Abdominal inspection abnormality"))if(this.abdominalInspectionExamined=!0,c.value_coded){const u=await z.getConceptName(c.value_coded);u&&u.toLowerCase()!=="no"&&u.toLowerCase()!=="normal"&&this.abdominalInspectionAbnormal.push(u)}else c.value_text&&this.abdominalInspectionAbnormal.push(c.value_text)}}}},async setPastMedicalHistoryEncounters(e){this.pastMedicalHistory=await this.getConceptValues(this.filterObs(e,"Chronic disease"),"coded")}},watch:{patient:{async handler(){await this.updateData()},deep:!0}},async mounted(){await this.updateData()}}),Ga={class:"visit-container"},za={class:"visit-header"},Ya={class:"visit-date"},Ka={class:"visit-sections"},Ja={key:0,class:"visit-section"},ja={class:"section-header"},Xa={class:"section-content"},Qa={key:0,class:"info-item"},Za={class:"info-value"},en={key:1,class:"info-item"},tn={class:"info-value"},sn={key:2,class:"info-item"},an={class:"info-value"},nn={key:1,class:"empty-section"},on={key:2,class:"visit-section"},ln={class:"section-header"},rn={class:"tags-container"},dn={key:3,class:"empty-section"},cn={key:4,class:"visit-section"},un={class:"section-header"},mn={class:"section-content"},pn={key:0,class:"info-item"},hn={class:"info-value highlight"},vn={key:1,class:"info-item"},fn={class:"info-value highlight"},gn={key:5,class:"empty-section"},yn={key:6,class:"visit-section"},_n={class:"section-header"},bn={class:"tags-container"},Dn={key:7,class:"empty-section"},Sn={key:8,class:"visit-section"},kn={class:"section-header"},Cn={class:"tags-container"},In={key:9,class:"empty-section"},wn={key:10,class:"visit-section"},En={class:"section-header"},On={class:"exam-section"},Ln={key:0,class:"exam-category"},Pn={class:"exam-category-header"},Mn={class:"exam-items"},xn={key:1,class:"exam-category normal"},An={class:"exam-category-header"},Bn={key:2,class:"exam-category"},$n={class:"exam-category-header"},Nn={class:"exam-items"},Rn={key:3,class:"exam-category normal"},Fn={class:"exam-category-header"},Tn={key:4,class:"exam-category"},Hn={class:"exam-category-header"},Vn={class:"exam-items"},Un={key:5,class:"exam-category normal"},Wn={class:"exam-category-header"},qn={key:6,class:"exam-category"},Gn={class:"exam-category-header"},zn={class:"exam-items"},Yn={key:7,class:"exam-category normal"},Kn={class:"exam-category-header"},Jn={key:8,class:"exam-category"},jn={class:"exam-category-header"},Xn={class:"exam-items"},Qn={key:9,class:"exam-category normal"},Zn={class:"exam-category-header"},ei={key:10,class:"exam-category"},ti={class:"exam-category-header"},si={class:"exam-items"},ai={key:11,class:"exam-category normal"},ni={class:"exam-category-header"},ii={key:12,class:"exam-category"},oi={class:"exam-category-header"},li={class:"exam-items"},ri={key:13,class:"exam-category normal"},di={class:"exam-category-header"},ci={key:14,class:"exam-category"},ui={class:"exam-category-header"},mi={class:"exam-items"},pi={key:15,class:"exam-category normal"},hi={class:"exam-category-header"},vi={key:16,class:"exam-category"},fi={class:"exam-items"},gi={key:17,class:"exam-category normal"},yi={key:18,class:"exam-category"},_i={class:"exam-category-header"},bi={class:"exam-items"},Di={key:19,class:"exam-category normal"},Si={class:"exam-category-header"},ki={key:20,class:"exam-category"},Ci={class:"exam-category-header"},Ii={class:"exam-items"},wi={key:21,class:"exam-category normal"},Ei={class:"exam-category-header"},Oi={key:11,class:"empty-section"};function Li(e,t,r,y,d,f){const o=L("ion-icon");return n(),i("div",Ga,[s("div",za,[t[0]||(t[0]=s("h5",null,"Patient's Clinical Assessment Summary",-1)),s("div",Ya,[a(o,{icon:e.calendarOutline},null,8,["icon"]),s("span",null,M(e.formatVisitDate(e.visitDate)),1)])]),s("div",Ka,[e.hasLevelOfConsciousness?(n(),i("div",Ja,[s("div",ja,[a(o,{icon:e.alertCircleOutline,class:"section-icon"},null,8,["icon"]),t[1]||(t[1]=s("h3",null,"Level of Consciousness",-1))]),s("div",Xa,[e.levelOfConsciousness.eyeResponse?(n(),i("div",Qa,[t[2]||(t[2]=s("span",{class:"info-label"},"Eye Response:",-1)),s("span",Za,M(e.levelOfConsciousness.eyeResponse),1)])):S("",!0),e.levelOfConsciousness.verbalResponse?(n(),i("div",en,[t[3]||(t[3]=s("span",{class:"info-label"},"Verbal Response:",-1)),s("span",tn,M(e.levelOfConsciousness.verbalResponse),1)])):S("",!0),e.levelOfConsciousness.motorResponse?(n(),i("div",sn,[t[4]||(t[4]=s("span",{class:"info-label"},"Motor Response:",-1)),s("span",an,M(e.levelOfConsciousness.motorResponse),1)])):S("",!0)])])):(n(),i("div",nn,[a(o,{icon:e.alertCircleOutline},null,8,["icon"]),t[5]||(t[5]=s("p",null,"No level of consciousness recorded",-1))])),e.hasPresentingComplaints?(n(),i("div",on,[s("div",ln,[a(o,{icon:e.documentTextOutline,class:"section-icon"},null,8,["icon"]),t[6]||(t[6]=s("h3",null,"Presenting Complaints",-1))]),s("div",rn,[(n(!0),i(H,null,U(e.uniquePresentingComplaints,(v,b)=>(n(),i("div",{class:"complaint-tag",key:b},M(v),1))),128))])])):(n(),i("div",dn,[a(o,{icon:e.documentTextOutline},null,8,["icon"]),t[7]||(t[7]=s("p",null,"No presenting complaints recorded",-1))])),e.hasPregnancyData?(n(),i("div",cn,[s("div",un,[a(o,{icon:e.femaleOutline,class:"section-icon"},null,8,["icon"]),t[8]||(t[8]=s("h3",null,"Pregnancy Status",-1))]),s("div",mn,[e.pregnancy.patientPregnant?(n(),i("div",pn,[t[9]||(t[9]=s("span",{class:"info-label"},"Pregnant:",-1)),s("span",hn,M(e.pregnancy.patientPregnant),1)])):S("",!0),e.pregnancy.breastFeeding?(n(),i("div",vn,[t[10]||(t[10]=s("span",{class:"info-label"},"Breastfeeding:",-1)),s("span",fn,M(e.pregnancy.breastFeeding),1)])):S("",!0)])])):(n(),i("div",gn,[a(o,{icon:e.femaleOutline},null,8,["icon"]),t[11]||(t[11]=s("p",null,"No pregnancy status recorded",-1))])),e.hasPastMedicalHistory?(n(),i("div",yn,[s("div",_n,[a(o,{icon:e.medicalOutline,class:"section-icon"},null,8,["icon"]),t[12]||(t[12]=s("h3",null,"Medical History",-1))]),s("div",bn,[(n(!0),i(H,null,U(e.uniquePastMedicalHistory,(v,b)=>(n(),i("div",{class:"medical-tag",key:b},M(v),1))),128))])])):(n(),i("div",Dn,[a(o,{icon:e.medicalOutline},null,8,["icon"]),t[13]||(t[13]=s("p",null,"No medical history recorded",-1))])),e.hasAllergies?(n(),i("div",Sn,[s("div",kn,[a(o,{icon:e.warningOutline,class:"section-icon"},null,8,["icon"]),t[14]||(t[14]=s("h3",null,"Allergies",-1))]),s("div",Cn,[e.item.selected?(n(!0),i(H,{key:0},U(e.selectedAllergiesList2,(v,b)=>(n(),i("div",{class:"allergy-tag",key:b},M(v.name),1))),128)):S("",!0)])])):(n(),i("div",In,[a(o,{icon:e.warningOutline},null,8,["icon"]),t[15]||(t[15]=s("p",null,"No allergies recorded",-1))])),e.hasPhysicalExam?(n(),i("div",wn,[s("div",En,[a(o,{icon:e.bodyOutline,class:"section-icon"},null,8,["icon"]),t[16]||(t[16]=s("h3",null,"Physical Examination",-1))]),s("div",On,[e.eyesAbnormal.length?(n(),i("div",Ln,[s("div",Pn,[a(o,{icon:e.eyeOutline},null,8,["icon"]),t[17]||(t[17]=s("h4",null,"Eyes",-1))]),s("div",Mn,[(n(!0),i(H,null,U(e.eyesAbnormal,(v,b)=>(n(),i("div",{class:"exam-item",key:"eyes-"+b},M(v),1))),128))])])):e.eyesExamined?(n(),i("div",xn,[s("div",An,[a(o,{icon:e.eyeOutline},null,8,["icon"]),t[18]||(t[18]=s("h4",null,"Eyes",-1))]),t[19]||(t[19]=s("div",{class:"exam-items"},[s("div",{class:"exam-item normal"}," Normal examination ")],-1))])):S("",!0),e.mouthAbnormal.length?(n(),i("div",Bn,[s("div",$n,[a(o,{icon:e.nutritionOutline},null,8,["icon"]),t[20]||(t[20]=s("h4",null,"Mouth",-1))]),s("div",Nn,[(n(!0),i(H,null,U(e.mouthAbnormal,(v,b)=>(n(),i("div",{class:"exam-item",key:"mouth-"+b},M(v),1))),128))])])):e.mouthExamined?(n(),i("div",Rn,[s("div",Fn,[a(o,{icon:e.nutritionOutline},null,8,["icon"]),t[21]||(t[21]=s("h4",null,"Mouth",-1))]),t[22]||(t[22]=s("div",{class:"exam-items"},[s("div",{class:"exam-item normal"}," Normal examination ")],-1))])):S("",!0),e.earsAbnormal.length?(n(),i("div",Tn,[s("div",Hn,[a(o,{icon:e.earOutline},null,8,["icon"]),t[23]||(t[23]=s("h4",null,"Ears",-1))]),s("div",Vn,[(n(!0),i(H,null,U(e.earsAbnormal,(v,b)=>(n(),i("div",{class:"exam-item",key:"ears-"+b},M(v),1))),128))])])):e.earsExamined?(n(),i("div",Un,[s("div",Wn,[a(o,{icon:e.earOutline},null,8,["icon"]),t[24]||(t[24]=s("h4",null,"Ears",-1))]),t[25]||(t[25]=s("div",{class:"exam-items"},[s("div",{class:"exam-item normal"}," Normal examination ")],-1))])):S("",!0),e.faceAbnormal.length?(n(),i("div",qn,[s("div",Gn,[a(o,{icon:e.happyOutline},null,8,["icon"]),t[26]||(t[26]=s("h4",null,"Face",-1))]),s("div",zn,[(n(!0),i(H,null,U(e.faceAbnormal,(v,b)=>(n(),i("div",{class:"exam-item",key:"face-"+b},M(v),1))),128))])])):e.faceExamined?(n(),i("div",Yn,[s("div",Kn,[a(o,{icon:e.happyOutline},null,8,["icon"]),t[27]||(t[27]=s("h4",null,"Face",-1))]),t[28]||(t[28]=s("div",{class:"exam-items"},[s("div",{class:"exam-item normal"}," Normal examination ")],-1))])):S("",!0),e.neckAbnormal.length?(n(),i("div",Jn,[s("div",jn,[a(o,{icon:e.manOutline},null,8,["icon"]),t[29]||(t[29]=s("h4",null,"Neck",-1))]),s("div",Xn,[(n(!0),i(H,null,U(e.neckAbnormal,(v,b)=>(n(),i("div",{class:"exam-item",key:"neck-"+b},M(v),1))),128))])])):e.neckExamined?(n(),i("div",Qn,[s("div",Zn,[a(o,{icon:e.manOutline},null,8,["icon"]),t[30]||(t[30]=s("h4",null,"Neck",-1))]),t[31]||(t[31]=s("div",{class:"exam-items"},[s("div",{class:"exam-item normal"}," Normal examination ")],-1))])):S("",!0),e.chestAbnormal.length?(n(),i("div",ei,[s("div",ti,[a(o,{icon:e.fitnessOutline},null,8,["icon"]),t[32]||(t[32]=s("h4",null,"Chest",-1))]),s("div",si,[(n(!0),i(H,null,U(e.chestAbnormal,(v,b)=>(n(),i("div",{class:"exam-item",key:"chest-"+b},M(v),1))),128))])])):e.chestExamined?(n(),i("div",ai,[s("div",ni,[a(o,{icon:e.fitnessOutline},null,8,["icon"]),t[33]||(t[33]=s("h4",null,"Chest",-1))]),t[34]||(t[34]=s("div",{class:"exam-items"},[s("div",{class:"exam-item normal"}," Normal examination ")],-1))])):S("",!0),e.chestMovementAbnormal.length?(n(),i("div",ii,[s("div",oi,[a(o,{icon:e.moveOutline},null,8,["icon"]),t[35]||(t[35]=s("h4",null,"Chest Movement",-1))]),s("div",li,[(n(!0),i(H,null,U(e.chestMovementAbnormal,(v,b)=>(n(),i("div",{class:"exam-item",key:"chest-move-"+b},M(v),1))),128))])])):e.chestMovementExamined?(n(),i("div",ri,[s("div",di,[a(o,{icon:e.moveOutline},null,8,["icon"]),t[36]||(t[36]=s("h4",null,"Chest Movement",-1))]),t[37]||(t[37]=s("div",{class:"exam-items"},[s("div",{class:"exam-item normal"}," Normal movement ")],-1))])):S("",!0),e.heartSoundsAbnormal.length?(n(),i("div",ci,[s("div",ui,[a(o,{icon:e.pulseOutline},null,8,["icon"]),t[38]||(t[38]=s("h4",null,"Heart Sounds",-1))]),s("div",mi,[(n(!0),i(H,null,U(e.heartSoundsAbnormal,(v,b)=>(n(),i("div",{class:"exam-item",key:"heart-"+b},M(v),1))),128))])])):e.heartSoundsExamined?(n(),i("div",pi,[s("div",hi,[a(o,{icon:e.pulseOutline},null,8,["icon"]),t[39]||(t[39]=s("h4",null,"Heart Sounds",-1))]),t[40]||(t[40]=s("div",{class:"exam-items"},[s("div",{class:"exam-item normal"}," Normal heart sounds ")],-1))])):S("",!0),e.breathSoundsAbnormal.length?(n(),i("div",vi,[t[41]||(t[41]=s("div",{class:"exam-category-header"},[s("h4",null,"Breath Sounds")],-1)),s("div",fi,[(n(!0),i(H,null,U(e.breathSoundsAbnormal,(v,b)=>(n(),i("div",{class:"exam-item",key:"breath-"+b},M(v),1))),128))])])):e.breathSoundsExamined?(n(),i("div",gi,t[42]||(t[42]=[s("div",{class:"exam-category-header"},[s("h4",null,"Breath Sounds")],-1),s("div",{class:"exam-items"},[s("div",{class:"exam-item normal"}," Normal breath sounds ")],-1)]))):S("",!0),e.addedBreathSoundsAbnormal.length?(n(),i("div",yi,[s("div",_i,[a(o,{icon:e.addOutline},null,8,["icon"]),t[43]||(t[43]=s("h4",null,"Added Breath Sounds",-1))]),s("div",bi,[(n(!0),i(H,null,U(e.addedBreathSoundsAbnormal,(v,b)=>(n(),i("div",{class:"exam-item",key:"added-breath-"+b},M(v),1))),128))])])):e.addedBreathSoundsExamined?(n(),i("div",Di,[s("div",Si,[a(o,{icon:e.addOutline},null,8,["icon"]),t[44]||(t[44]=s("h4",null,"Added Breath Sounds",-1))]),t[45]||(t[45]=s("div",{class:"exam-items"},[s("div",{class:"exam-item normal"}," No abnormal added sounds ")],-1))])):S("",!0),e.abdominalInspectionAbnormal.length?(n(),i("div",ki,[s("div",Ci,[a(o,{icon:e.scanOutline},null,8,["icon"]),t[46]||(t[46]=s("h4",null,"Abdominal Inspection",-1))]),s("div",Ii,[(n(!0),i(H,null,U(e.abdominalInspectionAbnormal,(v,b)=>(n(),i("div",{class:"exam-item",key:"abdomen-"+b},M(v),1))),128))])])):e.abdominalInspectionExamined?(n(),i("div",wi,[s("div",Ei,[a(o,{icon:e.scanOutline},null,8,["icon"]),t[47]||(t[47]=s("h4",null,"Abdominal Inspection",-1))]),t[48]||(t[48]=s("div",{class:"exam-items"},[s("div",{class:"exam-item normal"}," Normal abdominal inspection ")],-1))])):S("",!0)])])):(n(),i("div",Oi,[a(o,{icon:e.bodyOutline},null,8,["icon"]),t[49]||(t[49]=s("p",null,"No physical exam recorded",-1))]))])])}const Pi=J(qa,[["render",Li],["__scopeId","data-v-8f0a8a33"]]),Mi=Y({name:"LevelOfConsciousness",components:{IonContent:fe,IonHeader:ve,IonItem:W,IonList:Z,IonMenu:he,IonTitle:pe,IonToolbar:me,BasicForm:X},props:{isActive:Boolean},emits:["closeAccordion"],setup(e,{emit:t}){var u;const{adult:r,minor:y}=Xs(),{patient:d}=Ie(),f=g(""),o=g(re.getAgeInYears((u=d==null?void 0:d.personInformation)==null?void 0:u.birthdate)),v=g(!1),b=(k,O)=>{var $,R,F;const A=qe(k,st.EYE_OPENING_RESPONSE),I=qe(k,st.BEST_MOTOR_RESPONSE),w=qe(k,st.BEST_VERBAL_RESPONSE),p=($=(O?sa:aa)[A])!=null?$:0,C=(R=(O?Qs:Zs)[I])!=null?R:0,ee=(F=(O?ea:ta)[w])!=null?F:0,te=p+C+ee;f.value="(M ".concat(C," V ").concat(ee," E ").concat(p,") ").concat(te,"/").concat(O?5:15);const P=A&&I&&w;P&&!v.value?(v.value=!0,e.isActive&&setTimeout(()=>t("closeAccordion"),1e3)):P||(v.value=!1)},c=k=>b(k,!1),_=k=>b(k,!0);return Ee(r,k=>b(k,!1),{deep:!0}),Ee(y,k=>b(k,!0),{deep:!0}),{gcs:f,patientAge:o,adult:r,minor:y,handleAdultUpdate:c,handleMinorUpdate:_}}}),xi={class:"modal_wrapper"};function Ai(e,t,r,y,d,f){const o=L("basic-form");return n(),i("div",xi,[e.patientAge<18?(n(),B(o,{key:0,contentData:e.minor,"onUpdate:modelValue":e.handleMinorUpdate},null,8,["contentData","onUpdate:modelValue"])):(n(),B(o,{key:1,contentData:e.adult,"onUpdate:modelValue":e.handleAdultUpdate},null,8,["contentData","onUpdate:modelValue"])),s("h5",null,M(e.gcs),1)])}const Bi=J(Mi,[["render",Ai],["__scopeId","data-v-7182bbbd"]]),$i=Y({name:"Menu",components:{IonContent:fe,IonHeader:ve,IonItem:W,IonList:Z,IonMenu:he,IonTitle:pe,IonToolbar:me,BasicForm:X},data(){return{}},computed:{...K(na,["pregnancy"])},methods:{handleInputData(){}}}),Ni={class:"modal_wrapper"};function Ri(e,t,r,y,d,f){const o=L("basic-form");return n(),i("div",Ni,[a(o,{contentData:e.pregnancy,"onUpdate:inputValue":e.handleInputData},null,8,["contentData","onUpdate:inputValue"])])}const Fi=J($i,[["render",Ri]]),Ti=Y({name:"Menu",components:{IonContent:fe,IonHeader:ve,IonItem:W,IonList:Z,IonMenu:he,IonTitle:pe,IonToolbar:me,BasicForm:X},data(){return{initialData:[]}},computed:{...K(wt,["pastMedicalHistory"])},mounted(){const e=wt();this.initialData=e.getInitial(),this.handleChronicConditions()},watch:{pastMedicalHistory:{handler(){this.handleChronicConditions()},deep:!0}},methods:{handleChronicConditions(){var t;const e=["TB","Chronic Obstructive Pulmonary Disease (COPD)","Asthma","Epilepsy","Previous stroke","Peptic Ulcer Disease (PUD)","Mental disorder","Bleeding disorders","Hypertension","HIV Positive","Diabetes Mellitus"];(t=ia(this.pastMedicalHistory,"None"))!=null&&t.checked?e.forEach(r=>{ke(this.pastMedicalHistory,"TB treatment","displayNone",!0),N(this.pastMedicalHistory,"TB drugs","displayNone",!0),N(this.pastMedicalHistory,"TB drug start date","displayNone",!0),ke(this.pastMedicalHistory,"Hypertension medication","displayNone",!0),N(this.pastMedicalHistory,"Current hypertension treatment regimen","displayNone",!0),ke(this.pastMedicalHistory,"HIV status","displayNone",!0),N(this.pastMedicalHistory,"ARV start date","displayNone",!0),ke(this.pastMedicalHistory,"Diabetes","displayNone",!0),ke(this.pastMedicalHistory,"Controlled by","displayNone",!0),Ce(this.pastMedicalHistory,r,"checked",!1),Ce(this.pastMedicalHistory,r,"disabled",!0)}):e.forEach(r=>{Ce(this.pastMedicalHistory,r,"disabled",!1)})},handleInputData(e){N(this.pastMedicalHistory,"TB drugs","popOverData",{filterData:!0,data:[{name:"Auramine ‘O’ (C.I. 41000) 50g"},{name:"Bedaquilline 100mg"},{name:"Clofazimine 100mg"},{name:"Clofazimine 50mg"},{name:"Cycloserine 125mg"},{name:"Cycloserine 250mg"},{name:"Delamanid 50mg"},{name:"Ethambutol 100mg"},{name:"Ethambutol 400mg"},{name:"Ethionamide 250mg"},{name:"Isoniazid 100mg "},{name:"Isoniazid 300mg"},{name:"Isoniazid / Rifapentine 300mg / 300mg"},{name:"Levofloxacin 100mg"},{name:"Levofloxacin 250mg"},{name:"Linezolid 600mg"},{name:"Moxifloxacin 400mg"},{name:"Pyrazinamide 400mg"},{name:"Rifabutin 150mg Capsules"},{name:"Rifampicin 150mg/isoniazid 75mg"},{name:"Rifampicin 75mg+INH 50mg dispersible"},{name:"Rifampicin 75mg+INH 50mg+Pyrazinamide 150mg dispersible"},{name:"Rifampicin150mg/Isoniazid75mg/Pyrazinamide 400mg/Ethambutol"}]}),N(this.pastMedicalHistory,"Current hypertension treatment regimen","popOverData",{filterData:!0,data:[{name:"Captopril 12.5mg"},{name:"Aspirin 75mg"},{name:"Hydrochlorothiazide 25mg"},{name:"Enalapril Meleate 5mg"},{name:"Enalapril Maleate 10mg"}]})}}}),Hi={class:"modal_wrapper"},Vi={class:"uniform_columns"};function Ui(e,t,r,y,d,f){const o=L("basic-form");return n(),i("div",Hi,[s("div",Vi,[a(o,{contentData:e.pastMedicalHistory,initialData:e.initialData,"onUpdate:inputValue":e.handleInputData,"onUpdate:selected":e.handleInputData},null,8,["contentData","initialData","onUpdate:inputValue","onUpdate:selected"])])])}const Wi=J(Ti,[["render",Ui],["__scopeId","data-v-2b756eeb"]]),qi=Y({name:"immidiatePostnatalChecksForChild",components:{BasicCard:ka,IonContent:fe,IonHeader:ve,IonItem:W,IonList:Z,IonMenu:he,IonTitle:pe,IonToolbar:me,IonToggle:As,IonSelect:xs,IonSelectOption:Ms,IonInput:ze,BasicInputField:ct,BasicForm:X,IonRadio:Ps,IonRadioGroup:Ls},data(){return{initialData:[],iconsContent:de,vValidations:"",hasValidationErrors:[],inputField:""}},computed:{...K(Et,["physicalExam"]),...K(Ie,["patient"])},mounted(){const e=Et();this.initialData=e.getInitial(),this.handlePhysicalExam(),this.handleGenitalExam()},watch:{physicalExam:{handler(){this.handlePhysicalExam(),this.handleGenitalExam()},deep:!0}},setup(){return{checkmark:xe,pulseOutline:Oe}},methods:{handlePhysicalExam(){qe(this.physicalExam,"Physical examination")=="No"?ke(this.physicalExam,"Reason why physical examination not done","displayNone",!1):(ke(this.physicalExam,"Reason why physical examination not done","displayNone",!0),ke(this.physicalExam,"Reason why physical examination not done","selectedValue",""))},handleGenitalExam(){var t,r;const e=(r=(t=this.patient)==null?void 0:t.personInformation)==null?void 0:r.gender;e=="M"&&(Ce(this.physicalExam,"Vulva examination","disabled",!0),Ce(this.physicalExam,"Visible bleeding","disabled",!0)),e=="F"&&(Ce(this.physicalExam,"Urethral meatus abnormal","disabled",!0),Ce(this.physicalExam,"Scrotal swelling","disabled",!0),Ce(this.physicalExam,"Tastes swelling","disabled",!0))}}}),Gi={class:"container"};function zi(e,t,r,y,d,f){const o=L("basic-form"),v=L("ion-card-content"),b=L("ion-card");return n(),i("div",Gi,[a(b,{class:"section"},{default:l(()=>[a(v,null,{default:l(()=>[a(o,{contentData:e.physicalExam,initialData:e.initialData},null,8,["contentData","initialData"])]),_:1})]),_:1})])}const Yi=J(qi,[["render",zi],["__scopeId","data-v-c1d7fdd5"]]),Ki={key:0},Ji={class:"ion-padding",slot:"content"},ji={class:"nav-buttons"},Xi={class:"ion-padding",slot:"content"},Qi={class:"nav-buttons"},Zi={class:"ion-padding",slot:"content"},eo={class:"nav-buttons"},to={class:"ion-padding",slot:"content"},so={class:"nav-buttons"},ao={class:"ion-padding",slot:"content"},no={class:"nav-buttons"},io={class:"ion-padding",slot:"content"},oo={class:"nav-buttons"},lo=Y({__name:"ClinicalAssessment",setup(e,{expose:t}){const r=g("loc"),y=g(0),d=new oa,f=Ie(),o=()=>{y.value++},v=g(null),b=[{id:"loc",label:"Level of consciousness",show:!0},{id:"pc",label:"Presenting complaints",show:!0},{id:"pbs",label:"Pregnancy and breastfeeding status",show:()=>d.isChildBearing()},{id:"pmh",label:"Past medical history",show:!0},{id:"al",label:"Allergies",show:!0},{id:"pe",label:"Physical examination",show:!0}],c=le(()=>{const w=f.patient;if(!w)return!1;const C=new Date().toISOString().split("T")[0];return["levelOfConsciousness","presentingComplaints","pastMedicalHistory","physicalExam","allergies","pregnancy"].some(te=>{var $,R;return[...(($=w[te])==null?void 0:$.saved)||[],...((R=w[te])==null?void 0:R.unsaved)||[]].some(F=>F.obs_datetime?new Date(F.obs_datetime).toISOString().split("T")[0]===C:!1)})}),_=le(()=>b.filter(w=>typeof w.show=="function"?w.show():w.show)),u=w=>{const p=b.find(C=>C.id===w);return p?typeof p.show=="function"?p.show():p.show:!1},k=w=>_.value.findIndex(p=>p.id===w),O=w=>{const p=k(w);p>0&&(r.value=_.value[p-1].id)},A=w=>{const C=k(w)+1;C<_.value.length?r.value=_.value[C].id:(r.value="",o())};return t({onSubmit:()=>{var w;(w=v.value)==null||w.onSubmit()}}),(w,p)=>c.value?(n(),i("div",Ki,[(n(),B(Pi,{key:y.value}))])):(n(),B(m(Bs),{key:1,style:{width:"100%"}},{default:l(()=>[a(m(Re),{value:r.value,"onUpdate:value":p[12]||(p[12]=C=>r.value=C),ref:"accordionGroup",class:"previousView"},{default:l(()=>[u("loc")?(n(),B(m(ce),{key:0,value:"loc",class:"_card"},{default:l(()=>[a(m(W),{slot:"header",color:"light"},{default:l(()=>[a(m(G),{class:"previousLabel"},{default:l(()=>p[13]||(p[13]=[x("Level of consciousness")])),_:1,__:[13]})]),_:1}),s("div",Ji,[a(Bi,{"is-active":r.value==="loc",onDataSaved:o},null,8,["is-active"]),s("div",ji,[k("loc")>0?(n(),B(m(Q),{key:0,fill:"outline",onClick:p[0]||(p[0]=oe(C=>O("loc"),["stop"]))},{default:l(()=>p[14]||(p[14]=[x(" Back ")])),_:1,__:[14]})):S("",!0),a(m(Q),{fill:"outline",onClick:p[1]||(p[1]=oe(C=>A("loc"),["stop"]))},{default:l(()=>[x(M(k("loc")<_.value.length-1?"Next":"Finish"),1)]),_:1})])])]),_:1})):S("",!0),u("pc")?(n(),B(m(ce),{key:1,value:"pc",class:"_card"},{default:l(()=>[a(m(W),{slot:"header",color:"light"},{default:l(()=>[a(m(G),{class:"previousLabel"},{default:l(()=>p[15]||(p[15]=[x("Presenting complaints")])),_:1,__:[15]})]),_:1}),s("div",Xi,[a(Wa,{"is-active":r.value==="pc",onDataSaved:o,ref_key:"presentingComplaintsFormRef",ref:v},null,8,["is-active"]),s("div",Qi,[k("pc")>0?(n(),B(m(Q),{key:0,fill:"outline",onClick:p[2]||(p[2]=oe(C=>O("pc"),["stop"]))},{default:l(()=>p[16]||(p[16]=[x(" Back ")])),_:1,__:[16]})):S("",!0),a(m(Q),{fill:"outline",onClick:p[3]||(p[3]=oe(C=>A("pc"),["stop"]))},{default:l(()=>[x(M(k("pc")<_.value.length-1?"Next":"Finish"),1)]),_:1})])])]),_:1})):S("",!0),u("pbs")?(n(),B(m(ce),{key:2,value:"pbs",class:"_card"},{default:l(()=>[a(m(W),{slot:"header",color:"light"},{default:l(()=>[a(m(G),{class:"previousLabel"},{default:l(()=>p[17]||(p[17]=[x("Pregnancy and breastfeeding status")])),_:1,__:[17]})]),_:1}),s("div",Zi,[a(Fi,{"is-active":r.value==="pbs",onDataSaved:o},null,8,["is-active"]),s("div",eo,[k("pbs")>0?(n(),B(m(Q),{key:0,fill:"outline",onClick:p[4]||(p[4]=oe(C=>O("pbs"),["stop"]))},{default:l(()=>p[18]||(p[18]=[x(" Back ")])),_:1,__:[18]})):S("",!0),a(m(Q),{fill:"outline",onClick:p[5]||(p[5]=oe(C=>A("pbs"),["stop"]))},{default:l(()=>[x(M(k("pbs")<_.value.length-1?"Next":"Finish"),1)]),_:1})])])]),_:1})):S("",!0),u("pmh")?(n(),B(m(ce),{key:3,value:"pmh",class:"_card"},{default:l(()=>[a(m(W),{slot:"header",color:"light"},{default:l(()=>[a(m(G),{class:"previousLabel"},{default:l(()=>p[19]||(p[19]=[x("Past medical history")])),_:1,__:[19]})]),_:1}),s("div",to,[a(Wi,{"is-active":r.value==="pmh",onDataSaved:o},null,8,["is-active"]),s("div",so,[k("pmh")>0?(n(),B(m(Q),{key:0,fill:"outline",onClick:p[6]||(p[6]=oe(C=>O("pmh"),["stop"]))},{default:l(()=>p[20]||(p[20]=[x(" Back ")])),_:1,__:[20]})):S("",!0),a(m(Q),{fill:"outline",onClick:p[7]||(p[7]=oe(C=>A("pmh"),["stop"]))},{default:l(()=>[x(M(k("pmh")<_.value.length-1?"Next":"Finish"),1)]),_:1})])])]),_:1})):S("",!0),u("al")?(n(),B(m(ce),{key:4,value:"al",class:"_card"},{default:l(()=>[a(m(W),{slot:"header",color:"light"},{default:l(()=>[a(m(G),{class:"previousLabel"},{default:l(()=>p[21]||(p[21]=[x("Allergies")])),_:1,__:[21]})]),_:1}),s("div",ao,[a(ya,{"is-active":r.value==="al",onDataSaved:o},null,8,["is-active"]),s("div",no,[k("al")>0?(n(),B(m(Q),{key:0,fill:"outline",onClick:p[8]||(p[8]=oe(C=>O("al"),["stop"]))},{default:l(()=>p[22]||(p[22]=[x(" Back ")])),_:1,__:[22]})):S("",!0),a(m(Q),{fill:"outline",onClick:p[9]||(p[9]=oe(C=>A("al"),["stop"]))},{default:l(()=>[x(M(k("al")<_.value.length-1?"Next":"Finish"),1)]),_:1})])])]),_:1})):S("",!0),u("pe")?(n(),B(m(ce),{key:5,value:"pe",class:"_card"},{default:l(()=>[a(m(W),{slot:"header",color:"light"},{default:l(()=>[a(m(G),{class:"previousLabel"},{default:l(()=>p[23]||(p[23]=[x("Physical examination")])),_:1,__:[23]})]),_:1}),s("div",io,[a(Yi,{"is-active":r.value==="pe",onDataSaved:o},null,8,["is-active"]),s("div",oo,[k("pe")>0?(n(),B(m(Q),{key:0,fill:"outline",onClick:p[10]||(p[10]=oe(C=>O("pe"),["stop"]))},{default:l(()=>p[24]||(p[24]=[x(" Back ")])),_:1,__:[24]})):S("",!0),a(m(Q),{fill:"outline",onClick:p[11]||(p[11]=oe(C=>A("pe"),["stop"]))},{default:l(()=>[x(M(k("pe")<_.value.length-1?"Next":"Finish"),1)]),_:1})])])]),_:1})):S("",!0)]),_:1},8,["value"])]),_:1}))}}),cr=J(lo,[["__scopeId","data-v-6ecd9cf6"]]);class ro extends Ot{constructor(t,r){super(t,8,r)}static async getDiagnosis(t="",r=1,y=10){const d=await z.getConceptID("Qech outpatient diagnosis list");return Ot.getJson("diagnosis",{id:d,name:t,page:r,page_size:y})}}const co=Y({name:"Menu",components:{IonContent:fe,IonHeader:ve,IonItem:W,IonList:Z,IonMenu:he,IonTitle:pe,IonToolbar:me,List:Ae},computed:{...K(Ie,["patient"])},data(){return{valueNumericArray:[],obsDatetime:[],graphIcon:dt(["#006401"]),listIcon:rt(["#636363"]),displayGraph:!0,orders:[],height:[],BMI:[],iconBg:{},activeWeight:[],activeHeight:[],activeBMI:[],list:[],series:[{name:"",data:[]}]}},setup(){return{checkmark:xe,pulseOutline:Oe}},async mounted(){const e=await _e.getAll(this.patient.patientID,"Primary diagnosis"),t=await _e.getAll(this.patient.patientID,"Secondary diagnosis"),r=await _e.getAll(this.patient.patientID,"Attempted/ Differential diagnosis"),y=[...e||[],...t||[],...r||[]],d=ye.isEmpty(y)?[]:Promise.all(y.map(async f=>({name:await _e.getConceptName(f.value_coded),obs_date:f.obs_datetime})));this.setListData(await d)},methods:{dismiss(){lt.dismiss()},handleIcon(){},setActivClass(e){this.activeHeight="",this.activeBMI="",this.activeWeight="",e=="height"?this.activeHeight="_active":e=="weight"?this.activeWeight="_active":e=="BMI"&&(this.activeBMI="_active")},setListData(e){this.list=[],this.list.push({actionBtn:!1,class:"col_background",header:!0,minHeight:"--min-height: 25px;",display:["Date","Diagnosis","Notes"]}),e.forEach(t=>{this.list.push({actionBtn:!1,minHeight:"--min-height: 25px;",class:"col_background",display:[re.toStandardHisFormat(t.obs_date),t.name,""]})})}}}),uo={class:"modal_wrapper"};function mo(e,t,r,y,d,f){const o=L("list");return n(),i("div",uo,[s("div",null,[a(o,{listData:e.list},null,8,["listData"])])])}const po=J(co,[["render",mo],["__scopeId","data-v-88580898"]]),ho=Y({name:"Menu",components:{IonContent:fe,IonHeader:ve,IonItem:W,IonList:Z,IonMenu:he,IonTitle:pe,IonToolbar:me,IonInput:ze,IonPopover:Rt,DashBox:Ke,SelectionPopover:Ht,BasicInputField:ct,List:Ae,BasicForm:X,DynamicButton:be,previousDiagnosis:po},data(){return{iconsContent:de,no_item:!1,search_item:!1,display_primary:!0,display_item:!1,addItemButton:!0,selectedText:"",conditionStatus:"",data:[],diagnosisData:[],popoverOpen:!1,event:"",selectedCondition:"",selected:null,diagnoses:[],initialData:[]}},setup(){return{checkmark:xe,pulseOutline:Oe}},computed:{...K(at,["OPDdiagnosis"]),primaryDiagnosisExists(){return this.OPDdiagnosis[0].selectedData.some(e=>e.data.concept_id===6542)},primaryInputField(){return this.OPDdiagnosis[0].data.rowData[0].colData},secondaryInputField(){return this.OPDdiagnosis[2].data.rowData[0].colData},differentialInputField(){return this.OPDdiagnosis[3].data.rowData[0].colData}},watch:{OPDdiagnosis:{handler(){this.setDashedBox()},deep:!0},patient:{handler(e){e&&this.resetDiagnosisList()},immediate:!0,deep:!0}},async mounted(){this.updateDiagnosisStores();const e=at();this.initialData=e.getInitial(),this.setDashedBox(),await this.getDiagnosis("")},methods:{resetDiagnosisList(){this.OPDdiagnosis[0].selectedData=[],this.updateDiagnosisStores()},displayInputFields(){this.conditionStatus="",this.selectedText="",this.no_item=!1,this.addItemButton=!1,this.search_item=!0},async validaterowData(e={name:"secondaryDiagnosis"}){N(this.OPDdiagnosis,"secondaryDiagnosis","alertsErrorMassage",""),N(this.OPDdiagnosis,"primaryDiagnosis","alertsErrorMassage",""),N(this.OPDdiagnosis,"differentialDiagnosis","alertsErrorMassage","");const t=nt(this.OPDdiagnosis,"primaryDiagnosis","value"),r=nt(this.OPDdiagnosis,"secondaryDiagnosis","value"),y=nt(this.OPDdiagnosis,"differentialDiagnosis","value");if(t.name&&this.OPDdiagnosis[0].selectedData.some(v=>v.data.concept_id===6542))return N(this.OPDdiagnosis,"primaryDiagnosis","alertsErrorMassage","Only one primary diagnosis can be added. Delete the existing one to change."),Te("Only one primary diagnosis is allowed. Delete one added if you want to change"),!1;const d=r&&r.length>0,f=y&&y.length>0;return d&&r.some(o=>o.name===t.name)?(N(this.OPDdiagnosis,"secondaryDiagnosis","alertsErrorMassage","".concat(t.name," is already selected as primary diagnosis.")),!1):f&&y.some(o=>o.name===t.name)?(N(this.OPDdiagnosis,"differentialDiagnosis","alertsErrorMassage","".concat(t.name," is already selected as primary diagnosis.")),!1):d&&f&&r.some(v=>y.some(b=>b.name===v.name))?(N(this.OPDdiagnosis,"secondaryDiagnosis","alertsErrorMassage","Secondary and differential diagnoses cannot overlap."),!1):t!=null&&t.name?!0:(N(this.OPDdiagnosis,"primaryDiagnosis","alertsErrorMassage","Primary diagnosis is required."),!1)},async addNewRow(){await this.validaterowData()&&(this.buildDiagnosis(),this.search_item=!1,this.display_item=!0,this.addItemButton=!0,this.display_primary=!1,this.OPDdiagnosis[0].data.rowData[0].colData[0].value="",this.OPDdiagnosis[2].data.rowData[0].colData[0].value="",this.OPDdiagnosis[3].data.rowData[0].colData[0].value="",N(this.OPDdiagnosis,"primaryDiagnosis","inputFieldDisplayNone",!1),N(this.OPDdiagnosis,"primaryDiagnosis","colSize",""))},buildDiagnosis(){var r,y;const e=[],t=this.OPDdiagnosis[0].selectedData.map(d=>d.name);if((y=(r=this.primaryInputField[0])==null?void 0:r.value)!=null&&y.name&&!t.includes(this.primaryInputField[0].value.name))if(!this.OPDdiagnosis[0].selectedData.some(f=>f.data.concept_id===6542))e.push({actionBtn:!0,btn:["delete"],name:this.primaryInputField[0].value.name,id:this.primaryInputField[0].value.concept_id,display:[this.primaryInputField[0].value.name,"Primary diagnosis"],data:{concept_id:6542,value_coded:this.primaryInputField[0].value.concept_id,obs_datetime:ue.getSessionDate()}});else return Te("Only one primary diagnosis is allowed"),!1;return this.secondaryInputField[0].value&&this.secondaryInputField[0].value.forEach(d=>{t.includes(d.name)||e.push({actionBtn:!0,btn:["delete"],name:d.name,id:d.concept_id,display:[d.name,"Secondary diagnosis"],data:{concept_id:6543,value_coded:d.concept_id,obs_datetime:ue.getSessionDate()}})}),this.differentialInputField[0].value&&this.differentialInputField[0].value.forEach(d=>{t.includes(d.name)||e.push({actionBtn:!0,btn:["delete"],name:d.name,id:d.concept_id,display:[d.name,"Differential diagnosis"],data:{concept_id:10201,value_coded:d.concept_id,obs_datetime:ue.getSessionDate()}})}),e.length>0&&(this.OPDdiagnosis[0].selectedData=[...this.OPDdiagnosis[0].selectedData,...e]),!0},compareArrays(e,t){return e.reduce((r,y)=>{const d=t.find(f=>f.name===y.name);return d&&r.push(d.display[1]),r},[])},updateDiagnosisStores(){at().setOPDDiagnosis(this.OPDdiagnosis)},openPopover(e){this.event=e,this.popoverOpen=!0},async handleInputData(e){N(this.OPDdiagnosis,"secondaryDiagnosis","alertsErrorMassage",""),N(this.OPDdiagnosis,"primaryDiagnosis","alertsErrorMassage",""),N(this.OPDdiagnosis,"differentialDiagnosis","alertsErrorMassage",""),await this.getDiagnosis(e.value),this.validaterowData(e)},async getDiagnosis(e){return this.diagnoses=await ro.getDiagnosis(e,1,5),N(this.OPDdiagnosis,"primaryDiagnosis","multiSelectData",this.diagnoses),N(this.OPDdiagnosis,"secondaryDiagnosis","multiSelectData",this.diagnoses),N(this.OPDdiagnosis,"differentialDiagnosis","multiSelectData",this.diagnoses),this.diagnoses},async onRefresh(e){(await this.getDiagnosis(e)).length>0&&Ye("Diagnoses selection list has been updated")},editDiagnosis(e){this.deleteDiagnosis(e),this.selectedText=e.name,this.OPDdiagnosis[0].data.rowData[0].colData[0].value=e.name,this.addItemButton=!1,this.search_item=!0,this.updateDiagnosisStores()},async openDeletePopover(e){await la("Do you want to delete ".concat(e.name," ?"),e.event)&&this.deleteDiagnosis(e.name)},deleteDiagnosis(e){const t=this.OPDdiagnosis[0].selectedData,r=e.name,y=t.filter(f=>f.display[0]!==r),d=t.filter(f=>f.display[0]===r);this.OPDdiagnosis[0].selectedData=y,d[0].data.concept_id==6542&&(N(this.OPDdiagnosis,"primaryDiagnosis","inputFieldDisplayNone",!1),N(this.OPDdiagnosis,"primaryDiagnosis","colSize",""))},setDashedBox(){var e,t,r,y;((t=(e=this.primaryInputField[0])==null?void 0:e.value)!=null&&t.name||(y=(r=this.primaryInputField[1])==null?void 0:r.value)!=null&&y.name)&&(this.addItemButton=!1,this.search_item=!0,this.no_item=!1),this.OPDdiagnosis[0].selectedData.length>0?(this.display_item=!0,this.no_item=!1):this.search_item||(this.no_item=!0),this.addItemButton=!this.primaryDiagnosisExists}}}),vo={class:"custom_card",style:{padding:"10px"}},fo={key:0},go={key:0,style:{color:"red","margin-top":"10px",background:"lightgoldenrodyellow"}},yo={class:"ion-padding",slot:"content"};function _o(e,t,r,y,d,f){const o=L("DashBox"),v=L("list"),b=L("basic-form"),c=L("ion-row"),_=L("DynamicButton"),u=L("ion-label"),k=L("ion-item"),O=L("previousDiagnosis"),A=L("ion-accordion"),I=L("ion-accordion-group");return n(),i(H,null,[s("div",vo,[a(o,{status:e.no_item,content:"No Diagnosis added"},null,8,["status"]),e.display_item?(n(),i("span",fo,[a(v,{listData:e.OPDdiagnosis[0].selectedData,"onClicked:edit":t[0]||(t[0]=w=>e.editDiagnosis(w)),"onClicked:delete":e.deleteDiagnosis},null,8,["listData","onClicked:delete"]),e.primaryDiagnosisExists?(n(),i("div",go," In order to update the diagnosis list, please remove/delete the primary diagnosis only and then re-add or change it along with the secondary and differential diagnoses. ")):S("",!0)])):S("",!0),e.search_item?(n(),B(c,{key:1},{default:l(()=>[a(b,{initialData:e.initialData,contentData:e.OPDdiagnosis,"onUpdate:selected":e.handleInputData,"onUpdate:inputValue":e.handleInputData,disabled:e.primaryDiagnosisExists,"onClicked:button":e.addNewRow,onSearchChange:e.getDiagnosis,onRefresh:t[1]||(t[1]=w=>e.onRefresh("a"))},null,8,["initialData","contentData","onUpdate:selected","onUpdate:inputValue","disabled","onClicked:button","onSearchChange"])]),_:1})):S("",!0),e.addItemButton?(n(),B(c,{key:2,style:{"margin-top":"10px"}},{default:l(()=>[a(_,{fill:"clear",icon:e.iconsContent.plus,iconSlot:"icon-only","onClicked:btn":t[2]||(t[2]=w=>e.displayInputFields()),name:"Add new Diagnosis"},null,8,["icon"])]),_:1})):S("",!0)]),a(c,null,{default:l(()=>[a(I,{ref:"accordionGroup",class:"previousView"},{default:l(()=>[a(A,{value:"first","toggle-icon-slot":"start",class:"custom_card"},{default:l(()=>[a(k,{slot:"header",color:"light"},{default:l(()=>[a(u,{class:"previousLabel"},{default:l(()=>t[3]||(t[3]=[x("Previous Diagnosis")])),_:1,__:[3]})]),_:1}),s("div",yo,[a(O)])]),_:1})]),_:1},512)]),_:1})],64)}const ur=J(ho,[["render",_o],["__scopeId","data-v-e7cfdc2c"]]),bo=Y({components:{IonButtons:Hs,IonButton:Q,IonModal:Ts,IonHeader:ve,IonContent:fe,IonToolbar:me,IonTitle:pe,IonItem:W,IonList:Z,IonAvatar:Fs,IonImg:Rs,IonLabel:G,IonPage:Ns,IonMenu:he,BasicForm:X,IonFooter:$s,DynamicButton:be},data(){return{popoverStatus:null}},props:{keyboardClose:{type:Boolean,default:!1},keepContentsMounted:{type:Boolean,default:!1},content:{default:[]},popoverOpen:{type:Boolean,default:!1},event:{type:Event,default:""},title:{type:String,default:""}},methods:{dismiss(){lt.dismiss()},nav(e,t){this.dismiss(),this.$router.push(e)}}}),Do={class:"modal_wrapper"},So={class:"center text_12"};function ko(e,t,r,y,d,f){const o=L("ion-title"),v=L("ion-button"),b=L("ion-buttons"),c=L("ion-toolbar"),_=L("ion-header"),u=L("ion-col"),k=L("ion-row"),O=L("ion-content"),A=L("ion-modal");return n(),B(A,{"is-open":e.popoverOpen,"show-backdrop":!0,onDidDismiss:t[1]||(t[1]=I=>e.$emit("closePopoover",!1)),"keyboard-close":e.keyboardClose},{default:l(()=>[a(_,null,{default:l(()=>[a(c,null,{default:l(()=>[a(o,null,{default:l(()=>[s("b",null,"Lab results for ("+M(e.content.item.name)+") test",1)]),_:1}),a(b,{slot:"end"},{default:l(()=>[a(v,{onClick:t[0]||(t[0]=I=>e.$emit("closeModal"))},{default:l(()=>t[2]||(t[2]=[x("Close")])),_:1,__:[2]})]),_:1})]),_:1})]),_:1}),a(O,{class:"ion-padding"},{default:l(()=>[s("div",Do,[s("div",So,[a(k,null,{default:l(()=>[(n(!0),i(H,null,U(e.content.item.item.result,(I,w)=>(n(),B(u,{size:"4",key:w},{default:l(()=>[a(k,null,{default:l(()=>[a(u,{size:"8"},{default:l(()=>[x(M(I.indicator.name),1)]),_:2},1024),a(u,{class:"bold",size:"0.5"},{default:l(()=>t[3]||(t[3]=[x(":")])),_:1,__:[3]}),a(u,{class:"bold",size:"2"},{default:l(()=>[x(M(I.value),1)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1})])])]),_:1})]),_:1},8,["is-open","keyboard-close"])}const Co=J(bo,[["render",ko],["__scopeId","data-v-c2390e89"]]),Io=Y({name:"Menu",components:{LabTestsHistory:Oa,CheckInConfirmationModal:ra,IonContent:fe,IonHeader:ve,IonItem:W,IonList:Z,IonMenu:he,IonTitle:pe,IonToolbar:me,List:Ae,DynamicButton:be,DashBox:Ke,LabModal:Ia,LabViewResultsModal:Co,SendToLabConfirmationModal:Ca},computed:{...K(Ie,["patient"]),...K(Lt,["labResults"]),...K(ma,["activeProgram"]),...K(ot,["investigations"]),...K(it,["patientsWaitingForVitals","patientsWaitingForConsultation","patientsWaitingForLab","patientsWaitingForDispensation"]),hasEnterResults(){return this.listOrders.some(e=>e.btn&&e.btn.includes("enter_results"))},hasPatientsWaitingForLab(){return Array.isArray(this.patientsWaitingForLab)&&this.patientsWaitingForLab.length>0}},props:{propOrders:{default:[]}},data(){return{iconsContent:de,valueNumericArray:[],obsDatetime:[],graphIcon:dt(["#006401"]),listIcon:rt(["#636363"]),displayGraph:!0,sendToLabModalOpen:!1,orders:[],userRoles:[],height:[],BMI:[],iconBg:{},activeWeight:[],activeHeight:[],activeBMI:[],listOrders:[],listResults:[],hasPatientsWaitingForLab:!1,listSeeMoreOrders:[],listSeeLessOrders:[],listSeeMoreResults:[],listSeeLessResults:[],listHeaderResults:"",labResultsContent:"",listHeaderOrders:"",service:"",openModal:!1,openResultsModal:!1,series:[{name:"",data:[]}]}},setup(){return{checkmark:xe,pulseOutline:Oe}},async mounted(){this.orders=this.propOrders,this.setListData(this.orders),this.service=new ua(this.patient.patientID),this.userRoles=await ue.getUserRoles()},watch:{patientsWaitingForLab(e){this.hasPatientsWaitingForLab=e.some(t=>t.patient_id===this.patient.patientID)},propOrders:{handler(){this.orders=this.propOrders,this.setListData(this.orders)},deep:!0},$route:{immediate:!0,handler(){this.updateLabList(),this.fetchPatientLabStageData()}}},methods:{toggleSendToLabModal(){this.sendToLabModalOpen=!this.sendToLabModalOpen},async fetchPatientLabStageData(){var r;const e=localStorage.getItem("locationID");if(!e){Te("Location ID could not be found. Please check your settings.");return}const t=it();t.patientsWaitingForLab.length>=0&&await t.refresh(e),(r=this.patient)!=null&&r.patientID&&(this.hasPatientsWaitingForLab=t.patientsWaitingForLab.some(y=>y.patient_id===this.patient.patientID))},async handleSendToLabYes(){const e=localStorage.getItem("locationID");if(!e){Te("Location ID could not be found. Please check your settings.");return}await da.movePatientToNextStage(this.patient.patientID,"CONSULTATION","LAB",e,this.patient.visitID||this.patient.visit_id),await it().refresh(e),this.closeSendToLabModal(),await ca.push("home"),Ye("Lab orders submitted successfully. You may now attend to other patients.")},async handleSendToLabNo(){this.toggleSendToLabModal()},closeSendToLabModal(){this.sendToLabModalOpen=!1},async updateLabList(){this.openModal=!1,this.orders=await ge.getOrders(this.patient.patientID),this.setListData(this.orders),this.updateInvestigationWizard()},async updateInvestigationWizard(){this.orders=await ge.getOrders(this.patient.patientID);const e=await this.orders.filter(t=>re.toStandardHisFormat(re.sessionDate())===re.toStandardHisFormat(t.order_date));e.length>0?this.investigations[0].selectedData=e:this.investigations[0].selectedData=""},dismiss(){lt.dismiss()},async voidLabOrder(e){await this.service.voidOrder(e.id,"Mistake entry"),this.updateLabList()},handleIcon(){},async openResultsForm(e){console.log(e.item.concept_id);const t=await wa.getTestIndicatorsWithID(e.item.concept_id);console.log({testIndicators:t});const r=[e.item,{validationStatus:"",data:{rowData:[{colData:[]}]}}];t.forEach(d=>{let f={inputHeader:d.name,value:"",colSize:3,id:d.concept_id,name:d.name,required:!0,eventType:"input",alertsErrorMassage:""};if(d.name=="RBS"&&(f={inputHeader:d.name,value:"",colSize:3,id:d.concept_id,name:d.name,required:!0,eventType:"input",alertsErrorMassage:"",validationFunctionName:"validateRBS",unit:"mg/dL"}),d.name=="FBS"&&(f={inputHeader:d.name,value:"",colSize:3,id:d.concept_id,name:d.name,required:!0,eventType:"input",alertsErrorMassage:"",validationFunctionName:"validateFBS",unit:"mg/dL"}),d.name=="MRDT"||d.name=="Tuberculosis program"||d.name=="Vdrl"||d.name=="Hepatitis B"||d.name=="Lam"||d.name=="CrAg"||d.name=="CD4 count"||d.name=="Leukocytes"||d.name=="Protein"||d.name=="Nitrite"||d.name=="Urine Ketones"||d.name=="HIV test"){let o=[];(d.name=="MRDT"||d.name=="Vdrl"||d.name=="Hepatitis B"||d.name=="CrAg"||d.name=="Lam")&&(o=[{id:"1",name:"Positive"},{id:"2",name:"Negative"},{id:"3",name:"Invalid"}]),d.name=="Tuberculosis program"&&(o=[{id:"1",name:"Scanty"},{id:"2",name:"Negative"},{id:"3",name:"1+"},{id:"4",name:"2+"},{id:"5",name:"3+"}]),d.name=="CD4 count"&&(o=[{id:"1",name:"below reference line"},{id:"2",name:"above reference line"}]),(d.name=="Leukocytes"||d.name=="Protein"||d.name=="Nitrite"||d.name=="Ketones"||d.name=="Urine Ketones")&&(o=[{id:"2",name:"Negative"},{id:"1",name:"Trace"},{id:"3",name:"1+"},{id:"4",name:"2+"},{id:"5",name:"3+"},{id:"6",name:"4+"}]),d.name=="HIV test"&&(o=[{id:"2",name:"Positive"},{id:"1",name:"Negative"},{id:"3",name:"Invalid"}]),f={inputHeader:d.name,icon:de.search,value:"",name:"units",eventType:"input",alertsErrorMassage:"",isSingleSelect:!0,trackBy:"id",multiSelectData:o,id:d.concept_id,idName:"district_id"}}r[1].data.rowData[0].colData.push(f)}),Lt().setLabResults(r),this.openModal=!0,this.orders=await ge.getOrders(this.patient.patientID)},async viewLabOrder(e){console.log("🚀 ~ openResultsForm ~ labResults:",e),this.labResultsContent=e,this.openResultsModal=!0},setActivClass(e){this.activeHeight="",this.activeBMI="",this.activeWeight="",e=="height"?this.activeHeight="_active":e=="weight"?this.activeWeight="_active":e=="BMI"&&(this.activeBMI="_active")},setListData(e){const t={containSize:2.1,btnSize:1};this.listHeaderResults=this.generateListHeader(["Date","Accession Number","Lab Test","Specimen","Result"],t),this.listHeaderOrders=this.generateListHeader(["Date","Accession Number","Lab Test","Specimen"]),this.listSeeMoreResults=this.generateListItems(e,"result",!0,t),this.listSeeLessResults=this.generateListItems(e,"result",!1,t),this.listSeeMoreOrders=this.generateListItems(e,"order",!0),this.listSeeLessOrders=this.generateListItems(e,"order",!1),this.listResults=[this.listHeaderResults,...this.listSeeLessResults],this.listOrders=[this.listHeaderOrders,...this.listSeeLessOrders]},generateListHeader(e,t={}){return{containSize:t==null?void 0:t.containSize,btnSize:t==null?void 0:t.btnSize,class:"",header:!0,minHeight:"--min-height: 25px;",display:e}},generateListItems(e,t,r,y={}){let d=0;return e.length>0?e.flatMap(f=>f.tests.flatMap(o=>{var b,c,_,u;let v=null;if(((b=o==null?void 0:o.result)==null?void 0:b.length)==1?v=(o==null?void 0:o.result)!=null?((c=o==null?void 0:o.result[0])==null?void 0:c.value_modifier)+((_=o==null?void 0:o.result[0])==null?void 0:_.value):null:((u=o==null?void 0:o.result)==null?void 0:u.length)>1&&(v=o==null?void 0:o.result),v==""&&console.log("🚀 ~ returnitem.tests.flatMap ~ result:",o),t==="result"&&v!==null||t==="order"&&v===null){const k={containSize:y==null?void 0:y.containSize,btnSize:y==null?void 0:y.btnSize,btn:t==="order"?["enter_results","attach","print","delete"]:["print","delete"],minHeight:"--min-height: 25px;",class:"",id:f.order_id,name:o.name,item:o,display:t=="order"?[re.toStandardHisFormat(f.order_date),f.accession_number,o.name,f.specimen.name]:[re.toStandardHisFormat(f.order_date),f.accession_number,o.name,f.specimen.name,v]};if(r||d<2)return d++,[k]}return[]})):[]},seeOrderStatus(e){e=="more"?this.listResults=[this.listHeaderResults,...this.listSeeMoreResults]:e=="less"&&(this.listResults=[this.listHeaderResults,...this.listSeeLessResults])},seeResultsStatus(e){e=="more"?this.listOrders=[this.listHeaderOrders,...this.listSeeMoreOrders]:e=="less"&&(this.listOrders=[this.listHeaderOrders,...this.listSeeLessOrders])}}}),wo={key:1,class:"modal_wrapper"},Eo={style:{"--background":"#fff"}},Oo={key:0,style:{"margin-top":"5px"}},Lo={key:1,style:{"margin-top":"5px"}},Po={key:2,class:"modal_wrapper"},Mo={class:"scrollable-container"},xo={key:0,style:{"margin-top":"5px"}},Ao={key:1,style:{"margin-top":"5px"}},Bo={key:3},$o={key:0},No={key:1};function Ro(e,t,r,y,d,f){const o=L("SendToLabConfirmationModal"),v=L("DashBox"),b=L("LabTestsHistory"),c=L("DynamicButton"),_=L("list"),u=L("LabModal"),k=L("LabViewResultsModal");return n(),i(H,null,[a(o,{closeModalFunc:e.closeSendToLabModal,onYes:e.handleSendToLabYes,onNo:e.handleSendToLabNo,isOpen:e.sendToLabModalOpen,title:"Confirm sending patient to lab"},null,8,["closeModalFunc","onYes","onNo","isOpen"]),e.listResults.length<1&&e.listOrders.length<1?(n(),B(v,{key:0,content:"No Investigations added "})):S("",!0),e.listResults.length>1?(n(),i("div",wo,[t[7]||(t[7]=s("div",{style:{"font-weight":"1000"}},"Lab investigations history",-1)),s("div",Eo,[a(b)]),e.listResults.length<=4&&e.listSeeMoreResults.length>=4?(n(),i("div",Oo,[a(c,{onClick:t[0]||(t[0]=O=>e.seeOrderStatus("more")),name:"Show More Lab Results",fill:"clear",iconSlot:"icon-only"})])):e.listResults.length>=5?(n(),i("div",Lo,[a(c,{onClick:t[1]||(t[1]=O=>e.seeOrderStatus("less")),name:"Show Less Lab Results",fill:"clear",iconSlot:"icon-only"})])):S("",!0)])):S("",!0),e.listOrders.length>1?(n(),i("div",Po,[t[8]||(t[8]=s("div",{style:{"font-weight":"700"}},"Lab Orders",-1)),s("div",Mo,[a(_,{listData:e.listOrders.map(O=>({...O,disabledEnterResults:e.hasPatientsWaitingForLab&&e.activeProgram.program_id===14&&(e.userRoles==="Clinician"||e.userRoles==="Superuser")})),"onClicked:delete":e.voidLabOrder,"onClicked:results":e.openResultsForm},null,8,["listData","onClicked:delete","onClicked:results"])]),e.listOrders.length<=4&&e.listSeeMoreOrders.length>=4?(n(),i("div",xo,[a(c,{onClick:t[2]||(t[2]=O=>e.seeResultsStatus("more")),name:"Show More Lab Orders",fill:"clear",iconSlot:"icon-only"})])):S("",!0),e.listOrders.length>=5?(n(),i("div",Ao,[a(c,{onClick:t[3]||(t[3]=O=>e.seeResultsStatus("less")),name:"Show Less Lab Orders",fill:"clear",iconSlot:"icon-only"})])):S("",!0)])):S("",!0),e.activeProgram.program_id==14&&e.hasEnterResults?(n(),i("div",Bo,[e.hasPatientsWaitingForLab?(n(),i("div",$o,[a(c,{class:"no-margin-left",fill:"solid",color:"danger",icon:"notification_icon",iconSlot:"icon-only",name:"Please enter the results once done, then send the patient back to consultation by clicking Finish button below."})])):(n(),i("div",No,[a(c,{fill:"solid",color:"success",icon:e.iconsContent.plus,iconSlot:"icon-only",onClick:t[4]||(t[4]=O=>e.toggleSendToLabModal()),name:"Send to Lab"},null,8,["icon"])]))])):S("",!0),a(u,{popoverOpen:e.openModal,onSaved:e.updateLabList,onCloseModal:t[5]||(t[5]=O=>e.openModal=!1)},null,8,["popoverOpen","onSaved"]),a(k,{popoverOpen:e.openResultsModal,content:e.labResultsContent,onCloseModal:t[6]||(t[6]=O=>e.openResultsModal=!1)},null,8,["popoverOpen","content"])],64)}const Fo=J(Io,[["render",Ro],["__scopeId","data-v-cd58a077"]]),xt=[{checkboxBtnContent:{header:{name:"Medical history"},data:[{name:"Skull",value:"Skull",checked:!1}]}},{checkboxBtnContent:{header:{name:"Medical history"},data:[{name:"Mastoid",value:"Mastoid",checked:!1}]}},{checkboxBtnContent:{header:{name:"Medical history"},data:[{name:"ParaSinuses",value:"ParaSinuses",checked:!1}]}},{checkboxBtnContent:{header:{name:"Medical history"},data:[{name:"Optic Foramen",value:"PVD",checked:!1}]}},{checkboxBtnContent:{header:{name:"Medical history"},data:[{name:"Orbits",value:"Orbits",checked:!1}]}},{checkboxBtnContent:{header:{name:"Medical history"},data:[{name:"Nasal Bone",value:"Nasal Bone",checked:!1}]}},{checkboxBtnContent:{header:{name:"Medical history"},data:[{name:"Mandible",value:"Mandible",checked:!1}]}},{checkboxBtnContent:{header:{name:"Medical history"},data:[{name:"TMJs",value:"TMJs",checked:!1}]}},{checkboxBtnContent:{header:{name:"Medical history"},data:[{name:"Zygomatic",value:"Zygomatic",checked:!1}]}}],To=[{checkboxBtnContent:{header:{name:"Medical history"},data:[{name:"Neck",value:"Neck",checked:!1}]}}],Ho=[{checkboxBtnContent:{header:{name:"Medical history"},data:[{name:"Chest",value:"Chest",checked:!1}]}},{checkboxBtnContent:{header:{name:"Medical history"},data:[{name:"Heart",value:"Heart",checked:!1}]}},{checkboxBtnContent:{header:{name:"Medical history"},data:[{name:"Sternum",value:"Sternum",checked:!1}]}},{checkboxBtnContent:{header:{name:"Medical history"},data:[{name:"Ribs",value:"Ribs",checked:!1}]}},{checkboxBtnContent:{header:{name:"Medical history"},data:[{name:"SCJ",value:"SCJ",checked:!1}]}}],Vo=[{checkboxBtnContent:{header:{name:"Medical history"},data:[{name:"Abdomen",value:"Abdomen",checked:!1}]}},{checkboxBtnContent:{header:{name:"Medical history"},data:[{name:"IVP",value:"IVP",checked:!1}]}}],Uo=[{checkboxBtnContent:{header:{name:"Medical history"},data:[{name:"Clavicle",value:"Clavicle",checked:!1}]}},{checkboxBtnContent:{header:{name:"Medical history"},data:[{name:"Shoulder",value:"Shoulder",checked:!1}]}},{checkboxBtnContent:{header:{name:"Medical history"},data:[{name:"Scapula",value:"Scapula",checked:!1}]}},{checkboxBtnContent:{header:{name:"Medical history"},data:[{name:"Humerus",value:"Humerus",checked:!1}]}},{checkboxBtnContent:{header:{name:"Medical history"},data:[{name:"Elbow",value:"Elbow",checked:!1}]}},{checkboxBtnContent:{header:{name:"Medical history"},data:[{name:"Forearm",value:"Forearm",checked:!1}]}},{checkboxBtnContent:{header:{name:"Medical history"},data:[{name:"Wrist",value:"Wrist",checked:!1}]}},{checkboxBtnContent:{header:{name:"Medical history"},data:[{name:"Hand",value:"Hand",checked:!1}]}},{checkboxBtnContent:{header:{name:"Medical history"},data:[{name:"Phalanges",value:"Phalanges",checked:!1}]}}],Wo=[{checkboxBtnContent:{header:{name:"Medical history"},data:[{name:"CSpine",value:"CSpine",checked:!1}]}},{checkboxBtnContent:{header:{name:"Medical history"},data:[{name:"TSpine",value:"TSpine",checked:!1}]}},{checkboxBtnContent:{header:{name:"Medical history"},data:[{name:"LSpine",value:"LSpine",checked:!1}]}},{checkboxBtnContent:{header:{name:"Medical history"},data:[{name:"SSpine",value:"SSpine",checked:!1}]}},{checkboxBtnContent:{header:{name:"Medical history"},data:[{name:"Coccyx",value:"Coccyx",checked:!1}]}}],qo=[{checkboxBtnContent:{header:{name:"Medical history"},data:[{name:"Pelvis",value:"Pelvis",checked:!1}]}},{checkboxBtnContent:{header:{name:"Medical history"},data:[{name:"Sacroillac Joints",value:"Sacroillac Joints",checked:!1}]}},{checkboxBtnContent:{header:{name:"Medical history"},data:[{name:"Hip",value:"Hip",checked:!1}]}}],Go=[{checkboxBtnContent:{header:{name:"Medical history"},data:[{name:"Femur",value:"Femur",checked:!1}]}},{checkboxBtnContent:{header:{name:"Medical history"},data:[{name:"Knee",value:"Knee",checked:!1}]}},{checkboxBtnContent:{header:{name:"Medical history"},data:[{name:"Patella",value:"Patella",checked:!1}]}},{checkboxBtnContent:{header:{name:"Medical history"},data:[{name:"Leg",value:"Leg",checked:!1}]}},{checkboxBtnContent:{header:{name:"Medical history"},data:[{name:"Ankle",value:"Ankle",checked:!1}]}},{checkboxBtnContent:{header:{name:"Medical history"},data:[{name:"Calcaneus",value:"Calcaneus",checked:!1}]}},{checkboxBtnContent:{header:{name:"Medical history"},data:[{name:"Foot",value:"Foot",checked:!1}]}},{checkboxBtnContent:{header:{name:"Medical history"},data:[{name:"Toe",value:"Toe",checked:!1}]}}],zo=Vs("RadiologyStore",{state:()=>({head:[...xt],neck:[...To],chest:[...Ho],abdomen:[...Vo],upper_extremity:[...Uo],spine:[...Wo],pelvis:[...qo],lower_extremity:[...Go]}),actions:{setOPDDiagnosis(e){this.head=e},getInitial(){return[...ye.cloneDeep(xt)]}}}),Yo=["innerHTML"],Ko={class:"scrollable-container"},Jo={key:0,class:"form-section"},jo={key:1,class:"form-section"},Xo={key:2,class:"form-section"},Qo={key:3,class:"form-section"},Zo={key:4,class:"form-section"},el={key:5,class:"form-section"},tl={key:6,class:"form-section"},sl={key:7,class:"form-section"},al=Y({__name:"RadiologyInvestigation",setup(e){const t=zo(),{head:r,neck:y,chest:d,abdomen:f,upper_extremity:o,spine:v,pelvis:b,lower_extremity:c}=At(t),_=g(de),u=g([]),k=(A,I,w)=>{document.querySelectorAll("#".concat(A," path")).forEach(C=>{C.classList.toggle("white-fill")}),document.querySelectorAll("#".concat(I," line")).forEach(C=>{C.classList.toggle("dark-green-stroke")}),document.querySelectorAll("#".concat(I," rect")).forEach(C=>{C.classList.toggle("bright-green-fill"),C.classList.toggle("dark-green-stroke")}),document.querySelectorAll("#".concat(I," path")).forEach(C=>{C.classList.toggle("dark-green-fill")}),document.querySelectorAll("#".concat(I," circle")).forEach(C=>{C.classList.toggle("bright-green-fill")});const p=u.value.findIndex(C=>C.id===w);p>=0?u.value.splice(p,1):u.value.unshift({id:w,active:!0})},O=()=>{const A=document.getElementById("SPINE");A.style.display==="none"||A.style.display==""?A.style.display="block":A.style.display="none",k("SPINE","SPINE_LABEL-2","spine")};return Ge(()=>{const A=document.getElementById("HEAD");A&&A.addEventListener("click",()=>{k("HEAD","LABEL-6","head")});const I=document.getElementById("NECK");I&&I.addEventListener("click",()=>{k("NECK","LABEL-5","neck")});const w=document.getElementById("CHEST");w&&w.addEventListener("click",()=>{k("CHEST","LABEL-4","chest")});const p=document.getElementById("ABDOMEN_LABEL");p&&p.addEventListener("click",()=>{const F=document.getElementById("ABDOMEN-2");F.style.display==="none"||F.style.display==""?F.style.display="block":F.style.display="none",k("ABDOMEN","ABDOMEN_LABEL-2","abdomen")});const C=document.getElementById("UPPER_EXTRMITY");C&&C.addEventListener("click",()=>{k("UPPER_EXTRMITY","LABEL-3","upper_extremity")});const ee=document.getElementById("SPINE"),te=document.getElementById("SPINE_LABEL"),P=document.getElementById("LOWER_SPINE_INACTIVE");ee&&ee.addEventListener("click",()=>{O()}),te&&te.addEventListener("click",()=>{O()}),P&&P.addEventListener("click",()=>{O()});const $=document.getElementById("PELVIS");$&&$.addEventListener("click",()=>{k("PELVIS","LABEL-2","pelvis")});const R=document.getElementById("LOWER_EXTREMITY");R&&R.addEventListener("click",()=>{k("LOWER_EXTREMITY","LABEL","lower_extremity")})}),(A,I)=>{const w=L("ion-col"),p=L("ion-row");return n(),B(p,null,{default:l(()=>[a(w,{size:"7"},{default:l(()=>[s("div",{innerHTML:_.value.full_body_sk},null,8,Yo)]),_:1}),a(w,{size:"5",class:"form-column"},{default:l(()=>[s("div",Ko,[(n(!0),i(H,null,U(u.value,C=>(n(),i(H,null,[C.id==="head"?(n(),i("div",Jo,[I[0]||(I[0]=s("h6",null,"Body Part: Head",-1)),a(X,{contentData:m(r)},null,8,["contentData"])])):C.id==="neck"?(n(),i("div",jo,[I[1]||(I[1]=s("h6",null,"Body Part: Neck",-1)),a(X,{contentData:m(y)},null,8,["contentData"])])):C.id==="chest"?(n(),i("div",Xo,[I[2]||(I[2]=s("h6",null,"Body Part: Chest",-1)),a(X,{contentData:m(d)},null,8,["contentData"])])):C.id==="abdomen"?(n(),i("div",Qo,[I[3]||(I[3]=s("h6",null,"Body Part: Abdomen",-1)),a(X,{contentData:m(f)},null,8,["contentData"])])):C.id==="upper_extremity"?(n(),i("div",Zo,[I[4]||(I[4]=s("h6",null,"Body Part: Upper Extremity",-1)),a(X,{contentData:m(o)},null,8,["contentData"])])):C.id==="spine"?(n(),i("div",el,[I[5]||(I[5]=s("h6",null,"Body Part: Spine",-1)),a(X,{contentData:m(v)},null,8,["contentData"])])):C.id==="pelvis"?(n(),i("div",tl,[I[6]||(I[6]=s("h6",null,"Body Part: Pelvis",-1)),a(X,{contentData:m(b)},null,8,["contentData"])])):C.id==="lower_extremity"?(n(),i("div",sl,[I[7]||(I[7]=s("h6",null,"Body Part: Lower Extremity",-1)),a(X,{contentData:m(c)},null,8,["contentData"])])):S("",!0)],64))),256))])]),_:1})]),_:1})}}}),nl=J(al,[["__scopeId","data-v-4e8419f9"]]),il=Y({name:"Menu",mixins:[_a],components:{IonContent:fe,IonHeader:ve,IonItem:W,IonList:Z,IonMenu:he,IonTitle:pe,IonToolbar:me,IonInput:ze,IonPopover:Rt,DashBox:Ke,SelectionPopover:Ht,BasicInputField:ct,BasicForm:X,List:Ae,DynamicButton:be,labOrderResults:Fo,RadiologyInvestigation:nl},data(){return{iconsContent:de,no_item:!1,search_item:!1,display_item:!1,addItemButton:!0,selectedText:"",testResult:"",test:"",labOrders:"",filteredSpecimen:"",testData:[],popoverOpen:!1,labOrderStatus:!1,event:"",specimen:"",radiologyOrdersStatus:!1,otherOrdersStatus:!1}},setup(){return{checkmark:xe,pulseOutline:Oe}},computed:{...K(ot,["investigations"]),...K(Ie,["patient"]),inputFields(){return this.investigations[0].data.rowData[0].colData}},watch:{investigations:{handler(){this.setDashedBox()},deep:!0},patient:{async handler(){this.labOrders=await ge.getOrders(this.patient.patientID)},deep:!0},$route:{async handler(){await this.getTests()},deep:!0}},async mounted(){await this.getTests(),this.updateInvestigationsStores(),this.setDashedBox(),this.updateInvestigationWizard()},methods:{async getTests(){let e;ue.getUseIndexDBStatus()&&ue.getModsStatus()?e=await pa("testTypes"):e=await ge.getTestTypes(),N(this.investigations,"test","multiSelectData",e)},async onRefresh(){try{const e=await ge.getTestTypesViaDirectAPICall();N(this.investigations,"test","multiSelectData",e),Ye("Test Types Selection list has been updated")}catch(e){Te("Could not fetch test types")}},toggleLabOrderStatus(){this.labOrderStatus=!this.labOrderStatus},async updateInvestigationWizard(){this.labOrders=await ge.getOrders(this.patient.patientID);const e=await this.labOrders.filter(t=>re.toStandardHisFormat(re.sessionDate())===re.toStandardHisFormat(t.order_date));e.length>0?this.investigations[0].selectedData=e:this.investigations[0].selectedData=""},async updateInvestigationsStores(){await this.updateInvestigationWizard(),ot().setInvestigations(this.investigations)},displayInputFields(e=!0){this.testResult="",this.selectedText="",this.no_item=!1,this.addItemButton=!e,this.search_item=e},async validateRowData(){return Pt(this.investigations)},async checkTest(){return await this.isNameInData(this.inputFields[0].value.name,await this.investigations[0].selectedData)?(N(this.investigations,"test","alertsErrorMassage","Lab order already selected"),!1):(N(this.investigations,"test","alertsErrorMassage",""),!0)},async addNewRow(){Pt(this.investigations)&&await this.checkTest()&&(await this.saveTest(),this.investigations[0].data.rowData[0].colData[0].value="",this.investigations[0].data.rowData[0].colData[1].value="",this.search_item=!1,this.display_item=!0,this.addItemButton=!0),this.updateInvestigationWizard()},isNameInData(e,t){for(let r of t)for(let y of r.tests)if(y.name===e)return!0;return!1},async saveTest(){await new Ea().postActivities(this.patient.patientID,[{concept_id:this.inputFields[0].value.concept_id,name:this.inputFields[0].value.name,specimen:this.inputFields[1].value.name,reason:"Routine",specimenConcept:await z.getConceptID(this.inputFields[1].value.name,!0)}]),N(this.investigations,"specimen","disabled",!0),this.labOrders=await ge.getOrders(this.patient.patientID)},async handleInputData(e){e.inputHeader=="Test"&&this.checkTest(),N(this.investigations,"specimen","alertsErrorMassage",""),e.inputHeader=="Test"&&e.value&&(this.specimen=await ge.getSpecimens(e.value.name),this.specimen.length==1?(N(this.investigations,"specimen","value",this.specimen[0]),N(this.investigations,"specimen","disabled",!0)):(N(this.investigations,"specimen","value",""),N(this.investigations,"specimen","disabled",!1)),N(this.investigations,"specimen","multiSelectData",this.specimen))},async filterTest(e){return await this.labOrders.filter(t=>t.name.toLowerCase().includes(e.toLowerCase()))},async filterSpecimen(e){var t;return(t=this.specimen[0])!=null&&t.name&&e?await this.specimen.filter(r=>r==null?void 0:r.name.toLowerCase().includes(e.toLowerCase())):[]},setTest(e){this.selectedText=e.name,this.inputFields[1].inputHeader=="Test"?this.investigations[0].data.rowData[0].colData[0].value=e.name:this.investigations[0].data.rowData[0].colData[1].value=e.name,this.updateInvestigationsStores()},setDashedBox(){(this.inputFields[1].value||this.inputFields[0].value)&&(this.addItemButton=!1,this.search_item=!0,this.no_item=!1),this.investigations[0].selectedData.length>0?(this.display_item=!0,this.no_item=!1):this.search_item||(this.no_item=!0)}}}),ol={class:"ion-padding",slot:"content",style:{"margin-bottom":"125px"}},ll={key:0},rl={class:"ion-padding",slot:"content"};function dl(e,t,r,y,d,f){const o=L("ion-label"),v=L("ion-item"),b=L("labOrderResults"),c=L("basic-form"),_=L("DynamicButton"),u=L("ion-row"),k=L("ion-accordion"),O=L("ion-accordion-group"),A=L("RadiologyInvestigation");return n(),i(H,null,[a(O,{ref:"accordionGroup",class:"previousView",value:"first"},{default:l(()=>[a(k,{value:"first","toggle-icon-slot":"start",class:"custom_card"},{default:l(()=>[a(v,{slot:"header",color:"light"},{default:l(()=>[a(o,{class:"previousLabel"},{default:l(()=>t[2]||(t[2]=[x("Lab Investigations")])),_:1,__:[2]})]),_:1}),s("div",ol,[s("span",null,[a(b,{propOrders:e.labOrders},null,8,["propOrders"])]),e.search_item?(n(),i("span",ll,[a(c,{contentData:e.investigations,"onUpdate:selected":e.handleInputData,"onUpdate:inputValue":e.handleInputData,"onClicked:button":e.addNewRow,onRefresh:e.onRefresh},null,8,["contentData","onUpdate:selected","onUpdate:inputValue","onClicked:button","onRefresh"])])):S("",!0),e.addItemButton&&e.userRole!="Lab"?(n(),B(u,{key:1,style:{"margin-top":"10px"}},{default:l(()=>[a(_,{fill:"clear",icon:e.iconsContent.plus,iconSlot:"icon-only","onClicked:btn":t[0]||(t[0]=I=>e.displayInputFields()),name:"Add new test"},null,8,["icon"])]),_:1})):S("",!0),e.search_item?(n(),B(u,{key:2},{default:l(()=>[a(_,{fill:"clear",icon:e.iconsContent.redXclose,iconSlot:"icon-only","onClicked:btn":t[1]||(t[1]=I=>e.displayInputFields(!1)),name:"cancel"},null,8,["icon"])]),_:1})):S("",!0)])]),_:1})]),_:1},512),e.userRole!="Lab"?(n(),B(O,{key:0,ref:"accordionGroup",class:"previousView"},{default:l(()=>[a(k,{value:"first","toggle-icon-slot":"start",class:"custom_card"},{default:l(()=>[a(v,{slot:"header",color:"light"},{default:l(()=>[a(o,{class:"previousLabel"},{default:l(()=>t[3]||(t[3]=[x("Radiology Investigation")])),_:1,__:[3]})]),_:1}),s("div",rl,[a(A)])]),_:1})]),_:1},512)):S("",!0),e.userRole!="Lab"?(n(),B(O,{key:1,ref:"accordionGroup",class:"previousView"},{default:l(()=>[a(k,{value:"first","toggle-icon-slot":"start",class:"custom_card"},{default:l(()=>[a(v,{slot:"header",color:"light"},{default:l(()=>[a(o,{class:"previousLabel"},{default:l(()=>t[4]||(t[4]=[x("Other Investigation")])),_:1,__:[4]})]),_:1}),t[5]||(t[5]=s("div",{class:"ion-padding",slot:"content"},null,-1))]),_:1,__:[5]})]),_:1},512)):S("",!0)],64)}const mr=J(il,[["render",dl],["__scopeId","data-v-1ea6464c"]]),cl={class:"allergies-section"},ul={class:"allergies-container"},ml={key:0,class:"allergies-grid"},pl={key:1,class:"no-allergies"},hl={class:"ion-padding",slot:"content"},vl={key:0},fl={class:"previousSecDrgs"},gl={class:"ion-padding",slot:"content"},yl={class:"previousSecDrgs"},_l={class:"medication-section"},bl={class:"medication-content"},Dl={key:0,class:"add-medication-form"},Sl={class:"form-group"},kl={class:"option-label"},Cl={key:0,class:"error-message"},Il={class:"form-row"},wl={class:"form-group"},El={key:0,class:"error-message"},Ol={class:"form-group"},Ll={key:0,class:"error-message"},Pl={class:"form-group"},Ml={key:0,class:"error-message"},xl={class:"action-buttons"},Al={class:"notes-section"},Bl={class:"notes-content"},$l={class:"notes-input-container"},Nl={class:"ion-padding",slot:"content"},Rl={class:"notes-timeline"},Fl={class:"note-date"},Tl={class:"note-content"},Hl={class:"ion-padding",slot:"content"},Vl={class:"note-date"},Ul={class:"note-content"},Wl=Y({watch:{},name:"xxxComponent"}),ql=Y({...Wl,setup(e){const t=de,r=La,y=g(!1),d=g(!1),f=g(!0),o=g(0),v=g(""),b=g(!1),c=g(""),_=g(!1),u=g(),k=g(!1),O=g(""),A=g(""),I=g(""),w=g(""),p=g(""),C=g("");g(!1);const ee="Add new medication",te="clear";g("Show more medications");const P=Pe(),$=Tt(),R=le(()=>$.selectedMedicalAllergiesList),F=le(()=>P.selectedMedicalDrugsList),j=le(()=>P.partialOPDdrugList),ie=le(()=>P.nonPharmalogicalTherapyAndOtherNotes),He=["first","second","third"],Vt=g(),ut=g(),mt=g(),Ve=g(!1),pt=g(!1),ht=g(!1),Je=g("Show more notes"),je=g("Show more allergies"),vt=g(),ft=g(),Le=g(),Ue=le(()=>P.editingDrugItem),Ut=g("Select a route"),Xe=g(!1),Wt=g("Select frequency"),Qe=g(!1),qt=g("Select drug"),Ze=g(!1),se=g(),ae=g(),De=g(),Be=g([]),Gt=g([{concept_id:11797,name:"Buccal",concept_name_id:null,id:1769},{concept_id:11794,name:"Intradermal",concept_name_id:null,id:6284},{concept_id:11795,name:"Intramuscular (IM)",concept_name_id:null,id:6285},{concept_id:11799,name:"Intraosseous",concept_name_id:null,id:6286},{concept_id:11793,name:"Intravenous (IV)",concept_name_id:null,id:6295},{concept_id:3327,name:"Oral",concept_name_id:null,id:8686},{concept_id:11800,name:"Other method of prescription",concept_name_id:null,id:8920},{concept_id:11792,name:"Rectally",concept_name_id:null,id:10785},{concept_id:11798,name:"Subcutaneous",concept_name_id:null,id:12342},{concept_id:11796,name:"Sublingual",concept_name_id:null,id:12344},{concept_id:11792,name:"Rectally",concept_name_id:null,id:14078},{concept_id:11793,name:"Intravenous (IV)",concept_name_id:null,id:14079},{concept_id:11794,name:"Intradermal",concept_name_id:null,id:14080},{concept_id:11795,name:"Intramuscular (IM)",concept_name_id:null,id:14081},{concept_id:11796,name:"Sublingual",concept_name_id:null,id:14082},{concept_id:11797,name:"Buccal",concept_name_id:null,id:14083},{concept_id:11798,name:"Subcutaneous",concept_name_id:null,id:14084},{concept_id:11799,name:"Intraosseous",concept_name_id:null,id:14085},{concept_id:11800,name:"Other method of prescription",concept_name_id:null,id:14086}]),zt=le(()=>Be.value.length?Be.value:Gt.value);function Yt(D){se.value=D}async function Kt(){return await Pa()}async function Jt(D=5,h=1e3){let T=0;for(;T<D&&(Be.value=await Kt(),!(Be.value.length>0));)T++,await new Promise(q=>setTimeout(q,h));Be.value.length===0&&console.warn("Failed to fetch route list after maximum retries.")}Ge(async()=>{const D=new ba,{previousDrugPrescriptions:h,previousClinicalNotes:T,previousDrugAllergies:q}=await D.getPatientEncounters();Vt.value=h,ut.value=Object.entries(T)[0];const[,...E]=Object.entries(T);mt.value=E,vt.value=Object.entries(q)[0];const[,...V]=Object.entries(q);ft.value=V,await Jt()}),Ee(()=>O.value,async D=>{gt()}),Ee(()=>A.value,async D=>{es()}),Ee(()=>I.value,async D=>{yt()});function jt(){if(ye.isEmpty(se.value)==!0)return Xe.value=!0,!1;if(ye.isEmpty(se.value)==!1)return Xe.value=!1,!0}function Xt(){if(ye.isEmpty(ae.value)==!0)return Qe.value=!0,!1;if(ye.isEmpty(ae.value)==!1)return Qe.value=!1,!0}function Qt(){if(ye.isEmpty(De.value)==!0)return Ze.value=!0,!1;if(ye.isEmpty(De.value)==!1)return Ze.value=!1,!0}function Zt(){f.value=!f.value,y.value=!0,_.value=!1,k.value=!1}async function gt(){const D=await ns();return console.log({drugNameExists:D}),D?b.value=!1:(v.value="please select a valid drug name",b.value=!0),b.value}async function es(){return Dt(A.value)?_.value=!1:(c.value="please enter a number",_.value=!0),_.value}async function yt(){return Dt(I.value)?k.value=!1:(u.value="please enter a number",k.value=!0),k.value}async function _t(){const D=await gt(),h=await yt(),T=Xt(),q=Qt(),E=jt();return!D&&!h&&T==!0&&q==!0&&E==!0}function ts(D){ae.value=D}async function bt(){const D=()=>Le.value.dose_strength!=null&&Le.value.dose_strength?Math.trunc(Le.value.dose_strength):1;if(Ue.value!==null){if(!await _t()){Fe("Please enter correct data values",4e3);return}const T=ue.getSessionDate(),q=St(T,parseInt(I.value));let E=!1;et(Le.value)==!0&&(E=!0);const V={drugName:O.value,dose:D(),frequency:ae.value.label,frequency_code:ae.value.code,duration:I.value,prescription:q,drug_id:C.value,units:p.value,route_concept_id:se.value.concept_id,route_name:se.value.name,highlightbackground:E},ne=Pe();console.log(ne.setSelectedMedicalDrugsList([V])),ne.editingDrugItem=null,f.value=!0}else{if(!await _t()){Fe("Please enter correct data values",4e3);return}ms();const T=ue.getSessionDate(),q=St(T,parseInt(I.value));let E=!1;et(Le.value)==!0&&(E=!0);const V={drugName:O.value,dose:D(),frequency:ae.value.label,frequency_code:ae.value.code,duration:I.value,prescription:q,drug_id:C.value,units:p.value,route_concept_id:se.value.concept_id,route_name:se.value.name,highlightbackground:E};Pe().setSelectedMedicalDrugsList([V])}C.value="",O.value="",A.value="",ae.value=null,I.value="",w.value="",o.value++,De.value=null,se.value=null}async function ss(D){const h=D,E=await Mt.getOfflineOPDDrugs({name:h,page:1,page_size:10});E.map(V=>({label:V.name,value:V.name,other:V})),P.setPartialOPDdrugList(E)}async function as(D){let h;D.target===void 0?h=D:h=D.target.value;const E=await Mt.getOPDDrugs({name:encodeURIComponent(h),page:1,page_size:10});return E.map(V=>({label:V.name,value:V.name,other:V})),E}function et(D){const h=[];return R.value.forEach(q=>{q.selected&&h.push(q.concept_id)}),is([D],h)==!0?(Fe("Client is allergic to the selected medication",4e6),!0):!1}async function ns(){return(await as(O.value)).length>0?O.value.length!=0:!1}function is(D,h){try{return D.some(T=>h.includes(T.concept_id))}catch(T){return!1}}function os(D){D&&(O.value=D.name,C.value=D.drug_id,p.value=D.units,Le.value=D,et(D))}function ls(D){const h=F.value[D],T=Pe();T.removeDrugById(h.drug_id),T.editingDrugItem=h,C.value="",O.value="",A.value="",ae.value=null,I.value="",w.value="",De.value=null,se.value=null,C.value=h.drug_id,O.value=h.drugName,A.value=h.dose,ae.value={label:h.frequency,code:h.frequency_code},I.value=h.duration,w.value=h.prescription;const q=j.value.find(E=>E.name===h.drugName);q&&(De.value=q),se.value={concept_id:h.route_concept_id,name:h.route_name},f.value=!1,o.value++}function rs(){if(Ue.value!==null){C.value="",O.value="",A.value="",ae.value=null,I.value="",w.value="",De.value=null,se.value=null;const D=Pe();D.setSelectedMedicalDrugsList([Ue.value]),D.editingDrugItem=null}f.value=!0,o.value++}function ds(D){F.value.splice(D,1),o.value++,Fe("you have removed a drug from list",6e3)}function cs(D){let h=D.target.value;us(h)}function us(D){Pe().setNonPharmalogicalTherapyAndOtherNotes(D)}function Dt(D){return/^[0-9]+$/.test(D)}function St(D,h){const T=new Date(D);T.setDate(T.getDate()+h);const q=T.getFullYear(),E=String(T.getMonth()+1).padStart(2,"0"),V=String(T.getDate()).padStart(2,"0");return"".concat(q,"-").concat(E,"-").concat(V)}function ms(){y.value=!1,d.value=!0,f.value=!0}function ps(D){He.filter(T=>T!==D.detail.value);const h=D.detail.value;h!==void 0?h=="third"&&(Je.value="Show less notes",pt.value=!Ve.value):(Je.value="Show more notes",pt.value=!Ve.value)}function hs(D){He.filter(T=>T!==D.detail.value);const h=D.detail.value;h!==void 0?h=="fith"&&(je.value="Show less allegies",ht.value=!Ve.value):(je.value="Show more allegies",ht.value=!Ve.value)}function kt(D){return D[1]}function vs(D){(D.key==="Enter"||D.key==="ArrowDown")&&(D.preventDefault(),bt())}const Se=le(()=>[{showAddItemButton:!0,addItemButton:!0,name:Ue.value!==null?"Update":"ADD",btnFill:"clear",fn:bt},{showAddItemButton:!0,addItemButton:!0,name:"CANCEL",btnFill:"clear",fn:rs}]);return(D,h)=>{const T=L("ion-chip"),q=L("ion-text");return n(),B(m(Z),null,{default:l(()=>[s("div",cl,[a(m(G),{class:"section-title"},{default:l(()=>[a(m(Me),{icon:m(Nt),class:"alert-icon"},null,8,["icon"]),a(m(G),null,{default:l(()=>h[9]||(h[9]=[x("Allergies (Medication, Healthcare items, Environment and Food)")])),_:1,__:[9]})]),_:1}),s("div",ul,[R.value.some(E=>E.selected)?(n(),i("div",ml,[(n(!0),i(H,null,U(R.value,(E,V)=>Us((n(),i("div",{key:V,class:"allergy-item"},[a(T,{class:"allergy-chip",color:"danger"},{default:l(()=>[a(m(G),null,{default:l(()=>[x(M(E.name),1)]),_:2},1024),a(m(Me),{icon:m(Ws)},null,8,["icon"])]),_:2},1024)])),[[qs,E.selected]])),128))])):(n(),i("div",pl,[a(q,{style:{"font-size":"16px","font-weight":"600",color:"#9c8011"}},{default:l(()=>h[10]||(h[10]=[x("No allergies recorded")])),_:1,__:[10]})])),a(m(Re),{ref:"accordionGroup",class:"previousView"},{default:l(()=>[a(m(ce),{value:"fourth","toggle-icon-slot":"start",style:{"border-radius":"10px","background-color":"#fff"}},{default:l(()=>[a(m(W),{slot:"header",color:"light"},{default:l(()=>[a(m(G),{class:"previousLabel"},{default:l(()=>h[11]||(h[11]=[x("Documented allergies timeline")])),_:1,__:[11]})]),_:1}),s("div",hl,[(n(!0),i(H,null,U(vt.value,(E,V)=>(n(),i("div",{class:"ionLbltp",key:V},[V==1?(n(),i("div",vl,[s("div",null,[a(m(G),{class:"previousLabelDate"},{default:l(()=>[x(M(E[0].date),1)]),_:2},1024)]),(n(!0),i(H,null,U(E,(ne,we)=>(n(),i("div",{key:we},[s("div",fl,[a(m(Z),null,{default:l(()=>[a(m(G),{class:"notes_p"},{default:l(()=>[x(M(ne.value),1)]),_:2},1024)]),_:2},1024)])]))),128))])):S("",!0)]))),128)),a(m(Re),{onIonChange:hs},{default:l(()=>[a(m(ce),{value:"fith","toggle-icon-slot":"start",style:{"border-radius":"10px","background-color":"#fff"}},{default:l(()=>[a(m(W),{slot:"header",color:"light"},{default:l(()=>[a(m(G),{class:"",color:"primary"},{default:l(()=>[x(M(je.value),1)]),_:1})]),_:1}),s("div",gl,[(n(!0),i(H,null,U(ft.value,(E,V)=>(n(),i("div",{class:"ionLbltp",key:V},[s("div",null,[a(m(G),{class:"previousLabelDate"},{default:l(()=>[x(M(E[0]),1)]),_:2},1024)]),(n(!0),i(H,null,U(kt(E),(ne,we)=>(n(),i("div",{key:we},[s("div",yl,[a(m(Z),null,{default:l(()=>[a(m(G),{class:"notes_p"},{default:l(()=>[x(M(ne.value),1)]),_:2},1024)]),_:2},1024)])]))),128))]))),128))])]),_:1})]),_:1})])]),_:1})]),_:1},512)])]),s("div",_l,[a(m(W),{lines:"none",class:"section-header"},{default:l(()=>[a(m(Me),{icon:m($t),class:"section-icon"},null,8,["icon"]),a(m(G),{class:"section-title",style:{"margin-top":"12px"}},{default:l(()=>h[12]||(h[12]=[x("Medication")])),_:1,__:[12]})]),_:1}),s("div",bl,[(n(),B(Da,{_selectedMedicalDrugsList:F.value,onEditItem:ls,onRemoveItem:ds,key:o.value,class:"medication-list"},null,8,["_selectedMedicalDrugsList"])),f.value?S("",!0):(n(),i("div",Dl,[s("div",Sl,[h[13]||(h[13]=s("label",{class:"input-label"},"Medication",-1)),a(m(tt),{modelValue:De.value,"onUpdate:modelValue":[h[0]||(h[0]=E=>De.value=E),h[1]||(h[1]=E=>os(E))],options:j.value,searchable:!0,"close-on-select":!0,"show-labels":!1,placeholder:"Select medication",label:"name","track-by":"drug_id",onSearchChange:h[2]||(h[2]=E=>ss(E))},{option:l(E=>[s("div",kl,M(E.option.name),1)]),_:1},8,["modelValue","options"]),Ze.value?(n(),i("div",Cl,M(qt.value),1)):S("",!0)]),s("div",Il,[s("div",wl,[h[14]||(h[14]=s("label",{class:"input-label"},"Route",-1)),a(m(tt),{modelValue:se.value,"onUpdate:modelValue":[h[3]||(h[3]=E=>se.value=E),h[4]||(h[4]=E=>Yt(E))],options:zt.value,searchable:!0,"close-on-select":!0,"show-labels":!1,placeholder:"Select route",label:"name","track-by":"concept_id"},null,8,["modelValue","options"]),Xe.value?(n(),i("div",El,M(Ut.value),1)):S("",!0)]),s("div",Ol,[h[15]||(h[15]=s("label",{class:"input-label"},"Frequency",-1)),a(m(tt),{modelValue:ae.value,"onUpdate:modelValue":[h[5]||(h[5]=E=>ae.value=E),h[6]||(h[6]=E=>ts(E))],options:m(r),searchable:!0,"close-on-select":!0,"show-labels":!1,placeholder:"Select frequency",label:"label","track-by":"code"},null,8,["modelValue","options"]),Qe.value?(n(),i("div",Ll,M(Wt.value),1)):S("",!0)]),s("div",Pl,[h[16]||(h[16]=s("label",{class:"input-label"},"Duration (days)",-1)),a(m(ze),{modelValue:I.value,"onUpdate:modelValue":h[7]||(h[7]=E=>I.value=E),type:"number",inputmode:"numeric",pattern:"[0-9]*",fill:"outline",placeholder:"Enter duration",onKeydown:vs},null,8,["modelValue"]),k.value?(n(),i("div",Ml,M(u.value),1)):S("",!0)])]),s("div",xl,[Se.value[0].addItemButton?(n(),B(be,{key:0,name:Se.value[0].name,fill:Se.value[0].btnFill,icon:m(Gs),"onClicked:btn":Se.value[0].fn,class:"save-button"},null,8,["name","fill","icon","onClicked:btn"])):S("",!0),Se.value[1].addItemButton?(n(),B(be,{key:1,name:Se.value[1].name,fill:Se.value[1].btnFill,icon:m(zs),"onClicked:btn":Se.value[1].fn,class:"cancel-button"},null,8,["name","fill","icon","onClicked:btn"])):S("",!0)])])),f.value?(n(),B(be,{key:1,name:ee,fill:te,icon:m(Bt),"onClicked:btn":Zt,class:"add-new-button"},null,8,["icon"])):S("",!0)])]),s("div",Al,[a(m(W),{lines:"none",class:"section-header"},{default:l(()=>[a(m(Me),{icon:m(Ys),class:"section-icon"},null,8,["icon"]),a(m(G),{class:"section-title"},{default:l(()=>h[17]||(h[17]=[x("Non-pharmacological therapy and other notes")])),_:1,__:[17]})]),_:1}),s("div",Bl,[a(Sa,{class:"intervention-component"}),s("div",$l,[a(m(W),{class:"notes-input-item"},{default:l(()=>[a(m(Me),{slot:"start",icon:m(t).editPen,class:"edit-icon","aria-hidden":"true"},null,8,["icon"]),a(m(Ks),{modelValue:ie.value,"onUpdate:modelValue":h[8]||(h[8]=E=>ie.value=E),onIonInput:cs,placeholder:"Enter notes here...","auto-grow":!0,class:"notes-textarea",fill:"outline",style:{"--padding-start":"16px"}},null,8,["modelValue"])]),_:1})]),a(m(Re),{ref:"accordionGroup",class:"previous-notes"},{default:l(()=>[a(m(ce),{value:"fourth","toggle-icon-slot":"start"},{default:l(()=>[a(m(W),{slot:"header",color:"light",class:"previous-notes-header"},{default:l(()=>[a(m(G),null,{default:l(()=>h[18]||(h[18]=[x("Previous visit notes")])),_:1,__:[18]})]),_:1}),s("div",Nl,[s("div",Rl,[D.index===1?(n(!0),i(H,{key:0},U(ut.value,(E,V)=>(n(),i("div",{key:V,class:"note-entry"},[(n(!0),i(H,null,U(E,(ne,we)=>(n(),i("div",{key:we},[s("div",Fl,M(ne.date),1),s("div",Tl,M(ne.notes),1)]))),128))]))),128)):S("",!0),a(m(Re),{onIonChange:ps},{default:l(()=>[a(m(ce),{value:"third","toggle-icon-slot":"start"},{default:l(()=>[a(m(W),{slot:"header",color:"light",class:"show-more-header"},{default:l(()=>[a(m(G),{color:"primary"},{default:l(()=>[x(M(Je.value),1)]),_:1})]),_:1}),s("div",Hl,[(n(!0),i(H,null,U(mt.value,(E,V)=>(n(),i("div",{key:V,class:"note-entry"},[(n(!0),i(H,null,U(kt(E),(ne,we)=>(n(),i("div",{key:we},[s("div",Vl,M(ne.date),1),s("div",Ul,M(ne.notes),1)]))),128))]))),128))])]),_:1})]),_:1})])])]),_:1})]),_:1},512)])])]),_:1})}}}),pr=J(ql,[["__scopeId","data-v-e5aea6dd"]]),Gl={class:"dash_box"},zl={key:1},Yl=Y({name:"xxxComponent"}),Kl=Y({...Yl,setup(e){const t=g("No outcome created yet"),r=g(!1),y=g("please select a type");g("Add new outcome"),g(!0);const d=g(!0),f=g(""),o=g(!0),v=g(!1),b=ha(),c=le(()=>b.outcomes),_=g(!1),u=g(!1),k=g(!1),O=g(!1),A=g(!1);g(null),g(null);const I=g([{name:"Admitted for short stay",selected:!1},{name:"Referred out",selected:!1},{name:"Discharged Home",selected:!1}]),w=[{multi_Selection:!1,show_list_label:!0,unqueId:"qwerty2",name_of_list:"Add new outcome",placeHolder:"Choose one",items:I.value,listUpdatedFN:p,listFilteredFN:()=>{},use_internal_filter:!0,disabled:g(!1)}];function p(F){I.value=F,I.value.forEach(j=>{j.selected==!0&&(f.value=j.name)})}Ge(async()=>{ee()}),Ee(()=>f.value,async F=>{_.value==!0?_.value=!1:$()}),Ee(()=>c.value.length,async F=>{ee()});function C(){I.value.forEach(F=>{F.selected=!1}),f.value=""}function ee(){c.value.length>0?o.value=!1:c.value.length==0&&v.value==!1&&(o.value=!0)}function te(F){c.value.splice(F,1)}const P=F=>{};async function $(F=!0){const j=f.value;console.log(j),f.value=j;const ie=f.value;ie==I.value[0].name?k.value=!0:k.value=!1,ie==I.value[1].name?(O.value=!0,console.log("show_discharged_options is set to true")):O.value=!1,ie==I.value[2].name?(A.value=!0,console.log("show_discharged_options is set to true")):A.value=!1}function R(){u.value=!1,k.value=!1,O.value=!1,A.value=!1,C()}return(F,j)=>{const ie=L("ion-row");return n(),B(m(Z),null,{default:l(()=>[a(ie,null,{default:l(()=>[a(m(Ct),null,{default:l(()=>[(n(),B(Ma,{key:0,"onUpdate:removeItem":te,"onUpdate:editItem":P,displayData:c.value},null,8,["displayData"]))]),_:1})]),_:1}),o.value?(n(),B(ie,{key:0},{default:l(()=>[s("span",Gl,M(t.value),1)]),_:1})):S("",!0),d.value?(n(),i("div",zl,[a(ie,null,{default:l(()=>[a(m(Ct),null,{default:l(()=>[a(va,{multiSelection:w[0].multi_Selection,show_label:w[0].show_list_label,uniqueId:w[0].unqueId,name_of_list:w[0].name_of_list,choose_place_holder:w[0].placeHolder,"items_-list":w[0].items,use_internal_filter:w[0].use_internal_filter,disabled:w[0].disabled.value,onItemListUpDated:w[0].listUpdatedFN,onItemListFiltered:w[0].listFilteredFN},null,8,["multiSelection","show_label","uniqueId","name_of_list","choose_place_holder","items_-list","use_internal_filter","disabled","onItemListUpDated","onItemListFiltered"]),s("div",null,[r.value?(n(),B(m(G),{key:0,class:"error-label"},{default:l(()=>[x(M(y.value),1)]),_:1})):S("",!0)])]),_:1})]),_:1})])):S("",!0),k.value?(n(),B(xa,{key:2,onDataSaved:R,selected_ward_prop:"",admitted_other_props:""})):S("",!0),O.value?(n(),B(Aa,{key:3,onDataSaved:R,selected_referral_data:"",selected_other_referral_data:""})):S("",!0),A.value?(n(),B(Ba,{key:4,onDataSaved:R,selected_discharged_prop:"",selected_discharged_data:""})):S("",!0)]),_:1})}}}),hr=J(Kl,[["__scopeId","data-v-b6576c18"]]);export{cr as C,mr as I,Bi as L,ur as O,ro as P,pr as a,hr as b,Wa as c,Fi as d,Yi as e,Fo as l};
