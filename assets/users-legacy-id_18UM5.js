System.register(["./vendor-legacy-DRwJKgQV.js","./index-legacy-DCc77uLY.js","./bottomNavBar-legacy-DFemlvHK.js","./lodash-legacy-pOOc9Efu.js","./NavigationMenu-legacy-BRrEzFJL.js","./EIRreportsStore-legacy-CGeP0BMT.js","./apexcharts-legacy-BkPboU-Y.js"],function(e,a){"use strict";var l,t,n,o,r,i,s,d,u,c,p,f,m,_,v,h,g,b,x,y,w,k,V,I,U,C,P,S,L,F,H,E,N,z,T,M,q,D,A,O,j,R,$,B,G,K,Q,Z,J,W,X,Y,ee,ae,le,te,ne,oe,re,ie,se,de,ue,ce,pe,fe,me,_e,ve,he,ge,be,xe,ye,we,ke,Ve,Ie,Ue;return{setters:[e=>{l=e.d,t=e.a0,n=e.aN,o=e.bK,r=e.L,i=e.b1,s=e.a1,d=e.ab,u=e.aO,c=e.aP,p=e.cb,f=e.aQ,m=e.aR,_=e.aa,v=e.a9,h=e.bh,g=e.ae,b=e.a8,x=e.r,y=e.bq,w=e.a,k=e.w,V=e.c,I=e.bV,U=e.dD,C=e.b_,P=e.H,S=e.e,L=e.f,F=e.l,H=e.J,E=e.N,N=e.k,z=e.K,T=e.F,M=e.O,q=e.P,D=e.u,A=e.az,O=e.m,j=e.aE,R=e.bg,$=e.dF,B=e.be,G=e.I,K=e.G,Q=e.E,Z=e.c0,J=e.aZ,W=e.M,X=e.a7,Y=e.bi,ee=e.Q,ae=e.bf,le=e.b8,te=e.bC},e=>{ne=e.ak,oe=e.U,re=e._,ie=e.Z,se=e.ac,de=e.al,ue=e.L,ce=e.B,pe=e.am,fe=e.an,me=e.ao,_e=e.$,ve=e.ap,he=e.aq,ge=e.s,be=e.ar,xe=e.M,ye=e.T,we=e.r},e=>{ke=e.b},e=>{Ve=e.l},e=>{Ie=e.N},e=>{Ue=e.E},null],execute:function(){var a=document.createElement("style");a.textContent=".container[data-v-c3b99129]{display:flex;flex-direction:column;height:100vh;padding:16px}.dynamic-grid[data-v-c3b99129]{flex:1;overflow-y:auto;padding:8px}.user-cards-row[data-v-c3b99129]{display:flex;flex-wrap:wrap;gap:16px;justify-content:flex-start}.user-card[data-v-c3b99129]{width:100%;height:100%;margin:0}ion-card-content[data-v-c3b99129]{padding:16px}ion-card-title[data-v-c3b99129],ion-card-subtitle[data-v-c3b99129],ion-label h3[data-v-c3b99129],ion-label p[data-v-c3b99129]{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.edit-icon[data-v-c3b99129]{float:right;color:#5c6ac4;cursor:pointer}.sticky-footer[data-v-c3b99129]{position:sticky;bottom:0;background:transparent;box-shadow:0 -2px 5px rgba(0,0,0,0);z-index:10}@media (max-width: 576px){ion-col[data-v-c3b99129]{flex:0 0 100%;max-width:100%}}@media (min-width: 576px) and (max-width: 768px){ion-col[data-v-c3b99129]{flex:0 0 calc(50% - 16px);max-width:calc(50% - 16px)}}@media (min-width: 768px) and (max-width: 1024px){ion-col[data-v-c3b99129]{flex:0 0 calc(33.333% - 16px);max-width:calc(33.333% - 16px)}}@media (min-width: 1024px){ion-col[data-v-c3b99129]{flex:0 0 calc(25% - 16px);max-width:calc(25% - 16px)}}.error-label[data-v-731a8d5a]{background:#fecdca;color:#b42318;text-transform:none;padding:3%;border-radius:10px;margin-top:7px;display:flex;text-align:center}ion-footer[data-v-79045015]{--ion-toolbar-background: #f4f4f4f4}ion-modal[data-v-79045015]{--width: 90%;--height: 94%;--border-radius: 12px;--box-shadow: 0 28px 48px rgba(0, 0, 0, .4);--backdrop-opacity: var(--ion-backdrop-opacity, .32);--box-shadow: 0 10px 15px -3px rgb(0 0 0 / .1), 0 4px 6px -4px rgb(0 0 0 / .1)}.search-container[data-v-91ec2592]{display:flex;justify-content:center;align-items:center;width:100%;padding:16px}.search-row[data-v-91ec2592]{display:flex;justify-content:space-between;align-items:center;width:100%;max-width:800px}.input-col[data-v-91ec2592]{flex:1}.button-col[data-v-91ec2592]{flex:0 0 auto}.btn-cls-2[data-v-91ec2592]{font-size:14px;font-weight:500;width:fit-content}@media (max-width: 576px){.search-row[data-v-91ec2592]{flex-direction:column;gap:8px}.input-col[data-v-91ec2592],.button-col[data-v-91ec2592]{width:100%;margin-right:0}.btn-cls-2[data-v-91ec2592]{width:100%}}.skeleton-wrapper[data-v-d6f00683]{padding:1rem;width:100%}.search-bar[data-v-d6f00683]{margin-bottom:2rem;padding:.5rem}.search-container[data-v-d6f00683]{display:flex;align-items:center;gap:1rem}.search-label[data-v-d6f00683]{width:80px;height:20px}.search-chip[data-v-d6f00683]{width:120px;height:32px;background:linear-gradient(90deg,#e0e0e0 25%,#f0f0f0,#e0e0e0 75%);border-radius:16px;animation:shimmer-d6f00683 1.5s infinite}.add-button[data-v-d6f00683]{width:100px;height:36px;background:linear-gradient(90deg,#e0e0e0 25%,#f0f0f0,#e0e0e0 75%);border-radius:4px;margin-left:auto;animation:shimmer-d6f00683 1.5s infinite}.cards-grid[data-v-d6f00683]{display:grid;grid-template-columns:repeat(auto-fill,minmax(300px,1fr));gap:1rem}.skeleton-card[data-v-d6f00683]{background:#fff;border-radius:8px;padding:1rem;box-shadow:0 2px 4px rgba(0,0,0,.05);border:1px solid #eee}.card-header[data-v-d6f00683]{margin-bottom:1rem}.small-skeleton[data-v-d6f00683]{height:14px;width:140px;background:linear-gradient(90deg,#f0f0f0 25%,#e0e0e0,#f0f0f0 75%);background-size:200% 100%;animation:shimmer-d6f00683 1.5s infinite;border-radius:4px;margin-bottom:.5rem}.large-skeleton[data-v-d6f00683]{height:20px;width:180px;background:linear-gradient(90deg,#f0f0f0 25%,#e0e0e0,#f0f0f0 75%);background-size:200% 100%;animation:shimmer-d6f00683 1.5s infinite;border-radius:4px}.card-content[data-v-d6f00683]{display:flex;flex-direction:column;gap:1rem}.info-row[data-v-d6f00683]{display:flex;justify-content:space-between;align-items:center}.label-skeleton[data-v-d6f00683]{height:16px;width:80px;background:linear-gradient(90deg,#f0f0f0 25%,#e0e0e0,#f0f0f0 75%);background-size:200% 100%;animation:shimmer-d6f00683 1.5s infinite;border-radius:4px}.value-skeleton[data-v-d6f00683]{height:16px;width:120px;background:linear-gradient(90deg,#f0f0f0 25%,#e0e0e0,#f0f0f0 75%);background-size:200% 100%;animation:shimmer-d6f00683 1.5s infinite;border-radius:4px}@keyframes shimmer-d6f00683{0%{background-position:200% 0}to{background-position:-200% 0}}@media (max-width: 768px){.cards-grid[data-v-d6f00683]{grid-template-columns:1fr}}.back_profile[data-v-15fbe288]{display:flex;justify-content:space-between;width:140px;align-items:center;font-weight:400;font-size:14px;cursor:pointer;margin:1%}.text-container[data-v-15fbe288]{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.content-container[data-v-15fbe288]{overflow:auto}.hide-overflow[data-v-15fbe288]{overflow:hidden}\n/*$vite$:1*/",document.head.appendChild(a);const Ce=l({name:"UserCardList",components:{IonContent:b,IonPage:g,IonGrid:h,IonRow:v,IonCol:_,IonCard:m,IonCardHeader:f,IonCardSubtitle:p,IonCardTitle:c,IonCardContent:u,IonList:d,IonItem:s,IonLabel:i,bottomNavBar:ke,IonFooter:r,IonSpinner:o,IonText:n,IonIcon:t,editUserModal:ne},props:{users:{type:Array,required:!0},filterValue:{type:String,required:!0},search:{type:String,required:!0}},setup(e,{emit:a}){const l=x(!1),t=y({page:1,itemsPerPage:10}),n=x(!0),o=x(""),r=x(""),i=x([]),s=x(0);w(()=>{d()}),k(()=>e.search,(e,a)=>{t.page=1,d()});const d=async()=>{try{n.value=!0;const a=await oe.getAllUsers(t.page,t.itemsPerPage,e.search);s.value=a.count,i.value=a.results.map(e=>({userId:e.user_id,username:e.username,roles:c(e.roles),programs:m(e.programs),gender:e.person.gender,status:e.deactivated_on,firstName:p(e.person.names),lastName:f(e.person.names)}))}catch(a){o.value="Failed to fetch users. Please try again later.",console.error("Error fetching users:",a)}finally{n.value=!1}},u=V(()=>e.filterValue?i.value.filter(a=>a.username.toLowerCase().includes(e.filterValue.toLowerCase())||a.firstName.toLowerCase().includes(e.filterValue.toLowerCase())||a.lastName.toLowerCase().includes(e.filterValue.toLowerCase())):i.value),c=e=>e.map(e=>e.role),p=e=>e.length>0?e[e.length-1].given_name:"",f=e=>e.length>0?e[e.length-1].family_name:"",m=e=>e.map(e=>e.name);return{filteredUsers:u,pagination:t,handlePaginationUpdate:({page:e,itemsPerPage:a})=>{t.page=e,t.itemsPerPage=a,d()},isLoading:n,error:o,personCircleOutline:C,createOutline:U,appsOutline:I,openUserProfile:e=>{l.value=!0,r.value=e},user_id:r,isPopooverOpen:l,modalClosed:()=>{l.value=!1,a("reload",l.value)},softModalClosed:()=>{l.value=!1},_items_:i,totalCount:s}}}),Pe={class:"container"},Se=re(Ce,[["render",function(e,a,l,t,n,o){const r=P("ion-text"),i=P("ion-col"),s=P("ion-row"),d=P("ion-spinner"),u=P("ion-icon"),c=P("ion-card-subtitle"),p=P("ion-card-title"),f=P("ion-card-header"),m=P("ion-label"),_=P("ion-item"),v=P("ion-list"),h=P("ion-card-content"),g=P("ion-card"),b=P("ion-grid"),x=P("editUserModal"),y=P("bottomNavBar"),w=P("ion-footer");return L(),S("div",Pe,[F(b,{class:"dynamic-grid"},{default:H(()=>[e.error?(L(),E(s,{key:0},{default:H(()=>[F(i,{size:"12",class:"ion-text-center"},{default:H(()=>[F(r,{color:"danger"},{default:H(()=>[N("p",null,z(e.error),1)]),_:1})]),_:1})]),_:1})):e.isLoading?(L(),E(s,{key:1},{default:H(()=>[F(i,{size:"12",class:"ion-text-center"},{default:H(()=>[F(d,{name:"circular"}),a[0]||(a[0]=N("p",null,"Loading users...",-1))]),_:1,__:[0]})]),_:1})):0===e._items_.length?(L(),E(s,{key:2},{default:H(()=>[F(i,{size:"12",class:"ion-text-center"},{default:H(()=>a[1]||(a[1]=[N("p",null,"No users found.",-1)])),_:1,__:[1]})]),_:1})):(L(),E(s,{key:3,class:"user-cards-row"},{default:H(()=>[(L(!0),S(T,null,M(e._items_,l=>(L(),E(i,{"size-xs":"12","size-sm":"6","size-md":"4","size-lg":"3",key:l.userId},{default:H(()=>[F(g,{class:"user-card"},{default:H(()=>[F(f,null,{default:H(()=>[F(c,null,{default:H(()=>[F(u,{icon:e.personCircleOutline,size:"small",style:{"margin-bottom":"-3px"}},null,8,["icon"]),q(" "+z(l.roles.join(", ")),1)]),_:2},1024),F(p,null,{default:H(()=>[q(z(l.firstName)+" "+z(l.lastName)+" ",1),F(u,{onClick:a=>e.openUserProfile(l.userId),icon:e.createOutline,size:"small",class:"edit-icon"},null,8,["onClick","icon"])]),_:2},1024)]),_:2},1024),F(h,null,{default:H(()=>[F(v,null,{default:H(()=>[F(_,null,{default:H(()=>[F(m,null,{default:H(()=>[a[2]||(a[2]=N("h3",null,"User ID",-1)),N("p",null,z(l.userId),1)]),_:2,__:[2]},1024)]),_:2},1024),F(_,null,{default:H(()=>[F(m,null,{default:H(()=>[a[3]||(a[3]=N("h3",null,"Username",-1)),N("p",null,z(l.username),1)]),_:2,__:[3]},1024)]),_:2},1024),F(_,null,{default:H(()=>[F(m,null,{default:H(()=>[a[4]||(a[4]=N("h3",null,"Gender",-1)),N("p",null,z(l.gender),1)]),_:2,__:[4]},1024)]),_:2},1024),F(_,null,{default:H(()=>[F(m,null,{default:H(()=>[N("h3",null,[F(u,{icon:e.appsOutline,size:"small",style:{"margin-bottom":"-3px"}},null,8,["icon"]),a[5]||(a[5]=q(" Programs ",-1))]),N("p",null,z(l.programs.join(", ")),1)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1}))]),_:1}),F(x,{is_open:e.isPopooverOpen,user_id:e.user_id,onClosePopoover:e.softModalClosed,onSave:e.modalClosed},null,8,["is_open","user_id","onClosePopoover","onSave"]),F(w,{class:"sticky-footer"},{default:H(()=>[F(s,null,{default:H(()=>[F(i,{size:"12",style:{"max-width":"100%"}},{default:H(()=>[F(y,{totalItems:e.totalCount,currentPage:e.pagination.page,itemsPerPage:e.pagination.itemsPerPage,"onUpdate:pagination":e.handlePaginationUpdate},null,8,["totalItems","currentPage","itemsPerPage","onUpdate:pagination"])]),_:1})]),_:1})]),_:1})])}],["__scopeId","data-v-c3b99129"]]),Le=l({watch:{},name:"xxxComponent"}),Fe=l({...Le,props:{action:{}},emits:["saveEvent"],setup(e,{emit:a}){const l=x(),t=x(),n=x(),o=x(),r=x([]),s=x([]),d=[],u=[],c=[],p=[],f=[],m=["Password must be at least 8 characters long and include at least one uppercase letter, one number, and one special character (@#$%^&+=*!-), without spaces","Password does not match"],h=x(),g=x([]),b=x("Select location"),y=x(!1),I=x(!1),U=x("Select village(s)"),P=x(!1),M=x("Select district(s)"),B=x(!1),G=x("Select TA(s)"),K=x([]),Q=x([]),Z=x([]),J=x([]),W=x(),X=x(),Y=x(),ee=x(!0),ae=x(!0),le=ie(),te=V(()=>le.facilityLocation),ne=x(!0),re=e;function xe(e){const a=g.value.find(a=>a.code===e.code),l=a?K.value.filter(e=>e.name===a.district):[];Y.value=l,h.value=e}function ye(e){p.length=0,e.forEach(e=>{p.push(e.traditional_authority_id)}),e.forEach(e=>{var a;a=e.district_id,ee.value=!0,W.value=[],async function(e){Z.value=[];var a=await ue.getVillages(e,"");const l=a.map((e,a)=>({...e,assigned_id:a}));Z.value=Z.value.concat(l),Z.value.length>0&&(ee.value=!1)}(a)})}function we(e){f.length=0;const a=[];Q.value.forEach(l=>{e.name.toLowerCase()===l.name.toLowerCase()&&a.push(l)}),a.forEach(e=>{f.push(e.district_id)}),a.forEach(e=>{qe(e.district_id)}),async function(e){g.value=[];try{const a=await ue.getDistrictFacilities(e.name.toLowerCase());g.value.push(...a.facilities)}catch(a){console.error(`Error fetching facilities for district ${e.name}:`,a)}h.value=null}(e)}function ke(e){return le.getUserRoles().some(a=>a.toLowerCase()===e.toLowerCase())}async function Ie(e){0==e.is_valid&&(Ee[0].show_error.value=!0,o.value=e.phone,Ee[0].dataValue.value=e.phone,Ee[0].is_phone_valid.value=!1),1==e.is_valid&&(Ee[0].show_error.value=!1,o.value=e.phone,Ee[0].dataValue.value=e.phone,Ee[0].is_phone_valid.value=!0)}w(async()=>{await async function(){r.value=await oe.getAllRoles();const e=[];r.value.forEach(a=>{e.push({name:a.role,other:a})}),r.value=e,await async function(){try{const e=await oe.getCurrentUser();if(e){const a=e.roles.map(e=>e.role);le.setUserRoles(a),1==ke("Superuser,Superuser,")&&(ne.value=!1),0==ke("Superuser,Superuser,")&&(r.value=function(e){const a=e.findIndex(e=>"string"==typeof e.name&&e.name.toLowerCase()==="Superuser,Superuser,".toLowerCase());return-1!==a&&e.splice(a,1),e}(r.value))}}catch(e){}}()}(),await async function(){s.value=await se.getAllPrograms();const e=[];s.value.forEach(a=>{e.push({name:a.name,other:a,selected:!1})}),s.value=e}(),Q.value=await async function(){const e=[];for(let a of[1,2,3]){const l=await ue.getDistricts(a);e.push(...l)}return e.forEach(e=>{f.push(e.district_id)}),e.forEach(e=>{qe(e.district_id)}),e}(),K.value=await async function(){return(await ue.getFacilityDistricts()).districts}(),K.value.length>0&&await async function(){try{g.value.push(te.value),xe(te.value)}catch(e){console.error(e)}}()}),k(()=>re.action,async e=>{await async function(){const e=Pe(),a=Se(),l=de(He),t=Le(),n=Fe(),o=1==Ve.isEmpty(h.value)?(y.value=!0,!1):0==Ve.isEmpty(h.value)?(y.value=!1,!0):void 0,i=function(){if(0==Te(r.value))return!0;if(1==Te(r.value)){if(0==f.length)return P.value=!0,!1;if(f.length>0)return P.value=!1,!0}}(),s=function(){if(0==Te(r.value))return!0;if(1==Te(r.value)){if(0==p.length)return B.value=!0,!1;if(p.length>0)return B.value=!1,!0}}(),m=function(){if(0==Te(r.value))return!0;if(1==Te(r.value)){if(0==c.length)return I.value=!0,!1;if(c.length>0)return I.value=!1,!0}}(),_=0==Ee[0].is_phone_valid.value?(Ee[0].show_error.value=!0,!1):1==Ee[0].is_phone_valid.value?(Ee[0].show_error.value=!1,!0):void 0;if(1==l&&1==n&&1==t&&1==e&&1==a&&1==o&&1==i&&1==s&&1==m&&1==_){const e=ve(He),a={family_name:e.last_name,given_name:e.firstname,username:e.username,must_append_roles:!1,password:Ne[0].dataValue.value,programs:u,villages:c,roles:d,gender:he(Me[0].dataValue.value),location_id:h.value.code,phone:Ee[0].dataValue.value};try{const{user:e}=await oe.createUser(a);e&&(await async function(e){const a=ve(He),l={cell_phone_number:a.phone_number,gender:he(Me[0].dataValue.value)},t=new be(l);return await t.update(e)}(e.person.person_id),Ce(e.user_id))}catch(v){Ce(""),ge(v,2e3)}}}()}),k(()=>ee.value,async e=>{0==ee.value&&Te(r.value)});const Ue=a;function Ce(e){Ue("saveEvent",e)}function Pe(){const e=[];return d.length=0,r.value.forEach(a=>{1==a.selected&&e.push(a)}),e.forEach(e=>{d.push(e.other.role)}),d.length>0?(ze[0].show_error.value=!1,!0):0==d.length?(ze[0].show_error.value=!0,!1):void 0}function Se(){const e=[];return u.length=0,s.value.forEach(a=>{1==a.selected&&e.push(a)}),e.forEach(e=>{u.push(e.other.program_id)}),u.length>0?(ze[1].show_error.value=!1,!0):0==u.length?(ze[1].show_error.value=!0,!1):void 0}function Le(){let e=!1;return null==Me[0].dataValue.value&&(Me[0].show_error.value=!0),null!=Me[0].dataValue.value&&(Me[0].show_error.value=!1,e=!0),e}function Fe(){const[e,a]=Ne.map(e=>e.dataValue.value),l=m[0],t=m[1];return Ne.forEach(e=>{e.error_message=l,e.show_error.value=!1}),!Ne.map((e,a)=>{const l=!e.dataValue.value;return e.show_error.value=l,l}).some(e=>e)&&!(Ne.map((e,a)=>{const l=_e(e.dataValue.value);return e.show_error.value=!l,l}).some(e=>!e)||e!==a&&(Ne.forEach(e=>{e.error_message=t,e.show_error.value=!0}),1))}const He=[{placeHolder:"username",property_name:"username",dataHandler:async function(e){const a=e.target.value;He[0].dataValue.value=a,await async function(e){try{if(e.length>0){const a=await oe.doesUsernameExist(e);1==a.exists?(He[0].show_error.value=!0,He[0].error_message="Username already exists"):0==a.exists&&(He[0].show_error.value=!1,He[0].error_message="Input required, Only letters allowed")}}catch(a){console.error(a)}}(a)},dataValue:x(),show_error:x(!1),error_message:"Input required, Only letters allowed"},{placeHolder:"firstname",property_name:"firstname",dataHandler:function(e){const a=e.target.value;He[1].dataValue.value=a,de([He[1]])},dataValue:x(),show_error:x(!1),type:"text",error_message:"Input required, Only letters allowed"},{placeHolder:"last name",property_name:"last_name",dataHandler:function(e){const a=e.target.value;He[2].dataValue.value=a,de([He[2]])},dataValue:x(),type:"text",show_error:x(!1),error_message:"Input required, Only letters allowed"}],Ee=[{placeHolder:"phone number",property_name:"phone_number",dataValue:x(),show_error:x(!1),error_message:"Input required, input is invalid",is_phone_valid:x(!1)}],Ne=[{placeHolder:"new password",dataHandler:function(e){const a=e.target.value;Ne[0].dataValue.value=a,Fe()},dataValue:x(),show_error:x(!1),error_message:m[0]},{placeHolder:"repeat password",dataHandler:function(e){const a=e.target.value;Ne[1].dataValue.value=a,Fe()},dataValue:x(),show_error:x(!1),error_message:m[0]}],ze=[{multi_Selection:!0,show_list_label:!0,unqueId:"qwerty_8_3698",name_of_list:"Roles",placeHolder:"Search for a field",items:[],listUpdatedFN:function(e){r.value=e,Te(r.value),Pe()},listFilteredFN:()=>{},searchTextFN:()=>{},use_internal_filter:!0,show_error:x(!1),error_message:"please select a Role",disabled:x(!1)},{multi_Selection:!0,show_list_label:!0,unqueId:"qwerty_8_562",name_of_list:"Programs",placeHolder:"Search for programs",items:[],listUpdatedFN:function(e){s.value=e,s.value.forEach(e=>{e.selected}),Se()},listFilteredFN:()=>{},searchTextFN:()=>{},use_internal_filter:!0,show_error:x(!1),error_message:"please select a Program",disabled:x(!1)}];function Te(e){const a=["HSA","Health Surveillance"];I.value=!1;let l=!1;return e.forEach(e=>{1==(null==e?void 0:e.selected)&&a.includes(null==e?void 0:e.name)&&(ae.value=!1,l=!0)}),0==l&&(I.value=!1,ae.value=!0),l}const Me=[{labels:["Male","Female"],selectedOption:x(null),dataHandler:function(e){try{Me[0].dataValue.value=e.label}catch(a){Me[0].dataValue.value=void 0}Le()},dataValue:x(),show_error:x(!1),error_message:"Please make a selection"}];async function qe(e,a){J.value=[];const l=(await ue.getTraditionalAuthorities(e,"")).map((e,a)=>({...e,assigned_id:a}));J.value=J.value.concat(l)}return(e,a)=>(L(),S(T,null,[F(D(v),null,{default:H(()=>[F(D(_),{size:"12","size-md":"6"},{default:H(()=>[F(D(v),null,{default:H(()=>[F(D(_),null,{default:H(()=>[F(D(i),{style:{margin:"10px","margin-left":"0px","margin-top":"0px","margin-bottom":"10px",color:"grey"}},{default:H(()=>a[12]||(a[12]=[q("First name",-1),N("span",{style:{color:"#b42318"}},"*",-1)])),_:1,__:[12]}),F(ce,{placeholder:He[1].placeHolder,icon:D(A),inputValue:t.value,"onUpdate:inputValue":He[1].dataHandler},null,8,["placeholder","icon","inputValue","onUpdate:inputValue"]),N("div",null,[He[1].show_error.value?(L(),E(D(i),{key:0,class:"error-label"},{default:H(()=>[q(z(He[1].error_message),1)]),_:1})):O("",!0)])]),_:1})]),_:1}),F(D(v),null,{default:H(()=>[F(D(_),null,{default:H(()=>[F(D(i),{style:{margin:"10px","margin-left":"0px","margin-top":"0px","margin-bottom":"10px",color:"grey"}},{default:H(()=>a[13]||(a[13]=[q("Last name",-1),N("span",{style:{color:"#b42318"}},"*",-1)])),_:1,__:[13]}),F(ce,{placeholder:He[2].placeHolder,icon:D(j),inputValue:n.value,"onUpdate:inputValue":He[2].dataHandler},null,8,["placeholder","icon","inputValue","onUpdate:inputValue"]),N("div",null,[He[2].show_error.value?(L(),E(D(i),{key:0,class:"error-label"},{default:H(()=>[q(z(He[2].error_message),1)]),_:1})):O("",!0)])]),_:1})]),_:1}),F(D(v),null,{default:H(()=>[F(D(_),null,{default:H(()=>[F(D(i),{style:{margin:"10px","margin-left":"0px","margin-top":"0px","margin-bottom":"10px",color:"grey"}},{default:H(()=>a[14]||(a[14]=[q("Username",-1),N("span",{style:{color:"#b42318"}},"*",-1)])),_:1,__:[14]}),F(ce,{placeholder:He[0].placeHolder,icon:D(C),inputValue:l.value,"onUpdate:inputValue":He[0].dataHandler},null,8,["placeholder","icon","inputValue","onUpdate:inputValue"]),N("div",null,[He[0].show_error.value?(L(),E(D(i),{key:0,class:"error-label"},{default:H(()=>[q(z(He[0].error_message),1)]),_:1})):O("",!0)])]),_:1})]),_:1}),F(D(v),null,{default:H(()=>[F(D(_),null,{default:H(()=>[F(D(i),{style:{margin:"10px","margin-left":"0px","margin-top":"0px","margin-bottom":"10px",color:"grey"}},{default:H(()=>a[15]||(a[15]=[q("Gender",-1),N("span",{style:{color:"#b42318"}},"*",-1)])),_:1,__:[15]}),F(pe,{labels:Me[0].labels,"selected-opt":Me[0].selectedOption.value,onSelectionEvent:Me[0].dataHandler},null,8,["labels","selected-opt","onSelectionEvent"]),N("div",null,[Me[0].show_error.value?(L(),E(D(i),{key:0,class:"error-label"},{default:H(()=>[q(z(Me[0].error_message),1)]),_:1})):O("",!0)])]),_:1})]),_:1}),F(D(v),null,{default:H(()=>[F(D(_),null,{default:H(()=>[F(fe,{onValidateInput:Ie}),N("div",null,[Ee[0].show_error.value?(L(),E(D(i),{key:0,class:"error-label"},{default:H(()=>[q(z(Ee[0].error_message),1)]),_:1})):O("",!0)])]),_:1})]),_:1})]),_:1}),F(D(_),{size:"12","size-md":"6"},{default:H(()=>[F(D(v),null,{default:H(()=>[(L(),E(D(_),{key:0},{default:H(()=>[F(D(i),{style:{margin:"10px","margin-left":"0px","margin-top":"0px","margin-bottom":"10px",color:"grey"}},{default:H(()=>a[16]||(a[16]=[q("District(s)",-1),N("span",{style:{color:"#b42318"}},"*",-1)])),_:1,__:[16]}),F(D(R),{modelValue:Y.value,"onUpdate:modelValue":[a[0]||(a[0]=e=>Y.value=e),a[1]||(a[1]=e=>we(e))],multiple:!1,taggable:!1,"hide-selected":!0,"close-on-select":!0,openDirection:"bottom","tag-placeholder":"Find and select District(s)",placeholder:"Find and select District(s)",selectLabel:"",label:"name",searchable:!0,onSearchChange:a[2]||(a[2]=()=>{}),"track-by":"name",options:K.value,disabled:ne.value},null,8,["modelValue","options","disabled"]),N("div",null,[P.value?(L(),E(D(i),{key:0,class:"error-label"},{default:H(()=>[q(z(M.value),1)]),_:1})):O("",!0)])]),_:1}))]),_:1}),F(D(v),null,{default:H(()=>[F(D(_),null,{default:H(()=>[F(D(i),{style:{margin:"10px","margin-left":"0px","margin-top":"0px","margin-bottom":"10px",color:"grey"}},{default:H(()=>a[17]||(a[17]=[q("Facility name",-1),N("span",{style:{color:"#b42318"}},"*",-1)])),_:1,__:[17]}),F(D(R),{modelValue:h.value,"onUpdate:modelValue":[a[3]||(a[3]=e=>h.value=e),a[4]||(a[4]=e=>xe(e))],multiple:!1,taggable:!1,"hide-selected":!0,"close-on-select":!0,openDirection:"bottom","tag-placeholder":"Find and select facility name",placeholder:"Find and select facility name",selectLabel:"",label:"name",searchable:!0,disabled:ne.value,onSearchChange:a[5]||(a[5]=e=>async function(e){Ve.isEmpty(e),Ve.isEmpty(e)}(e)),"track-by":"code",options:g.value},null,8,["modelValue","disabled","options"]),N("div",null,[y.value?(L(),E(D(i),{key:0,class:"error-label"},{default:H(()=>[q(z(b.value),1)]),_:1})):O("",!0)])]),_:1})]),_:1}),F(D(v),null,{default:H(()=>[F(D(_),null,{default:H(()=>[F(D(i),{style:{margin:"10px","margin-left":"0px","margin-top":"0px","margin-bottom":"10px",color:"grey"}},{default:H(()=>a[18]||(a[18]=[q("TA(s)",-1),N("span",{style:{color:"#b42318"}},"*",-1)])),_:1,__:[18]}),F(D(R),{modelValue:X.value,"onUpdate:modelValue":[a[6]||(a[6]=e=>X.value=e),a[7]||(a[7]=e=>ye(e))],multiple:!0,taggable:!1,"hide-selected":!0,"close-on-select":!0,openDirection:"bottom","tag-placeholder":"Find and select Traditional Authority (TA)",placeholder:"Find and select Traditional Authority (TA)",selectLabel:"",label:"name",searchable:!0,onSearchChange:a[8]||(a[8]=()=>{}),"track-by":"assigned_id",options:J.value,disabled:ae.value},null,8,["modelValue","options","disabled"]),N("div",null,[B.value?(L(),E(D(i),{key:0,class:"error-label"},{default:H(()=>[q(z(G.value),1)]),_:1})):O("",!0)])]),_:1})]),_:1}),F(D(v),null,{default:H(()=>[F(D(_),null,{default:H(()=>[F(D(i),{style:{margin:"10px","margin-left":"0px","margin-top":"0px","margin-bottom":"10px",color:"grey"}},{default:H(()=>a[19]||(a[19]=[q("Village(s)",-1),N("span",{style:{color:"#b42318"}},"*",-1)])),_:1,__:[19]}),F(D(R),{modelValue:W.value,"onUpdate:modelValue":[a[9]||(a[9]=e=>W.value=e),a[10]||(a[10]=e=>{return a=e,c.length=0,void a.forEach(e=>{c.push(e.village_id)});var a})],multiple:!0,taggable:!1,"hide-selected":!0,"close-on-select":!0,openDirection:"bottom","tag-placeholder":"Find and select village(s)",placeholder:"Find and select village(s)",selectLabel:"",label:"name",searchable:!0,onSearchChange:a[11]||(a[11]=()=>{}),"track-by":"assigned_id",options:Z.value,disabled:ae.value},null,8,["modelValue","options","disabled"]),N("div",null,[I.value?(L(),E(D(i),{key:0,class:"error-label"},{default:H(()=>[q(z(U.value),1)]),_:1})):O("",!0)])]),_:1})]),_:1})]),_:1})]),_:1}),F(D(v),null,{default:H(()=>[F(D(_),{size:"12","size-md":"6"},{default:H(()=>[F(D(v),null,{default:H(()=>[F(D(_),null,{default:H(()=>[F(D(_),null,{default:H(()=>[F(D(i),{style:{margin:"10px","margin-left":"0px","margin-top":"0px",color:"grey"}},{default:H(()=>a[20]||(a[20]=[q("Role(s)",-1),N("span",{style:{color:"#b42318"}},"*",-1)])),_:1,__:[20]}),F(me,{multiSelection:ze[0].multi_Selection,show_label:ze[0].show_list_label,uniqueId:ze[0].unqueId,name_of_list:ze[0].name_of_list,choose_place_holder:ze[0].placeHolder,"items_-list":r.value,use_internal_filter:ze[0].use_internal_filter,disabled:ze[0].disabled.value,onItemListUpDated:ze[0].listUpdatedFN,onItemListFiltered:ze[0].listFilteredFN,onItemSearchText:ze[0].searchTextFN},null,8,["multiSelection","show_label","uniqueId","name_of_list","choose_place_holder","items_-list","use_internal_filter","disabled","onItemListUpDated","onItemListFiltered","onItemSearchText"]),N("div",null,[ze[0].show_error.value?(L(),E(D(i),{key:0,class:"error-label",style:{"margin-top":"-10px"}},{default:H(()=>[q(z(ze[0].error_message),1)]),_:1})):O("",!0)])]),_:1})]),_:1})]),_:1}),F(D(v),null,{default:H(()=>[F(D(_),null,{default:H(()=>[F(D(i),{style:{margin:"10px","margin-left":"0px","margin-top":"0px",color:"grey"}},{default:H(()=>a[21]||(a[21]=[q("Program(s)",-1),N("span",{style:{color:"#b42318"}},"*",-1)])),_:1,__:[21]}),F(me,{multiSelection:ze[1].multi_Selection,show_label:ze[1].show_list_label,uniqueId:ze[1].unqueId,name_of_list:ze[1].name_of_list,choose_place_holder:ze[1].placeHolder,"items_-list":s.value,use_internal_filter:ze[1].use_internal_filter,disabled:ze[1].disabled.value,onItemListUpDated:ze[1].listUpdatedFN,onItemListFiltered:ze[1].listFilteredFN,onItemSearchText:ze[1].searchTextFN},null,8,["multiSelection","show_label","uniqueId","name_of_list","choose_place_holder","items_-list","use_internal_filter","disabled","onItemListUpDated","onItemListFiltered","onItemSearchText"]),N("div",null,[ze[1].show_error.value?(L(),E(D(i),{key:0,class:"error-label"},{default:H(()=>[q(z(ze[1].error_message),1)]),_:1})):O("",!0)])]),_:1}),F(D(_))]),_:1}),F(D(v),null,{default:H(()=>[F(D(_),null,{default:H(()=>[F(D(i),{style:{margin:"10px","margin-left":"0px","margin-top":"0px","margin-bottom":"10px",color:"grey"}},{default:H(()=>a[22]||(a[22]=[q("Password",-1),N("span",{style:{color:"#b42318"}},"*",-1)])),_:1,__:[22]}),F(ce,{placeholder:Ne[0].placeHolder,icon:D($),inputValue:Ne[0].dataValue.value,"onUpdate:inputValue":Ne[0].dataHandler},null,8,["placeholder","icon","inputValue","onUpdate:inputValue"]),N("div",null,[Ne[0].show_error.value?(L(),E(D(i),{key:0,class:"error-label"},{default:H(()=>[q(z(Ne[0].error_message),1)]),_:1})):O("",!0)])]),_:1})]),_:1}),F(D(v),null,{default:H(()=>[F(D(_),null,{default:H(()=>[F(D(i),{style:{margin:"10px","margin-left":"0px","margin-top":"0px","margin-bottom":"10px",color:"grey"}},{default:H(()=>a[23]||(a[23]=[q("Repeat password",-1),N("span",{style:{color:"#b42318"}},"*",-1)])),_:1,__:[23]}),F(ce,{placeholder:Ne[1].placeHolder,icon:D($),inputValue:Ne[1].dataValue.value,"onUpdate:inputValue":Ne[1].dataHandler},null,8,["placeholder","icon","inputValue","onUpdate:inputValue"]),N("div",null,[Ne[1].show_error.value?(L(),E(D(i),{key:0,class:"error-label"},{default:H(()=>[q(z(Ne[1].error_message),1)]),_:1})):O("",!0)])]),_:1})]),_:1})]),_:1}),F(D(_),{size:"12","size-md":"6"})]),_:1})],64))}}),He=re(Fe,[["__scopeId","data-v-731a8d5a"]]),Ee={style:{display:"flex","align-items":"center"}},Ne={style:{"font-weight":"400","font-size":"19px"}},ze={style:{display:"flex","align-items":"center"}},Te={class:""},Me={class:"center text_12"},qe={style:{"font-weight":"400","font-size":"20px"}},De={style:{display:"flex","align-items":"center"}},Ae=l({watch:{},name:"xxxComponent"}),Oe=l({...Ae,props:{is_open:{},user_id:{}},emits:["closePopoover","updated","reload"],setup(e,{emit:a}){const l=x(""),t=x(!1),n=x(),o=a;function i(){l.value=function(e,a){const l=e=>{const a="number"===e?48:"uppercase"===e?65:97;return String.fromCharCode(Math.floor(Math.random()*("number"===e?10:26))+a)};return Array.from({length:e},()=>Array.from({length:a},()=>l(["number","uppercase","lowercase"][Math.floor(3*Math.random())])).join(""))}(100,3)}function s(){o("reload","")}function d(e){n.value=e,e&&xe("User created successfully with id: "+n),o("updated",e),ee.dismiss()}return(e,a)=>{const o=P("ion-icon"),u=P("ion-row");return L(),S(T,null,[F(D(B),{"is-open":e.is_open,"show-backdrop":!0,onDidDismiss:a[1]||(a[1]=a=>e.$emit("closePopoover",!1)),"keyboard-close":!1},{default:H(()=>[F(D(G),null,{default:H(()=>[F(D(K),null,{default:H(()=>[F(D(Q),null,{default:H(()=>[N("div",Ee,[F(o,{icon:D(Z),class:"sub-menu-icon"},null,8,["icon"]),a[3]||(a[3]=N("b",{style:{"margin-left":"6px"}},"Add User",-1))])]),_:1}),F(D(J),{slot:"end"},{default:H(()=>[F(D(Q),null,{default:H(()=>[F(D(W),{onClick:a[0]||(a[0]=a=>e.$emit("closePopoover",!1)),fill:"solid"},{default:H(()=>[N("span",Ne,[N("div",ze,[F(o,{icon:D(X),slot:"start",class:"sub-menu-icon"},null,8,["icon"]),a[4]||(a[4]=N("span",{style:{"margin-left":"6px"}},"Close",-1))])])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),F(D(b),{class:"ion-padding"},{default:H(()=>[N("div",Te,[N("div",Me,[F(u,null,{default:H(()=>[F(D(_),null,{default:H(()=>[F(He,{user_id:n.value,action:l.value,onSaveEvent:d},null,8,["user_id","action"])]),_:1})]),_:1})])])]),_:1}),F(D(r),{translucent:!0},{default:H(()=>[F(D(K),null,{default:H(()=>[F(D(J),{slot:"end"},{default:H(()=>[F(D(Q),null,{default:H(()=>[F(D(W),{onClick:i,fill:"solid",color:"success"},{default:H(()=>[N("span",qe,[N("div",De,[F(o,{icon:D(Y),slot:"start",class:"sub-menu-icon"},null,8,["icon"]),a[5]||(a[5]=N("span",{style:{"margin-left":"6px"}},"Save",-1))])])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["is-open"]),F(ne,{is_open:t.value,user_id:n.value,onClosePopoover:a[2]||(a[2]=e=>t.value=!1),onUpdated:s},null,8,["is_open","user_id"])],64)}}}),je=re(Oe,[["__scopeId","data-v-79045015"]]),Re=re(l({__name:"usersTemplate",props:{items:{},search_fields:{}},emits:["reload","closeModal"],setup(e,{emit:a}){const l=x(""),t=x(!1),n=x(""),o={name:"add user",show:!0,fn:function(){t.value=!0,n.value=""},icon:Z,show_icon:!0},r=[{placeHolder:"Search for username",dataHandler:function(e){l.value=e.target.value},dataValue:x(),show_error:x(!1),error_message:"Please provide a reason"}];function i(e){d("reload",e)}function s(e){d("closeModal",e)}const d=a;return(e,a)=>(L(),S(T,null,[F(D(v),{class:"search-container"},{default:H(()=>[F(D(v),{class:"search-row"},{default:H(()=>[F(D(_),{class:"input-col"},{default:H(()=>[F(ce,{placeholder:r[0].placeHolder,icon:D(ae),inputValue:r[0].dataValue.value,"onUpdate:inputValue":r[0].dataHandler,minHeight:50,"-inner-action-btn-propeties":o,"onUpdate:InnerActionBtnPropetiesAction":o.fn},null,8,["placeholder","icon","inputValue","onUpdate:inputValue","onUpdate:InnerActionBtnPropetiesAction"])]),_:1})]),_:1})]),_:1}),F(D(v),null,{default:H(()=>[F(Se,{users:e.items,filterValue:l.value,onReload:s,search:l.value},null,8,["users","filterValue","search"])]),_:1}),F(je,{is_open:t.value,user_id:n.value,onClosePopoover:a[0]||(a[0]=e=>t.value=!1),onUpdated:i},null,8,["is_open","user_id"])],64))}}),[["__scopeId","data-v-91ec2592"]]),$e=l({name:"TableSkeletonLoader"}),Be={class:"skeleton-wrapper"},Ge={class:"cards-grid"},Ke={class:"card-content"},Qe=l({name:"Users",components:{IonContent:b,IonPage:g,IonRow:v,IonCol:_,IonIcon:t,Toolbar:ye,usersTemplate:Re,NavigationMenu:Ie,TableSkeletonLoader:re($e,[["render",function(e,a,l,t,n,o){return L(),S("div",Be,[a[2]||(a[2]=le('<div class="search-bar" data-v-d6f00683><div class="search-container" data-v-d6f00683><div class="search-label skeleton-text" data-v-d6f00683></div><div class="search-chip" data-v-d6f00683></div><div class="add-button" data-v-d6f00683></div></div></div>',1)),N("div",Ge,[(L(),S(T,null,M(6,e=>N("div",{key:`card-${e}`,class:"skeleton-card"},[a[1]||(a[1]=N("div",{class:"card-header"},[N("div",{class:"role-text small-skeleton"}),N("div",{class:"name-text large-skeleton"})],-1)),N("div",Ke,[(L(),S(T,null,M(4,e=>N("div",{class:"info-row",key:`field-${e}`},a[0]||(a[0]=[N("div",{class:"label-skeleton"},null,-1),N("div",{class:"value-skeleton"},null,-1)]))),64))])])),64))])])}],["__scopeId","data-v-d6f00683"]])},setup(){const e=x(!1),a=x(!0),l=x([{value:"username",name:"username",selected:!0}]),t=x(""),n=x([]);async function o(){a.value=!1}function r(){Ue().setNavigationPayload("Manage Users",!0,!1,"/","home","")}return w(async()=>{r(),await o()}),{isPopooverOpen:e,user_id:t,_items_:n,search_fields_:l,nav:function(e){we.push(e)},chevronBackOutline:te,initNavData:r,getUsers:o,isLoading:a,closeModal:function(e){0==e&&setTimeout(()=>{o()},500)}}},watch:{$route:{async handler(e){"users"==e.name&&this.initNavData(),await this.getUsers()},deep:!0}}});e("default",re(Qe,[["render",function(e,a,l,t,n,o){const r=P("NavigationMenu"),i=P("TableSkeletonLoader"),s=P("usersTemplate"),d=P("ion-content"),u=P("ion-page");return L(),E(u,null,{default:H(()=>[F(r),F(d,{fullscreen:!0},{default:H(()=>[e.isLoading?(L(),E(i,{key:0})):(L(),E(s,{key:1,items:e._items_,search_fields:e.search_fields_,onReload:e.getUsers,onCloseModal:e.closeModal},null,8,["items","search_fields","onReload","onCloseModal"]))]),_:1})]),_:1})}],["__scopeId","data-v-15fbe288"]]))}}});
