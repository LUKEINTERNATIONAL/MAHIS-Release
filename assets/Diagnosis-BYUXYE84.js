import{t as e,_ as b,O as g}from"./ReportMixin.vue_vue_type_script_lang-DgWSK1EX.js";import{R as F}from"./BaseTableReport-DY5H5WMO.js";import{l as a}from"./lodash-Dt8AsbQm.js";import{d as f,E as m,y,f as x,af as w,z as D,l as T}from"./vendor--FxeD1z3.js";import{_ as v,P as c}from"./index-BwanHY4k.js";import{D as _}from"./DateInputField-AadWpl-c.js";import"./Export-BWm4Vl7x.js";const $=f({components:{DateInputField:_},data(){return{}}});function C(s,o,t,n,r,i){const l=m("DateInputField");return x(),y(l,{inputHeader:"",sectionHeaderFontWeight:20,unit:"hhj",input:"",icon:"",placeholder:"ika data",iconRight:"",inputWidth:"",inputValue:"",eventType:""})}const M=v($,[["render",C]]),S=f({components:{ReportTemplate:F,IonPage:w,GetDataDuration:M},mixins:[b],data:()=>({title:"OPD Diagnosis",rows:[],reportService:{},customInfo:{label:"Total OPD Visits",value:0},columns:[[e.thTxt("Age Groups",{sortable:!1,exportable:!1}),e.thTxt("<6 months",{colspan:2,sortable:!1,exportable:!1}),e.thTxt("6 months < 5 yrs",{colspan:2,sortable:!1,exportable:!1}),e.thTxt("5 yrs < 14 yrs",{colspan:2,sortable:!1,exportable:!1}),e.thTxt("> 14 yrs",{colspan:2,sortable:!1,exportable:!1}),e.thTxt("",{sortable:!1,exportable:!1})],[e.thTxt("Diagnosis"),e.thTxt("F",{value:"Females <6 months"}),e.thTxt("M",{value:"Males <6 months"}),e.thTxt("F",{value:"Females 6 months < 5 yrs"}),e.thTxt("M",{value:"Males 6 months < 5 yrs"}),e.thTxt("F",{value:"Females 5 yrs < 14 yrs"}),e.thTxt("M",{value:"Males 5 yrs < 14 yrs"}),e.thTxt("F",{value:"Females > 14 yrs"}),e.thTxt("M",{value:"Males > 14 yrs"}),e.thTxt("Total")]]}),created(){this.fields=this.getDateDurationFields()},methods:{async init(s,o){this.reportService=new g,this.reportService.setStartDate(o.start_date),this.reportService.setEndDate(o.end_date),this.period=this.reportService.getDateIntervalPeriod(),this.rows=this.buildRows(await this.reportService.getDiagnosis());const t=await this.reportService.getAttendance();this.customInfo.value=t.length},totalDiagnosis(s){return Object.values(s).reduce((o,t)=>o+t,0)},getDrillDownColumns(){return[[e.thTxt("Patient ID"),e.thTxt("First Name"),e.thTxt("Last Name"),e.thTxt("Gender"),e.thTxt("Phone Number"),e.thTxt("Address")]]},buildColumn(s,o="Drilldown Data"){return a.isEmpty(s)?e.td(0):e.tdLink(s.length,async()=>this.drilldownData(o,this.getDrillDownColumns(),s,async t=>await Promise.all(t.map(async n=>{await c.findByID(n);const r=new c;return[e.td(n),e.td(r.getGivenName()),e.td(r.getFamilyName()),e.td(r.getGender()),e.td(r.getPhoneNumber()),e.td("".concat(r.getCurrentDistrict(),", ").concat(r.getCurrentVillage(),", ").concat(r.getClosestLandmark()))]}))))},buildRows(s){if(a.isEmpty(s))return[];const o=[];return Object.keys(s).forEach(t=>{const n=a.get(s[t],"F.0-5 months",[]),r=a.get(s[t],"M.0-5 months",[]),i=a.get(s[t],"F.6 mth < 5 yrs",[]),l=a.get(s[t],"M.6 mth < 5 yrs",[]),u=a.get(s[t],"F.5-14 yrs",[]),h=a.get(s[t],"M.5-14 yrs",[]),d=a.get(s[t],"F.>= 14 years",[]),p=a.get(s[t],"M.>= 14 years",[]);o.push([e.td(t,{style:{textAlign:"left"}}),this.buildColumn(n,"under 6 months females diagnosed with ".concat(t)),this.buildColumn(r,"under 6 months males diagnosed with ".concat(t)),this.buildColumn(i,"under 5 years females diagnosed with ".concat(t)),this.buildColumn(l,"under 5 years males diagnosed with ".concat(t)),this.buildColumn(u,"under 14 years females diagnosed with ".concat(t)),this.buildColumn(h,"under 14 years males diagnosed with ".concat(t)),this.buildColumn(d,"over 14 years females diagnosed with ".concat(t)),this.buildColumn(p,"over 14 years males diagnosed with ".concat(t)),this.buildColumn([...i,...l,...n,...r,...u,...h,...d,...p],"Total diagnosed with ".concat(t))])}),o.sort((t,n)=>t[0].td<n[0].td?-1:t[0].td>n[0].td?1:0)}}});function I(s,o,t,n,r,i){const l=m("report-template"),u=m("ion-page");return x(),y(u,null,{default:D(()=>[T(l,{title:s.title,rows:s.rows,fields:s.fields,columns:s.columns,period:s.period,reportPrefix:"Clinic",customInfo:s.customInfo,onReportConfiguration:s.init},null,8,["title","rows","fields","columns","period","customInfo","onReportConfiguration"])]),_:1})}const A=v(S,[["render",I]]);export{A as default};
