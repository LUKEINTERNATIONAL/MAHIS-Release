import{d as Z,ao as je,U as rt,T as ut,ap as ct,ak as Pe,G,S as dt,ah as pt,a9 as mt,aa as vt,E as Y,e as b,f as l,k as c,l as t,b2 as xe,r as n,c as j,a as Ne,m as w,y as O,z as s,u as a,A as x,F as oe,B as $,w as ge,M as Oe,J as re,D as W,W as ae,bx as ne,ai as Kt,X as Jt,I as Ae,ay as Qt,L as ue,i as Xt,cu as Zt,v as ea,aw as ta,bo as Ge,ab as aa,bq as na,ag as sa,be as oa,bY as la,bL as ia,aj as ot}from"./vendor-DL4WTsfb.js";import{bb as Re,H as Te,ag as K,bd as ft,bc as _t,aW as gt,u as $e,_ as ce,j as ke,ax as Be,ay as Me,F as we,G as De,S as he,E as Se,t as le,K as Ee,bA as ra,bB as ua,aZ as ca,b9 as fe,a_ as _e,bC as da,aa as pa,P as ma,aN as lt,aJ as va,aU as fa,q as _a,a8 as Ce,aK as ga,aF as ha,ar as ya}from"./index-DjbhwxKm.js";import{l as ve}from"./lodash-Dt8AsbQm.js";import{P as ba}from"./patient_complaints_service-BRgDEJoo.js";import{D as ht}from"./DashBox-ClFuiTxM.js";import{u as Da}from"./useExposeFromStandardForm-BsKKp0ZQ.js";import{B as Ye}from"./BasicForm-CMlpXm6J.js";import{f as Ke,c as yt,a as bt}from"./formatServerData-D-3s9rQK.js";import{A as wa,P as Sa,D as Ia,m as Ca}from"./NextAppointment-Cu9a5-Kn.js";import{D as ka,b as Pa}from"./drug_prescription_service-Cr-sgyyk.js";import{D as it}from"./drug_service-DZlHL1vm.js";import{D as xa,A as Na,R as Ea,a as Fa}from"./Outcome-D1_Ri2pW.js";const Aa=Z({name:"Menu",components:{IonContent:pt,IonHeader:dt,IonItem:G,IonList:Pe,IonMenu:ct,IonTitle:ut,IonToolbar:rt,List:Re},computed:{...je($e,["patient"]),...je(gt,["presentingComplaints"])},data(){return{valueNumericArray:[],obsDatetime:[],graphIcon:_t(["#006401"]),listIcon:ft(["#636363"]),displayGraph:!0,orders:[],height:[],BMI:[],iconBg:{},activeWeight:[],activeHeight:[],activeBMI:[],list:[],series:[{name:"",data:[]}]}},setup(){return{checkmark:vt,pulseOutline:mt}},watch:{$router:{async handler(){await this.updateList()},immediate:!0,deep:!0},patient:{async handler(){await this.updateList()},deep:!0}},async mounted(){await this.updateList()},methods:{async updateList(){const B=await K.getAll(this.patient.patientID,"Presenting complaint"),S=ve.isEmpty(B)?[]:Promise.all(B.map(async m=>m.value_coded?{name:await K.getConceptName(m.value_coded),obs_date:m.obs_datetime,duration:m.children[0].value_text}:[]));this.setListData(await S)},setListData(B){this.list=[],this.list.push({actionBtn:!1,class:"col_background",header:!0,minHeight:"--min-height: 20px;",containSize:4,display:["Date","Presenting Complains","Duration"]}),B.forEach(S=>{this.list.push({actionBtn:!1,minHeight:"--min-height:20px;",class:"col_background",containSize:4,display:[Te.toStandardHisFormat(S.obs_date),S.name,S.duration]})})}}}),Oa={class:"modal_wrapper"};function Ba(B,S,m,p,v,h){const f=Y("list");return l(),b("div",Oa,[c("div",null,[t(f,{listData:B.list},null,8,["listData"])])])}const Ta=ce(Aa,[["render",Ba],["__scopeId","data-v-30434e22"]]),$a={key:0},La={style:{"align-content":"center"}},Ma={class:"ion-padding",slot:"content"},Ra=Z({__name:"PresentingComplaints",setup(B,{expose:S}){const m=gt(),{presentingComplaints:p}=xe(m),v=n(ke),h=n(!0),f=n(!1),V=n(!0),U=n(!1),I=n([]),C=n([]),_=n(),L=j(()=>[{componentType:"multiSelectInputField",header:"Presenting Complaints",name:"PresentingComplaints",trackBy:"concept_id",icon:ke.search,hideSelected:!0,validation:e=>M(e==null?void 0:e.name,I.value)?"Presenting complaint already added":Be.required(e),options:C.value,grid:{s:"6"}},{componentType:"inputField",header:"Duration",name:"duration",icon:ke.time,validation:e=>Be.isNotEmptyandNumber(e),grid:{s:"6"},unitOptions:[{label:"Hours",value:"Hours"},{label:"Days",value:"Days"},{label:"Months",value:"Months"},{label:"Years",value:"Years"}],unitValidation:e=>!e||e===""?"Please select a unit.":null},{componentType:"inputField",header:"Specify the presenting complaint(s)",name:"Other (specify)",icon:ke.editPen,validation:e=>M(e,I.value)?"Presenting complaint already added":Be.required(e),condition:e=>{var u;return((u=e==null?void 0:e.PresentingComplaints)==null?void 0:u.name)==="Other"}},{componentType:"Alert",condition:e=>{var u;return Be.required((u=e==null?void 0:e.PresentingComplaints)==null?void 0:u.name)!=null},backgroundColor:"lightyellow",textColor:"black",value:"Please search thoroughly for the complaint. If it is not listed, search and select the 'Other' option to specify the complaint.",name:"noMatchAlert"}]),{formRef:D}=Da(),k=async()=>{C.value=await ba.getComplaintsList("Presenting complaint"),De(p.value,"PresentingComplaints","multiSelectData",C.value)},P=()=>{h.value=!1,V.value=!1,f.value=!0},y=async()=>{var A,r;const e=(A=D.value)==null?void 0:A.getFormValues();((r=D.value)==null?void 0:r.validateForm())==null&&(z(e),f.value=!1,V.value=!0)},z=e=>{var g;const u=e.duration+" "+e.duration_unit,A=e.PresentingComplaints,r=A.name==="Other"?e["Other (specify)"]:A.name;I.value.push({actionBtn:!0,btn:["delete"],name:r,concept_id:A.concept_id,duration:A.duration,durationUnits:A.duration_unit,display:[r,u],data:[{concept_id:8578,value_coded:A.concept_id,obs_datetime:he.getSessionDate(),child:[{concept_id:A.concept_id,value_text:u,obs_datetime:he.getSessionDate()}]}]}),(g=D.value)==null||g.resetForm(),U.value=!0},M=(e,u)=>u.some(A=>A.name===e),ee=e=>{I.value=I.value.filter(u=>u.display[0]!==e.name)},N=async()=>{const e=await K.getObsByEncounterIdAndDate(Se.PRESENTING_COMPLAINTS),u=I.value.flatMap(A=>A.data);if(u.length<=0&&e.length<=0)return le("Presenting complaints is required");u.length<=0||(await K.addObsToEncounterPatient(u,Se.PRESENTING_COMPLAINTS),Ee("Presenting complaints saved successful"),I.value=[])};return Ne(async()=>{await k()}),S({onSubmit:N}),(e,u)=>{const A=Y("ion-row"),r=Y("ion-label"),g=Y("ion-accordion"),E=Y("ion-accordion-group");return l(),b(oe,null,[t(ht,{status:h.value,content:"No presenting complaints added"},null,8,["status"]),U.value?(l(),b("span",$a,[t(Re,{listData:I.value,"onClicked:delete":ee},null,8,["listData"])])):w("",!0),f.value?(l(),O(A,{key:1},{default:s(()=>[t(Me,{formData:L.value,ref_key:"formRef",ref:D},null,8,["formData"]),c("div",La,[t(we,{fill:"clear",icon:v.value.plus,iconSlot:"icon-only","onClicked:btn":u[0]||(u[0]=q=>y()),name:"Save"},null,8,["icon"])])]),_:1})):w("",!0),V.value?(l(),O(A,{key:2,style:{"margin-top":"10px"}},{default:s(()=>[t(we,{fill:"clear",icon:v.value.plus,iconSlot:"icon-only","onClicked:btn":u[1]||(u[1]=q=>P()),name:"Add new presenting complaints"},null,8,["icon"])]),_:1})):w("",!0),t(A,null,{default:s(()=>[t(E,{ref_key:"accordionGroup",ref:_,class:"previousView"},{default:s(()=>[t(g,{value:"first","toggle-icon-slot":"start",style:{"border-radius":"10px","background-color":"#fff"}},{default:s(()=>[t(a(G),{slot:"header",color:"light"},{default:s(()=>[t(r,{class:"previousLabel"},{default:s(()=>u[2]||(u[2]=[x("Previous presenting complaints",-1)])),_:1,__:[2]})]),_:1}),c("div",Ma,[t(Ta)])]),_:1})]),_:1},512)]),_:1})],64)}}}),Va=ce(Ra,[["__scopeId","data-v-7ca4ad60"]]),Ha=j(()=>[{componentType:"radioButtonField",header:"Eye opening response",name:"Eye opening response",obsValueType:"value_coded",type:"inline",options:[{label:"Spontaneously",value:"Spontaneously"},{label:"To speech",value:"To speech"},{label:"To pain",value:"To pain"},{label:"No response",value:"No response"}]},{componentType:"Dashes"},{componentType:"radioButtonField",header:"Best verbal response",name:"Best verbal response",obsValueType:"value_coded",type:"inline",options:[{label:"Oriented to time, place and person",value:"Oriented to time, place and person"},{label:"Confused",value:"Confused"},{label:"Inappropriate words",value:"Inappropriate words"},{label:"Incomprehensible sounds",value:"Incomprehensible sounds"},{label:"No response",value:"No response"}]},{componentType:"Dashes"},{componentType:"radioButtonField",header:"Best motor response",name:"Best motor response",obsValueType:"value_coded",type:"inline",options:[{label:"Obeys commands",value:"Obeys commands"},{label:"Moves to localised pain",value:"Moves to localised pain"},{label:"Flexion withdrawal from pain",value:"Flexion withdrawal from pain"},{label:"Abnormal flexion (decorticate)",value:"Abnormal flexion (decorticate)"},{label:"Abnormal extension (decerebrate)",value:"Abnormal extension (decerebrate)"},{label:"No response",value:"No response"}]}]),qa=j(()=>[{componentType:"radioButtonField",header:"Eye opening response",name:"Eye opening response",obsValueType:"value_coded",type:"inline",options:[{label:"Directed eye movements",value:"Directed eye movements"},{label:"Not directed",value:"Not directed"}]},{componentType:"Dashes"},{componentType:"radioButtonField",header:"Best verbal response",name:"Best verbal response",obsValueType:"value_coded",type:"inline",options:[{label:"Appropriate cry",value:"Appropriate cry"},{label:"Inappropriate cry or moan",value:"Inappropriate cry or moan"},{label:"No cry",value:"No cry"}]},{componentType:"Dashes"},{componentType:"radioButtonField",header:"Best motor response",name:"Best motor response",obsValueType:"value_coded",type:"inline",options:[{label:"Localizes pain",value:"Localizes pain"},{label:"Withdraws from pain",value:"Withdraws from pain"},{label:"Non specific or no response",value:"Non specific or no response"}]}]),Ua={Spontaneously:4,"To speech":3,"To pain":2,"No response":1},Wa={"Oriented to time, place and person":5,Confused:4,"Inappropriate words":3,"Incomprehensible sounds":2,"No response":1},za={"Obeys commands":6,"Moves to localised pain":5,"Flexion withdrawal from pain":4,"Abnormal flexion (decorticate)":3,"Abnormal extension (decerebrate)":2,"No response":1},Ga={"Not directed":0,"Directed eye movements":1},ja={"Non specific or no response":0,"Withdraws from pain":1,"Localizes pain":2},Ya={"No cry":0,"Inappropriate cry or moan":1,"Appropriate cry":2},Ka={class:"modal_wrapper"},Ja=Z({__name:"LevelOfConsciousness",setup(B,{expose:S}){var U,I;const m=$e(),{patient:p}=xe(m),v=n(Te.getAgeInYears((I=(U=p==null?void 0:p.value)==null?void 0:U.personInformation)==null?void 0:I.birthdate)),h=n(null),f=j(()=>{var ee,N,e,u;const C=((ee=h.value)==null?void 0:ee.getFormValues())||{},_=C["Eye opening response"]||"",L=C["Best motor response"]||"",D=C["Best verbal response"]||"",k=v.value<18,P=(N=(k?Ga:Ua)[_])!=null?N:0,y=(e=(k?ja:za)[L])!=null?e:0,z=(u=(k?Ya:Wa)[D])!=null?u:0,M=P+y+z;return"(M ".concat(y," V ").concat(z," E ").concat(P,") ").concat(M,"/").concat(k?5:15)});return S({onSubmit:async()=>{var _;if(!h.value){console.error("Form reference is not available");return}const C=((_=h.value)==null?void 0:_.getFormValues())||{};C["Eye opening response"]||C["Best motor response"]||C["Best verbal response"]?(await K.buildAddObsToEncounterPatient(C,Se.ASSESSMENT),h.value.resetForm(),Ee("Level of Consciousness saved successfully")):le(" No level of consciousness data to save ")}}),(C,_)=>(l(),b("div",Ka,[v.value<18?(l(),O(Me,{key:0,formData:a(qa),ref_key:"formRef",ref:h},null,8,["formData"])):(l(),O(Me,{key:1,formData:a(Ha),ref_key:"formRef",ref:h},null,8,["formData"])),c("h5",null,$(f.value),1)]))}}),Qa={class:"modal_wrapper"},Xa=Z({__name:"PregnancyBreastfeeding",setup(B,{expose:S}){const m=ra(),{pregnancy:p}=xe(m),v=()=>{};return S({onSubmit:async()=>{const f=await Ke(p.value);f.length>0?(await K.addObsToEncounterPatient(f,Se.PREGNANCY_STATUS),Ee("Pregnancy status saved successfully")):le("No pregnancy status data to save ")}}),(f,V)=>(l(),b("div",Qa,[t(Ye,{contentData:a(p),"onUpdate:inputValue":v},null,8,["contentData"])]))}}),Za={class:"modal_wrapper"},en={class:"uniform_columns"},tn=Z({__name:"PastMedicalHistory",setup(B,{expose:S}){const m=ua(),{pastMedicalHistory:p}=xe(m),v=n([]);Ne(()=>{v.value=m.getInitial(),h()}),ge(p,()=>{h()},{deep:!0});const h=()=>{var C;const I=["TB","Chronic Obstructive Pulmonary Disease (COPD)","Asthma","Epilepsy","Previous stroke","Peptic Ulcer Disease (PUD)","Mental disorder","Bleeding disorders","Hypertension","HIV Positive","Diabetes Mellitus"];(C=ca(p.value,"None"))!=null&&C.checked?I.forEach(_=>{fe(p.value,"TB treatment","displayNone",!0),De(p.value,"TB drugs","displayNone",!0),De(p.value,"TB drug start date","displayNone",!0),fe(p.value,"Hypertension medication","displayNone",!0),De(p.value,"Current hypertension treatment regimen","displayNone",!0),fe(p.value,"HIV status","displayNone",!0),De(p.value,"ARV start date","displayNone",!0),fe(p.value,"Diabetes","displayNone",!0),fe(p.value,"Controlled by","displayNone",!0),_e(p.value,_,"checked",!1),_e(p.value,_,"disabled",!0)}):I.forEach(_=>{_e(p.value,_,"disabled",!1)})},f=I=>{De(p.value,"TB drugs","popOverData",{filterData:!0,data:[{name:"Auramine 'O' (C.I. 41000) 50g"},{name:"Bedaquilline 100mg"},{name:"Clofazimine 100mg"},{name:"Clofazimine 50mg"},{name:"Cycloserine 125mg"},{name:"Cycloserine 250mg"},{name:"Delamanid 50mg"},{name:"Ethambutol 100mg"},{name:"Ethambutol 400mg"},{name:"Ethionamide 250mg"},{name:"Isoniazid 100mg "},{name:"Isoniazid 300mg"},{name:"Isoniazid / Rifapentine 300mg / 300mg"},{name:"Levofloxacin 100mg"},{name:"Levofloxacin 250mg"},{name:"Linezolid 600mg"},{name:"Moxifloxacin 400mg"},{name:"Pyrazinamide 400mg"},{name:"Rifabutin 150mg Capsules"},{name:"Rifampicin 150mg/isoniazid 75mg"},{name:"Rifampicin 75mg+INH 50mg dispersible"},{name:"Rifampicin 75mg+INH 50mg+Pyrazinamide 150mg dispersible"},{name:"Rifampicin150mg/Isoniazid75mg/Pyrazinamide 400mg/Ethambutol"}]}),De(p.value,"Current hypertension treatment regimen","popOverData",{filterData:!0,data:[{name:"Captopril 12.5mg"},{name:"Aspirin 75mg"},{name:"Hydrochlorothiazide 25mg"},{name:"Enalapril Meleate 5mg"},{name:"Enalapril Maleate 10mg"}]})},V=async()=>[...await yt(p.value),...await Ke(p.value),...await bt(p.value)];return S({onSubmit:async()=>{const I=await V();if(I.length===0){le("No past medical history data to save");return}await K.addObsToEncounterPatient(I,Se.PAST_MEDICAL_HISTORY),Ee("Past medical history saved successful")}}),(I,C)=>(l(),b("div",Za,[c("div",en,[t(Ye,{contentData:a(p),initialData:v.value,"onUpdate:inputValue":f,"onUpdate:selected":f},null,8,["contentData","initialData"])])]))}}),an=ce(tn,[["__scopeId","data-v-49fdce72"]]),nn={class:"container"},sn=Z({__name:"PhysicalExamination",setup(B,{expose:S}){const m=da(),p=$e(),{physicalExam:v}=xe(m),{patient:h}=xe(p),f=n([]);Ne(()=>{f.value=m.getInitial(),V(),U()}),ge(v,()=>{V(),U()},{deep:!0});const V=()=>{pa(v.value,"Physical examination")=="No"?fe(v.value,"Reason why physical examination not done","displayNone",!1):(fe(v.value,"Reason why physical examination not done","displayNone",!0),fe(v.value,"Reason why physical examination not done","selectedValue",""))},U=()=>{var L,D;const _=(D=(L=h.value)==null?void 0:L.personInformation)==null?void 0:D.gender;_=="M"&&(_e(v.value,"Vulva examination","disabled",!0),_e(v.value,"Visible bleeding","disabled",!0)),_=="F"&&(_e(v.value,"Urethral meatus abnormal","disabled",!0),_e(v.value,"Scrotal swelling","disabled",!0),_e(v.value,"Tastes swelling","disabled",!0))},I=async()=>[...await yt(v.value),...await Ke(v.value),...await bt(v.value)];return S({onSubmit:async()=>{const _=await I();if(_.length===0){le("No physical examination data to save");return}await K.addObsToEncounterPatient(_,Se.PHYSICAL_EXAMINATION),Ee("Diagnosis saved successful")}}),(_,L)=>{const D=Y("ion-card-content"),k=Y("ion-card");return l(),b("div",nn,[t(k,{class:"section"},{default:s(()=>[t(D,null,{default:s(()=>[t(Ye,{contentData:a(v),initialData:f.value},null,8,["contentData","initialData"])]),_:1})]),_:1})])}}}),on=ce(sn,[["__scopeId","data-v-3818e796"]]),ln={class:"ion-padding",slot:"content"},rn={class:"nav-buttons"},un={class:"ion-padding",slot:"content"},cn={class:"nav-buttons"},dn={class:"ion-padding",slot:"content"},pn={class:"nav-buttons"},mn={class:"ion-padding",slot:"content"},vn={class:"nav-buttons"},fn={class:"ion-padding",slot:"content"},_n={class:"nav-buttons"},gn={class:"ion-padding",slot:"content"},hn={class:"nav-buttons"},yn=Z({__name:"ClinicalAssessment",setup(B,{expose:S}){const m=n("loc"),p=n(0),v=new ma,h=$e(),f=()=>{p.value++},V=n(null),U=n(null),I=n(null),C=n(null),_=n(null),L=n(null),D=[{id:"loc",label:"Level of consciousness",show:!0},{id:"pc",label:"Presenting complaints",show:!0},{id:"pbs",label:"Pregnancy and breastfeeding status",show:()=>v.isChildBearing()},{id:"pmh",label:"Past medical history",show:!0},{id:"al",label:"Allergies",show:!0},{id:"pe",label:"Physical examination",show:!0}];j(()=>{const N=h.patient;if(!N)return!1;const e=he.getSessionDate();return["levelOfConsciousness","presentingComplaints","pastMedicalHistory","physicalExam","allergies","pregnancy"].some(A=>{var g,E;return[...((g=N[A])==null?void 0:g.saved)||[],...((E=N[A])==null?void 0:E.unsaved)||[]].some(q=>q.obs_datetime?Te.toStandardHisFormat(q.obs_datetime)===Te.toStandardHisFormat(e):!1)})});const k=j(()=>D.filter(N=>typeof N.show=="function"?N.show():N.show)),P=N=>{const e=D.find(u=>u.id===N);return e?typeof e.show=="function"?e.show():e.show:!1},y=N=>k.value.findIndex(e=>e.id===N),z=N=>{const e=y(N);e>0&&(m.value=k.value[e-1].id)},M=N=>{const u=y(N)+1;u<k.value.length?m.value=k.value[u].id:(m.value="",f())};return S({onSubmit:async()=>{const N=[{ref:V,name:"PresentingComplaints"},{ref:U,name:"LevelOfConsciousness"},{ref:I,name:"PastMedicalHistory"},{ref:_,name:"PregnancyBreastfeeding"},{ref:L,name:"PhysicalExamination"}];for(const e of N)if(e.ref.value&&typeof e.ref.value.onSubmit=="function")try{await e.ref.value.onSubmit()}catch(u){console.error("Error calling ".concat(e.name," onSubmit:"),u)}else console.log("".concat(e.name," component ref not available or no onSubmit method"))}}),(N,e)=>(l(),O(a(Kt),{style:{width:"100%"}},{default:s(()=>[t(a(Oe),{value:m.value,"onUpdate:value":e[12]||(e[12]=u=>m.value=u),ref:"accordionGroup",class:"previousView"},{default:s(()=>[P("loc")?(l(),O(a(re),{key:0,value:"loc",class:"_card"},{default:s(()=>[t(a(G),{slot:"header",color:"light"},{default:s(()=>[t(a(W),{class:"previousLabel"},{default:s(()=>e[13]||(e[13]=[x("Level of consciousness",-1)])),_:1,__:[13]})]),_:1}),c("div",ln,[t(Ja,{"is-active":m.value==="loc",ref_key:"levelOfConsciousnessFormRef",ref:U,onDataSaved:f},null,8,["is-active"]),c("div",rn,[y("loc")>0?(l(),O(a(ae),{key:0,fill:"outline",onClick:e[0]||(e[0]=ne(u=>z("loc"),["stop"]))},{default:s(()=>e[14]||(e[14]=[x(" Back ",-1)])),_:1,__:[14]})):w("",!0),t(a(ae),{fill:"outline",onClick:e[1]||(e[1]=ne(u=>M("loc"),["stop"]))},{default:s(()=>[x($(y("loc")<k.value.length-1?"Next":"Finish"),1)]),_:1})])])]),_:1})):w("",!0),P("pc")?(l(),O(a(re),{key:1,value:"pc",class:"_card"},{default:s(()=>[t(a(G),{slot:"header",color:"light"},{default:s(()=>[t(a(W),{class:"previousLabel"},{default:s(()=>e[15]||(e[15]=[x("Presenting complaints",-1)])),_:1,__:[15]})]),_:1}),c("div",un,[t(Va,{"is-active":m.value==="pc",onDataSaved:f,ref_key:"presentingComplaintsFormRef",ref:V},null,8,["is-active"]),c("div",cn,[y("pc")>0?(l(),O(a(ae),{key:0,fill:"outline",onClick:e[2]||(e[2]=ne(u=>z("pc"),["stop"]))},{default:s(()=>e[16]||(e[16]=[x(" Back ",-1)])),_:1,__:[16]})):w("",!0),t(a(ae),{fill:"outline",onClick:e[3]||(e[3]=ne(u=>M("pc"),["stop"]))},{default:s(()=>[x($(y("pc")<k.value.length-1?"Next":"Finish"),1)]),_:1})])])]),_:1})):w("",!0),P("pbs")?(l(),O(a(re),{key:2,value:"pbs",class:"_card"},{default:s(()=>[t(a(G),{slot:"header",color:"light"},{default:s(()=>[t(a(W),{class:"previousLabel"},{default:s(()=>e[17]||(e[17]=[x("Pregnancy and breastfeeding status",-1)])),_:1,__:[17]})]),_:1}),c("div",dn,[t(Xa,{"is-active":m.value==="pbs",ref_key:"pregnancyBreastfeedingFormRef",ref:_,onDataSaved:f},null,8,["is-active"]),c("div",pn,[y("pbs")>0?(l(),O(a(ae),{key:0,fill:"outline",onClick:e[4]||(e[4]=ne(u=>z("pbs"),["stop"]))},{default:s(()=>e[18]||(e[18]=[x(" Back ",-1)])),_:1,__:[18]})):w("",!0),t(a(ae),{fill:"outline",onClick:e[5]||(e[5]=ne(u=>M("pbs"),["stop"]))},{default:s(()=>[x($(y("pbs")<k.value.length-1?"Next":"Finish"),1)]),_:1})])])]),_:1})):w("",!0),P("pmh")?(l(),O(a(re),{key:3,value:"pmh",class:"_card"},{default:s(()=>[t(a(G),{slot:"header",color:"light"},{default:s(()=>[t(a(W),{class:"previousLabel"},{default:s(()=>e[19]||(e[19]=[x("Past medical history",-1)])),_:1,__:[19]})]),_:1}),c("div",mn,[t(an,{"is-active":m.value==="pmh",ref_key:"pastMedicalHistoryFormRef",ref:I,onDataSaved:f},null,8,["is-active"]),c("div",vn,[y("pmh")>0?(l(),O(a(ae),{key:0,fill:"outline",onClick:e[6]||(e[6]=ne(u=>z("pmh"),["stop"]))},{default:s(()=>e[20]||(e[20]=[x(" Back ",-1)])),_:1,__:[20]})):w("",!0),t(a(ae),{fill:"outline",onClick:e[7]||(e[7]=ne(u=>M("pmh"),["stop"]))},{default:s(()=>[x($(y("pmh")<k.value.length-1?"Next":"Finish"),1)]),_:1})])])]),_:1})):w("",!0),P("al")?(l(),O(a(re),{key:4,value:"al",class:"_card"},{default:s(()=>[t(a(G),{slot:"header",color:"light"},{default:s(()=>[t(a(W),{class:"previousLabel"},{default:s(()=>e[21]||(e[21]=[x("Allergies",-1)])),_:1,__:[21]})]),_:1}),c("div",fn,[t(wa,{"is-active":m.value==="al",ref_key:"allergiesFormRef",ref:C,onDataSaved:f},null,8,["is-active"]),c("div",_n,[y("al")>0?(l(),O(a(ae),{key:0,fill:"outline",onClick:e[8]||(e[8]=ne(u=>z("al"),["stop"]))},{default:s(()=>e[22]||(e[22]=[x(" Back ",-1)])),_:1,__:[22]})):w("",!0),t(a(ae),{fill:"outline",onClick:e[9]||(e[9]=ne(u=>M("al"),["stop"]))},{default:s(()=>[x($(y("al")<k.value.length-1?"Next":"Finish"),1)]),_:1})])])]),_:1})):w("",!0),P("pe")?(l(),O(a(re),{key:5,value:"pe",class:"_card"},{default:s(()=>[t(a(G),{slot:"header",color:"light"},{default:s(()=>[t(a(W),{class:"previousLabel"},{default:s(()=>e[23]||(e[23]=[x("Physical examination",-1)])),_:1,__:[23]})]),_:1}),c("div",gn,[t(on,{"is-active":m.value==="pe",ref_key:"physicalExaminationFormRef",ref:L,onDataSaved:f},null,8,["is-active"]),c("div",hn,[y("pe")>0?(l(),O(a(ae),{key:0,fill:"outline",onClick:e[10]||(e[10]=ne(u=>z("pe"),["stop"]))},{default:s(()=>e[24]||(e[24]=[x(" Back ",-1)])),_:1,__:[24]})):w("",!0),t(a(ae),{fill:"outline",onClick:e[11]||(e[11]=ne(u=>M("pe"),["stop"]))},{default:s(()=>[x($(y("pe")<k.value.length-1?"Next":"Finish"),1)]),_:1})])])]),_:1})):w("",!0)]),_:1},8,["value"])]),_:1}))}}),Ps=ce(yn,[["__scopeId","data-v-58ea8d02"]]);class bn extends lt{constructor(S,m){super(S,8,m)}static async getDiagnosis(S="",m=1,p=10){const v=await va.getConceptID("Qech outpatient diagnosis list");return lt.getJson("diagnosis",{id:v,name:S,page:m,page_size:p})}}const Dn=Z({name:"Menu",components:{IonContent:pt,IonHeader:dt,IonItem:G,IonList:Pe,IonMenu:ct,IonTitle:ut,IonToolbar:rt,List:Re},computed:{...je($e,["patient"])},data(){return{valueNumericArray:[],obsDatetime:[],graphIcon:_t(["#006401"]),listIcon:ft(["#636363"]),displayGraph:!0,orders:[],height:[],BMI:[],iconBg:{},activeWeight:[],activeHeight:[],activeBMI:[],list:[],series:[{name:"",data:[]}]}},setup(){return{checkmark:vt,pulseOutline:mt}},async mounted(){const B=await K.getAll(this.patient.patientID,"Primary diagnosis"),S=await K.getAll(this.patient.patientID,"Secondary diagnosis"),m=await K.getAll(this.patient.patientID,"Attempted/ Differential diagnosis"),p=[...B||[],...S||[],...m||[]],v=ve.isEmpty(p)?[]:Promise.all(p.map(async h=>({name:await K.getConceptName(h.value_coded),obs_date:h.obs_datetime})));this.setListData(await v)},methods:{dismiss(){Jt.dismiss()},handleIcon(){},setActivClass(B){this.activeHeight="",this.activeBMI="",this.activeWeight="",B=="height"?this.activeHeight="_active":B=="weight"?this.activeWeight="_active":B=="BMI"&&(this.activeBMI="_active")},setListData(B){this.list=[],this.list.push({actionBtn:!1,class:"col_background",header:!0,minHeight:"--min-height: 25px;",display:["Date","Diagnosis","Notes"]}),B.forEach(S=>{this.list.push({actionBtn:!1,minHeight:"--min-height: 25px;",class:"col_background",display:[Te.toStandardHisFormat(S.obs_date),S.name,""]})})}}}),wn={class:"modal_wrapper"};function Sn(B,S,m,p,v,h){const f=Y("list");return l(),b("div",wn,[c("div",null,[t(f,{listData:B.list},null,8,["listData"])])])}const In=ce(Dn,[["render",Sn],["__scopeId","data-v-88580898"]]),Cn={class:"custom_card",style:{padding:"10px"}},kn={key:0},Pn={key:0,style:{color:"red","margin-top":"10px",background:"lightgoldenrodyellow"}},xn={class:"ion-padding",slot:"content"},Nn=Z({__name:"OPDDiagnosis",setup(B,{expose:S}){const m=ke,p=n(!0),v=n(!1),h=n(!0),f=n(!1),V=n(!0),U=n(""),I=n(""),C=n([]),_=n([]),L=n(),D=n(null);fa();const k=j(()=>_.value.some(r=>r.data.concept_id===6542));ge(_,()=>{u()},{deep:!0});const P=j(()=>[{name:"primaryDiagnosis",header:"Primary Diagnosis",componentType:"multiSelectInputField",options:C.value,icon:m.search,onSearchChange:N,validation:Be.required},{componentType:"checkboxField",label:"Secondary Diagnosis",type:"single",grid:{s:"6"},name:"secondaryDiagnosisCheckbox"},{componentType:"checkboxField",label:"Differential Diagnosis",type:"single",grid:{s:"6"},name:"differentialDiagnosisCheckbox"},{componentType:"Dashes"},{name:"secondaryDiagnosis",header:"Secondary Diagnosis",componentType:"multiSelectInputField",isMultiple:!0,options:C.value,icon:m.search,condition:r=>r==null?void 0:r.secondaryDiagnosisCheckbox,onSearchChange:N,validation:(r,g)=>y(g,"secondaryDiagnosis")},{name:"differentialDiagnosis",header:"Differential Diagnosis",componentType:"multiSelectInputField",options:C.value,icon:m.search,isMultiple:!0,condition:r=>r==null?void 0:r.differentialDiagnosisCheckbox,onSearchChange:N,validation:(r,g)=>y(g,"differentialDiagnosis")}]),y=(r,g)=>{var te,R,ye;if(!r)return null;const E=(te=r.primaryDiagnosis)==null?void 0:te.name,q=((R=r.secondaryDiagnosis)==null?void 0:R.map(de=>de.name))||[],se=((ye=r.differentialDiagnosis)==null?void 0:ye.map(de=>de.name))||[];if(g==="secondaryDiagnosis"&&q.includes(E)||g==="differentialDiagnosis"&&se.includes(E))return"".concat(E," is already the primary diagnosis");const ie=q.find(de=>se.includes(de));return ie?"".concat(ie," cannot be both secondary and differential"):null},z=()=>{I.value="",U.value="",p.value=!1,V.value=!1,v.value=!0},M=async()=>{var r;((r=D.value)==null?void 0:r.validateForm())==null&&(ee(),v.value=!1,f.value=!0,V.value=!0,h.value=!1)},ee=()=>{var te;const r=[],g=_.value.map(R=>R.name),E=((te=D.value)==null?void 0:te.getFormValues())||{},q=E.primaryDiagnosis||[],se=E.secondaryDiagnosis||[],ie=E.differentialDiagnosis||[];if(q.name&&!g.includes(q.name))if(!_.value.some(ye=>ye.data.concept_id===6542))r.push({actionBtn:!0,btn:["delete"],name:q.name,id:q.concept_id,display:[q.name,"Primary diagnosis"],data:{concept_id:6542,value_coded:q.concept_id,obs_datetime:he.getSessionDate()}});else return _a("Only one primary diagnosis is allowed"),!1;return se&&se.forEach(R=>{g.includes(R.name)||r.push({actionBtn:!0,btn:["delete"],name:R.name,id:R.concept_id,display:[R.name,"Secondary diagnosis"],data:{concept_id:6543,value_coded:R.concept_id,obs_datetime:he.getSessionDate()}})}),ie&&ie.forEach(R=>{g.includes(R.name)||r.push({actionBtn:!0,btn:["delete"],name:R.name,id:R.concept_id,display:[R.name,"Differential diagnosis"],data:{concept_id:10201,value_coded:R.concept_id,obs_datetime:he.getSessionDate()}})}),r.length>0&&(_.value=[..._.value,...r]),!0},N=async r=>{const g=r.trim().toLowerCase()||"";return C.value=await bn.getDiagnosis(g,1,15),C.value},e=r=>{const g=_.value,E=r.name,q=g.filter(se=>se.display[0]!==E);_.value=q},u=()=>{_.value.length>0?(f.value=!0,p.value=!1):v.value||(p.value=!0),V.value=!k.value},A=async()=>{if(_.value.length<=0){le("Diagnosis not saved");return}const r=_.value.flatMap(E=>E.data);if(r.length<=0)return le("Diagnosis not saved");const g=await K.addObsToEncounter(r,Se.DIAGNOSIS);await K.mergeObsToPatient(g),Ee("Diagnosis saved successful"),_.value=[]};return Ne(async()=>{u(),await N("")}),S({onSubmit:A}),(r,g)=>{const E=Y("ion-row"),q=Y("ion-label"),se=Y("ion-accordion"),ie=Y("ion-accordion-group");return l(),b(oe,null,[c("div",Cn,[t(ht,{status:p.value,content:"No Diagnosis added"},null,8,["status"]),f.value?(l(),b("span",kn,[t(Re,{listData:_.value,"onClicked:delete":e},null,8,["listData"]),k.value?(l(),b("div",Pn," In order to update the diagnosis list, please remove/delete the primary diagnosis only and then re-add or change it along with the secondary and differential diagnoses. ")):w("",!0)])):w("",!0),v.value?(l(),O(E,{key:1},{default:s(()=>{var te;return[c("div",null,[t(Me,{formData:P.value,ref_key:"formRef",ref:D},null,8,["formData"])]),c("div",null,[t(we,{fill:"clear",icon:a(m).plus,iconSlot:"icon-only","onClicked:btn":g[0]||(g[0]=R=>M()),name:"Save",disabled:(te=D.value)==null?void 0:te.validateForm(),class:"ion-margin-top"},null,8,["icon","disabled"])])]}),_:1})):w("",!0),V.value?(l(),O(E,{key:2,style:{"margin-top":"10px"}},{default:s(()=>[t(we,{fill:"clear",icon:a(m).plus,iconSlot:"icon-only","onClicked:btn":g[1]||(g[1]=te=>z()),name:"Add new Diagnosis"},null,8,["icon"])]),_:1})):w("",!0)]),t(E,null,{default:s(()=>[t(ie,{ref_key:"accordionGroup",ref:L,class:"previousView"},{default:s(()=>[t(se,{value:"first","toggle-icon-slot":"start",class:"custom_card"},{default:s(()=>[t(a(G),{slot:"header",color:"light"},{default:s(()=>[t(q,{class:"previousLabel"},{default:s(()=>g[2]||(g[2]=[x("Previous Diagnosis",-1)])),_:1,__:[2]})]),_:1}),c("div",xn,[t(In)])]),_:1})]),_:1},512)]),_:1})],64)}}}),xs=ce(Nn,[["__scopeId","data-v-a440f286"]]),En={class:"allergies-section"},Fn={class:"allergies-container"},An={key:0,class:"allergies-grid"},On={key:1,class:"no-allergies"},Bn={class:"ion-padding",slot:"content"},Tn={key:0},$n={class:"previousSecDrgs"},Ln={class:"ion-padding",slot:"content"},Mn={class:"previousSecDrgs"},Rn={class:"medication-section"},Vn={class:"medication-content"},Hn={key:0,class:"add-medication-form"},qn={class:"form-group"},Un={class:"option-label"},Wn={key:0,class:"error-message"},zn={class:"form-row"},Gn={class:"form-group"},jn={key:0,class:"error-message"},Yn={class:"form-group"},Kn={key:0,class:"error-message"},Jn={class:"form-group"},Qn={key:0,class:"error-message"},Xn={class:"action-buttons"},Zn={class:"notes-section"},es={class:"notes-content"},ts={class:"notes-input-container"},as={class:"ion-padding",slot:"content"},ns={class:"notes-timeline"},ss={class:"note-date"},os={class:"note-content"},ls={class:"ion-padding",slot:"content"},is={class:"note-date"},rs={class:"note-content"},us=Z({watch:{},name:"xxxComponent"}),cs=Z({...us,setup(B){const S=ke,m=ka,p=n(!1),v=n(!1),h=n(!0),f=n(0),V=n(""),U=n(!1),I=n(""),C=n(!1),_=n(),L=n(!1),D=n(""),k=n(""),P=n(""),y=n(""),z=n(""),M=n("");n(!1);const ee="Add new medication",N="clear";n("Show more medications");const e=Ce(),u=ga(),A=j(()=>u.selectedMedicalAllergiesList),r=j(()=>e.selectedMedicalDrugsList),g=j(()=>e.partialOPDdrugList),E=j(()=>e.nonPharmalogicalTherapyAndOtherNotes),q=["first","second","third"],se=n(),ie=n(),te=n(),R=n(!1),ye=n(!1),de=n(!1),Ve=n("Show more notes"),He=n("Show more allergies"),Je=n(),Qe=n(),Ie=n(),Le=j(()=>e.editingDrugItem),Dt=n("Select a route"),qe=n(!1),wt=n("Select frequency"),Ue=n(!1),St=n("Select drug"),We=n(!1),J=n(),Q=n(),pe=n(),Fe=n([]),It=n([{concept_id:11797,name:"Buccal",concept_name_id:null,id:1769},{concept_id:11794,name:"Intradermal",concept_name_id:null,id:6284},{concept_id:11795,name:"Intramuscular (IM)",concept_name_id:null,id:6285},{concept_id:11799,name:"Intraosseous",concept_name_id:null,id:6286},{concept_id:11793,name:"Intravenous (IV)",concept_name_id:null,id:6295},{concept_id:3327,name:"Oral",concept_name_id:null,id:8686},{concept_id:11800,name:"Other method of prescription",concept_name_id:null,id:8920},{concept_id:11792,name:"Rectally",concept_name_id:null,id:10785},{concept_id:11798,name:"Subcutaneous",concept_name_id:null,id:12342},{concept_id:11796,name:"Sublingual",concept_name_id:null,id:12344},{concept_id:11792,name:"Rectally",concept_name_id:null,id:14078},{concept_id:11793,name:"Intravenous (IV)",concept_name_id:null,id:14079},{concept_id:11794,name:"Intradermal",concept_name_id:null,id:14080},{concept_id:11795,name:"Intramuscular (IM)",concept_name_id:null,id:14081},{concept_id:11796,name:"Sublingual",concept_name_id:null,id:14082},{concept_id:11797,name:"Buccal",concept_name_id:null,id:14083},{concept_id:11798,name:"Subcutaneous",concept_name_id:null,id:14084},{concept_id:11799,name:"Intraosseous",concept_name_id:null,id:14085},{concept_id:11800,name:"Other method of prescription",concept_name_id:null,id:14086}]),Ct=j(()=>Fe.value.length?Fe.value:It.value);function kt(i){J.value=i}async function Pt(){return await Pa()}async function xt(i=5,o=1e3){let F=0;for(;F<i&&(Fe.value=await Pt(),!(Fe.value.length>0));)F++,await new Promise(H=>setTimeout(H,o));Fe.value.length===0&&console.warn("Failed to fetch route list after maximum retries.")}Ne(async()=>{const i=new Sa,{previousDrugPrescriptions:o,previousClinicalNotes:F,previousDrugAllergies:H}=await i.getPatientEncounters();se.value=o,ie.value=Object.entries(F)[0];const[,...d]=Object.entries(F);te.value=d,Je.value=Object.entries(H)[0];const[,...T]=Object.entries(H);Qe.value=T,await xt()}),ge(()=>D.value,async i=>{Xe()}),ge(()=>k.value,async i=>{Ot()}),ge(()=>P.value,async i=>{Ze()});function Nt(){if(ve.isEmpty(J.value)==!0)return qe.value=!0,!1;if(ve.isEmpty(J.value)==!1)return qe.value=!1,!0}function Et(){if(ve.isEmpty(Q.value)==!0)return Ue.value=!0,!1;if(ve.isEmpty(Q.value)==!1)return Ue.value=!1,!0}function Ft(){if(ve.isEmpty(pe.value)==!0)return We.value=!0,!1;if(ve.isEmpty(pe.value)==!1)return We.value=!1,!0}function At(){h.value=!h.value,p.value=!0,C.value=!1,L.value=!1}async function Xe(){const i=await Lt();return console.log({drugNameExists:i}),i?U.value=!1:(V.value="please select a valid drug name",U.value=!0),U.value}async function Ot(){return at(k.value)?C.value=!1:(I.value="please enter a number",C.value=!0),C.value}async function Ze(){return at(P.value)?L.value=!1:(_.value="please enter a number",L.value=!0),L.value}async function et(){const i=await Xe(),o=await Ze(),F=Et(),H=Ft(),d=Nt();return!i&&!o&&F==!0&&H==!0&&d==!0}function Bt(i){Q.value=i}async function tt(){const i=()=>Ie.value.dose_strength!=null&&Ie.value.dose_strength?Math.trunc(Ie.value.dose_strength):1;if(Le.value!==null){if(!await et()){le("Please enter correct data values",4e3);return}const F=he.getSessionDate(),H=nt(F,parseInt(P.value));let d=!1;ze(Ie.value)==!0&&(d=!0);const T={drugName:D.value,dose:i(),frequency:Q.value.label,frequency_code:Q.value.code,duration:P.value,prescription:H,drug_id:M.value,units:z.value,route_concept_id:J.value.concept_id,route_name:J.value.name,highlightbackground:d},X=Ce();console.log(X.setSelectedMedicalDrugsList([T])),X.editingDrugItem=null,h.value=!0}else{if(!await et()){le("Please enter correct data values",4e3);return}zt();const F=he.getSessionDate(),H=nt(F,parseInt(P.value));let d=!1;ze(Ie.value)==!0&&(d=!0);const T={drugName:D.value,dose:i(),frequency:Q.value.label,frequency_code:Q.value.code,duration:P.value,prescription:H,drug_id:M.value,units:z.value,route_concept_id:J.value.concept_id,route_name:J.value.name,highlightbackground:d};Ce().setSelectedMedicalDrugsList([T])}M.value="",D.value="",k.value="",Q.value=null,P.value="",y.value="",f.value++,pe.value=null,J.value=null}async function Tt(i){const o=i,d=await it.getOfflineOPDDrugs({name:o,page:1,page_size:10});d.map(T=>({label:T.name,value:T.name,other:T})),e.setPartialOPDdrugList(d)}async function $t(i){let o;i.target===void 0?o=i:o=i.target.value;const d=await it.getOPDDrugs({name:encodeURIComponent(o),page:1,page_size:10});return d.map(T=>({label:T.name,value:T.name,other:T})),d}function ze(i){const o=[];return A.value.forEach(H=>{H.selected&&o.push(H.concept_id)}),Mt([i],o)==!0?(le("Client is allergic to the selected medication",4e6),!0):!1}async function Lt(){return(await $t(D.value)).length>0?D.value.length!=0:!1}function Mt(i,o){try{return i.some(F=>o.includes(F.concept_id))}catch(F){return!1}}function Rt(i){i&&(D.value=i.name,M.value=i.drug_id,z.value=i.units,Ie.value=i,ze(i))}function Vt(i){const o=r.value[i],F=Ce();F.removeDrugById(o.drug_id),F.editingDrugItem=o,M.value="",D.value="",k.value="",Q.value=null,P.value="",y.value="",pe.value=null,J.value=null,M.value=o.drug_id,D.value=o.drugName,k.value=o.dose,Q.value={label:o.frequency,code:o.frequency_code},P.value=o.duration,y.value=o.prescription;const H=g.value.find(d=>d.name===o.drugName);H&&(pe.value=H),J.value={concept_id:o.route_concept_id,name:o.route_name},h.value=!1,f.value++}function Ht(){if(Le.value!==null){M.value="",D.value="",k.value="",Q.value=null,P.value="",y.value="",pe.value=null,J.value=null;const i=Ce();i.setSelectedMedicalDrugsList([Le.value]),i.editingDrugItem=null}h.value=!0,f.value++}function qt(i){r.value.splice(i,1),f.value++,le("you have removed a drug from list",6e3)}function Ut(i){let o=i.target.value;Wt(o)}function Wt(i){Ce().setNonPharmalogicalTherapyAndOtherNotes(i)}function at(i){return/^[0-9]+$/.test(i)}function nt(i,o){const F=new Date(i);F.setDate(F.getDate()+o);const H=F.getFullYear(),d=String(F.getMonth()+1).padStart(2,"0"),T=String(F.getDate()).padStart(2,"0");return"".concat(H,"-").concat(d,"-").concat(T)}function zt(){p.value=!1,v.value=!0,h.value=!0}function Gt(i){q.filter(F=>F!==i.detail.value);const o=i.detail.value;o!==void 0?o=="third"&&(Ve.value="Show less notes",ye.value=!R.value):(Ve.value="Show more notes",ye.value=!R.value)}function jt(i){q.filter(F=>F!==i.detail.value);const o=i.detail.value;o!==void 0?o=="fith"&&(He.value="Show less allegies",de.value=!R.value):(He.value="Show more allegies",de.value=!R.value)}function st(i){return i[1]}function Yt(i){(i.key==="Enter"||i.key==="ArrowDown")&&(i.preventDefault(),tt())}const me=j(()=>[{showAddItemButton:!0,addItemButton:!0,name:Le.value!==null?"Update":"ADD",btnFill:"clear",fn:tt},{showAddItemButton:!0,addItemButton:!0,name:"CANCEL",btnFill:"clear",fn:Ht}]);return(i,o)=>{const F=Y("ion-chip"),H=Y("ion-text");return l(),O(a(Pe),null,{default:s(()=>[c("div",En,[t(a(W),{class:"section-title"},{default:s(()=>[t(a(Ae),{icon:a(Qt),class:"alert-icon"},null,8,["icon"]),t(a(W),null,{default:s(()=>o[9]||(o[9]=[x("Allergies (Medication, Healthcare items, Environment and Food)",-1)])),_:1,__:[9]})]),_:1}),c("div",Fn,[A.value.some(d=>d.selected)?(l(),b("div",An,[(l(!0),b(oe,null,ue(A.value,(d,T)=>Xt((l(),b("div",{key:T,class:"allergy-item"},[t(F,{class:"allergy-chip",color:"danger"},{default:s(()=>[t(a(W),null,{default:s(()=>[x($(d.name),1)]),_:2},1024),t(a(Ae),{icon:a(Zt)},null,8,["icon"])]),_:2},1024)])),[[ea,d.selected]])),128))])):(l(),b("div",On,[t(H,{style:{"font-size":"16px","font-weight":"600",color:"#9c8011"}},{default:s(()=>o[10]||(o[10]=[x("No allergies recorded",-1)])),_:1,__:[10]})])),t(a(Oe),{ref:"accordionGroup",class:"previousView"},{default:s(()=>[t(a(re),{value:"fourth","toggle-icon-slot":"start",style:{"border-radius":"10px","background-color":"#fff"}},{default:s(()=>[t(a(G),{slot:"header",color:"light"},{default:s(()=>[t(a(W),{class:"previousLabel"},{default:s(()=>o[11]||(o[11]=[x("Documented allergies timeline",-1)])),_:1,__:[11]})]),_:1}),c("div",Bn,[(l(!0),b(oe,null,ue(Je.value,(d,T)=>(l(),b("div",{class:"ionLbltp",key:T},[T==1?(l(),b("div",Tn,[c("div",null,[t(a(W),{class:"previousLabelDate"},{default:s(()=>[x($(d[0].date),1)]),_:2},1024)]),(l(!0),b(oe,null,ue(d,(X,be)=>(l(),b("div",{key:be},[c("div",$n,[t(a(Pe),null,{default:s(()=>[t(a(W),{class:"notes_p"},{default:s(()=>[x($(X.value),1)]),_:2},1024)]),_:2},1024)])]))),128))])):w("",!0)]))),128)),t(a(Oe),{onIonChange:jt},{default:s(()=>[t(a(re),{value:"fith","toggle-icon-slot":"start",style:{"border-radius":"10px","background-color":"#fff"}},{default:s(()=>[t(a(G),{slot:"header",color:"light"},{default:s(()=>[t(a(W),{class:"",color:"primary"},{default:s(()=>[x($(He.value),1)]),_:1})]),_:1}),c("div",Ln,[(l(!0),b(oe,null,ue(Qe.value,(d,T)=>(l(),b("div",{class:"ionLbltp",key:T},[c("div",null,[t(a(W),{class:"previousLabelDate"},{default:s(()=>[x($(d[0]),1)]),_:2},1024)]),(l(!0),b(oe,null,ue(st(d),(X,be)=>(l(),b("div",{key:be},[c("div",Mn,[t(a(Pe),null,{default:s(()=>[t(a(W),{class:"notes_p"},{default:s(()=>[x($(X.value),1)]),_:2},1024)]),_:2},1024)])]))),128))]))),128))])]),_:1})]),_:1})])]),_:1})]),_:1},512)])]),c("div",Rn,[t(a(G),{lines:"none",class:"section-header"},{default:s(()=>[t(a(Ae),{icon:a(ta),class:"section-icon"},null,8,["icon"]),t(a(W),{class:"section-title",style:{"margin-top":"12px"}},{default:s(()=>o[12]||(o[12]=[x("Medication",-1)])),_:1,__:[12]})]),_:1}),c("div",Vn,[(l(),O(Ia,{_selectedMedicalDrugsList:r.value,onEditItem:Vt,onRemoveItem:qt,key:f.value,class:"medication-list"},null,8,["_selectedMedicalDrugsList"])),h.value?w("",!0):(l(),b("div",Hn,[c("div",qn,[o[13]||(o[13]=c("label",{class:"input-label"},"Medication",-1)),t(a(Ge),{modelValue:pe.value,"onUpdate:modelValue":[o[0]||(o[0]=d=>pe.value=d),o[1]||(o[1]=d=>Rt(d))],options:g.value,searchable:!0,"close-on-select":!0,"show-labels":!1,placeholder:"Select medication",label:"name","track-by":"drug_id",onSearchChange:o[2]||(o[2]=d=>Tt(d))},{option:s(d=>[c("div",Un,$(d.option.name),1)]),_:1},8,["modelValue","options"]),We.value?(l(),b("div",Wn,$(St.value),1)):w("",!0)]),c("div",zn,[c("div",Gn,[o[14]||(o[14]=c("label",{class:"input-label"},"Route",-1)),t(a(Ge),{modelValue:J.value,"onUpdate:modelValue":[o[3]||(o[3]=d=>J.value=d),o[4]||(o[4]=d=>kt(d))],options:Ct.value,searchable:!0,"close-on-select":!0,"show-labels":!1,placeholder:"Select route",label:"name","track-by":"concept_id"},null,8,["modelValue","options"]),qe.value?(l(),b("div",jn,$(Dt.value),1)):w("",!0)]),c("div",Yn,[o[15]||(o[15]=c("label",{class:"input-label"},"Frequency",-1)),t(a(Ge),{modelValue:Q.value,"onUpdate:modelValue":[o[5]||(o[5]=d=>Q.value=d),o[6]||(o[6]=d=>Bt(d))],options:a(m),searchable:!0,"close-on-select":!0,"show-labels":!1,placeholder:"Select frequency",label:"label","track-by":"code"},null,8,["modelValue","options"]),Ue.value?(l(),b("div",Kn,$(wt.value),1)):w("",!0)]),c("div",Jn,[o[16]||(o[16]=c("label",{class:"input-label"},"Duration (days)",-1)),t(a(aa),{modelValue:P.value,"onUpdate:modelValue":o[7]||(o[7]=d=>P.value=d),type:"number",inputmode:"numeric",pattern:"[0-9]*",fill:"outline",placeholder:"Enter duration",onKeydown:Yt},null,8,["modelValue"]),L.value?(l(),b("div",Qn,$(_.value),1)):w("",!0)])]),c("div",Xn,[me.value[0].addItemButton?(l(),O(we,{key:0,name:me.value[0].name,fill:me.value[0].btnFill,icon:a(na),"onClicked:btn":me.value[0].fn,class:"save-button"},null,8,["name","fill","icon","onClicked:btn"])):w("",!0),me.value[1].addItemButton?(l(),O(we,{key:1,name:me.value[1].name,fill:me.value[1].btnFill,icon:a(sa),"onClicked:btn":me.value[1].fn,class:"cancel-button"},null,8,["name","fill","icon","onClicked:btn"])):w("",!0)])])),h.value?(l(),O(we,{key:1,name:ee,fill:N,icon:a(oa),"onClicked:btn":At,class:"add-new-button"},null,8,["icon"])):w("",!0)])]),c("div",Zn,[t(a(G),{lines:"none",class:"section-header"},{default:s(()=>[t(a(Ae),{icon:a(la),class:"section-icon"},null,8,["icon"]),t(a(W),{class:"section-title"},{default:s(()=>o[17]||(o[17]=[x("Non-pharmacological therapy and other notes",-1)])),_:1,__:[17]})]),_:1}),c("div",es,[t(Ca,{class:"intervention-component"}),c("div",ts,[t(a(G),{class:"notes-input-item"},{default:s(()=>[t(a(Ae),{slot:"start",icon:a(S).editPen,class:"edit-icon","aria-hidden":"true"},null,8,["icon"]),t(a(ia),{modelValue:E.value,"onUpdate:modelValue":o[8]||(o[8]=d=>E.value=d),onIonInput:Ut,placeholder:"Enter notes here...","auto-grow":!0,class:"notes-textarea",fill:"outline",style:{"--padding-start":"16px"}},null,8,["modelValue"])]),_:1})]),t(a(Oe),{ref:"accordionGroup",class:"previous-notes"},{default:s(()=>[t(a(re),{value:"fourth","toggle-icon-slot":"start"},{default:s(()=>[t(a(G),{slot:"header",color:"light",class:"previous-notes-header"},{default:s(()=>[t(a(W),null,{default:s(()=>o[18]||(o[18]=[x("Previous visit notes",-1)])),_:1,__:[18]})]),_:1}),c("div",as,[c("div",ns,[i.index===1?(l(!0),b(oe,{key:0},ue(ie.value,(d,T)=>(l(),b("div",{key:T,class:"note-entry"},[(l(!0),b(oe,null,ue(d,(X,be)=>(l(),b("div",{key:be},[c("div",ss,$(X.date),1),c("div",os,$(X.notes),1)]))),128))]))),128)):w("",!0),t(a(Oe),{onIonChange:Gt},{default:s(()=>[t(a(re),{value:"third","toggle-icon-slot":"start"},{default:s(()=>[t(a(G),{slot:"header",color:"light",class:"show-more-header"},{default:s(()=>[t(a(W),{color:"primary"},{default:s(()=>[x($(Ve.value),1)]),_:1})]),_:1}),c("div",ls,[(l(!0),b(oe,null,ue(te.value,(d,T)=>(l(),b("div",{key:T,class:"note-entry"},[(l(!0),b(oe,null,ue(st(d),(X,be)=>(l(),b("div",{key:be},[c("div",is,$(X.date),1),c("div",rs,$(X.notes),1)]))),128))]))),128))])]),_:1})]),_:1})])])]),_:1})]),_:1},512)])])]),_:1})}}}),Ns=ce(cs,[["__scopeId","data-v-fc08a1da"]]),ds={class:"dash_box"},ps={key:1},ms=Z({name:"xxxComponent"}),vs=Z({...ms,setup(B){const S=n("No outcome created yet"),m=n(!1),p=n("please select a type");n("Add new outcome"),n(!0);const v=n(!0),h=n(""),f=n(!0),V=n(!1),U=ha(),I=j(()=>U.outcomes),C=n(!1),_=n(!1),L=n(!1),D=n(!1),k=n(!1);n(null),n(null);const P=n([{name:"Admitted for short stay",selected:!1},{name:"Referred out",selected:!1},{name:"Discharged Home",selected:!1}]),y=[{multi_Selection:!1,show_list_label:!0,unqueId:"qwerty2",name_of_list:"Add new outcome",placeHolder:"Choose one",items:P.value,listUpdatedFN:z,listFilteredFN:()=>{},use_internal_filter:!0,disabled:n(!1)}];function z(r){P.value=r,P.value.forEach(g=>{g.selected==!0&&(h.value=g.name)})}Ne(async()=>{ee()}),ge(()=>h.value,async r=>{C.value==!0?C.value=!1:u()}),ge(()=>I.value.length,async r=>{ee()});function M(){P.value.forEach(r=>{r.selected=!1}),h.value=""}function ee(){I.value.length>0?f.value=!1:I.value.length==0&&V.value==!1&&(f.value=!0)}function N(r){I.value.splice(r,1)}const e=r=>{};async function u(r=!0){const g=h.value;console.log(g),h.value=g;const E=h.value;E==P.value[0].name?L.value=!0:L.value=!1,E==P.value[1].name?(D.value=!0,console.log("show_discharged_options is set to true")):D.value=!1,E==P.value[2].name?(k.value=!0,console.log("show_discharged_options is set to true")):k.value=!1}function A(){_.value=!1,L.value=!1,D.value=!1,k.value=!1,M()}return(r,g)=>{const E=Y("ion-row");return l(),O(a(Pe),null,{default:s(()=>[t(E,null,{default:s(()=>[t(a(ot),null,{default:s(()=>[(l(),O(xa,{key:0,"onUpdate:removeItem":N,"onUpdate:editItem":e,displayData:I.value},null,8,["displayData"]))]),_:1})]),_:1}),f.value?(l(),O(E,{key:0},{default:s(()=>[c("span",ds,$(S.value),1)]),_:1})):w("",!0),v.value?(l(),b("div",ps,[t(E,null,{default:s(()=>[t(a(ot),null,{default:s(()=>[t(ya,{multiSelection:y[0].multi_Selection,show_label:y[0].show_list_label,uniqueId:y[0].unqueId,name_of_list:y[0].name_of_list,choose_place_holder:y[0].placeHolder,"items_-list":y[0].items,use_internal_filter:y[0].use_internal_filter,disabled:y[0].disabled.value,onItemListUpDated:y[0].listUpdatedFN,onItemListFiltered:y[0].listFilteredFN},null,8,["multiSelection","show_label","uniqueId","name_of_list","choose_place_holder","items_-list","use_internal_filter","disabled","onItemListUpDated","onItemListFiltered"]),c("div",null,[m.value?(l(),O(a(W),{key:0,class:"error-label"},{default:s(()=>[x($(p.value),1)]),_:1})):w("",!0)])]),_:1})]),_:1})])):w("",!0),L.value?(l(),O(Na,{key:2,onDataSaved:A,selected_ward_prop:"",admitted_other_props:""})):w("",!0),D.value?(l(),O(Ea,{key:3,onDataSaved:A,selected_referral_data:"",selected_other_referral_data:""})):w("",!0),k.value?(l(),O(Fa,{key:4,onDataSaved:A,selected_discharged_prop:"",selected_discharged_data:""})):w("",!0)]),_:1})}}}),Es=ce(vs,[["__scopeId","data-v-b6576c18"]]);export{Ps as C,xs as O,bn as P,Xa as _,Ns as a,Es as b,Va as c,on as d,Ja as e};
