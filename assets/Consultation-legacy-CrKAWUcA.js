System.register(["./vendor-legacy-BTbHWMAP.js","./index-legacy-D5NHGThA.js","./prescription_service-legacy-ChV6OAOa.js","./lodash-legacy-pOOc9Efu.js","./DatePicker.vue_vue_type_script_setup_true_lang-legacy-CdwcWXHF.js","./lab_order-legacy-C5Lk_xw8.js","./chartjs-legacy-BdPHmqON.js","./app_encounter_service-legacy-DaUekosL.js","./patient_type_service-legacy-DsxC5oJJ.js","./SelectFacility-legacy-BLj5qcFJ.js","./Arrays-legacy-BSC7onNe.js"],function(e,a){"use strict";var t,l,n,i,o,d,r,s,c,u,v,p,m,f,g,b,h,_,y,w,x,k,C,S,D,V,T,I,N,P,E,M,O,F,A,z,B,L,q,R,H,U,j,$,W,Y,Q,G,Z,X,J,K,ee,ae,te,le,ne,ie,oe,de,re,se,ce,ue,ve,pe,me,fe,ge,be,he,_e,ye,we,xe,ke,Ce,Se,De,Ve,Te,Ie,Ne,Pe,Ee,Me,Oe,Fe,Ae,ze,Be,Le,qe,Re,He,Ue,je,$e,We;return{setters:[e=>{t=e.d,l=e.r,n=e.a,i=e.y,o=e.f,d=e.u,r=e.ag,s=e.z,c=e.l,u=e.k,v=e.ad,p=e.m,m=e.d9,f=e.bq,g=e.ac,b=e.ab,h=e.D,_=e.A,y=e.B,w=e.d7,x=e.cu,k=e.e,C=e.L,S=e.cv,D=e.F,V=e.ar,T=e.O,I=e.c,N=e.bg,P=e.S,E=e.U,M=e.T,O=e.bf,F=e.W,A=e.I,z=e.ah,B=e.an,L=e.G,q=e.aw,R=e.ax,H=e.bP,U=e.ay,j=e.V,$=e.ds,W=e.w,Y=e.c_,Q=e.aj,G=e.p,Z=e.cZ,X=e.aA,J=e.az,K=e.aa,ee=e.aK,ae=e.E,te=e.bZ,le=e.n,ne=e.M,ie=e.i,oe=e.J,de=e.dZ,re=e.v,se=e.d_,ce=e.av,ue=e.d$,ve=e.dd,pe=e.bn,me=e.c$,fe=e.dl,ge=e.dm,be=e.e0,he=e.a$},e=>{_e=e.P,ye=e.t,we=e.H,xe=e._,ke=e.m,Ce=e.aB,Se=e.k,De=e.A,Ve=e.J,Te=e.u,Ie=e.Z,Ne=e.S,Pe=e.ae,Ee=e.cp,Me=e.a3,Oe=e.cq,Fe=e.e},e=>{Ae=e.C,ze=e.P,Be=e.R},e=>{Le=e.l},e=>{qe=e._},e=>{Re=e.a},e=>{He=e.C},e=>{Ue=e.A},e=>{je=e.P},e=>{$e=e.S},e=>{We=e.u}],execute:function(){var a=document.createElement("style");a.textContent='.form-label[data-v-ed3faab3]{font-weight:700}ion-note[data-v-ed3faab3]{padding:10px;color:red;font-weight:700;font-style:italic}.side-effects-grid[data-v-9c8f6d00]{display:flex;flex-direction:column;gap:15px;margin-top:10px}.side-effect-item[data-v-9c8f6d00]{display:flex;flex-direction:column;border:1px dotted #eae9e9;border-radius:5px;padding:12px}.checkbox-container[data-v-9c8f6d00]{display:flex;align-items:center;gap:8px}.checkbox-label[data-v-9c8f6d00]{font-size:14px}.reason-summary[data-v-9c8f6d00]{display:flex;justify-content:space-between;align-items:center;margin-left:30px;margin-top:12px;padding-top:12px;border-top:1px dashed #eee}.reason-label[data-v-9c8f6d00]{font-weight:500;font-size:14px;display:flex;align-items:center}.drug-induced[data-v-9c8f6d00]{color:var(--ion-color-primary);background-color:rgba(0,100,2,.035);padding:4px 8px;border-radius:4px}.not-drug-induced[data-v-9c8f6d00]{padding:4px 8px;border-radius:4px}.edit-button[data-v-9c8f6d00]{font-size:12px;--padding-start: 8px;--padding-end: 8px}[data-v-9c8f6d00] ion-checkbox{--size: 20px;--checkbox-background-checked: var(--ion-color-primary);--border-radius: 2px;margin:0}.tb-symptoms-grid[data-v-d67e9ce3]{display:grid;grid-template-columns:1fr 1fr;gap:15px;margin-top:10px}.checkbox-option[data-v-d67e9ce3]{display:flex;align-items:center;gap:8px}.checkbox-label[data-v-d67e9ce3]{font-size:14px}[data-v-d67e9ce3] ion-checkbox{--size: 20px;--checkbox-background-checked: var(--ion-color-primary);--border-radius: 2px;margin:0}.contraceptives-section[data-v-9a45c4b4]{padding:16px}.section-header h3[data-v-9a45c4b4]{margin:0 0 16px;font-size:18px;font-weight:600;color:var(--ion-color-dark)}.selected-methods[data-v-9a45c4b4]{display:flex;flex-wrap:wrap;gap:8px;margin-bottom:16px}.method-tag[data-v-9a45c4b4]{display:flex;align-items:center;gap:8px;padding:8px 12px;background-color:var(--ion-color-primary);color:#fff;border-radius:20px;font-size:14px;font-weight:500}.method-tag.none-tag[data-v-9a45c4b4]{background-color:var(--ion-color-primary)}.remove-icon[data-v-9a45c4b4]{cursor:pointer;font-size:16px}.methods-list[data-v-9a45c4b4]{display:flex;flex-direction:column;gap:12px;margin-bottom:16px}.method-item[data-v-9a45c4b4]{padding:12px;border:1px solid var(--ion-color-light);border-radius:8px;transition:all .2s ease}.method-item[data-v-9a45c4b4]:not(.disabled):hover{background-color:var(--ion-color-light)}.method-item.disabled[data-v-9a45c4b4]{opacity:.5;background-color:var(--ion-color-light-shade)}.validation-errors[data-v-9a45c4b4]{margin-bottom:16px}.error-message[data-v-9a45c4b4]{color:var(--ion-color-danger);font-size:14px;margin-bottom:4px}.action-buttons[data-v-9a45c4b4]{display:flex;gap:12px;justify-content:flex-end}.action-buttons ion-button[data-v-9a45c4b4]{min-width:100px}.info-container[data-v-c9803869]{margin:0 auto}.info-card[data-v-c9803869]{background:#fafafa;border:1px solid #ececec;border-radius:5px;padding:20px;margin-bottom:16px;position:relative}.close-button[data-v-c9803869]{position:absolute;top:16px;right:16px;background:none;border:none;cursor:pointer;padding:4px;border-radius:4px;transition:color .2s ease}.close-icon[data-v-c9803869]{width:20px;height:20px}.main-message[data-v-c9803869]{display:flex;align-items:flex-start;margin-bottom:16px;padding-right:40px}.info-icon[data-v-c9803869]{width:40px;height:40px;margin-right:16px;margin-top:4px;flex-shrink:0}.message-content h2[data-v-c9803869]{color:#374151;font-size:1.3rem;font-weight:600;margin:0 0 12px}.info-list[data-v-c9803869]{list-style:none;padding:0;margin:0}.info-list li[data-v-c9803869]{color:#6b7280;font-size:.95rem;margin-bottom:8px;display:flex;align-items:center}.info-list li[data-v-c9803869]:before{content:"âˆ’";color:#ececec;font-weight:700;margin-right:8px;font-size:1.2rem}.data-rows[data-v-c9803869]{margin-top:0}.data-row[data-v-c9803869]{display:flex;justify-content:space-between;align-items:center;padding:8px 0;border-bottom:1px solid #ececec}.data-row[data-v-c9803869]:last-child{border-bottom:none}.data-label[data-v-c9803869]{color:#374151;font-weight:500;display:flex;align-items:center}.data-icon[data-v-c9803869]{width:16px;height:16px;margin-right:8px}.data-value[data-v-c9803869]{color:#111827;font-weight:600}.months-value[data-v-c9803869]{color:#ef4444;font-size:1.2rem;font-weight:700}.na-value[data-v-c9803869]{color:#6b7280;font-style:italic}.learn-more-section[data-v-c9803869]{margin-top:16px}.cervical-cancer-container[data-v-bee1d69f]{padding:10px}.loading-container[data-v-bee1d69f]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:20px}.reminder-banner[data-v-bee1d69f]{background-color:rgba(255,206,86,.2);border-left:4px solid #ffce56;padding:10px;margin-bottom:15px;border-radius:4px}.save-button-container[data-v-bee1d69f]{display:flex;gap:12px;justify-content:flex-end}.radio-group[data-v-bee1d69f]{display:flex;align-items:center}.error[data-v-136d27c5]{color:red;font-weight:700;font-style:italic;padding:10px}ion-label[data-v-136d27c5]{font-weight:700}ion-card[data-v-cdd3625b]{--background: white;box-shadow:0 2px 8px rgba(0,0,0,.1)}ion-item[data-v-cdd3625b]{--background: white}ion-accordion[data-v-cdd3625b]{--background: white}ion-accordion-group[data-v-cdd3625b]{--background: white}ion-card-content[data-v-cdd3625b]{--background: white;background-color:#fff}ion-card-title[data-v-cdd3625b]{font-size:1.5rem;font-weight:700;margin-bottom:4px}ion-row[data-v-cdd3625b]{display:flex;flex-wrap:nowrap;gap:1rem;align-items:center;width:100%}ion-col[data-v-cdd3625b]{margin-bottom:1rem;display:flex;flex-direction:column}ion-card-header[data-v-cdd3625b]{border-bottom:1px dotted #969696;margin-bottom:10px}.ion-accordion[data-v-cdd3625b]{overflow:visible!important}.ion-accordion-content[data-v-cdd3625b]{overflow:visible!important;z-index:1000}.ion-card[data-v-cdd3625b],.single-row-grid[data-v-cdd3625b]{overflow:visible!important}ion-accordion[slot=content][data-v-cdd3625b]{overflow:visible!important}.bold[data-v-cdd3625b]{font-style:normal;font-weight:600;font-size:16px;color:#00190e}.single-row-grid[data-v-cdd3625b]{width:100%;position:relative}.single-row-grid ion-row[data-v-cdd3625b]{flex-wrap:nowrap!important}.single-row-grid ion-col[size=auto][data-v-cdd3625b]{flex:0 0 auto;width:auto}.align-items-center[data-v-cdd3625b]{align-items:center!important}.labl-cls[data-v-cdd3625b]{margin:0 10px 10px 0;color:gray;font-size:17px;font-weight:600}.select-container[data-v-cdd3625b]{position:relative;border-radius:4px;overflow:visible;display:flex;align-items:center;padding:0;height:48px;z-index:1}ion-col[data-v-cdd3625b],ion-row[data-v-cdd3625b],.multiselect[data-v-cdd3625b]{overflow:visible!important;position:relative}.form-actions[data-v-cdd3625b]{display:flex;align-items:center;margin-top:24px}.chart-container[data-v-cdd3625b]{min-height:400px;width:100%;position:relative;display:flex;flex-direction:column}.chart-header[data-v-cdd3625b]{display:flex;justify-content:space-between;align-items:center;margin-bottom:1rem}.chart-container ion-label[data-v-cdd3625b]{font-size:17px;margin-top:0;margin-bottom:0;font-weight:500}.loading-container[data-v-cdd3625b]{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);display:flex;flex-direction:column;align-items:center;justify-content:center}.loading-spinner[data-v-cdd3625b]{width:40px;height:40px;border:4px solid rgba(0,0,0,.1);border-radius:50%;border-top:4px solid #3498db;animation:spin-cdd3625b 1s linear infinite;margin-bottom:10px}@keyframes spin-cdd3625b{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.chart-canvas-container[data-v-cdd3625b]{height:300px;width:100%;margin-bottom:20px}.chart-canvas-container canvas[data-v-cdd3625b]{width:100%!important;height:100%!important}.hidden[data-v-cdd3625b]{display:none}.empty-data-container[data-v-cdd3625b]{position:relative;margin:40px auto;text-align:center;color:#666;font-size:16px;background-color:#fff;padding:20px;border-radius:8px;box-shadow:0 2px 4px rgba(0,0,0,.1);width:80%;max-width:400px}.error-container[data-v-cdd3625b],.validation-error[data-v-cdd3625b]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:20px;background-color:rgba(255,0,0,.05);border-radius:8px;margin-bottom:20px}.error-container ion-icon[data-v-cdd3625b],.validation-error ion-icon[data-v-cdd3625b]{font-size:24px;margin-bottom:10px}.error-container p[data-v-cdd3625b],.validation-error p[data-v-cdd3625b]{color:var(--ion-color-danger);font-weight:500;text-align:center;margin:0}.save-button-container[data-v-cdd3625b]{margin-top:20px;display:flex;justify-content:flex-end;position:relative;z-index:10}.completed-badge[data-v-cdd3625b]{display:inline-flex;background-color:var(--ion-color-primary);color:#fff;font-size:12px;padding:2px 8px;border-radius:12px;margin-left:10px;font-weight:500;justify-content:space-around;align-content:center;align-items:center}.side-effects-row[data-v-cdd3625b]{justify-content:space-between;margin-bottom:1.5rem}.radio-group[data-v-cdd3625b]{display:flex;gap:1rem}.horizontal-radio-group[data-v-cdd3625b]{display:flex;flex-direction:row;gap:2rem;margin-top:.5rem}.radio-option[data-v-cdd3625b]{display:flex;align-items:center;gap:.5rem;margin-bottom:10px}.tb-treatment-section[data-v-cdd3625b]{margin-bottom:1.5rem}.radio-item[data-v-cdd3625b]{--min-height: 35px;--padding-start: 0;--inner-padding-end: 0;--background: transparent;--border-color: transparent;--inner-border-width: 0}.side-effects-options[data-v-cdd3625b]{margin-top:1rem}.category-tabs[data-v-cdd3625b]{margin-bottom:1.5rem}.side-effects-section[data-v-cdd3625b]{margin-top:2rem}.side-effects-section h4[data-v-cdd3625b]{margin-top:0;margin-bottom:1rem;font-weight:500;font-size:1.1rem}.medication-options[data-v-cdd3625b]{display:flex;flex-direction:column;gap:1.5rem}.medication-option[data-v-cdd3625b]{background-color:rgba(0,100,2,.035);border-radius:8px;padding:12px}ion-segment[data-v-cdd3625b]{--background: rgba(0, 100, 2, .034)}.medication-option h5[data-v-cdd3625b]{margin-top:0;margin-bottom:.5rem;font-weight:500;font-size:1rem;color:var(--ion-color-primary)}.tb-treatment-row[data-v-cdd3625b]{justify-content:space-between;margin-bottom:1.5rem}.tb-symptoms-section[data-v-cdd3625b]{margin-bottom:2rem}.tb-symptoms-section h4[data-v-cdd3625b]{margin-top:0;margin-bottom:1rem;font-weight:500;font-size:1.1rem}.screening-section[data-v-cdd3625b]{margin-bottom:2rem}.screening-section .form-row[data-v-cdd3625b]{margin-bottom:1.5rem}.tb-status-section[data-v-cdd3625b],.tb-history-section[data-v-cdd3625b]{margin-bottom:1.5rem;position:relative}.form-label[data-v-cdd3625b]{font-weight:500;margin-right:1rem;min-width:150px}.form-label.required[data-v-cdd3625b]:after{content:" *";color:#d32f2f}.accordion-title-container[data-v-cdd3625b]{display:flex;align-items:center;width:100%}.section-icon[data-v-cdd3625b]{display:flex;align-items:center;justify-content:center;margin-right:16px;margin-bottom:5px;font-size:20px;color:var(--ion-color-primary);background-color:rgba(0,100,2,.145);border-radius:5px;padding:10px;width:45px;height:45px}.section-icon ion-icon[data-v-cdd3625b]{font-size:25px;color:var(--ion-color-primary)}.section-icon svg[data-v-cdd3625b]{color:var(--ion-color-primary)}[data-v-cdd3625b] .multiselect__input,[data-v-cdd3625b] .multiselect__placeholder,[data-v-cdd3625b] .multiselect__single,[data-v-cdd3625b] .multiselect__option{font-size:16px!important;font-weight:600!important}[data-v-cdd3625b] .multiselect__content,[data-v-cdd3625b] .multiselect__element{display:block!important}ion-item[slot=header][data-v-cdd3625b]{font-size:20px;padding-top:25px;font-weight:600;--inner-padding-end: 0;--background: white;background-color:#fff}ion-accordion[disabled] ion-item[slot=header][data-v-cdd3625b]{opacity:.7}ion-accordion[disabled] .section-icon[data-v-cdd3625b]{background-color:rgba(0,100,2,.05)}.lab-investigations-list[data-v-cdd3625b]{margin-top:20px;border-top:1px solid #eee;padding-top:15px}.section-title[data-v-cdd3625b]{font-size:18px;font-weight:600;margin-bottom:15px;color:#333}.header-row[data-v-cdd3625b]{font-weight:600;border-bottom:1px solid #eee;padding-bottom:8px;margin-bottom:8px}.investigation-row[data-v-cdd3625b]{border-bottom:1px solid #f5f5f5;padding:10px 0;align-items:center}.investigation-row[data-v-cdd3625b]:hover{background-color:rgba(0,0,0,.02)}.action-buttons[data-v-cdd3625b]{display:flex;justify-content:flex-start;gap:5px}.table-responsive[data-v-cdd3625b]{width:100%;overflow-x:auto;margin-bottom:15px}.lab-table[data-v-cdd3625b]{width:100%;border-collapse:collapse;margin-bottom:0}.lab-table thead th[data-v-cdd3625b]{font-weight:600;padding:10px;border-bottom:1px solid #dee2e6;text-align:left}.lab-table tbody td[data-v-cdd3625b]{padding:10px;vertical-align:middle;border-bottom:1px solid #f5f5f5}.lab-table tbody tr[data-v-cdd3625b]:hover{background-color:rgba(0,0,0,.02)}\n/*$vite$:1*/',document.head.appendChild(a);const Ye=xe(t({__name:"ArtDrugTransferIn",emits:["canEnterTransferDrugs"],setup(e,{expose:a,emit:t}){const I=t,N=new _e,P=l({}),E=N.getID(),M=new Ae(N.getID(),-1),O=new ze(N.getID(),-1),F=l({isLoading:!1,canSubmit:!1,arv_drugs:[],is_transfer_in:!0,date_art_started:"",date_last_received_arvs:"",selected_arvs:[],drug_interval:""}),A={date_last_received_arvs:{label:"Last ARV Dispensation",required:()=>F.value.is_transfer_in,init:async()=>{F.value.is_transfer_in=await A.date_last_received_arvs.getTransferInStatus(),F.value.date_art_started=await A.date_last_received_arvs.getDateStartedArt(),I("canEnterTransferDrugs",F.value.is_transfer_in)},buildObs:()=>M.buildValueDate("Date drug received from previous facility",F.value.date_last_received_arvs),validation:()=>{const e=B("date_last_received_arvs");if(e){const e=T(F.value.date_last_received_arvs);return e.isBefore(T(F.value.date_art_started))?(P.value.date_last_received_arvs="Date last received ARVs cannot be before ART start date",!1):!e.isAfter(T(M.getDate()))||(P.value.date_last_received_arvs="Date last received ARVs cannot be after today",!1)}return e},getDateStartedArt:async()=>{const e=await Ae.getFirstValueDatetime(E,"Date ART started");return e?we.toStandardHisFormat(e):""},getTransferInStatus:async()=>{const e=await Ae.getFirstValueCoded(E,"Ever received ART"),a=await Ae.getFirstObs(E,"Has transfer letter"),t=a?we.toStandardHisFormat(a.obs_datetime):"";return e&&e.match(/yes/i)&&a&&`${a.value_coded}`.match(/yes/i)&&t===M.getDate()}},selected_arvs:{label:"Last ARV drugs dispensed",init:async()=>{F.value.arv_drugs=(await O.getARVs()).map(e=>({drug:e,name:e.name,pill_brought:null,dispensed_quantity:null,dispensed_quantity_error_id:`dispensed_quantity_error_${e.drug_id}`,pills_brought_error_id:`pills_brought_error_${e.drug_id}`}))},required:()=>F.value.is_transfer_in,buildObs:()=>F.value.selected_arvs.map(async e=>({...await M.buildObs("Drug received from previous facility",{value_drug:e.drug.drug_id,value_datetime:(O.setNextVisitInterval(F.value.drug_interval),O.calculateDateFromInterval()),value_numeric:e.dispensed_quantity}),child:[await M.buildObs("Number of tablets brought to clinic",{value_drug:e.drug.drug_id,value_numeric:e.pill_brought,value_datetime:F.value.date_last_received_arvs})]})),validation:()=>{const e=B("selected_arvs");let a=e;return e&&F.value.selected_arvs.forEach(e=>{P.value[e.dispensed_quantity_error_id]="",z(e.dispensed_quantity)||(P.value[e.dispensed_quantity_error_id]="A valid digit is required",a=!1),P.value[e.pills_brought_error_id]="",z(e.pill_brought)||(P.value[e.pills_brought_error_id]="A valid digit is required",a=!1)}),a}},drug_interval:{label:"Duration period for last received ARVs",required:()=>F.value.is_transfer_in,validation:()=>B("drug_interval"),options:()=>[{label:"2 weeks",value:14},{label:"1 month",value:28},{label:"2 months",value:56},{label:"3 months",value:84},{label:"4 months",value:112},{label:"5 months",value:140},{label:"6 months",value:168},{label:"7 months",value:196},{label:"8 months",value:224},{label:"9 months",value:252},{label:"10 months",value:280},{label:"11 months",value:308},{label:"12 months",value:336}]}};function z(e){return/^\d+$/i.test(`${e}`)}function B(e){P.value[e]="";const a=A[e],t="function"==typeof(null==a?void 0:a.required)&&a.required(),l="object"==typeof F.value[e]?Le.isEmpty(F.value[e]):Array.isArray(F.value[e])?0===F.value[e].length:0===`${F.value[e]}`.length;return t&&l?(P.value[e]="This field is required",!1):t}function L(e){return P.value[e]="","function"!=typeof A[e].validation||A[e].validation()}function q(e,a){L(e),Object.keys(A).forEach(t=>{var l;return(null===(l=A[t])||void 0===l?void 0:l.onFormUpdate)&&A[t].onFormUpdate(e,a)})}return n(()=>async function(){F.value.isLoading=!0,F.value.canSubmit=!1,await Promise.all(Object.keys(A).filter(e=>"function"==typeof A[e].init).map(e=>A[e].init())),F.value.isLoading=!1,F.value.canSubmit=!0}()),a({buildObs:function(){return Object.keys(A).reduce((e,a)=>{if(a in A&&"function"==typeof A[a].required&&A[a].required()&&"function"==typeof A[a].buildObs){const t=A[a].buildObs();return Array.isArray(t)?[...e,...t]:[...e,t]}return e},[])},validateAll:function(){return F.value.canSubmit?Object.keys(A).every(e=>L(e)):(ye("Please wait for all data to load before submitting"),!1)}}),(e,a)=>F.value.is_transfer_in?(o(),i(d(r),{key:1},{default:s(()=>[F.value.isLoading?(o(),i(d(m),{key:0,type:"indeterminate"})):p("",!0),c(d(v),null,{default:s(()=>[c(d(f),null,{default:s(()=>[c(d(g),null,{default:s(()=>[c(d(b),null,{default:s(()=>[c(d(h),{class:"form-label"},{default:s(()=>[_(y(A.date_last_received_arvs.label)+" ",1),a[6]||(a[6]=u("span",{style:{color:"red"}},"*",-1))]),_:1,__:[6]}),c(qe,{place_holder:"",date_prop:"",onDateUpDated:a[0]||(a[0]=e=>{F.value.date_last_received_arvs=e.value.standardDate,q("date_last_received_arvs",e.value.standardDate)}),error:!!P.value.date_last_received_arvs},null,8,["error"]),P.value.date_last_received_arvs?(o(),i(d(w),{key:0,color:"danger"},{default:s(()=>[_(y(P.value.date_last_received_arvs),1)]),_:1})):p("",!0)]),_:1})]),_:1}),c(d(g),null,{default:s(()=>[c(d(b),null,{default:s(()=>[c(d(h),{class:"form-label"},{default:s(()=>[_(y(A.selected_arvs.label)+" ",1),a[7]||(a[7]=u("span",{style:{color:"red"}},"*",-1))]),_:1,__:[7]}),c(d(x),{multiple:"",fill:"outline",modelValue:F.value.selected_arvs,"onUpdate:modelValue":a[1]||(a[1]=e=>F.value.selected_arvs=e),onIonChange:a[2]||(a[2]=e=>q("selected_arvs",e.detail.value)),interface:"popover",placeholder:"Select ARVs"},{default:s(()=>[(o(!0),k(D,null,C(F.value.arv_drugs,e=>(o(),i(d(S),{key:e,value:e},{default:s(()=>[_(y(e.name),1)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"]),P.value.selected_arvs?(o(),i(d(w),{key:0,class:"ion-text-center ion-padding",color:"danger"},{default:s(()=>[_(y(P.value.selected_arvs),1)]),_:1})):p("",!0)]),_:1}),c(d(b),null,{default:s(()=>[c(d(h),{class:"form-label"},{default:s(()=>[_(y(A.drug_interval.label)+" ",1),a[8]||(a[8]=u("span",{style:{color:"red"}},"*",-1))]),_:1,__:[8]}),c(d(x),{fill:"outline",modelValue:F.value.drug_interval,"onUpdate:modelValue":a[3]||(a[3]=e=>F.value.drug_interval=e),onIonChange:a[4]||(a[4]=e=>q("drug_interval",e.detail.value)),interface:"popover",placeholder:"Select duration"},{default:s(()=>[(o(!0),k(D,null,C(A.drug_interval.options(),e=>(o(),i(d(S),{key:e.value,value:e.value},{default:s(()=>[_(y(e.label),1)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"]),P.value.drug_interval?(o(),i(d(w),{key:0,color:"danger"},{default:s(()=>[_(y(P.value.drug_interval),1)]),_:1})):p("",!0)]),_:1})]),_:1})]),_:1}),F.value.selected_arvs.length?(o(),i(d(r),{key:0,class:"ion-padding"},{default:s(()=>[c(d(v),null,{default:s(()=>[(o(!0),k(D,null,C(F.value.selected_arvs,e=>(o(),i(d(f),{key:e.drug.drug_id},{default:s(()=>[c(d(g),null,{default:s(()=>[c(d(b),null,{default:s(()=>[c(d(h),{class:"form-label"},{default:s(()=>[_(y(e.name)+" ",1),a[9]||(a[9]=u("span",{style:{color:"red"}},"*",-1))]),_:2,__:[9]},1024)]),_:2},1024)]),_:2},1024),c(d(g),null,{default:s(()=>[c(d(b),null,{default:s(()=>[c(d(h),{class:"form-label"},{default:s(()=>a[10]||(a[10]=[_(" Given Amount "),u("span",{style:{color:"red"}},"*",-1)])),_:1,__:[10]}),c(d(V),{onIonInput:a=>q("selected_arvs",e),modelValue:e.dispensed_quantity,"onUpdate:modelValue":a=>e.dispensed_quantity=a,placeholder:"Enter amount",fill:"outline",type:"number"},null,8,["onIonInput","modelValue","onUpdate:modelValue"]),P.value[e.dispensed_quantity_error_id]?(o(),i(d(w),{key:0,color:"danger"},{default:s(()=>[_(y(P.value[e.dispensed_quantity_error_id]),1)]),_:2},1024)):p("",!0)]),_:2},1024),c(d(b),null,{default:s(()=>[c(d(h),{class:"form-label"},{default:s(()=>a[11]||(a[11]=[_(" Pill brought "),u("span",{style:{color:"red"}},"*",-1)])),_:1,__:[11]}),c(d(V),{onIonInput:a=>q("selected_arvs",e),modelValue:e.pill_brought,"onUpdate:modelValue":a=>e.pill_brought=a,placeholder:"Enter amount",type:"number",fill:"outline"},null,8,["onIonInput","modelValue","onUpdate:modelValue"]),P.value[e.pills_brought_error_id]?(o(),i(d(w),{key:0,color:"danger"},{default:s(()=>[_(y(P.value[e.pills_brought_error_id]),1)]),_:2},1024)):p("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})):p("",!0)]),_:1})]),_:1})):(o(),i(d(r),{key:0},{default:s(()=>[c(d(v),null,{default:s(()=>a[5]||(a[5]=[u("h1",{class:"ion-text-center ion-padding"},"Client is not a transfer in",-1)])),_:1,__:[5]})]),_:1}))}}),[["__scopeId","data-v-ed3faab3"]]),Qe=[{category:"contraindication",concept_id:821,name:"Peripheral neuropathy"},{category:"contraindication",concept_id:215,name:"Jaundice"},{category:"contraindication",concept_id:2148,name:"Lipodystrophy"},{category:"contraindication",concept_id:9242,name:"Kidney Failure"},{category:"contraindication",concept_id:219,name:"Psychosis"},{category:"contraindication",concept_id:9440,name:"Gynaecomastia"},{category:"contraindication",concept_id:3,name:"Anemia"},{category:"contraindication",concept_id:512,name:"Skin rash"},{category:"contraindication",concept_id:867,name:"Insomnia"},{category:"side_effect",concept_id:6029,name:"Night sweats"},{category:"side_effect",concept_id:5945,name:"Fever"},{category:"side_effect",concept_id:5980,name:"Vomiting"},{category:"side_effect",concept_id:877,name:"Dizziness"},{category:"side_effect",concept_id:620,name:"Headache"},{category:"side_effect",concept_id:5978,name:"Nausea"},{category:"side_effect",concept_id:1458,name:"Lactic acidosis"},{category:"side_effect",concept_id:107,name:"Cough"},{category:"side_effect",concept_id:1773,name:"Heavy alcohol use"},{category:"side_effect",concept_id:8260,name:"Weight loss / Failure to thrive / malnutrition"}],Ge=t({__name:"SideEffectModal",props:{isOpen:{type:Boolean},sideEffect:{},currentReason:{}},emits:["update","close"],setup(e,{emit:a}){const t=e,r=a,{medications:m,isLoading:f}=(()=>{const e=l([]),a=l(!1),t=l(null),i=async()=>{a.value=!0,t.value=null;try{var l,n;const a=Ve(),t=null===(l=Te().patient)||void 0===l?void 0:l.patient_id,i=parseInt(a.getUserId()||"-1"),o=(null===(n=a.getfacilityLocation())||void 0===n?void 0:n.code)||"";if(!o)throw new Error("Location ID not found");const d=new Ae(t,i,o),r=await d.getCurrentMedications();if(r&&"object"==typeof r){const a=Object.values(r).map(e=>{const a=e;return{drug_id:a.drug_inventory_id,drug_name:a.dosage_struct.drug_name,dose:a.dose.source,units:a.units,frequency:a.frequency,start_date:a.order.start_date,end_date:a.order.auto_expire_date,quantity:a.quantity}});e.value=a}else e.value=[]}catch(i){console.error("Error loading current medications:",i),t.value=i instanceof Error?i.message:"Failed to load medications",ke("Failed to load current medications")}finally{a.value=!1}};return n(()=>{i(),0===e.value.length&&(e.value=[{drug_id:1,drug_name:"Tenofovir 300mg",dose:"1 tablet",units:"tablet",frequency:"Once daily",start_date:"2023-01-01"},{drug_id:2,drug_name:"Lamivudine 150mg",dose:"1 tablet",units:"tablet",frequency:"Twice daily",start_date:"2023-01-01"},{drug_id:3,drug_name:"Efavirenz 600mg",dose:"1 tablet",units:"tablet",frequency:"Once daily",start_date:"2023-01-01"}])}),{medications:e,isLoading:a,error:t,loadCurrentMedications:i}})(),g=l("no"),b=l([]),w=l(void 0);n(()=>{x()});const x=()=>{b.value=[],w.value=void 0,t.currentReason?"number"==typeof t.currentReason||"drug_side_effect"===t.currentReason||Array.isArray(t.currentReason)?(g.value="yes",Array.isArray(t.currentReason)&&t.currentReason.length>0?b.value=[...t.currentReason]:"drug_side_effect"!==t.currentReason&&(b.value=[t.currentReason])):(g.value="no",w.value=t.currentReason):(g.value="no",w.value="other_not_drug_related")},S=e=>{g.value=e.detail.value,"yes"===g.value?(b.value=[],w.value=void 0):(b.value=[],w.value="other_not_drug_related")},V=(e,a)=>{const t=a.detail.checked;t&&!b.value.includes(e)?b.value.push(e):t||(b.value=b.value.filter(a=>a!==e))},T=I(()=>{let e=[];return b.value.length>0&&b.value.map(a=>{t.sideEffect&&e.push((async(e,a)=>({concept_id:Ie.getCachedConceptID("Drug induced",!0),value_coded:e.concept_id,value_text:"no"==g.value?"Past medication history":null,value_drug:"yes"==g.value?a:null}))(t.sideEffect,Number(a)))}),e}),$=()=>{g.value="no",b.value=[],w.value="other_not_drug_related",r("close")},W=()=>{t.sideEffect&&(r("update",{id:t.sideEffect.id,reason:T.value}),$())};return(e,a)=>(o(),i(d(N),{"is-open":e.isOpen,onDidDismiss:$},{default:s(()=>[c(d(P),null,{default:s(()=>[c(d(E),null,{default:s(()=>[a[4]||(a[4]=u("div",{slot:"start",class:"ion-padding"},[u("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},[u("g",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"1.5"},[u("path",{d:"M6.01 16.607a3.495 3.495 0 1 0 0-6.99a3.495 3.495 0 0 0 0 6.99m5.242 6.616a5.243 5.243 0 0 0-10.485 0m20.968-7.821V3.751a2.996 2.996 0 1 0-5.991 0v11.651a4.493 4.493 0 1 0 5.991 0M18.74 5.249v11.983"}),u("path",{d:"M18.74 20.227a1.498 1.498 0 1 0 0-2.995a1.498 1.498 0 0 0 0 2.995M2.014 7.745a2.47 2.47 0 0 1 0-3.495a2.47 2.47 0 0 0 0-3.495m3.721 6.99a2.47 2.47 0 0 1 0-3.495a2.47 2.47 0 0 0 0-3.495m3.995 6.99a2.47 2.47 0 0 1 0-3.495a2.473 2.473 0 0 0 0-3.495"})])])],-1)),c(d(M),null,{default:s(()=>{var a;return[_(y((null===(a=e.sideEffect)||void 0===a?void 0:a.label)||"Side Effect Details"),1)]}),_:1}),c(d(O),{slot:"end"},{default:s(()=>[c(d(F),{onClick:a[0]||(a[0]=e=>r("close"))},{default:s(()=>[c(d(A),{icon:d(z)},null,8,["icon"])]),_:1})]),_:1})]),_:1,__:[4]})]),_:1}),c(d(v),{class:"ion-padding"},{default:s(()=>[c(d(B),null,{default:s(()=>[c(d(L),null,{default:s(()=>[c(d(h),null,{default:s(()=>a[5]||(a[5]=[_("Is this drug-induced?")])),_:1,__:[5]})]),_:1}),c(d(q),{modelValue:g.value,"onUpdate:modelValue":a[1]||(a[1]=e=>g.value=e),onIonChange:S},{default:s(()=>[c(d(L),null,{default:s(()=>[c(d(R),{value:"yes"},{default:s(()=>a[6]||(a[6]=[_("Yes")])),_:1,__:[6]})]),_:1}),c(d(L),null,{default:s(()=>[c(d(R),{value:"no"},{default:s(()=>a[7]||(a[7]=[_("No")])),_:1,__:[7]})]),_:1})]),_:1},8,["modelValue"]),"yes"===g.value?(o(),k(D,{key:0},[c(d(L),null,{default:s(()=>[c(d(h),null,{default:s(()=>a[8]||(a[8]=[_("Select medications:")])),_:1,__:[8]})]),_:1}),d(f)?(o(),i(d(H),{key:0,name:"crescent"})):0===d(m).length?(o(),i(d(L),{key:1},{default:s(()=>[c(d(h),null,{default:s(()=>a[9]||(a[9]=[_("No medications found")])),_:1,__:[9]})]),_:1})):(o(!0),k(D,{key:2},C(d(m),e=>(o(),i(d(L),{key:e.drug_id},{default:s(()=>[c(d(U),{value:e.drug_id,checked:b.value.includes(e.drug_id),onIonChange:a=>V(e.drug_id,a)},null,8,["value","checked","onIonChange"]),c(d(h),{class:"ion-padding-start"},{default:s(()=>[_(y(e.drug_name),1)]),_:2},1024)]),_:2},1024))),128)),c(d(L),null,{default:s(()=>[c(d(U),{value:"drug_side_effect",checked:b.value.includes("drug_side_effect"),onIonChange:a[2]||(a[2]=e=>V("drug_side_effect",e))},null,8,["checked"]),c(d(h),{class:"ion-padding-start"},{default:s(()=>a[10]||(a[10]=[_("Drug side effect (unspecified)")])),_:1,__:[10]})]),_:1})],64)):p("",!0),"no"===g.value?(o(),k(D,{key:1},[c(d(L),null,{default:s(()=>[c(d(h),null,{default:s(()=>a[11]||(a[11]=[_("Reason:")])),_:1,__:[11]})]),_:1}),c(d(L),null,{default:s(()=>[c(d(R),{value:"other_not_drug_related",checked:"other_not_drug_related"===w.value,onIonChange:a[3]||(a[3]=e=>{return a="other_not_drug_related",void(w.value=a);var a})},null,8,["checked"]),c(d(h),{class:"ion-padding-start"},{default:s(()=>a[12]||(a[12]=[_("Other not drug related")])),_:1,__:[12]})]),_:1})],64)):p("",!0)]),_:1})]),_:1}),c(d(j),null,{default:s(()=>[c(d(E),{color:"light"},{default:s(()=>[c(d(O),{slot:"end"},{default:s(()=>[c(d(F),{onClick:W,color:"primary"},{default:s(()=>a[13]||(a[13]=[_("Save")])),_:1,__:[13]})]),_:1})]),_:1})]),_:1})]),_:1},8,["is-open"]))}}),Ze={class:"side-effects-grid"},Xe={class:"checkbox-container"},Je={class:"checkbox-label"},Ke={key:0,class:"reason-summary"},ea={class:"reason-label"},aa={key:0,class:"drug-induced"},ta={key:1,class:"not-drug-induced"},la=xe(t({__name:"SideEffectsCheckboxes",props:{modelValue:{},sideEffectOptions:{}},emits:["update:modelValue"],setup(e,{emit:a}){const t=e,n=a,i=l(!1),r=l(null),v=l(void 0),m=e=>{var a;const l=null===(a=t.modelValue[e])||void 0===a?void 0:a.reason;return"number"==typeof l||"drug_side_effect"===l||Array.isArray(l)&&l.length>0?"yes":"no"},f=e=>{var a;r.value=e,v.value=null===(a=t.modelValue[e.id])||void 0===a?void 0:a.reason,i.value=!0},g=()=>{i.value=!1,r.value=null},b=e=>{const a={...t.modelValue};a[e.id]&&(a[e.id]={...a[e.id],reason:e.reason},n("update:modelValue",a))};return(e,a)=>(o(),k(D,null,[u("div",Ze,[(o(!0),k(D,null,C(e.sideEffectOptions,l=>{var i,r;return o(),k("div",{key:l.id,class:"side-effect-item"},[u("div",Xe,[c(d(U),{value:l.id,checked:null===(i=e.modelValue[l.id])||void 0===i?void 0:i.selected,onIonChange:e=>((e,a)=>{const l=a.detail.checked,i={...t.modelValue};var o;l?(i[e.id]={selected:!0,reason:"other_not_drug_related"},n("update:modelValue",i),f(e)):(i[e.id]={selected:!1,reason:null===(o=i[e.id])||void 0===o?void 0:o.reason},n("update:modelValue",i))})(l,e)},null,8,["value","checked","onIonChange"]),u("span",Je,y(l.label),1)]),null!==(r=e.modelValue[l.id])&&void 0!==r&&r.selected?(o(),k("div",Ke,[u("div",ea,["yes"===m(l.id)?(o(),k("span",aa,"Drug-induced")):(o(),k("span",ta,"Not drug-induced"))]),c(d(F),{fill:"clear",size:"small",class:"edit-button",onClick:e=>f(l)},{default:s(()=>[a[0]||(a[0]=_(" Edit ")),c(d(A),{slot:"end",icon:d($)},null,8,["icon"])]),_:2,__:[0]},1032,["onClick"])])):p("",!0)])}),128))]),c(Ge,{"is-open":i.value,"side-effect":r.value,"current-reason":v.value,onUpdate:b,onClose:g},null,8,["is-open","side-effect","current-reason"])],64))}}),[["__scopeId","data-v-9c8f6d00"]]),na={class:"tb-symptoms-grid"},ia={class:"checkbox-label"},oa=xe(t({__name:"TBSymptomsCheckboxes",props:{modelValue:{},tbSymptomOptions:{}},emits:["update:modelValue"],setup(e,{emit:a}){const t=e,l=a,n=()=>{l("update:modelValue",t.modelValue)};return(e,a)=>(o(),k("div",na,[(o(!0),k(D,null,C(e.tbSymptomOptions,a=>(o(),k("div",{key:a.id,class:"checkbox-option"},[c(d(U),{modelValue:e.modelValue[a.id],"onUpdate:modelValue":[t=>e.modelValue[a.id]=t,n],value:a.label},null,8,["modelValue","onUpdate:modelValue","value"]),u("span",ia,y(a.label),1)]))),128))]))}}),[["__scopeId","data-v-d67e9ce3"]]),da=(e,a)=>{const t=new Date;return{Months:()=>t.setMonth(t.getMonth()-e),Weeks:()=>t.setDate(t.getDate()-7*e),Days:()=>t.setDate(t.getDate()-e)}[a](),{day:t.getDate().toString().padStart(2,"0"),month:(t.getMonth()+1).toString().padStart(2,"0"),year:t.getFullYear().toString()}},ra=()=>{const e=l("Unknown"),a=l(),t=l("3"),n=l(!1),i=l(!1),o=l(["Months","Weeks","Days"]),d=l("0"),r=l({name:"Months"}),s=l([{label:"Yes",value:"Yes"},{label:"No",value:"No"},{label:"Unknown",value:"Unknown"}]),c=l(["TB NOT suspected","TB Suspected","Confirmed TB Not on treatment"]),u=I(()=>{let a=[];return/no/i.test(e.value.toLowerCase())&&(a=["Currently on IPT","Currently on 3HP (RFP + INH)","Currently on INH 300 / RFP 300 (3HP)"]),a=a.concat(["Complete course of 3HP in the past (3 months RFP+INH)","Complete course of IPT in the past (min. 6 months of INH)","Aborted course of 3HP (RFP + INH) in the past","Aborted course of INH 300 / RFP 300 (3HP) in the past","Aborted course of IPT in the past","Never taken IPT or 3HP"]),a});W([d,r],([e,t])=>{if(e||t){const t=da(Number(e),r.value.name);a.value=t}});const v=e=>{const a="Molecular WHO Recommended Rapid Diagnostic Test";return"normal"!==e[a].toLowerCase()&&("abnormal"===e["Chest X-ray"].toLowerCase()||"positive"===e[a].toLowerCase())},p=e=>Object.values(e).some(e=>e);return{tbTherapyStatus:e,tbTreatmentStartDate:a,tbTreatmentPeriod:t,onTBTreatmentOptions:s,tbStatusOptions:c,tbEstimatePeriods:o,selectedEstimatePeriod:r,showEstimator:i,tbStartEstimate:d,startDateEstimator:da,showTBStatus:(e,a)=>Object.values(e).every(e=>"unknown"===e.toLowerCase())?p(a):v(e),tptHistoryOptions:u,buildTBTreatmentPayload:async(l,n=53,o,d,r)=>{const s=new Ue(l,n,o,d),c=await s.buildValueCoded("TB treatment",e.value);let u=null;r.history&&"string"==typeof r.history&&""!==r.history.trim()&&(u=await((e,a)=>a.buildValueText("TB Treatment History",e))(r.history,s));const m=await(async(a,t,l,n)=>{let i="TB NOT suspected";return"Yes"===e.value?i="Confirmed TB on treatment":a&&""!==a.trim()?i=a:t&&Object.keys(t).length>0?v(t)&&(i="TB Suspected"):l&&Object.keys(l).length>0&&p(l)&&(i="TB Suspected"),n.buildValueCoded("TB Status",i)})(r.status,r.methods,r.symptoms,s),f=[c,m];if(u&&f.push(u),"Yes"===e.value){const e=await(async e=>{var l,n,o;const d=`${null===(l=a.value)||void 0===l?void 0:l.year}-${null===(n=a.value)||void 0===n?void 0:n.month}-${null===(o=a.value)||void 0===o?void 0:o.day}`;return[i.value?await e.buildValueDateEstimated("TB treatment start date",we.toStandardHisFormat(d)):await e.buildValueDate("TB treatment start date",we.toStandardHisFormat(d)),await e.buildValueNumber("TB treatment period",Number(t.value))]})(s);f.push(...e)}else{const e=await Promise.all(await(async(e,a)=>{const t=Object.entries(e).map(async([e,t])=>({...await a.buildValueCoded("TB screening method used",e),child:[await a.buildValueCoded(e,t)]}));return Promise.all(t)})(r.methods,s)),a=await Promise.all(await(async(e,a)=>{const t=Object.entries(e).map(async([e,t])=>({...await a.buildValueCoded("Routine TB Screening",e),child:[await a.buildValueCoded(e,t?"Yes":"No")]}));return Promise.all(t)})(r.symptoms,s));f.push(...e,...a)}return f.filter(e=>e&&Object.keys(e).length>0)},submitTBTherapy:n}},sa=()=>{const e=Y({selectedMethods:[],availableMethods:[]}),a=l(!1),t=l(!1),n=l([]),i=()=>{const a=new Ae(0,0).getFamilyPlanningMethods();e.availableMethods=a.map(e=>({label:e,value:e,isChecked:!1,disabled:!1}))},o=()=>(n.value=[],0===e.selectedMethods.length&&n.value.push("At least one contraceptive method must be selected."),0===n.value.length),d=async(a,t,l)=>{const n=new Ue(a,53,t,l),i=[];for(const o of e.selectedMethods){const e=await n.buildValueCoded("Method of family planning",o);i.push(e)}return i},r=I(()=>e.selectedMethods.length>0),s=I(()=>0===e.selectedMethods.length?"None selected":e.selectedMethods.includes("NONE")?"None":e.selectedMethods.join(", "));return i(),{contraceptiveData:e,isContraceptivesLoading:a,isContraceptivesSaved:t,validationErrors:n,hasSelectedMethods:r,selectedMethodsText:s,validateContraceptives:o,toggleMethod:a=>{const t=new Ae(0,0);if("NONE"===a)e.selectedMethods=["NONE"],e.availableMethods=e.availableMethods.map(e=>({...e,isChecked:"NONE"===e.value,disabled:!1}));else{e.selectedMethods.includes("NONE")&&(e.selectedMethods=[]);const l=e.selectedMethods.indexOf(a);if(l>-1?e.selectedMethods.splice(l,1):e.selectedMethods.push(a),e.selectedMethods.length>0){const a=e.selectedMethods[0],l=t.familyPlanningMethods(a,e.availableMethods);e.availableMethods=l}else e.availableMethods=e.availableMethods.map(e=>({...e,disabled:!1}));e.availableMethods=e.availableMethods.map(a=>({...a,isChecked:e.selectedMethods.includes(a.value)}))}},saveContraceptives:async(e,l,i)=>{if(!o())return console.error("Validation failed:",n.value),ke("Please select at least one contraceptive method"),!1;a.value=!0;try{const a=await d(e,l,i);if(a.length>0){const n=new Ue(e,53,l,i);return await n.saveObservationList(a),console.info("Contraceptive methods saved:",a),t.value=!0,!0}return console.warn("No contraceptive observations to save"),ke("No contraceptive methods to save"),!1}catch(r){return console.error("Error saving contraceptive data:",r),ke("Failed to save contraceptive methods"),!1}finally{a.value=!1}},initializeContraceptiveMethods:i,buildContraceptiveObs:d}},ca={class:"contraceptives-section"},ua={key:0,class:"selected-methods"},va={key:1,class:"selected-methods"},pa={class:"method-tag none-tag"},ma={class:"methods-list"},fa={key:2,class:"validation-errors"},ga={class:"action-buttons"},ba=xe(t({__name:"ContraceptivesSection",props:{patientID:{default:0},providerID:{default:-1},locationID:{default:""}},emits:["onSuccess"],setup(e,{expose:a,emit:t}){const l=e,n=t,i=Ve(),r=Te(),{patient:v}=Q(r),m=I(()=>{var e;return l.patientID||(null===(e=v.value)||void 0===e?void 0:e.patientID)||0}),f=I(()=>{var e;return-1!==l.providerID?l.providerID:null!==(e=Ne.getUserID())&&void 0!==e?e:-1}),g=I(()=>{var e;return l.locationID||(null===(e=i.getfacilityLocation())||void 0===e?void 0:e.code)||""}),{contraceptiveData:b,isContraceptivesLoading:h,isContraceptivesSaved:w,validationErrors:x,hasSelectedMethods:S,validateContraceptives:V,toggleMethod:T,saveContraceptives:N}=sa(),P=()=>{b.selectedMethods=[],b.availableMethods=b.availableMethods.map(e=>({...e,isChecked:!1,disabled:!1}))},E=async()=>{await N(m.value,f.value,g.value)&&n("onSuccess",!0)};return a({saveContraceptives:E,validateContraceptives:V,isContraceptivesSaved:w}),(e,a)=>(o(),k("div",ca,[d(S)&&!d(b).selectedMethods.includes("NONE")?(o(),k("div",ua,[(o(!0),k(D,null,C(d(b).selectedMethods,e=>(o(),k("div",{class:"method-tag",key:e},[_(y(e)+" ",1),c(d(A),{icon:d(z),onClick:a=>d(T)(e),class:"remove-icon"},null,8,["icon","onClick"])]))),128))])):p("",!0),d(b).selectedMethods.includes("NONE")?(o(),k("div",va,[u("div",pa,[a[1]||(a[1]=_(" NONE ")),c(d(A),{icon:d(z),onClick:a[0]||(a[0]=e=>d(T)("NONE")),class:"remove-icon"},null,8,["icon"])])])):p("",!0),u("div",ma,[(o(!0),k(D,null,C(d(b).availableMethods,e=>(o(),k("div",{key:e.value,class:G(["method-item",{disabled:e.disabled}])},[c(d(U),{checked:e.isChecked,disabled:e.disabled,onIonChange:a=>d(T)(e.value),labelPlacement:"end"},{default:s(()=>[_(y(e.label),1)]),_:2},1032,["checked","disabled","onIonChange"])],2))),128))]),d(x).length>0?(o(),k("div",fa,[(o(!0),k(D,null,C(d(x),e=>(o(),k("div",{key:e,class:"error-message"},y(e),1))),128))])):p("",!0),u("div",ga,[c(d(F),{color:"medium",fill:"outline",onClick:P,disabled:0==d(b).selectedMethods.length},{default:s(()=>a[2]||(a[2]=[_(" Clear ")])),_:1,__:[2]},8,["disabled"]),c(d(F),{color:"primary",onClick:E,disabled:d(h)||!d(S),loading:!0},{default:s(()=>a[3]||(a[3]=[_(" Save ")])),_:1,__:[3]},8,["disabled"])])]))}}),[["__scopeId","data-v-9a45c4b4"]]);class ha extends Ue{constructor(e,a){super(e,13,a)}async buildDefferedOrder(e){return[{concept_id:await Ue.getConceptID("HIV viral load"),value_text:"Wait till next milestone",value_coded:await Ue.getConceptID("Delayed milestones"),value_numeric:e}]}}const _a={key:0},ya={key:0,class:"info-container"},wa={class:"info-card"},xa={class:"main-message"},ka={class:"message-content"},Ca={class:"info-list"},Sa=xe(t({__name:"vl-info-alert",props:{patientID:{}},setup(e){const a=e,t=l(!0),r=l(null),v=l(!1),m=async()=>{if(await Pe("Are you sure you want to wait till next milestone?")){const e=new ha(a.patientID,-1),l=await e.createEncounter(),n=await e.buildDefferedOrder(null);if(!l)return ye("Unable to create encounter");const i=await e.saveObservationList(n);t.value=!i}},f=async()=>{await Pe("Are you sure you want to remind me later?")&&(t.value=!1)},g=async()=>{await Pe("Are you sure you want to close this milestone notification?")&&(t.value=!1)},b=e=>e?T(e).format("DD MMM, YYYY"):"N/A";return n(()=>{(async()=>{try{if(v.value=await Ee.VLEnabled(),!v.value)return;const e=await Me.getPatientVLInfo(a.patientID);r.value=e}catch(e){console.error("Error fetching VL data:",e)}})()}),(e,a)=>{var l,n;return v.value?(o(),k("div",_a,[t.value&&null!==(l=r.value)&&void 0!==l&&l.eligibile&&!r.value.skip_milestone?(o(),k("div",ya,[u("div",wa,[u("button",{class:"close-button",onClick:g,"aria-label":"Close notification"},a[0]||(a[0]=[u("svg",{class:"close-icon",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[u("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),u("line",{x1:"6",y1:"6",x2:"18",y2:"18"})],-1)])),u("div",xa,[a[10]||(a[10]=u("svg",{class:"info-icon",xmlns:"http://www.w3.org/2000/svg",width:"32",height:"32",viewBox:"0 0 32 32"},[u("path",{fill:"currentColor",d:"M24.586 6.586A2 2 0 0 0 23.17 6H16V2h-2v4H6a2.003 2.003 0 0 0-2 2v6a2.003 2.003 0 0 0 2 2h8v14h2V16h7.171a2 2 0 0 0 1.415-.586L29 11ZM23.17 14H6V8h17.172l3 3Z"})],-1)),u("div",ka,[a[9]||(a[9]=u("h2",null,"VL milestone has been reached",-1)),u("ul",Ca,[u("li",null,[a[1]||(a[1]=_("Patient has been on ART for ")),u("b",null,y(r.value.period_on_art),1),a[2]||(a[2]=_(" months"))]),u("li",null,[a[3]||(a[3]=_("Treatment started on ")),u("b",null,y(b(r.value.earliest_start_date)),1)]),u("li",null,[a[4]||(a[4]=_("Current regimen: ")),u("b",null,y(r.value.current_regimen.name),1),a[5]||(a[5]=_(" since ")),u("b",null,y(b(r.value.current_regimen.date_started)),1)]),u("li",null,[a[6]||(a[6]=_("Last VL order date: ")),u("b",null,y(b(null===(n=r.value)||void 0===n?void 0:n.last_order_date)),1)])]),u("div",null,[c(d(F),{class:"ion-padding",onClick:m,color:"primary",fill:"outline",size:"small"},{default:s(()=>a[7]||(a[7]=[_(" Wait till next milestone ")])),_:1,__:[7]}),c(d(F),{class:"ion-padding",onClick:f,color:"primary",fill:"outline",size:"small"},{default:s(()=>a[8]||(a[8]=[_(" Remind me later ")])),_:1,__:[8]})])])])])])):(o(),i(d(L),{key:1,lines:"none"},{default:s(()=>[c(d(A),{style:{"font-size":"1.3rem"},slot:"end",size:"large",icon:d(Z)},null,8,["icon"]),c(d(h),{style:{"font-size":"1.2rem"},slot:"end"},{default:s(()=>{var e;return[_(y(null===(e=r.value)||void 0===e?void 0:e.message),1)]}),_:1})]),_:1}))])):p("",!0)}}}),[["__scopeId","data-v-c9803869"]]),Da=t({name:"CervicalCancerSection",components:{IonRow:g,IonCol:b,IonLabel:h,IonRadioGroup:q,IonRadio:R,IonButton:F,IonSpinner:H,IonSelect:x,IonSelectOption:S,IonText:K,IonDatetimeButton:J,IonDatetime:X,IonModal:N,IonCheckbox:U,DatePicker:qe,BasicInputChangeUnits:Oe},props:{providerID:{type:Number,required:!0},locationID:{type:String,required:!0}},setup(e,{emit:a}){const t=l(!0),i=l(!1),o=l(""),d=l(""),r=l(""),s=l(!1),c=l(!0),u=l(!1),v=l(0),p=l(0),m=l(!1),f=l(!1),g=l(""),b=l(""),h=l(!1),_=new _e,y=new Ae(_.patient.patient_id,e.providerID,e.locationID),w=l({name:"Months"}),x=l(["Months","Weeks","Days"]),k=l(""),C=I(()=>T().format("YYYY-MM-DD")),S=I(()=>"1900-01-01"),D=l([{label:"Not due for screening",value:"Not due for screening"},{label:"Hysterectomy",value:"Hysterectomy"},{label:"Patient refused",value:"Patient refused"},{label:"Other",value:"Other"}]),V=I(()=>!(""===o.value||"No"===o.value&&""===d.value||"Not due for screening"===d.value&&""===r.value));return n(()=>{(async()=>{try{if(t.value=!0,"F"===_.patient.gender&&(u.value=await Ee.cervicalCancerScreeningEnabled(),u.value)){const{start:e,end:a}=await Ee.cervicalCancerScreeningAgeBounds();v.value=a,p.value=e,m.value=await y.clientDueForCxCa(),f.value=await y.clientHasHadAHysterectomy(),g.value=await _.patient.nextAppointment(24);const t=30;h.value=t>we.dateDiffInDays(g.value,y.date)}}catch(e){console.error("Error initializing cervical cancer data:",e)}finally{t.value=!1}})()}),W([b,w],([e,a])=>{if(e||a){const a=da(Number(e),w.value.name);k.value=a,r.value=(t=Number(a.day),l=Number(a.month),n=Number(a.year),new Date(n,l-1,t).toLocaleDateString("en-US",{weekday:"long",month:"short",day:"numeric",year:"numeric"})),s.value=!0}var t,l,n}),{loading:t,isCxCaSaved:i,offerCxca:o,reasonForNoCxca:d,previousCxcaTestDate:r,isEstimated:s,showEstimateFields:c,reasonsForNoCxcaOptions:D,isFormValid:V,cxcaAppointDate:g,showReminder:h,maxDate:C,minDate:S,alertCircleOutline:ee,selectedEstimatePeriod:w,estimatePeriods:x,estimatedValue:b,dateProp:k,formatDate:e=>we.toStandardHisDisplayFormat(e),saveCxcaData:async()=>{try{if(!V.value)return;const e=[];e.push(y.buildValueCoded("Offer CxCa",o.value)),"No"===o.value&&(e.push(y.buildValueCoded("Reason for NOT offering CxCa",d.value)),"Not due for screening"===d.value&&r.value&&(s.value?e.push(y.buildValueDateEstimated("CxCa test date",r.value)):e.push(y.buildValueDate("CxCa test date",r.value)))),i.value=!0,a("onSuccess",{obs:e,isCxCaSaved:i.value})}catch(e){console.error("Error saving cervical cancer data:",e)}}}}}),Va={class:"cervical-cancer-container"},Ta={key:0,class:"loading-container"},Ia={key:1},Na={key:0,class:"reminder-banner"},Pa={class:"radio-group"},Ea={key:1},Ma={key:0},Oa={class:"save-button-container"},Fa=xe(Da,[["render",function(e,a,t,l,n,d){const r=ae("ion-spinner"),v=ae("ion-icon"),m=ae("ion-text"),f=ae("ion-label"),g=ae("ion-col"),b=ae("ion-radio"),h=ae("ion-radio-group"),w=ae("ion-row"),x=ae("ion-select-option"),S=ae("ion-select"),V=ae("DatePicker"),T=ae("BasicInputChangeUnits"),I=ae("ion-button");return o(),k("div",Va,[e.loading?(o(),k("div",Ta,[c(r,{name:"bubbles"}),a[6]||(a[6]=u("p",null,"Loading cervical cancer screening data...",-1))])):(o(),k("div",Ia,[e.showReminder?(o(),k("div",Na,[c(m,{color:"warning"},{default:s(()=>[u("p",null,[c(v,{icon:e.alertCircleOutline},null,8,["icon"]),_(" Patient is due for Cervical Cancer Screening on "+y(e.formatDate(e.cxcaAppointDate)),1)])]),_:1})])):p("",!0),c(w,null,{default:s(()=>[c(g,null,{default:s(()=>[c(f,null,{default:s(()=>a[7]||(a[7]=[_("Offer Cervical Cancer Screening")])),_:1,__:[7]})]),_:1}),c(g,null,{default:s(()=>[u("div",Pa,[c(h,{modelValue:e.offerCxca,"onUpdate:modelValue":a[0]||(a[0]=a=>e.offerCxca=a)},{default:s(()=>[c(b,{slot:"end",value:"Yes"},{default:s(()=>a[8]||(a[8]=[_("Yes")])),_:1,__:[8]}),c(b,{slot:"end",style:{"margin-left":"20px"},value:"No"},{default:s(()=>a[9]||(a[9]=[_("No")])),_:1,__:[9]})]),_:1},8,["modelValue"])])]),_:1})]),_:1}),"No"===e.offerCxca?(o(),k("div",Ea,[c(w,null,{default:s(()=>[c(g,null,{default:s(()=>[c(f,null,{default:s(()=>a[10]||(a[10]=[_("Reason for NOT offering CxCa")])),_:1,__:[10]})]),_:1}),c(g,null,{default:s(()=>[c(S,{modelValue:e.reasonForNoCxca,"onUpdate:modelValue":a[1]||(a[1]=a=>e.reasonForNoCxca=a),interface:"popover",placeholder:"Select reason"},{default:s(()=>[(o(!0),k(D,null,C(e.reasonsForNoCxcaOptions,e=>(o(),i(x,{key:e.value,value:e.value},{default:s(()=>[_(y(e.label),1)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1}),"Not due for screening"===e.reasonForNoCxca?(o(),k("div",Ma,[c(w,null,{default:s(()=>[c(g,null,{default:s(()=>[c(f,null,{default:s(()=>a[11]||(a[11]=[_("Previous CxCa test date")])),_:1,__:[11]})]),_:1}),c(g,null,{default:s(()=>[c(V,{place_holder:"enter data",onDateUpDated:[()=>{},a[2]||(a[2]=a=>{e.previousCxcaTestDate=a.formattedDate})],date_prop:e.dateProp},null,8,["date_prop"])]),_:1})]),_:1}),e.showEstimateFields?(o(),i(w,{key:0},{default:s(()=>[c(g,null,{default:s(()=>[c(f,null,{default:s(()=>a[12]||(a[12]=[_("Estimated?")])),_:1,__:[12]})]),_:1}),c(g,null,{default:s(()=>[c(T,{bold:"bold","input-header":`Estimate number of ${e.selectedEstimatePeriod.name}`,"input-value":e.estimatedValue,"onUpdate:inputValue":[a[3]||(a[3]=a=>e.estimatedValue=a),a[4]||(a[4]=a=>e.estimatedValue=a.target.value)],showAsterisk:"",placeholder:"",unitsData:{isSingleSelect:!0,multiSelectData:e.estimatePeriods.map(e=>({name:e})),value:e.selectedEstimatePeriod,trackBy:"name"},"onUpdate:units":a[5]||(a[5]=a=>e.selectedEstimatePeriod=a)},null,8,["input-header","input-value","unitsData"])]),_:1})]),_:1})):p("",!0)])):p("",!0)])):p("",!0),u("div",Oa,[c(I,{onClick:e.saveCxcaData,disabled:!e.isFormValid},{default:s(()=>a[13]||(a[13]=[_(" Save and Continue ")])),_:1,__:[13]},8,["onClick","disabled"])])]))])}],["__scopeId","data-v-bee1d69f"]]),Aa={class:"error"},za={class:"error"},Ba={class:"error"},La=xe(t({__name:"TptTransferForm",props:{patientId:{type:Number,required:!0},drugNameFilters:{type:Object,default:()=>[]}},setup(e,{expose:a}){const t=e,r=l({}),v=new _e,p=new Ae(t.patientId,-1),m=l({canSubmit:!1,dateStartedTpt:"",tptDrugQuantities:[],transferFacility:""}),w={dateStartedTpt:{label:"Date started TPT treatment",required:()=>!0,validation:()=>!(!x("dateStartedTpt")||(T(m.value.dateStartedTpt).isAfter(T(_e.getSessionDate()))?(r.value.dateStartedTpt="Date cannot be in the future",1):T(m.value.dateStartedTpt).isBefore(T(v.getBirthdate()))&&(r.value.dateStartedTpt="Date cannot be before birthdate",1)))},transferFacility:{label:"Facility TPT last received from",required:()=>!0,buildObs:()=>p.buildValueText("Location TPT last received",m.value.transferFacility),validation:()=>x("transferFacility")},tptDrugQuantities:{label:"TPT Drug Quantities",required:()=>!0,init:async()=>{const e=t.drugNameFilters.length>0?t.drugNameFilters:["INH or H (Isoniazid 300mg tablet)","3HP (RFP + INH","Rifapentine (150mg)","INH 300 / RFP 300 (3HP)"],a=(await Be.getCustomIngridients()).filter(a=>e.includes(a.name));m.value.tptDrugQuantities=We(a.map(e=>({drug:e,name:e.name,quantity:null})),"name")},buildObs:()=>m.value.tptDrugQuantities.map(e=>p.buildObs("TPT Drugs Received",{value_drug:e.drug.drug_id,value_datetime:m.value.dateStartedTpt,value_numeric:e.quantity})),validation:()=>{if(x("tptDrugQuantities"))return!!m.value.tptDrugQuantities.every(e=>{var a;return(null!==(a=e.quantity)&&void 0!==a?a:0)>0})||(r.value.tptDrugQuantities="Please enter quantities for all drugs",!1)}}};function x(e){r.value[e]="";const a=w[e],t="function"==typeof(null==a?void 0:a.required)&&a.required(),l="object"==typeof m.value[e]?Le.isEmpty(m.value[e]):Array.isArray(m.value[e])?0===m.value[e].length:0===`${m.value[e]}`.length;return t&&l?(r.value[e]="This field is required",!1):t}function S(e){return r.value[e]="","function"!=typeof w[e].validation||w[e].validation()}function I(e,a){S(e),Object.keys(w).forEach(t=>{var l;return(null===(l=w[t])||void 0===l?void 0:l.onFormUpdate)&&w[t].onFormUpdate(e,a)})}return n(()=>async function(){m.value.canSubmit=!1,await Promise.all(Object.keys(w).filter(e=>"function"==typeof w[e].init).map(e=>w[e].init())),m.value.canSubmit=!0}()),a({buildObs:function(){return Object.keys(w).reduce((e,a)=>{if(a in w&&"function"==typeof w[a].required&&w[a].required()&&"function"==typeof w[a].buildObs){const t=w[a].buildObs();return Array.isArray(t)?[...e,...t]:[...e,t]}return e},[])},validateAll:function(){return m.value.canSubmit?Object.keys(w).every(e=>S(e)):(ye("Please wait for all data to load before submitting"),!1)}}),(e,a)=>(o(),i(d(f),null,{default:s(()=>[c(d(g),null,{default:s(()=>[c(d(b),null,{default:s(()=>[c(d(h),null,{default:s(()=>a[2]||(a[2]=[_("Date started TPT treatment")])),_:1,__:[2]}),c(qe,{place_holder:"Select date",onDateUpDated:a[0]||(a[0]=e=>{m.value.dateStartedTpt=e.value.standardDate,I("dateStartedTpt",e.value.standardDate)}),date_prop:""}),u("div",Aa,y(r.value.dateStartedTpt),1)]),_:1}),c(d(b),null,{default:s(()=>[c(d(h),null,{default:s(()=>a[3]||(a[3]=[_("Facility TPT last received from")])),_:1,__:[3]}),c($e,{show_error:!1,selected_district_ids:[],selected_location:null,onFacilitySelected:a[1]||(a[1]=e=>{m.value.transferFacility=e.selected_location.name,I("transferFacility",e.selected_location.name)})}),u("div",za,y(r.value.transferFacility),1)]),_:1})]),_:1}),(o(!0),k(D,null,C(m.value.tptDrugQuantities,(e,a)=>(o(),i(d(g),{key:a},{default:s(()=>[c(d(b),null,{default:s(()=>[c(d(L),{lines:"none"},{default:s(()=>[c(d(h),null,{default:s(()=>[_(y(e.name),1)]),_:2},1024)]),_:2},1024)]),_:2},1024),c(d(b),null,{default:s(()=>[c(d(V),{onIonInput:e=>I("tptDrugQuantities",{index:a,field:"quantity",value:e.detail.value}),placeholder:"Enter amount given",modelValue:e.quantity,"onUpdate:modelValue":a=>e.quantity=a,type:"number",fill:"outline"},null,8,["onIonInput","modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:2},1024))),128)),c(d(g),null,{default:s(()=>[c(d(b),null,{default:s(()=>[u("div",Ba,y(r.value.tptDrugQuantities),1)]),_:1})]),_:1})]),_:1}))}}),[["__scopeId","data-v-136d27c5"]]),qa={class:"accordion-title-container"},Ra={key:0,class:"completed-badge"},Ha={class:"ion-padding",style:{overflow:"visible !important"},slot:"content"},Ua={class:"save-button-container"},ja={class:"accordion-title-container"},$a={key:0,class:"completed-badge"},Wa={class:"ion-padding",slot:"content",style:{overflow:"visible !important"}},Ya={key:0,class:"lab-investigations-list"},Qa={class:"table-responsive"},Ga={class:"lab-table"},Za={class:"action-buttons"},Xa={class:"save-button-container"},Ja={class:"accordion-title-container"},Ka={key:0,class:"completed-badge"},et={slot:"content",class:"ion-padding"},at={class:"chart-container"},tt={class:"chart-header"},lt={key:0,class:"loading-container"},nt={key:1,class:"empty-data-container"},it={key:2,class:"save-button-container"},ot={class:"accordion-title-container"},dt={key:0,class:"completed-badge"},rt={slot:"content",class:"ion-padding"},st={class:"radio-group"},ct={class:"radio-group"},ut={key:0,class:"save-button-container"},vt={class:"accordion-title-container"},pt={key:0,class:"completed-badge"},mt={slot:"content",class:"ion-padding"},ft={class:"accordion-title-container"},gt={key:0,class:"completed-badge"},bt={slot:"content",class:"ion-padding"},ht={class:"accordion-title-container"},_t={key:0,class:"completed-badge"},yt={class:"ion-padding",slot:"content"},wt={class:"side-effects-container"},xt={class:"radio-group"},kt={key:0,class:"side-effects-options"},Ct={key:0,class:"loading-container"},St={class:"category-tabs"},Dt={class:"save-button-container"},Vt={class:"accordion-title-container"},Tt={key:0,class:"completed-badge"},It={class:"ion-padding",slot:"content"},Nt={key:0,class:"loading-container"},Pt={class:"tb-therapy-container"},Et={class:"tb-treatment-section"},Mt={class:"radio-group horizontal-radio-group"},Ot={class:"radio-option"},Ft={class:"radio-option"},At={key:0,class:"tb-treatment-section"},zt={key:0,class:"estimator-container"},Bt={style:{"margin-top":"10px"}},Lt={key:1,class:"tb-treatment-section"},qt={class:"tb-symptoms-section"},Rt={class:"screening-section"},Ht={class:"radio-group horizontal-radio-group"},Ut={class:"radio-option"},jt={class:"radio-option"},$t={class:"radio-option"},Wt={class:"radio-group horizontal-radio-group"},Yt={class:"radio-option"},Qt={class:"radio-option"},Gt={class:"radio-option"},Zt={key:0,class:"tb-status-section"},Xt={style:{"z-index":"99999"}},Jt={key:2,class:"tb-history-section"},Kt={key:0,class:"ion-padding"},el={class:"save-button-container"};e("default",xe(t({__name:"Consultation",setup(e,{expose:a}){var t,m;const w=Ve(),x=Te(),{patient:S}=Q(x),N=l(null),P=l(["lab-investigation"]),E=l(null),M=l(!1),O=l([]),z=l([]),B=l(""),U=l("contraindication"),j=l(!1),W=l(!1),Z=l(!1),X=l(!1),J=I(()=>{var e;return null===(e=S.value)||void 0===e?void 0:e.patientID}),K=null!==(t=Ne.getUserID())&&void 0!==t?t:-1,ee=(null===(m=w.getfacilityLocation())||void 0===m?void 0:m.code)||"",ae=l(!1),we=new _e,xe=l(null),Ie=l(null),Pe=l(!1),Me=l(!1),ze=l(),Be=I(()=>{var e,a;return/currently/i.test(null!==(e=null===(a=ka.value)||void 0===a?void 0:a.name)&&void 0!==e?e:"")}),Le=I(()=>{var e;const a=[],t=null===(e=ka.value)||void 0===e?void 0:e.name;return`${t}`.match(/ipt/i)?a.push("INH or H (Isoniazid 300mg tablet)"):`${t}`.includes("3HP (RFP + INH)")?(a.push("INH or H (Isoniazid 300mg tablet)"),a.push("Rifapentine (150mg)")):`${t}`.includes("INH 300 / RFP 300 (3HP)")&&a.push("INH 300 / RFP 300 (3HP)"),console.log(a),a}),$e=new Ae(we.getID(),-1,ee),{sideEffectOptions:We,sideEffects:Ge,isLoading:Ze,filterByCategory:Xe,hasSelectedSideEffects:Je,buildSideEffectsPayload:Ke,encounterId:ea}=((e="all")=>{const a=l([]),t=l({}),i=l(!1),o=l(null),d=l(null),r=I(()=>"all"===e?Qe:Qe.filter(a=>a.category===e)),s=()=>{const e=r.value.map(e=>({id:`${e.concept_id}`,label:e.name,value:!1,concept_id:e.concept_id}));a.value=e,e.forEach(e=>{t.value[e.id]={selected:e.value}})},c=e=>e.map(e=>({label:e.label,value:e.id,isChecked:e.value}));n(()=>{s()});const u=async(e,a,l)=>{i.value=!0,d.value=null;try{const n=new Ue(e,53,a,l),i=await n.createEncounter();if(!i)throw new Error("Failed to create encounter");o.value=i.encounter_id;const d={side_effect:"Malawi ART side effects",contraindication:"Other side effect",all:"Malawi ART Side Effects"},r=Qe.filter(e=>"side_effect"===e.category).map(e=>({id:`${e.concept_id}`,label:e.name,value:!1,concept_id:e.concept_id})),s=Qe.filter(e=>"contraindication"===e.category).map(e=>({id:`${e.concept_id}`,label:e.name,value:!1,concept_id:e.concept_id}));r.forEach(e=>{t.value[e.id]&&(e.value=t.value[e.id].selected)}),s.forEach(e=>{t.value[e.id]&&(e.value=t.value[e.id].selected)});const u=await n.buildOptionsGroupObs(d.side_effect,c(r)),v=await n.buildOptionsGroupObs(d.contraindication,c(s)),p=r.filter(e=>e.value&&e.reason).flatMap(e=>e.reason||[]),m=s.filter(e=>e.value&&e.reason).flatMap(e=>e.reason||[]);return{encounter_id:i.encounter_id,observations:[...u,...v,...p,...m]}}catch(n){return console.error("Error building side effects payload:",n),d.value="Failed to build side effects payload",null}finally{i.value=!1}};return{sideEffectOptions:a,sideEffects:t,resetSideEffects:()=>{a.value.forEach(e=>{t.value[e.id]={selected:!1}})},hasSelectedSideEffects:()=>Object.values(t.value).some(e=>!0===e.selected),getSelectedSideEffects:()=>a.value.filter(e=>{var a;return null===(a=t.value[e.id])||void 0===a?void 0:a.selected}).map(e=>e.label),filterByCategory:l=>{const n={...t.value};e=l,s(),a.value.forEach(e=>{void 0!==n[e.id]&&(t.value[e.id]=n[e.id])})},isLoading:i,error:d,buildSideEffectsPayload:u,saveSideEffectsData:async(e,a,t)=>{i.value=!0,d.value=null;try{const l=await u(e,a,t);if(o.value=Number(null==l?void 0:l.encounter_id),!l)throw new Error("Failed to build payload");return await Ue.saveObsArray(l.encounter_id,l.observations),Se("Side effects saved successfully"),!0}catch(l){return console.error("Error saving side effects:",l),d.value="Failed to save side effects",ke("Failed to save side effects"),!1}finally{i.value=!1}},encounterId:o}})("side_effect"),{tbTherapyStatus:aa,tbTreatmentPeriod:ta,tbTreatmentStartDate:na,tbEstimatePeriods:ia,selectedEstimatePeriod:da,showEstimator:ca,tbStartEstimate:ua,tbStatusOptions:va,showTBStatus:pa,tptHistoryOptions:ma,buildTBTreatmentPayload:fa,submitTBTherapy:ga}=ra(),{tbSymptomOptions:ha,tbSymptoms:_a}=(()=>{const e=l([{id:"Weight loss / Failure to thrive / malnutrition",label:"Weight loss / failure to thrive / malnutrition",value:!1},{id:"Fever",label:"Fever",value:!1},{id:"Night sweats",label:"Night sweats",value:!1},{id:"Cough",label:"Cough",value:!1}]),a=l({});return e.value.forEach(e=>{a.value[e.id]=e.value}),{tbSymptomOptions:e,tbSymptoms:a,resetTBSymptoms:()=>{e.value.forEach(e=>{a.value[e.id]=!1})},hasSelectedTBSymptoms:()=>Object.values(a.value).some(e=>!0===e),getSelectedTBSymptoms:()=>e.value.filter(e=>a.value[e.id]).map(e=>e.label)}})(),ya=l(""),wa=l(""),xa=l(""),ka=l(""),Ca=l(!1),{pregnancyBreastFeedingData:Da,isPregnancyBreastfeedingLoading:Va,validatePregnancyBreastFeeding:Ta,buildPregnancyBreastFeedingObs:Ia}=(()=>{const e=Y({isPregnant:null,isBreastFeeding:null}),a=l(!1),t=l(!1),n=l([]),i=()=>(n.value=[],null===e.isPregnant&&n.value.push("Pregnancy status is required."),null===e.isBreastFeeding&&n.value.push("Breastfeeding status is required."),0===n.value.length),o=async(a,t,l)=>{const n=new Ue(a,53,t,l),i=[];if(null!==e.isPregnant){const a=await n.buildValueCoded("Is patient pregnant?","yes"===e.isPregnant?"Yes":"No");i.push(a)}if(null!==e.isBreastFeeding){const a=await n.buildValueCoded("Is patient breast feeding?","yes"===e.isBreastFeeding?"Yes":"No");i.push(a)}return i};return{pregnancyBreastFeedingData:e,isPregnancyBreastfeedingLoading:a,validationErrors:n,isPregnancyBreastfeedingSaved:t,validatePregnancyBreastFeeding:i,savePregnancyBreastFeeding:async(e,l,d)=>{if(!i())return console.error("Validation failed:",n.value),!1;a.value=!0;try{const a=await o(e,l,d);if(a.length>0){const n=new Ue(e,53,l,d);return await n.saveObservationList(a),t.value=!0,Se("Pregnancy or Breast Feeding data saved successfully"),!0}return console.warn("No observations to save"),!1}catch(r){return console.error("Error saving data:",r),!1}},buildPregnancyBreastFeedingObs:o}})(),{buildContraceptiveObs:Na}=sa(),Pa=e=>{const a=e.detail.value;U.value=a,Xe(a)},Ea=async()=>{"yes"!==B.value||Je()?(j.value=!0,N.value&&(P.value=[],P.value.push("tb-therapy"))):ke("Please select at least one side effect or contraindication")},Ma=async()=>{if(0!==ul.value.length)try{var e;if(!J.value)return void ke("Patient ID not found");const a=new Re,t=null===(e=w.getfacilityLocation())||void 0===e?void 0:e.code;if(!t)return void ke("Location ID not found");const l={location_id:t,orders:ul.value.map(e=>({concept_id:e.test.id,name:e.test.name,specimen:e.specimen.name,reason:e.reason||"Routine",specimenConcept:e.specimen.id,accessionNumber:e.accessionNumber||null}))};await a.postActivities(J.value,l),Z.value=!0,N.value&&(P.value=[],P.value.push("weight-chart")),Se("Lab investigations saved successfully")}catch(a){console.error("Error saving lab investigations:",a),ke("Failed to save lab investigations")}else ke("Please add at least one lab investigation")},Oa=()=>{var e;Ie.value&&(Pe.value=null===(e=Ie.value)||void 0===e?void 0:e.validateAll(),Pe.value&&N.value&&(P.value=["lab-investigation"]))},Aa=()=>{X.value=!0,N.value&&(P.value=[],P.value.push(we.isFemale()?"pregnancy-breastfeeding":"contraindications"))},za=()=>{N.value&&(P.value=[],P.value.push("cxca"))},Ba=e=>{M.value=e.isCxCaSaved,O.value=e.obs,N.value&&(P.value=[],P.value.push("contraindications"))},al=I(()=>({"Chest X-ray":ya.value,"Molecular WHO Recommended Rapid Diagnostic Test":wa.value})),tl=async()=>{Ta()?(z.value=await Ia(J.value,K,ee),N.value&&(P.value=[],P.value.push("contraceptives"),Ca.value=!0)):ke("Please fill in all required pregnancy/breastfeeding fields")},ll=async()=>{"Unknown"!==aa.value?(W.value=!0,N.value&&(P.value=[])):ye("Please select a TB Therapy Status")},{testOptions:nl,specimenOptions:il,testReasons:ol,selectedTest:dl,selectedSpecimen:rl,selectedReason:sl,selectedAccessionNumber:cl,labInvestigations:ul,editingInvestigationId:vl,loadTestTypes:pl,handleTestChange:ml,refreshTestTypes:fl,saveLabInvestigation:gl,editLabInvestigation:bl,cancelLabInvestigation:hl}=(()=>{const e=l([]),a=l([]),t=l(["Routine","Targeted","Confirmatory","Stat","Repeat / Missing","Follow up after Low Level Viremia","Follow up after High Viral Load"]),n=l(null),i=l(null),o=l(null),d=l(""),r=l([]),s=l(null),c=async e=>{if(e)try{const t=await Ce.getSpecimens(e);t&&t.length>0?(a.value=t.map(e=>({id:e.concept_id.toString(),name:e.name,assigned_id:e.concept_id.toString()})),1===t.length&&(i.value=a.value[0])):(a.value=[],ye("No specimens found for the selected test"))}catch(t){console.error("Error loading specimens:",t),ke("Failed to load specimens")}else a.value=[]};return{testOptions:e,specimenOptions:a,testReasons:t,selectedTest:n,selectedSpecimen:i,selectedReason:o,selectedAccessionNumber:d,labInvestigations:r,editingInvestigationId:s,loadTestTypes:async()=>{try{const a=await De("testTypes");if(Array.isArray(a)&&a.length>0)e.value=a.map(e=>({id:e.concept_id.toString(),name:e.name,assigned_id:e.concept_id.toString()}));else if(a&&"records"in a&&a.records.length>0)e.value=a.records.map(e=>({id:e.concept_id.toString(),name:e.name,assigned_id:e.concept_id.toString()}));else{const a=await Ce.getTestTypes();a&&a.length>0&&(e.value=a.map(e=>({id:e.concept_id.toString(),name:e.name,assigned_id:e.concept_id.toString()})))}}catch(a){console.error("Error loading test types:",a),ke("Failed to load test types")}},loadSpecimens:c,handleTestChange:e=>{e&&e.name?c(e.name):(a.value=[],i.value=null)},handleBarcodeScanned:async e=>{if(!e||0===e.trim().length)return ye("Barcode is required"),!1;try{return await Ce.accessionNumExists(e)?(ye(`Barcode ${e} was already used`),!1):(d.value=e,!0)}catch(a){return console.error("Error checking barcode:",a),ke(`Failed to confirm barcode ${e}, Please try again later`),!1}},refreshTestTypes:async()=>{try{const a=await Ce.getTestTypesViaDirectAPICall();a&&a.length>0?(e.value=a.map(e=>({id:e.concept_id.toString(),name:e.name,assigned_id:e.concept_id.toString()})),Se("Test types refreshed successfully")):ye("No test types found")}catch(a){console.error("Error refreshing test types:",a),ke("Failed to refresh test types")}},saveLabInvestigation:async()=>{if(n.value&&i.value&&o.value){if(r.value.some(e=>{var a,t;return e.test.id===(null===(a=n.value)||void 0===a?void 0:a.id)&&e.specimen.id===(null===(t=i.value)||void 0===t?void 0:t.id)&&e.id!==s.value}))return void ye("This test and specimen combination has already been added");if(s.value){const e=r.value.findIndex(e=>e.id===s.value);-1!==e&&(r.value[e]={...r.value[e],test:n.value,specimen:i.value,reason:o.value,accessionNumber:d.value,isEditing:!1},s.value=null)}else{const e={id:Date.now().toString(36)+Math.random().toString(36).substring(2),test:n.value,specimen:i.value,reason:o.value,accessionNumber:d.value,dateAdded:(new Date).toISOString(),isEditing:!1};r.value.push(e)}n.value=null,i.value=null,o.value=null,d.value=""}else ye("Please select test, specimen, and reason for testing")},editLabInvestigation:e=>{const a=r.value.find(a=>a.id===e);a&&(n.value=a.test,i.value=a.specimen,o.value=a.reason,d.value=String(a.accessionNumber),s.value=a.id)},cancelLabInvestigation:e=>{const a=r.value.findIndex(a=>a.id===e);-1!==a&&r.value.splice(a,1),s.value===e&&(n.value=null,i.value=null,s.value=null)}}})(),{chartPeriod:_l,weightChartCanvas:yl,isLoadingWeightData:wl,weightData:xl,loadWeightHistory:kl,initializeWeightChart:Cl,cleanupChart:Sl}=(()=>{const e=l(2),a=l(null);let t=null;const n=l(!1),i=l([]);return window.addEventListener("resize",()=>{t&&a.value&&t.resize()}),{chartPeriod:e,weightChartCanvas:a,isLoadingWeightData:n,weightData:i,loadWeightHistory:async()=>{n.value=!0;try{const e=new _e,a=await e.getWeightHistory();a&&a.length>0?(i.value=a.map(e=>({date:T(e.date).format("MM-DD"),weight:parseFloat(e.weight)})),i.value.sort((e,a)=>T(e.date,"MM-DD").valueOf()-T(a.date,"MM-DD").valueOf())):(ye("No weight history found for this patient"),i.value=[],t&&(t.destroy(),t=null))}catch(e){console.error("Error loading weight history:",e),ke("Failed to load weight history"),i.value=[],t&&(t.destroy(),t=null)}finally{n.value=!1}},initializeWeightChart:()=>{var e;if(!a.value||0===i.value.length)return;t&&(t.destroy(),t=null);const l=(null===(e=a.value.parentElement)||void 0===e?void 0:e.clientWidth)||800;a.value.width=l,a.value.height=300;const n=a.value.getContext("2d");if(!n)return;const o=i.value.map(e=>e.date),d=i.value.map(e=>e.weight),r=i.value.findIndex(e=>void 0!==e.height),s=n.createLinearGradient(0,0,0,400);s.addColorStop(0,"rgba(75, 192, 75, 0.6)"),s.addColorStop(1,"rgba(75, 192, 75, 0.1)"),t=new He(n,{type:"line",data:{labels:o,datasets:[{label:"Weight",data:d,borderColor:"rgb(75, 192, 75)",backgroundColor:s,tension:.3,fill:!0,pointBackgroundColor:"rgb(75, 192, 75)",pointRadius:5}]},options:{responsive:!0,maintainAspectRatio:!1,layout:{padding:{top:10,right:10,bottom:10,left:10}},scales:{y:{min:30,max:220,ticks:{stepSize:10},grid:{color:"rgba(200, 200, 200, 0.3)"}},x:{grid:{color:"rgba(200, 200, 200, 0.3)"}}},plugins:{tooltip:{callbacks:{afterLabel:e=>{if(e.dataIndex===r&&i.value[r].height)return`Height: ${i.value[r].height}cm`}}}}}})},cleanupChart:()=>{t&&(t.destroy(),t=null)}}})(),{validate:Dl}=((e,a,t)=>{const l=I(()=>({"weight-chart":e.value,"side-effects":a.value,"tb-therapy":t.value}));return{validate:async()=>{for(const e in l.value){const a=e;if(!l.value[a])return ye(`Please fill out ${e.replaceAll("-"," ")} section`),!1}return!0},stepsMap:l}})(X,j,W);return n(async()=>{await pl(),await kl(),setTimeout(()=>{xl.value.length>0&&Cl()},500)}),te(()=>{Sl()}),a({onSubmit:async function(){try{const l=[];if(Me.value)return await async function(){await $e.createEncounter(),await $e.saveValueCodedObs("None","None")}(),!0;if(Be.value){if(!ze.value)return ke("The tpt transfer form is still initializing"),!1;if(!ze.value.validateAll())return ke("Please fix the validation errors before submitting"),!1;l.push(...await Promise.all(ze.value.buildObs()))}if(!(await Dl()))return!1;if(null===xe.value)return ye("Please wait for drug transfer to load before submitting"),!1;if(xe.value&&Ie.value){var e,a;if(null===(e=Ie.value)||void 0===e||!e.validateAll())return ye("Please fix drug transfer errors before submitting"),!1;l.push(...await Promise.all(null===(a=Ie.value)||void 0===a?void 0:a.buildObs()))}if(Je()&&ea.value){const e=await Ke(J.value,K,ee);null!=e&&e.observations&&l.push(...e.observations)}if(aa.value){const e=new Ue(J.value,53,K,ee),a={history:ka.value,status:xa.value,methods:al.value,symptoms:_a.value,encounterService:e},t=await fa(J.value,53,K,ee,a);t&&t.length>0&&l.push(...t)}if(xl.value&&xl.value.length>0){const e=new Ue(J.value,53,K,ee),a=xl.value[xl.value.length-1];if(null!=a&&a.weight){const t=await e.buildValueNumber("Weight",a.weight);l.push(t)}}null===Da.isPregnant&&null===Da.isBreastFeeding||z.value&&z.value.length>0&&l.push(...z.value);try{const e=await Na(J.value,K,ee);e&&e.length>0&&l.push(...e)}catch(t){console.error("No contraceptives selected or error building contraceptives payload:",t)}O.value&&O.value.length>0&&l.push(...O.value);const n=l.filter(e=>e&&Object.keys(e).length>0);if(n.length>0){let e=ea.value;if(!e){const a=new Ue(J.value,53,K,ee),t=await a.createEncounter();if(!t)return ke("Failed to create encounter"),!1;e=t.encounter_id}await Ue.saveObsArray(Number(e),n),Se("Consultation data saved successfully")}return!0}catch(t){return console.error("Error submitting consultation data:",t),ke("Failed to save consultation data"),!1}}}),n(()=>{le(()=>{setTimeout(()=>{document.querySelectorAll(".multiselect").forEach(e=>{const a=e.querySelector(".multiselect__content-wrapper");if(a){const t=e.clientWidth||"320";a.style.width=t+"px"}})},1e3)})}),n(async()=>{ae.value=await Ee.cervicalCancerScreeningEnabled(),Me.value="No"===await $e.getClient(),Me.value||(Me.value=!!(await je.isDrugRefillPatient(J.value)))}),(e,a)=>Me.value?(o(),i(d(r),{key:0,style:{height:"40vh"}},{default:s(()=>[c(d(v),null,{default:s(()=>a[21]||(a[21]=[u("div",{style:{"margin-top":"10%"},class:"ion-text-center"},[u("h1",null,[_("Consultation is not required for a "),u("b",null,"Guardian only"),_(" visit or "),u("b",null,"Drug refills"),_(". ")]),u("h1",{class:"ion-padding"},[_("Press the "),u("span",{style:{color:"green","font-weight":"bold"}},"Save / Finish "),_("button to continue")])],-1)])),_:1,__:[21]})]),_:1})):(o(),i(d(r),{key:1},{default:s(()=>[c(d(v),null,{default:s(()=>[c(Sa,{patientID:Number(J.value)},null,8,["patientID"]),c(d(ne),{ref_key:"accordionGroup",ref:N,value:P.value,multiple:!0},{default:s(()=>[ie(c(d(oe),{value:"drug_transfer_in"},{default:s(()=>[c(d(L),{slot:"header"},{default:s(()=>[u("div",qa,[a[24]||(a[24]=u("div",{class:"section-icon"},[u("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},[u("g",{fill:"none",stroke:"currentColor","stroke-width":"1.5"},[u("path",{"stroke-linecap":"round",d:"M22 22H2"}),u("path",{d:"M17 22V6c0-1.886 0-2.828-.586-3.414S14.886 2 13 2h-2c-1.886 0-2.828 0-3.414.586S7 4.114 7 6v16m14 0V8.5c0-1.404 0-2.107-.337-2.611a2 2 0 0 0-.552-.552C19.607 5 18.904 5 17.5 5M3 22V8.5c0-1.404 0-2.107.337-2.611a2 2 0 0 1 .552-.552C4.393 5 5.096 5 6.5 5"}),u("path",{"stroke-linecap":"round",d:"M12 22v-3m-2-7h4m-8.5-1H7m-1.5 3H7m10-3h1.5M17 14h1.5m-13-6H7m10 0h1.5M10 15h4"}),u("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 9V5m2 2h-4"})])])],-1)),c(d(h),null,{default:s(()=>[a[23]||(a[23]=_(" Transfer-in drug documentation ")),Pe.value?(o(),k("span",Ra,[c(d(A),{size:"small",icon:d(de),style:{"margin-right":"3px"}},null,8,["icon"]),a[22]||(a[22]=_(" Completed "))])):p("",!0)]),_:1,__:[23]})])]),_:1}),u("div",Ha,[c(Ye,{ref_key:"drugTransferComponent",ref:Ie,onCanEnterTransferDrugs:a[0]||(a[0]=e=>{return a=e,xe.value=a,void(P.value=a?["drug_transfer_in"]:["lab-investigation"]);var a})},null,512),u("div",Ua,[c(d(F),{expand:"block",onClick:Oa},{default:s(()=>a[25]||(a[25]=[_(" Save and Continue ")])),_:1,__:[25]})])])]),_:1},512),[[re,xe.value]]),c(d(oe),{style:{position:"relative !important",overflow:"visible !important"},value:"lab-investigation"},{default:s(()=>[c(d(L),{slot:"header"},{default:s(()=>[u("div",ja,[a[28]||(a[28]=u("div",{class:"section-icon"},[u("svg",{xmlns:"http://www.w3.org/2000/svg",width:"25",height:"25",viewBox:"0 0 48 48"},[u("g",{fill:"none",stroke:"currentColor","stroke-width":"4"},[u("path",{"stroke-linecap":"round",d:"m29.003 18.373l1.105-1.105l.53-.53a5.5 5.5 0 0 0 0-7.778v0a5.5 5.5 0 0 0-7.778 0L9.172 22.648a.143.143 0 0 0 0 .202l6.97 6.97a1 1 0 0 0 1.414 0l3.713-3.713l1.105-1.105"}),u("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m28.163 6.485l1.768-1.767a3.5 3.5 0 0 1 4.95 4.95l-1.768 1.767zM10.485 24.163l-4.242 4.243l4.95 4.95l4.242-4.243z"}),u("circle",{cx:"26.041",cy:"22.042",r:"4.5",transform:"rotate(45 26.041 22.042)"}),u("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m6 20l12.728 12.728M10 44h32M31 22c4 0 8 4 8 10c0 6.4-5.167 9.833-8 12"})])])],-1)),c(d(h),null,{default:s(()=>[a[27]||(a[27]=_(" Lab investigation ")),Z.value?(o(),k("span",$a,[c(d(A),{size:"small",icon:d(de),style:{"margin-right":"3px"}},null,8,["icon"]),a[26]||(a[26]=_(" Completed "))])):p("",!0)]),_:1,__:[27]})])]),_:1}),u("div",Wa,[c(d(f),{class:"single-row-grid",style:{overflow:"visible !important"}},{default:s(()=>[c(d(g),{class:"align-items-center"},{default:s(()=>[c(d(b),{size:"auto"},{default:s(()=>[c(d(F),{fill:"clear",shape:"round",size:"small",onClick:d(fl)},{default:s(()=>[c(d(A),{icon:d(se),slot:"icon-only"},null,8,["icon"])]),_:1},8,["onClick"])]),_:1}),c(d(b),{size:"3"},{default:s(()=>[c(d(h),{class:"labl-cls"},{default:s(()=>a[29]||(a[29]=[_(" Test ")])),_:1,__:[29]}),c(d(ce),{modelValue:d(dl),"onUpdate:modelValue":[a[1]||(a[1]=e=>ue(dl)?dl.value=e:null),d(ml)],teleport:"",multiple:!1,taggable:!1,"hide-selected":!0,"close-on-select":!0,openDirection:"auto","tag-placeholder":"",placeholder:"Select test",selectLabel:"",label:"name",searchable:!0,"track-by":"assigned_id",options:d(nl),disabled:!1},null,8,["modelValue","onUpdate:modelValue","options"])]),_:1}),c(d(b),{size:"3"},{default:s(()=>[c(d(h),{class:"labl-cls"},{default:s(()=>a[30]||(a[30]=[_(" Specimen ")])),_:1,__:[30]}),c(d(ce),{modelValue:d(rl),"onUpdate:modelValue":a[2]||(a[2]=e=>ue(rl)?rl.value=e:null),multiple:!1,taggable:!1,"hide-selected":!0,"close-on-select":!0,openDirection:"auto","tag-placeholder":"",placeholder:"Select specimen",selectLabel:"",label:"name",searchable:!0,"track-by":"assigned_id",options:d(il),disabled:!1,appendToBody:!0},null,8,["modelValue","options"])]),_:1}),c(d(b),{size:"3"},{default:s(()=>[c(d(h),{class:"labl-cls"},{default:s(()=>a[31]||(a[31]=[_(" Reason ")])),_:1,__:[31]}),c(d(ce),{modelValue:d(sl),"onUpdate:modelValue":a[3]||(a[3]=e=>ue(sl)?sl.value=e:null),multiple:!1,taggable:!1,"hide-selected":!0,"close-on-select":!0,openDirection:"auto","tag-placeholder":"",placeholder:"Select reason",selectLabel:"",searchable:!0,options:d(ol),disabled:!1,appendToBody:!0},null,8,["modelValue","options"])]),_:1}),d(dl)&&d(dl).name&&d(dl).name.match(/HIV viral load/i)&&d(rl)&&d(rl).name&&d(rl).name.match(/dbs|plasma/i)?(o(),i(d(b),{key:0,size:"auto"},{default:s(()=>[c(d(h),{class:"labl-cls"},{default:s(()=>a[32]||(a[32]=[_(" Barcode ID ")])),_:1,__:[32]}),c(d(V),{placeholder:"Scan barcode",modelValue:d(cl),"onUpdate:modelValue":a[4]||(a[4]=e=>ue(cl)?cl.value=e:null),class:"barcode-input"},{default:s(()=>[c(d(A),{slot:"start",icon:d(ve),"aria-hidden":"true"},null,8,["icon"])]),_:1},8,["modelValue"])]),_:1})):p("",!0)]),_:1}),c(d(b),{size:"auto"},{default:s(()=>[c(d(F),{fill:"clear",class:"ion-margin-top",onClick:d(gl)},{default:s(()=>[c(d(A),{icon:d(pe),slot:"start"},null,8,["icon"]),_(" "+y(d(vl)?"UPDATE ORDERS":"ADD TO ORDERS"),1)]),_:1},8,["onClick"])]),_:1})]),_:1}),d(ul).length>0?(o(),k("div",Ya,[u("div",Qa,[u("table",Ga,[a[33]||(a[33]=u("thead",null,[u("tr",null,[u("th",null,"TEST"),u("th",null,"SPECIMEN"),u("th",null,"REASON"),u("th",null,"BARCODE"),u("th",null,"ACTIONS")])],-1)),u("tbody",null,[(o(!0),k(D,null,C(d(ul),e=>(o(),k("tr",{key:e.id},[u("td",null,y(e.test.name),1),u("td",null,y(e.specimen.name),1),u("td",null,y(e.reason),1),u("td",null,y(e.accessionNumber||"N/A"),1),u("td",Za,[c(d(F),{fill:"clear",size:"small",color:"nuetral",onClick:a=>d(bl)(e.id)},{default:s(()=>[c(d(A),{icon:d($),slot:"icon-only"},null,8,["icon"])]),_:2},1032,["onClick"]),c(d(F),{fill:"clear",size:"small",color:"danger",onClick:a=>d(hl)(e.id)},{default:s(()=>[c(d(A),{icon:d(me),slot:"icon-only"},null,8,["icon"])]),_:2},1032,["onClick"])])]))),128))])])])])):p("",!0),u("div",Xa,[c(d(F),{expand:"block",onClick:Ma},{default:s(()=>a[34]||(a[34]=[_(" Save and Continue ")])),_:1,__:[34]})])])]),_:1}),c(d(oe),{value:"weight-chart"},{default:s(()=>[c(d(L),{slot:"header"},{default:s(()=>[u("div",Ja,[a[37]||(a[37]=u("div",{class:"section-icon"},[u("svg",{xmlns:"http://www.w3.org/2000/svg",width:"30",height:"30",viewBox:"0 0 24 24"},[u("g",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"1.5",color:"currentColor"},[u("path",{d:"M19 15v3.889C19 21.114 18.264 22 15.889 22H8.11C5.886 22 5 21.264 5 18.889V15a7 7 0 1 1 14 0"}),u("path",{d:"M16 15a4 4 0 0 0-8 0m4 2l1-2m3.312-10H7.688c-.884 0-1.326 0-1.715-.152a2 2 0 0 1-.368-.187c-.35-.22-.595-.568-1.085-1.263c-.382-.541-.573-.812-.507-1.033a.5.5 0 0 1 .107-.19C4.28 2 4.624 2 5.313 2h13.376c.689 0 1.033 0 1.192.175q.075.084.107.19c.066.221-.125.492-.507 1.033c-.49.695-.735 1.042-1.085 1.263a2 2 0 0 1-.368.187C17.637 5 17.196 5 16.312 5M14 8V5m-4 3V5"})])])],-1)),c(d(h),null,{default:s(()=>[a[36]||(a[36]=_(" Patient weight chart ")),X.value?(o(),k("span",Ka,[c(d(A),{size:"small",icon:d(de),style:{"margin-right":"3px"}},null,8,["icon"]),a[35]||(a[35]=_(" Completed "))])):p("",!0)]),_:1,__:[36]})])]),_:1}),u("div",et,[u("div",at,[u("div",tt,[c(d(h),null,{default:s(()=>[_("Weight trail ("+y(d(_l))+" year period)",1)]),_:1}),c(d(F),{fill:"clear",size:"small",onClick:d(kl),disabled:d(wl)},{default:s(()=>[c(d(A),{icon:d(se),slot:"icon-only"},null,8,["icon"])]),_:1},8,["onClick","disabled"])]),d(wl)?(o(),k("div",lt,[c(d(H),{name:"bubbles"}),a[38]||(a[38]=u("p",null,"Loading weight data...",-1))])):p("",!0),d(wl)||0!==d(xl).length?p("",!0):(o(),k("div",nt,a[39]||(a[39]=[u("p",null,"No weight data available for this patient",-1)]))),u("div",{class:G(["chart-canvas-container",{hidden:d(wl)||0===d(xl).length}])},[u("canvas",{ref_key:"weightChartCanvas",ref:yl,id:"weight-chart-canvas"},null,512)],2),d(wl)?p("",!0):(o(),k("div",it,[c(d(F),{expand:"block",onClick:Aa},{default:s(()=>a[40]||(a[40]=[_(" Continue ")])),_:1,__:[40]})]))])])]),_:1}),d(we).isFemale()?(o(),i(d(oe),{key:0,value:"pregnancy-breastfeeding"},{default:s(()=>[c(d(L),{slot:"header"},{default:s(()=>[u("div",ot,[a[43]||(a[43]=u("div",{class:"section-icon"},[u("svg",{xmlns:"http://www.w3.org/2000/svg",width:"32",height:"32",viewBox:"0 0 32 32"},[u("g",{fill:"currentColor"},[u("path",{d:"M15.751 8.26c.2 0 .386.056.553.148c.398.14.706.485.797.913c.02.12-.08.23-.2.23h-.416h.346a.75.75 0 0 0-.05-.546a.78.78 0 0 0-.7-.434a.77.77 0 0 0-.74.98h.356h-.736c-.15 0-.27-.14-.22-.29q.013-.053.03-.103l-.03-.027a.368.368 0 0 1 .02-.57c.28-.19.64-.3.99-.3"}),u("path",{d:"m15.697 9.55l.004.01h.78l.004-.01a.444.444 0 0 0-.394-.64a.4.4 0 0 0-.168.035a.14.14 0 1 1-.21.184a.43.43 0 0 0-.062.222a.5.5 0 0 0 .046.2m4.594-1.301c.35 0 .71.11.99.3c.19.13.2.41.03.56l-.035.033q.021.057.035.117c.04.15-.08.29-.23.29h-.726l-.004.01h-.78l-.005-.01h-.415c-.12 0-.22-.11-.2-.23c.081-.412.369-.75.75-.898c.176-.106.375-.172.59-.172m.064 1.3h.346q.03-.105.03-.21a.77.77 0 0 0-.77-.77c-.43 0-.78.35-.78.77c0 .08.01.14.03.21h.355a.4.4 0 0 1-.045-.2c0-.083.024-.162.066-.229a.14.14 0 0 0 .254-.08a.14.14 0 0 0-.04-.1a.4.4 0 0 1 .16-.03a.444.444 0 0 1 .395.64m-2.345 2.409c-.45 0-.87-.11-1.23-.3c-.12-.06-.25.08-.18.2c.3.46.82.77 1.41.77s1.11-.3 1.41-.77c.07-.12-.05-.25-.18-.19c-.36.18-.78.29-1.23.29m-.76-1.39l.44-1.42c.1-.31.54-.31.63 0l.44 1.42c.09.29-.12.59-.43.59h-.65c-.3 0-.52-.3-.43-.59m-2.31-2.76a.22.22 0 0 1-.2-.12c-.07-.1-.03-.25.08-.31c.03-.02.78-.44 1.65-.28c.13.02.21.14.19.27c-.02.12-.15.21-.27.18c-.7-.13-1.33.23-1.33.23c-.04.03-.08.03-.12.03m6.02-.03q.06.03.12.03c.08 0 .16-.04.21-.12a.24.24 0 0 0-.112-.33c-.135-.068-.83-.416-1.628-.27a.23.23 0 0 0-.19.27c.02.13.15.21.27.19c.626-.117 1.203.168 1.312.222z"}),u("path",{d:"M24.251 10.63a2.86 2.86 0 0 0-.2-2.82c-.3-.46-.46-.99-.46-1.54v-.01a2.86 2.86 0 0 0-2.86-2.86c-.16 0-.3-.07-.39-.2c-.52-.73-1.37-1.2-2.33-1.2s-1.81.47-2.33 1.2c-.09.12-.24.2-.39.2a2.86 2.86 0 0 0-2.86 2.86v.01c0 .55-.16 1.08-.46 1.54a2.86 2.86 0 0 0-.2 2.82c.06.13.06.27 0 .4a2.79 2.79 0 0 0 2.437 4.01l-1.557 1.67c-.33.35-.53.82-.53 1.34c0 .5.19.96.49 1.3c.09.1.03.27-.1.29a6.385 6.385 0 0 0-5.308 6.168a1.66 1.66 0 0 0-1.198 1.444l-.001.014v.013c-.023.373.077.73.271 1.025a1.66 1.66 0 0 0 .423 1.337q.008.046.019.094l.002.01c.192.793.919 1.255 1.632 1.255h1.042c.036 0 .678.002 1.013-.054a13 13 0 0 0 .88-.162a19 19 0 0 0 2.68-.784h6.405c.96 0 1.74-.78 1.74-1.74V16.05c0-.36-.072-.702-.203-1.016a2.79 2.79 0 0 0 2.333-4.004a.5.5 0 0 1 .01-.4m-1.91-3.116a2 2 0 0 1 .04.386l-.005.125a1.4 1.4 0 0 1 1.133 1.373a1.4 1.4 0 0 1-1.257 1.392c-.227 2.284-2.049 3.79-4.24 3.79c-2.122 0-3.897-1.42-4.215-3.575q-.015-.107-.026-.216a1.399 1.399 0 0 1-.119-2.764l-.01-.265c.007-.635.3-.96.78-1.28c.267-.178.526-.364.73-.6l.005-.005q.11-.127.197-.277l.006-.01q.045-.081.081-.168l.07-.15c.07-.17.3-.2.4-.05a3.2 3.2 0 0 0 .465.545l.006.005c.605.565 1.414.89 2.26.89h2.76c.14 0 .77.061.938.854M8.93 26.74l-.3-.3a.66.66 0 0 1 0-.92c.25-.25.67-.25.92 0l.54.54c.2.2.49.28.77.21c1.24-.31 3.31-.99 4.91-2.38a7 7 0 0 0 1.154-1.275a8 8 0 0 0 .658-1.106c.25-.503.442-1.007.588-1.48v-.009h3.6q-.107.477-.266 1a13 13 0 0 1-.655 1.718a12 12 0 0 1-1.019 1.782a10.7 10.7 0 0 1-1.78 1.99c-3.166 2.74-7.354 3.38-7.78 3.445l-.03.005l-.036.005C9.95 30 9.44 30 9.391 30h-1.04c-.31 0-.59-.2-.66-.49a.67.67 0 0 1 .02-.37l-.057-.021a.645.645 0 0 1-.393-.6c0-.2.09-.38.23-.5a.64.64 0 0 1-.49-.68a.67.67 0 0 1 .67-.6z"})])])],-1)),c(d(h),null,{default:s(()=>[a[42]||(a[42]=_(" Pregnancy or Breast Feeding ")),Ca.value?(o(),k("span",dt,[c(d(A),{size:"small",icon:d(de),style:{"margin-right":"3px"}},null,8,["icon"]),a[41]||(a[41]=_(" Completed "))])):p("",!0)]),_:1,__:[42]})])]),_:1}),u("div",rt,[u("div",null,[c(d(g),null,{default:s(()=>[c(d(b),null,{default:s(()=>[c(d(h),null,{default:s(()=>a[44]||(a[44]=[_("Pregnant")])),_:1,__:[44]})]),_:1}),c(d(b),null,{default:s(()=>[u("div",st,[c(d(q),{modelValue:d(Da).isPregnant,"onUpdate:modelValue":a[5]||(a[5]=e=>d(Da).isPregnant=e)},{default:s(()=>[c(d(R),{slot:"end",value:"yes"},{default:s(()=>a[45]||(a[45]=[_("Yes")])),_:1,__:[45]}),c(d(R),{slot:"end",style:{"margin-left":"20px"},value:"no"},{default:s(()=>a[46]||(a[46]=[_("No")])),_:1,__:[46]})]),_:1},8,["modelValue"])])]),_:1})]),_:1}),c(d(g),null,{default:s(()=>[c(d(b),null,{default:s(()=>[c(d(h),null,{default:s(()=>a[47]||(a[47]=[_("Breastfeeding")])),_:1,__:[47]})]),_:1}),c(d(b),null,{default:s(()=>[u("div",ct,[c(d(q),{modelValue:d(Da).isBreastFeeding,"onUpdate:modelValue":a[6]||(a[6]=e=>d(Da).isBreastFeeding=e)},{default:s(()=>[c(d(R),{slot:"end",value:"yes"},{default:s(()=>a[48]||(a[48]=[_("Yes")])),_:1,__:[48]}),c(d(R),{slot:"end",style:{"margin-left":"20px"},value:"no"},{default:s(()=>a[49]||(a[49]=[_("No")])),_:1,__:[49]})]),_:1},8,["modelValue"])])]),_:1})]),_:1}),d(Va)?p("",!0):(o(),k("div",ut,[c(d(F),{expand:"block",onClick:tl},{default:s(()=>a[50]||(a[50]=[_(" Continue ")])),_:1,__:[50]})]))])])]),_:1})):p("",!0),d(we).isFemale()?(o(),i(d(oe),{key:1,value:"contraceptives"},{default:s(()=>[c(d(L),{slot:"header"},{default:s(()=>[u("div",vt,[a[53]||(a[53]=u("div",{class:"section-icon"},[u("svg",{xmlns:"http://www.w3.org/2000/svg",width:"48",height:"48",viewBox:"0 0 48 48"},[u("path",{fill:"currentColor","fill-rule":"evenodd",d:"M16 7.152a2 2 0 0 1 1.347-1.89l3.018-1.043A4 4 0 0 1 21.671 4h4.658a4 4 0 0 1 1.306.22l3.018 1.042A2 2 0 0 1 32 7.152V11h-1.09a1 1 0 0 1-.206.607l-1.51 1.978l5.362 1.756A5 5 0 0 1 38 20.092V39a5 5 0 0 1-5 5H15a5 5 0 0 1-5-5V20.092a5 5 0 0 1 3.444-4.751l5.362-1.756l-1.51-1.978a1 1 0 0 1-.205-.607H16zM19.349 11h9.302l-1.046 1.371a2 2 0 0 0 .967 3.114l5.362 1.756A3 3 0 0 1 36 20.092V39a3 3 0 0 1-3 3H15a3 3 0 0 1-3-3V20.092a3 3 0 0 1 2.066-2.85l5.362-1.757a2 2 0 0 0 .967-3.114zm10.97 21.906A8 8 0 0 0 19.095 21.68l4.113 4.112l-1.414 1.414l-4.113-4.113A8 8 0 0 0 28.906 34.32l-3.113-3.112l1.414-1.414zM24 38c5.523 0 10-4.477 10-10s-4.477-10-10-10s-10 4.477-10 10s4.477 10 10 10m.567-11.99c-.27-.783-.01-1.843.737-2.687c.991-1.122 2.465-1.44 3.292-.71s.694 2.233-.298 3.355c-.648.735-1.504 1.124-2.25 1.101l-.002.005c-.207.347-.302.762-.384 1.176l-.01.045c-.074.38-.18.884-.672 1.394c-.504.523-1.431.707-2.398.872c-.641.11-.973.213-1.135.281c-.133.056-.263.351-.442.756c-.292.662-.713 1.617-1.49 2.302c-.11-.993.203-2.722.38-3.655a1.7 1.7 0 0 1 .606-.753c.473-.338 1.175-.532 2.08-.686c.835-.142 1.06-.321 1.115-.378c.047-.05.086-.11.174-.553l.01-.047c.08-.406.198-1.005.586-1.656a4 4 0 0 1 .1-.161","clip-rule":"evenodd"})])],-1)),c(d(h),null,{default:s(()=>{var e;return[a[52]||(a[52]=_(" Contraceptives ")),null!==(e=E.value)&&void 0!==e&&e.isContraceptivesSaved?(o(),k("span",pt,[c(d(A),{size:"small",icon:d(de),style:{"margin-right":"3px"}},null,8,["icon"]),a[51]||(a[51]=_(" Completed "))])):p("",!0)]}),_:1,__:[52]})])]),_:1}),u("div",mt,[c(ba,{"patient-i-d":Number(J.value),"provider-i-d":d(K),"location-i-d":d(ee),ref_key:"contraceptivesRef",ref:E,onOnSuccess:za},null,8,["patient-i-d","provider-i-d","location-i-d"])])]),_:1})):p("",!0),d(we).isFemale()&&ae.value?(o(),i(d(oe),{key:2,value:"cxca"},{default:s(()=>[c(d(L),{slot:"header"},{default:s(()=>[u("div",ft,[a[56]||(a[56]=u("div",{class:"section-icon"},[u("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},[u("g",{fill:"currentColor"},[u("path",{d:"M7.773 2.384L5.727 8.268a14.09 14.09 0 0 0 1.137 11.728l.504.864l-1.728 1.008l-.504-.864A16.09 16.09 0 0 1 3.838 7.61l2.046-5.884zm8.454 0l2.047 5.884a14.09 14.09 0 0 1-1.138 11.728l-.504.864l1.728 1.008l.504-.864A16.09 16.09 0 0 0 20.163 7.61l-2.047-5.884zM13 21v-5.086l3.207-3.207l-1.414-1.414L12 14.086l-2.793-2.793l-1.414 1.414L11 15.914V21z"}),u("path",{"fill-rule":"evenodd",d:"M11.633 3c-1.65 0-2.496 1.978-1.355 3.171l.684.715l-2.004 2.096l1.084 1.037L12 7.97l1.958 2.047l1.084-1.036l-2.004-2.096l.684-.715c1.14-1.193.296-3.17-1.355-3.17zm1.005 2.134L12 5.801l-.638-.667a.375.375 0 0 1 .27-.634h.735c.33 0 .5.396.271.634","clip-rule":"evenodd"})])])],-1)),c(d(h),null,{default:s(()=>[a[55]||(a[55]=_(" Cervical Cancer ")),M.value?(o(),k("span",gt,[c(d(A),{size:"small",icon:d(de),style:{"margin-right":"3px"}},null,8,["icon"]),a[54]||(a[54]=_(" Completed "))])):p("",!0)]),_:1,__:[55]})])]),_:1}),u("div",bt,[c(Fa,{"patient-i-d":Number(J.value),"provider-i-d":d(K),"location-i-d":d(ee),ref:"cxcaRef",onOnSuccess:Ba},null,8,["patient-i-d","provider-i-d","location-i-d"])])]),_:1})):p("",!0),c(d(oe),{value:"contraindications"},{default:s(()=>[c(d(L),{slot:"header"},{default:s(()=>[u("div",ht,[a[59]||(a[59]=u("div",{class:"section-icon"},[u("svg",{xmlns:"http://www.w3.org/2000/svg",width:"30",height:"30",viewBox:"0 0 16 16"},[u("path",{fill:"currentColor",d:"M3.001 3.999a1.001 1.001 0 0 1 1.836-.555a.5.5 0 1 0 .832-.555A2 2 0 0 0 2 3.999A2 2 0 0 0 4.078 6h3.259a5.5 5.5 0 0 1 3.151-1h-6.41l-.038.001L4.003 5A1 1 0 0 1 3 3.999m.495 3.003h2.76a5.5 5.5 0 0 0-.657 1H3.496a.5.5 0 1 1 0-1M2.501 9h2.706a5.5 5.5 0 0 0-.185 1h-2.52a.5.5 0 0 1 0-1m.995 2h1.526q.048.516.185 1H3.496a.5.5 0 0 1 0-1M7.5 3a.5.5 0 0 0 0 1h6a.5.5 0 1 0 0-1zm7.5 7.5a4.5 4.5 0 1 1-9 0a4.5 4.5 0 0 1 9 0m-4-2a.5.5 0 1 0-1 0V10H8.5a.5.5 0 0 0 0 1H10v1.5a.5.5 0 0 0 1 0V11h1.5a.5.5 0 1 0 0-1H11z"})])],-1)),c(d(h),null,{default:s(()=>[a[58]||(a[58]=_(" Contraindications/side effects ")),j.value?(o(),k("span",_t,[c(d(A),{size:"small",icon:d(de),style:{"margin-right":"3px"}},null,8,["icon"]),a[57]||(a[57]=_(" Completed "))])):p("",!0)]),_:1,__:[58]})])]),_:1}),u("div",yt,[u("div",wt,[c(d(g),null,{default:s(()=>[c(d(b),null,{default:s(()=>[c(d(h),null,{default:s(()=>a[60]||(a[60]=[_("Has side effects / contraindications")])),_:1,__:[60]})]),_:1}),c(d(b),null,{default:s(()=>[u("div",xt,[c(d(q),{modelValue:B.value,"onUpdate:modelValue":a[7]||(a[7]=e=>B.value=e)},{default:s(()=>[c(d(R),{slot:"end",value:"yes"},{default:s(()=>a[61]||(a[61]=[_("Yes")])),_:1,__:[61]}),c(d(R),{slot:"end",style:{"margin-left":"20px"},value:"no"},{default:s(()=>a[62]||(a[62]=[_("No")])),_:1,__:[62]})]),_:1},8,["modelValue"])])]),_:1})]),_:1}),"yes"===B.value?(o(),k("div",kt,[d(Ze)?(o(),k("div",Ct,[c(d(H),{name:"bubbles"}),a[63]||(a[63]=u("p",null,"Loading side effects data...",-1))])):p("",!0),u("div",St,[c(d(fe),{modelValue:U.value,"onUpdate:modelValue":a[8]||(a[8]=e=>U.value=e),onIonChange:Pa},{default:s(()=>[c(d(ge),{value:"contraindication"},{default:s(()=>[c(d(h),null,{default:s(()=>a[64]||(a[64]=[_("Side Effects/Contraindications")])),_:1,__:[64]})]),_:1}),c(d(ge),{value:"side_effect"},{default:s(()=>[c(d(h),null,{default:s(()=>a[65]||(a[65]=[_("Others")])),_:1,__:[65]})]),_:1})]),_:1},8,["modelValue"])]),c(la,{modelValue:d(Ge),"onUpdate:modelValue":a[9]||(a[9]=e=>ue(Ge)?Ge.value=e:null),"side-effect-options":d(We)},null,8,["modelValue","side-effect-options"])])):p("",!0),u("div",Dt,[c(d(F),{expand:"block",onClick:Ea},{default:s(()=>a[66]||(a[66]=[_(" Save and Continue ")])),_:1,__:[66]})])])])]),_:1}),c(d(oe),{value:"tb-therapy"},{default:s(()=>[c(d(L),{slot:"header"},{default:s(()=>[u("div",Vt,[a[69]||(a[69]=u("div",{class:"section-icon"},[u("svg",{xmlns:"http://www.w3.org/2000/svg",width:"25",height:"25",viewBox:"0 0 48 48"},[u("g",{fill:"currentColor","fill-rule":"evenodd","clip-rule":"evenodd"},[u("path",{d:"M35 30.5a2.5 2.5 0 1 1-5 0a2.5 2.5 0 0 1 5 0m-2 0a.5.5 0 1 1-1 0a.5.5 0 0 1 1 0"}),u("path",{d:"M23 20.5V6h2v14.5c0 1.398.564 1.942 1.004 2.199q.073.042.148.078l-.004-.377c-.038-3.528-.112-10.4 5.327-10.4c4.126 0 7.599 7.974 9.335 15.542c.11.263.175.55.188.849c1.232 5.783 1.415 11.14.057 12.27c-3.193 2.653-9.58 1.06-12.773-2.124c-2.578-2.57-2.355-8.578-2.195-12.891v-.002q.016-.393.028-.767a4.3 4.3 0 0 1-1.119-.45a3.8 3.8 0 0 1-.996-.835c-.297.352-.64.626-.996.834c-.4.234-.794.37-1.12.451l.029.769c.16 4.313.383 10.32-2.195 12.891c-3.193 3.185-9.58 4.777-12.773 2.123S9.075 12 16.525 12c5.439 0 5.365 6.872 5.327 10.4v.002l-.004.375q.075-.036.148-.078c.44-.257 1.004-.801 1.004-2.199m15.327 5.36l.038.144a2.5 2.5 0 1 0 1.065 4.817c.27 1.566.449 3.05.526 4.36c.079 1.332.049 2.413-.068 3.188a3.7 3.7 0 0 1-.206.828c-.96.73-2.598 1.022-4.633.628c-2.058-.4-4.076-1.43-5.355-2.704c-.443-.442-.84-1.172-1.137-2.261c-.293-1.076-.45-2.361-.517-3.761c-.066-1.393-.04-2.833.004-4.208l.04-1.126v-.003q.019-.472.034-.927A3.001 3.001 0 0 0 34 24a3 3 0 0 0-5.847-.95q0-.344-.005-.719c-.015-1.648-.034-3.691.411-5.466c.254-1.014.616-1.732 1.05-2.178c.375-.386.912-.687 1.866-.687c.319 0 .777.134 1.395.654c.412.346.846.824 1.289 1.434A2.503 2.503 0 0 0 31 18.5a2.5 2.5 0 0 0 4.917.642c.927 1.962 1.748 4.292 2.41 6.719m.666 2.723l-.08-.366a.5.5 0 1 0 .08.366M16.525 14c.954 0 1.49.3 1.866.687c.434.446.796 1.164 1.05 2.178c.445 1.775.426 3.817.41 5.465l-.004.816c0 .76.033 1.67.069 2.616l.04 1.129c.044 1.375.07 2.815.004 4.208c-.067 1.4-.224 2.685-.517 3.76c-.297 1.09-.694 1.82-1.137 2.262c-1.279 1.275-3.297 2.304-5.355 2.704c-2.035.394-3.673.102-4.633-.628l-.016-.04a3.7 3.7 0 0 1-.19-.788c-.117-.775-.147-1.856-.068-3.188c.157-2.65.727-6.012 1.63-9.32c.905-3.321 2.109-6.46 3.474-8.722c.683-1.133 1.357-1.96 1.982-2.485c.618-.52 1.076-.654 1.395-.654M33.5 19a.5.5 0 1 0 0-1a.5.5 0 0 0 0 1M32 24a1 1 0 1 1-2 0a1 1 0 0 1 2 0"})])])],-1)),c(d(h),null,{default:s(()=>[a[68]||(a[68]=_(" TB Preventive Therapy ")),W.value?(o(),k("span",Tt,[c(d(A),{size:"small",icon:d(de),style:{"margin-right":"3px"}},null,8,["icon"]),a[67]||(a[67]=_(" Completed "))])):p("",!0)]),_:1,__:[68]})])]),_:1}),u("div",It,[d(ga)?(o(),k("div",Nt,[c(d(H),{name:"bubbles"}),a[70]||(a[70]=u("p",null,"Loading side effects data...",-1))])):p("",!0),u("div",Pt,[u("div",Et,[a[73]||(a[73]=u("label",{class:"form-label required"},"On TB treatment?",-1)),u("div",Mt,[c(d(q),{modelValue:d(aa),"onUpdate:modelValue":a[10]||(a[10]=e=>ue(aa)?aa.value=e:null)},{default:s(()=>[u("div",Ot,[c(d(R),{value:"Yes"}),c(d(h),null,{default:s(()=>a[71]||(a[71]=[_("Yes")])),_:1,__:[71]})]),u("div",Ft,[c(d(R),{value:"No"}),c(d(h),null,{default:s(()=>a[72]||(a[72]=[_("No")])),_:1,__:[72]})])]),_:1},8,["modelValue"])])]),"yes"===d(aa).toLowerCase()&&"unknown"!==d(aa).toLowerCase()?(o(),k("div",At,[a[76]||(a[76]=u("label",{class:"form-label required"},"TB Treatment Start Date",-1)),c(d(g),null,{default:s(()=>[c(d(b),{size:"10"},{default:s(()=>[c(qe,{place_holder:"enter data",onDateUpDated:[()=>{},a[11]||(a[11]=e=>{na.value={day:e.value.day,month:e.value.month,year:e.value.year}})],date_prop:""})]),_:1}),c(d(b),{size:"2"},{default:s(()=>[c(d(F),{fill:"clear","start-icon":d(be),onClick:a[12]||(a[12]=e=>ca.value=!0)},{default:s(()=>a[74]||(a[74]=[_("Estimate")])),_:1,__:[74]},8,["start-icon"])]),_:1})]),_:1}),d(ca)?(o(),k("div",zt,[c(Oe,{bold:"bold","input-header":`Estimate number of ${d(da).name}`,"input-value":d(ua),"onUpdate:inputValue":[a[13]||(a[13]=e=>ue(ua)?ua.value=e:null),a[14]||(a[14]=e=>ua.value=e.target.value)],showAsterisk:"",placeholder:"",unitsData:{isSingleSelect:!0,multiSelectData:d(ia).map(e=>({name:e})),value:d(da),trackBy:"name"},"onUpdate:units":a[15]||(a[15]=e=>da.value=e)},null,8,["input-header","input-value","unitsData"])])):p("",!0),u("div",Bt,[a[75]||(a[75]=u("label",{position:"stacked",class:"form-label required"},"Treatment Period",-1)),c(Fe,{placeholder:"",inputValue:d(ta),unit:"Months",icon:d(he),type:"number"},null,8,["inputValue","icon"])])])):"no"===d(aa).toLowerCase()&&"unknown"!==d(aa).toLowerCase()?(o(),k("div",Lt,[u("div",qt,[a[77]||(a[77]=u("h4",null,"TB Associated Symptoms",-1)),c(oa,{modelValue:d(_a),"onUpdate:modelValue":a[16]||(a[16]=e=>ue(_a)?_a.value=e:null),"tb-symptom-options":d(ha)},null,8,["modelValue","tb-symptom-options"])]),u("div",Rt,[c(d(g),null,{default:s(()=>[c(d(b),null,{default:s(()=>a[78]||(a[78]=[u("label",{class:"form-label required"},"CXR (Chest X-ray) Screening Method Result",-1)])),_:1,__:[78]}),c(d(b),null,{default:s(()=>[u("div",Ht,[c(d(q),{modelValue:ya.value,"onUpdate:modelValue":a[17]||(a[17]=e=>ya.value=e)},{default:s(()=>[u("div",Ut,[c(d(R),{value:"normal"}),c(d(h),null,{default:s(()=>a[79]||(a[79]=[_("Normal")])),_:1,__:[79]})]),u("div",jt,[c(d(R),{value:"abnormal"}),c(d(h),null,{default:s(()=>a[80]||(a[80]=[_("Abnormal")])),_:1,__:[80]})]),u("div",$t,[c(d(R),{value:"unknown"}),c(d(h),null,{default:s(()=>a[81]||(a[81]=[_("Unknown/Not Done")])),_:1,__:[81]})])]),_:1},8,["modelValue"])])]),_:1})]),_:1}),c(d(g),null,{default:s(()=>[c(d(b),null,{default:s(()=>a[82]||(a[82]=[u("label",{class:"form-label required"},"mWRD (Molecular WHO Recommended Rapid Diagnostic Test) Screening Method Result",-1)])),_:1,__:[82]}),c(d(b),null,{default:s(()=>[u("div",Wt,[c(d(q),{modelValue:wa.value,"onUpdate:modelValue":a[18]||(a[18]=e=>wa.value=e)},{default:s(()=>[u("div",Yt,[c(d(R),{value:"negative"}),c(d(h),null,{default:s(()=>a[83]||(a[83]=[_("Negative")])),_:1,__:[83]})]),u("div",Qt,[c(d(R),{value:"positive"}),c(d(h),null,{default:s(()=>a[84]||(a[84]=[_("Positive")])),_:1,__:[84]})]),u("div",Gt,[c(d(R),{value:"unknown"}),c(d(h),null,{default:s(()=>a[85]||(a[85]=[_("Unknown/Not Done")])),_:1,__:[85]})])]),_:1},8,["modelValue"])])]),_:1})]),_:1})]),d(pa)(al.value,d(_a))?(o(),k("div",Zt,[u("div",null,[a[86]||(a[86]=u("label",{class:"form-label"},"TB Status",-1)),u("div",Xt,[c(d(ce),{modelValue:xa.value,"onUpdate:modelValue":a[19]||(a[19]=e=>xa.value=e),multiple:!1,taggable:!1,"hide-selected":!1,"close-on-select":!0,openDirection:"bottom","tag-placeholder":"",placeholder:"Select TB status",selectLabel:"",label:"name",searchable:!0,"track-by":"assigned_id",options:d(va).map(e=>({name:e,assigned_id:e})),disabled:!1},null,8,["modelValue","options"])])])])):p("",!0)])):p("",!0),"unknown"!==d(aa).toLowerCase()?(o(),k("div",Jt,[a[87]||(a[87]=u("label",{class:"form-label required"},"TB preventive therapy (TPT) history",-1)),u("div",null,[c(d(ce),{modelValue:ka.value,"onUpdate:modelValue":a[20]||(a[20]=e=>ka.value=e),multiple:!1,taggable:!1,"hide-selected":!0,"close-on-select":!0,openDirection:"bottom","tag-placeholder":"",placeholder:"Select option",selectLabel:"",label:"name",searchable:!0,"track-by":"assigned_id",options:d(ma).map(e=>({name:e,assigned_id:e})),disabled:!1},null,8,["modelValue","options"])]),Be.value?(o(),k("div",Kt,[c(d(r),null,{default:s(()=>[c(d(v),null,{default:s(()=>{var e,a;return[(o(),i(La,{ref_key:"tptTransferForm",ref:ze,drugNameFilters:Le.value,key:null!==(e=null===(a=ka.value)||void 0===a?void 0:a.name)&&void 0!==e?e:"",patientId:J.value},null,8,["drugNameFilters","patientId"]))]}),_:1})]),_:1})])):p("",!0)])):p("",!0),u("div",el,[c(d(F),{expand:"block",onClick:ll},{default:s(()=>a[88]||(a[88]=[_(" Save and Continue ")])),_:1,__:[88]})])])])]),_:1})]),_:1},8,["value"])]),_:1})]),_:1}))}}),[["__scopeId","data-v-cdd3625b"]]))}}});
