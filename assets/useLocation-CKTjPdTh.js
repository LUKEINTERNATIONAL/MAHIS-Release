import{d as L,S as e,L as i,n as o}from"./index-Dxep0tg5.js";import{r as s,c as P,w as h}from"./vendor-CwRShy1a.js";function m(){const n=s([]),c=s([]),l=s([]),u=s([]),g=s(null),f=s([]),D=s([]),v=s(null),d=s(null),r=s(!1),w=L(),A=P(()=>w.apiStatus);h(v,async t=>{if(t)try{c.value=await S(t)}catch(a){c.value=[]}else c.value=[]}),h(d,async t=>{if(t)try{l.value=await y(t)}catch(a){l.value=[]}else l.value=[]});const y=async t=>{try{return e.getAPIStatus()&&!e.getLanConnectionStatus()&&!e.getPouchDbStatus()?await i.getVillages(t):await o("villages",{selector:{traditional_authority_id:t}})}catch(a){return console.error("Error getting villages:",a),[]}},S=async t=>{try{return e.getAPIStatus()&&!e.getLanConnectionStatus()&&!e.getPouchDbStatus()?await i.getTraditionalAuthorities(t):await o("traditional_authorities",{selector:{district_id:t}})}catch(a){return console.error("Error getting TAs:",a),[]}};return{districtList:n,countriesList:u,locations:D,isLoading:r,selectedDistrictId:v,TAs:c,villages:l,selectedTraditionalAuthorityId:d,facilityList:f,countryID:g,apiStatus:A,getVillages:y,getTAs:S,getDistricts:async()=>{r.value=!0;try{if(e.getAPIStatus()&&!e.getLanConnectionStatus()&&!e.getPouchDbStatus())for(let t of[1,2,3]){const a=await i.getDistricts(t);n.value.push(...a)}else n.value=await o("districts",{selector:{region_id:{$ne:4}}});return n.value}catch(t){console.error("Error loading location data:",t)}finally{r.value=!1}},getCountries:async()=>{r.value=!0;try{return e.getAPIStatus()&&!e.getLanConnectionStatus()&&!e.getPouchDbStatus()?u.value=await i.getDistricts(4):u.value=await o("districts",{selector:{region_id:4}}),u.value}catch(t){console.error("Error loading location data:",t)}finally{r.value=!1}},getFacilities:async()=>{f.value=await i.getAllFacilities()},getCountryID:async t=>{let a;e.getAPIStatus()&&!e.getLanConnectionStatus()&&!e.getPouchDbStatus()?a=await i.getDistricts(4,t):a=await o("countries",{selector:{region_id:4,name:t}}),g.value=a[0].district_id}}}export{m as u};
