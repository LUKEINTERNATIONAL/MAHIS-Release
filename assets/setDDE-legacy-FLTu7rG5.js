System.register(["./vendor-legacy-COMGl7lq.js","./OutcomeModal-legacy-D1g9fUQK.js","./index-legacy-CxlM2t-h.js","./FacilityInformationBar-legacy-CTnbivRH.js","./lodash-legacy-C-x9g9Na.js"],(function(e,t){"use strict";var a,d,s,l,n,o,i,u,r,c,_,f,D,p,g,h,y,m,S,b,v,E,w,x,I,C,H,P,L,$,k,F,M,j,B,T,z,A,U,V,Y,G;return{setters:[e=>{a=e.d,d=e.al,s=e.cz,l=e.au,n=e.V,o=e.U,i=e.T,u=e.am,r=e.an,c=e.G,_=e.S,f=e.ao,D=e.O,p=e.E,g=e.y,h=e.f,y=e.z,m=e.e,S=e.m,b=e.l,v=e.k,E=e.A,w=e.B,x=e.p},e=>{I=e.D},e=>{C=e.w,H=e.T,P=e.B,L=e.H,$=e.y,k=e.S,F=e.k,M=e.t,j=e.x,B=e.E,T=e.g,z=e.F,A=e.s,U=e.G,V=e.i,Y=e._},e=>{G=e.F},null],execute:function(){var t=document.createElement("style");t.textContent=".ddeStatusContent[data-v-b3fd4877]{font-weight:700;font-size:16px;padding:2px}.ddeStatusHeader[data-v-b3fd4877]{font-size:16px;padding:2px}.demographics_title[data-v-b3fd4877]{font-weight:700;font-size:24px}.gender[data-v-b3fd4877]{display:flex;justify-content:space-between;max-width:170px;padding-top:10px}.gender_title[data-v-b3fd4877]{margin-top:30px}.positionCenter[data-v-b3fd4877]{width:100%;margin-top:20px;display:flex;justify-content:center;align-items:center}\n/*$vite$:1*/",document.head.appendChild(t);const N=a({name:"Menu",components:{IonContent:f,IonHeader:_,IonItem:c,IonList:r,IonMenu:u,IonTitle:i,IonToolbar:o,BasicForm:P,Toolbar:H,DynamicButton:C,IonFooter:n,IonPage:l,FacilityInformationBar:G,IonToggle:s},data:()=>({cardData:{},inputField:"",isDDEEnabled:!0,setName:"",initialPersonalData:[],iconsContent:V,apiDate:"",date:"",DDE:{},isLoading:!1}),computed:{...d(U,["sessionDate"]),...d(A,["globalPropertyStore"])},watch:{globalPropertyStore:{async handler(){await this.setDDEStatus()},deep:!0},$route:{async handler(){await this.ddeData()},deep:!0}},async mounted(){try{this.isLoading=!1,await A().loadDDEStatus(),this.apiDate=await k.getApiDate(),await this.ddeData(),this.date=$(this.sessionDate,"sessionDate","value"),this.isLoading=!1}catch(e){console.log(e)}},methods:{async setDDEStatus(){const e=A();await e.setGlobalProperty("dde_enabled",`${this.globalPropertyStore.dde_enabled}`),await this.ddeData()},async ddeData(){if("true"===this.globalPropertyStore.dde_enabled)try{const e=(await z.getRemainingNpids()).npid_status[0],t=e.unassigned,a=e.avg_consumption_rate_per_day||1;this.DDE={id:e.location_id,avg:a,unassigned:e.unassigned,assigned:e.assigned,daysLeft:Math.floor(t/a),allocated:e.allocated,unallocated:e.unallocated,lastUpdated:D(e.date_last_updated).format("DD/MMM/YYYY HH:mm:ss"),title:e.location_name+" DDE NPID Status"}}catch(e){}},openModal(){T(I)},S(e){return B(this.sessionDate,e.name,this[e.name])},handleInputData(){},async resetSessionDate(){j(this.sessionDate,"sessionDate","value","");try{await k.resetSessionDate(),F(`Session date has been reset to ${this.formatDate(this.apiDate)}`),this.redirect()}catch(e){M(`${e}`)}},redirect(){this.$router.back()},async onSubmit(){this.date=$(this.sessionDate,"sessionDate","value"),console.log("ðŸš€ ~ onSubmit ~ date:",this.date);try{await k.setSessionDate(this.date),F(`Successfully Back dated to ${this.formatDate(this.date)}`),this.redirect()}catch(e){M(`${e}`)}},formatDate:e=>L.toStandardHisDisplayFormat(e)}}),O={key:0,class:"spinner-overlay"},R={key:0,class:"positionCenter"},q={class:"card_content"},J={key:1,class:"positionCenter"},K={class:"card_content"},Q={class:"card_hearder"},W={key:2};e("default",Y(N,[["render",function(e,t,a,d,s,l){const n=p("ion-spinner"),o=p("Toolbar"),i=p("ion-toggle"),u=p("ion-card"),r=p("ion-row"),c=p("ion-col"),_=p("ion-content"),f=p("ion-page");return h(),g(f,{class:x({loading:e.isLoading})},{default:y((()=>[e.isLoading?(h(),m("div",O,[b(n,{name:"bubbles"}),t[1]||(t[1]=v("div",{class:"loading-text"},"Please wait...",-1))])):S("",!0),b(o),b(_,{fullscreen:!0},{default:y((()=>[e.globalPropertyStore.dde_enabled?S("",!0):(h(),m("div",R,[b(u,{class:"registration_ion_card"},{default:y((()=>[v("div",q,[t[3]||(t[3]=v("div",{class:"card_hearder"},"Set DDE",-1)),b(i,{"enable-on-off-labels":!0,modelValue:e.globalPropertyStore.dde_enabled,"onUpdate:modelValue":t[0]||(t[0]=t=>e.globalPropertyStore.dde_enabled=t)},{default:y((()=>t[2]||(t[2]=[E("Enable DDE")]))),_:1,__:[2]},8,["modelValue"])])])),_:1})])),"true"==e.globalPropertyStore.dde_enabled?(h(),m("div",J,[b(u,{class:"registration_ion_card"},{default:y((()=>[v("div",K,[v("div",Q,w(e.DDE.title),1),b(r,null,{default:y((()=>[b(c,null,{default:y((()=>[b(r,{class:"ddeStatusHeader"},{default:y((()=>t[4]||(t[4]=[E("Location ID")]))),_:1,__:[4]})])),_:1}),b(c,null,{default:y((()=>[b(r,{class:"ddeStatusContent"},{default:y((()=>[E(w(e.DDE.id),1)])),_:1})])),_:1})])),_:1}),b(r,null,{default:y((()=>[b(c,null,{default:y((()=>[b(r,{class:"ddeStatusHeader"},{default:y((()=>t[5]||(t[5]=[E("Estimated days left")]))),_:1,__:[5]})])),_:1}),b(c,null,{default:y((()=>[b(r,{class:"ddeStatusContent"},{default:y((()=>[E(w(e.DDE.avg),1)])),_:1})])),_:1})])),_:1}),b(r,null,{default:y((()=>[b(c,null,{default:y((()=>[b(r,{class:"ddeStatusHeader"},{default:y((()=>t[6]||(t[6]=[E("Unassigned")]))),_:1,__:[6]})])),_:1}),b(c,null,{default:y((()=>[b(r,{class:"ddeStatusContent"},{default:y((()=>[E(w(e.DDE.unassigned),1)])),_:1})])),_:1})])),_:1}),b(r,null,{default:y((()=>[b(c,null,{default:y((()=>[b(r,{class:"ddeStatusHeader"},{default:y((()=>t[7]||(t[7]=[E("Assigned")]))),_:1,__:[7]})])),_:1}),b(c,null,{default:y((()=>[b(r,{class:"ddeStatusContent"},{default:y((()=>[E(w(e.DDE.assigned),1)])),_:1})])),_:1})])),_:1}),b(r,null,{default:y((()=>[b(c,null,{default:y((()=>[b(r,{class:"ddeStatusHeader"},{default:y((()=>t[8]||(t[8]=[E("Unallocated")]))),_:1,__:[8]})])),_:1}),b(c,null,{default:y((()=>[b(r,{class:"ddeStatusContent"},{default:y((()=>[E(w(e.DDE.unallocated),1)])),_:1})])),_:1})])),_:1}),b(r,null,{default:y((()=>[b(c,null,{default:y((()=>[b(r,{class:"ddeStatusHeader"},{default:y((()=>t[9]||(t[9]=[E("Allocated")]))),_:1,__:[9]})])),_:1}),b(c,null,{default:y((()=>[b(r,{class:"ddeStatusContent"},{default:y((()=>[E(w(e.DDE.allocated),1)])),_:1})])),_:1})])),_:1}),b(r,null,{default:y((()=>[b(c,null,{default:y((()=>[b(r,{class:"ddeStatusHeader"},{default:y((()=>t[10]||(t[10]=[E("Average consumption per day")]))),_:1,__:[10]})])),_:1}),b(c,null,{default:y((()=>[b(r,{class:"ddeStatusContent"},{default:y((()=>[E(w(e.DDE.daysLeft),1)])),_:1})])),_:1})])),_:1}),b(r,null,{default:y((()=>[b(c,null,{default:y((()=>[b(r,{class:"ddeStatusHeader"},{default:y((()=>t[11]||(t[11]=[E("Last update")]))),_:1,__:[11]})])),_:1}),b(c,null,{default:y((()=>[b(r,{class:"ddeStatusContent"},{default:y((()=>[E(w(e.DDE.lastUpdated),1)])),_:1})])),_:1})])),_:1})])])),_:1})])):(h(),m("div",W,t[12]||(t[12]=[v("div",{class:"card_hearder"},"DDE is disabled",-1)])))])),_:1})])),_:1},8,["class"])}],["__scopeId","data-v-b3fd4877"]]))}}}));
