System.register(["./vendor-legacy-CJZC4Dfn.js","./index-legacy-C4TpyYf0.js","./patient_registration_service-legacy-Mx4FIdXX.js","./BasicForm-legacy-BeH0bYcY.js","./relationship_service-legacy-yQf0WxNj.js","./relations_service-legacy-BdwH_86m.js","./DateInputField-legacy-BTZtAXOJ.js","./FollowUpStore-legacy-Cue2pmvD.js","./BirthRegistration.vue_vue_type_script_setup_true_lang-legacy-Dnx3SFqT.js","./Outcome-legacy-CdMCrs2f.js","./index-legacy-C9669fRm.js","./lodash-legacy-pOOc9Efu.js"],function(e,t){"use strict";var a,n,i,l,o,r,s,d,u,c,p,v,m,f,g,h,_,b,y,x,w,I,D,k,C,P,N,L,S,O,j,z,R,B,V,F,G,H,T,E,M,A,U,q,$,Q,X,J,K,W,Y,Z,ee,te,ae,ne,ie,le,oe,re,se,de,ue,ce,pe,ve,me,fe,ge,he,_e,be,ye,xe,we,Ie,De,ke,Ce,Pe,Ne,Le,Se,Oe,je,ze,Re,Be,Ve,Fe,Ge;return{setters:[e=>{a=e.d,n=e.ar,i=e.br,l=e.c2,o=e.V,r=e.cz,s=e.cy,d=e.a6,u=e.a3,c=e.D,p=e.ab,v=e.aa,m=e.a0,f=e.I,g=e.U,h=e.T,_=e.af,b=e.be,y=e.bf,x=e.S,w=e.a9,I=e.X,D=e.aS,k=e.cc,C=e.dv,P=e.bp,N=e.dF,L=e.E,S=e.e,O=e.f,j=e.l,z=e.z,R=e.A,B=e.k,V=e.F,F=e.r,G=e.u,H=e.bc,T=e.W,E=e.a8,M=e.au,A=e.b1,U=e.c,q=e.a,$=e.w,Q=e.ap,X=e.ac,J=e.m,K=e.G,W=e.B,Y=e.aB,Z=e.dn,ee=e.aX,te=e.aK,ae=e.bu,ne=e.L,ie=e.dG,le=e.b9},e=>{oe=e.B,re=e.D,se=e.y,de=e.P,ue=e.u,ce=e.at,pe=e.x,ve=e.ab,me=e.L,fe=e.j,ge=e.t,he=e.ae,_e=e._,be=e.a2,ye=e.a0,xe=e.f,we=e.a3,Ie=e.S},e=>{De=e.P},e=>{ke=e.B},e=>{Ce=e.R},e=>{Pe=e.R},e=>{Ne=e.D},e=>{Le=e.u},e=>{Se=e.e,Oe=e.d,je=e._,ze=e.a,Re=e.b,Be=e.c},e=>{Ve=e.O},e=>{Fe=e.c,Ge=e.b},null],execute:function(){var t=document.createElement("style");t.textContent=".custom-dropdown .vs__selected-options[data-v-a10cb2a3],.custom-dropdown .vs__dropdown-option[data-v-a10cb2a3]{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.custom-dropdown .vs__dropdown-menu[data-v-a10cb2a3]{max-height:150px;overflow-y:auto;background-color:red}.PI-cls-1[data-v-a10cb2a3]{cursor:pointer}.lbl-tl[data-v-a10cb2a3]{min-width:20px;color:#b3b3b3!important;white-space:nowrap}.form-row[data-v-a10cb2a3]{display:flex;align-items:center}.lbl-ct[data-v-a10cb2a3]{white-space:nowrap;color:#636363;flex:1}pim-cls-1[data-v-a10cb2a3]{--background: #ffff}.custom-toolbar-cls[data-v-a10cb2a3]{--background: #ffff}ion-footer[data-v-a10cb2a3]{--ion-toolbar-background: #fff}ion-modal[data-v-a10cb2a3]{--width: 94%;--height: 70%;--border-radius: 10px}.dashed-hr[data-v-a10cb2a3]{border:none;border-top:1px dashed #b3b3b3;margin:20px 0}.modal_wrapper[data-v-a10cb2a3]{padding:0 1px;background:#fff}.PI-cls-1[data-v-a10cb2a3]{color:rgba(31,34,33,.83)}.OtherVitalsTitle[data-v-a10cb2a3]{font-style:normal;font-weight:600;font-size:20px;color:#00190e}.OtherVitalsHeading[data-v-a10cb2a3]{display:flex;justify-content:center;margin:10px}ion-accordion[data-v-a10cb2a3]{margin-bottom:15px}ion-card[data-v-28e133b4]{margin:16px 0;border-radius:12px}.sub-menu-icon[data-v-28e133b4]{font-size:1.2rem}ion-item[data-v-28e133b4]{--padding-start: 8px;margin:8px 0}.current-ncd-item[data-v-28e133b4]{--background: var(--ion-color-success-tint);border-radius:8px;margin:8px 0;border-left:4px solid var(--ion-color-primary)}.current-ncd-item ion-label h2[data-v-28e133b4]{font-weight:600;color:var(--ion-color-primary)}.current-ncd-item ion-label p[data-v-28e133b4]{font-size:1.1em;margin-top:4px;color:var(--ion-color-dark)}.custom-input[data-v-28e133b4]{--padding-start: 0;font-size:1.5em}.prefix-container[data-v-28e133b4]{display:flex;align-items:center;height:100%}.prefix-part[data-v-28e133b4]{border:none;background:#f0f0f0;padding:0 8px;border-right:1px solid #ccc;color:var(--ion-color-dark);font-weight:600}.error-message[data-v-28e133b4]{display:flex;align-items:center;justify-content:space-between;padding:8px 16px;margin-top:8px;background-color:rgba(255,0,0,.1);border-radius:4px}.error-content[data-v-28e133b4]{display:flex;align-items:center;gap:8px}.close-button[data-v-28e133b4]{margin-left:auto}#container[data-v-777d67d0]{font-family:monospace;font-size:24px;overflow:hidden;padding:15px;width:594px}ul[data-v-777d67d0],ol[data-v-777d67d0]{list-style-type:none;padding-left:0;margin:0}\n/*$vite$:1*/",document.head.appendChild(t),e("u",function(){const e=F(le.isNativePlatform()),t=F([]),a=F(null),n=F(!1),i=F(null),l=ue().patient;return{isMobile:e,visits:t,event:a,popoverOpen:n,program:i,patient:l,openPopover:e=>{a.value=e,n.value=!0},openPIM:()=>{xe($e,{class:"otherVitalsModal largeModal"})},openOutCome:()=>{xe(Ye,{class:"large-modal-x10"})},printVisitSummary:async()=>{1==Ie.getProgramID()?await Ge():32==Ie.getProgramID()?await async function(){await Fe(Rt,{copies:1})}():(new we).printData("visit")},printID:()=>{(new we).printData("barcode")},formatCurrentAddress:e=>{var t,a,n;return[null==e||null===(t=e.personInformation)||void 0===t?void 0:t.current_district,null==e||null===(a=e.personInformation)||void 0===a?void 0:a.current_traditional_authority,null==e||null===(n=e.personInformation)||void 0===n?void 0:n.current_village].filter(Boolean).join(",")},openUpdateNCDNUmbers:()=>{xe(ht,{class:"large-modal-x10"})}}});const He=a({name:"Home",username:"",components:{IonContent:w,IonHeader:x,IonMenuButton:y,IonSearchbar:b,IonPage:_,IonTitle:h,IonToolbar:g,ToolbarSearch:se,IonIcon:f,IonPopover:m,IonRow:v,IonCol:p,IonLabel:c,IonInput:u,IonDatetime:d,IonSelect:s,IonSelectOption:r,IonFooter:o,DynamicButton:re,BasicInputField:oe,vSelect:l,VueMultiselect:i,DateInputField:Ne,BasicForm:ke,PersonalInformation:Be,GuardianInformation:Re,CurrentLocation:ze,HomeLocation:je,SocialHistory:Oe,BirthRegistration:Se},data:()=>({popoverOpen:!1}),computed:{...n(Le,["changeGuardianInfo","vaccineAdverseEffects","protectedAtBirth"]),...n(ue,["patient"]),...n(he,["personInformation","socialHistory","homeLocation","currentLocation","guardianInformation"])},watch:{patient:{handler(){},immediate:!0}},setup:()=>({notificationsOutline:N,personCircleOutline:P,createOutline:C,clipboardOutline:k,calendarOutline:D}),methods:{handleCancel(){I.dismiss()},async saveDetails(){try{await this.updateDemographics(),await this.updateGuardian(),await this.updatePatientDemographics(),fe("Successfully Updated Patient"),this.handleCancel()}catch(e){ge("Failed to save details")}},async getRegion(e){let t=[];for(let a of[1,2,3]){if((a=1)&&(t=await me.getDistricts(a)),t.some(t=>t.name.trim()===e))return"Central Region";if((a=2)&&(t=await me.getDistricts(a)),t.some(t=>t.name.trim()===e))return"Northern Region";if((a=3)&&(t=await me.getDistricts(a)),t.some(t=>t.name.trim()===e))return"Southern Region";if((a=4)&&(t=await me.getDistricts(a)),t.some(t=>t.name.trim()===e))return"Foreign"}},async updateDemographics(){var e,t,a,n,i,l,o,r,s,d;const u={person_id:this.patient.patientID,given_name:pe(this.personInformation,"firstname","value"),family_name:pe(this.personInformation,"lastname","value"),middle_name:pe(this.personInformation,"middleName","value"),gender:ve(this.personInformation,"gender"),birthdate:pe(this.personInformation,"birthdate","value"),cell_phone_number:pe(this.personInformation,"phoneNumber","value"),birthdate_estimated:!1,home_region:await this.getRegion(null===(e=pe(this.homeLocation,"home_district","value"))||void 0===e?void 0:e.name),home_district:null===(t=pe(this.homeLocation,"home_district","value"))||void 0===t?void 0:t.name,home_traditional_authority:null===(a=pe(this.homeLocation,"home_traditional_authority","value"))||void 0===a?void 0:a.name,home_village:null===(n=pe(this.homeLocation,"home_village","value"))||void 0===n?void 0:n.name,current_region:await this.getRegion(null===(i=pe(this.currentLocation,"current_district","value"))||void 0===i?void 0:i.name),current_district:null===(l=pe(this.currentLocation,"current_district","value"))||void 0===l?void 0:l.name,current_traditional_authority:null===(o=pe(this.currentLocation,"current_traditional_authority","value"))||void 0===o?void 0:o.name,current_village:null===(r=pe(this.currentLocation,"current_village","value"))||void 0===r?void 0:r.name,landmark:null===(s=pe(this.currentLocation,"current_village","value"))||void 0===s?void 0:s.name,occupation:ve(this.socialHistory,"occupation"),religion:null===(d=pe(this.socialHistory,"religion","value"))||void 0===d?void 0:d.name,marital_status:ve(this.socialHistory,"maritalStatus"),education_level:ve(this.socialHistory,"highestLevelOfEducation"),facility_name:"",patient_type:""};await this.updatePerson(this.patient.patientID,u)},async updateGuardian(){var e;let t={given_name:pe(this.guardianInformation,"guardianFirstname","value"),family_name:pe(this.guardianInformation,"guardianLastname","value"),middle_name:pe(this.guardianInformation,"guardianMiddleName","value"),cell_phone_number:pe(this.guardianInformation,"guardianPhoneNumber","value"),gender:"",birthdate:"",birthdate_estimated:!1,home_district:"",home_traditional_authority:"",home_village:"",current_district:"",current_traditional_authority:"",current_village:"",landmark:"",occupation:"",religion:"",marital_status:"",education_level:"",facility_name:"",patient_type:"",national_id:""},a=await Ce.getRelationships(this.patient.patientID);const n=null===(e=pe(this.guardianInformation,"relationship","value"))||void 0===e?void 0:e.id;if(n)if(a.length>0){var i;const e=await Ce.getRelationships(this.patient.patientID);await Pe.amendRelation(this.patient.patientID,a[0].person_b,a[0].relationship_id,n),await this.updatePerson(null===(i=e[0])||void 0===i?void 0:i.person_b,t)}else{const e=new De;await e.registerGuardian(t);const a=e.getPersonID();await Pe.createRelation(this.patient.patientID,a,n)}},async updatePerson(e,t){const a=new ce(t);await a.update(e)},async updatePatientDemographics(){const e=await de.findByID(this.patient.patientID);ue().setPatientRecord(e)},patientIdentifier(e){const t=e.patient_identifiers.length-1;return t>=0?e.patient_identifiers[t].identifier:""}}}),Te={class:"ion-padding",slot:"content",style:{"padding-bottom":"200px"}},Ee={class:"ion-padding",slot:"content",style:{"padding-bottom":"200px"}},Me={class:""},Ae={class:"ion-padding",slot:"content",style:{"padding-bottom":"120px"}},Ue={class:"ion-padding",slot:"content",style:{"padding-bottom":"120px"}},qe={class:"ion-padding",slot:"content",style:{"padding-bottom":"120px"}},$e=e("p",_e(He,[["render",function(e,t,a,n,i,l){const o=L("ion-title"),r=L("ion-header"),s=L("ion-label"),d=L("ion-item"),u=L("PersonalInformation"),c=L("ion-accordion"),p=L("GuardianInformation"),v=L("SocialHistory"),m=L("CurrentLocation"),f=L("HomeLocation"),g=L("ion-accordion-group"),h=L("ion-content"),_=L("ion-button"),b=L("ion-col"),y=L("DynamicButton"),x=L("ion-row"),w=L("ion-footer");return O(),S(V,null,[j(r,null,{default:z(()=>[j(o,{class:"modalTitle"},{default:z(()=>t[1]||(t[1]=[R("Edit Patient Demographics")])),_:1,__:[1]})]),_:1}),j(h,{fullscreen:!0,class:"ion-padding",style:{"--background":"#fff"}},{default:z(()=>[j(g,{ref:"accordionGroup",class:"previousView"},{default:z(()=>[j(c,{value:"first","toggle-icon-slot":"start",class:"custom_card"},{default:z(()=>[j(d,{slot:"header",color:"light"},{default:z(()=>[j(s,{class:"previousLabel"},{default:z(()=>t[2]||(t[2]=[R("Personal information")])),_:1,__:[2]})]),_:1}),B("div",Te,[j(u,{editable:!0})])]),_:1}),j(c,{value:"second","toggle-icon-slot":"start",class:"custom_card"},{default:z(()=>[j(d,{slot:"header",color:"light"},{default:z(()=>[j(s,{class:"previousLabel"},{default:z(()=>t[3]||(t[3]=[R("Guardian")])),_:1,__:[3]})]),_:1}),B("div",Ee,[B("div",Me,[j(p,{editable:!0})])])]),_:1}),j(c,{value:"third","toggle-icon-slot":"start",class:"custom_card"},{default:z(()=>[j(d,{slot:"header",color:"light"},{default:z(()=>[j(s,{class:"previousLabel"},{default:z(()=>t[4]||(t[4]=[R("Social history")])),_:1,__:[4]})]),_:1}),B("div",Ae,[j(v,{editable:!0})])]),_:1}),j(c,{value:"four","toggle-icon-slot":"start",class:"custom_card"},{default:z(()=>[j(d,{slot:"header",color:"light"},{default:z(()=>[j(s,{class:"previousLabel"},{default:z(()=>t[5]||(t[5]=[R("Current location")])),_:1,__:[5]})]),_:1}),B("div",Ue,[j(m,{editable:!0})])]),_:1}),j(c,{value:"five","toggle-icon-slot":"start",class:"custom_card"},{default:z(()=>[j(d,{slot:"header",color:"light"},{default:z(()=>[j(s,{class:"previousLabel"},{default:z(()=>t[6]||(t[6]=[R("Home location")])),_:1,__:[6]})]),_:1}),B("div",qe,[j(f,{editable:!0})])]),_:1})]),_:1},512),t[7]||(t[7]=B("hr",{class:"dashed-hr",style:{"margin-bottom":"0px !important"}},null,-1))]),_:1,__:[7]}),j(w,{collapse:"fade",class:"ion-no-border"},{default:z(()=>[j(x,null,{default:z(()=>[j(b,null,{default:z(()=>[j(_,{id:"cbtn",class:"btnText cbtn",fill:"solid",style:{width:"130px"},onClick:e.handleCancel},{default:z(()=>t[8]||(t[8]=[R(" Cancel ")])),_:1,__:[8]},8,["onClick"])]),_:1}),j(b,null,{default:z(()=>[j(y,{onClick:t[0]||(t[0]=t=>e.saveDetails()),name:"Save changes",fill:"solid",style:{float:"right",margin:"2%",width:"130px"}})]),_:1})]),_:1})]),_:1})],64)}],["__scopeId","data-v-a10cb2a3"]])),Qe={style:{"font-weight":"400","font-size":"19px"}},Xe={style:{display:"flex","align-items":"center"}},Je={class:""},Ke={class:"center text_12"},We=a({watch:{},name:"xxxComponent"}),Ye=a({...We,props:{is_open:{},user_id:{}},emits:["closePopoover","save"],setup(e,{emit:t}){F("");const a=t;return(e,t)=>(O(),S(V,null,[j(G(x),null,{default:z(()=>[j(G(g),null,{default:z(()=>[j(G(h),null,{default:z(()=>t[1]||(t[1]=[B("div",{style:{display:"flex","align-items":"center"}},[B("b",{style:{"margin-left":"6px"}},"Patient Outcome")],-1)])),_:1,__:[1]}),j(G(H),{slot:"end"},{default:z(()=>[j(G(h),null,{default:z(()=>[j(G(T),{onClick:t[0]||(t[0]=e=>(a("closePopoover",!1),void I.dismiss())),fill:"solid"},{default:z(()=>[B("span",Qe,[B("div",Xe,[j(G(f),{icon:G(E),slot:"start",class:"sub-menu-icon"},null,8,["icon"]),t[2]||(t[2]=B("span",{style:{"margin-left":"6px"}},"Close",-1))])])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),j(G(w),{class:"ion-padding"},{default:z(()=>[B("div",Je,[B("div",Ke,[j(G(v),null,{default:z(()=>[j(G(p),null,{default:z(()=>[j(Ve)]),_:1})]),_:1})])])]),_:1}),j(G(o),null,{default:z(()=>[j(G(g))]),_:1})],64))}}),Ze={style:{display:"flex","align-items":"center"}},et={style:{"font-weight":"400","font-size":"19px"}},tt={style:{display:"flex","align-items":"center"}},at={style:{"font-weight":"600","font-size":"17px"}},nt={style:{"margin-top":"15px",width:"100%"}},it={key:0,class:"error-message"},lt={key:1},ot={slot:"start",class:"prefix-container"},rt=["value"],st={key:0,class:"error-message"},dt={style:{"font-size":"16px","font-weight":"600px",color:"red"}},ut={key:1},ct={style:{"font-weight":"400","font-size":"19px"}},pt={style:{display:"flex","align-items":"center"}},vt={style:{"font-weight":"400","font-size":"20px"}},mt={style:{display:"flex","align-items":"center"}},ft=a({name:"UpdateNCDNumberModal"}),gt=a({...ft,emits:["closePopoover","save"],setup(e,{emit:t}){const a=M(),n=ue(),{patient:i}=A(n),l=F(""),r=F(""),s=F(""),d=F(!1),p=new de;let v=null;const m=e=>{const t=e.target.value.replace(/[^0-9]/g,"");t!==e.target.value&&(d.value=!0,v&&clearTimeout(v),v=window.setTimeout(()=>{d.value=!1,v=null},3e3),l.value=t)},_=()=>{d.value=!1,v&&(clearTimeout(v),v=null)},b=U(()=>l.value&&""!==l.value.trim()),y=async()=>{try{const e=await be.getNextSuggestedNCDNumber(),t=e.ncd_number.replace(/^\D+|\s/g,""),a=e.ncd_number.replace(/\d+/g,"")+"-NCD-";l.value=t,r.value=a}catch(e){console.error("Error fetching suggested NCD number:",e),s.value="Failed to fetch suggested NCD number (missing SITE Prefix)"}};q(()=>{y()}),$(()=>i.value.ID,()=>{y()},{deep:!0});const D=t;function k(){D("closePopoover",!1),I.dismiss()}async function C(){try{if(s.value="",!b.value)return void(s.value="Please enter a valid NCD number");const e=`${r.value}${l.value}`,t=await de.findByID(i.value.patientID);for(const a of t.patient_identifiers)31===a.identifier_type&&(await p.updateNCDNumber(a.patient_identifier_id,e),D("save",{newNcdId:e}));await ye(i.value),k()}catch(e){console.error(e)}}return(e,t)=>(O(),S(V,null,[j(G(x),null,{default:z(()=>[j(G(g),null,{default:z(()=>[j(G(h),null,{default:z(()=>[B("div",Ze,[j(G(f),{icon:G(Q),class:"sub-menu-icon",style:{"font-size":"1.6rem"}},null,8,["icon"]),t[3]||(t[3]=B("b",{style:{"margin-left":"6px"}},"Update NCD Number",-1))])]),_:1}),j(G(H),{slot:"end"},{default:z(()=>[j(G(h),null,{default:z(()=>[j(G(T),{onClick:t[0]||(t[0]=e=>k()),fill:"solid"},{default:z(()=>[B("span",et,[B("div",tt,[j(G(f),{icon:G(E),slot:"start",class:"sub-menu-icon"},null,8,["icon"]),t[4]||(t[4]=B("span",{style:{"margin-left":"6px"}},"Close",-1))])])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),j(G(w),{class:"ion-padding"},{default:z(()=>[j(G(X),null,{default:z(()=>[j(G(K),{class:"current-ncd-item"},{default:z(()=>[j(G(c),null,{default:z(()=>[t[5]||(t[5]=B("h2",null,"Current NCD Number",-1)),B("p",at,W(G(i).NcdID||"Not assigned"),1)]),_:1,__:[5]})]),_:1}),j(G(K),null,{default:z(()=>[B("div",nt,[d.value?(O(),S("div",it,[j(G(f),{icon:G(Y),color:"danger"},null,8,["icon"]),t[6]||(t[6]=B("span",{style:{"font-size":"16px","font-weight":"600px",color:"red"}},"Only numbers are allowed",-1)),j(G(T),{fill:"clear",size:"small",onClick:_},{default:z(()=>[j(G(f),{icon:G(Z)},null,8,["icon"])]),_:1})])):J("",!0),s.value?J("",!0):(O(),S("div",lt,[t[7]||(t[7]=B("span",{style:{"font-weight":"600","font-size":"17px",color:"grey"}},"New NCD Number",-1)),j(G(u),{modelValue:l.value,"onUpdate:modelValue":t[1]||(t[1]=e=>l.value=e),placeholder:"Enter number",inputmode:"numeric",pattern:"[0-9]*",onInput:m,class:"custom-input"},{default:z(()=>[B("div",ot,[B("input",{value:r.value,readonly:"",class:"prefix-part",type:"text"},null,8,rt)])]),_:1},8,["modelValue"])]))])]),_:1}),s.value?(O(),S("div",st,[j(G(ee),{color:"danger"},{default:z(()=>[B("span",dt,W(s.value),1)]),_:1})])):J("",!0),s.value?(O(),S("div",ut,[j(G(T),{onClick:t[2]||(t[2]=e=>function(e){try{console.log(e),a.push(e)}catch(t){console.error(t)}}("setSitePrefix")),fill:"solid",style:{margin:"14px"}},{default:z(()=>[B("span",ct,[B("div",pt,[j(G(f),{icon:G(te),slot:"start",class:"sub-menu-icon"},null,8,["icon"]),t[8]||(t[8]=B("span",{style:{"margin-left":"6px"}},"set Site Prefix",-1))])])]),_:1})])):J("",!0)]),_:1})]),_:1}),j(G(o),null,{default:z(()=>[j(G(g),null,{default:z(()=>[j(G(H),{slot:"end"},{default:z(()=>[j(G(h),null,{default:z(()=>[j(G(T),{onClick:C,fill:"solid",disabled:!b.value},{default:z(()=>[B("span",vt,[B("div",mt,[j(G(f),{icon:G(ae),slot:"start",class:"sub-menu-icon"},null,8,["icon"]),t[9]||(t[9]=B("span",{style:{"margin-left":"6px"}},"Save",-1))])])]),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1})]),_:1})],64))}}),ht=_e(gt,[["__scopeId","data-v-28e133b4"]]),_t={key:0,style:{display:"flex","justify-content":"space-between",width:"100%"}},bt={key:0},yt={key:1,style:{"font-weight":"bold",padding:"1.7px"}},xt={key:1,style:{display:"flex","flex-wrap":"wrap",gap:"20px",width:"100%"}},wt={key:0},It={key:1},Dt={key:2},kt={key:2},Ct={style:{display:"flex","flex-wrap":"wrap",gap:"8px",width:"100%"}},Pt={key:3,style:{display:"flex","flex-wrap":"wrap",gap:"20px",width:"100%"}},Nt={key:0},Lt={key:1},St={key:2},Ot={key:3},jt={key:4,style:{width:"100%","text-align":"center"}},zt={key:0},Rt=_e(a({__name:"ArtVisitLbl",props:{imageOut:{type:Object},patient:{type:Object}},emits:["label-out"],setup(e,{emit:t}){const a=t,n=F(null),i=F(0),l=e,o=U(()=>{var e;return null!==(e=l.patient)&&void 0!==e&&e.medications?l.patient.medications.filter(e=>e&&(e.name||e.dose||e.frequency||e.quantity)):[]}),r=U(()=>{var e,t;const a=null===(e=l.patient)||void 0===e?void 0:e.vitals;return a&&(a.height||a.weight||a.bloodPressure||(null===(t=l.patient)||void 0===t?void 0:t.bloodGlucose))}),s=U(()=>{const e=o.value;if(0===e.length)return[];if(0===i.value)return e.slice(0,2);{const t=2+4*(i.value-1);return e.slice(t,t+4)}});U(()=>{const e=o.value.length;if(e<=2)return!0;const t=e-2,a=Math.ceil(t/4);return i.value===a});const d=U(()=>{const e=o.value.length;if(e<=2)return 1;const t=e-2;return 1+Math.ceil(t/4)});return q(async()=>{try{const e=await(async()=>{const e=[];for(let a=0;a<d.value;a++){i.value=a,await new Promise(e=>setTimeout(e,100));try{const t=await ie.toPng(n.value,{height:300,width:594});e.push(t)}catch(t){console.error("Error generating image for page",a,t)}}return e})();a("label-out",e),"function"==typeof l.imageOut&&l.imageOut(e)}catch(e){console.error("Error generating patient labels:",e)}}),(t,a)=>{var l,o,d,u,c,p,v,m,f,g,h,_,b,y,x,w,I,D;return O(),S("div",{ref_key:"lblComponent",ref:n,id:"container"},[0===i.value&&(null!==(l=e.patient)&&void 0!==l&&l.latestVisitDate||null!==(o=e.patient)&&void 0!==o&&o.patientID)?(O(),S("div",_t,[null!==(d=e.patient)&&void 0!==d&&d.latestVisitDate?(O(),S("span",bt,[a[0]||(a[0]=B("b",null,"Visit:",-1)),R(" "+W(e.patient.latestVisitDate),1)])):J("",!0),null!==(u=e.patient)&&void 0!==u&&u.patientID?(O(),S("span",yt,W(e.patient.patientID),1)):J("",!0)])):J("",!0),0===i.value&&(null!==(c=e.patient)&&void 0!==c&&c.patientName||null!==(p=e.patient)&&void 0!==p&&p.gender||null!==(v=e.patient)&&void 0!==v&&v.diagnoses&&e.patient.diagnoses.length>0)?(O(),S("div",xt,[null!==(m=e.patient)&&void 0!==m&&m.patientName||null!==(f=e.patient)&&void 0!==f&&f.gender?(O(),S("span",wt,[B("b",null,W(null===(g=e.patient)||void 0===g?void 0:g.patientName)+W(null!==(h=e.patient)&&void 0!==h&&h.gender?`(${e.patient.gender})`:""),1)])):J("",!0),null!==(_=e.patient)&&void 0!==_&&_.prescriber?(O(),S("span",It,[a[1]||(a[1]=B("b",null,"Seen by:",-1)),R(W(e.patient.prescriber),1)])):J("",!0),null!==(b=e.patient)&&void 0!==b&&b.nextAppointment?(O(),S("span",Dt,[a[2]||(a[2]=B("b",null,"Nxt App:",-1)),R(" "+W(e.patient.nextAppointment),1)])):J("",!0)])):J("",!0),0===i.value&&null!==(y=e.patient)&&void 0!==y&&y.diagnoses&&e.patient.diagnoses.length>0?(O(),S("div",kt,[B("span",Ct,[a[3]||(a[3]=B("b",null,"Diagnoses:",-1)),R(" "+W(e.patient.diagnoses.filter(e=>e).join(", ")),1)])])):J("",!0),0===i.value&&r.value?(O(),S("div",Pt,[null!==(x=e.patient)&&void 0!==x&&null!==(x=x.vitals)&&void 0!==x&&x.height?(O(),S("span",Nt,W(e.patient.vitals.height),1)):J("",!0),null!==(w=e.patient)&&void 0!==w&&null!==(w=w.vitals)&&void 0!==w&&w.weight?(O(),S("span",Lt,W(e.patient.vitals.weight),1)):J("",!0),null!==(I=e.patient)&&void 0!==I&&null!==(I=I.vitals)&&void 0!==I&&I.bloodPressure?(O(),S("span",St,W(e.patient.vitals.bloodPressure),1)):J("",!0),null!==(D=e.patient)&&void 0!==D&&D.bloodGlucose?(O(),S("span",Ot,W(e.patient.bloodGlucose),1)):J("",!0)])):J("",!0),s.value.length>0?(O(),S("table",jt,[0===i.value?(O(),S("thead",zt,a[4]||(a[4]=[B("tr",null,[B("th",null,"Drug"),B("th",null,"Dose"),B("th",null,"Freq"),B("th",null,"Qty")],-1)]))):J("",!0),B("tbody",null,[(O(!0),S(V,null,ne(s.value,(e,t)=>(O(),S("tr",{key:t},[B("td",null,W((null==e?void 0:e.name)||""),1),B("td",null,W((null==e?void 0:e.dose)||""),1),B("td",null,W((null==e?void 0:e.frequency)||""),1),B("td",null,W((null==e?void 0:e.quantity)||""),1)]))),128))])])):J("",!0)],512)}}}),[["__scopeId","data-v-777d67d0"]])}}});
