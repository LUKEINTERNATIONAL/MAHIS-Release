System.register(["./vendor-legacy-DISdEYhC.js","./index-legacy-BvQ8VDcO.js","./lodash-legacy-pOOc9Efu.js"],function(e,a){"use strict";var t,l,n,o,r,d,u,i,s,c,p,v,m,f,_,h,g,b,y,w,x,D,I,k,V,S,C,H,B,A,F,E,U,N,P,R,L,O,T,j,M,$,q,z,K,X,J,Q,W,G,Y,Z,ee,ae,te,le,ne,oe,re,de;return{setters:[e=>{t=e.d,l=e.X,n=e.a6,o=e.$,r=e.H,d=e.e,u=e.f,i=e.P,s=e.O,c=e.J,p=e.l,v=e.Q,m=e.K,f=e.k,_=e.p,h=e.F,g=e.r,b=e.w,y=e.u,w=e.dR,x=e.m,D=e.bN,I=e.a,k=e.aS,V=e.aQ,S=e.aR,C=e.a5,H=e.bl,B=e.dX,A=e.bn,F=e.a3,E=e.aP,U=e.N,N=e.aV,P=e.c,R=e.aj},e=>{L=e.l,O=e.X,T=e.i,j=e._,M=e.B,$=e.aW,q=e.s,z=e.aK,K=e.t,X=e.aw,J=e.M,Q=e.J,W=e.L,G=e.y,Y=e.ay,Z=e.az,ee=e.ar,ae=e.a8,te=e.o,le=e.bo,ne=e.S,oe=e.H,re=e.K},e=>{de=e.l}],execute:function(){var a=document.createElement("style");a.textContent=".spaceBetween[data-v-4346bf77]{margin-left:10px;margin-right:10px}ion-item.ionLbltp[data-v-4346bf77]{border-bottom:2px dotted var(--ion-color-medium);--inner-border-width:0}.action_buttons[data-v-4346bf77]{color:var(--ion-color-primary);display:flex;align-items:center;float:right}.action_buttons[data-v-4346bf77]:hover{cursor:pointer}.modify_buttons[data-v-4346bf77]{padding-left:20px}.truncate-text[data-v-4346bf77]{overflow:hidden!important;white-space:nowrap!important;text-overflow:ellipsis!important}.col-st1[data-v-4346bf77]{max-width:23%}.col-st2[data-v-4346bf77]{max-width:58%}.error-label[data-v-d012b300]{background:#fecdca;color:#b42318;text-transform:none;padding:2% 5%;border-radius:10px;margin-top:4px;display:flex;text-align:center}.spc_btwn[data-v-d012b300]{margin-top:2%}.lsp-cls-1[data-v-d012b300]{margin:-15px -15px -15px 0}.action-buttons-row[data-v-d012b300]{margin-top:2%;display:flex;justify-content:flex-end}.error-label[data-v-f25626fb]{background:#fecdca;color:#b42318;text-transform:none;padding:2% 5%;border-radius:10px;margin-top:4px;display:flex;text-align:center}.action-buttons-row[data-v-f25626fb]{margin-top:2%;display:flex;justify-content:flex-end;padding-right:16px;padding-bottom:8px}ion-card[data-v-f25626fb]{padding:0;margin:10px}ion-list[data-v-f25626fb]{padding:0}.error-label[data-v-b5701ac2]{background:#fecdca;color:#b42318;text-transform:none;padding:2% 5%;border-radius:10px;margin-top:4px;display:flex;text-align:center}.action-buttons-row[data-v-b5701ac2]{margin-top:2%;display:flex;justify-content:flex-end}ion-card[data-v-b5701ac2]{padding:10px;margin:10px}.date-results-container[data-v-1e34f199]{padding:20px}.date-buttons-container[data-v-1e34f199]{display:flex;justify-content:left;gap:12px;flex-wrap:wrap}.date-button[data-v-1e34f199]{--border-color: #4caf50;--border-width: 2px;--color: #4caf50;--background: transparent;--border-radius: 20px;font-size:18px;font-weight:500;text-transform:none;height:auto;text-align:left;transition:all .3s ease}.date-button.error-border[data-v-1e34f199]{--border-color: #f44336;--color: #f44336}.date-button.selected[data-v-1e34f199]{--background: #4caf50;--color: white;--border-color: #4caf50}.date-button[data-v-1e34f199]:hover{opacity:.8}.validation-message[data-v-1e34f199]{color:#f44336;font-size:16px;margin-top:10px;font-weight:500;padding-left:5px}.error-label[data-v-721c6ae2]{background:#fecdca;color:#b42318;text-transform:none;padding:3%;border-radius:10px;margin-top:7px;display:flex;text-align:center}.action-buttons[data-v-721c6ae2]{margin-top:20px}.action-buttons ion-col[data-v-721c6ae2]{display:flex;gap:10px;justify-content:flex-end}.initTxt[data-v-2873182f]{text-align:center}.spc_btwn[data-v-2873182f]{margin-top:2%}.item-al[data-v-2873182f]{cursor:pointer;padding:5px;background-color:#ebebeb;margin-top:8px}.item-al[data-v-2873182f]:hover{background-color:rgba(85,81,81,.282);padding:5px;border-radius:3px}ion-popover.popover-al[data-v-2873182f]{--background: #fff}ion-list.list-al[data-v-2873182f]{--background: #fff;-ion-item-background:#fff}.saveContainer[data-v-2873182f]{display:flex;align-items:flex-end}.action_buttons[data-v-2873182f]{margin-top:5px}.error-label[data-v-2873182f]{background:#fecdca;color:#b42318;text-transform:none;padding:6%;border-radius:10px;margin-top:7px;display:flex;text-align:center}\n/*$vite$:1*/",document.head.appendChild(a);const ue=t({components:{IonItem:o,IonCol:n,IonLabel:l},data:()=>({iconsContent:T}),props:{displayData:{type:Array,default:[]}},methods:{highlightItem(e){const a=document.getElementById(e+"_lbl");a&&(a.style.color="#006401"),this.highlightActionBtns(e)},undoHighlightItem(e){const a=document.getElementById(e+"_lbl");a&&(a.style.color="rgb(0,0,0)"),this.undohighlightActionBtns(e)},highlightActionBtns(e){const a=document.getElementsByClassName(e+"_spanlbl");for(let t=0;t<a.length;t++)a[t].style.display="block"},undohighlightActionBtns(e){const a=document.getElementsByClassName(e+"_spanlbl");for(let t=0;t<a.length;t++)a[t].style.display="none"},asignLblID:e=>e+"_lbl",asignSpanLblID:e=>e+"_spanlbl",async removeItemAtIndex(e,a){await O("Do you want to delete it?",a)&&this.$emit("update:removeItem",e)},async editItemAtIndex(e,a,t){await L("Do you want to edit it?",t)&&this.$emit("update:editItem",{index:e,item:a})},fomartDate:e=>e.year+"-"+(e.month<10?"0":"")+e.month+"-"+(e.day<10?"0":"")+e.day}}),ie=e("D",j(ue,[["render",function(e,a,t,l,n,o){const g=r("ion-label"),b=r("ion-col"),y=r("ion-icon"),w=r("ion-item");return u(!0),d(h,null,i(e.displayData,(t,l)=>(u(),s(w,{displayData:e.displayData,class:"ionLbltp",key:l,onMousemove:a=>e.highlightItem(l),onMouseout:a=>e.undoHighlightItem(l)},{default:c(()=>[p(b,{class:"col-st1"},{default:c(()=>[p(g,{id:e.asignLblID(l),class:"truncate-text",style:{color:"#00190E","font-weight":"400",font:"inter","line-height":"21px"}},{default:c(()=>[v(m(t.type),1)]),_:2},1032,["id"])]),_:2},1024),p(b,{class:"col-st2"},{default:c(()=>[p(g,{class:"truncate-text",style:{color:"#636363","font-weight":"400",font:"inter","line-height":"21px"}},{default:c(()=>[a[0]||(a[0]=f("span",{class:"spaceBetween"},null,-1)),v(" "+m(t.name)+" ",1),a[1]||(a[1]=f("span",{class:"spaceBetween"},null,-1)),v(m(t.reason),1),a[2]||(a[2]=f("span",{class:"spaceBetween"},null,-1)),v(m(e.fomartDate(t.date)),1)]),_:2},1024)]),_:2},1024),p(b,{class:"action_buttons"},{default:c(()=>[p(g,{class:_(e.asignSpanLblID(l)),style:{cursor:"pointer",display:"none","text-align":"end"},onClick:a=>e.editItemAtIndex(l,t,a)},{default:c(()=>[p(y,{icon:e.iconsContent.edit},null,8,["icon"])]),_:1},8,["class","onClick"]),p(g,{class:_(e.asignSpanLblID(l)),style:{cursor:"pointer",display:"none","text-align":"end"},onClick:a=>e.removeItemAtIndex(l,a)},{default:c(()=>[p(y,{icon:e.iconsContent.delete},null,8,["icon"])]),_:1},8,["class","onClick"])]),_:2},1024)]),_:2},1032,["displayData","onMousemove","onMouseout"]))),128)}],["__scopeId","data-v-4346bf77"]])),se=e("_",t({__name:"TimePicker",props:{place_holder:{},time_prop:{}},emits:["timeUpDated"],setup(e,{emit:a}){const t=g(),l=g({title:"Set Time",popoverOpen:!1,isOpen:!1,event:{},keyboardClose:!1,popoverData:{}}),n=g(),o={name:"Now",show:!0,fn:S},i=g(!0),v=g(!1),m=g(0),f=e;b(()=>f.time_prop,e=>{e&&(t.value=e.time)},{immediate:!0,deep:!0});const _=a;function I(e){1==v.value?(i.value=!1,v.value=!1):i.value=!0,l.value.isOpen=!0,l.value.event=e}function k(e){t.value=e.detail.value;const a=V(t.value);1!=(-1!==a.indexOf("NaN"))?t.value=a:S()}function V(e){let a=new Date(e),t=a.getHours(),l=a.getMinutes(),o=t>=12?"PM":"AM";t%=12,t=t||12;let r=t.toString().padStart(2,"0")+":"+l.toString().padStart(2,"0")+" "+o;return n.value={time:r,meridian:o},_("timeUpDated",n.value),r}function S(){v.value=!0,t.value=V(new Date),i.value=!1,m.value++}return(e,a)=>{const n=r("ion-popover");return u(),d(h,null,[(u(),s(M,{placeholder:f.place_holder.default,inputValue:t.value,icon:y(w),"-inner-action-btn-propeties":o,"onClicked:inputValue":I,"onUpdate:InnerActionBtnPropetiesAction":o.fn,key:m.value},null,8,["placeholder","inputValue","icon","onUpdate:InnerActionBtnPropetiesAction"])),p(n,{"show-backdrop":!1,"keep-contents-mounted":!0,"is-open":l.value.isOpen,event:l.value.event,side:"top",onDidDismiss:a[0]||(a[0]=e=>l.value.isOpen=!1)},{default:c(()=>[i.value?(u(),s(y(D),{key:0,onIonChange:k,id:"datetime",presentation:"time","show-default-buttons":!0})):x("",!0)]),_:1},8,["is-open","event"])],64)}}}));class ce extends ${constructor(e,a){super(e,114,a)}}const pe=t({name:"xxxComponent"}),ve=t({...pe,props:{selected_ward_prop:{},admitted_other_props:{}},emits:["dataSaved"],setup(e,{emit:a}){const t=g([]),o=z(),r=g(NaN),d=g(!1),i=g(),_=g(!1);I(async()=>{!async function(){(await async function(e={}){try{const{name:a="",page:t=1,page_size:l=10}=e,n=a?{name:`%${a}%`}:{};return(await q("wards",{likeClause:n,currentPage:t,itemsPerPage:l}).then(e=>e.records)).map(e=>({name:e.name,value:e.name,other:e}))}catch(a){throw console.error("Error fetching offline wards:",a.message),a}}({name:"",page:1,page_size:1e3})).forEach(e=>{const a={name:e.name,selected:!1,other:e,location_ward_id:e.other.location_id};t.value.push(a)})}(),P()});const h=[{showAddItemButton:!0,addItemButton:!0,name:"save",btnFill:"clear",fn:R},{showAddItemButton:!0,addItemButton:!0,name:"cancel",btnFill:"clear",fn:function(){O()}}],w=[{placeHolder:"Reason",dataHandler:function(e){const a=e.target.value;w[0].dataValue.value=a,1==_.value&&K("Remember to press the SAVE button",1e4),P(!1)},dataValue:g(),show_error:g(!1),error_message:"please provide a reason"}],D=[{placeHolder:{default:"Enter date"},dataHandler:function(e){const a={day:e.value.day,month:e.value.month,year:e.value.year,formattedDate:e.value.formattedDate};D[0].dataValue.value=a,R(!1)},dataValue:g(),show_error:g(!1),error_message:"please provide date"}],U=[{placeHolder:{default:"Enter time of admission"},dataHandler:function(e){U[0].dataValue.value=e,R(!1)},dataValue:g(),show_error:g(!1),error_message:"error"}],N=e;function P(e=!0){_.value=e}function R(e=!0){void 0===i.value||""==i.value?d.value=!0:d.value=!1,""==w[0].dataValue.value||void 0===w[0].dataValue.value?w[0].show_error.value=!0:w[0].show_error.value=!1,void 0===D[0].dataValue.value||""==D[0].dataValue.value?D[0].show_error.value=!0:D[0].show_error.value=!1,void 0===U[0].dataValue.value||""==D[0].dataValue.value?U[0].show_error.value=!0:U[0].show_error.value=!1,0==D[0].show_error.value&&0==U[0].show_error.value&&0==w[0].show_error.value&&0==d.value?async function(){const e={name:i.value.name,type:"Admitted for short stay",date:D[0].dataValue,time:U[0].dataValue,reason:w[0].dataValue,other:i.value,selected:!0};await o.addOutcomeData(e,r.value)&&O({dataSaved:!1})}():e&&K("Please enter correct data values",4e3)}b(()=>N.selected_ward_prop,e=>{e&&(i.value=e)},{immediate:!0,deep:!0}),b(()=>N.admitted_other_props,e=>{e&&(w[0].dataValue.value=e.reason,U[0].dataValue.value=e.time,D[0].dataValue.value=e.date)},{immediate:!0,deep:!0});const L=a;function O(e={dataSaved:!0}){L("dataSaved",e)}return(e,a)=>(u(),s(y(k),null,{default:c(()=>[p(y(S),null,{default:c(()=>[p(y(V),null,{default:c(()=>[...a[3]||(a[3]=[v("Admitted for Short Stay",-1)])]),_:1})]),_:1}),p(y(E),null,{default:c(()=>[p(y(C),null,{default:c(()=>[p(y(n),null,{default:c(()=>[p(y(H),{modelValue:i.value,"onUpdate:modelValue":[a[0]||(a[0]=e=>i.value=e),a[1]||(a[1]=e=>{return a=e,i.value=a,P(),void R(!1);var a})],multiple:!1,taggable:!1,"hide-selected":!0,"close-on-select":!0,openDirection:"bottom","tag-placeholder":"Find and select a ward",placeholder:"Find and select a ward",selectLabel:"",label:"name",searchable:!0,disabled:!1,onSearchChange:a[2]||(a[2]=e=>({})),"track-by":"location_ward_id",options:t.value},null,8,["modelValue","options"]),f("div",null,[d.value?(u(),s(y(l),{key:0,class:"error-label"},{default:c(()=>[...a[4]||(a[4]=[v(m("Please select a ward"),-1)])]),_:1})):x("",!0)])]),_:1})]),_:1}),p(y(C),null,{default:c(()=>[p(y(n),null,{default:c(()=>[f("div",null,[p(X,{place_holder:D[0].placeHolder,onDateUpDated:D[0].dataHandler,date_prop:D[0].dataValue.value},null,8,["place_holder","onDateUpDated","date_prop"]),f("div",null,[D[0].show_error.value?(u(),s(y(l),{key:0,class:"error-label"},{default:c(()=>[v(m(D[0].error_message),1)]),_:1})):x("",!0)])])]),_:1})]),_:1}),p(y(C),null,{default:c(()=>[p(y(n),null,{default:c(()=>[f("div",null,[p(se,{place_holder:U[0].placeHolder,onTimeUpDated:U[0].dataHandler,time_prop:U[0].dataValue.value},null,8,["place_holder","onTimeUpDated","time_prop"]),f("div",null,[U[0].show_error.value?(u(),s(y(l),{key:0,class:"error-label"},{default:c(()=>[v(m(U[0].error_message),1)]),_:1})):x("",!0)])])]),_:1})]),_:1}),p(y(C),null,{default:c(()=>[p(y(n),null,{default:c(()=>[p(M,{placeholder:w[0].placeHolder,icon:y(B),inputValue:w[0].dataValue.value,"onUpdate:inputValue":w[0].dataHandler},null,8,["placeholder","icon","inputValue","onUpdate:inputValue"]),f("div",null,[w[0].show_error.value?(u(),s(y(l),{key:0,class:"error-label"},{default:c(()=>[v(m(w[0].error_message),1)]),_:1})):x("",!0)])]),_:1})]),_:1}),h[0].showAddItemButton?(u(),s(y(C),{key:0,class:"action-buttons-row"},{default:c(()=>[h[0].addItemButton?(u(),s(J,{key:0,name:h[0].name,fill:h[0].btnFill,icon:y(A),"onClicked:btn":h[0].fn},null,8,["name","fill","icon","onClicked:btn"])):x("",!0),h[1].addItemButton?(u(),s(J,{key:1,name:h[1].name,fill:h[1].btnFill,icon:y(F),"onClicked:btn":h[1].fn},null,8,["name","fill","icon","onClicked:btn"])):x("",!0)]),_:1})):x("",!0)]),_:1})]),_:1}))}}),me=e("A",j(ve,[["__scopeId","data-v-d012b300"]])),fe=t({name:"xxxComponent"}),_e=t({...fe,props:{selected_referral_data:{},selected_other_referral_data:{}},emits:["dataSaved"],setup(e,{emit:a}){const t=g(NaN),o=g(null),r=z(),d=g(!1),i=g([]),_=g({}),h=g(!0),w={location_data:{}},D=[{placeHolder:"Reason",dataHandler:function(e){const a=e.target.value;D[0].dataValue.value=a,1==h.value&&K("Remember to press the SAVE button",1e4),L(!1)},dataValue:g(),show_error:g(!1),error_message:"please provide a reason"}],H=[{placeHolder:{default:"Enter date"},dataHandler:function(e){const a={day:e.value.day,month:e.value.month,year:e.value.year,formattedDate:e.value.formattedDate};H[0].dataValue.value=a,P(!1)},dataValue:g(),show_error:g(!1),error_message:"please provide date"}],U=[{placeHolder:{default:"Enter time of referral"},dataHandler:function(e){U[0].dataValue.value=e,P(!1)},dataValue:g(),show_error:g(!1),error_message:"error"}],N=e;function P(e=!0){R(),""==D[0].dataValue.value||void 0===D[0].dataValue.value?D[0].show_error.value=!0:D[0].show_error.value=!1,void 0===H[0].dataValue.value||""==H[0].dataValue.value?H[0].show_error.value=!0:H[0].show_error.value=!1,void 0===U[0].dataValue.value||""==H[0].dataValue.value?U[0].show_error.value=!0:U[0].show_error.value=!1,0==H[0].show_error.value&&0==U[0].show_error.value&&0==D[0].show_error.value&&0==d.value?T():e&&K("Please enter correct data values",4e3)}function R(){o.value?d.value=!1:d.value=!0}function L(e=!0){h.value=e}b(()=>N.selected_other_referral_data,e=>{e&&(D[0].dataValue.value=e.reason,H[0].dataValue.value=e.date,U[0].dataValue.value=e.time)},{immediate:!0,deep:!0}),b(()=>N.selected_referral_data,e=>{if(!e)return;o.value=e.selected_location,w.location_data=e;const a=Array.isArray(e.selected_district_ids)?[...e.selected_district_ids]:[],t=e.selected_location?{...e.selected_location}:null;i.value=a,_.value=t},{immediate:!0,deep:!0}),I(()=>{L()});const O=e=>{o.value=e.selected_location,R(),w.location_data=e,L(),P(!1)},T=async()=>{const e={name:o.value.name,type:"Referred out",selected:!0,date:H[0].dataValue,time:U[0].dataValue,reason:D[0].dataValue},a={...e,other:{ref_data:e,location_data:w.location_data}};await r.addOutcomeData(a,t.value)&&$({dataSaved:!1})},j=a;function $(e={dataSaved:!0}){j("dataSaved",e)}const q=[{showAddItemButton:!0,addItemButton:!0,name:" save",btnFill:"clear",fn:P},{showAddItemButton:!0,addItemButton:!0,name:"cancel",btnFill:"clear",fn:()=>{$()}}];return(e,a)=>(u(),s(y(k),null,{default:c(()=>[p(y(S),null,{default:c(()=>[p(y(V),null,{default:c(()=>[...a[0]||(a[0]=[v("Referred Out",-1)])]),_:1})]),_:1}),p(y(E),null,{default:c(()=>[p(y(C),null,{default:c(()=>[p(Q,{show_error:d.value,onFacilitySelected:O,selected_district_ids:i.value,selected_location:_.value},null,8,["show_error","selected_district_ids","selected_location"])]),_:1}),p(y(C),null,{default:c(()=>[p(y(n),null,{default:c(()=>[f("div",null,[p(X,{place_holder:H[0].placeHolder,onDateUpDated:H[0].dataHandler,date_prop:H[0].dataValue.value},null,8,["place_holder","onDateUpDated","date_prop"]),f("div",null,[H[0].show_error.value?(u(),s(y(l),{key:0,class:"error-label"},{default:c(()=>[v(m(H[0].error_message),1)]),_:1})):x("",!0)])])]),_:1})]),_:1}),p(y(C),null,{default:c(()=>[p(y(n),null,{default:c(()=>[f("div",null,[p(se,{place_holder:U[0].placeHolder,onTimeUpDated:U[0].dataHandler,time_prop:U[0].dataValue.value},null,8,["place_holder","onTimeUpDated","time_prop"]),f("div",null,[U[0].show_error.value?(u(),s(y(l),{key:0,class:"error-label"},{default:c(()=>[v(m(U[0].error_message),1)]),_:1})):x("",!0)])])]),_:1})]),_:1}),p(y(C),null,{default:c(()=>[p(y(n),null,{default:c(()=>[p(M,{placeholder:D[0].placeHolder,icon:y(B),inputValue:D[0].dataValue.value,"onUpdate:inputValue":D[0].dataHandler},null,8,["placeholder","icon","inputValue","onUpdate:inputValue"]),f("div",null,[D[0].show_error.value?(u(),s(y(l),{key:0,class:"error-label"},{default:c(()=>[v(m(D[0].error_message),1)]),_:1})):x("",!0)])]),_:1})]),_:1}),q[0].showAddItemButton?(u(),s(y(C),{key:0,class:"action-buttons-row"},{default:c(()=>[q[0].addItemButton?(u(),s(J,{key:0,name:q[0].name,fill:q[0].btnFill,icon:y(A),"onClicked:btn":q[0].fn},null,8,["name","fill","icon","onClicked:btn"])):x("",!0),q[1].addItemButton?(u(),s(J,{key:1,name:q[1].name,fill:q[1].btnFill,icon:y(F),"onClicked:btn":q[1].fn},null,8,["name","fill","icon","onClicked:btn"])):x("",!0)]),_:1})):x("",!0)]),_:1})]),_:1}))}}),he=e("R",j(_e,[["__scopeId","data-v-f25626fb"]])),ge=t({name:"xxxComponent"}),be=t({...ge,props:{selected_discharged_prop:{},selected_discharged_data:{}},emits:["dataSaved"],setup(e,{emit:a}){const t=g(NaN),o=g([]),r=z(),d=g();I(async()=>{H("")});const i=[{placeHolder:"Reason",dataHandler:function(e){const a=e.target.value;i[0].dataValue.value=a},dataValue:g(),show_error:g(!1),error_message:"please provide a reason"}],_=[{placeHolder:{default:"Enter date"},dataHandler:function(e){const a={day:e.value.day,month:e.value.month,year:e.value.year,formattedDate:e.value.formattedDate};_[0].dataValue.value=a,B(!1)},dataValue:g(),show_error:g(!1),error_message:"please provide date"}],h=e;b(()=>h.selected_discharged_prop,e=>{e&&(d.value=e)},{immediate:!0,deep:!0}),b(()=>h.selected_discharged_data,e=>{e&&(_[0].dataValue.value=e.date||"",e.reason&&(i[0].dataValue.value=e.reason))},{immediate:!0,deep:!0}),o.value,g(!1),g(!1);const w=[{placeHolder:{default:"Enter time of referral"},dataHandler:function(e){w[0].dataValue.value=e},dataValue:g(),show_error:g(!1),error_message:"error"}],D=new Set;async function H(e){const a=e;(await W.getFacilities({name:a})).forEach(e=>{D.has(e.location_id)||(D.add(e.location_id),0==de.isEmpty(e.name)&&o.value.push({name:e.name,selected:!1,other:e}))})}function B(e=!0){void 0===_[0].dataValue.value||""==_[0].dataValue.value?_[0].show_error.value=!0:_[0].show_error.value=!1,_[0].show_error.value?e&&K("Please enter a valid date",4e3):async function(){const e={type:"Discharged Home",date:_[0].dataValue,reason:i[0].dataValue.value};await r.addOutcomeData(e,t.value)&&N({dataSaved:!1})}()}const U=a;function N(e={dataSaved:!0}){U("dataSaved",e)}const P=[{showAddItemButton:!0,addItemButton:!0,name:"save",btnFill:"clear",fn:B},{showAddItemButton:!0,addItemButton:!0,name:"cancel",btnFill:"clear",fn:function(){N()}}];return(e,a)=>(u(),s(y(k),null,{default:c(()=>[p(y(S),null,{default:c(()=>[p(y(V),null,{default:c(()=>[...a[0]||(a[0]=[v("Discharged Home",-1)])]),_:1})]),_:1}),p(y(E),null,{default:c(()=>[p(y(C),null,{default:c(()=>[p(y(n),null,{default:c(()=>[f("div",null,[p(X,{place_holder:_[0].placeHolder,onDateUpDated:_[0].dataHandler,date_prop:_[0].dataValue.value},null,8,["place_holder","onDateUpDated","date_prop"]),f("div",null,[_[0].show_error.value?(u(),s(y(l),{key:0,class:"error-label"},{default:c(()=>[v(m(_[0].error_message),1)]),_:1})):x("",!0)])])]),_:1})]),_:1}),P[0].showAddItemButton?(u(),s(y(C),{key:0,class:"action-buttons-row"},{default:c(()=>[P[0].addItemButton?(u(),s(J,{key:0,name:P[0].name,fill:P[0].btnFill,icon:y(A),"onClicked:btn":P[0].fn},null,8,["name","fill","icon","onClicked:btn"])):x("",!0),P[1].addItemButton?(u(),s(J,{key:1,name:P[1].name,fill:P[1].btnFill,icon:y(F),"onClicked:btn":P[1].fn},null,8,["name","fill","icon","onClicked:btn"])):x("",!0)]),_:1})):x("",!0)]),_:1})]),_:1}))}}),ye=e("a",j(be,[["__scopeId","data-v-b5701ac2"]])),we={class:"date-results-container"},xe={class:"date-buttons-container"},De={key:0,class:"validation-message"},Ie=j({__name:"DatePillSelector",props:{availableDates:{type:Array,required:!0,default:()=>[]}},emits:["dateSelected"],setup(e,{expose:a,emit:t}){const l=e,n=t,o=g(null),r=g(!1),p=e=>{const a=new Date(e);return isNaN(a)?e:a.toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric"})};return a({validateSelection:()=>null===o.value?(r.value=!0,!1):(r.value=!1,!0),getSelectedDate:()=>null!==o.value?l.availableDates[o.value]:null}),(a,t)=>(u(),d("div",we,[f("div",xe,[(u(!0),d(h,null,i(e.availableDates,(e,a)=>(u(),s(y(U),{key:a,class:_(["date-button",{selected:o.value===a,"error-border":r.value&&o.value!==a}]),fill:"outline",shape:"round",onClick:e=>(e=>{o.value=e,r.value=!1,n("dateSelected",{date:l.availableDates[e],index:e})})(a)},{default:c(()=>[v(m(p(e)),1)]),_:2},1032,["class","onClick"]))),128))]),r.value?(u(),d("p",De," ⚠️ Please select an available date to proceed. ")):x("",!0)]))}},[["__scopeId","data-v-1e34f199"]]),ke=e("b",j(t({__name:"ReferToAnotherClinic",emits:["programDateSelected","referralDataReady","dataSaved"],setup(e,{emit:a}){const t=a,o=g([]),r=g([]),_=g([]),b=G(),w=Y(),{activeProgram:D}=N(b),H=g(!1),B=[{multi_Selection:!0,show_list_label:!0,unqueId:"qwerty_8_562",name_of_list:"Clinics",placeHolder:"Search for programs",items:[],listUpdatedFN:async function(e){o.value=e,function(){const e=[];o.value.forEach(a=>{1==a.selected&&e.push(a.other)});const a=e.map(e=>e.program_id);r.value=r.value.filter(e=>a.includes(e.id)),_.value=_.value.filter(e=>a.includes(e.programId)),e.forEach(e=>{r.value.some(a=>a.id===e.program_id)||r.value.push({id:e.program_id,name:e.name,dates:[],dateSelectorRef:null})}),B[0].show_error.value=0===e.length}(),H.value=!1,await L()},listFilteredFN:()=>{},searchTextFN:()=>{},use_internal_filter:!0,show_error:g(!1),error_message:"Please select one or more clinics/programs to refer to.",disabled:g(!1)}],U=async e=>{try{const a=ne.getUserID(),t=ne.getPatientID(),l=new ce(t,a);await l.createEncounter();const n=e.map(e=>({concept_id:2227,value_numeric:e.programId,obs_datetime:oe.sessionDate(),child:[{concept_id:11242,value_text:oe.toStandardHisFormat(e.date),obs_datetime:oe.sessionDate()}]}));await l.saveObservationList(n),re("Patient referral saved successfully"),P()}catch(a){K("Error saving referral data. Please try again.",4e3),console.error("Error in sub_refferal_data:",a)}};function P(e={dataSaved:!0}){t("dataSaved",e)}const R=[{showAddItemButton:!0,addItemButton:!0,name:"save",btnFill:"clear",fn:async()=>{H.value=!1;const e=r.value.length>0;if(B[0].show_error.value=!e,!e)return void console.log("Validation Failed: No programs selected.");let a=!0;_.value=[];for(const t of r.value)if(t.dateSelectorRef)if(t.dateSelectorRef.validateSelection()){const e=t.dateSelectorRef.getSelectedDate();e?_.value.push({programId:t.id,programName:t.name,date:e}):a=!1}else a=!1;else a=!1,console.error(`Date Selector ref is missing for program ${t.name}`);if(!a)return H.value=!0,void console.log("Validation Failed: Not all dates selected.");console.log("Validation Passed! Ready to refer patient with data:",_.value),t("referralDataReady",_.value),await O(_.value,U)}},{showAddItemButton:!0,addItemButton:!0,name:"cancel",btnFill:"clear",fn:()=>{P()}}],L=async()=>{const e=r.value.map(async e=>{try{const a=w.getAvailableDatesByProgramId(e.id,90,!0,4);e.dates=a}catch(a){console.error(`Error fetching dates for program ${e.name}:`,a),e.dates=[]}});await Promise.all(e)},O=async(e,a)=>{te(le,{class:"otherVitalsModal"},!0,{message:"Are you sure you want to add this Referral(s)?"},{cancel:e=>{},confirm:async t=>{1==t.detail&&await a(e)}})};return I(async()=>{await async function(){const e=D.value.program_id,a=await ae.getAllPrograms(),t=[];a.forEach(a=>{a.program_id!==e&&t.push({name:a.name,other:a,selected:!1})}),o.value=t}(),Z()}),(e,a)=>(u(),s(y(k),null,{default:c(()=>[p(y(S),null,{default:c(()=>[p(y(V),null,{default:c(()=>[...a[0]||(a[0]=[v("Refer to another clinic",-1)])]),_:1})]),_:1}),p(y(E),null,{default:c(()=>[p(y(C),null,{default:c(()=>[p(y(n),null,{default:c(()=>[p(y(l),{style:{margin:"10px","margin-left":"0px","margin-top":"0px",color:"grey"}},{default:c(()=>[...a[1]||(a[1]=[v(" Program(s)",-1),f("span",{style:{color:"#b42318"}},"*",-1)])]),_:1}),p(ee,{multiSelection:B[0].multi_Selection,show_label:B[0].show_list_label,uniqueId:B[0].unqueId,name_of_list:B[0].name_of_list,choose_place_holder:B[0].placeHolder,"items_-list":o.value,use_internal_filter:B[0].use_internal_filter,disabled:B[0].disabled.value,onItemListUpDated:B[0].listUpdatedFN,onItemListFiltered:B[0].listFilteredFN,onItemSearchText:B[0].searchTextFN},null,8,["multiSelection","show_label","uniqueId","name_of_list","choose_place_holder","items_-list","use_internal_filter","disabled","onItemListUpDated","onItemListFiltered","onItemSearchText"]),f("div",null,[B[0].show_error.value?(u(),s(y(l),{key:0,class:"error-label"},{default:c(()=>[v(m(B[0].error_message),1)]),_:1})):x("",!0)])]),_:1})]),_:1}),(u(!0),d(h,null,i(r.value,(e,o)=>(u(),s(y(C),{key:e.id},{default:c(()=>[p(y(n),null,{default:c(()=>[p(y(l),{style:{margin:"10px","margin-top":"20px","font-weight":"bold",display:"block"}},{default:c(()=>[a[2]||(a[2]=f("span",{style:{color:"gray"}},"Available Dates for:",-1)),v(" "+m(e.name),1)]),_:2},1024),p(Ie,{availableDates:e.dates,onDateSelected:a=>((e,a,l)=>{t("programDateSelected",{programId:a,programName:l,date:e}),H.value=!1;const n=_.value.findIndex(e=>e.programId===a),o={programId:a,programName:l,date:e};n>-1?_.value[n]=o:_.value.push(o)})(a,e.id,e.name),ref_for:!0,ref:a=>{a&&(e.dateSelectorRef=a)}},null,8,["availableDates","onDateSelected"])]),_:2},1024)]),_:2},1024))),128)),H.value?(u(),s(y(C),{key:0,style:{"margin-top":"-10px"}},{default:c(()=>[p(y(n),null,{default:c(()=>[p(y(l),{class:"error-label"},{default:c(()=>[...a[3]||(a[3]=[v(" ⚠️ Please select an available date for all selected programs. ",-1)])]),_:1})]),_:1})]),_:1})):x("",!0),p(y(C),{class:"action-buttons"},{default:c(()=>[p(y(n),{class:"ion-text-end"},{default:c(()=>[R[1].addItemButton?(u(),s(J,{key:0,name:R[1].name,fill:R[1].btnFill,icon:y(F),"onClicked:btn":R[1].fn},null,8,["name","fill","icon","onClicked:btn"])):x("",!0),r.value.length>0?(u(),s(J,{key:1,name:R[0].name,fill:R[0].btnFill,icon:y(A),"onClicked:btn":R[0].fn},null,8,["name","fill","icon","onClicked:btn"])):x("",!0)]),_:1})]),_:1})]),_:1})]),_:1}))}}),[["__scopeId","data-v-721c6ae2"]])),Ve={class:"dash_box"},Se={key:0,style:{"margin-top":"100px"}},Ce=t({name:"xxxComponent"}),He=t({...Ce,setup(e){const a=g("No outcome created yet"),t=g(!1),o=g(!0),i=g(""),_=g(!0),h=g(!1),w=z(),D=P(()=>w.outcomes),k=g(!1),V=g(!1),S=g(!1),C=g(!1),B=g(!1),A=g(!1),F=g(),E=g(null),U=g(null),N=g(null),L=g(null),O=g(null),T=g(null),j=g([{name:"Admitted for short stay",selected:!1},{name:"Referred out",selected:!1},{name:"Discharged Home",selected:!1},{name:"Send to Another Clinic",selected:!1}]);function M(e){j.value.forEach(a=>{1!=e.selected||e.name!=a.name&&e.type!=a.name||(i.value=a.name)})}function $(){D.value.length>0?_.value=!1:0==D.value.length&&0==h.value&&(_.value=!0)}function q(e){D.value.splice(e,1)}I(async()=>{$()}),b(()=>i.value,async e=>{1==k.value?k.value=!1:async function(){const e=i.value;i.value=e;const a=i.value;a==j.value[0].name?S.value=!0:S.value=!1,a==j.value[1].name?C.value=!0:C.value=!1,a==j.value[2].name?B.value=!0:B.value=!1,a==j.value[3].name?A.value=!0:A.value=!1}()}),b(()=>D.value.length,async e=>{$()});const K=e=>{q(e.index),M(e.item),E.value=e.item.other.location_data,U.value={reason:e.item.reason,date:e.item.date,time:e.item.time},N.value=e.item.other,L.value=e.item,"Discharged Home"===e.item.type&&(O.value=e.item,T.value={reason:e.item.reason,date:e.item.date})};function X(){V.value=!1,S.value=!1,B.value=!1,C.value=!1,j.value.forEach(e=>{e.selected=!1}),i.value=""}return(e,i)=>{const h=r("ion-row");return u(),s(y(R),null,{default:c(()=>[p(h,null,{default:c(()=>[p(y(n),null,{default:c(()=>[(u(),s(ie,{key:0,"onUpdate:removeItem":q,"onUpdate:editItem":K,displayData:D.value},null,8,["displayData"]))]),_:1})]),_:1}),_.value?(u(),s(h,{key:0},{default:c(()=>[f("span",Ve,m(a.value),1)]),_:1})):x("",!0),p(h,null,{default:c(()=>[p(y(n),null,{default:c(()=>[o.value?(u(),d("div",Se,[p(h,null,{default:c(()=>[p(y(H),{modelValue:F.value,"onUpdate:modelValue":[i[0]||(i[0]=e=>F.value=e),i[1]||(i[1]=e=>{return a=e,j.value.forEach(e=>{e.selected=!1}),F.value=a,F.value.selected=!0,void M(F.value);var a})],multiple:!1,taggable:!1,"hide-selected":!0,"close-on-select":!0,openDirection:"top","tag-placeholder":"find and select a referral type",placeholder:"find and select a referral type",selectLabel:"",label:"name",searchable:!0,disabled:!1,onSearchChange:()=>{},"track-by":"name",options:j.value},null,8,["modelValue","options"]),f("div",null,[t.value?(u(),s(y(l),{key:0,class:"error-label"},{default:c(()=>[...i[2]||(i[2]=[v(m("please select a type"),-1)])]),_:1})):x("",!0)])]),_:1})])):x("",!0)]),_:1})]),_:1}),S.value?(u(),s(me,{key:1,onDataSaved:X,selected_ward_prop:N.value,admitted_other_props:L.value},null,8,["selected_ward_prop","admitted_other_props"])):x("",!0),C.value?(u(),s(he,{key:2,onDataSaved:X,selected_referral_data:E.value,selected_other_referral_data:U.value},null,8,["selected_referral_data","selected_other_referral_data"])):x("",!0),B.value?(u(),s(ye,{key:3,onDataSaved:X,selected_discharged_prop:O.value,selected_discharged_data:T.value},null,8,["selected_discharged_prop","selected_discharged_data"])):x("",!0),A.value?(u(),s(ke,{key:4,onDataSaved:X})):x("",!0)]),_:1})}}});e("O",j(He,[["__scopeId","data-v-2873182f"]]))}}});
