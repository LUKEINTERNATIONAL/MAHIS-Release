System.register(["./ReportMixin.vue_vue_type_script_lang-legacy-BKgnMbFt.js","./BaseTableReport-legacy-D19ADln6.js","./lodash-legacy-pOOc9Efu.js","./vendor-legacy-LYGlphH7.js","./index-legacy-BUiyYzvd.js","./DateInputField-legacy-D3lEKClP.js","./Export-legacy-DYPzdL1a.js"],function(t,e){"use strict";var s,a,i,n,o,r,l,d,u,h,m,c,g,p,y;return{setters:[t=>{s=t.t,a=t._,i=t.O},t=>{n=t.R},t=>{o=t.l},t=>{r=t.d,l=t.E,d=t.y,u=t.f,h=t.af,m=t.z,c=t.l},t=>{g=t._,p=t.P},t=>{y=t.D},null],execute:function(){const e=r({components:{DateInputField:y},data:()=>({})}),x=r({components:{ReportTemplate:n,IonPage:h,GetDataDuration:g(e,[["render",function(t,e,s,a,i,n){const o=l("DateInputField");return u(),d(o,{inputHeader:"",sectionHeaderFontWeight:20,unit:"hhj",input:"",icon:"",placeholder:"ika data",iconRight:"",inputWidth:"",inputValue:"",eventType:""})}]])},mixins:[a],data:()=>({title:"OPD Diagnosis",rows:[],reportService:{},customInfo:{label:"Total OPD Visits",value:0},columns:[[s.thTxt("Age Groups",{sortable:!1,exportable:!1}),s.thTxt("<6 months",{colspan:2,sortable:!1,exportable:!1}),s.thTxt("6 months < 5 yrs",{colspan:2,sortable:!1,exportable:!1}),s.thTxt("5 yrs < 14 yrs",{colspan:2,sortable:!1,exportable:!1}),s.thTxt("> 14 yrs",{colspan:2,sortable:!1,exportable:!1}),s.thTxt("",{sortable:!1,exportable:!1})],[s.thTxt("Diagnosis"),s.thTxt("F",{value:"Females <6 months"}),s.thTxt("M",{value:"Males <6 months"}),s.thTxt("F",{value:"Females 6 months < 5 yrs"}),s.thTxt("M",{value:"Males 6 months < 5 yrs"}),s.thTxt("F",{value:"Females 5 yrs < 14 yrs"}),s.thTxt("M",{value:"Males 5 yrs < 14 yrs"}),s.thTxt("F",{value:"Females > 14 yrs"}),s.thTxt("M",{value:"Males > 14 yrs"}),s.thTxt("Total")]]}),created(){this.fields=this.getDateDurationFields()},methods:{async init(t,e){this.reportService=new i,this.reportService.setStartDate(e.start_date),this.reportService.setEndDate(e.end_date),this.period=this.reportService.getDateIntervalPeriod(),this.rows=this.buildRows(await this.reportService.getDiagnosis());const s=await this.reportService.getAttendance();this.customInfo.value=s.length},totalDiagnosis:t=>Object.values(t).reduce((t,e)=>t+e,0),getDrillDownColumns:()=>[[s.thTxt("Patient ID"),s.thTxt("First Name"),s.thTxt("Last Name"),s.thTxt("Gender"),s.thTxt("Phone Number"),s.thTxt("Address")]],buildColumn(t,e="Drilldown Data"){return o.isEmpty(t)?s.td(0):s.tdLink(t.length,async()=>this.drilldownData(e,this.getDrillDownColumns(),t,async t=>await Promise.all(t.map(async t=>{await p.findByID(t);const e=new p;return[s.td(t),s.td(e.getGivenName()),s.td(e.getFamilyName()),s.td(e.getGender()),s.td(e.getPhoneNumber()),s.td(`${e.getCurrentDistrict()}, ${e.getCurrentVillage()}, ${e.getClosestLandmark()}`)]}))))},buildRows(t){if(o.isEmpty(t))return[];const e=[];return Object.keys(t).forEach(a=>{const i=o.get(t[a],"F.0-5 months",[]),n=o.get(t[a],"M.0-5 months",[]),r=o.get(t[a],"F.6 mth < 5 yrs",[]),l=o.get(t[a],"M.6 mth < 5 yrs",[]),d=o.get(t[a],"F.5-14 yrs",[]),u=o.get(t[a],"M.5-14 yrs",[]),h=o.get(t[a],"F.>= 14 years",[]),m=o.get(t[a],"M.>= 14 years",[]);e.push([s.td(a,{style:{textAlign:"left"}}),this.buildColumn(i,`under 6 months females diagnosed with ${a}`),this.buildColumn(n,`under 6 months males diagnosed with ${a}`),this.buildColumn(r,`under 5 years females diagnosed with ${a}`),this.buildColumn(l,`under 5 years males diagnosed with ${a}`),this.buildColumn(d,`under 14 years females diagnosed with ${a}`),this.buildColumn(u,`under 14 years males diagnosed with ${a}`),this.buildColumn(h,`over 14 years females diagnosed with ${a}`),this.buildColumn(m,`over 14 years males diagnosed with ${a}`),this.buildColumn([...r,...l,...i,...n,...d,...u,...h,...m],`Total diagnosed with ${a}`)])}),e.sort((t,e)=>t[0].td<e[0].td?-1:t[0].td>e[0].td?1:0)}}});t("default",g(x,[["render",function(t,e,s,a,i,n){const o=l("report-template"),r=l("ion-page");return u(),d(r,null,{default:m(()=>[c(o,{title:t.title,rows:t.rows,fields:t.fields,columns:t.columns,period:t.period,reportPrefix:"Clinic",customInfo:t.customInfo,onReportConfiguration:t.init},null,8,["title","rows","fields","columns","period","customInfo","onReportConfiguration"])]),_:1})}]]))}}});
